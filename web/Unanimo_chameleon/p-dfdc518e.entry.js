import{r as t,g as s,f as e,h as i}from"./p-7af91c05.js";import{R as n,r as o,b as r,a as c,c as a,d as u}from"./p-6d91f415.js";import{r as l,i as d}from"./p-23a9d308.js";import{S as f}from"./p-2a2bca47.js";import{L as h}from"./p-625020d1.js";const m="--ch-layout-splitter-fixed-sizes-sum";const p=0;const b=t=>{const s=t.item.id;return t.parentItem.items.findIndex((t=>t.id===s))};const x=(t,s)=>s==="columns"?t.clientX:t.clientY;const z=(t,s)=>s==="columns"?t.left:t.top;const y=t=>Number(t.size.replace("fr","").trim());const v=(t,s="size")=>{const e=s==="size"?t.size:t.minSize;return Number(e.replace("px","").trim())};const g=t=>t.size.includes("px");const k=t=>t.minSize&&t.minSize!=="0px";const w=t=>!g(t.item)&&k(t.item)?`minmax(${t.item.minSize},${t.actualSize})`:t.actualSize;const $=(t,s,e)=>t.map(((t,i)=>t.dragBar?.hidden!==true&&i!==e?`${w(s.get(t.id))} ${t.dragBar?.size??0}px`:w(s.get(t.id)))).join(" ");const S=t=>{const s=y(t);const e=`${s*100}%`;return t.fixedOffsetSize?`calc(${e} + var(${m}) * ${-s} + ${t.fixedOffsetSize}px)`:`calc(${e} + var(${m}) * ${-s})`};const _=t=>g(t)?t.size:S(t);const I=(t,s)=>{const e=`${s}px`;t.item.size=e;t.actualSize=e};const R=(t,s)=>I(t,v(t.item)+s);const D=(t,s)=>{const e=`${s}fr`;t.item.size=e;t.actualSize=S(t.item)};const M=(t,s)=>D(t,y(t.item)+s);const j=(t,s)=>{const e=t.item;e.fixedOffsetSize=s;t.actualSize=_(e)};const A=(t,s)=>j(t,s+(t.item.fixedOffsetSize??0));const C=t=>{if(k(t)&&v(t)<v(t,"min")){t.size=t.minSize}};const L=(t,s)=>{const e=t.container.querySelector(`[id="${s.item.id}"]`);return t.direction==="columns"?e.clientWidth:e.clientHeight};const B=(t,s,e)=>{if(e.mouseEvent===undefined){return{status:"ok"}}const i=e.dragBar.getBoundingClientRect();const n=z(i,e.direction);const o=x(e.mouseEvent,e.direction);if(t===0){const t=e.direction==="columns"&&e.RTL?o>n:o<n;if(t){return{status:"deny"}}}if(s===0){const t=e.direction==="columns"&&e.RTL?o<n:o>n;if(t){return{status:"deny"}}}return{status:"ok"}};const F=(t,s,e,i,n,o)=>{const r=k(t.item)?v(t.item,"min"):p;const c=e==="px"?v(t.item):L(o,t);const a=c-r;if(a+n<=0){return{status:a===0?"deny":"not-enough-space",availableIncrement:a}}const u=k(s.item)?v(s.item,"min"):p;const l=i==="px"?v(s.item):L(o,s);const d=l-u;if(d-n<=0){return{status:d===0?"deny":"not-enough-space",availableIncrement:d}}return B(a,d,o)};const H=(t,s)=>P(t.items,s,n);function P(t,s,e){let i=0;let n=0;const o=t.length-1;t.forEach(((t,s)=>{if(g(t)){C(t);n+=v(t)}else{i+=y(t)}n+=(t.fixedOffsetSize??0)+(s!==o?t.dragBar?.size??0:0)}));if(i>0){t.forEach((t=>{if(!g(t)){const s=y(t);const e=s/i;t.size=`${e}fr`}}))}t.forEach((t=>{const i={item:t,parentItem:e,actualSize:_(t)};if(t.items!=null){const e=t;const n=P(e.items,s,e);i.fixedSizesSum=n}s.set(t.id,i)}));return n}const T={"px-px":(t,s,e)=>{R(t,e);R(s,-e)},"px-fr":(t,s,e)=>{R(t,e);A(s,-e)},"fr-px":(t,s,e)=>{A(t,e);R(s,-e)},"fr-fr":(t,s,e,i)=>{const n=e/i;M(t,n);M(s,-n)}};const E=(t,s,e,i,n)=>{const o=g(t.item)?"px":"fr";const r=g(s.item)?"px":"fr";let c=e;const a=F(t,s,o,r,e,n);if(a.status==="deny"){return false}if(a.status==="not-enough-space"){c=a.availableIncrement*Math.sign(c)}T[`${o}-${r}`](t,s,c,i);return true};const N=(t,s,e,i)=>{const o=t.direction==="columns"&&t.RTL?-e:e;const r=s.get(t.itemStartId);const c=s.get(t.itemEndId);const a=r.parentItem===n?t.fixedSizesSumRoot:s.get(r.parentItem.id).fixedSizesSum;const u=t.layoutItems;const l=t.containerSize-a;const d=E(r,c,o,l,t);if(!d){return}t.container.style.setProperty(i,$(u,s,u.length-1));t.dragBar.ariaValueText=r.actualSize};const O=0;const U=(t,s)=>{const e=s.get(t);let i=undefined;let n=O;if(!e){return{success:false,reconnectedSubtree:i,fixedSizesSumDecrement:n}}const o=[];const r=b(e);const c=e.parentItem;const a=c.items;const u=r===0?1:r-1;const d=a[u];o.push([a,r,t]);if(a.length>2){n=K(e,s.get(d.id))}else if(a.length===2){const t=s.get(c.id);const e=s.get(d.id);i={nodeToRemove:d.id,nodeToReconnect:c.id};if(d.items!=null){d.items.forEach((t=>{s.get(t.id).parentItem=c}))}t.fixedSizesSum=e.fixedSizesSum;delete c.items;Object.keys(d).forEach((t=>{if(t!=="id"&&t!=="size"&&t!=="dragBar"&&t!=="fixedOffsetSize"&&t!=="sticky"){c[t]=d[t]}}));s.delete(d.id)}else;o.forEach((t=>{l(t[0],t[1]);s.delete(t[2])}));return{success:true,reconnectedSubtree:i,fixedSizesSumDecrement:n}};function K(t,s,e){const i=t.item;const n=s.item;if(g(i)&&g(n)){R(s,v(i));return O}if(g(i)){const t=v(i);let e=t;const o=n.fixedOffsetSize;if(o!=null){e+=o;A(s,-o)}return e}if(g(n)){return O}if(i.fixedOffsetSize!=null){A(t,i.fixedOffsetSize)}const o=y(i)+y(n);D(s,o);return O}const V=(t,s,e,i,n,o)=>{const r=n.get(t);if(!r){return{success:false}}const c=n.get(s);if(!c){return{success:false}}const a=b(c);const u=e==="before"?a:a+1;const l=r.item.items;if(u===l.length){l.push(i)}else{d(l,i,u)}const f={item:i,parentItem:r.item,actualSize:undefined};if(o){const t=g(c.item);const s=(t?v(c.item):y(c.item))/2;if(t){I(f,s);I(c,s)}else{const t=c.item.fixedOffsetSize;if(t){j(f,t/2);j(c,t/2)}D(f,s);D(c,s)}}n.set(i.id,f);return{success:true,fixedSizesSumIncrement:i.dragBar?.size}};const q='*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{--ch-drag-bar__size:5px;display:grid;position:relative;block-size:100%;inline-size:100%}.bar{--position-fix:calc((var(--size, 0px) - var(--ch-drag-bar__size)) / 2);position:relative;inline-size:100%;block-size:100%;background-color:currentColor;z-index:1}.bar[aria-disabled]{pointer-events:none}.bar:focus-visible{outline:unset}.bar::after{content:"";display:-ms-flexbox;display:flex;position:absolute;background-color:currentColor;opacity:0;-webkit-transition:opacity 0s linear;transition:opacity 0s linear}.bar:is(:active,:focus-visible,:hover)::after{opacity:1}.bar:hover::after{-webkit-transition-delay:250ms;transition-delay:250ms}.sticky{position:-webkit-sticky;position:sticky;z-index:1}.leaf{display:grid}.group{display:grid;position:relative}.direction--columns{grid-template-columns:var(--ch-layout-splitter__distribution)}.direction--columns>.bar{cursor:ew-resize}.direction--columns>.bar::after{block-size:100%;inline-size:var(--ch-drag-bar__size);-webkit-margin-start:var(--position-fix);margin-inline-start:var(--position-fix)}.direction--rows{grid-template-rows:var(--ch-layout-splitter__distribution)}.direction--rows>.bar{cursor:ns-resize}.direction--rows>.bar::after{block-size:var(--ch-drag-bar__size);inline-size:100%;-webkit-margin-before:var(--position-fix);margin-block-start:var(--position-fix)}';const G=q;const J="--ch-layout-splitter__distribution";const Q="inset-block-start";const W="inset-block-end";const X="inset-inline-start";const Y="inset-inline-end";const Z=t=>`group direction--${t}`;const tt=(t,s,e,i)=>({[J]:$(t,s,t.length-1),[m]:`${e}px`,[Q]:i?.blockStart,[W]:i?.blockEnd,[X]:i?.inlineStart,[Y]:i?.inlineEnd});const st=(t,s)=>`${t[s].id} ${t[s+1].id}`;const et="ArrowUp";const it="ArrowRight";const nt="ArrowDown";const ot="ArrowLeft";const rt=class{constructor(s){t(this,s);this.barAccessibleName="Resize";this.dragBarDisabled=false;this.incrementWithKeyboard=2;this.model={id:"root",direction:"columns",items:[]}}#t;#s;#e;#i;#n;#o=new Map;get el(){return s(this)}modelChanged(t){this.#r(t)}async refreshLayout(){e(this)}async addSiblingLeaf(t,s,i,o,r){const c=V(t,s,i,o,this.#o,r);if(c.success){const s=c.fixedSizesSumIncrement;if(s){const e=this.#o.get(t).parentItem;if(e===n){this.#n+=s}else{this.#o.get(e.id).fixedSizesSum+=s}}e(this)}return c}async removeItem(t){const s=this.#o.get(t).parentItem;const i=U(t,this.#o);if(i.success){const t=i.fixedSizesSumDecrement;if(t!==O){if(s===n){this.#n-=t}else{this.#o.get(s.id).fixedSizesSum-=t}}e(this)}return i}#c=t=>{t.preventDefault();this.#i=x(t,this.#s.direction);this.#s.mouseEvent=t;this.#t.perform(this.#a)};#a=t=>{N(this.#s,this.#o,t??this.#i-this.#e,J);this.#e=this.#i};#u=()=>{document.removeEventListener("mousemove",this.#c,{capture:true})};#l=()=>{if(this.#t){this.#t.cancel()}this.#u();o();r();document.removeEventListener("mouseup",this.#l,{capture:true})};#d=(t,s,e,i)=>{const n=i.target;const o=n.parentElement;this.#s={container:o,containerSize:t==="columns"?o.clientWidth:o.clientHeight,direction:t,dragBar:n,fixedSizesSumRoot:this.#n,itemStartId:e[s].id,itemEndId:e[s+1].id,layoutItems:e,mouseEvent:undefined,RTL:c()}};#f=(t,s,e)=>i=>{i.preventDefault();this.#t??=new f;this.#d(t,s,e,i);a(t==="columns"?"ew-resize":"ns-resize");u();const n=x(i,t);this.#e=n;this.#i=n;document.addEventListener("mousemove",this.#c,{capture:true});document.addEventListener("mouseup",this.#l,{capture:true,passive:true})};#h=(t,s,e)=>i=>{if(t==="rows"&&i.code!==et&&i.code!==nt||t==="columns"&&i.code!==ot&&i.code!==it){return}i.preventDefault();this.#d(t,s,e,i);const n=i.code===it||i.code===nt;this.#a(n?this.incrementWithKeyboard:-this.incrementWithKeyboard)};#m=(t,s,e,n,o)=>{const r=this.#o.get(n.id);const c=!!n.sticky;return[n.items?i("div",{id:n.id,class:{[Z(n.direction)]:true,sticky:c},part:n.id,style:tt(n.items,this.#o,r.fixedSizesSum,n.sticky)},this.#p(n.direction,n.items,n.items.length-1)):i("div",{id:n.id,class:{leaf:true,sticky:c},style:c?{[Q]:n.sticky?.blockStart,[W]:n.sticky?.blockEnd,[X]:n.sticky?.inlineStart,[Y]:n.sticky?.inlineEnd}:undefined},i("slot",{key:n.id,name:n.id})),n.dragBar?.hidden!==true&&o!==s&&i("div",{role:"separator","aria-controls":st(e,o),"aria-disabled":this.dragBarDisabled?"true":null,"aria-label":this.barAccessibleName,"aria-orientation":t==="columns"?"vertical":"horizontal","aria-valuetext":r.actualSize,title:this.barAccessibleName,tabindex:"0",class:"bar",part:n.dragBar?.part?`${h.BAR} ${n.dragBar.part}`:h.BAR,style:n.dragBar?.size?{"--size":`${n.dragBar.size}px`}:null,onKeyDown:!this.dragBarDisabled?this.#h(t,o,e):null,onMouseDown:!this.dragBarDisabled?this.#f(t,o,e):null})]};#p=(t,s,e)=>s.map(((i,n)=>this.#m(t,e,s,i,n)));#r=t=>{this.#o.clear();if(t?.items?.length>0){this.#n=H(t,this.#o)}};connectedCallback(){this.#r(this.model)}disconnectedCallback(){this.#l()}render(){const t=this.model;if(t?.items==null){return""}return i("div",{class:Z(t.direction),style:tt(t.items,this.#o,this.#n)},this.#p(t.direction,t.items,t.items.length-1))}static get watchers(){return{model:["modelChanged"]}}};rt.style=G;export{rt as ch_layout_splitter};
//# sourceMappingURL=p-dfdc518e.entry.js.map