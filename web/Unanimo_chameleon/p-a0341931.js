import{h as e,r as o,g as t,H as c}from"./p-7af91c05.js";import{a as r}from"./p-a859514b.js";import{S as n}from"./p-625020d1.js";import{s as a,t as l,r as s,b as i}from"./p-6b18a5c1.js";const d=(e,o)=>e===o;const h={element:(o,t,c)=>{const r=o.properties.className;const n=d(o,c);const a=r?r.join(" "):undefined;return e("span",{class:{[a]:!!a,[t]:n}},u(o,t,c))},text:e=>e.value};function u(e,o,t){return e.children.map((e=>h[e.type](e,o,t)))}const _=e=>{const o=e.children.at(-1);if(o.children?.length>0){return _(o)}return e};const m=async(e,o,t,c)=>{const r=s(o);await a(r);const n=l(r,e);const i=t?_(n):undefined;return{renderedCode:u(n,c,i),lastNestedChildIsRoot:n===i}};const f=':host{--ch-code__addition:currentColor;--ch-code__attr:currentColor;--ch-code__attribute:currentColor;--ch-code__built-in:currentColor;--ch-code__bullet:currentColor;--ch-code__class:currentColor;--ch-code__code:currentColor;--ch-code__comment:currentColor;--ch-code__deletion:currentColor;--ch-code__doctag:currentColor;--ch-code__formula:currentColor;--ch-code__function:currentColor;--ch-code__function-variable:currentColor;--ch-code__keyword:currentColor;--ch-code__link:currentColor;--ch-code__literal:currentColor;--ch-code__meta:currentColor;--ch-code__meta__keyword:currentColor;--ch-code__meta__string:currentColor;--ch-code__name:currentColor;--ch-code__number:currentColor;--ch-code__operator:currentColor;--ch-code__regexp:currentColor;--ch-code__quote:currentColor;--ch-code__selector-attr:currentColor;--ch-code__selector-class:currentColor;--ch-code__selector-id:currentColor;--ch-code__selector-pseudo:currentColor;--ch-code__selector-tag:currentColor;--ch-code__string:currentColor;--ch-code__subst:currentColor;--ch-code__symbol:currentColor;--ch-code__tag:currentColor;--ch-code__template-tag:currentColor;--ch-code__template-variable:currentColor;--ch-code__title:currentColor;--ch-code__title-class:currentColor;--ch-code__title-class-inherited:currentColor;--ch-code__title-function:currentColor;--ch-code__type:currentColor;--ch-code__variable:currentColor;--ch-code__variable-language:currentColor;--ch-code-indicator-color:currentColor;--ch-code-inline-size:1.125ch;--ch-code-block-size:1em;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;font-family:monospace;white-space:pre;overflow:auto}code{font:inherit;contain:inline-size}.hljs-addition{color:var(--ch-code__addition)}.hljs-attr{color:var(--ch-code__attr)}.hljs-attribute{color:var(--ch-code__attribute)}.hljs-subst{color:var(--ch-code__subst)}.hljs-built_in{color:var(--ch-code__built-in)}.hljs-bullet{color:var(--ch-code__bullet)}.hljs-class{color:var(--ch-code__class)}.hljs-code{color:var(--ch-code__code)}.hljs-comment{color:var(--ch-code__comment)}.hljs-deletion{color:var(--ch-code__deletion)}.hljs-doctag{color:var(--ch-code__doctag)}.hljs-formula{color:var(--ch-code__formula)}.hljs-function{color:var(--ch-code__function)}.hljs-function.variable_{color:var(--ch-code__function-variable)}.hljs-keyword{color:var(--ch-code__keyword)}.hljs-link{color:var(--ch-code__link)}.hljs-literal{color:var(--ch-code__literal)}.hljs-meta{color:var(--ch-code__meta)}.hljs-meta .hljs-keyword{color:var(--ch-code__meta__keyword)}.hljs-meta .hljs-string{color:var(--ch-code__meta__string)}.hljs-name{color:var(--ch-code__name)}.hljs-number{color:var(--ch-code__number)}.hljs-operator{color:var(--ch-code__operator)}.hljs-regexp{color:var(--ch-code__regexp)}.hljs-quote{color:var(--ch-code__quote)}.hljs-selector-attr{color:var(--ch-code__selector-attr)}.hljs-selector-class{color:var(--ch-code__selector-class)}.hljs-selector-id{color:var(--ch-code__selector-id)}.hljs-selector-pseudo{color:var(--ch-code__selector-pseudo)}.hljs-selector-tag{color:var(--ch-code__selector-tag)}.hljs-string{color:var(--ch-code__string)}.hljs-symbol{color:var(--ch-code__symbol)}.hljs-tag{color:var(--ch-code__tag)}.hljs-template-tag{color:var(--ch-code__template-tag)}.hljs-template-variable{color:var(--ch-code__template-variable)}.hljs-title{color:var(--ch-code__title)}.hljs-title.class_{color:var(--ch-code__title-class)}.hljs-title.class_.inherited__{color:var(--ch-code__title-class-inherited)}.hljs-title.function_{color:var(--ch-code__title-function)}.hljs-type{color:var(--ch-code__type)}.hljs-variable{color:var(--ch-code__variable)}.hljs-variable.language_{color:var(--ch-code__variable-language)}:host(.ch-code-show-indicator) .last-nested-child::after,:host(.ch-code-show-indicator):empty::after{content:"";display:-ms-inline-flexbox;display:inline-flex;inline-size:var(--ch-code-inline-size);block-size:var(--ch-code-block-size);background-color:var(--ch-code-indicator-color);-webkit-transform:translateY(0.125em);transform:translateY(0.125em);-webkit-animation:twinkle 0.75s linear infinite;animation:twinkle 0.75s linear infinite}@-webkit-keyframes twinkle{60%{opacity:1}75%{opacity:0}}@keyframes twinkle{60%{opacity:1}75%{opacity:0}}';const w=f;const b=class{constructor(e){o(this,e);this.JSXCodeBlock=undefined;this.language=undefined;this.lastNestedChildClass="last-nested-child";this.showIndicator=false;this.value=undefined}#e=true;get el(){return t(this)}#o=()=>this.language||"plaintext";#t=()=>m(this.value,this.#o(),this.showIndicator,this.lastNestedChildClass);connectedCallback(){r(this.el.shadowRoot.adoptedStyleSheets)}async componentWillRender(){if(this.value){const e=await this.#t();this.JSXCodeBlock=e.renderedCode;this.#e=e.lastNestedChildIsRoot}else{this.JSXCodeBlock="";this.#e=true}}render(){const o=this.showIndicator&&this.#e;const t=this.#o();return e(c,{key:"58323a5d6eae889e17a53adf4a25968d8de500a6",class:{"ch-code-show-indicator":this.showIndicator,[n]:true}},e("code",{key:"3154e0d0a1bc2aa4f5c06ec6b2af6ccf4873ac0a",class:{[`hljs language-${t}`]:true,[this.lastNestedChildClass]:o},part:`code language-${t}`},this.JSXCodeBlock))}};b.style=w;const v=new Map;const p=new Map;const k=e=>{const o=v.get(e);if(o!==undefined){return o}const t=p.get(e);if(t!==undefined){return t.promise}let c;const r=new Promise((e=>{c=e}));p.set(e,{promise:r,resolver:c});return r};const g=(e,o)=>{v.set(e,o);const t=p.get(e);if(t!==undefined){t.resolver(o)}};const y=()=>{v.clear();p.clear()};const C=/\{#(.*?)\}/;const j="last-nested-child";let x;let z;const R=e=>e===z;const q=e=>R(e)?j:undefined;const I={1:(o,t,c)=>e("h1",{class:t,id:c},o),2:(o,t,c)=>e("h2",{class:t,id:c},o),3:(o,t,c)=>e("h3",{class:t,id:c},o),4:(o,t,c)=>e("h4",{class:t,id:c},o),5:(o,t,c)=>e("h5",{class:t,id:c},o),6:(o,t,c)=>e("h6",{class:t,id:c},o)};const N={left:"ch-markdown-table-column-start",center:"ch-markdown-table-column-center",right:"ch-markdown-table-column-end"};const P=async(o,t)=>{const c=o.children[0];const r=o.children.slice(1);const n=c.children.length;const a=c.children.map((e=>D(e,t)));const l=[];r.forEach((e=>{e.children.forEach((e=>{l.push(D(e,t))}))}));const s=await Promise.allSettled(a);const i=await Promise.allSettled(l);const d=s.map((e=>e.value));const h=i.map((e=>e.value));const u=o.align.map((e=>N[e]));return e("table",null,e("thead",null,e("tr",null,c.children.map(((o,t)=>e("th",{class:{[u[t]]:!!u[t],[j]:o===z}},d[t]))))),e("tbody",null,r.map(((o,t)=>e("tr",null,o.children.map(((o,c)=>e("td",{class:{[u[c]]:!!u[c],[j]:o===z}},h[n*t+c]))))))))};const T={blockquote:async(o,t)=>{const c=await D(o,t);return e("blockquote",{class:q(o)},c)},break:()=>e("br",null),code:(e,o)=>o.codeRender({lastNestedChildClass:o.lastNestedChildClass,language:e.lang,plainText:e.value,showIndicator:o.showIndicator&&R(e)}),definition:e=>g(e.identifier,e.url),delete:async(o,t)=>{const c=await D(o,t);return e("del",{class:q(o)},c)},emphasis:async(o,t)=>{const c=await D(o,t);return e("em",{class:q(o)},c)},footnoteDefinition:()=>"",footnoteReference:()=>"",heading:async(e,o)=>{const t=e.children.at(-1);let c;if(t?.type==="text"){const e=t.value.match(C);if(e&&e.length>1){c=e[1];t.value=t.value.replace(`{#${c}}`,"")}}const r=await D(e,o);const n=q(e);return I[e.depth](r,n,c)},html:async(e,o)=>{if(o.rawHTML&&!x){x=(await import("./p-713a8936.js")).rawHTMLToJSX}return o.rawHTML?x(e.value,o.allowDangerousHtml,o.showIndicator&&R(e)):e.value},image:o=>e("img",{src:o.url,alt:o.alt,title:o.title,loading:"lazy"}),imageReference:()=>"",inlineCode:o=>e("code",{class:"hljs"},o.value),link:async(o,t)=>{if(o.url.includes("javascript:")){return}const c=await D(o,t);return e("a",{"aria-label":o.title||null,title:o.title||null,class:q(o),href:o.url},c)},linkReference:async(o,t)=>{const c=await D(o,t);let r="";if(o.referenceType==="shortcut"){r=await k(o.identifier)}if(r.includes("javascript:")){return}return e("a",{"aria-label":o.label||null,class:q(o),href:r},c)},list:async(o,t)=>{const c=await D(o,t);return o.ordered?e("ol",{class:q(o),start:o.start},c):e("ul",{class:q(o)},c)},listItem:async(o,t)=>{const c=await D(o,t);return e("li",{class:q(o)},c)},paragraph:async(o,t)=>{const c=await D(o,t);return e("p",{class:q(o)},c)},strong:async(o,t)=>{const c=await D(o,t);return e("strong",{class:q(o)},c)},table:P,text:e=>e.value,thematicBreak:()=>e("hr",null),yaml:()=>""};const Y=e=>{const o=e.children.at(-1);if(o.children?.length>0){return Y(o)}if(o.type==="code"||o.type==="html"){return o}return e};async function D(e,o){const t=e.children.length;const c=new Array(t);for(let r=0;r<t;r++){const t=e.children[r];c.push(T[t.type](t,o))}const r=await Promise.allSettled(c);return r.map((e=>e.value))}const H=async(e,o)=>{const t=i(e);z=Y(t);const c=await D(t,o);y();return c};const L=o=>e("ch-code",{language:o.language,lastNestedChildClass:o.lastNestedChildClass,showIndicator:o.showIndicator,value:o.plainText});const M=':where(button,a){all:unset;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer}button:disabled{pointer-events:none}*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}h1,h2,h3,h4,h5,h6,p{font:inherit;margin:0;padding:0;color:inherit}:host{--ch-markdown-viewer-indicator-color:currentColor;--ch-markdown-viewer-inline-size:1.125ch;--ch-markdown-viewer-block-size:1em;display:grid;grid-auto-rows:-webkit-max-content;grid-auto-rows:max-content}:host(.ch-markdown-viewer-show-indicator) .last-nested-child::after,:host(.ch-markdown-viewer-show-indicator):empty::after{content:"";display:-ms-inline-flexbox;display:inline-flex;inline-size:var(--ch-markdown-viewer-inline-size);block-size:var(--ch-markdown-viewer-block-size);background-color:var(--ch-markdown-viewer-indicator-color);-webkit-transform:translateY(0.125em);transform:translateY(0.125em);-webkit-animation:twinkle 0.75s linear infinite;animation:twinkle 0.75s linear infinite}.ch-markdown-table-column-start{text-align:start}.ch-markdown-table-column-center{text-align:center}.ch-markdown-table-column-end{text-align:end}blockquote{margin-inline:0}hr{block-size:1px;margin:unset;padding:unset;border:unset;background-color:currentColor}table{display:block;overflow:auto;word-break:normal;border-spacing:0px;border-collapse:collapse}ch-code{--ch-code-indicator-color:var(--ch-markdown-viewer-indicator-color);--ch-code-inline-size:var(--ch-markdown-viewer-inline-size);--ch-code-block-size:var(--ch-markdown-viewer-block-size)}@-webkit-keyframes twinkle{60%{opacity:1}75%{opacity:0}}@keyframes twinkle{60%{opacity:1}75%{opacity:0}}';const S=M;const $=class{constructor(e){o(this,e);this.avoidFlashOfUnstyledContent=false;this.rawHtml=false;this.renderCode=undefined;this.showIndicator=false;this.theme="ch-markdown-viewer";this.value=undefined}#c;get el(){return t(this)}async componentWillRender(){if(!this.value){return}this.#c=await H(this.value,{allowDangerousHtml:true,codeRender:this.renderCode??L,lastNestedChildClass:j,rawHTML:this.rawHtml,showIndicator:this.showIndicator})}render(){if(!this.value){return""}return e(c,{class:this.showIndicator?"ch-markdown-viewer-show-indicator":undefined},this.theme&&e("ch-theme",{key:"theme",avoidFlashOfUnstyledContent:this.avoidFlashOfUnstyledContent,model:this.theme}),this.#c)}};$.style=S;export{b as C,j as L,$ as a};
//# sourceMappingURL=p-a0341931.js.map