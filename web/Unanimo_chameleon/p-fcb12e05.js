import{j as t,s as e}from"./p-d2060894.js";var n=Object.defineProperty,s=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={};((t,e,a,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of r(e))i.call(t,c)||c===a||n(t,c,{get:()=>e[c],enumerable:!(o=s(e,c))||o.enumerable})})(a,t,"default");var o=class{constructor(t,e){this._modeId=t,this._defaults=e,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange((()=>this._stopWorker())),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange((()=>this._updateExtraLibs()))}dispose(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()}_stopWorker(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null}async _updateExtraLibs(){if(!this._worker)return;const t=++this._updateExtraLibsToken,e=await this._worker.getProxy();this._updateExtraLibsToken===t&&e.updateExtraLibs(this._defaults.getExtraLibs())}_getClient(){return this._client||(this._client=(async()=>(this._worker=a.editor.createWebWorker({moduleId:"vs/language/typescript/tsWorker",label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath,inlayHintsOptions:this._defaults.inlayHintsOptions}}),this._defaults.getEagerModelSync()?await this._worker.withSyncedResources(a.editor.getModels().filter((t=>t.getLanguageId()===this._modeId)).map((t=>t.uri))):await this._worker.getProxy()))()),this._client}async getLanguageServiceWorker(...t){const e=await this._getClient();return this._worker&&await this._worker.withSyncedResources(t),e}},c={};function u(t,e,n=0){if(typeof t=="string")return t;if(t===void 0)return"";let s="";if(n){s+=e;for(let t=0;t<n;t++)s+="  "}if(s+=t.messageText,n++,t.next)for(const r of t.next)s+=u(r,e,n);return s}function l(t){return t?t.map((t=>t.text)).join(""):""}c["lib.d.ts"]=!0,c["lib.decorators.d.ts"]=!0,c["lib.decorators.legacy.d.ts"]=!0,c["lib.dom.d.ts"]=!0,c["lib.dom.iterable.d.ts"]=!0,c["lib.es2015.collection.d.ts"]=!0,c["lib.es2015.core.d.ts"]=!0,c["lib.es2015.d.ts"]=!0,c["lib.es2015.generator.d.ts"]=!0,c["lib.es2015.iterable.d.ts"]=!0,c["lib.es2015.promise.d.ts"]=!0,c["lib.es2015.proxy.d.ts"]=!0,c["lib.es2015.reflect.d.ts"]=!0,c["lib.es2015.symbol.d.ts"]=!0,c["lib.es2015.symbol.wellknown.d.ts"]=!0,c["lib.es2016.array.include.d.ts"]=!0,c["lib.es2016.d.ts"]=!0,c["lib.es2016.full.d.ts"]=!0,c["lib.es2017.d.ts"]=!0,c["lib.es2017.full.d.ts"]=!0,c["lib.es2017.intl.d.ts"]=!0,c["lib.es2017.object.d.ts"]=!0,c["lib.es2017.sharedmemory.d.ts"]=!0,c["lib.es2017.string.d.ts"]=!0,c["lib.es2017.typedarrays.d.ts"]=!0,c["lib.es2018.asyncgenerator.d.ts"]=!0,c["lib.es2018.asynciterable.d.ts"]=!0,c["lib.es2018.d.ts"]=!0,c["lib.es2018.full.d.ts"]=!0,c["lib.es2018.intl.d.ts"]=!0,c["lib.es2018.promise.d.ts"]=!0,c["lib.es2018.regexp.d.ts"]=!0,c["lib.es2019.array.d.ts"]=!0,c["lib.es2019.d.ts"]=!0,c["lib.es2019.full.d.ts"]=!0,c["lib.es2019.intl.d.ts"]=!0,c["lib.es2019.object.d.ts"]=!0,c["lib.es2019.string.d.ts"]=!0,c["lib.es2019.symbol.d.ts"]=!0,c["lib.es2020.bigint.d.ts"]=!0,c["lib.es2020.d.ts"]=!0,c["lib.es2020.date.d.ts"]=!0,c["lib.es2020.full.d.ts"]=!0,c["lib.es2020.intl.d.ts"]=!0,c["lib.es2020.number.d.ts"]=!0,c["lib.es2020.promise.d.ts"]=!0,c["lib.es2020.sharedmemory.d.ts"]=!0,c["lib.es2020.string.d.ts"]=!0,c["lib.es2020.symbol.wellknown.d.ts"]=!0,c["lib.es2021.d.ts"]=!0,c["lib.es2021.full.d.ts"]=!0,c["lib.es2021.intl.d.ts"]=!0,c["lib.es2021.promise.d.ts"]=!0,c["lib.es2021.string.d.ts"]=!0,c["lib.es2021.weakref.d.ts"]=!0,c["lib.es2022.array.d.ts"]=!0,c["lib.es2022.d.ts"]=!0,c["lib.es2022.error.d.ts"]=!0,c["lib.es2022.full.d.ts"]=!0,c["lib.es2022.intl.d.ts"]=!0,c["lib.es2022.object.d.ts"]=!0,c["lib.es2022.regexp.d.ts"]=!0,c["lib.es2022.sharedmemory.d.ts"]=!0,c["lib.es2022.string.d.ts"]=!0,c["lib.es2023.array.d.ts"]=!0,c["lib.es2023.d.ts"]=!0,c["lib.es2023.full.d.ts"]=!0,c["lib.es5.d.ts"]=!0,c["lib.es6.d.ts"]=!0,c["lib.esnext.d.ts"]=!0,c["lib.esnext.full.d.ts"]=!0,c["lib.esnext.intl.d.ts"]=!0,c["lib.scripthost.d.ts"]=!0,c["lib.webworker.d.ts"]=!0,c["lib.webworker.importscripts.d.ts"]=!0,c["lib.webworker.iterable.d.ts"]=!0;var h=class{constructor(t){this._worker=t}_textSpanToRange(t,e){let n=t.getPositionAt(e.start),s=t.getPositionAt(e.start+e.length),{lineNumber:r,column:i}=n,{lineNumber:a,column:o}=s;return{startLineNumber:r,startColumn:i,endLineNumber:a,endColumn:o}}},d=class{constructor(t){this._worker=t,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}isLibFile(t){return!!t&&t.path.indexOf("/lib.")===0&&!!c[t.path.slice(1)]}getOrCreateModel(t){const n=a.Uri.parse(t),s=a.editor.getModel(n);if(s)return s;if(this.isLibFile(n)&&this._hasFetchedLibFiles)return a.editor.createModel(this._libFiles[n.path.slice(1)],"typescript",n);const r=e.getExtraLibs()[t];return r?a.editor.createModel(r.content,"typescript",n):null}_containsLibFile(t){for(let e of t)if(this.isLibFile(e))return!0;return!1}async fetchLibFilesIfNecessary(t){this._containsLibFile(t)&&await this._fetchLibFiles()}_fetchLibFiles(){return this._fetchLibFilesPromise||(this._fetchLibFilesPromise=this._worker().then((t=>t.getLibFiles())).then((t=>{this._hasFetchedLibFiles=!0,this._libFiles=t}))),this._fetchLibFilesPromise}},p=class extends h{constructor(t,e,n,s){super(s),this._libFiles=t,this._defaults=e,this._selector=n,this._disposables=[],this._listener=Object.create(null);const r=t=>{if(t.getLanguageId()!==n)return;const e=()=>{const{onlyVisible:e}=this._defaults.getDiagnosticsOptions();e?t.isAttachedToEditor()&&this._doValidate(t):this._doValidate(t)};let s;const r=t.onDidChangeContent((()=>{clearTimeout(s),s=window.setTimeout(e,500)})),i=t.onDidChangeAttached((()=>{const{onlyVisible:n}=this._defaults.getDiagnosticsOptions();n&&(t.isAttachedToEditor()?e():a.editor.setModelMarkers(t,this._selector,[]))}));this._listener[t.uri.toString()]={dispose(){r.dispose(),i.dispose(),clearTimeout(s)}},e()},i=t=>{a.editor.setModelMarkers(t,this._selector,[]);const e=t.uri.toString();this._listener[e]&&(this._listener[e].dispose(),delete this._listener[e])};this._disposables.push(a.editor.onDidCreateModel((t=>r(t)))),this._disposables.push(a.editor.onWillDisposeModel(i)),this._disposables.push(a.editor.onDidChangeModelLanguage((t=>{i(t.model),r(t.model)}))),this._disposables.push({dispose(){for(const t of a.editor.getModels())i(t)}});const o=()=>{for(const t of a.editor.getModels())i(t),r(t)};this._disposables.push(this._defaults.onDidChange(o)),this._disposables.push(this._defaults.onDidExtraLibsChange(o)),a.editor.getModels().forEach((t=>r(t)))}dispose(){this._disposables.forEach((t=>t&&t.dispose())),this._disposables=[]}async _doValidate(t){const e=await this._worker(t.uri);if(t.isDisposed())return;const n=[],{noSyntaxValidation:s,noSemanticValidation:r,noSuggestionDiagnostics:i}=this._defaults.getDiagnosticsOptions();s||n.push(e.getSyntacticDiagnostics(t.uri.toString())),r||n.push(e.getSemanticDiagnostics(t.uri.toString())),i||n.push(e.getSuggestionDiagnostics(t.uri.toString()));const o=await Promise.all(n);if(!o||t.isDisposed())return;const c=o.reduce(((t,e)=>e.concat(t)),[]).filter((t=>(this._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(t.code)===-1)),u=c.map((t=>t.relatedInformation||[])).reduce(((t,e)=>e.concat(t)),[]).map((t=>t.file?a.Uri.parse(t.file.fileName):null));await this._libFiles.fetchLibFilesIfNecessary(u),t.isDisposed()||a.editor.setModelMarkers(t,this._selector,c.map((e=>this._convertDiagnostics(t,e))))}_convertDiagnostics(t,e){const n=e.start||0,s=e.length||1,{lineNumber:r,column:i}=t.getPositionAt(n),{lineNumber:o,column:c}=t.getPositionAt(n+s),l=[];return e.reportsUnnecessary&&l.push(a.MarkerTag.Unnecessary),e.reportsDeprecated&&l.push(a.MarkerTag.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(e.category),startLineNumber:r,startColumn:i,endLineNumber:o,endColumn:c,message:u(e.messageText,`\n`),code:e.code.toString(),tags:l,relatedInformation:this._convertRelatedInformation(t,e.relatedInformation)}}_convertRelatedInformation(t,e){if(!e)return[];const n=[];return e.forEach((e=>{let s=t;if(e.file&&(s=this._libFiles.getOrCreateModel(e.file.fileName)),!s)return;const r=e.start||0,i=e.length||1,{lineNumber:a,column:o}=s.getPositionAt(r),{lineNumber:c,column:l}=s.getPositionAt(r+i);n.push({resource:s.uri,startLineNumber:a,startColumn:o,endLineNumber:c,endColumn:l,message:u(e.messageText,`\n`)})})),n}_tsDiagnosticCategoryToMarkerSeverity(t){switch(t){case 1:return a.MarkerSeverity.Error;case 3:return a.MarkerSeverity.Info;case 0:return a.MarkerSeverity.Warning;case 2:return a.MarkerSeverity.Hint}return a.MarkerSeverity.Info}},f=class t extends h{get triggerCharacters(){return["."]}async provideCompletionItems(e,n,s,r){const i=e.getWordUntilPosition(n),o=new a.Range(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn),c=e.uri,u=e.getOffsetAt(n),l=await this._worker(c);if(e.isDisposed())return;const h=await l.getCompletionsAtPosition(c.toString(),u);if(!(!h||e.isDisposed()))return{suggestions:h.entries.map((s=>{let r=o;if(s.replacementSpan){const t=e.getPositionAt(s.replacementSpan.start),n=e.getPositionAt(s.replacementSpan.start+s.replacementSpan.length);r=new a.Range(t.lineNumber,t.column,n.lineNumber,n.column)}const i=[];return s.kindModifiers!==void 0&&s.kindModifiers.indexOf("deprecated")!==-1&&i.push(a.languages.CompletionItemTag.Deprecated),{uri:c,position:n,offset:u,range:r,label:s.name,insertText:s.name,sortText:s.sortText,kind:t.convertKind(s.kind),tags:i}}))}}async resolveCompletionItem(e,n){const s=e,r=s.uri,i=s.position,a=s.offset,o=await this._worker(r),c=await o.getCompletionEntryDetails(r.toString(),a,s.label);return c?{uri:r,position:i,label:c.name,kind:t.convertKind(c.kind),detail:l(c.displayParts),documentation:{value:t.createDocumentationString(c)}}:s}static convertKind(t){switch(t){case x.primitiveType:case x.keyword:return a.languages.CompletionItemKind.Keyword;case x.variable:case x.localVariable:return a.languages.CompletionItemKind.Variable;case x.memberVariable:case x.memberGetAccessor:case x.memberSetAccessor:return a.languages.CompletionItemKind.Field;case x.function:case x.memberFunction:case x.constructSignature:case x.callSignature:case x.indexSignature:return a.languages.CompletionItemKind.Function;case x.enum:return a.languages.CompletionItemKind.Enum;case x.module:return a.languages.CompletionItemKind.Module;case x.class:return a.languages.CompletionItemKind.Class;case x.interface:return a.languages.CompletionItemKind.Interface;case x.warning:return a.languages.CompletionItemKind.File}return a.languages.CompletionItemKind.Property}static createDocumentationString(t){let e=l(t.documentation);if(t.tags)for(const n of t.tags)e+=`\n\n${m(n)}`;return e}};function m(t){let e=`*@${t.name}*`;if(t.name==="param"&&t.text){const[n,...s]=t.text;e+=`\`${n.text}\``,s.length>0&&(e+=` — ${s.map((t=>t.text)).join(" ")}`)}else Array.isArray(t.text)?e+=` — ${t.text.map((t=>t.text)).join(" ")}`:t.text&&(e+=` — ${t.text}`);return e}var g=class t extends h{constructor(){super(...arguments),this.signatureHelpTriggerCharacters=["(",","]}static _toSignatureHelpTriggerReason(t){switch(t.triggerKind){case a.languages.SignatureHelpTriggerKind.TriggerCharacter:return t.triggerCharacter?t.isRetrigger?{kind:"retrigger",triggerCharacter:t.triggerCharacter}:{kind:"characterTyped",triggerCharacter:t.triggerCharacter}:{kind:"invoked"};case a.languages.SignatureHelpTriggerKind.ContentChange:return t.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case a.languages.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}}async provideSignatureHelp(e,n,s,r){const i=e.uri,a=e.getOffsetAt(n),o=await this._worker(i);if(e.isDisposed())return;const c=await o.getSignatureHelpItems(i.toString(),a,{triggerReason:t._toSignatureHelpTriggerReason(r)});if(!c||e.isDisposed())return;const u={activeSignature:c.selectedItemIndex,activeParameter:c.argumentIndex,signatures:[]};return c.items.forEach((t=>{const e={label:"",parameters:[]};e.documentation={value:l(t.documentation)},e.label+=l(t.prefixDisplayParts),t.parameters.forEach(((n,s,r)=>{const i=l(n.displayParts),a={label:i,documentation:{value:l(n.documentation)}};e.label+=i,e.parameters.push(a),s<r.length-1&&(e.label+=l(t.separatorDisplayParts))})),e.label+=l(t.suffixDisplayParts),u.signatures.push(e)})),{value:u,dispose(){}}}},w=class extends h{async provideHover(t,e,n){const s=t.uri,r=t.getOffsetAt(e),i=await this._worker(s);if(t.isDisposed())return;const a=await i.getQuickInfoAtPosition(s.toString(),r);if(!a||t.isDisposed())return;const o=l(a.documentation),c=a.tags?a.tags.map((t=>m(t))).join(`  \n\n`):"",u=l(a.displayParts);return{range:this._textSpanToRange(t,a.textSpan),contents:[{value:"```typescript\n"+u+"\n```\n"},{value:o+(c?`\n\n`+c:"")}]}}},v=class extends h{async provideDocumentHighlights(t,e,n){const s=t.uri,r=t.getOffsetAt(e),i=await this._worker(s);if(t.isDisposed())return;const o=await i.getDocumentHighlights(s.toString(),r,[s.toString()]);return o&&!t.isDisposed()?o.flatMap((e=>e.highlightSpans.map((e=>({range:this._textSpanToRange(t,e.textSpan),kind:e.kind==="writtenReference"?a.languages.DocumentHighlightKind.Write:a.languages.DocumentHighlightKind.Text}))))):void 0}},y=class extends h{constructor(t,e){super(e),this._libFiles=t}async provideDefinition(t,e,n){const s=t.uri,r=t.getOffsetAt(e),i=await this._worker(s);if(t.isDisposed())return;const o=await i.getDefinitionAtPosition(s.toString(),r);if(!o||t.isDisposed()||(await this._libFiles.fetchLibFilesIfNecessary(o.map((t=>a.Uri.parse(t.fileName)))),t.isDisposed()))return;const c=[];for(let t of o){const e=this._libFiles.getOrCreateModel(t.fileName);e&&c.push({uri:e.uri,range:this._textSpanToRange(e,t.textSpan)})}return c}},b=class extends h{constructor(t,e){super(e),this._libFiles=t}async provideReferences(t,e,n,s){const r=t.uri,i=t.getOffsetAt(e),o=await this._worker(r);if(t.isDisposed())return;const c=await o.getReferencesAtPosition(r.toString(),i);if(!c||t.isDisposed()||(await this._libFiles.fetchLibFilesIfNecessary(c.map((t=>a.Uri.parse(t.fileName)))),t.isDisposed()))return;const u=[];for(let t of c){const e=this._libFiles.getOrCreateModel(t.fileName);e&&u.push({uri:e.uri,range:this._textSpanToRange(e,t.textSpan)})}return u}},S=class extends h{async provideDocumentSymbols(t,e){const n=t.uri,s=await this._worker(n);if(t.isDisposed())return;const r=await s.getNavigationTree(n.toString());if(!r||t.isDisposed())return;const i=(e,n)=>{var s;return{name:e.text,detail:"",kind:k[e.kind]||a.languages.SymbolKind.Variable,range:this._textSpanToRange(t,e.spans[0]),selectionRange:this._textSpanToRange(t,e.spans[0]),tags:[],children:(s=e.childItems)==null?void 0:s.map((t=>i(t,e.text))),containerName:n}};return r.childItems?r.childItems.map((t=>i(t))):[]}},A,x=(A=class{},A.unknown="",A.keyword="keyword",A.script="script",A.module="module",A.class="class",A.interface="interface",A.type="type",A.enum="enum",A.variable="var",A.localVariable="local var",A.function="function",A.localFunction="local function",A.memberFunction="method",A.memberGetAccessor="getter",A.memberSetAccessor="setter",A.memberVariable="property",A.constructorImplementation="constructor",A.callSignature="call",A.indexSignature="index",A.constructSignature="construct",A.parameter="parameter",A.typeParameter="type parameter",A.primitiveType="primitive type",A.label="label",A.alias="alias",A.const="const",A.let="let",A.warning="warning",A),k=Object.create(null);k[x.module]=a.languages.SymbolKind.Module,k[x.class]=a.languages.SymbolKind.Class,k[x.enum]=a.languages.SymbolKind.Enum,k[x.interface]=a.languages.SymbolKind.Interface,k[x.memberFunction]=a.languages.SymbolKind.Method,k[x.memberVariable]=a.languages.SymbolKind.Property,k[x.memberGetAccessor]=a.languages.SymbolKind.Property,k[x.memberSetAccessor]=a.languages.SymbolKind.Property,k[x.variable]=a.languages.SymbolKind.Variable,k[x.const]=a.languages.SymbolKind.Variable,k[x.localVariable]=a.languages.SymbolKind.Variable,k[x.variable]=a.languages.SymbolKind.Variable,k[x.function]=a.languages.SymbolKind.Function,k[x.localFunction]=a.languages.SymbolKind.Function;var C,N,I=class extends h{static _convertOptions(t){return{ConvertTabsToSpaces:t.insertSpaces,TabSize:t.tabSize,IndentSize:t.tabSize,IndentStyle:2,NewLineCharacter:`\n`,InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}}_convertTextChanges(t,e){return{text:e.newText,range:this._textSpanToRange(t,e.span)}}},O=class extends I{constructor(){super(...arguments),this.canFormatMultipleRanges=!1}async provideDocumentRangeFormattingEdits(t,e,n,s){const r=t.uri,i=t.getOffsetAt({lineNumber:e.startLineNumber,column:e.startColumn}),a=t.getOffsetAt({lineNumber:e.endLineNumber,column:e.endColumn}),o=await this._worker(r);if(t.isDisposed())return;const c=await o.getFormattingEditsForRange(r.toString(),i,a,I._convertOptions(n));return c&&!t.isDisposed()?c.map((e=>this._convertTextChanges(t,e))):void 0}},T=class extends I{get autoFormatTriggerCharacters(){return[";","}",`\n`]}async provideOnTypeFormattingEdits(t,e,n,s,r){const i=t.uri,a=t.getOffsetAt(e),o=await this._worker(i);if(t.isDisposed())return;const c=await o.getFormattingEditsAfterKeystroke(i.toString(),a,n,I._convertOptions(s));return c&&!t.isDisposed()?c.map((e=>this._convertTextChanges(t,e))):void 0}},F=class extends I{async provideCodeActions(t,e,n,s){const r=t.uri,i=t.getOffsetAt({lineNumber:e.startLineNumber,column:e.startColumn}),a=t.getOffsetAt({lineNumber:e.endLineNumber,column:e.endColumn}),o=I._convertOptions(t.getOptions()),c=n.markers.filter((t=>t.code)).map((t=>t.code)).map(Number),u=await this._worker(r);if(t.isDisposed())return;const l=await u.getCodeFixesAtPosition(r.toString(),i,a,c,o);return!l||t.isDisposed()?{actions:[],dispose:()=>{}}:{actions:l.filter((t=>t.changes.filter((t=>t.isNewFile)).length===0)).map((e=>this._tsCodeFixActionToMonacoCodeAction(t,n,e))),dispose:()=>{}}}_tsCodeFixActionToMonacoCodeAction(t,e,n){const s=[];for(const e of n.changes)for(const n of e.textChanges)s.push({resource:t.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(t,n.span),text:n.newText}});return{title:n.description,edit:{edits:s},diagnostics:e.markers,kind:"quickfix"}}},L=class extends h{constructor(t,e){super(e),this._libFiles=t}async provideRenameEdits(t,e,n,s){const r=t.uri,i=r.toString(),a=t.getOffsetAt(e),o=await this._worker(r);if(t.isDisposed())return;const c=await o.getRenameInfo(i,a,{allowRenameOfImportPath:!1});if(c.canRename===!1)return{edits:[],rejectReason:c.localizedErrorMessage};if(c.fileToRename!==void 0)throw new Error("Renaming files is not supported.");const u=await o.findRenameLocations(i,a,!1,!1,!1);if(!u||t.isDisposed())return;const l=[];for(const t of u){const e=this._libFiles.getOrCreateModel(t.fileName);if(!e)throw new Error(`Unknown file ${t.fileName}.`);l.push({resource:e.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(e,t.textSpan),text:n}})}return{edits:l}}},_=class extends h{async provideInlayHints(t,e,n){const s=t.uri,r=s.toString(),i=t.getOffsetAt({lineNumber:e.startLineNumber,column:e.startColumn}),a=t.getOffsetAt({lineNumber:e.endLineNumber,column:e.endColumn}),o=await this._worker(s);return t.isDisposed()?null:{hints:(await o.provideInlayHints(r,i,a)).map((e=>({...e,label:e.text,position:t.getPositionAt(e.position),kind:this._convertHintKind(e.kind)}))),dispose:()=>{}}}_convertHintKind(t){return t==="Parameter"?a.languages.InlayHintKind.Parameter:a.languages.InlayHintKind.Type}};function D(t){N=B(t,"typescript")}function R(t){C=B(t,"javascript")}function j(){return new Promise(((t,e)=>{if(!C)return e("JavaScript not registered!");t(C)}))}function H(){return new Promise(((t,e)=>{if(!N)return e("TypeScript not registered!");t(N)}))}function B(t,e){const n=[],s=new o(e,t),r=(...t)=>s.getLanguageServiceWorker(...t),i=new d(r);return function(){const{modeConfiguration:s}=t;(function(t){for(;t.length;)t.pop().dispose()})(n),s.completionItems&&n.push(a.languages.registerCompletionItemProvider(e,new f(r))),s.signatureHelp&&n.push(a.languages.registerSignatureHelpProvider(e,new g(r))),s.hovers&&n.push(a.languages.registerHoverProvider(e,new w(r))),s.documentHighlights&&n.push(a.languages.registerDocumentHighlightProvider(e,new v(r))),s.definitions&&n.push(a.languages.registerDefinitionProvider(e,new y(i,r))),s.references&&n.push(a.languages.registerReferenceProvider(e,new b(i,r))),s.documentSymbols&&n.push(a.languages.registerDocumentSymbolProvider(e,new S(r))),s.rename&&n.push(a.languages.registerRenameProvider(e,new L(i,r))),s.documentRangeFormattingEdits&&n.push(a.languages.registerDocumentRangeFormattingEditProvider(e,new O(r))),s.onTypeFormattingEdits&&n.push(a.languages.registerOnTypeFormattingEditProvider(e,new T(r))),s.codeActions&&n.push(a.languages.registerCodeActionProvider(e,new F(r))),s.inlayHints&&n.push(a.languages.registerInlayHintsProvider(e,new _(r))),s.diagnostics&&n.push(new p(i,t,e,r))}(),r}export{h as Adapter,F as CodeActionAdaptor,y as DefinitionAdapter,p as DiagnosticsAdapter,v as DocumentHighlightAdapter,O as FormatAdapter,I as FormatHelper,T as FormatOnTypeAdapter,_ as InlayHintsAdapter,x as Kind,d as LibFiles,S as OutlineAdapter,w as QuickInfoAdapter,b as ReferenceAdapter,L as RenameAdapter,g as SignatureHelpAdapter,f as SuggestAdapter,o as WorkerManager,u as flattenDiagnosticMessageText,j as getJavaScriptWorker,H as getTypeScriptWorker,R as setupJavaScript,D as setupTypeScript};
//# sourceMappingURL=p-fcb12e05.js.map