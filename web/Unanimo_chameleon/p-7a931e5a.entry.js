import{r as t,c as e,g as i,h as s,H as h}from"./p-7af91c05.js";import{S as n}from"./p-2a2bca47.js";const o="*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}h1,h2,h3,h4,h5,h6,p{font:inherit;margin:0;padding:0;color:inherit}:host{--ch-textblock-displayed-lines:1;--ch-textblock-line-height:1px;display:inline-grid;grid-auto-rows:-webkit-max-content;grid-auto-rows:max-content;position:relative;text-align:start;white-space:break-spaces}:host(.ch-textblock--no-auto-grow){contain:size}.line-measure{position:absolute;pointer-events:none;visibility:hidden}.content,.html-content{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--ch-textblock-displayed-lines);overflow:hidden;max-block-size:calc(var(--ch-textblock-displayed-lines) * var(--ch-textblock-line-height))}.html-content{max-block-size:var(--ch-textblock-available-size)}";const a=o;const c="--ch-textblock-available-size";const r="--ch-textblock-displayed-lines";const l="--ch-textblock-line-height";const d=class{constructor(i){t(this,i);this.overflowingContentChange=e(this,"overflowingContentChange",7);this.contentOverflows=false;this.autoGrow=false;this.caption=undefined;this.characterToMeasureLineHeight="A";this.format="text";this.showTooltipOnOverflow=false}#t=-1;#e=-1;#i=-1;#s=-1;#h=-1;#n=-1;#o;#a;#c;#r;#l;contentOverflowsChanged(t){this.overflowingContentChange.emit(t)}get el(){return i(this)}autoGrowChanged(t){if(t){this.#d()}}formatChanged(){this.#d()}overflowingContentChange;#b=()=>this.format==="HTML"?this.#r:this.#c;#f=()=>{if(this.#t===0){return}const t=this.#b();const e=t.scrollHeight;const i=this.#l.getBoundingClientRect().height;if(this.#e===this.#t&&this.#i===e&&this.#s===i){return}this.#e=this.#t;this.#i=e;this.#s=i;this.contentOverflows=this.#t<e;const s=Math.max(Math.trunc(this.#t/i),1);const h=Math.max(Math.trunc(e/i),1);t.style.setProperty(l,`${i}px`);if(this.format==="HTML"){t.style.setProperty(c,`${this.#e}px`)}if(this.#n===s&&this.#h===h){return}this.#n=s;this.#h=h;t.style.setProperty(r,`${s}`)};#x=()=>{if(this.#o){return}this.#a=new n;this.#o=new ResizeObserver((t=>{const e=t.find((t=>t.target===this.el));if(e){this.#t=e.contentBoxSize[0].blockSize}this.#a.perform(this.#f)}));const t=this.#b();this.#o.observe(t);this.#o.observe(this.#l);this.#o.observe(this.el,{box:"content-box"})};#d=()=>{this.#o?.disconnect();this.#o=undefined;this.#a?.cancel();this.#a=undefined;this.#t=-1;this.#e=-1;this.#i=-1;this.#s=-1;this.#h=-1;this.#n=-1};#g=()=>this.format==="text"?this.caption:s("slot",null);#u=()=>[s("div",{class:"line-measure",ref:t=>this.#l=t},this.characterToMeasureLineHeight),this.format==="text"?s("p",{class:"content",ref:t=>this.#c=t},this.caption):s("div",{class:"html-content",ref:t=>this.#r=t},s("slot",null))];componentDidRender(){if(!this.autoGrow){this.#x();if(this.showTooltipOnOverflow&&this.format==="text"){this.#a.perform(this.#f)}}}disconnectedCallback(){this.#d()}render(){return s(h,{key:"27764bdea4344c50216c10e1450c9e5a099ce033",class:!this.autoGrow?"ch-textblock--no-auto-grow":undefined,title:this.showTooltipOnOverflow&&this.format==="text"&&!this.autoGrow&&this.contentOverflows?this.caption:undefined},this.autoGrow?this.#g():this.#u())}static get watchers(){return{contentOverflows:["contentOverflowsChanged"],autoGrow:["autoGrowChanged"],format:["formatChanged"]}}};d.style=a;export{d as ch_textblock};
//# sourceMappingURL=p-7a931e5a.entry.js.map