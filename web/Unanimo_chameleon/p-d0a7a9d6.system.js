var __extends=this&&this.__extends||function(){var t=function(n,i){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i))t[i]=n[i]};return t(n,i)};return function(n,i){if(typeof i!=="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(n,i);function r(){this.constructor=n}n.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var e in n)if(Object.prototype.hasOwnProperty.call(n,e))t[e]=n[e]}return t};return __assign.apply(this,arguments)};var __awaiter=this&&this.__awaiter||function(t,n,i,r){function e(t){return t instanceof i?t:new i((function(n){n(t)}))}return new(i||(i=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(t){o(t)}}function u(t){try{a(r["throw"](t))}catch(t){o(t)}}function a(t){t.done?i(t.value):e(t.value).then(s,u)}a((r=r.apply(t,n||[])).next())}))};var __generator=this&&this.__generator||function(t,n){var i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,e,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(t){return function(n){return a([t,n])}}function a(u){if(r)throw new TypeError("Generator is already executing.");while(s&&(s=0,u[0]&&(i=0)),i)try{if(r=1,e&&(o=u[0]&2?e["return"]:u[0]?e["throw"]||((o=e["return"])&&o.call(e),0):e.next)&&!(o=o.call(e,u[1])).done)return o;if(e=0,o)u=[u[0]&2,o.value];switch(u[0]){case 0:case 1:o=u;break;case 4:i.label++;return{value:u[1],done:false};case 5:i.label++;e=u[1];u=[0];continue;case 7:u=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){i=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(u[0]===6&&i.label<o[1]){i.label=o[1];o=u;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(u);break}if(o[2])i.ops.pop();i.trys.pop();continue}u=n.call(t,i)}catch(t){u=[6,t];e=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}};var __asyncValues=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],i;return n?n.call(t):(t=typeof __values==="function"?__values(t):t[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(n){i[n]=t[n]&&function(i){return new Promise((function(r,o){i=t[n](i),e(r,o,i.done,i.value)}))}}function e(t,n,i,r){Promise.resolve(r).then((function(n){t({value:n,done:i})}),n)}};var __rest=this&&this.__rest||function(t,n){var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0)i[r]=t[r];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var e=0,r=Object.getOwnPropertySymbols(t);e<r.length;e++){if(n.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(t,r[e]))i[r[e]]=t[r[e]]}return i};var __spreadArray=this&&this.__spreadArray||function(t,n,i){if(i||arguments.length===2)for(var r=0,e=n.length,o;r<e;r++){if(o||!(r in n)){if(!o)o=Array.prototype.slice.call(n,0,r);o[r]=n[r]}}return t.concat(o||Array.prototype.slice.call(n))};var __values=this&&this.__values||function(t){var n=typeof Symbol==="function"&&Symbol.iterator,i=n&&t[n],r=0;if(i)return i.call(t);if(t&&typeof t.length==="number")return{next:function(){if(t&&r>=t.length)t=void 0;return{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")};System.register([],(function(t,n){"use strict";return{execute:function(){var i,r,e,o,s,u;var a=this;t("P",Wht);var h=Object.defineProperty;var c=function(t,n,i){return n in t?h(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i};var f=function(t,n,i){return c(t,typeof n!="symbol"?n+"":n,i)};function l(t,n){if(n===void 0){n=0}return t[t.length-(1+n)]}function v(t,n,i){if(i===void 0){i=function(t,n){return t===n}}if(t===n)return!0;if(!t||!n||t.length!==n.length)return!1;for(var r=0,e=t.length;r<e;r++)if(!i(t[r],n[r]))return!1;return!0}function d(t,n,i){return function(t,n){var i=0,r=t-1;for(;i<=r;){var e=(i+r)/2|0,o=n(e);if(o<0)i=e+1;else{if(!(o>0))return e;r=e-1}}return-(i+1)}(t.length,(function(r){return i(t[r],n)}))}function g(t,n,i){if((t|=0)>=n.length)throw new TypeError("invalid index");var r=n[Math.floor(n.length*Math.random())],e=[],o=[],s=[];for(var u=0,a=n;u<a.length;u++){var h=a[u];var c=i(h,r);c<0?e.push(h):c>0?o.push(h):s.push(h)}return t<e.length?g(t,e,i):t<e.length+s.length?s[0]:g(t-(e.length+s.length),o,i)}function p(t,n){var i=[];var r;for(var e=0,o=t.slice(0).sort(n);e<o.length;e++){var s=o[e];r&&n(r[0],s)===0?r.push(s):(r=[s],i.push(r))}return i}function w(t,n){var i,r,e,o,s,u,a,h;return __generator(this,(function(c){switch(c.label){case 0:e=0,o=t;c.label=1;case 1:if(!(e<o.length))return[3,7];s=o[e];if(!(r!==void 0&&n(r,s)))return[3,2];u=i.push(s);return[3,5];case 2:a=i;if(!a)return[3,4];return[4,i];case 3:a=c.sent();c.label=4;case 4:u=(a,i=[s]);c.label=5;case 5:u,r=s;c.label=6;case 6:e++;return[3,1];case 7:h=i;if(!h)return[3,9];return[4,i];case 8:h=c.sent();c.label=9;case 9:h;return[2]}}))}function m(t,n){for(var i=0;i<=t.length;i++)n(i===0?void 0:t[i-1],i===t.length?void 0:t[i])}function b(t){return t.filter((function(t){return!!t}))}function y(t){var n=0;for(var i=0;i<t.length;i++)t[i]&&(t[n]=t[i],n+=1);t.length=n}function _(t){return!Array.isArray(t)||t.length===0}function k(t){return Array.isArray(t)&&t.length>0}function x(t,n){if(n===void 0){n=function(t){return t}}var i=new Set;return t.filter((function(t){var r=n(t);return!i.has(r)&&(i.add(r),!0)}))}function C(t,n){return t.length>0?t[0]:n}function S(t,n){var i=typeof n=="number"?t:0;typeof n=="number"?i=t:(i=0,n=t);var r=[];if(i<=n)for(var e=i;e<n;e++)r.push(e);else for(var e=i;e>n;e--)r.push(e);return r}function D(t,n,i){var r=t.slice(0,n),e=t.slice(n);return r.concat(i,e)}function A(t,n){var i=t.indexOf(n);i>-1&&(t.splice(i,1),t.unshift(n))}function O(t,n){var i=t.indexOf(n);i>-1&&(t.splice(i,1),t.push(n))}function E(t,n){for(var i=0,r=n;i<r.length;i++){var e=r[i];t.push(e)}}function M(t){return Array.isArray(t)?t:[t]}function F(t,n,i,r){var e=L(t,n);var o=t.splice(e,i);return o===void 0&&(o=[]),function(t,n,i){var r=L(t,n),e=t.length,o=i.length;t.length=e+o;for(var s=e-1;s>=r;s--)t[s+o]=t[s];for(var s=0;s<o;s++)t[s+r]=i[s]}(t,e,r),o}function L(t,n){return n<0?Math.max(n+t.length,0):Math.min(n,t.length)}var j;function R(t,n){return function(i,r){return n(t(i),t(r))}}(function(t){t.isLessThan=function(t){return t<0},t.isLessThanOrEqual=function(t){return t<=0},t.isGreaterThan=function(t){return t>0},t.isNeitherLessOrGreaterThan=function(t){return t===0},t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(j||(j={}));var T=function(t,n){return t-n},I=function(t,n){return T(t?1:0,n?1:0)};function B(t){return function(n,i){return-t(n,i)}}var N=function(){function t(t){this.items=t,this.firstIdx=0,this.lastIdx=this.items.length-1}Object.defineProperty(t.prototype,"length",{get:function(){return this.lastIdx-this.firstIdx+1},enumerable:false,configurable:true});t.prototype.takeWhile=function(t){var n=this.firstIdx;for(;n<this.items.length&&t(this.items[n]);)n++;var i=n===this.firstIdx?null:this.items.slice(this.firstIdx,n);return this.firstIdx=n,i};t.prototype.takeFromEndWhile=function(t){var n=this.lastIdx;for(;n>=0&&t(this.items[n]);)n--;var i=n===this.lastIdx?null:this.items.slice(n+1,this.lastIdx+1);return this.lastIdx=n,i};t.prototype.peek=function(){if(this.length!==0)return this.items[this.firstIdx]};t.prototype.dequeue=function(){var t=this.items[this.firstIdx];return this.firstIdx++,t};t.prototype.takeCount=function(t){var n=this.items.slice(this.firstIdx,this.firstIdx+t);return this.firstIdx+=t,n};return t}();var P=function(){function t(t){this.iterate=t}t.prototype.toArray=function(){var t=[];return this.iterate((function(n){return t.push(n),!0})),t};t.prototype.filter=function(n){var i=this;return new t((function(t){return i.iterate((function(i){return!n(i)||t(i)}))}))};t.prototype.map=function(n){var i=this;return new t((function(t){return i.iterate((function(i){return t(n(i))}))}))};t.prototype.findLast=function(t){var n;return this.iterate((function(i){return t(i)&&(n=i),!0})),n};t.prototype.findLastMaxBy=function(t){var n,i=!0;return this.iterate((function(r){return(i||j.isGreaterThan(t(r,n)))&&(i=!1,n=r),!0})),n};return t}();P.empty=new P((function(t){}));var W=function(){function t(t){this._indexMap=t}t.createSortPermutation=function(n,i){var r=Array.from(n.keys()).sort((function(t,r){return i(n[t],n[r])}));return new t(r)};t.prototype.apply=function(t){var n=this;return t.map((function(i,r){return t[n._indexMap[r]]}))};t.prototype.inverse=function(){var n=this._indexMap.slice();for(var i=0;i<this._indexMap.length;i++)n[this._indexMap[i]]=i;return new t(n)};return t}();function H(t){return typeof t=="string"}function z(t){return!(typeof t!="object"||t===null||Array.isArray(t)||t instanceof RegExp||t instanceof Date)}function U(t){var n=Object.getPrototypeOf(Uint8Array);return typeof t=="object"&&t instanceof n}function K(t){return typeof t=="number"&&!isNaN(t)}function V(t){return!!t&&typeof t[Symbol.iterator]=="function"}function q(t){return t===!0||t===!1}function G(t){return t===void 0}function $(t){return!J(t)}function J(t){return G(t)||t===null}function Z(t,n){if(!t)throw new Error(n?"Unexpected type, expected '".concat(n,"'"):"Unexpected type")}function Q(t){if(J(t))throw new Error("Assertion Failed: argument is undefined or null");return t}function Y(t){return typeof t=="function"}function X(t,n){if(H(n)){if(typeof t!==n)throw new Error("argument does not match constraint: typeof ".concat(n))}else if(Y(n)){try{if(t instanceof n)return}catch(t){}if(!J(t)&&t.constructor===n||n.length===1&&n.call(void 0,t)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function tt(t){if(!t||typeof t!="object"||t instanceof RegExp)return t;var n=Array.isArray(t)?[]:{};return Object.entries(t).forEach((function(t){var i=t[0],r=t[1];n[i]=r&&typeof r=="object"?tt(r):r})),n}var nt=Object.prototype.hasOwnProperty;function it(t,n){return rt(t,n,new Set)}function rt(t,n,i){if(J(t))return t;var r=n(t);if(r!==void 0)return r;if(Array.isArray(t)){var e=[];for(var o=0,s=t;o<s.length;o++){var u=s[o];e.push(rt(u,n,i))}return e}if(z(t)){if(i.has(t))throw new Error("Cannot clone recursive data-structure");i.add(t);var e={};for(var u in t)nt.call(t,u)&&(e[u]=rt(t[u],n,i));return i.delete(t),e}return t}function et(t,n,i){if(i===void 0){i=!0}return z(t)?(z(n)&&Object.keys(n).forEach((function(r){r in t?i&&(z(t[r])&&z(n[r])?et(t[r],n[r],i):t[r]=n[r]):t[r]=n[r]})),t):n}function ot(t,n){if(t===n)return!0;if(t==null||n==null||typeof t!=typeof n||typeof t!="object"||Array.isArray(t)!==Array.isArray(n))return!1;var i,r;if(Array.isArray(t)){if(t.length!==n.length)return!1;for(i=0;i<t.length;i++)if(!ot(t[i],n[i]))return!1}else{var e=[];for(r in t)e.push(r);e.sort();var o=[];for(r in n)o.push(r);if(o.sort(),!ot(e,o))return!1;for(i=0;i<e.length;i++)if(!ot(t[e[i]],n[e[i]]))return!1}return!0}function st(t){var n=[];for(var i=0,r=function(t){var n=[];for(;Object.prototype!==t;)n=n.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return n}(t);i<r.length;i++){var e=r[i];typeof t[e]=="function"&&n.push(e)}return n}var ut=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function at(t,n){var i;return i=n.length===0?t:t.replace(/\{(\d+)\}/g,(function(t,i){var r=i[0],e=n[r];var o=t;return typeof e=="string"?o=e:typeof e!="number"&&typeof e!="boolean"&&e!=null||(o=String(e)),o})),ut&&(i="［"+i.replace(/[aouei]/g,"$&$&")+"］"),i}function ht(t,n){var i=[];for(var r=2;r<arguments.length;r++){i[r-2]=arguments[r]}return at(n,i)}function ct(t,n){var i=[];for(var r=2;r<arguments.length;r++){i[r-2]=arguments[r]}var e=at(n,i);return{value:e,original:e}}var ft,lt;var vt="en";var dt,gt,pt=!1,wt=!1,mt=!1,bt=!1,yt=!1,_t=!1,kt=!1,xt=vt;var Ct=globalThis;var St;Ct.vscode!==void 0&&Ct.vscode.process!==void 0?St=Ct.vscode.process:typeof process<"u"&&typeof((ft=process==null?void 0:process.versions)===null||ft===void 0?void 0:ft.node)=="string"&&(St=process);var Dt=typeof((lt=St==null?void 0:St.versions)===null||lt===void 0?void 0:lt.electron)=="string"&&(St==null?void 0:St.type)==="renderer";if(typeof St=="object"){pt=St.platform==="win32",wt=St.platform==="darwin",mt=St.platform==="linux",dt=vt,xt=vt;var At=St.env.VSCODE_NLS_CONFIG;if(At)try{var Ot=JSON.parse(At),Et=Ot.availableLanguages["*"];dt=Ot.locale,xt=Et||vt}catch(t){}bt=!0}else typeof navigator!="object"||Dt?console.error("Unable to resolve platform."):(gt=navigator.userAgent,pt=gt.indexOf("Windows")>=0,wt=gt.indexOf("Macintosh")>=0,_t=(gt.indexOf("Macintosh")>=0||gt.indexOf("iPad")>=0||gt.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,mt=gt.indexOf("Linux")>=0,kt=(gt==null?void 0:gt.indexOf("Mobi"))>=0,yt=!0,ht(0,"_"),dt=vt,xt=dt,navigator.language);var Mt=pt,Ft=wt,Lt=mt,jt=bt,Rt=yt,Tt=yt&&typeof Ct.importScripts=="function"?Ct.origin:void 0,It=_t,Bt=kt,Nt=gt,Pt=xt,Wt=typeof Ct.postMessage=="function"&&!Ct.importScripts,Ht=function(){if(Wt){var t=[];Ct.addEventListener("message",(function(n){if(n.data&&n.data.vscodeScheduleAsyncWork)for(var i=0,r=t.length;i<r;i++){var e=t[i];if(e.id===n.data.vscodeScheduleAsyncWork)return t.splice(i,1),void e.callback()}}));var n=0;return function(i){var r=++n;t.push({id:r,callback:i}),Ct.postMessage({vscodeScheduleAsyncWork:r},"*")}}return function(t){return setTimeout(t)}}(),zt=wt||_t?2:pt?1:3;var Ut=!0,Kt=!1;function Vt(){if(!Kt){Kt=!0;var t=new Uint8Array(2);t[0]=1,t[1]=2,Ut=new Uint16Array(t.buffer)[0]===513}return Ut}var qt=!!(Nt&&Nt.indexOf("Chrome")>=0),Gt=!!(Nt&&Nt.indexOf("Firefox")>=0),$t=!!(!qt&&Nt&&Nt.indexOf("Safari")>=0),Jt=!!(Nt&&Nt.indexOf("Edg/")>=0),Zt=!!(Nt&&Nt.indexOf("Android")>=0),Qt={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var Yt;(function(t){function n(t){return t&&typeof t=="object"&&typeof t[Symbol.iterator]=="function"}t.is=n;var i=Object.freeze([]);function r(t){return __generator(this,(function(n){switch(n.label){case 0:return[4,t];case 1:n.sent();return[2]}}))}t.empty=function(){return i},t.single=r,t.wrap=function(t){return n(t)?t:r(t)},t.from=function(t){return t||i},t.reverse=function(t){var n;return __generator(this,(function(i){switch(i.label){case 0:n=t.length-1;i.label=1;case 1:if(!(n>=0))return[3,4];return[4,t[n]];case 2:i.sent();i.label=3;case 3:n--;return[3,1];case 4:return[2]}}))},t.isEmpty=function(t){return!t||t[Symbol.iterator]().next().done===!0},t.first=function(t){return t[Symbol.iterator]().next().value},t.some=function(t,n){for(var i=0,r=t;i<r.length;i++){var e=r[i];if(n(e))return!0}return!1},t.find=function(t,n){for(var i=0,r=t;i<r.length;i++){var e=r[i];if(n(e))return e}},t.filter=function(t,n){var i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:i=0,r=t;s.label=1;case 1:if(!(i<r.length))return[3,5];e=r[i];o=n(e);if(!o)return[3,3];return[4,e];case 2:o=s.sent();s.label=3;case 3:o;s.label=4;case 4:i++;return[3,1];case 5:return[2]}}))},t.map=function(t,n){var i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:i=0;r=0,e=t;s.label=1;case 1:if(!(r<e.length))return[3,4];o=e[r];return[4,n(o,i++)];case 2:s.sent();s.label=3;case 3:r++;return[3,1];case 4:return[2]}}))},t.concat=function(){var t,n,i,r;var e=[];for(t=0;t<arguments.length;t++){e[t]=arguments[t]}return __generator(this,(function(t){switch(t.label){case 0:n=0,i=e;t.label=1;case 1:if(!(n<i.length))return[3,4];r=i[n];return[5,__values(r)];case 2:t.sent();t.label=3;case 3:n++;return[3,1];case 4:return[2]}}))},t.reduce=function(t,n,i){var r=i;for(var e=0,o=t;e<o.length;e++){var s=o[e];r=n(r,s)}return r},t.slice=function(t,n,i){if(i===void 0){i=t.length}return __generator(this,(function(r){switch(r.label){case 0:n<0&&(n+=t.length),i<0?i+=t.length:i>t.length&&(i=t.length);r.label=1;case 1:if(!(n<i))return[3,4];return[4,t[n]];case 2:r.sent();r.label=3;case 3:n++;return[3,1];case 4:return[2]}}))},t.consume=function(n,i){var r;if(i===void 0){i=Number.POSITIVE_INFINITY}var e=[];if(i===0)return[e,n];var o=n[Symbol.iterator]();for(var s=0;s<i;s++){var u=o.next();if(u.done)return[e,t.empty()];e.push(u.value)}return[e,(r={},r[Symbol.iterator]=function(){return o},r)]},t.asyncToArray=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r;var e,o,s;var u,a,h,c;return __generator(this,(function(f){switch(f.label){case 0:n=[];f.label=1;case 1:f.trys.push([1,6,7,12]);e=true,o=__asyncValues(t);f.label=2;case 2:return[4,o.next()];case 3:if(!(s=f.sent(),u=s.done,!u))return[3,5];c=s.value;e=false;i=c;n.push(i);f.label=4;case 4:e=true;return[3,2];case 5:return[3,12];case 6:r=f.sent();a={error:r};return[3,12];case 7:f.trys.push([7,,10,11]);if(!(!e&&!u&&(h=o.return)))return[3,9];return[4,h.call(o)];case 8:f.sent();f.label=9;case 9:return[3,11];case 10:if(a)throw a.error;return[7];case 11:return[7];case 12:return[2,Promise.resolve(n)]}}))}))}})(Yt||(Yt={}));var Xt=function(){function t(n){this.element=n,this.next=t.Undefined,this.prev=t.Undefined}return t}();Xt.Undefined=new Xt(void 0);var tn=function(){function t(){this._first=Xt.Undefined,this._last=Xt.Undefined,this._size=0}Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:false,configurable:true});t.prototype.isEmpty=function(){return this._first===Xt.Undefined};t.prototype.clear=function(){var t=this._first;for(;t!==Xt.Undefined;){var n=t.next;t.prev=Xt.Undefined,t.next=Xt.Undefined,t=n}this._first=Xt.Undefined,this._last=Xt.Undefined,this._size=0};t.prototype.unshift=function(t){return this._insert(t,!1)};t.prototype.push=function(t){return this._insert(t,!0)};t.prototype._insert=function(t,n){var i=this;var r=new Xt(t);if(this._first===Xt.Undefined)this._first=r,this._last=r;else if(n){var e=this._last;this._last=r,r.prev=e,e.next=r}else{var e=this._first;this._first=r,r.next=e,e.prev=r}this._size+=1;var o=!1;return function(){o||(o=!0,i._remove(r))}};t.prototype.shift=function(){if(this._first!==Xt.Undefined){var t=this._first.element;return this._remove(this._first),t}};t.prototype.pop=function(){if(this._last!==Xt.Undefined){var t=this._last.element;return this._remove(this._last),t}};t.prototype._remove=function(t){if(t.prev!==Xt.Undefined&&t.next!==Xt.Undefined){var n=t.prev;n.next=t.next,t.next.prev=n}else t.prev===Xt.Undefined&&t.next===Xt.Undefined?(this._first=Xt.Undefined,this._last=Xt.Undefined):t.next===Xt.Undefined?(this._last=this._last.prev,this._last.next=Xt.Undefined):t.prev===Xt.Undefined&&(this._first=this._first.next,this._first.prev=Xt.Undefined);this._size-=1};t.prototype[Symbol.iterator]=function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t=this._first;n.label=1;case 1:if(!(t!==Xt.Undefined))return[3,4];return[4,t.element];case 2:n.sent(),t=t.next;n.label=3;case 3:return[3,1];case 4:return[2]}}))};return t}();var nn="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?",rn=function(t){if(t===void 0){t=""}var n="(-?\\d*\\.\\d\\w*)|([^";for(var i=0,r=nn;i<r.length;i++){var e=r[i];t.indexOf(e)>=0||(n+="\\"+e)}return n+="\\s]+)",new RegExp(n,"g")}();function en(t){var n=rn;if(t&&t instanceof RegExp)if(t.global)n=t;else{var i="g";t.ignoreCase&&(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),n=new RegExp(t.source,i)}return n.lastIndex=0,n}var on=new tn;function sn(t,n,i,r,e){if(n=en(n),e||(e=Yt.first(on)),i.length>e.maxLen){var o=t-e.maxLen/2;return o<0?o=0:r+=o,sn(t,n,i=i.substring(o,t+e.maxLen/2),r,e)}var s=Date.now(),u=t-1-r;var a=-1,h=null;for(var o=1;!(Date.now()-s>=e.timeBudget);o++){var c=u-e.windowSize*o;n.lastIndex=Math.max(0,c);var f=un(n,i,u,a);if(!f&&h||(h=f,c<=0))break;a=c}if(h){var o={word:h[0],startColumn:r+1+h.index,endColumn:r+1+h.index+h[0].length};return n.lastIndex=0,o}return null}function un(t,n,i,r){var e;for(;e=t.exec(n);){var o=e.index||0;if(o<=i&&t.lastIndex>=i)return e;if(r>0&&o>r)return null}return null}on.unshift({maxLen:1e3,windowSize:15,timeBudget:150});var an=function(){function t(t){this._values=t}t.prototype.hasChanged=function(t){return this._values[t]};return t}();var hn=function(){function t(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}return t}();var cn=function(){function t(t,n,i,r){this.id=t,this.name=n,this.defaultValue=i,this.schema=r}t.prototype.applyUpdate=function(t,n){return ln(t,n)};t.prototype.compute=function(t,n,i){return i};return t}();var fn=function(){function t(t,n){this.newValue=t,this.didChange=n}return t}();function ln(t,n){if(typeof t!="object"||typeof n!="object"||!t||!n)return new fn(n,t!==n);if(Array.isArray(t)||Array.isArray(n)){var i=Array.isArray(t)&&Array.isArray(n)&&v(t,n);return new fn(n,!i)}var r=!1;for(var i in n)if(n.hasOwnProperty(i)){var e=ln(t[i],n[i]);e.didChange&&(t[i]=e.newValue,r=!0)}return new fn(t,r)}var vn=function(){function t(t){this.schema=void 0,this.id=t,this.name="_never_",this.defaultValue=void 0}t.prototype.applyUpdate=function(t,n){return ln(t,n)};t.prototype.validate=function(t){return this.defaultValue};return t}();var dn=function(){function t(t,n,i,r){this.id=t,this.name=n,this.defaultValue=i,this.schema=r}t.prototype.applyUpdate=function(t,n){return ln(t,n)};t.prototype.validate=function(t){return t===void 0?this.defaultValue:t};t.prototype.compute=function(t,n,i){return i};return t}();function gn(t,n){return t===void 0?n:t!=="false"&&!!t}var pn=function(t){__extends(n,t);function n(n,i,r,e){if(e===void 0){e=void 0}var o=this;e!==void 0&&(e.type="boolean",e.default=r),o=t.call(this,n,i,r,e)||this;return o}n.prototype.validate=function(t){return gn(t,this.defaultValue)};return n}(dn);function wn(t,n,i,r){if(t===void 0)return n;var e=parseInt(t,10);return isNaN(e)?n:(e=Math.max(i,e),e=Math.min(r,e),0|e)}var mn=function(t){__extends(n,t);function n(n,i,r,e,o,s){if(s===void 0){s=void 0}var u=this;s!==void 0&&(s.type="integer",s.default=r,s.minimum=e,s.maximum=o),u=t.call(this,n,i,r,s)||this,u.minimum=e,u.maximum=o;return u}n.clampedInt=function(t,n,i,r){return wn(t,n,i,r)};n.prototype.validate=function(t){return n.clampedInt(t,this.defaultValue,this.minimum,this.maximum)};return n}(dn);function bn(t,n,i,r){if(t===void 0)return n;var e=yn.float(t,n);return yn.clamp(e,i,r)}var yn=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;o!==void 0&&(o.type="number",o.default=r),s=t.call(this,n,i,r,o)||this,s.validationFn=e;return s}n.clamp=function(t,n,i){return t<n?n:t>i?i:t};n.float=function(t,n){if(typeof t=="number")return t;if(t===void 0)return n;var i=parseFloat(t);return isNaN(i)?n:i};n.prototype.validate=function(t){return this.validationFn(n.float(t,this.defaultValue))};return n}(dn);var _n=function(t){__extends(n,t);function n(n,i,r,e){if(e===void 0){e=void 0}var o=this;e!==void 0&&(e.type="string",e.default=r),o=t.call(this,n,i,r,e)||this;return o}n.string=function(t,n){return typeof t!="string"?n:t};n.prototype.validate=function(t){return n.string(t,this.defaultValue)};return n}(dn);function kn(t,n,i,r){return typeof t!="string"?n:r&&t in r?r[t]:i.indexOf(t)===-1?n:t}var xn=function(t){__extends(n,t);function n(n,i,r,e,o){if(o===void 0){o=void 0}var s=this;o!==void 0&&(o.type="string",o.enum=e,o.default=r),s=t.call(this,n,i,r,o)||this,s._allowedValues=e;return s}n.prototype.validate=function(t){return kn(t,this.defaultValue,this._allowedValues)};return n}(dn);var Cn=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){if(u===void 0){u=void 0}var a=this;u!==void 0&&(u.type="string",u.enum=o,u.default=e),a=t.call(this,n,i,r,u)||this,a._allowedValues=o,a._convert=s;return a}n.prototype.validate=function(t){return typeof t!="string"||this._allowedValues.indexOf(t)===-1?this.defaultValue:this._convert(t)};return n}(cn);var Sn,Dn;(function(t){t[t.Line=1]="Line",t[t.Block=2]="Block",t[t.Underline=3]="Underline",t[t.LineThin=4]="LineThin",t[t.BlockOutline=5]="BlockOutline",t[t.UnderlineThin=6]="UnderlineThin"})(Sn||(Sn={}));var An=function(t){__extends(n,t);function n(){return t.call(this,51,"fontLigatures",n.OFF,{anyOf:[{type:"boolean",description:ht(0,"Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:ht(0,"Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:ht(0,"Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})||this}n.prototype.validate=function(t){return t===void 0?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?n.OFF:t==="true"?n.ON:t:t?n.ON:n.OFF};return n}(cn);An.OFF='"liga" off, "calt" off',An.ON='"liga" on, "calt" on';var On=function(t){__extends(n,t);function n(){return t.call(this,54,"fontVariations",n.OFF,{anyOf:[{type:"boolean",description:ht(0,"Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:ht(0,"Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:ht(0,"Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})||this}n.prototype.validate=function(t){return t===void 0?this.defaultValue:typeof t=="string"?t==="false"?n.OFF:t==="true"?n.TRANSLATE:t:t?n.TRANSLATE:n.OFF};n.prototype.compute=function(t,n,i){return t.fontInfo.fontVariationSettings};return n}(cn);On.OFF="normal",On.TRANSLATE="translate";var En=function(t){__extends(n,t);function n(){return t.call(this,53,"fontWeight",zn.fontWeight,{anyOf:[{type:"number",minimum:n.MINIMUM_VALUE,maximum:n.MAXIMUM_VALUE,errorMessage:ht(0,'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:n.SUGGESTION_VALUES}],default:zn.fontWeight,description:ht(0,'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})||this}n.prototype.validate=function(t){return t==="normal"||t==="bold"?t:String(mn.clampedInt(t,zn.fontWeight,n.MINIMUM_VALUE,n.MAXIMUM_VALUE))};return n}(cn);En.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],En.MINIMUM_VALUE=1,En.MAXIMUM_VALUE=1e3;var Mn=function(t){__extends(n,t);function n(){return t.call(this,145)||this}n.prototype.compute=function(t,i,r){return n.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})};n.computeContainedMinimapLineCount=function(t){var n=t.height/t.lineHeight,i=Math.floor(t.paddingTop/t.lineHeight);var r=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(r=Math.max(r,n-1));var e=(i+t.viewLineCount+r)/(t.pixelRatio*t.height);return{typicalViewportLineCount:n,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:r,desiredRatio:e,minimapLineCount:Math.floor(t.viewLineCount/e)}};n._computeMinimapLayout=function(t,i){var r=t.outerWidth,e=t.outerHeight,o=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*e),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:e};var s=i.stableMinimapLayoutInput,u=s&&t.outerHeight===s.outerHeight&&t.lineHeight===s.lineHeight&&t.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&t.pixelRatio===s.pixelRatio&&t.scrollBeyondLastLine===s.scrollBeyondLastLine&&t.paddingTop===s.paddingTop&&t.paddingBottom===s.paddingBottom&&t.minimap.enabled===s.minimap.enabled&&t.minimap.side===s.minimap.side&&t.minimap.size===s.minimap.size&&t.minimap.showSlider===s.minimap.showSlider&&t.minimap.renderCharacters===s.minimap.renderCharacters&&t.minimap.maxColumn===s.minimap.maxColumn&&t.minimap.scale===s.minimap.scale&&t.verticalScrollbarWidth===s.verticalScrollbarWidth&&t.isViewportWrapping===s.isViewportWrapping,a=t.lineHeight,h=t.typicalHalfwidthCharacterWidth,c=t.scrollBeyondLastLine,f=t.minimap.renderCharacters;var l=o>=2?Math.round(2*t.minimap.scale):t.minimap.scale;var v=t.minimap.maxColumn,d=t.minimap.size,g=t.minimap.side,p=t.verticalScrollbarWidth,w=t.viewLineCount,m=t.remainingWidth,b=t.isViewportWrapping,y=f?2:3;var _=Math.floor(o*e);var k=_/o;var x=!1,C=!1,S=y*l,D=l/o,A=1;if(d==="fill"||d==="fit"){var O=n.computeContainedMinimapLineCount({viewLineCount:w,scrollBeyondLastLine:c,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:e,lineHeight:a,pixelRatio:o}),E=O.typicalViewportLineCount,M=O.extraLinesBeforeFirstLine,F=O.extraLinesBeyondLastLine,L=O.desiredRatio,j=O.minimapLineCount;if(w/j>1)x=!0,C=!0,l=1,S=1,D=l/o;else{var R=!1,T=l+1;if(d==="fit"){var I=Math.ceil((M+w+F)*S);b&&u&&m<=i.stableFitRemainingWidth?(R=!0,T=i.stableFitMaxMinimapScale):R=I>_}if(d==="fill"||R){x=!0;var I=l;S=Math.min(a*o,Math.max(1,Math.floor(1/L))),b&&u&&m<=i.stableFitRemainingWidth&&(T=i.stableFitMaxMinimapScale),l=Math.min(T,Math.max(1,Math.floor(S/y))),l>I&&(A=Math.min(2,l/I)),D=l/o/A,_=Math.ceil(Math.max(E,M+w+F)*S),b?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=m,i.stableFitMaxMinimapScale=l):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}var B=Math.floor(v*D),N=Math.min(B,Math.max(0,Math.floor((m-p-2)*D/(h+D)))+8);var P=Math.floor(o*N);var W=P/o;return P=Math.floor(P*A),{renderMinimap:f?1:2,minimapLeft:g==="left"?0:r-N-p,minimapWidth:N,minimapHeightIsEditorHeight:x,minimapIsSampling:C,minimapScale:l,minimapLineHeight:S,minimapCanvasInnerWidth:P,minimapCanvasInnerHeight:_,minimapCanvasOuterWidth:W,minimapCanvasOuterHeight:k}};n.computeLayout=function(t,i){var r=0|i.outerWidth,e=0|i.outerHeight,o=0|i.lineHeight,s=0|i.lineNumbersDigitCount,u=i.typicalHalfwidthCharacterWidth,a=i.maxDigitWidth,h=i.pixelRatio,c=i.viewLineCount,f=t.get(137),l=f==="inherit"?t.get(136):f,v=l==="inherit"?t.get(132):l,d=t.get(135),g=i.isDominatedByLongLines,p=t.get(57),w=t.get(68).renderType!==0,m=t.get(69),b=t.get(105),y=t.get(84),_=t.get(73),k=t.get(103),x=k.verticalScrollbarSize,C=k.verticalHasArrows,S=k.arrowSize,D=k.horizontalScrollbarSize,A=t.get(43),O=t.get(110)!=="never";var E=t.get(66);A&&O&&(E+=16);var M=0;if(w){var F=Math.max(s,m);M=Math.round(F*a)}var L=0;p&&(L=o*i.glyphMarginDecorationLaneCount);var j=0,R=j+L,T=R+M,I=T+E;var B=r-L-M-E;var N=!1,P=!1,W=-1;l==="inherit"&&g?(N=!0,P=!0):v==="on"||v==="bounded"?P=!0:v==="wordWrapColumn"&&(W=d);var H=n._computeMinimapLayout({outerWidth:r,outerHeight:e,lineHeight:o,typicalHalfwidthCharacterWidth:u,pixelRatio:h,scrollBeyondLastLine:b,paddingTop:y.top,paddingBottom:y.bottom,minimap:_,verticalScrollbarWidth:x,viewLineCount:c,remainingWidth:B,isViewportWrapping:P},i.memory||new hn);H.renderMinimap!==0&&H.minimapLeft===0&&(j+=H.minimapWidth,R+=H.minimapWidth,T+=H.minimapWidth,I+=H.minimapWidth);var z=B-H.minimapWidth,U=Math.max(1,Math.floor((z-x-2)/u)),K=C?S:0;return P&&(W=Math.max(1,U),v==="bounded"&&(W=Math.min(W,d))),{width:r,height:e,glyphMarginLeft:j,glyphMarginWidth:L,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:R,lineNumbersWidth:M,decorationsLeft:T,decorationsWidth:E,contentLeft:I,contentWidth:z,minimap:H,viewportColumn:U,isWordWrapMinified:N,isViewportWrapping:P,wrappingColumn:W,verticalScrollbarWidth:x,horizontalScrollbarHeight:D,overviewRuler:{top:K,width:x,height:e-2*K,right:0}}};return n}(vn);(function(t){t.Off="off",t.OnCode="onCode",t.On="on"})(Dn||(Dn={}));function Fn(t){var n=t.get(98);return n==="editable"?t.get(91):n!=="on"}function Ln(t,n){if(typeof t!="string")return n;switch(t){case"hidden":return 2;case"visible":return 3;default:return 1}}var jn="inUntrustedWorkspace",Rn="editor.unicodeHighlight.allowedCharacters",Tn="editor.unicodeHighlight.invisibleCharacters",In="editor.unicodeHighlight.nonBasicASCII",Bn="editor.unicodeHighlight.ambiguousCharacters",Nn="editor.unicodeHighlight.includeComments",Pn="editor.unicodeHighlight.includeStrings",Wn="editor.unicodeHighlight.allowedLocales";function Hn(t,n,i){var r=i.indexOf(t);return r===-1?n:i[r]}var zn={fontFamily:Ft?"Menlo, Monaco, 'Courier New', monospace":Lt?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:Ft?12:14,lineHeight:0,letterSpacing:0},Un=[];function Kn(t){return Un[t.id]=t,t}var Vn={acceptSuggestionOnCommitCharacter:Kn(new pn(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:ht(0,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Kn(new xn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",ht(0,"Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:ht(0,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[ht(0,"Use platform APIs to detect when a Screen Reader is attached."),ht(0,"Optimize for usage with a Screen Reader."),ht(0,"Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:ht(0,"Controls if the UI should run in a mode where it is optimized for screen readers.")})||this}n.prototype.validate=function(t){switch(t){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue};n.prototype.compute=function(t,n,i){return i===0?t.accessibilitySupport:i};return n}(cn))),accessibilityPageSize:Kn(new mn(3,"accessibilityPageSize",10,1,1073741824,{description:ht(0,"Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:Kn(new _n(4,"ariaLabel",ht(0,"Editor content"))),ariaRequired:Kn(new pn(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:Kn(new pn(8,"screenReaderAnnounceInlineSuggestion",!0,{description:ht(0,"Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:Kn(new xn(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",ht(0,"Use language configurations to determine when to autoclose brackets."),ht(0,"Autoclose brackets only when the cursor is to the left of whitespace."),""],description:ht(0,"Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:Kn(new xn(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",ht(0,"Use language configurations to determine when to autoclose comments."),ht(0,"Autoclose comments only when the cursor is to the left of whitespace."),""],description:ht(0,"Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:Kn(new xn(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",ht(0,"Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:ht(0,"Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Kn(new xn(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",ht(0,"Type over closing quotes or brackets only if they were automatically inserted."),""],description:ht(0,"Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Kn(new xn(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",ht(0,"Use language configurations to determine when to autoclose quotes."),ht(0,"Autoclose quotes only when the cursor is to the left of whitespace."),""],description:ht(0,"Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Kn(new Cn(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],(function(t){switch(t){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}),{enumDescriptions:[ht(0,"The editor will not insert indentation automatically."),ht(0,"The editor will keep the current line's indentation."),ht(0,"The editor will keep the current line's indentation and honor language defined brackets."),ht(0,"The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),ht(0,"The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:ht(0,"Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Kn(new pn(13,"automaticLayout",!1)),autoSurround:Kn(new xn(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[ht(0,"Use language configurations to determine when to automatically surround selections."),ht(0,"Surround with quotes but not brackets."),ht(0,"Surround with brackets but not quotes."),""],description:ht(0,"Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:Qt.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Qt.bracketPairColorizationOptions.independentColorPoolPerBracketType};return t.call(this,15,"bracketPairColorization",n,{"editor.bracketPairColorization.enabled":{type:"boolean",default:n.enabled,markdownDescription:ht(0,"Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:n.independentColorPoolPerBracketType,description:ht(0,"Controls whether each bracket type has its own independent color pool.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{enabled:gn(n.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:gn(n.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}};return n}(cn))),bracketPairGuides:Kn(new(function(t){__extends(n,t);function n(){var n={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};return t.call(this,16,"guides",n,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[ht(0,"Enables bracket pair guides."),ht(0,"Enables bracket pair guides only for the active bracket pair."),ht(0,"Disables bracket pair guides.")],default:n.bracketPairs,description:ht(0,"Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[ht(0,"Enables horizontal guides as addition to vertical bracket pair guides."),ht(0,"Enables horizontal guides only for the active bracket pair."),ht(0,"Disables horizontal bracket pair guides.")],default:n.bracketPairsHorizontal,description:ht(0,"Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:n.highlightActiveBracketPair,description:ht(0,"Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:n.indentation,description:ht(0,"Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[ht(0,"Highlights the active indent guide."),ht(0,"Highlights the active indent guide even if bracket guides are highlighted."),ht(0,"Do not highlight the active indent guide.")],default:n.highlightActiveIndentation,description:ht(0,"Controls whether the editor should highlight the active indent guide.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{bracketPairs:Hn(n.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Hn(n.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:gn(n.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:gn(n.indentation,this.defaultValue.indentation),highlightActiveIndentation:Hn(n.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}};return n}(cn))),stickyTabStops:Kn(new pn(116,"stickyTabStops",!1,{description:ht(0,"Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Kn(new pn(17,"codeLens",!0,{description:ht(0,"Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Kn(new _n(18,"codeLensFontFamily","",{description:ht(0,"Controls the font family for CodeLens.")})),codeLensFontSize:Kn(new mn(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:ht(0,"Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Kn(new pn(20,"colorDecorators",!0,{description:ht(0,"Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:Kn(new xn(148,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[ht(0,"Make the color picker appear both on click and hover of the color decorator"),ht(0,"Make the color picker appear on hover of the color decorator"),ht(0,"Make the color picker appear on click of the color decorator")],description:ht(0,"Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:Kn(new mn(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:ht(0,"Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:Kn(new pn(22,"columnSelection",!1,{description:ht(0,"Enable that the selection with the mouse and keys is doing column selection.")})),comments:Kn(new(function(t){__extends(n,t);function n(){var n={insertSpace:!0,ignoreEmptyLines:!0};return t.call(this,23,"comments",n,{"editor.comments.insertSpace":{type:"boolean",default:n.insertSpace,description:ht(0,"Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:n.ignoreEmptyLines,description:ht(0,"Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{insertSpace:gn(n.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:gn(n.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}};return n}(cn))),contextmenu:Kn(new pn(24,"contextmenu",!0)),copyWithSyntaxHighlighting:Kn(new pn(25,"copyWithSyntaxHighlighting",!0,{description:ht(0,"Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Kn(new Cn(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],(function(t){switch(t){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}),{description:ht(0,"Control the cursor animation style.")})),cursorSmoothCaretAnimation:Kn(new xn(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[ht(0,"Smooth caret animation is disabled."),ht(0,"Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),ht(0,"Smooth caret animation is always enabled.")],description:ht(0,"Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Kn(new Cn(28,"cursorStyle",Sn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],(function(t){switch(t){case"line":return Sn.Line;case"block":return Sn.Block;case"underline":return Sn.Underline;case"line-thin":return Sn.LineThin;case"block-outline":return Sn.BlockOutline;case"underline-thin":return Sn.UnderlineThin}}),{description:ht(0,"Controls the cursor style.")})),cursorSurroundingLines:Kn(new mn(29,"cursorSurroundingLines",0,0,1073741824,{description:ht(0,"Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Kn(new xn(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[ht(0,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),ht(0,"`cursorSurroundingLines` is enforced always.")],markdownDescription:ht(0,"Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:Kn(new mn(31,"cursorWidth",0,0,1073741824,{markdownDescription:ht(0,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Kn(new pn(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:Kn(new pn(33,"disableMonospaceOptimizations",!1)),domReadOnly:Kn(new pn(34,"domReadOnly",!1)),dragAndDrop:Kn(new pn(35,"dragAndDrop",!0,{description:ht(0,"Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,37,"emptySelectionClipboard",!0,{description:ht(0,"Controls whether copying without a selection copies the current line.")})||this}n.prototype.compute=function(t,n,i){return i&&t.emptySelectionClipboard};return n}(pn))),dropIntoEditor:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:!0,showDropSelector:"afterDrop"};return t.call(this,36,"dropIntoEditor",n,{"editor.dropIntoEditor.enabled":{type:"boolean",default:n.enabled,markdownDescription:ht(0,"Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:ht(0,"Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[ht(0,"Show the drop selector widget after a file is dropped into the editor."),ht(0,"Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{enabled:gn(n.enabled,this.defaultValue.enabled),showDropSelector:kn(n.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}};return n}(cn))),stickyScroll:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};return t.call(this,115,"stickyScroll",n,{"editor.stickyScroll.enabled":{type:"boolean",default:n.enabled,description:ht(0,"Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:n.maxLineCount,minimum:1,maximum:20,description:ht(0,"Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:n.defaultModel,description:ht(0,"Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:n.scrollWithEditor,description:ht(0,"Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{enabled:gn(n.enabled,this.defaultValue.enabled),maxLineCount:mn.clampedInt(n.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:kn(n.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:gn(n.scrollWithEditor,this.defaultValue.scrollWithEditor)}};return n}(cn))),experimentalWhitespaceRendering:Kn(new xn(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[ht(0,"Use a new rendering method with svgs."),ht(0,"Use a new rendering method with font characters."),ht(0,"Use the stable rendering method.")],description:ht(0,"Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:Kn(new _n(39,"extraEditorClassName","")),fastScrollSensitivity:Kn(new yn(40,"fastScrollSensitivity",5,(function(t){return t<=0?5:t}),{markdownDescription:ht(0,"Scrolling speed multiplier when pressing `Alt`.")})),find:Kn(new(function(t){__extends(n,t);function n(){var n={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};return t.call(this,41,"find",n,{"editor.find.cursorMoveOnType":{type:"boolean",default:n.cursorMoveOnType,description:ht(0,"Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:n.seedSearchStringFromSelection,enumDescriptions:[ht(0,"Never seed search string from the editor selection."),ht(0,"Always seed search string from the editor selection, including word at cursor position."),ht(0,"Only seed search string from the editor selection.")],description:ht(0,"Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:n.autoFindInSelection,enumDescriptions:[ht(0,"Never turn on Find in Selection automatically (default)."),ht(0,"Always turn on Find in Selection automatically."),ht(0,"Turn on Find in Selection automatically when multiple lines of content are selected.")],description:ht(0,"Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:n.globalFindClipboard,description:ht(0,"Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Ft},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:n.addExtraSpaceOnTop,description:ht(0,"Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:n.loop,description:ht(0,"Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{cursorMoveOnType:gn(n.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof t.seedSearchStringFromSelection=="boolean"?t.seedSearchStringFromSelection?"always":"never":kn(n.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof t.autoFindInSelection=="boolean"?t.autoFindInSelection?"always":"never":kn(n.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:gn(n.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:gn(n.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:gn(n.loop,this.defaultValue.loop)}};return n}(cn))),fixedOverflowWidgets:Kn(new pn(42,"fixedOverflowWidgets",!1)),folding:Kn(new pn(43,"folding",!0,{description:ht(0,"Controls whether the editor has code folding enabled.")})),foldingStrategy:Kn(new xn(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[ht(0,"Use a language-specific folding strategy if available, else the indentation-based one."),ht(0,"Use the indentation-based folding strategy.")],description:ht(0,"Controls the strategy for computing folding ranges.")})),foldingHighlight:Kn(new pn(45,"foldingHighlight",!0,{description:ht(0,"Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Kn(new pn(46,"foldingImportsByDefault",!1,{description:ht(0,"Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Kn(new mn(47,"foldingMaximumRegions",5e3,10,65e3,{description:ht(0,"The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Kn(new pn(48,"unfoldOnClickAfterEndOfLine",!1,{description:ht(0,"Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Kn(new _n(49,"fontFamily",zn.fontFamily,{description:ht(0,"Controls the font family.")})),fontInfo:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,50)||this}n.prototype.compute=function(t,n,i){return t.fontInfo};return n}(vn))),fontLigatures2:Kn(new An),fontSize:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,52,"fontSize",zn.fontSize,{type:"number",minimum:6,maximum:100,default:zn.fontSize,description:ht(0,"Controls the font size in pixels.")})||this}n.prototype.validate=function(t){var n=yn.float(t,this.defaultValue);return n===0?zn.fontSize:yn.clamp(n,6,100)};n.prototype.compute=function(t,n,i){return t.fontInfo.fontSize};return n}(dn))),fontWeight:Kn(new En),fontVariations:Kn(new On),formatOnPaste:Kn(new pn(55,"formatOnPaste",!1,{description:ht(0,"Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Kn(new pn(56,"formatOnType",!1,{description:ht(0,"Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Kn(new pn(57,"glyphMargin",!0,{description:ht(0,"Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Kn(new(function(t){__extends(n,t);function n(){var n={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},i={type:"string",enum:["peek","gotoAndPeek","goto"],default:n.multiple,enumDescriptions:[ht(0,"Show Peek view of the results (default)"),ht(0,"Go to the primary result and show a Peek view"),ht(0,"Go to the primary result and enable Peek-less navigation to others")]},r=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];return t.call(this,58,"gotoLocation",n,{"editor.gotoLocation.multiple":{deprecationMessage:ht(0,"This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":__assign({description:ht(0,"Controls the behavior the 'Go to Definition'-command when multiple target locations exist.")},i),"editor.gotoLocation.multipleTypeDefinitions":__assign({description:ht(0,"Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist.")},i),"editor.gotoLocation.multipleDeclarations":__assign({description:ht(0,"Controls the behavior the 'Go to Declaration'-command when multiple target locations exist.")},i),"editor.gotoLocation.multipleImplementations":__assign({description:ht(0,"Controls the behavior the 'Go to Implementations'-command when multiple target locations exist.")},i),"editor.gotoLocation.multipleReferences":__assign({description:ht(0,"Controls the behavior the 'Go to References'-command when multiple target locations exist.")},i),"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:n.alternativeDefinitionCommand,enum:r,description:ht(0,"Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:n.alternativeTypeDefinitionCommand,enum:r,description:ht(0,"Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:n.alternativeDeclarationCommand,enum:r,description:ht(0,"Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:n.alternativeImplementationCommand,enum:r,description:ht(0,"Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:n.alternativeReferenceCommand,enum:r,description:ht(0,"Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})||this}n.prototype.validate=function(t){var n,i,r,e,o;if(!t||typeof t!="object")return this.defaultValue;var s=t;return{multiple:kn(s.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:(n=s.multipleDefinitions)!==null&&n!==void 0?n:kn(s.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:(i=s.multipleTypeDefinitions)!==null&&i!==void 0?i:kn(s.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:(r=s.multipleDeclarations)!==null&&r!==void 0?r:kn(s.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:(e=s.multipleImplementations)!==null&&e!==void 0?e:kn(s.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:(o=s.multipleReferences)!==null&&o!==void 0?o:kn(s.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:_n.string(s.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:_n.string(s.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:_n.string(s.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:_n.string(s.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:_n.string(s.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}};return n}(cn))),hideCursorInOverviewRuler:Kn(new pn(59,"hideCursorInOverviewRuler",!1,{description:ht(0,"Controls whether the cursor should be hidden in the overview ruler.")})),hover:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};return t.call(this,60,"hover",n,{"editor.hover.enabled":{type:"boolean",default:n.enabled,description:ht(0,"Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:n.delay,minimum:0,maximum:1e4,description:ht(0,"Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:n.sticky,description:ht(0,"Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:n.hidingDelay,description:ht(0,"Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:n.above,description:ht(0,"Prefer showing hovers above the line, if there's space.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{enabled:gn(n.enabled,this.defaultValue.enabled),delay:mn.clampedInt(n.delay,this.defaultValue.delay,0,1e4),sticky:gn(n.sticky,this.defaultValue.sticky),hidingDelay:mn.clampedInt(n.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:gn(n.above,this.defaultValue.above)}};return n}(cn))),inDiffEditor:Kn(new pn(61,"inDiffEditor",!1)),letterSpacing:Kn(new yn(64,"letterSpacing",zn.letterSpacing,(function(t){return yn.clamp(t,-5,20)}),{description:ht(0,"Controls the letter spacing in pixels.")})),lightbulb:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:Dn.On};return t.call(this,65,"lightbulb",n,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[Dn.Off,Dn.OnCode,Dn.On],default:n.enabled,enumDescriptions:[ht(0,"Disable the code action menu."),ht(0,"Show the code action menu when the cursor is on lines with code."),ht(0,"Show the code action menu when the cursor is on lines with code or on empty lines.")],description:ht(0,"Enables the Code Action lightbulb in the editor.")}})||this}n.prototype.validate=function(t){return!t||typeof t!="object"?this.defaultValue:{enabled:kn(t.enabled,this.defaultValue.enabled,[Dn.Off,Dn.OnCode,Dn.On])}};return n}(cn))),lineDecorationsWidth:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,66,"lineDecorationsWidth",10)||this}n.prototype.validate=function(t){return typeof t=="string"&&/^\d+(\.\d+)?ch$/.test(t)?-parseFloat(t.substring(0,t.length-2)):mn.clampedInt(t,this.defaultValue,0,1e3)};n.prototype.compute=function(t,n,i){return i<0?mn.clampedInt(-i*t.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i};return n}(cn))),lineHeight:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,67,"lineHeight",zn.lineHeight,(function(t){return yn.clamp(t,0,150)}),{markdownDescription:ht(0,"Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.")})||this}n.prototype.compute=function(t,n,i){return t.fontInfo.lineHeight};return n}(yn))),lineNumbers:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[ht(0,"Line numbers are not rendered."),ht(0,"Line numbers are rendered as absolute number."),ht(0,"Line numbers are rendered as distance in lines to cursor position."),ht(0,"Line numbers are rendered every 10 lines.")],default:"on",description:ht(0,"Controls the display of line numbers.")})||this}n.prototype.validate=function(t){var n=this.defaultValue.renderType,i=this.defaultValue.renderFn;return t!==void 0&&(typeof t=="function"?(n=4,i=t):n=t==="interval"?3:t==="relative"?2:t==="on"?1:0),{renderType:n,renderFn:i}};return n}(cn))),lineNumbersMinChars:Kn(new mn(69,"lineNumbersMinChars",5,1,300)),linkedEditing:Kn(new pn(70,"linkedEditing",!1,{description:ht(0,"Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:Kn(new pn(71,"links",!0,{description:ht(0,"Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Kn(new xn(72,"matchBrackets","always",["always","near","never"],{description:ht(0,"Highlight matching brackets.")})),minimap:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9};return t.call(this,73,"minimap",n,{"editor.minimap.enabled":{type:"boolean",default:n.enabled,description:ht(0,"Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:n.autohide,description:ht(0,"Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[ht(0,"The minimap has the same size as the editor contents (and might scroll)."),ht(0,"The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),ht(0,"The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:n.size,description:ht(0,"Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:n.side,description:ht(0,"Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:n.showSlider,description:ht(0,"Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:n.scale,minimum:1,maximum:3,enum:[1,2,3],description:ht(0,"Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:n.renderCharacters,description:ht(0,"Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:n.maxColumn,description:ht(0,"Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:n.showRegionSectionHeaders,description:ht(0,"Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:n.showMarkSectionHeaders,description:ht(0,"Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:n.sectionHeaderFontSize,description:ht(0,"Controls the font size of section headers in the minimap.")}})||this}n.prototype.validate=function(t){var n;if(!t||typeof t!="object")return this.defaultValue;var i=t;return{enabled:gn(i.enabled,this.defaultValue.enabled),autohide:gn(i.autohide,this.defaultValue.autohide),size:kn(i.size,this.defaultValue.size,["proportional","fill","fit"]),side:kn(i.side,this.defaultValue.side,["right","left"]),showSlider:kn(i.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:gn(i.renderCharacters,this.defaultValue.renderCharacters),scale:mn.clampedInt(i.scale,1,1,3),maxColumn:mn.clampedInt(i.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:gn(i.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:gn(i.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:yn.clamp((n=i.sectionHeaderFontSize)!==null&&n!==void 0?n:this.defaultValue.sectionHeaderFontSize,4,32)}};return n}(cn))),mouseStyle:Kn(new xn(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Kn(new yn(75,"mouseWheelScrollSensitivity",1,(function(t){return t===0?1:t}),{markdownDescription:ht(0,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Kn(new pn(76,"mouseWheelZoom",!1,{markdownDescription:ht(0,Ft?"Zoom the font of the editor when using mouse wheel and holding `Cmd`.":"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Kn(new pn(77,"multiCursorMergeOverlapping",!0,{description:ht(0,"Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Kn(new Cn(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],(function(t){return t==="ctrlCmd"?Ft?"metaKey":"ctrlKey":"altKey"}),{markdownEnumDescriptions:[ht(0,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),ht(0,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:ht(0,"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Kn(new xn(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[ht(0,"Each cursor pastes a single line of the text."),ht(0,"Each cursor pastes the full text.")],markdownDescription:ht(0,"Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:Kn(new mn(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:ht(0,"Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:Kn(new xn(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[ht(0,"Does not highlight occurrences."),ht(0,"Highlights occurrences only in the current file."),ht(0,"Experimental: Highlights occurrences across all valid open files.")],markdownDescription:ht(0,"Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:Kn(new pn(82,"overviewRulerBorder",!0,{description:ht(0,"Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Kn(new mn(83,"overviewRulerLanes",3,0,3)),padding:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:ht(0,"Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:ht(0,"Controls the amount of space between the bottom edge of the editor and the last line.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{top:mn.clampedInt(n.top,0,0,1e3),bottom:mn.clampedInt(n.bottom,0,0,1e3)}};return n}(cn))),pasteAs:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:!0,showPasteSelector:"afterPaste"};return t.call(this,85,"pasteAs",n,{"editor.pasteAs.enabled":{type:"boolean",default:n.enabled,markdownDescription:ht(0,"Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:ht(0,"Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[ht(0,"Show the paste selector widget after content is pasted into the editor."),ht(0,"Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{enabled:gn(n.enabled,this.defaultValue.enabled),showPasteSelector:kn(n.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}};return n}(cn))),parameterHints:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:!0,cycle:!0};return t.call(this,86,"parameterHints",n,{"editor.parameterHints.enabled":{type:"boolean",default:n.enabled,description:ht(0,"Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:n.cycle,description:ht(0,"Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{enabled:gn(n.enabled,this.defaultValue.enabled),cycle:gn(n.cycle,this.defaultValue.cycle)}};return n}(cn))),peekWidgetDefaultFocus:Kn(new xn(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[ht(0,"Focus the tree when opening peek"),ht(0,"Focus the editor when opening peek")],description:ht(0,"Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:Kn(new pn(88,"definitionLinkOpensInPeek",!1,{description:ht(0,"Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Kn(new(function(t){__extends(n,t);function n(){var n=this;var i={other:"on",comments:"off",strings:"off"},r=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[ht(0,"Quick suggestions show inside the suggest widget"),ht(0,"Quick suggestions show as ghost text"),ht(0,"Quick suggestions are disabled")]}];n=t.call(this,89,"quickSuggestions",i,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:r,default:i.strings,description:ht(0,"Enable quick suggestions inside strings.")},comments:{anyOf:r,default:i.comments,description:ht(0,"Enable quick suggestions inside comments.")},other:{anyOf:r,default:i.other,description:ht(0,"Enable quick suggestions outside of strings and comments.")}},default:i,markdownDescription:ht(0,"Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")})||this,n.defaultValue=i;return n}n.prototype.validate=function(t){if(typeof t=="boolean"){var n=t?"on":"off";return{comments:n,strings:n,other:n}}if(!t||typeof t!="object")return this.defaultValue;var i=t.other,r=t.comments,e=t.strings,o=["on","inline","off"];var s,u,a;return s=typeof i=="boolean"?i?"on":"off":kn(i,this.defaultValue.other,o),u=typeof r=="boolean"?r?"on":"off":kn(r,this.defaultValue.comments,o),a=typeof e=="boolean"?e?"on":"off":kn(e,this.defaultValue.strings,o),{other:s,comments:u,strings:a}};return n}(cn))),quickSuggestionsDelay:Kn(new mn(90,"quickSuggestionsDelay",10,0,1073741824,{description:ht(0,"Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Kn(new pn(91,"readOnly",!1)),readOnlyMessage:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,92,"readOnlyMessage",void 0)||this}n.prototype.validate=function(t){return t&&typeof t=="object"?t:this.defaultValue};return n}(cn))),renameOnType:Kn(new pn(93,"renameOnType",!1,{description:ht(0,"Controls whether the editor auto renames on type."),markdownDeprecationMessage:ht(0,"Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Kn(new pn(94,"renderControlCharacters",!0,{description:ht(0,"Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Kn(new xn(95,"renderFinalNewline",Lt?"dimmed":"on",["off","on","dimmed"],{description:ht(0,"Render last line number when the file ends with a newline.")})),renderLineHighlight:Kn(new xn(96,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",ht(0,"Highlights both the gutter and the current line.")],description:ht(0,"Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Kn(new pn(97,"renderLineHighlightOnlyWhenFocus",!1,{description:ht(0,"Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Kn(new xn(98,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Kn(new xn(99,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",ht(0,"Render whitespace characters except for single spaces between words."),ht(0,"Render whitespace characters only on selected text."),ht(0,"Render only trailing whitespace characters."),""],description:ht(0,"Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Kn(new mn(100,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:Kn(new pn(101,"roundedSelection",!0,{description:ht(0,"Controls whether selections should have rounded corners.")})),rulers:Kn(new(function(t){__extends(n,t);function n(){var n=[],i={type:"number",description:ht(0,"Number of monospace characters at which this editor ruler will render.")};return t.call(this,102,"rulers",n,{type:"array",items:{anyOf:[i,{type:["object"],properties:{column:i,color:{type:"string",description:ht(0,"Color of this editor ruler."),format:"color-hex"}}}]},default:n,description:ht(0,"Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})||this}n.prototype.validate=function(t){if(Array.isArray(t)){var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];if(typeof e=="number")n.push({column:mn.clampedInt(e,0,0,1e4),color:null});else if(e&&typeof e=="object"){var o=e;n.push({column:mn.clampedInt(o.column,0,0,1e4),color:o.color})}}return n.sort((function(t,n){return t.column-n.column})),n}return this.defaultValue};return n}(cn))),scrollbar:Kn(new(function(t){__extends(n,t);function n(){var n={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};return t.call(this,103,"scrollbar",n,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[ht(0,"The vertical scrollbar will be visible only when necessary."),ht(0,"The vertical scrollbar will always be visible."),ht(0,"The vertical scrollbar will always be hidden.")],default:"auto",description:ht(0,"Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[ht(0,"The horizontal scrollbar will be visible only when necessary."),ht(0,"The horizontal scrollbar will always be visible."),ht(0,"The horizontal scrollbar will always be hidden.")],default:"auto",description:ht(0,"Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:n.verticalScrollbarSize,description:ht(0,"The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:n.horizontalScrollbarSize,description:ht(0,"The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:n.scrollByPage,description:ht(0,"Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:n.ignoreHorizontalScrollbarInContentHeight,description:ht(0,"When set, the horizontal scrollbar will not increase the size of the editor's content.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t,i=mn.clampedInt(n.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=mn.clampedInt(n.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:mn.clampedInt(n.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:Ln(n.vertical,this.defaultValue.vertical),horizontal:Ln(n.horizontal,this.defaultValue.horizontal),useShadows:gn(n.useShadows,this.defaultValue.useShadows),verticalHasArrows:gn(n.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:gn(n.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:gn(n.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:gn(n.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:mn.clampedInt(n.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:mn.clampedInt(n.verticalSliderSize,r,0,1e3),scrollByPage:gn(n.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:gn(n.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}};return n}(cn))),scrollBeyondLastColumn:Kn(new mn(104,"scrollBeyondLastColumn",4,0,1073741824,{description:ht(0,"Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Kn(new pn(105,"scrollBeyondLastLine",!0,{description:ht(0,"Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Kn(new pn(106,"scrollPredominantAxis",!0,{description:ht(0,"Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Kn(new pn(107,"selectionClipboard",!0,{description:ht(0,"Controls whether the Linux primary clipboard should be supported."),included:Lt})),selectionHighlight:Kn(new pn(108,"selectionHighlight",!0,{description:ht(0,"Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Kn(new pn(109,"selectOnLineNumbers",!0)),showFoldingControls:Kn(new xn(110,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[ht(0,"Always show the folding controls."),ht(0,"Never show the folding controls and reduce the gutter size."),ht(0,"Only show the folding controls when the mouse is over the gutter.")],description:ht(0,"Controls when the folding controls on the gutter are shown.")})),showUnused:Kn(new pn(111,"showUnused",!0,{description:ht(0,"Controls fading out of unused code.")})),showDeprecated:Kn(new pn(140,"showDeprecated",!0,{description:ht(0,"Controls strikethrough deprecated variables.")})),inlayHints:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:"on",fontSize:0,fontFamily:"",padding:!1};return t.call(this,141,"inlayHints",n,{"editor.inlayHints.enabled":{type:"string",default:n.enabled,description:ht(0,"Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[ht(0,"Inlay hints are enabled"),ht(0,"Inlay hints are showing by default and hide when holding {0}",Ft?"Ctrl+Option":"Ctrl+Alt"),ht(0,"Inlay hints are hidden by default and show when holding {0}",Ft?"Ctrl+Option":"Ctrl+Alt"),ht(0,"Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:n.fontSize,markdownDescription:ht(0,"Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:n.fontFamily,markdownDescription:ht(0,"Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:n.padding,description:ht(0,"Enables the padding around the inlay hints in the editor.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return typeof n.enabled=="boolean"&&(n.enabled=n.enabled?"on":"off"),{enabled:kn(n.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:mn.clampedInt(n.fontSize,this.defaultValue.fontSize,0,100),fontFamily:_n.string(n.fontFamily,this.defaultValue.fontFamily),padding:gn(n.padding,this.defaultValue.padding)}};return n}(cn))),snippetSuggestions:Kn(new xn(112,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[ht(0,"Show snippet suggestions on top of other suggestions."),ht(0,"Show snippet suggestions below other suggestions."),ht(0,"Show snippets suggestions with other suggestions."),ht(0,"Do not show snippet suggestions.")],description:ht(0,"Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,113,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:ht(0,"Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:ht(0,"Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})||this}n.prototype.validate=function(t){return t&&typeof t=="object"?{selectLeadingAndTrailingWhitespace:gn(t.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:gn(t.selectSubwords,this.defaultValue.selectSubwords)}:this.defaultValue};return n}(cn))),smoothScrolling:Kn(new pn(114,"smoothScrolling",!1,{description:ht(0,"Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Kn(new mn(117,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Kn(new(function(t){__extends(n,t);function n(){var n={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};return t.call(this,118,"suggest",n,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[ht(0,"Insert suggestion without overwriting text right of the cursor."),ht(0,"Insert suggestion and overwrite text right of the cursor.")],default:n.insertMode,description:ht(0,"Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:n.filterGraceful,description:ht(0,"Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:n.localityBonus,description:ht(0,"Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:n.shareSuggestSelections,markdownDescription:ht(0,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[ht(0,"Always select a suggestion when automatically triggering IntelliSense."),ht(0,"Never select a suggestion when automatically triggering IntelliSense."),ht(0,"Select a suggestion only when triggering IntelliSense from a trigger character."),ht(0,"Select a suggestion only when triggering IntelliSense as you type.")],default:n.selectionMode,markdownDescription:ht(0,"Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:n.snippetsPreventQuickSuggestions,description:ht(0,"Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:n.showIcons,description:ht(0,"Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:n.showStatusBar,description:ht(0,"Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:n.preview,description:ht(0,"Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:n.showInlineDetails,description:ht(0,"Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:ht(0,"This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:ht(0,"This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:ht(0,"When enabled IntelliSense shows `issues`-suggestions.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{insertMode:kn(n.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:gn(n.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:gn(n.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:gn(n.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:gn(n.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:kn(n.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:gn(n.showIcons,this.defaultValue.showIcons),showStatusBar:gn(n.showStatusBar,this.defaultValue.showStatusBar),preview:gn(n.preview,this.defaultValue.preview),previewMode:kn(n.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:gn(n.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:gn(n.showMethods,this.defaultValue.showMethods),showFunctions:gn(n.showFunctions,this.defaultValue.showFunctions),showConstructors:gn(n.showConstructors,this.defaultValue.showConstructors),showDeprecated:gn(n.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:gn(n.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:gn(n.showFields,this.defaultValue.showFields),showVariables:gn(n.showVariables,this.defaultValue.showVariables),showClasses:gn(n.showClasses,this.defaultValue.showClasses),showStructs:gn(n.showStructs,this.defaultValue.showStructs),showInterfaces:gn(n.showInterfaces,this.defaultValue.showInterfaces),showModules:gn(n.showModules,this.defaultValue.showModules),showProperties:gn(n.showProperties,this.defaultValue.showProperties),showEvents:gn(n.showEvents,this.defaultValue.showEvents),showOperators:gn(n.showOperators,this.defaultValue.showOperators),showUnits:gn(n.showUnits,this.defaultValue.showUnits),showValues:gn(n.showValues,this.defaultValue.showValues),showConstants:gn(n.showConstants,this.defaultValue.showConstants),showEnums:gn(n.showEnums,this.defaultValue.showEnums),showEnumMembers:gn(n.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:gn(n.showKeywords,this.defaultValue.showKeywords),showWords:gn(n.showWords,this.defaultValue.showWords),showColors:gn(n.showColors,this.defaultValue.showColors),showFiles:gn(n.showFiles,this.defaultValue.showFiles),showReferences:gn(n.showReferences,this.defaultValue.showReferences),showFolders:gn(n.showFolders,this.defaultValue.showFolders),showTypeParameters:gn(n.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:gn(n.showSnippets,this.defaultValue.showSnippets),showUsers:gn(n.showUsers,this.defaultValue.showUsers),showIssues:gn(n.showIssues,this.defaultValue.showIssues)}};return n}(cn))),inlineSuggest:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};return t.call(this,62,"inlineSuggest",n,{"editor.inlineSuggest.enabled":{type:"boolean",default:n.enabled,description:ht(0,"Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:n.showToolbar,enum:["always","onHover","never"],enumDescriptions:[ht(0,"Show the inline suggestion toolbar whenever an inline suggestion is shown."),ht(0,"Show the inline suggestion toolbar when hovering over an inline suggestion."),ht(0,"Never show the inline suggestion toolbar.")],description:ht(0,"Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:n.suppressSuggestions,description:ht(0,"Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:n.fontFamily,description:ht(0,"Controls the font family of the inline suggestions.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{enabled:gn(n.enabled,this.defaultValue.enabled),mode:kn(n.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:kn(n.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:gn(n.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:gn(n.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:_n.string(n.fontFamily,this.defaultValue.fontFamily)}};return n}(cn))),inlineEdit:Kn(new(function(t){__extends(n,t);function n(){var n={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1,backgroundColoring:!1};return t.call(this,63,"experimentalInlineEdit",n,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:n.enabled,description:ht(0,"Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:n.showToolbar,enum:["always","onHover","never"],enumDescriptions:[ht(0,"Show the inline edit toolbar whenever an inline suggestion is shown."),ht(0,"Show the inline edit toolbar when hovering over an inline suggestion."),ht(0,"Never show the inline edit toolbar.")],description:ht(0,"Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:n.fontFamily,description:ht(0,"Controls the font family of the inline edit.")},"editor.experimentalInlineEdit.backgroundColoring":{type:"boolean",default:n.backgroundColoring,description:ht(0,"Controls whether to color the background of inline edits.")}})||this}n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{enabled:gn(n.enabled,this.defaultValue.enabled),showToolbar:kn(n.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:_n.string(n.fontFamily,this.defaultValue.fontFamily),keepOnBlur:gn(n.keepOnBlur,this.defaultValue.keepOnBlur),backgroundColoring:gn(n.backgroundColoring,this.defaultValue.backgroundColoring)}};return n}(cn))),inlineCompletionsAccessibilityVerbose:Kn(new pn(149,"inlineCompletionsAccessibilityVerbose",!1,{description:ht(0,"Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:Kn(new mn(119,"suggestFontSize",0,0,1e3,{markdownDescription:ht(0,"Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Kn(new mn(120,"suggestLineHeight",0,0,1e3,{markdownDescription:ht(0,"Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Kn(new pn(121,"suggestOnTriggerCharacters",!0,{description:ht(0,"Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Kn(new xn(122,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[ht(0,"Always select the first suggestion."),ht(0,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),ht(0,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:ht(0,"Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Kn(new xn(123,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[ht(0,"Tab complete will insert the best matching suggestion when pressing tab."),ht(0,"Disable tab completions."),ht(0,"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:ht(0,"Enables tab completions.")})),tabIndex:Kn(new mn(124,"tabIndex",0,-1,1073741824)),unicodeHighlight:Kn(new(function(t){__extends(n,t);function n(){var n;var i={nonBasicASCII:jn,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:jn,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};return t.call(this,125,"unicodeHighlight",i,(n={},n[In]={restricted:!0,type:["boolean","string"],enum:[!0,!1,jn],default:i.nonBasicASCII,description:ht(0,"Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},n[Tn]={restricted:!0,type:"boolean",default:i.invisibleCharacters,description:ht(0,"Controls whether characters that just reserve space or have no width at all are highlighted.")},n[Bn]={restricted:!0,type:"boolean",default:i.ambiguousCharacters,description:ht(0,"Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},n[Nn]={restricted:!0,type:["boolean","string"],enum:[!0,!1,jn],default:i.includeComments,description:ht(0,"Controls whether characters in comments should also be subject to Unicode highlighting.")},n[Pn]={restricted:!0,type:["boolean","string"],enum:[!0,!1,jn],default:i.includeStrings,description:ht(0,"Controls whether characters in strings should also be subject to Unicode highlighting.")},n[Rn]={restricted:!0,type:"object",default:i.allowedCharacters,description:ht(0,"Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},n[Wn]={restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:i.allowedLocales,description:ht(0,"Unicode characters that are common in allowed locales are not being highlighted.")},n))||this}n.prototype.applyUpdate=function(n,i){var r=!1;i.allowedCharacters&&n&&(ot(n.allowedCharacters,i.allowedCharacters)||(n=__assign(__assign({},n),{allowedCharacters:i.allowedCharacters}),r=!0)),i.allowedLocales&&n&&(ot(n.allowedLocales,i.allowedLocales)||(n=__assign(__assign({},n),{allowedLocales:i.allowedLocales}),r=!0));var e=t.prototype.applyUpdate.call(this,n,i);return r?new fn(e.newValue,!0):e};n.prototype.validate=function(t){if(!t||typeof t!="object")return this.defaultValue;var n=t;return{nonBasicASCII:Hn(n.nonBasicASCII,jn,[!0,!1,jn]),invisibleCharacters:gn(n.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:gn(n.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Hn(n.includeComments,jn,[!0,!1,jn]),includeStrings:Hn(n.includeStrings,jn,[!0,!1,jn]),allowedCharacters:this.validateBooleanMap(t.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(t.allowedLocales,this.defaultValue.allowedLocales)}};n.prototype.validateBooleanMap=function(t,n){if(typeof t!="object"||!t)return n;var i={};for(var r=0,e=Object.entries(t);r<e.length;r++){var o=e[r],s=o[0],u=o[1];u===!0&&(i[s]=!0)}return i};return n}(cn))),unusualLineTerminators:Kn(new xn(126,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[ht(0,"Unusual line terminators are automatically removed."),ht(0,"Unusual line terminators are ignored."),ht(0,"Unusual line terminators prompt to be removed.")],description:ht(0,"Remove unusual line terminators that might cause problems.")})),useShadowDOM:Kn(new pn(127,"useShadowDOM",!0)),useTabStops:Kn(new pn(128,"useTabStops",!0,{description:ht(0,"Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:Kn(new xn(129,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[ht(0,"Use the default line break rule."),ht(0,"Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:ht(0,"Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,130,"wordSegmenterLocales",[],{anyOf:[{description:ht(0,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:ht(0,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})||this}n.prototype.validate=function(t){if(typeof t=="string"&&(t=[t]),Array.isArray(t)){var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];if(typeof e=="string")try{Intl.Segmenter.supportedLocalesOf(e).length>0&&n.push(e)}catch(t){}}return n}return this.defaultValue};return n}(cn))),wordSeparators:Kn(new _n(131,"wordSeparators",nn,{description:ht(0,"Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Kn(new xn(132,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[ht(0,"Lines will never wrap."),ht(0,"Lines will wrap at the viewport width."),ht(0,"Lines will wrap at `#editor.wordWrapColumn#`."),ht(0,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:ht(0,"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Kn(new _n(133,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:Kn(new _n(134,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:Kn(new mn(135,"wordWrapColumn",80,1,1073741824,{markdownDescription:ht(0,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Kn(new xn(136,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Kn(new xn(137,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,142)||this}n.prototype.compute=function(t,n,i){var r=["monaco-editor"];return n.get(39)&&r.push(n.get(39)),t.extraEditorClassName&&r.push(t.extraEditorClassName),n.get(74)==="default"?r.push("mouse-default"):n.get(74)==="copy"&&r.push("mouse-copy"),n.get(111)&&r.push("showUnused"),n.get(140)&&r.push("showDeprecated"),r.join(" ")};return n}(vn))),defaultColorDecorators:Kn(new pn(147,"defaultColorDecorators",!1,{markdownDescription:ht(0,"Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,143)||this}n.prototype.compute=function(t,n,i){return t.pixelRatio};return n}(vn))),tabFocusMode:Kn(new pn(144,"tabFocusMode",!1,{markdownDescription:ht(0,"Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:Kn(new Mn),wrappingInfo:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,146)||this}n.prototype.compute=function(t,n,i){var r=n.get(145);return{isDominatedByLongLines:t.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}};return n}(vn))),wrappingIndent:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,138,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[ht(0,"No indentation. Wrapped lines begin at column 1."),ht(0,"Wrapped lines get the same indentation as the parent."),ht(0,"Wrapped lines get +1 indentation toward the parent."),ht(0,"Wrapped lines get +2 indentation toward the parent.")],description:ht(0,"Controls the indentation of wrapped lines."),default:"same"}})||this}n.prototype.validate=function(t){switch(t){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1};n.prototype.compute=function(t,n,i){return n.get(2)===2?0:i};return n}(cn))),wrappingStrategy:Kn(new(function(t){__extends(n,t);function n(){return t.call(this,139,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[ht(0,"Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),ht(0,"Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:ht(0,"Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})||this}n.prototype.validate=function(t){return kn(t,"simple",["simple","advanced"])};n.prototype.compute=function(t,n,i){return n.get(2)===2?"advanced":i};return n}(cn)))},qn=new(function(){function t(){this.listeners=[],this.unexpectedErrorHandler=function(t){setTimeout((function(){throw t.stack?ii.isErrorNoTelemetry(t)?new ii(t.message+"\n\n"+t.stack):new Error(t.message+"\n\n"+t.stack):t}),0)}}t.prototype.emit=function(t){this.listeners.forEach((function(n){n(t)}))};t.prototype.onUnexpectedError=function(t){this.unexpectedErrorHandler(t),this.emit(t)};t.prototype.onUnexpectedExternalError=function(t){this.unexpectedErrorHandler(t)};return t}());function Gn(t){Qn(t)||qn.onUnexpectedError(t)}function $n(t){Qn(t)||qn.onUnexpectedExternalError(t)}function Jn(t){if(t instanceof Error){var n=t.name,i=t.message;return{$isError:!0,name:n,message:i,stack:t.stacktrace||t.stack,noTelemetry:ii.isErrorNoTelemetry(t)}}return t}var Zn="Canceled";function Qn(t){return t instanceof Yn||t instanceof Error&&t.name===Zn&&t.message===Zn}var Yn=function(t){__extends(n,t);function n(){var n=this;n=t.call(this,Zn)||this,n.name=n.message;return n}return n}(Error);function Xn(t){return t?new Error("Illegal argument: ".concat(t)):new Error("Illegal argument")}function ti(t){return t?new Error("Illegal state: ".concat(t)):new Error("Illegal state")}var ni=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,"NotSupported")||this,n&&(i.message=n);return i}return n}(Error);var ii=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i.name="CodeExpectedError";return i}n.fromError=function(t){if(t instanceof n)return t;var i=new n;return i.message=t.message,i.stack=t.stack,i};n.isErrorNoTelemetry=function(t){return t.name==="CodeExpectedError"};return n}(Error);var ri=function(t){__extends(n,t);function n(i){var r=this;r=t.call(this,i||"An unexpected bug occurred.")||this,Object.setPrototypeOf(r,n.prototype);return r}return n}(Error);function ei(t,n){var i=this;var r,e=!1;return function(){return e||(e=!0,r=t.apply(i,arguments)),r}}function oi(t){return typeof t.dispose=="function"&&t.dispose.length===0}function si(t){if(Yt.is(t)){var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];if(e)try{e.dispose()}catch(t){n.push(t)}}if(n.length===1)throw n[0];if(n.length>1)throw new AggregateError(n,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}if(t)return t.dispose(),t}function ui(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return ai((function(){return si(t)}))}function ai(t){return{dispose:ei((function(){t()}))}}var hi=function(){function t(){this._toDispose=new Set,this._isDisposed=!1}t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this.clear())};Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:false,configurable:true});t.prototype.clear=function(){if(this._toDispose.size!==0)try{si(this._toDispose)}finally{this._toDispose.clear()}};t.prototype.add=function(n){if(!n)return n;if(n===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(n),n};t.prototype.deleteAndLeak=function(t){t&&this._toDispose.has(t)&&this._toDispose.delete(t)};return t}();hi.DISABLE_DISPOSED_WARNING=!1;var ci=function(){function t(){this._store=new hi}t.prototype.dispose=function(){this._store.dispose()};t.prototype._register=function(t){if(t===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(t)};return t}();ci.None=Object.freeze({dispose:function(){}});var fi=function(){function t(){this._isDisposed=!1}Object.defineProperty(t.prototype,"value",{get:function(){return this._isDisposed?void 0:this._value},set:function(t){var n;this._isDisposed||t===this._value||((n=this._value)===null||n===void 0||n.dispose(),this._value=t)},enumerable:false,configurable:true});t.prototype.clear=function(){this.value=void 0};t.prototype.dispose=function(){var t;this._isDisposed=!0,(t=this._value)===null||t===void 0||t.dispose(),this._value=void 0};return t}();var li=function(){function t(t){this._disposable=t,this._counter=1}t.prototype.acquire=function(){return this._counter++,this};t.prototype.release=function(){return--this._counter==0&&this._disposable.dispose(),this};return t}();var vi=function(){function t(t){this.object=t}t.prototype.dispose=function(){};return t}();var di=function(){function t(){this._store=new Map,this._isDisposed=!1}t.prototype.dispose=function(){this._isDisposed=!0,this.clearAndDisposeAll()};t.prototype.clearAndDisposeAll=function(){if(this._store.size)try{si(this._store.values())}finally{this._store.clear()}};t.prototype.get=function(t){return this._store.get(t)};t.prototype.set=function(t,n,i){if(i===void 0){i=!1}var r;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(r=this._store.get(t))===null||r===void 0||r.dispose(),this._store.set(t,n)};t.prototype.deleteAndDispose=function(t){var n;(n=this._store.get(t))===null||n===void 0||n.dispose(),this._store.delete(t)};t.prototype[Symbol.iterator]=function(){return this._store[Symbol.iterator]()};return t}();var gi=globalThis.performance&&typeof globalThis.performance.now=="function";var pi=function(){function t(t){this._now=gi&&t===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}t.create=function(n){return new t(n)};t.prototype.stop=function(){this._stopTime=this._now()};t.prototype.reset=function(){this._startTime=this._now(),this._stopTime=-1};t.prototype.elapsed=function(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime};return t}();var wi;(function(t){function n(t){return function(n,i,r){if(i===void 0){i=null}var e,o=!1;return e=t((function(t){if(!o)return e?e.dispose():o=!0,n.call(i,t)}),null,r),o&&e.dispose(),e}}function i(t,n,i){return e((function(i,r,e){if(r===void 0){r=null}return t((function(t){return i.call(r,n(t))}),null,e)}),i)}function r(t,n,i){return e((function(i,r,e){if(r===void 0){r=null}return t((function(t){return n(t)&&i.call(r,t)}),null,e)}),i)}function e(t,n){var i;var r=new ki({onWillAddFirstListener:function(){i=t(r.fire,r)},onDidRemoveLastListener:function(){i==null||i.dispose()}});return n==null||n.add(r),r.event}function o(t,n,i,r,e,o,s){if(i===void 0){i=100}if(r===void 0){r=!1}if(e===void 0){e=!1}var u,a,h,c,f=0;var l=new ki({leakWarningThreshold:o,onWillAddFirstListener:function(){u=t((function(t){f++,a=n(a,t),r&&!h&&(l.fire(a),a=void 0),c=function(){var t=a;a=void 0,h=void 0,(!r||f>1)&&l.fire(t),f=0},typeof i=="number"?(clearTimeout(h),h=setTimeout(c,i)):h===void 0&&(h=0,queueMicrotask(c))}))},onWillRemoveListener:function(){e&&f>0&&(c==null||c())},onDidRemoveLastListener:function(){c=void 0,u.dispose()}});return s==null||s.add(l),l.event}t.None=function(){return ci.None},t.defer=function(t,n){return o(t,(function(){}),0,void 0,!0,void 0,n)},t.once=n,t.map=i,t.forEach=function(t,n,i){return e((function(i,r,e){if(r===void 0){r=null}return t((function(t){n(t),i.call(r,t)}),null,e)}),i)},t.filter=r,t.signal=function(t){return t},t.any=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return function(n,i,r){if(i===void 0){i=null}return function(t,n){return n instanceof Array?n.push(t):n&&n.add(t),t}(ui.apply(void 0,t.map((function(t){return t((function(t){return n.call(i,t)}))}))),r)}},t.reduce=function(t,n,r,e){var o=r;return i(t,(function(t){return o=n(o,t),o}),e)},t.debounce=o,t.accumulate=function(n,i,r){if(i===void 0){i=0}return t.debounce(n,(function(t,n){return t?(t.push(n),t):[n]}),i,void 0,!0,void 0,r)},t.latch=function(t,n,i){if(n===void 0){n=function(t,n){return t===n}}var e,o=!0;return r(t,(function(t){var i=o||!n(t,e);return o=!1,e=t,i}),i)},t.split=function(n,i,r){return[t.filter(n,i,r),t.filter(n,(function(t){return!i(t)}),r)]},t.buffer=function(t,n,i,r){if(n===void 0){n=!1}if(i===void 0){i=[]}var e=i.slice(),o=t((function(t){e?e.push(t):u.fire(t)}));r&&r.add(o);var s=function(){e==null||e.forEach((function(t){return u.fire(t)})),e=null},u=new ki({onWillAddFirstListener:function(){o||(o=t((function(t){return u.fire(t)})),r&&r.add(o))},onDidAddFirstListener:function(){e&&(n?setTimeout(s):s())},onDidRemoveLastListener:function(){o&&o.dispose(),o=null}});return r&&r.add(u),u.event},t.chain=function(t,n){return function(i,r,e){var o=n(new u);return t((function(t){var n=o.evaluate(t);n!==s&&i.call(r,n)}),void 0,e)}};var s=Symbol("HaltChainable");var u=function(){function t(){this.steps=[]}t.prototype.map=function(t){return this.steps.push(t),this};t.prototype.forEach=function(t){return this.steps.push((function(n){return t(n),n})),this};t.prototype.filter=function(t){return this.steps.push((function(n){return t(n)?n:s})),this};t.prototype.reduce=function(t,n){var i=n;return this.steps.push((function(n){return i=t(i,n),i})),this};t.prototype.latch=function(t){if(t===void 0){t=function(t,n){return t===n}}var n,i=!0;return this.steps.push((function(r){var e=i||!t(r,n);return i=!1,n=r,e?r:s})),this};t.prototype.evaluate=function(t){for(var n=0,i=this.steps;n<i.length;n++){var r=i[n];if((t=r(t))===s)break}return t};return t}();t.fromNodeEventEmitter=function(t,n,i){if(i===void 0){i=function(t){return t}}var r=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return e.fire(i.apply(void 0,t))},e=new ki({onWillAddFirstListener:function(){return t.on(n,r)},onDidRemoveLastListener:function(){return t.removeListener(n,r)}});return e.event},t.fromDOMEventEmitter=function(t,n,i){if(i===void 0){i=function(t){return t}}var r=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return e.fire(i.apply(void 0,t))},e=new ki({onWillAddFirstListener:function(){return t.addEventListener(n,r)},onDidRemoveLastListener:function(){return t.removeEventListener(n,r)}});return e.event},t.toPromise=function(t){return new Promise((function(i){return n(t)(i)}))},t.fromPromise=function(t){var n=new ki;return t.then((function(t){n.fire(t)}),(function(){n.fire(void 0)})).finally((function(){n.dispose()})),n.event},t.runAndSubscribe=function(t,n,i){return n(i),t((function(t){return n(t)}))};var a=function(){function t(t,n){var i=this;this._observable=t,this._counter=0,this._hasChanged=!1;var r={onWillAddFirstListener:function(){t.addObserver(i)},onDidRemoveLastListener:function(){t.removeObserver(i)}};this.emitter=new ki(r),n&&n.add(this.emitter)}t.prototype.beginUpdate=function(t){this._counter++};t.prototype.handlePossibleChange=function(t){};t.prototype.handleChange=function(t,n){this._hasChanged=!0};t.prototype.endUpdate=function(t){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))};return t}();t.fromObservable=function(t,n){return new a(t,n).emitter.event},t.fromObservableLight=function(t){return function(n,i,r){var e=0,o=!1;var s={beginUpdate:function(){e++},endUpdate:function(){e--,e===0&&(t.reportChanges(),o&&(o=!1,n.call(i)))},handlePossibleChange:function(){},handleChange:function(){o=!0}};t.addObserver(s),t.reportChanges();var u={dispose:function(){t.removeObserver(s)}};return r instanceof hi?r.add(u):Array.isArray(r)&&r.push(u),u}}})(wi||(wi={}));var mi=function(){function t(n){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name="".concat(n,"_").concat(t._idPool++),t.all.add(this)}t.prototype.start=function(t){this._stopWatch=new pi,this.listenerCount=t};t.prototype.stop=function(){if(this._stopWatch){var t=this._stopWatch.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this._stopWatch=void 0}};return t}();mi.all=new Set,mi._idPool=0;var bi=function(){function t(t,n){if(n===void 0){n=Math.random().toString(18).slice(2,5)}this.threshold=t,this.name=n,this._warnCountdown=0}t.prototype.dispose=function(){var t;(t=this._stacks)===null||t===void 0||t.clear()};t.prototype.check=function(t,n){var i=this;var r=this.threshold;if(r<=0||n<r)return;this._stacks||(this._stacks=new Map);var e=this._stacks.get(t.value)||0;if(this._stacks.set(t.value,e+1),this._warnCountdown-=1,this._warnCountdown<=0){var o=void 0;this._warnCountdown=.5*r;var s=0;for(var u=0,a=this._stacks;u<a.length;u++){var h=a[u],c=h[0],f=h[1];(!o||s<f)&&(o=c,s=f)}console.warn("[".concat(this.name,"] potential listener LEAK detected, having ").concat(n," listeners already. MOST frequent listener (").concat(s,"):")),console.warn(o)}return function(){var n=i._stacks.get(t.value)||0;i._stacks.set(t.value,n-1)}};return t}();var yi=function(){function t(t){this.value=t}t.create=function(){var n;return new t((n=(new Error).stack)!==null&&n!==void 0?n:"")};t.prototype.print=function(){console.warn(this.value.split("\n").slice(2).join("\n"))};return t}();var _i=function(){function t(t){this.value=t}return t}();var ki=function(){function t(t){var n,i,r,e,o;this._size=0,this._options=t,this._leakageMon=!((n=this._options)===null||n===void 0)&&n.leakWarningThreshold?new bi((r=(i=this._options)===null||i===void 0?void 0:i.leakWarningThreshold)!==null&&r!==void 0?r:-1):void 0,this._perfMon=!((e=this._options)===null||e===void 0)&&e._profName?new mi(this._options._profName):void 0,this._deliveryQueue=(o=this._options)===null||o===void 0?void 0:o.deliveryQueue}t.prototype.dispose=function(){var t,n,i,r;this._disposed||(this._disposed=!0,((t=this._deliveryQueue)===null||t===void 0?void 0:t.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(n=this._options)===null||n===void 0?void 0:n.onDidRemoveLastListener)===null||i===void 0||i.call(n),(r=this._leakageMon)===null||r===void 0||r.dispose())};Object.defineProperty(t.prototype,"event",{get:function(){var t=this;var n;return(n=this._event)!==null&&n!==void 0||(this._event=function(n,i,r){var e,o,s,u,a;if(t._leakageMon&&t._size>3*t._leakageMon.threshold)return console.warn("[".concat(t._leakageMon.name,"] REFUSES to accept new listeners because it exceeded its threshold by far")),ci.None;if(t._disposed)return ci.None;i&&(n=n.bind(i));var h=new _i(n);var c;t._leakageMon&&t._size>=Math.ceil(.2*t._leakageMon.threshold)&&(h.stack=yi.create(),c=t._leakageMon.check(h.stack,t._size+1)),t._listeners?t._listeners instanceof _i?((a=t._deliveryQueue)!==null&&a!==void 0||(t._deliveryQueue=new xi),t._listeners=[t._listeners,h]):t._listeners.push(h):((o=(e=t._options)===null||e===void 0?void 0:e.onWillAddFirstListener)===null||o===void 0||o.call(e,t),t._listeners=h,(u=(s=t._options)===null||s===void 0?void 0:s.onDidAddFirstListener)===null||u===void 0||u.call(s,t)),t._size++;var f=ai((function(){c==null||c(),t._removeListener(h)}));return r instanceof hi?r.add(f):Array.isArray(r)&&r.push(f),f}),this._event},enumerable:false,configurable:true});t.prototype._removeListener=function(t){var n,i,r,e;if((i=(n=this._options)===null||n===void 0?void 0:n.onWillRemoveListener)===null||i===void 0||i.call(n,this),!this._listeners)return;if(this._size===1)return this._listeners=void 0,(e=(r=this._options)===null||r===void 0?void 0:r.onDidRemoveLastListener)===null||e===void 0||e.call(r,this),void(this._size=0);var o=this._listeners,s=o.indexOf(t);if(s===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,o[s]=void 0;var u=this._deliveryQueue.current===this;if(2*this._size<=o.length){var a=0;for(var h=0;h<o.length;h++)o[h]?o[a++]=o[h]:u&&(this._deliveryQueue.end--,a<this._deliveryQueue.i&&this._deliveryQueue.i--);o.length=a}};t.prototype._deliver=function(t,n){var i;if(!t)return;var r=((i=this._options)===null||i===void 0?void 0:i.onListenerError)||Gn;if(r)try{t.value(n)}catch(t){r(t)}else t.value(n)};t.prototype._deliverQueue=function(t){var n=t.current._listeners;for(;t.i<t.end;)this._deliver(n[t.i++],t.value);t.reset()};t.prototype.fire=function(t){var n,i,r,e;if(!((n=this._deliveryQueue)===null||n===void 0)&&n.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)===null||i===void 0||i.stop()),(r=this._perfMon)===null||r===void 0||r.start(this._size),this._listeners)if(this._listeners instanceof _i)this._deliver(this._listeners,t);else{var o=this._deliveryQueue;o.enqueue(this,t,this._listeners.length),this._deliverQueue(o)}(e=this._perfMon)===null||e===void 0||e.stop()};t.prototype.hasListeners=function(){return this._size>0};return t}();var xi=function(){function t(){this.i=-1,this.end=0}t.prototype.enqueue=function(t,n,i){this.i=0,this.end=i,this.current=t,this.value=n};t.prototype.reset=function(){this.i=this.end,this.current=void 0,this.value=void 0};return t}();var Ci=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._isPaused=0,i._eventQueue=new tn,i._mergeFn=n==null?void 0:n.merge;return i}n.prototype.pause=function(){this._isPaused++};n.prototype.resume=function(){if(this._isPaused!==0&&--this._isPaused==0)if(this._mergeFn){if(this._eventQueue.size>0){var n=Array.from(this._eventQueue);this._eventQueue.clear(),t.prototype.fire.call(this,this._mergeFn(n))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)t.prototype.fire.call(this,this._eventQueue.shift())};n.prototype.fire=function(n){this._size&&(this._isPaused!==0?this._eventQueue.push(n):t.prototype.fire.call(this,n))};return n}(ki);var Si=function(t){__extends(n,t);function n(n){var i=this;var r;i=t.call(this,n)||this,i._delay=(r=n.delay)!==null&&r!==void 0?r:100;return i}n.prototype.fire=function(n){var i=this;this._handle||(this.pause(),this._handle=setTimeout((function(){i._handle=void 0,i.resume()}),this._delay)),t.prototype.fire.call(this,n)};return n}(Ci);var Di=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._queuedEvents=[],i._mergeFn=n==null?void 0:n.merge;return i}n.prototype.fire=function(n){var i=this;this.hasListeners()&&(this._queuedEvents.push(n),this._queuedEvents.length===1&&queueMicrotask((function(){i._mergeFn?t.prototype.fire.call(i,i._mergeFn(i._queuedEvents)):i._queuedEvents.forEach((function(n){return t.prototype.fire.call(i,n)})),i._queuedEvents=[]})))};return n}(ki);var Ai=function(){function t(){var t=this;this.hasListeners=!1,this.events=[],this.emitter=new ki({onWillAddFirstListener:function(){return t.onFirstListenerAdd()},onDidRemoveLastListener:function(){return t.onLastListenerRemove()}})}Object.defineProperty(t.prototype,"event",{get:function(){return this.emitter.event},enumerable:false,configurable:true});t.prototype.add=function(t){var n=this;var i={event:t,listener:null};return this.events.push(i),this.hasListeners&&this.hook(i),ai(ei((function(){n.hasListeners&&n.unhook(i);var t=n.events.indexOf(i);n.events.splice(t,1)})))};t.prototype.onFirstListenerAdd=function(){var t=this;this.hasListeners=!0,this.events.forEach((function(n){return t.hook(n)}))};t.prototype.onLastListenerRemove=function(){var t=this;this.hasListeners=!1,this.events.forEach((function(n){return t.unhook(n)}))};t.prototype.hook=function(t){var n=this;t.listener=t.event((function(t){return n.emitter.fire(t)}))};t.prototype.unhook=function(t){var n;(n=t.listener)===null||n===void 0||n.dispose(),t.listener=null};t.prototype.dispose=function(){var t;this.emitter.dispose();for(var n=0,i=this.events;n<i.length;n++){var r=i[n];(t=r.listener)===null||t===void 0||t.dispose()}this.events=[]};return t}();var Oi=function(){function t(){this.buffers=[]}t.prototype.wrapEvent=function(t){var n=this;return function(i,r,e){return t((function(t){var e=n.buffers[n.buffers.length-1];e?e.push((function(){return i.call(r,t)})):i.call(r,t)}),void 0,e)}};t.prototype.bufferEvents=function(t){var n=[];this.buffers.push(n);var i=t();return this.buffers.pop(),n.forEach((function(t){return t()})),i};return t}();var Ei=function(){function t(){var t=this;this.listening=!1,this.inputEvent=wi.None,this.inputEventListener=ci.None,this.emitter=new ki({onDidAddFirstListener:function(){t.listening=!0,t.inputEventListener=t.inputEvent(t.emitter.fire,t.emitter)},onDidRemoveLastListener:function(){t.listening=!1,t.inputEventListener.dispose()}}),this.event=this.emitter.event}Object.defineProperty(t.prototype,"input",{set:function(t){this.inputEvent=t,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=t(this.emitter.fire,this.emitter))},enumerable:false,configurable:true});t.prototype.dispose=function(){this.inputEventListener.dispose(),this.emitter.dispose()};return t}();var Mi=Object.freeze((function(t,n){var i=setTimeout(t.bind(n),0);return{dispose:function(){clearTimeout(i)}}}));var Fi;(function(t){t.isCancellationToken=function(n){return n===t.None||n===t.Cancelled||n instanceof Li||!(!n||typeof n!="object")&&typeof n.isCancellationRequested=="boolean"&&typeof n.onCancellationRequested=="function"},t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:wi.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Mi})})(Fi||(Fi={}));var Li=function(){function t(){this._isCancelled=!1,this._emitter=null}t.prototype.cancel=function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))};Object.defineProperty(t.prototype,"isCancellationRequested",{get:function(){return this._isCancelled},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onCancellationRequested",{get:function(){return this._isCancelled?Mi:(this._emitter||(this._emitter=new ki),this._emitter.event)},enumerable:false,configurable:true});t.prototype.dispose=function(){this._emitter&&(this._emitter.dispose(),this._emitter=null)};return t}();var ji=function(){function t(t){this._token=void 0,this._parentListener=void 0,this._parentListener=t&&t.onCancellationRequested(this.cancel,this)}Object.defineProperty(t.prototype,"token",{get:function(){return this._token||(this._token=new Li),this._token},enumerable:false,configurable:true});t.prototype.cancel=function(){this._token?this._token instanceof Li&&this._token.cancel():this._token=Fi.Cancelled};t.prototype.dispose=function(t){if(t===void 0){t=!1}var n;t&&this.cancel(),(n=this._parentListener)===null||n===void 0||n.dispose(),this._token?this._token instanceof Li&&this._token.dispose():this._token=Fi.None};return t}();var Ri=function(){function t(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}t.prototype.define=function(t,n){this._keyCodeToStr[t]=n,this._strToKeyCode[n.toLowerCase()]=t};t.prototype.keyCodeToStr=function(t){return this._keyCodeToStr[t]};t.prototype.strToKeyCode=function(t){return this._strToKeyCode[t.toLowerCase()]||0};return t}();var Ti=new Ri,Ii=new Ri,Bi=new Ri,Ni=new Array(230),Pi=Object.create(null),Wi=Object.create(null),Hi=[];for(var At=0;At<=193;At++)Hi[At]=-1;var zi;function Ui(t,n){return(t|(65535&n)<<16>>>0)>>>0}var Ki;(function(){var t="",n=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",t,t],[1,1,"Hyper",0,t,0,t,t,t],[1,2,"Super",0,t,0,t,t,t],[1,3,"Fn",0,t,0,t,t,t],[1,4,"FnLock",0,t,0,t,t,t],[1,5,"Suspend",0,t,0,t,t,t],[1,6,"Resume",0,t,0,t,t,t],[1,7,"Turbo",0,t,0,t,t,t],[1,8,"Sleep",0,t,0,"VK_SLEEP",t,t],[1,9,"WakeUp",0,t,0,t,t,t],[0,10,"KeyA",31,"A",65,"VK_A",t,t],[0,11,"KeyB",32,"B",66,"VK_B",t,t],[0,12,"KeyC",33,"C",67,"VK_C",t,t],[0,13,"KeyD",34,"D",68,"VK_D",t,t],[0,14,"KeyE",35,"E",69,"VK_E",t,t],[0,15,"KeyF",36,"F",70,"VK_F",t,t],[0,16,"KeyG",37,"G",71,"VK_G",t,t],[0,17,"KeyH",38,"H",72,"VK_H",t,t],[0,18,"KeyI",39,"I",73,"VK_I",t,t],[0,19,"KeyJ",40,"J",74,"VK_J",t,t],[0,20,"KeyK",41,"K",75,"VK_K",t,t],[0,21,"KeyL",42,"L",76,"VK_L",t,t],[0,22,"KeyM",43,"M",77,"VK_M",t,t],[0,23,"KeyN",44,"N",78,"VK_N",t,t],[0,24,"KeyO",45,"O",79,"VK_O",t,t],[0,25,"KeyP",46,"P",80,"VK_P",t,t],[0,26,"KeyQ",47,"Q",81,"VK_Q",t,t],[0,27,"KeyR",48,"R",82,"VK_R",t,t],[0,28,"KeyS",49,"S",83,"VK_S",t,t],[0,29,"KeyT",50,"T",84,"VK_T",t,t],[0,30,"KeyU",51,"U",85,"VK_U",t,t],[0,31,"KeyV",52,"V",86,"VK_V",t,t],[0,32,"KeyW",53,"W",87,"VK_W",t,t],[0,33,"KeyX",54,"X",88,"VK_X",t,t],[0,34,"KeyY",55,"Y",89,"VK_Y",t,t],[0,35,"KeyZ",56,"Z",90,"VK_Z",t,t],[0,36,"Digit1",22,"1",49,"VK_1",t,t],[0,37,"Digit2",23,"2",50,"VK_2",t,t],[0,38,"Digit3",24,"3",51,"VK_3",t,t],[0,39,"Digit4",25,"4",52,"VK_4",t,t],[0,40,"Digit5",26,"5",53,"VK_5",t,t],[0,41,"Digit6",27,"6",54,"VK_6",t,t],[0,42,"Digit7",28,"7",55,"VK_7",t,t],[0,43,"Digit8",29,"8",56,"VK_8",t,t],[0,44,"Digit9",30,"9",57,"VK_9",t,t],[0,45,"Digit0",21,"0",48,"VK_0",t,t],[1,46,"Enter",3,"Enter",13,"VK_RETURN",t,t],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",t,t],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",t,t],[1,49,"Tab",2,"Tab",9,"VK_TAB",t,t],[1,50,"Space",10,"Space",32,"VK_SPACE",t,t],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,t,0,t,t,t],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",t,t],[1,64,"F1",59,"F1",112,"VK_F1",t,t],[1,65,"F2",60,"F2",113,"VK_F2",t,t],[1,66,"F3",61,"F3",114,"VK_F3",t,t],[1,67,"F4",62,"F4",115,"VK_F4",t,t],[1,68,"F5",63,"F5",116,"VK_F5",t,t],[1,69,"F6",64,"F6",117,"VK_F6",t,t],[1,70,"F7",65,"F7",118,"VK_F7",t,t],[1,71,"F8",66,"F8",119,"VK_F8",t,t],[1,72,"F9",67,"F9",120,"VK_F9",t,t],[1,73,"F10",68,"F10",121,"VK_F10",t,t],[1,74,"F11",69,"F11",122,"VK_F11",t,t],[1,75,"F12",70,"F12",123,"VK_F12",t,t],[1,76,"PrintScreen",0,t,0,t,t,t],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",t,t],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",t,t],[1,79,"Insert",19,"Insert",45,"VK_INSERT",t,t],[1,80,"Home",14,"Home",36,"VK_HOME",t,t],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",t,t],[1,82,"Delete",20,"Delete",46,"VK_DELETE",t,t],[1,83,"End",13,"End",35,"VK_END",t,t],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",t,t],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",t],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",t],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",t],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",t],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",t,t],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",t,t],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",t,t],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",t,t],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",t,t],[1,94,"NumpadEnter",3,t,0,t,t,t],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",t,t],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",t,t],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",t,t],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",t,t],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",t,t],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",t,t],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",t,t],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",t,t],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",t,t],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",t,t],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",t,t],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",t,t],[1,107,"ContextMenu",58,"ContextMenu",93,t,t,t],[1,108,"Power",0,t,0,t,t,t],[1,109,"NumpadEqual",0,t,0,t,t,t],[1,110,"F13",71,"F13",124,"VK_F13",t,t],[1,111,"F14",72,"F14",125,"VK_F14",t,t],[1,112,"F15",73,"F15",126,"VK_F15",t,t],[1,113,"F16",74,"F16",127,"VK_F16",t,t],[1,114,"F17",75,"F17",128,"VK_F17",t,t],[1,115,"F18",76,"F18",129,"VK_F18",t,t],[1,116,"F19",77,"F19",130,"VK_F19",t,t],[1,117,"F20",78,"F20",131,"VK_F20",t,t],[1,118,"F21",79,"F21",132,"VK_F21",t,t],[1,119,"F22",80,"F22",133,"VK_F22",t,t],[1,120,"F23",81,"F23",134,"VK_F23",t,t],[1,121,"F24",82,"F24",135,"VK_F24",t,t],[1,122,"Open",0,t,0,t,t,t],[1,123,"Help",0,t,0,t,t,t],[1,124,"Select",0,t,0,t,t,t],[1,125,"Again",0,t,0,t,t,t],[1,126,"Undo",0,t,0,t,t,t],[1,127,"Cut",0,t,0,t,t,t],[1,128,"Copy",0,t,0,t,t,t],[1,129,"Paste",0,t,0,t,t,t],[1,130,"Find",0,t,0,t,t,t],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",t,t],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",t,t],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",t,t],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",t,t],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",t,t],[1,136,"KanaMode",0,t,0,t,t,t],[0,137,"IntlYen",0,t,0,t,t,t],[1,138,"Convert",0,t,0,t,t,t],[1,139,"NonConvert",0,t,0,t,t,t],[1,140,"Lang1",0,t,0,t,t,t],[1,141,"Lang2",0,t,0,t,t,t],[1,142,"Lang3",0,t,0,t,t,t],[1,143,"Lang4",0,t,0,t,t,t],[1,144,"Lang5",0,t,0,t,t,t],[1,145,"Abort",0,t,0,t,t,t],[1,146,"Props",0,t,0,t,t,t],[1,147,"NumpadParenLeft",0,t,0,t,t,t],[1,148,"NumpadParenRight",0,t,0,t,t,t],[1,149,"NumpadBackspace",0,t,0,t,t,t],[1,150,"NumpadMemoryStore",0,t,0,t,t,t],[1,151,"NumpadMemoryRecall",0,t,0,t,t,t],[1,152,"NumpadMemoryClear",0,t,0,t,t,t],[1,153,"NumpadMemoryAdd",0,t,0,t,t,t],[1,154,"NumpadMemorySubtract",0,t,0,t,t,t],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",t,t],[1,156,"NumpadClearEntry",0,t,0,t,t,t],[1,0,t,5,"Ctrl",17,"VK_CONTROL",t,t],[1,0,t,4,"Shift",16,"VK_SHIFT",t,t],[1,0,t,6,"Alt",18,"VK_MENU",t,t],[1,0,t,57,"Meta",91,"VK_COMMAND",t,t],[1,157,"ControlLeft",5,t,0,"VK_LCONTROL",t,t],[1,158,"ShiftLeft",4,t,0,"VK_LSHIFT",t,t],[1,159,"AltLeft",6,t,0,"VK_LMENU",t,t],[1,160,"MetaLeft",57,t,0,"VK_LWIN",t,t],[1,161,"ControlRight",5,t,0,"VK_RCONTROL",t,t],[1,162,"ShiftRight",4,t,0,"VK_RSHIFT",t,t],[1,163,"AltRight",6,t,0,"VK_RMENU",t,t],[1,164,"MetaRight",57,t,0,"VK_RWIN",t,t],[1,165,"BrightnessUp",0,t,0,t,t,t],[1,166,"BrightnessDown",0,t,0,t,t,t],[1,167,"MediaPlay",0,t,0,t,t,t],[1,168,"MediaRecord",0,t,0,t,t,t],[1,169,"MediaFastForward",0,t,0,t,t,t],[1,170,"MediaRewind",0,t,0,t,t,t],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",t,t],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",t,t],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",t,t],[1,174,"Eject",0,t,0,t,t,t],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",t,t],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",t,t],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",t,t],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",t,t],[1,179,"LaunchApp1",0,t,0,"VK_MEDIA_LAUNCH_APP1",t,t],[1,180,"SelectTask",0,t,0,t,t,t],[1,181,"LaunchScreenSaver",0,t,0,t,t,t],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",t,t],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",t,t],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",t,t],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",t,t],[1,186,"BrowserStop",0,t,0,"VK_BROWSER_STOP",t,t],[1,187,"BrowserRefresh",0,t,0,"VK_BROWSER_REFRESH",t,t],[1,188,"BrowserFavorites",0,t,0,"VK_BROWSER_FAVORITES",t,t],[1,189,"ZoomToggle",0,t,0,t,t,t],[1,190,"MailReply",0,t,0,t,t,t],[1,191,"MailForward",0,t,0,t,t,t],[1,192,"MailSend",0,t,0,t,t,t],[1,0,t,114,"KeyInComposition",229,t,t,t],[1,0,t,116,"ABNT_C2",194,"VK_ABNT_C2",t,t],[1,0,t,96,"OEM_8",223,"VK_OEM_8",t,t],[1,0,t,0,t,0,"VK_KANA",t,t],[1,0,t,0,t,0,"VK_HANGUL",t,t],[1,0,t,0,t,0,"VK_JUNJA",t,t],[1,0,t,0,t,0,"VK_FINAL",t,t],[1,0,t,0,t,0,"VK_HANJA",t,t],[1,0,t,0,t,0,"VK_KANJI",t,t],[1,0,t,0,t,0,"VK_CONVERT",t,t],[1,0,t,0,t,0,"VK_NONCONVERT",t,t],[1,0,t,0,t,0,"VK_ACCEPT",t,t],[1,0,t,0,t,0,"VK_MODECHANGE",t,t],[1,0,t,0,t,0,"VK_SELECT",t,t],[1,0,t,0,t,0,"VK_PRINT",t,t],[1,0,t,0,t,0,"VK_EXECUTE",t,t],[1,0,t,0,t,0,"VK_SNAPSHOT",t,t],[1,0,t,0,t,0,"VK_HELP",t,t],[1,0,t,0,t,0,"VK_APPS",t,t],[1,0,t,0,t,0,"VK_PROCESSKEY",t,t],[1,0,t,0,t,0,"VK_PACKET",t,t],[1,0,t,0,t,0,"VK_DBE_SBCSCHAR",t,t],[1,0,t,0,t,0,"VK_DBE_DBCSCHAR",t,t],[1,0,t,0,t,0,"VK_ATTN",t,t],[1,0,t,0,t,0,"VK_CRSEL",t,t],[1,0,t,0,t,0,"VK_EXSEL",t,t],[1,0,t,0,t,0,"VK_EREOF",t,t],[1,0,t,0,t,0,"VK_PLAY",t,t],[1,0,t,0,t,0,"VK_ZOOM",t,t],[1,0,t,0,t,0,"VK_NONAME",t,t],[1,0,t,0,t,0,"VK_PA1",t,t],[1,0,t,0,t,0,"VK_OEM_CLEAR",t,t]],i=[],r=[];for(var e=0,o=n;e<o.length;e++){var s=o[e];var u=s[0],a=s[1],h=s[2],c=s[3],f=s[4],l=s[5],v=s[6],d=s[7],g=s[8];if(r[a]||(r[a]=!0,Pi[h]=a,Wi[h.toLowerCase()]=a,u&&(Hi[a]=c)),!i[c]){if(i[c]=!0,!f)throw new Error("String representation missing for key code ".concat(c," around scan code ").concat(h));Ti.define(c,f),Ii.define(c,d||f),Bi.define(c,g||d||f)}l&&(Ni[l]=c)}})(),function(t){t.toString=function(t){return Ti.keyCodeToStr(t)},t.fromString=function(t){return Ti.strToKeyCode(t)},t.toUserSettingsUS=function(t){return Ii.keyCodeToStr(t)},t.toUserSettingsGeneral=function(t){return Bi.keyCodeToStr(t)},t.fromUserSettings=function(t){return Ii.strToKeyCode(t)||Bi.strToKeyCode(t)},t.toElectronAccelerator=function(t){if(t>=98&&t<=113)return null;switch(t){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Ti.keyCodeToStr(t)}}(zi||(zi={}));var Vi=globalThis.vscode;if(Vi!==void 0&&Vi.process!==void 0){var qi=Vi.process;Ki={get platform(){return qi.platform},get arch(){return qi.arch},get env(){return qi.env},cwd:function(){return qi.cwd()}}}else Ki=typeof process<"u"?{get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd:function(){return process.env.VSCODE_CWD||process.cwd()}}:{get platform(){return Mt?"win32":Ft?"darwin":"linux"},get arch(){},get env(){return{}},cwd:function(){return"/"}};var Gi=Ki.cwd,$i=Ki.env,Ji=Ki.platform,Zi=46,Qi=47,Yi=92,Xi=58;var tr=function(t){__extends(n,t);function n(n,i,r){var e=this;var o;typeof i=="string"&&i.indexOf("not ")===0?(o="must not be",i=i.replace(/^not /,"")):o="must be";var s=n.indexOf(".")!==-1?"property":"argument";var u='The "'.concat(n,'" ').concat(s," ").concat(o," of type ").concat(i);u+=". Received type "+typeof r,e=t.call(this,u)||this,e.code="ERR_INVALID_ARG_TYPE";return e}return n}(Error);function nr(t,n){if(typeof t!="string")throw new tr(n,"string",t)}var ir=Ji==="win32";function rr(t){return t===Qi||t===Yi}function er(t){return t===Qi}function or(t){return t>=65&&t<=90||t>=97&&t<=122}function sr(t,n,i,r){var e="",o=0,s=-1,u=0,a=0;for(var h=0;h<=t.length;++h){if(h<t.length)a=t.charCodeAt(h);else{if(r(a))break;a=Qi}if(r(a)){if(!(s===h-1||u===1))if(u===2){if(e.length<2||o!==2||e.charCodeAt(e.length-1)!==Zi||e.charCodeAt(e.length-2)!==Zi){if(e.length>2){var c=e.lastIndexOf(i);c===-1?(e="",o=0):(e=e.slice(0,c),o=e.length-1-e.lastIndexOf(i)),s=h,u=0;continue}if(e.length!==0){e="",o=0,s=h,u=0;continue}}n&&(e+=e.length>0?"".concat(i,".."):"..",o=2)}else e.length>0?e+="".concat(i).concat(t.slice(s+1,h)):e=t.slice(s+1,h),o=h-s-1;s=h,u=0}else a===Zi&&u!==-1?++u:u=-1}return e}function ur(t,n){(function(t,n){if(t===null||typeof t!="object")throw new tr(n,"Object",t)})(n,"pathObject");var i=n.dir||n.root,r=n.base||"".concat(n.name||"").concat(n.ext||"");return i?i===n.root?"".concat(i).concat(r):"".concat(i).concat(t).concat(r):r}var ar={resolve:function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}var i="",r="",e=!1;for(var o=t.length-1;o>=-1;o--){var s=void 0;if(o>=0){if(s=t[o],nr(s,"path"),s.length===0)continue}else i.length===0?s=Gi():(s=$i["=".concat(i)]||Gi(),(s===void 0||s.slice(0,2).toLowerCase()!==i.toLowerCase()&&s.charCodeAt(2)===Yi)&&(s="".concat(i,"\\")));var u=s.length;var a=0,h="",c=!1;var f=s.charCodeAt(0);if(u===1)rr(f)&&(a=1,c=!0);else if(rr(f))if(c=!0,rr(s.charCodeAt(1))){var l=2,v=l;for(;l<u&&!rr(s.charCodeAt(l));)l++;if(l<u&&l!==v){var d=s.slice(v,l);for(v=l;l<u&&rr(s.charCodeAt(l));)l++;if(l<u&&l!==v){for(v=l;l<u&&!rr(s.charCodeAt(l));)l++;l!==u&&l===v||(h="\\\\".concat(d,"\\").concat(s.slice(v,l)),a=l)}}}else a=1;else or(f)&&s.charCodeAt(1)===Xi&&(h=s.slice(0,2),a=2,u>2&&rr(s.charCodeAt(2))&&(c=!0,a=3));if(h.length>0)if(i.length>0){if(h.toLowerCase()!==i.toLowerCase())continue}else i=h;if(e){if(i.length>0)break}else if(r="".concat(s.slice(a),"\\").concat(r),e=c,c&&i.length>0)break}return r=sr(r,!e,"\\",rr),e?"".concat(i,"\\").concat(r):"".concat(i).concat(r)||"."},normalize:function(t){nr(t,"path");var n=t.length;if(n===0)return".";var i,r=0,e=!1;var o=t.charCodeAt(0);if(n===1)return er(o)?"\\":t;if(rr(o))if(e=!0,rr(t.charCodeAt(1))){var s=2,u=s;for(;s<n&&!rr(t.charCodeAt(s));)s++;if(s<n&&s!==u){var a=t.slice(u,s);for(u=s;s<n&&rr(t.charCodeAt(s));)s++;if(s<n&&s!==u){for(u=s;s<n&&!rr(t.charCodeAt(s));)s++;if(s===n)return"\\\\".concat(a,"\\").concat(t.slice(u),"\\");s!==u&&(i="\\\\".concat(a,"\\").concat(t.slice(u,s)),r=s)}}}else r=1;else or(o)&&t.charCodeAt(1)===Xi&&(i=t.slice(0,2),r=2,n>2&&rr(t.charCodeAt(2))&&(e=!0,r=3));var h=r<n?sr(t.slice(r),!e,"\\",rr):"";return h.length!==0||e||(h="."),h.length>0&&rr(t.charCodeAt(n-1))&&(h+="\\"),i===void 0?e?"\\".concat(h):h:e?"".concat(i,"\\").concat(h):"".concat(i).concat(h)},isAbsolute:function(t){nr(t,"path");var n=t.length;if(n===0)return!1;var i=t.charCodeAt(0);return rr(i)||n>2&&or(i)&&t.charCodeAt(1)===Xi&&rr(t.charCodeAt(2))},join:function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}if(t.length===0)return".";var i,r;for(var e=0;e<t.length;++e){var o=t[e];nr(o,"path"),o.length>0&&(i===void 0?i=r=o:i+="\\".concat(o))}if(i===void 0)return".";var s=!0,u=0;if(typeof r=="string"&&rr(r.charCodeAt(0))){++u;var e=r.length;e>1&&rr(r.charCodeAt(1))&&(++u,e>2&&(rr(r.charCodeAt(2))?++u:s=!1))}if(s){for(;u<i.length&&rr(i.charCodeAt(u));)u++;u>=2&&(i="\\".concat(i.slice(u)))}return ar.normalize(i)},relative:function(t,n){if(nr(t,"from"),nr(n,"to"),t===n)return"";var i=ar.resolve(t),r=ar.resolve(n);if(i===r||(t=i.toLowerCase())===(n=r.toLowerCase()))return"";var e=0;for(;e<t.length&&t.charCodeAt(e)===Yi;)e++;var o=t.length;for(;o-1>e&&t.charCodeAt(o-1)===Yi;)o--;var s=o-e;var u=0;for(;u<n.length&&n.charCodeAt(u)===Yi;)u++;var a=n.length;for(;a-1>u&&n.charCodeAt(a-1)===Yi;)a--;var h=a-u,c=s<h?s:h;var f=-1,l=0;for(;l<c;l++){var v=t.charCodeAt(e+l);if(v!==n.charCodeAt(u+l))break;v===Yi&&(f=l)}if(l!==c){if(f===-1)return r}else{if(h>c){if(n.charCodeAt(u+l)===Yi)return r.slice(u+l+1);if(l===2)return r.slice(u+l)}s>c&&(t.charCodeAt(e+l)===Yi?f=l:l===2&&(f=3)),f===-1&&(f=0)}var d="";for(l=e+f+1;l<=o;++l)l!==o&&t.charCodeAt(l)!==Yi||(d+=d.length===0?"..":"\\..");return u+=f,d.length>0?"".concat(d).concat(r.slice(u,a)):(r.charCodeAt(u)===Yi&&++u,r.slice(u,a))},toNamespacedPath:function(t){if(typeof t!="string"||t.length===0)return t;var n=ar.resolve(t);if(n.length<=2)return t;if(n.charCodeAt(0)===Yi){if(n.charCodeAt(1)===Yi){var i=n.charCodeAt(2);if(i!==63&&i!==Zi)return"\\\\?\\UNC\\".concat(n.slice(2))}}else if(or(n.charCodeAt(0))&&n.charCodeAt(1)===Xi&&n.charCodeAt(2)===Yi)return"\\\\?\\".concat(n);return t},dirname:function(t){nr(t,"path");var n=t.length;if(n===0)return".";var i=-1,r=0;var e=t.charCodeAt(0);if(n===1)return rr(e)?t:".";if(rr(e)){if(i=r=1,rr(t.charCodeAt(1))){var o=2,s=o;for(;o<n&&!rr(t.charCodeAt(o));)o++;if(o<n&&o!==s){for(s=o;o<n&&rr(t.charCodeAt(o));)o++;if(o<n&&o!==s){for(s=o;o<n&&!rr(t.charCodeAt(o));)o++;if(o===n)return t;o!==s&&(i=r=o+1)}}}}else or(e)&&t.charCodeAt(1)===Xi&&(i=n>2&&rr(t.charCodeAt(2))?3:2,r=i);var u=-1,a=!0;for(var o=n-1;o>=r;--o)if(rr(t.charCodeAt(o))){if(!a){u=o;break}}else a=!1;if(u===-1){if(i===-1)return".";u=i}return t.slice(0,u)},basename:function(t,n){n!==void 0&&nr(n,"ext"),nr(t,"path");var i,r=0,e=-1,o=!0;if(t.length>=2&&or(t.charCodeAt(0))&&t.charCodeAt(1)===Xi&&(r=2),n!==void 0&&n.length>0&&n.length<=t.length){if(n===t)return"";var s=n.length-1,u=-1;for(i=t.length-1;i>=r;--i){var a=t.charCodeAt(i);if(rr(a)){if(!o){r=i+1;break}}else u===-1&&(o=!1,u=i+1),s>=0&&(a===n.charCodeAt(s)?--s==-1&&(e=i):(s=-1,e=u))}return r===e?e=u:e===-1&&(e=t.length),t.slice(r,e)}for(i=t.length-1;i>=r;--i)if(rr(t.charCodeAt(i))){if(!o){r=i+1;break}}else e===-1&&(o=!1,e=i+1);return e===-1?"":t.slice(r,e)},extname:function(t){nr(t,"path");var n=0,i=-1,r=0,e=-1,o=!0,s=0;t.length>=2&&t.charCodeAt(1)===Xi&&or(t.charCodeAt(0))&&(n=r=2);for(var u=t.length-1;u>=n;--u){var a=t.charCodeAt(u);if(rr(a)){if(!o){r=u+1;break}}else e===-1&&(o=!1,e=u+1),a===Zi?i===-1?i=u:s!==1&&(s=1):i!==-1&&(s=-1)}return i===-1||e===-1||s===0||s===1&&i===e-1&&i===r+1?"":t.slice(i,e)},format:ur.bind(null,"\\"),parse:function(t){nr(t,"path");var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var i=t.length;var r=0,e=t.charCodeAt(0);if(i===1)return rr(e)?(n.root=n.dir=t,n):(n.base=n.name=t,n);if(rr(e)){if(r=1,rr(t.charCodeAt(1))){var o=2,s=o;for(;o<i&&!rr(t.charCodeAt(o));)o++;if(o<i&&o!==s){for(s=o;o<i&&rr(t.charCodeAt(o));)o++;if(o<i&&o!==s){for(s=o;o<i&&!rr(t.charCodeAt(o));)o++;o===i?r=o:o!==s&&(r=o+1)}}}}else if(or(e)&&t.charCodeAt(1)===Xi){if(i<=2)return n.root=n.dir=t,n;if(r=2,rr(t.charCodeAt(2))){if(i===3)return n.root=n.dir=t,n;r=3}}r>0&&(n.root=t.slice(0,r));var u=-1,a=r,h=-1,c=!0,f=t.length-1,l=0;for(;f>=r;--f)if(e=t.charCodeAt(f),rr(e)){if(!c){a=f+1;break}}else h===-1&&(c=!1,h=f+1),e===Zi?u===-1?u=f:l!==1&&(l=1):u!==-1&&(l=-1);return h!==-1&&(u===-1||l===0||l===1&&u===h-1&&u===a+1?n.base=n.name=t.slice(a,h):(n.name=t.slice(a,u),n.base=t.slice(a,h),n.ext=t.slice(u,h))),n.dir=a>0&&a!==r?t.slice(0,a-1):n.root,n},sep:"\\",delimiter:";",win32:null,posix:null},hr=function(){if(ir){var t=/\\/g;return function(){var n=Gi().replace(t,"/");return n.slice(n.indexOf("/"))}}return function(){return Gi()}}(),cr={resolve:function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}var i="",r=!1;for(var e=t.length-1;e>=-1&&!r;e--){var o=e>=0?t[e]:hr();nr(o,"path"),o.length!==0&&(i="".concat(o,"/").concat(i),r=o.charCodeAt(0)===Qi)}return i=sr(i,!r,"/",er),r?"/".concat(i):i.length>0?i:"."},normalize:function(t){if(nr(t,"path"),t.length===0)return".";var n=t.charCodeAt(0)===Qi,i=t.charCodeAt(t.length-1)===Qi;return(t=sr(t,!n,"/",er)).length===0?n?"/":i?"./":".":(i&&(t+="/"),n?"/".concat(t):t)},isAbsolute:function(t){return nr(t,"path"),t.length>0&&t.charCodeAt(0)===Qi},join:function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}if(t.length===0)return".";var i;for(var r=0;r<t.length;++r){var e=t[r];nr(e,"path"),e.length>0&&(i===void 0?i=e:i+="/".concat(e))}return i===void 0?".":cr.normalize(i)},relative:function(t,n){if(nr(t,"from"),nr(n,"to"),t===n||(t=cr.resolve(t))===(n=cr.resolve(n)))return"";var i=t.length,r=i-1,e=n.length-1,o=r<e?r:e;var s=-1,u=0;for(;u<o;u++){var a=t.charCodeAt(1+u);if(a!==n.charCodeAt(1+u))break;a===Qi&&(s=u)}if(u===o)if(e>o){if(n.charCodeAt(1+u)===Qi)return n.slice(1+u+1);if(u===0)return n.slice(1+u)}else r>o&&(t.charCodeAt(1+u)===Qi?s=u:u===0&&(s=0));var h="";for(u=1+s+1;u<=i;++u)u!==i&&t.charCodeAt(u)!==Qi||(h+=h.length===0?"..":"/..");return"".concat(h).concat(n.slice(1+s))},toNamespacedPath:function(t){return t},dirname:function(t){if(nr(t,"path"),t.length===0)return".";var n=t.charCodeAt(0)===Qi;var i=-1,r=!0;for(var e=t.length-1;e>=1;--e)if(t.charCodeAt(e)===Qi){if(!r){i=e;break}}else r=!1;return i===-1?n?"/":".":n&&i===1?"//":t.slice(0,i)},basename:function(t,n){n!==void 0&&nr(n,"ext"),nr(t,"path");var i,r=0,e=-1,o=!0;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n===t)return"";var s=n.length-1,u=-1;for(i=t.length-1;i>=0;--i){var a=t.charCodeAt(i);if(a===Qi){if(!o){r=i+1;break}}else u===-1&&(o=!1,u=i+1),s>=0&&(a===n.charCodeAt(s)?--s==-1&&(e=i):(s=-1,e=u))}return r===e?e=u:e===-1&&(e=t.length),t.slice(r,e)}for(i=t.length-1;i>=0;--i)if(t.charCodeAt(i)===Qi){if(!o){r=i+1;break}}else e===-1&&(o=!1,e=i+1);return e===-1?"":t.slice(r,e)},extname:function(t){nr(t,"path");var n=-1,i=0,r=-1,e=!0,o=0;for(var s=t.length-1;s>=0;--s){var u=t.charCodeAt(s);if(u!==Qi)r===-1&&(e=!1,r=s+1),u===Zi?n===-1?n=s:o!==1&&(o=1):n!==-1&&(o=-1);else if(!e){i=s+1;break}}return n===-1||r===-1||o===0||o===1&&n===r-1&&n===i+1?"":t.slice(n,r)},format:ur.bind(null,"/"),parse:function(t){nr(t,"path");var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var i=t.charCodeAt(0)===Qi;var r;i?(n.root="/",r=1):r=0;var e=-1,o=0,s=-1,u=!0,a=t.length-1,h=0;for(;a>=r;--a){var c=t.charCodeAt(a);if(c!==Qi)s===-1&&(u=!1,s=a+1),c===Zi?e===-1?e=a:h!==1&&(h=1):e!==-1&&(h=-1);else if(!u){o=a+1;break}}if(s!==-1){var c=o===0&&i?1:o;e===-1||h===0||h===1&&e===s-1&&e===o+1?n.base=n.name=t.slice(c,s):(n.name=t.slice(c,e),n.base=t.slice(c,s),n.ext=t.slice(e,s))}return o>0?n.dir=t.slice(0,o-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};cr.win32=ar.win32=ar,cr.posix=ar.posix=cr;var fr=ir?ar.normalize:cr.normalize,lr=ir?ar.resolve:cr.resolve,vr=ir?ar.relative:cr.relative,dr=ir?ar.dirname:cr.dirname,gr=ir?ar.basename:cr.basename,pr=ir?ar.extname:cr.extname,wr=ir?ar.sep:cr.sep,mr=/^\w[\w\d+.-]*$/,br=/^\//,yr=/^\/\//,_r="",kr="/",xr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var Cr=function(){function t(t,n,i,r,e,o){if(o===void 0){o=!1}typeof t=="object"?(this.scheme=t.scheme||_r,this.authority=t.authority||_r,this.path=t.path||_r,this.query=t.query||_r,this.fragment=t.fragment||_r):(this.scheme=function(t,n){return t||n?t:"file"}(t,o),this.authority=n||_r,this.path=function(t,n){switch(t){case"https":case"http":case"file":n?n[0]!==kr&&(n=kr+n):n=kr}return n}(this.scheme,i||_r),this.query=r||_r,this.fragment=e||_r,function(t,n){if(!t.scheme&&n)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(t.authority,'", path: "').concat(t.path,'", query: "').concat(t.query,'", fragment: "').concat(t.fragment,'"}'));if(t.scheme&&!mr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!br.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(yr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,o))}t.isUri=function(n){return n instanceof t||!!n&&typeof n.authority=="string"&&typeof n.fragment=="string"&&typeof n.path=="string"&&typeof n.query=="string"&&typeof n.scheme=="string"&&typeof n.fsPath=="string"&&typeof n.with=="function"&&typeof n.toString=="function"};Object.defineProperty(t.prototype,"fsPath",{get:function(){return Mr(this,!1)},enumerable:false,configurable:true});t.prototype.with=function(t){if(!t)return this;var n=t.scheme,i=t.authority,r=t.path,e=t.query,o=t.fragment;return n===void 0?n=this.scheme:n===null&&(n=_r),i===void 0?i=this.authority:i===null&&(i=_r),r===void 0?r=this.path:r===null&&(r=_r),e===void 0?e=this.query:e===null&&(e=_r),o===void 0?o=this.fragment:o===null&&(o=_r),n===this.scheme&&i===this.authority&&r===this.path&&e===this.query&&o===this.fragment?this:new Dr(n,i,r,e,o)};t.parse=function(t,n){if(n===void 0){n=!1}var i=xr.exec(t);return i?new Dr(i[2]||_r,Rr(i[4]||_r),Rr(i[5]||_r),Rr(i[7]||_r),Rr(i[9]||_r),n):new Dr(_r,_r,_r,_r,_r)};t.file=function(t){var n=_r;if(Mt&&(t=t.replace(/\\/g,kr)),t[0]===kr&&t[1]===kr){var i=t.indexOf(kr,2);i===-1?(n=t.substring(2),t=kr):(n=t.substring(2,i),t=t.substring(i)||kr)}return new Dr("file",n,t,_r,_r)};t.from=function(t,n){return new Dr(t.scheme,t.authority,t.path,t.query,t.fragment,n)};t.joinPath=function(n){var i=[];for(var r=1;r<arguments.length;r++){i[r-1]=arguments[r]}if(!n.path)throw new Error("[UriError]: cannot call joinPath on URI without path");var e;return e=Mt&&n.scheme==="file"?t.file(ar.join.apply(ar,__spreadArray([Mr(n,!0)],i,false))).path:cr.join.apply(cr,__spreadArray([n.path],i,false)),n.with({path:e})};t.prototype.toString=function(t){if(t===void 0){t=!1}return Fr(this,t)};t.prototype.toJSON=function(){return this};t.revive=function(n){var i,r;if(n){if(n instanceof t)return n;{var e=new Dr(n);return e._formatted=(i=n.external)!==null&&i!==void 0?i:null,e._fsPath=n._sep===Sr&&(r=n.fsPath)!==null&&r!==void 0?r:null,e}}return n};return t}();var Sr=Mt?1:void 0;var Dr=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._formatted=null,n._fsPath=null;return n}Object.defineProperty(n.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=Mr(this,!1)),this._fsPath},enumerable:false,configurable:true});n.prototype.toString=function(t){if(t===void 0){t=!1}return t?Fr(this,!0):(this._formatted||(this._formatted=Fr(this,!1)),this._formatted)};n.prototype.toJSON=function(){var t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=Sr),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t};return n}(Cr);var Ar={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Or(t,n,i){var r,e=-1;for(var o=0;o<t.length;o++){var s=t.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||n&&s===47||i&&s===91||i&&s===93||i&&s===58)e!==-1&&(r+=encodeURIComponent(t.substring(e,o)),e=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));var u=Ar[s];u!==void 0?(e!==-1&&(r+=encodeURIComponent(t.substring(e,o)),e=-1),r+=u):e===-1&&(e=o)}}return e!==-1&&(r+=encodeURIComponent(t.substring(e))),r!==void 0?r:t}function Er(t){var n;for(var i=0;i<t.length;i++){var r=t.charCodeAt(i);r===35||r===63?(n===void 0&&(n=t.substr(0,i)),n+=Ar[r]):n!==void 0&&(n+=t[i])}return n!==void 0?n:t}function Mr(t,n){var i;return i=t.authority&&t.path.length>1&&t.scheme==="file"?"//".concat(t.authority).concat(t.path):t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?n?t.path.substr(1):t.path[1].toLowerCase()+t.path.substr(2):t.path,Mt&&(i=i.replace(/\//g,"\\")),i}function Fr(t,n){var i=n?Er:Or;var r="",e=t.scheme,o=t.authority,s=t.path,u=t.query,a=t.fragment;if(e&&(r+=e,r+=":"),(o||e==="file")&&(r+=kr,r+=kr),o){var h=o.indexOf("@");if(h!==-1){var c=o.substr(0,h);o=o.substr(h+1),h=c.lastIndexOf(":"),h===-1?r+=i(c,!1,!1):(r+=i(c.substr(0,h),!1,!1),r+=":",r+=i(c.substr(h+1),!1,!0)),r+="@"}o=o.toLowerCase(),h=o.lastIndexOf(":"),h===-1?r+=i(o,!1,!0):(r+=i(o.substr(0,h),!1,!0),r+=o.substr(h))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){var h=s.charCodeAt(1);h>=65&&h<=90&&(s="/".concat(String.fromCharCode(h+32),":").concat(s.substr(3)))}else if(s.length>=2&&s.charCodeAt(1)===58){var h=s.charCodeAt(0);h>=65&&h<=90&&(s="".concat(String.fromCharCode(h+32),":").concat(s.substr(2)))}r+=i(s,!0,!1)}return u&&(r+="?",r+=i(u,!1,!1)),a&&(r+="#",r+=n?a:Or(a,!1,!1)),r}function Lr(t){try{return decodeURIComponent(t)}catch(n){return t.length>3?t.substr(0,3)+Lr(t.substr(3)):t}}var jr=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Rr(t){return t.match(jr)?t.replace(jr,(function(t){return Lr(t)})):t}var Tr=function(){function t(t,n){this.lineNumber=t,this.column=n}t.prototype.with=function(n,i){if(n===void 0){n=this.lineNumber}if(i===void 0){i=this.column}return n===this.lineNumber&&i===this.column?this:new t(n,i)};t.prototype.delta=function(t,n){if(t===void 0){t=0}if(n===void 0){n=0}return this.with(this.lineNumber+t,this.column+n)};t.prototype.equals=function(n){return t.equals(this,n)};t.equals=function(t,n){return!t&&!n||!!t&&!!n&&t.lineNumber===n.lineNumber&&t.column===n.column};t.prototype.isBefore=function(n){return t.isBefore(this,n)};t.isBefore=function(t,n){return t.lineNumber<n.lineNumber||!(n.lineNumber<t.lineNumber)&&t.column<n.column};t.prototype.isBeforeOrEqual=function(n){return t.isBeforeOrEqual(this,n)};t.isBeforeOrEqual=function(t,n){return t.lineNumber<n.lineNumber||!(n.lineNumber<t.lineNumber)&&t.column<=n.column};t.compare=function(t,n){var i=0|t.lineNumber,r=0|n.lineNumber;return i===r?(0|t.column)-(0|n.column):i-r};t.prototype.clone=function(){return new t(this.lineNumber,this.column)};t.prototype.toString=function(){return"("+this.lineNumber+","+this.column+")"};t.lift=function(n){return new t(n.lineNumber,n.column)};t.isIPosition=function(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"};t.prototype.toJSON=function(){return{lineNumber:this.lineNumber,column:this.column}};return t}(),Ir=function(){function t(t,n,i,r){t>i||t===i&&n>r?(this.startLineNumber=i,this.startColumn=r,this.endLineNumber=t,this.endColumn=n):(this.startLineNumber=t,this.startColumn=n,this.endLineNumber=i,this.endColumn=r)}t.prototype.isEmpty=function(){return t.isEmpty(this)};t.isEmpty=function(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn};t.prototype.containsPosition=function(n){return t.containsPosition(this,n)};t.containsPosition=function(t,n){return!(n.lineNumber<t.startLineNumber||n.lineNumber>t.endLineNumber)&&!(n.lineNumber===t.startLineNumber&&n.column<t.startColumn)&&!(n.lineNumber===t.endLineNumber&&n.column>t.endColumn)};t.strictContainsPosition=function(t,n){return!(n.lineNumber<t.startLineNumber||n.lineNumber>t.endLineNumber)&&!(n.lineNumber===t.startLineNumber&&n.column<=t.startColumn)&&!(n.lineNumber===t.endLineNumber&&n.column>=t.endColumn)};t.prototype.containsRange=function(n){return t.containsRange(this,n)};t.containsRange=function(t,n){return!(n.startLineNumber<t.startLineNumber||n.endLineNumber<t.startLineNumber)&&!(n.startLineNumber>t.endLineNumber||n.endLineNumber>t.endLineNumber)&&!(n.startLineNumber===t.startLineNumber&&n.startColumn<t.startColumn)&&!(n.endLineNumber===t.endLineNumber&&n.endColumn>t.endColumn)};t.prototype.strictContainsRange=function(n){return t.strictContainsRange(this,n)};t.strictContainsRange=function(t,n){return!(n.startLineNumber<t.startLineNumber||n.endLineNumber<t.startLineNumber)&&!(n.startLineNumber>t.endLineNumber||n.endLineNumber>t.endLineNumber)&&!(n.startLineNumber===t.startLineNumber&&n.startColumn<=t.startColumn)&&!(n.endLineNumber===t.endLineNumber&&n.endColumn>=t.endColumn)};t.prototype.plusRange=function(n){return t.plusRange(this,n)};t.plusRange=function(n,i){var r,e,o,s;return i.startLineNumber<n.startLineNumber?(r=i.startLineNumber,e=i.startColumn):i.startLineNumber===n.startLineNumber?(r=i.startLineNumber,e=Math.min(i.startColumn,n.startColumn)):(r=n.startLineNumber,e=n.startColumn),i.endLineNumber>n.endLineNumber?(o=i.endLineNumber,s=i.endColumn):i.endLineNumber===n.endLineNumber?(o=i.endLineNumber,s=Math.max(i.endColumn,n.endColumn)):(o=n.endLineNumber,s=n.endColumn),new t(r,e,o,s)};t.prototype.intersectRanges=function(n){return t.intersectRanges(this,n)};t.intersectRanges=function(n,i){var r=n.startLineNumber,e=n.startColumn,o=n.endLineNumber,s=n.endColumn;var u=i.startLineNumber,a=i.startColumn,h=i.endLineNumber,c=i.endColumn;return r<u?(r=u,e=a):r===u&&(e=Math.max(e,a)),o>h?(o=h,s=c):o===h&&(s=Math.min(s,c)),r>o||r===o&&e>s?null:new t(r,e,o,s)};t.prototype.equalsRange=function(n){return t.equalsRange(this,n)};t.equalsRange=function(t,n){return!t&&!n||!!t&&!!n&&t.startLineNumber===n.startLineNumber&&t.startColumn===n.startColumn&&t.endLineNumber===n.endLineNumber&&t.endColumn===n.endColumn};t.prototype.getEndPosition=function(){return t.getEndPosition(this)};t.getEndPosition=function(t){return new Tr(t.endLineNumber,t.endColumn)};t.prototype.getStartPosition=function(){return t.getStartPosition(this)};t.getStartPosition=function(t){return new Tr(t.startLineNumber,t.startColumn)};t.prototype.toString=function(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"};t.prototype.setEndPosition=function(n,i){return new t(this.startLineNumber,this.startColumn,n,i)};t.prototype.setStartPosition=function(n,i){return new t(n,i,this.endLineNumber,this.endColumn)};t.prototype.collapseToStart=function(){return t.collapseToStart(this)};t.collapseToStart=function(n){return new t(n.startLineNumber,n.startColumn,n.startLineNumber,n.startColumn)};t.prototype.collapseToEnd=function(){return t.collapseToEnd(this)};t.collapseToEnd=function(n){return new t(n.endLineNumber,n.endColumn,n.endLineNumber,n.endColumn)};t.prototype.delta=function(n){return new t(this.startLineNumber+n,this.startColumn,this.endLineNumber+n,this.endColumn)};t.fromPositions=function(n,i){if(i===void 0){i=n}return new t(n.lineNumber,n.column,i.lineNumber,i.column)};t.lift=function(n){return n?new t(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn):null};t.isIRange=function(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"};t.areIntersectingOrTouching=function(t,n){return!(t.endLineNumber<n.startLineNumber||t.endLineNumber===n.startLineNumber&&t.endColumn<n.startColumn)&&!(n.endLineNumber<t.startLineNumber||n.endLineNumber===t.startLineNumber&&n.endColumn<t.startColumn)};t.areIntersecting=function(t,n){return!(t.endLineNumber<n.startLineNumber||t.endLineNumber===n.startLineNumber&&t.endColumn<=n.startColumn)&&!(n.endLineNumber<t.startLineNumber||n.endLineNumber===t.startLineNumber&&n.endColumn<=t.startColumn)};t.compareRangesUsingStarts=function(t,n){if(t&&n){var i=0|t.startLineNumber,r=0|n.startLineNumber;if(i===r){var e=0|t.startColumn,o=0|n.startColumn;if(e===o){var s=0|t.endLineNumber,u=0|n.endLineNumber;return s===u?(0|t.endColumn)-(0|n.endColumn):s-u}return e-o}return i-r}return(t?1:0)-(n?1:0)};t.compareRangesUsingEnds=function(t,n){return t.endLineNumber===n.endLineNumber?t.endColumn===n.endColumn?t.startLineNumber===n.startLineNumber?t.startColumn-n.startColumn:t.startLineNumber-n.startLineNumber:t.endColumn-n.endColumn:t.endLineNumber-n.endLineNumber};t.spansMultipleLines=function(t){return t.endLineNumber>t.startLineNumber};t.prototype.toJSON=function(){return this};return t}(),Br=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,n,i,r,e)||this,o.selectionStartLineNumber=n,o.selectionStartColumn=i,o.positionLineNumber=r,o.positionColumn=e;return o}n.prototype.toString=function(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"};n.prototype.equalsSelection=function(t){return n.selectionsEqual(this,t)};n.selectionsEqual=function(t,n){return t.selectionStartLineNumber===n.selectionStartLineNumber&&t.selectionStartColumn===n.selectionStartColumn&&t.positionLineNumber===n.positionLineNumber&&t.positionColumn===n.positionColumn};n.prototype.getDirection=function(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1};n.prototype.setEndPosition=function(t,i){return this.getDirection()===0?new n(this.startLineNumber,this.startColumn,t,i):new n(t,i,this.startLineNumber,this.startColumn)};n.prototype.getPosition=function(){return new Tr(this.positionLineNumber,this.positionColumn)};n.prototype.getSelectionStart=function(){return new Tr(this.selectionStartLineNumber,this.selectionStartColumn)};n.prototype.setStartPosition=function(t,i){return this.getDirection()===0?new n(t,i,this.endLineNumber,this.endColumn):new n(this.endLineNumber,this.endColumn,t,i)};n.fromPositions=function(t,i){if(i===void 0){i=t}return new n(t.lineNumber,t.column,i.lineNumber,i.column)};n.fromRange=function(t,i){return i===0?new n(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new n(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)};n.liftSelection=function(t){return new n(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)};n.selectionsArrEqual=function(t,n){if(t&&!n||!t&&n)return!1;if(!t&&!n)return!0;if(t.length!==n.length)return!1;for(var i=0,r=t.length;i<r;i++)if(!this.selectionsEqual(t[i],n[i]))return!1;return!0};n.isISelection=function(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"};n.createWithDirection=function(t,i,r,e,o){return o===0?new n(t,i,r,e):new n(r,e,t,i)};return n}(Ir);var Nr=Object.create(null);function Pr(t,n){if(H(n)){var i=Nr[n];if(i===void 0)throw new Error("".concat(t," references an unknown codicon: ").concat(n));n=i}return Nr[t]=n,{id:t}}function Wr(){return Nr}var Hr={add:Pr("add",6e4),plus:Pr("plus",6e4),gistNew:Pr("gist-new",6e4),repoCreate:Pr("repo-create",6e4),lightbulb:Pr("lightbulb",60001),lightBulb:Pr("light-bulb",60001),repo:Pr("repo",60002),repoDelete:Pr("repo-delete",60002),gistFork:Pr("gist-fork",60003),repoForked:Pr("repo-forked",60003),gitPullRequest:Pr("git-pull-request",60004),gitPullRequestAbandoned:Pr("git-pull-request-abandoned",60004),recordKeys:Pr("record-keys",60005),keyboard:Pr("keyboard",60005),tag:Pr("tag",60006),gitPullRequestLabel:Pr("git-pull-request-label",60006),tagAdd:Pr("tag-add",60006),tagRemove:Pr("tag-remove",60006),person:Pr("person",60007),personFollow:Pr("person-follow",60007),personOutline:Pr("person-outline",60007),personFilled:Pr("person-filled",60007),gitBranch:Pr("git-branch",60008),gitBranchCreate:Pr("git-branch-create",60008),gitBranchDelete:Pr("git-branch-delete",60008),sourceControl:Pr("source-control",60008),mirror:Pr("mirror",60009),mirrorPublic:Pr("mirror-public",60009),star:Pr("star",60010),starAdd:Pr("star-add",60010),starDelete:Pr("star-delete",60010),starEmpty:Pr("star-empty",60010),comment:Pr("comment",60011),commentAdd:Pr("comment-add",60011),alert:Pr("alert",60012),warning:Pr("warning",60012),search:Pr("search",60013),searchSave:Pr("search-save",60013),logOut:Pr("log-out",60014),signOut:Pr("sign-out",60014),logIn:Pr("log-in",60015),signIn:Pr("sign-in",60015),eye:Pr("eye",60016),eyeUnwatch:Pr("eye-unwatch",60016),eyeWatch:Pr("eye-watch",60016),circleFilled:Pr("circle-filled",60017),primitiveDot:Pr("primitive-dot",60017),closeDirty:Pr("close-dirty",60017),debugBreakpoint:Pr("debug-breakpoint",60017),debugBreakpointDisabled:Pr("debug-breakpoint-disabled",60017),debugHint:Pr("debug-hint",60017),terminalDecorationSuccess:Pr("terminal-decoration-success",60017),primitiveSquare:Pr("primitive-square",60018),edit:Pr("edit",60019),pencil:Pr("pencil",60019),info:Pr("info",60020),issueOpened:Pr("issue-opened",60020),gistPrivate:Pr("gist-private",60021),gitForkPrivate:Pr("git-fork-private",60021),lock:Pr("lock",60021),mirrorPrivate:Pr("mirror-private",60021),close:Pr("close",60022),removeClose:Pr("remove-close",60022),x:Pr("x",60022),repoSync:Pr("repo-sync",60023),sync:Pr("sync",60023),clone:Pr("clone",60024),desktopDownload:Pr("desktop-download",60024),beaker:Pr("beaker",60025),microscope:Pr("microscope",60025),vm:Pr("vm",60026),deviceDesktop:Pr("device-desktop",60026),file:Pr("file",60027),fileText:Pr("file-text",60027),more:Pr("more",60028),ellipsis:Pr("ellipsis",60028),kebabHorizontal:Pr("kebab-horizontal",60028),mailReply:Pr("mail-reply",60029),reply:Pr("reply",60029),organization:Pr("organization",60030),organizationFilled:Pr("organization-filled",60030),organizationOutline:Pr("organization-outline",60030),newFile:Pr("new-file",60031),fileAdd:Pr("file-add",60031),newFolder:Pr("new-folder",60032),fileDirectoryCreate:Pr("file-directory-create",60032),trash:Pr("trash",60033),trashcan:Pr("trashcan",60033),history:Pr("history",60034),clock:Pr("clock",60034),folder:Pr("folder",60035),fileDirectory:Pr("file-directory",60035),symbolFolder:Pr("symbol-folder",60035),logoGithub:Pr("logo-github",60036),markGithub:Pr("mark-github",60036),github:Pr("github",60036),terminal:Pr("terminal",60037),console:Pr("console",60037),repl:Pr("repl",60037),zap:Pr("zap",60038),symbolEvent:Pr("symbol-event",60038),error:Pr("error",60039),stop:Pr("stop",60039),variable:Pr("variable",60040),symbolVariable:Pr("symbol-variable",60040),array:Pr("array",60042),symbolArray:Pr("symbol-array",60042),symbolModule:Pr("symbol-module",60043),symbolPackage:Pr("symbol-package",60043),symbolNamespace:Pr("symbol-namespace",60043),symbolObject:Pr("symbol-object",60043),symbolMethod:Pr("symbol-method",60044),symbolFunction:Pr("symbol-function",60044),symbolConstructor:Pr("symbol-constructor",60044),symbolBoolean:Pr("symbol-boolean",60047),symbolNull:Pr("symbol-null",60047),symbolNumeric:Pr("symbol-numeric",60048),symbolNumber:Pr("symbol-number",60048),symbolStructure:Pr("symbol-structure",60049),symbolStruct:Pr("symbol-struct",60049),symbolParameter:Pr("symbol-parameter",60050),symbolTypeParameter:Pr("symbol-type-parameter",60050),symbolKey:Pr("symbol-key",60051),symbolText:Pr("symbol-text",60051),symbolReference:Pr("symbol-reference",60052),goToFile:Pr("go-to-file",60052),symbolEnum:Pr("symbol-enum",60053),symbolValue:Pr("symbol-value",60053),symbolRuler:Pr("symbol-ruler",60054),symbolUnit:Pr("symbol-unit",60054),activateBreakpoints:Pr("activate-breakpoints",60055),archive:Pr("archive",60056),arrowBoth:Pr("arrow-both",60057),arrowDown:Pr("arrow-down",60058),arrowLeft:Pr("arrow-left",60059),arrowRight:Pr("arrow-right",60060),arrowSmallDown:Pr("arrow-small-down",60061),arrowSmallLeft:Pr("arrow-small-left",60062),arrowSmallRight:Pr("arrow-small-right",60063),arrowSmallUp:Pr("arrow-small-up",60064),arrowUp:Pr("arrow-up",60065),bell:Pr("bell",60066),bold:Pr("bold",60067),book:Pr("book",60068),bookmark:Pr("bookmark",60069),debugBreakpointConditionalUnverified:Pr("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:Pr("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:Pr("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:Pr("debug-breakpoint-data-unverified",60072),debugBreakpointData:Pr("debug-breakpoint-data",60073),debugBreakpointDataDisabled:Pr("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:Pr("debug-breakpoint-log-unverified",60074),debugBreakpointLog:Pr("debug-breakpoint-log",60075),debugBreakpointLogDisabled:Pr("debug-breakpoint-log-disabled",60075),briefcase:Pr("briefcase",60076),broadcast:Pr("broadcast",60077),browser:Pr("browser",60078),bug:Pr("bug",60079),calendar:Pr("calendar",60080),caseSensitive:Pr("case-sensitive",60081),check:Pr("check",60082),checklist:Pr("checklist",60083),chevronDown:Pr("chevron-down",60084),chevronLeft:Pr("chevron-left",60085),chevronRight:Pr("chevron-right",60086),chevronUp:Pr("chevron-up",60087),chromeClose:Pr("chrome-close",60088),chromeMaximize:Pr("chrome-maximize",60089),chromeMinimize:Pr("chrome-minimize",60090),chromeRestore:Pr("chrome-restore",60091),circleOutline:Pr("circle-outline",60092),circle:Pr("circle",60092),debugBreakpointUnverified:Pr("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:Pr("terminal-decoration-incomplete",60092),circleSlash:Pr("circle-slash",60093),circuitBoard:Pr("circuit-board",60094),clearAll:Pr("clear-all",60095),clippy:Pr("clippy",60096),closeAll:Pr("close-all",60097),cloudDownload:Pr("cloud-download",60098),cloudUpload:Pr("cloud-upload",60099),code:Pr("code",60100),collapseAll:Pr("collapse-all",60101),colorMode:Pr("color-mode",60102),commentDiscussion:Pr("comment-discussion",60103),creditCard:Pr("credit-card",60105),dash:Pr("dash",60108),dashboard:Pr("dashboard",60109),database:Pr("database",60110),debugContinue:Pr("debug-continue",60111),debugDisconnect:Pr("debug-disconnect",60112),debugPause:Pr("debug-pause",60113),debugRestart:Pr("debug-restart",60114),debugStart:Pr("debug-start",60115),debugStepInto:Pr("debug-step-into",60116),debugStepOut:Pr("debug-step-out",60117),debugStepOver:Pr("debug-step-over",60118),debugStop:Pr("debug-stop",60119),debug:Pr("debug",60120),deviceCameraVideo:Pr("device-camera-video",60121),deviceCamera:Pr("device-camera",60122),deviceMobile:Pr("device-mobile",60123),diffAdded:Pr("diff-added",60124),diffIgnored:Pr("diff-ignored",60125),diffModified:Pr("diff-modified",60126),diffRemoved:Pr("diff-removed",60127),diffRenamed:Pr("diff-renamed",60128),diff:Pr("diff",60129),diffSidebyside:Pr("diff-sidebyside",60129),discard:Pr("discard",60130),editorLayout:Pr("editor-layout",60131),emptyWindow:Pr("empty-window",60132),exclude:Pr("exclude",60133),extensions:Pr("extensions",60134),eyeClosed:Pr("eye-closed",60135),fileBinary:Pr("file-binary",60136),fileCode:Pr("file-code",60137),fileMedia:Pr("file-media",60138),filePdf:Pr("file-pdf",60139),fileSubmodule:Pr("file-submodule",60140),fileSymlinkDirectory:Pr("file-symlink-directory",60141),fileSymlinkFile:Pr("file-symlink-file",60142),fileZip:Pr("file-zip",60143),files:Pr("files",60144),filter:Pr("filter",60145),flame:Pr("flame",60146),foldDown:Pr("fold-down",60147),foldUp:Pr("fold-up",60148),fold:Pr("fold",60149),folderActive:Pr("folder-active",60150),folderOpened:Pr("folder-opened",60151),gear:Pr("gear",60152),gift:Pr("gift",60153),gistSecret:Pr("gist-secret",60154),gist:Pr("gist",60155),gitCommit:Pr("git-commit",60156),gitCompare:Pr("git-compare",60157),compareChanges:Pr("compare-changes",60157),gitMerge:Pr("git-merge",60158),githubAction:Pr("github-action",60159),githubAlt:Pr("github-alt",60160),globe:Pr("globe",60161),grabber:Pr("grabber",60162),graph:Pr("graph",60163),gripper:Pr("gripper",60164),heart:Pr("heart",60165),home:Pr("home",60166),horizontalRule:Pr("horizontal-rule",60167),hubot:Pr("hubot",60168),inbox:Pr("inbox",60169),issueReopened:Pr("issue-reopened",60171),issues:Pr("issues",60172),italic:Pr("italic",60173),jersey:Pr("jersey",60174),json:Pr("json",60175),kebabVertical:Pr("kebab-vertical",60176),key:Pr("key",60177),law:Pr("law",60178),lightbulbAutofix:Pr("lightbulb-autofix",60179),linkExternal:Pr("link-external",60180),link:Pr("link",60181),listOrdered:Pr("list-ordered",60182),listUnordered:Pr("list-unordered",60183),liveShare:Pr("live-share",60184),loading:Pr("loading",60185),location:Pr("location",60186),mailRead:Pr("mail-read",60187),mail:Pr("mail",60188),markdown:Pr("markdown",60189),megaphone:Pr("megaphone",60190),mention:Pr("mention",60191),milestone:Pr("milestone",60192),gitPullRequestMilestone:Pr("git-pull-request-milestone",60192),mortarBoard:Pr("mortar-board",60193),move:Pr("move",60194),multipleWindows:Pr("multiple-windows",60195),mute:Pr("mute",60196),noNewline:Pr("no-newline",60197),note:Pr("note",60198),octoface:Pr("octoface",60199),openPreview:Pr("open-preview",60200),package:Pr("package",60201),paintcan:Pr("paintcan",60202),pin:Pr("pin",60203),play:Pr("play",60204),run:Pr("run",60204),plug:Pr("plug",60205),preserveCase:Pr("preserve-case",60206),preview:Pr("preview",60207),project:Pr("project",60208),pulse:Pr("pulse",60209),question:Pr("question",60210),quote:Pr("quote",60211),radioTower:Pr("radio-tower",60212),reactions:Pr("reactions",60213),references:Pr("references",60214),refresh:Pr("refresh",60215),regex:Pr("regex",60216),remoteExplorer:Pr("remote-explorer",60217),remote:Pr("remote",60218),remove:Pr("remove",60219),replaceAll:Pr("replace-all",60220),replace:Pr("replace",60221),repoClone:Pr("repo-clone",60222),repoForcePush:Pr("repo-force-push",60223),repoPull:Pr("repo-pull",60224),repoPush:Pr("repo-push",60225),report:Pr("report",60226),requestChanges:Pr("request-changes",60227),rocket:Pr("rocket",60228),rootFolderOpened:Pr("root-folder-opened",60229),rootFolder:Pr("root-folder",60230),rss:Pr("rss",60231),ruby:Pr("ruby",60232),saveAll:Pr("save-all",60233),saveAs:Pr("save-as",60234),save:Pr("save",60235),screenFull:Pr("screen-full",60236),screenNormal:Pr("screen-normal",60237),searchStop:Pr("search-stop",60238),server:Pr("server",60240),settingsGear:Pr("settings-gear",60241),settings:Pr("settings",60242),shield:Pr("shield",60243),smiley:Pr("smiley",60244),sortPrecedence:Pr("sort-precedence",60245),splitHorizontal:Pr("split-horizontal",60246),splitVertical:Pr("split-vertical",60247),squirrel:Pr("squirrel",60248),starFull:Pr("star-full",60249),starHalf:Pr("star-half",60250),symbolClass:Pr("symbol-class",60251),symbolColor:Pr("symbol-color",60252),symbolConstant:Pr("symbol-constant",60253),symbolEnumMember:Pr("symbol-enum-member",60254),symbolField:Pr("symbol-field",60255),symbolFile:Pr("symbol-file",60256),symbolInterface:Pr("symbol-interface",60257),symbolKeyword:Pr("symbol-keyword",60258),symbolMisc:Pr("symbol-misc",60259),symbolOperator:Pr("symbol-operator",60260),symbolProperty:Pr("symbol-property",60261),wrench:Pr("wrench",60261),wrenchSubaction:Pr("wrench-subaction",60261),symbolSnippet:Pr("symbol-snippet",60262),tasklist:Pr("tasklist",60263),telescope:Pr("telescope",60264),textSize:Pr("text-size",60265),threeBars:Pr("three-bars",60266),thumbsdown:Pr("thumbsdown",60267),thumbsup:Pr("thumbsup",60268),tools:Pr("tools",60269),triangleDown:Pr("triangle-down",60270),triangleLeft:Pr("triangle-left",60271),triangleRight:Pr("triangle-right",60272),triangleUp:Pr("triangle-up",60273),twitter:Pr("twitter",60274),unfold:Pr("unfold",60275),unlock:Pr("unlock",60276),unmute:Pr("unmute",60277),unverified:Pr("unverified",60278),verified:Pr("verified",60279),versions:Pr("versions",60280),vmActive:Pr("vm-active",60281),vmOutline:Pr("vm-outline",60282),vmRunning:Pr("vm-running",60283),watch:Pr("watch",60284),whitespace:Pr("whitespace",60285),wholeWord:Pr("whole-word",60286),window:Pr("window",60287),wordWrap:Pr("word-wrap",60288),zoomIn:Pr("zoom-in",60289),zoomOut:Pr("zoom-out",60290),listFilter:Pr("list-filter",60291),listFlat:Pr("list-flat",60292),listSelection:Pr("list-selection",60293),selection:Pr("selection",60293),listTree:Pr("list-tree",60294),debugBreakpointFunctionUnverified:Pr("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:Pr("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:Pr("debug-breakpoint-function-disabled",60296),debugStackframeActive:Pr("debug-stackframe-active",60297),circleSmallFilled:Pr("circle-small-filled",60298),debugStackframeDot:Pr("debug-stackframe-dot",60298),terminalDecorationMark:Pr("terminal-decoration-mark",60298),debugStackframe:Pr("debug-stackframe",60299),debugStackframeFocused:Pr("debug-stackframe-focused",60299),debugBreakpointUnsupported:Pr("debug-breakpoint-unsupported",60300),symbolString:Pr("symbol-string",60301),debugReverseContinue:Pr("debug-reverse-continue",60302),debugStepBack:Pr("debug-step-back",60303),debugRestartFrame:Pr("debug-restart-frame",60304),debugAlt:Pr("debug-alt",60305),callIncoming:Pr("call-incoming",60306),callOutgoing:Pr("call-outgoing",60307),menu:Pr("menu",60308),expandAll:Pr("expand-all",60309),feedback:Pr("feedback",60310),gitPullRequestReviewer:Pr("git-pull-request-reviewer",60310),groupByRefType:Pr("group-by-ref-type",60311),ungroupByRefType:Pr("ungroup-by-ref-type",60312),account:Pr("account",60313),gitPullRequestAssignee:Pr("git-pull-request-assignee",60313),bellDot:Pr("bell-dot",60314),debugConsole:Pr("debug-console",60315),library:Pr("library",60316),output:Pr("output",60317),runAll:Pr("run-all",60318),syncIgnored:Pr("sync-ignored",60319),pinned:Pr("pinned",60320),githubInverted:Pr("github-inverted",60321),serverProcess:Pr("server-process",60322),serverEnvironment:Pr("server-environment",60323),pass:Pr("pass",60324),issueClosed:Pr("issue-closed",60324),stopCircle:Pr("stop-circle",60325),playCircle:Pr("play-circle",60326),record:Pr("record",60327),debugAltSmall:Pr("debug-alt-small",60328),vmConnect:Pr("vm-connect",60329),cloud:Pr("cloud",60330),merge:Pr("merge",60331),export:Pr("export",60332),graphLeft:Pr("graph-left",60333),magnet:Pr("magnet",60334),notebook:Pr("notebook",60335),redo:Pr("redo",60336),checkAll:Pr("check-all",60337),pinnedDirty:Pr("pinned-dirty",60338),passFilled:Pr("pass-filled",60339),circleLargeFilled:Pr("circle-large-filled",60340),circleLarge:Pr("circle-large",60341),circleLargeOutline:Pr("circle-large-outline",60341),combine:Pr("combine",60342),gather:Pr("gather",60342),table:Pr("table",60343),variableGroup:Pr("variable-group",60344),typeHierarchy:Pr("type-hierarchy",60345),typeHierarchySub:Pr("type-hierarchy-sub",60346),typeHierarchySuper:Pr("type-hierarchy-super",60347),gitPullRequestCreate:Pr("git-pull-request-create",60348),runAbove:Pr("run-above",60349),runBelow:Pr("run-below",60350),notebookTemplate:Pr("notebook-template",60351),debugRerun:Pr("debug-rerun",60352),workspaceTrusted:Pr("workspace-trusted",60353),workspaceUntrusted:Pr("workspace-untrusted",60354),workspaceUnknown:Pr("workspace-unknown",60355),terminalCmd:Pr("terminal-cmd",60356),terminalDebian:Pr("terminal-debian",60357),terminalLinux:Pr("terminal-linux",60358),terminalPowershell:Pr("terminal-powershell",60359),terminalTmux:Pr("terminal-tmux",60360),terminalUbuntu:Pr("terminal-ubuntu",60361),terminalBash:Pr("terminal-bash",60362),arrowSwap:Pr("arrow-swap",60363),copy:Pr("copy",60364),personAdd:Pr("person-add",60365),filterFilled:Pr("filter-filled",60366),wand:Pr("wand",60367),debugLineByLine:Pr("debug-line-by-line",60368),inspect:Pr("inspect",60369),layers:Pr("layers",60370),layersDot:Pr("layers-dot",60371),layersActive:Pr("layers-active",60372),compass:Pr("compass",60373),compassDot:Pr("compass-dot",60374),compassActive:Pr("compass-active",60375),azure:Pr("azure",60376),issueDraft:Pr("issue-draft",60377),gitPullRequestClosed:Pr("git-pull-request-closed",60378),gitPullRequestDraft:Pr("git-pull-request-draft",60379),debugAll:Pr("debug-all",60380),debugCoverage:Pr("debug-coverage",60381),runErrors:Pr("run-errors",60382),folderLibrary:Pr("folder-library",60383),debugContinueSmall:Pr("debug-continue-small",60384),beakerStop:Pr("beaker-stop",60385),graphLine:Pr("graph-line",60386),graphScatter:Pr("graph-scatter",60387),pieChart:Pr("pie-chart",60388),bracket:Pr("bracket",60175),bracketDot:Pr("bracket-dot",60389),bracketError:Pr("bracket-error",60390),lockSmall:Pr("lock-small",60391),azureDevops:Pr("azure-devops",60392),verifiedFilled:Pr("verified-filled",60393),newline:Pr("newline",60394),layout:Pr("layout",60395),layoutActivitybarLeft:Pr("layout-activitybar-left",60396),layoutActivitybarRight:Pr("layout-activitybar-right",60397),layoutPanelLeft:Pr("layout-panel-left",60398),layoutPanelCenter:Pr("layout-panel-center",60399),layoutPanelJustify:Pr("layout-panel-justify",60400),layoutPanelRight:Pr("layout-panel-right",60401),layoutPanel:Pr("layout-panel",60402),layoutSidebarLeft:Pr("layout-sidebar-left",60403),layoutSidebarRight:Pr("layout-sidebar-right",60404),layoutStatusbar:Pr("layout-statusbar",60405),layoutMenubar:Pr("layout-menubar",60406),layoutCentered:Pr("layout-centered",60407),target:Pr("target",60408),indent:Pr("indent",60409),recordSmall:Pr("record-small",60410),errorSmall:Pr("error-small",60411),terminalDecorationError:Pr("terminal-decoration-error",60411),arrowCircleDown:Pr("arrow-circle-down",60412),arrowCircleLeft:Pr("arrow-circle-left",60413),arrowCircleRight:Pr("arrow-circle-right",60414),arrowCircleUp:Pr("arrow-circle-up",60415),layoutSidebarRightOff:Pr("layout-sidebar-right-off",60416),layoutPanelOff:Pr("layout-panel-off",60417),layoutSidebarLeftOff:Pr("layout-sidebar-left-off",60418),blank:Pr("blank",60419),heartFilled:Pr("heart-filled",60420),map:Pr("map",60421),mapHorizontal:Pr("map-horizontal",60421),foldHorizontal:Pr("fold-horizontal",60421),mapFilled:Pr("map-filled",60422),mapHorizontalFilled:Pr("map-horizontal-filled",60422),foldHorizontalFilled:Pr("fold-horizontal-filled",60422),circleSmall:Pr("circle-small",60423),bellSlash:Pr("bell-slash",60424),bellSlashDot:Pr("bell-slash-dot",60425),commentUnresolved:Pr("comment-unresolved",60426),gitPullRequestGoToChanges:Pr("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:Pr("git-pull-request-new-changes",60428),searchFuzzy:Pr("search-fuzzy",60429),commentDraft:Pr("comment-draft",60430),send:Pr("send",60431),sparkle:Pr("sparkle",60432),insert:Pr("insert",60433),mic:Pr("mic",60434),thumbsdownFilled:Pr("thumbsdown-filled",60435),thumbsupFilled:Pr("thumbsup-filled",60436),coffee:Pr("coffee",60437),snake:Pr("snake",60438),game:Pr("game",60439),vr:Pr("vr",60440),chip:Pr("chip",60441),piano:Pr("piano",60442),music:Pr("music",60443),micFilled:Pr("mic-filled",60444),repoFetch:Pr("repo-fetch",60445),copilot:Pr("copilot",60446),lightbulbSparkle:Pr("lightbulb-sparkle",60447),robot:Pr("robot",60448),sparkleFilled:Pr("sparkle-filled",60449),diffSingle:Pr("diff-single",60450),diffMultiple:Pr("diff-multiple",60451),surroundWith:Pr("surround-with",60452),share:Pr("share",60453),gitStash:Pr("git-stash",60454),gitStashApply:Pr("git-stash-apply",60455),gitStashPop:Pr("git-stash-pop",60456),vscode:Pr("vscode",60457),vscodeInsiders:Pr("vscode-insiders",60458),codeOss:Pr("code-oss",60459),runCoverage:Pr("run-coverage",60460),runAllCoverage:Pr("run-all-coverage",60461),coverage:Pr("coverage",60462),githubProject:Pr("github-project",60463),mapVertical:Pr("map-vertical",60464),foldVertical:Pr("fold-vertical",60464),mapVerticalFilled:Pr("map-vertical-filled",60465),foldVerticalFilled:Pr("fold-vertical-filled",60465),dialogError:Pr("dialog-error","error"),dialogWarning:Pr("dialog-warning","warning"),dialogInfo:Pr("dialog-info","info"),dialogClose:Pr("dialog-close","close"),treeItemExpanded:Pr("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:Pr("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:Pr("tree-filter-on-type-off","list-selection"),treeFilterClear:Pr("tree-filter-clear","close"),treeItemLoading:Pr("tree-item-loading","loading"),menuSelection:Pr("menu-selection","check"),menuSubmenu:Pr("menu-submenu","chevron-right"),menuBarMore:Pr("menubar-more","more"),scrollbarButtonLeft:Pr("scrollbar-button-left","triangle-left"),scrollbarButtonRight:Pr("scrollbar-button-right","triangle-right"),scrollbarButtonUp:Pr("scrollbar-button-up","triangle-up"),scrollbarButtonDown:Pr("scrollbar-button-down","triangle-down"),toolBarMore:Pr("toolbar-more","more"),quickInputBack:Pr("quick-input-back","arrow-left"),dropDownButton:Pr("drop-down-button",60084),symbolCustomColor:Pr("symbol-customcolor",60252),exportIcon:Pr("export",60332),workspaceUnspecified:Pr("workspace-unspecified",60355),newLine:Pr("newline",60394),thumbsDownFilled:Pr("thumbsdown-filled",60435),thumbsUpFilled:Pr("thumbsup-filled",60436),gitFetch:Pr("git-fetch",60445),lightbulbSparkleAutofix:Pr("lightbulb-sparkle-autofix",60447),debugBreakpointPending:Pr("debug-breakpoint-pending",60377)};var zr=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._registry=n,e._languageId=i,e._factory=r,e._isDisposed=!1,e._resolvePromise=null,e._isResolved=!1;return e}Object.defineProperty(n.prototype,"isResolved",{get:function(){return this._isResolved},enumerable:false,configurable:true});n.prototype.dispose=function(){this._isDisposed=!0,t.prototype.dispose.call(this)};n.prototype.resolve=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,(this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise)]}))}))};n.prototype._create=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this._factory.tokenizationSupport];case 1:t=n.sent();this._isResolved=!0,t&&!this._isDisposed&&this._register(this._registry.register(this._languageId,t));return[2]}}))}))};return n}(ci);var Ur=function(){function t(t,n,i){this.offset=t,this.type=n,this.language=i,this._tokenBrand=void 0}t.prototype.toString=function(){return"("+this.offset+", "+this.type+")"};return t}();var Kr=function(){function t(t,n){this.tokens=t,this.endState=n,this._tokenizationResultBrand=void 0}return t}();var Vr=function(){function t(t,n){this.tokens=t,this.endState=n,this._encodedTokenizationResultBrand=void 0}return t}();var qr,Gr,$r,Jr,Zr;(function(t){var n=new Map;n.set(0,Hr.symbolMethod),n.set(1,Hr.symbolFunction),n.set(2,Hr.symbolConstructor),n.set(3,Hr.symbolField),n.set(4,Hr.symbolVariable),n.set(5,Hr.symbolClass),n.set(6,Hr.symbolStruct),n.set(7,Hr.symbolInterface),n.set(8,Hr.symbolModule),n.set(9,Hr.symbolProperty),n.set(10,Hr.symbolEvent),n.set(11,Hr.symbolOperator),n.set(12,Hr.symbolUnit),n.set(13,Hr.symbolValue),n.set(15,Hr.symbolEnum),n.set(14,Hr.symbolConstant),n.set(15,Hr.symbolEnum),n.set(16,Hr.symbolEnumMember),n.set(17,Hr.symbolKeyword),n.set(27,Hr.symbolSnippet),n.set(18,Hr.symbolText),n.set(19,Hr.symbolColor),n.set(20,Hr.symbolFile),n.set(21,Hr.symbolReference),n.set(22,Hr.symbolCustomColor),n.set(23,Hr.symbolFolder),n.set(24,Hr.symbolTypeParameter),n.set(25,Hr.account),n.set(26,Hr.issues),t.toIcon=function(t){var i=n.get(t);return i||(console.info("No codicon found for CompletionItemKind "+t),i=Hr.symbolProperty),i};var i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26),t.fromString=function(t,n){var r=i.get(t);return r!==void 0||n||(r=9),r}})(qr||(qr={})),function(t){t[t.Automatic=0]="Automatic",t[t.Explicit=1]="Explicit"}(Gr||(Gr={}));var Qr=function(){function t(t,n,i,r){this.range=t,this.text=n,this.completionKind=i,this.isSnippetText=r}t.prototype.equals=function(t){return Ir.lift(this.range).equalsRange(t.range)&&this.text===t.text&&this.completionKind===t.completionKind&&this.isSnippetText===t.isSnippetText};return t}();(function(t){t[t.Automatic=0]="Automatic",t[t.PasteAs=1]="PasteAs"})($r||($r={})),function(t){t[t.Invoke=1]="Invoke",t[t.TriggerCharacter=2]="TriggerCharacter",t[t.ContentChange=3]="ContentChange"}(Jr||(Jr={})),function(t){t[t.Text=0]="Text",t[t.Read=1]="Read",t[t.Write=2]="Write"}(Zr||(Zr={}));var Yr={17:ht(0,"array"),16:ht(0,"boolean"),4:ht(0,"class"),13:ht(0,"constant"),8:ht(0,"constructor"),9:ht(0,"enumeration"),21:ht(0,"enumeration member"),23:ht(0,"event"),7:ht(0,"field"),0:ht(0,"file"),11:ht(0,"function"),10:ht(0,"interface"),19:ht(0,"key"),5:ht(0,"method"),1:ht(0,"module"),2:ht(0,"namespace"),20:ht(0,"null"),15:ht(0,"number"),18:ht(0,"object"),24:ht(0,"operator"),3:ht(0,"package"),6:ht(0,"property"),14:ht(0,"string"),22:ht(0,"struct"),25:ht(0,"type parameter"),12:ht(0,"variable")};var Xr,te,ne,ie;(function(t){var n=new Map;n.set(0,Hr.symbolFile),n.set(1,Hr.symbolModule),n.set(2,Hr.symbolNamespace),n.set(3,Hr.symbolPackage),n.set(4,Hr.symbolClass),n.set(5,Hr.symbolMethod),n.set(6,Hr.symbolProperty),n.set(7,Hr.symbolField),n.set(8,Hr.symbolConstructor),n.set(9,Hr.symbolEnum),n.set(10,Hr.symbolInterface),n.set(11,Hr.symbolFunction),n.set(12,Hr.symbolVariable),n.set(13,Hr.symbolConstant),n.set(14,Hr.symbolString),n.set(15,Hr.symbolNumber),n.set(16,Hr.symbolBoolean),n.set(17,Hr.symbolArray),n.set(18,Hr.symbolObject),n.set(19,Hr.symbolKey),n.set(20,Hr.symbolNull),n.set(21,Hr.symbolEnumMember),n.set(22,Hr.symbolStruct),n.set(23,Hr.symbolEvent),n.set(24,Hr.symbolOperator),n.set(25,Hr.symbolTypeParameter),t.toIcon=function(t){var i=n.get(t);return i||(console.info("No codicon found for SymbolKind "+t),i=Hr.symbolProperty),i}})(Xr||(Xr={}));var re=function(){function t(t){this.value=t}t.fromValue=function(n){switch(n){case"comment":return t.Comment;case"imports":return t.Imports;case"region":return t.Region}return new t(n)};return t}();re.Comment=new re("comment"),re.Imports=new re("imports"),re.Region=new re("region"),function(t){t[t.AIGenerated=1]="AIGenerated"}(te||(te={})),(ne||(ne={})).is=function(t){return!(!t||typeof t!="object")&&typeof t.id=="string"&&typeof t.title=="string"},function(t){t[t.Type=1]="Type",t[t.Parameter=2]="Parameter"}(ie||(ie={}));var ee=function(){function t(t){this.createSupport=t,this._tokenizationSupport=null}t.prototype.dispose=function(){this._tokenizationSupport&&this._tokenizationSupport.then((function(t){t&&t.dispose()}))};Object.defineProperty(t.prototype,"tokenizationSupport",{get:function(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport},enumerable:false,configurable:true});return t}();var oe=new(function(){function t(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new ki,this.onDidChange=this._onDidChange.event,this._colorMap=null}t.prototype.handleChange=function(t){this._onDidChange.fire({changedLanguages:t,changedColorMap:!1})};t.prototype.register=function(t,n){var i=this;return this._tokenizationSupports.set(t,n),this.handleChange([t]),ai((function(){i._tokenizationSupports.get(t)===n&&(i._tokenizationSupports.delete(t),i.handleChange([t]))}))};t.prototype.get=function(t){return this._tokenizationSupports.get(t)||null};t.prototype.registerFactory=function(t,n){var i=this;var r;(r=this._factories.get(t))===null||r===void 0||r.dispose();var e=new zr(this,t,n);return this._factories.set(t,e),ai((function(){var n=i._factories.get(t);n&&n===e&&(i._factories.delete(t),n.dispose())}))};t.prototype.getOrCreate=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r;return __generator(this,(function(e){switch(e.label){case 0:n=this.get(t);if(n)return[2,n];i=this._factories.get(t);if(!(!i||i.isResolved))return[3,1];r=null;return[3,3];case 1:return[4,i.resolve()];case 2:r=(e.sent(),this.get(t));e.label=3;case 3:return[2,r]}}))}))};t.prototype.isResolved=function(t){if(this.get(t))return!0;var n=this._factories.get(t);return!(n&&!n.isResolved)};t.prototype.setColorMap=function(t){this._colorMap=t,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})};t.prototype.getColorMap=function(){return this._colorMap};t.prototype.getDefaultBackground=function(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null};return t}());var se,ue,ae,he,ce,fe,le,ve,de,ge,pe,we,me,be,ye,_e,ke,xe,Ce,Se,De,Ae,Oe,Ee,Me,Fe,Le,je,Re,Te,Ie,Be,Ne,Pe,We,He,ze,Ue,Ke,Ve,qe,Ge,$e,Je,Ze;(function(t){t[t.Invoke=0]="Invoke",t[t.Automatic=1]="Automatic"})(se||(se={})),function(t){t[t.Unknown=0]="Unknown",t[t.Disabled=1]="Disabled",t[t.Enabled=2]="Enabled"}(ue||(ue={})),function(t){t[t.Invoke=1]="Invoke",t[t.Auto=2]="Auto"}(ae||(ae={})),function(t){t[t.None=0]="None",t[t.KeepWhitespace=1]="KeepWhitespace",t[t.InsertAsSnippet=4]="InsertAsSnippet"}(he||(he={})),function(t){t[t.Method=0]="Method",t[t.Function=1]="Function",t[t.Constructor=2]="Constructor",t[t.Field=3]="Field",t[t.Variable=4]="Variable",t[t.Class=5]="Class",t[t.Struct=6]="Struct",t[t.Interface=7]="Interface",t[t.Module=8]="Module",t[t.Property=9]="Property",t[t.Event=10]="Event",t[t.Operator=11]="Operator",t[t.Unit=12]="Unit",t[t.Value=13]="Value",t[t.Constant=14]="Constant",t[t.Enum=15]="Enum",t[t.EnumMember=16]="EnumMember",t[t.Keyword=17]="Keyword",t[t.Text=18]="Text",t[t.Color=19]="Color",t[t.File=20]="File",t[t.Reference=21]="Reference",t[t.Customcolor=22]="Customcolor",t[t.Folder=23]="Folder",t[t.TypeParameter=24]="TypeParameter",t[t.User=25]="User",t[t.Issue=26]="Issue",t[t.Snippet=27]="Snippet"}(ce||(ce={})),function(t){t[t.Deprecated=1]="Deprecated"}(fe||(fe={})),function(t){t[t.Invoke=0]="Invoke",t[t.TriggerCharacter=1]="TriggerCharacter",t[t.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(le||(le={})),function(t){t[t.EXACT=0]="EXACT",t[t.ABOVE=1]="ABOVE",t[t.BELOW=2]="BELOW"}(ve||(ve={})),function(t){t[t.NotSet=0]="NotSet",t[t.ContentFlush=1]="ContentFlush",t[t.RecoverFromMarkers=2]="RecoverFromMarkers",t[t.Explicit=3]="Explicit",t[t.Paste=4]="Paste",t[t.Undo=5]="Undo",t[t.Redo=6]="Redo"}(de||(de={})),function(t){t[t.LF=1]="LF",t[t.CRLF=2]="CRLF"}(ge||(ge={})),function(t){t[t.Text=0]="Text",t[t.Read=1]="Read",t[t.Write=2]="Write"}(pe||(pe={})),function(t){t[t.None=0]="None",t[t.Keep=1]="Keep",t[t.Brackets=2]="Brackets",t[t.Advanced=3]="Advanced",t[t.Full=4]="Full"}(we||(we={})),function(t){t[t.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",t[t.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",t[t.accessibilitySupport=2]="accessibilitySupport",t[t.accessibilityPageSize=3]="accessibilityPageSize",t[t.ariaLabel=4]="ariaLabel",t[t.ariaRequired=5]="ariaRequired",t[t.autoClosingBrackets=6]="autoClosingBrackets",t[t.autoClosingComments=7]="autoClosingComments",t[t.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",t[t.autoClosingDelete=9]="autoClosingDelete",t[t.autoClosingOvertype=10]="autoClosingOvertype",t[t.autoClosingQuotes=11]="autoClosingQuotes",t[t.autoIndent=12]="autoIndent",t[t.automaticLayout=13]="automaticLayout",t[t.autoSurround=14]="autoSurround",t[t.bracketPairColorization=15]="bracketPairColorization",t[t.guides=16]="guides",t[t.codeLens=17]="codeLens",t[t.codeLensFontFamily=18]="codeLensFontFamily",t[t.codeLensFontSize=19]="codeLensFontSize",t[t.colorDecorators=20]="colorDecorators",t[t.colorDecoratorsLimit=21]="colorDecoratorsLimit",t[t.columnSelection=22]="columnSelection",t[t.comments=23]="comments",t[t.contextmenu=24]="contextmenu",t[t.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",t[t.cursorBlinking=26]="cursorBlinking",t[t.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",t[t.cursorStyle=28]="cursorStyle",t[t.cursorSurroundingLines=29]="cursorSurroundingLines",t[t.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",t[t.cursorWidth=31]="cursorWidth",t[t.disableLayerHinting=32]="disableLayerHinting",t[t.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",t[t.domReadOnly=34]="domReadOnly",t[t.dragAndDrop=35]="dragAndDrop",t[t.dropIntoEditor=36]="dropIntoEditor",t[t.emptySelectionClipboard=37]="emptySelectionClipboard",t[t.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",t[t.extraEditorClassName=39]="extraEditorClassName",t[t.fastScrollSensitivity=40]="fastScrollSensitivity",t[t.find=41]="find",t[t.fixedOverflowWidgets=42]="fixedOverflowWidgets",t[t.folding=43]="folding",t[t.foldingStrategy=44]="foldingStrategy",t[t.foldingHighlight=45]="foldingHighlight",t[t.foldingImportsByDefault=46]="foldingImportsByDefault",t[t.foldingMaximumRegions=47]="foldingMaximumRegions",t[t.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",t[t.fontFamily=49]="fontFamily",t[t.fontInfo=50]="fontInfo",t[t.fontLigatures=51]="fontLigatures",t[t.fontSize=52]="fontSize",t[t.fontWeight=53]="fontWeight",t[t.fontVariations=54]="fontVariations",t[t.formatOnPaste=55]="formatOnPaste",t[t.formatOnType=56]="formatOnType",t[t.glyphMargin=57]="glyphMargin",t[t.gotoLocation=58]="gotoLocation",t[t.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",t[t.hover=60]="hover",t[t.inDiffEditor=61]="inDiffEditor",t[t.inlineSuggest=62]="inlineSuggest",t[t.inlineEdit=63]="inlineEdit",t[t.letterSpacing=64]="letterSpacing",t[t.lightbulb=65]="lightbulb",t[t.lineDecorationsWidth=66]="lineDecorationsWidth",t[t.lineHeight=67]="lineHeight",t[t.lineNumbers=68]="lineNumbers",t[t.lineNumbersMinChars=69]="lineNumbersMinChars",t[t.linkedEditing=70]="linkedEditing",t[t.links=71]="links",t[t.matchBrackets=72]="matchBrackets",t[t.minimap=73]="minimap",t[t.mouseStyle=74]="mouseStyle",t[t.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",t[t.mouseWheelZoom=76]="mouseWheelZoom",t[t.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",t[t.multiCursorModifier=78]="multiCursorModifier",t[t.multiCursorPaste=79]="multiCursorPaste",t[t.multiCursorLimit=80]="multiCursorLimit",t[t.occurrencesHighlight=81]="occurrencesHighlight",t[t.overviewRulerBorder=82]="overviewRulerBorder",t[t.overviewRulerLanes=83]="overviewRulerLanes",t[t.padding=84]="padding",t[t.pasteAs=85]="pasteAs",t[t.parameterHints=86]="parameterHints",t[t.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",t[t.definitionLinkOpensInPeek=88]="definitionLinkOpensInPeek",t[t.quickSuggestions=89]="quickSuggestions",t[t.quickSuggestionsDelay=90]="quickSuggestionsDelay",t[t.readOnly=91]="readOnly",t[t.readOnlyMessage=92]="readOnlyMessage",t[t.renameOnType=93]="renameOnType",t[t.renderControlCharacters=94]="renderControlCharacters",t[t.renderFinalNewline=95]="renderFinalNewline",t[t.renderLineHighlight=96]="renderLineHighlight",t[t.renderLineHighlightOnlyWhenFocus=97]="renderLineHighlightOnlyWhenFocus",t[t.renderValidationDecorations=98]="renderValidationDecorations",t[t.renderWhitespace=99]="renderWhitespace",t[t.revealHorizontalRightPadding=100]="revealHorizontalRightPadding",t[t.roundedSelection=101]="roundedSelection",t[t.rulers=102]="rulers",t[t.scrollbar=103]="scrollbar",t[t.scrollBeyondLastColumn=104]="scrollBeyondLastColumn",t[t.scrollBeyondLastLine=105]="scrollBeyondLastLine",t[t.scrollPredominantAxis=106]="scrollPredominantAxis",t[t.selectionClipboard=107]="selectionClipboard",t[t.selectionHighlight=108]="selectionHighlight",t[t.selectOnLineNumbers=109]="selectOnLineNumbers",t[t.showFoldingControls=110]="showFoldingControls",t[t.showUnused=111]="showUnused",t[t.snippetSuggestions=112]="snippetSuggestions",t[t.smartSelect=113]="smartSelect",t[t.smoothScrolling=114]="smoothScrolling",t[t.stickyScroll=115]="stickyScroll",t[t.stickyTabStops=116]="stickyTabStops",t[t.stopRenderingLineAfter=117]="stopRenderingLineAfter",t[t.suggest=118]="suggest",t[t.suggestFontSize=119]="suggestFontSize",t[t.suggestLineHeight=120]="suggestLineHeight",t[t.suggestOnTriggerCharacters=121]="suggestOnTriggerCharacters",t[t.suggestSelection=122]="suggestSelection",t[t.tabCompletion=123]="tabCompletion",t[t.tabIndex=124]="tabIndex",t[t.unicodeHighlighting=125]="unicodeHighlighting",t[t.unusualLineTerminators=126]="unusualLineTerminators",t[t.useShadowDOM=127]="useShadowDOM",t[t.useTabStops=128]="useTabStops",t[t.wordBreak=129]="wordBreak",t[t.wordSegmenterLocales=130]="wordSegmenterLocales",t[t.wordSeparators=131]="wordSeparators",t[t.wordWrap=132]="wordWrap",t[t.wordWrapBreakAfterCharacters=133]="wordWrapBreakAfterCharacters",t[t.wordWrapBreakBeforeCharacters=134]="wordWrapBreakBeforeCharacters",t[t.wordWrapColumn=135]="wordWrapColumn",t[t.wordWrapOverride1=136]="wordWrapOverride1",t[t.wordWrapOverride2=137]="wordWrapOverride2",t[t.wrappingIndent=138]="wrappingIndent",t[t.wrappingStrategy=139]="wrappingStrategy",t[t.showDeprecated=140]="showDeprecated",t[t.inlayHints=141]="inlayHints",t[t.editorClassName=142]="editorClassName",t[t.pixelRatio=143]="pixelRatio",t[t.tabFocusMode=144]="tabFocusMode",t[t.layoutInfo=145]="layoutInfo",t[t.wrappingInfo=146]="wrappingInfo",t[t.defaultColorDecorators=147]="defaultColorDecorators",t[t.colorDecoratorsActivatedOn=148]="colorDecoratorsActivatedOn",t[t.inlineCompletionsAccessibilityVerbose=149]="inlineCompletionsAccessibilityVerbose"}(me||(me={})),function(t){t[t.TextDefined=0]="TextDefined",t[t.LF=1]="LF",t[t.CRLF=2]="CRLF"}(be||(be={})),function(t){t[t.LF=0]="LF",t[t.CRLF=1]="CRLF"}(ye||(ye={})),function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=3]="Right"}(_e||(_e={})),function(t){t[t.None=0]="None",t[t.Indent=1]="Indent",t[t.IndentOutdent=2]="IndentOutdent",t[t.Outdent=3]="Outdent"}(ke||(ke={})),function(t){t[t.Both=0]="Both",t[t.Right=1]="Right",t[t.Left=2]="Left",t[t.None=3]="None"}(xe||(xe={})),function(t){t[t.Type=1]="Type",t[t.Parameter=2]="Parameter"}(Ce||(Ce={})),function(t){t[t.Automatic=0]="Automatic",t[t.Explicit=1]="Explicit"}(Se||(Se={})),function(t){t[t.Invoke=0]="Invoke",t[t.Automatic=1]="Automatic"}(De||(De={})),function(t){t[t.DependsOnKbLayout=-1]="DependsOnKbLayout",t[t.Unknown=0]="Unknown",t[t.Backspace=1]="Backspace",t[t.Tab=2]="Tab",t[t.Enter=3]="Enter",t[t.Shift=4]="Shift",t[t.Ctrl=5]="Ctrl",t[t.Alt=6]="Alt",t[t.PauseBreak=7]="PauseBreak",t[t.CapsLock=8]="CapsLock",t[t.Escape=9]="Escape",t[t.Space=10]="Space",t[t.PageUp=11]="PageUp",t[t.PageDown=12]="PageDown",t[t.End=13]="End",t[t.Home=14]="Home",t[t.LeftArrow=15]="LeftArrow",t[t.UpArrow=16]="UpArrow",t[t.RightArrow=17]="RightArrow",t[t.DownArrow=18]="DownArrow",t[t.Insert=19]="Insert",t[t.Delete=20]="Delete",t[t.Digit0=21]="Digit0",t[t.Digit1=22]="Digit1",t[t.Digit2=23]="Digit2",t[t.Digit3=24]="Digit3",t[t.Digit4=25]="Digit4",t[t.Digit5=26]="Digit5",t[t.Digit6=27]="Digit6",t[t.Digit7=28]="Digit7",t[t.Digit8=29]="Digit8",t[t.Digit9=30]="Digit9",t[t.KeyA=31]="KeyA",t[t.KeyB=32]="KeyB",t[t.KeyC=33]="KeyC",t[t.KeyD=34]="KeyD",t[t.KeyE=35]="KeyE",t[t.KeyF=36]="KeyF",t[t.KeyG=37]="KeyG",t[t.KeyH=38]="KeyH",t[t.KeyI=39]="KeyI",t[t.KeyJ=40]="KeyJ",t[t.KeyK=41]="KeyK",t[t.KeyL=42]="KeyL",t[t.KeyM=43]="KeyM",t[t.KeyN=44]="KeyN",t[t.KeyO=45]="KeyO",t[t.KeyP=46]="KeyP",t[t.KeyQ=47]="KeyQ",t[t.KeyR=48]="KeyR",t[t.KeyS=49]="KeyS",t[t.KeyT=50]="KeyT",t[t.KeyU=51]="KeyU",t[t.KeyV=52]="KeyV",t[t.KeyW=53]="KeyW",t[t.KeyX=54]="KeyX",t[t.KeyY=55]="KeyY",t[t.KeyZ=56]="KeyZ",t[t.Meta=57]="Meta",t[t.ContextMenu=58]="ContextMenu",t[t.F1=59]="F1",t[t.F2=60]="F2",t[t.F3=61]="F3",t[t.F4=62]="F4",t[t.F5=63]="F5",t[t.F6=64]="F6",t[t.F7=65]="F7",t[t.F8=66]="F8",t[t.F9=67]="F9",t[t.F10=68]="F10",t[t.F11=69]="F11",t[t.F12=70]="F12",t[t.F13=71]="F13",t[t.F14=72]="F14",t[t.F15=73]="F15",t[t.F16=74]="F16",t[t.F17=75]="F17",t[t.F18=76]="F18",t[t.F19=77]="F19",t[t.F20=78]="F20",t[t.F21=79]="F21",t[t.F22=80]="F22",t[t.F23=81]="F23",t[t.F24=82]="F24",t[t.NumLock=83]="NumLock",t[t.ScrollLock=84]="ScrollLock",t[t.Semicolon=85]="Semicolon",t[t.Equal=86]="Equal",t[t.Comma=87]="Comma",t[t.Minus=88]="Minus",t[t.Period=89]="Period",t[t.Slash=90]="Slash",t[t.Backquote=91]="Backquote",t[t.BracketLeft=92]="BracketLeft",t[t.Backslash=93]="Backslash",t[t.BracketRight=94]="BracketRight",t[t.Quote=95]="Quote",t[t.OEM_8=96]="OEM_8",t[t.IntlBackslash=97]="IntlBackslash",t[t.Numpad0=98]="Numpad0",t[t.Numpad1=99]="Numpad1",t[t.Numpad2=100]="Numpad2",t[t.Numpad3=101]="Numpad3",t[t.Numpad4=102]="Numpad4",t[t.Numpad5=103]="Numpad5",t[t.Numpad6=104]="Numpad6",t[t.Numpad7=105]="Numpad7",t[t.Numpad8=106]="Numpad8",t[t.Numpad9=107]="Numpad9",t[t.NumpadMultiply=108]="NumpadMultiply",t[t.NumpadAdd=109]="NumpadAdd",t[t.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",t[t.NumpadSubtract=111]="NumpadSubtract",t[t.NumpadDecimal=112]="NumpadDecimal",t[t.NumpadDivide=113]="NumpadDivide",t[t.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",t[t.ABNT_C1=115]="ABNT_C1",t[t.ABNT_C2=116]="ABNT_C2",t[t.AudioVolumeMute=117]="AudioVolumeMute",t[t.AudioVolumeUp=118]="AudioVolumeUp",t[t.AudioVolumeDown=119]="AudioVolumeDown",t[t.BrowserSearch=120]="BrowserSearch",t[t.BrowserHome=121]="BrowserHome",t[t.BrowserBack=122]="BrowserBack",t[t.BrowserForward=123]="BrowserForward",t[t.MediaTrackNext=124]="MediaTrackNext",t[t.MediaTrackPrevious=125]="MediaTrackPrevious",t[t.MediaStop=126]="MediaStop",t[t.MediaPlayPause=127]="MediaPlayPause",t[t.LaunchMediaPlayer=128]="LaunchMediaPlayer",t[t.LaunchMail=129]="LaunchMail",t[t.LaunchApp2=130]="LaunchApp2",t[t.Clear=131]="Clear",t[t.MAX_VALUE=132]="MAX_VALUE"}(Ae||(Ae={})),function(t){t[t.Hint=1]="Hint",t[t.Info=2]="Info",t[t.Warning=4]="Warning",t[t.Error=8]="Error"}(Oe||(Oe={})),function(t){t[t.Unnecessary=1]="Unnecessary",t[t.Deprecated=2]="Deprecated"}(Ee||(Ee={})),function(t){t[t.Inline=1]="Inline",t[t.Gutter=2]="Gutter"}(Me||(Me={})),function(t){t[t.Normal=1]="Normal",t[t.Underlined=2]="Underlined"}(Fe||(Fe={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.TEXTAREA=1]="TEXTAREA",t[t.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",t[t.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",t[t.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",t[t.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",t[t.CONTENT_TEXT=6]="CONTENT_TEXT",t[t.CONTENT_EMPTY=7]="CONTENT_EMPTY",t[t.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",t[t.CONTENT_WIDGET=9]="CONTENT_WIDGET",t[t.OVERVIEW_RULER=10]="OVERVIEW_RULER",t[t.SCROLLBAR=11]="SCROLLBAR",t[t.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",t[t.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"}(Le||(Le={})),function(t){t[t.AIGenerated=1]="AIGenerated"}(je||(je={})),function(t){t[t.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",t[t.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",t[t.TOP_CENTER=2]="TOP_CENTER"}(Re||(Re={})),function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=4]="Right",t[t.Full=7]="Full"}(Te||(Te={})),function(t){t[t.Word=0]="Word",t[t.Line=1]="Line",t[t.Suggest=2]="Suggest"}(Ie||(Ie={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.None=2]="None",t[t.LeftOfInjectedText=3]="LeftOfInjectedText",t[t.RightOfInjectedText=4]="RightOfInjectedText"}(Be||(Be={})),function(t){t[t.Off=0]="Off",t[t.On=1]="On",t[t.Relative=2]="Relative",t[t.Interval=3]="Interval",t[t.Custom=4]="Custom"}(Ne||(Ne={})),function(t){t[t.None=0]="None",t[t.Text=1]="Text",t[t.Blocks=2]="Blocks"}(Pe||(Pe={})),function(t){t[t.Smooth=0]="Smooth",t[t.Immediate=1]="Immediate"}(We||(We={})),function(t){t[t.Auto=1]="Auto",t[t.Hidden=2]="Hidden",t[t.Visible=3]="Visible"}(He||(He={})),function(t){t[t.LTR=0]="LTR",t[t.RTL=1]="RTL"}(ze||(ze={})),function(t){t.Off="off",t.OnCode="onCode",t.On="on"}(Ue||(Ue={})),function(t){t[t.Invoke=1]="Invoke",t[t.TriggerCharacter=2]="TriggerCharacter",t[t.ContentChange=3]="ContentChange"}(Ke||(Ke={})),function(t){t[t.File=0]="File",t[t.Module=1]="Module",t[t.Namespace=2]="Namespace",t[t.Package=3]="Package",t[t.Class=4]="Class",t[t.Method=5]="Method",t[t.Property=6]="Property",t[t.Field=7]="Field",t[t.Constructor=8]="Constructor",t[t.Enum=9]="Enum",t[t.Interface=10]="Interface",t[t.Function=11]="Function",t[t.Variable=12]="Variable",t[t.Constant=13]="Constant",t[t.String=14]="String",t[t.Number=15]="Number",t[t.Boolean=16]="Boolean",t[t.Array=17]="Array",t[t.Object=18]="Object",t[t.Key=19]="Key",t[t.Null=20]="Null",t[t.EnumMember=21]="EnumMember",t[t.Struct=22]="Struct",t[t.Event=23]="Event",t[t.Operator=24]="Operator",t[t.TypeParameter=25]="TypeParameter"}(Ve||(Ve={})),function(t){t[t.Deprecated=1]="Deprecated"}(qe||(qe={})),function(t){t[t.Hidden=0]="Hidden",t[t.Blink=1]="Blink",t[t.Smooth=2]="Smooth",t[t.Phase=3]="Phase",t[t.Expand=4]="Expand",t[t.Solid=5]="Solid"}(Ge||(Ge={})),function(t){t[t.Line=1]="Line",t[t.Block=2]="Block",t[t.Underline=3]="Underline",t[t.LineThin=4]="LineThin",t[t.BlockOutline=5]="BlockOutline",t[t.UnderlineThin=6]="UnderlineThin"}($e||($e={})),function(t){t[t.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",t[t.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",t[t.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",t[t.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(Je||(Je={})),function(t){t[t.None=0]="None",t[t.Same=1]="Same",t[t.Indent=2]="Indent",t[t.DeepIndent=3]="DeepIndent"}(Ze||(Ze={}));var Qe=function(){function t(){}t.chord=function(t,n){return Ui(t,n)};return t}();function Ye(){return{editor:void 0,languages:void 0,CancellationTokenSource:ji,Emitter:ki,KeyCode:Ae,KeyMod:Qe,Position:Tr,Range:Ir,Selection:Br,SelectionDirection:ze,MarkerSeverity:Oe,MarkerTag:Ee,Uri:Cr,Token:Ur}}Qe.CtrlCmd=2048,Qe.Shift=1024,Qe.Alt=512,Qe.WinCtrl=256;var Xe=window;var to=function(){function t(t){this.fn=t,this._map=new Map}Object.defineProperty(t.prototype,"cachedValues",{get:function(){return this._map},enumerable:false,configurable:true});t.prototype.get=function(t){if(this._map.has(t))return this._map.get(t);var n=this.fn(t);return this._map.set(t,n),n};return t}();var no=function(){function t(t){this.executor=t,this._didRun=!1}Object.defineProperty(t.prototype,"value",{get:function(){if(!this._didRun)try{this._value=this.executor()}catch(t){this._error=t}finally{this._didRun=!0}if(this._error)throw this._error;return this._value},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"rawValue",{get:function(){return this._value},enumerable:false,configurable:true});return t}();var io;function ro(t){return!t||typeof t!="string"||t.trim().length===0}var eo=/{(\d+)}/g;function oo(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return n.length===0?t:t.replace(eo,(function(t,i){var r=parseInt(i,10);return isNaN(r)||r<0||r>=n.length?t:n[r]}))}function so(t){return t.replace(/[<>&]/g,(function(t){switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return t}}))}function uo(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function ao(t,n){if(n===void 0){n=" "}return co(ho(t,n),n)}function ho(t,n){if(!t||!n)return t;var i=n.length;if(i===0||t.length===0)return t;var r=0;for(;t.indexOf(n,r)===r;)r+=i;return t.substring(r)}function co(t,n){if(!t||!n)return t;var i=n.length,r=t.length;if(i===0||r===0)return t;var e=r,o=-1;for(;o=t.lastIndexOf(n,e-1),o!==-1&&o+i===e;){if(o===0)return"";e=o}return t.substring(0,e)}function fo(t,n,i){if(i===void 0){i={}}if(!t)throw new Error("Cannot create regex from empty string");n||(t=uo(t)),i.wholeWord&&(/\B/.test(t.charAt(0))||(t="\\b"+t),/\B/.test(t.charAt(t.length-1))||(t+="\\b"));var r="";return i.global&&(r+="g"),i.matchCase||(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),new RegExp(t,r)}function lo(t){return t.split(/\r\n|\r|\n/)}function vo(t){for(var n=0,i=t.length;n<i;n++){var r=t.charCodeAt(n);if(r!==32&&r!==9)return n}return-1}function go(t,n,i){if(n===void 0){n=0}if(i===void 0){i=t.length}for(var r=n;r<i;r++){var e=t.charCodeAt(r);if(e!==32&&e!==9)return t.substring(n,r)}return t.substring(n,i)}function po(t,n){if(n===void 0){n=t.length-1}for(var i=n;i>=0;i--){var r=t.charCodeAt(i);if(r!==32&&r!==9)return i}return-1}function wo(t,n){return t<n?-1:t>n?1:0}function mo(t,n,i,r,e,o){if(i===void 0){i=0}if(r===void 0){r=t.length}if(e===void 0){e=0}if(o===void 0){o=n.length}for(;i<r&&e<o;i++,e++){var s=t.charCodeAt(i),u=n.charCodeAt(e);if(s<u)return-1;if(s>u)return 1}var a=r-i,h=o-e;return a<h?-1:a>h?1:0}function bo(t,n){return yo(t,n,0,t.length,0,n.length)}function yo(t,n,i,r,e,o){if(i===void 0){i=0}if(r===void 0){r=t.length}if(e===void 0){e=0}if(o===void 0){o=n.length}for(;i<r&&e<o;i++,e++){var s=t.charCodeAt(i),u=n.charCodeAt(e);if(s===u)continue;if(s>=128||u>=128)return mo(t.toLowerCase(),n.toLowerCase(),i,r,e,o);ko(s)&&(s-=32),ko(u)&&(u-=32);var a=s-u;if(a!==0)return a}var h=r-i,c=o-e;return h<c?-1:h>c?1:0}function _o(t){return t>=48&&t<=57}function ko(t){return t>=97&&t<=122}function xo(t){return t>=65&&t<=90}function Co(t,n){return t.length===n.length&&yo(t,n)===0}function So(t,n){var i=n.length;return!(n.length>t.length)&&yo(t,n,0,i)===0}function Do(t,n){var i=Math.min(t.length,n.length);var r;for(r=0;r<i;r++)if(t.charCodeAt(r)!==n.charCodeAt(r))return r;return i}function Ao(t,n){var i=Math.min(t.length,n.length);var r;var e=t.length-1,o=n.length-1;for(r=0;r<i;r++)if(t.charCodeAt(e-r)!==n.charCodeAt(o-r))return r;return i}function Oo(t){return 55296<=t&&t<=56319}function Eo(t){return 56320<=t&&t<=57343}function Mo(t,n){return n-56320+(t-55296<<10)+65536}function Fo(t,n,i){var r=t.charCodeAt(i);if(Oo(r)&&i+1<n){var e=t.charCodeAt(i+1);if(Eo(e))return Mo(r,e)}return r}var Lo=function(){function t(t,n){if(n===void 0){n=0}this._str=t,this._len=t.length,this._offset=n}Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},enumerable:false,configurable:true});t.prototype.setOffset=function(t){this._offset=t};t.prototype.prevCodePoint=function(){var t=function(t,n){var i=t.charCodeAt(n-1);if(Eo(i)&&n>1){var r=t.charCodeAt(n-2);if(Oo(r))return Mo(r,i)}return i}(this._str,this._offset);return this._offset-=t>=65536?2:1,t};t.prototype.nextCodePoint=function(){var t=Fo(this._str,this._len,this._offset);return this._offset+=t>=65536?2:1,t};t.prototype.eol=function(){return this._offset>=this._len};return t}();var jo=function(){function t(t,n){if(n===void 0){n=0}this._iterator=new Lo(t,n)}Object.defineProperty(t.prototype,"offset",{get:function(){return this._iterator.offset},enumerable:false,configurable:true});t.prototype.nextGraphemeLength=function(){var t=$o.getInstance(),n=this._iterator,i=n.offset;var r=t.getGraphemeBreakType(n.nextCodePoint());for(;!n.eol();){var e=n.offset,o=t.getGraphemeBreakType(n.nextCodePoint());if(Go(r,o)){n.setOffset(e);break}r=o}return n.offset-i};t.prototype.prevGraphemeLength=function(){var t=$o.getInstance(),n=this._iterator,i=n.offset;var r=t.getGraphemeBreakType(n.prevCodePoint());for(;n.offset>0;){var e=n.offset,o=t.getGraphemeBreakType(n.prevCodePoint());if(Go(o,r)){n.setOffset(e);break}r=o}return i-n.offset};t.prototype.eol=function(){return this._iterator.eol()};return t}();function Ro(t,n){return new jo(t,n).nextGraphemeLength()}function To(t,n){return new jo(t,n).prevGraphemeLength()}var Io;function Bo(t){return Io||(Io=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/),Io.test(t)}var No=/^[\t\n\r\x20-\x7E]*$/;function Po(t){return No.test(t)}var Wo=/[\u2028\u2029]/;function Ho(t){return Wo.test(t)}function zo(t){return t>=11904&&t<=55215||t>=63744&&t<=64255||t>=65281&&t<=65374}function Uo(t){return t>=127462&&t<=127487||t===8986||t===8987||t===9200||t===9203||t>=9728&&t<=10175||t===11088||t===11093||t>=127744&&t<=128591||t>=128640&&t<=128764||t>=128992&&t<=129008||t>=129280&&t<=129535||t>=129648&&t<=129782}var Ko="\ufeff";function Vo(t){return!!(t&&t.length>0&&t.charCodeAt(0)===65279)}function qo(t){return(t%=52)<26?String.fromCharCode(97+t):String.fromCharCode(65+t-26)}function Go(t,n){return t===0?n!==5&&n!==7:(t!==2||n!==3)&&(t===4||t===2||t===3||n===4||n===2||n===3||(t!==8||n!==8&&n!==9&&n!==11&&n!==12)&&(t!==11&&t!==9||n!==9&&n!==10)&&(t!==12&&t!==10||n!==10)&&n!==5&&n!==13&&n!==7&&t!==1&&(t!==13||n!==14)&&(t!==6||n!==6))}var $o=function(){function t(){this._data=JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}t.getInstance=function(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE};t.prototype.getGraphemeBreakType=function(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;var n=this._data,i=n.length/3;var r=1;for(;r<=i;)if(t<n[3*r])r*=2;else{if(!(t>n[3*r+1]))return n[3*r+2];r=2*r+1}return 0};return t}();function Jo(t,n){if(t===0)return 0;var i=function(t,n){var i=new Lo(n,t);var r=i.prevCodePoint();for(;Zo(r)||r===65039||r===8419;){if(i.offset===0)return;r=i.prevCodePoint()}if(!Uo(r))return;var e=i.offset;return e>0&&i.prevCodePoint()===8205&&(e=i.offset),e}(t,n);if(i!==void 0)return i;var r=new Lo(n,t);return r.prevCodePoint(),r.offset}function Zo(t){return 127995<=t&&t<=127999}$o._INSTANCE=null;var Qo=function(){function t(t){this.confusableDictionary=t}t.getInstance=function(t){return io.cache.get(Array.from(t))};t.getLocales=function(){return io._locales.value};t.prototype.isAmbiguous=function(t){return this.confusableDictionary.has(t)};t.prototype.getPrimaryConfusable=function(t){return this.confusableDictionary.get(t)};t.prototype.getConfusableCodePoints=function(){return new Set(this.confusableDictionary.keys())};return t}();io=Qo,Qo.ambiguousCharacterData=new no((function(){return JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')})),Qo.cache=new(function(){function t(t,n){if(n===void 0){n=JSON.stringify}this.fn=t,this._computeKey=n,this.lastCache=void 0,this.lastArgKey=void 0}t.prototype.get=function(t){var n=this._computeKey(t);return this.lastArgKey!==n&&(this.lastArgKey=n,this.lastCache=this.fn(t)),this.lastCache};return t}())((function(t){function n(t){var n=new Map;for(var i=0;i<t.length;i+=2)n.set(t[i],t[i+1]);return n}function i(t,n){if(!t)return n;var i=new Map;for(var r=0,e=t;r<e.length;r++){var o=e[r],s=o[0],u=o[1];n.has(s)&&i.set(s,u)}return i}var r=io.ambiguousCharacterData.value;var e,o=t.filter((function(t){return!t.startsWith("_")&&t in r}));o.length===0&&(o=["_default"]);for(var s=0,u=o;s<u.length;s++){var a=u[s];e=i(e,n(r[a]))}var h=function(t,n){var i=new Map(t);for(var r=0,e=n;r<e.length;r++){var o=e[r],s=o[0],u=o[1];i.set(s,u)}return i}(n(r._common),e);return new io(h)})),Qo._locales=new no((function(){return Object.keys(io.ambiguousCharacterData.value).filter((function(t){return!t.startsWith("_")}))}));var Yo=function(){function t(){}t.getRawData=function(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")};t.getData=function(){return this._data||(this._data=new Set(t.getRawData())),this._data};t.isInvisibleCharacter=function(n){return t.getData().has(n)};Object.defineProperty(t,"codePoints",{get:function(){return t.getData()},enumerable:false,configurable:true});return t}();Yo._data=void 0;var Xo=function(){function t(){this.mapWindowIdToZoomFactor=new Map}t.prototype.getZoomFactor=function(t){var n;return(n=this.mapWindowIdToZoomFactor.get(this.getWindowId(t)))!==null&&n!==void 0?n:1};t.prototype.getWindowId=function(t){return t.vscodeWindowId};return t}();function ts(t,n,i){typeof n=="string"&&(n=t.matchMedia(n)),n.addEventListener("change",i)}Xo.INSTANCE=new Xo;var ns=navigator.userAgent,is=ns.indexOf("Firefox")>=0,rs=ns.indexOf("AppleWebKit")>=0,es=ns.indexOf("Chrome")>=0,os=!es&&ns.indexOf("Safari")>=0,ss=!es&&!os&&rs;ns.indexOf("Electron/");var us=ns.indexOf("Android")>=0;if(typeof Xe.matchMedia=="function"){var At=Xe.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)");Xe.matchMedia("(display-mode: fullscreen)");ts(Xe,At,(function(t){var n=t.matches}))}jt||document.queryCommandSupported&&document.queryCommandSupported("copy")||navigator&&navigator.clipboard&&navigator.clipboard.writeText;var as=Xe.PointerEvent&&("ontouchstart"in Xe||navigator.maxTouchPoints>0);function hs(t,n){if(typeof t=="number"){if(t===0)return null;var i=(65535&t)>>>0,r=(4294901760&t)>>>16;return new ls(r!==0?[cs(i,n),cs(r,n)]:[cs(i,n)])}{var i=[];for(var r=0;r<t.length;r++)i.push(cs(t[r],n));return new ls(i)}}function cs(t,n){var i=!!(2048&t),r=!!(256&t);return new fs(n===2?r:i,!!(1024&t),!!(512&t),n===2?i:r,255&t)}var fs=function(){function t(t,n,i,r,e){this.ctrlKey=t,this.shiftKey=n,this.altKey=i,this.metaKey=r,this.keyCode=e}t.prototype.equals=function(n){return n instanceof t&&this.ctrlKey===n.ctrlKey&&this.shiftKey===n.shiftKey&&this.altKey===n.altKey&&this.metaKey===n.metaKey&&this.keyCode===n.keyCode};t.prototype.isModifierKey=function(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4};t.prototype.isDuplicateModifierCase=function(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57};return t}();var ls=function(){function t(t){if(t.length===0)throw Xn("chords");this.chords=t}return t}();var vs=function(){function t(t,n,i,r,e,o){this.ctrlKey=t,this.shiftKey=n,this.altKey=i,this.metaKey=r,this.keyLabel=e,this.keyAriaLabel=o}return t}();var ds=function(){function t(){}return t}();var gs=Ft?256:2048,ps=Ft?2048:256;var ws=function(){function t(t){var n;this._standardKeyboardEventBrand=!0;var i=t;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=(n=i.getModifierState)===null||n===void 0?void 0:n.call(i,"AltGraph"),this.keyCode=function(t){if(t.charCode){var n=String.fromCharCode(t.charCode).toUpperCase();return zi.fromString(n)}var i=t.keyCode;if(i===3)return 7;if(is)switch(i){case 59:return 85;case 60:if(Lt)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Ft)return 57}else if(rs&&(Ft&&i===93||!Ft&&i===92))return 57;return Ni[i]||0}(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}t.prototype.preventDefault=function(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()};t.prototype.stopPropagation=function(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()};t.prototype.toKeyCodeChord=function(){return this._asKeyCodeChord};t.prototype.equals=function(t){return this._asKeybinding===t};t.prototype._computeKeybinding=function(){var t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);var n=0;return this.ctrlKey&&(n|=gs),this.altKey&&(n|=512),this.shiftKey&&(n|=1024),this.metaKey&&(n|=ps),n|=t,n};t.prototype._computeKeyCodeChord=function(){var t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new fs(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)};return t}();var ms=new WeakMap;function bs(t){if(!t.parent||t.parent===t)return null;try{var n=t.location,i=t.parent.location;if(n.origin!=="null"&&i.origin!=="null"&&n.origin!==i.origin)return null}catch(t){return null}return t.parent}var ys=function(){function t(){}t.getSameOriginWindowChain=function(t){var n=ms.get(t);if(!n){n=[],ms.set(t,n);var i=void 0,r=t;do{i=bs(r),i?n.push({window:new WeakRef(r),iframeElement:r.frameElement||null}):n.push({window:new WeakRef(r),iframeElement:null}),r=i}while(r)}return n.slice(0)};t.getPositionOfChildWindowRelativeToAncestorWindow=function(t,n){var i,r;if(!n||t===n)return{top:0,left:0};var e=0,o=0;var s=this.getSameOriginWindowChain(t);for(var u=0,a=s;u<a.length;u++){var h=a[u];var c=h.window.deref();if(e+=(i=c==null?void 0:c.scrollY)!==null&&i!==void 0?i:0,o+=(r=c==null?void 0:c.scrollX)!==null&&r!==void 0?r:0,c===n||!h.iframeElement)break;var f=h.iframeElement.getBoundingClientRect();e+=f.top,o+=f.left}return{top:e,left:o}};return t}();var _s=function(){function t(t,n){this.timestamp=Date.now(),this.browserEvent=n,this.leftButton=n.button===0,this.middleButton=n.button===1,this.rightButton=n.button===2,this.buttons=n.buttons,this.target=n.target,this.detail=n.detail||1,n.type==="dblclick"&&(this.detail=2),this.ctrlKey=n.ctrlKey,this.shiftKey=n.shiftKey,this.altKey=n.altKey,this.metaKey=n.metaKey,typeof n.pageX=="number"?(this.posx=n.pageX,this.posy=n.pageY):(this.posx=n.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=n.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);var i=ys.getPositionOfChildWindowRelativeToAncestorWindow(t,n.view);this.posx-=i.left,this.posy-=i.top}t.prototype.preventDefault=function(){this.browserEvent.preventDefault()};t.prototype.stopPropagation=function(){this.browserEvent.stopPropagation()};return t}();var ks=function(){function t(t,n,i){if(n===void 0){n=0}if(i===void 0){i=0}var r;this.browserEvent=t||null,this.target=t?t.target||t.targetNode||t.srcElement:null,this.deltaY=i,this.deltaX=n;var e=!1;if(es){var o=navigator.userAgent.match(/Chrome\/(\d+)/);e=(o?parseInt(o[1]):123)<=122}if(t){var o=t,s=t,u=((r=t.view)===null||r===void 0?void 0:r.devicePixelRatio)||1;if(o.wheelDeltaY!==void 0)this.deltaY=e?o.wheelDeltaY/(120*u):o.wheelDeltaY/120;else if(s.VERTICAL_AXIS!==void 0&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(t.type==="wheel"){var a=t;a.deltaMode===a.DOM_DELTA_LINE?this.deltaY=is&&!Ft?-t.deltaY/3:-t.deltaY:this.deltaY=-t.deltaY/40}if(o.wheelDeltaX!==void 0)this.deltaX=os&&Mt?-o.wheelDeltaX/120:e?o.wheelDeltaX/(120*u):o.wheelDeltaX/120;else if(s.HORIZONTAL_AXIS!==void 0&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-t.detail/3;else if(t.type==="wheel"){var a=t;a.deltaMode===a.DOM_DELTA_LINE?this.deltaX=is&&!Ft?-t.deltaX/3:-t.deltaX:this.deltaX=-t.deltaX/40}this.deltaY===0&&this.deltaX===0&&t.wheelDelta&&(this.deltaY=e?t.wheelDelta/(120*u):t.wheelDelta/120)}}t.prototype.preventDefault=function(){var t;(t=this.browserEvent)===null||t===void 0||t.preventDefault()};t.prototype.stopPropagation=function(){var t;(t=this.browserEvent)===null||t===void 0||t.stopPropagation()};return t}();var xs=Symbol("MicrotaskDelay");function Cs(t){return!!t&&typeof t.then=="function"}function Ss(t){var n=new ji,i=t(n.token),r=new Promise((function(t,r){var e=n.token.onCancellationRequested((function(){e.dispose(),r(new Yn)}));Promise.resolve(i).then((function(i){e.dispose(),n.dispose(),t(i)}),(function(t){e.dispose(),n.dispose(),r(t)}))}));return new(function(){function t(){}t.prototype.cancel=function(){n.cancel(),n.dispose()};t.prototype.then=function(t,n){return r.then(t,n)};t.prototype.catch=function(t){return this.then(void 0,t)};t.prototype.finally=function(t){return r.finally(t)};return t}())}function Ds(t,n,i){return new Promise((function(r,e){var o=n.onCancellationRequested((function(){o.dispose(),r(i)}));t.then(r,e).finally((function(){return o.dispose()}))}))}var As=function(){function t(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}t.prototype.queue=function(t){var n=this;if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=t,!this.queuedPromise){var i=function(){if(n.queuedPromise=null,n.isDisposed)return;var t=n.queue(n.queuedPromiseFactory);return n.queuedPromiseFactory=null,t};this.queuedPromise=new Promise((function(t){n.activePromise.then(i,i).then(t)}))}return new Promise((function(t,i){n.queuedPromise.then(t,i)}))}return this.activePromise=t(),new Promise((function(t,i){n.activePromise.then((function(i){n.activePromise=null,t(i)}),(function(t){n.activePromise=null,i(t)}))}))};t.prototype.dispose=function(){this.isDisposed=!0};return t}();var Os=function(){function t(t){this.defaultDelay=t,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}t.prototype.trigger=function(t,n){var i=this;if(n===void 0){n=this.defaultDelay}this.task=t,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((function(t,n){i.doResolve=t,i.doReject=n})).then((function(){if(i.completionPromise=null,i.doResolve=null,i.task){var t=i.task;return i.task=null,t()}})));var r=function(){var t;i.deferred=null,(t=i.doResolve)===null||t===void 0||t.call(i,null)};return this.deferred=n===xs?function(t){var n=!0;return queueMicrotask((function(){n&&(n=!1,t())})),{isTriggered:function(){return n},dispose:function(){n=!1}}}(r):function(t,n){var i=!0;var r=setTimeout((function(){i=!1,n()}),t);return{isTriggered:function(){return i},dispose:function(){clearTimeout(r),i=!1}}}(n,r),this.completionPromise};t.prototype.isTriggered=function(){var t;return!!(!((t=this.deferred)===null||t===void 0)&&t.isTriggered())};t.prototype.cancel=function(){var t;this.cancelTimeout(),this.completionPromise&&((t=this.doReject)===null||t===void 0||t.call(this,new Yn),this.completionPromise=null)};t.prototype.cancelTimeout=function(){var t;(t=this.deferred)===null||t===void 0||t.dispose(),this.deferred=null};t.prototype.dispose=function(){this.cancel()};return t}();var Es=function(){function t(t){this.delayer=new Os(t),this.throttler=new As}t.prototype.trigger=function(t,n){var i=this;return this.delayer.trigger((function(){return i.throttler.queue(t)}),n)};t.prototype.cancel=function(){this.delayer.cancel()};t.prototype.dispose=function(){this.delayer.dispose(),this.throttler.dispose()};return t}();function Ms(t,n){return n?new Promise((function(i,r){var e=setTimeout((function(){o.dispose(),i()}),t),o=n.onCancellationRequested((function(){clearTimeout(e),o.dispose(),r(new Yn)}))})):Ss((function(n){return Ms(t,n)}))}function Fs(t,n,i){if(n===void 0){n=0}var r=setTimeout((function(){t(),i&&e.dispose()}),n),e=ai((function(){clearTimeout(r),i==null||i.deleteAndLeak(e)}));return i==null||i.add(e),e}function Ls(t,n,i){if(n===void 0){n=function(t){return!!t}}if(i===void 0){i=null}var r=0;var e=t.length,o=function(){if(r>=e)return Promise.resolve(i);var s=t[r++];return Promise.resolve(s()).then((function(t){return n(t)?Promise.resolve(t):o()}))};return o()}var js=function(){function t(t,n){this._token=-1,typeof t=="function"&&typeof n=="number"&&this.setIfNotSet(t,n)}t.prototype.dispose=function(){this.cancel()};t.prototype.cancel=function(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)};t.prototype.cancelAndSet=function(t,n){var i=this;this.cancel(),this._token=setTimeout((function(){i._token=-1,t()}),n)};t.prototype.setIfNotSet=function(t,n){var i=this;this._token===-1&&(this._token=setTimeout((function(){i._token=-1,t()}),n))};return t}();var Rs=function(){function t(){this.disposable=void 0}t.prototype.cancel=function(){var t;(t=this.disposable)===null||t===void 0||t.dispose(),this.disposable=void 0};t.prototype.cancelAndSet=function(t,n,i){var r=this;if(i===void 0){i=globalThis}this.cancel();var e=i.setInterval((function(){t()}),n);this.disposable=ai((function(){i.clearInterval(e),r.disposable=void 0}))};t.prototype.dispose=function(){this.cancel()};return t}();var Ts=function(){function t(t,n){this.timeoutToken=-1,this.runner=t,this.timeout=n,this.timeoutHandler=this.onTimeout.bind(this)}t.prototype.dispose=function(){this.cancel(),this.runner=null};t.prototype.cancel=function(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)};t.prototype.schedule=function(t){if(t===void 0){t=this.timeout}this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,t)};Object.defineProperty(t.prototype,"delay",{get:function(){return this.timeout},set:function(t){this.timeout=t},enumerable:false,configurable:true});t.prototype.isScheduled=function(){return this.timeoutToken!==-1};t.prototype.onTimeout=function(){this.timeoutToken=-1,this.runner&&this.doRun()};t.prototype.doRun=function(){var t;(t=this.runner)===null||t===void 0||t.call(this)};return t}();var Is,Bs;Bs=typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?function(t,n){Ht((function(){if(i)return;var t=Date.now()+15;n(Object.freeze({didTimeout:!0,timeRemaining:function(){return Math.max(0,t-Date.now())}}))}));var i=!1;return{dispose:function(){i||(i=!0)}}}:function(t,n,i){var r=t.requestIdleCallback(n,typeof i=="number"?{timeout:i}:void 0);var e=!1;return{dispose:function(){e||(e=!0,t.cancelIdleCallback(r))}}},Is=function(t){return Bs(globalThis,t)};var Ns=function(){function t(t,n){var i=this;this._didRun=!1,this._executor=function(){try{i._value=n()}catch(t){i._error=t}finally{i._didRun=!0}},this._handle=Bs(t,(function(){return i._executor()}))}t.prototype.dispose=function(){this._handle.dispose()};Object.defineProperty(t.prototype,"value",{get:function(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isInitialized",{get:function(){return this._didRun},enumerable:false,configurable:true});return t}();var Ps=function(t){__extends(n,t);function n(n){return t.call(this,globalThis,n)||this}return n}(Ns);var Ws=function(){function t(){var t=this;this.p=new Promise((function(n,i){t.completeCallback=n,t.errorCallback=i}))}Object.defineProperty(t.prototype,"isRejected",{get:function(){var t;return((t=this.outcome)===null||t===void 0?void 0:t.outcome)===1},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isSettled",{get:function(){return!!this.outcome},enumerable:false,configurable:true});t.prototype.complete=function(t){var n=this;return new Promise((function(i){n.completeCallback(t),n.outcome={outcome:0,value:t},i()}))};t.prototype.error=function(t){var n=this;return new Promise((function(i){n.errorCallback(t),n.outcome={outcome:1,value:t},i()}))};t.prototype.cancel=function(){return this.error(new Yn)};return t}();var Hs;(function(t){t.settled=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(r){switch(r.label){case 0:return[4,Promise.all(t.map((function(t){return t.then((function(t){return t}),(function(t){n||(n=t)}))})))];case 1:i=r.sent();if(n!==void 0)throw n;return[2,i]}}))}))},t.withAsyncBody=function(t){var n=this;return new Promise((function(i,r){return __awaiter(n,void 0,void 0,(function(){var n;return __generator(this,(function(e){switch(e.label){case 0:e.trys.push([0,2,,3]);return[4,t(i,r)];case 1:e.sent();return[3,3];case 2:n=e.sent();r(n);return[3,3];case 3:return[2]}}))}))}))}})(Hs||(Hs={}));var zs=function(){function t(t){var n=this;this._state=0,this._results=[],this._error=null,this._onStateChanged=new ki,queueMicrotask((function(){return __awaiter(n,void 0,void 0,(function(){var n,i;var r=this;return __generator(this,(function(e){switch(e.label){case 0:n={emitOne:function(t){return r.emitOne(t)},emitMany:function(t){return r.emitMany(t)},reject:function(t){return r.reject(t)}};e.label=1;case 1:e.trys.push([1,3,4,5]);return[4,Promise.resolve(t(n))];case 2:e.sent(),this.resolve();return[3,5];case 3:i=e.sent();this.reject(i);return[3,5];case 4:n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0;return[7];case 5:return[2]}}))}))}))}t.fromArray=function(n){return new t((function(t){t.emitMany(n)}))};t.fromPromise=function(n){var i=this;return new t((function(t){return __awaiter(i,void 0,void 0,(function(){var i,r;return __generator(this,(function(e){switch(e.label){case 0:r=(i=t).emitMany;return[4,n];case 1:r.apply(i,[e.sent()]);return[2]}}))}))}))};t.fromPromises=function(n){var i=this;return new t((function(t){return __awaiter(i,void 0,void 0,(function(){var i=this;return __generator(this,(function(r){switch(r.label){case 0:return[4,Promise.all(n.map((function(n){return __awaiter(i,void 0,void 0,(function(){var i,r;return __generator(this,(function(e){switch(e.label){case 0:r=(i=t).emitOne;return[4,n];case 1:return[2,r.apply(i,[e.sent()])]}}))}))})))];case 1:r.sent();return[2]}}))}))}))};t.merge=function(n){var i=this;return new t((function(t){return __awaiter(i,void 0,void 0,(function(){var i=this;return __generator(this,(function(r){switch(r.label){case 0:return[4,Promise.all(n.map((function(n){return __awaiter(i,void 0,void 0,(function(){var i,r;var e,o,s;var u,a,h,c;return __generator(this,(function(f){switch(f.label){case 0:f.trys.push([0,5,6,11]);e=true,o=__asyncValues(n);f.label=1;case 1:return[4,o.next()];case 2:if(!(s=f.sent(),u=s.done,!u))return[3,4];c=s.value;e=false;i=c;t.emitOne(i);f.label=3;case 3:e=true;return[3,1];case 4:return[3,11];case 5:r=f.sent();a={error:r};return[3,11];case 6:f.trys.push([6,,9,10]);if(!(!e&&!u&&(h=o.return)))return[3,8];return[4,h.call(o)];case 7:f.sent();f.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return[2]}}))}))})))];case 1:r.sent();return[2]}}))}))}))};t.prototype[Symbol.asyncIterator]=function(){var t=this;var n=0;return{next:function(){return __awaiter(t,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:if(this._state===2)throw this._error;if(n<this._results.length)return[2,{done:!1,value:this._results[n++]}];if(this._state===1)return[2,{done:!0,value:void 0}];return[4,wi.toPromise(this._onStateChanged.event)];case 1:t.sent();t.label=2;case 2:return[3,0];case 3:return[2]}}))}))}}};t.map=function(n,i){var r=this;return new t((function(t){return __awaiter(r,void 0,void 0,(function(){var r,e,o,s,u;var a,h,c,f;return __generator(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]);r=true,e=__asyncValues(n);l.label=1;case 1:return[4,e.next()];case 2:if(!(o=l.sent(),a=o.done,!a))return[3,4];f=o.value;r=false;s=f;t.emitOne(i(s));l.label=3;case 3:r=true;return[3,1];case 4:return[3,11];case 5:u=l.sent();h={error:u};return[3,11];case 6:l.trys.push([6,,9,10]);if(!(!r&&!a&&(c=e.return)))return[3,8];return[4,c.call(e)];case 7:l.sent();l.label=8;case 8:return[3,10];case 9:if(h)throw h.error;return[7];case 10:return[7];case 11:return[2]}}))}))}))};t.prototype.map=function(n){return t.map(this,n)};t.filter=function(n,i){var r=this;return new t((function(t){return __awaiter(r,void 0,void 0,(function(){var r,e,o,s,u;var a,h,c,f;return __generator(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]);r=true,e=__asyncValues(n);l.label=1;case 1:return[4,e.next()];case 2:if(!(o=l.sent(),a=o.done,!a))return[3,4];f=o.value;r=false;s=f;i(s)&&t.emitOne(s);l.label=3;case 3:r=true;return[3,1];case 4:return[3,11];case 5:u=l.sent();h={error:u};return[3,11];case 6:l.trys.push([6,,9,10]);if(!(!r&&!a&&(c=e.return)))return[3,8];return[4,c.call(e)];case 7:l.sent();l.label=8;case 8:return[3,10];case 9:if(h)throw h.error;return[7];case 10:return[7];case 11:return[2]}}))}))}))};t.prototype.filter=function(n){return t.filter(this,n)};t.coalesce=function(n){return t.filter(n,(function(t){return!!t}))};t.prototype.coalesce=function(){return t.coalesce(this)};t.toPromise=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r;var e,o,s,u,a,h,c;return __generator(this,(function(f){switch(f.label){case 0:n=[];f.label=1;case 1:f.trys.push([1,6,7,12]);a=true,h=__asyncValues(t);f.label=2;case 2:return[4,h.next()];case 3:if(!(c=f.sent(),e=c.done,!e))return[3,5];u=c.value;a=false;i=u;n.push(i);f.label=4;case 4:a=true;return[3,2];case 5:return[3,12];case 6:r=f.sent();o={error:r};return[3,12];case 7:f.trys.push([7,,10,11]);if(!(!a&&!e&&(s=h.return)))return[3,9];return[4,s.call(h)];case 8:f.sent();f.label=9;case 9:return[3,11];case 10:if(o)throw o.error;return[7];case 11:return[7];case 12:return[2,n]}}))}))};t.prototype.toPromise=function(){return t.toPromise(this)};t.prototype.emitOne=function(t){this._state===0&&(this._results.push(t),this._onStateChanged.fire())};t.prototype.emitMany=function(t){this._state===0&&(this._results=this._results.concat(t),this._onStateChanged.fire())};t.prototype.resolve=function(){this._state===0&&(this._state=1,this._onStateChanged.fire())};t.prototype.reject=function(t){this._state===0&&(this._state=2,this._error=t,this._onStateChanged.fire())};return t}();zs.EMPTY=zs.fromArray([]);var Us=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r._source=n;return r}n.prototype.cancel=function(){this._source.cancel()};return n}(zs);var Ks=Object.entries,Vs=Object.setPrototypeOf,qs=Object.isFrozen,Gs=Object.getPrototypeOf,$s=Object.getOwnPropertyDescriptor;var Js=Object.freeze,Zs=Object.seal,Qs=Object.create,Ys=typeof Reflect<"u"&&Reflect,Xs=Ys.apply,tu=Ys.construct;Xs||(Xs=function(t,n,i){return t.apply(n,i)}),Js||(Js=function(t){return t}),Zs||(Zs=function(t){return t}),tu||(tu=function(t,n){return new(t.bind.apply(t,__spreadArray([void 0],n,false)))});var nu=vu(Array.prototype.forEach),iu=vu(Array.prototype.pop),ru=vu(Array.prototype.push),eu=vu(String.prototype.toLowerCase),ou=vu(String.prototype.toString),su=vu(String.prototype.match),uu=vu(String.prototype.replace),au=vu(String.prototype.indexOf),hu=vu(String.prototype.trim),cu=vu(RegExp.prototype.test),fu=(lu=TypeError,function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return tu(lu,n)});var lu;function vu(t){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),e=1;e<i;e++)r[e-1]=arguments[e];return Xs(t,n,r)}}function du(t,n,i){var r;i=(r=i)!==null&&r!==void 0?r:eu,Vs&&Vs(t,null);var e=n.length;for(;e--;){var o=n[e];if(typeof o=="string"){var s=i(o);s!==o&&(qs(n)||(n[e]=s),o=s)}t[o]=!0}return t}function gu(t){var n=Qs(null);for(var i=0,r=Ks(t);i<r.length;i++){var e=r[i],o=e[0],s=e[1];n[o]=s}return n}function pu(t,n){for(;t!==null;){var i=$s(t,n);if(i){if(i.get)return vu(i.get);if(typeof i.value=="function")return vu(i.value)}t=Gs(t)}return function(t){return console.warn("fallback value for",t),null}}var wu=Js(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mu=Js(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),bu=Js(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yu=Js(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_u=Js(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ku=Js(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xu=Js(["#text"]),Cu=Js(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Su=Js(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Du=Js(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Au=Js(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ou=Zs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Eu=Zs(/<%[\w\W]*|[\w\W]*%>/gm),Mu=Zs(/\${[\w\W]*}/gm),Fu=Zs(/^data-[\-\w.\u00B7-\uFFFF]/),Lu=Zs(/^aria-[\-\w]+$/),ju=Zs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ru=Zs(/^(?:\w+script|data):/i),Tu=Zs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Iu=Zs(/^html$/i);var Bu=Object.freeze({__proto__:null,MUSTACHE_EXPR:Ou,ERB_EXPR:Eu,TMPLIT_EXPR:Mu,DATA_ATTR:Fu,ARIA_ATTR:Lu,IS_ALLOWED_URI:ju,IS_SCRIPT_OR_DATA:Ru,ATTR_WHITESPACE:Tu,DOCTYPE_NAME:Iu});var Nu=function(){return typeof window>"u"?null:window};var Pu=function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nu();var i=function(n){return t(n)};if(i.version="3.0.5",i.removed=[],!n||!n.document||n.document.nodeType!==9)return i.isSupported=!1,i;var r=n.document,e=r.currentScript;var o=n.document;var s=n.DocumentFragment,u=n.HTMLTemplateElement,a=n.Node,h=n.Element,c=n.NodeFilter,f=n.NamedNodeMap,l=f===void 0?n.NamedNodeMap||n.MozNamedAttrMap:f,v=n.HTMLFormElement,d=n.DOMParser,g=n.trustedTypes,p=h.prototype,w=pu(p,"cloneNode"),m=pu(p,"nextSibling"),b=pu(p,"childNodes"),y=pu(p,"parentNode");if(typeof u=="function"){var _=o.createElement("template");_.content&&_.content.ownerDocument&&(o=_.content.ownerDocument)}var k,x="";var C=o.implementation,S=o.createNodeIterator,D=o.createDocumentFragment,A=o.getElementsByTagName,O=r.importNode;var E={};i.isSupported=typeof Ks=="function"&&typeof y=="function"&&C&&C.createHTMLDocument!==void 0;var M=Bu.MUSTACHE_EXPR,F=Bu.ERB_EXPR,L=Bu.TMPLIT_EXPR,j=Bu.DATA_ATTR,R=Bu.ARIA_ATTR,T=Bu.IS_SCRIPT_OR_DATA,I=Bu.ATTR_WHITESPACE;var B=Bu.IS_ALLOWED_URI,N=null;var P=du({},__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],wu,true),mu,true),bu,true),_u,true),xu,true));var W=null;var H=du({},__spreadArray(__spreadArray(__spreadArray(__spreadArray([],Cu,true),Su,true),Du,true),Au,true));var z=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,K=null,V=!0,q=!0,G=!1,$=!0,J=!1,Z=!1,Q=!1,Y=!1,X=!1,tt=!1,nt=!1,it=!0,rt=!1,et=!0,ot=!1,st={},ut=null;var at=du({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);var ht=null;var ct=du({},["audio","video","img","source","image","track"]);var ft=null;var lt=du({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",dt="http://www.w3.org/2000/svg",gt="http://www.w3.org/1999/xhtml";var pt=gt,wt=!1,mt=null;var bt=du({},[vt,dt,gt],ou);var yt;var _t=["application/xhtml+xml","text/html"];var kt,xt=null;var Ct=o.createElement("form"),St=function(t){return t instanceof RegExp||t instanceof Function},Dt=function(t){if(!xt||xt!==t){if(t&&typeof t=="object"||(t={}),t=gu(t),yt=yt=_t.indexOf(t.PARSER_MEDIA_TYPE)===-1?"text/html":t.PARSER_MEDIA_TYPE,kt=yt==="application/xhtml+xml"?ou:eu,N="ALLOWED_TAGS"in t?du({},t.ALLOWED_TAGS,kt):P,W="ALLOWED_ATTR"in t?du({},t.ALLOWED_ATTR,kt):H,mt="ALLOWED_NAMESPACES"in t?du({},t.ALLOWED_NAMESPACES,ou):bt,ft="ADD_URI_SAFE_ATTR"in t?du(gu(lt),t.ADD_URI_SAFE_ATTR,kt):lt,ht="ADD_DATA_URI_TAGS"in t?du(gu(ct),t.ADD_DATA_URI_TAGS,kt):ct,ut="FORBID_CONTENTS"in t?du({},t.FORBID_CONTENTS,kt):at,U="FORBID_TAGS"in t?du({},t.FORBID_TAGS,kt):{},K="FORBID_ATTR"in t?du({},t.FORBID_ATTR,kt):{},st="USE_PROFILES"in t&&t.USE_PROFILES,V=t.ALLOW_ARIA_ATTR!==!1,q=t.ALLOW_DATA_ATTR!==!1,G=t.ALLOW_UNKNOWN_PROTOCOLS||!1,$=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,J=t.SAFE_FOR_TEMPLATES||!1,Z=t.WHOLE_DOCUMENT||!1,X=t.RETURN_DOM||!1,tt=t.RETURN_DOM_FRAGMENT||!1,nt=t.RETURN_TRUSTED_TYPE||!1,Y=t.FORCE_BODY||!1,it=t.SANITIZE_DOM!==!1,rt=t.SANITIZE_NAMED_PROPS||!1,et=t.KEEP_CONTENT!==!1,ot=t.IN_PLACE||!1,B=t.ALLOWED_URI_REGEXP||ju,pt=t.NAMESPACE||gt,z=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&St(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&St(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(z.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(q=!1),tt&&(X=!0),st&&(N=du({},__spreadArray([],xu,true)),W=[],st.html===!0&&(du(N,wu),du(W,Cu)),st.svg===!0&&(du(N,mu),du(W,Su),du(W,Au)),st.svgFilters===!0&&(du(N,bu),du(W,Su),du(W,Au)),st.mathMl===!0&&(du(N,_u),du(W,Du),du(W,Au))),t.ADD_TAGS&&(N===P&&(N=gu(N)),du(N,t.ADD_TAGS,kt)),t.ADD_ATTR&&(W===H&&(W=gu(W)),du(W,t.ADD_ATTR,kt)),t.ADD_URI_SAFE_ATTR&&du(ft,t.ADD_URI_SAFE_ATTR,kt),t.FORBID_CONTENTS&&(ut===at&&(ut=gu(ut)),du(ut,t.FORBID_CONTENTS,kt)),et&&(N["#text"]=!0),Z&&du(N,["html","head","body"]),N.table&&(du(N,["tbody"]),delete U.tbody),t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!="function")throw fu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw fu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');k=t.TRUSTED_TYPES_POLICY,x=k.createHTML("")}else k===void 0&&(k=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;var i=null;var r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(i=n.getAttribute(r));var e="dompurify"+(i?"#"+i:"");try{return t.createPolicy(e,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+e+" could not be created."),null}}(g,e)),k!==null&&typeof x=="string"&&(x=k.createHTML(""));Js&&Js(t),xt=t}},At=du({},["mi","mo","mn","ms","mtext"]),Ot=du({},["foreignobject","desc","title","annotation-xml"]),Et=du({},["title","style","font","a","script"]),Mt=du({},mu);du(Mt,bu),du(Mt,yu);var Ft=du({},_u);du(Ft,ku);var Lt=function(t){ru(i.removed,{element:t});try{t.parentNode.removeChild(t)}catch(n){t.remove()}},jt=function(t,n){try{ru(i.removed,{attribute:n.getAttributeNode(t),from:n})}catch(t){ru(i.removed,{attribute:null,from:n})}if(n.removeAttribute(t),t==="is"&&!W[t])if(X||tt)try{Lt(n)}catch(t){}else try{n.setAttribute(t,"")}catch(t){}},Rt=function(t){var n,i;if(Y)t="<remove></remove>"+t;else{var r=su(t,/^[\r\n\t ]+/);i=r&&r[0]}yt==="application/xhtml+xml"&&pt===gt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var e=k?k.createHTML(t):t;if(pt===gt)try{n=(new d).parseFromString(e,yt)}catch(t){}if(!n||!n.documentElement){n=C.createDocument(pt,"template",null);try{n.documentElement.innerHTML=wt?x:e}catch(t){}}var s=n.body||n.documentElement;return t&&i&&s.insertBefore(o.createTextNode(i),s.childNodes[0]||null),pt===gt?A.call(n,Z?"html":"body")[0]:Z?n.documentElement:s},Tt=function(t){return S.call(t.ownerDocument||t,t,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},It=function(t){return typeof a=="object"?t instanceof a:t&&typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string"},Bt=function(t,n,r){E[t]&&nu(E[t],(function(t){t.call(i,n,r,xt)}))},Nt=function(t){var n;if(Bt("beforeSanitizeElements",t,null),(r=t)instanceof v&&(typeof r.nodeName!="string"||typeof r.textContent!="string"||typeof r.removeChild!="function"||!(r.attributes instanceof l)||typeof r.removeAttribute!="function"||typeof r.setAttribute!="function"||typeof r.namespaceURI!="string"||typeof r.insertBefore!="function"||typeof r.hasChildNodes!="function"))return Lt(t),!0;var r;var e=kt(t.nodeName);if(Bt("uponSanitizeElement",t,{tagName:e,allowedTags:N}),t.hasChildNodes()&&!It(t.firstElementChild)&&(!It(t.content)||!It(t.content.firstElementChild))&&cu(/<[/\w]/g,t.innerHTML)&&cu(/<[/\w]/g,t.textContent))return Lt(t),!0;if(!N[e]||U[e]){if(!U[e]&&Wt(e)&&(z.tagNameCheck instanceof RegExp&&cu(z.tagNameCheck,e)||z.tagNameCheck instanceof Function&&z.tagNameCheck(e)))return!1;if(et&&!ut[e]){var o=y(t)||t.parentNode,s=b(t)||t.childNodes;if(s&&o)for(var u=s.length-1;u>=0;--u)o.insertBefore(w(s[u],!0),m(t))}return Lt(t),!0}return t instanceof h&&!function(t){var n=y(t);n&&n.tagName||(n={namespaceURI:pt,tagName:"template"});var i=eu(t.tagName),r=eu(n.tagName);return!!mt[t.namespaceURI]&&(t.namespaceURI===dt?n.namespaceURI===gt?i==="svg":n.namespaceURI===vt?i==="svg"&&(r==="annotation-xml"||At[r]):!!Mt[i]:t.namespaceURI===vt?n.namespaceURI===gt?i==="math":n.namespaceURI===dt?i==="math"&&Ot[r]:!!Ft[i]:t.namespaceURI===gt?!(n.namespaceURI===dt&&!Ot[r])&&!(n.namespaceURI===vt&&!At[r])&&!Ft[i]&&(Et[i]||!Mt[i]):!(yt!=="application/xhtml+xml"||!mt[t.namespaceURI]))}(t)?(Lt(t),!0):e!=="noscript"&&e!=="noembed"&&e!=="noframes"||!cu(/<\/no(script|embed|frames)/i,t.innerHTML)?(J&&t.nodeType===3&&(n=t.textContent,n=uu(n,M," "),n=uu(n,F," "),n=uu(n,L," "),t.textContent!==n&&(ru(i.removed,{element:t.cloneNode()}),t.textContent=n)),Bt("afterSanitizeElements",t,null),!1):(Lt(t),!0)},Pt=function(t,n,i){if(it&&(n==="id"||n==="name")&&(i in o||i in Ct))return!1;if(!(q&&!K[n]&&cu(j,n))){if(!(V&&cu(R,n))){if(!W[n]||K[n]){if(!(Wt(t)&&(z.tagNameCheck instanceof RegExp&&cu(z.tagNameCheck,t)||z.tagNameCheck instanceof Function&&z.tagNameCheck(t))&&(z.attributeNameCheck instanceof RegExp&&cu(z.attributeNameCheck,n)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(n))||n==="is"&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&cu(z.tagNameCheck,i)||z.tagNameCheck instanceof Function&&z.tagNameCheck(i))))return!1}else if(!ft[n]){if(!cu(B,uu(i,I,""))){if((n!=="src"&&n!=="xlink:href"&&n!=="href"||t==="script"||au(i,"data:")!==0||!ht[t])&&!(G&&!cu(T,uu(i,I,"")))){if(i)return!1}}}}}return!0},Wt=function(t){return t.indexOf("-")>0},Ht=function(t){var n,r,e,o;Bt("beforeSanitizeAttributes",t,null);var s=t.attributes;if(!s)return;var u={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W};for(o=s.length;o--;){n=s[o];var a=n.name,h=n.namespaceURI;if(r=a==="value"?n.value:hu(n.value),e=kt(a),u.attrName=e,u.attrValue=r,u.keepAttr=!0,u.forceKeepAttr=void 0,Bt("uponSanitizeAttribute",t,u),r=u.attrValue,u.forceKeepAttr||(jt(a,t),!u.keepAttr))continue;if(!$&&cu(/\/>/i,r)){jt(a,t);continue}J&&(r=uu(r,M," "),r=uu(r,F," "),r=uu(r,L," "));var c=kt(t.nodeName);if(Pt(c,e,r)){if(!rt||e!=="id"&&e!=="name"||(jt(a,t),r="user-content-"+r),k&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!h)switch(g.getAttributeType(c,e)){case"TrustedHTML":r=k.createHTML(r);break;case"TrustedScriptURL":r=k.createScriptURL(r)}try{h?t.setAttributeNS(h,a,r):t.setAttribute(a,r),iu(i.removed)}catch(t){}}}Bt("afterSanitizeAttributes",t,null)},zt=function t(n){var i;var r=Tt(n);for(Bt("beforeSanitizeShadowDOM",n,null);i=r.nextNode();)Bt("uponSanitizeShadowNode",i,null),Nt(i)||(i.content instanceof s&&t(i.content),Ht(i));Bt("afterSanitizeShadowDOM",n,null)};return i.sanitize=function(t){var n,e,o,u,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(wt=!t,wt&&(t="\x3c!--\x3e"),typeof t!="string"&&!It(t)){if(typeof t.toString!="function")throw fu("toString is not a function");if(typeof(t=t.toString())!="string")throw fu("dirty is not a string, aborting")}if(!i.isSupported)return t;if(Q||Dt(h),i.removed=[],typeof t=="string"&&(ot=!1),ot){if(t.nodeName){var c=kt(t.nodeName);if(!N[c]||U[c])throw fu("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof a)n=Rt("\x3c!----\x3e"),e=n.ownerDocument.importNode(t,!0),e.nodeType===1&&e.nodeName==="BODY"||e.nodeName==="HTML"?n=e:n.appendChild(e);else{if(!X&&!J&&!Z&&t.indexOf("<")===-1)return k&&nt?k.createHTML(t):t;if(n=Rt(t),!n)return X?null:nt?x:""}n&&Y&&Lt(n.firstChild);var f=Tt(ot?t:n);for(;o=f.nextNode();)Nt(o)||(o.content instanceof s&&zt(o.content),Ht(o));if(ot)return t;if(X){if(tt)for(u=D.call(n.ownerDocument);n.firstChild;)u.appendChild(n.firstChild);else u=n;return(W.shadowroot||W.shadowrootmode)&&(u=O.call(r,u,!0)),u}var l=Z?n.outerHTML:n.innerHTML;return Z&&N["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&cu(Iu,n.ownerDocument.doctype.name)&&(l="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+l),J&&(l=uu(l,M," "),l=uu(l,F," "),l=uu(l,L," ")),k&&nt?k.createHTML(l):l},i.setConfig=function(t){Dt(t),Q=!0},i.clearConfig=function(){xt=null,Q=!1},i.isValidAttribute=function(t,n,i){xt||Dt({});var r=kt(t),e=kt(n);return Pt(r,e,i)},i.addHook=function(t,n){typeof n=="function"&&(E[t]=E[t]||[],ru(E[t],n))},i.removeHook=function(t){if(E[t])return iu(E[t])},i.removeHooks=function(t){E[t]&&(E[t]=[])},i.removeAllHooks=function(){E={}},i}();var Wu=Pu.sanitize;var Hu=Pu.addHook,zu=Pu.removeHook;var Uu;function Ku(t,n){return Cr.isUri(t)?Co(t.scheme,n):So(t,n+":")}function Vu(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return n.some((function(n){return Ku(t,n)}))}(function(t){t.inMemory="inmemory",t.vscode="vscode",t.internal="private",t.walkThrough="walkThrough",t.walkThroughSnippet="walkThroughSnippet",t.http="http",t.https="https",t.file="file",t.mailto="mailto",t.untitled="untitled",t.data="data",t.command="command",t.vscodeRemote="vscode-remote",t.vscodeRemoteResource="vscode-remote-resource",t.vscodeManagedRemoteResource="vscode-managed-remote-resource",t.vscodeUserData="vscode-userdata",t.vscodeCustomEditor="vscode-custom-editor",t.vscodeNotebookCell="vscode-notebook-cell",t.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",t.vscodeNotebookCellOutput="vscode-notebook-cell-output",t.vscodeInteractiveInput="vscode-interactive-input",t.vscodeSettings="vscode-settings",t.vscodeWorkspaceTrust="vscode-workspace-trust",t.vscodeTerminal="vscode-terminal",t.vscodeChatCodeBlock="vscode-chat-code-block",t.vscodeChatSesssion="vscode-chat-editor",t.webviewPanel="webview-panel",t.vscodeWebview="vscode-webview",t.extension="extension",t.vscodeFileResource="vscode-file",t.tmp="tmp",t.vsls="vsls",t.vscodeSourceControl="vscode-scm",t.codeSetting="code-setting"})(Uu||(Uu={}));var qu=new(function(){function t(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}t.prototype.setPreferredWebSchema=function(t){this._preferredWebSchema=t};Object.defineProperty(t.prototype,"_remoteResourcesPath",{get:function(){return cr.join(this._serverRootPath,Uu.vscodeRemoteResource)},enumerable:false,configurable:true});t.prototype.rewrite=function(t){if(this._delegate)try{return this._delegate(t)}catch(n){return Gn(n),t}var n=t.authority;var i=this._hosts[n];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i="[".concat(i,"]"));var r=this._ports[n],e=this._connectionTokens[n];var o="path=".concat(encodeURIComponent(t.path));return typeof e=="string"&&(o+="&tkn=".concat(encodeURIComponent(e))),Cr.from({scheme:Rt?this._preferredWebSchema:Uu.vscodeRemoteResource,authority:"".concat(i,":").concat(r),path:this._remoteResourcesPath,query:o})};return t}());var Gu=function(){function t(){}t.prototype.uriToBrowserUri=function(n){return n.scheme===Uu.vscodeRemote?qu.rewrite(n):n.scheme!==Uu.file||!jt&&Tt!=="".concat(Uu.vscodeFileResource,"://").concat(t.FALLBACK_AUTHORITY)?n:n.with({scheme:Uu.vscodeFileResource,authority:n.authority||t.FALLBACK_AUTHORITY,query:null,fragment:null})};return t}();Gu.FALLBACK_AUTHORITY="vscode-app";var $u=new Gu;var Ju;function Zu(t){return Qu(t,0)}function Qu(t,n){switch(typeof t){case"object":return t===null?Yu(349,n):Array.isArray(t)?(i=t,r=Yu(104579,r=n),i.reduce((function(t,n){return Qu(n,t)}),r)):function(t,n){return n=Yu(181387,n),Object.keys(t).sort().reduce((function(n,i){return n=Xu(i,n),Qu(t[i],n)}),n)}(t,n);case"string":return Xu(t,n);case"boolean":return function(t,n){return Yu(t?433:863,n)}(t,n);case"number":return Yu(t,n);case"undefined":return Yu(937,n);default:return Yu(617,n)}var i,r}function Yu(t,n){return(n<<5)-n+t|0}function Xu(t,n){n=Yu(149417,n);for(var i=0,r=t.length;i<r;i++)n=Yu(t.charCodeAt(i),n);return n}function ta(t,n,i){if(i===void 0){i=32}var r=i-n;return(t<<n|(~((1<<r)-1)&t)>>>r)>>>0}function na(t,n,i,r){if(n===void 0){n=0}if(i===void 0){i=t.byteLength}if(r===void 0){r=0}for(var e=0;e<i;e++)t[n+e]=r}function ia(t,n){if(n===void 0){n=32}return t instanceof ArrayBuffer?Array.from(new Uint8Array(t)).map((function(t){return t.toString(16).padStart(2,"0")})).join(""):function(t,n,i){if(i===void 0){i="0"}for(;t.length<n;)t=i+t;return t}((t>>>0).toString(16),n/4)}(function(t){var n=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);t.CoopAndCoep=Object.freeze(n.get("3"));var i="vscode-coi";t.getHeadersFromQuery=function(t){var r;typeof t=="string"?r=new URL(t).searchParams:t instanceof URL?r=t.searchParams:Cr.isUri(t)&&(r=new URL(t.toString(!0)).searchParams);var e=r==null?void 0:r.get(i);if(e)return n.get(e)},t.addSearchParam=function(t,n,r){if(!globalThis.crossOriginIsolated)return;var e=n&&r?"3":r?"2":"1";t instanceof URLSearchParams?t.set(i,e):t[i]=e}})(Ju||(Ju={}));var ra=function(){function t(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}t.prototype.update=function(t){var n=t.length;if(n===0)return;var i=this._buff;var r,e,o=this._buffLen,s=this._leftoverHighSurrogate;for(s!==0?(r=s,e=-1,s=0):(r=t.charCodeAt(0),e=0);;){var u=r;if(Oo(r)){if(!(e+1<n)){s=r;break}{var a=t.charCodeAt(e+1);Eo(a)?(e++,u=Mo(r,a)):u=65533}}else Eo(r)&&(u=65533);if(o=this._push(i,o,u),e++,!(e<n))break;r=t.charCodeAt(e)}this._buffLen=o,this._leftoverHighSurrogate=s};t.prototype._push=function(t,n,i){return i<128?t[n++]=i:i<2048?(t[n++]=192|(1984&i)>>>6,t[n++]=128|(63&i)>>>0):i<65536?(t[n++]=224|(61440&i)>>>12,t[n++]=128|(4032&i)>>>6,t[n++]=128|(63&i)>>>0):(t[n++]=240|(1835008&i)>>>18,t[n++]=128|(258048&i)>>>12,t[n++]=128|(4032&i)>>>6,t[n++]=128|(63&i)>>>0),n>=64&&(this._step(),n-=64,this._totalLen+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),n};t.prototype.digest=function(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),ia(this._h0)+ia(this._h1)+ia(this._h2)+ia(this._h3)+ia(this._h4)};t.prototype._wrapUp=function(){this._buff[this._buffLen++]=128,na(this._buff,this._buffLen),this._buffLen>56&&(this._step(),na(this._buff));var t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()};t.prototype._step=function(){var n=t._bigBlock32,i=this._buffDV;for(var r=0;r<64;r+=4)n.setUint32(r,i.getUint32(r,!1),!1);for(var r=64;r<320;r+=4)n.setUint32(r,ta(n.getUint32(r-12,!1)^n.getUint32(r-32,!1)^n.getUint32(r-56,!1)^n.getUint32(r-64,!1),1),!1);var e,o,s,u=this._h0,a=this._h1,h=this._h2,c=this._h3,f=this._h4;for(var r=0;r<80;r++)r<20?(e=a&h|~a&c,o=1518500249):r<40?(e=a^h^c,o=1859775393):r<60?(e=a&h|a&c|h&c,o=2400959708):(e=a^h^c,o=3395469782),s=ta(u,5)+e+f+o+n.getUint32(4*r,!1)&4294967295,f=c,c=h,h=ta(a,30),a=u,u=s;this._h0=this._h0+u&4294967295,this._h1=this._h1+a&4294967295,this._h2=this._h2+h&4294967295,this._h3=this._h3+c&4294967295,this._h4=this._h4+f&4294967295};return t}();ra._bigBlock32=new DataView(new ArrayBuffer(320));var ea=function(){var t=new Map;(function(t,n){var i=t;typeof i.vscodeWindowId!="number"&&Object.defineProperty(i,"vscodeWindowId",{get:function(){return n}})})(Xe,1);var n={window:Xe,disposables:new hi};t.set(Xe.vscodeWindowId,n);var i=new ki,r=new ki,e=new ki;return{onDidRegisterWindow:i.event,onWillUnregisterWindow:e.event,onDidUnregisterWindow:r.event,registerWindow:function(n){if(t.has(n.vscodeWindowId))return ci.None;var o=new hi,s={window:n,disposables:o.add(new hi)};return t.set(n.vscodeWindowId,s),o.add(ai((function(){t.delete(n.vscodeWindowId),r.fire(n)}))),o.add(ma(n,ah.BEFORE_UNLOAD,(function(){e.fire(n)}))),i.fire(s),o},getWindows:function(){return t.values()},getWindowsCount:function(){return t.size},getWindowId:function(t){return t.vscodeWindowId},hasWindow:function(n){return t.has(n)},getWindowById:function(i,r){var e=typeof i=="number"?t.get(i):void 0;return e!==null&&e!==void 0?e:r?n:void 0},getWindow:function(t){var n;var i=t;if(!((n=i==null?void 0:i.ownerDocument)===null||n===void 0)&&n.defaultView)return i.ownerDocument.defaultView.window;var r=t;return r!=null&&r.view?r.view.window:Xe},getDocument:function(t){return sa(t).document}}}(),oa=ea.registerWindow,sa=ea.getWindow,ua=ea.getDocument,aa=ea.getWindows,ha=ea.getWindowsCount,ca=ea.getWindowId,fa=ea.getWindowById,la=ea.hasWindow,va=ea.onDidRegisterWindow,da=ea.onWillUnregisterWindow,ga=ea.onDidUnregisterWindow;function pa(t){for(;t.firstChild;)t.firstChild.remove()}var wa=function(){function t(t,n,i,r){this._node=t,this._type=n,this._handler=i,this._options=r||!1,this._node.addEventListener(this._type,this._handler,this._options)}t.prototype.dispose=function(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)};return t}();function ma(t,n,i,r){return new wa(t,n,i,r)}function ba(t,n){return function(i){return n(new _s(t,i))}}var ya=function(t,n,i,r){var e=i;return n==="click"||n==="mousedown"?e=ba(sa(t),i):n!=="keydown"&&n!=="keypress"&&n!=="keyup"||(e=function(t){return function(n){return t(new ws(n))}}(i)),ma(t,n,e,r)},_a=function(t,n,i){return function(t,n,i){return ma(t,It&&as?ah.POINTER_DOWN:ah.MOUSE_DOWN,n,i)}(t,ba(sa(t),n),i)};function ka(t,n,i){return Bs(t,n,i)}var xa=function(t){__extends(n,t);function n(n,i){return t.call(this,n,i)||this}return n}(Ns);var Ca,Sa;var Da=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.defaultTarget=n&&sa(n);return i}n.prototype.cancelAndSet=function(n,i,r){return t.prototype.cancelAndSet.call(this,n,i,r!==null&&r!==void 0?r:this.defaultTarget)};return n}(Rs);var Aa=function(){function t(t,n){if(n===void 0){n=0}this._runner=t,this.priority=n,this._canceled=!1}t.prototype.dispose=function(){this._canceled=!0};t.prototype.execute=function(){if(!this._canceled)try{this._runner()}catch(t){Gn(t)}};t.sort=function(t,n){return n.priority-t.priority};return t}();function Oa(t){return sa(t).getComputedStyle(t,null)}function Ea(t,n){var i=sa(t),r=i.document;if(t!==r.body)return new Fa(t.clientWidth,t.clientHeight);if(It&&(i!=null&&i.visualViewport))return new Fa(i.visualViewport.width,i.visualViewport.height);if(i!=null&&i.innerWidth&&i.innerHeight)return new Fa(i.innerWidth,i.innerHeight);if(r.body&&r.body.clientWidth&&r.body.clientHeight)return new Fa(r.body.clientWidth,r.body.clientHeight);if(r.documentElement&&r.documentElement.clientWidth&&r.documentElement.clientHeight)return new Fa(r.documentElement.clientWidth,r.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}(function(){var t=new Map,n=new Map,i=new Map,r=new Map;Sa=function(e,o,s){if(s===void 0){s=0}var u=ca(e),a=new Aa(o,s);var h=t.get(u);return h||(h=[],t.set(u,h)),h.push(a),i.get(u)||(i.set(u,!0),e.requestAnimationFrame((function(){return function(e){var o;i.set(e,!1);var s=(o=t.get(e))!==null&&o!==void 0?o:[];for(n.set(e,s),t.set(e,[]),r.set(e,!0);s.length>0;)s.sort(Aa.sort),s.shift().execute();r.set(e,!1)}(u)}))),a},Ca=function(t,i,e){var o=ca(t);if(r.get(o)){var s=new Aa(i,e);var u=n.get(o);return u||(u=[],n.set(o,u)),u.push(s),s}return Sa(t,i,e)}})();var Ma=function(){function t(){}t.convertToPixels=function(t,n){return parseFloat(n)||0};t.getDimension=function(n,i,r){var e=Oa(n),o=e?e.getPropertyValue(i):"0";return t.convertToPixels(n,o)};t.getBorderLeftWidth=function(n){return t.getDimension(n,"border-left-width","borderLeftWidth")};t.getBorderRightWidth=function(n){return t.getDimension(n,"border-right-width","borderRightWidth")};t.getBorderTopWidth=function(n){return t.getDimension(n,"border-top-width","borderTopWidth")};t.getBorderBottomWidth=function(n){return t.getDimension(n,"border-bottom-width","borderBottomWidth")};t.getPaddingLeft=function(n){return t.getDimension(n,"padding-left","paddingLeft")};t.getPaddingRight=function(n){return t.getDimension(n,"padding-right","paddingRight")};t.getPaddingTop=function(n){return t.getDimension(n,"padding-top","paddingTop")};t.getPaddingBottom=function(n){return t.getDimension(n,"padding-bottom","paddingBottom")};t.getMarginLeft=function(n){return t.getDimension(n,"margin-left","marginLeft")};t.getMarginTop=function(n){return t.getDimension(n,"margin-top","marginTop")};t.getMarginRight=function(n){return t.getDimension(n,"margin-right","marginRight")};t.getMarginBottom=function(n){return t.getDimension(n,"margin-bottom","marginBottom")};return t}();var Fa=function(){function t(t,n){this.width=t,this.height=n}t.prototype.with=function(n,i){if(n===void 0){n=this.width}if(i===void 0){i=this.height}return n!==this.width||i!==this.height?new t(n,i):this};t.is=function(t){return typeof t=="object"&&typeof t.height=="number"&&typeof t.width=="number"};t.lift=function(n){return n instanceof t?n:new t(n.width,n.height)};t.equals=function(t,n){return t===n||!(!t||!n)&&t.width===n.width&&t.height===n.height};return t}();function La(t){var n=t.offsetParent,i=t.offsetTop,r=t.offsetLeft;for(;(t=t.parentNode)!==null&&t!==t.ownerDocument.body&&t!==t.ownerDocument.documentElement;){i-=t.scrollTop;var e=Ha(t)?null:Oa(t);e&&(r-=e.direction!=="rtl"?t.scrollLeft:-t.scrollLeft),t===n&&(r+=Ma.getBorderLeftWidth(t),i+=Ma.getBorderTopWidth(t),i+=t.offsetTop,r+=t.offsetLeft,n=t.offsetParent)}return{left:r,top:i}}function ja(t){var n=t.getBoundingClientRect(),i=sa(t);return{left:n.left+i.scrollX,top:n.top+i.scrollY,width:n.width,height:n.height}}function Ra(t){var n=t,i=1;do{var r=Oa(n).zoom;r!=null&&r!=="1"&&(i*=r),n=n.parentElement}while(n!==null&&n!==n.ownerDocument.documentElement);return i}function Ta(t){var n=Ma.getMarginLeft(t)+Ma.getMarginRight(t);return t.offsetWidth+n}function Ia(t){var n=Ma.getBorderLeftWidth(t)+Ma.getBorderRightWidth(t),i=Ma.getPaddingLeft(t)+Ma.getPaddingRight(t);return t.offsetWidth-n-i}function Ba(t){var n=Ma.getBorderTopWidth(t)+Ma.getBorderBottomWidth(t),i=Ma.getPaddingTop(t)+Ma.getPaddingBottom(t);return t.offsetHeight-n-i}function Na(t){var n=Ma.getMarginTop(t)+Ma.getMarginBottom(t);return t.offsetHeight+n}function Pa(t,n){return!!(n!=null&&n.contains(t))}function Wa(t,n,i){return!!function(t,n,i){for(;t&&t.nodeType===t.ELEMENT_NODE;){if(t.classList.contains(n))return t;if(i){if(typeof i=="string"){if(t.classList.contains(i))return null}else if(t===i)return null}t=t.parentNode}return null}(t,n,i)}function Ha(t){return t&&!!t.host&&!!t.mode}function za(t){return!!Ua(t)}function Ua(t){for(var n;t.parentNode;){if(t===((n=t.ownerDocument)===null||n===void 0?void 0:n.body))return null;t=t.parentNode}return Ha(t)?t:null}function Ka(){var t=Ga().activeElement;for(;t!=null&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function Va(t){return Ka()===t}function qa(t){return Pa(Ka(),t)}function Ga(){var t;return ha()<=1?Xe.document:(t=Array.from(aa()).map((function(t){var n=t.window;return n.document})).find((function(t){return t.hasFocus()})))!==null&&t!==void 0?t:Xe.document}Fa.None=new Fa(0,0);var $a=new Map;function Ja(){return new Za}var Za=function(){function t(){this._currentCssStyle="",this._styleSheet=void 0}t.prototype.setStyle=function(t){t!==this._currentCssStyle&&(this._currentCssStyle=t,this._styleSheet?this._styleSheet.innerText=t:this._styleSheet=Qa(Xe.document.head,(function(n){return n.innerText=t})))};t.prototype.dispose=function(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)};return t}();function Qa(t,n,i){if(t===void 0){t=Xe.document.head}var r=document.createElement("style");if(r.type="text/css",r.media="screen",n==null||n(r),t.appendChild(r),i&&i.add(ai((function(){return t.removeChild(r)}))),t===Xe.document.head){var e=new Set;$a.set(r,e);for(var o=0,s=aa();o<s.length;o++){var u=s[o],a=u.window,h=u.disposables;if(a===Xe)continue;var c=h.add(Ya(r,e,a));i==null||i.add(c)}}return r}function Ya(t,n,i){var r,e;var o=new hi,s=t.cloneNode(!0);i.document.head.appendChild(s),o.add(ai((function(){return i.document.head.removeChild(s)})));for(var u=0,a=ih(t);u<a.length;u++){var h=a[u];(r=s.sheet)===null||r===void 0||r.insertRule(h.cssText,(e=s.sheet)===null||e===void 0?void 0:e.cssRules.length)}return o.add(Xa.observe(t,o,{childList:!0})((function(){s.textContent=t.textContent}))),n.add(s),o.add(ai((function(){return n.delete(s)}))),o}var Xa=new(function(){function t(){this.mutationObservers=new Map}t.prototype.observe=function(t,n,i){var r=this;var e=this.mutationObservers.get(t);e||(e=new Map,this.mutationObservers.set(t,e));var o=Zu(i);var s=e.get(o);if(s)s.users+=1;else{var u=new ki,a=new MutationObserver((function(t){return u.fire(t)}));a.observe(t,i);var h=s={users:1,observer:a,onDidMutate:u.event};n.add(ai((function(){h.users-=1,h.users===0&&(u.dispose(),a.disconnect(),e==null||e.delete(o),(e==null?void 0:e.size)===0&&r.mutationObservers.delete(t))}))),e.set(o,s)}return s.onDidMutate};return t}());var th=null;function nh(){return th||(th=Qa()),th}function ih(t){var n,i;return!((n=t==null?void 0:t.sheet)===null||n===void 0)&&n.rules?t.sheet.rules:!((i=t==null?void 0:t.sheet)===null||i===void 0)&&i.cssRules?t.sheet.cssRules:[]}function rh(t,n,i){if(i===void 0){i=nh()}var r,e;if(i&&n){(r=i.sheet)===null||r===void 0||r.insertRule("".concat(t," {").concat(n,"}"),0);for(var o=0,s=(e=$a.get(i))!==null&&e!==void 0?e:[];o<s.length;o++){var u=s[o];rh(t,n,u)}}}function eh(t,n){if(n===void 0){n=nh()}var i,r;if(!n)return;var e=ih(n),o=[];for(var s=0;s<e.length;s++){var u=e[s];oh(u)&&u.selectorText.indexOf(t)!==-1&&o.push(s)}for(var s=o.length-1;s>=0;s--)(i=n.sheet)===null||i===void 0||i.deleteRule(o[s]);for(var a=0,h=(r=$a.get(n))!==null&&r!==void 0?r:[];a<h.length;a++){var s=h[a];eh(t,s)}}function oh(t){return typeof t.selectorText=="string"}function sh(t){return t instanceof MouseEvent||t instanceof sa(t).MouseEvent}function uh(t){return t instanceof KeyboardEvent||t instanceof sa(t).KeyboardEvent}var ah={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:rs?"webkitAnimationStart":"animationstart",ANIMATION_END:rs?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:rs?"webkitAnimationIteration":"animationiteration"};function hh(t){var n=t;return!(!n||typeof n.preventDefault!="function"||typeof n.stopPropagation!="function")}var ch=function(t,n){return t.preventDefault(),n&&t.stopPropagation(),t};var fh=function(t){__extends(n,t);function n(i){var r=this;r=t.call(this)||this,r._onDidFocus=r._register(new ki),r.onDidFocus=r._onDidFocus.event,r._onDidBlur=r._register(new ki),r.onDidBlur=r._onDidBlur.event;var e=n.hasFocusWithin(i),o=!1;var s=function(){o=!1,e||(e=!0,r._onDidFocus.fire())},u=function(){e&&(o=!0,(i instanceof HTMLElement?sa(i):i).setTimeout((function(){o&&(o=!1,e=!1,r._onDidBlur.fire())}),0))};r._refreshStateHandler=function(){n.hasFocusWithin(i)!==e&&(e?u():s())},r._register(ma(i,ah.FOCUS,s,!0)),r._register(ma(i,ah.BLUR,u,!0)),i instanceof HTMLElement&&(r._register(ma(i,ah.FOCUS_IN,(function(){return r._refreshStateHandler()}))),r._register(ma(i,ah.FOCUS_OUT,(function(){return r._refreshStateHandler()}))));return r}n.hasFocusWithin=function(t){if(t instanceof HTMLElement){var n=Ua(t);return Pa(n?n.activeElement:t.ownerDocument.activeElement,t)}{var n=t;return Pa(n.document.activeElement,n.document)}};return n}(ci);function lh(t){return new fh(t)}function vh(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}if(t.append.apply(t,n),n.length===1&&typeof n[0]!="string")return n[0]}function dh(t,n){return t.insertBefore(n,t.firstChild),n}function gh(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}t.innerText="",vh.apply(void 0,__spreadArray([t],n,false))}var ph=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var wh;function mh(t,n,i){var r=[];for(var e=3;e<arguments.length;e++){r[e-3]=arguments[e]}var o=ph.exec(n);if(!o)throw new Error("Bad use of emmet");var s=o[1]||"div";var u;return u=t!==wh.HTML?document.createElementNS(t,s):document.createElement(s),o[3]&&(u.id=o[3]),o[4]&&(u.className=o[4].replace(/\./g," ").trim()),i&&Object.entries(i).forEach((function(t){var n=t[0],i=t[1];i!==void 0&&(/^on\w+$/.test(n)?u[n]=i:n==="selected"?i&&u.setAttribute(n,"true"):u.setAttribute(n,i))})),u.append.apply(u,r),u}function bh(t,n){var i=[];for(var r=2;r<arguments.length;r++){i[r-2]=arguments[r]}return mh.apply(void 0,__spreadArray([wh.HTML,t,n],i,false))}function yh(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}for(var i=0,r=t;i<r.length;i++){var e=r[i];e.style.display="",e.removeAttribute("aria-hidden")}}function _h(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}for(var i=0,r=t;i<r.length;i++){var e=r[i];e.style.display="none",e.setAttribute("aria-hidden","true")}}function kh(t,n){var i=t.devicePixelRatio*n;return Math.max(1,Math.floor(i))/t.devicePixelRatio}function xh(t){Xe.open(t,"_blank","noopener")}function Ch(t){return t?"url('".concat($u.uriToBrowserUri(t).toString(!0).replace(/'/g,"%27"),"')"):"url('')"}function Sh(t){return"'".concat(t.replace(/'/g,"%27"),"'")}function Dh(t,n){if(t!==void 0){var i=t.match(/^\s*var\((.+)\)$/);if(i){var r=i[1].split(",",2);return r.length===2&&(n=Dh(r[1].trim(),n)),"var(".concat(r[0],", ").concat(n,")")}return t}return n}(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.SVG="http://www.w3.org/2000/svg"})(wh||(wh={})),bh.SVG=function(t,n){var i=[];for(var r=2;r<arguments.length;r++){i[r-2]=arguments[r]}return mh.apply(void 0,__spreadArray([wh.SVG,t,n],i,false))},qu.setPreferredWebSchema(/^https:/.test(Xe.location.href)?"https":"http");var Ah=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);var Oh=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n._subscriptions=new hi,n._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},n._subscriptions.add(wi.runAndSubscribe(va,(function(t){var i=t.window,r=t.disposables;return n.registerListeners(i,r)}),{window:Xe,disposables:n._subscriptions}));return n}n.prototype.registerListeners=function(t,n){var i=this;n.add(ma(t,"keydown",(function(t){if(t.defaultPrevented)return;var n=new ws(t);if(n.keyCode!==6||!t.repeat){if(t.altKey&&!i._keyStatus.altKey)i._keyStatus.lastKeyPressed="alt";else if(t.ctrlKey&&!i._keyStatus.ctrlKey)i._keyStatus.lastKeyPressed="ctrl";else if(t.metaKey&&!i._keyStatus.metaKey)i._keyStatus.lastKeyPressed="meta";else if(t.shiftKey&&!i._keyStatus.shiftKey)i._keyStatus.lastKeyPressed="shift";else{if(n.keyCode===6)return;i._keyStatus.lastKeyPressed=void 0}i._keyStatus.altKey=t.altKey,i._keyStatus.ctrlKey=t.ctrlKey,i._keyStatus.metaKey=t.metaKey,i._keyStatus.shiftKey=t.shiftKey,i._keyStatus.lastKeyPressed&&(i._keyStatus.event=t,i.fire(i._keyStatus))}}),!0)),n.add(ma(t,"keyup",(function(t){t.defaultPrevented||(!t.altKey&&i._keyStatus.altKey?i._keyStatus.lastKeyReleased="alt":!t.ctrlKey&&i._keyStatus.ctrlKey?i._keyStatus.lastKeyReleased="ctrl":!t.metaKey&&i._keyStatus.metaKey?i._keyStatus.lastKeyReleased="meta":!t.shiftKey&&i._keyStatus.shiftKey?i._keyStatus.lastKeyReleased="shift":i._keyStatus.lastKeyReleased=void 0,i._keyStatus.lastKeyPressed!==i._keyStatus.lastKeyReleased&&(i._keyStatus.lastKeyPressed=void 0),i._keyStatus.altKey=t.altKey,i._keyStatus.ctrlKey=t.ctrlKey,i._keyStatus.metaKey=t.metaKey,i._keyStatus.shiftKey=t.shiftKey,i._keyStatus.lastKeyReleased&&(i._keyStatus.event=t,i.fire(i._keyStatus)))}),!0)),n.add(ma(t.document.body,"mousedown",(function(){i._keyStatus.lastKeyPressed=void 0}),!0)),n.add(ma(t.document.body,"mouseup",(function(){i._keyStatus.lastKeyPressed=void 0}),!0)),n.add(ma(t.document.body,"mousemove",(function(t){t.buttons&&(i._keyStatus.lastKeyPressed=void 0)}),!0)),n.add(ma(t,"blur",(function(){i.resetKeyStatus()})))};Object.defineProperty(n.prototype,"keyStatus",{get:function(){return this._keyStatus},enumerable:false,configurable:true});n.prototype.resetKeyStatus=function(){this.doResetKeyStatus(),this.fire(this._keyStatus)};n.prototype.doResetKeyStatus=function(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}};n.getInstance=function(){return n.instance||(n.instance=new n),n.instance};n.prototype.dispose=function(){t.prototype.dispose.call(this),this._subscriptions.dispose()};return n}(ki);var Eh=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.element=n,r.callbacks=i,r.counter=0,r.dragStartTime=0,r.registerListeners();return r}n.prototype.registerListeners=function(){var t=this;this.callbacks.onDragStart&&this._register(ma(this.element,ah.DRAG_START,(function(n){var i,r;(r=(i=t.callbacks).onDragStart)===null||r===void 0||r.call(i,n)}))),this.callbacks.onDrag&&this._register(ma(this.element,ah.DRAG,(function(n){var i,r;(r=(i=t.callbacks).onDrag)===null||r===void 0||r.call(i,n)}))),this._register(ma(this.element,ah.DRAG_ENTER,(function(n){var i,r;t.counter++,t.dragStartTime=n.timeStamp,(r=(i=t.callbacks).onDragEnter)===null||r===void 0||r.call(i,n)}))),this._register(ma(this.element,ah.DRAG_OVER,(function(n){var i,r;n.preventDefault(),(r=(i=t.callbacks).onDragOver)===null||r===void 0||r.call(i,n,n.timeStamp-t.dragStartTime)}))),this._register(ma(this.element,ah.DRAG_LEAVE,(function(n){var i,r;t.counter--,t.counter===0&&(t.dragStartTime=0,(r=(i=t.callbacks).onDragLeave)===null||r===void 0||r.call(i,n))}))),this._register(ma(this.element,ah.DRAG_END,(function(n){var i,r;t.counter=0,t.dragStartTime=0,(r=(i=t.callbacks).onDragEnd)===null||r===void 0||r.call(i,n)}))),this._register(ma(this.element,ah.DROP,(function(n){var i,r;t.counter=0,t.dragStartTime=0,(r=(i=t.callbacks).onDrop)===null||r===void 0||r.call(i,n)})))};return n}(ci);var Mh=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Fh(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r,e;Array.isArray(n[0])?(r={},e=n[0]):(r=n[0]||{},e=n[1]);var o=Mh.exec(t);if(!o||!o.groups)throw new Error("Bad use of h");var s=o.groups.tag||"div",u=document.createElement(s);o.groups.id&&(u.id=o.groups.id);var a=[];if(o.groups.class)for(var h=0,c=o.groups.class.split(".");h<c.length;h++){var f=c[h];f!==""&&a.push(f)}if(r.className!==void 0)for(var l=0,v=r.className.split(".");l<v.length;l++){var f=v[l];f!==""&&a.push(f)}a.length>0&&(u.className=a.join(" "));var d={};if(o.groups.name&&(d[o.groups.name]=u),e)for(var g=0,p=e;g<p.length;g++){var f=p[g];f instanceof HTMLElement?u.appendChild(f):typeof f=="string"?u.append(f):"root"in f&&(Object.assign(d,f),u.appendChild(f.root))}for(var w=0,m=Object.entries(r);w<m.length;w++){var b=m[w],f=b[0],y=b[1];if(f!=="className")if(f==="style")for(var _=0,k=Object.entries(y);_<k.length;_++){var x=k[_],C=x[0],S=x[1];u.style.setProperty(Lh(C),typeof S=="number"?S+"px":""+S)}else f==="tabIndex"?u.tabIndex=y:u.setAttribute(Lh(f),y.toString())}return d.root=u,d}function Lh(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var jh=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._onDidChange=i._register(new ki),i.onDidChange=i._onDidChange.event,i._listener=function(){return i._handleChange(n,!0)},i._mediaQueryList=null,i._handleChange(n,!1);return i}n.prototype._handleChange=function(t,n){var i;(i=this._mediaQueryList)===null||i===void 0||i.removeEventListener("change",this._listener),this._mediaQueryList=t.matchMedia("(resolution: ".concat(t.devicePixelRatio,"dppx)")),this._mediaQueryList.addEventListener("change",this._listener),n&&this._onDidChange.fire()};return n}(ci);var Rh=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._onDidChange=i._register(new ki),i.onDidChange=i._onDidChange.event,i._value=i._getPixelRatio(n);var r=i._register(new jh(n));i._register(r.onDidChange((function(){i._value=i._getPixelRatio(n),i._onDidChange.fire(i._value)})));return i}Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:false,configurable:true});n.prototype._getPixelRatio=function(t){var n=document.createElement("canvas").getContext("2d");return(t.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)};return n}(ci);var Th=new(function(){function t(){this.mapWindowIdToPixelRatioMonitor=new Map}t.prototype._getOrCreatePixelRatioMonitor=function(t){var n=this;var i=ca(t);var r=this.mapWindowIdToPixelRatioMonitor.get(i);return r||(r=new Rh(t),this.mapWindowIdToPixelRatioMonitor.set(i,r),wi.once(ga)((function(t){var e=t.vscodeWindowId;e===i&&(r==null||r.dispose(),n.mapWindowIdToPixelRatioMonitor.delete(i))}))),r};t.prototype.getInstance=function(t){return this._getOrCreatePixelRatioMonitor(t)};return t}());var Ih=function(){function t(t){this.domNode=t,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}t.prototype.setMaxWidth=function(t){var n=Bh(t);this._maxWidth!==n&&(this._maxWidth=n,this.domNode.style.maxWidth=this._maxWidth)};t.prototype.setWidth=function(t){var n=Bh(t);this._width!==n&&(this._width=n,this.domNode.style.width=this._width)};t.prototype.setHeight=function(t){var n=Bh(t);this._height!==n&&(this._height=n,this.domNode.style.height=this._height)};t.prototype.setTop=function(t){var n=Bh(t);this._top!==n&&(this._top=n,this.domNode.style.top=this._top)};t.prototype.setLeft=function(t){var n=Bh(t);this._left!==n&&(this._left=n,this.domNode.style.left=this._left)};t.prototype.setBottom=function(t){var n=Bh(t);this._bottom!==n&&(this._bottom=n,this.domNode.style.bottom=this._bottom)};t.prototype.setRight=function(t){var n=Bh(t);this._right!==n&&(this._right=n,this.domNode.style.right=this._right)};t.prototype.setPaddingLeft=function(t){var n=Bh(t);this._paddingLeft!==n&&(this._paddingLeft=n,this.domNode.style.paddingLeft=this._paddingLeft)};t.prototype.setFontFamily=function(t){this._fontFamily!==t&&(this._fontFamily=t,this.domNode.style.fontFamily=this._fontFamily)};t.prototype.setFontWeight=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.domNode.style.fontWeight=this._fontWeight)};t.prototype.setFontSize=function(t){var n=Bh(t);this._fontSize!==n&&(this._fontSize=n,this.domNode.style.fontSize=this._fontSize)};t.prototype.setFontStyle=function(t){this._fontStyle!==t&&(this._fontStyle=t,this.domNode.style.fontStyle=this._fontStyle)};t.prototype.setFontFeatureSettings=function(t){this._fontFeatureSettings!==t&&(this._fontFeatureSettings=t,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)};t.prototype.setFontVariationSettings=function(t){this._fontVariationSettings!==t&&(this._fontVariationSettings=t,this.domNode.style.fontVariationSettings=this._fontVariationSettings)};t.prototype.setTextDecoration=function(t){this._textDecoration!==t&&(this._textDecoration=t,this.domNode.style.textDecoration=this._textDecoration)};t.prototype.setLineHeight=function(t){var n=Bh(t);this._lineHeight!==n&&(this._lineHeight=n,this.domNode.style.lineHeight=this._lineHeight)};t.prototype.setLetterSpacing=function(t){var n=Bh(t);this._letterSpacing!==n&&(this._letterSpacing=n,this.domNode.style.letterSpacing=this._letterSpacing)};t.prototype.setClassName=function(t){this._className!==t&&(this._className=t,this.domNode.className=this._className)};t.prototype.toggleClassName=function(t,n){this.domNode.classList.toggle(t,n),this._className=this.domNode.className};t.prototype.setDisplay=function(t){this._display!==t&&(this._display=t,this.domNode.style.display=this._display)};t.prototype.setPosition=function(t){this._position!==t&&(this._position=t,this.domNode.style.position=this._position)};t.prototype.setVisibility=function(t){this._visibility!==t&&(this._visibility=t,this.domNode.style.visibility=this._visibility)};t.prototype.setColor=function(t){this._color!==t&&(this._color=t,this.domNode.style.color=this._color)};t.prototype.setBackgroundColor=function(t){this._backgroundColor!==t&&(this._backgroundColor=t,this.domNode.style.backgroundColor=this._backgroundColor)};t.prototype.setLayerHinting=function(t){this._layerHint!==t&&(this._layerHint=t,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")};t.prototype.setBoxShadow=function(t){this._boxShadow!==t&&(this._boxShadow=t,this.domNode.style.boxShadow=t)};t.prototype.setContain=function(t){this._contain!==t&&(this._contain=t,this.domNode.style.contain=this._contain)};t.prototype.setAttribute=function(t,n){this.domNode.setAttribute(t,n)};t.prototype.removeAttribute=function(t){this.domNode.removeAttribute(t)};t.prototype.appendChild=function(t){this.domNode.appendChild(t.domNode)};t.prototype.removeChild=function(t){this.domNode.removeChild(t.domNode)};return t}();function Bh(t){return typeof t=="number"?"".concat(t,"px"):t}function Nh(t){return new Ih(t)}function Ph(t,n){t instanceof Ih?(t.setFontFamily(n.getMassagedFontFamily()),t.setFontWeight(n.fontWeight),t.setFontSize(n.fontSize),t.setFontFeatureSettings(n.fontFeatureSettings),t.setFontVariationSettings(n.fontVariationSettings),t.setLineHeight(n.lineHeight),t.setLetterSpacing(n.letterSpacing)):(t.style.fontFamily=n.getMassagedFontFamily(),t.style.fontWeight=n.fontWeight,t.style.fontSize=n.fontSize+"px",t.style.fontFeatureSettings=n.fontFeatureSettings,t.style.fontVariationSettings=n.fontVariationSettings,t.style.lineHeight=n.lineHeight+"px",t.style.letterSpacing=n.letterSpacing+"px")}var Wh=function(){function t(t,n){this.chr=t,this.type=n,this.width=0}t.prototype.fulfill=function(t){this.width=t};return t}();var Hh=function(){function t(t,n){this._bareFontInfo=t,this._requests=n,this._container=null,this._testElements=null}t.prototype.read=function(t){this._createDomElements(),t.document.body.appendChild(this._container),this._readFromDomElements(),t.document.body.removeChild(this._container),this._container=null,this._testElements=null};t.prototype._createDomElements=function(){var n=document.createElement("div");n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";var i=document.createElement("div");Ph(i,this._bareFontInfo),n.appendChild(i);var r=document.createElement("div");Ph(r,this._bareFontInfo),r.style.fontWeight="bold",n.appendChild(r);var e=document.createElement("div");Ph(e,this._bareFontInfo),e.style.fontStyle="italic",n.appendChild(e);var o=[];for(var s=0,u=this._requests;s<u.length;s++){var a=u[s];var h=void 0;a.type===0&&(h=i),a.type===2&&(h=r),a.type===1&&(h=e),h.appendChild(document.createElement("br"));var c=document.createElement("span");t._render(c,a),h.appendChild(c),o.push(c)}this._container=n,this._testElements=o};t._render=function(t,n){if(n.chr===" "){var i=" ";for(var r=0;r<8;r++)i+=i;t.innerText=i}else{var i=n.chr;for(var r=0;r<8;r++)i+=i;t.textContent=i}};t.prototype._readFromDomElements=function(){for(var t=0,n=this._requests.length;t<n;t++){var i=this._requests[t],r=this._testElements[t];i.fulfill(r.offsetWidth/256)}};return t}();var zh=new(function(){function t(){this._zoomLevel=0,this._onDidChangeZoomLevel=new ki,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}t.prototype.getZoomLevel=function(){return this._zoomLevel};t.prototype.setZoomLevel=function(t){t=Math.min(Math.max(-5,t),20),this._zoomLevel!==t&&(this._zoomLevel=t,this._onDidChangeZoomLevel.fire(this._zoomLevel))};return t}()),Uh=Ft?1.5:1.35;var Kh=function(){function t(t){this._bareFontInfoBrand=void 0,this.pixelRatio=t.pixelRatio,this.fontFamily=String(t.fontFamily),this.fontWeight=String(t.fontWeight),this.fontSize=t.fontSize,this.fontFeatureSettings=t.fontFeatureSettings,this.fontVariationSettings=t.fontVariationSettings,this.lineHeight=0|t.lineHeight,this.letterSpacing=t.letterSpacing}t.createFromValidatedSettings=function(n,i,r){var e=n.get(49),o=n.get(53),s=n.get(52),u=n.get(51),a=n.get(54),h=n.get(67),c=n.get(64);return t._create(e,o,s,u,a,h,c,i,r)};t._create=function(n,i,r,e,o,s,u,a,h){s===0?s=Uh*r:s<8&&(s*=r),(s=Math.round(s))<8&&(s=8);var c=1+(h?0:.1*zh.getZoomLevel());return r*=c,s*=c,o===On.TRANSLATE&&(i==="normal"||i==="bold"?o=On.OFF:(o="'wght' ".concat(parseInt(i,10)),i="normal")),new t({pixelRatio:a,fontFamily:n,fontWeight:i,fontSize:r,fontFeatureSettings:e,fontVariationSettings:o,lineHeight:s,letterSpacing:u})};t.prototype.getId=function(){return"".concat(this.pixelRatio,"-").concat(this.fontFamily,"-").concat(this.fontWeight,"-").concat(this.fontSize,"-").concat(this.fontFeatureSettings,"-").concat(this.fontVariationSettings,"-").concat(this.lineHeight,"-").concat(this.letterSpacing)};t.prototype.getMassagedFontFamily=function(){var n=zn.fontFamily,i=t._wrapInQuotes(this.fontFamily);return n&&this.fontFamily!==n?"".concat(i,", ").concat(n):i};t._wrapInQuotes=function(t){return/[,"']/.test(t)?t:/[+ ]/.test(t)?'"'.concat(t,'"'):t};return t}();var Vh=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n)||this,r._editorStylingBrand=void 0,r.version=2,r.isTrusted=i,r.isMonospace=n.isMonospace,r.typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,r.typicalFullwidthCharacterWidth=n.typicalFullwidthCharacterWidth,r.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,r.spaceWidth=n.spaceWidth,r.middotWidth=n.middotWidth,r.wsmiddotWidth=n.wsmiddotWidth,r.maxDigitWidth=n.maxDigitWidth;return r}n.prototype.equals=function(t){return this.fontFamily===t.fontFamily&&this.fontWeight===t.fontWeight&&this.fontSize===t.fontSize&&this.fontFeatureSettings===t.fontFeatureSettings&&this.fontVariationSettings===t.fontVariationSettings&&this.lineHeight===t.lineHeight&&this.letterSpacing===t.letterSpacing&&this.typicalHalfwidthCharacterWidth===t.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===t.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.spaceWidth===t.spaceWidth&&this.middotWidth===t.middotWidth&&this.wsmiddotWidth===t.wsmiddotWidth&&this.maxDigitWidth===t.maxDigitWidth};return n}(Kh);var qh=function(){function t(){this._keys=Object.create(null),this._values=Object.create(null)}t.prototype.has=function(t){var n=t.getId();return!!this._values[n]};t.prototype.get=function(t){var n=t.getId();return this._values[n]};t.prototype.put=function(t,n){var i=t.getId();this._keys[i]=t,this._values[i]=n};t.prototype.remove=function(t){var n=t.getId();delete this._keys[n],delete this._values[n]};t.prototype.getValues=function(){var t=this;return Object.keys(this._keys).map((function(n){return t._values[n]}))};return t}();var Gh=new(function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._cache=new Map,n._evictUntrustedReadingsTimeout=-1,n._onDidChange=n._register(new ki),n.onDidChange=n._onDidChange.event;return n}n.prototype.dispose=function(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),t.prototype.dispose.call(this)};n.prototype.clearAllFontInfos=function(){this._cache.clear(),this._onDidChange.fire()};n.prototype._ensureCache=function(t){var n=ca(t);var i=this._cache.get(n);return i||(i=new qh,this._cache.set(n,i)),i};n.prototype._writeToCache=function(t,n,i){var r=this;this._ensureCache(t).put(n,i),i.isTrusted||this._evictUntrustedReadingsTimeout!==-1||(this._evictUntrustedReadingsTimeout=t.setTimeout((function(){r._evictUntrustedReadingsTimeout=-1,r._evictUntrustedReadings(t)}),5e3))};n.prototype._evictUntrustedReadings=function(t){var n=this._ensureCache(t),i=n.getValues();var r=!1;for(var e=0,o=i;e<o.length;e++){var s=o[e];s.isTrusted||(r=!0,n.remove(s))}r&&this._onDidChange.fire()};n.prototype.readFontInfo=function(t,n){var i=this._ensureCache(t);if(!i.has(n)){var r=this._actualReadFontInfo(t,n);(r.typicalHalfwidthCharacterWidth<=2||r.typicalFullwidthCharacterWidth<=2||r.spaceWidth<=2||r.maxDigitWidth<=2)&&(r=new Vh({pixelRatio:Th.getInstance(t).value,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontSize:r.fontSize,fontFeatureSettings:r.fontFeatureSettings,fontVariationSettings:r.fontVariationSettings,lineHeight:r.lineHeight,letterSpacing:r.letterSpacing,isMonospace:r.isMonospace,typicalHalfwidthCharacterWidth:Math.max(r.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(r.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:r.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(r.spaceWidth,5),middotWidth:Math.max(r.middotWidth,5),wsmiddotWidth:Math.max(r.wsmiddotWidth,5),maxDigitWidth:Math.max(r.maxDigitWidth,5)},!1)),this._writeToCache(t,n,r)}return i.get(n)};n.prototype._createRequest=function(t,n,i,r){var e=new Wh(t,n);return i.push(e),r==null||r.push(e),e};n.prototype._actualReadFontInfo=function(t,n){var i=[],r=[],e=this._createRequest("n",0,i,r),o=this._createRequest("ｍ",0,i,null),s=this._createRequest(" ",0,i,r),u=this._createRequest("0",0,i,r),a=this._createRequest("1",0,i,r),h=this._createRequest("2",0,i,r),c=this._createRequest("3",0,i,r),f=this._createRequest("4",0,i,r),l=this._createRequest("5",0,i,r),v=this._createRequest("6",0,i,r),d=this._createRequest("7",0,i,r),g=this._createRequest("8",0,i,r),p=this._createRequest("9",0,i,r),w=this._createRequest("→",0,i,r),m=this._createRequest("￫",0,i,null),b=this._createRequest("·",0,i,r),y=this._createRequest("⸱",0,i,null),_="|/-_ilm%";for(var k=0,x=8;k<x;k++)this._createRequest(_.charAt(k),0,i,r),this._createRequest(_.charAt(k),1,i,r),this._createRequest(_.charAt(k),2,i,r);(function(t,n,i){new Hh(n,i).read(t)})(t,n,i);var C=Math.max(u.width,a.width,h.width,c.width,f.width,l.width,v.width,d.width,g.width,p.width);var S=n.fontFeatureSettings===An.OFF;var D=r[0].width;for(var k=1,x=r.length;S&&k<x;k++){var A=D-r[k].width;if(A<-.001||A>.001){S=!1;break}}var O=!0;return S&&m.width!==D&&(O=!1),m.width>w.width&&(O=!1),new Vh({pixelRatio:Th.getInstance(t).value,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontSize:n.fontSize,fontFeatureSettings:n.fontFeatureSettings,fontVariationSettings:n.fontVariationSettings,lineHeight:n.lineHeight,letterSpacing:n.letterSpacing,isMonospace:S,typicalHalfwidthCharacterWidth:e.width,typicalFullwidthCharacterWidth:o.width,canUseHalfwidthRightwardsArrow:O,spaceWidth:s.width,middotWidth:b.width,wsmiddotWidth:y.width,maxDigitWidth:C},!0)};return n}(ci));var $h;(function(t){t.serviceIds=new Map,t.DI_TARGET="$di$target",t.DI_DEPENDENCIES="$di$dependencies",t.getServiceDependencies=function(n){return n[t.DI_DEPENDENCIES]||[]}})($h||($h={}));var Jh=Zh("instantiationService");function Zh(t){if($h.serviceIds.has(t))return $h.serviceIds.get(t);var n=function(t,i,r){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(t,n,i){n[$h.DI_TARGET]===n?n[$h.DI_DEPENDENCIES].push({id:t,index:i}):(n[$h.DI_DEPENDENCIES]=[{id:t,index:i}],n[$h.DI_TARGET]=n)})(n,t,r)};return n.toString=function(){return t},$h.serviceIds.set(t,n),n}var Qh=Zh("codeEditorService"),Yh=Zh("modelService"),Xh=Zh("textModelService");var tc=function(t){__extends(n,t);function n(n,i,r,e,o){if(i===void 0){i=""}if(r===void 0){r=""}if(e===void 0){e=!0}var s=this;s=t.call(this)||this,s._onDidChange=s._register(new ki),s.onDidChange=s._onDidChange.event,s._enabled=!0,s._id=n,s._label=i,s._cssClass=r,s._enabled=e,s._actionCallback=o;return s}Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"label",{get:function(){return this._label},set:function(t){this._setLabel(t)},enumerable:false,configurable:true});n.prototype._setLabel=function(t){this._label!==t&&(this._label=t,this._onDidChange.fire({label:t}))};Object.defineProperty(n.prototype,"tooltip",{get:function(){return this._tooltip||""},set:function(t){this._setTooltip(t)},enumerable:false,configurable:true});n.prototype._setTooltip=function(t){this._tooltip!==t&&(this._tooltip=t,this._onDidChange.fire({tooltip:t}))};Object.defineProperty(n.prototype,"class",{get:function(){return this._cssClass},set:function(t){this._setClass(t)},enumerable:false,configurable:true});n.prototype._setClass=function(t){this._cssClass!==t&&(this._cssClass=t,this._onDidChange.fire({class:t}))};Object.defineProperty(n.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._setEnabled(t)},enumerable:false,configurable:true});n.prototype._setEnabled=function(t){this._enabled!==t&&(this._enabled=t,this._onDidChange.fire({enabled:t}))};Object.defineProperty(n.prototype,"checked",{get:function(){return this._checked},set:function(t){this._setChecked(t)},enumerable:false,configurable:true});n.prototype._setChecked=function(t){this._checked!==t&&(this._checked=t,this._onDidChange.fire({checked:t}))};n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:n=this._actionCallback;if(!n)return[3,2];return[4,this._actionCallback(t)];case 1:n=i.sent();i.label=2;case 2:n;return[2]}}))}))};return n}(ci);var nc=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._onWillRun=n._register(new ki),n.onWillRun=n._onWillRun.event,n._onDidRun=n._register(new ki),n.onDidRun=n._onDidRun.event;return n}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r;return __generator(this,(function(e){switch(e.label){case 0:if(!t.enabled)return[2];this._onWillRun.fire({action:t});e.label=1;case 1:e.trys.push([1,3,,4]);return[4,this.runAction(t,n)];case 2:e.sent();return[3,4];case 3:r=e.sent();i=r;return[3,4];case 4:this._onDidRun.fire({action:t,error:i});return[2]}}))}))};n.prototype.runAction=function(t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,t.run(n)];case 1:i.sent();return[2]}}))}))};return n}(ci);var ic=function(){function t(){this.id=t.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}t.join=function(){var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}var r=[];for(var e=0,o=n;e<o.length;e++){var s=o[e];s.length&&(r=r.length?__spreadArray(__spreadArray(__spreadArray([],r,true),[new t],false),s,true):s)}return r};t.prototype.run=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2]}))}))};return t}();ic.ID="vs.actions.separator";var rc=function(){function t(t,n,i,r){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=t,this.label=n,this.class=r,this._actions=i}Object.defineProperty(t.prototype,"actions",{get:function(){return this._actions},enumerable:false,configurable:true});t.prototype.run=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2]}))}))};return t}();var ec=function(t){__extends(n,t);function n(){return t.call(this,n.ID,ht(0,"(empty)"),void 0,!1)||this}return n}(tc);function oc(t){var n=this;var i;return{id:t.id,label:t.label,class:t.class,enabled:(i=t.enabled)===null||i===void 0||i,checked:t.checked,run:function(){var i=[];for(var r=0;r<arguments.length;r++){i[r]=arguments[r]}return __awaiter(n,void 0,void 0,(function(){return __generator(this,(function(n){return[2,t.run.apply(t,i)]}))}))},tooltip:t.label}}var sc,uc;ec.ID="vs.actions.empty",function(t){t.isThemeColor=function(t){return t&&typeof t=="object"&&typeof t.id=="string"}}(sc||(sc={})),function(t){t.iconNameSegment="[A-Za-z0-9]+",t.iconNameExpression="[A-Za-z0-9-]+",t.iconModifierExpression="~[A-Za-z]+",t.iconNameCharacter="[A-Za-z0-9~-]";var n=new RegExp("^(".concat(t.iconNameExpression,")(").concat(t.iconModifierExpression,")?$"));function i(t){var r=n.exec(t.id);if(!r)return i(Hr.error);var e=r[1],o=r[2],s=["codicon","codicon-"+e];return o&&s.push("codicon-modifier-"+o.substring(1)),s}t.asClassNameArray=i,t.asClassName=function(t){return i(t).join(" ")},t.asCSSSelector=function(t){return"."+i(t).join(".")},t.isThemeIcon=function(t){return t&&typeof t=="object"&&typeof t.id=="string"&&(t.color===void 0||sc.isThemeColor(t.color))};var r=new RegExp("^\\$\\((".concat(t.iconNameExpression,"(?:").concat(t.iconModifierExpression,")?)\\)$"));t.fromString=function(t){var n=r.exec(t);if(!n)return;var i=n[1];return{id:i}},t.fromId=function(t){return{id:t}},t.modify=function(t,n){var i=t.id;var r=i.lastIndexOf("~");return r!==-1&&(i=i.substring(0,r)),n&&(i="".concat(i,"~").concat(n)),{id:i}},t.getModifier=function(t){var n=t.id.lastIndexOf("~");if(n!==-1)return t.id.substring(n+1)},t.isEqual=function(t,n){var i,r;return t.id===n.id&&((i=t.color)===null||i===void 0?void 0:i.id)===((r=n.color)===null||r===void 0?void 0:r.id)}}(uc||(uc={}));var ac=Zh("commandService"),hc=new(function(){function t(){this._commands=new Map,this._onDidRegisterCommand=new ki,this.onDidRegisterCommand=this._onDidRegisterCommand.event}t.prototype.registerCommand=function(t,n){var i=this;if(!t)throw new Error("invalid command");if(typeof t=="string"){if(!n)throw new Error("invalid command");return this.registerCommand({id:t,handler:n})}if(t.metadata&&Array.isArray(t.metadata.args)){var r=[];for(var e=0,o=t.metadata.args;e<o.length;e++){var s=o[e];r.push(s.constraint)}var u=t.handler;t.handler=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return function(t,n){var i=Math.min(t.length,n.length);for(var r=0;r<i;r++)X(t[r],n[r])}(n,r),u.apply(void 0,__spreadArray([t],n,false))}}var a=t.id;var h=this._commands.get(a);h||(h=new tn,this._commands.set(a,h));var c=h.unshift(t),f=ai((function(){c();var t=i._commands.get(a);t!=null&&t.isEmpty()&&i._commands.delete(a)}));return this._onDidRegisterCommand.fire(a),f};t.prototype.registerCommandAlias=function(t,n){return hc.registerCommand(t,(function(t){var i;var r=[];for(var e=1;e<arguments.length;e++){r[e-1]=arguments[e]}return(i=t.get(ac)).executeCommand.apply(i,__spreadArray([n],r,false))}))};t.prototype.getCommand=function(t){var n=this._commands.get(t);if(n&&!n.isEmpty())return Yt.first(n)};t.prototype.getCommands=function(){var t=new Map;for(var n=0,i=this._commands.keys();n<i.length;n++){var r=i[n];var e=this.getCommand(r);e&&t.set(r,e)}return t};return t}());function cc(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}switch(t.length){case 1:return ht(0,"Did you mean {0}?",t[0]);case 2:return ht(0,"Did you mean {0} or {1}?",t[0],t[1]);case 3:return ht(0,"Did you mean {0}, {1} or {2}?",t[0],t[1],t[2]);default:return}}hc.registerCommand("noop",(function(){}));var fc=ht(0,"Did you forget to open or close the quote?"),lc=ht(0,"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");var vc=function(){function t(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}t.getLexeme=function(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw ti("unhandled token type: ".concat(JSON.stringify(t),"; have you forgotten to add a case?"))}};t.prototype.reset=function(t){return this._input=t,this._start=0,this._current=0,this._tokens=[],this._errors=[],this};t.prototype.scan=function(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){var t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){var t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(cc("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(cc("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(cc("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)};t.prototype._match=function(t){return!this._isAtEnd()&&this._input.charCodeAt(this._current)===t&&(this._current++,!0)};t.prototype._advance=function(){return this._input.charCodeAt(this._current++)};t.prototype._peek=function(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)};t.prototype._addToken=function(t){this._tokens.push({type:t,offset:this._start})};t.prototype._error=function(t){var n=this._start,i=this._input.substring(this._start,this._current),r={type:19,offset:this._start,lexeme:i};this._errors.push({offset:n,lexeme:i,additionalInfo:t}),this._tokens.push(r)};t.prototype._string=function(){this.stringRe.lastIndex=this._start;var n=this.stringRe.exec(this._input);if(n){this._current=this._start+n[0].length;var i=this._input.substring(this._start,this._current),r=t._keywords.get(i);r?this._addToken(r):this._tokens.push({type:17,lexeme:i,offset:this._start})}};t.prototype._quotedString=function(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(fc):(this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))};t.prototype._regex=function(){var n=this._current,i=!1,r=!1;for(;;){if(n>=this._input.length)return this._current=n,void this._error(lc);var e=this._input.charCodeAt(n);if(i)i=!1;else{if(e===47&&!r){n++;break}e===91?r=!0:e===92?i=!0:e===93&&(r=!1)}n++}for(;n<this._input.length&&t._regexFlags.has(this._input.charCodeAt(n));)n++;this._current=n;var o=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:o,offset:this._start})};t.prototype._isAtEnd=function(){return this._current>=this._input.length};return t}();vc._regexFlags=new Set(["i","g","s","m","y","u"].map((function(t){return t.charCodeAt(0)}))),vc._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);var dc=new Map;dc.set("false",!1),dc.set("true",!0),dc.set("isMac",Ft),dc.set("isLinux",Lt),dc.set("isWindows",Mt),dc.set("isWeb",Rt),dc.set("isMacNative",Ft&&!Rt),dc.set("isEdge",Jt),dc.set("isFirefox",Gt),dc.set("isChrome",qt),dc.set("isSafari",$t);var gc=Object.prototype.hasOwnProperty,pc={regexParsingWithErrorRecovery:!0},wc=ht(0,"Empty context key expression"),mc=ht(0,"Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),bc=ht(0,"'in' after 'not'."),yc=ht(0,"closing parenthesis ')'"),_c=ht(0,"Unexpected token"),kc=ht(0,"Did you forget to put && or || before the token?"),xc=ht(0,"Unexpected end of expression"),Cc=ht(0,"Did you forget to put a context key?");var Sc=function(){function t(t){if(t===void 0){t=pc}this._config=t,this._scanner=new vc,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}t.prototype.parse=function(n){if(n!==""){this._tokens=this._scanner.reset(n).scan(),this._current=0,this._parsingErrors=[];try{var i=this._expr();if(!this._isAtEnd()){var r=this._peek(),e=r.type===17?kc:void 0;throw this._parsingErrors.push({message:_c,offset:r.offset,lexeme:vc.getLexeme(r),additionalInfo:e}),t._parseError}return i}catch(i){if(i!==t._parseError)throw i;return}}else this._parsingErrors.push({message:wc,offset:0,lexeme:"",additionalInfo:mc})};t.prototype._expr=function(){return this._or()};t.prototype._or=function(){var t=[this._and()];for(;this._matchOne(16);){var n=this._and();t.push(n)}return t.length===1?t[0]:Dc.or.apply(Dc,t)};t.prototype._and=function(){var t=[this._term()];for(;this._matchOne(15);){var n=this._term();t.push(n)}return t.length===1?t[0]:Dc.and.apply(Dc,t)};t.prototype._term=function(){if(this._matchOne(2)){var t=this._peek();switch(t.type){case 11:return this._advance(),Oc.INSTANCE;case 12:return this._advance(),Ec.INSTANCE;case 0:{this._advance();var n=this._expr();return this._consume(1,yc),n==null?void 0:n.negate()}case 17:return this._advance(),Tc.create(t.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",t)}}return this._primary()};t.prototype._primary=function(){var n=this._peek();switch(n.type){case 11:return this._advance(),Dc.true();case 12:return this._advance(),Dc.false();case 0:{this._advance();var i=this._expr();return this._consume(1,yc),i}case 17:{var i=n.lexeme;if(this._advance(),this._matchOne(9)){var r=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),r.type!==10)throw this._errExpectedButGot("REGEX",r);var e=r.lexeme,o=e.lastIndexOf("/"),s=o===e.length-1?void 0:this._removeFlagsGY(e.substring(o+1));var u=void 0;try{u=new RegExp(e.substring(1,o),s)}catch(t){throw this._errExpectedButGot("REGEX",r)}return Hc.create(i,u)}switch(r.type){case 10:case 19:{var e=[r.lexeme];this._advance();var o=this._peek(),s=0;for(var a=0;a<r.lexeme.length;a++)r.lexeme.charCodeAt(a)===40?s++:r.lexeme.charCodeAt(a)===41&&s--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:s++;break;case 1:s--;break;case 10:case 18:for(var a=0;a<o.lexeme.length;a++)o.lexeme.charCodeAt(a)===40?s++:r.lexeme.charCodeAt(a)===41&&s--}if(s<0)break;e.push(vc.getLexeme(o)),this._advance(),o=this._peek()}var u=e.join(""),h=u.lastIndexOf("/"),c=h===u.length-1?void 0:this._removeFlagsGY(u.substring(h+1));var f=void 0;try{f=new RegExp(u.substring(1,h),c)}catch(t){throw this._errExpectedButGot("REGEX",r)}return Dc.regex(i,f)}case 18:{var e=r.lexeme;this._advance();var o=null;if(!ro(e)){var s=e.indexOf("/"),u=e.lastIndexOf("/");if(s!==u&&s>=0){var h=e.slice(s+1,u),c=e[u+1]==="i"?"i":"";try{o=new RegExp(h,c)}catch(t){throw this._errExpectedButGot("REGEX",r)}}}if(o===null)throw this._errExpectedButGot("REGEX",r);return Hc.create(i,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,bc);var r=this._value();return Dc.notIn(i,r)}switch(this._peek().type){case 3:{this._advance();var r=this._value();if(this._previous().type===18)return Dc.equals(i,r);switch(r){case"true":return Dc.has(i);case"false":return Dc.not(i);default:return Dc.equals(i,r)}}case 4:{this._advance();var r=this._value();if(this._previous().type===18)return Dc.notEquals(i,r);switch(r){case"true":return Dc.not(i);case"false":return Dc.has(i);default:return Dc.notEquals(i,r)}}case 5:return this._advance(),Pc.create(i,this._value());case 6:return this._advance(),Wc.create(i,this._value());case 7:return this._advance(),Bc.create(i,this._value());case 8:return this._advance(),Nc.create(i,this._value());case 13:return this._advance(),Dc.in(i,this._value());default:return Dc.has(i)}}case 20:throw this._parsingErrors.push({message:xc,offset:n.offset,lexeme:"",additionalInfo:Cc}),t._parseError;default:throw this._errExpectedButGot("true | false | KEY \n\t| KEY '=~' REGEX \n\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value",this._peek())}};t.prototype._value=function(){var t=this._peek();switch(t.type){case 17:case 18:return this._advance(),t.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}};t.prototype._removeFlagsGY=function(t){return t.replaceAll(this._flagsGYRe,"")};t.prototype._previous=function(){return this._tokens[this._current-1]};t.prototype._matchOne=function(t){return!!this._check(t)&&(this._advance(),!0)};t.prototype._advance=function(){return this._isAtEnd()||this._current++,this._previous()};t.prototype._consume=function(t,n){if(this._check(t))return this._advance();throw this._errExpectedButGot(n,this._peek())};t.prototype._errExpectedButGot=function(n,i,r){var e=ht(0,"Expected: {0}\nReceived: '{1}'.",n,vc.getLexeme(i)),o=i.offset,s=vc.getLexeme(i);return this._parsingErrors.push({message:e,offset:o,lexeme:s,additionalInfo:r}),t._parseError};t.prototype._check=function(t){return this._peek().type===t};t.prototype._peek=function(){return this._tokens[this._current]};t.prototype._isAtEnd=function(){return this._peek().type===20};return t}();Sc._parseError=new Error;var Dc=function(){function t(){}t.false=function(){return Oc.INSTANCE};t.true=function(){return Ec.INSTANCE};t.has=function(t){return Mc.create(t)};t.equals=function(t,n){return Fc.create(t,n)};t.notEquals=function(t,n){return Rc.create(t,n)};t.regex=function(t,n){return Hc.create(t,n)};t.in=function(t,n){return Lc.create(t,n)};t.notIn=function(t,n){return jc.create(t,n)};t.not=function(t){return Tc.create(t)};t.and=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return Kc.create(t,null,!0)};t.or=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return Vc.create(t,null,!0)};t.deserialize=function(t){if(t!=null)return this._parser.parse(t)};return t}();function Ac(t,n){return t.cmp(n)}Dc._parser=new Sc({regexParsingWithErrorRecovery:!1});var Oc=function(){function t(){this.type=0}t.prototype.cmp=function(t){return this.type-t.type};t.prototype.equals=function(t){return t.type===this.type};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){return!1};t.prototype.serialize=function(){return"false"};t.prototype.keys=function(){return[]};t.prototype.negate=function(){return Ec.INSTANCE};return t}();Oc.INSTANCE=new Oc;var Ec=function(){function t(){this.type=1}t.prototype.cmp=function(t){return this.type-t.type};t.prototype.equals=function(t){return t.type===this.type};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){return!0};t.prototype.serialize=function(){return"true"};t.prototype.keys=function(){return[]};t.prototype.negate=function(){return Oc.INSTANCE};return t}();Ec.INSTANCE=new Ec;var Mc=function(){function t(t,n){this.key=t,this.negated=n,this.type=2}t.create=function(n,i){if(i===void 0){i=null}var r=dc.get(n);return typeof r=="boolean"?r?Ec.INSTANCE:Oc.INSTANCE:new t(n,i)};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:$c(this.key,t.key)};t.prototype.equals=function(t){return t.type===this.type&&this.key===t.key};t.prototype.substituteConstants=function(){var t=dc.get(this.key);return typeof t=="boolean"?t?Ec.INSTANCE:Oc.INSTANCE:this};t.prototype.evaluate=function(t){return!!t.getValue(this.key)};t.prototype.serialize=function(){return this.key};t.prototype.keys=function(){return[this.key]};t.prototype.negate=function(){return this.negated||(this.negated=Tc.create(this.key,this)),this.negated};return t}();var Fc=function(){function t(t,n,i){this.key=t,this.value=n,this.negated=i,this.type=4}t.create=function(n,i,r){if(r===void 0){r=null}if(typeof i=="boolean")return i?Mc.create(n,r):Tc.create(n,r);var e=dc.get(n);return typeof e=="boolean"?i===(e?"true":"false")?Ec.INSTANCE:Oc.INSTANCE:new t(n,i,r)};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:Jc(this.key,this.value,t.key,t.value)};t.prototype.equals=function(t){return t.type===this.type&&this.key===t.key&&this.value===t.value};t.prototype.substituteConstants=function(){var t=dc.get(this.key);if(typeof t=="boolean"){var n=t?"true":"false";return this.value===n?Ec.INSTANCE:Oc.INSTANCE}return this};t.prototype.evaluate=function(t){return t.getValue(this.key)==this.value};t.prototype.serialize=function(){return"".concat(this.key," == '").concat(this.value,"'")};t.prototype.keys=function(){return[this.key]};t.prototype.negate=function(){return this.negated||(this.negated=Rc.create(this.key,this.value,this)),this.negated};return t}();var Lc=function(){function t(t,n){this.key=t,this.valueKey=n,this.type=10,this.negated=null}t.create=function(n,i){return new t(n,i)};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:Jc(this.key,this.valueKey,t.key,t.valueKey)};t.prototype.equals=function(t){return t.type===this.type&&this.key===t.key&&this.valueKey===t.valueKey};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){var n=t.getValue(this.valueKey),i=t.getValue(this.key);return Array.isArray(n)?n.includes(i):typeof i=="string"&&typeof n=="object"&&n!==null&&gc.call(n,i)};t.prototype.serialize=function(){return"".concat(this.key," in '").concat(this.valueKey,"'")};t.prototype.keys=function(){return[this.key,this.valueKey]};t.prototype.negate=function(){return this.negated||(this.negated=jc.create(this.key,this.valueKey)),this.negated};return t}();var jc=function(){function t(t,n){this.key=t,this.valueKey=n,this.type=11,this._negated=Lc.create(t,n)}t.create=function(n,i){return new t(n,i)};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:this._negated.cmp(t._negated)};t.prototype.equals=function(t){return t.type===this.type&&this._negated.equals(t._negated)};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){return!this._negated.evaluate(t)};t.prototype.serialize=function(){return"".concat(this.key," not in '").concat(this.valueKey,"'")};t.prototype.keys=function(){return this._negated.keys()};t.prototype.negate=function(){return this._negated};return t}();var Rc=function(){function t(t,n,i){this.key=t,this.value=n,this.negated=i,this.type=5}t.create=function(n,i,r){if(r===void 0){r=null}if(typeof i=="boolean")return i?Tc.create(n,r):Mc.create(n,r);var e=dc.get(n);return typeof e=="boolean"?i===(e?"true":"false")?Oc.INSTANCE:Ec.INSTANCE:new t(n,i,r)};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:Jc(this.key,this.value,t.key,t.value)};t.prototype.equals=function(t){return t.type===this.type&&this.key===t.key&&this.value===t.value};t.prototype.substituteConstants=function(){var t=dc.get(this.key);if(typeof t=="boolean"){var n=t?"true":"false";return this.value===n?Oc.INSTANCE:Ec.INSTANCE}return this};t.prototype.evaluate=function(t){return t.getValue(this.key)!=this.value};t.prototype.serialize=function(){return"".concat(this.key," != '").concat(this.value,"'")};t.prototype.keys=function(){return[this.key]};t.prototype.negate=function(){return this.negated||(this.negated=Fc.create(this.key,this.value,this)),this.negated};return t}();var Tc=function(){function t(t,n){this.key=t,this.negated=n,this.type=3}t.create=function(n,i){if(i===void 0){i=null}var r=dc.get(n);return typeof r=="boolean"?r?Oc.INSTANCE:Ec.INSTANCE:new t(n,i)};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:$c(this.key,t.key)};t.prototype.equals=function(t){return t.type===this.type&&this.key===t.key};t.prototype.substituteConstants=function(){var t=dc.get(this.key);return typeof t=="boolean"?t?Oc.INSTANCE:Ec.INSTANCE:this};t.prototype.evaluate=function(t){return!t.getValue(this.key)};t.prototype.serialize=function(){return"!".concat(this.key)};t.prototype.keys=function(){return[this.key]};t.prototype.negate=function(){return this.negated||(this.negated=Mc.create(this.key,this)),this.negated};return t}();function Ic(t,n){if(typeof t=="string"){var i=parseFloat(t);isNaN(i)||(t=i)}return typeof t=="string"||typeof t=="number"?n(t):Oc.INSTANCE}var Bc=function(){function t(t,n,i){this.key=t,this.value=n,this.negated=i,this.type=12}t.create=function(n,i,r){if(r===void 0){r=null}return Ic(i,(function(i){return new t(n,i,r)}))};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:Jc(this.key,this.value,t.key,t.value)};t.prototype.equals=function(t){return t.type===this.type&&this.key===t.key&&this.value===t.value};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){return typeof this.value!="string"&&parseFloat(t.getValue(this.key))>this.value};t.prototype.serialize=function(){return"".concat(this.key," > ").concat(this.value)};t.prototype.keys=function(){return[this.key]};t.prototype.negate=function(){return this.negated||(this.negated=Wc.create(this.key,this.value,this)),this.negated};return t}();var Nc=function(){function t(t,n,i){this.key=t,this.value=n,this.negated=i,this.type=13}t.create=function(n,i,r){if(r===void 0){r=null}return Ic(i,(function(i){return new t(n,i,r)}))};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:Jc(this.key,this.value,t.key,t.value)};t.prototype.equals=function(t){return t.type===this.type&&this.key===t.key&&this.value===t.value};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){return typeof this.value!="string"&&parseFloat(t.getValue(this.key))>=this.value};t.prototype.serialize=function(){return"".concat(this.key," >= ").concat(this.value)};t.prototype.keys=function(){return[this.key]};t.prototype.negate=function(){return this.negated||(this.negated=Pc.create(this.key,this.value,this)),this.negated};return t}();var Pc=function(){function t(t,n,i){this.key=t,this.value=n,this.negated=i,this.type=14}t.create=function(n,i,r){if(r===void 0){r=null}return Ic(i,(function(i){return new t(n,i,r)}))};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:Jc(this.key,this.value,t.key,t.value)};t.prototype.equals=function(t){return t.type===this.type&&this.key===t.key&&this.value===t.value};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){return typeof this.value!="string"&&parseFloat(t.getValue(this.key))<this.value};t.prototype.serialize=function(){return"".concat(this.key," < ").concat(this.value)};t.prototype.keys=function(){return[this.key]};t.prototype.negate=function(){return this.negated||(this.negated=Nc.create(this.key,this.value,this)),this.negated};return t}();var Wc=function(){function t(t,n,i){this.key=t,this.value=n,this.negated=i,this.type=15}t.create=function(n,i,r){if(r===void 0){r=null}return Ic(i,(function(i){return new t(n,i,r)}))};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:Jc(this.key,this.value,t.key,t.value)};t.prototype.equals=function(t){return t.type===this.type&&this.key===t.key&&this.value===t.value};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){return typeof this.value!="string"&&parseFloat(t.getValue(this.key))<=this.value};t.prototype.serialize=function(){return"".concat(this.key," <= ").concat(this.value)};t.prototype.keys=function(){return[this.key]};t.prototype.negate=function(){return this.negated||(this.negated=Bc.create(this.key,this.value,this)),this.negated};return t}();var Hc=function(){function t(t,n){this.key=t,this.regexp=n,this.type=7,this.negated=null}t.create=function(n,i){return new t(n,i)};t.prototype.cmp=function(t){if(t.type!==this.type)return this.type-t.type;if(this.key<t.key)return-1;if(this.key>t.key)return 1;var n=this.regexp?this.regexp.source:"",i=t.regexp?t.regexp.source:"";return n<i?-1:n>i?1:0};t.prototype.equals=function(t){if(t.type===this.type){var n=this.regexp?this.regexp.source:"",i=t.regexp?t.regexp.source:"";return this.key===t.key&&n===i}return!1};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){var n=t.getValue(this.key);return!!this.regexp&&this.regexp.test(n)};t.prototype.serialize=function(){var t=this.regexp?"/".concat(this.regexp.source,"/").concat(this.regexp.flags):"/invalid/";return"".concat(this.key," =~ ").concat(t)};t.prototype.keys=function(){return[this.key]};t.prototype.negate=function(){return this.negated||(this.negated=zc.create(this)),this.negated};return t}();var zc=function(){function t(t){this._actual=t,this.type=8}t.create=function(n){return new t(n)};t.prototype.cmp=function(t){return t.type!==this.type?this.type-t.type:this._actual.cmp(t._actual)};t.prototype.equals=function(t){return t.type===this.type&&this._actual.equals(t._actual)};t.prototype.substituteConstants=function(){return this};t.prototype.evaluate=function(t){return!this._actual.evaluate(t)};t.prototype.serialize=function(){return"!(".concat(this._actual.serialize(),")")};t.prototype.keys=function(){return this._actual.keys()};t.prototype.negate=function(){return this._actual};return t}();function Uc(t){var n=null;for(var i=0,r=t.length;i<r;i++){var e=t[i].substituteConstants();if(t[i]!==e&&n===null){n=[];for(var o=0;o<i;o++)n[o]=t[o]}n!==null&&(n[i]=e)}return n===null?t:n}var Kc=function(){function t(t,n){this.expr=t,this.negated=n,this.type=6}t.create=function(n,i,r){return t._normalizeArr(n,i,r)};t.prototype.cmp=function(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(var n=0,i=this.expr.length;n<i;n++){var r=Ac(this.expr[n],t.expr[n]);if(r!==0)return r}return 0};t.prototype.equals=function(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(var n=0,i=this.expr.length;n<i;n++)if(!this.expr[n].equals(t.expr[n]))return!1;return!0}return!1};t.prototype.substituteConstants=function(){var n=Uc(this.expr);return n===this.expr?this:t.create(n,this.negated,!1)};t.prototype.evaluate=function(t){for(var n=0,i=this.expr.length;n<i;n++)if(!this.expr[n].evaluate(t))return!1;return!0};t._normalizeArr=function(n,i,r){var e=[];var o=!1;for(var s=0,u=n;s<u.length;s++){var a=u[s];if(a)if(a.type!==1){if(a.type===0)return Oc.INSTANCE;a.type!==6?e.push(a):e.push.apply(e,a.expr)}else o=!0}if(e.length===0&&o)return Ec.INSTANCE;if(e.length!==0){if(e.length===1)return e[0];e.sort(Ac);for(var a=1;a<e.length;a++)e[a-1].equals(e[a])&&(e.splice(a,1),a--);if(e.length===1)return e[0];var h=function(){var n=e[e.length-1];if(n.type!==9)return"break";e.pop();var i=e.pop(),o=e.length===0,s=Vc.create(n.expr.map((function(n){return t.create([n,i],null,r)})),null,o);s&&(e.push(s),e.sort(Ac))};for(;e.length>1;){var c=h();if(c==="break")break}if(e.length===1)return e[0];if(r){for(var a=0;a<e.length;a++)for(var f=a+1;f<e.length;f++)if(e[a].negate().equals(e[f]))return Oc.INSTANCE;if(e.length===1)return e[0]}return new t(e,i)}};t.prototype.serialize=function(){return this.expr.map((function(t){return t.serialize()})).join(" && ")};t.prototype.keys=function(){var t=[];for(var n=0,i=this.expr;n<i.length;n++){var r=i[n];t.push.apply(t,r.keys())}return t};t.prototype.negate=function(){if(!this.negated){var t=[];for(var n=0,i=this.expr;n<i.length;n++){var r=i[n];t.push(r.negate())}this.negated=Vc.create(t,this,!0)}return this.negated};return t}();var Vc=function(){function t(t,n){this.expr=t,this.negated=n,this.type=9}t.create=function(n,i,r){return t._normalizeArr(n,i,r)};t.prototype.cmp=function(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(var n=0,i=this.expr.length;n<i;n++){var r=Ac(this.expr[n],t.expr[n]);if(r!==0)return r}return 0};t.prototype.equals=function(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(var n=0,i=this.expr.length;n<i;n++)if(!this.expr[n].equals(t.expr[n]))return!1;return!0}return!1};t.prototype.substituteConstants=function(){var n=Uc(this.expr);return n===this.expr?this:t.create(n,this.negated,!1)};t.prototype.evaluate=function(t){for(var n=0,i=this.expr.length;n<i;n++)if(this.expr[n].evaluate(t))return!0;return!1};t._normalizeArr=function(n,i,r){var e=[],o=!1;if(n){for(var s=0,u=n.length;s<u;s++){var a=n[s];if(a)if(a.type!==0){if(a.type===1)return Ec.INSTANCE;a.type!==9?e.push(a):e=e.concat(a.expr)}else o=!0}if(e.length===0&&o)return Oc.INSTANCE;e.sort(Ac)}if(e.length!==0){if(e.length===1)return e[0];for(var s=1;s<e.length;s++)e[s-1].equals(e[s])&&(e.splice(s,1),s--);if(e.length===1)return e[0];if(r){for(var s=0;s<e.length;s++)for(var u=s+1;u<e.length;u++)if(e[s].negate().equals(e[u]))return Ec.INSTANCE;if(e.length===1)return e[0]}return new t(e,i)}};t.prototype.serialize=function(){return this.expr.map((function(t){return t.serialize()})).join(" || ")};t.prototype.keys=function(){var t=[];for(var n=0,i=this.expr;n<i.length;n++){var r=i[n];t.push.apply(t,r.keys())}return t};t.prototype.negate=function(){if(!this.negated){var n=[];for(var i=0,r=this.expr;i<r.length;i++){var e=r[i];n.push(e.negate())}for(;n.length>1;){var e=n.shift(),o=n.shift(),s=[];for(var u=0,a=Yc(e);u<a.length;u++){var h=a[u];for(var c=0,f=Yc(o);c<f.length;c++){var l=f[c];s.push(Kc.create([h,l],null,!1))}}n.unshift(t.create(s,null,!1))}this.negated=t.create(n,this,!0)}return this.negated};return t}();var qc=function(t){__extends(n,t);function n(i,r,e){var o=this;o=t.call(this,i,null)||this,o._defaultValue=r,typeof e=="object"?n._info.push(__assign(__assign({},e),{key:i})):e!==!0&&n._info.push({key:i,description:e,type:r!=null?typeof r:void 0});return o}n.all=function(){return n._info.values()};n.prototype.bindTo=function(t){return t.createKey(this.key,this._defaultValue)};n.prototype.getValue=function(t){return t.getContextKeyValue(this.key)};n.prototype.toNegated=function(){return this.negate()};n.prototype.isEqualTo=function(t){return Fc.create(this.key,t)};return n}(Mc);qc._info=[];var Gc=Zh("contextKeyService");function $c(t,n){return t<n?-1:t>n?1:0}function Jc(t,n,i,r){return t<i?-1:t>i?1:n<r?-1:n>r?1:0}function Zc(t,n){if(t.type===0||n.type===1)return!0;if(t.type===9)return n.type===9&&Qc(t.expr,n.expr);if(n.type===9){for(var i=0,r=n.expr;i<r.length;i++){var e=r[i];if(Zc(t,e))return!0}return!1}if(t.type===6){if(n.type===6)return Qc(n.expr,t.expr);for(var o=0,s=t.expr;o<s.length;o++){var e=s[o];if(Zc(e,n))return!0}return!1}return t.equals(n)}function Qc(t,n){var i=0,r=0;for(;i<t.length&&r<n.length;){var e=t[i].cmp(n[r]);if(e<0)return!1;e===0&&i++,r++}return i===t.length}function Yc(t){return t.type===9?t.expr:[t]}function Xc(t,n){if(!t)throw new Error(n?"Assertion failed (".concat(n,")"):"Assertion Failed")}function tf(t,n){if(n===void 0){n="Unreachable"}throw new Error(n)}function nf(t){t||Gn(new ri("Soft Assertion Failed"))}function rf(t){t()||(t(),Gn(new ri("Assertion Failed")))}function ef(t,n){var i=0;for(;i<t.length-1;){if(!n(t[i],t[i+1]))return!1;i++}return!0}var of=new(function(){function t(){this.data=new Map}t.prototype.add=function(t,n){Xc(H(t)),Xc(z(n)),Xc(!this.data.has(t),"There is already an extension with this id"),this.data.set(t,n)};t.prototype.as=function(t){return this.data.get(t)||null};return t}());var sf=function(){function t(){this._coreKeybindings=new tn,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}t.bindToCurrentPlatform=function(t){if(zt===1){if(t&&t.win)return t.win}else if(zt===2){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t};t.prototype.registerKeybindingRule=function(n){var i=t.bindToCurrentPlatform(n),r=new hi;if(i&&i.primary){var e=hs(i.primary,zt);e&&r.add(this._registerDefaultKeybinding(e,n.id,n.args,n.weight,0,n.when))}if(i&&Array.isArray(i.secondary))for(var e=0,o=i.secondary.length;e<o;e++){var s=hs(i.secondary[e],zt);s&&r.add(this._registerDefaultKeybinding(s,n.id,n.args,n.weight,-e-1,n.when))}return r};t.prototype.registerCommandAndKeybindingRule=function(t){return ui(this.registerKeybindingRule(t),hc.registerCommand(t))};t.prototype._registerDefaultKeybinding=function(t,n,i,r,e,o){var s=this;var u=this._coreKeybindings.push({keybinding:t,command:n,commandArgs:i,when:o,weight1:r,weight2:e,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,ai((function(){u(),s._cachedMergedKeybindings=null}))};t.prototype.getDefaultKeybindings=function(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(af)),this._cachedMergedKeybindings.slice(0)};return t}();var uf=new sf;function af(t,n){if(t.weight1!==n.weight1)return t.weight1-n.weight1;if(t.command&&n.command){if(t.command<n.command)return-1;if(t.command>n.command)return 1}return t.weight2-n.weight2}of.add("platform.keybindingsRegistry",uf);var hf,cf=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},ff=function(t,n){return function(i,r){n(i,r,t)}};function lf(t){return t.command!==void 0}var vf=function(){function t(n){if(t._instances.has(n))throw new TypeError("MenuId with identifier '".concat(n,"' already exists. Use MenuId.for(ident) or a unique identifier"));t._instances.set(n,this),this.id=n}return t}();vf._instances=new Map,vf.CommandPalette=new vf("CommandPalette"),vf.DebugBreakpointsContext=new vf("DebugBreakpointsContext"),vf.DebugCallStackContext=new vf("DebugCallStackContext"),vf.DebugConsoleContext=new vf("DebugConsoleContext"),vf.DebugVariablesContext=new vf("DebugVariablesContext"),vf.NotebookVariablesContext=new vf("NotebookVariablesContext"),vf.DebugHoverContext=new vf("DebugHoverContext"),vf.DebugWatchContext=new vf("DebugWatchContext"),vf.DebugToolBar=new vf("DebugToolBar"),vf.DebugToolBarStop=new vf("DebugToolBarStop"),vf.EditorContext=new vf("EditorContext"),vf.SimpleEditorContext=new vf("SimpleEditorContext"),vf.EditorContent=new vf("EditorContent"),vf.EditorLineNumberContext=new vf("EditorLineNumberContext"),vf.EditorContextCopy=new vf("EditorContextCopy"),vf.EditorContextPeek=new vf("EditorContextPeek"),vf.EditorContextShare=new vf("EditorContextShare"),vf.EditorTitle=new vf("EditorTitle"),vf.EditorTitleRun=new vf("EditorTitleRun"),vf.EditorTitleContext=new vf("EditorTitleContext"),vf.EditorTitleContextShare=new vf("EditorTitleContextShare"),vf.EmptyEditorGroup=new vf("EmptyEditorGroup"),vf.EmptyEditorGroupContext=new vf("EmptyEditorGroupContext"),vf.EditorTabsBarContext=new vf("EditorTabsBarContext"),vf.EditorTabsBarShowTabsSubmenu=new vf("EditorTabsBarShowTabsSubmenu"),vf.EditorTabsBarShowTabsZenModeSubmenu=new vf("EditorTabsBarShowTabsZenModeSubmenu"),vf.EditorActionsPositionSubmenu=new vf("EditorActionsPositionSubmenu"),vf.ExplorerContext=new vf("ExplorerContext"),vf.ExplorerContextShare=new vf("ExplorerContextShare"),vf.ExtensionContext=new vf("ExtensionContext"),vf.GlobalActivity=new vf("GlobalActivity"),vf.CommandCenter=new vf("CommandCenter"),vf.CommandCenterCenter=new vf("CommandCenterCenter"),vf.LayoutControlMenuSubmenu=new vf("LayoutControlMenuSubmenu"),vf.LayoutControlMenu=new vf("LayoutControlMenu"),vf.MenubarMainMenu=new vf("MenubarMainMenu"),vf.MenubarAppearanceMenu=new vf("MenubarAppearanceMenu"),vf.MenubarDebugMenu=new vf("MenubarDebugMenu"),vf.MenubarEditMenu=new vf("MenubarEditMenu"),vf.MenubarCopy=new vf("MenubarCopy"),vf.MenubarFileMenu=new vf("MenubarFileMenu"),vf.MenubarGoMenu=new vf("MenubarGoMenu"),vf.MenubarHelpMenu=new vf("MenubarHelpMenu"),vf.MenubarLayoutMenu=new vf("MenubarLayoutMenu"),vf.MenubarNewBreakpointMenu=new vf("MenubarNewBreakpointMenu"),vf.PanelAlignmentMenu=new vf("PanelAlignmentMenu"),vf.PanelPositionMenu=new vf("PanelPositionMenu"),vf.ActivityBarPositionMenu=new vf("ActivityBarPositionMenu"),vf.MenubarPreferencesMenu=new vf("MenubarPreferencesMenu"),vf.MenubarRecentMenu=new vf("MenubarRecentMenu"),vf.MenubarSelectionMenu=new vf("MenubarSelectionMenu"),vf.MenubarShare=new vf("MenubarShare"),vf.MenubarSwitchEditorMenu=new vf("MenubarSwitchEditorMenu"),vf.MenubarSwitchGroupMenu=new vf("MenubarSwitchGroupMenu"),vf.MenubarTerminalMenu=new vf("MenubarTerminalMenu"),vf.MenubarViewMenu=new vf("MenubarViewMenu"),vf.MenubarHomeMenu=new vf("MenubarHomeMenu"),vf.OpenEditorsContext=new vf("OpenEditorsContext"),vf.OpenEditorsContextShare=new vf("OpenEditorsContextShare"),vf.ProblemsPanelContext=new vf("ProblemsPanelContext"),vf.SCMInputBox=new vf("SCMInputBox"),vf.SCMChangesSeparator=new vf("SCMChangesSeparator"),vf.SCMIncomingChanges=new vf("SCMIncomingChanges"),vf.SCMIncomingChangesContext=new vf("SCMIncomingChangesContext"),vf.SCMIncomingChangesSetting=new vf("SCMIncomingChangesSetting"),vf.SCMOutgoingChanges=new vf("SCMOutgoingChanges"),vf.SCMOutgoingChangesContext=new vf("SCMOutgoingChangesContext"),vf.SCMOutgoingChangesSetting=new vf("SCMOutgoingChangesSetting"),vf.SCMIncomingChangesAllChangesContext=new vf("SCMIncomingChangesAllChangesContext"),vf.SCMIncomingChangesHistoryItemContext=new vf("SCMIncomingChangesHistoryItemContext"),vf.SCMOutgoingChangesAllChangesContext=new vf("SCMOutgoingChangesAllChangesContext"),vf.SCMOutgoingChangesHistoryItemContext=new vf("SCMOutgoingChangesHistoryItemContext"),vf.SCMChangeContext=new vf("SCMChangeContext"),vf.SCMResourceContext=new vf("SCMResourceContext"),vf.SCMResourceContextShare=new vf("SCMResourceContextShare"),vf.SCMResourceFolderContext=new vf("SCMResourceFolderContext"),vf.SCMResourceGroupContext=new vf("SCMResourceGroupContext"),vf.SCMSourceControl=new vf("SCMSourceControl"),vf.SCMSourceControlInline=new vf("SCMSourceControlInline"),vf.SCMSourceControlTitle=new vf("SCMSourceControlTitle"),vf.SCMTitle=new vf("SCMTitle"),vf.SearchContext=new vf("SearchContext"),vf.SearchActionMenu=new vf("SearchActionContext"),vf.StatusBarWindowIndicatorMenu=new vf("StatusBarWindowIndicatorMenu"),vf.StatusBarRemoteIndicatorMenu=new vf("StatusBarRemoteIndicatorMenu"),vf.StickyScrollContext=new vf("StickyScrollContext"),vf.TestItem=new vf("TestItem"),vf.TestItemGutter=new vf("TestItemGutter"),vf.TestMessageContext=new vf("TestMessageContext"),vf.TestMessageContent=new vf("TestMessageContent"),vf.TestPeekElement=new vf("TestPeekElement"),vf.TestPeekTitle=new vf("TestPeekTitle"),vf.TouchBarContext=new vf("TouchBarContext"),vf.TitleBarContext=new vf("TitleBarContext"),vf.TitleBarTitleContext=new vf("TitleBarTitleContext"),vf.TunnelContext=new vf("TunnelContext"),vf.TunnelPrivacy=new vf("TunnelPrivacy"),vf.TunnelProtocol=new vf("TunnelProtocol"),vf.TunnelPortInline=new vf("TunnelInline"),vf.TunnelTitle=new vf("TunnelTitle"),vf.TunnelLocalAddressInline=new vf("TunnelLocalAddressInline"),vf.TunnelOriginInline=new vf("TunnelOriginInline"),vf.ViewItemContext=new vf("ViewItemContext"),vf.ViewContainerTitle=new vf("ViewContainerTitle"),vf.ViewContainerTitleContext=new vf("ViewContainerTitleContext"),vf.ViewTitle=new vf("ViewTitle"),vf.ViewTitleContext=new vf("ViewTitleContext"),vf.CommentEditorActions=new vf("CommentEditorActions"),vf.CommentThreadTitle=new vf("CommentThreadTitle"),vf.CommentThreadActions=new vf("CommentThreadActions"),vf.CommentThreadAdditionalActions=new vf("CommentThreadAdditionalActions"),vf.CommentThreadTitleContext=new vf("CommentThreadTitleContext"),vf.CommentThreadCommentContext=new vf("CommentThreadCommentContext"),vf.CommentTitle=new vf("CommentTitle"),vf.CommentActions=new vf("CommentActions"),vf.CommentsViewThreadActions=new vf("CommentsViewThreadActions"),vf.InteractiveToolbar=new vf("InteractiveToolbar"),vf.InteractiveCellTitle=new vf("InteractiveCellTitle"),vf.InteractiveCellDelete=new vf("InteractiveCellDelete"),vf.InteractiveCellExecute=new vf("InteractiveCellExecute"),vf.InteractiveInputExecute=new vf("InteractiveInputExecute"),vf.IssueReporter=new vf("IssueReporter"),vf.NotebookToolbar=new vf("NotebookToolbar"),vf.NotebookStickyScrollContext=new vf("NotebookStickyScrollContext"),vf.NotebookCellTitle=new vf("NotebookCellTitle"),vf.NotebookCellDelete=new vf("NotebookCellDelete"),vf.NotebookCellInsert=new vf("NotebookCellInsert"),vf.NotebookCellBetween=new vf("NotebookCellBetween"),vf.NotebookCellListTop=new vf("NotebookCellTop"),vf.NotebookCellExecute=new vf("NotebookCellExecute"),vf.NotebookCellExecuteGoTo=new vf("NotebookCellExecuteGoTo"),vf.NotebookCellExecutePrimary=new vf("NotebookCellExecutePrimary"),vf.NotebookDiffCellInputTitle=new vf("NotebookDiffCellInputTitle"),vf.NotebookDiffCellMetadataTitle=new vf("NotebookDiffCellMetadataTitle"),vf.NotebookDiffCellOutputsTitle=new vf("NotebookDiffCellOutputsTitle"),vf.NotebookOutputToolbar=new vf("NotebookOutputToolbar"),vf.NotebookOutlineFilter=new vf("NotebookOutlineFilter"),vf.NotebookOutlineActionMenu=new vf("NotebookOutlineActionMenu"),vf.NotebookEditorLayoutConfigure=new vf("NotebookEditorLayoutConfigure"),vf.NotebookKernelSource=new vf("NotebookKernelSource"),vf.BulkEditTitle=new vf("BulkEditTitle"),vf.BulkEditContext=new vf("BulkEditContext"),vf.TimelineItemContext=new vf("TimelineItemContext"),vf.TimelineTitle=new vf("TimelineTitle"),vf.TimelineTitleContext=new vf("TimelineTitleContext"),vf.TimelineFilterSubMenu=new vf("TimelineFilterSubMenu"),vf.AccountsContext=new vf("AccountsContext"),vf.SidebarTitle=new vf("SidebarTitle"),vf.PanelTitle=new vf("PanelTitle"),vf.AuxiliaryBarTitle=new vf("AuxiliaryBarTitle"),vf.AuxiliaryBarHeader=new vf("AuxiliaryBarHeader"),vf.TerminalInstanceContext=new vf("TerminalInstanceContext"),vf.TerminalEditorInstanceContext=new vf("TerminalEditorInstanceContext"),vf.TerminalNewDropdownContext=new vf("TerminalNewDropdownContext"),vf.TerminalTabContext=new vf("TerminalTabContext"),vf.TerminalTabEmptyAreaContext=new vf("TerminalTabEmptyAreaContext"),vf.TerminalStickyScrollContext=new vf("TerminalStickyScrollContext"),vf.WebviewContext=new vf("WebviewContext"),vf.InlineCompletionsActions=new vf("InlineCompletionsActions"),vf.InlineEditActions=new vf("InlineEditActions"),vf.NewFile=new vf("NewFile"),vf.MergeInput1Toolbar=new vf("MergeToolbar1Toolbar"),vf.MergeInput2Toolbar=new vf("MergeToolbar2Toolbar"),vf.MergeBaseToolbar=new vf("MergeBaseToolbar"),vf.MergeInputResultToolbar=new vf("MergeToolbarResultToolbar"),vf.InlineSuggestionToolbar=new vf("InlineSuggestionToolbar"),vf.InlineEditToolbar=new vf("InlineEditToolbar"),vf.ChatContext=new vf("ChatContext"),vf.ChatCodeBlock=new vf("ChatCodeblock"),vf.ChatMessageTitle=new vf("ChatMessageTitle"),vf.ChatExecute=new vf("ChatExecute"),vf.ChatExecuteSecondary=new vf("ChatExecuteSecondary"),vf.ChatInputSide=new vf("ChatInputSide"),vf.AccessibleView=new vf("AccessibleView"),vf.MultiDiffEditorFileToolbar=new vf("MultiDiffEditorFileToolbar"),vf.DiffEditorHunkToolbar=new vf("DiffEditorHunkToolbar"),vf.DiffEditorSelectionToolbar=new vf("DiffEditorSelectionToolbar");var df=Zh("menuService");var gf=function(){function t(t){this.id=t,this.has=function(n){return n===t}}t.for=function(n){var i=this._all.get(n);return i||(i=new t(n),this._all.set(n,i)),i};t.merge=function(n){var i=new Set;for(var r=0,e=n;r<e.length;r++){var o=e[r];o instanceof t&&i.add(o.id)}return i};return t}();gf._all=new Map;var pf=new(function(){function t(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Di({merge:gf.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}t.prototype.addCommand=function(t){var n=this;return this._commands.set(t.id,t),this._onDidChangeMenu.fire(gf.for(vf.CommandPalette)),ai((function(){n._commands.delete(t.id)&&n._onDidChangeMenu.fire(gf.for(vf.CommandPalette))}))};t.prototype.getCommand=function(t){return this._commands.get(t)};t.prototype.getCommands=function(){var t=new Map;return this._commands.forEach((function(n,i){return t.set(i,n)})),t};t.prototype.appendMenuItem=function(t,n){var i=this;var r=this._menuItems.get(t);r||(r=new tn,this._menuItems.set(t,r));var e=r.push(n);return this._onDidChangeMenu.fire(gf.for(t)),ai((function(){e(),i._onDidChangeMenu.fire(gf.for(t))}))};t.prototype.appendMenuItems=function(t){var n=new hi;for(var i=0,r=t;i<r.length;i++){var e=r[i],o=e.id,s=e.item;n.add(this.appendMenuItem(o,s))}return n};t.prototype.getMenuItems=function(t){var n;return n=this._menuItems.has(t)?__spreadArray([],this._menuItems.get(t),true):[],t===vf.CommandPalette&&this._appendImplicitItems(n),n};t.prototype._appendImplicitItems=function(t){var n=new Set;for(var i=0,r=t;i<r.length;i++){var e=r[i];lf(e)&&(n.add(e.command.id),e.alt&&n.add(e.alt.id))}this._commands.forEach((function(i,r){n.has(r)||t.push({command:i})}))};return t}());var wf=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,"submenuitem.".concat(n.submenu.id),typeof n.title=="string"?n.title:n.title.value,r,"submenu")||this,e.item=n,e.hideActions=i;return e}return n}(rc);var mf=hf=function(){function t(n,i,r,e,o,s){var u,a;var h;if(this.hideActions=e,this._commandService=s,this.id=n.id,this.label=t.label(n,r),this.tooltip=(a=typeof n.tooltip=="string"?n.tooltip:(u=n.tooltip)===null||u===void 0?void 0:u.value)!==null&&a!==void 0?a:"",this.enabled=!n.precondition||o.contextMatchesRules(n.precondition),this.checked=void 0,n.toggled){var c=n.toggled.condition?n.toggled:{condition:n.toggled};this.checked=o.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),this.checked&&uc.isThemeIcon(c.icon)&&(h=c.icon),this.checked&&c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}h||(h=uc.isThemeIcon(n.icon)?n.icon:void 0),this.item=n,this.alt=i?new t(i,void 0,r,e,o,s):void 0,this._options=r,this.class=h&&uc.asClassName(h)}t.label=function(t,n){return n!=null&&n.renderShortTitle&&t.shortTitle?typeof t.shortTitle=="string"?t.shortTitle:t.shortTitle.value:typeof t.title=="string"?t.title:t.title.value};t.prototype.run=function(){var t;var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}var r,e;var o=[];return!((r=this._options)===null||r===void 0)&&r.arg&&(o=__spreadArray(__spreadArray([],o,true),[this._options.arg],false)),!((e=this._options)===null||e===void 0)&&e.shouldForwardArgs&&(o=__spreadArray(__spreadArray([],o,true),n,true)),(t=this._commandService).executeCommand.apply(t,__spreadArray([this.id],o,false))};return t}();mf=hf=cf([ff(4,Gc),ff(5,ac)],mf);var bf=function(){function t(t){this.desc=t}return t}();function yf(t){var n=new hi,i=new t,r=i.desc,e=r.f1,o=r.menu,s=r.keybinding,u=__rest(r,["f1","menu","keybinding"]);if(hc.getCommand(u.id))throw new Error("Cannot register two commands with the same id: ".concat(u.id));if(n.add(hc.registerCommand({id:u.id,handler:function(t){var n=[];for(var r=1;r<arguments.length;r++){n[r-1]=arguments[r]}return i.run.apply(i,__spreadArray([t],n,false))},metadata:u.metadata})),Array.isArray(o))for(var a=0,h=o;a<h.length;a++){var c=h[a];n.add(pf.appendMenuItem(c.id,__assign({command:__assign(__assign({},u),{precondition:c.precondition===null?void 0:u.precondition})},c)))}else o&&n.add(pf.appendMenuItem(o.id,__assign({command:__assign(__assign({},u),{precondition:o.precondition===null?void 0:u.precondition})},o)));if(e&&(n.add(pf.appendMenuItem(vf.CommandPalette,{command:u,when:u.precondition})),n.add(pf.addCommand(u))),Array.isArray(s))for(var f=0,l=s;f<l.length;f++){var c=l[f];n.add(uf.registerKeybindingRule(__assign(__assign({},c),{id:u.id,when:u.precondition?Dc.and(u.precondition,c.when):c.when})))}else s&&n.add(uf.registerKeybindingRule(__assign(__assign({},s),{id:u.id,when:u.precondition?Dc.and(u.precondition,s.when):s.when})));return n}var _f=Zh("telemetryService"),kf=Zh("logService");var xf;(function(t){t[t.Off=0]="Off",t[t.Trace=1]="Trace",t[t.Debug=2]="Debug",t[t.Info=3]="Info",t[t.Warning=4]="Warning",t[t.Error=5]="Error"})(xf||(xf={}));var Cf=xf.Info;var Sf=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n.level=Cf,n._onDidChangeLogLevel=n._register(new ki),n.onDidChangeLogLevel=n._onDidChangeLogLevel.event;return n}n.prototype.setLevel=function(t){this.level!==t&&(this.level=t,this._onDidChangeLogLevel.fire(this.level))};n.prototype.getLevel=function(){return this.level};n.prototype.checkLogLevel=function(t){return this.level!==xf.Off&&this.level<=t};return n}(ci);var Df=function(t){__extends(n,t);function n(n,i){if(n===void 0){n=Cf}if(i===void 0){i=!0}var r=this;r=t.call(this)||this,r.useColors=i,r.setLevel(n);return r}n.prototype.trace=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}this.checkLogLevel(xf.Trace)&&(this.useColors?console.log.apply(console,__spreadArray(["%cTRACE","color: #888",t],n,false)):console.log.apply(console,__spreadArray([t],n,false)))};n.prototype.debug=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}this.checkLogLevel(xf.Debug)&&(this.useColors?console.log.apply(console,__spreadArray(["%cDEBUG","background: #eee; color: #888",t],n,false)):console.log.apply(console,__spreadArray([t],n,false)))};n.prototype.info=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}this.checkLogLevel(xf.Info)&&(this.useColors?console.log.apply(console,__spreadArray(["%c INFO","color: #33f",t],n,false)):console.log.apply(console,__spreadArray([t],n,false)))};n.prototype.warn=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}this.checkLogLevel(xf.Warning)&&(this.useColors?console.log.apply(console,__spreadArray(["%c WARN","color: #993",t],n,false)):console.log.apply(console,__spreadArray([t],n,false)))};n.prototype.error=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}this.checkLogLevel(xf.Error)&&(this.useColors?console.log.apply(console,__spreadArray(["%c  ERR","color: #f33",t],n,false)):console.error.apply(console,__spreadArray([t],n,false)))};return n}(Sf);var Af=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.loggers=n,n.length&&i.setLevel(n[0].getLevel());return i}n.prototype.setLevel=function(n){for(var i=0,r=this.loggers;i<r.length;i++){var e=r[i];e.setLevel(n)}t.prototype.setLevel.call(this,n)};n.prototype.trace=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}for(var r=0,e=this.loggers;r<e.length;r++){var o=e[r];o.trace.apply(o,__spreadArray([t],n,false))}};n.prototype.debug=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}for(var r=0,e=this.loggers;r<e.length;r++){var o=e[r];o.debug.apply(o,__spreadArray([t],n,false))}};n.prototype.info=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}for(var r=0,e=this.loggers;r<e.length;r++){var o=e[r];o.info.apply(o,__spreadArray([t],n,false))}};n.prototype.warn=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}for(var r=0,e=this.loggers;r<e.length;r++){var o=e[r];o.warn.apply(o,__spreadArray([t],n,false))}};n.prototype.error=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}for(var r=0,e=this.loggers;r<e.length;r++){var o=e[r];o.error.apply(o,__spreadArray([t],n,false))}};n.prototype.dispose=function(){for(var n=0,i=this.loggers;n<i.length;n++){var r=i[n];r.dispose()}t.prototype.dispose.call(this)};return n}(Sf);new qc("logLevel",function(t){switch(t){case xf.Trace:return"trace";case xf.Debug:return"debug";case xf.Info:return"info";case xf.Warning:return"warn";case xf.Error:return"error";case xf.Off:return"off"}}(xf.Info));var Of=function(){function t(t){this.id=t.id,this.precondition=t.precondition,this._kbOpts=t.kbOpts,this._menuOpts=t.menuOpts,this.metadata=t.metadata}t.prototype.register=function(){var t=this;if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){var n=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(var i=0,r=n;i<r.length;i++){var e=r[i];var o=e.kbExpr;this.precondition&&(o=o?Dc.and(o,this.precondition):this.precondition);var s={id:this.id,weight:e.weight,args:e.args,when:o,primary:e.primary,secondary:e.secondary,win:e.win,linux:e.linux,mac:e.mac};uf.registerKeybindingRule(s)}}hc.registerCommand({id:this.id,handler:function(n,i){return t.runCommand(n,i)},metadata:this.metadata})};t.prototype._registerMenuItem=function(t){pf.appendMenuItem(t.menuId,{group:t.group,command:{id:this.id,title:t.title,icon:t.icon,precondition:this.precondition},when:t.when,order:t.order})};return t}();var Ef=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._implementations=[];return n}n.prototype.addImplementation=function(t,n,i,r){var e=this;return this._implementations.push({priority:t,name:n,implementation:i,when:r}),this._implementations.sort((function(t,n){return n.priority-t.priority})),{dispose:function(){for(var t=0;t<e._implementations.length;t++)if(e._implementations[t].implementation===i)return void e._implementations.splice(t,1)}}};n.prototype.runCommand=function(t,n){var i=t.get(kf),r=t.get(Gc);i.trace("Executing Command '".concat(this.id,"' which has ").concat(this._implementations.length," bound."));for(var e=0,o=this._implementations;e<o.length;e++){var s=o[e];if(s.when){var u=r.getContext(Ka());if(!s.when.evaluate(u))continue}var a=s.implementation(t,n);if(a)return i.trace("Command '".concat(this.id,"' was handled by '").concat(s.name,"'.")),typeof a=="boolean"?void 0:a}i.trace("The Command '".concat(this.id,"' was not handled by any implementation."))};return n}(Of);var Mf=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r.command=n;return r}n.prototype.runCommand=function(t,n){return this.command.runCommand(t,n)};return n}(Of);var Ff=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.bindToContribution=function(t){return function(n){__extends(i,n);function i(t){var i=this;i=n.call(this,t)||this,i._callback=t.handler;return i}i.prototype.runEditorCommand=function(n,i,r){var e=t(i);e&&this._callback(e,r)};return i}(n)};n.runEditorCommand=function(t,n,i,r){var e=t.get(Qh),o=e.getFocusedCodeEditor()||e.getActiveCodeEditor();if(o)return o.invokeWithinContext((function(t){if(t.get(Gc).contextMatchesRules(i!==null&&i!==void 0?i:void 0))return r(t,o,n)}))};n.prototype.runCommand=function(t,i){var r=this;return n.runEditorCommand(t,i,this.precondition,(function(t,n,i){return r.runEditorCommand(t,n,i)}))};return n}(Of);var Lf=function(t){__extends(n,t);function n(i){var r=this;r=t.call(this,n.convertOptions(i))||this,r.label=i.label,r.alias=i.alias;return r}n.convertOptions=function(t){var n;function i(n){return n.menuId||(n.menuId=vf.EditorContext),n.title||(n.title=t.label),n.when=Dc.and(t.precondition,n.when),n}return n=Array.isArray(t.menuOpts)?t.menuOpts:t.menuOpts?[t.menuOpts]:[],Array.isArray(t.contextMenuOpts)?n.push.apply(n,t.contextMenuOpts.map(i)):t.contextMenuOpts&&n.push(i(t.contextMenuOpts)),t.menuOpts=n,t};n.prototype.runEditorCommand=function(t,n,i){return this.reportTelemetry(t,n),this.run(t,n,i||{})};n.prototype.reportTelemetry=function(t,n){t.get(_f).publicLog2("editorActionInvoked",{name:this.label,id:this.id})};return n}(Ff);var jf=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._implementations=[];return n}n.prototype.addImplementation=function(t,n){var i=this;return this._implementations.push([t,n]),this._implementations.sort((function(t,n){return n[0]-t[0]})),{dispose:function(){for(var t=0;t<i._implementations.length;t++)if(i._implementations[t][1]===n)return void i._implementations.splice(t,1)}}};n.prototype.run=function(t,n,i){for(var r=0,e=this._implementations;r<e.length;r++){var o=e[r];var s=o[1](t,n,i);if(s)return typeof s=="boolean"?void 0:s}};return n}(Lf);var Rf=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.run=function(t){var n=this;var i=[];for(var r=1;r<arguments.length;r++){i[r-1]=arguments[r]}var e=t.get(Qh),o=e.getFocusedCodeEditor()||e.getActiveCodeEditor();if(o)return o.invokeWithinContext((function(t){var r,e;var s=t.get(Gc),u=t.get(kf);if(s.contextMatchesRules((r=n.desc.precondition)!==null&&r!==void 0?r:void 0))return n.runEditorCommand.apply(n,__spreadArray([t,o],i,false));u.debug("[EditorAction2] NOT running command because its precondition is FALSE",n.desc.id,(e=n.desc.precondition)===null||e===void 0?void 0:e.serialize())}))};return n}(bf);function Tf(t,n){hc.registerCommand(t,(function(t){var i=[];for(var r=1;r<arguments.length;r++){i[r-1]=arguments[r]}var e=t.get(Jh),o=i[0],s=i[1];Z(Cr.isUri(o)),Z(Tr.isIPosition(s));var u=t.get(Yh).getModel(o);if(u){var a=Tr.lift(s);return e.invokeFunction.apply(e,__spreadArray([n,u,a],i.slice(2),false))}return t.get(Xh).createModelReference(o).then((function(t){return new Promise((function(r,o){try{r(e.invokeFunction(n,t.object.textEditorModel,Tr.lift(s),i.slice(2)))}catch(t){o(t)}})).finally((function(){t.dispose()}))}))}))}function If(t){return Hf.INSTANCE.registerEditorCommand(t),t}function Bf(t){var n=new t;return Hf.INSTANCE.registerEditorAction(n),n}function Nf(t){return Hf.INSTANCE.registerEditorAction(t),t}function Pf(t,n,i){Hf.INSTANCE.registerEditorContribution(t,n,i)}var Wf;(function(t){t.getEditorCommand=function(t){return Hf.INSTANCE.getEditorCommand(t)},t.getEditorActions=function(){return Hf.INSTANCE.getEditorActions()},t.getEditorContributions=function(){return Hf.INSTANCE.getEditorContributions()},t.getSomeEditorContributions=function(t){return Hf.INSTANCE.getEditorContributions().filter((function(n){return t.indexOf(n.id)>=0}))},t.getDiffEditorContributions=function(){return Hf.INSTANCE.getDiffEditorContributions()}})(Wf||(Wf={}));var Hf=function(){function t(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}t.prototype.registerEditorContribution=function(t,n,i){this.editorContributions.push({id:t,ctor:n,instantiation:i})};t.prototype.getEditorContributions=function(){return this.editorContributions.slice(0)};t.prototype.getDiffEditorContributions=function(){return this.diffEditorContributions.slice(0)};t.prototype.registerEditorAction=function(t){t.register(),this.editorActions.push(t)};t.prototype.getEditorActions=function(){return this.editorActions};t.prototype.registerEditorCommand=function(t){t.register(),this.editorCommands[t.id]=t};t.prototype.getEditorCommand=function(t){return this.editorCommands[t]||null};return t}();function zf(t){return t.register(),t}Hf.INSTANCE=new Hf,of.add("editor.contributions",Hf.INSTANCE);var Uf=zf(new Ef({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:vf.MenubarEditMenu,group:"1_do",title:ht(0,"&&Undo"),order:1},{menuId:vf.CommandPalette,group:"",title:ht(0,"Undo"),order:1}]}));zf(new Mf(Uf,{id:"default:undo",precondition:void 0}));var Kf=zf(new Ef({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:vf.MenubarEditMenu,group:"1_do",title:ht(0,"&&Redo"),order:2},{menuId:vf.CommandPalette,group:"",title:ht(0,"Redo"),order:1}]}));zf(new Mf(Kf,{id:"default:redo",precondition:void 0}));var Vf=zf(new Ef({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:vf.MenubarSelectionMenu,group:"1_basic",title:ht(0,"&&Select All"),order:1},{menuId:vf.CommandPalette,group:"",title:ht(0,"Select All"),order:1}]}));var qf=!1;function Gf(t){Rt&&(qf||(qf=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(t.message))}var $f=function(){function t(t,n,i,r){this.vsWorker=t,this.req=n,this.method=i,this.args=r,this.type=0}return t}();var Jf=function(){function t(t,n,i,r){this.vsWorker=t,this.seq=n,this.res=i,this.err=r,this.type=1}return t}();var Zf=function(){function t(t,n,i,r){this.vsWorker=t,this.req=n,this.eventName=i,this.arg=r,this.type=2}return t}();var Qf=function(){function t(t,n,i){this.vsWorker=t,this.req=n,this.event=i,this.type=3}return t}();var Yf=function(){function t(t,n){this.vsWorker=t,this.req=n,this.type=4}return t}();var Xf=function(){function t(t){this._workerId=-1,this._handler=t,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}t.prototype.setWorkerId=function(t){this._workerId=t};t.prototype.sendMessage=function(t,n){var i=this;var r=String(++this._lastSentReq);return new Promise((function(e,o){i._pendingReplies[r]={resolve:e,reject:o},i._send(new $f(i._workerId,r,t,n))}))};t.prototype.listen=function(t,n){var i=this;var r=null;var e=new ki({onWillAddFirstListener:function(){r=String(++i._lastSentReq),i._pendingEmitters.set(r,e),i._send(new Zf(i._workerId,r,t,n))},onDidRemoveLastListener:function(){i._pendingEmitters.delete(r),i._send(new Yf(i._workerId,r)),r=null}});return e.event};t.prototype.handleMessage=function(t){t&&t.vsWorker&&(this._workerId!==-1&&t.vsWorker!==this._workerId||this._handleMessage(t))};t.prototype._handleMessage=function(t){switch(t.type){case 1:return this._handleReplyMessage(t);case 0:return this._handleRequestMessage(t);case 2:return this._handleSubscribeEventMessage(t);case 3:return this._handleEventMessage(t);case 4:return this._handleUnsubscribeEventMessage(t)}};t.prototype._handleReplyMessage=function(t){if(!this._pendingReplies[t.seq])return void console.warn("Got reply to unknown seq");var n=this._pendingReplies[t.seq];if(delete this._pendingReplies[t.seq],t.err){var i=t.err;return t.err.$isError&&(i=new Error,i.name=t.err.name,i.message=t.err.message,i.stack=t.err.stack),void n.reject(i)}n.resolve(t.res)};t.prototype._handleRequestMessage=function(t){var n=this;var i=t.req;this._handler.handleMessage(t.method,t.args).then((function(t){n._send(new Jf(n._workerId,i,t,void 0))}),(function(t){t.detail instanceof Error&&(t.detail=Jn(t.detail)),n._send(new Jf(n._workerId,i,void 0,Jn(t)))}))};t.prototype._handleSubscribeEventMessage=function(t){var n=this;var i=t.req,r=this._handler.handleEvent(t.eventName,t.arg)((function(t){n._send(new Qf(n._workerId,i,t))}));this._pendingEvents.set(i,r)};t.prototype._handleEventMessage=function(t){this._pendingEmitters.has(t.req)?this._pendingEmitters.get(t.req).fire(t.event):console.warn("Got event for unknown req")};t.prototype._handleUnsubscribeEventMessage=function(t){this._pendingEvents.has(t.req)?(this._pendingEvents.get(t.req).dispose(),this._pendingEvents.delete(t.req)):console.warn("Got unsubscribe for unknown req")};t.prototype._send=function(t){var n=[];if(t.type===0)for(var i=0;i<t.args.length;i++)t.args[i]instanceof ArrayBuffer&&n.push(t.args[i]);else t.type===1&&t.res instanceof ArrayBuffer&&n.push(t.res);this._handler.sendMessage(t,n)};return t}();var tl=function(t){__extends(n,t);function n(n,i,r){var e=t.call(this)||this;var o=null;e._worker=e._register(n.create("vs/base/common/worker/simpleWorker",(function(t){e._protocol.handleMessage(t)}),(function(t){o==null||o(t)}))),e._protocol=new Xf({sendMessage:function(t,n){e._worker.postMessage(t,n)},handleMessage:function(t,n){if(typeof r[t]!="function")return Promise.reject(new Error("Missing method "+t+" on main thread host."));try{return Promise.resolve(r[t].apply(r,n))}catch(t){return Promise.reject(t)}},handleEvent:function(t,n){if(il(t)){var i=r[t].call(r,n);if(typeof i!="function")throw new Error("Missing dynamic event ".concat(t," on main thread host."));return i}if(nl(t)){var i=r[t];if(typeof i!="function")throw new Error("Missing event ".concat(t," on main thread host."));return i}throw new Error("Malformed event name ".concat(t))}}),e._protocol.setWorkerId(e._worker.getId());var s=null;var u=globalThis.require;u!==void 0&&typeof u.getConfig=="function"?s=u.getConfig():globalThis.requirejs!==void 0&&(s=globalThis.requirejs.s.contexts._.config);var a=st(r);e._onModuleLoaded=e._protocol.sendMessage("$initialize",[e._worker.getId(),JSON.parse(JSON.stringify(s)),i,a]);var h=function(t,n){return e._request(t,n)},c=function(t,n){return e._protocol.listen(t,n)};e._lazyProxy=new Promise((function(t,n){o=n,e._onModuleLoaded.then((function(n){t(function(t,n,i){var r=function(t){return function(){var i=Array.prototype.slice.call(arguments,0);return n(t,i)}},e=function(t){return function(n){return i(t,n)}},o={};for(var s=0,u=t;s<u.length;s++){var a=u[s];il(a)?o[a]=e(a):nl(a)?o[a]=i(a,void 0):o[a]=r(a)}return o}(n,h,c))}),(function(t){n(t),e._onError("Worker failed to load "+i,t)}))}));return e}n.prototype.getProxyObject=function(){return this._lazyProxy};n.prototype._request=function(t,n){var i=this;return new Promise((function(r,e){i._onModuleLoaded.then((function(){i._protocol.sendMessage(t,n).then(r,e)}),e)}))};n.prototype._onError=function(t,n){console.error(t),console.info(n)};return n}(ci);function nl(t){return t[0]==="o"&&t[1]==="n"&&xo(t.charCodeAt(2))}function il(t){return/^onDynamic/.test(t)&&xo(t.charCodeAt(9))}function rl(t,n){var i;var r=globalThis.MonacoEnvironment;if(r!=null&&r.createTrustedTypesPolicy)try{return r.createTrustedTypesPolicy(t,n)}catch(t){return void Gn(t)}try{return(i=Xe.trustedTypes)===null||i===void 0?void 0:i.createPolicy(t,n)}catch(t){return void Gn(t)}}var el=rl("defaultWorkerFactory",{createScriptURL:function(t){return t}});var ol=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s.id=i,s.label=r;var u=function(t){var n=globalThis.MonacoEnvironment;if(n){if(typeof n.getWorker=="function")return n.getWorker("workerMain.js",t);if(typeof n.getWorkerUrl=="function"){var i=n.getWorkerUrl("workerMain.js",t);return new Worker(el?el.createScriptURL(i):i,{name:t})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}(r);typeof u.then=="function"?s.worker=u:s.worker=Promise.resolve(u),s.postMessage(n,[]),s.worker.then((function(t){t.onmessage=function(t){e(t.data)},t.onmessageerror=o,typeof t.addEventListener=="function"&&t.addEventListener("error",o)})),s._register(ai((function(){var t;(t=s.worker)===null||t===void 0||t.then((function(t){t.onmessage=null,t.onmessageerror=null,t.removeEventListener("error",o),t.terminate()})),s.worker=null})));return s}n.prototype.getId=function(){return this.id};n.prototype.postMessage=function(t,n){var i=this;var r;(r=this.worker)===null||r===void 0||r.then((function(r){try{r.postMessage(t,n)}catch(t){Gn(t),Gn(new Error("FAILED to post message to '".concat(i.label,"'-worker"),{cause:t}))}}))};return n}(ci);var sl=function(){function t(t){this._label=t,this._webWorkerFailedBeforeError=!1}t.prototype.create=function(n,i,r){var e=this;var o=++t.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new ol(n,o,this._label||"anonymous"+o,i,(function(t){Gf(t),e._webWorkerFailedBeforeError=t,r(t)}))};return t}();var ul;sl.LAST_WORKER_ID=0,function(t){t[t.None=0]="None",t[t.Indent=1]="Indent",t[t.IndentOutdent=2]="IndentOutdent",t[t.Outdent=3]="Outdent"}(ul||(ul={}));var al=function(){function t(t){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=t.open,this.close=t.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(t.notIn))for(var n=0,i=t.notIn.length;n<i;n++)switch(t.notIn[n]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1}}t.prototype.isOK=function(t){switch(t){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}};t.prototype.shouldAutoClose=function(t,n){if(t.getTokenCount()===0)return!0;var i=t.findTokenIndexAtOffset(n-2),r=t.getStandardTokenType(i);return this.isOK(r)};t.prototype._findNeutralCharacterInRange=function(t,n){for(var i=t;i<=n;i++){var r=String.fromCharCode(i);if(!this.open.includes(r)&&!this.close.includes(r))return r}return null};t.prototype.findNeutralCharacter=function(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter};return t}();var hl=function(){function t(t){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(var n=0,i=t;n<i.length;n++){var r=i[n];cl(this.autoClosingPairsOpenByStart,r.open.charAt(0),r),cl(this.autoClosingPairsOpenByEnd,r.open.charAt(r.open.length-1),r),cl(this.autoClosingPairsCloseByStart,r.close.charAt(0),r),cl(this.autoClosingPairsCloseByEnd,r.close.charAt(r.close.length-1),r),r.close.length===1&&r.open.length===1&&cl(this.autoClosingPairsCloseSingleChar,r.close,r)}}return t}();function cl(t,n,i){t.has(n)?t.get(n).push(i):t.set(n,[i])}function fl(t,n){var i=t.getCount(),r=t.findTokenIndexAtOffset(n),e=t.getLanguageId(r);var o=r;for(;o+1<i&&t.getLanguageId(o+1)===e;)o++;var s=r;for(;s>0&&t.getLanguageId(s-1)===e;)s--;return new ll(t,e,s,o+1,t.getStartOffset(s),t.getEndOffset(o))}var ll=function(){function t(t,n,i,r,e,o){this._scopedLineTokensBrand=void 0,this._actual=t,this.languageId=n,this._firstTokenIndex=i,this._lastTokenIndex=r,this.firstCharOffset=e,this._lastCharOffset=o}t.prototype.getLineContent=function(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)};t.prototype.getActualLineContentBefore=function(t){return this._actual.getLineContent().substring(0,this.firstCharOffset+t)};t.prototype.getTokenCount=function(){return this._lastTokenIndex-this._firstTokenIndex};t.prototype.findTokenIndexAtOffset=function(t){return this._actual.findTokenIndexAtOffset(t+this.firstCharOffset)-this._firstTokenIndex};t.prototype.getStandardTokenType=function(t){return this._actual.getStandardTokenType(t+this._firstTokenIndex)};return t}();function vl(t){return!!(3&t)}var dl=function(){function t(n){if(n.autoClosingPairs?this._autoClosingPairs=n.autoClosingPairs.map((function(t){return new al(t)})):n.brackets?this._autoClosingPairs=n.brackets.map((function(t){return new al({open:t[0],close:t[1]})})):this._autoClosingPairs=[],n.__electricCharacterSupport&&n.__electricCharacterSupport.docComment){var i=n.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new al({open:i.open,close:i.close||""}))}this._autoCloseBeforeForQuotes=typeof n.autoCloseBefore=="string"?n.autoCloseBefore:t.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof n.autoCloseBefore=="string"?n.autoCloseBefore:t.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=n.surroundingPairs||this._autoClosingPairs}t.prototype.getAutoClosingPairs=function(){return this._autoClosingPairs};t.prototype.getAutoCloseBeforeSet=function(t){return t?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets};t.prototype.getSurroundingPairs=function(){return this._surroundingPairs};return t}();dl.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=";:.,=}])> \n\t",dl.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS="'\"`;:.,=}])> \n\t";var gl=typeof Buffer<"u";var pl,wl,ml,bl;var yl=function(){function t(t){this.buffer=t,this.byteLength=this.buffer.byteLength}t.wrap=function(n){return gl&&!Buffer.isBuffer(n)&&(n=Buffer.from(n.buffer,n.byteOffset,n.byteLength)),new t(n)};t.prototype.toString=function(){return gl?this.buffer.toString():(pl||(pl=new TextDecoder),pl.decode(this.buffer))};return t}();function _l(t,n){return(t[n+0]|0)>>>0|t[n+1]<<8>>>0}function kl(t,n,i){t[i+0]=255&n,n>>>=8,t[i+1]=255&n}function xl(t,n){return t[n]*Math.pow(2,24)+65536*t[n+1]+256*t[n+2]+t[n+3]}function Cl(t,n,i){t[i+3]=n,n>>>=8,t[i+2]=n,n>>>=8,t[i+1]=n,n>>>=8,t[i]=n}function Sl(t,n){return t[n]}function Dl(t,n,i){t[i]=n}function Al(){return wl||(wl=new TextDecoder("UTF-16LE")),wl}function Ol(){return bl||(bl=Vt()?Al():(ml||(ml=new TextDecoder("UTF-16BE")),ml)),bl}function El(t,n,i){var r=new Uint16Array(t.buffer,n,i);return i>0&&(r[0]===65279||r[0]===65534)?function(t,n,i){var r=[];var e=0;for(var o=0;o<i;o++){var s=_l(t,n);n+=2,r[e++]=String.fromCharCode(s)}return r.join("")}(t,n,i):Al().decode(r)}var Ml=function(){function t(t){this._capacity=0|t,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}t.prototype.reset=function(){this._completedStrings=null,this._bufferLength=0};t.prototype.build=function(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()};t.prototype._buildBuffer=function(){if(this._bufferLength===0)return"";var t=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Ol().decode(t)};t.prototype._flushBuffer=function(){var t=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[t]:this._completedStrings[this._completedStrings.length]=t};t.prototype.appendCharCode=function(t){var n=this._capacity-this._bufferLength;n<=1&&(n===0||Oo(t))&&this._flushBuffer(),this._buffer[this._bufferLength++]=t};t.prototype.appendASCIICharCode=function(t){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=t};t.prototype.appendString=function(t){var n=t.length;if(this._bufferLength+n>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=t);for(var i=0;i<n;i++)this._buffer[this._bufferLength++]=t.charCodeAt(i)};return t}();var Fl=function(){function t(n,i,r,e,o,s){this._richEditBracketBrand=void 0,this.languageId=n,this.index=i,this.open=r,this.close=e,this.forwardRegex=o,this.reversedRegex=s,this._openSet=t._toSet(this.open),this._closeSet=t._toSet(this.close)}t.prototype.isOpen=function(t){return this._openSet.has(t)};t.prototype.isClose=function(t){return this._closeSet.has(t)};t._toSet=function(t){var n=new Set;for(var i=0,r=t;i<r.length;i++){var e=r[i];n.add(e)}return n};return t}();var Ll=function(){function t(t,n){this._richEditBracketsBrand=void 0;var i=function(t){var n=t.length;t=t.map((function(t){return[t[0].toLowerCase(),t[1].toLowerCase()]}));var i=[];for(var r=0;r<n;r++)i[r]=r;var e=function(t,n){var i=t[0],r=t[1],e=n[0],o=n[1];return i===e||i===o||r===e||r===o},o=function(t,r){var e=Math.min(t,r),o=Math.max(t,r);for(var s=0;s<n;s++)i[s]===o&&(i[s]=e)};for(var r=0;r<n;r++){var s=t[r];for(var u=r+1;u<n;u++)e(s,t[u])&&o(i[r],i[u])}var a=[];for(var r=0;r<n;r++){var s=[],u=[];for(var h=0;h<n;h++)if(i[h]===r){var c=t[h],f=c[0],l=c[1];s.push(f),u.push(l)}s.length>0&&a.push({open:s,close:u})}return a}(n);this.brackets=i.map((function(n,r){return new Fl(t,r,n.open,n.close,function(t,n,i,r){var e=[];e=e.concat(t),e=e.concat(n);for(var o=0,s=e.length;o<s;o++)jl(e[o],i,r,e);return e=Tl(e),e.sort(Rl),e.reverse(),Bl(e)}(n.open,n.close,i,r),function(t,n,i,r){var e=[];e=e.concat(t),e=e.concat(n);for(var o=0,s=e.length;o<s;o++)jl(e[o],i,r,e);return e=Tl(e),e.sort(Rl),e.reverse(),Bl(e.map(Nl))}(n.open,n.close,i,r))})),this.forwardRegex=function(t){var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];for(var o=0,s=e.open;o<s.length;o++){var u=s[o];n.push(u)}for(var a=0,h=e.close;a<h.length;a++){var u=h[a];n.push(u)}}return n=Tl(n),Bl(n)}(this.brackets),this.reversedRegex=function(t){var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];for(var o=0,s=e.open;o<s.length;o++){var u=s[o];n.push(u)}for(var a=0,h=e.close;a<h.length;a++){var u=h[a];n.push(u)}}return n=Tl(n),Bl(n.map(Nl))}(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(var r=0,e=this.brackets;r<e.length;r++){var o=e[r];for(var s=0,u=o.open;s<u.length;s++){var a=u[s];this.textIsBracket[a]=o,this.textIsOpenBracket[a]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,a.length)}for(var h=0,c=o.close;h<c.length;h++){var a=c[h];this.textIsBracket[a]=o,this.textIsOpenBracket[a]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,a.length)}}}return t}();function jl(t,n,i,r){for(var e=0,o=n.length;e<o;e++){if(e===i)continue;var s=n[e];for(var u=0,a=s.open;u<a.length;u++){var h=a[u];h.indexOf(t)>=0&&r.push(h)}for(var c=0,f=s.close;c<f.length;c++){var h=f[c];h.indexOf(t)>=0&&r.push(h)}}}function Rl(t,n){return t.length-n.length}function Tl(t){if(t.length<=1)return t;var n=[],i=new Set;for(var r=0,e=t;r<e.length;r++){var o=e[r];i.has(o)||(n.push(o),i.add(o))}return n}function Il(t){var n=/^[\w ]+$/.test(t);return t=uo(t),n?"\\b".concat(t,"\\b"):t}function Bl(t){return fo("(".concat(t.map(Il).join(")|("),")"),!0)}var Nl=function(){var t=null,n=null;return function(i){return t!==i&&(t=i,n=function(t){var n=new Uint16Array(t.length);var i=0;for(var r=t.length-1;r>=0;r--)n[i++]=t.charCodeAt(r);return Ol().decode(n)}(t)),n}}();var Pl=function(){function t(){}t._findPrevBracketInText=function(t,n,i,r){var e=i.match(t);if(!e)return null;var o=i.length-(e.index||0),s=e[0].length,u=r+o;return new Ir(n,u-s+1,n,u+1)};t.findPrevBracketInRange=function(t,n,i,r,e){var o=Nl(i).substring(i.length-e,i.length-r);return this._findPrevBracketInText(t,n,o,r)};t.findNextBracketInText=function(t,n,i,r){var e=i.match(t);if(!e)return null;var o=e.index||0,s=e[0].length;if(s===0)return null;var u=r+o;return new Ir(n,u+1,n,u+1+s)};t.findNextBracketInRange=function(t,n,i,r,e){var o=i.substring(r,e);return this.findNextBracketInText(t,n,o,r)};return t}();var Wl=function(){function t(t){this._richEditBrackets=t}t.prototype.getElectricCharacters=function(){var t=[];if(this._richEditBrackets)for(var n=0,i=this._richEditBrackets.brackets;n<i.length;n++){var r=i[n];for(var e=0,o=r.close;e<o.length;e++){var s=o[e];var u=s.charAt(s.length-1);t.push(u)}}return x(t)};t.prototype.onElectricCharacter=function(t,n,i){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;var r=n.findTokenIndexAtOffset(i-1);if(vl(n.getStandardTokenType(r)))return null;var e=this._richEditBrackets.reversedRegex,o=n.getLineContent().substring(0,i-1)+t,s=Pl.findPrevBracketInRange(e,1,o,0,o.length);if(!s)return null;var u=o.substring(s.startColumn-1,s.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[u])return null;var a=n.getActualLineContentBefore(s.startColumn-1);return/^\s*$/.test(a)?{matchOpenBracket:u}:null};return t}();function Hl(t){return t.global&&(t.lastIndex=0),!0}var zl=function(){function t(t){this._indentationRules=t}t.prototype.shouldIncrease=function(t){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Hl(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(t))};t.prototype.shouldDecrease=function(t){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Hl(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(t))};t.prototype.shouldIndentNextLine=function(t){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Hl(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(t))};t.prototype.shouldIgnore=function(t){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Hl(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(t))};t.prototype.getIndentMetadata=function(t){var n=0;return this.shouldIncrease(t)&&(n+=1),this.shouldDecrease(t)&&(n+=2),this.shouldIndentNextLine(t)&&(n+=4),this.shouldIgnore(t)&&(n+=8),n};return t}();var Ul=function(){function t(n){var i=this;(n=n||{}).brackets=n.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],n.brackets.forEach((function(n){var r=t._createOpenBracketRegExp(n[0]),e=t._createCloseBracketRegExp(n[1]);r&&e&&i._brackets.push({open:n[0],openRegExp:r,close:n[1],closeRegExp:e})})),this._regExpRules=n.onEnterRules||[]}t.prototype.onEnter=function(t,n,i,r){if(t>=3)for(var e=0,o=this._regExpRules.length;e<o;e++){var s=this._regExpRules[e];if([{reg:s.beforeText,text:i},{reg:s.afterText,text:r},{reg:s.previousLineText,text:n}].every((function(t){return!t.reg||(t.reg.lastIndex=0,t.reg.test(t.text))})))return s.action}if(t>=2&&i.length>0&&r.length>0)for(var e=0,o=this._brackets.length;e<o;e++){var s=this._brackets[e];if(s.openRegExp.test(i)&&s.closeRegExp.test(r))return{indentAction:ul.IndentOutdent}}if(t>=2&&i.length>0){for(var e=0,o=this._brackets.length;e<o;e++)if(this._brackets[e].openRegExp.test(i))return{indentAction:ul.Indent}}return null};t._createOpenBracketRegExp=function(n){var i=uo(n);return/\B/.test(i.charAt(0))||(i="\\b"+i),i+="\\s*$",t._safeRegExp(i)};t._createCloseBracketRegExp=function(n){var i=uo(n);return/\B/.test(i.charAt(i.length-1))||(i+="\\b"),i="^\\s*"+i,t._safeRegExp(i)};t._safeRegExp=function(t){try{return new RegExp(t)}catch(t){return Gn(t),null}};return t}();var Kl=Zh("configurationService");function Vl(t,n){var i=Object.create(null);for(var r in t)ql(i,r,t[r],n);return i}function ql(t,n,i,r){var e=n.split("."),o=e.pop();var s=t;for(var u=0;u<e.length;u++){var a=e[u];var h=s[a];switch(typeof h){case"undefined":h=s[a]=Object.create(null);break;case"object":break;default:return void r("Ignoring ".concat(n," as ").concat(e.slice(0,u+1).join(".")," is ").concat(JSON.stringify(h)))}s=h}if(typeof s=="object"&&s!==null)try{s[o]=i}catch(t){r("Ignoring ".concat(n," as ").concat(e.join(".")," is ").concat(JSON.stringify(s)))}else r("Ignoring ".concat(n," as ").concat(e.join(".")," is ").concat(JSON.stringify(s)))}function Gl(t,n){$l(t,n.split("."))}function $l(t,n){var i=n.shift();if(n.length!==0){if(Object.keys(t).indexOf(i)!==-1){var r=t[i];typeof r!="object"||Array.isArray(r)||($l(r,n),Object.keys(r).length===0&&delete t[i])}}else delete t[i]}function Jl(t,n,i){var r=function(t,n){var i=t;for(var r=0,e=n;r<e.length;r++){var o=e[r];if(typeof i!="object"||i===null)return;i=i[o]}return i}(t,n.split("."));return r===void 0?i:r}var Zl=Zh("languageService");var Ql=function(){function t(t,n,i){if(n===void 0){n=[]}if(i===void 0){i=!1}this.ctor=t,this.staticArguments=n,this.supportsDelayedInstantiation=i}return t}();var Yl=[];function Xl(t,n,i){n instanceof Ql||(n=new Ql(n,[],!!i)),Yl.push([t,n])}function tv(){return Yl}var nv=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),iv="base.contributions.json",rv=new(function(){function t(){this._onDidChangeSchema=new ki,this.schemasById={}}t.prototype.registerSchema=function(t,n){var i;this.schemasById[(i=t,i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i)]=n,this._onDidChangeSchema.fire(t)};t.prototype.notifySchemaChanged=function(t){this._onDidChangeSchema.fire(t)};return t}());of.add(iv,rv);var ev="base.contributions.configuration",ov="vscode://schemas/settings/resourceLanguage",sv=of.as(iv),uv="\\[([^\\]]+)\\]",av=new RegExp(uv,"g"),hv=new RegExp("^(".concat(uv,")+$"));function cv(t){var n=[];if(hv.test(t)){var i=av.exec(t);for(;i!=null&&i.length;){var r=i[1].trim();r&&n.push(r),i=av.exec(t)}}return x(n)}var fv=new(function(){function t(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new ki,this._onDidUpdateConfiguration=new ki,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:ht(0,"Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},sv.registerSchema(ov,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}t.prototype.registerConfiguration=function(t,n){if(n===void 0){n=!0}this.registerConfigurations([t],n)};t.prototype.registerConfigurations=function(t,n){if(n===void 0){n=!0}var i=new Set;this.doRegisterConfigurations(t,n,i),sv.registerSchema(ov,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})};t.prototype.registerDefaultConfigurations=function(t){var n=new Set;this.doRegisterDefaultConfigurations(t,n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:!0})};t.prototype.doRegisterDefaultConfigurations=function(t,n){var i;var r=[];for(var e=0,o=t;e<o.length;e++){var s=o[e],u=s.overrides,a=s.source;for(var h in u)if(n.add(h),hv.test(h)){var c=this.configurationDefaultsOverrides.get(h),f=(i=c==null?void 0:c.valuesSources)!==null&&i!==void 0?i:new Map;if(a)for(var l=0,v=Object.keys(u[h]);l<v.length;l++){var d=v[l];f.set(d,a)}var g=__assign(__assign({},(c==null?void 0:c.value)||{}),u[h]);this.configurationDefaultsOverrides.set(h,{source:a,value:g,valuesSources:f});var p={type:"object",default:g,description:ht(0,"Configure settings to be overridden for the {0} language.",h.replace(/[\[\]]/g,"")),$ref:ov,defaultDefaultValue:g,source:H(a)?void 0:a,defaultValueSource:a};r.push.apply(r,cv(h)),this.configurationProperties[h]=p,this.defaultLanguageConfigurationOverridesNode.properties[h]=p}else{this.configurationDefaultsOverrides.set(h,{value:u[h],source:a});var c=this.configurationProperties[h];c&&(this.updatePropertyDefaultValue(h,c),this.updateSchema(h,c))}}this.doRegisterOverrideIdentifiers(r)};t.prototype.registerOverrideIdentifiers=function(t){this.doRegisterOverrideIdentifiers(t),this._onDidSchemaChange.fire()};t.prototype.doRegisterOverrideIdentifiers=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.overrideIdentifiers.add(r)}this.updateOverridePropertyPatternKey()};t.prototype.doRegisterConfigurations=function(t,n,i){var r=this;t.forEach((function(t){r.validateAndRegisterProperties(t,n,t.extensionInfo,t.restrictedProperties,void 0,i),r.configurationContributors.push(t),r.registerJSONConfiguration(t)}))};t.prototype.validateAndRegisterProperties=function(t,n,i,r,e,o){if(n===void 0){n=!0}if(e===void 0){e=3}var s;e=J(t.scope)?e:t.scope;var u=t.properties;if(u)for(var a in u){var h=u[a];n&&lv(a,h)?delete u[a]:(h.source=i,h.defaultDefaultValue=u[a].default,this.updatePropertyDefaultValue(a,h),hv.test(a)?h.scope=void 0:(h.scope=J(h.scope)?e:h.scope,h.restricted=J(h.restricted)?!!(r!=null&&r.includes(a)):h.restricted),!u[a].hasOwnProperty("included")||u[a].included?(this.configurationProperties[a]=u[a],!((s=u[a].policy)===null||s===void 0)&&s.name&&this.policyConfigurations.set(u[a].policy.name,a),!u[a].deprecationMessage&&u[a].markdownDeprecationMessage&&(u[a].deprecationMessage=u[a].markdownDeprecationMessage),o.add(a)):(this.excludedConfigurationProperties[a]=u[a],delete u[a]))}var c=t.allOf;if(c)for(var f=0,l=c;f<l.length;f++){var a=l[f];this.validateAndRegisterProperties(a,n,i,r,e,o)}};t.prototype.getConfigurationProperties=function(){return this.configurationProperties};t.prototype.getPolicyConfigurations=function(){return this.policyConfigurations};t.prototype.registerJSONConfiguration=function(t){var n=this;var i=function(t){var r=t.properties;if(r)for(var e in r)n.updateSchema(e,r[e]);var o=t.allOf;o==null||o.forEach(i)};i(t)};t.prototype.updateSchema=function(t,n){switch(n.scope){case 1:case 2:case 6:case 3:case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[t]=n}};t.prototype.updateOverridePropertyPatternKey=function(){for(var t=0,n=this.overrideIdentifiers.values();t<n.length;t++){var i=n[t];var r="[".concat(i,"]"),e={type:"object",description:ht(0,"Configure editor settings to be overridden for a language."),errorMessage:ht(0,"This setting does not support per-language configuration."),$ref:ov};this.updatePropertyDefaultValue(r,e)}};t.prototype.registerOverridePropertyPatternKey=function(){ht(0,"Configure editor settings to be overridden for a language."),ht(0,"This setting does not support per-language configuration."),this._onDidSchemaChange.fire()};t.prototype.updatePropertyDefaultValue=function(t,n){var i=this.configurationDefaultsOverrides.get(t);var r=i==null?void 0:i.value,e=i==null?void 0:i.source;G(r)&&(r=n.defaultDefaultValue,e=void 0),G(r)&&(r=function(t){switch(Array.isArray(t)?t[0]:t){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(n.type)),n.default=r,n.defaultValueSource=e};return t}());function lv(t,n){var i,r,e,o;return t.trim()?hv.test(t)?ht(0,"Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",t):fv.getConfigurationProperties()[t]!==void 0?ht(0,"Cannot register '{0}'. This property is already registered.",t):!((i=n.policy)===null||i===void 0)&&i.name&&fv.getPolicyConfigurations().get((r=n.policy)===null||r===void 0?void 0:r.name)!==void 0?ht(0,"Cannot register '{0}'. The associated policy {1} is already registered with {2}.",t,(e=n.policy)===null||e===void 0?void 0:e.name,fv.getPolicyConfigurations().get((o=n.policy)===null||o===void 0?void 0:o.name)):null:ht(0,"Cannot register an empty property")}of.add(ev,fv);var vv=new(function(){function t(){this._onDidChangeLanguages=new ki,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}t.prototype.registerLanguage=function(t){var n=this;return this._languages.push(t),this._onDidChangeLanguages.fire(void 0),{dispose:function(){for(var i=0,r=n._languages.length;i<r;i++)if(n._languages[i]===t)return void n._languages.splice(i,1)}}};t.prototype.getLanguages=function(){return this._languages};return t}());of.add("editor.modesRegistry",vv);var dv="plaintext";vv.registerLanguage({id:dv,extensions:[".txt"],aliases:[ht(0,"Plain Text"),"text"],mimetypes:[nv.text]}),of.as(ev).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var gv=function(){function t(t,n){var i=this;this.languageId=t;var r=n.brackets?pv(n.brackets):[],e=new to((function(t){var n=new Set;return{info:new mv(i,t,n),closing:n}})),o=new to((function(t){var n=new Set,r=new Set;return{info:new bv(i,t,n,r),opening:n,openingColorized:r}}));for(var s=0,u=r;s<u.length;s++){var a=u[s],h=a[0],c=a[1];var f=e.get(h),l=o.get(c);f.closing.add(l.info),l.opening.add(f.info)}var v=n.colorizedBracketPairs?pv(n.colorizedBracketPairs):r.filter((function(t){return!(t[0]==="<"&&t[1]===">")}));for(var d=0,g=v;d<g.length;d++){var p=g[d],h=p[0],c=p[1];var f=e.get(h),l=o.get(c);f.closing.add(l.info),l.openingColorized.add(f.info),l.opening.add(f.info)}this._openingBrackets=new Map(__spreadArray([],e.cachedValues,true).map((function(t){var n=t[0],i=t[1];return[n,i.info]}))),this._closingBrackets=new Map(__spreadArray([],o.cachedValues,true).map((function(t){var n=t[0],i=t[1];return[n,i.info]})))}Object.defineProperty(t.prototype,"openingBrackets",{get:function(){return __spreadArray([],this._openingBrackets.values(),true)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"closingBrackets",{get:function(){return __spreadArray([],this._closingBrackets.values(),true)},enumerable:false,configurable:true});t.prototype.getOpeningBracketInfo=function(t){return this._openingBrackets.get(t)};t.prototype.getClosingBracketInfo=function(t){return this._closingBrackets.get(t)};t.prototype.getBracketInfo=function(t){return this.getOpeningBracketInfo(t)||this.getClosingBracketInfo(t)};return t}();function pv(t){return t.filter((function(t){var n=t[0],i=t[1];return n!==""&&i!==""}))}var wv=function(){function t(t,n){this.config=t,this.bracketText=n}Object.defineProperty(t.prototype,"languageId",{get:function(){return this.config.languageId},enumerable:false,configurable:true});return t}();var mv=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,i)||this,e.openedBrackets=r,e.isOpeningBracket=!0;return e}return n}(wv);var bv=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,n,i)||this,o.openingBrackets=r,o.openingColorizedBrackets=e,o.isOpeningBracket=!1;return o}n.prototype.closes=function(t){return t.config===this.config&&this.openingBrackets.has(t)};n.prototype.closesColorized=function(t){return t.config===this.config&&this.openingColorizedBrackets.has(t)};n.prototype.getOpeningBrackets=function(){return __spreadArray([],this.openingBrackets,true)};return n}(wv);var yv=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},_v=function(t,n){return function(i,r){n(i,r,t)}};var kv=function(){function t(t){this.languageId=t}t.prototype.affects=function(t){return!this.languageId||this.languageId===t};return t}();var xv=Zh("languageConfigurationService");var Cv=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.configurationService=n,r.languageService=i,r._registry=r._register(new jv),r.onDidChangeEmitter=r._register(new ki),r.onDidChange=r.onDidChangeEmitter.event,r.configurations=new Map;var e=new Set(Object.values(Sv));r._register(r.configurationService.onDidChangeConfiguration((function(t){var n=t.change.keys.some((function(t){return e.has(t)})),i=t.change.overrides.filter((function(t){var n=t[0],i=t[1];return i.some((function(t){return e.has(t)}))})).map((function(t){var n=t[0];return n}));if(n)r.configurations.clear(),r.onDidChangeEmitter.fire(new kv(void 0));else for(var o=0,s=i;o<s.length;o++){var u=s[o];r.languageService.isRegisteredLanguageId(u)&&(r.configurations.delete(u),r.onDidChangeEmitter.fire(new kv(u)))}}))),r._register(r._registry.onDidChange((function(t){r.configurations.delete(t.languageId),r.onDidChangeEmitter.fire(new kv(t.languageId))})));return r}n.prototype.register=function(t,n,i){return this._registry.register(t,n,i)};n.prototype.getLanguageConfiguration=function(t){var n=this.configurations.get(t);return n||(n=function(t,n,i,r){var e=n.getLanguageConfiguration(t);if(!e){if(!r.isRegisteredLanguageId(t))return new Rv(t,{});e=new Rv(t,{})}var o=function(t,n){var i=n.getValue(Sv.brackets,{overrideIdentifier:t}),r=n.getValue(Sv.colorizedBracketPairs,{overrideIdentifier:t});return{brackets:Dv(i),colorizedBracketPairs:Dv(r)}}(e.languageId,i),s=Mv([e.underlyingConfig,o]);return new Rv(e.languageId,s)}(t,this._registry,this.configurationService,this.languageService),this.configurations.set(t,n)),n};return n}(ci);Cv=yv([_v(0,Kl),_v(1,Zl)],Cv);var Sv={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function Dv(t){if(Array.isArray(t))return t.map((function(t){if(Array.isArray(t)&&t.length===2)return[t[0],t[1]]})).filter((function(t){return!!t}))}function Av(t,n,i){var r=go(t.getLineContent(n));return r.length>i-1&&(r=r.substring(0,i-1)),r}function Ov(t,n,i){return t.tokenization.forceTokenization(n),fl(t.tokenization.getLineTokens(n),i===void 0?t.getLineMaxColumn(n)-1:i-1)}var Ev=function(){function t(t){this.languageId=t,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}t.prototype.register=function(t,n){var i=this;var r=new Fv(t,n,++this._order);return this._entries.push(r),this._resolved=null,ai((function(){for(var t=0;t<i._entries.length;t++)if(i._entries[t]===r){i._entries.splice(t,1),i._resolved=null;break}}))};t.prototype.getResolvedConfiguration=function(){if(!this._resolved){var t=this._resolve();t&&(this._resolved=new Rv(this.languageId,t))}return this._resolved};t.prototype._resolve=function(){return this._entries.length===0?null:(this._entries.sort(Fv.cmp),Mv(this._entries.map((function(t){return t.configuration}))))};return t}();function Mv(t){var n={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(var i=0,r=t;i<r.length;i++){var e=r[i];n={comments:e.comments||n.comments,brackets:e.brackets||n.brackets,wordPattern:e.wordPattern||n.wordPattern,indentationRules:e.indentationRules||n.indentationRules,onEnterRules:e.onEnterRules||n.onEnterRules,autoClosingPairs:e.autoClosingPairs||n.autoClosingPairs,surroundingPairs:e.surroundingPairs||n.surroundingPairs,autoCloseBefore:e.autoCloseBefore||n.autoCloseBefore,folding:e.folding||n.folding,colorizedBracketPairs:e.colorizedBracketPairs||n.colorizedBracketPairs,__electricCharacterSupport:e.__electricCharacterSupport||n.__electricCharacterSupport}}return n}var Fv=function(){function t(t,n,i){this.configuration=t,this.priority=n,this.order=i}t.cmp=function(t,n){return t.priority===n.priority?t.order-n.order:t.priority-n.priority};return t}();var Lv=function(){function t(t){this.languageId=t}return t}();var jv=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n._entries=new Map,n._onDidChange=n._register(new ki),n.onDidChange=n._onDidChange.event,n._register(n.register(dv,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0));return n}n.prototype.register=function(t,n,i){var r=this;if(i===void 0){i=0}var e=this._entries.get(t);e||(e=new Ev(t),this._entries.set(t,e));var o=e.register(n,i);return this._onDidChange.fire(new Lv(t)),ai((function(){o.dispose(),r._onDidChange.fire(new Lv(t))}))};n.prototype.getLanguageConfiguration=function(t){var n=this._entries.get(t);return(n==null?void 0:n.getResolvedConfiguration())||null};return n}(ci);var Rv=function(){function t(n,i){this.languageId=n,this.underlyingConfig=i,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Ul(this.underlyingConfig):null,this.comments=t._handleComments(this.underlyingConfig),this.characterPair=new dl(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||rn,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new zl(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new gv(n,this.underlyingConfig)}t.prototype.getWordDefinition=function(){return en(this.wordDefinition)};Object.defineProperty(t.prototype,"brackets",{get:function(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Ll(this.languageId,this.underlyingConfig.brackets)),this._brackets},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"electricCharacter",{get:function(){return this._electricCharacter||(this._electricCharacter=new Wl(this.brackets)),this._electricCharacter},enumerable:false,configurable:true});t.prototype.onEnter=function(t,n,i,r){return this._onEnterSupport?this._onEnterSupport.onEnter(t,n,i,r):null};t.prototype.getAutoClosingPairs=function(){return new hl(this.characterPair.getAutoClosingPairs())};t.prototype.getAutoCloseBeforeSet=function(t){return this.characterPair.getAutoCloseBeforeSet(t)};t.prototype.getSurroundingPairs=function(){return this.characterPair.getSurroundingPairs()};t._handleComments=function(t){var n=t.comments;if(!n)return null;var i={};if(n.lineComment&&(i.lineCommentToken=n.lineComment),n.blockComment){var r=n.blockComment,e=r[0],o=r[1];i.blockCommentStartToken=e,i.blockCommentEndToken=o}return i};return t}();Xl(xv,Cv,1);var Tv=function(){function t(t,n,i,r){this.originalStart=t,this.originalLength=n,this.modifiedStart=i,this.modifiedLength=r}t.prototype.getOriginalEnd=function(){return this.originalStart+this.originalLength};t.prototype.getModifiedEnd=function(){return this.modifiedStart+this.modifiedLength};return t}();var Iv=function(){function t(t){this.source=t}t.prototype.getElements=function(){var t=this.source,n=new Int32Array(t.length);for(var i=0,r=t.length;i<r;i++)n[i]=t.charCodeAt(i);return n};return t}();function Bv(t,n,i){return new Hv(new Iv(t),new Iv(n)).ComputeDiff(i).changes}var Nv=function(){function t(){}t.Assert=function(t,n){if(!t)throw new Error(n)};return t}();var Pv=function(){function t(){}t.Copy=function(t,n,i,r,e){for(var o=0;o<e;o++)i[r+o]=t[n+o]};t.Copy2=function(t,n,i,r,e){for(var o=0;o<e;o++)i[r+o]=t[n+o]};return t}();var Wv=function(){function t(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}t.prototype.MarkNextChange=function(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Tv(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824};t.prototype.AddOriginalElement=function(t,n){this.m_originalStart=Math.min(this.m_originalStart,t),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++};t.prototype.AddModifiedElement=function(t,n){this.m_originalStart=Math.min(this.m_originalStart,t),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++};t.prototype.getChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes};t.prototype.getReverseChanges=function(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes};return t}();var Hv=function(){function t(n,i,r){if(r===void 0){r=null}this.ContinueProcessingPredicate=r,this._originalSequence=n,this._modifiedSequence=i;var e=t._getElements(n),o=e[0],s=e[1],u=e[2],a=t._getElements(i),h=a[0],c=a[1],f=a[2];this._hasStrings=u&&f,this._originalStringElements=o,this._originalElementsOrHash=s,this._modifiedStringElements=h,this._modifiedElementsOrHash=c,this.m_forwardHistory=[],this.m_reverseHistory=[]}t._isStringArray=function(t){return t.length>0&&typeof t[0]=="string"};t._getElements=function(n){var i=n.getElements();if(t._isStringArray(i)){var r=new Int32Array(i.length);for(var e=0,o=i.length;e<o;e++)r[e]=Xu(i[e],0);return[i,r,!0]}return i instanceof Int32Array?[[],i,!1]:[[],new Int32Array(i),!1]};t.prototype.ElementsAreEqual=function(t,n){return this._originalElementsOrHash[t]===this._modifiedElementsOrHash[n]&&(!this._hasStrings||this._originalStringElements[t]===this._modifiedStringElements[n])};t.prototype.ElementsAreStrictEqual=function(n,i){return this.ElementsAreEqual(n,i)?t._getStrictElement(this._originalSequence,n)===t._getStrictElement(this._modifiedSequence,i):!1};t._getStrictElement=function(t,n){return typeof t.getStrictElement=="function"?t.getStrictElement(n):null};t.prototype.OriginalElementsAreEqual=function(t,n){return this._originalElementsOrHash[t]===this._originalElementsOrHash[n]&&(!this._hasStrings||this._originalStringElements[t]===this._originalStringElements[n])};t.prototype.ModifiedElementsAreEqual=function(t,n){return this._modifiedElementsOrHash[t]===this._modifiedElementsOrHash[n]&&(!this._hasStrings||this._modifiedStringElements[t]===this._modifiedStringElements[n])};t.prototype.ComputeDiff=function(t){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,t)};t.prototype._ComputeDiff=function(t,n,i,r,e){var o=[!1];var s=this.ComputeDiffRecursive(t,n,i,r,o);return e&&(s=this.PrettifyChanges(s)),{quitEarly:o[0],changes:s}};t.prototype.ComputeDiffRecursive=function(t,n,i,r,e){for(e[0]=!1;t<=n&&i<=r&&this.ElementsAreEqual(t,i);)t++,i++;for(;n>=t&&r>=i&&this.ElementsAreEqual(n,r);)n--,r--;if(t>n||i>r){var o=void 0;return i<=r?(Nv.Assert(t===n+1,"originalStart should only be one more than originalEnd"),o=[new Tv(t,0,i,r-i+1)]):t<=n?(Nv.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),o=[new Tv(t,n-t+1,i,0)]):(Nv.Assert(t===n+1,"originalStart should only be one more than originalEnd"),Nv.Assert(i===r+1,"modifiedStart should only be one more than modifiedEnd"),o=[]),o}var s=[0],u=[0],a=this.ComputeRecursionPoint(t,n,i,r,s,u,e),h=s[0],c=u[0];if(a!==null)return a;if(!e[0]){var o=this.ComputeDiffRecursive(t,h,i,c,e);var f=[];return f=e[0]?[new Tv(h+1,n-(h+1)+1,c+1,r-(c+1)+1)]:this.ComputeDiffRecursive(h+1,n,c+1,r,e),this.ConcatenateChanges(o,f)}return[new Tv(t,n-t+1,i,r-i+1)]};t.prototype.WALKTRACE=function(t,n,i,r,e,o,s,u,a,h,c,f,l,v,d,g,p,w){var m=null,b=null,y=new Wv,_=n,k=i,x=l[0]-g[0]-r,C=-1073741824,S=this.m_forwardHistory.length-1;do{var D=x+t;D===_||D<k&&a[D-1]<a[D+1]?(v=(c=a[D+1])-x-r,c<C&&y.MarkNextChange(),C=c,y.AddModifiedElement(c+1,v),x=D+1-t):(v=(c=a[D-1]+1)-x-r,c<C&&y.MarkNextChange(),C=c-1,y.AddOriginalElement(c,v+1),x=D-1-t),S>=0&&(t=(a=this.m_forwardHistory[S])[0],_=1,k=a.length-1)}while(--S>=-1);if(m=y.getReverseChanges(),w[0]){var D=l[0]+1,A=g[0]+1;if(m!==null&&m.length>0){var O=m[m.length-1];D=Math.max(D,O.getOriginalEnd()),A=Math.max(A,O.getModifiedEnd())}b=[new Tv(D,f-D+1,A,d-A+1)]}else{y=new Wv,_=o,k=s,x=l[0]-g[0]-u,C=1073741824,S=p?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{var D=x+e;D===_||D<k&&h[D-1]>=h[D+1]?(v=(c=h[D+1]-1)-x-u,c>C&&y.MarkNextChange(),C=c+1,y.AddOriginalElement(c+1,v+1),x=D+1-e):(v=(c=h[D-1])-x-u,c>C&&y.MarkNextChange(),C=c,y.AddModifiedElement(c+1,v+1),x=D-1-e),S>=0&&(e=(h=this.m_reverseHistory[S])[0],_=1,k=h.length-1)}while(--S>=-1);b=y.getChanges()}return this.ConcatenateChanges(m,b)};t.prototype.ComputeRecursionPoint=function(t,n,i,r,e,o,s){var u=0,a=0,h=0,c=0,f=0,l=0;t--,i--,e[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];var v=n-t+(r-i),d=v+1,g=new Int32Array(d),p=new Int32Array(d),w=r-i,m=n-t,b=t-i,y=n-r,_=(m-w)%2==0;g[w]=t,p[m]=n,s[0]=!1;for(var k=1;k<=v/2+1;k++){var x=0,C=0;h=this.ClipDiagonalBound(w-k,k,w,d),c=this.ClipDiagonalBound(w+k,k,w,d);for(var S=h;S<=c;S+=2){u=S===h||S<c&&g[S-1]<g[S+1]?g[S+1]:g[S-1]+1,a=u-(S-w)-b;var D=u;for(;u<n&&a<r&&this.ElementsAreEqual(u+1,a+1);)u++,a++;if(g[S]=u,u+a>x+C&&(x=u,C=a),!_&&Math.abs(S-m)<=k-1&&u>=p[S])return e[0]=u,o[0]=a,D<=p[S]&&k<=1448?this.WALKTRACE(w,h,c,b,m,f,l,y,g,p,u,n,e,a,r,o,_,s):null}var A=(x-t+(C-i)-k)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(x,A))return s[0]=!0,e[0]=x,o[0]=C,A>0&&k<=1448?this.WALKTRACE(w,h,c,b,m,f,l,y,g,p,u,n,e,a,r,o,_,s):(t++,i++,[new Tv(t,n-t+1,i,r-i+1)]);f=this.ClipDiagonalBound(m-k,k,m,d),l=this.ClipDiagonalBound(m+k,k,m,d);for(var S=f;S<=l;S+=2){u=S===f||S<l&&p[S-1]>=p[S+1]?p[S+1]-1:p[S-1],a=u-(S-m)-y;var D=u;for(;u>t&&a>i&&this.ElementsAreEqual(u,a);)u--,a--;if(p[S]=u,_&&Math.abs(S-w)<=k&&u<=g[S])return e[0]=u,o[0]=a,D>=g[S]&&k<=1448?this.WALKTRACE(w,h,c,b,m,f,l,y,g,p,u,n,e,a,r,o,_,s):null}if(k<=1447){var S=new Int32Array(c-h+2);S[0]=w-h+1,Pv.Copy2(g,h,S,1,c-h+1),this.m_forwardHistory.push(S),S=new Int32Array(l-f+2),S[0]=m-f+1,Pv.Copy2(p,f,S,1,l-f+1),this.m_reverseHistory.push(S)}}return this.WALKTRACE(w,h,c,b,m,f,l,y,g,p,u,n,e,a,r,o,_,s)};t.prototype.PrettifyChanges=function(t){for(var n=0;n<t.length;n++){var i=t[n],r=n<t.length-1?t[n+1].originalStart:this._originalElementsOrHash.length,e=n<t.length-1?t[n+1].modifiedStart:this._modifiedElementsOrHash.length,o=i.originalLength>0,s=i.modifiedLength>0;for(;i.originalStart+i.originalLength<r&&i.modifiedStart+i.modifiedLength<e&&(!o||this.OriginalElementsAreEqual(i.originalStart,i.originalStart+i.originalLength))&&(!s||this.ModifiedElementsAreEqual(i.modifiedStart,i.modifiedStart+i.modifiedLength));){var u=this.ElementsAreStrictEqual(i.originalStart,i.modifiedStart);if(this.ElementsAreStrictEqual(i.originalStart+i.originalLength,i.modifiedStart+i.modifiedLength)&&!u)break;i.originalStart++,i.modifiedStart++}var a=[null];n<t.length-1&&this.ChangesOverlap(t[n],t[n+1],a)&&(t[n]=a[0],t.splice(n+1,1),n--)}for(var n=t.length-1;n>=0;n--){var i=t[n];var r=0,e=0;if(n>0){var h=t[n-1];r=h.originalStart+h.originalLength,e=h.modifiedStart+h.modifiedLength}var o=i.originalLength>0,s=i.modifiedLength>0;var a=0,u=this._boundaryScore(i.originalStart,i.originalLength,i.modifiedStart,i.modifiedLength);for(var h=1;;h++){var c=i.originalStart-h,f=i.modifiedStart-h;if(c<r||f<e||o&&!this.OriginalElementsAreEqual(c,c+i.originalLength)||s&&!this.ModifiedElementsAreEqual(f,f+i.modifiedLength))break;var l=(c===r&&f===e?5:0)+this._boundaryScore(c,i.originalLength,f,i.modifiedLength);l>u&&(u=l,a=h)}i.originalStart-=a,i.modifiedStart-=a;var v=[null];n>0&&this.ChangesOverlap(t[n-1],t[n],v)&&(t[n-1]=v[0],t.splice(n,1),n++)}if(this._hasStrings)for(var n=1,i=t.length;n<i;n++){var r=t[n-1],e=t[n],o=e.originalStart-r.originalStart-r.originalLength,s=r.originalStart,a=e.originalStart+e.originalLength,u=a-s,v=r.modifiedStart,h=e.modifiedStart+e.modifiedLength,c=h-v;if(o<5&&u<20&&c<20){var f=this._findBetterContiguousSequence(s,u,v,c,o);if(f){var l=f[0],d=f[1];l===r.originalStart+r.originalLength&&d===r.modifiedStart+r.modifiedLength||(r.originalLength=l-r.originalStart,r.modifiedLength=d-r.modifiedStart,e.originalStart=l+o,e.modifiedStart=d+o,e.originalLength=a-e.originalStart,e.modifiedLength=h-e.modifiedStart)}}}return t};t.prototype._findBetterContiguousSequence=function(t,n,i,r,e){if(n<e||r<e)return null;var o=t+n-e+1,s=i+r-e+1;var u=0,a=0,h=0;for(var c=t;c<o;c++)for(var f=i;f<s;f++){var l=this._contiguousSequenceScore(c,f,e);l>0&&l>u&&(u=l,a=c,h=f)}return u>0?[a,h]:null};t.prototype._contiguousSequenceScore=function(t,n,i){var r=0;for(var e=0;e<i;e++){if(!this.ElementsAreEqual(t+e,n+e))return 0;r+=this._originalStringElements[t+e].length}return r};t.prototype._OriginalIsBoundary=function(t){return t<=0||t>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[t])};t.prototype._OriginalRegionIsBoundary=function(t,n){if(this._OriginalIsBoundary(t)||this._OriginalIsBoundary(t-1))return!0;if(n>0){var i=t+n;if(this._OriginalIsBoundary(i-1)||this._OriginalIsBoundary(i))return!0}return!1};t.prototype._ModifiedIsBoundary=function(t){return t<=0||t>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[t])};t.prototype._ModifiedRegionIsBoundary=function(t,n){if(this._ModifiedIsBoundary(t)||this._ModifiedIsBoundary(t-1))return!0;if(n>0){var i=t+n;if(this._ModifiedIsBoundary(i-1)||this._ModifiedIsBoundary(i))return!0}return!1};t.prototype._boundaryScore=function(t,n,i,r){return(this._OriginalRegionIsBoundary(t,n)?1:0)+(this._ModifiedRegionIsBoundary(i,r)?1:0)};t.prototype.ConcatenateChanges=function(t,n){var i=[];if(t.length===0||n.length===0)return n.length>0?n:t;if(this.ChangesOverlap(t[t.length-1],n[0],i)){var r=new Array(t.length+n.length-1);return Pv.Copy(t,0,r,0,t.length-1),r[t.length-1]=i[0],Pv.Copy(n,1,r,t.length,n.length-1),r}{var r=new Array(t.length+n.length);return Pv.Copy(t,0,r,0,t.length),Pv.Copy(n,0,r,t.length,n.length),r}};t.prototype.ChangesOverlap=function(t,n,i){if(Nv.Assert(t.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),Nv.Assert(t.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),t.originalStart+t.originalLength>=n.originalStart||t.modifiedStart+t.modifiedLength>=n.modifiedStart){var r=t.originalStart;var e=t.originalLength;var o=t.modifiedStart;var s=t.modifiedLength;return t.originalStart+t.originalLength>=n.originalStart&&(e=n.originalStart+n.originalLength-t.originalStart),t.modifiedStart+t.modifiedLength>=n.modifiedStart&&(s=n.modifiedStart+n.modifiedLength-t.modifiedStart),i[0]=new Tv(r,e,o,s),!0}return i[0]=null,!1};t.prototype.ClipDiagonalBound=function(t,n,i,r){if(t>=0&&t<r)return t;var e=n%2==0;return t<0?e===(i%2==0)?0:1:e===((r-i-1)%2==0)?r-1:r-2};return t}();function zv(t){return t<0?0:t>255?255:0|t}function Uv(t){return t<0?0:t>4294967295?4294967295:0|t}var Kv=function(){function t(t){this.values=t,this.prefixSum=new Uint32Array(t.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}t.prototype.insertValues=function(t,n){t=Uv(t);var i=this.values,r=this.prefixSum,e=n.length;return e!==0&&(this.values=new Uint32Array(i.length+e),this.values.set(i.subarray(0,t),0),this.values.set(i.subarray(t),t+e),this.values.set(n,t),t-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=t-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)};t.prototype.setValue=function(t,n){return t=Uv(t),n=Uv(n),this.values[t]!==n&&(this.values[t]=n,t-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=t-1),!0)};t.prototype.removeValues=function(t,n){t=Uv(t),n=Uv(n);var i=this.values,r=this.prefixSum;if(t>=i.length)return!1;var e=i.length-t;return n>=e&&(n=e),n!==0&&(this.values=new Uint32Array(i.length-n),this.values.set(i.subarray(0,t),0),this.values.set(i.subarray(t+n),t),this.prefixSum=new Uint32Array(this.values.length),t-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=t-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(r.subarray(0,this.prefixSumValidIndex[0]+1)),!0)};t.prototype.getTotalSum=function(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)};t.prototype.getPrefixSum=function(t){return t<0?0:(t=Uv(t),this._getPrefixSum(t))};t.prototype._getPrefixSum=function(t){if(t<=this.prefixSumValidIndex[0])return this.prefixSum[t];var n=this.prefixSumValidIndex[0]+1;n===0&&(this.prefixSum[0]=this.values[0],n++),t>=this.values.length&&(t=this.values.length-1);for(var i=n;i<=t;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],t),this.prefixSum[t]};t.prototype.getIndexOf=function(t){t=Math.floor(t),this.getTotalSum();var n=0,i=this.values.length-1,r=0,e=0,o=0;for(;n<=i;)if(r=n+(i-n)/2|0,e=this.prefixSum[r],o=e-this.values[r],t<o)i=r-1;else{if(!(t>=e))break;n=r+1}return new qv(r,t-o)};return t}();var Vv=function(){function t(t){this._values=t,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}t.prototype.getTotalSum=function(){return this._ensureValid(),this._indexBySum.length};t.prototype.getPrefixSum=function(t){return this._ensureValid(),t===0?0:this._prefixSum[t-1]};t.prototype.getIndexOf=function(t){this._ensureValid();var n=this._indexBySum[t],i=n>0?this._prefixSum[n-1]:0;return new qv(n,t-i)};t.prototype.removeValues=function(t,n){this._values.splice(t,n),this._invalidate(t)};t.prototype.insertValues=function(t,n){this._values=D(this._values,t,n),this._invalidate(t)};t.prototype._invalidate=function(t){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,t-1)};t.prototype._ensureValid=function(){if(!this._isValid){for(var t=this._validEndIndex+1,n=this._values.length;t<n;t++){var i=this._values[t],r=t>0?this._prefixSum[t-1]:0;this._prefixSum[t]=r+i;for(var e=0;e<i;e++)this._indexBySum[r+e]=t}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}};t.prototype.setValue=function(t,n){this._values[t]!==n&&(this._values[t]=n,this._invalidate(t))};return t}();var qv=function(){function t(t,n){this.index=t,this.remainder=n,this._prefixSumIndexOfResultBrand=void 0,this.index=t,this.remainder=n}return t}();var Gv=function(){function t(t,n,i,r){this._uri=t,this._lines=n,this._eol=i,this._versionId=r,this._lineStarts=null,this._cachedTextValue=null}t.prototype.dispose=function(){this._lines.length=0};Object.defineProperty(t.prototype,"version",{get:function(){return this._versionId},enumerable:false,configurable:true});t.prototype.getText=function(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue};t.prototype.onEvents=function(t){t.eol&&t.eol!==this._eol&&(this._eol=t.eol,this._lineStarts=null);var n=t.changes;for(var i=0,r=n;i<r.length;i++){var e=r[i];this._acceptDeleteRange(e.range),this._acceptInsertText(new Tr(e.range.startLineNumber,e.range.startColumn),e.text)}this._versionId=t.versionId,this._cachedTextValue=null};t.prototype._ensureLineStarts=function(){if(!this._lineStarts){var t=this._eol.length,n=this._lines.length,i=new Uint32Array(n);for(var r=0;r<n;r++)i[r]=this._lines[r].length+t;this._lineStarts=new Kv(i)}};t.prototype._setLineText=function(t,n){this._lines[t]=n,this._lineStarts&&this._lineStarts.setValue(t,this._lines[t].length+this._eol.length)};t.prototype._acceptDeleteRange=function(t){if(t.startLineNumber!==t.endLineNumber)this._setLineText(t.startLineNumber-1,this._lines[t.startLineNumber-1].substring(0,t.startColumn-1)+this._lines[t.endLineNumber-1].substring(t.endColumn-1)),this._lines.splice(t.startLineNumber,t.endLineNumber-t.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(t.startLineNumber,t.endLineNumber-t.startLineNumber);else{if(t.startColumn===t.endColumn)return;this._setLineText(t.startLineNumber-1,this._lines[t.startLineNumber-1].substring(0,t.startColumn-1)+this._lines[t.startLineNumber-1].substring(t.endColumn-1))}};t.prototype._acceptInsertText=function(t,n){if(n.length===0)return;var i=lo(n);if(i.length===1)return void this._setLineText(t.lineNumber-1,this._lines[t.lineNumber-1].substring(0,t.column-1)+i[0]+this._lines[t.lineNumber-1].substring(t.column-1));i[i.length-1]+=this._lines[t.lineNumber-1].substring(t.column-1),this._setLineText(t.lineNumber-1,this._lines[t.lineNumber-1].substring(0,t.column-1)+i[0]);var r=new Uint32Array(i.length-1);for(var e=1;e<i.length;e++)this._lines.splice(t.lineNumber+e-1,0,i[e]),r[e-1]=i[e].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(t.lineNumber,r)};return t}();var $v=function(){function t(n){var i=zv(n);this._defaultValue=i,this._asciiMap=t._createAsciiMap(i),this._map=new Map}t._createAsciiMap=function(t){var n=new Uint8Array(256);return n.fill(t),n};t.prototype.set=function(t,n){var i=zv(n);t>=0&&t<256?this._asciiMap[t]=i:this._map.set(t,i)};t.prototype.get=function(t){return t>=0&&t<256?this._asciiMap[t]:this._map.get(t)||this._defaultValue};t.prototype.clear=function(){this._asciiMap.fill(this._defaultValue),this._map.clear()};return t}();var Jv=function(){function t(){this._actual=new $v(0)}t.prototype.add=function(t){this._actual.set(t,1)};t.prototype.has=function(t){return this._actual.get(t)===1};t.prototype.clear=function(){return this._actual.clear()};return t}();var Zv=function(){function t(t,n,i){var r=new Uint8Array(t*n);for(var e=0,o=t*n;e<o;e++)r[e]=i;this._data=r,this.rows=t,this.cols=n}t.prototype.get=function(t,n){return this._data[t*this.cols+n]};t.prototype.set=function(t,n,i){this._data[t*this.cols+n]=i};return t}();var Qv=function(){function t(t){var n=0,i=0;for(var r=0,e=t.length;r<e;r++){var o=t[r],s=o[0],u=o[1],a=o[2];u>n&&(n=u),s>i&&(i=s),a>i&&(i=a)}n++,i++;var h=new Zv(i,n,0);for(var r=0,e=t.length;r<e;r++){var c=t[r],s=c[0],u=c[1],a=c[2];h.set(s,u,a)}this._states=h,this._maxCharCode=n}t.prototype.nextState=function(t,n){return n<0||n>=this._maxCharCode?0:this._states.get(t,n)};return t}();var Yv=null,Xv=null;var td=function(){function t(){}t._createLink=function(t,n,i,r,e){var o=e-1;do{var s=n.charCodeAt(o);if(t.get(s)!==2)break;o--}while(o>r);if(r>0){var s=n.charCodeAt(r-1),u=n.charCodeAt(o);(s===40&&u===41||s===91&&u===93||s===123&&u===125)&&o--}return{range:{startLineNumber:i,startColumn:r+1,endLineNumber:i,endColumn:o+2},url:n.substring(r,o+1)}};t.computeLinks=function(n,i){if(i===void 0){i=function(){return Yv===null&&(Yv=new Qv([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Yv}()}var r=function(){if(Xv===null){Xv=new $v(0);var t=" \t<>'\"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…";for(var n=0;n<t.length;n++)Xv.set(t.charCodeAt(n),1);var i=".,;:";for(var n=0;n<i.length;n++)Xv.set(i.charCodeAt(n),2)}return Xv}(),e=[];for(var o=1,s=n.getLineCount();o<=s;o++){var u=n.getLineContent(o),a=u.length;var h=0,c=0,f=0,l=1,v=!1,d=!1,g=!1,p=!1;for(;h<a;){var w=!1;var m=u.charCodeAt(h);if(l===13){var b=void 0;switch(m){case 40:v=!0,b=0;break;case 41:b=v?0:1;break;case 91:g=!0,d=!0,b=0;break;case 93:g=!1,b=d?0:1;break;case 123:p=!0,b=0;break;case 125:b=p?0:1;break;case 39:case 34:case 96:b=f===m?1:f===39||f===34||f===96?0:1;break;case 42:b=f===42?1:0;break;case 124:b=f===124?1:0;break;case 32:b=g?0:1;break;default:b=r.get(m)}b===1&&(e.push(t._createLink(r,u,o,c,h)),w=!0)}else if(l===12){var b=void 0;m===91?(d=!0,b=0):b=r.get(m),b===1?w=!0:l=13}else l=i.nextState(l,m),l===0&&(w=!0);w&&(l=1,v=!1,d=!1,p=!1,c=h+1,f=m),h++}l===13&&e.push(t._createLink(r,u,o,c,a))}return e};return t}();var nd=function(){function t(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}t.prototype.navigateValueSet=function(t,n,i,r,e){if(t&&n){var o=this.doNavigateValueSet(n,e);if(o)return{range:t,value:o}}if(i&&r){var o=this.doNavigateValueSet(r,e);if(o)return{range:i,value:o}}return null};t.prototype.doNavigateValueSet=function(t,n){var i=this.numberReplace(t,n);return i!==null?i:this.textReplace(t,n)};t.prototype.numberReplace=function(t,n){var i=Math.pow(10,t.length-(t.lastIndexOf(".")+1));var r=Number(t);var e=parseFloat(t);return isNaN(r)||isNaN(e)||r!==e?null:r!==0||n?(r=Math.floor(r*i),r+=n?i:-i,String(r/i)):null};t.prototype.textReplace=function(t,n){return this.valueSetsReplace(this._defaultValueSet,t,n)};t.prototype.valueSetsReplace=function(t,n,i){var r=null;for(var e=0,o=t.length;r===null&&e<o;e++)r=this.valueSetReplace(t[e],n,i);return r};t.prototype.valueSetReplace=function(t,n,i){var r=t.indexOf(n);return r>=0?(r+=i?1:-1,r<0?r=t.length-1:r%=t.length,t[r]):null};return t}();var id,rd;nd.INSTANCE=new nd;var ed=function(){function t(t,n){this.uri=t,this.value=n}return t}();var od=function(){function t(n,i){if(this[id]="ResourceMap",n instanceof t)this.map=new Map(n.map),this.toKey=i!==null&&i!==void 0?i:t.defaultToKey;else if(function(t){return Array.isArray(t)}(n)){this.map=new Map,this.toKey=i!==null&&i!==void 0?i:t.defaultToKey;for(var r=0,e=n;r<e.length;r++){var o=e[r],s=o[0],u=o[1];this.set(s,u)}}else this.map=new Map,this.toKey=n!==null&&n!==void 0?n:t.defaultToKey}t.prototype.set=function(t,n){return this.map.set(this.toKey(t),new ed(t,n)),this};t.prototype.get=function(t){var n;return(n=this.map.get(this.toKey(t)))===null||n===void 0?void 0:n.value};t.prototype.has=function(t){return this.map.has(this.toKey(t))};Object.defineProperty(t.prototype,"size",{get:function(){return this.map.size},enumerable:false,configurable:true});t.prototype.clear=function(){this.map.clear()};t.prototype.delete=function(t){return this.map.delete(this.toKey(t))};t.prototype.forEach=function(t,n){n!==void 0&&(t=t.bind(n));for(var i=0,r=this.map;i<r.length;i++){var e=r[i],o=e[0],s=e[1];t(s.value,s.uri,this)}};t.prototype.values=function(){var t,n,i;return __generator(this,(function(r){switch(r.label){case 0:t=0,n=this.map.values();r.label=1;case 1:if(!(t<n.length))return[3,4];i=n[t];return[4,i.value];case 2:r.sent();r.label=3;case 3:t++;return[3,1];case 4:return[2]}}))};t.prototype.keys=function(){var t,n,i;return __generator(this,(function(r){switch(r.label){case 0:t=0,n=this.map.values();r.label=1;case 1:if(!(t<n.length))return[3,4];i=n[t];return[4,i.uri];case 2:r.sent();r.label=3;case 3:t++;return[3,1];case 4:return[2]}}))};t.prototype.entries=function(){var t,n,i;return __generator(this,(function(r){switch(r.label){case 0:t=0,n=this.map.values();r.label=1;case 1:if(!(t<n.length))return[3,4];i=n[t];return[4,[i.uri,i.value]];case 2:r.sent();r.label=3;case 3:t++;return[3,1];case 4:return[2]}}))};t.prototype[(id=Symbol.toStringTag,Symbol.iterator)]=function(){var t,n,i,r;return __generator(this,(function(e){switch(e.label){case 0:t=0,n=this.map;e.label=1;case 1:if(!(t<n.length))return[3,4];i=n[t],r=i[1];return[4,[r.uri,r.value]];case 2:e.sent();e.label=3;case 3:t++;return[3,1];case 4:return[2]}}))};return t}();od.defaultToKey=function(t){return t.toString()};var sd=function(){function t(){this[rd]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}t.prototype.clear=function(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++};t.prototype.isEmpty=function(){return!this._head&&!this._tail};Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"first",{get:function(){var t;return(t=this._head)===null||t===void 0?void 0:t.value},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"last",{get:function(){var t;return(t=this._tail)===null||t===void 0?void 0:t.value},enumerable:false,configurable:true});t.prototype.has=function(t){return this._map.has(t)};t.prototype.get=function(t,n){if(n===void 0){n=0}var i=this._map.get(t);if(i)return n!==0&&this.touch(i,n),i.value};t.prototype.set=function(t,n,i){if(i===void 0){i=0}var r=this._map.get(t);if(r)r.value=n,i!==0&&this.touch(r,i);else{switch(r={key:t,value:n,next:void 0,previous:void 0},i){case 0:case 2:default:this.addItemLast(r);break;case 1:this.addItemFirst(r)}this._map.set(t,r),this._size++}return this};t.prototype.delete=function(t){return!!this.remove(t)};t.prototype.remove=function(t){var n=this._map.get(t);if(n)return this._map.delete(t),this.removeItem(n),this._size--,n.value};t.prototype.shift=function(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");var t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value};t.prototype.forEach=function(t,n){var i=this._state;var r=this._head;for(;r;){if(n?t.bind(n)(r.value,r.key,this):t(r.value,r.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}};t.prototype.keys=function(){var t;var n=this,i=this._state;var r=this._head;var e=(t={},t[Symbol.iterator]=function(){return e},t.next=function(){if(n._state!==i)throw new Error("LinkedMap got modified during iteration.");if(r){var t={value:r.key,done:!1};return r=r.next,t}return{value:void 0,done:!0}},t);return e};t.prototype.values=function(){var t;var n=this,i=this._state;var r=this._head;var e=(t={},t[Symbol.iterator]=function(){return e},t.next=function(){if(n._state!==i)throw new Error("LinkedMap got modified during iteration.");if(r){var t={value:r.value,done:!1};return r=r.next,t}return{value:void 0,done:!0}},t);return e};t.prototype.entries=function(){var t;var n=this,i=this._state;var r=this._head;var e=(t={},t[Symbol.iterator]=function(){return e},t.next=function(){if(n._state!==i)throw new Error("LinkedMap got modified during iteration.");if(r){var t={value:[r.key,r.value],done:!1};return r=r.next,t}return{value:void 0,done:!0}},t);return e};t.prototype[(rd=Symbol.toStringTag,Symbol.iterator)]=function(){return this.entries()};t.prototype.trimOld=function(t){if(t>=this.size)return;if(t===0)return void this.clear();var n=this._head,i=this.size;for(;n&&i>t;)this._map.delete(n.key),n=n.next,i--;this._head=n,this._size=i,n&&(n.previous=void 0),this._state++};t.prototype.addItemFirst=function(t){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");t.next=this._head,this._head.previous=t}else this._tail=t;this._head=t,this._state++};t.prototype.addItemLast=function(t){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");t.previous=this._tail,this._tail.next=t}else this._head=t;this._tail=t,this._state++};t.prototype.removeItem=function(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{var n=t.next,i=t.previous;if(!n||!i)throw new Error("Invalid list");n.previous=i,i.next=n}t.next=void 0,t.previous=void 0,this._state++};t.prototype.touch=function(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(n===1||n===2){if(n===1){if(t===this._head)return;var i=t.next,r=t.previous;t===this._tail?(r.next=void 0,this._tail=r):(i.previous=r,r.next=i),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===2){if(t===this._tail)return;var i=t.next,r=t.previous;t===this._head?(i.previous=void 0,this._head=i):(i.previous=r,r.next=i),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}};t.prototype.toJSON=function(){var t=[];return this.forEach((function(n,i){t.push([i,n])})),t};t.prototype.fromJSON=function(t){this.clear();for(var n=0,i=t;n<i.length;n++){var r=i[n],e=r[0],o=r[1];this.set(e,o)}};return t}();var ud=function(t){__extends(n,t);function n(n,i){if(i===void 0){i=1}var r=this;r=t.call(this)||this,r._limit=n,r._ratio=Math.min(Math.max(0,i),1);return r}Object.defineProperty(n.prototype,"limit",{get:function(){return this._limit},set:function(t){this._limit=t,this.checkTrim()},enumerable:false,configurable:true});n.prototype.get=function(n,i){if(i===void 0){i=2}return t.prototype.get.call(this,n,i)};n.prototype.peek=function(n){return t.prototype.get.call(this,n,0)};n.prototype.set=function(n,i){return t.prototype.set.call(this,n,i,2),this.checkTrim(),this};n.prototype.checkTrim=function(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))};return n}(sd);var ad=function(){function t(t){if(this._m1=new Map,this._m2=new Map,t)for(var n=0,i=t;n<i.length;n++){var r=i[n],e=r[0],o=r[1];this.set(e,o)}}t.prototype.clear=function(){this._m1.clear(),this._m2.clear()};t.prototype.set=function(t,n){this._m1.set(t,n),this._m2.set(n,t)};t.prototype.get=function(t){return this._m1.get(t)};t.prototype.getKey=function(t){return this._m2.get(t)};t.prototype.delete=function(t){var n=this._m1.get(t);return n!==void 0&&(this._m1.delete(t),this._m2.delete(n),!0)};t.prototype.keys=function(){return this._m1.keys()};t.prototype.values=function(){return this._m1.values()};return t}();var hd=function(){function t(){this.map=new Map}t.prototype.add=function(t,n){var i=this.map.get(t);i||(i=new Set,this.map.set(t,i)),i.add(n)};t.prototype.delete=function(t,n){var i=this.map.get(t);i&&(i.delete(n),i.size===0&&this.map.delete(t))};t.prototype.forEach=function(t,n){var i=this.map.get(t);i&&i.forEach(n)};t.prototype.get=function(t){return this.map.get(t)||new Set};return t}();var cd=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,0)||this,r._segmenter=null,r._cachedLine=null,r._cachedSegments=[],r.intlSegmenterLocales=i,r.intlSegmenterLocales.length>0?r._segmenter=new Intl.Segmenter(r.intlSegmenterLocales,{granularity:"word"}):r._segmenter=null;for(var e=0,o=n.length;e<o;e++)r.set(n.charCodeAt(e),2);r.set(32,1),r.set(9,1);return r}n.prototype.findPrevIntlWordBeforeOrAtOffset=function(t,n){var i=null;for(var r=0,e=this._getIntlSegmenterWordsOnLine(t);r<e.length;r++){var o=e[r];if(o.index>n)break;i=o}return i};n.prototype.findNextIntlWordAtOrAfterOffset=function(t,n){for(var i=0,r=this._getIntlSegmenterWordsOnLine(t);i<r.length;i++){var e=r[i];if(!(e.index<n))return e}return null};n.prototype._getIntlSegmenterWordsOnLine=function(t){return this._segmenter?(this._cachedLine===t||(this._cachedLine=t,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(t))),this._cachedSegments):[]};n.prototype._filterWordSegments=function(t){var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];this._isWordLike(e)&&n.push(e)}return n};n.prototype._isWordLike=function(t){return!!t.isWordLike};return n}($v);var fd=new ud(10);function ld(t,n){var i="".concat(t,"/").concat(n.join(","));var r=fd.get(i);return r||(r=new cd(t,n),fd.set(i,r)),r}var vd,dd,gd;(function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=4]="Right",t[t.Full=7]="Full"})(vd||(vd={})),function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=3]="Right"}(dd||(dd={})),function(t){t[t.Both=0]="Both",t[t.Right=1]="Right",t[t.Left=2]="Left",t[t.None=3]="None"}(gd||(gd={}));var pd=function(){function t(t){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|t.tabSize),t.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,0|t.indentSize),this._indentSizeIsTabSize=!1),this.insertSpaces=!!t.insertSpaces,this.defaultEOL=0|t.defaultEOL,this.trimAutoWhitespace=!!t.trimAutoWhitespace,this.bracketPairColorizationOptions=t.bracketPairColorizationOptions}Object.defineProperty(t.prototype,"originalIndentSize",{get:function(){return this._indentSizeIsTabSize?"tabSize":this.indentSize},enumerable:false,configurable:true});t.prototype.equals=function(t){return this.tabSize===t.tabSize&&this._indentSizeIsTabSize===t._indentSizeIsTabSize&&this.indentSize===t.indentSize&&this.insertSpaces===t.insertSpaces&&this.defaultEOL===t.defaultEOL&&this.trimAutoWhitespace===t.trimAutoWhitespace&&ot(this.bracketPairColorizationOptions,t.bracketPairColorizationOptions)};t.prototype.createChangeEvent=function(t){return{tabSize:this.tabSize!==t.tabSize,indentSize:this.indentSize!==t.indentSize,insertSpaces:this.insertSpaces!==t.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==t.trimAutoWhitespace}};return t}();var wd=function(){function t(t,n){this._findMatchBrand=void 0,this.range=t,this.matches=n}return t}();var md=function(){function t(t,n,i,r,e,o){this.identifier=t,this.range=n,this.text=i,this.forceMoveMarkers=r,this.isAutoWhitespaceEdit=e,this._isTracked=o}return t}();var bd=function(){function t(t,n,i){this.regex=t,this.wordSeparators=n,this.simpleSearch=i}return t}();var yd=function(){function t(t,n,i){this.reverseEdits=t,this.changes=n,this.trimAutoWhitespaceLineNumbers=i}return t}();function _d(t){return!t.isTooLargeForSyncing()&&!t.isForSimpleWidget}var kd=function(){function t(t,n,i,r){this.searchString=t,this.isRegex=n,this.matchCase=i,this.wordSeparators=r}t.prototype.parseSearchRequest=function(){if(this.searchString==="")return null;var t;t=this.isRegex?function(t){if(!t||t.length===0)return!1;for(var n=0,i=t.length;n<i;n++){var r=t.charCodeAt(n);if(r===10)return!0;if(r===92){if(n++,n>=i)break;var e=t.charCodeAt(n);if(e===110||e===114||e===87)return!0}}return!1}(this.searchString):this.searchString.indexOf("\n")>=0;var n=null;try{n=fo(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:t,global:!0,unicode:!0})}catch(t){return null}if(!n)return null;var i=!this.isRegex&&!t;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new bd(n,this.wordSeparators?ld(this.wordSeparators,[]):null,i?this.searchString:null)};return t}();function xd(t,n,i){if(!i)return new wd(t,null);var r=[];for(var e=0,o=n.length;e<o;e++)r[e]=n[e];return new wd(t,r)}var Cd=function(){function t(t){var n=[];var i=0;for(var r=0,e=t.length;r<e;r++)t.charCodeAt(r)===10&&(n[i++]=r);this._lineFeedsOffsets=n}t.prototype.findLineFeedCountBeforeOffset=function(t){var n=this._lineFeedsOffsets;var i=0,r=n.length-1;if(r===-1||t<=n[0])return 0;for(;i<r;){var e=i+((r-i)/2|0);n[e]>=t?r=e-1:n[e+1]>=t?(i=e,r=e):i=e+1}return i+1};return t}();var Sd=function(){function t(){}t.findMatches=function(t,n,i,r,e){var o=n.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(t,i,new Ad(o.wordSeparators,o.regex),r,e):this._doFindMatchesLineByLine(t,i,o,r,e):[]};t._getMultilineMatchRange=function(t,n,i,r,e,o){var s,u,a=0;if(r?(a=r.findLineFeedCountBeforeOffset(e),s=n+e+a):s=n+e,r){var h=r.findLineFeedCountBeforeOffset(e+o.length)-a;u=s+o.length+h}else u=s+o.length;var c=t.getPositionAt(s),f=t.getPositionAt(u);return new Ir(c.lineNumber,c.column,f.lineNumber,f.column)};t._doFindMatchesMultiline=function(t,n,i,r,e){var o=t.getOffsetAt(n.getStartPosition()),s=t.getValueInRange(n,1),u=t.getEOL()==="\r\n"?new Cd(s):null,a=[];var h,c=0;for(i.reset(0);h=i.next(s);)if(a[c++]=xd(this._getMultilineMatchRange(t,o,s,u,h.index,h[0]),h,r),c>=e)return a;return a};t._doFindMatchesLineByLine=function(t,n,i,r,e){var o=[];var s=0;if(n.startLineNumber===n.endLineNumber){var u=t.getLineContent(n.startLineNumber).substring(n.startColumn-1,n.endColumn-1);return s=this._findMatchesInLine(i,u,n.startLineNumber,n.startColumn-1,s,o,r,e),o}var a=t.getLineContent(n.startLineNumber).substring(n.startColumn-1);s=this._findMatchesInLine(i,a,n.startLineNumber,n.startColumn-1,s,o,r,e);for(var u=n.startLineNumber+1;u<n.endLineNumber&&s<e;u++)s=this._findMatchesInLine(i,t.getLineContent(u),u,0,s,o,r,e);if(s<e){var u=t.getLineContent(n.endLineNumber).substring(0,n.endColumn-1);s=this._findMatchesInLine(i,u,n.endLineNumber,0,s,o,r,e)}return o};t._findMatchesInLine=function(t,n,i,r,e,o,s,u){var a=t.wordSeparators;if(!s&&t.simpleSearch){var h=t.simpleSearch,c=h.length,f=n.length;var l=-c;for(;(l=n.indexOf(h,l+c))!==-1;)if((!a||Dd(a,n,f,l,c))&&(o[e++]=new wd(new Ir(i,l+1+r,i,l+1+c+r),null),e>=u))return e;return e}var v=new Ad(t.wordSeparators,t.regex);var d;v.reset(0);do{if(d=v.next(n),d&&(o[e++]=xd(new Ir(i,d.index+1+r,i,d.index+1+d[0].length+r),d,s),e>=u))return e}while(d);return e};t.findNextMatch=function(t,n,i,r){var e=n.parseSearchRequest();if(!e)return null;var o=new Ad(e.wordSeparators,e.regex);return e.regex.multiline?this._doFindNextMatchMultiline(t,i,o,r):this._doFindNextMatchLineByLine(t,i,o,r)};t._doFindNextMatchMultiline=function(t,n,i,r){var e=new Tr(n.lineNumber,1),o=t.getOffsetAt(e),s=t.getLineCount(),u=t.getValueInRange(new Ir(e.lineNumber,e.column,s,t.getLineMaxColumn(s)),1),a=t.getEOL()==="\r\n"?new Cd(u):null;i.reset(n.column-1);var h=i.next(u);return h?xd(this._getMultilineMatchRange(t,o,u,a,h.index,h[0]),h,r):n.lineNumber!==1||n.column!==1?this._doFindNextMatchMultiline(t,new Tr(1,1),i,r):null};t._doFindNextMatchLineByLine=function(t,n,i,r){var e=t.getLineCount(),o=n.lineNumber,s=t.getLineContent(o),u=this._findFirstMatchInLine(i,s,o,n.column,r);if(u)return u;for(var a=1;a<=e;a++){var h=(o+a-1)%e,c=t.getLineContent(h+1),f=this._findFirstMatchInLine(i,c,h+1,1,r);if(f)return f}return null};t._findFirstMatchInLine=function(t,n,i,r,e){t.reset(r-1);var o=t.next(n);return o?xd(new Ir(i,o.index+1,i,o.index+1+o[0].length),o,e):null};t.findPreviousMatch=function(t,n,i,r){var e=n.parseSearchRequest();if(!e)return null;var o=new Ad(e.wordSeparators,e.regex);return e.regex.multiline?this._doFindPreviousMatchMultiline(t,i,o,r):this._doFindPreviousMatchLineByLine(t,i,o,r)};t._doFindPreviousMatchMultiline=function(t,n,i,r){var e=this._doFindMatchesMultiline(t,new Ir(1,1,n.lineNumber,n.column),i,r,9990);if(e.length>0)return e[e.length-1];var o=t.getLineCount();return n.lineNumber!==o||n.column!==t.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(t,new Tr(o,t.getLineMaxColumn(o)),i,r):null};t._doFindPreviousMatchLineByLine=function(t,n,i,r){var e=t.getLineCount(),o=n.lineNumber,s=t.getLineContent(o).substring(0,n.column-1),u=this._findLastMatchInLine(i,s,o,r);if(u)return u;for(var a=1;a<=e;a++){var h=(e+o-a-1)%e,c=t.getLineContent(h+1),f=this._findLastMatchInLine(i,c,h+1,r);if(f)return f}return null};t._findLastMatchInLine=function(t,n,i,r){var e,o=null;for(t.reset(0);e=t.next(n);)o=xd(new Ir(i,e.index+1,i,e.index+1+e[0].length),e,r);return o};return t}();function Dd(t,n,i,r,e){return function(t,n,i,r,e){if(r===0)return!0;var o=n.charCodeAt(r-1);if(t.get(o)!==0||o===13||o===10)return!0;if(e>0){var s=n.charCodeAt(r);if(t.get(s)!==0)return!0}return!1}(t,n,0,r,e)&&function(t,n,i,r,e){if(r+e===i)return!0;var o=n.charCodeAt(r+e);if(t.get(o)!==0||o===13||o===10)return!0;if(e>0){var s=n.charCodeAt(r+e-1);if(t.get(s)!==0)return!0}return!1}(t,n,i,r,e)}var Ad=function(){function t(t,n){this._wordSeparators=t,this._searchRegex=n,this._prevMatchStartIndex=-1,this._prevMatchLength=0}t.prototype.reset=function(t){this._searchRegex.lastIndex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0};t.prototype.next=function(t){var n=t.length;var i;do{if(this._prevMatchStartIndex+this._prevMatchLength===n||(i=this._searchRegex.exec(t),!i))return null;var r=i.index,e=i[0].length;if(r===this._prevMatchStartIndex&&e===this._prevMatchLength){if(e===0){Fo(t,n,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=r,this._prevMatchLength=e,!this._wordSeparators||Dd(this._wordSeparators,t,n,r,e))return i}while(i);return null};return t}();var Od=function(){function t(){}t.computeUnicodeHighlights=function(t,n,i){var r=i?i.startLineNumber:1,e=i?i.endLineNumber:t.getLineCount(),o=new Ed(n),s=o.getCandidateCodePoints();var u;u=s==="allNonBasicAscii"?new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):new RegExp("[".concat(uo(Array.from(s).map((function(t){return String.fromCodePoint(t)})).join("")),"]"),"g");var a=new Ad(null,u),h=[];var c,f=!1,l=0,v=0,d=0;t:for(var g=r,p=e;g<=p;g++){var w=t.getLineContent(g),m=w.length;a.reset(0);do{if(c=a.next(w),c){var b=c.index,y=c.index+c[0].length;b>0&&Oo(w.charCodeAt(b-1))&&b--,y+1<m&&Oo(w.charCodeAt(y-1))&&y++;var _=w.substring(b,y);var k=sn(b+1,rn,w,0);k&&k.endColumn<=b+1&&(k=null);var x=o.shouldHighlightNonBasicASCII(_,k?k.word:null);if(x!==0){if(x===3?l++:x===2?v++:x===1?d++:tf(),h.length>=1e3){f=!0;break t}h.push(new Ir(g,b+1,g,y+1))}}}while(c)}return{ranges:h,hasMore:f,ambiguousCharacterCount:l,invisibleCharacterCount:v,nonBasicAsciiCharacterCount:d}};t.computeUnicodeHighlightReason=function(t,n){var i=new Ed(n);switch(i.shouldHighlightNonBasicASCII(t,null)){case 0:return null;case 2:return{kind:1};case 3:{var r=t.codePointAt(0),e=i.ambiguousCharacters.getPrimaryConfusable(r),o=Qo.getLocales().filter((function(t){return!Qo.getInstance(new Set(__spreadArray(__spreadArray([],n.allowedLocales,true),[t],false))).isAmbiguous(r)}));return{kind:0,confusableWith:String.fromCodePoint(e),notAmbiguousInLocales:o}}case 1:return{kind:2}}};return t}();var Ed=function(){function t(t){this.options=t,this.allowedCodePoints=new Set(t.allowedCodePoints),this.ambiguousCharacters=Qo.getInstance(new Set(t.allowedLocales))}t.prototype.getCandidateCodePoints=function(){if(this.options.nonBasicASCII)return"allNonBasicAscii";var t=new Set;if(this.options.invisibleCharacters)for(var n=0,i=Yo.codePoints;n<i.length;n++){var r=i[n];Md(String.fromCodePoint(r))||t.add(r)}if(this.options.ambiguousCharacters)for(var e=0,o=this.ambiguousCharacters.getConfusableCodePoints();e<o.length;e++){var r=o[e];t.add(r)}for(var s=0,u=this.allowedCodePoints;s<u.length;s++){var r=u[s];t.delete(r)}return t};t.prototype.shouldHighlightNonBasicASCII=function(t,n){var i=t.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;var r=!1,e=!1;if(n)for(var o=0,s=n;o<s.length;o++){var u=s[o];var a=u.codePointAt(0),h=Po(u);r=r||h,h||this.ambiguousCharacters.isAmbiguous(a)||Yo.isInvisibleCharacter(a)||(e=!0)}return!r&&e?0:this.options.invisibleCharacters&&!Md(t)&&Yo.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0};return t}();function Md(t){return t===" "||t==="\n"||t==="\t"}var Fd=function(){function t(t,n,i){this.changes=t,this.moves=n,this.hitTimeout=i}return t}();var Ld=function(){function t(t,n){this.lineRangeMapping=t,this.changes=n}return t}();var jd=function(){function t(t,n){if(this.start=t,this.endExclusive=n,t>n)throw new ri("Invalid range: ".concat(this.toString()))}t.addRange=function(n,i){var r=0;for(;r<i.length&&i[r].endExclusive<n.start;)r++;var e=r;for(;e<i.length&&i[e].start<=n.endExclusive;)e++;if(r===e)i.splice(r,0,n);else{var o=Math.min(n.start,i[r].start),s=Math.max(n.endExclusive,i[e-1].endExclusive);i.splice(r,e-r,new t(o,s))}};t.tryCreate=function(n,i){if(!(n>i))return new t(n,i)};t.ofLength=function(n){return new t(0,n)};t.ofStartAndLength=function(n,i){return new t(n,n+i)};Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.start===this.endExclusive},enumerable:false,configurable:true});t.prototype.delta=function(n){return new t(this.start+n,this.endExclusive+n)};t.prototype.deltaStart=function(n){return new t(this.start+n,this.endExclusive)};t.prototype.deltaEnd=function(n){return new t(this.start,this.endExclusive+n)};Object.defineProperty(t.prototype,"length",{get:function(){return this.endExclusive-this.start},enumerable:false,configurable:true});t.prototype.toString=function(){return"[".concat(this.start,", ").concat(this.endExclusive,")")};t.prototype.contains=function(t){return this.start<=t&&t<this.endExclusive};t.prototype.join=function(n){return new t(Math.min(this.start,n.start),Math.max(this.endExclusive,n.endExclusive))};t.prototype.intersect=function(n){var i=Math.max(this.start,n.start),r=Math.min(this.endExclusive,n.endExclusive);if(i<=r)return new t(i,r)};t.prototype.intersects=function(t){return Math.max(this.start,t.start)<Math.min(this.endExclusive,t.endExclusive)};t.prototype.isBefore=function(t){return this.endExclusive<=t.start};t.prototype.isAfter=function(t){return this.start>=t.endExclusive};t.prototype.slice=function(t){return t.slice(this.start,this.endExclusive)};t.prototype.substring=function(t){return t.substring(this.start,this.endExclusive)};t.prototype.clip=function(t){if(this.isEmpty)throw new ri("Invalid clipping range: ".concat(this.toString()));return Math.max(this.start,Math.min(this.endExclusive-1,t))};t.prototype.clipCyclic=function(t){if(this.isEmpty)throw new ri("Invalid clipping range: ".concat(this.toString()));return t<this.start?this.endExclusive-(this.start-t)%this.length:t>=this.endExclusive?this.start+(t-this.start)%this.length:t};t.prototype.forEach=function(t){for(var n=this.start;n<this.endExclusive;n++)t(n)};return t}();var Rd=function(){function t(){this._sortedRanges=[]}t.prototype.addRange=function(t){var n=0;for(;n<this._sortedRanges.length&&this._sortedRanges[n].endExclusive<t.start;)n++;var i=n;for(;i<this._sortedRanges.length&&this._sortedRanges[i].start<=t.endExclusive;)i++;if(n===i)this._sortedRanges.splice(n,0,t);else{var r=Math.min(t.start,this._sortedRanges[n].start),e=Math.max(t.endExclusive,this._sortedRanges[i-1].endExclusive);this._sortedRanges.splice(n,i-n,new jd(r,e))}};t.prototype.toString=function(){return this._sortedRanges.map((function(t){return t.toString()})).join(", ")};t.prototype.intersectsStrict=function(t){var n=0;for(;n<this._sortedRanges.length&&this._sortedRanges[n].endExclusive<=t.start;)n++;return n<this._sortedRanges.length&&this._sortedRanges[n].start<t.endExclusive};t.prototype.intersectWithRange=function(n){var i=new t;for(var r=0,e=this._sortedRanges;r<e.length;r++){var o=e[r];var s=o.intersect(n);s&&i.addRange(s)}return i};t.prototype.intersectWithRangeLength=function(t){return this.intersectWithRange(t).length};Object.defineProperty(t.prototype,"length",{get:function(){return this._sortedRanges.reduce((function(t,n){return t+n.length}),0)},enumerable:false,configurable:true});return t}();function Td(t,n,i){var r=function(t,n,i){if(i===void 0){i=t.length-1}for(var r=i;r>=0;r--)if(n(t[r]))return r;return-1}(t,n);if(r!==-1)return t[r]}function Id(t,n){var i=Bd(t,n);return i===-1?void 0:t[i]}function Bd(t,n,i,r){if(i===void 0){i=0}if(r===void 0){r=t.length}var e=i,o=r;for(;e<o;){var s=Math.floor((e+o)/2);n(t[s])?e=s+1:o=s}return e-1}function Nd(t,n,i,r){if(i===void 0){i=0}if(r===void 0){r=t.length}var e=i,o=r;for(;e<o;){var s=Math.floor((e+o)/2);n(t[s])?o=s:e=s+1}return e}var Pd=function(){function t(t){this._array=t,this._findLastMonotonousLastIdx=0}t.prototype.findLastMonotonous=function(n){if(t.assertInvariants){if(this._prevFindLastPredicate){for(var i=0,r=this._array;i<r.length;i++){var e=r[i];if(this._prevFindLastPredicate(e)&&!n(e))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}}this._prevFindLastPredicate=n}var o=Bd(this._array,n,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=o+1,o===-1?void 0:this._array[o]};return t}();function Wd(t,n){if(t.length===0)return;var i=t[0];for(var r=1;r<t.length;r++){var e=t[r];n(e,i)>0&&(i=e)}return i}function Hd(t,n){if(t.length===0)return-1;var i=0;for(var r=1;r<t.length;r++)n(t[r],t[i])>0&&(i=r);return i}Pd.assertInvariants=!1;var zd=function(){function t(t,n){if(t>n)throw new ri("startLineNumber ".concat(t," cannot be after endLineNumberExclusive ").concat(n));this.startLineNumber=t,this.endLineNumberExclusive=n}t.fromRangeInclusive=function(n){return new t(n.startLineNumber,n.endLineNumber+1)};t.joinMany=function(t){if(t.length===0)return[];var n=new Ud(t[0].slice());for(var i=1;i<t.length;i++)n=n.getUnion(new Ud(t[i].slice()));return n.ranges};t.join=function(n){if(n.length===0)throw new ri("lineRanges cannot be empty");var i=n[0].startLineNumber,r=n[0].endLineNumberExclusive;for(var e=1;e<n.length;e++)i=Math.min(i,n[e].startLineNumber),r=Math.max(r,n[e].endLineNumberExclusive);return new t(i,r)};t.ofLength=function(n,i){return new t(n,n+i)};t.deserialize=function(n){return new t(n[0],n[1])};t.prototype.contains=function(t){return this.startLineNumber<=t&&t<this.endLineNumberExclusive};Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.startLineNumber===this.endLineNumberExclusive},enumerable:false,configurable:true});t.prototype.delta=function(n){return new t(this.startLineNumber+n,this.endLineNumberExclusive+n)};t.prototype.deltaLength=function(n){return new t(this.startLineNumber,this.endLineNumberExclusive+n)};Object.defineProperty(t.prototype,"length",{get:function(){return this.endLineNumberExclusive-this.startLineNumber},enumerable:false,configurable:true});t.prototype.join=function(n){return new t(Math.min(this.startLineNumber,n.startLineNumber),Math.max(this.endLineNumberExclusive,n.endLineNumberExclusive))};t.prototype.toString=function(){return"[".concat(this.startLineNumber,",").concat(this.endLineNumberExclusive,")")};t.prototype.intersect=function(n){var i=Math.max(this.startLineNumber,n.startLineNumber),r=Math.min(this.endLineNumberExclusive,n.endLineNumberExclusive);if(i<=r)return new t(i,r)};t.prototype.intersectsStrict=function(t){return this.startLineNumber<t.endLineNumberExclusive&&t.startLineNumber<this.endLineNumberExclusive};t.prototype.overlapOrTouch=function(t){return this.startLineNumber<=t.endLineNumberExclusive&&t.startLineNumber<=this.endLineNumberExclusive};t.prototype.equals=function(t){return this.startLineNumber===t.startLineNumber&&this.endLineNumberExclusive===t.endLineNumberExclusive};t.prototype.toInclusiveRange=function(){return this.isEmpty?null:new Ir(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)};t.prototype.toExclusiveRange=function(){return new Ir(this.startLineNumber,1,this.endLineNumberExclusive,1)};t.prototype.mapToLineArray=function(t){var n=[];for(var i=this.startLineNumber;i<this.endLineNumberExclusive;i++)n.push(t(i));return n};t.prototype.forEach=function(t){for(var n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t(n)};t.prototype.serialize=function(){return[this.startLineNumber,this.endLineNumberExclusive]};t.prototype.includes=function(t){return this.startLineNumber<=t&&t<this.endLineNumberExclusive};t.prototype.toOffsetRange=function(){return new jd(this.startLineNumber-1,this.endLineNumberExclusive-1)};return t}();var Ud=function(){function t(t){if(t===void 0){t=[]}this._normalizedRanges=t}Object.defineProperty(t.prototype,"ranges",{get:function(){return this._normalizedRanges},enumerable:false,configurable:true});t.prototype.addRange=function(t){if(t.length===0)return;var n=Nd(this._normalizedRanges,(function(n){return n.endLineNumberExclusive>=t.startLineNumber})),i=Bd(this._normalizedRanges,(function(n){return n.startLineNumber<=t.endLineNumberExclusive}))+1;if(n===i)this._normalizedRanges.splice(n,0,t);else if(n===i-1){var r=this._normalizedRanges[n];this._normalizedRanges[n]=r.join(t)}else{var r=this._normalizedRanges[n].join(this._normalizedRanges[i-1]).join(t);this._normalizedRanges.splice(n,i-n,r)}};t.prototype.contains=function(t){var n=Id(this._normalizedRanges,(function(n){return n.startLineNumber<=t}));return!!n&&n.endLineNumberExclusive>t};t.prototype.intersects=function(t){var n=Id(this._normalizedRanges,(function(n){return n.startLineNumber<t.endLineNumberExclusive}));return!!n&&n.endLineNumberExclusive>t.startLineNumber};t.prototype.getUnion=function(n){if(this._normalizedRanges.length===0)return n;if(n._normalizedRanges.length===0)return this;var i=[];var r=0,e=0,o=null;for(;r<this._normalizedRanges.length||e<n._normalizedRanges.length;){var s=null;if(r<this._normalizedRanges.length&&e<n._normalizedRanges.length){var u=this._normalizedRanges[r],a=n._normalizedRanges[e];u.startLineNumber<a.startLineNumber?(s=u,r++):(s=a,e++)}else r<this._normalizedRanges.length?(s=this._normalizedRanges[r],r++):(s=n._normalizedRanges[e],e++);o===null?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new zd(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(i.push(o),o=s)}return o!==null&&i.push(o),new t(i)};t.prototype.subtractFrom=function(n){var i=Nd(this._normalizedRanges,(function(t){return t.endLineNumberExclusive>=n.startLineNumber})),r=Bd(this._normalizedRanges,(function(t){return t.startLineNumber<=n.endLineNumberExclusive}))+1;if(i===r)return new t([n]);var e=[];var o=n.startLineNumber;for(var s=i;s<r;s++){var u=this._normalizedRanges[s];u.startLineNumber>o&&e.push(new zd(o,u.startLineNumber)),o=u.endLineNumberExclusive}return o<n.endLineNumberExclusive&&e.push(new zd(o,n.endLineNumberExclusive)),new t(e)};t.prototype.toString=function(){return this._normalizedRanges.map((function(t){return t.toString()})).join(", ")};t.prototype.getIntersection=function(n){var i=[];var r=0,e=0;for(;r<this._normalizedRanges.length&&e<n._normalizedRanges.length;){var o=this._normalizedRanges[r],s=n._normalizedRanges[e],u=o.intersect(s);u&&!u.isEmpty&&i.push(u),o.endLineNumberExclusive<s.endLineNumberExclusive?r++:e++}return new t(i)};t.prototype.getWithDelta=function(n){return new t(this._normalizedRanges.map((function(t){return t.delta(n)})))};return t}();var Kd=function(){function t(t,n){this.original=t,this.modified=n}t.inverse=function(n,i,r){var e=[];var o=1,s=1;for(var u=0,a=n;u<a.length;u++){var h=a[u];var c=new t(new zd(o,h.original.startLineNumber),new zd(s,h.modified.startLineNumber));c.modified.isEmpty||e.push(c),o=h.original.endLineNumberExclusive,s=h.modified.endLineNumberExclusive}var f=new t(new zd(o,i+1),new zd(s,r+1));return f.modified.isEmpty||e.push(f),e};t.clip=function(n,i,r){var e=[];for(var o=0,s=n;o<s.length;o++){var u=s[o];var a=u.original.intersect(i),h=u.modified.intersect(r);a&&!a.isEmpty&&h&&!h.isEmpty&&e.push(new t(a,h))}return e};t.prototype.toString=function(){return"{".concat(this.original.toString(),"->").concat(this.modified.toString(),"}")};t.prototype.flip=function(){return new t(this.modified,this.original)};t.prototype.join=function(n){return new t(this.original.join(n.original),this.modified.join(n.modified))};return t}();var Vd=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,i)||this,e.innerChanges=r;return e}n.fromRangeMappings=function(t){var i=zd.join(t.map((function(t){return zd.fromRangeInclusive(t.originalRange)}))),r=zd.join(t.map((function(t){return zd.fromRangeInclusive(t.modifiedRange)})));return new n(i,r,t)};n.prototype.flip=function(){var t;return new n(this.modified,this.original,(t=this.innerChanges)===null||t===void 0?void 0:t.map((function(t){return t.flip()})))};n.prototype.withInnerChangesFromLineRanges=function(){return new n(this.original,this.modified,[new qd(this.original.toExclusiveRange(),this.modified.toExclusiveRange())])};return n}(Kd);var qd=function(){function t(t,n){this.originalRange=t,this.modifiedRange=n}t.prototype.toString=function(){return"{".concat(this.originalRange.toString(),"->").concat(this.modifiedRange.toString(),"}")};t.prototype.flip=function(){return new t(this.modifiedRange,this.originalRange)};return t}();var Gd=function(){function t(){}t.prototype.computeDiff=function(t,n,i){var r;var e=new Xd(t,n,{maxComputationTime:i.maxComputationTimeMs,shouldIgnoreTrimWhitespace:i.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];var s=null;for(var u=0,a=e.changes;u<a.length;u++){var h=a[u];var c=void 0,f=void 0;c=h.originalEndLineNumber===0?new zd(h.originalStartLineNumber+1,h.originalStartLineNumber+1):new zd(h.originalStartLineNumber,h.originalEndLineNumber+1),f=h.modifiedEndLineNumber===0?new zd(h.modifiedStartLineNumber+1,h.modifiedStartLineNumber+1):new zd(h.modifiedStartLineNumber,h.modifiedEndLineNumber+1);var l=new Vd(c,f,(r=h.charChanges)===null||r===void 0?void 0:r.map((function(t){return new qd(new Ir(t.originalStartLineNumber,t.originalStartColumn,t.originalEndLineNumber,t.originalEndColumn),new Ir(t.modifiedStartLineNumber,t.modifiedStartColumn,t.modifiedEndLineNumber,t.modifiedEndColumn))})));s&&(s.modified.endLineNumberExclusive!==l.modified.startLineNumber&&s.original.endLineNumberExclusive!==l.original.startLineNumber||(l=new Vd(s.original.join(l.original),s.modified.join(l.modified),s.innerChanges&&l.innerChanges?s.innerChanges.concat(l.innerChanges):void 0),o.pop())),o.push(l),s=l}return rf((function(){return ef(o,(function(t,n){return n.original.startLineNumber-t.original.endLineNumberExclusive==n.modified.startLineNumber-t.modified.endLineNumberExclusive&&t.original.endLineNumberExclusive<n.original.startLineNumber&&t.modified.endLineNumberExclusive<n.modified.startLineNumber}))})),new Fd(o,[],e.quitEarly)};return t}();function $d(t,n,i,r){return new Hv(t,n,i).ComputeDiff(r)}var Jd=function(){function t(t){var n=[],i=[];for(var r=0,e=t.length;r<e;r++)n[r]=tg(t[r],1),i[r]=ng(t[r],1);this.lines=t,this._startColumns=n,this._endColumns=i}t.prototype.getElements=function(){var t=[];for(var n=0,i=this.lines.length;n<i;n++)t[n]=this.lines[n].substring(this._startColumns[n]-1,this._endColumns[n]-1);return t};t.prototype.getStrictElement=function(t){return this.lines[t]};t.prototype.getStartLineNumber=function(t){return t+1};t.prototype.getEndLineNumber=function(t){return t+1};t.prototype.createCharSequence=function(t,n,i){var r=[],e=[],o=[];var s=0;for(var u=n;u<=i;u++){var a=this.lines[u],h=t?this._startColumns[u]:1,c=t?this._endColumns[u]:a.length+1;for(var f=h;f<c;f++)r[s]=a.charCodeAt(f-1),e[s]=u+1,o[s]=f,s++;!t&&u<i&&(r[s]=10,e[s]=u+1,o[s]=a.length+1,s++)}return new Zd(r,e,o)};return t}();var Zd=function(){function t(t,n,i){this._charCodes=t,this._lineNumbers=n,this._columns=i}t.prototype.toString=function(){var t=this;return"["+this._charCodes.map((function(n,i){return(n===10?"\\n":String.fromCharCode(n))+"-(".concat(t._lineNumbers[i],",").concat(t._columns[i],")")})).join(", ")+"]"};t.prototype._assertIndex=function(t,n){if(t<0||t>=n.length)throw new Error("Illegal index")};t.prototype.getElements=function(){return this._charCodes};t.prototype.getStartLineNumber=function(t){return t>0&&t===this._lineNumbers.length?this.getEndLineNumber(t-1):(this._assertIndex(t,this._lineNumbers),this._lineNumbers[t])};t.prototype.getEndLineNumber=function(t){return t===-1?this.getStartLineNumber(t+1):(this._assertIndex(t,this._lineNumbers),this._charCodes[t]===10?this._lineNumbers[t]+1:this._lineNumbers[t])};t.prototype.getStartColumn=function(t){return t>0&&t===this._columns.length?this.getEndColumn(t-1):(this._assertIndex(t,this._columns),this._columns[t])};t.prototype.getEndColumn=function(t){return t===-1?this.getStartColumn(t+1):(this._assertIndex(t,this._columns),this._charCodes[t]===10?1:this._columns[t]+1)};return t}();var Qd=function(){function t(t,n,i,r,e,o,s,u){this.originalStartLineNumber=t,this.originalStartColumn=n,this.originalEndLineNumber=i,this.originalEndColumn=r,this.modifiedStartLineNumber=e,this.modifiedStartColumn=o,this.modifiedEndLineNumber=s,this.modifiedEndColumn=u}t.createFromDiffChange=function(n,i,r){var e=i.getStartLineNumber(n.originalStart),o=i.getStartColumn(n.originalStart),s=i.getEndLineNumber(n.originalStart+n.originalLength-1),u=i.getEndColumn(n.originalStart+n.originalLength-1),a=r.getStartLineNumber(n.modifiedStart),h=r.getStartColumn(n.modifiedStart),c=r.getEndLineNumber(n.modifiedStart+n.modifiedLength-1),f=r.getEndColumn(n.modifiedStart+n.modifiedLength-1);return new t(e,o,s,u,a,h,c,f)};return t}();var Yd=function(){function t(t,n,i,r,e){this.originalStartLineNumber=t,this.originalEndLineNumber=n,this.modifiedStartLineNumber=i,this.modifiedEndLineNumber=r,this.charChanges=e}t.createFromDiffResult=function(n,i,r,e,o,s,u){var a,h,c,f,l;if(i.originalLength===0?(a=r.getStartLineNumber(i.originalStart)-1,h=0):(a=r.getStartLineNumber(i.originalStart),h=r.getEndLineNumber(i.originalStart+i.originalLength-1)),i.modifiedLength===0?(c=e.getStartLineNumber(i.modifiedStart)-1,f=0):(c=e.getStartLineNumber(i.modifiedStart),f=e.getEndLineNumber(i.modifiedStart+i.modifiedLength-1)),s&&i.originalLength>0&&i.originalLength<20&&i.modifiedLength>0&&i.modifiedLength<20&&o()){var v=r.createCharSequence(n,i.originalStart,i.originalStart+i.originalLength-1),d=e.createCharSequence(n,i.modifiedStart,i.modifiedStart+i.modifiedLength-1);if(v.getElements().length>0&&d.getElements().length>0){var g=$d(v,d,o,!0).changes;u&&(g=function(t){if(t.length<=1)return t;var n=[t[0]];var i=n[0];for(var r=1,e=t.length;r<e;r++){var o=t[r],s=o.originalStart-(i.originalStart+i.originalLength),u=o.modifiedStart-(i.modifiedStart+i.modifiedLength);Math.min(s,u)<3?(i.originalLength=o.originalStart+o.originalLength-i.originalStart,i.modifiedLength=o.modifiedStart+o.modifiedLength-i.modifiedStart):(n.push(o),i=o)}return n}(g)),l=[];for(var p=0,w=g.length;p<w;p++)l.push(Qd.createFromDiffChange(g[p],v,d))}}return new t(a,h,c,f,l)};return t}();var Xd=function(){function t(t,n,i){this.shouldComputeCharChanges=i.shouldComputeCharChanges,this.shouldPostProcessCharChanges=i.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=i.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=i.shouldMakePrettyDiff,this.originalLines=t,this.modifiedLines=n,this.original=new Jd(t),this.modified=new Jd(n),this.continueLineDiff=ig(i.maxComputationTime),this.continueCharDiff=ig(i.maxComputationTime===0?0:Math.min(i.maxComputationTime,5e3))}t.prototype.computeDiff=function(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};var t=$d(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),n=t.changes,i=t.quitEarly;if(this.shouldIgnoreTrimWhitespace){var r=[];for(var e=0,o=n.length;e<o;e++)r.push(Yd.createFromDiffResult(this.shouldIgnoreTrimWhitespace,n[e],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:i,changes:r}}var s=[];var u=0,a=0;for(var r=-1,e=n.length;r<e;r++){var o=r+1<e?n[r+1]:null,h=o?o.originalStart:this.originalLines.length,c=o?o.modifiedStart:this.modifiedLines.length;for(;u<h&&a<c;){var f=this.originalLines[u],l=this.modifiedLines[a];if(f!==l){{var v=tg(f,1),d=tg(l,1);for(;v>1&&d>1&&f.charCodeAt(v-2)===l.charCodeAt(d-2);)v--,d--;(v>1||d>1)&&this._pushTrimWhitespaceCharChange(s,u+1,1,v,a+1,1,d)}{var v=ng(f,1),d=ng(l,1);var g=f.length+1,p=l.length+1;for(;v<g&&d<p&&f.charCodeAt(v-1)===f.charCodeAt(d-1);)v++,d++;(v<g||d<p)&&this._pushTrimWhitespaceCharChange(s,u+1,v,g,a+1,d,p)}}u++,a++}o&&(s.push(Yd.createFromDiffResult(this.shouldIgnoreTrimWhitespace,o,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),u+=o.originalLength,a+=o.modifiedLength)}return{quitEarly:i,changes:s}};t.prototype._pushTrimWhitespaceCharChange=function(t,n,i,r,e,o,s){if(this._mergeTrimWhitespaceCharChange(t,n,i,r,e,o,s))return;var u;this.shouldComputeCharChanges&&(u=[new Qd(n,i,n,r,e,o,e,s)]),t.push(new Yd(n,n,e,e,u))};t.prototype._mergeTrimWhitespaceCharChange=function(t,n,i,r,e,o,s){var u=t.length;if(u===0)return!1;var a=t[u-1];return a.originalEndLineNumber!==0&&a.modifiedEndLineNumber!==0&&(a.originalEndLineNumber===n&&a.modifiedEndLineNumber===e?(this.shouldComputeCharChanges&&a.charChanges&&a.charChanges.push(new Qd(n,i,n,r,e,o,e,s)),!0):a.originalEndLineNumber+1===n&&a.modifiedEndLineNumber+1===e&&(a.originalEndLineNumber=n,a.modifiedEndLineNumber=e,this.shouldComputeCharChanges&&a.charChanges&&a.charChanges.push(new Qd(n,i,n,r,e,o,e,s)),!0))};return t}();function tg(t,n){var i=vo(t);return i===-1?n:i+1}function ng(t,n){var i=po(t);return i===-1?n:i+2}function ig(t){if(t===0)return function(){return!0};var n=Date.now();return function(){return Date.now()-n<t}}var rg=function(){function t(t,n){this.diffs=t,this.hitTimeout=n}t.trivial=function(n,i){return new t([new eg(jd.ofLength(n.length),jd.ofLength(i.length))],!1)};t.trivialTimedOut=function(n,i){return new t([new eg(jd.ofLength(n.length),jd.ofLength(i.length))],!0)};return t}();var eg=function(){function t(t,n){this.seq1Range=t,this.seq2Range=n}t.invert=function(n,i){var r=[];return m(n,(function(n,e){r.push(t.fromOffsetPairs(n?n.getEndExclusives():og.zero,e?e.getStarts():new og(i,(n?n.seq2Range.endExclusive-n.seq1Range.endExclusive:0)+i)))})),r};t.fromOffsetPairs=function(n,i){return new t(new jd(n.offset1,i.offset1),new jd(n.offset2,i.offset2))};t.prototype.swap=function(){return new t(this.seq2Range,this.seq1Range)};t.prototype.toString=function(){return"".concat(this.seq1Range," <-> ").concat(this.seq2Range)};t.prototype.join=function(n){return new t(this.seq1Range.join(n.seq1Range),this.seq2Range.join(n.seq2Range))};t.prototype.delta=function(n){return n===0?this:new t(this.seq1Range.delta(n),this.seq2Range.delta(n))};t.prototype.deltaStart=function(n){return n===0?this:new t(this.seq1Range.deltaStart(n),this.seq2Range.deltaStart(n))};t.prototype.deltaEnd=function(n){return n===0?this:new t(this.seq1Range.deltaEnd(n),this.seq2Range.deltaEnd(n))};t.prototype.intersect=function(n){var i=this.seq1Range.intersect(n.seq1Range),r=this.seq2Range.intersect(n.seq2Range);if(i&&r)return new t(i,r)};t.prototype.getStarts=function(){return new og(this.seq1Range.start,this.seq2Range.start)};t.prototype.getEndExclusives=function(){return new og(this.seq1Range.endExclusive,this.seq2Range.endExclusive)};return t}();var og=function(){function t(t,n){this.offset1=t,this.offset2=n}t.prototype.toString=function(){return"".concat(this.offset1," <-> ").concat(this.offset2)};t.prototype.delta=function(n){return n===0?this:new t(this.offset1+n,this.offset2+n)};t.prototype.equals=function(t){return this.offset1===t.offset1&&this.offset2===t.offset2};return t}();og.zero=new og(0,0),og.max=new og(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);var sg=function(){function t(){}t.prototype.isValid=function(){return!0};return t}();sg.instance=new sg;var ug=function(){function t(t){if(this.timeout=t,this.startTime=Date.now(),this.valid=!0,t<=0)throw new ri("timeout must be positive")}t.prototype.isValid=function(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid};return t}();var ag=function(){function t(t,n){this.width=t,this.height=n,this.array=[],this.array=new Array(t*n)}t.prototype.get=function(t,n){return this.array[t+n*this.width]};t.prototype.set=function(t,n,i){this.array[t+n*this.width]=i};return t}();function hg(t){return t===32||t===9}var cg=function(){function t(n,i,r){this.range=n,this.lines=i,this.source=r,this.histogram=[];var e=0;for(var o=n.startLineNumber-1;o<n.endLineNumberExclusive-1;o++){var s=i[o];for(var u=0;u<s.length;u++){e++;var a=s[u],h=t.getKey(a);this.histogram[h]=(this.histogram[h]||0)+1}e++;var c=t.getKey("\n");this.histogram[c]=(this.histogram[c]||0)+1}this.totalCount=e}t.getKey=function(t){var n=this.chrKeys.get(t);return n===void 0&&(n=this.chrKeys.size,this.chrKeys.set(t,n)),n};t.prototype.computeSimilarity=function(t){var n,i;var r=0;var e=Math.max(this.histogram.length,t.histogram.length);for(var o=0;o<e;o++)r+=Math.abs(((n=this.histogram[o])!==null&&n!==void 0?n:0)-((i=t.histogram[o])!==null&&i!==void 0?i:0));return 1-r/(this.totalCount+t.totalCount)};return t}();cg.chrKeys=new Map;var fg=function(){function t(){}t.prototype.compute=function(t,n,i,r){if(i===void 0){i=sg.instance}if(t.length===0||n.length===0)return rg.trivial(t,n);var e=new ag(t.length,n.length),o=new ag(t.length,n.length),s=new ag(t.length,n.length);for(var u=0;u<t.length;u++)for(var a=0;a<n.length;a++){if(!i.isValid())return rg.trivialTimedOut(t,n);var h=u===0?0:e.get(u-1,a),c=a===0?0:e.get(u,a-1);var f=void 0;t.getElement(u)===n.getElement(a)?(f=u===0||a===0?0:e.get(u-1,a-1),u>0&&a>0&&o.get(u-1,a-1)===3&&(f+=s.get(u-1,a-1)),f+=r?r(u,a):1):f=-1;var l=Math.max(h,c,f);if(l===f){var v=u>0&&a>0?s.get(u-1,a-1):0;s.set(u,a,v+1),o.set(u,a,3)}else l===h?(s.set(u,a,0),o.set(u,a,1)):l===c&&(s.set(u,a,0),o.set(u,a,2));e.set(u,a,l)}var d=[];var g=t.length,p=n.length;function w(t,n){t+1===g&&n+1===p||d.push(new eg(new jd(t+1,g),new jd(n+1,p))),g=t,p=n}var m=t.length-1,b=n.length-1;for(;m>=0&&b>=0;)o.get(m,b)===3?(w(m,b),m--,b--):o.get(m,b)===1?m--:b--;return w(-1,-1),d.reverse(),new rg(d,!1)};return t}();var lg=function(){function t(){}t.prototype.compute=function(t,n,i){if(i===void 0){i=sg.instance}if(t.length===0||n.length===0)return rg.trivial(t,n);var r=t,e=n;function o(t,n){for(;t<r.length&&n<e.length&&r.getElement(t)===e.getElement(n);)t++,n++;return t}var s=0;var u=new dg;u.set(0,o(0,0));var a=new gg;a.set(0,u.get(0)===0?null:new vg(null,0,0,u.get(0)));var h=0;t:for(;;){if(s++,!i.isValid())return rg.trivialTimedOut(r,e);var c=-Math.min(s,e.length+s%2),f=Math.min(s,r.length+s%2);for(h=c;h<=f;h+=2){var l=h===f?-1:u.get(h+1),v=h===c?-1:u.get(h-1)+1,d=Math.min(Math.max(l,v),r.length),g=d-h;if(d>r.length||g>e.length)continue;var p=o(d,g);u.set(h,p);var w=d===l?a.get(h+1):a.get(h-1);if(a.set(h,p!==d?new vg(w,d,g,p-d):w),u.get(h)===r.length&&u.get(h)-h===e.length)break t}}var m=a.get(h);var b=[];var y=r.length,_=e.length;for(;;){var c=m?m.x+m.length:0,f=m?m.y+m.length:0;if(c===y&&f===_||b.push(new eg(new jd(c,y),new jd(f,_))),!m)break;y=m.x,_=m.y,m=m.prev}return b.reverse(),new rg(b,!1)};return t}();var vg=function(){function t(t,n,i,r){this.prev=t,this.x=n,this.y=i,this.length=r}return t}();var dg=function(){function t(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}t.prototype.get=function(t){return t<0?(t=-t-1,this.negativeArr[t]):this.positiveArr[t]};t.prototype.set=function(t,n){if(t<0){if((t=-t-1)>=this.negativeArr.length){var i=this.negativeArr;this.negativeArr=new Int32Array(2*i.length),this.negativeArr.set(i)}this.negativeArr[t]=n}else{if(t>=this.positiveArr.length){var i=this.positiveArr;this.positiveArr=new Int32Array(2*i.length),this.positiveArr.set(i)}this.positiveArr[t]=n}};return t}();var gg=function(){function t(){this.positiveArr=[],this.negativeArr=[]}t.prototype.get=function(t){return t<0?(t=-t-1,this.negativeArr[t]):this.positiveArr[t]};t.prototype.set=function(t,n){t<0?(t=-t-1,this.negativeArr[t]=n):this.positiveArr[t]=n};return t}();var pg=function(){function t(t,n,i){this.lines=t,this.considerWhitespaceChanges=i,this.elements=[],this.firstCharOffsetByLine=[],this.additionalOffsetByLine=[];var r=!1;n.start>0&&n.endExclusive>=t.length&&(n=new jd(n.start-1,n.endExclusive),r=!0),this.lineRange=n,this.firstCharOffsetByLine[0]=0;for(var e=this.lineRange.start;e<this.lineRange.endExclusive;e++){var o=t[e],s=0;if(r)s=o.length,o="",r=!1;else if(!i){var u=o.trimStart();s=o.length-u.length,o=u.trimEnd()}this.additionalOffsetByLine.push(s);for(var u=0;u<o.length;u++)this.elements.push(o.charCodeAt(u));e<t.length-1&&(this.elements.push(10),this.firstCharOffsetByLine[e-this.lineRange.start+1]=this.elements.length)}this.additionalOffsetByLine.push(0)}t.prototype.toString=function(){return'Slice: "'.concat(this.text,'"')};Object.defineProperty(t.prototype,"text",{get:function(){return this.getText(new jd(0,this.length))},enumerable:false,configurable:true});t.prototype.getText=function(t){return this.elements.slice(t.start,t.endExclusive).map((function(t){return String.fromCharCode(t)})).join("")};t.prototype.getElement=function(t){return this.elements[t]};Object.defineProperty(t.prototype,"length",{get:function(){return this.elements.length},enumerable:false,configurable:true});t.prototype.getBoundaryScore=function(t){var n=yg(t>0?this.elements[t-1]:-1),i=yg(t<this.elements.length?this.elements[t]:-1);if(n===7&&i===8)return 0;if(n===8)return 150;var r=0;return n!==i&&(r+=10,n===0&&i===1&&(r+=1)),r+=bg(n),r+=bg(i),r};t.prototype.translateOffset=function(t){if(this.lineRange.isEmpty)return new Tr(this.lineRange.start+1,1);var n=Bd(this.firstCharOffsetByLine,(function(n){return n<=t}));return new Tr(this.lineRange.start+n+1,t-this.firstCharOffsetByLine[n]+this.additionalOffsetByLine[n]+1)};t.prototype.translateRange=function(t){return Ir.fromPositions(this.translateOffset(t.start),this.translateOffset(t.endExclusive))};t.prototype.findWordContaining=function(t){if(t<0||t>=this.elements.length||!wg(this.elements[t]))return;var n=t;for(;n>0&&wg(this.elements[n-1]);)n--;var i=t;for(;i<this.elements.length&&wg(this.elements[i]);)i++;return new jd(n,i)};t.prototype.countLinesIn=function(t){return this.translateOffset(t.endExclusive).lineNumber-this.translateOffset(t.start).lineNumber};t.prototype.isStronglyEqual=function(t,n){return this.elements[t]===this.elements[n]};t.prototype.extendToFullLines=function(t){var n,i;var r=(n=Id(this.firstCharOffsetByLine,(function(n){return n<=t.start})))!==null&&n!==void 0?n:0,e=(i=function(t,n){var i=Nd(t,n);return i===t.length?void 0:t[i]}(this.firstCharOffsetByLine,(function(n){return t.endExclusive<=n})))!==null&&i!==void 0?i:this.elements.length;return new jd(r,e)};return t}();function wg(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}var mg={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function bg(t){return mg[t]}function yg(t){return t===10?8:t===13?7:hg(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}function _g(t,n,i,r,e,o){var s=function(t,n,i,r){var e=[],o=t.filter((function(t){return t.modified.isEmpty&&t.original.length>=3})).map((function(t){return new cg(t.original,n,t)})),s=new Set(t.filter((function(t){return t.original.isEmpty&&t.modified.length>=3})).map((function(t){return new cg(t.modified,i,t)}))),u=new Set;for(var a=0,h=o;a<h.length;a++){var c=h[a];var f=void 0,l=-1;for(var v=0,d=s;v<d.length;v++){var g=d[v];var p=c.computeSimilarity(g);p>l&&(l=p,f=g)}if(l>.9&&f&&(s.delete(f),e.push(new Kd(c.range,f.range)),u.add(c.source),u.add(f.source)),!r.isValid())return{moves:e,excludedChanges:u}}return{moves:e,excludedChanges:u}}(t,n,i,o),u=s.moves,a=s.excludedChanges;if(!o.isValid())return[];var h=function(t,n,i,r,e,o){var s=[],u=new hd;for(var a=0,h=t;a<h.length;a++){var c=h[a];for(var f=c.original.startLineNumber;f<c.original.endLineNumberExclusive-2;f++){var l="".concat(n[f-1],":").concat(n[f+1-1],":").concat(n[f+2-1]);u.add(l,{range:new zd(f,f+3)})}}var v=[];t.sort(R((function(t){return t.modified.startLineNumber}),T));var d=function(t){var n=[];var r=function(t){var r="".concat(i[t-1],":").concat(i[t+1-1],":").concat(i[t+2-1]),e=new zd(t,t+3),o=[];u.forEach(r,(function(t){var i=t.range;for(var r=0,s=n;r<s.length;r++){var u=s[r];if(u.originalLineRange.endLineNumberExclusive+1===i.endLineNumberExclusive&&u.modifiedLineRange.endLineNumberExclusive+1===e.endLineNumberExclusive)return u.originalLineRange=new zd(u.originalLineRange.startLineNumber,i.endLineNumberExclusive),u.modifiedLineRange=new zd(u.modifiedLineRange.startLineNumber,e.endLineNumberExclusive),void o.push(u)}var a={modifiedLineRange:e,originalLineRange:i};v.push(a),o.push(a)})),n=o};for(var e=t.modified.startLineNumber;e<t.modified.endLineNumberExclusive-2;e++){r(e)}if(!o.isValid())return{value:[]}};for(var g=0,p=t;g<p.length;g++){var c=p[g];var w=d(c);if(typeof w==="object")return w.value}v.sort(B(R((function(t){return t.modifiedLineRange.length}),T)));var m=new Ud,b=new Ud;for(var y=0,_=v;y<_.length;y++){var c=_[y];var f=c.modifiedLineRange.startLineNumber-c.originalLineRange.startLineNumber,l=m.subtractFrom(c.modifiedLineRange),k=b.subtractFrom(c.originalLineRange).getWithDelta(f),x=l.getIntersection(k);for(var C=0,S=x.ranges;C<S.length;C++){var D=S[C];if(D.length<3)continue;var A=D,O=D.delta(-f);s.push(new Kd(O,A)),m.addRange(A),b.addRange(O)}}s.sort(R((function(t){return t.original.startLineNumber}),T));var E=new Pd(t);var M=function(n){var i=s[n],u=E.findLastMonotonous((function(t){return t.original.startLineNumber<=i.original.startLineNumber})),a=Id(t,(function(t){return t.modified.startLineNumber<=i.modified.startLineNumber})),h=Math.max(i.original.startLineNumber-u.original.startLineNumber,i.modified.startLineNumber-a.modified.startLineNumber),c=E.findLastMonotonous((function(t){return t.original.startLineNumber<i.original.endLineNumberExclusive})),f=Id(t,(function(t){return t.modified.startLineNumber<i.modified.endLineNumberExclusive})),l=Math.max(c.original.endLineNumberExclusive-i.original.endLineNumberExclusive,f.modified.endLineNumberExclusive-i.modified.endLineNumberExclusive);var v=void 0,d=void 0;for(v=0;v<h;v++){var g=i.original.startLineNumber-v-1,p=i.modified.startLineNumber-v-1;if(g>r.length||p>e.length||m.contains(p)||b.contains(g)||!kg(r[g-1],e[p-1],o))break}for(v>0&&(b.addRange(new zd(i.original.startLineNumber-v,i.original.startLineNumber)),m.addRange(new zd(i.modified.startLineNumber-v,i.modified.startLineNumber))),d=0;d<l;d++){var g=i.original.endLineNumberExclusive+d,p=i.modified.endLineNumberExclusive+d;if(g>r.length||p>e.length||m.contains(p)||b.contains(g)||!kg(r[g-1],e[p-1],o))break}d>0&&(b.addRange(new zd(i.original.endLineNumberExclusive,i.original.endLineNumberExclusive+d)),m.addRange(new zd(i.modified.endLineNumberExclusive,i.modified.endLineNumberExclusive+d))),(v>0||d>0)&&(s[n]=new Kd(new zd(i.original.startLineNumber-v,i.original.endLineNumberExclusive+d),new zd(i.modified.startLineNumber-v,i.modified.endLineNumberExclusive+d)))};for(var c=0;c<s.length;c++){M(c)}return s}(t.filter((function(t){return!a.has(t)})),r,e,n,i,o);return E(u,h),u=function(t){if(t.length===0)return t;t.sort(R((function(t){return t.original.startLineNumber}),T));var n=[t[0]];for(var i=1;i<t.length;i++){var r=n[n.length-1],e=t[i],o=e.original.startLineNumber-r.original.endLineNumberExclusive,s=e.modified.startLineNumber-r.modified.endLineNumberExclusive;o>=0&&s>=0&&o+s<=2?n[n.length-1]=r.join(e):n.push(e)}return n}(u),u=u.filter((function(t){var i=t.original.toOffsetRange().slice(n).map((function(t){return t.trim()}));return i.join("\n").length>=15&&function(t,n){var i=0;for(var r=0,e=t;r<e.length;r++){var o=e[r];n(o)&&i++}return i}(i,(function(t){return t.length>=2}))>=2})),u=function(t,n){var i=new Pd(t);return n=n.filter((function(n){return(i.findLastMonotonous((function(t){return t.original.startLineNumber<n.original.endLineNumberExclusive}))||new Kd(new zd(1,1),new zd(1,1)))!==Id(t,(function(t){return t.modified.startLineNumber<n.modified.endLineNumberExclusive}))})),n}(t,u),u}function kg(t,n,i){if(t.trim()===n.trim())return!0;if(t.length>300&&n.length>300)return!1;var r=(new lg).compute(new pg([t],new jd(0,1),!1),new pg([n],new jd(0,1),!1),i);var e=0;var o=eg.invert(r.diffs,t.length);for(var s=0,u=o;s<u.length;s++){var a=u[s];a.seq1Range.forEach((function(n){hg(t.charCodeAt(n))||e++}))}var h=function(n){var i=0;for(var r=0;r<t.length;r++)hg(n.charCodeAt(r))||i++;return i}(t.length>n.length?t:n);return e/h>.6&&h>10}function xg(t,n,i){var r=i;return r=Cg(t,n,r),r=Cg(t,n,r),r=function(t,n,i){if(!t.getBoundaryScore||!n.getBoundaryScore)return i;for(var r=0;r<i.length;r++){var e=r>0?i[r-1]:void 0,o=i[r],s=r+1<i.length?i[r+1]:void 0,u=new jd(e?e.seq1Range.endExclusive+1:0,s?s.seq1Range.start-1:t.length),a=new jd(e?e.seq2Range.endExclusive+1:0,s?s.seq2Range.start-1:n.length);o.seq1Range.isEmpty?i[r]=Sg(o,t,n,u,a):o.seq2Range.isEmpty&&(i[r]=Sg(o.swap(),n,t,a,u).swap())}return i}(t,n,r),r}function Cg(t,n,i){if(i.length===0)return i;var r=[];r.push(i[0]);for(var e=1;e<i.length;e++){var o=r[r.length-1];var s=i[e];if(s.seq1Range.isEmpty||s.seq2Range.isEmpty){var u=s.seq1Range.start-o.seq1Range.endExclusive;var a=void 0;for(a=1;a<=u&&t.getElement(s.seq1Range.start-a)===t.getElement(s.seq1Range.endExclusive-a)&&n.getElement(s.seq2Range.start-a)===n.getElement(s.seq2Range.endExclusive-a);a++);if(a--,a===u){r[r.length-1]=new eg(new jd(o.seq1Range.start,s.seq1Range.endExclusive-u),new jd(o.seq2Range.start,s.seq2Range.endExclusive-u));continue}s=s.delta(-a)}r.push(s)}var h=[];for(var e=0;e<r.length-1;e++){var o=r[e+1];var s=r[e];if(s.seq1Range.isEmpty||s.seq2Range.isEmpty){var u=o.seq1Range.start-s.seq1Range.endExclusive;var a=void 0;for(a=0;a<u&&t.isStronglyEqual(s.seq1Range.start+a,s.seq1Range.endExclusive+a)&&n.isStronglyEqual(s.seq2Range.start+a,s.seq2Range.endExclusive+a);a++);if(a===u){r[e+1]=new eg(new jd(s.seq1Range.start+u,o.seq1Range.endExclusive),new jd(s.seq2Range.start+u,o.seq2Range.endExclusive));continue}a>0&&(s=s.delta(a))}h.push(s)}return r.length>0&&h.push(r[r.length-1]),h}function Sg(t,n,i,r,e){var o=1;for(;t.seq1Range.start-o>=r.start&&t.seq2Range.start-o>=e.start&&i.isStronglyEqual(t.seq2Range.start-o,t.seq2Range.endExclusive-o)&&o<100;)o++;o--;var s=0;for(;t.seq1Range.start+s<r.endExclusive&&t.seq2Range.endExclusive+s<e.endExclusive&&i.isStronglyEqual(t.seq2Range.start+s,t.seq2Range.endExclusive+s)&&s<100;)s++;if(o===0&&s===0)return t;var u=0,a=-1;for(var h=-o;h<=s;h++){var c=t.seq2Range.start+h,f=t.seq2Range.endExclusive+h,l=t.seq1Range.start+h,v=n.getBoundaryScore(l)+i.getBoundaryScore(c)+i.getBoundaryScore(f);v>a&&(a=v,u=h)}return t.delta(u)}var Dg=function(){function t(t,n){this.trimmedHash=t,this.lines=n}t.prototype.getElement=function(t){return this.trimmedHash[t]};Object.defineProperty(t.prototype,"length",{get:function(){return this.trimmedHash.length},enumerable:false,configurable:true});t.prototype.getBoundaryScore=function(t){return 1e3-((t===0?0:Ag(this.lines[t-1]))+(t===this.lines.length?0:Ag(this.lines[t])))};t.prototype.getText=function(t){return this.lines.slice(t.start,t.endExclusive).join("\n")};t.prototype.isStronglyEqual=function(t,n){return this.lines[t]===this.lines[n]};return t}();function Ag(t){var n=0;for(;n<t.length&&(t.charCodeAt(n)===32||t.charCodeAt(n)===9);)n++;return n}var Og=function(){function t(){this.dynamicProgrammingDiffing=new fg,this.myersDiffingAlgorithm=new lg}t.prototype.computeDiff=function(t,n,i){var r=this;if(t.length<=1&&v(t,n,(function(t,n){return t===n})))return new Fd([],[],!1);if(t.length===1&&t[0].length===0||n.length===1&&n[0].length===0)return new Fd([new Vd(new zd(1,t.length+1),new zd(1,n.length+1),[new qd(new Ir(1,1,t.length,t[0].length+1),new Ir(1,1,n.length,n[0].length+1))])],[],!1);var e=i.maxComputationTimeMs===0?sg.instance:new ug(i.maxComputationTimeMs),o=!i.ignoreTrimWhitespace,s=new Map;function u(t){var n=s.get(t);return n===void 0&&(n=s.size,s.set(t,n)),n}var a=t.map((function(t){return u(t.trim())})),h=n.map((function(t){return u(t.trim())})),c=new Dg(a,t),f=new Dg(h,n),l=c.length+f.length<1700?this.dynamicProgrammingDiffing.compute(c,f,e,(function(i,r){return t[i]===n[r]?n[r].length===0?.1:1+Math.log(1+n[r].length):.99})):this.myersDiffingAlgorithm.compute(c,f);var d=l.diffs,g=l.hitTimeout;d=xg(c,f,d),d=function(t,n,i){var r=i;if(r.length===0)return r;var e,o=0;do{e=!1;var s=[r[0]];var u=function(n){var i=function(n,i){var r=new jd(u.seq1Range.endExclusive,o.seq1Range.start);return t.getText(r).replace(/\s/g,"").length<=4&&(n.seq1Range.length+n.seq2Range.length>5||i.seq1Range.length+i.seq2Range.length>5)};var o=r[n],u=s[s.length-1];i(u,o)?(e=!0,s[s.length-1]=s[s.length-1].join(o)):s.push(o)};for(var a=1;a<r.length;a++){u(a)}r=s}while(o++<10&&e);return r}(c,0,d);var p=[],w=function(i){if(o)for(var s=0;s<i;s++){var u=m+s,a=b+s;if(t[u]!==n[a]){var h=r.refineDiff(t,n,new eg(new jd(u,u+1),new jd(a,a+1)),e,o);for(var c=0,f=h.mappings;c<f.length;c++){var l=f[c];p.push(l)}h.hitTimeout&&(g=!0)}}};var m=0,b=0;var y=function(i){rf((function(){return i.seq1Range.start-m==i.seq2Range.start-b})),w(i.seq1Range.start-m),m=i.seq1Range.endExclusive,b=i.seq2Range.endExclusive;var r=_.refineDiff(t,n,i,e,o);r.hitTimeout&&(g=!0);for(var s=0,u=r.mappings;s<u.length;s++){var a=u[s];p.push(a)}};var _=this;for(var k=0,x=d;k<x.length;k++){var C=x[k];y(C)}w(t.length-m);var S=Eg(p,t,n);var D=[];return i.computeMoves&&(D=this.computeMoves(S,t,n,a,h,e,o)),rf((function(){function i(t,n){if(t.lineNumber<1||t.lineNumber>n.length)return!1;var i=n[t.lineNumber-1];return!(t.column<1||t.column>i.length+1)}function r(t,n){return!(t.startLineNumber<1||t.startLineNumber>n.length+1)&&!(t.endLineNumberExclusive<1||t.endLineNumberExclusive>n.length+1)}for(var e=0,o=S;e<o.length;e++){var s=o[e];if(!s.innerChanges)return!1;for(var u=0,a=s.innerChanges;u<a.length;u++){var h=a[u];if(!(i(h.modifiedRange.getStartPosition(),n)&&i(h.modifiedRange.getEndPosition(),n)&&i(h.originalRange.getStartPosition(),t)&&i(h.originalRange.getEndPosition(),t)))return!1}if(!r(s.modified,n)||!r(s.original,t))return!1}return!0})),new Fd(S,D,g)};t.prototype.computeMoves=function(t,n,i,r,e,o,s){var u=this;return _g(t,n,i,r,e,o).map((function(t){var r=Eg(u.refineDiff(n,i,new eg(t.original.toOffsetRange(),t.modified.toOffsetRange()),o,s).mappings,n,i,!0);return new Ld(t,r)}))};t.prototype.refineDiff=function(t,n,i,r,e){var o=new pg(t,i.seq1Range,e),s=new pg(n,i.seq2Range,e),u=o.length+s.length<500?this.dynamicProgrammingDiffing.compute(o,s,r):this.myersDiffingAlgorithm.compute(o,s,r);var a=u.diffs;return a=xg(o,s,a),a=function(t,n,i){var r=eg.invert(i,t.length),e=[];var o=new og(0,0);function s(i,s){if(i.offset1<o.offset1||i.offset2<o.offset2)return;var u=t.findWordContaining(i.offset1),a=n.findWordContaining(i.offset2);if(!u||!a)return;var h=new eg(u,a);var c=h.intersect(s);var f=c.seq1Range.length,l=c.seq2Range.length;for(;r.length>0;){var v=r[0];if(!v.seq1Range.intersects(h.seq1Range)&&!v.seq2Range.intersects(h.seq2Range))break;var d=t.findWordContaining(v.seq1Range.start),g=n.findWordContaining(v.seq2Range.start),p=new eg(d,g),w=p.intersect(v);if(f+=w.seq1Range.length,l+=w.seq2Range.length,h=h.join(p),!(h.seq1Range.endExclusive>=v.seq1Range.endExclusive))break;r.shift()}f+l<2*(h.seq1Range.length+h.seq2Range.length)/3&&e.push(h),o=h.getEndExclusives()}for(;r.length>0;){var u=r.shift();u.seq1Range.isEmpty||(s(u.getStarts(),u),s(u.getEndExclusives().delta(-1),u))}return function(t,n){var i=[];for(;t.length>0||n.length>0;){var r=t[0],e=n[0];var o=void 0;o=r&&(!e||r.seq1Range.start<e.seq1Range.start)?t.shift():n.shift(),i.length>0&&i[i.length-1].seq1Range.endExclusive>=o.seq1Range.start?i[i.length-1]=i[i.length-1].join(o):i.push(o)}return i}(i,e)}(o,s,a),a=function(t,n,i){var r=[];for(var e=0,o=i;e<o.length;e++){var s=o[e];var u=r[r.length-1];u&&(s.seq1Range.start-u.seq1Range.endExclusive<=2||s.seq2Range.start-u.seq2Range.endExclusive<=2)?r[r.length-1]=new eg(u.seq1Range.join(s.seq1Range),u.seq2Range.join(s.seq2Range)):r.push(s)}return r}(0,0,a),a=function(t,n,i){var r=i;if(r.length===0)return r;var e,o=0;do{e=!1;var s=[r[0]];var u=function(i){var o=function(i,r){var e=new jd(a.seq1Range.endExclusive,u.seq1Range.start);if(t.countLinesIn(e)>5||e.length>500)return!1;var o=t.getText(e).trim();if(o.length>20||o.split(/\r\n|\r|\n/).length>1)return!1;var s=t.countLinesIn(i.seq1Range),h=i.seq1Range.length,c=n.countLinesIn(i.seq2Range),f=i.seq2Range.length,l=t.countLinesIn(r.seq1Range),v=r.seq1Range.length,d=n.countLinesIn(r.seq2Range),g=r.seq2Range.length;function p(t){return Math.min(t,130)}return Math.pow(Math.pow(p(40*s+h),1.5)+Math.pow(p(40*c+f),1.5),1.5)+Math.pow(Math.pow(p(40*l+v),1.5)+Math.pow(p(40*d+g),1.5),1.5)>74184.96480721243};var u=r[i],a=s[s.length-1];o(a,u)?(e=!0,s[s.length-1]=s[s.length-1].join(u)):s.push(u)};for(var a=1;a<r.length;a++){u(a)}r=s}while(o++<10&&e);var h=[];return function(t,n){for(var i=0;i<t.length;i++)n(i===0?void 0:t[i-1],t[i],i+1===t.length?void 0:t[i+1])}(r,(function(n,i,r){var e=i;function o(t){return t.length>0&&t.trim().length<=3&&i.seq1Range.length+i.seq2Range.length>100}var s=t.extendToFullLines(i.seq1Range),u=t.getText(new jd(s.start,i.seq1Range.start));o(u)&&(e=e.deltaStart(-u.length));var a=t.getText(new jd(i.seq1Range.endExclusive,s.endExclusive));o(a)&&(e=e.deltaEnd(a.length));var c=eg.fromOffsetPairs(n?n.getEndExclusives():og.zero,r?r.getStarts():og.max),f=e.intersect(c);h.length>0&&f.getStarts().equals(h[h.length-1].getEndExclusives())?h[h.length-1]=h[h.length-1].join(f):h.push(f)})),h}(o,s,a),{mappings:a.map((function(t){return new qd(o.translateRange(t.seq1Range),s.translateRange(t.seq2Range))})),hitTimeout:u.hitTimeout}};return t}();function Eg(t,n,i,r){if(r===void 0){r=!1}var e=[];for(var o=0,s=w(t.map((function(t){return function(t,n,i){var r=0,e=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+r<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+r<=t.modifiedRange.endLineNumber&&(e=-1),t.modifiedRange.startColumn-1>=i[t.modifiedRange.startLineNumber-1].length&&t.originalRange.startColumn-1>=n[t.originalRange.startLineNumber-1].length&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+e&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+e&&(r=1);var o=new zd(t.originalRange.startLineNumber+r,t.originalRange.endLineNumber+1+e),s=new zd(t.modifiedRange.startLineNumber+r,t.modifiedRange.endLineNumber+1+e);return new Vd(o,s,[t])}(t,n,i)})),(function(t,n){return t.original.overlapOrTouch(n.original)||t.modified.overlapOrTouch(n.modified)}));o<s.length;o++){var u=s[o];var a=u[0],h=u[u.length-1];e.push(new Vd(a.original.join(h.original),a.modified.join(h.modified),u.map((function(t){return t.innerChanges[0]}))))}return rf((function(){return!r&&e.length>0&&(e[0].modified.startLineNumber!==e[0].original.startLineNumber||i.length-e[e.length-1].modified.endLineNumberExclusive!=n.length-e[e.length-1].original.endLineNumberExclusive)?!1:ef(e,(function(t,n){return n.original.startLineNumber-t.original.endLineNumberExclusive==n.modified.startLineNumber-t.modified.endLineNumberExclusive&&t.original.endLineNumberExclusive<n.original.startLineNumber&&t.modified.endLineNumberExclusive<n.modified.startLineNumber}))})),e}var Mg=function(){return new Gd},Fg=function(){return new Og};function Lg(t,n){var i=Math.pow(10,n);return Math.round(t*i)/i}var jg=function(){function t(t,n,i,r){if(r===void 0){r=1}this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,t)),this.g=0|Math.min(255,Math.max(0,n)),this.b=0|Math.min(255,Math.max(0,i)),this.a=Lg(Math.max(Math.min(1,r),0),3)}t.equals=function(t,n){return t.r===n.r&&t.g===n.g&&t.b===n.b&&t.a===n.a};return t}();var Rg=function(){function t(t,n,i,r){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,t),0),this.s=Lg(Math.max(Math.min(1,n),0),3),this.l=Lg(Math.max(Math.min(1,i),0),3),this.a=Lg(Math.max(Math.min(1,r),0),3)}t.equals=function(t,n){return t.h===n.h&&t.s===n.s&&t.l===n.l&&t.a===n.a};t.fromRGBA=function(n){var i=n.r/255,r=n.g/255,e=n.b/255,o=n.a,s=Math.max(i,r,e),u=Math.min(i,r,e);var a=0,h=0;var c=(u+s)/2,f=s-u;if(f>0){switch(h=Math.min(c<=.5?f/(2*c):f/(2-2*c),1),s){case i:a=(r-e)/f+(r<e?6:0);break;case r:a=(e-i)/f+2;break;case e:a=(i-r)/f+4}a*=60,a=Math.round(a)}return new t(a,h,c,o)};t._hue2rgb=function(t,n,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(n-t)*i:i<.5?n:i<2/3?t+(n-t)*(2/3-i)*6:t};t.toRGBA=function(n){var i=n.h/360,r=n.s,e=n.l,o=n.a;var s,u,a;if(r===0)s=u=a=e;else{var h=e<.5?e*(1+r):e+r-e*r,c=2*e-h;s=t._hue2rgb(c,h,i+1/3),u=t._hue2rgb(c,h,i),a=t._hue2rgb(c,h,i-1/3)}return new jg(Math.round(255*s),Math.round(255*u),Math.round(255*a),o)};return t}();var Tg=function(){function t(t,n,i,r){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,t),0),this.s=Lg(Math.max(Math.min(1,n),0),3),this.v=Lg(Math.max(Math.min(1,i),0),3),this.a=Lg(Math.max(Math.min(1,r),0),3)}t.equals=function(t,n){return t.h===n.h&&t.s===n.s&&t.v===n.v&&t.a===n.a};t.fromRGBA=function(n){var i=n.r/255,r=n.g/255,e=n.b/255,o=Math.max(i,r,e),s=o-Math.min(i,r,e),u=o===0?0:s/o;var a;return a=s===0?0:o===i?((r-e)/s%6+6)%6:o===r?(e-i)/s+2:(i-r)/s+4,new t(Math.round(60*a),u,o,n.a)};t.toRGBA=function(t){var n=t.h,i=t.s,r=t.v,e=t.a,o=r*i,s=o*(1-Math.abs(n/60%2-1)),u=r-o;var a=[0,0,0],h=a[0],c=a[1],f=a[2];return n<60?(h=o,c=s):n<120?(h=s,c=o):n<180?(c=o,f=s):n<240?(c=s,f=o):n<300?(h=s,f=o):n<=360&&(h=o,f=s),h=Math.round(255*(h+u)),c=Math.round(255*(c+u)),f=Math.round(255*(f+u)),new jg(h,c,f,e)};return t}();var Ig=function(){function t(t){if(!t)throw new Error("Color needs a value");if(t instanceof jg)this.rgba=t;else if(t instanceof Rg)this._hsla=t,this.rgba=Rg.toRGBA(t);else{if(!(t instanceof Tg))throw new Error("Invalid color ctor argument");this._hsva=t,this.rgba=Tg.toRGBA(t)}}t.fromHex=function(n){return t.Format.CSS.parseHex(n)||t.red};t.equals=function(t,n){return!t&&!n||!(!t||!n)&&t.equals(n)};Object.defineProperty(t.prototype,"hsla",{get:function(){return this._hsla?this._hsla:Rg.fromRGBA(this.rgba)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"hsva",{get:function(){return this._hsva?this._hsva:Tg.fromRGBA(this.rgba)},enumerable:false,configurable:true});t.prototype.equals=function(t){return!!t&&jg.equals(this.rgba,t.rgba)&&Rg.equals(this.hsla,t.hsla)&&Tg.equals(this.hsva,t.hsva)};t.prototype.getRelativeLuminance=function(){return Lg(.2126*t._relativeLuminanceForComponent(this.rgba.r)+.7152*t._relativeLuminanceForComponent(this.rgba.g)+.0722*t._relativeLuminanceForComponent(this.rgba.b),4)};t._relativeLuminanceForComponent=function(t){var n=t/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)};t.prototype.isLighter=function(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128};t.prototype.isLighterThan=function(t){return this.getRelativeLuminance()>t.getRelativeLuminance()};t.prototype.isDarkerThan=function(t){return this.getRelativeLuminance()<t.getRelativeLuminance()};t.prototype.lighten=function(n){return new t(new Rg(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*n,this.hsla.a))};t.prototype.darken=function(n){return new t(new Rg(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*n,this.hsla.a))};t.prototype.transparent=function(n){var i=this.rgba,r=i.r,e=i.g,o=i.b,s=i.a;return new t(new jg(r,e,o,s*n))};t.prototype.isTransparent=function(){return this.rgba.a===0};t.prototype.isOpaque=function(){return this.rgba.a===1};t.prototype.opposite=function(){return new t(new jg(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))};t.prototype.makeOpaque=function(n){if(this.isOpaque()||n.rgba.a!==1)return this;var i=this.rgba,r=i.r,e=i.g,o=i.b,s=i.a;return new t(new jg(n.rgba.r-s*(n.rgba.r-r),n.rgba.g-s*(n.rgba.g-e),n.rgba.b-s*(n.rgba.b-o),1))};t.prototype.toString=function(){return this._toString||(this._toString=t.Format.CSS.format(this)),this._toString};t.getLighterColor=function(t,n,i){if(t.isLighterThan(n))return t;i=i||.5;var r=t.getRelativeLuminance(),e=n.getRelativeLuminance();return i=i*(e-r)/e,t.lighten(i)};t.getDarkerColor=function(t,n,i){if(t.isDarkerThan(n))return t;i=i||.5;var r=t.getRelativeLuminance();return i=i*(r-n.getRelativeLuminance())/r,t.darken(i)};return t}();function Bg(t){var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];var o=Number(e);(o||o===0&&e.replace(/\s/g,"")!=="")&&n.push(o)}return n}function Ng(t,n,i,r){return{red:t/255,blue:i/255,green:n/255,alpha:r}}function Pg(t,n){var i=n.index,r=n[0].length;if(!i)return;var e=t.positionAt(i);return{startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column+r}}function Wg(t,n){if(!t)return;var i=Ig.Format.CSS.parseHex(n);return i?{range:t,color:Ng(i.rgba.r,i.rgba.g,i.rgba.b,i.rgba.a)}:void 0}function Hg(t,n,i){if(!t||n.length!==1)return;var r=Bg(n[0].values());return{range:t,color:Ng(r[0],r[1],r[2],i?r[3]:1)}}function zg(t,n,i){if(!t||n.length!==1)return;var r=Bg(n[0].values()),e=new Ig(new Rg(r[0],r[1]/100,r[2]/100,i?r[3]:1));return{range:t,color:Ng(e.rgba.r,e.rgba.g,e.rgba.b,e.rgba.a)}}function Ug(t,n){return typeof t=="string"?__spreadArray([],t.matchAll(n),true):t.findMatches(n)}function Kg(t){return t&&typeof t.getValue=="function"&&typeof t.positionAt=="function"?function(t){var n=[],i=Ug(t,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(i.length>0)for(var r=0,e=i;r<e.length;r++){var o=e[r];var s=o.filter((function(t){return t!==void 0})),u=s[1],a=s[2];if(!a)continue;var h=void 0;if(u==="rgb"){var c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;h=Hg(Pg(t,o),Ug(a,c),!1)}else if(u==="rgba"){var c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;h=Hg(Pg(t,o),Ug(a,c),!0)}else if(u==="hsl"){var c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;h=zg(Pg(t,o),Ug(a,c),!1)}else if(u==="hsla"){var c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;h=zg(Pg(t,o),Ug(a,c),!0)}else u==="#"&&(h=Wg(Pg(t,o),u+a));h&&n.push(h)}return n}(t):[]}Ig.white=new Ig(new jg(255,255,255,1)),Ig.black=new Ig(new jg(0,0,0,1)),Ig.red=new Ig(new jg(255,0,0,1)),Ig.blue=new Ig(new jg(0,0,255,1)),Ig.green=new Ig(new jg(0,255,0,1)),Ig.cyan=new Ig(new jg(0,255,255,1)),Ig.lightgrey=new Ig(new jg(211,211,211,1)),Ig.transparent=new Ig(new jg(0,0,0,0)),function(t){var n;(function(n){function i(t){var n=t.toString(16);return n.length!==2?"0"+n:n}function r(t){switch(t){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}n.formatRGB=function(n){return n.rgba.a===1?"rgb(".concat(n.rgba.r,", ").concat(n.rgba.g,", ").concat(n.rgba.b,")"):t.Format.CSS.formatRGBA(n)},n.formatRGBA=function(t){return"rgba(".concat(t.rgba.r,", ").concat(t.rgba.g,", ").concat(t.rgba.b,", ").concat(+t.rgba.a.toFixed(2),")")},n.formatHSL=function(n){return n.hsla.a===1?"hsl(".concat(n.hsla.h,", ").concat((100*n.hsla.s).toFixed(2),"%, ").concat((100*n.hsla.l).toFixed(2),"%)"):t.Format.CSS.formatHSLA(n)},n.formatHSLA=function(t){return"hsla(".concat(t.hsla.h,", ").concat((100*t.hsla.s).toFixed(2),"%, ").concat((100*t.hsla.l).toFixed(2),"%, ").concat(t.hsla.a.toFixed(2),")")},n.formatHex=function(t){return"#".concat(i(t.rgba.r)).concat(i(t.rgba.g)).concat(i(t.rgba.b))},n.formatHexA=function(n,r){if(r===void 0){r=!1}return r&&n.rgba.a===1?t.Format.CSS.formatHex(n):"#".concat(i(n.rgba.r)).concat(i(n.rgba.g)).concat(i(n.rgba.b)).concat(i(Math.round(255*n.rgba.a)))},n.format=function(n){return n.isOpaque()?t.Format.CSS.formatHex(n):t.Format.CSS.formatRGBA(n)},n.parseHex=function(n){var i=n.length;if(i===0||n.charCodeAt(0)!==35)return null;if(i===7){var e=16*r(n.charCodeAt(1))+r(n.charCodeAt(2)),o=16*r(n.charCodeAt(3))+r(n.charCodeAt(4)),s=16*r(n.charCodeAt(5))+r(n.charCodeAt(6));return new t(new jg(e,o,s,1))}if(i===9){var e=16*r(n.charCodeAt(1))+r(n.charCodeAt(2)),o=16*r(n.charCodeAt(3))+r(n.charCodeAt(4)),s=16*r(n.charCodeAt(5))+r(n.charCodeAt(6)),u=16*r(n.charCodeAt(7))+r(n.charCodeAt(8));return new t(new jg(e,o,s,u/255))}if(i===4){var e=r(n.charCodeAt(1)),o=r(n.charCodeAt(2)),s=r(n.charCodeAt(3));return new t(new jg(16*e+e,16*o+o,16*s+s))}if(i===5){var e=r(n.charCodeAt(1)),o=r(n.charCodeAt(2)),s=r(n.charCodeAt(3)),u=r(n.charCodeAt(4));return new t(new jg(16*e+e,16*o+o,16*s+s,(16*u+u)/255))}return null}})((n=t.Format||(t.Format={})).CSS||(n.CSS={}))}(Ig||(Ig={}));var Vg=new RegExp("\\bMARK:\\s*(.*)$","d"),qg=/^-+|-+$/g;function Gg(t,n){var i;var r=[];if(n.findRegionSectionHeaders&&(!((i=n.foldingRules)===null||i===void 0)&&i.markers)){var e=function(t,n){var i=[],r=t.getLineCount();for(var e=1;e<=r;e++){var o=t.getLineContent(e),s=o.match(n.foldingRules.markers.start);if(s){var u={startLineNumber:e,startColumn:s[0].length+1,endLineNumber:e,endColumn:o.length+1};if(u.endColumn>u.startColumn){var a=__assign(__assign({range:u},Jg(o.substring(s[0].length))),{shouldBeInComments:!1});(a.text||a.hasSeparatorLine)&&i.push(a)}}}return i}(t,n);r=r.concat(e)}if(n.findMarkSectionHeaders){var e=function(t){var n=[],i=t.getLineCount();for(var r=1;r<=i;r++)$g(t.getLineContent(r),r,n);return n}(t);r=r.concat(e)}return r}function $g(t,n,i){Vg.lastIndex=0;var r=Vg.exec(t);if(r){var e={startLineNumber:n,startColumn:r.indices[1][0]+1,endLineNumber:n,endColumn:r.indices[1][1]+1};if(e.endColumn>e.startColumn){var o=__assign(__assign({range:e},Jg(r[1])),{shouldBeInComments:!0});(o.text||o.hasSeparatorLine)&&i.push(o)}}}function Jg(t){var n=(t=t.trim()).startsWith("-");return{text:t=t.replace(qg,""),hasSeparatorLine:n}}var Zg=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}Object.defineProperty(n.prototype,"uri",{get:function(){return this._uri},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"eol",{get:function(){return this._eol},enumerable:false,configurable:true});n.prototype.getValue=function(){return this.getText()};n.prototype.findMatches=function(t){var n=[];for(var i=0;i<this._lines.length;i++){var r=this._lines[i],e=this.offsetAt(new Tr(i+1,1)),o=r.matchAll(t);for(var s=0,u=o;s<u.length;s++){var a=u[s];(a.index||a.index===0)&&(a.index=a.index+e),n.push(a)}}return n};n.prototype.getLinesContent=function(){return this._lines.slice(0)};n.prototype.getLineCount=function(){return this._lines.length};n.prototype.getLineContent=function(t){return this._lines[t-1]};n.prototype.getWordAtPosition=function(t,n){var i=sn(t.column,en(n),this._lines[t.lineNumber-1],0);return i?new Ir(t.lineNumber,i.startColumn,t.lineNumber,i.endColumn):null};n.prototype.words=function(t){var n;var i=this._lines,r=this._wordenize.bind(this);var e=0,o="",s=0,u=[];return n={},n[Symbol.iterator]=function(){var n;return __generator(this,(function(a){switch(a.label){case 0:if(!(s<u.length))return[3,2];n=o.substring(u[s].start,u[s].end);s+=1;return[4,n];case 1:a.sent();return[3,3];case 2:if(!(e<i.length))return[3,4];o=i[e],u=r(o,t),s=0,e+=1;a.label=3;case 3:return[3,0];case 4:return[2]}}))},n};n.prototype.getLineWords=function(t,n){var i=this._lines[t-1],r=this._wordenize(i,n),e=[];for(var o=0,s=r;o<s.length;o++){var u=s[o];e.push({word:i.substring(u.start,u.end),startColumn:u.start+1,endColumn:u.end+1})}return e};n.prototype._wordenize=function(t,n){var i=[];var r;for(n.lastIndex=0;(r=n.exec(t))&&r[0].length!==0;)i.push({start:r.index,end:r.index+r[0].length});return i};n.prototype.getValueInRange=function(t){if((t=this._validateRange(t)).startLineNumber===t.endLineNumber)return this._lines[t.startLineNumber-1].substring(t.startColumn-1,t.endColumn-1);var n=this._eol,i=t.startLineNumber-1,r=t.endLineNumber-1,e=[];e.push(this._lines[i].substring(t.startColumn-1));for(var o=i+1;o<r;o++)e.push(this._lines[o]);return e.push(this._lines[r].substring(0,t.endColumn-1)),e.join(n)};n.prototype.offsetAt=function(t){return t=this._validatePosition(t),this._ensureLineStarts(),this._lineStarts.getPrefixSum(t.lineNumber-2)+(t.column-1)};n.prototype.positionAt=function(t){t=Math.floor(t),t=Math.max(0,t),this._ensureLineStarts();var n=this._lineStarts.getIndexOf(t),i=this._lines[n.index].length;return{lineNumber:1+n.index,column:1+Math.min(n.remainder,i)}};n.prototype._validateRange=function(t){var n=this._validatePosition({lineNumber:t.startLineNumber,column:t.startColumn}),i=this._validatePosition({lineNumber:t.endLineNumber,column:t.endColumn});return n.lineNumber!==t.startLineNumber||n.column!==t.startColumn||i.lineNumber!==t.endLineNumber||i.column!==t.endColumn?{startLineNumber:n.lineNumber,startColumn:n.column,endLineNumber:i.lineNumber,endColumn:i.column}:t};n.prototype._validatePosition=function(t){if(!Tr.isIPosition(t))throw new Error("bad position");var n=t.lineNumber,i=t.column,r=!1;if(n<1)n=1,i=1,r=!0;else if(n>this._lines.length)n=this._lines.length,i=this._lines[n-1].length+1,r=!0;else{var e=this._lines[n-1].length+1;i<1?(i=1,r=!0):i>e&&(i=e,r=!0)}return r?{lineNumber:n,column:i}:t};return n}(Gv);var Qg=function(){function t(t,n){this._host=t,this._models=Object.create(null),this._foreignModuleFactory=n,this._foreignModule=null}t.prototype.dispose=function(){this._models=Object.create(null)};t.prototype._getModel=function(t){return this._models[t]};t.prototype._getModels=function(){var t=this;var n=[];return Object.keys(this._models).forEach((function(i){return n.push(t._models[i])})),n};t.prototype.acceptNewModel=function(t){this._models[t.url]=new Zg(Cr.parse(t.url),t.lines,t.EOL,t.versionId)};t.prototype.acceptModelChanged=function(t,n){this._models[t]&&this._models[t].onEvents(n)};t.prototype.acceptRemovedModel=function(t){this._models[t]&&delete this._models[t]};t.prototype.computeUnicodeHighlights=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(e){r=this._getModel(t);return[2,r?Od.computeUnicodeHighlights(r,n,i):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}]}))}))};t.prototype.findSectionHeaders=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){i=this._getModel(t);return[2,i?Gg(i,n):[]]}))}))};t.prototype.computeDiff=function(n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s;return __generator(this,(function(u){o=this._getModel(n),s=this._getModel(i);return[2,!o||!s?null:t.computeDiff(o,s,r,e)]}))}))};t.computeDiff=function(t,n,i,r){var e=r==="advanced"?Fg():Mg(),o=t.getLinesContent(),s=n.getLinesContent(),u=e.computeDiff(o,s,i);function a(t){return t.map((function(t){var n;return[t.original.startLineNumber,t.original.endLineNumberExclusive,t.modified.startLineNumber,t.modified.endLineNumberExclusive,(n=t.innerChanges)===null||n===void 0?void 0:n.map((function(t){return[t.originalRange.startLineNumber,t.originalRange.startColumn,t.originalRange.endLineNumber,t.originalRange.endColumn,t.modifiedRange.startLineNumber,t.modifiedRange.startColumn,t.modifiedRange.endLineNumber,t.modifiedRange.endColumn]}))]}))}return{identical:!(u.changes.length>0)&&this._modelsAreIdentical(t,n),quitEarly:u.hitTimeout,changes:a(u.changes),moves:u.moves.map((function(t){return[t.lineRangeMapping.original.startLineNumber,t.lineRangeMapping.original.endLineNumberExclusive,t.lineRangeMapping.modified.startLineNumber,t.lineRangeMapping.modified.endLineNumberExclusive,a(t.changes)]}))}};t._modelsAreIdentical=function(t,n){var i=t.getLineCount();if(i!==n.getLineCount())return!1;for(var r=1;r<=i;r++)if(t.getLineContent(r)!==n.getLineContent(r))return!1;return!0};t.prototype.computeMoreMinimalEdits=function(n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a,h,c,f,a,l,v,d,g,p,w,m,b,y,_,k;return __generator(this,(function(x){e=this._getModel(n);if(!e)return[2,i];o=[];i=i.slice(0).sort((function(t,n){return t.range&&n.range?Ir.compareRangesUsingStarts(t.range,n.range):(t.range?0:1)-(n.range?0:1)}));u=0;for(a=1;a<i.length;a++)Ir.getEndPosition(i[u].range).equals(Ir.getStartPosition(i[a].range))?(i[u].range=Ir.fromPositions(Ir.getStartPosition(i[u].range),Ir.getEndPosition(i[a].range)),i[u].text+=i[a].text):(u++,i[u]=i[a]);i.length=u+1;for(h=0,c=i;h<c.length;h++){f=c[h],a=f.range,l=f.text,v=f.eol;if(typeof v=="number"&&(s=v),Ir.isEmpty(a)&&!l)continue;d=e.getValueInRange(a);if(l=l.replace(/\r\n|\n|\r/g,e.eol),d===l)continue;if(Math.max(l.length,d.length)>t._diffLimit){o.push({range:a,text:l});continue}g=Bv(d,l,r),p=e.offsetAt(Ir.lift(a).getStartPosition());for(w=0,m=g;w<m.length;w++){b=m[w];y=e.positionAt(p+b.originalStart),_=e.positionAt(p+b.originalStart+b.originalLength),k={text:l.substr(b.modifiedStart,b.modifiedLength),range:{startLineNumber:y.lineNumber,startColumn:y.column,endLineNumber:_.lineNumber,endColumn:_.column}};e.getValueInRange(k.range)!==k.text&&o.push(k)}}return[2,(typeof s=="number"&&o.push({eol:s,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),o)]}))}))};t.prototype.computeLinks=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){n=this._getModel(t);return[2,n?function(t){return t&&typeof t.getLineCount=="function"&&typeof t.getLineContent=="function"?td.computeLinks(t):[]}(n):null]}))}))};t.prototype.computeDefaultDocumentColors=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){n=this._getModel(t);return[2,n?Kg(n):null]}))}))};t.prototype.textualSuggest=function(n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h,c,f,l,v,d;return __generator(this,(function(g){o=new pi,s=new RegExp(r,e),u=new Set;t:for(a=0,h=n;a<h.length;a++){c=h[a];f=this._getModel(c);if(f){for(l=0,v=f.words(s);l<v.length;l++){d=v[l];if(d!==i&&isNaN(Number(d))&&(u.add(d),u.size>t._suggestionsLimit))break t}}}return[2,{words:Array.from(u),duration:o.elapsed()}]}))}))};t.prototype.computeWordRanges=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a,h,c,f,l;return __generator(this,(function(v){e=this._getModel(t);if(!e)return[2,Object.create(null)];o=new RegExp(i,r),s=Object.create(null);for(u=n.startLineNumber;u<n.endLineNumber;u++){a=e.getLineWords(u,o);for(h=0,c=a;h<c.length;h++){f=c[h];if(!isNaN(Number(f.word)))continue;l=s[f.word];l||(l=[],s[f.word]=l),l.push({startLineNumber:u,startColumn:f.startColumn,endLineNumber:u,endColumn:f.endColumn})}}return[2,s]}))}))};t.prototype.navigateValueSet=function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h;return __generator(this,(function(c){o=this._getModel(t);if(!o)return[2,null];s=new RegExp(r,e);n.startColumn===n.endColumn&&(n={startLineNumber:n.startLineNumber,startColumn:n.startColumn,endLineNumber:n.endLineNumber,endColumn:n.endColumn+1});u=o.getValueInRange(n),a=o.getWordAtPosition({lineNumber:n.startLineNumber,column:n.startColumn},s);if(!a)return[2,null];h=o.getValueInRange(a);return[2,nd.INSTANCE.navigateValueSet(n,u,a,h,i)]}))}))};t.prototype.loadForeignModule=function(t,n,i){var r=this;var e=function(t,n){var i=function(t){return function(){var i=Array.prototype.slice.call(arguments,0);return n(t,i)}},r={};for(var e=0,o=t;e<o.length;e++){var s=o[e];r[s]=i(s)}return r}(i,(function(t,n){return r._host.fhr(t,n)})),o={host:e,getMirrorModels:function(){return r._getModels()}};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(o,n),Promise.resolve(st(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))};t.prototype.fmr=function(t,n){if(!this._foreignModule||typeof this._foreignModule[t]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+t));try{return Promise.resolve(this._foreignModule[t].apply(this._foreignModule,n))}catch(t){return Promise.reject(t)}};return t}();Qg._diffLimit=1e5,Qg._suggestionsLimit=1e4,typeof importScripts=="function"&&(globalThis.monaco=Ye());var Yg=Zh("textResourceConfigurationService"),Xg=Zh("textResourcePropertiesService"),tp=Zh("ILanguageFeaturesService");var np=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},ip=function(t,n){return function(i,r){n(i,r,t)}};var rp=3e5;function ep(t,n){var i=t.getModel(n);return!!i&&!i.isTooLargeForSyncing()}var op=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s._modelService=n,s._workerManager=s._register(new up(s._modelService,e)),s._logService=r,s._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:function(t,n){return ep(s._modelService,t.uri)?s._workerManager.withWorker().then((function(n){return n.computeLinks(t.uri)})).then((function(t){return t&&{links:t}})):Promise.resolve({links:[]})}})),s._register(o.completionProvider.register("*",new sp(s._workerManager,i,s._modelService,e)));return s}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.canComputeUnicodeHighlights=function(t){return ep(this._modelService,t)};n.prototype.computedUnicodeHighlights=function(t,n,i){return this._workerManager.withWorker().then((function(r){return r.computedUnicodeHighlights(t,n,i)}))};n.prototype.computeDiff=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){function e(t){return t.map((function(t){var n;return new Vd(new zd(t[0],t[1]),new zd(t[2],t[3]),(n=t[4])===null||n===void 0?void 0:n.map((function(t){return new qd(new Ir(t[0],t[1],t[2],t[3]),new Ir(t[4],t[5],t[6],t[7]))})))}))}var o;return __generator(this,(function(s){switch(s.label){case 0:return[4,this._workerManager.withWorker().then((function(e){return e.computeDiff(t,n,i,r)}))];case 1:o=s.sent();if(!o)return[2,null];return[2,{identical:o.identical,quitEarly:o.quitEarly,changes:e(o.changes),moves:o.moves.map((function(t){return new Ld(new Kd(new zd(t[0],t[1]),new zd(t[2],t[3])),e(t[4]))}))}]}}))}))};n.prototype.computeMoreMinimalEdits=function(t,n,i){var r=this;if(i===void 0){i=!1}if(k(n)){if(!ep(this._modelService,t))return Promise.resolve(n);var e=pi.create(),o=this._workerManager.withWorker().then((function(r){return r.computeMoreMinimalEdits(t,n,i)}));return o.finally((function(){return r._logService.trace("FORMAT#computeMoreMinimalEdits",t.toString(!0),e.elapsed())})),Promise.race([o,Ms(1e3).then((function(){return n}))])}return Promise.resolve(void 0)};n.prototype.canNavigateValueSet=function(t){return ep(this._modelService,t)};n.prototype.navigateValueSet=function(t,n,i){return this._workerManager.withWorker().then((function(r){return r.navigateValueSet(t,n,i)}))};n.prototype.canComputeWordRanges=function(t){return ep(this._modelService,t)};n.prototype.computeWordRanges=function(t,n){return this._workerManager.withWorker().then((function(i){return i.computeWordRanges(t,n)}))};n.prototype.findSectionHeaders=function(t,n){return this._workerManager.withWorker().then((function(i){return i.findSectionHeaders(t,n)}))};return n}(ci);op=np([ip(0,Yh),ip(1,Yg),ip(2,kf),ip(3,xv),ip(4,tp)],op);var sp=function(){function t(t,n,i,r){this.languageConfigurationService=r,this._debugDisplayName="wordbasedCompletions",this._workerManager=t,this._configurationService=n,this._modelService=i}t.prototype.provideCompletionItems=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u,a,h,c,f,l;return __generator(this,(function(v){switch(v.label){case 0:i=this._configurationService.getValue(t.uri,n,"editor");if(i.wordBasedSuggestions==="off")return[2];r=[];if(i.wordBasedSuggestions==="currentDocument")ep(this._modelService,t.uri)&&r.push(t.uri);else for(e=0,o=this._modelService.getModels();e<o.length;e++){s=o[e];ep(this._modelService,s.uri)&&(s===t?r.unshift(s.uri):i.wordBasedSuggestions!=="allDocuments"&&s.getLanguageId()!==t.getLanguageId()||r.push(s.uri))}if(r.length===0)return[2];u=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition(),a=t.getWordAtPosition(n),h=a?new Ir(n.lineNumber,a.startColumn,n.lineNumber,a.endColumn):Ir.fromPositions(n),c=h.setEndPosition(n.lineNumber,n.column);return[4,this._workerManager.withWorker()];case 1:f=v.sent();return[4,f.textualSuggest(r,a==null?void 0:a.word,u)];case 2:l=v.sent();return[2,l?{duration:l.duration,suggestions:l.words.map((function(t){return{kind:18,label:t,insertText:t,range:{insert:c,replace:h}}}))}:void 0]}}))}))};return t}();var up=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.languageConfigurationService=i,r._modelService=n,r._editorWorkerClient=null,r._lastWorkerUsedTime=(new Date).getTime(),r._register(new Da).cancelAndSet((function(){return r._checkStopIdleWorker()}),Math.round(15e4),Xe),r._register(r._modelService.onModelRemoved((function(t){return r._checkStopEmptyWorker()})));return r}n.prototype.dispose=function(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),t.prototype.dispose.call(this)};n.prototype._checkStopEmptyWorker=function(){this._editorWorkerClient&&this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)};n.prototype._checkStopIdleWorker=function(){this._editorWorkerClient&&(new Date).getTime()-this._lastWorkerUsedTime>rp&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)};n.prototype.withWorker=function(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new fp(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)};return n}(ci);var ap=function(t){__extends(n,t);function n(n,i,r){var e=this;if(e=t.call(this)||this,e._syncedModels=Object.create(null),e._syncedModelsLastUsedTime=Object.create(null),e._proxy=n,e._modelService=i,!r){var o=new Rs;o.cancelAndSet((function(){return e._checkStopModelSync()}),Math.round(3e4)),e._register(o)}return e}n.prototype.dispose=function(){for(var n in this._syncedModels)si(this._syncedModels[n]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),t.prototype.dispose.call(this)};n.prototype.ensureSyncedResources=function(t,n){for(var i=0,r=t;i<r.length;i++){var e=r[i];var o=e.toString();this._syncedModels[o]||this._beginModelSync(e,n),this._syncedModels[o]&&(this._syncedModelsLastUsedTime[o]=(new Date).getTime())}};n.prototype._checkStopModelSync=function(){var t=(new Date).getTime(),n=[];for(var i in this._syncedModelsLastUsedTime)t-this._syncedModelsLastUsedTime[i]>6e4&&n.push(i);for(var r=0,e=n;r<e.length;r++){var i=e[r];this._stopModelSync(i)}};n.prototype._beginModelSync=function(t,n){var i=this;var r=this._modelService.getModel(t);if(!r||!n&&r.isTooLargeForSyncing())return;var e=t.toString();this._proxy.acceptNewModel({url:r.uri.toString(),lines:r.getLinesContent(),EOL:r.getEOL(),versionId:r.getVersionId()});var o=new hi;o.add(r.onDidChangeContent((function(t){i._proxy.acceptModelChanged(e.toString(),t)}))),o.add(r.onWillDispose((function(){i._stopModelSync(e)}))),o.add(ai((function(){i._proxy.acceptRemovedModel(e)}))),this._syncedModels[e]=o};n.prototype._stopModelSync=function(t){var n=this._syncedModels[t];delete this._syncedModels[t],delete this._syncedModelsLastUsedTime[t],si(n)};return n}(ci);var hp=function(){function t(t){this._instance=t,this._proxyObj=Promise.resolve(this._instance)}t.prototype.dispose=function(){this._instance.dispose()};t.prototype.getProxyObject=function(){return this._proxyObj};return t}();var cp=function(){function t(t){this._workerClient=t}t.prototype.fhr=function(t,n){return this._workerClient.fhr(t,n)};return t}();var fp=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o.languageConfigurationService=e,o._disposed=!1,o._modelService=n,o._keepIdleModels=i,o._workerFactory=new sl(r),o._worker=null,o._modelManager=null;return o}n.prototype.fhr=function(t,n){throw new Error("Not implemented!")};n.prototype._getOrCreateWorker=function(){if(!this._worker)try{this._worker=this._register(new tl(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new cp(this)))}catch(t){Gf(t),this._worker=new hp(new Qg(new cp(this),null))}return this._worker};n.prototype._getProxy=function(){var t=this;return this._getOrCreateWorker().getProxyObject().then(void 0,(function(n){return Gf(n),t._worker=new hp(new Qg(new cp(t),null)),t._getOrCreateWorker().getProxyObject()}))};n.prototype._getOrCreateModelManager=function(t){return this._modelManager||(this._modelManager=this._register(new ap(t,this._modelService,this._keepIdleModels))),this._modelManager};n.prototype._withSyncedResources=function(t){return __awaiter(this,arguments,void 0,(function(t,n){var i=this;if(n===void 0){n=!1}return __generator(this,(function(r){return[2,this._disposed?Promise.reject(function(){var t=new Error(Zn);return t.name=t.message,t}()):this._getProxy().then((function(r){return i._getOrCreateModelManager(r).ensureSyncedResources(t,n),r}))]}))}))};n.prototype.computedUnicodeHighlights=function(t,n,i){return this._withSyncedResources([t]).then((function(r){return r.computeUnicodeHighlights(t.toString(),n,i)}))};n.prototype.computeDiff=function(t,n,i,r){return this._withSyncedResources([t,n],!0).then((function(e){return e.computeDiff(t.toString(),n.toString(),i,r)}))};n.prototype.computeMoreMinimalEdits=function(t,n,i){return this._withSyncedResources([t]).then((function(r){return r.computeMoreMinimalEdits(t.toString(),n,i)}))};n.prototype.computeLinks=function(t){return this._withSyncedResources([t]).then((function(n){return n.computeLinks(t.toString())}))};n.prototype.computeDefaultDocumentColors=function(t){return this._withSyncedResources([t]).then((function(n){return n.computeDefaultDocumentColors(t.toString())}))};n.prototype.textualSuggest=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o;return __generator(this,(function(s){switch(s.label){case 0:return[4,this._withSyncedResources(t)];case 1:r=s.sent(),e=i.source,o=i.flags;return[2,r.textualSuggest(t.map((function(t){return t.toString()})),n,e,o)]}}))}))};n.prototype.computeWordRanges=function(t,n){var i=this;return this._withSyncedResources([t]).then((function(r){var e=i._modelService.getModel(t);if(!e)return Promise.resolve(null);var o=i.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),s=o.source,u=o.flags;return r.computeWordRanges(t.toString(),n,s,u)}))};n.prototype.navigateValueSet=function(t,n,i){var r=this;return this._withSyncedResources([t]).then((function(e){var o=r._modelService.getModel(t);if(!o)return null;var s=r.languageConfigurationService.getLanguageConfiguration(o.getLanguageId()).getWordDefinition(),u=s.source,a=s.flags;return e.navigateValueSet(t.toString(),n,i,u,a)}))};n.prototype.findSectionHeaders=function(t,n){return this._withSyncedResources([t]).then((function(i){return i.findSectionHeaders(t.toString(),n)}))};n.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposed=!0};return n}(ci);var lp=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,r.keepIdleModels||!1,r.label,i)||this,e._foreignModuleId=r.moduleId,e._foreignModuleCreateData=r.createData||null,e._foreignModuleHost=r.host||null,e._foreignProxy=null;return e}n.prototype.fhr=function(t,n){if(!this._foreignModuleHost||typeof this._foreignModuleHost[t]!="function")return Promise.reject(new Error("Missing method "+t+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[t].apply(this._foreignModuleHost,n))}catch(t){return Promise.reject(t)}};n.prototype._getForeignProxy=function(){var t=this;return this._foreignProxy||(this._foreignProxy=this._getProxy().then((function(n){var i=t._foreignModuleHost?st(t._foreignModuleHost):[];return n.loadForeignModule(t._foreignModuleId,t._foreignModuleCreateData,i).then((function(i){t._foreignModuleCreateData=null;var r=function(t,i){return n.fmr(t,i)},e=function(t,n){return function(){var i=Array.prototype.slice.call(arguments,0);return n(t,i)}},o={};for(var s=0,u=i;s<u.length;s++){var a=u[s];o[a]=e(a,r)}return o}))}))),this._foreignProxy};n.prototype.getProxy=function(){return this._getForeignProxy()};n.prototype.withSyncedResources=function(t){var n=this;return this._withSyncedResources(t).then((function(t){return n.getProxy()}))};return n}(fp);var vp={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},dp=new(function(){function t(){}t.prototype.clone=function(){return this};t.prototype.equals=function(t){return this===t};return t}());function gp(t,n){return new Kr([new Ur(0,"",t)],n)}function pp(t,n){var i=new Uint32Array(2);return i[0]=0,i[1]=(32768|t|2<<24)>>>0,new Vr(i,n===null?dp:n)}var wp=function(){function t(){}t.getLanguageId=function(t){return(255&t)>>>0};t.getTokenType=function(t){return(768&t)>>>8};t.containsBalancedBrackets=function(t){return!!(1024&t)};t.getFontStyle=function(t){return(30720&t)>>>11};t.getForeground=function(t){return(16744448&t)>>>15};t.getBackground=function(t){return(4278190080&t)>>>24};t.getClassNameFromMetadata=function(t){var n="mtk"+this.getForeground(t);var i=this.getFontStyle(t);return 1&i&&(n+=" mtki"),2&i&&(n+=" mtkb"),4&i&&(n+=" mtku"),8&i&&(n+=" mtks"),n};t.getInlineStyleFromMetadata=function(t,n){var i=this.getForeground(t),r=this.getFontStyle(t);var e="color: ".concat(n[i],";");1&r&&(e+="font-style: italic;"),2&r&&(e+="font-weight: bold;");var o="";return 4&r&&(o+=" underline"),8&r&&(o+=" line-through"),o&&(e+="text-decoration:".concat(o,";")),e};t.getPresentationFromMetadata=function(t){var n=this.getForeground(t),i=this.getFontStyle(t);return{foreground:n,italic:!!(1&i),bold:!!(2&i),underline:!!(4&i),strikethrough:!!(8&i)}};return t}();var mp=function(){function t(t,n,i){this._lineTokensBrand=void 0,this._tokens=t,this._tokensCount=this._tokens.length>>>1,this._text=n,this._languageIdCodec=i}t.createEmpty=function(n,i){var r=t.defaultTokenMetadata,e=new Uint32Array(2);return e[0]=n.length,e[1]=r,new t(e,n,i)};t.prototype.equals=function(n){return n instanceof t&&this.slicedEquals(n,0,this._tokensCount)};t.prototype.slicedEquals=function(t,n,i){if(this._text!==t._text||this._tokensCount!==t._tokensCount)return!1;var r=n<<1,e=r+(i<<1);for(var o=r;o<e;o++)if(this._tokens[o]!==t._tokens[o])return!1;return!0};t.prototype.getLineContent=function(){return this._text};t.prototype.getCount=function(){return this._tokensCount};t.prototype.getStartOffset=function(t){return t>0?this._tokens[t-1<<1]:0};t.prototype.getMetadata=function(t){return this._tokens[1+(t<<1)]};t.prototype.getLanguageId=function(t){var n=this._tokens[1+(t<<1)],i=wp.getLanguageId(n);return this._languageIdCodec.decodeLanguageId(i)};t.prototype.getStandardTokenType=function(t){var n=this._tokens[1+(t<<1)];return wp.getTokenType(n)};t.prototype.getForeground=function(t){var n=this._tokens[1+(t<<1)];return wp.getForeground(n)};t.prototype.getClassName=function(t){var n=this._tokens[1+(t<<1)];return wp.getClassNameFromMetadata(n)};t.prototype.getInlineStyle=function(t,n){var i=this._tokens[1+(t<<1)];return wp.getInlineStyleFromMetadata(i,n)};t.prototype.getPresentation=function(t){var n=this._tokens[1+(t<<1)];return wp.getPresentationFromMetadata(n)};t.prototype.getEndOffset=function(t){return this._tokens[t<<1]};t.prototype.findTokenIndexAtOffset=function(n){return t.findIndexInTokensArray(this._tokens,n)};t.prototype.inflate=function(){return this};t.prototype.sliceAndInflate=function(t,n,i){return new bp(this,t,n,i)};t.convertToEndOffset=function(t,n){var i=(t.length>>>1)-1;for(var r=0;r<i;r++)t[r<<1]=t[r+1<<1];t[i<<1]=n};t.findIndexInTokensArray=function(t,n){if(t.length<=2)return 0;var i=0,r=(t.length>>>1)-1;for(;i<r;){var e=i+Math.floor((r-i)/2),o=t[e<<1];if(o===n)return e+1;o<n?i=e+1:o>n&&(r=e)}return i};t.prototype.withInserted=function(n){if(n.length===0)return this;var i=0,r=0,e="";var o=new Array;var s=0;for(;;){var u=i<this._tokensCount?this._tokens[i<<1]:-1,a=r<n.length?n[r]:null;if(u!==-1&&(a===null||u<=a.offset)){e+=this._text.substring(s,u);var h=this._tokens[1+(i<<1)];o.push(e.length,h),i++,s=u}else{if(!a)break;if(a.offset>s){e+=this._text.substring(s,a.offset);var h=this._tokens[1+(i<<1)];o.push(e.length,h),s=a.offset}e+=a.text,o.push(e.length,a.tokenMetadata),r++}}return new t(new Uint32Array(o),e,this._languageIdCodec)};return t}();mp.defaultTokenMetadata=33587200;var bp=function(){function t(t,n,i,r){this._source=t,this._startOffset=n,this._endOffset=i,this._deltaOffset=r,this._firstTokenIndex=t.findTokenIndexAtOffset(n),this._tokensCount=0;for(var e=this._firstTokenIndex,o=t.getCount();e<o&&!(t.getStartOffset(e)>=i);e++)this._tokensCount++}t.prototype.getMetadata=function(t){return this._source.getMetadata(this._firstTokenIndex+t)};t.prototype.getLanguageId=function(t){return this._source.getLanguageId(this._firstTokenIndex+t)};t.prototype.getLineContent=function(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)};t.prototype.equals=function(n){return n instanceof t&&this._startOffset===n._startOffset&&this._endOffset===n._endOffset&&this._deltaOffset===n._deltaOffset&&this._source.slicedEquals(n._source,this._firstTokenIndex,this._tokensCount)};t.prototype.getCount=function(){return this._tokensCount};t.prototype.getForeground=function(t){return this._source.getForeground(this._firstTokenIndex+t)};t.prototype.getEndOffset=function(t){var n=this._source.getEndOffset(this._firstTokenIndex+t);return Math.min(this._endOffset,n)-this._startOffset+this._deltaOffset};t.prototype.getClassName=function(t){return this._source.getClassName(this._firstTokenIndex+t)};t.prototype.getInlineStyle=function(t,n){return this._source.getInlineStyle(this._firstTokenIndex+t,n)};t.prototype.getPresentation=function(t){return this._source.getPresentation(this._firstTokenIndex+t)};t.prototype.findTokenIndexAtOffset=function(t){return this._source.findTokenIndexAtOffset(t+this._startOffset-this._deltaOffset)-this._firstTokenIndex};return t}();var yp=function(){function t(t,n,i,r){this.startColumn=t,this.endColumn=n,this.className=i,this.type=r,this._lineDecorationBrand=void 0}t._equals=function(t,n){return t.startColumn===n.startColumn&&t.endColumn===n.endColumn&&t.className===n.className&&t.type===n.type};t.equalsArr=function(n,i){var r=n.length;if(r!==i.length)return!1;for(var e=0;e<r;e++)if(!t._equals(n[e],i[e]))return!1;return!0};t.extractWrapped=function(n,i,r){if(n.length===0)return n;var e=i+1,o=r+1,s=r-i,u=[];var a=0;for(var h=0,c=n;h<c.length;h++){var f=c[h];f.endColumn<=e||f.startColumn>=o||(u[a++]=new t(Math.max(1,f.startColumn-e+1),Math.min(s+1,f.endColumn-e+1),f.className,f.type))}return u};t.filter=function(n,i,r,e){if(n.length===0)return[];var o=[];var s=0;for(var u=0,a=n.length;u<a;u++){var h=n[u],c=h.range;if(c.endLineNumber<i||c.startLineNumber>i||c.isEmpty()&&(h.type===0||h.type===3))continue;var f=c.startLineNumber===i?c.startColumn:r,l=c.endLineNumber===i?c.endColumn:e;o[s++]=new t(f,l,h.inlineClassName,h.type)}return o};t._typeCompare=function(t,n){var i=[2,0,1,3];return i[t]-i[n]};t.compare=function(n,i){if(n.startColumn!==i.startColumn)return n.startColumn-i.startColumn;if(n.endColumn!==i.endColumn)return n.endColumn-i.endColumn;var r=t._typeCompare(n.type,i.type);return r!==0?r:n.className!==i.className?n.className<i.className?-1:1:0};return t}();var _p=function(){function t(t,n,i,r){this.startOffset=t,this.endOffset=n,this.className=i,this.metadata=r}return t}();var kp=function(){function t(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}t._metadata=function(t){var n=0;for(var i=0,r=t.length;i<r;i++)n|=t[i];return n};t.prototype.consumeLowerThan=function(n,i,r){for(;this.count>0&&this.stopOffsets[0]<n;){var e=0;for(;e+1<this.count&&this.stopOffsets[e]===this.stopOffsets[e+1];)e++;r.push(new _p(i,this.stopOffsets[e],this.classNames.join(" "),t._metadata(this.metadata))),i=this.stopOffsets[e]+1,this.stopOffsets.splice(0,e+1),this.classNames.splice(0,e+1),this.metadata.splice(0,e+1),this.count-=e+1}return this.count>0&&i<n&&(r.push(new _p(i,n-1,this.classNames.join(" "),t._metadata(this.metadata))),i=n),i};t.prototype.insert=function(t,n,i){if(this.count===0||this.stopOffsets[this.count-1]<=t)this.stopOffsets.push(t),this.classNames.push(n),this.metadata.push(i);else for(var r=0;r<this.count;r++)if(this.stopOffsets[r]>=t){this.stopOffsets.splice(r,0,t),this.classNames.splice(r,0,n),this.metadata.splice(r,0,i);break}this.count++};return t}();var xp=function(){function t(){}t.normalize=function(t,n){if(n.length===0)return[];var i=[],r=new kp;var e=0;for(var o=0,s=n.length;o<s;o++){var u=n[o];var a=u.startColumn,h=u.endColumn;var c=u.className,f=u.type===1?2:u.type===2?4:0;a>1&&Oo(t.charCodeAt(a-2))&&a--,h>1&&Oo(t.charCodeAt(h-2))&&h--;var l=a-1,v=h-2;e=r.consumeLowerThan(l,e,i),r.count===0&&(e=l),r.insert(v,c,f)}return r.consumeLowerThan(1073741824,e,i),i};return t}();var Cp=function(){function t(t,n,i,r){this.endIndex=t,this.type=n,this.metadata=i,this.containsRTL=r,this._linePartBrand=void 0}t.prototype.isWhitespace=function(){return!!(1&this.metadata)};t.prototype.isPseudoAfter=function(){return!!(4&this.metadata)};return t}();var Sp=function(){function t(t,n){this.startOffset=t,this.endOffset=n}t.prototype.equals=function(t){return this.startOffset===t.startOffset&&this.endOffset===t.endOffset};return t}();var Dp=function(){function t(t,n,i,r,e,o,s,u,a,h,c,f,l,v,d,g,p,w,m){this.useMonospaceOptimizations=t,this.canUseHalfwidthRightwardsArrow=n,this.lineContent=i,this.continuesWithWrappedLine=r,this.isBasicASCII=e,this.containsRTL=o,this.fauxIndentLength=s,this.lineTokens=u,this.lineDecorations=a.sort(yp.compare),this.tabSize=h,this.startVisibleColumn=c,this.spaceWidth=f,this.stopRenderingLineAfter=d,this.renderWhitespace=g==="all"?4:g==="boundary"?1:g==="selection"?2:g==="trailing"?3:0,this.renderControlCharacters=p,this.fontLigatures=w,this.selectionsOnLine=m&&m.sort((function(t,n){return t.startOffset<n.startOffset?-1:1})),Math.abs(v-f)<Math.abs(l-f)?(this.renderSpaceWidth=v,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=l,this.renderSpaceCharCode=183)}t.prototype.sameSelection=function(t){if(this.selectionsOnLine===null)return t===null;if(t===null||t.length!==this.selectionsOnLine.length)return!1;for(var n=0;n<this.selectionsOnLine.length;n++)if(!this.selectionsOnLine[n].equals(t[n]))return!1;return!0};t.prototype.equals=function(t){return this.useMonospaceOptimizations===t.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.lineContent===t.lineContent&&this.continuesWithWrappedLine===t.continuesWithWrappedLine&&this.isBasicASCII===t.isBasicASCII&&this.containsRTL===t.containsRTL&&this.fauxIndentLength===t.fauxIndentLength&&this.tabSize===t.tabSize&&this.startVisibleColumn===t.startVisibleColumn&&this.spaceWidth===t.spaceWidth&&this.renderSpaceWidth===t.renderSpaceWidth&&this.renderSpaceCharCode===t.renderSpaceCharCode&&this.stopRenderingLineAfter===t.stopRenderingLineAfter&&this.renderWhitespace===t.renderWhitespace&&this.renderControlCharacters===t.renderControlCharacters&&this.fontLigatures===t.fontLigatures&&yp.equalsArr(this.lineDecorations,t.lineDecorations)&&this.lineTokens.equals(t.lineTokens)&&this.sameSelection(t.selectionsOnLine)};return t}();var Ap=function(){function t(t,n){this.partIndex=t,this.charIndex=n}return t}();var Op=function(){function t(t,n){this.length=t,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}t.getPartIndex=function(t){return(4294901760&t)>>>16};t.getCharIndex=function(t){return(65535&t)>>>0};t.prototype.setColumnInfo=function(t,n,i,r){var e=(n<<16|i)>>>0;this._data[t-1]=e,this._horizontalOffset[t-1]=r};t.prototype.getHorizontalOffset=function(t){return this._horizontalOffset.length===0?0:this._horizontalOffset[t-1]};t.prototype.charOffsetToPartData=function(t){return this.length===0?0:t<0?this._data[0]:t>=this.length?this._data[this.length-1]:this._data[t]};t.prototype.getDomPosition=function(n){var i=this.charOffsetToPartData(n-1),r=t.getPartIndex(i),e=t.getCharIndex(i);return new Ap(r,e)};t.prototype.getColumn=function(t,n){return this.partDataToCharOffset(t.partIndex,n,t.charIndex)+1};t.prototype.partDataToCharOffset=function(n,i,r){if(this.length===0)return 0;var e=(n<<16|r)>>>0;var o=0,s=this.length-1;for(;o+1<s;){var u=o+s>>>1,a=this._data[u];if(a===e)return u;a>e?s=u:o=u}if(o===s)return o;var h=this._data[o],c=this._data[s];if(h===e)return o;if(c===e)return s;var f=t.getPartIndex(h),l=t.getCharIndex(h);var v;return v=f!==t.getPartIndex(c)?i:t.getCharIndex(c),r-l<=v-r?o:s};return t}();var Ep=function(){function t(t,n,i){this._renderLineOutputBrand=void 0,this.characterMapping=t,this.containsRTL=n,this.containsForeignElements=i}return t}();function Mp(t,n){if(t.lineContent.length===0){if(t.lineDecorations.length>0){n.appendString("<span>");var i=0,r=0,e=0;for(var o=0,s=t.lineDecorations;o<s.length;o++){var u=s[o];u.type!==1&&u.type!==2||(n.appendString('<span class="'),n.appendString(u.className),n.appendString('"></span>'),u.type===1&&(e|=1,i++),u.type===2&&(e|=2,r++))}n.appendString("</span>");var a=new Op(1,i+r);return a.setColumnInfo(1,i,0,0),new Ep(a,!1,e)}return n.appendString("<span><span></span></span>"),new Ep(new Op(0,0),!1,0)}return function(t,n){var i=t.fontIsMonospace,r=t.canUseHalfwidthRightwardsArrow,e=t.containsForeignElements,o=t.lineContent,s=t.len,u=t.isOverflowing,a=t.overflowingCharCount,h=t.parts,c=t.fauxIndentLength,f=t.tabSize,l=t.startVisibleColumn,v=t.containsRTL,d=t.spaceWidth,g=t.renderSpaceCharCode,p=t.renderWhitespace,w=t.renderControlCharacters,m=new Op(s+1,h.length);var b=!1,y=0,_=l,k=0,x=0,C=0;v?n.appendString('<span dir="ltr">'):n.appendString("<span>");for(var S=0,D=h.length;S<D;S++){var A=h[S],O=A.endIndex,E=A.type,M=A.containsRTL,F=p!==0&&A.isWhitespace(),L=F&&!i&&(E==="mtkw"||!e),j=y===O&&A.isPseudoAfter();if(k=0,n.appendString("<span "),M&&n.appendString('style="unicode-bidi:isolate" '),n.appendString('class="'),n.appendString(L?"mtkz":E),n.appendASCIICharCode(34),F){var R=0;{var T=y,I=_;for(;T<O;T++){var B=0|(o.charCodeAt(T)===9?f-I%f:1);R+=B,T>=c&&(I+=B)}}for(L&&(n.appendString(' style="width:'),n.appendString(String(d*R)),n.appendString('px"')),n.appendASCIICharCode(62);y<O;y++){m.setColumnInfo(y+1,S-C,k,x),C=0;var T=void 0,I=void 0;if(o.charCodeAt(y)===9){T=f-_%f|0,I=T,!r||I>1?n.appendCharCode(8594):n.appendCharCode(65515);for(var B=2;B<=I;B++)n.appendCharCode(160)}else T=2,I=1,n.appendCharCode(g),n.appendCharCode(8204);k+=T,x+=I,y>=c&&(_+=I)}}else for(n.appendASCIICharCode(62);y<O;y++){m.setColumnInfo(y+1,S-C,k,x),C=0;var R=o.charCodeAt(y);var T=1,I=1;switch(R){case 9:T=f-_%f,I=T;for(var B=1;B<=T;B++)n.appendCharCode(160);break;case 32:n.appendCharCode(160);break;case 60:n.appendString("&lt;");break;case 62:n.appendString("&gt;");break;case 38:n.appendString("&amp;");break;case 0:w?n.appendCharCode(9216):n.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:n.appendCharCode(65533);break;default:zo(R)&&I++,w&&R<32?n.appendCharCode(9216+R):w&&R===127?n.appendCharCode(9249):w&&Rp(R)?(n.appendString("[U+"),n.appendString(Tp(R)),n.appendString("]"),T=8,I=T):n.appendCharCode(R)}k+=T,x+=I,y>=c&&(_+=I)}j?C++:C=0,y>=s&&!b&&A.isPseudoAfter()&&(b=!0,m.setColumnInfo(y+1,S,k,x)),n.appendString("</span>")}return b||m.setColumnInfo(s+1,h.length-1,k,x),u&&(n.appendString('<span class="mtkoverflow">'),n.appendString(ht(0,"Show more ({0})",function(t){return t<1024?ht(0,"{0} chars",t):t<1048576?"".concat((t/1024).toFixed(1)," KB"):"".concat((t/1024/1024).toFixed(1)," MB")}(a))),n.appendString("</span>")),n.appendString("</span>"),new Ep(m,v,e)}(function(t){var n=t.lineContent;var i,r,e;t.stopRenderingLineAfter!==-1&&t.stopRenderingLineAfter<n.length?(i=!0,r=n.length-t.stopRenderingLineAfter,e=t.stopRenderingLineAfter):(i=!1,r=0,e=n.length);var o=function(t,n,i,r,e){var o=[];var s=0;r>0&&(o[s++]=new Cp(r,"",0,!1));var u=r;for(var a=0,h=i.getCount();a<h;a++){var c=i.getEndOffset(a);if(c<=r)continue;var f=i.getClassName(a);if(c>=e){var l=!!n&&Bo(t.substring(u,e));o[s++]=new Cp(e,f,0,l);break}var v=!!n&&Bo(t.substring(u,c));o[s++]=new Cp(c,f,0,v),u=c}return o}(n,t.containsRTL,t.lineTokens,t.fauxIndentLength,e);t.renderControlCharacters&&!t.isBasicASCII&&(o=function(t,n){var i=[];var r=new Cp(0,"",0,!1),e=0;for(var o=0,s=n;o<s.length;o++){var u=s[o];var a=u.endIndex;for(;e<a;e++)Rp(t.charCodeAt(e))&&(e>r.endIndex&&(r=new Cp(e,u.type,u.metadata,u.containsRTL),i.push(r)),r=new Cp(e+1,"mtkcontrol",u.metadata,!1),i.push(r));e>r.endIndex&&(r=new Cp(a,u.type,u.metadata,u.containsRTL),i.push(r))}return i}(n,o)),(t.renderWhitespace===4||t.renderWhitespace===1||t.renderWhitespace===2&&t.selectionsOnLine||t.renderWhitespace===3&&!t.continuesWithWrappedLine)&&(o=function(t,n,i,r){var e=t.continuesWithWrappedLine,o=t.fauxIndentLength,s=t.tabSize,u=t.startVisibleColumn,a=t.useMonospaceOptimizations,h=t.selectionsOnLine,c=t.renderWhitespace===1,f=t.renderWhitespace===3,l=t.renderSpaceWidth!==t.spaceWidth,v=[];var d=0,g=0,p=r[g].type,w=r[g].containsRTL,m=r[g].endIndex;var b=r.length;var y,_=!1,k=vo(n);k===-1?(_=!0,k=i,y=i):y=po(n);var x=!1,C=0,S=h&&h[C],D=u%s;for(var A=o;A<i;A++){var O=n.charCodeAt(A);var E=void 0;if(S&&A>=S.endOffset&&(C++,S=h&&h[C]),A<k||A>y)E=!0;else if(O===9)E=!0;else if(O===32)if(c)if(x)E=!0;else{var M=A+1<i?n.charCodeAt(A+1):0;E=M===32||M===9}else E=!0;else E=!1;if(E&&h&&(E=!!S&&S.startOffset<=A&&S.endOffset>A),E&&f&&(E=_||A>y),E&&w&&A>=k&&A<=y&&(E=!1),x){if(!E||!a&&D>=s){if(l)for(var M=(d>0?v[d-1].endIndex:o)+1;M<=A;M++)v[d++]=new Cp(M,"mtkw",1,!1);else v[d++]=new Cp(A,"mtkw",1,!1);D%=s}}else(A===m||E&&A>o)&&(v[d++]=new Cp(A,p,0,w),D%=s);for(O===9?D=s:zo(O)?D+=2:D++,x=E;A===m&&(g++,g<b);)p=r[g].type,w=r[g].containsRTL,m=r[g].endIndex}var F=!1;if(x)if(e&&c){var A=i>0?n.charCodeAt(i-1):0,O=i>1?n.charCodeAt(i-2):0;A===32&&O!==32&&O!==9||(F=!0)}else F=!0;if(F)if(l)for(var A=(d>0?v[d-1].endIndex:o)+1;A<=i;A++)v[d++]=new Cp(A,"mtkw",1,!1);else v[d++]=new Cp(i,"mtkw",1,!1);else v[d++]=new Cp(i,p,0,w);return v}(t,n,e,o));var s=0;if(t.lineDecorations.length>0){for(var u=0,a=t.lineDecorations.length;u<a;u++){var h=t.lineDecorations[u];h.type===3||h.type===1?s|=1:h.type===2&&(s|=2)}o=function(t,n,i,r){r.sort(yp.compare);var e=xp.normalize(t,r),o=e.length;var s=0;var u=[];var a=0,h=0;for(var c=0,f=i.length;c<f;c++){var l=i[c],v=l.endIndex,d=l.type,g=l.metadata,p=l.containsRTL;for(;s<o&&e[s].startOffset<v;){var w=e[s];if(w.startOffset>h&&(h=w.startOffset,u[a++]=new Cp(h,d,g,p)),!(w.endOffset+1<=v)){h=v,u[a++]=new Cp(h,d+" "+w.className,g|w.metadata,p);break}h=w.endOffset+1,u[a++]=new Cp(h,d+" "+w.className,g|w.metadata,p),s++}v>h&&(h=v,u[a++]=new Cp(h,d,g,p))}var m=i[i.length-1].endIndex;if(s<o&&e[s].startOffset===m)for(;s<o&&e[s].startOffset===m;){var c=e[s];u[a++]=new Cp(h,c.className,c.metadata,!1),s++}return u}(n,0,o,t.lineDecorations)}return t.containsRTL||(o=function(t,n,i){var r=0;var e=[];var o=0;if(i)for(var s=0,u=n.length;s<u;s++){var a=n[s],h=a.endIndex;if(r+50<h){var c=a.type,f=a.metadata,l=a.containsRTL;var v=-1,d=r;for(var g=r;g<h;g++)t.charCodeAt(g)===32&&(v=g),v!==-1&&g-d>=50&&(e[o++]=new Cp(v+1,c,f,l),d=v+1,v=-1);d!==h&&(e[o++]=new Cp(h,c,f,l))}else e[o++]=a;r=h}else for(var s=0,u=n.length;s<u;s++){var a=n[s],h=a.endIndex,c=h-r;if(c>50){var f=a.type,l=a.metadata,v=a.containsRTL,d=Math.ceil(c/50);for(var g=1;g<d;g++){var p=r+50*g;e[o++]=new Cp(p,f,l,v)}e[o++]=new Cp(h,f,l,v)}else e[o++]=a;r=h}return e}(n,o,!t.isBasicASCII||t.fontLigatures)),new jp(t.useMonospaceOptimizations,t.canUseHalfwidthRightwardsArrow,n,e,i,r,o,s,t.fauxIndentLength,t.tabSize,t.startVisibleColumn,t.containsRTL,t.spaceWidth,t.renderSpaceCharCode,t.renderWhitespace,t.renderControlCharacters)}(t),n)}var Fp=function(){function t(t,n,i,r){this.characterMapping=t,this.html=n,this.containsRTL=i,this.containsForeignElements=r}return t}();function Lp(t){var n=new Ml(1e4),i=Mp(t,n);return new Fp(i.characterMapping,n.build(),i.containsRTL,i.containsForeignElements)}var jp=function(){function t(t,n,i,r,e,o,s,u,a,h,c,f,l,v,d,g){this.fontIsMonospace=t,this.canUseHalfwidthRightwardsArrow=n,this.lineContent=i,this.len=r,this.isOverflowing=e,this.overflowingCharCount=o,this.parts=s,this.containsForeignElements=u,this.fauxIndentLength=a,this.tabSize=h,this.startVisibleColumn=c,this.containsRTL=f,this.spaceWidth=l,this.renderSpaceCharCode=v,this.renderWhitespace=d,this.renderControlCharacters=g}return t}();function Rp(t){return t<32?t!==9:t===127||t>=8234&&t<=8238||t>=8294&&t<=8297||t>=8206&&t<=8207||t===1564}function Tp(t){return t.toString(16).toUpperCase().padStart(4,"0")}var Ip=function(){function t(t,n,i,r){this._viewportBrand=void 0,this.top=0|t,this.left=0|n,this.width=0|i,this.height=0|r}return t}();var Bp=function(){function t(t,n){this.tabSize=t,this.data=n}return t}();var Np=function(){function t(t,n,i,r,e,o,s){this._viewLineDataBrand=void 0,this.content=t,this.continuesWithWrappedLine=n,this.minColumn=i,this.maxColumn=r,this.startVisibleColumn=e,this.tokens=o,this.inlineDecorations=s}return t}();var Pp=function(){function t(n,i,r,e,o,s,u,a,h,c){this.minColumn=n,this.maxColumn=i,this.content=r,this.continuesWithWrappedLine=e,this.isBasicASCII=t.isBasicASCII(r,s),this.containsRTL=t.containsRTL(r,this.isBasicASCII,o),this.tokens=u,this.inlineDecorations=a,this.tabSize=h,this.startVisibleColumn=c}t.isBasicASCII=function(t,n){return!n||Po(t)};t.containsRTL=function(t,n,i){return!(n||!i)&&Bo(t)};return t}();var Wp=function(){function t(t,n,i){this.range=t,this.inlineClassName=n,this.type=i}return t}();var Hp=function(){function t(t,n,i,r){this.startOffset=t,this.endOffset=n,this.inlineClassName=i,this.inlineClassNameAffectsLetterSpacing=r}t.prototype.toInlineDecoration=function(t){return new Wp(new Ir(t,this.startOffset+1,t,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)};return t}();var zp=function(){function t(t,n){this._viewModelDecorationBrand=void 0,this.range=t,this.options=n}return t}();var Up=function(){function t(t,n,i){this.color=t,this.zIndex=n,this.data=i}t.compareByRenderingProps=function(t,n){return t.zIndex===n.zIndex?t.color<n.color?-1:t.color>n.color?1:0:t.zIndex-n.zIndex};t.equals=function(t,n){return t.color===n.color&&t.zIndex===n.zIndex&&v(t.data,n.data)};t.equalsArr=function(n,i){return v(n,i,t.equals)};return t}();function Kp(t){return!function(t){return Array.isArray(t)}(t)}function Vp(t){return typeof t=="string"}function qp(t){return!Vp(t)}function Gp(t){return!t}function $p(t,n){return t.ignoreCase&&n?n.toLowerCase():n}function Jp(t){return t.replace(/[&<>'"_]/g,"-")}function Zp(t,n){return new Error("".concat(t.languageId,": ").concat(n))}function Qp(t,n,i,r,e){var o=null;return n.replace(/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,(function(n,s,u,a,h,c,f,l,v){return Gp(u)?Gp(a)?!Gp(h)&&h<r.length?$p(t,r[h]):!Gp(f)&&t&&typeof t[f]=="string"?t[f]:(o===null&&(o=e.split("."),o.unshift(e)),!Gp(c)&&c<o.length?$p(t,o[c]):""):$p(t,i):"$"}))}function Yp(t,n){var i=n;for(;i&&i.length>0;){var r=t.tokenizer[i];if(r)return r;var e=i.lastIndexOf(".");i=e<0?null:i.substr(0,e)}return null}var Xp,tw=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},nw=function(t,n){return function(i,r){n(i,r,t)}};var iw=function(){function t(t){this._maxCacheDepth=t,this._entries=Object.create(null)}t.create=function(t,n){return this._INSTANCE.create(t,n)};t.prototype.create=function(t,n){if(t!==null&&t.depth>=this._maxCacheDepth)return new rw(t,n);var i=rw.getStackElementId(t);i.length>0&&(i+="|"),i+=n;var r=this._entries[i];return r||(r=new rw(t,n),this._entries[i]=r,r)};return t}();iw._INSTANCE=new iw(5);var rw=function(){function t(t,n){this.parent=t,this.state=n,this.depth=(this.parent?this.parent.depth:0)+1}t.getStackElementId=function(t){var n="";for(;t!==null;)n.length>0&&(n+="|"),n+=t.state,t=t.parent;return n};t._equals=function(t,n){for(;t!==null&&n!==null;){if(t===n)return!0;if(t.state!==n.state)return!1;t=t.parent,n=n.parent}return t===null&&n===null};t.prototype.equals=function(n){return t._equals(this,n)};t.prototype.push=function(t){return iw.create(this,t)};t.prototype.pop=function(){return this.parent};t.prototype.popall=function(){var t=this;for(;t.parent;)t=t.parent;return t};t.prototype.switchTo=function(t){return iw.create(this.parent,t)};return t}();var ew=function(){function t(t,n){this.languageId=t,this.state=n}t.prototype.equals=function(t){return this.languageId===t.languageId&&this.state.equals(t.state)};t.prototype.clone=function(){return this.state.clone()===this.state?this:new t(this.languageId,this.state)};return t}();var ow=function(){function t(t){this._maxCacheDepth=t,this._entries=Object.create(null)}t.create=function(t,n){return this._INSTANCE.create(t,n)};t.prototype.create=function(t,n){if(n!==null)return new sw(t,n);if(t!==null&&t.depth>=this._maxCacheDepth)return new sw(t,n);var i=rw.getStackElementId(t);var r=this._entries[i];return r||(r=new sw(t,null),this._entries[i]=r,r)};return t}();ow._INSTANCE=new ow(5);var sw=function(){function t(t,n){this.stack=t,this.embeddedLanguageData=n}t.prototype.clone=function(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:ow.create(this.stack,this.embeddedLanguageData)};t.prototype.equals=function(n){return n instanceof t&&!!this.stack.equals(n.stack)&&(this.embeddedLanguageData===null&&n.embeddedLanguageData===null||this.embeddedLanguageData!==null&&n.embeddedLanguageData!==null&&this.embeddedLanguageData.equals(n.embeddedLanguageData))};return t}();var uw=function(){function t(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}t.prototype.enterLanguage=function(t){this._languageId=t};t.prototype.emit=function(t,n){this._lastTokenType===n&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=n,this._lastTokenLanguage=this._languageId,this._tokens.push(new Ur(t,n,this._languageId)))};t.prototype.nestedLanguageTokenize=function(t,n,i,r){var e=i.languageId,o=i.state,s=oe.get(e);if(!s)return this.enterLanguage(e),this.emit(r,""),o;var u=s.tokenize(t,n,o);if(r!==0)for(var a=0,h=u.tokens;a<h.length;a++){var c=h[a];this._tokens.push(new Ur(c.offset+r,c.type,c.language))}else this._tokens=this._tokens.concat(u.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,u.endState};t.prototype.finalize=function(t){return new Kr(this._tokens,t)};return t}();var aw=function(){function t(t,n){this._languageService=t,this._theme=n,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}t.prototype.enterLanguage=function(t){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(t)};t.prototype.emit=function(t,n){var i=1024|this._theme.match(this._currentLanguageId,n);this._lastTokenMetadata!==i&&(this._lastTokenMetadata=i,this._tokens.push(t),this._tokens.push(i))};t._merge=function(t,n,i){var r=t!==null?t.length:0,e=n.length,o=i!==null?i.length:0;if(r===0&&e===0&&o===0)return new Uint32Array(0);if(r===0&&e===0)return i;if(e===0&&o===0)return t;var s=new Uint32Array(r+e+o);t!==null&&s.set(t);for(var u=0;u<e;u++)s[r+u]=n[u];return i!==null&&s.set(i,r+e),s};t.prototype.nestedLanguageTokenize=function(n,i,r,e){var o=r.languageId,s=r.state,u=oe.get(o);if(!u)return this.enterLanguage(o),this.emit(e,""),s;var a=u.tokenizeEncoded(n,i,s);if(e!==0)for(var h=0,c=a.tokens.length;h<c;h+=2)a.tokens[h]+=e;return this._prependTokens=t._merge(this._prependTokens,this._tokens,a.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,a.endState};t.prototype.finalize=function(n){return new Vr(t._merge(this._prependTokens,this._tokens,null),n)};return t}();var hw=Xp=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s._configurationService=o,s._languageService=n,s._standaloneThemeService=i,s._languageId=r,s._lexer=e,s._embeddedLanguages=Object.create(null),s.embeddedLoaded=Promise.resolve(void 0);var u=!1;s._register(oe.onDidChange((function(t){if(u)return;var n=!1;for(var i=0,r=t.changedLanguages.length;i<r;i++){var e=t.changedLanguages[i];if(s._embeddedLanguages[e]){n=!0;break}}n&&(u=!0,oe.handleChange([s._languageId]),u=!1)}))),s._maxTokenizationLineLength=s._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:s._languageId}),s._register(s._configurationService.onDidChangeConfiguration((function(t){t.affectsConfiguration("editor.maxTokenizationLineLength")&&(s._maxTokenizationLineLength=s._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:s._languageId}))})));return s}n.prototype.getLoadStatus=function(){var t=[];for(var i in this._embeddedLanguages){var r=oe.get(i);if(r){if(r instanceof n){var e=r.getLoadStatus();e.loaded===!1&&t.push(e.promise)}}else oe.isResolved(i)||t.push(oe.getOrCreate(i))}return t.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(t).then((function(t){}))}};n.prototype.getInitialState=function(){var t=iw.create(null,this._lexer.start);return ow.create(t,null)};n.prototype.tokenize=function(t,n,i){if(t.length>=this._maxTokenizationLineLength)return gp(this._languageId,i);var r=new uw,e=this._tokenize(t,n,i,r);return r.finalize(e)};n.prototype.tokenizeEncoded=function(t,n,i){if(t.length>=this._maxTokenizationLineLength)return pp(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),i);var r=new aw(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),e=this._tokenize(t,n,i,r);return r.finalize(e)};n.prototype._tokenize=function(t,n,i,r){return i.embeddedLanguageData?this._nestedTokenize(t,n,i,0,r):this._myTokenize(t,n,i,0,r)};n.prototype._findLeavingNestedLanguageOffset=function(t,n){var i=this._lexer.tokenizer[n.stack.state];if(!i&&(i=Yp(this._lexer,n.stack.state),!i))throw Zp(this._lexer,"tokenizer state is not defined: "+n.stack.state);var r=-1,e=!1;for(var o=0,s=i;o<s.length;o++){var u=s[o];if(!qp(u.action)||u.action.nextEmbedded!=="@pop")continue;e=!0;var a=u.resolveRegex(n.stack.state);var h=a.source;if(h.substr(0,4)==="^(?:"&&h.substr(h.length-1,1)===")"){var c=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(h.substr(4,h.length-5),c)}var f=t.search(a);f===-1||f!==0&&u.matchOnlyAtLineStart||(r===-1||f<r)&&(r=f)}if(!e)throw Zp(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+n.stack.state);return r};n.prototype._nestedTokenize=function(t,n,i,r,e){var o=this._findLeavingNestedLanguageOffset(t,i);if(o===-1){var s=e.nestedLanguageTokenize(t,n,i.embeddedLanguageData,r);return ow.create(i.stack,new ew(i.embeddedLanguageData.languageId,s))}var u=t.substring(0,o);u.length>0&&e.nestedLanguageTokenize(u,!1,i.embeddedLanguageData,r);var a=t.substring(o);return this._myTokenize(a,n,i,r+o,e)};n.prototype._safeRuleName=function(t){return t?t.name:"(unknown)"};n.prototype._myTokenize=function(t,n,i,r,e){var o=this;e.enterLanguage(this._languageId);var s=t.length,u=n&&this._lexer.includeLF?t+"\n":t,a=u.length;var h=i.embeddedLanguageData,c=i.stack,f=0,l=null,v=!0;for(;v||f<a;){var d=f,g=c.depth,p=l?l.groups.length:0,w=c.state;var m=null,b=null,y=null,_=null,k=null;if(l){m=l.matches;var x=l.groups.shift();b=x.matched,y=x.action,_=l.rule,l.groups.length===0&&(l=null)}else{if(!v&&f>=a)break;v=!1;var x=this._lexer.tokenizer[w];if(!x&&(x=Yp(this._lexer,w),!x))throw Zp(this._lexer,"tokenizer state is not defined: "+w);var C=u.substr(f);for(var S=0,D=x;S<D.length;S++){var A=D[S];if((f===0||!A.matchOnlyAtLineStart)&&(m=C.match(A.resolveRegex(w)),m)){b=m[0],y=A.action;break}}}if(m||(m=[""],b=""),y||(f<a&&(m=[u.charAt(f)],b=m[0]),y=this._lexer.defaultToken),b===null)break;for(f+=b.length;Kp(y)&&qp(y)&&y.test;)y=y.test(b,m,w,f===a);var O=null;if(typeof y=="string"||Array.isArray(y))O=y;else if(y.group)O=y.group;else if(y.token!==null&&y.token!==void 0){if(O=y.tokenSubst?Qp(this._lexer,y.token,b,m,w):y.token,y.nextEmbedded)if(y.nextEmbedded==="@pop"){if(!h)throw Zp(this._lexer,"cannot pop embedded language if not inside one");h=null}else{if(h)throw Zp(this._lexer,"cannot enter embedded language from within an embedded language");k=Qp(this._lexer,y.nextEmbedded,b,m,w)}if(y.goBack&&(f=Math.max(0,f-y.goBack)),y.switchTo&&typeof y.switchTo=="string"){var x=Qp(this._lexer,y.switchTo,b,m,w);if(x[0]==="@"&&(x=x.substr(1)),!Yp(this._lexer,x))throw Zp(this._lexer,"trying to switch to a state '"+x+"' that is undefined in rule: "+this._safeRuleName(_));c=c.switchTo(x)}else{if(y.transform&&typeof y.transform=="function")throw Zp(this._lexer,"action.transform not supported");if(y.next)if(y.next==="@push"){if(c.depth>=this._lexer.maxStack)throw Zp(this._lexer,"maximum tokenizer stack size reached: ["+c.state+","+c.parent.state+",...]");c=c.push(w)}else if(y.next==="@pop"){if(c.depth<=1)throw Zp(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(_));c=c.pop()}else if(y.next==="@popall")c=c.popall();else{var x=Qp(this._lexer,y.next,b,m,w);if(x[0]==="@"&&(x=x.substr(1)),!Yp(this._lexer,x))throw Zp(this._lexer,"trying to set a next state '"+x+"' that is undefined in rule: "+this._safeRuleName(_));c=c.push(x)}}y.log&&typeof y.log=="string"&&(M=this._lexer,F=this._lexer.languageId+": "+Qp(this._lexer,y.log,b,m,w),console.log("".concat(M.languageId,": ").concat(F)))}if(O===null)throw Zp(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(_));var E=function(i){var s=o._languageService.getLanguageIdByLanguageName(i)||o._languageService.getLanguageIdByMimeType(i)||i,u=o._getNestedEmbeddedLanguageData(s);if(f<a){var h=t.substr(f);return o._nestedTokenize(h,n,ow.create(c,u),r+f,e)}return ow.create(c,u)};if(Array.isArray(O)){if(l&&l.groups.length>0)throw Zp(this._lexer,"groups cannot be nested: "+this._safeRuleName(_));if(m.length!==O.length+1)throw Zp(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(_));var x=0;for(var C=1;C<m.length;C++)x+=m[C].length;if(x!==b.length)throw Zp(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(_));l={rule:_,matches:m,groups:[]};for(var C=0;C<O.length;C++)l.groups[C]={action:O[C],matched:m[C+1]};f-=b.length}else{{if(O==="@rematch"&&(f-=b.length,b="",m=null,O="",k!==null))return E(k);if(b.length===0){if(a===0||g!==c.depth||w!==c.state||(l?l.groups.length:0)!==p)continue;throw Zp(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(_))}var x=null;if(Vp(O)&&O.indexOf("@brackets")===0){var C=O.substr(9),A=cw(this._lexer,b);if(!A)throw Zp(this._lexer,"@brackets token returned but no bracket defined as: "+b);x=Jp(A.token+C)}else x=Jp(O===""?"":O+this._lexer.tokenPostfix);d<s&&e.emit(d+r,x)}if(k!==null)return E(k)}}var M,F;return ow.create(c,h)};n.prototype._getNestedEmbeddedLanguageData=function(t){if(!this._languageService.isRegisteredLanguageId(t))return new ew(t,dp);t!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(t),oe.getOrCreate(t),this._embeddedLanguages[t]=!0);var n=oe.get(t);return new ew(t,n?n.getInitialState():dp)};return n}(ci);function cw(t,n){if(!n)return null;n=$p(t,n);var i=t.brackets;for(var r=0,e=i;r<e.length;r++){var o=e[r];if(o.open===n)return{token:o.token,bracketType:1};if(o.close===n)return{token:o.token,bracketType:-1}}return null}hw=Xp=tw([nw(4,Kl)],hw);var fw=rl("standaloneColorizer",{createHTML:function(t){return t}});var lw=function(){function t(){}t.colorizeElement=function(t,n,i,r){var e=(r=r||{}).theme||"vs",o=r.mimeType||i.getAttribute("lang")||i.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();var s=n.getLanguageIdByMimeType(o)||o;t.setTheme(e);var u=i.firstChild?i.firstChild.nodeValue:"";return i.className+=" "+e,this.colorize(n,u||"",s,r).then((function(t){var n;var r=(n=fw==null?void 0:fw.createHTML(t))!==null&&n!==void 0?n:t;i.innerHTML=r}),(function(t){return console.error(t)}))};t.colorize=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:e=t.languageIdCodec;o=4;r&&typeof r.tabSize=="number"&&(o=r.tabSize),Vo(n)&&(n=n.substr(1));s=lo(n);if(!t.isRegisteredLanguageId(i))return[2,vw(s,o,e)];return[4,oe.getOrCreate(i)];case 1:u=a.sent();return[2,u?function(t,n,i,r){return new Promise((function(e,o){var s=function(){var u=function(t,n,i,r){var e=[],o=i.getInitialState();for(var s=0,u=t.length;s<u;s++){var a=t[s],h=i.tokenizeEncoded(a,!0,o);mp.convertToEndOffset(h.tokens,a.length);var c=new mp(h.tokens,a,r),f=Pp.isBasicASCII(a,!0),l=Pp.containsRTL(a,f,!0),v=Lp(new Dp(!1,!0,a,!1,f,l,0,c.inflate(),[],n,0,0,0,0,-1,"none",!1,!1,null));e=e.concat(v.html),e.push("<br/>"),o=h.endState}return e.join("")}(t,n,i,r);if(i instanceof hw){var a=i.getLoadStatus();if(a.loaded===!1)return void a.promise.then(s,o)}e(u)};s()}))}(s,o,u,e):vw(s,o,e)]}}))}))};t.colorizeLine=function(t,n,i,r,e){if(e===void 0){e=4}var o=Pp.isBasicASCII(t,n),s=Pp.containsRTL(t,o,i);return Lp(new Dp(!1,!0,t,!1,o,s,0,r,[],e,0,0,0,0,-1,"none",!1,!1,null)).html};t.colorizeModelLine=function(t,n,i){if(i===void 0){i=4}var r=t.getLineContent(n);t.tokenization.forceTokenization(n);var e=t.tokenization.getLineTokens(n).inflate();return this.colorizeLine(r,t.mightContainNonBasicASCII(),t.mightContainRTL(),e,i)};return t}();function vw(t,n,i){var r=[];var e=new Uint32Array(2);e[0]=0,e[1]=33587200;for(var o=0,s=t.length;o<s;o++){var u=t[o];e[0]=u.length;var a=new mp(e,u,i),h=Pp.isBasicASCII(u,!0),c=Pp.containsRTL(u,h,!0),f=Lp(new Dp(!1,!0,u,!1,h,c,0,a,[],n,0,0,0,0,-1,"none",!1,!1,null));r=r.concat(f.html),r.push("<br/>")}return r.join("")}var dw=2e4;var gw,pw,ww,mw,bw;function yw(t){gw&&(pw.textContent!==t?(pa(ww),kw(pw,t)):(pa(pw),kw(ww,t)))}function _w(t){gw&&(mw.textContent!==t?(pa(bw),kw(mw,t)):(pa(mw),kw(bw,t)))}function kw(t,n){pa(t),n.length>dw&&(n=n.substr(0,dw)),t.textContent=n,t.style.visibility="hidden",t.style.visibility="visible"}var xw=Zh("markerDecorationsService");var Cw=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Sw=function(t,n){return function(i,r){n(i,r,t)}};var Dw=function(){function t(t,n){}t.prototype.dispose=function(){};return t}();Dw.ID="editor.contrib.markerDecorations",Dw=Cw([Sw(1,xw)],Dw),Pf(Dw.ID,Dw,0);var Aw=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._onDidChange=r._register(new ki),r.onDidChange=r._onDidChange.event,r._referenceDomElement=n,r._width=-1,r._height=-1,r._resizeObserver=null,r.measureReferenceDomElement(!1,i);return r}n.prototype.dispose=function(){this.stopObserving(),t.prototype.dispose.call(this)};n.prototype.getWidth=function(){return this._width};n.prototype.getHeight=function(){return this._height};n.prototype.startObserving=function(){var t=this;if(!this._resizeObserver&&this._referenceDomElement){var n=null;var i=function(){n?t.observe({width:n.width,height:n.height}):t.observe()};var r=!1,e=!1;var o=function(){if(r&&!e)try{r=!1,e=!0,i()}finally{Sa(sa(t._referenceDomElement),(function(){e=!1,o()}))}};this._resizeObserver=new ResizeObserver((function(t){n=t&&t[0]&&t[0].contentRect?{width:t[0].contentRect.width,height:t[0].contentRect.height}:null,r=!0,o()})),this._resizeObserver.observe(this._referenceDomElement)}};n.prototype.stopObserving=function(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)};n.prototype.observe=function(t){this.measureReferenceDomElement(!0,t)};n.prototype.measureReferenceDomElement=function(t,n){var i=0,r=0;n?(i=n.width,r=n.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,r=this._referenceDomElement.clientHeight),i=Math.max(5,i),r=Math.max(5,r),this._width===i&&this._height===r||(this._width=i,this._height=r,t&&this._onDidChange.fire())};return n}(ci);var Ow=function(){function t(t,n){this.key=t,this.migrate=n}t.prototype.apply=function(n){var i=t._read(n,this.key);this.migrate(i,(function(i){return t._read(n,i)}),(function(i,r){return t._write(n,i,r)}))};t._read=function(t,n){if(t===void 0)return;var i=n.indexOf(".");if(i>=0){var r=n.substring(0,i);return this._read(t[r],n.substring(i+1))}return t[n]};t._write=function(t,n,i){var r=n.indexOf(".");if(r>=0){var e=n.substring(0,r);return t[e]=t[e]||{},void this._write(t[e],n.substring(r+1),i)}t[n]=i};return t}();function Ew(t,n){Ow.items.push(new Ow(t,n))}function Mw(t,n){Ew(t,(function(i,r,e){if(i!==void 0){for(var o=0,s=n;o<s.length;o++){var u=s[o],a=u[0],h=u[1];if(i===a)return void e(t,h)}}}))}Ow.items=[],Mw("wordWrap",[[!0,"on"],[!1,"off"]]),Mw("lineNumbers",[[!0,"on"],[!1,"off"]]),Mw("cursorBlinking",[["visible","solid"]]),Mw("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),Mw("renderLineHighlight",[[!0,"line"],[!1,"none"]]),Mw("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),Mw("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),Mw("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),Mw("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),Mw("autoIndent",[[!1,"advanced"],[!0,"full"]]),Mw("matchBrackets",[[!0,"always"],[!1,"never"]]),Mw("renderFinalNewline",[[!0,"on"],[!1,"off"]]),Mw("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),Mw("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]),Mw("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]),Ew("autoClosingBrackets",(function(t,n,i){t===!1&&(i("autoClosingBrackets","never"),n("autoClosingQuotes")===void 0&&i("autoClosingQuotes","never"),n("autoSurround")===void 0&&i("autoSurround","never"))})),Ew("renderIndentGuides",(function(t,n,i){t!==void 0&&(i("renderIndentGuides",void 0),n("guides.indentation")===void 0&&i("guides.indentation",!!t))})),Ew("highlightActiveIndentGuide",(function(t,n,i){t!==void 0&&(i("highlightActiveIndentGuide",void 0),n("guides.highlightActiveIndentation")===void 0&&i("guides.highlightActiveIndentation",!!t))}));var Fw={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Ew("suggest.filteredTypes",(function(t,n,i){if(t&&typeof t=="object"){for(var r=0,e=Object.entries(Fw);r<e.length;r++){var o=e[r];t[o[0]]===!1&&n("suggest.".concat(o[1]))===void 0&&i("suggest.".concat(o[1]),!1)}i("suggest.filteredTypes",void 0)}})),Ew("quickSuggestions",(function(t,n,i){if(typeof t=="boolean"){var r=t?"on":"off";i("quickSuggestions",{comments:r,strings:r,other:r})}})),Ew("experimental.stickyScroll.enabled",(function(t,n,i){typeof t=="boolean"&&(i("experimental.stickyScroll.enabled",void 0),n("stickyScroll.enabled")===void 0&&i("stickyScroll.enabled",t))})),Ew("experimental.stickyScroll.maxLineCount",(function(t,n,i){typeof t=="number"&&(i("experimental.stickyScroll.maxLineCount",void 0),n("stickyScroll.maxLineCount")===void 0&&i("stickyScroll.maxLineCount",t))})),Ew("codeActionsOnSave",(function(t,n,i){if(t&&typeof t=="object"){var r=!1;var e={};for(var o=0,s=Object.entries(t);o<s.length;o++){var u=s[o];typeof u[1]=="boolean"?(r=!0,e[u[0]]=u[1]?"explicit":"never"):e[u[0]]=u[1]}r&&i("codeActionsOnSave",e)}})),Ew("codeActionWidget.includeNearbyQuickfixes",(function(t,n,i){typeof t=="boolean"&&(i("codeActionWidget.includeNearbyQuickfixes",void 0),n("codeActionWidget.includeNearbyQuickFixes")===void 0&&i("codeActionWidget.includeNearbyQuickFixes",t))})),Ew("lightbulb.enabled",(function(t,n,i){typeof t=="boolean"&&i("lightbulb.enabled",t?void 0:"off")}));var Lw=new(function(){function t(){this._tabFocus=!1,this._onDidChangeTabFocus=new ki,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}t.prototype.getTabFocusMode=function(){return this._tabFocus};t.prototype.setTabFocusMode=function(t){this._tabFocus=t,this._onDidChangeTabFocus.fire(this._tabFocus)};return t}()),jw=Zh("accessibilityService"),Rw=new qc("accessibilityModeEnabled",!1);var Tw=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Iw=function(t,n){return function(i,r){n(i,r,t)}};var Bw=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._accessibilityService=e,o._onDidChange=o._register(new ki),o.onDidChange=o._onDidChange.event,o._onDidChangeFast=o._register(new ki),o.onDidChangeFast=o._onDidChangeFast.event,o._isDominatedByLongLines=!1,o._viewLineCount=1,o._lineNumbersDigitCount=1,o._reservedHeight=0,o._glyphMarginDecorationLaneCount=1,o._computeOptionsMemory=new hn,o.isSimpleWidget=n,o._containerObserver=o._register(new Aw(r,i.dimension)),o._targetWindowId=sa(r).vscodeWindowId,o._rawOptions=zw(i),o._validatedOptions=Hw.validateOptions(o._rawOptions),o.options=o._computeOptions(),o.options.get(13)&&o._containerObserver.startObserving(),o._register(zh.onDidChangeZoomLevel((function(){return o._recomputeOptions()}))),o._register(Lw.onDidChangeTabFocus((function(){return o._recomputeOptions()}))),o._register(o._containerObserver.onDidChange((function(){return o._recomputeOptions()}))),o._register(Gh.onDidChange((function(){return o._recomputeOptions()}))),o._register(Th.getInstance(sa(r)).onDidChange((function(){return o._recomputeOptions()}))),o._register(o._accessibilityService.onDidChangeScreenReaderOptimized((function(){return o._recomputeOptions()})));return o}n.prototype._recomputeOptions=function(){var t=this._computeOptions(),n=Hw.checkEquals(this.options,t);n!==null&&(this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n))};n.prototype._computeOptions=function(){var t=this._readEnvConfiguration(),n=Kh.createFromValidatedSettings(this._validatedOptions,t.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(n),r={memory:this._computeOptionsMemory,outerWidth:t.outerWidth,outerHeight:t.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:t.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:t.emptySelectionClipboard,pixelRatio:t.pixelRatio,tabFocusMode:Lw.getTabFocusMode(),accessibilitySupport:t.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Hw.computeOptions(this._validatedOptions,r)};n.prototype._readEnvConfiguration=function(){return{extraEditorClassName:Nw(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:rs||is,pixelRatio:Th.getInstance(fa(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}};n.prototype._readFontInfo=function(t){return Gh.readFontInfo(fa(this._targetWindowId,!0).window,t)};n.prototype.getRawOptions=function(){return this._rawOptions};n.prototype.updateOptions=function(t){var n=zw(t);Hw.applyUpdate(this._rawOptions,n)&&(this._validatedOptions=Hw.validateOptions(this._rawOptions),this._recomputeOptions())};n.prototype.observeContainer=function(t){this._containerObserver.observe(t)};n.prototype.setIsDominatedByLongLines=function(t){this._isDominatedByLongLines!==t&&(this._isDominatedByLongLines=t,this._recomputeOptions())};n.prototype.setModelLineCount=function(t){var n=function(t){var n=0;for(;t;)t=Math.floor(t/10),n++;return n||1}(t);this._lineNumbersDigitCount!==n&&(this._lineNumbersDigitCount=n,this._recomputeOptions())};n.prototype.setViewLineCount=function(t){this._viewLineCount!==t&&(this._viewLineCount=t,this._recomputeOptions())};n.prototype.setReservedHeight=function(t){this._reservedHeight!==t&&(this._reservedHeight=t,this._recomputeOptions())};n.prototype.setGlyphMarginDecorationLaneCount=function(t){this._glyphMarginDecorationLaneCount!==t&&(this._glyphMarginDecorationLaneCount=t,this._recomputeOptions())};return n}(ci);function Nw(){var t="";return os||ss||(t+="no-user-select "),os&&(t+="no-minimap-shadow ",t+="enable-user-select "),Ft&&(t+="mac "),t}Bw=Tw([Iw(3,jw)],Bw);var Pw=function(){function t(){this._values=[]}t.prototype._read=function(t){return this._values[t]};t.prototype.get=function(t){return this._values[t]};t.prototype._write=function(t,n){this._values[t]=n};return t}();var Ww=function(){function t(){this._values=[]}t.prototype._read=function(t){if(t>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[t]};t.prototype.get=function(t){return this._read(t)};t.prototype._write=function(t,n){this._values[t]=n};return t}();var Hw=function(){function t(){}t.validateOptions=function(t){var n=new Pw;for(var i=0,r=Un;i<r.length;i++){var e=r[i];var o=e.name==="_never_"?void 0:t[e.name];n._write(e.id,e.validate(o))}return n};t.computeOptions=function(t,n){var i=new Ww;for(var r=0,e=Un;r<e.length;r++){var o=e[r];i._write(o.id,o.compute(n,i,t._read(o.id)))}return i};t._deepEquals=function(n,i){if(typeof n!="object"||typeof i!="object"||!n||!i)return n===i;if(Array.isArray(n)||Array.isArray(i))return!(!Array.isArray(n)||!Array.isArray(i))&&v(n,i);if(Object.keys(n).length!==Object.keys(i).length)return!1;for(var r in n)if(!t._deepEquals(n[r],i[r]))return!1;return!0};t.checkEquals=function(n,i){var r=[];var e=!1;for(var o=0,s=Un;o<s.length;o++){var u=s[o];var a=!t._deepEquals(n._read(u.id),i._read(u.id));r[u.id]=a,a&&(e=!0)}return e?new an(r):null};t.applyUpdate=function(t,n){var i=!1;for(var r=0,e=Un;r<e.length;r++){var o=e[r];if(n.hasOwnProperty(o.name)){var s=o.applyUpdate(t[o.name],n[o.name]);t[o.name]=s.newValue,i=i||s.didChange}}return i};return t}();function zw(t){var n=tt(t);return function(t){Ow.items.forEach((function(n){return n.apply(t)}))}(n),n}var Uw;(function(t){var n={total:0,min:Number.MAX_VALUE,max:0},i=__assign({},n),r=__assign({},n),e=__assign({},n);var o=0;var s={keydown:0,input:0,render:0};function u(){s.keydown===1&&(performance.mark("keydown/end"),s.keydown=2)}function a(){performance.mark("input/start"),s.input=1,f()}function h(){s.input===1&&(performance.mark("input/end"),s.input=2)}function c(){s.render===1&&(performance.mark("render/end"),s.render=2)}function f(){setTimeout(l)}function l(){s.keydown===2&&s.input===2&&s.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),v("keydown",n),v("input",i),v("render",r),v("inputlatency",e),o++,performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),s.keydown=0,s.input=0,s.render=0)}function v(t,n){var i=performance.getEntriesByName(t)[0].duration;n.total+=i,n.min=Math.min(n.min,i),n.max=Math.max(n.max,i)}function d(t){return{average:t.total/o,max:t.max,min:t.min}}function g(t){t.total=0,t.min=Number.MAX_VALUE,t.max=0}t.onKeyDown=function(){l(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),s.keydown=1,queueMicrotask(u)},t.onBeforeInput=a,t.onInput=function(){s.input===0&&a(),queueMicrotask(h)},t.onKeyUp=function(){l()},t.onSelectionChange=function(){l()},t.onRenderStart=function(){s.keydown===2&&s.input===2&&s.render===0&&(performance.mark("render/start"),s.render=1,queueMicrotask(c),f())},t.getAndClearMeasurements=function(){if(o===0)return;var t={keydown:d(n),input:d(i),render:d(r),total:d(e),sampleCount:o};return g(n),g(i),g(r),g(e),o=0,t}})(Uw||(Uw={}));var Kw=function(){function t(){this._hooks=new hi,this._pointerMoveCallback=null,this._onStopCallback=null}t.prototype.dispose=function(){this.stopMonitoring(!1),this._hooks.dispose()};t.prototype.stopMonitoring=function(t,n){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;var i=this._onStopCallback;this._onStopCallback=null,t&&i&&i(n)};t.prototype.isMonitoring=function(){return!!this._pointerMoveCallback};t.prototype.startMonitoring=function(t,n,i,r,e){var o=this;this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=r,this._onStopCallback=e;var s=t;try{t.setPointerCapture(n),this._hooks.add(ai((function(){try{t.releasePointerCapture(n)}catch(t){}})))}catch(n){s=sa(t)}this._hooks.add(ma(s,ah.POINTER_MOVE,(function(t){t.buttons===i?(t.preventDefault(),o._pointerMoveCallback(t)):o.stopMonitoring(!0)}))),this._hooks.add(ma(s,ah.POINTER_UP,(function(t){return o.stopMonitoring(!0)})))};return t}();function Vw(t){return"--vscode-".concat(t.replace(/\./g,"-"))}function qw(t){return"var(".concat(Vw(t),")")}var Gw="base.contributions.colors",$w=new(function(){function t(){this._onDidChangeSchema=new ki,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}t.prototype.registerColor=function(t,n,i,r,e){if(r===void 0){r=!1}var o={id:t,description:i,defaults:n,needsTransparency:r,deprecationMessage:e};this.colorsById[t]=o;var s={type:"string",description:i,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return e&&(s.deprecationMessage=e),r&&(s.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",s.patternErrorMessage="This color must be transparent or it will obscure content"),this.colorSchema.properties[t]=s,this.colorReferenceSchema.enum.push(t),this.colorReferenceSchema.enumDescriptions.push(i),this._onDidChangeSchema.fire(),t};t.prototype.getColors=function(){var t=this;return Object.keys(this.colorsById).map((function(n){return t.colorsById[n]}))};t.prototype.resolveDefaultColor=function(t,n){var i=this.colorsById[t];if(i&&i.defaults)return nm(i.defaults[n.type],n)};t.prototype.getColorSchema=function(){return this.colorSchema};t.prototype.toString=function(){var t=this;return Object.keys(this.colorsById).sort((function(t,n){var i=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return i!==r?i-r:t.localeCompare(n)})).map((function(n){return"- `".concat(n,"`: ").concat(t.colorsById[n].description)})).join("\n")};return t}());function Jw(t,n,i,r,e){return $w.registerColor(t,n,i,r,e)}function Zw(t,n){return{op:0,value:t,factor:n}}function Qw(t,n){return{op:1,value:t,factor:n}}function Yw(t,n){return{op:2,value:t,factor:n}}function Xw(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return{op:4,values:t}}function tm(t,n,i,r){return{op:5,value:t,background:n,factor:i,transparency:r}}function nm(t,n){if(t!==null)return typeof t=="string"?t[0]==="#"?Ig.fromHex(t):n.getColor(t):t instanceof Ig?t:typeof t=="object"?function(t,n){var i,r,e,o;switch(t.op){case 0:return(i=nm(t.value,n))===null||i===void 0?void 0:i.darken(t.factor);case 1:return(r=nm(t.value,n))===null||r===void 0?void 0:r.lighten(t.factor);case 2:return(e=nm(t.value,n))===null||e===void 0?void 0:e.transparent(t.factor);case 3:{var s=nm(t.background,n);return s?(o=nm(t.value,n))===null||o===void 0?void 0:o.makeOpaque(s):nm(t.value,n)}case 4:for(var u=0,a=t.values;u<a.length;u++){var s=a[u];var h=nm(s,n);if(h)return h}return;case 6:return nm(n.defines(t.if)?t.then:t.else,n);case 5:{var s=nm(t.value,n);if(!s)return;var h=nm(t.background,n);return h?s.isDarkerThan(h)?Ig.getLighterColor(s,h,t.factor).transparent(t.transparency):Ig.getDarkerColor(s,h,t.factor).transparent(t.transparency):s.transparent(t.factor*t.transparency)}default:throw tf()}}(t,n):void 0}of.add(Gw,$w);var im="vscode://schemas/workbench-colors",rm=of.as(iv);rm.registerSchema(im,$w.getColorSchema());var em=new Ts((function(){return rm.notifySchemaChanged(im)}),200);$w.onDidChangeSchema((function(){em.isScheduled()||em.schedule()}));var om=Jw("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},ht(0,"Overall foreground color. This color is only used if not overridden by a component."));Jw("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},ht(0,"Overall foreground for disabled elements. This color is only used if not overridden by a component.")),Jw("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},ht(0,"Overall foreground color for error messages. This color is only used if not overridden by a component.")),Jw("descriptionForeground",{light:"#717171",dark:Yw(om,.7),hcDark:Yw(om,.7),hcLight:Yw(om,.7)},ht(0,"Foreground color for description text providing additional information, for example for a label."));var sm=Jw("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},ht(0,"The default color for icons in the workbench.")),um=Jw("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},ht(0,"Overall border color for focused elements. This color is only used if not overridden by a component.")),am=Jw("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},ht(0,"An extra border around elements to separate them from others for greater contrast.")),hm=Jw("contrastActiveBorder",{light:null,dark:null,hcDark:um,hcLight:um},ht(0,"An extra border around active elements to separate them from others for greater contrast."));Jw("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},ht(0,"The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));var cm=Jw("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},ht(0,"Foreground color for links in text."));Jw("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},ht(0,"Foreground color for links in text when clicked on and on mouse hover.")),Jw("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:Ig.black,hcLight:"#292929"},ht(0,"Color for text separators.")),Jw("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},ht(0,"Foreground color for preformatted text segments.")),Jw("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},ht(0,"Background color for preformatted text segments.")),Jw("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},ht(0,"Background color for block quotes in text.")),Jw("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:Ig.white,hcLight:"#292929"},ht(0,"Border color for block quotes in text.")),Jw("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:Ig.black,hcLight:"#F2F2F2"},ht(0,"Background color for code blocks in text.")),Jw("sash.hoverBorder",{dark:um,light:um,hcDark:um,hcLight:um},ht(0,"Border color of active sashes."));var fm=Jw("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:Ig.black,hcLight:"#0F4A85"},ht(0,"Badge background color. Badges are small information labels, e.g. for search results count.")),lm=Jw("badge.foreground",{dark:Ig.white,light:"#333",hcDark:Ig.white,hcLight:Ig.white},ht(0,"Badge foreground color. Badges are small information labels, e.g. for search results count.")),vm=Jw("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},ht(0,"Scrollbar shadow to indicate that the view is scrolled.")),dm=Jw("scrollbarSlider.background",{dark:Ig.fromHex("#797979").transparent(.4),light:Ig.fromHex("#646464").transparent(.4),hcDark:Yw(am,.6),hcLight:Yw(am,.4)},ht(0,"Scrollbar slider background color.")),gm=Jw("scrollbarSlider.hoverBackground",{dark:Ig.fromHex("#646464").transparent(.7),light:Ig.fromHex("#646464").transparent(.7),hcDark:Yw(am,.8),hcLight:Yw(am,.8)},ht(0,"Scrollbar slider background color when hovering.")),pm=Jw("scrollbarSlider.activeBackground",{dark:Ig.fromHex("#BFBFBF").transparent(.4),light:Ig.fromHex("#000000").transparent(.6),hcDark:am,hcLight:am},ht(0,"Scrollbar slider background color when clicked on.")),wm=Jw("progressBar.background",{dark:Ig.fromHex("#0E70C0"),light:Ig.fromHex("#0E70C0"),hcDark:am,hcLight:am},ht(0,"Background color of the progress bar that can show for long running operations.")),mm=Jw("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:Ig.black,hcLight:Ig.white},ht(0,"Editor background color.")),bm=Jw("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:Ig.white,hcLight:om},ht(0,"Editor default foreground color."));Jw("editorStickyScroll.background",{light:mm,dark:mm,hcDark:mm,hcLight:mm},ht(0,"Background color of sticky scroll in the editor")),Jw("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:Ig.fromHex("#0F4A85").transparent(.1)},ht(0,"Background color of sticky scroll on hover in the editor")),Jw("editorStickyScroll.border",{dark:null,light:null,hcDark:am,hcLight:am},ht(0,"Border color of sticky scroll in the editor")),Jw("editorStickyScroll.shadow",{dark:vm,light:vm,hcDark:vm,hcLight:vm},ht(0," Shadow color of sticky scroll in the editor"));var ym=Jw("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:Ig.white},ht(0,"Background color of editor widgets, such as find/replace.")),_m=Jw("editorWidget.foreground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"Foreground color of editor widgets, such as find/replace.")),km=Jw("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:am,hcLight:am},ht(0,"Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));Jw("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},ht(0,"Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),Jw("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);var xm=Jw("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},ht(0,"Foreground color of error squigglies in the editor.")),Cm=Jw("editorError.border",{dark:null,light:null,hcDark:Ig.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},ht(0,"If set, color of double underlines for errors in the editor.")),Sm=Jw("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Dm=Jw("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},ht(0,"Foreground color of warning squigglies in the editor.")),Am=Jw("editorWarning.border",{dark:null,light:null,hcDark:Ig.fromHex("#FFCC00").transparent(.8),hcLight:Ig.fromHex("#FFCC00").transparent(.8)},ht(0,"If set, color of double underlines for warnings in the editor."));Jw("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);var Om=Jw("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},ht(0,"Foreground color of info squigglies in the editor.")),Em=Jw("editorInfo.border",{dark:null,light:null,hcDark:Ig.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},ht(0,"If set, color of double underlines for infos in the editor.")),Mm=Jw("editorHint.foreground",{dark:Ig.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},ht(0,"Foreground color of hint squigglies in the editor."));Jw("editorHint.border",{dark:null,light:null,hcDark:Ig.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},ht(0,"If set, color of double underlines for hints in the editor."));var Fm=Jw("editorLink.activeForeground",{dark:"#4E94CE",light:Ig.blue,hcDark:Ig.cyan,hcLight:"#292929"},ht(0,"Color of active links.")),Lm=Jw("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},ht(0,"Color of the editor selection.")),jm=Jw("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:Ig.white},ht(0,"Color of the selected text for high contrast.")),Rm=Jw("editor.inactiveSelectionBackground",{light:Yw(Lm,.5),dark:Yw(Lm,.5),hcDark:Yw(Lm,.7),hcLight:Yw(Lm,.5)},ht(0,"Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Tm=Jw("editor.selectionHighlightBackground",{light:tm(Lm,mm,.3,.6),dark:tm(Lm,mm,.3,.6),hcDark:null,hcLight:null},ht(0,"Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);Jw("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:hm,hcLight:hm},ht(0,"Border color for regions with the same content as the selection.")),Jw("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},ht(0,"Color of the current search match."));var Im=Jw("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},ht(0,"Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0);Jw("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},ht(0,"Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Jw("editor.findMatchBorder",{light:null,dark:null,hcDark:hm,hcLight:hm},ht(0,"Border color of the current search match."));var Bm=Jw("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:hm,hcLight:hm},ht(0,"Border color of the other search matches.")),Nm=Jw("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Yw(hm,.4),hcLight:Yw(hm,.4)},ht(0,"Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);Jw("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},ht(0,"Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);var Pm=Jw("editorHoverWidget.background",{light:ym,dark:ym,hcDark:ym,hcLight:ym},ht(0,"Background color of the editor hover."));Jw("editorHoverWidget.foreground",{light:_m,dark:_m,hcDark:_m,hcLight:_m},ht(0,"Foreground color of the editor hover."));var Wm=Jw("editorHoverWidget.border",{light:km,dark:km,hcDark:km,hcLight:km},ht(0,"Border color of the editor hover."));Jw("editorHoverWidget.statusBarBackground",{dark:Qw(Pm,.2),light:Zw(Pm,.05),hcDark:ym,hcLight:ym},ht(0,"Background color of the editor hover status bar."));var Hm=Jw("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:Ig.white,hcLight:Ig.black},ht(0,"Foreground color of inline hints")),zm=Jw("editorInlayHint.background",{dark:Yw(fm,.1),light:Yw(fm,.1),hcDark:Yw(Ig.white,.1),hcLight:Yw(fm,.1)},ht(0,"Background color of inline hints")),Um=Jw("editorInlayHint.typeForeground",{dark:Hm,light:Hm,hcDark:Hm,hcLight:Hm},ht(0,"Foreground color of inline hints for types")),Km=Jw("editorInlayHint.typeBackground",{dark:zm,light:zm,hcDark:zm,hcLight:zm},ht(0,"Background color of inline hints for types")),Vm=Jw("editorInlayHint.parameterForeground",{dark:Hm,light:Hm,hcDark:Hm,hcLight:Hm},ht(0,"Foreground color of inline hints for parameters")),qm=Jw("editorInlayHint.parameterBackground",{dark:zm,light:zm,hcDark:zm,hcLight:zm},ht(0,"Background color of inline hints for parameters")),Gm=Jw("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},ht(0,"The color used for the lightbulb actions icon."));Jw("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},ht(0,"The color used for the lightbulb auto fix actions icon.")),Jw("editorLightBulbAi.foreground",{dark:Gm,light:Gm,hcDark:Gm,hcLight:Gm},ht(0,"The color used for the lightbulb AI icon.")),Jw("editor.snippetTabstopHighlightBackground",{dark:new Ig(new jg(124,124,124,.3)),light:new Ig(new jg(10,50,100,.2)),hcDark:new Ig(new jg(124,124,124,.3)),hcLight:new Ig(new jg(10,50,100,.2))},ht(0,"Highlight background color of a snippet tabstop.")),Jw("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Highlight border color of a snippet tabstop.")),Jw("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Highlight background color of the final tabstop of a snippet.")),Jw("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Ig(new jg(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},ht(0,"Highlight border color of the final tabstop of a snippet."));var $m=new Ig(new jg(155,185,85,.2)),Jm=new Ig(new jg(255,0,0,.2)),Zm=Jw("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},ht(0,"Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Qm=Jw("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},ht(0,"Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);Jw("diffEditor.insertedLineBackground",{dark:$m,light:$m,hcDark:null,hcLight:null},ht(0,"Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Jw("diffEditor.removedLineBackground",{dark:Jm,light:Jm,hcDark:null,hcLight:null},ht(0,"Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Jw("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Background color for the margin where lines got inserted.")),Jw("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Background color for the margin where lines got removed."));var Ym=Jw("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Diff overview ruler foreground for inserted content.")),Xm=Jw("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Diff overview ruler foreground for removed content."));Jw("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},ht(0,"Outline color for the text that got inserted.")),Jw("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},ht(0,"Outline color for text that got removed.")),Jw("diffEditor.border",{dark:null,light:null,hcDark:am,hcLight:am},ht(0,"Border color between the two text editors.")),Jw("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},ht(0,"Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),Jw("diffEditor.unchangedRegionBackground",{dark:"sideBar.background",light:"sideBar.background",hcDark:"sideBar.background",hcLight:"sideBar.background"},ht(0,"The background color of unchanged blocks in the diff editor.")),Jw("diffEditor.unchangedRegionForeground",{dark:"foreground",light:"foreground",hcDark:"foreground",hcLight:"foreground"},ht(0,"The foreground color of unchanged blocks in the diff editor.")),Jw("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},ht(0,"The background color of unchanged code in the diff editor."));var tb=Jw("widget.shadow",{dark:Yw(Ig.black,.36),light:Yw(Ig.black,.16),hcDark:null,hcLight:null},ht(0,"Shadow color of widgets such as find/replace inside the editor.")),nb=Jw("widget.border",{dark:null,light:null,hcDark:am,hcLight:am},ht(0,"Border color of widgets such as find/replace inside the editor.")),ib=Jw("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},ht(0,"Toolbar background when hovering over actions using the mouse"));Jw("toolbar.hoverOutline",{dark:null,light:null,hcDark:hm,hcLight:hm},ht(0,"Toolbar outline when hovering over actions using the mouse")),Jw("toolbar.activeBackground",{dark:Qw(ib,.1),light:Zw(ib,.1),hcDark:null,hcLight:null},ht(0,"Toolbar background when holding the mouse over actions"));var rb=Jw("breadcrumb.foreground",{light:Yw(om,.8),dark:Yw(om,.8),hcDark:Yw(om,.8),hcLight:Yw(om,.8)},ht(0,"Color of focused breadcrumb items.")),eb=Jw("breadcrumb.background",{light:mm,dark:mm,hcDark:mm,hcLight:mm},ht(0,"Background color of breadcrumb items.")),ob=Jw("breadcrumb.focusForeground",{light:Zw(om,.2),dark:Qw(om,.1),hcDark:Qw(om,.1),hcLight:Qw(om,.1)},ht(0,"Color of focused breadcrumb items.")),sb=Jw("breadcrumb.activeSelectionForeground",{light:Zw(om,.2),dark:Qw(om,.1),hcDark:Qw(om,.1),hcLight:Qw(om,.1)},ht(0,"Color of selected breadcrumb items."));Jw("breadcrumbPicker.background",{light:ym,dark:ym,hcDark:ym,hcLight:ym},ht(0,"Background color of breadcrumb item picker."));var ub=Ig.fromHex("#40C8AE").transparent(.5),ab=Ig.fromHex("#40A6FF").transparent(.5),hb=Ig.fromHex("#606060").transparent(.4),cb=.4,fb=Jw("merge.currentHeaderBackground",{dark:ub,light:ub,hcDark:null,hcLight:null},ht(0,"Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Jw("merge.currentContentBackground",{dark:Yw(fb,cb),light:Yw(fb,cb),hcDark:Yw(fb,cb),hcLight:Yw(fb,cb)},ht(0,"Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var lb=Jw("merge.incomingHeaderBackground",{dark:ab,light:ab,hcDark:null,hcLight:null},ht(0,"Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Jw("merge.incomingContentBackground",{dark:Yw(lb,cb),light:Yw(lb,cb),hcDark:Yw(lb,cb),hcLight:Yw(lb,cb)},ht(0,"Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var vb=Jw("merge.commonHeaderBackground",{dark:hb,light:hb,hcDark:null,hcLight:null},ht(0,"Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);Jw("merge.commonContentBackground",{dark:Yw(vb,cb),light:Yw(vb,cb),hcDark:Yw(vb,cb),hcLight:Yw(vb,cb)},ht(0,"Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);var db=Jw("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},ht(0,"Border color on headers and the splitter in inline merge-conflicts."));Jw("editorOverviewRuler.currentContentForeground",{dark:Yw(fb,1),light:Yw(fb,1),hcDark:db,hcLight:db},ht(0,"Current overview ruler foreground for inline merge-conflicts.")),Jw("editorOverviewRuler.incomingContentForeground",{dark:Yw(lb,1),light:Yw(lb,1),hcDark:db,hcLight:db},ht(0,"Incoming overview ruler foreground for inline merge-conflicts.")),Jw("editorOverviewRuler.commonContentForeground",{dark:Yw(vb,1),light:Yw(vb,1),hcDark:db,hcLight:db},ht(0,"Common ancestor overview ruler foreground for inline merge-conflicts."));var gb=Jw("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},ht(0,"Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),pb=Jw("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},ht(0,"Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),wb=Jw("problemsErrorIcon.foreground",{dark:xm,light:xm,hcDark:xm,hcLight:xm},ht(0,"The color used for the problems error icon.")),mb=Jw("problemsWarningIcon.foreground",{dark:Dm,light:Dm,hcDark:Dm,hcLight:Dm},ht(0,"The color used for the problems warning icon.")),bb=Jw("problemsInfoIcon.foreground",{dark:Om,light:Om,hcDark:Om,hcLight:Om},ht(0,"The color used for the problems info icon.")),yb=Jw("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},ht(0,"Minimap marker color for find matches."),!0),_b=Jw("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},ht(0,"Minimap marker color for repeating editor selections."),!0),kb=Jw("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},ht(0,"Minimap marker color for the editor selection."),!0),xb=Jw("minimap.infoHighlight",{dark:Om,light:Om,hcDark:Em,hcLight:Em},ht(0,"Minimap marker color for infos.")),Cb=Jw("minimap.warningHighlight",{dark:Dm,light:Dm,hcDark:Am,hcLight:Am},ht(0,"Minimap marker color for warnings.")),Sb=Jw("minimap.errorHighlight",{dark:new Ig(new jg(255,18,18,.7)),light:new Ig(new jg(255,18,18,.7)),hcDark:new Ig(new jg(255,50,50,1)),hcLight:"#B5200D"},ht(0,"Minimap marker color for errors.")),Db=Jw("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Minimap background color.")),Ab=Jw("minimap.foregroundOpacity",{dark:Ig.fromHex("#000f"),light:Ig.fromHex("#000f"),hcDark:Ig.fromHex("#000f"),hcLight:Ig.fromHex("#000f")},ht(0,'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));Jw("minimapSlider.background",{light:Yw(dm,.5),dark:Yw(dm,.5),hcDark:Yw(dm,.5),hcLight:Yw(dm,.5)},ht(0,"Minimap slider background color.")),Jw("minimapSlider.hoverBackground",{light:Yw(gm,.5),dark:Yw(gm,.5),hcDark:Yw(gm,.5),hcLight:Yw(gm,.5)},ht(0,"Minimap slider background color when hovering.")),Jw("minimapSlider.activeBackground",{light:Yw(pm,.5),dark:Yw(pm,.5),hcDark:Yw(pm,.5),hcLight:Yw(pm,.5)},ht(0,"Minimap slider background color when clicked on.")),Jw("charts.foreground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color used in charts.")),Jw("charts.lines",{dark:Yw(om,.5),light:Yw(om,.5),hcDark:Yw(om,.5),hcLight:Yw(om,.5)},ht(0,"The color used for horizontal lines in charts.")),Jw("charts.red",{dark:xm,light:xm,hcDark:xm,hcLight:xm},ht(0,"The red color used in chart visualizations.")),Jw("charts.blue",{dark:Om,light:Om,hcDark:Om,hcLight:Om},ht(0,"The blue color used in chart visualizations.")),Jw("charts.yellow",{dark:Dm,light:Dm,hcDark:Dm,hcLight:Dm},ht(0,"The yellow color used in chart visualizations.")),Jw("charts.orange",{dark:yb,light:yb,hcDark:yb,hcLight:yb},ht(0,"The orange color used in chart visualizations.")),Jw("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},ht(0,"The green color used in chart visualizations.")),Jw("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},ht(0,"The purple color used in chart visualizations."));var Ob=Jw("input.background",{dark:"#3C3C3C",light:Ig.white,hcDark:Ig.black,hcLight:Ig.white},ht(0,"Input box background.")),Eb=Jw("input.foreground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"Input box foreground.")),Mb=Jw("input.border",{dark:null,light:null,hcDark:am,hcLight:am},ht(0,"Input box border.")),Fb=Jw("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:am,hcLight:am},ht(0,"Border color of activated options in input fields."));Jw("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},ht(0,"Background color of activated options in input fields."));var Lb=Jw("inputOption.activeBackground",{dark:Yw(um,.4),light:Yw(um,.2),hcDark:Ig.transparent,hcLight:Ig.transparent},ht(0,"Background hover color of options in input fields.")),jb=Jw("inputOption.activeForeground",{dark:Ig.white,light:Ig.black,hcDark:om,hcLight:om},ht(0,"Foreground color of activated options in input fields."));Jw("input.placeholderForeground",{light:Yw(om,.5),dark:Yw(om,.5),hcDark:Yw(om,.7),hcLight:Yw(om,.7)},ht(0,"Input box foreground color for placeholder text."));var Rb=Jw("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:Ig.black,hcLight:Ig.white},ht(0,"Input validation background color for information severity.")),Tb=Jw("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:om},ht(0,"Input validation foreground color for information severity.")),Ib=Jw("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:am,hcLight:am},ht(0,"Input validation border color for information severity.")),Bb=Jw("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:Ig.black,hcLight:Ig.white},ht(0,"Input validation background color for warning severity.")),Nb=Jw("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:om},ht(0,"Input validation foreground color for warning severity.")),Pb=Jw("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:am,hcLight:am},ht(0,"Input validation border color for warning severity.")),Wb=Jw("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:Ig.black,hcLight:Ig.white},ht(0,"Input validation background color for error severity.")),Hb=Jw("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:om},ht(0,"Input validation foreground color for error severity.")),zb=Jw("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:am,hcLight:am},ht(0,"Input validation border color for error severity.")),Ub=Jw("dropdown.background",{dark:"#3C3C3C",light:Ig.white,hcDark:Ig.black,hcLight:Ig.white},ht(0,"Dropdown background.")),Kb=Jw("dropdown.listBackground",{dark:null,light:null,hcDark:Ig.black,hcLight:Ig.white},ht(0,"Dropdown list background.")),Vb=Jw("dropdown.foreground",{dark:"#F0F0F0",light:om,hcDark:Ig.white,hcLight:om},ht(0,"Dropdown foreground.")),qb=Jw("dropdown.border",{dark:Ub,light:"#CECECE",hcDark:am,hcLight:am},ht(0,"Dropdown border.")),Gb=Jw("button.foreground",{dark:Ig.white,light:Ig.white,hcDark:Ig.white,hcLight:Ig.white},ht(0,"Button foreground color.")),$b=Jw("button.separator",{dark:Yw(Gb,.4),light:Yw(Gb,.4),hcDark:Yw(Gb,.4),hcLight:Yw(Gb,.4)},ht(0,"Button separator color.")),Jb=Jw("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},ht(0,"Button background color.")),Zb=Jw("button.hoverBackground",{dark:Qw(Jb,.2),light:Zw(Jb,.2),hcDark:Jb,hcLight:Jb},ht(0,"Button background color when hovering.")),Qb=Jw("button.border",{dark:am,light:am,hcDark:am,hcLight:am},ht(0,"Button border color.")),Yb=Jw("button.secondaryForeground",{dark:Ig.white,light:Ig.white,hcDark:Ig.white,hcLight:om},ht(0,"Secondary button foreground color.")),Xb=Jw("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:Ig.white},ht(0,"Secondary button background color.")),ty=Jw("button.secondaryHoverBackground",{dark:Qw(Xb,.2),light:Zw(Xb,.2),hcDark:null,hcLight:null},ht(0,"Secondary button background color when hovering.")),ny=Jw("checkbox.background",{dark:Ub,light:Ub,hcDark:Ub,hcLight:Ub},ht(0,"Background color of checkbox widget."));Jw("checkbox.selectBackground",{dark:ym,light:ym,hcDark:ym,hcLight:ym},ht(0,"Background color of checkbox widget when the element it's in is selected."));var iy=Jw("checkbox.foreground",{dark:Vb,light:Vb,hcDark:Vb,hcLight:Vb},ht(0,"Foreground color of checkbox widget.")),ry=Jw("checkbox.border",{dark:qb,light:qb,hcDark:qb,hcLight:qb},ht(0,"Border color of checkbox widget."));Jw("checkbox.selectBorder",{dark:sm,light:sm,hcDark:sm,hcLight:sm},ht(0,"Border color of checkbox widget when the element it's in is selected."));var ey=Jw("keybindingLabel.background",{dark:new Ig(new jg(128,128,128,.17)),light:new Ig(new jg(221,221,221,.4)),hcDark:Ig.transparent,hcLight:Ig.transparent},ht(0,"Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),oy=Jw("keybindingLabel.foreground",{dark:Ig.fromHex("#CCCCCC"),light:Ig.fromHex("#555555"),hcDark:Ig.white,hcLight:om},ht(0,"Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),sy=Jw("keybindingLabel.border",{dark:new Ig(new jg(51,51,51,.6)),light:new Ig(new jg(204,204,204,.4)),hcDark:new Ig(new jg(111,195,223)),hcLight:am},ht(0,"Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),uy=Jw("keybindingLabel.bottomBorder",{dark:new Ig(new jg(68,68,68,.6)),light:new Ig(new jg(187,187,187,.4)),hcDark:new Ig(new jg(111,195,223)),hcLight:om},ht(0,"Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),ay=Jw("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),hy=Jw("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),cy=Jw("list.focusOutline",{dark:um,light:um,hcDark:hm,hcLight:hm},ht(0,"List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),fy=Jw("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),ly=Jw("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:Ig.fromHex("#0F4A85").transparent(.1)},ht(0,"List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),vy=Jw("list.activeSelectionForeground",{dark:Ig.white,light:Ig.white,hcDark:null,hcLight:null},ht(0,"List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),dy=Jw("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),gy=Jw("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:Ig.fromHex("#0F4A85").transparent(.1)},ht(0,"List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),py=Jw("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),wy=Jw("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),my=Jw("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),by=Jw("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),yy=Jw("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:Ig.white.transparent(.1),hcLight:Ig.fromHex("#0F4A85").transparent(.1)},ht(0,"List/Tree background when hovering over items using the mouse.")),_y=Jw("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"List/Tree foreground when hovering over items using the mouse.")),ky=Jw("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},ht(0,"List/Tree drag and drop background when moving items over other items when using the mouse.")),xy=Jw("list.dropBetweenBackground",{dark:sm,light:sm,hcDark:null,hcLight:null},ht(0,"List/Tree drag and drop border color when moving items between items when using the mouse.")),Cy=Jw("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:um,hcLight:um},ht(0,"List/Tree foreground color of the match highlights when searching inside the list/tree.")),Sy=Jw("list.focusHighlightForeground",{dark:Cy,light:(Dy=ly,Ay=Cy,Oy="#BBE7FF",{op:6,if:Dy,then:Ay,else:Oy}),hcDark:Cy,hcLight:Cy},ht(0,"List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));var Dy,Ay,Oy;Jw("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},ht(0,"List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),Jw("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},ht(0,"Foreground color of list items containing errors.")),Jw("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},ht(0,"Foreground color of list items containing warnings."));var Ey=Jw("listFilterWidget.background",{light:Zw(ym,0),dark:Qw(ym,0),hcDark:ym,hcLight:ym},ht(0,"Background color of the type filter widget in lists and trees.")),My=Jw("listFilterWidget.outline",{dark:Ig.transparent,light:Ig.transparent,hcDark:"#f38518",hcLight:"#007ACC"},ht(0,"Outline color of the type filter widget in lists and trees.")),Fy=Jw("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:am,hcLight:am},ht(0,"Outline color of the type filter widget in lists and trees, when there are no matches.")),Ly=Jw("listFilterWidget.shadow",{dark:tb,light:tb,hcDark:tb,hcLight:tb},ht(0,"Shadow color of the type filter widget in lists and trees."));Jw("list.filterMatchBackground",{dark:Im,light:Im,hcDark:null,hcLight:null},ht(0,"Background color of the filtered match.")),Jw("list.filterMatchBorder",{dark:Bm,light:Bm,hcDark:am,hcLight:hm},ht(0,"Border color of the filtered match.")),Jw("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},ht(0,"List/Tree foreground color for items that are deemphasized."));var jy=Jw("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},ht(0,"Tree stroke color for the indentation guides.")),Ry=Jw("tree.inactiveIndentGuidesStroke",{dark:Yw(jy,.4),light:Yw(jy,.4),hcDark:Yw(jy,.4),hcLight:Yw(jy,.4)},ht(0,"Tree stroke color for the indentation guides that are not active.")),Ty=Jw("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},ht(0,"Table border color between columns.")),Iy=Jw("tree.tableOddRowsBackground",{dark:Yw(om,.04),light:Yw(om,.04),hcDark:null,hcLight:null},ht(0,"Background color for odd table rows.")),By=Jw("menu.border",{dark:null,light:null,hcDark:am,hcLight:am},ht(0,"Border color of menus.")),Ny=Jw("menu.foreground",{dark:Vb,light:Vb,hcDark:Vb,hcLight:Vb},ht(0,"Foreground color of menu items.")),Py=Jw("menu.background",{dark:Ub,light:Ub,hcDark:Ub,hcLight:Ub},ht(0,"Background color of menu items.")),Wy=Jw("menu.selectionForeground",{dark:vy,light:vy,hcDark:vy,hcLight:vy},ht(0,"Foreground color of the selected menu item in menus.")),Hy=Jw("menu.selectionBackground",{dark:ly,light:ly,hcDark:ly,hcLight:ly},ht(0,"Background color of the selected menu item in menus.")),zy=Jw("menu.selectionBorder",{dark:null,light:null,hcDark:hm,hcLight:hm},ht(0,"Border color of the selected menu item in menus.")),Uy=Jw("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:am,hcLight:am},ht(0,"Color of a separator menu item in menus.")),Ky=Jw("quickInput.background",{dark:ym,light:ym,hcDark:ym,hcLight:ym},ht(0,"Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Vy=Jw("quickInput.foreground",{dark:_m,light:_m,hcDark:_m,hcLight:_m},ht(0,"Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),qy=Jw("quickInputTitle.background",{dark:new Ig(new jg(255,255,255,.105)),light:new Ig(new jg(0,0,0,.06)),hcDark:"#000000",hcLight:Ig.white},ht(0,"Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),Gy=Jw("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:Ig.white,hcLight:"#0F4A85"},ht(0,"Quick picker color for grouping labels.")),$y=Jw("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:Ig.white,hcLight:"#0F4A85"},ht(0,"Quick picker color for grouping borders.")),Jy=Jw("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,ht(0,"Please use quickInputList.focusBackground instead")),Zy=Jw("quickInputList.focusForeground",{dark:vy,light:vy,hcDark:vy,hcLight:vy},ht(0,"Quick picker foreground color for the focused item.")),Qy=Jw("quickInputList.focusIconForeground",{dark:dy,light:dy,hcDark:dy,hcLight:dy},ht(0,"Quick picker icon foreground color for the focused item.")),Yy=Jw("quickInputList.focusBackground",{dark:Xw(Jy,ly),light:Xw(Jy,ly),hcDark:null,hcLight:null},ht(0,"Quick picker background color for the focused item."));Jw("search.resultsInfoForeground",{light:om,dark:Yw(om,.65),hcDark:om,hcLight:om},ht(0,"Color of the text in the search viewlet's completion message.")),Jw("searchEditor.findMatchBackground",{light:Yw(Im,.66),dark:Yw(Im,.66),hcDark:Im,hcLight:Im},ht(0,"Color of the Search Editor query matches.")),Jw("searchEditor.findMatchBorder",{light:Yw(Bm,.66),dark:Yw(Bm,.66),hcDark:Bm,hcLight:Bm},ht(0,"Border color of the Search Editor query matches."));var Xy=function(){function t(t,n){this.x=t,this.y=n,this._pageCoordinatesBrand=void 0}t.prototype.toClientCoordinates=function(t){return new t_(this.x-t.scrollX,this.y-t.scrollY)};return t}();var t_=function(){function t(t,n){this.clientX=t,this.clientY=n,this._clientCoordinatesBrand=void 0}t.prototype.toPageCoordinates=function(t){return new Xy(this.clientX+t.scrollX,this.clientY+t.scrollY)};return t}();var n_=function(){function t(t,n,i,r){this.x=t,this.y=n,this.width=i,this.height=r,this._editorPagePositionBrand=void 0}return t}();var i_=function(){function t(t,n){this.x=t,this.y=n,this._positionRelativeToEditorBrand=void 0}return t}();function r_(t){var n=ja(t);return new n_(n.left,n.top,n.width,n.height)}function e_(t,n,i){var r=n.width/t.offsetWidth,e=n.height/t.offsetHeight,o=(i.x-n.x)/r,s=(i.y-n.y)/e;return new i_(o,s)}var o_=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,sa(r),n)||this,e._editorMouseEventBrand=void 0,e.isFromPointerCapture=i,e.pos=new Xy(e.posx,e.posy),e.editorPos=r_(r),e.relativePos=e_(r,e.editorPos,e.pos);return e}return n}(_s);var s_=function(){function t(t){this._editorViewDomNode=t}t.prototype._create=function(t){return new o_(t,!1,this._editorViewDomNode)};t.prototype.onContextMenu=function(t,n){var i=this;return ma(t,"contextmenu",(function(t){n(i._create(t))}))};t.prototype.onMouseUp=function(t,n){var i=this;return ma(t,"mouseup",(function(t){n(i._create(t))}))};t.prototype.onMouseDown=function(t,n){var i=this;return ma(t,ah.MOUSE_DOWN,(function(t){n(i._create(t))}))};t.prototype.onPointerDown=function(t,n){var i=this;return ma(t,ah.POINTER_DOWN,(function(t){n(i._create(t),t.pointerId)}))};t.prototype.onMouseLeave=function(t,n){var i=this;return ma(t,ah.MOUSE_LEAVE,(function(t){n(i._create(t))}))};t.prototype.onMouseMove=function(t,n){var i=this;return ma(t,"mousemove",(function(t){return n(i._create(t))}))};return t}();var u_=function(){function t(t){this._editorViewDomNode=t}t.prototype._create=function(t){return new o_(t,!1,this._editorViewDomNode)};t.prototype.onPointerUp=function(t,n){var i=this;return ma(t,"pointerup",(function(t){n(i._create(t))}))};t.prototype.onPointerDown=function(t,n){var i=this;return ma(t,ah.POINTER_DOWN,(function(t){n(i._create(t),t.pointerId)}))};t.prototype.onPointerLeave=function(t,n){var i=this;return ma(t,ah.POINTER_LEAVE,(function(t){n(i._create(t))}))};t.prototype.onPointerMove=function(t,n){var i=this;return ma(t,"pointermove",(function(t){return n(i._create(t))}))};return t}();var a_=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._editorViewDomNode=n,i._globalPointerMoveMonitor=i._register(new Kw),i._keydownListener=null;return i}n.prototype.startMonitoring=function(t,n,i,r,e){var o=this;this._keydownListener=ya(t.ownerDocument,"keydown",(function(t){t.toKeyCodeChord().isModifierKey()||o._globalPointerMoveMonitor.stopMonitoring(!0,t.browserEvent)}),!0),this._globalPointerMoveMonitor.startMonitoring(t,n,i,(function(t){r(new o_(t,!0,o._editorViewDomNode))}),(function(t){o._keydownListener.dispose(),e(t)}))};n.prototype.stopMonitoring=function(){this._globalPointerMoveMonitor.stopMonitoring(!0)};return n}(ci);var h_=function(){function t(n){var i=this;this._editor=n,this._instanceId=++t._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new Ts((function(){return i.garbageCollect()}),1e3)}t.prototype.createClassNameRef=function(t){var n=this;var i=this.getOrCreateRule(t);return i.increaseRefCount(),{className:i.className,dispose:function(){i.decreaseRefCount(),n._garbageCollectionScheduler.schedule()}}};t.prototype.getOrCreateRule=function(t){var n=this.computeUniqueKey(t);var i=this._rules.get(n);if(!i){var r=this._counter++;i=new c_(n,"dyn-rule-".concat(this._instanceId,"-").concat(r),za(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,t),this._rules.set(n,i)}return i};t.prototype.computeUniqueKey=function(t){return JSON.stringify(t)};t.prototype.garbageCollect=function(){for(var t=0,n=this._rules.values();t<n.length;t++){var i=n[t];i.hasReferences()||(this._rules.delete(i.key),i.dispose())}};return t}();h_._idPool=0;var c_=function(){function t(t,n,i,r){this.key=t,this.className=n,this.properties=r,this._referenceCount=0,this._styleElementDisposables=new hi,this._styleElement=Qa(i,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}t.prototype.getCssText=function(t,n){var i=".".concat(t," {");for(var r in n){var e=n[r];var o=void 0;o=typeof e=="object"?qw(e.id):e,i+="\n\t".concat(f_(r),": ").concat(o,";")}return i+="\n}",i};t.prototype.dispose=function(){this._styleElementDisposables.dispose(),this._styleElement=void 0};t.prototype.increaseRefCount=function(){this._referenceCount++};t.prototype.decreaseRefCount=function(){this._referenceCount--};t.prototype.hasReferences=function(){return this._referenceCount>0};return t}();function f_(t){return t.replace(/(^[A-Z])/,(function(t){var n=t[0];return n.toLowerCase()})).replace(/([A-Z])/g,(function(t){var n=t[0];return"-".concat(n.toLowerCase())}))}var l_=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n._shouldRender=!0;return n}n.prototype.shouldRender=function(){return this._shouldRender};n.prototype.forceShouldRender=function(){this._shouldRender=!0};n.prototype.setShouldRender=function(){this._shouldRender=!0};n.prototype.onDidRender=function(){this._shouldRender=!1};n.prototype.onCompositionStart=function(t){return!1};n.prototype.onCompositionEnd=function(t){return!1};n.prototype.onConfigurationChanged=function(t){return!1};n.prototype.onCursorStateChanged=function(t){return!1};n.prototype.onDecorationsChanged=function(t){return!1};n.prototype.onFlushed=function(t){return!1};n.prototype.onFocusChanged=function(t){return!1};n.prototype.onLanguageConfigurationChanged=function(t){return!1};n.prototype.onLineMappingChanged=function(t){return!1};n.prototype.onLinesChanged=function(t){return!1};n.prototype.onLinesDeleted=function(t){return!1};n.prototype.onLinesInserted=function(t){return!1};n.prototype.onRevealRangeRequest=function(t){return!1};n.prototype.onScrollChanged=function(t){return!1};n.prototype.onThemeChanged=function(t){return!1};n.prototype.onTokensChanged=function(t){return!1};n.prototype.onTokensColorsChanged=function(t){return!1};n.prototype.onZonesChanged=function(t){return!1};n.prototype.handleEvents=function(t){var n=!1;for(var i=0,r=t.length;i<r;i++){var e=t[i];switch(e.type){case 0:this.onCompositionStart(e)&&(n=!0);break;case 1:this.onCompositionEnd(e)&&(n=!0);break;case 2:this.onConfigurationChanged(e)&&(n=!0);break;case 3:this.onCursorStateChanged(e)&&(n=!0);break;case 4:this.onDecorationsChanged(e)&&(n=!0);break;case 5:this.onFlushed(e)&&(n=!0);break;case 6:this.onFocusChanged(e)&&(n=!0);break;case 7:this.onLanguageConfigurationChanged(e)&&(n=!0);break;case 8:this.onLineMappingChanged(e)&&(n=!0);break;case 9:this.onLinesChanged(e)&&(n=!0);break;case 10:this.onLinesDeleted(e)&&(n=!0);break;case 11:this.onLinesInserted(e)&&(n=!0);break;case 12:this.onRevealRangeRequest(e)&&(n=!0);break;case 13:this.onScrollChanged(e)&&(n=!0);break;case 15:this.onTokensChanged(e)&&(n=!0);break;case 14:this.onThemeChanged(e)&&(n=!0);break;case 16:this.onTokensColorsChanged(e)&&(n=!0);break;case 17:this.onZonesChanged(e)&&(n=!0);break;default:console.info("View received unknown event: "),console.info(e)}}n&&(this._shouldRender=!0)};return n}(ci);var v_=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._context=n,i._context.addEventHandler(i);return i}n.prototype.dispose=function(){this._context.removeEventHandler(this),t.prototype.dispose.call(this)};return n}(l_);var d_=function(){function t(){}t.write=function(t,n){t.setAttribute("data-mprt",String(n))};t.read=function(t){var n=t.getAttribute("data-mprt");return n===null?0:parseInt(n,10)};t.collect=function(t,n){var i=[];var r=0;for(;t&&t!==t.ownerDocument.body&&t!==n;)t.nodeType===t.ELEMENT_NODE&&(i[r++]=this.read(t)),t=t.parentElement;var e=new Uint8Array(r);for(var o=0;o<r;o++)e[o]=i[r-o-1];return e};return t}();var g_=function(){function t(t,n){this._restrictedRenderingContextBrand=void 0,this._viewLayout=t,this.viewportData=n,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;var i=this._viewLayout.getCurrentViewport();this.scrollTop=i.top,this.scrollLeft=i.left,this.viewportWidth=i.width,this.viewportHeight=i.height}t.prototype.getScrolledTopFromAbsoluteTop=function(t){return t-this.scrollTop};t.prototype.getVerticalOffsetForLineNumber=function(t,n){return this._viewLayout.getVerticalOffsetForLineNumber(t,n)};t.prototype.getVerticalOffsetAfterLineNumber=function(t,n){return this._viewLayout.getVerticalOffsetAfterLineNumber(t,n)};t.prototype.getDecorationsInViewport=function(){return this.viewportData.getDecorationsInViewport()};return t}();var p_=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,i)||this,e._renderingContextBrand=void 0,e._viewLines=r;return e}n.prototype.linesVisibleRangesForRange=function(t,n){return this._viewLines.linesVisibleRangesForRange(t,n)};n.prototype.visibleRangeForPosition=function(t){return this._viewLines.visibleRangeForPosition(t)};return n}(g_);var w_=function(){function t(t,n,i,r){this.outsideRenderedLine=t,this.lineNumber=n,this.ranges=i,this.continuesOnNextLine=r}return t}();var m_=function(){function t(t,n){this._horizontalRangeBrand=void 0,this.left=Math.round(t),this.width=Math.round(n)}t.from=function(n){var i=new Array(n.length);for(var r=0,e=n.length;r<e;r++){var o=n[r];i[r]=new t(o.left,o.width)}return i};t.prototype.toString=function(){return"[".concat(this.left,",").concat(this.width,"]")};return t}();var b_=function(){function t(t,n){this._floatHorizontalRangeBrand=void 0,this.left=t,this.width=n}t.prototype.toString=function(){return"[".concat(this.left,",").concat(this.width,"]")};t.compare=function(t,n){return t.left-n.left};return t}();var y_=function(){function t(t,n){this.outsideRenderedLine=t,this.originalLeft=n,this.left=Math.round(this.originalLeft)}return t}();var __=function(){function t(t,n){this.outsideRenderedLine=t,this.ranges=n}return t}();var k_=function(){function t(){}t._createRange=function(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange};t._detachRange=function(t,n){t.selectNodeContents(n)};t._readClientRects=function(t,n,i,r,e){var o=this._createRange();try{return o.setStart(t,n),o.setEnd(i,r),o.getClientRects()}catch(t){return null}finally{this._detachRange(o,e)}};t._mergeAdjacentRanges=function(t){if(t.length===1)return t;t.sort(b_.compare);var n=[];var i=0,r=t[0];for(var e=1,o=t.length;e<o;e++){var s=t[e];r.left+r.width+.9>=s.left?r.width=Math.max(r.width,s.left+s.width-r.left):(n[i++]=r,r=s)}return n[i++]=r,n};t._createHorizontalRangesFromClientRects=function(t,n,i){if(!t||t.length===0)return null;var r=[];for(var e=0,o=t.length;e<o;e++){var s=t[e];r[e]=new b_(Math.max(0,(s.left-n)/i),s.width/i)}return this._mergeAdjacentRanges(r)};t.readHorizontalRanges=function(t,n,i,r,e,o){var s=t.children.length-1;if(0>s)return null;if((n=Math.min(s,Math.max(0,n)))===(r=Math.min(s,Math.max(0,r)))&&i===e&&i===0&&!t.children[n].firstChild){var u=t.children[n].getClientRects();return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,o.clientRectDeltaLeft,o.clientRectScale)}n!==r&&r>0&&e===0&&(r--,e=1073741824);var a=t.children[n].firstChild,h=t.children[r].firstChild;if(a&&h||(!a&&i===0&&n>0&&(a=t.children[n-1].firstChild,i=1073741824),!h&&e===0&&r>0&&(h=t.children[r-1].firstChild,e=1073741824)),!a||!h)return null;i=Math.min(a.textContent.length,Math.max(0,i)),e=Math.min(h.textContent.length,Math.max(0,e));var c=this._readClientRects(a,i,h,e,o.endNode);return o.markDidDomLayout(),this._createHorizontalRangesFromClientRects(c,o.clientRectDeltaLeft,o.clientRectScale)};return t}();var x_;function C_(t){return t===x_.HIGH_CONTRAST_DARK||t===x_.HIGH_CONTRAST_LIGHT}function S_(t){return t===x_.DARK||t===x_.HIGH_CONTRAST_DARK}(function(t){t.DARK="dark",t.LIGHT="light",t.HIGH_CONTRAST_DARK="hcDark",t.HIGH_CONTRAST_LIGHT="hcLight"})(x_||(x_={}));var D_=!!jt||!(Lt||is||os);var A_=!0;var O_=function(){function t(t,n){this.themeType=n;var i=t.options,r=i.get(50),e=i.get(38);this.renderWhitespace=e==="off"?i.get(99):"none",this.renderControlCharacters=i.get(94),this.spaceWidth=r.spaceWidth,this.middotWidth=r.middotWidth,this.wsmiddotWidth=r.wsmiddotWidth,this.useMonospaceOptimizations=r.isMonospace&&!i.get(33),this.canUseHalfwidthRightwardsArrow=r.canUseHalfwidthRightwardsArrow,this.lineHeight=i.get(67),this.stopRenderingLineAfter=i.get(117),this.fontLigatures=i.get(51)}t.prototype.equals=function(t){return this.themeType===t.themeType&&this.renderWhitespace===t.renderWhitespace&&this.renderControlCharacters===t.renderControlCharacters&&this.spaceWidth===t.spaceWidth&&this.middotWidth===t.middotWidth&&this.wsmiddotWidth===t.wsmiddotWidth&&this.useMonospaceOptimizations===t.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.lineHeight===t.lineHeight&&this.stopRenderingLineAfter===t.stopRenderingLineAfter&&this.fontLigatures===t.fontLigatures};return t}();var E_=function(){function t(t){this._options=t,this._isMaybeInvalid=!0,this._renderedViewLine=null}t.prototype.getDomNode=function(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null};t.prototype.setDomNode=function(t){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=Nh(t)};t.prototype.onContentChanged=function(){this._isMaybeInvalid=!0};t.prototype.onTokensChanged=function(){this._isMaybeInvalid=!0};t.prototype.onDecorationsChanged=function(){this._isMaybeInvalid=!0};t.prototype.onOptionsChanged=function(t){this._isMaybeInvalid=!0,this._options=t};t.prototype.onSelectionChanged=function(){return!(!C_(this._options.themeType)&&this._options.renderWhitespace!=="selection")&&(this._isMaybeInvalid=!0,!0)};t.prototype.renderLine=function(n,i,r,e,o){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;var s=e.getViewLineRenderingData(n),u=this._options,a=yp.filter(s.inlineDecorations,n,s.minColumn,s.maxColumn);var h=null;if(C_(u.themeType)||this._options.renderWhitespace==="selection"){var c=e.selections;for(var f=0,l=c;f<l.length;f++){var v=l[f];if(v.endLineNumber<n||v.startLineNumber>n)continue;var d=v.startLineNumber===n?v.startColumn:s.minColumn,g=v.endLineNumber===n?v.endColumn:s.maxColumn;d<g&&(C_(u.themeType)&&a.push(new yp(d,g,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(h||(h=[]),h.push(new Sp(d-1,g-1))))}}var p=new Dp(u.useMonospaceOptimizations,u.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,a,s.tabSize,s.startVisibleColumn,u.spaceWidth,u.middotWidth,u.wsmiddotWidth,u.stopRenderingLineAfter,u.renderWhitespace,u.renderControlCharacters,u.fontLigatures!==An.OFF,h);if(this._renderedViewLine&&this._renderedViewLine.input.equals(p))return!1;o.appendString('<div style="top:'),o.appendString(String(i)),o.appendString("px;height:"),o.appendString(String(r)),o.appendString('px;" class="'),o.appendString(t.CLASS_NAME),o.appendString('">');var w=Mp(p,o);o.appendString("</div>");var m=null;return A_&&D_&&s.isBasicASCII&&u.useMonospaceOptimizations&&w.containsForeignElements===0&&(m=new M_(this._renderedViewLine?this._renderedViewLine.domNode:null,p,w.characterMapping)),m||(m=j_(this._renderedViewLine?this._renderedViewLine.domNode:null,p,w.characterMapping,w.containsRTL,w.containsForeignElements)),this._renderedViewLine=m,!0};t.prototype.layoutLine=function(t,n,i){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(n),this._renderedViewLine.domNode.setHeight(i))};t.prototype.getWidth=function(t){return this._renderedViewLine?this._renderedViewLine.getWidth(t):0};t.prototype.getWidthIsFast=function(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()};t.prototype.needsMonospaceFontCheck=function(){return!!this._renderedViewLine&&this._renderedViewLine instanceof M_};t.prototype.monospaceAssumptionsAreValid=function(){return this._renderedViewLine&&this._renderedViewLine instanceof M_?this._renderedViewLine.monospaceAssumptionsAreValid():A_};t.prototype.onMonospaceAssumptionsInvalidated=function(){this._renderedViewLine&&this._renderedViewLine instanceof M_&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())};t.prototype.getVisibleRangesForRange=function(t,n,i,r){if(!this._renderedViewLine)return null;n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n)),i=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,i));var e=this._renderedViewLine.input.stopRenderingLineAfter;if(e!==-1&&n>e+1&&i>e+1)return new __(!0,[new b_(this.getWidth(r),0)]);e!==-1&&n>e+1&&(n=e+1),e!==-1&&i>e+1&&(i=e+1);var o=this._renderedViewLine.getVisibleRangesForRange(t,n,i,r);return o&&o.length>0?new __(!1,o):null};t.prototype.getColumnOfNodeOffset=function(t,n){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(t,n):1};return t}();E_.CLASS_NAME="view-line";var M_=function(){function t(t,n,i){this._cachedWidth=-1,this.domNode=t,this.input=n;var r=Math.floor(n.lineContent.length/300);if(r>0){this._keyColumnPixelOffsetCache=new Float32Array(r);for(var e=0;e<r;e++)this._keyColumnPixelOffsetCache[e]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=i,this._charWidth=n.spaceWidth}t.prototype.getWidth=function(t){if(!this.domNode||this.input.lineContent.length<300){var n=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*n)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,t==null||t.markDidDomLayout()),this._cachedWidth};t.prototype.getWidthIsFast=function(){return this.input.lineContent.length<300||this._cachedWidth!==-1};t.prototype.monospaceAssumptionsAreValid=function(){if(!this.domNode)return A_;if(this.input.lineContent.length<300){var t=this.getWidth(null),n=this.domNode.domNode.firstChild.offsetWidth;Math.abs(t-n)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),A_=!1)}return A_};t.prototype.toSlowRenderedLine=function(){return j_(this.domNode,this.input,this._characterMapping,!1,0)};t.prototype.getVisibleRangesForRange=function(t,n,i,r){var e=this._getColumnPixelOffset(t,n,r),o=this._getColumnPixelOffset(t,i,r);return[new b_(e,o-e)]};t.prototype._getColumnPixelOffset=function(t,n,i){if(n<=300){var r=this._characterMapping.getHorizontalOffset(n);return this._charWidth*r}var e=Math.floor((n-1)/300)-1,o=300*(e+1)+1;var s=-1;if(this._keyColumnPixelOffsetCache&&(s=this._keyColumnPixelOffsetCache[e],s===-1&&(s=this._actualReadPixelOffset(t,o,i),this._keyColumnPixelOffsetCache[e]=s)),s===-1){var r=this._characterMapping.getHorizontalOffset(n);return this._charWidth*r}var u=this._characterMapping.getHorizontalOffset(o),a=this._characterMapping.getHorizontalOffset(n);return s+this._charWidth*(a-u)};t.prototype._getReadingTarget=function(t){return t.domNode.firstChild};t.prototype._actualReadPixelOffset=function(t,n,i){if(!this.domNode)return-1;var r=this._characterMapping.getDomPosition(n),e=k_.readHorizontalRanges(this._getReadingTarget(this.domNode),r.partIndex,r.charIndex,r.partIndex,r.charIndex,i);return e&&e.length!==0?e[0].left:-1};t.prototype.getColumnOfNodeOffset=function(t,n){return I_(this._characterMapping,t,n)};return t}();var F_=function(){function t(t,n,i,r,e){if(this.domNode=t,this.input=n,this._characterMapping=i,this._isWhitespaceOnly=/^\s*$/.test(n.lineContent),this._containsForeignElements=e,this._cachedWidth=-1,this._pixelOffsetCache=null,!r||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(var o=0,s=this._characterMapping.length;o<=s;o++)this._pixelOffsetCache[o]=-1}}t.prototype._getReadingTarget=function(t){return t.domNode.firstChild};t.prototype.getWidth=function(t){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,t==null||t.markDidDomLayout()),this._cachedWidth):0};t.prototype.getWidthIsFast=function(){return this._cachedWidth!==-1};t.prototype.getVisibleRangesForRange=function(t,n,i,r){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){var e=this._readPixelOffset(this.domNode,t,n,r);if(e===-1)return null;var o=this._readPixelOffset(this.domNode,t,i,r);return o===-1?null:[new b_(e,o-e)]}return this._readVisibleRangesForRange(this.domNode,t,n,i,r)};t.prototype._readVisibleRangesForRange=function(t,n,i,r,e){if(i===r){var o=this._readPixelOffset(t,n,i,e);return o===-1?null:[new b_(o,0)]}return this._readRawVisibleRangesForRange(t,i,r,e)};t.prototype._readPixelOffset=function(t,n,i,r){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(r);var e=this._getReadingTarget(t);return e.firstChild?(r.markDidDomLayout(),e.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){var e=this._pixelOffsetCache[i];if(e!==-1)return e;var o=this._actualReadPixelOffset(t,n,i,r);return this._pixelOffsetCache[i]=o,o}return this._actualReadPixelOffset(t,n,i,r)};t.prototype._actualReadPixelOffset=function(t,n,i,r){if(this._characterMapping.length===0){var e=k_.readHorizontalRanges(this._getReadingTarget(t),0,0,0,0,r);return e&&e.length!==0?e[0].left:-1}if(i===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(r);var o=this._characterMapping.getDomPosition(i),s=k_.readHorizontalRanges(this._getReadingTarget(t),o.partIndex,o.charIndex,o.partIndex,o.charIndex,r);if(!s||s.length===0)return-1;var u=s[0].left;if(this.input.isBasicASCII){var e=this._characterMapping.getHorizontalOffset(i),a=Math.round(this.input.spaceWidth*e);if(Math.abs(a-u)<=1)return a}return u};t.prototype._readRawVisibleRangesForRange=function(t,n,i,r){if(n===1&&i===this._characterMapping.length)return[new b_(0,this.getWidth(r))];var e=this._characterMapping.getDomPosition(n),o=this._characterMapping.getDomPosition(i);return k_.readHorizontalRanges(this._getReadingTarget(t),e.partIndex,e.charIndex,o.partIndex,o.charIndex,r)};t.prototype.getColumnOfNodeOffset=function(t,n){return I_(this._characterMapping,t,n)};return t}();var L_=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._readVisibleRangesForRange=function(n,i,r,e,o){var s=t.prototype._readVisibleRangesForRange.call(this,n,i,r,e,o);if(!s||s.length===0||r===e||r===1&&e===this._characterMapping.length)return s;if(!this.input.containsRTL){var u=this._readPixelOffset(n,i,e,o);if(u!==-1){var a=s[s.length-1];a.left<u&&(a.width=u-a.left)}}return s};return n}(F_);var j_=rs?R_:T_;function R_(t,n,i,r,e){return new L_(t,n,i,r,e)}function T_(t,n,i,r,e){return new F_(t,n,i,r,e)}function I_(t,n,i){var r=n.textContent.length;var e=-1;for(;n;)n=n.previousSibling,e++;return t.getColumn(new Ap(e,i),r)}var B_=function(){function t(){}t._nextVisibleColumn=function(n,i,r){return n===9?t.nextRenderTabStop(i,r):zo(n)||Uo(n)?i+2:i+1};t.visibleColumnFromColumn=function(t,n,i){var r=Math.min(n-1,t.length),e=t.substring(0,r),o=new jo(e);var s=0;for(;!o.eol();){var u=Fo(e,r,o.offset);o.nextGraphemeLength(),s=this._nextVisibleColumn(u,s,i)}return s};t.columnFromVisibleColumn=function(t,n,i){if(n<=0)return 1;var r=t.length,e=new jo(t);var o=0,s=1;for(;!e.eol();){var u=Fo(t,r,e.offset);e.nextGraphemeLength();var a=this._nextVisibleColumn(u,o,i),h=e.offset+1;if(a>=n)return a-n<n-o?h:s;o=a,s=h}return r+1};t.nextRenderTabStop=function(t,n){return t+n-t%n};t.nextIndentTabStop=function(t,n){return t+n-t%n};t.prevRenderTabStop=function(t,n){return Math.max(0,t-1-(t-1)%n)};t.prevIndentTabStop=function(t,n){return Math.max(0,t-1-(t-1)%n)};return t}();var N_=function(){function t(){}t.whitespaceVisibleColumn=function(t,n,i){var r=t.length;var e=0,o=-1,s=-1;for(var u=0;u<r;u++){if(u===n)return[o,s,e];switch(e%i==0&&(o=u,s=e),t.charCodeAt(u)){case 32:e+=1;break;case 9:e=B_.nextRenderTabStop(e,i);break;default:return[-1,-1,-1]}}return n===r?[o,s,e]:[-1,-1,-1]};t.atomicPosition=function(n,i,r,e){var o=n.length,s=t.whitespaceVisibleColumn(n,i,r),u=s[0],a=s[1],h=s[2];if(h===-1)return-1;var c;switch(e){case 0:c=!0;break;case 1:c=!1;break;case 2:if(h%r==0)return i;c=h%r<=r/2}if(c){if(u===-1)return-1;var f=a;for(var l=u;l<o;++l){if(f===a+r)return u;switch(n.charCodeAt(l)){case 32:f+=1;break;case 9:f=B_.nextRenderTabStop(f,r);break;default:return-1}}return f===a+r?u:-1}var v=B_.nextRenderTabStop(h,r);var d=h;for(var f=i;f<o;f++){if(d===v)return f;switch(n.charCodeAt(f)){case 32:d+=1;break;case 9:d=B_.nextRenderTabStop(d,r);break;default:return-1}}return d===v?o:-1};return t}();var P_=function(){function t(t){if(t===void 0){t=null}this.hitTarget=t,this.type=0}return t}();var W_=function(){function t(t,n,i){this.position=t,this.spanNode=n,this.injectedText=i,this.type=1}Object.defineProperty(t.prototype,"hitTarget",{get:function(){return this.spanNode},enumerable:false,configurable:true});return t}();var H_;(function(t){t.createFromDOMInfo=function(t,n,i){var r=t.getPositionFromDOMInfo(n,i);return r?new W_(r,n,null):new P_(n)}})(H_||(H_={}));var z_=function(){function t(t,n){this.lastViewCursorsRenderData=t,this.lastTextareaPosition=n}return t}();var U_=function(){function t(){}t._deduceRage=function(t,n){if(n===void 0){n=null}return!n&&t?new Ir(t.lineNumber,t.column,t.lineNumber,t.column):n!==null&&n!==void 0?n:null};t.createUnknown=function(t,n,i){return{type:0,element:t,mouseColumn:n,position:i,range:this._deduceRage(i)}};t.createTextarea=function(t,n){return{type:1,element:t,mouseColumn:n,position:null,range:null}};t.createMargin=function(t,n,i,r,e,o){return{type:t,element:n,mouseColumn:i,position:r,range:e,detail:o}};t.createViewZone=function(t,n,i,r,e){return{type:t,element:n,mouseColumn:i,position:r,range:this._deduceRage(r),detail:e}};t.createContentText=function(t,n,i,r,e){return{type:6,element:t,mouseColumn:n,position:i,range:this._deduceRage(i,r),detail:e}};t.createContentEmpty=function(t,n,i,r){return{type:7,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:r}};t.createContentWidget=function(t,n,i){return{type:9,element:t,mouseColumn:n,position:null,range:null,detail:i}};t.createScrollbar=function(t,n,i){return{type:11,element:t,mouseColumn:n,position:i,range:this._deduceRage(i)}};t.createOverlayWidget=function(t,n,i){return{type:12,element:t,mouseColumn:n,position:null,range:null,detail:i}};t.createOutsideEditor=function(t,n,i,r){return{type:13,element:null,mouseColumn:t,position:n,range:this._deduceRage(n),outsidePosition:i,outsideDistance:r}};t._typeToString=function(t){return t===1?"TEXTAREA":t===2?"GUTTER_GLYPH_MARGIN":t===3?"GUTTER_LINE_NUMBERS":t===4?"GUTTER_LINE_DECORATIONS":t===5?"GUTTER_VIEW_ZONE":t===6?"CONTENT_TEXT":t===7?"CONTENT_EMPTY":t===8?"CONTENT_VIEW_ZONE":t===9?"CONTENT_WIDGET":t===10?"OVERVIEW_RULER":t===11?"SCROLLBAR":t===12?"OVERLAY_WIDGET":"UNKNOWN"};t.toString=function(t){return this._typeToString(t.type)+": "+t.position+" - "+t.range+" - "+JSON.stringify(t.detail)};return t}();var K_=function(){function t(){}t.isTextArea=function(t){return t.length===2&&t[0]===3&&t[1]===7};t.isChildOfViewLines=function(t){return t.length>=4&&t[0]===3&&t[3]===8};t.isStrictChildOfViewLines=function(t){return t.length>4&&t[0]===3&&t[3]===8};t.isChildOfScrollableElement=function(t){return t.length>=2&&t[0]===3&&t[1]===6};t.isChildOfMinimap=function(t){return t.length>=2&&t[0]===3&&t[1]===9};t.isChildOfContentWidgets=function(t){return t.length>=4&&t[0]===3&&t[3]===1};t.isChildOfOverflowGuard=function(t){return t.length>=1&&t[0]===3};t.isChildOfOverflowingContentWidgets=function(t){return t.length>=1&&t[0]===2};t.isChildOfOverlayWidgets=function(t){return t.length>=2&&t[0]===3&&t[1]===4};t.isChildOfOverflowingOverlayWidgets=function(t){return t.length>=1&&t[0]===5};return t}();var V_=function(){function t(t,n,i){this.viewModel=t.viewModel;var r=t.configuration.options;this.layoutInfo=r.get(145),this.viewDomNode=n.viewDomNode,this.lineHeight=r.get(67),this.stickyTabStops=r.get(116),this.typicalHalfwidthCharacterWidth=r.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=t,this._viewHelper=n}t.prototype.getZoneAtCoord=function(n){return t.getZoneAtCoord(this._context,n)};t.getZoneAtCoord=function(t,n){var i=t.viewLayout.getWhitespaceAtVerticalOffset(n);if(i){var r=i.verticalOffset+i.height/2,e=t.viewModel.getLineCount();var o=void 0,s=null,u=null;return i.afterLineNumber!==e&&(u=new Tr(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(s=new Tr(i.afterLineNumber,t.viewModel.getLineMaxColumn(i.afterLineNumber))),o=u===null?s:s===null?u:n<r?s:u,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:s,positionAfter:u,position:o}}return null};t.prototype.getFullLineRangeAtCoord=function(t){if(this._context.viewLayout.isAfterLines(t)){var n=this._context.viewModel.getLineCount(),i=this._context.viewModel.getLineMaxColumn(n);return{range:new Ir(n,i,n,i),isAfterLines:!0}}var r=this._context.viewLayout.getLineNumberAtVerticalOffset(t),e=this._context.viewModel.getLineMaxColumn(r);return{range:new Ir(r,1,r,e),isAfterLines:!1}};t.prototype.getLineNumberAtVerticalOffset=function(t){return this._context.viewLayout.getLineNumberAtVerticalOffset(t)};t.prototype.isAfterLines=function(t){return this._context.viewLayout.isAfterLines(t)};t.prototype.isInTopPadding=function(t){return this._context.viewLayout.isInTopPadding(t)};t.prototype.isInBottomPadding=function(t){return this._context.viewLayout.isInBottomPadding(t)};t.prototype.getVerticalOffsetForLineNumber=function(t){return this._context.viewLayout.getVerticalOffsetForLineNumber(t)};t.prototype.findAttribute=function(n,i){return t._findAttribute(n,i,this._viewHelper.viewDomNode)};t._findAttribute=function(t,n,i){for(;t&&t!==t.ownerDocument.body;){if(t.hasAttribute&&t.hasAttribute(n))return t.getAttribute(n);if(t===i)return null;t=t.parentNode}return null};t.prototype.getLineWidth=function(t){return this._viewHelper.getLineWidth(t)};t.prototype.visibleRangeForPosition=function(t,n){return this._viewHelper.visibleRangeForPosition(t,n)};t.prototype.getPositionFromDOMInfo=function(t,n){return this._viewHelper.getPositionFromDOMInfo(t,n)};t.prototype.getCurrentScrollTop=function(){return this._context.viewLayout.getCurrentScrollTop()};t.prototype.getCurrentScrollLeft=function(){return this._context.viewLayout.getCurrentScrollLeft()};return t}();var q_=function(){function t(t,n,i,r){this.editorPos=n,this.pos=i,this.relativePos=r,this.mouseVerticalOffset=Math.max(0,t.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=t.getCurrentScrollLeft()+this.relativePos.x-t.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<t.layoutInfo.contentLeft&&this.relativePos.x>=t.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Z_._getMouseColumn(this.mouseContentHorizontalOffset,t.typicalHalfwidthCharacterWidth))}return t}();var G_=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this,n,i,r,e)||this,s.hitTestResult=new no((function(){return Z_.doHitTest(s._ctx,s)})),s._targetPathCacheElement=null,s._targetPathCacheValue=new Uint8Array(0),s._ctx=n,s._eventTarget=o;var u=!!s._eventTarget;s._useHitTestTarget=!u;return s}Object.defineProperty(n.prototype,"target",{get:function(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"targetPath",{get:function(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=d_.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue},enumerable:false,configurable:true});n.prototype.toString=function(){return"pos(".concat(this.pos.x,",").concat(this.pos.y,"), editorPos(").concat(this.editorPos.x,",").concat(this.editorPos.y,"), relativePos(").concat(this.relativePos.x,",").concat(this.relativePos.y,"), mouseVerticalOffset: ").concat(this.mouseVerticalOffset,", mouseContentHorizontalOffset: ").concat(this.mouseContentHorizontalOffset,"\n\ttarget: ").concat(this.target?this.target.outerHTML:null)};Object.defineProperty(n.prototype,"wouldBenefitFromHitTestTargetSwitch",{get:function(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget},enumerable:false,configurable:true});n.prototype.switchToHitTestTarget=function(){this._useHitTestTarget=!0};n.prototype._getMouseColumn=function(t){if(t===void 0){t=null}return t&&t.column<this._ctx.viewModel.getLineMaxColumn(t.lineNumber)?B_.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(t.lineNumber),t.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn};n.prototype.fulfillUnknown=function(t){if(t===void 0){t=null}return U_.createUnknown(this.target,this._getMouseColumn(t),t)};n.prototype.fulfillTextarea=function(){return U_.createTextarea(this.target,this._getMouseColumn())};n.prototype.fulfillMargin=function(t,n,i,r){return U_.createMargin(t,this.target,this._getMouseColumn(n),n,i,r)};n.prototype.fulfillViewZone=function(t,n,i){return U_.createViewZone(t,this.target,this._getMouseColumn(n),n,i)};n.prototype.fulfillContentText=function(t,n,i){return U_.createContentText(this.target,this._getMouseColumn(t),t,n,i)};n.prototype.fulfillContentEmpty=function(t,n){return U_.createContentEmpty(this.target,this._getMouseColumn(t),t,n)};n.prototype.fulfillContentWidget=function(t){return U_.createContentWidget(this.target,this._getMouseColumn(),t)};n.prototype.fulfillScrollbar=function(t){return U_.createScrollbar(this.target,this._getMouseColumn(t),t)};n.prototype.fulfillOverlayWidget=function(t){return U_.createOverlayWidget(this.target,this._getMouseColumn(),t)};return n}(q_);var $_={isAfterLines:!0};function J_(t){return{isAfterLines:!1,horizontalDistanceToText:t}}var Z_=function(){function t(t,n){this._context=t,this._viewHelper=n}t.prototype.mouseTargetIsWidget=function(t){var n=t.target,i=d_.collect(n,this._viewHelper.viewDomNode);return!(!K_.isChildOfContentWidgets(i)&&!K_.isChildOfOverflowingContentWidgets(i))||!(!K_.isChildOfOverlayWidgets(i)&&!K_.isChildOfOverflowingOverlayWidgets(i))};t.prototype.createMouseTarget=function(n,i,r,e,o){var s=new V_(this._context,this._viewHelper,n),u=new G_(s,i,r,e,o);try{var a=t._createMouseTarget(s,u);if(a.type===6&&s.stickyTabStops&&a.position!==null){var h=t._snapToSoftTabBoundary(a.position,s.viewModel),c=Ir.fromPositions(h,h).plusRange(a.range);return u.fulfillContentText(h,c,a.detail)}return a}catch(t){return u.fulfillUnknown()}};t._createMouseTarget=function(n,i){if(i.target===null)return i.fulfillUnknown();var r=i;var e=null;return K_.isChildOfOverflowGuard(i.targetPath)||K_.isChildOfOverflowingContentWidgets(i.targetPath)||K_.isChildOfOverflowingOverlayWidgets(i.targetPath)||(e=e||i.fulfillUnknown()),e=e||t._hitTestContentWidget(n,r),e=e||t._hitTestOverlayWidget(n,r),e=e||t._hitTestMinimap(n,r),e=e||t._hitTestScrollbarSlider(n,r),e=e||t._hitTestViewZone(n,r),e=e||t._hitTestMargin(n,r),e=e||t._hitTestViewCursor(n,r),e=e||t._hitTestTextArea(n,r),e=e||t._hitTestViewLines(n,r),e=e||t._hitTestScrollbar(n,r),e||i.fulfillUnknown()};t._hitTestContentWidget=function(t,n){if(K_.isChildOfContentWidgets(n.targetPath)||K_.isChildOfOverflowingContentWidgets(n.targetPath)){var i=t.findAttribute(n.target,"widgetId");return i?n.fulfillContentWidget(i):n.fulfillUnknown()}return null};t._hitTestOverlayWidget=function(t,n){if(K_.isChildOfOverlayWidgets(n.targetPath)||K_.isChildOfOverflowingOverlayWidgets(n.targetPath)){var i=t.findAttribute(n.target,"widgetId");return i?n.fulfillOverlayWidget(i):n.fulfillUnknown()}return null};t._hitTestViewCursor=function(t,n){if(n.target){var i=t.lastRenderData.lastViewCursorsRenderData;for(var r=0,e=i;r<e.length;r++){var o=e[r];if(n.target===o.domNode)return n.fulfillContentText(o.position,null,{mightBeForeignElement:!1,injectedText:null})}}if(n.isInContentArea){var i=t.lastRenderData.lastViewCursorsRenderData,o=n.mouseContentHorizontalOffset,s=n.mouseVerticalOffset;for(var u=0,a=i;u<a.length;u++){var h=a[u];if(o<h.contentLeft||o>h.contentLeft+h.width)continue;var c=t.getVerticalOffsetForLineNumber(h.position.lineNumber);if(c<=s&&s<=c+h.height)return n.fulfillContentText(h.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null};t._hitTestViewZone=function(t,n){var i=t.getZoneAtCoord(n.mouseVerticalOffset);if(i){var r=n.isInContentArea?8:5;return n.fulfillViewZone(r,i.position,i)}return null};t._hitTestTextArea=function(t,n){return K_.isTextArea(n.targetPath)?t.lastRenderData.lastTextareaPosition?n.fulfillContentText(t.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):n.fulfillTextarea():null};t._hitTestMargin=function(t,n){if(n.isInMarginArea){var i=t.getFullLineRangeAtCoord(n.mouseVerticalOffset),r=i.range.getStartPosition();var e=Math.abs(n.relativePos.x);var o={isAfterLines:i.isAfterLines,glyphMarginLeft:t.layoutInfo.glyphMarginLeft,glyphMarginWidth:t.layoutInfo.glyphMarginWidth,lineNumbersWidth:t.layoutInfo.lineNumbersWidth,offsetX:e};if(e-=t.layoutInfo.glyphMarginLeft,e<=t.layoutInfo.glyphMarginWidth){var s=t.viewModel.coordinatesConverter.convertViewPositionToModelPosition(i.range.getStartPosition()),u=t.viewModel.glyphLanes.getLanesAtLine(s.lineNumber);return o.glyphMarginLane=u[Math.floor(e/t.lineHeight)],n.fulfillMargin(2,r,i.range,o)}return e-=t.layoutInfo.glyphMarginWidth,e<=t.layoutInfo.lineNumbersWidth?n.fulfillMargin(3,r,i.range,o):(e-=t.layoutInfo.lineNumbersWidth,n.fulfillMargin(4,r,i.range,o))}return null};t._hitTestViewLines=function(n,i){if(!K_.isChildOfViewLines(i.targetPath))return null;if(n.isInTopPadding(i.mouseVerticalOffset))return i.fulfillContentEmpty(new Tr(1,1),$_);if(n.isAfterLines(i.mouseVerticalOffset)||n.isInBottomPadding(i.mouseVerticalOffset)){var r=n.viewModel.getLineCount(),e=n.viewModel.getLineMaxColumn(r);return i.fulfillContentEmpty(new Tr(r,e),$_)}if(K_.isStrictChildOfViewLines(i.targetPath)){var r=n.getLineNumberAtVerticalOffset(i.mouseVerticalOffset);if(n.viewModel.getLineLength(r)===0){var o=n.getLineWidth(r),s=J_(i.mouseContentHorizontalOffset-o);return i.fulfillContentEmpty(new Tr(r,1),s)}var e=n.getLineWidth(r);if(i.mouseContentHorizontalOffset>=e){var o=J_(i.mouseContentHorizontalOffset-e),s=new Tr(r,n.viewModel.getLineMaxColumn(r));return i.fulfillContentEmpty(s,o)}}var u=i.hitTestResult.value;return u.type===1?t.createMouseTargetFromHitTestPosition(n,i,u.spanNode,u.position,u.injectedText):i.wouldBenefitFromHitTestTargetSwitch?(i.switchToHitTestTarget(),this._createMouseTarget(n,i)):i.fulfillUnknown()};t._hitTestMinimap=function(t,n){if(K_.isChildOfMinimap(n.targetPath)){var i=t.getLineNumberAtVerticalOffset(n.mouseVerticalOffset),r=t.viewModel.getLineMaxColumn(i);return n.fulfillScrollbar(new Tr(i,r))}return null};t._hitTestScrollbarSlider=function(t,n){if(K_.isChildOfScrollableElement(n.targetPath)&&n.target&&n.target.nodeType===1){var i=n.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){var r=t.getLineNumberAtVerticalOffset(n.mouseVerticalOffset),e=t.viewModel.getLineMaxColumn(r);return n.fulfillScrollbar(new Tr(r,e))}}return null};t._hitTestScrollbar=function(t,n){if(K_.isChildOfScrollableElement(n.targetPath)){var i=t.getLineNumberAtVerticalOffset(n.mouseVerticalOffset),r=t.viewModel.getLineMaxColumn(i);return n.fulfillScrollbar(new Tr(i,r))}return null};t.prototype.getMouseColumn=function(n){var i=this._context.configuration.options,r=i.get(145),e=this._context.viewLayout.getCurrentScrollLeft()+n.x-r.contentLeft;return t._getMouseColumn(e,i.get(50).typicalHalfwidthCharacterWidth)};t._getMouseColumn=function(t,n){return t<0?1:Math.round(t/n)+1};t.createMouseTargetFromHitTestPosition=function(t,n,i,r,e){var o=r.lineNumber,s=r.column,u=t.getLineWidth(o);if(n.mouseContentHorizontalOffset>u){var a=J_(n.mouseContentHorizontalOffset-u);return n.fulfillContentEmpty(r,a)}var h=t.visibleRangeForPosition(o,s);if(!h)return n.fulfillUnknown(r);var c=h.left;if(Math.abs(n.mouseContentHorizontalOffset-c)<1)return n.fulfillContentText(r,null,{mightBeForeignElement:!!e,injectedText:e});var f=[];if(f.push({offset:h.left,column:s}),s>1){var a=t.visibleRangeForPosition(o,s-1);a&&f.push({offset:a.left,column:s-1})}if(s<t.viewModel.getLineMaxColumn(o)){var a=t.visibleRangeForPosition(o,s+1);a&&f.push({offset:a.left,column:s+1})}f.sort((function(t,n){return t.offset-n.offset}));var l=n.pos.toClientCoordinates(sa(t.viewDomNode)),v=i.getBoundingClientRect(),d=v.left<=l.clientX&&l.clientX<=v.right;var g=null;for(var a=1;a<f.length;a++){var p=f[a-1],w=f[a];if(p.offset<=n.mouseContentHorizontalOffset&&n.mouseContentHorizontalOffset<=w.offset){g=new Ir(o,p.column,o,w.column);var m=Math.abs(p.offset-n.mouseContentHorizontalOffset),b=Math.abs(w.offset-n.mouseContentHorizontalOffset);r=new Tr(o,m<b?p.column:w.column);break}}return n.fulfillContentText(r,g,{mightBeForeignElement:!d||!!e,injectedText:e})};t._doHitTestWithCaretRangeFromPoint=function(t,n){var i=t.getLineNumberAtVerticalOffset(n.mouseVerticalOffset),r=t.getVerticalOffsetForLineNumber(i),e=r+t.lineHeight;if(!(i===t.viewModel.getLineCount()&&n.mouseVerticalOffset>e)){var o=Math.floor((r+e)/2);var s=n.pos.y+(o-n.mouseVerticalOffset);s<=n.editorPos.y&&(s=n.editorPos.y+1),s>=n.editorPos.y+n.editorPos.height&&(s=n.editorPos.y+n.editorPos.height-1);var u=new Xy(n.pos.x,s),a=this._actualDoHitTestWithCaretRangeFromPoint(t,u.toClientCoordinates(sa(t.viewDomNode)));if(a.type===1)return a}return this._actualDoHitTestWithCaretRangeFromPoint(t,n.pos.toClientCoordinates(sa(t.viewDomNode)))};t._actualDoHitTestWithCaretRangeFromPoint=function(t,n){var i=Ua(t.viewDomNode);var r;if(r=i?i.caretRangeFromPoint===void 0?function(t,n,i){var r=document.createRange();var e=t.elementFromPoint(n,i);if(e!==null){for(;e&&e.firstChild&&e.firstChild.nodeType!==e.firstChild.TEXT_NODE&&e.lastChild&&e.lastChild.firstChild;)e=e.lastChild;var o=e.getBoundingClientRect(),s=sa(e),u="".concat(s.getComputedStyle(e,null).getPropertyValue("font-style")," ").concat(s.getComputedStyle(e,null).getPropertyValue("font-variant")," ").concat(s.getComputedStyle(e,null).getPropertyValue("font-weight")," ").concat(s.getComputedStyle(e,null).getPropertyValue("font-size"),"/").concat(s.getComputedStyle(e,null).getPropertyValue("line-height")," ").concat(s.getComputedStyle(e,null).getPropertyValue("font-family")),a=e.innerText;var h=void 0,c=o.left,f=0;if(n>o.left+o.width)f=a.length;else{var l=Q_.getInstance();for(var v=0;v<a.length+1;v++){if(h=l.getCharWidth(a.charAt(v),u)/2,c+=h,n<c){f=v;break}c+=h}}r.setStart(e.firstChild,f),r.setEnd(e.firstChild,f)}return r}(i,n.clientX,n.clientY):i.caretRangeFromPoint(n.clientX,n.clientY):t.viewDomNode.ownerDocument.caretRangeFromPoint(n.clientX,n.clientY),!r||!r.startContainer)return new P_;var e=r.startContainer;if(e.nodeType===e.TEXT_NODE){var o=e.parentNode,s=o?o.parentNode:null,u=s?s.parentNode:null;return(u&&u.nodeType===u.ELEMENT_NODE?u.className:null)===E_.CLASS_NAME?H_.createFromDOMInfo(t,o,r.startOffset):new P_(e.parentNode)}if(e.nodeType===e.ELEMENT_NODE){var o=e.parentNode,s=o?o.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===E_.CLASS_NAME?H_.createFromDOMInfo(t,e,e.textContent.length):new P_(e)}return new P_};t._doHitTestWithCaretPositionFromPoint=function(t,n){var i=t.viewDomNode.ownerDocument.caretPositionFromPoint(n.clientX,n.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){var r=i.offsetNode.parentNode,e=r?r.parentNode:null,o=e?e.parentNode:null;return(o&&o.nodeType===o.ELEMENT_NODE?o.className:null)===E_.CLASS_NAME?H_.createFromDOMInfo(t,i.offsetNode.parentNode,i.offset):new P_(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){var r=i.offsetNode.parentNode,e=r&&r.nodeType===r.ELEMENT_NODE?r.className:null,o=r?r.parentNode:null,s=o&&o.nodeType===o.ELEMENT_NODE?o.className:null;if(e===E_.CLASS_NAME){var u=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(u)return H_.createFromDOMInfo(t,u,0)}else if(s===E_.CLASS_NAME)return H_.createFromDOMInfo(t,i.offsetNode,0)}return new P_(i.offsetNode)};t._snapToSoftTabBoundary=function(t,n){var i=n.getLineContent(t.lineNumber),r=n.model.getOptions().tabSize,e=N_.atomicPosition(i,t.column-1,r,2);return e!==-1?new Tr(t.lineNumber,e+1):t};t.doHitTest=function(t,n){var i=new P_;if(typeof t.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?i=this._doHitTestWithCaretRangeFromPoint(t,n):t.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(t,n.pos.toClientCoordinates(sa(t.viewDomNode)))),i.type===1){var r=t.viewModel.getInjectedTextAt(i.position),e=t.viewModel.normalizePosition(i.position,2);!r&&e.equals(i.position)||(i=new W_(e,i.spanNode,r))}return i};return t}();var Q_=function(){function t(){this._cache={},this._canvas=document.createElement("canvas")}t.getInstance=function(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE};t.prototype.getCharWidth=function(t,n){var i=t+n;if(this._cache[i])return this._cache[i];var r=this._canvas.getContext("2d");r.font=n;var e=r.measureText(t).width;return this._cache[i]=e,e};return t}();function Y_(t,n,i){var r=null,e=null;if(typeof i.value=="function"?(r="value",e=i.value,e.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof i.get=="function"&&(r="get",e=i.get),!e)throw new Error("not supported");var o="$memoize$".concat(n);i[r]=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:e.apply(this,t)}),this[o]}}Q_._INSTANCE=null;var X_,tk=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s};(function(t){t.Tap="-monaco-gesturetap",t.Change="-monaco-gesturechange",t.Start="-monaco-gesturestart",t.End="-monaco-gesturesend",t.Contextmenu="-monaco-gesturecontextmenu"})(X_||(X_={}));var nk=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n.dispatched=!1,n.targets=new tn,n.ignoreTargets=new tn,n.activeTouches={},n.handle=null,n._lastSetTapCountTime=0,n._register(wi.runAndSubscribe(va,(function(t){var i=t.window,r=t.disposables;r.add(ma(i.document,"touchstart",(function(t){return n.onTouchStart(t)}),{passive:!1})),r.add(ma(i.document,"touchend",(function(t){return n.onTouchEnd(i,t)}))),r.add(ma(i.document,"touchmove",(function(t){return n.onTouchMove(t)}),{passive:!1}))}),{window:Xe,disposables:n._store}));return n}n.addTarget=function(t){return n.isTouchDevice()?(n.INSTANCE||(n.INSTANCE=new n),ai(n.INSTANCE.targets.push(t))):ci.None};n.ignoreTarget=function(t){return n.isTouchDevice()?(n.INSTANCE||(n.INSTANCE=new n),ai(n.INSTANCE.ignoreTargets.push(t))):ci.None};n.isTouchDevice=function(){return"ontouchstart"in Xe||navigator.maxTouchPoints>0};n.prototype.dispose=function(){this.handle&&(this.handle.dispose(),this.handle=null),t.prototype.dispose.call(this)};n.prototype.onTouchStart=function(t){var n=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(var i=0,r=t.targetTouches.length;i<r;i++){var e=t.targetTouches.item(i);this.activeTouches[e.identifier]={id:e.identifier,initialTarget:e.target,initialTimeStamp:n,initialPageX:e.pageX,initialPageY:e.pageY,rollingTimestamps:[n],rollingPageX:[e.pageX],rollingPageY:[e.pageY]};var o=this.newGestureEvent(X_.Start,e.target);o.pageX=e.pageX,o.pageY=e.pageY,this.dispatchEvent(o)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)};n.prototype.onTouchEnd=function(t,i){var r=Date.now(),e=Object.keys(this.activeTouches).length;var o=function(o,u){var a=i.changedTouches.item(o);if(!s.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);return"continue"}var h=s.activeTouches[a.identifier],c=Date.now()-h.initialTimeStamp;if(c<n.HOLD_DELAY&&Math.abs(h.initialPageX-l(h.rollingPageX))<30&&Math.abs(h.initialPageY-l(h.rollingPageY))<30){var f=s.newGestureEvent(X_.Tap,h.initialTarget);f.pageX=l(h.rollingPageX),f.pageY=l(h.rollingPageY),s.dispatchEvent(f)}else if(c>=n.HOLD_DELAY&&Math.abs(h.initialPageX-l(h.rollingPageX))<30&&Math.abs(h.initialPageY-l(h.rollingPageY))<30){var f=s.newGestureEvent(X_.Contextmenu,h.initialTarget);f.pageX=l(h.rollingPageX),f.pageY=l(h.rollingPageY),s.dispatchEvent(f)}else if(e===1){var f=l(h.rollingPageX),v=l(h.rollingPageY),d=l(h.rollingTimestamps)-h.rollingTimestamps[0],g=f-h.rollingPageX[0],p=v-h.rollingPageY[0],w=__spreadArray([],s.targets,true).filter((function(t){return h.initialTarget instanceof Node&&t.contains(h.initialTarget)}));s.inertia(t,w,r,Math.abs(g)/d,g>0?1:-1,f,Math.abs(p)/d,p>0?1:-1,v)}s.dispatchEvent(s.newGestureEvent(X_.End,h.initialTarget)),delete s.activeTouches[a.identifier]};var s=this;for(var u=0,a=i.changedTouches.length;u<a;u++){o(u,a)}this.dispatched&&(i.preventDefault(),i.stopPropagation(),this.dispatched=!1)};n.prototype.newGestureEvent=function(t,n){var i=document.createEvent("CustomEvent");return i.initEvent(t,!1,!0),i.initialTarget=n,i.tapCount=0,i};n.prototype.dispatchEvent=function(t){if(t.type===X_.Tap){var i=(new Date).getTime();var r=0;r=i-this._lastSetTapCountTime>n.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=i,t.tapCount=r}else t.type!==X_.Change&&t.type!==X_.Contextmenu||(this._lastSetTapCountTime=0);if(t.initialTarget instanceof Node){for(var e=0,o=this.ignoreTargets;e<o.length;e++){var r=o[e];if(r.contains(t.initialTarget))return}var i=[];for(var s=0,u=this.targets;s<u.length;s++){var r=u[s];if(r.contains(t.initialTarget)){var a=0,h=t.initialTarget;for(;h&&h!==r;)a++,h=h.parentElement;i.push([a,r])}}i.sort((function(t,n){return t[0]-n[0]}));for(var c=0,f=i;c<f.length;c++){var l=f[c],r=l[0],a=l[1];a.dispatchEvent(t),this.dispatched=!0}}};n.prototype.inertia=function(t,i,r,e,o,s,u,a,h){var c=this;this.handle=Sa(t,(function(){var f=Date.now(),l=f-r;var v=0,d=0,g=!0;e+=n.SCROLL_FRICTION*l,u+=n.SCROLL_FRICTION*l,e>0&&(g=!1,v=o*e*l),u>0&&(g=!1,d=a*u*l);var p=c.newGestureEvent(X_.Change);p.translationX=v,p.translationY=d,i.forEach((function(t){return t.dispatchEvent(p)})),g||c.inertia(t,i,f,e,o,s+v,u,a,h+d)}))};n.prototype.onTouchMove=function(t){var n=Date.now();for(var i=0,r=t.changedTouches.length;i<r;i++){var e=t.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(e.identifier))){console.warn("end of an UNKNOWN touch",e);continue}var o=this.activeTouches[e.identifier],s=this.newGestureEvent(X_.Change,o.initialTarget);s.translationX=e.pageX-l(o.rollingPageX),s.translationY=e.pageY-l(o.rollingPageY),s.pageX=e.pageX,s.pageY=e.pageY,this.dispatchEvent(s),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(e.pageX),o.rollingPageY.push(e.pageY),o.rollingTimestamps.push(n)}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)};return n}(ci);nk.SCROLL_FRICTION=-.005,nk.HOLD_DELAY=700,nk.CLEAR_TAP_COUNT_TIME=400,tk([Y_],nk,"isTouchDevice",null);var ik=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.onclick=function(t,n){this._register(ma(t,ah.CLICK,(function(i){return n(new _s(sa(t),i))})))};n.prototype.onmousedown=function(t,n){this._register(ma(t,ah.MOUSE_DOWN,(function(i){return n(new _s(sa(t),i))})))};n.prototype.onmouseover=function(t,n){this._register(ma(t,ah.MOUSE_OVER,(function(i){return n(new _s(sa(t),i))})))};n.prototype.onmouseleave=function(t,n){this._register(ma(t,ah.MOUSE_LEAVE,(function(i){return n(new _s(sa(t),i))})))};n.prototype.onkeydown=function(t,n){this._register(ma(t,ah.KEY_DOWN,(function(t){return n(new ws(t))})))};n.prototype.onkeyup=function(t,n){this._register(ma(t,ah.KEY_UP,(function(t){return n(new ws(t))})))};n.prototype.oninput=function(t,n){this._register(ma(t,ah.INPUT,n))};n.prototype.onblur=function(t,n){this._register(ma(t,ah.BLUR,n))};n.prototype.onfocus=function(t,n){this._register(ma(t,ah.FOCUS,n))};n.prototype.ignoreGesture=function(t){return nk.ignoreTarget(t)};return n}(ci);var rk=11;var ek=function(t){__extends(n,t);function n(n){var i;var r=this;r=t.call(this)||this,r._onActivate=n.onActivate,r.bgDomNode=document.createElement("div"),r.bgDomNode.className="arrow-background",r.bgDomNode.style.position="absolute",r.bgDomNode.style.width=n.bgWidth+"px",r.bgDomNode.style.height=n.bgHeight+"px",n.top!==void 0&&(r.bgDomNode.style.top="0px"),n.left!==void 0&&(r.bgDomNode.style.left="0px"),n.bottom!==void 0&&(r.bgDomNode.style.bottom="0px"),n.right!==void 0&&(r.bgDomNode.style.right="0px"),r.domNode=document.createElement("div"),r.domNode.className=n.className,(i=r.domNode.classList).add.apply(i,uc.asClassNameArray(n.icon)),r.domNode.style.position="absolute",r.domNode.style.width="11px",r.domNode.style.height="11px",n.top!==void 0&&(r.domNode.style.top=n.top+"px"),n.left!==void 0&&(r.domNode.style.left=n.left+"px"),n.bottom!==void 0&&(r.domNode.style.bottom=n.bottom+"px"),n.right!==void 0&&(r.domNode.style.right=n.right+"px"),r._pointerMoveMonitor=r._register(new Kw),r._register(ya(r.bgDomNode,ah.POINTER_DOWN,(function(t){return r._arrowPointerDown(t)}))),r._register(ya(r.domNode,ah.POINTER_DOWN,(function(t){return r._arrowPointerDown(t)}))),r._pointerdownRepeatTimer=r._register(new Da),r._pointerdownScheduleRepeatTimer=r._register(new js);return r}n.prototype._arrowPointerDown=function(t){var n=this;t.target&&t.target instanceof Element&&(this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet((function(){n._pointerdownRepeatTimer.cancelAndSet((function(){return n._onActivate()}),1e3/24,sa(t))}),200),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,(function(t){}),(function(){n._pointerdownRepeatTimer.cancel(),n._pointerdownScheduleRepeatTimer.cancel()})),t.preventDefault())};return n}(ik);var ok=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._visibility=n,e._visibleClassName=i,e._invisibleClassName=r,e._domNode=null,e._isVisible=!1,e._isNeeded=!1,e._rawShouldBeVisible=!1,e._shouldBeVisible=!1,e._revealTimer=e._register(new js);return e}n.prototype.setVisibility=function(t){this._visibility!==t&&(this._visibility=t,this._updateShouldBeVisible())};n.prototype.setShouldBeVisible=function(t){this._rawShouldBeVisible=t,this._updateShouldBeVisible()};n.prototype._applyVisibilitySetting=function(){return this._visibility!==2&&(this._visibility===3||this._rawShouldBeVisible)};n.prototype._updateShouldBeVisible=function(){var t=this._applyVisibilitySetting();this._shouldBeVisible!==t&&(this._shouldBeVisible=t,this.ensureVisibility())};n.prototype.setIsNeeded=function(t){this._isNeeded!==t&&(this._isNeeded=t,this.ensureVisibility())};n.prototype.setDomNode=function(t){this._domNode=t,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)};n.prototype.ensureVisibility=function(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)};n.prototype._reveal=function(){var t=this;this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet((function(){var n;(n=t._domNode)===null||n===void 0||n.setClassName(t._visibleClassName)}),0))};n.prototype._hide=function(t){var n;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(n=this._domNode)===null||n===void 0||n.setClassName(this._invisibleClassName+(t?" fade":"")))};return n}(ci);var sk=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._lazyRender=n.lazyRender,i._host=n.host,i._scrollable=n.scrollable,i._scrollByPage=n.scrollByPage,i._scrollbarState=n.scrollbarState,i._visibilityController=i._register(new ok(n.visibility,"visible scrollbar "+n.extraScrollbarClassName,"invisible scrollbar "+n.extraScrollbarClassName)),i._visibilityController.setIsNeeded(i._scrollbarState.isNeeded()),i._pointerMoveMonitor=i._register(new Kw),i._shouldRender=!0,i.domNode=Nh(document.createElement("div")),i.domNode.setAttribute("role","presentation"),i.domNode.setAttribute("aria-hidden","true"),i._visibilityController.setDomNode(i.domNode),i.domNode.setPosition("absolute"),i._register(ma(i.domNode.domNode,ah.POINTER_DOWN,(function(t){return i._domNodePointerDown(t)})));return i}n.prototype._createArrow=function(t){var n=this._register(new ek(t));this.domNode.domNode.appendChild(n.bgDomNode),this.domNode.domNode.appendChild(n.domNode)};n.prototype._createSlider=function(t,n,i,r){var e=this;this.slider=Nh(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(t),this.slider.setLeft(n),typeof i=="number"&&this.slider.setWidth(i),typeof r=="number"&&this.slider.setHeight(r),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(ma(this.slider.domNode,ah.POINTER_DOWN,(function(t){t.button===0&&(t.preventDefault(),e._sliderPointerDown(t))}))),this.onclick(this.slider.domNode,(function(t){t.leftButton&&t.stopPropagation()}))};n.prototype._onElementSize=function(t){return this._scrollbarState.setVisibleSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender};n.prototype._onElementScrollSize=function(t){return this._scrollbarState.setScrollSize(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender};n.prototype._onElementScrollPosition=function(t){return this._scrollbarState.setScrollPosition(t)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender};n.prototype.beginReveal=function(){this._visibilityController.setShouldBeVisible(!0)};n.prototype.beginHide=function(){this._visibilityController.setShouldBeVisible(!1)};n.prototype.render=function(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))};n.prototype._domNodePointerDown=function(t){t.target===this.domNode.domNode&&this._onPointerDown(t)};n.prototype.delegatePointerDown=function(t){var n=this.domNode.domNode.getClientRects()[0].top,i=n+this._scrollbarState.getSliderPosition(),r=n+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),e=this._sliderPointerPosition(t);i<=e&&e<=r?t.button===0&&(t.preventDefault(),this._sliderPointerDown(t)):this._onPointerDown(t)};n.prototype._onPointerDown=function(t){var n,i;if(t.target===this.domNode.domNode&&typeof t.offsetX=="number"&&typeof t.offsetY=="number")n=t.offsetX,i=t.offsetY;else{var r=ja(this.domNode.domNode);n=t.pageX-r.left,i=t.pageY-r.top}var e=this._pointerDownRelativePosition(n,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(e):this._scrollbarState.getDesiredScrollPositionFromOffset(e)),t.button===0&&(t.preventDefault(),this._sliderPointerDown(t))};n.prototype._sliderPointerDown=function(t){var n=this;if(!(t.target&&t.target instanceof Element))return;var i=this._sliderPointerPosition(t),r=this._sliderOrthogonalPointerPosition(t),e=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,(function(t){var o=n._sliderOrthogonalPointerPosition(t),s=Math.abs(o-r);if(Mt&&s>140)return void n._setDesiredScrollPositionNow(e.getScrollPosition());var u=n._sliderPointerPosition(t)-i;n._setDesiredScrollPositionNow(e.getDesiredScrollPositionFromDelta(u))}),(function(){n.slider.toggleClassName("active",!1),n._host.onDragEnd()})),this._host.onDragStart()};n.prototype._setDesiredScrollPositionNow=function(t){var n={};this.writeScrollPosition(n,t),this._scrollable.setScrollPositionNow(n)};n.prototype.updateScrollbarSize=function(t){this._updateScrollbarSize(t),this._scrollbarState.setScrollbarSize(t),this._shouldRender=!0,this._lazyRender||this.render()};n.prototype.isNeeded=function(){return this._scrollbarState.isNeeded()};return n}(ik);var uk=function(){function t(t,n,i,r,e,o){this._scrollbarSize=Math.round(n),this._oppositeScrollbarSize=Math.round(i),this._arrowSize=Math.round(t),this._visibleSize=r,this._scrollSize=e,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}t.prototype.clone=function(){return new t(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)};t.prototype.setVisibleSize=function(t){var n=Math.round(t);return this._visibleSize!==n&&(this._visibleSize=n,this._refreshComputedValues(),!0)};t.prototype.setScrollSize=function(t){var n=Math.round(t);return this._scrollSize!==n&&(this._scrollSize=n,this._refreshComputedValues(),!0)};t.prototype.setScrollPosition=function(t){var n=Math.round(t);return this._scrollPosition!==n&&(this._scrollPosition=n,this._refreshComputedValues(),!0)};t.prototype.setScrollbarSize=function(t){this._scrollbarSize=Math.round(t)};t.prototype.setOppositeScrollbarSize=function(t){this._oppositeScrollbarSize=Math.round(t)};t._computeValues=function(t,n,i,r,e){var o=Math.max(0,i-t),s=Math.max(0,o-2*n),u=r>0&&r>i;if(!u)return{computedAvailableSize:Math.round(o),computedIsNeeded:u,computedSliderSize:Math.round(s),computedSliderRatio:0,computedSliderPosition:0};var a=Math.round(Math.max(20,Math.floor(i*s/r))),h=(s-a)/(r-i),c=e*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:u,computedSliderSize:Math.round(a),computedSliderRatio:h,computedSliderPosition:Math.round(c)}};t.prototype._refreshComputedValues=function(){var n=t._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=n.computedAvailableSize,this._computedIsNeeded=n.computedIsNeeded,this._computedSliderSize=n.computedSliderSize,this._computedSliderRatio=n.computedSliderRatio,this._computedSliderPosition=n.computedSliderPosition};t.prototype.getArrowSize=function(){return this._arrowSize};t.prototype.getScrollPosition=function(){return this._scrollPosition};t.prototype.getRectangleLargeSize=function(){return this._computedAvailableSize};t.prototype.getRectangleSmallSize=function(){return this._scrollbarSize};t.prototype.isNeeded=function(){return this._computedIsNeeded};t.prototype.getSliderSize=function(){return this._computedSliderSize};t.prototype.getSliderPosition=function(){return this._computedSliderPosition};t.prototype.getDesiredScrollPositionFromOffset=function(t){if(!this._computedIsNeeded)return 0;var n=t-this._arrowSize-this._computedSliderSize/2;return Math.round(n/this._computedSliderRatio)};t.prototype.getDesiredScrollPositionFromOffsetPaged=function(t){if(!this._computedIsNeeded)return 0;var n=t-this._arrowSize;var i=this._scrollPosition;return n<this._computedSliderPosition?i-=this._visibleSize:i+=this._visibleSize,i};t.prototype.getDesiredScrollPositionFromDelta=function(t){if(!this._computedIsNeeded)return 0;var n=this._computedSliderPosition+t;return Math.round(n/this._computedSliderRatio)};return t}();var ak=function(t){__extends(n,t);function n(n,i,r){var e=this;var o=n.getScrollDimensions(),s=n.getCurrentScrollPosition();if(e=t.call(this,{lazyRender:i.lazyRender,host:r,scrollbarState:new uk(i.horizontalHasArrows?i.arrowSize:0,i.horizontal===2?0:i.horizontalScrollbarSize,i.vertical===2?0:i.verticalScrollbarSize,o.width,o.scrollWidth,s.scrollLeft),visibility:i.horizontal,extraScrollbarClassName:"horizontal",scrollable:n,scrollByPage:i.scrollByPage})||this,i.horizontalHasArrows){var u=(i.arrowSize-rk)/2,a=(i.horizontalScrollbarSize-rk)/2;e._createArrow({className:"scra",icon:Hr.scrollbarButtonLeft,top:a,left:u,bottom:void 0,right:void 0,bgWidth:i.arrowSize,bgHeight:i.horizontalScrollbarSize,onActivate:function(){return e._host.onMouseWheel(new ks(null,1,0))}}),e._createArrow({className:"scra",icon:Hr.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:u,bgWidth:i.arrowSize,bgHeight:i.horizontalScrollbarSize,onActivate:function(){return e._host.onMouseWheel(new ks(null,-1,0))}})}e._createSlider(Math.floor((i.horizontalScrollbarSize-i.horizontalSliderSize)/2),0,void 0,i.horizontalSliderSize);return e}n.prototype._updateSlider=function(t,n){this.slider.setWidth(t),this.slider.setLeft(n)};n.prototype._renderDomNode=function(t,n){this.domNode.setWidth(t),this.domNode.setHeight(n),this.domNode.setLeft(0),this.domNode.setBottom(0)};n.prototype.onDidScroll=function(t){return this._shouldRender=this._onElementScrollSize(t.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(t.width)||this._shouldRender,this._shouldRender};n.prototype._pointerDownRelativePosition=function(t,n){return t};n.prototype._sliderPointerPosition=function(t){return t.pageX};n.prototype._sliderOrthogonalPointerPosition=function(t){return t.pageY};n.prototype._updateScrollbarSize=function(t){this.slider.setHeight(t)};n.prototype.writeScrollPosition=function(t,n){t.scrollLeft=n};n.prototype.updateOptions=function(t){this.updateScrollbarSize(t.horizontal===2?0:t.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._visibilityController.setVisibility(t.horizontal),this._scrollByPage=t.scrollByPage};return n}(sk);var hk=function(t){__extends(n,t);function n(n,i,r){var e=this;var o=n.getScrollDimensions(),s=n.getCurrentScrollPosition();if(e=t.call(this,{lazyRender:i.lazyRender,host:r,scrollbarState:new uk(i.verticalHasArrows?i.arrowSize:0,i.vertical===2?0:i.verticalScrollbarSize,0,o.height,o.scrollHeight,s.scrollTop),visibility:i.vertical,extraScrollbarClassName:"vertical",scrollable:n,scrollByPage:i.scrollByPage})||this,i.verticalHasArrows){var u=(i.arrowSize-rk)/2,a=(i.verticalScrollbarSize-rk)/2;e._createArrow({className:"scra",icon:Hr.scrollbarButtonUp,top:u,left:a,bottom:void 0,right:void 0,bgWidth:i.verticalScrollbarSize,bgHeight:i.arrowSize,onActivate:function(){return e._host.onMouseWheel(new ks(null,0,1))}}),e._createArrow({className:"scra",icon:Hr.scrollbarButtonDown,top:void 0,left:a,bottom:u,right:void 0,bgWidth:i.verticalScrollbarSize,bgHeight:i.arrowSize,onActivate:function(){return e._host.onMouseWheel(new ks(null,0,-1))}})}e._createSlider(0,Math.floor((i.verticalScrollbarSize-i.verticalSliderSize)/2),i.verticalSliderSize,void 0);return e}n.prototype._updateSlider=function(t,n){this.slider.setHeight(t),this.slider.setTop(n)};n.prototype._renderDomNode=function(t,n){this.domNode.setWidth(n),this.domNode.setHeight(t),this.domNode.setRight(0),this.domNode.setTop(0)};n.prototype.onDidScroll=function(t){return this._shouldRender=this._onElementScrollSize(t.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(t.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(t.height)||this._shouldRender,this._shouldRender};n.prototype._pointerDownRelativePosition=function(t,n){return n};n.prototype._sliderPointerPosition=function(t){return t.pageY};n.prototype._sliderOrthogonalPointerPosition=function(t){return t.pageX};n.prototype._updateScrollbarSize=function(t){this.slider.setWidth(t)};n.prototype.writeScrollPosition=function(t,n){t.scrollTop=n};n.prototype.updateOptions=function(t){this.updateScrollbarSize(t.vertical===2?0:t.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(t.vertical),this._scrollByPage=t.scrollByPage};return n}(sk);var ck=function(){function t(t,n,i,r,e,o,s){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(n|=0,i|=0,r|=0,e|=0,o|=0,s|=0),this.rawScrollLeft=r,this.rawScrollTop=s,n<0&&(n=0),r+n>i&&(r=i-n),r<0&&(r=0),e<0&&(e=0),s+e>o&&(s=o-e),s<0&&(s=0),this.width=n,this.scrollWidth=i,this.scrollLeft=r,this.height=e,this.scrollHeight=o,this.scrollTop=s}t.prototype.equals=function(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop};t.prototype.withScrollDimensions=function(n,i){return new t(this._forceIntegerValues,n.width!==void 0?n.width:this.width,n.scrollWidth!==void 0?n.scrollWidth:this.scrollWidth,i?this.rawScrollLeft:this.scrollLeft,n.height!==void 0?n.height:this.height,n.scrollHeight!==void 0?n.scrollHeight:this.scrollHeight,i?this.rawScrollTop:this.scrollTop)};t.prototype.withScrollPosition=function(n){return new t(this._forceIntegerValues,this.width,this.scrollWidth,n.scrollLeft!==void 0?n.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,n.scrollTop!==void 0?n.scrollTop:this.rawScrollTop)};t.prototype.createScrollEvent=function(t,n){var i=this.width!==t.width,r=this.scrollWidth!==t.scrollWidth,e=this.scrollLeft!==t.scrollLeft,o=this.height!==t.height,s=this.scrollHeight!==t.scrollHeight,u=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:n,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:i,scrollWidthChanged:r,scrollLeftChanged:e,heightChanged:o,scrollHeightChanged:s,scrollTopChanged:u}};return t}();var fk=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._scrollableBrand=void 0,i._onScroll=i._register(new ki),i.onScroll=i._onScroll.event,i._smoothScrollDuration=n.smoothScrollDuration,i._scheduleAtNextAnimationFrame=n.scheduleAtNextAnimationFrame,i._state=new ck(n.forceIntegerValues,0,0,0,0,0,0),i._smoothScrolling=null;return i}n.prototype.dispose=function(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),t.prototype.dispose.call(this)};n.prototype.setSmoothScrollDuration=function(t){this._smoothScrollDuration=t};n.prototype.validateScrollPosition=function(t){return this._state.withScrollPosition(t)};n.prototype.getScrollDimensions=function(){return this._state};n.prototype.setScrollDimensions=function(t,n){var i;var r=this._state.withScrollDimensions(t,n);this._setState(r,!!this._smoothScrolling),(i=this._smoothScrolling)===null||i===void 0||i.acceptScrollDimensions(this._state)};n.prototype.getFutureScrollPosition=function(){return this._smoothScrolling?this._smoothScrolling.to:this._state};n.prototype.getCurrentScrollPosition=function(){return this._state};n.prototype.setScrollPositionNow=function(t){var n=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(n,!1)};n.prototype.setScrollPositionSmooth=function(t,n){var i=this;if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:t.scrollLeft===void 0?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:t.scrollTop===void 0?this._smoothScrolling.to.scrollTop:t.scrollTop};var r=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===r.scrollLeft&&this._smoothScrolling.to.scrollTop===r.scrollTop)return;var e=void 0;e=n?new dk(this._smoothScrolling.from,r,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,r,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=e}else{var r=this._state.withScrollPosition(t);this._smoothScrolling=dk.start(this._state,r,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((function(){i._smoothScrolling&&(i._smoothScrolling.animationFrameDisposable=null,i._performSmoothScrolling())}))};n.prototype.hasPendingScrollAnimation=function(){return!!this._smoothScrolling};n.prototype._performSmoothScrolling=function(){var t=this;if(!this._smoothScrolling)return;var n=this._smoothScrolling.tick(),i=this._state.withScrollPosition(n);return this._setState(i,!0),this._smoothScrolling?n.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((function(){t._smoothScrolling&&(t._smoothScrolling.animationFrameDisposable=null,t._performSmoothScrolling())}))):void 0};n.prototype._setState=function(t,n){var i=this._state;i.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(i,n)))};return n}(ci);var lk=function(){function t(t,n,i){this.scrollLeft=t,this.scrollTop=n,this.isDone=i}return t}();function vk(t,n){var i=n-t;return function(n){return t+i*(1-function(t){return Math.pow(t,3)}(1-n))}}var dk=function(){function t(t,n,i,r){this.from=t,this.to=n,this.duration=r,this.startTime=i,this.animationFrameDisposable=null,this._initAnimations()}t.prototype._initAnimations=function(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)};t.prototype._initAnimation=function(t,n,i){if(Math.abs(t-n)>2.5*i){var r=void 0,e=void 0;return t<n?(r=t+.75*i,e=n-.75*i):(r=t-.75*i,e=n+.75*i),o=vk(t,r),s=vk(e,n),u=.33,function(t){return t<u?o(t/u):s((t-u)/(1-u))}}var o,s,u;return vk(t,n)};t.prototype.dispose=function(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)};t.prototype.acceptScrollDimensions=function(t){this.to=t.withScrollPosition(this.to),this._initAnimations()};t.prototype.tick=function(){return this._tick(Date.now())};t.prototype._tick=function(t){var n=(t-this.startTime)/this.duration;if(n<1){var i=this.scrollLeft(n),r=this.scrollTop(n);return new lk(i,r,!1)}return new lk(this.to.scrollLeft,this.to.scrollTop,!0)};t.prototype.combine=function(n,i,r){return t.start(n,i,r)};t.start=function(n,i,r){r+=10;var e=Date.now()-10;return new t(n,i,e,r)};return t}();var gk=function(){function t(t,n,i){this.timestamp=t,this.deltaX=n,this.deltaY=i,this.score=0}return t}();var pk=function(){function t(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}t.prototype.isPhysicalMouseWheel=function(){if(this._front===-1&&this._rear===-1)return!1;var t=1,n=0,i=1,r=this._rear;for(;;){var e=r===this._front?t:Math.pow(2,-i);if(t-=e,n+=this._memory[r].score*e,r===this._front)break;r=(this._capacity+r-1)%this._capacity,i++}return n<=.5};t.prototype.acceptStandardWheelEvent=function(t){if(es){var n=function(t){return Xo.INSTANCE.getZoomFactor(t)}(sa(t.browserEvent));this.accept(Date.now(),t.deltaX*n,t.deltaY*n)}else this.accept(Date.now(),t.deltaX,t.deltaY)};t.prototype.accept=function(t,n,i){var r=null;var e=new gk(t,n,i);this._front===-1&&this._rear===-1?(this._memory[0]=e,this._front=0,this._rear=0):(r=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=e),e.score=this._computeScore(e,r)};t.prototype._computeScore=function(t,n){if(Math.abs(t.deltaX)>0&&Math.abs(t.deltaY)>0)return 1;var i=.5;if(this._isAlmostInt(t.deltaX)&&this._isAlmostInt(t.deltaY)||(i+=.25),n){var r=Math.abs(t.deltaX),e=Math.abs(t.deltaY),o=Math.abs(n.deltaX),s=Math.abs(n.deltaY),u=Math.max(Math.min(r,o),1),a=Math.max(Math.min(e,s),1),h=Math.max(r,o),c=Math.max(e,s);h%u==0&&c%a==0&&(i-=.5)}return Math.min(Math.max(i,0),1)};t.prototype._isAlmostInt=function(t){return Math.abs(Math.round(t)-t)<.01};return t}();pk.INSTANCE=new pk;var wk=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._onScroll=e._register(new ki),e.onScroll=e._onScroll.event,e._onWillScroll=e._register(new ki),n.style.overflow="hidden",e._options=function(t){var n={lazyRender:t.lazyRender!==void 0&&t.lazyRender,className:t.className!==void 0?t.className:"",useShadows:t.useShadows===void 0||t.useShadows,handleMouseWheel:t.handleMouseWheel===void 0||t.handleMouseWheel,flipAxes:t.flipAxes!==void 0&&t.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:t.consumeMouseWheelIfScrollbarIsNeeded!==void 0&&t.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:t.alwaysConsumeMouseWheel!==void 0&&t.alwaysConsumeMouseWheel,scrollYToX:t.scrollYToX!==void 0&&t.scrollYToX,mouseWheelScrollSensitivity:t.mouseWheelScrollSensitivity!==void 0?t.mouseWheelScrollSensitivity:1,fastScrollSensitivity:t.fastScrollSensitivity!==void 0?t.fastScrollSensitivity:5,scrollPredominantAxis:t.scrollPredominantAxis===void 0||t.scrollPredominantAxis,mouseWheelSmoothScroll:t.mouseWheelSmoothScroll===void 0||t.mouseWheelSmoothScroll,arrowSize:t.arrowSize!==void 0?t.arrowSize:11,listenOnDomNode:t.listenOnDomNode!==void 0?t.listenOnDomNode:null,horizontal:t.horizontal!==void 0?t.horizontal:1,horizontalScrollbarSize:t.horizontalScrollbarSize!==void 0?t.horizontalScrollbarSize:10,horizontalSliderSize:t.horizontalSliderSize!==void 0?t.horizontalSliderSize:0,horizontalHasArrows:t.horizontalHasArrows!==void 0&&t.horizontalHasArrows,vertical:t.vertical!==void 0?t.vertical:1,verticalScrollbarSize:t.verticalScrollbarSize!==void 0?t.verticalScrollbarSize:10,verticalHasArrows:t.verticalHasArrows!==void 0&&t.verticalHasArrows,verticalSliderSize:t.verticalSliderSize!==void 0?t.verticalSliderSize:0,scrollByPage:t.scrollByPage!==void 0&&t.scrollByPage};return n.horizontalSliderSize=t.horizontalSliderSize!==void 0?t.horizontalSliderSize:n.horizontalScrollbarSize,n.verticalSliderSize=t.verticalSliderSize!==void 0?t.verticalSliderSize:n.verticalScrollbarSize,Ft&&(n.className+=" mac"),n}(i),e._scrollable=r,e._register(e._scrollable.onScroll((function(t){e._onWillScroll.fire(t),e._onDidScroll(t),e._onScroll.fire(t)})));var o={onMouseWheel:function(t){return e._onMouseWheel(t)},onDragStart:function(){return e._onDragStart()},onDragEnd:function(){return e._onDragEnd()}};e._verticalScrollbar=e._register(new hk(e._scrollable,e._options,o)),e._horizontalScrollbar=e._register(new ak(e._scrollable,e._options,o)),e._domNode=document.createElement("div"),e._domNode.className="monaco-scrollable-element "+e._options.className,e._domNode.setAttribute("role","presentation"),e._domNode.style.position="relative",e._domNode.style.overflow="hidden",e._domNode.appendChild(n),e._domNode.appendChild(e._horizontalScrollbar.domNode.domNode),e._domNode.appendChild(e._verticalScrollbar.domNode.domNode),e._options.useShadows?(e._leftShadowDomNode=Nh(document.createElement("div")),e._leftShadowDomNode.setClassName("shadow"),e._domNode.appendChild(e._leftShadowDomNode.domNode),e._topShadowDomNode=Nh(document.createElement("div")),e._topShadowDomNode.setClassName("shadow"),e._domNode.appendChild(e._topShadowDomNode.domNode),e._topLeftShadowDomNode=Nh(document.createElement("div")),e._topLeftShadowDomNode.setClassName("shadow"),e._domNode.appendChild(e._topLeftShadowDomNode.domNode)):(e._leftShadowDomNode=null,e._topShadowDomNode=null,e._topLeftShadowDomNode=null),e._listenOnDomNode=e._options.listenOnDomNode||e._domNode,e._mouseWheelToDispose=[],e._setListeningToMouseWheel(e._options.handleMouseWheel),e.onmouseover(e._listenOnDomNode,(function(t){return e._onMouseOver(t)})),e.onmouseleave(e._listenOnDomNode,(function(t){return e._onMouseLeave(t)})),e._hideTimeout=e._register(new js),e._isDragging=!1,e._mouseIsOver=!1,e._shouldRender=!0,e._revealOnScroll=!0;return e}Object.defineProperty(n.prototype,"options",{get:function(){return this._options},enumerable:false,configurable:true});n.prototype.dispose=function(){this._mouseWheelToDispose=si(this._mouseWheelToDispose),t.prototype.dispose.call(this)};n.prototype.getDomNode=function(){return this._domNode};n.prototype.getOverviewRulerLayoutInfo=function(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}};n.prototype.delegateVerticalScrollbarPointerDown=function(t){this._verticalScrollbar.delegatePointerDown(t)};n.prototype.getScrollDimensions=function(){return this._scrollable.getScrollDimensions()};n.prototype.setScrollDimensions=function(t){this._scrollable.setScrollDimensions(t,!1)};n.prototype.updateClassName=function(t){this._options.className=t,Ft&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className};n.prototype.updateOptions=function(t){t.handleMouseWheel!==void 0&&(this._options.handleMouseWheel=t.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),t.mouseWheelScrollSensitivity!==void 0&&(this._options.mouseWheelScrollSensitivity=t.mouseWheelScrollSensitivity),t.fastScrollSensitivity!==void 0&&(this._options.fastScrollSensitivity=t.fastScrollSensitivity),t.scrollPredominantAxis!==void 0&&(this._options.scrollPredominantAxis=t.scrollPredominantAxis),t.horizontal!==void 0&&(this._options.horizontal=t.horizontal),t.vertical!==void 0&&(this._options.vertical=t.vertical),t.horizontalScrollbarSize!==void 0&&(this._options.horizontalScrollbarSize=t.horizontalScrollbarSize),t.verticalScrollbarSize!==void 0&&(this._options.verticalScrollbarSize=t.verticalScrollbarSize),t.scrollByPage!==void 0&&(this._options.scrollByPage=t.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()};n.prototype.delegateScrollFromMouseWheelEvent=function(t){this._onMouseWheel(new ks(t))};n.prototype._setListeningToMouseWheel=function(t){var n=this;if(this._mouseWheelToDispose.length>0!==t&&(this._mouseWheelToDispose=si(this._mouseWheelToDispose),t)){var i=function(t){n._onMouseWheel(new ks(t))};this._mouseWheelToDispose.push(ma(this._listenOnDomNode,ah.MOUSE_WHEEL,i,{passive:!1}))}};n.prototype._onMouseWheel=function(t){var n;var i;if(!((i=t.browserEvent)===null||i===void 0)&&i.defaultPrevented)return;var r=pk.INSTANCE;r.acceptStandardWheelEvent(t);var e=!1;if(t.deltaY||t.deltaX){var o=t.deltaY*this._options.mouseWheelScrollSensitivity,s=t.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+o===0?s=o=0:Math.abs(o)>=Math.abs(s)?s=0:o=0),this._options.flipAxes&&(n=[s,o],o=n[0],s=n[1],n);var u=!Ft&&t.browserEvent&&t.browserEvent.shiftKey;!this._options.scrollYToX&&!u||s||(s=o,o=0),t.browserEvent&&t.browserEvent.altKey&&(s*=this._options.fastScrollSensitivity,o*=this._options.fastScrollSensitivity);var a=this._scrollable.getFutureScrollPosition();var h={};if(o){var c=50*o,f=a.scrollTop-(c<0?Math.floor(c):Math.ceil(c));this._verticalScrollbar.writeScrollPosition(h,f)}if(s){var c=50*s,f=a.scrollLeft-(c<0?Math.floor(c):Math.ceil(c));this._horizontalScrollbar.writeScrollPosition(h,f)}h=this._scrollable.validateScrollPosition(h),(a.scrollLeft!==h.scrollLeft||a.scrollTop!==h.scrollTop)&&(this._options.mouseWheelSmoothScroll&&r.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(h):this._scrollable.setScrollPositionNow(h),e=!0)}var l=e;!l&&this._options.alwaysConsumeMouseWheel&&(l=!0),!l&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(l=!0),l&&(t.preventDefault(),t.stopPropagation())};n.prototype._onDidScroll=function(t){this._shouldRender=this._horizontalScrollbar.onDidScroll(t)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(t)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()};n.prototype.renderNow=function(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()};n.prototype._render=function(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){var t=this._scrollable.getCurrentScrollPosition(),n=t.scrollTop>0,i=t.scrollLeft>0,r=i?" left":"",e=n?" top":"",o=i||n?" top-left-corner":"";this._leftShadowDomNode.setClassName("shadow".concat(r)),this._topShadowDomNode.setClassName("shadow".concat(e)),this._topLeftShadowDomNode.setClassName("shadow".concat(o).concat(e).concat(r))}};n.prototype._onDragStart=function(){this._isDragging=!0,this._reveal()};n.prototype._onDragEnd=function(){this._isDragging=!1,this._hide()};n.prototype._onMouseLeave=function(t){this._mouseIsOver=!1,this._hide()};n.prototype._onMouseOver=function(t){this._mouseIsOver=!0,this._reveal()};n.prototype._reveal=function(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()};n.prototype._hide=function(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())};n.prototype._scheduleHide=function(){var t=this;this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet((function(){return t._hide()}),500)};return n}(ik);var mk=function(t){__extends(n,t);function n(n,i){var r=this;(i=i||{}).mouseWheelSmoothScroll=!1;var e=new fk({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:function(t){return Sa(sa(n),t)}});r=t.call(this,n,i,e)||this,r._register(e);return r}n.prototype.setScrollPosition=function(t){this._scrollable.setScrollPositionNow(t)};return n}(wk);var bk=function(t){__extends(n,t);function n(n,i,r){return t.call(this,n,i,r)||this}n.prototype.setScrollPosition=function(t){t.reuseAnimation?this._scrollable.setScrollPositionSmooth(t,t.reuseAnimation):this._scrollable.setScrollPositionNow(t)};n.prototype.getScrollPosition=function(){return this._scrollable.getCurrentScrollPosition()};return n}(wk);var yk=function(t){__extends(n,t);function n(n,i){var r=this;(i=i||{}).mouseWheelSmoothScroll=!1;var e=new fk({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:function(t){return Sa(sa(n),t)}});r=t.call(this,n,i,e)||this,r._register(e),r._element=n,r._register(r.onScroll((function(t){t.scrollTopChanged&&(r._element.scrollTop=t.scrollTop),t.scrollLeftChanged&&(r._element.scrollLeft=t.scrollLeft)}))),r.scanDomNode();return r}n.prototype.setScrollPosition=function(t){this._scrollable.setScrollPositionNow(t)};n.prototype.getScrollPosition=function(){return this._scrollable.getCurrentScrollPosition()};n.prototype.scanDomNode=function(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})};return n}(wk);var _k=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._mouseLeaveMonitor=null,e._context=n,e.viewController=i,e.viewHelper=r,e.mouseTargetFactory=new Z_(e._context,r),e._mouseDownOperation=e._register(new kk(e._context,e.viewController,e.viewHelper,e.mouseTargetFactory,(function(t,n){return e._createMouseTarget(t,n)}),(function(t){return e._getMouseColumn(t)}))),e.lastMouseLeaveTime=-1,e._height=e._context.configuration.options.get(145).height;var o=new s_(e.viewHelper.viewDomNode);e._register(o.onContextMenu(e.viewHelper.viewDomNode,(function(t){return e._onContextMenu(t,!0)}))),e._register(o.onMouseMove(e.viewHelper.viewDomNode,(function(t){e._onMouseMove(t),e._mouseLeaveMonitor||(e._mouseLeaveMonitor=ma(e.viewHelper.viewDomNode.ownerDocument,"mousemove",(function(t){e.viewHelper.viewDomNode.contains(t.target)||e._onMouseLeave(new o_(t,!1,e.viewHelper.viewDomNode))})))}))),e._register(o.onMouseUp(e.viewHelper.viewDomNode,(function(t){return e._onMouseUp(t)}))),e._register(o.onMouseLeave(e.viewHelper.viewDomNode,(function(t){return e._onMouseLeave(t)})));var s=0;e._register(o.onPointerDown(e.viewHelper.viewDomNode,(function(t,n){s=n}))),e._register(ma(e.viewHelper.viewDomNode,ah.POINTER_UP,(function(t){e._mouseDownOperation.onPointerUp()}))),e._register(o.onMouseDown(e.viewHelper.viewDomNode,(function(t){return e._onMouseDown(t,s)}))),e._setupMouseWheelZoomListener(),e._context.addEventHandler(e);return e}n.prototype._setupMouseWheelZoomListener=function(){var t=this;var n=pk.INSTANCE;var i=0,r=zh.getZoomLevel(),e=!1,o=0;function s(t){return Ft?(t.metaKey||t.ctrlKey)&&!t.shiftKey&&!t.altKey:t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey}this._register(ma(this.viewHelper.viewDomNode,ah.MOUSE_WHEEL,(function(u){if(t.viewController.emitMouseWheel(u),!t._context.configuration.options.get(76))return;var a=new ks(u);if(n.acceptStandardWheelEvent(a),n.isPhysicalMouseWheel()){if(s(u)){var h=zh.getZoomLevel(),c=a.deltaY>0?1:-1;zh.setZoomLevel(h+c),a.preventDefault(),a.stopPropagation()}}else Date.now()-i>50&&(r=zh.getZoomLevel(),e=s(u),o=0),i=Date.now(),o+=a.deltaY,e&&(zh.setZoomLevel(r+o/5),a.preventDefault(),a.stopPropagation())}),{capture:!0,passive:!1}))};n.prototype.dispose=function(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){if(t.hasChanged(145)){var n=this._context.configuration.options.get(145).height;this._height!==n&&(this._height=n,this._mouseDownOperation.onHeightChanged())}return!1};n.prototype.onCursorStateChanged=function(t){return this._mouseDownOperation.onCursorStateChanged(t),!1};n.prototype.onFocusChanged=function(t){return!1};n.prototype.getTargetAtClientPoint=function(t,n){var i=new t_(t,n).toPageCoordinates(sa(this.viewHelper.viewDomNode)),r=r_(this.viewHelper.viewDomNode);if(i.y<r.y||i.y>r.y+r.height||i.x<r.x||i.x>r.x+r.width)return null;var e=e_(this.viewHelper.viewDomNode,r,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),r,i,e,null)};n.prototype._createMouseTarget=function(t,n){var i=this;var r=t.target;if(!this.viewHelper.viewDomNode.contains(r)){var e=Ua(this.viewHelper.viewDomNode);e&&(r=e.elementsFromPoint(t.posx,t.posy).find((function(t){return i.viewHelper.viewDomNode.contains(t)})))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),t.editorPos,t.pos,t.relativePos,n?r:null)};n.prototype._getMouseColumn=function(t){return this.mouseTargetFactory.getMouseColumn(t.relativePos)};n.prototype._onContextMenu=function(t,n){this.viewController.emitContextMenu({event:t,target:this._createMouseTarget(t,n)})};n.prototype._onMouseMove=function(t){this.mouseTargetFactory.mouseTargetIsWidget(t)||t.preventDefault(),!this._mouseDownOperation.isActive()&&(t.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:t,target:this._createMouseTarget(t,!0)}))};n.prototype._onMouseLeave=function(t){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:t,target:null})};n.prototype._onMouseUp=function(t){this.viewController.emitMouseUp({event:t,target:this._createMouseTarget(t,!0)})};n.prototype._onMouseDown=function(t,n){var i=this;var r=this._createMouseTarget(t,!0),e=r.type===6||r.type===7,o=r.type===2||r.type===3||r.type===4,s=r.type===3,u=this._context.configuration.options.get(109),a=r.type===8||r.type===5,h=r.type===9;var c=t.leftButton||t.middleButton;Ft&&t.leftButton&&t.ctrlKey&&(c=!1);var f=function(){t.preventDefault(),i.viewHelper.focusTextArea()};if(c&&(e||s&&u))f(),this._mouseDownOperation.start(r.type,t,n);else if(o)t.preventDefault();else if(a){var l=r.detail;c&&this.viewHelper.shouldSuppressMouseDownOnViewZone(l.viewZoneId)&&(f(),this._mouseDownOperation.start(r.type,t,n),t.preventDefault())}else h&&this.viewHelper.shouldSuppressMouseDownOnWidget(r.detail)&&(f(),t.preventDefault());this.viewController.emitMouseDown({event:t,target:r})};return n}(l_);var kk=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._context=n,u._viewController=i,u._viewHelper=r,u._mouseTargetFactory=e,u._createMouseTarget=o,u._getMouseColumn=s,u._mouseMoveMonitor=u._register(new a_(u._viewHelper.viewDomNode)),u._topBottomDragScrolling=u._register(new xk(u._context,u._viewHelper,u._mouseTargetFactory,(function(t,n,i){return u._dispatchMouse(t,n,i)}))),u._mouseState=new Sk,u._currentSelection=new Br(1,1,1,1),u._isActive=!1,u._lastMouseEvent=null;return u}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.isActive=function(){return this._isActive};n.prototype._onMouseDownThenMove=function(t){this._lastMouseEvent=t,this._mouseState.setModifiers(t);var n=this._findMousePosition(t,!1);n&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:t,target:n}):n.type!==13||n.outsidePosition!=="above"&&n.outsidePosition!=="below"?(this._topBottomDragScrolling.stop(),this._dispatchMouse(n,!0,1)):this._topBottomDragScrolling.start(n,t))};n.prototype.start=function(t,n,i){var r=this;this._lastMouseEvent=n,this._mouseState.setStartedOnLineNumbers(t===3),this._mouseState.setStartButtons(n),this._mouseState.setModifiers(n);var e=this._findMousePosition(n,!0);if(!e||!e.position)return;this._mouseState.trySetCount(n.detail,e.position),n.detail=this._mouseState.count;var o=this._context.configuration.options;if(!o.get(91)&&o.get(35)&&!o.get(22)&&!this._mouseState.altKey&&n.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&e.type===6&&e.position&&this._currentSelection.containsPosition(e.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,n.buttons,(function(t){return r._onMouseDownThenMove(t)}),(function(t){var n=r._findMousePosition(r._lastMouseEvent,!1);uh(t)?r._viewController.emitMouseDropCanceled():r._viewController.emitMouseDrop({event:r._lastMouseEvent,target:n?r._createMouseTarget(r._lastMouseEvent,!0):null}),r._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(e,n.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,n.buttons,(function(t){return r._onMouseDownThenMove(t)}),(function(){return r._stop()})))};n.prototype._stop=function(){this._isActive=!1,this._topBottomDragScrolling.stop()};n.prototype.onHeightChanged=function(){this._mouseMoveMonitor.stopMonitoring()};n.prototype.onPointerUp=function(){this._mouseMoveMonitor.stopMonitoring()};n.prototype.onCursorStateChanged=function(t){this._currentSelection=t.selections[0]};n.prototype._getPositionOutsideEditor=function(t){var n=t.editorPos,i=this._context.viewModel,r=this._context.viewLayout,e=this._getMouseColumn(t);if(t.posy<n.y){var o=n.y-t.posy,s=Math.max(r.getCurrentScrollTop()-o,0),u=V_.getZoneAtCoord(this._context,s);if(u){var a=this._helpPositionJumpOverViewZone(u);if(a)return U_.createOutsideEditor(e,a,"above",o)}var h=r.getLineNumberAtVerticalOffset(s);return U_.createOutsideEditor(e,new Tr(h,1),"above",o)}if(t.posy>n.y+n.height){var o=t.posy-n.y-n.height,s=r.getCurrentScrollTop()+t.relativePos.y,u=V_.getZoneAtCoord(this._context,s);if(u){var a=this._helpPositionJumpOverViewZone(u);if(a)return U_.createOutsideEditor(e,a,"below",o)}var h=r.getLineNumberAtVerticalOffset(s);return U_.createOutsideEditor(e,new Tr(h,i.getLineMaxColumn(h)),"below",o)}var c=r.getLineNumberAtVerticalOffset(r.getCurrentScrollTop()+t.relativePos.y);if(t.posx<n.x){var o=n.x-t.posx;return U_.createOutsideEditor(e,new Tr(c,1),"left",o)}if(t.posx>n.x+n.width){var o=t.posx-n.x-n.width;return U_.createOutsideEditor(e,new Tr(c,i.getLineMaxColumn(c)),"right",o)}return null};n.prototype._findMousePosition=function(t,n){var i=this._getPositionOutsideEditor(t);if(i)return i;var r=this._createMouseTarget(t,n);if(!r.position)return null;if(r.type===8||r.type===5){var e=this._helpPositionJumpOverViewZone(r.detail);if(e)return U_.createViewZone(r.type,r.element,r.mouseColumn,e,r.detail)}return r};n.prototype._helpPositionJumpOverViewZone=function(t){var n=new Tr(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=t.positionBefore,r=t.positionAfter;return i&&r?i.isBefore(n)?i:r:null};n.prototype._dispatchMouse=function(t,n,i){t.position&&this._viewController.dispatchMouse({position:t.position,mouseColumn:t.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:n,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:t.type===6&&t.detail.injectedText!==null})};return n}(ci);var xk=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._context=n,o._viewHelper=i,o._mouseTargetFactory=r,o._dispatchMouse=e,o._operation=null;return o}n.prototype.dispose=function(){t.prototype.dispose.call(this),this.stop()};n.prototype.start=function(t,n){this._operation?this._operation.setPosition(t,n):this._operation=new Ck(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,t,n)};n.prototype.stop=function(){this._operation&&(this._operation.dispose(),this._operation=null)};return n}(ci);var Ck=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._context=n,u._viewHelper=i,u._mouseTargetFactory=r,u._dispatchMouse=e,u._position=o,u._mouseEvent=s,u._lastTime=Date.now(),u._animationFrameDisposable=Sa(sa(s.browserEvent),(function(){return u._execute()}));return u}n.prototype.dispose=function(){this._animationFrameDisposable.dispose(),t.prototype.dispose.call(this)};n.prototype.setPosition=function(t,n){this._position=t,this._mouseEvent=n};n.prototype._tick=function(){var t=Date.now(),n=t-this._lastTime;return this._lastTime=t,n};n.prototype._getScrollSpeed=function(){var t=this._context.configuration.options.get(67),n=this._context.configuration.options.get(145).height/t,i=this._position.outsideDistance/t;return i<=1.5?Math.max(30,n*(1+i)):i<=3?Math.max(60,n*(2+i)):Math.max(200,n*(7+i))};n.prototype._execute=function(){var t=this;var n=this._context.configuration.options.get(67),i=this._getScrollSpeed()*(this._tick()/1e3)*n,r=this._position.outsidePosition==="above"?-i:i;this._context.viewModel.viewLayout.deltaScrollNow(0,r),this._viewHelper.renderNow();var e=this._context.viewLayout.getLinesViewportData(),o=this._position.outsidePosition==="above"?e.startLineNumber:e.endLineNumber;var s;{var u=r_(this._viewHelper.viewDomNode),a=this._context.configuration.options.get(145).horizontalScrollbarHeight,h=new Xy(this._mouseEvent.pos.x,u.y+u.height-a-.1),c=e_(this._viewHelper.viewDomNode,u,h);s=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),u,h,c,null)}s.position&&s.position.lineNumber===o||(s=this._position.outsidePosition==="above"?U_.createOutsideEditor(this._position.mouseColumn,new Tr(o,1),"above",this._position.outsideDistance):U_.createOutsideEditor(this._position.mouseColumn,new Tr(o,this._context.viewModel.getLineMaxColumn(o)),"below",this._position.outsideDistance)),this._dispatchMouse(s,!0,2),this._animationFrameDisposable=Sa(sa(s.element),(function(){return t._execute()}))};return n}(ci);var Sk=function(){function t(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}Object.defineProperty(t.prototype,"altKey",{get:function(){return this._altKey},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"ctrlKey",{get:function(){return this._ctrlKey},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"metaKey",{get:function(){return this._metaKey},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"shiftKey",{get:function(){return this._shiftKey},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"leftButton",{get:function(){return this._leftButton},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"middleButton",{get:function(){return this._middleButton},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"startedOnLineNumbers",{get:function(){return this._startedOnLineNumbers},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"count",{get:function(){return this._lastMouseDownCount},enumerable:false,configurable:true});t.prototype.setModifiers=function(t){this._altKey=t.altKey,this._ctrlKey=t.ctrlKey,this._metaKey=t.metaKey,this._shiftKey=t.shiftKey};t.prototype.setStartButtons=function(t){this._leftButton=t.leftButton,this._middleButton=t.middleButton};t.prototype.setStartedOnLineNumbers=function(t){this._startedOnLineNumbers=t};t.prototype.trySetCount=function(n,i){var r=(new Date).getTime();r-this._lastSetMouseDownCountTime>t.CLEAR_MOUSE_DOWN_COUNT_TIME&&(n=1),this._lastSetMouseDownCountTime=r,n>this._lastMouseDownCount+1&&(n=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(i)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=i,this._lastMouseDownCount=Math.min(n,this._lastMouseDownPositionEqualCount)};return t}();Sk.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var Dk=function(){function t(t,n,i){var r=this;var e=function(t){return r.emitter.fire(t)};this.emitter=new ki({onWillAddFirstListener:function(){return t.addEventListener(n,e,i)},onDidRemoveLastListener:function(){return t.removeEventListener(n,e,i)}})}Object.defineProperty(t.prototype,"event",{get:function(){return this.emitter.event},enumerable:false,configurable:true});t.prototype.dispose=function(){this.emitter.dispose()};return t}();var Ak=function(){function t(t,n,i,r,e){this.value=t,this.selectionStart=n,this.selectionEnd=i,this.selection=r,this.newlineCountBeforeSelection=e}t.prototype.toString=function(){return"[ <".concat(this.value,">, selectionStart: ").concat(this.selectionStart,", selectionEnd: ").concat(this.selectionEnd,"]")};t.readFromTextArea=function(n,i){var r=n.getValue(),e=n.getSelectionStart(),o=n.getSelectionEnd();var s;return i&&r.substring(0,e)===i.value.substring(0,i.selectionStart)&&(s=i.newlineCountBeforeSelection),new t(r,e,o,null,s)};t.prototype.collapseSelection=function(){return this.selectionStart===this.value.length?this:new t(this.value,this.value.length,this.value.length,null,void 0)};t.prototype.writeToTextArea=function(t,n,i){n.setValue(t,this.value),i&&n.setSelectionRange(t,this.selectionStart,this.selectionEnd)};t.prototype.deduceEditorPosition=function(t){var n,i,r,e,o,s,u,a;if(t<=this.selectionStart){var h=this.value.substring(t,this.selectionStart);return this._finishDeduceEditorPosition((i=(n=this.selection)===null||n===void 0?void 0:n.getStartPosition())!==null&&i!==void 0?i:null,h,-1)}if(t>=this.selectionEnd){var h=this.value.substring(this.selectionEnd,t);return this._finishDeduceEditorPosition((e=(r=this.selection)===null||r===void 0?void 0:r.getEndPosition())!==null&&e!==void 0?e:null,h,1)}var c=this.value.substring(this.selectionStart,t);if(c.indexOf("…")===-1)return this._finishDeduceEditorPosition((s=(o=this.selection)===null||o===void 0?void 0:o.getStartPosition())!==null&&s!==void 0?s:null,c,1);var f=this.value.substring(t,this.selectionEnd);return this._finishDeduceEditorPosition((a=(u=this.selection)===null||u===void 0?void 0:u.getEndPosition())!==null&&a!==void 0?a:null,f,-1)};t.prototype._finishDeduceEditorPosition=function(t,n,i){var r=0,e=-1;for(;(e=n.indexOf("\n",e+1))!==-1;)r++;return[t,i*n.length,r]};t.deduceInput=function(t,n,i){if(!t)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};var r=Math.min(Do(t.value,n.value),t.selectionStart,n.selectionStart),e=Math.min(Ao(t.value,n.value),t.value.length-t.selectionEnd,n.value.length-n.selectionEnd);t.value.substring(r,t.value.length-e);var o=n.value.substring(r,n.value.length-e),s=t.selectionStart-r,u=t.selectionEnd-r;return n.selectionStart-r===n.selectionEnd-r?{text:o,replacePrevCharCnt:t.selectionStart-r,replaceNextCharCnt:0,positionDelta:0}:{text:o,replacePrevCharCnt:u-s,replaceNextCharCnt:0,positionDelta:0}};t.deduceAndroidCompositionInput=function(t,n){if(!t)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(t.value===n.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:n.selectionEnd-t.selectionEnd};var i=Math.min(Do(t.value,n.value),t.selectionEnd),r=Math.min(Ao(t.value,n.value),t.value.length-t.selectionEnd),e=t.value.substring(i,t.value.length-r),o=n.value.substring(i,n.value.length-r);var s=t.selectionEnd-i;var u=n.selectionEnd-i;return{text:o,replacePrevCharCnt:s,replaceNextCharCnt:e.length-s,positionDelta:u-o.length}};return t}();Ak.EMPTY=new Ak("",0,0,null,void 0);var Ok=function(){function t(){}t._getPageOfLine=function(t,n){return Math.floor((t-1)/n)};t._getRangeForPage=function(t,n){var i=t*n;return new Ir(i+1,1,i+n+1,1)};t.fromEditorSelection=function(n,i,r,e){var o=t._getPageOfLine(i.startLineNumber,r),s=t._getRangeForPage(o,r),u=t._getPageOfLine(i.endLineNumber,r),a=t._getRangeForPage(u,r);var h=s.intersectRanges(new Ir(1,1,i.startLineNumber,i.startColumn));if(e&&n.getValueLengthInRange(h,1)>500){var c=n.modifyPosition(h.getEndPosition(),-500);h=Ir.fromPositions(c,h.getEndPosition())}var f=n.getValueInRange(h,1),l=n.getLineCount(),v=n.getLineMaxColumn(l);var d=a.intersectRanges(new Ir(i.endLineNumber,i.endColumn,l,v));if(e&&n.getValueLengthInRange(d,1)>500){var c=n.modifyPosition(d.getStartPosition(),500);d=Ir.fromPositions(d.getStartPosition(),c)}var g=n.getValueInRange(d,1);var p;if(o===u||o+1===u)p=n.getValueInRange(i,1);else{var c=s.intersectRanges(i),w=a.intersectRanges(i);p=n.getValueInRange(c,1)+"…"+n.getValueInRange(w,1)}return e&&p.length>1e3&&(p=p.substring(0,500)+"…"+p.substring(p.length-500,p.length)),new Ak(f+p+g,f.length,f.length+p.length,i,h.endLineNumber-h.startLineNumber)};return t}();var Ek,Mk=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Fk=function(t,n){return function(i,r){n(i,r,t)}};(function(t){t.Tap="-monaco-textarea-synthetic-tap"})(Ek||(Ek={}));var Lk={forceCopyWithSyntaxHighlighting:!1};var jk=function(){function t(){this._lastState=null}t.prototype.set=function(t,n){this._lastState={lastCopiedValue:t,data:n}};t.prototype.get=function(t){return this._lastState&&this._lastState.lastCopiedValue===t?this._lastState.data:(this._lastState=null,null)};return t}();jk.INSTANCE=new jk;var Rk=function(){function t(){this._lastTypeTextLength=0}t.prototype.handleCompositionUpdate=function(t){var n={text:t=t||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=t.length,n};return t}();var Tk=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._host=n,u._textArea=i,u._OS=r,u._browser=e,u._accessibilityService=o,u._logService=s,u._onFocus=u._register(new ki),u.onFocus=u._onFocus.event,u._onBlur=u._register(new ki),u.onBlur=u._onBlur.event,u._onKeyDown=u._register(new ki),u.onKeyDown=u._onKeyDown.event,u._onKeyUp=u._register(new ki),u.onKeyUp=u._onKeyUp.event,u._onCut=u._register(new ki),u.onCut=u._onCut.event,u._onPaste=u._register(new ki),u.onPaste=u._onPaste.event,u._onType=u._register(new ki),u.onType=u._onType.event,u._onCompositionStart=u._register(new ki),u.onCompositionStart=u._onCompositionStart.event,u._onCompositionUpdate=u._register(new ki),u.onCompositionUpdate=u._onCompositionUpdate.event,u._onCompositionEnd=u._register(new ki),u.onCompositionEnd=u._onCompositionEnd.event,u._onSelectionChangeRequest=u._register(new ki),u.onSelectionChangeRequest=u._onSelectionChangeRequest.event,u._asyncFocusGainWriteScreenReaderContent=u._register(new fi),u._asyncTriggerCut=u._register(new Ts((function(){return u._onCut.fire()}),0)),u._textAreaState=Ak.EMPTY,u._selectionChangeListener=null,u._accessibilityService.isScreenReaderOptimized()&&u.writeNativeTextAreaContent("ctor"),u._register(wi.runAndSubscribe(u._accessibilityService.onDidChangeScreenReaderOptimized,(function(){u._accessibilityService.isScreenReaderOptimized()&&!u._asyncFocusGainWriteScreenReaderContent.value?u._asyncFocusGainWriteScreenReaderContent.value=u._register(new Ts((function(){return u.writeNativeTextAreaContent("asyncFocusGain")}),0)):u._asyncFocusGainWriteScreenReaderContent.clear()}))),u._hasFocus=!1,u._currentComposition=null;var a=null;u._register(u._textArea.onKeyDown((function(t){var n=new ws(t);(n.keyCode===114||u._currentComposition&&n.keyCode===1)&&n.stopPropagation(),n.equals(9)&&n.preventDefault(),a=n,u._onKeyDown.fire(n)}))),u._register(u._textArea.onKeyUp((function(t){var n=new ws(t);u._onKeyUp.fire(n)}))),u._register(u._textArea.onCompositionStart((function(t){var n=new Rk;if(u._currentComposition)u._currentComposition=n;else{if(u._currentComposition=n,u._OS===2&&a&&a.equals(114)&&u._textAreaState.selectionStart===u._textAreaState.selectionEnd&&u._textAreaState.selectionStart>0&&u._textAreaState.value.substr(u._textAreaState.selectionStart-1,1)===t.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft"))return n.handleCompositionUpdate("x"),void u._onCompositionStart.fire({data:t.data});u._onCompositionStart.fire({data:t.data})}}))),u._register(u._textArea.onCompositionUpdate((function(t){var n=u._currentComposition;if(!n)return;if(u._browser.isAndroid){var i=Ak.readFromTextArea(u._textArea,u._textAreaState),r=Ak.deduceAndroidCompositionInput(u._textAreaState,i);return u._textAreaState=i,u._onType.fire(r),void u._onCompositionUpdate.fire(t)}var e=n.handleCompositionUpdate(t.data);u._textAreaState=Ak.readFromTextArea(u._textArea,u._textAreaState),u._onType.fire(e),u._onCompositionUpdate.fire(t)}))),u._register(u._textArea.onCompositionEnd((function(t){var n=u._currentComposition;if(!n)return;if(u._currentComposition=null,u._browser.isAndroid){var i=Ak.readFromTextArea(u._textArea,u._textAreaState),r=Ak.deduceAndroidCompositionInput(u._textAreaState,i);return u._textAreaState=i,u._onType.fire(r),void u._onCompositionEnd.fire()}var e=n.handleCompositionUpdate(t.data);u._textAreaState=Ak.readFromTextArea(u._textArea,u._textAreaState),u._onType.fire(e),u._onCompositionEnd.fire()}))),u._register(u._textArea.onInput((function(t){if(u._textArea.setIgnoreSelectionChangeTime("received input event"),u._currentComposition)return;var n=Ak.readFromTextArea(u._textArea,u._textAreaState),i=Ak.deduceInput(u._textAreaState,n,u._OS===2);(i.replacePrevCharCnt!==0||i.text.length!==1||!Oo(i.text.charCodeAt(0))&&i.text.charCodeAt(0)!==127)&&(u._textAreaState=n,i.text===""&&i.replacePrevCharCnt===0&&i.replaceNextCharCnt===0&&i.positionDelta===0||u._onType.fire(i))}))),u._register(u._textArea.onCut((function(t){u._textArea.setIgnoreSelectionChangeTime("received cut event"),u._ensureClipboardGetsEditorSelection(t),u._asyncTriggerCut.schedule()}))),u._register(u._textArea.onCopy((function(t){u._ensureClipboardGetsEditorSelection(t)}))),u._register(u._textArea.onPaste((function(t){if(u._textArea.setIgnoreSelectionChangeTime("received paste event"),t.preventDefault(),!t.clipboardData)return;var n=Ik.getTextData(t.clipboardData),i=n[0],r=n[1];i&&(r=r||jk.INSTANCE.get(i),u._onPaste.fire({text:i,metadata:r}))}))),u._register(u._textArea.onFocus((function(){var t=u._hasFocus;u._setHasFocus(!0),u._accessibilityService.isScreenReaderOptimized()&&u._browser.isSafari&&!t&&u._hasFocus&&(u._asyncFocusGainWriteScreenReaderContent.value||(u._asyncFocusGainWriteScreenReaderContent.value=new Ts((function(){return u.writeNativeTextAreaContent("asyncFocusGain")}),0)),u._asyncFocusGainWriteScreenReaderContent.value.schedule())}))),u._register(u._textArea.onBlur((function(){u._currentComposition&&(u._currentComposition=null,u.writeNativeTextAreaContent("blurWithoutCompositionEnd"),u._onCompositionEnd.fire()),u._setHasFocus(!1)}))),u._register(u._textArea.onSyntheticTap((function(){u._browser.isAndroid&&u._currentComposition&&(u._currentComposition=null,u.writeNativeTextAreaContent("tapWithoutCompositionEnd"),u._onCompositionEnd.fire())})));return u}Object.defineProperty(n.prototype,"textAreaState",{get:function(){return this._textAreaState},enumerable:false,configurable:true});n.prototype._installSelectionChangeListener=function(){var t=this;var n=0;return ma(this._textArea.ownerDocument,"selectionchange",(function(i){if(Uw.onSelectionChange(),!t._hasFocus||t._currentComposition||!t._browser.isChrome)return;var r=Date.now(),e=r-n;if(n=r,e<5)return;var o=r-t._textArea.getIgnoreSelectionChangeTime();if(t._textArea.resetSelectionChangeTime(),o<100||!t._textAreaState.selection)return;var s=t._textArea.getValue();if(t._textAreaState.value!==s)return;var u=t._textArea.getSelectionStart(),a=t._textArea.getSelectionEnd();if(t._textAreaState.selectionStart===u&&t._textAreaState.selectionEnd===a)return;var h=t._textAreaState.deduceEditorPosition(u),c=t._host.deduceModelPosition(h[0],h[1],h[2]),f=t._textAreaState.deduceEditorPosition(a),l=t._host.deduceModelPosition(f[0],f[1],f[2]),v=new Br(c.lineNumber,c.column,l.lineNumber,l.column);t._onSelectionChangeRequest.fire(v)}))};n.prototype.dispose=function(){t.prototype.dispose.call(this),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)};n.prototype.focusTextArea=function(){this._setHasFocus(!0),this.refreshFocusState()};n.prototype.isFocused=function(){return this._hasFocus};n.prototype.refreshFocusState=function(){this._setHasFocus(this._textArea.hasFocus())};n.prototype._setHasFocus=function(t){this._hasFocus!==t&&(this._hasFocus=t,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())};n.prototype._setAndWriteTextAreaState=function(t,n){this._hasFocus||(n=n.collapseSelection()),n.writeToTextArea(t,this._textArea,this._hasFocus),this._textAreaState=n};n.prototype.writeNativeTextAreaContent=function(t){!this._accessibilityService.isScreenReaderOptimized()&&t==="render"||this._currentComposition||(this._logService.trace("writeTextAreaState(reason: ".concat(t,")")),this._setAndWriteTextAreaState(t,this._host.getScreenReaderContent()))};n.prototype._ensureClipboardGetsEditorSelection=function(t){var n=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:n.isFromEmptySelection,multicursorText:n.multicursorText,mode:n.mode};jk.INSTANCE.set(this._browser.isFirefox?n.text.replace(/\r\n/g,"\n"):n.text,i),t.preventDefault(),t.clipboardData&&Ik.setTextData(t.clipboardData,n.text,n.html,i)};return n}(ci);Tk=Mk([Fk(4,jw),Fk(5,kf)],Tk);var Ik={getTextData:function(t){var n=t.getData(nv.text);var i=null;var r=t.getData("vscode-editor-data");if(typeof r=="string")try{i=JSON.parse(r),i.version!==1&&(i=null)}catch(t){}return n.length===0&&i===null&&t.files.length>0?[Array.prototype.slice.call(t.files,0).map((function(t){return t.name})).join("\n"),null]:[n,i]},setTextData:function(t,n,i,r){t.setData(nv.text,n),typeof i=="string"&&t.setData("text/html",i),t.setData("vscode-editor-data",JSON.stringify(r))}};var Bk=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._actual=n,i.onKeyDown=i._register(new Dk(i._actual,"keydown")).event,i.onKeyUp=i._register(new Dk(i._actual,"keyup")).event,i.onCompositionStart=i._register(new Dk(i._actual,"compositionstart")).event,i.onCompositionUpdate=i._register(new Dk(i._actual,"compositionupdate")).event,i.onCompositionEnd=i._register(new Dk(i._actual,"compositionend")).event,i.onBeforeInput=i._register(new Dk(i._actual,"beforeinput")).event,i.onInput=i._register(new Dk(i._actual,"input")).event,i.onCut=i._register(new Dk(i._actual,"cut")).event,i.onCopy=i._register(new Dk(i._actual,"copy")).event,i.onPaste=i._register(new Dk(i._actual,"paste")).event,i.onFocus=i._register(new Dk(i._actual,"focus")).event,i.onBlur=i._register(new Dk(i._actual,"blur")).event,i._onSyntheticTap=i._register(new ki),i.onSyntheticTap=i._onSyntheticTap.event,i._ignoreSelectionChangeTime=0,i._register(i.onKeyDown((function(){return Uw.onKeyDown()}))),i._register(i.onBeforeInput((function(){return Uw.onBeforeInput()}))),i._register(i.onInput((function(){return Uw.onInput()}))),i._register(i.onKeyUp((function(){return Uw.onKeyUp()}))),i._register(ma(i._actual,Ek.Tap,(function(){return i._onSyntheticTap.fire()})));return i}Object.defineProperty(n.prototype,"ownerDocument",{get:function(){return this._actual.ownerDocument},enumerable:false,configurable:true});n.prototype.hasFocus=function(){var t=Ua(this._actual);return t?t.activeElement===this._actual:!!this._actual.isConnected&&Ka()===this._actual};n.prototype.setIgnoreSelectionChangeTime=function(t){this._ignoreSelectionChangeTime=Date.now()};n.prototype.getIgnoreSelectionChangeTime=function(){return this._ignoreSelectionChangeTime};n.prototype.resetSelectionChangeTime=function(){this._ignoreSelectionChangeTime=0};n.prototype.getValue=function(){return this._actual.value};n.prototype.setValue=function(t,n){var i=this._actual;i.value!==n&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=n)};n.prototype.getSelectionStart=function(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart};n.prototype.getSelectionEnd=function(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd};n.prototype.setSelectionRange=function(t,n,i){var r=this._actual;var e=null;var o=Ua(r);e=o?o.activeElement:Ka();var s=sa(e),u=e===r,a=r.selectionStart,h=r.selectionEnd;if(u&&a===n&&h===i)is&&s.parent!==s&&r.focus();else{if(u)return this.setIgnoreSelectionChangeTime("setSelectionRange"),r.setSelectionRange(n,i),void(is&&s.parent!==s&&r.focus());try{var c=function(t){var n=[];for(var i=0;t&&t.nodeType===t.ELEMENT_NODE;i++)n[i]=t.scrollTop,t=t.parentNode;return n}(r);this.setIgnoreSelectionChangeTime("setSelectionRange"),r.focus(),r.setSelectionRange(n,i),function(t,n){for(var i=0;t&&t.nodeType===t.ELEMENT_NODE;i++)t.scrollTop!==n[i]&&(t.scrollTop=n[i]),t=t.parentNode}(r,c)}catch(t){}}};return n}(ci);var Nk=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,i,r)||this,e._register(nk.addTarget(e.viewHelper.linesContentDomNode)),e._register(ma(e.viewHelper.linesContentDomNode,X_.Tap,(function(t){return e.onTap(t)}))),e._register(ma(e.viewHelper.linesContentDomNode,X_.Change,(function(t){return e.onChange(t)}))),e._register(ma(e.viewHelper.linesContentDomNode,X_.Contextmenu,(function(t){return e._onContextMenu(new o_(t,!1,e.viewHelper.viewDomNode),!1)}))),e._lastPointerType="mouse",e._register(ma(e.viewHelper.linesContentDomNode,"pointerdown",(function(t){var n=t.pointerType;e._lastPointerType=n!=="mouse"?n==="touch"?"touch":"pen":"mouse"})));var o=new u_(e.viewHelper.viewDomNode);e._register(o.onPointerMove(e.viewHelper.viewDomNode,(function(t){return e._onMouseMove(t)}))),e._register(o.onPointerUp(e.viewHelper.viewDomNode,(function(t){return e._onMouseUp(t)}))),e._register(o.onPointerLeave(e.viewHelper.viewDomNode,(function(t){return e._onMouseLeave(t)}))),e._register(o.onPointerDown(e.viewHelper.viewDomNode,(function(t,n){return e._onMouseDown(t,n)})));return e}n.prototype.onTap=function(t){t.initialTarget&&this.viewHelper.linesContentDomNode.contains(t.initialTarget)&&(t.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(t,!1))};n.prototype.onChange=function(t){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-t.translationX,-t.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(t,!0)};n.prototype._dispatchGesture=function(t,n){var i=this._createMouseTarget(new o_(t,!1,this.viewHelper.viewDomNode),!1);i.position&&this.viewController.dispatchMouse({position:i.position,mouseColumn:i.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:t.tapCount,inSelectionMode:n,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:i.type===6&&i.detail.injectedText!==null})};n.prototype._onMouseDown=function(n,i){n.browserEvent.pointerType!=="touch"&&t.prototype._onMouseDown.call(this,n,i)};return n}(_k);var Pk=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,i,r)||this,e._register(nk.addTarget(e.viewHelper.linesContentDomNode)),e._register(ma(e.viewHelper.linesContentDomNode,X_.Tap,(function(t){return e.onTap(t)}))),e._register(ma(e.viewHelper.linesContentDomNode,X_.Change,(function(t){return e.onChange(t)}))),e._register(ma(e.viewHelper.linesContentDomNode,X_.Contextmenu,(function(t){return e._onContextMenu(new o_(t,!1,e.viewHelper.viewDomNode),!1)})));return e}n.prototype.onTap=function(t){t.preventDefault(),this.viewHelper.focusTextArea();var n=this._createMouseTarget(new o_(t,!1,this.viewHelper.viewDomNode),!1);if(n.position){var i=document.createEvent("CustomEvent");i.initEvent(Ek.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(i),this.viewController.moveTo(n.position,1)}};n.prototype.onChange=function(t){this._context.viewModel.viewLayout.deltaScrollNow(-t.translationX,-t.translationY)};return n}(_k);var Wk=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,(It||Zt&&Bt)&&as?e.handler=e._register(new Nk(n,i,r)):Xe.TouchEvent?e.handler=e._register(new Pk(n,i,r)):e.handler=e._register(new _k(n,i,r));return e}n.prototype.getTargetAtClientPoint=function(t,n){return this.handler.getTargetAtClientPoint(t,n)};return n}(ci);var Hk=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(l_);var zk=Zh("themeService");function Uk(t){return{id:t}}function Kk(t){switch(t){case x_.DARK:return"vs-dark";case x_.HIGH_CONTRAST_DARK:return"hc-black";case x_.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}var Vk="base.contributions.theming",qk=new(function(){function t(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new ki}t.prototype.onColorThemeChange=function(t){var n=this;return this.themingParticipants.push(t),this.onThemingParticipantAddedEmitter.fire(t),ai((function(){var i=n.themingParticipants.indexOf(t);n.themingParticipants.splice(i,1)}))};t.prototype.getThemingParticipants=function(){return this.themingParticipants};return t}());function Gk(t){return qk.onColorThemeChange(t)}of.add(Vk,qk);var $k=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.themeService=n,i.theme=n.getColorTheme(),i._register(i.themeService.onDidColorThemeChange((function(t){return i.onThemeChange(t)})));return i}n.prototype.onThemeChange=function(t){this.theme=t,this.updateStyles()};n.prototype.updateStyles=function(){};return n}(ci);var Jk=Jw("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Background color for the highlight of line at the cursor position.")),Zk=Jw("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:am},ht(0,"Background color for the border around the line at the cursor position."));Jw("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},ht(0,"Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),Jw("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:hm,hcLight:hm},ht(0,"Background color of the border around highlighted ranges."),!0),Jw("editor.symbolHighlightBackground",{dark:Im,light:Im,hcDark:null,hcLight:null},ht(0,"Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),Jw("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:hm,hcLight:hm},ht(0,"Background color of the border around highlighted symbols."),!0);var Qk=Jw("editorCursor.foreground",{dark:"#AEAFAD",light:Ig.black,hcDark:Ig.white,hcLight:"#0F4A85"},ht(0,"Color of the editor cursor.")),Yk=Jw("editorCursor.background",null,ht(0,"The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),Xk=Jw("editorMultiCursor.primary.foreground",{dark:Qk,light:Qk,hcDark:Qk,hcLight:Qk},ht(0,"Color of the primary editor cursor when multiple cursors are present.")),tx=Jw("editorMultiCursor.primary.background",{dark:Yk,light:Yk,hcDark:Yk,hcLight:Yk},ht(0,"The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),nx=Jw("editorMultiCursor.secondary.foreground",{dark:Qk,light:Qk,hcDark:Qk,hcLight:Qk},ht(0,"Color of secondary editor cursors when multiple cursors are present.")),ix=Jw("editorMultiCursor.secondary.background",{dark:Yk,light:Yk,hcDark:Yk,hcLight:Yk},ht(0,"The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),rx=Jw("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},ht(0,"Color of whitespace characters in the editor.")),ex=Jw("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:Ig.white,hcLight:"#292929"},ht(0,"Color of editor line numbers.")),ox=Jw("editorIndentGuide.background",{dark:rx,light:rx,hcDark:rx,hcLight:rx},ht(0,"Color of the editor indentation guides."),!1,ht(0,"'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),sx=Jw("editorIndentGuide.activeBackground",{dark:rx,light:rx,hcDark:rx,hcLight:rx},ht(0,"Color of the active editor indentation guides."),!1,ht(0,"'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),ux=Jw("editorIndentGuide.background1",{dark:ox,light:ox,hcDark:ox,hcLight:ox},ht(0,"Color of the editor indentation guides (1).")),ax=Jw("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the editor indentation guides (2).")),hx=Jw("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the editor indentation guides (3).")),cx=Jw("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the editor indentation guides (4).")),fx=Jw("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the editor indentation guides (5).")),lx=Jw("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the editor indentation guides (6).")),vx=Jw("editorIndentGuide.activeBackground1",{dark:sx,light:sx,hcDark:sx,hcLight:sx},ht(0,"Color of the active editor indentation guides (1).")),dx=Jw("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the active editor indentation guides (2).")),gx=Jw("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the active editor indentation guides (3).")),px=Jw("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the active editor indentation guides (4).")),wx=Jw("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the active editor indentation guides (5).")),mx=Jw("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Color of the active editor indentation guides (6).")),bx=Jw("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:hm,hcLight:hm},ht(0,"Color of editor active line number"),!1,ht(0,"Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));Jw("editorLineNumber.activeForeground",{dark:bx,light:bx,hcDark:bx,hcLight:bx},ht(0,"Color of editor active line number"));var yx=Jw("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Color of the final editor line when editor.renderFinalNewline is set to dimmed."));Jw("editorRuler.foreground",{dark:"#5A5A5A",light:Ig.lightgrey,hcDark:Ig.white,hcLight:"#292929"},ht(0,"Color of the editor rulers.")),Jw("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},ht(0,"Foreground color of editor CodeLens")),Jw("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},ht(0,"Background color behind matching brackets")),Jw("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:am,hcLight:am},ht(0,"Color for matching brackets boxes"));var _x=Jw("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},ht(0,"Color of the overview ruler border.")),kx=Jw("editorOverviewRuler.background",null,ht(0,"Background color of the editor overview ruler."));Jw("editorGutter.background",{dark:mm,light:mm,hcDark:mm,hcLight:mm},ht(0,"Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),Jw("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:Ig.fromHex("#fff").transparent(.8),hcLight:am},ht(0,"Border color of unnecessary (unused) source code in the editor."));var xx=Jw("editorUnnecessaryCode.opacity",{dark:Ig.fromHex("#000a"),light:Ig.fromHex("#0007"),hcDark:null,hcLight:null},ht(0,"Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out."));Jw("editorGhostText.border",{dark:null,light:null,hcDark:Ig.fromHex("#fff").transparent(.8),hcLight:Ig.fromHex("#292929").transparent(.8)},ht(0,"Border color of ghost text in the editor.")),Jw("editorGhostText.foreground",{dark:Ig.fromHex("#ffffff56"),light:Ig.fromHex("#0007"),hcDark:null,hcLight:null},ht(0,"Foreground color of the ghost text in the editor.")),Jw("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},ht(0,"Background color of the ghost text in the editor."));var Cx=new Ig(new jg(0,122,204,.6)),Sx=Jw("editorOverviewRuler.rangeHighlightForeground",{dark:Cx,light:Cx,hcDark:Cx,hcLight:Cx},ht(0,"Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Dx=Jw("editorOverviewRuler.errorForeground",{dark:new Ig(new jg(255,18,18,.7)),light:new Ig(new jg(255,18,18,.7)),hcDark:new Ig(new jg(255,50,50,1)),hcLight:"#B5200D"},ht(0,"Overview ruler marker color for errors.")),Ax=Jw("editorOverviewRuler.warningForeground",{dark:Dm,light:Dm,hcDark:Am,hcLight:Am},ht(0,"Overview ruler marker color for warnings.")),Ox=Jw("editorOverviewRuler.infoForeground",{dark:Om,light:Om,hcDark:Em,hcLight:Em},ht(0,"Overview ruler marker color for infos.")),Ex=Jw("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},ht(0,"Foreground color of brackets (1). Requires enabling bracket pair colorization.")),Mx=Jw("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},ht(0,"Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Fx=Jw("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},ht(0,"Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Lx=Jw("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Foreground color of brackets (4). Requires enabling bracket pair colorization.")),jx=Jw("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Rx=Jw("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Foreground color of brackets (6). Requires enabling bracket pair colorization.")),Tx=Jw("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Ig(new jg(255,18,18,.8)),light:new Ig(new jg(255,18,18,.8)),hcDark:new Ig(new jg(255,50,50,1)),hcLight:""},ht(0,"Foreground color of unexpected brackets.")),Ix=Jw("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Bx=Jw("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Nx=Jw("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Px=Jw("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Wx=Jw("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Hx=Jw("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),zx=Jw("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Ux=Jw("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Kx=Jw("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Vx=Jw("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),qx=Jw("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),Gx=Jw("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},ht(0,"Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));Jw("editorUnicodeHighlight.border",{dark:Dm,light:Dm,hcDark:Dm,hcLight:Dm},ht(0,"Border color used to highlight unicode characters.")),Jw("editorUnicodeHighlight.background",{dark:Sm,light:Sm,hcDark:Sm,hcLight:Sm},ht(0,"Background color used to highlight unicode characters.")),Gk((function(t,n){var i=t.getColor(mm),r=t.getColor(Jk),e=r&&!r.isTransparent()?r:i;e&&n.addRule(".monaco-editor .inputarea.ime-input { background-color: ".concat(e,"; }"))}));var $x=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._context=n,i._readConfig(),i._lastCursorModelPosition=new Tr(1,1),i._renderResult=null,i._activeLineNumber=1,i._context.addEventHandler(i);return i}n.prototype._readConfig=function(){var t=this._context.configuration.options;this._lineHeight=t.get(67);var n=t.get(68);this._renderLineNumbers=n.renderType,this._renderCustomLineNumbers=n.renderFn,this._renderFinalNewline=t.get(95);var i=t.get(145);this._lineNumbersLeft=i.lineNumbersLeft,this._lineNumbersWidth=i.lineNumbersWidth};n.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){return this._readConfig(),!0};n.prototype.onCursorStateChanged=function(t){var n=t.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n);var i=!1;return this._activeLineNumber!==n.lineNumber&&(this._activeLineNumber=n.lineNumber,i=!0),this._renderLineNumbers!==2&&this._renderLineNumbers!==3||(i=!0),i};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype.onDecorationsChanged=function(t){return t.affectsLineNumber};n.prototype._getLineRenderLineNumber=function(t){var n=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Tr(t,1));if(n.column!==1)return"";var i=n.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(i);if(this._renderLineNumbers===2){var r=Math.abs(this._lastCursorModelPosition.lineNumber-i);return r===0?'<span class="relative-current-line-number">'+i+"</span>":String(r)}return this._renderLineNumbers===3?this._lastCursorModelPosition.lineNumber===i||i%10==0||i===this._context.viewModel.getLineCount()?String(i):"":String(i)};n.prototype.prepareRender=function(t){if(this._renderLineNumbers===0)return void(this._renderResult=null);var i=Lt?this._lineHeight%2==0?" lh-even":" lh-odd":"",r=t.visibleRange.startLineNumber,e=t.visibleRange.endLineNumber,o=this._context.viewModel.getDecorationsInViewport(t.visibleRange).filter((function(t){return!!t.options.lineNumberClassName}));o.sort((function(t,n){return Ir.compareRangesUsingEnds(t.range,n.range)}));var s=0;var u=this._context.viewModel.getLineCount(),a=[];for(var h=r;h<=e;h++){var c=h-r;var f=this._getLineRenderLineNumber(h),l="";for(;s<o.length&&o[s].range.endLineNumber<h;)s++;for(var v=s;v<o.length;v++){var d=o[v],g=d.range,p=d.options;g.startLineNumber<=h&&(l+=" "+p.lineNumberClassName)}f||l?(h===u&&this._context.viewModel.getLineLength(h)===0&&(this._renderFinalNewline==="off"&&(f=""),this._renderFinalNewline==="dimmed"&&(l+=" dimmed-line-number")),h===this._activeLineNumber&&(l+=" active-line-number"),a[c]='<div class="'.concat(n.CLASS_NAME).concat(i).concat(l,'" style="left:').concat(this._lineNumbersLeft,"px;width:").concat(this._lineNumbersWidth,'px;">').concat(f,"</div>")):a[c]=""}this._renderResult=a};n.prototype.render=function(t,n){if(!this._renderResult)return"";var i=n-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]};return n}(Hk);$x.CLASS_NAME="line-numbers",Gk((function(t,n){var i=t.getColor(ex),r=t.getColor(yx);r?n.addRule(".monaco-editor .line-numbers.dimmed-line-number { color: ".concat(r,"; }")):i&&n.addRule(".monaco-editor .line-numbers.dimmed-line-number { color: ".concat(i.transparent(.4),"; }"))}));var Jx=function(t){__extends(n,t);function n(i){var r=t.call(this,i)||this;var e=r._context.configuration.options,o=e.get(145);r._canUseLayerHinting=!e.get(32),r._contentLeft=o.contentLeft,r._glyphMarginLeft=o.glyphMarginLeft,r._glyphMarginWidth=o.glyphMarginWidth,r._domNode=Nh(document.createElement("div")),r._domNode.setClassName(n.OUTER_CLASS_NAME),r._domNode.setPosition("absolute"),r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true"),r._glyphMarginBackgroundDomNode=Nh(document.createElement("div")),r._glyphMarginBackgroundDomNode.setClassName(n.CLASS_NAME),r._domNode.appendChild(r._glyphMarginBackgroundDomNode);return r}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.getDomNode=function(){return this._domNode};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options,i=n.get(145);return this._canUseLayerHinting=!n.get(32),this._contentLeft=i.contentLeft,this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,!0};n.prototype.onScrollChanged=function(n){return t.prototype.onScrollChanged.call(this,n)||n.scrollTopChanged};n.prototype.prepareRender=function(t){};n.prototype.render=function(t){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");var n=t.scrollTop-t.bigNumbersDelta;this._domNode.setTop(-n);var i=Math.min(t.scrollHeight,1e6);this._domNode.setHeight(i),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(i)};return n}(v_);Jx.CLASS_NAME="glyph-margin",Jx.OUTER_CLASS_NAME="margin";var Zx="monaco-mouse-cursor-text",Qx=new(function(){function t(){this._onDidChange=new ki,this.onDidChange=this._onDidChange.event,this._enabled=!0}Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},enumerable:false,configurable:true});t.prototype.enable=function(){this._enabled=!0,this._onDidChange.fire()};t.prototype.disable=function(){this._enabled=!1,this._onDidChange.fire()};return t}()),Yx=Zh("keybindingService");var Xx=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},tC=function(t,n){return function(i,r){n(i,r,t)}};var nC=function(){function t(t,n,i,r,e){this._context=t,this.modelLineNumber=n,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=r,this.distanceToModelLineEnd=e,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}t.prototype.prepareRender=function(t){var n=new Tr(this.modelLineNumber,this.distanceToModelLineStart+1),i=new Tr(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=t.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=t.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)};t.prototype.definePresentation=function(t){return this._previousPresentation||(this._previousPresentation=t||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation};return t}();var iC=is;var rC=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this,n)||this,s._keybindingService=e,s._instantiationService=o,s._primaryCursorPosition=new Tr(1,1),s._primaryCursorVisibleRange=null,s._viewController=i,s._visibleRangeProvider=r,s._scrollLeft=0,s._scrollTop=0;var u=s._context.configuration.options,a=u.get(145);s._setAccessibilityOptions(u),s._contentLeft=a.contentLeft,s._contentWidth=a.contentWidth,s._contentHeight=a.height,s._fontInfo=u.get(50),s._lineHeight=u.get(67),s._emptySelectionClipboard=u.get(37),s._copyWithSyntaxHighlighting=u.get(25),s._visibleTextArea=null,s._selections=[new Br(1,1,1,1)],s._modelSelections=[new Br(1,1,1,1)],s._lastRenderPosition=null,s.textArea=Nh(document.createElement("textarea")),d_.write(s.textArea,7),s.textArea.setClassName("inputarea ".concat(Zx)),s.textArea.setAttribute("wrap",s._textAreaWrapping&&!s._visibleTextArea?"on":"off");var h=s._context.viewModel.model.getOptions().tabSize;s.textArea.domNode.style.tabSize=h*s._fontInfo.spaceWidth+"px",s.textArea.setAttribute("autocorrect","off"),s.textArea.setAttribute("autocapitalize","off"),s.textArea.setAttribute("autocomplete","off"),s.textArea.setAttribute("spellcheck","false"),s.textArea.setAttribute("aria-label",s._getAriaLabel(u)),s.textArea.setAttribute("aria-required",u.get(5)?"true":"false"),s.textArea.setAttribute("tabindex",String(u.get(124))),s.textArea.setAttribute("role","textbox"),s.textArea.setAttribute("aria-roledescription",ht(0,"editor")),s.textArea.setAttribute("aria-multiline","true"),s.textArea.setAttribute("aria-autocomplete",u.get(91)?"none":"both"),s._ensureReadOnlyAttribute(),s.textAreaCover=Nh(document.createElement("div")),s.textAreaCover.setPosition("absolute");var c={getLineCount:function(){return s._context.viewModel.getLineCount()},getLineMaxColumn:function(t){return s._context.viewModel.getLineMaxColumn(t)},getValueInRange:function(t,n){return s._context.viewModel.getValueInRange(t,n)},getValueLengthInRange:function(t,n){return s._context.viewModel.getValueLengthInRange(t,n)},modifyPosition:function(t,n){return s._context.viewModel.modifyPosition(t,n)}},f={getDataToCopy:function(){var t=s._context.viewModel.getPlainTextToCopy(s._modelSelections,s._emptySelectionClipboard,Mt),n=s._context.viewModel.model.getEOL(),i=s._emptySelectionClipboard&&s._modelSelections.length===1&&s._modelSelections[0].isEmpty(),r=Array.isArray(t)?t:null,e=Array.isArray(t)?t.join(n):t;var o,u=null;if(Lk.forceCopyWithSyntaxHighlighting||s._copyWithSyntaxHighlighting&&e.length<65536){var a=s._context.viewModel.getRichTextToCopy(s._modelSelections,s._emptySelectionClipboard);a&&(o=a.html,u=a.mode)}return{isFromEmptySelection:i,multicursorText:r,text:e,html:o,mode:u}},getScreenReaderContent:function(){if(s._accessibilitySupport===1){var t=s._selections[0];if(Ft&&t.isEmpty()){var n=t.getStartPosition();var i=s._getWordBeforePosition(n);if(i.length===0&&(i=s._getCharacterBeforePosition(n)),i.length>0)return new Ak(i,i.length,i.length,Ir.fromPositions(n),0)}if(Ft&&!t.isEmpty()&&c.getValueLengthInRange(t,0)<500){var n=c.getValueInRange(t,0);return new Ak(n,0,n.length,t,0)}if(os&&!t.isEmpty()){var n="vscode-placeholder";return new Ak(n,0,n.length,null,void 0)}return Ak.EMPTY}if(us){var t=s._selections[0];if(t.isEmpty()){var r=t.getStartPosition(),e=s._getAndroidWordAtPosition(r),n=e[0],i=e[1];if(n.length>0)return new Ak(n,i,i,Ir.fromPositions(r),0)}return Ak.EMPTY}return Ok.fromEditorSelection(c,s._selections[0],s._accessibilityPageSize,s._accessibilitySupport===0)},deduceModelPosition:function(t,n,i){return s._context.viewModel.deduceModelPositionRelativeToViewPosition(t,n,i)}},l=s._register(new Bk(s.textArea.domNode));s._textAreaInput=s._register(s._instantiationService.createInstance(Tk,f,l,zt,{isAndroid:us,isChrome:es,isFirefox:is,isSafari:os})),s._register(s._textAreaInput.onKeyDown((function(t){s._viewController.emitKeyDown(t)}))),s._register(s._textAreaInput.onKeyUp((function(t){s._viewController.emitKeyUp(t)}))),s._register(s._textAreaInput.onPaste((function(t){var n=!1,i=null,r=null;t.metadata&&(n=s._emptySelectionClipboard&&!!t.metadata.isFromEmptySelection,i=t.metadata.multicursorText!==void 0?t.metadata.multicursorText:null,r=t.metadata.mode),s._viewController.paste(t.text,n,i,r)}))),s._register(s._textAreaInput.onCut((function(){s._viewController.cut()}))),s._register(s._textAreaInput.onType((function(t){t.replacePrevCharCnt||t.replaceNextCharCnt||t.positionDelta?s._viewController.compositionType(t.text,t.replacePrevCharCnt,t.replaceNextCharCnt,t.positionDelta):s._viewController.type(t.text)}))),s._register(s._textAreaInput.onSelectionChangeRequest((function(t){s._viewController.setSelection(t)}))),s._register(s._textAreaInput.onCompositionStart((function(t){var n=s.textArea.domNode,i=s._modelSelections[0],r=function(){var t=n.value.substring(0,Math.min(n.selectionStart,n.selectionEnd)),r=t.lastIndexOf("\n"),e=t.substring(r+1),o=e.lastIndexOf("\t"),u=e.length-o-1,a=i.getStartPosition(),h=Math.min(a.column-1,u),c=a.column-1-h,f=e.substring(0,e.length-h),l=s._context.viewModel.model.getOptions().tabSize,v=function(t,n,i,r){if(n.length===0)return 0;var e=t.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";var o=t.createElement("span");Ph(o,i),o.style.whiteSpace="pre",o.style.tabSize=r*i.spaceWidth+"px",o.append(n),e.appendChild(o),t.body.appendChild(e);var s=o.offsetWidth;return t.body.removeChild(e),s}(s.textArea.domNode.ownerDocument,f,s._fontInfo,l);return{distanceToModelLineStart:c,widthOfHiddenTextBefore:v}}(),e=r.distanceToModelLineStart,o=r.widthOfHiddenTextBefore,u=function(){var t=n.value.substring(Math.max(n.selectionStart,n.selectionEnd)),r=t.indexOf("\n"),e=r===-1?t:t.substring(0,r),o=e.indexOf("\t"),u=o===-1?e.length:e.length-o-1,a=i.getEndPosition(),h=Math.min(s._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column,u);return{distanceToModelLineEnd:s._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column-h}}().distanceToModelLineEnd;s._context.viewModel.revealRange("keyboard",!0,Ir.fromPositions(s._selections[0].getStartPosition()),0,1),s._visibleTextArea=new nC(s._context,i.startLineNumber,e,o,u),s.textArea.setAttribute("wrap",s._textAreaWrapping&&!s._visibleTextArea?"on":"off"),s._visibleTextArea.prepareRender(s._visibleRangeProvider),s._render(),s.textArea.setClassName("inputarea ".concat(Zx," ime-input")),s._viewController.compositionStart(),s._context.viewModel.onCompositionStart()}))),s._register(s._textAreaInput.onCompositionUpdate((function(t){s._visibleTextArea&&(s._visibleTextArea.prepareRender(s._visibleRangeProvider),s._render())}))),s._register(s._textAreaInput.onCompositionEnd((function(){s._visibleTextArea=null,s.textArea.setAttribute("wrap",s._textAreaWrapping&&!s._visibleTextArea?"on":"off"),s._render(),s.textArea.setClassName("inputarea ".concat(Zx)),s._viewController.compositionEnd(),s._context.viewModel.onCompositionEnd()}))),s._register(s._textAreaInput.onFocus((function(){s._context.viewModel.setHasFocus(!0)}))),s._register(s._textAreaInput.onBlur((function(){s._context.viewModel.setHasFocus(!1)}))),s._register(Qx.onDidChange((function(){s._ensureReadOnlyAttribute()})));return s}n.prototype.writeScreenReaderContent=function(t){this._textAreaInput.writeNativeTextAreaContent(t)};n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype._getAndroidWordAtPosition=function(t){var n=this._context.viewModel.getLineContent(t.lineNumber),i=ld('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',[]);var r=!0,e=t.column,o=!0,s=t.column,u=0;for(;u<50&&(r||o);){if(r&&e<=1&&(r=!1),r){var a=n.charCodeAt(e-2);i.get(a)!==0?r=!1:e--}if(o&&s>n.length&&(o=!1),o){var a=n.charCodeAt(s-1);i.get(a)!==0?o=!1:s++}u++}return[n.substring(e-1,s-1),t.column-e]};n.prototype._getWordBeforePosition=function(t){var n=this._context.viewModel.getLineContent(t.lineNumber),i=ld(this._context.configuration.options.get(131),[]);var r=t.column,e=0;for(;r>1;){var o=n.charCodeAt(r-2);if(i.get(o)!==0||e>50)return n.substring(r-1,t.column-1);e++,r--}return n.substring(0,t.column-1)};n.prototype._getCharacterBeforePosition=function(t){if(t.column>1){var n=this._context.viewModel.getLineContent(t.lineNumber).charAt(t.column-2);if(!Oo(n.charCodeAt(0)))return n}return""};n.prototype._getAriaLabel=function(t){var n,i,r;if(t.get(2)===1){var e=(n=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))===null||n===void 0?void 0:n.getAriaLabel(),o=(i=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))===null||i===void 0?void 0:i.getAriaLabel(),s=(r=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))===null||r===void 0?void 0:r.getAriaLabel(),u=ht(0,"The editor is not accessible at this time.");return e?ht(0,"{0} To enable screen reader optimized mode, use {1}",u,e):o?ht(0,"{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",u,o):s?ht(0,"{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",u,s):u}return t.get(4)};n.prototype._setAccessibilityOptions=function(t){this._accessibilitySupport=t.get(2);var n=t.get(3);this._accessibilitySupport===2&&n===Vn.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=n;var i=t.get(145).wrappingColumn;if(i!==-1&&this._accessibilitySupport!==1){var r=t.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(i*r.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=iC?0:1};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options,i=n.get(145);this._setAccessibilityOptions(n),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=n.get(50),this._lineHeight=n.get(67),this._emptySelectionClipboard=n.get(37),this._copyWithSyntaxHighlighting=n.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");var r=this._context.viewModel.model.getOptions().tabSize;return this.textArea.domNode.style.tabSize=r*this._fontInfo.spaceWidth+"px",this.textArea.setAttribute("aria-label",this._getAriaLabel(n)),this.textArea.setAttribute("aria-required",n.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(n.get(124))),(t.hasChanged(34)||t.hasChanged(91))&&this._ensureReadOnlyAttribute(),t.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0};n.prototype.onCursorStateChanged=function(t){return this._selections=t.selections.slice(0),this._modelSelections=t.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return this._scrollLeft=t.scrollLeft,this._scrollTop=t.scrollTop,!0};n.prototype.onZonesChanged=function(t){return!0};n.prototype.isFocused=function(){return this._textAreaInput.isFocused()};n.prototype.focusTextArea=function(){this._textAreaInput.focusTextArea()};n.prototype.getLastRenderData=function(){return this._lastRenderPosition};n.prototype.setAriaOptions=function(t){t.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",t.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),t.role&&this.textArea.setAttribute("role",t.role)};n.prototype._ensureReadOnlyAttribute=function(){var t=this._context.configuration.options;!Qx.enabled||t.get(34)&&t.get(91)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")};n.prototype.prepareRender=function(t){var n;this._primaryCursorPosition=new Tr(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=t.visibleRangeForPosition(this._primaryCursorPosition),(n=this._visibleTextArea)===null||n===void 0||n.prepareRender(t)};n.prototype.render=function(t){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()};n.prototype._render=function(){var t;if(this._visibleTextArea){var n=this._visibleTextArea.visibleTextareaStart,i=this._visibleTextArea.visibleTextareaEnd,r=this._visibleTextArea.startPosition,e=this._visibleTextArea.endPosition;if(r&&e&&n&&i&&i.left>=this._scrollLeft&&n.left<=this._scrollLeft+this._contentWidth){var o=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,s=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));var u=this._visibleTextArea.widthOfHiddenLineTextBefore,a=this._contentLeft+n.left-this._scrollLeft,h=i.left-n.left+1;if(a<this._contentLeft){var c=this._contentLeft-a;a+=c,u+=c,h-=c}h>this._contentWidth&&(h=this._contentWidth);var f=this._context.viewModel.getViewLineData(r.lineNumber),l=f.tokens.findTokenIndexAtOffset(r.column-1),v=l===f.tokens.findTokenIndexAtOffset(e.column-1),d=this._visibleTextArea.definePresentation(v?f.tokens.getPresentation(l):null);this.textArea.domNode.scrollTop=s*this._lineHeight,this.textArea.domNode.scrollLeft=u,this._doRender({lastRenderPosition:null,top:o,left:a,width:h,height:this._lineHeight,useCover:!1,color:(oe.getColorMap()||[])[d.foreground],italic:d.italic,bold:d.bold,underline:d.underline,strikethrough:d.strikethrough})}return}if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();var g=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(g<this._contentLeft||g>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();var p=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(p<0||p>this._contentHeight)this._renderAtTopLeft();else if(Ft||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:p,left:this._textAreaWrapping?this._contentLeft:g,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;var n=(t=this._textAreaInput.textAreaState.newlineCountBeforeSelection)!==null&&t!==void 0?t:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:p,left:this._textAreaWrapping?this._contentLeft:g,width:this._textAreaWidth,height:iC?0:1,useCover:!1})};n.prototype._newlinecount=function(t){var n=0,i=-1;for(;i=t.indexOf("\n",i+1),i!==-1;)n++;return n};n.prototype._renderAtTopLeft=function(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:iC?0:1,useCover:!0})};n.prototype._doRender=function(t){this._lastRenderPosition=t.lastRenderPosition;var n=this.textArea,i=this.textAreaCover;Ph(n,this._fontInfo),n.setTop(t.top),n.setLeft(t.left),n.setWidth(t.width),n.setHeight(t.height),n.setColor(t.color?Ig.Format.CSS.formatHex(t.color):""),n.setFontStyle(t.italic?"italic":""),t.bold&&n.setFontWeight("bold"),n.setTextDecoration("".concat(t.underline?" underline":"").concat(t.strikethrough?" line-through":"")),i.setTop(t.useCover?t.top:0),i.setLeft(t.useCover?t.left:0),i.setWidth(t.useCover?t.width:0),i.setHeight(t.useCover?t.height:0);var r=this._context.configuration.options;r.get(57)?i.setClassName("monaco-editor-background textAreaCover "+Jx.OUTER_CLASS_NAME):r.get(68).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+$x.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")};return n}(v_);function eC(t,n,i){var r=vo(t);return r===-1&&(r=t.length),function(t,n,i){var r=0;for(var e=0;e<t.length;e++)t.charAt(e)==="\t"?r=B_.nextIndentTabStop(r,n):r++;var o="";if(!i){var e=Math.floor(r/n);r%=n;for(var s=0;s<e;s++)o+="\t"}for(var e=0;e<r;e++)o+=" ";return o}(t.substring(0,r),n,i)+t.substring(r)}rC=Xx([tC(3,Yx),tC(4,Jh)],rC);var oC=function(){return!0},sC=function(){return!1},uC=function(t){return t===" "||t==="\t"};var aC=function(){function t(t,n,i,r){var e;this.languageConfigurationService=r,this._cursorMoveConfigurationBrand=void 0,this._languageId=t;var o=i.options,s=o.get(145),u=o.get(50);this.readOnly=o.get(91),this.tabSize=n.tabSize,this.indentSize=n.indentSize,this.insertSpaces=n.insertSpaces,this.stickyTabStops=o.get(116),this.lineHeight=u.lineHeight,this.typicalHalfwidthCharacterWidth=u.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(s.height/this.lineHeight)-2),this.useTabStops=o.get(128),this.wordSeparators=o.get(131),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(77),this.multiCursorPaste=o.get(79),this.multiCursorLimit=o.get(80),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(130),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(t,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(t,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(t,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(t).getAutoClosingPairs();var a=this.languageConfigurationService.getLanguageConfiguration(t).getSurroundingPairs();if(a)for(var h=0,c=a;h<c.length;h++){var f=c[h];this.surroundingPairs[f.open]=f.close}var l=this.languageConfigurationService.getLanguageConfiguration(t).comments;this.blockCommentStartToken=(e=l==null?void 0:l.blockCommentStartToken)!==null&&e!==void 0?e:null}t.shouldRecreate=function(t){return t.hasChanged(145)||t.hasChanged(131)||t.hasChanged(37)||t.hasChanged(77)||t.hasChanged(79)||t.hasChanged(80)||t.hasChanged(6)||t.hasChanged(7)||t.hasChanged(11)||t.hasChanged(9)||t.hasChanged(10)||t.hasChanged(14)||t.hasChanged(128)||t.hasChanged(50)||t.hasChanged(91)||t.hasChanged(130)};Object.defineProperty(t.prototype,"electricChars",{get:function(){var t;if(!this._electricChars){this._electricChars={};var n=(t=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)===null||t===void 0?void 0:t.getElectricCharacters();if(n)for(var i=0,r=n;i<r.length;i++){var e=r[i];this._electricChars[e]=!0}}return this._electricChars},enumerable:false,configurable:true});t.prototype.onElectricCharacter=function(t,n,i){var r=fl(n,i-1),e=this.languageConfigurationService.getLanguageConfiguration(r.languageId).electricCharacter;return e?e.onElectricCharacter(t,r,i-r.firstCharOffset):null};t.prototype.normalizeIndentation=function(t){return eC(t,this.indentSize,this.insertSpaces)};t.prototype._getShouldAutoClose=function(t,n,i){switch(n){case"beforeWhitespace":return uC;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(t,i);case"always":return oC;case"never":return sC}};t.prototype._getLanguageDefinedShouldAutoClose=function(t,n){var i=this.languageConfigurationService.getLanguageConfiguration(t).getAutoCloseBeforeSet(n);return function(t){return i.indexOf(t)!==-1}};t.prototype.visibleColumnFromColumn=function(t,n){return B_.visibleColumnFromColumn(t.getLineContent(n.lineNumber),n.column,this.tabSize)};t.prototype.columnFromVisibleColumn=function(t,n,i){var r=B_.columnFromVisibleColumn(t.getLineContent(n),i,this.tabSize),e=t.getLineMinColumn(n);if(r<e)return e;var o=t.getLineMaxColumn(n);return r>o?o:r};return t}();var hC=function(){function t(t,n){this._cursorStateBrand=void 0,this.modelState=t,this.viewState=n}t.fromModelState=function(t){return new cC(t)};t.fromViewState=function(t){return new fC(t)};t.fromModelSelection=function(n){var i=Br.liftSelection(n),r=new lC(Ir.fromPositions(i.getSelectionStart()),0,0,i.getPosition(),0);return t.fromModelState(r)};t.fromModelSelections=function(t){var n=[];for(var i=0,r=t.length;i<r;i++)n[i]=this.fromModelSelection(t[i]);return n};t.prototype.equals=function(t){return this.viewState.equals(t.viewState)&&this.modelState.equals(t.modelState)};return t}();var cC=function(){function t(t){this.modelState=t,this.viewState=null}return t}();var fC=function(){function t(t){this.modelState=null,this.viewState=t}return t}();var lC=function(){function t(n,i,r,e,o){this.selectionStart=n,this.selectionStartKind=i,this.selectionStartLeftoverVisibleColumns=r,this.position=e,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=t._computeSelection(this.selectionStart,this.position)}t.prototype.equals=function(t){return this.selectionStartLeftoverVisibleColumns===t.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===t.leftoverVisibleColumns&&this.selectionStartKind===t.selectionStartKind&&this.position.equals(t.position)&&this.selectionStart.equalsRange(t.selectionStart)};t.prototype.hasSelection=function(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()};t.prototype.move=function(n,i,r,e){return n?new t(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new Tr(i,r),e):new t(new Ir(i,r,i,r),0,e,new Tr(i,r),e)};t._computeSelection=function(t,n){return t.isEmpty()||!n.isBeforeOrEqual(t.getStartPosition())?Br.fromPositions(t.getStartPosition(),n):Br.fromPositions(t.getEndPosition(),n)};return t}();var vC=function(){function t(t,n,i){this._editOperationResultBrand=void 0,this.type=t,this.commands=n,this.shouldPushStackElementBefore=i.shouldPushStackElementBefore,this.shouldPushStackElementAfter=i.shouldPushStackElementAfter}return t}();function dC(t){return t==="'"||t==='"'||t==="`"}var gC=function(){function t(){}t.columnSelect=function(t,n,i,r,e,o){var s=Math.abs(e-i)+1,u=i>e,a=r>o,h=r<o,c=[];for(var f=0;f<s;f++){var l=i+(u?-f:f),v=t.columnFromVisibleColumn(n,l,r),d=t.columnFromVisibleColumn(n,l,o),g=t.visibleColumnFromColumn(n,new Tr(l,v)),p=t.visibleColumnFromColumn(n,new Tr(l,d));h&&(g>o||p<r)||a&&(p>r||g<o)||c.push(new lC(new Ir(l,v,l,v),0,0,new Tr(l,d),0))}if(c.length===0)for(var f=0;f<s;f++){var l=i+(u?-f:f),v=n.getLineMaxColumn(l);c.push(new lC(new Ir(l,v,l,v),0,0,new Tr(l,v),0))}return{viewStates:c,reversed:u,fromLineNumber:i,fromVisualColumn:r,toLineNumber:e,toVisualColumn:o}};t.columnSelectLeft=function(n,i,r){var e=r.toViewVisualColumn;return e>0&&e--,t.columnSelect(n,i,r.fromViewLineNumber,r.fromViewVisualColumn,r.toViewLineNumber,e)};t.columnSelectRight=function(t,n,i){var r=0;var e=Math.min(i.fromViewLineNumber,i.toViewLineNumber),o=Math.max(i.fromViewLineNumber,i.toViewLineNumber);for(var s=e;s<=o;s++){var u=n.getLineMaxColumn(s),a=t.visibleColumnFromColumn(n,new Tr(s,u));r=Math.max(r,a)}var h=i.toViewVisualColumn;return h<r&&h++,this.columnSelect(t,n,i.fromViewLineNumber,i.fromViewVisualColumn,i.toViewLineNumber,h)};t.columnSelectUp=function(t,n,i,r){var e=r?t.pageSize:1,o=Math.max(1,i.toViewLineNumber-e);return this.columnSelect(t,n,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)};t.columnSelectDown=function(t,n,i,r){var e=r?t.pageSize:1,o=Math.min(n.getLineCount(),i.toViewLineNumber+e);return this.columnSelect(t,n,i.fromViewLineNumber,i.fromViewVisualColumn,o,i.toViewVisualColumn)};return t}();var pC=function(){function t(t,n,i){if(i===void 0){i=!1}this._range=t,this._text=n,this.insertsAutoWhitespace=i}t.prototype.getEditOperations=function(t,n){n.addTrackedEditOperation(this._range,this._text)};t.prototype.computeCursorState=function(t,n){var i=n.getInverseEditOperations()[0].range;return Br.fromPositions(i.getEndPosition())};return t}();var wC=function(){function t(t,n){this._range=t,this._text=n}t.prototype.getEditOperations=function(t,n){n.addTrackedEditOperation(this._range,this._text)};t.prototype.computeCursorState=function(t,n){var i=n.getInverseEditOperations()[0].range;return Br.fromRange(i,0)};return t}();var mC=function(){function t(t,n,i){if(i===void 0){i=!1}this._range=t,this._text=n,this.insertsAutoWhitespace=i}t.prototype.getEditOperations=function(t,n){n.addTrackedEditOperation(this._range,this._text)};t.prototype.computeCursorState=function(t,n){var i=n.getInverseEditOperations()[0].range;return Br.fromPositions(i.getStartPosition())};return t}();var bC=function(){function t(t,n,i,r,e){if(e===void 0){e=!1}this._range=t,this._text=n,this._columnDeltaOffset=r,this._lineNumberDeltaOffset=i,this.insertsAutoWhitespace=e}t.prototype.getEditOperations=function(t,n){n.addTrackedEditOperation(this._range,this._text)};t.prototype.computeCursorState=function(t,n){var i=n.getInverseEditOperations()[0].range;return Br.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))};return t}();var yC=function(){function t(t,n,i,r){if(r===void 0){r=!1}this._range=t,this._text=n,this._initialSelection=i,this._forceMoveMarkers=r,this._selectionId=null}t.prototype.getEditOperations=function(t,n){n.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=n.trackSelection(this._initialSelection)};t.prototype.computeCursorState=function(t,n){return n.getTrackedSelection(this._selectionId)};return t}();var _C=function(){function t(t,n,i){this._cursorPositionBrand=void 0,this.lineNumber=t,this.column=n,this.leftoverVisibleColumns=i}return t}();var kC=function(){function t(){}t.leftPosition=function(t,n){if(n.column>t.getLineMinColumn(n.lineNumber))return n.delta(void 0,-To(t.getLineContent(n.lineNumber),n.column-1));if(n.lineNumber>1){var i=n.lineNumber-1;return new Tr(i,t.getLineMaxColumn(i))}return n};t.leftPositionAtomicSoftTabs=function(t,n,i){if(n.column<=t.getLineIndentColumn(n.lineNumber)){var r=t.getLineMinColumn(n.lineNumber),e=t.getLineContent(n.lineNumber),o=N_.atomicPosition(e,n.column-1,i,0);if(o!==-1&&o+1>=r)return new Tr(n.lineNumber,o+1)}return this.leftPosition(t,n)};t.left=function(n,i,r){var e=n.stickyTabStops?t.leftPositionAtomicSoftTabs(i,r,n.tabSize):t.leftPosition(i,r);return new _C(e.lineNumber,e.column,0)};t.moveLeft=function(n,i,r,e,o){var s,u;if(r.hasSelection()&&!e)s=r.selection.startLineNumber,u=r.selection.startColumn;else{var a=r.position.delta(void 0,-(o-1)),h=i.normalizePosition(t.clipPositionColumn(a,i),0),c=t.left(n,i,h);s=c.lineNumber,u=c.column}return r.move(e,s,u,0)};t.clipPositionColumn=function(n,i){return new Tr(n.lineNumber,t.clipRange(n.column,i.getLineMinColumn(n.lineNumber),i.getLineMaxColumn(n.lineNumber)))};t.clipRange=function(t,n,i){return t<n?n:t>i?i:t};t.rightPosition=function(t,n,i){return i<t.getLineMaxColumn(n)?i+=Ro(t.getLineContent(n),i-1):n<t.getLineCount()&&(n+=1,i=t.getLineMinColumn(n)),new Tr(n,i)};t.rightPositionAtomicSoftTabs=function(t,n,i,r,e){if(i<t.getLineIndentColumn(n)){var o=t.getLineContent(n),s=N_.atomicPosition(o,i-1,r,1);if(s!==-1)return new Tr(n,s+1)}return this.rightPosition(t,n,i)};t.right=function(n,i,r){var e=n.stickyTabStops?t.rightPositionAtomicSoftTabs(i,r.lineNumber,r.column,n.tabSize,n.indentSize):t.rightPosition(i,r.lineNumber,r.column);return new _C(e.lineNumber,e.column,0)};t.moveRight=function(n,i,r,e,o){var s,u;if(r.hasSelection()&&!e)s=r.selection.endLineNumber,u=r.selection.endColumn;else{var a=r.position.delta(void 0,o-1),h=i.normalizePosition(t.clipPositionColumn(a,i),1),c=t.right(n,i,h);s=c.lineNumber,u=c.column}return r.move(e,s,u,0)};t.vertical=function(t,n,i,r,e,o,s,u){var a=B_.visibleColumnFromColumn(n.getLineContent(i),r,t.tabSize)+e,h=n.getLineCount(),c=i===1&&r===1,f=i===h&&r===n.getLineMaxColumn(i),l=o<i?c:f;if((i=o)<1?(i=1,r=s?n.getLineMinColumn(i):Math.min(n.getLineMaxColumn(i),r)):i>h?(i=h,r=s?n.getLineMaxColumn(i):Math.min(n.getLineMaxColumn(i),r)):r=t.columnFromVisibleColumn(n,i,a),e=l?0:a-B_.visibleColumnFromColumn(n.getLineContent(i),r,t.tabSize),u!==void 0){var v=new Tr(i,r),d=n.normalizePosition(v,u);e+=r-d.column,i=d.lineNumber,r=d.column}return new _C(i,r,e)};t.down=function(t,n,i,r,e,o,s){return this.vertical(t,n,i,r,e,i+o,s,4)};t.moveDown=function(n,i,r,e,o){var s,u;r.hasSelection()&&!e?(s=r.selection.endLineNumber,u=r.selection.endColumn):(s=r.position.lineNumber,u=r.position.column);var a,h=0;do{if(a=t.down(n,i,s+h,u,r.leftoverVisibleColumns,o,!0),i.normalizePosition(new Tr(a.lineNumber,a.column),2).lineNumber>s)break}while(h++<10&&s+h<i.getLineCount());return r.move(e,a.lineNumber,a.column,a.leftoverVisibleColumns)};t.translateDown=function(n,i,r){var e=r.selection,o=t.down(n,i,e.selectionStartLineNumber,e.selectionStartColumn,r.selectionStartLeftoverVisibleColumns,1,!1),s=t.down(n,i,e.positionLineNumber,e.positionColumn,r.leftoverVisibleColumns,1,!1);return new lC(new Ir(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new Tr(s.lineNumber,s.column),s.leftoverVisibleColumns)};t.up=function(t,n,i,r,e,o,s){return this.vertical(t,n,i,r,e,i-o,s,3)};t.moveUp=function(n,i,r,e,o){var s,u;r.hasSelection()&&!e?(s=r.selection.startLineNumber,u=r.selection.startColumn):(s=r.position.lineNumber,u=r.position.column);var a=t.up(n,i,s,u,r.leftoverVisibleColumns,o,!0);return r.move(e,a.lineNumber,a.column,a.leftoverVisibleColumns)};t.translateUp=function(n,i,r){var e=r.selection,o=t.up(n,i,e.selectionStartLineNumber,e.selectionStartColumn,r.selectionStartLeftoverVisibleColumns,1,!1),s=t.up(n,i,e.positionLineNumber,e.positionColumn,r.leftoverVisibleColumns,1,!1);return new lC(new Ir(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new Tr(s.lineNumber,s.column),s.leftoverVisibleColumns)};t._isBlankLine=function(t,n){return t.getLineFirstNonWhitespaceColumn(n)===0};t.moveToPrevBlankLine=function(t,n,i,r){var e=i.position.lineNumber;for(;e>1&&this._isBlankLine(n,e);)e--;for(;e>1&&!this._isBlankLine(n,e);)e--;return i.move(r,e,n.getLineMinColumn(e),0)};t.moveToNextBlankLine=function(t,n,i,r){var e=n.getLineCount();var o=i.position.lineNumber;for(;o<e&&this._isBlankLine(n,o);)o++;for(;o<e&&!this._isBlankLine(n,o);)o++;return i.move(r,o,n.getLineMinColumn(o),0)};t.moveToBeginningOfLine=function(t,n,i,r){var e=i.position.lineNumber,o=n.getLineMinColumn(e),s=n.getLineFirstNonWhitespaceColumn(e)||o;var u;return u=i.position.column===s?o:s,i.move(r,e,u,0)};t.moveToEndOfLine=function(t,n,i,r,e){var o=i.position.lineNumber,s=n.getLineMaxColumn(o);return i.move(r,o,s,e?1073741824-s:0)};t.moveToBeginningOfBuffer=function(t,n,i,r){return i.move(r,1,1,0)};t.moveToEndOfBuffer=function(t,n,i,r){var e=n.getLineCount(),o=n.getLineMaxColumn(e);return i.move(r,e,o,0)};return t}();var xC=function(){function t(){}t.deleteRight=function(t,n,i,r){var e=[];var o=t!==3;for(var s=0,u=r.length;s<u;s++){var a=r[s];var h=a;if(h.isEmpty()){var c=a.getPosition(),f=kC.right(n,i,c);h=new Ir(f.lineNumber,f.column,c.lineNumber,c.column)}h.isEmpty()?e[s]=null:(h.startLineNumber!==h.endLineNumber&&(o=!0),e[s]=new pC(h,""))}return[o,e]};t.isAutoClosingPairDelete=function(t,n,i,r,e,o,s){if(n==="never"&&i==="never"||t==="never")return!1;for(var u=0,a=o.length;u<a;u++){var h=o[u],c=h.getPosition();if(!h.isEmpty())return!1;var f=e.getLineContent(c.lineNumber);if(c.column<2||c.column>=f.length+1)return!1;var l=f.charAt(c.column-2),v=r.get(l);if(!v)return!1;if(dC(l)){if(i==="never")return!1}else if(n==="never")return!1;var d=f.charAt(c.column-1);var g=!1;for(var p=0,w=v;p<w.length;p++){var m=w[p];m.open===l&&m.close===d&&(g=!0)}if(!g)return!1;if(t==="auto"){var m=!1;for(var b=0,y=s.length;b<y;b++){var _=s[b];if(c.lineNumber===_.startLineNumber&&c.column===_.startColumn){m=!0;break}}if(!m)return!1}}return!0};t._runAutoClosingPairDelete=function(t,n,i){var r=[];for(var e=0,o=i.length;e<o;e++){var s=i[e].getPosition(),u=new Ir(s.lineNumber,s.column-1,s.lineNumber,s.column+1);r[e]=new pC(u,"")}return[!0,r]};t.deleteLeft=function(n,i,r,e,o){if(this.isAutoClosingPairDelete(i.autoClosingDelete,i.autoClosingBrackets,i.autoClosingQuotes,i.autoClosingPairs.autoClosingPairsOpenByEnd,r,e,o))return this._runAutoClosingPairDelete(i,r,e);var s=[];var u=n!==2;for(var a=0,h=e.length;a<h;a++){var c=t.getDeleteRange(e[a],r,i);c.isEmpty()?s[a]=null:(c.startLineNumber!==c.endLineNumber&&(u=!0),s[a]=new pC(c,""))}return[u,s]};t.getDeleteRange=function(n,i,r){if(!n.isEmpty())return n;var e=n.getPosition();if(r.useTabStops&&e.column>1){var o=i.getLineContent(e.lineNumber),s=vo(o),u=s===-1?o.length+1:s+1;if(e.column<=u){var a=r.visibleColumnFromColumn(i,e),h=B_.prevIndentTabStop(a,r.indentSize),c=r.columnFromVisibleColumn(i,e.lineNumber,h);return new Ir(e.lineNumber,c,e.lineNumber,e.column)}}return Ir.fromPositions(t.getPositionAfterDeleteLeft(e,i),e)};t.getPositionAfterDeleteLeft=function(t,n){if(t.column>1){var i=Jo(t.column-1,n.getLineContent(t.lineNumber));return t.with(void 0,i+1)}if(t.lineNumber>1){var i=t.lineNumber-1;return new Tr(i,n.getLineMaxColumn(i))}return t};t.cut=function(t,n,i){var r=[];var e=null;i.sort((function(t,n){return Tr.compare(t.getStartPosition(),n.getEndPosition())}));for(var o=0,s=i.length;o<s;o++){var u=i[o];if(u.isEmpty())if(t.emptySelectionClipboard){var a=u.getPosition();var h=void 0,c=void 0,f=void 0,l=void 0;a.lineNumber<n.getLineCount()?(h=a.lineNumber,c=1,f=a.lineNumber+1,l=1):a.lineNumber>1&&(e==null?void 0:e.endLineNumber)!==a.lineNumber?(h=a.lineNumber-1,c=n.getLineMaxColumn(a.lineNumber-1),f=a.lineNumber,l=n.getLineMaxColumn(a.lineNumber)):(h=a.lineNumber,c=1,f=a.lineNumber,l=n.getLineMaxColumn(a.lineNumber));var v=new Ir(h,c,f,l);e=v,v.isEmpty()?r[o]=null:r[o]=new pC(v,"")}else r[o]=null;else r[o]=new pC(u,"")}return new vC(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})};return t}();var CC=function(){function t(){}t._createWord=function(t,n,i,r,e){return{start:r,end:e,wordType:n,nextCharClass:i}};t._createIntlWord=function(t,n){return{start:t.index,end:t.index+t.segment.length,wordType:1,nextCharClass:n}};t._findPreviousWordOnLine=function(t,n,i){var r=n.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(r,t,i)};t._doFindPreviousWordOnLine=function(t,n,i){var r=0;var e=n.findPrevIntlWordBeforeOrAtOffset(t,i.column-2);for(var o=i.column-2;o>=0;o--){var s=t.charCodeAt(o),u=n.get(s);if(e&&o===e.index)return this._createIntlWord(e,u);if(u===0){if(r===2)return this._createWord(t,r,u,o+1,this._findEndOfWord(t,n,r,o+1));r=1}else if(u===2){if(r===1)return this._createWord(t,r,u,o+1,this._findEndOfWord(t,n,r,o+1));r=2}else if(u===1&&r!==0)return this._createWord(t,r,u,o+1,this._findEndOfWord(t,n,r,o+1))}return r!==0?this._createWord(t,r,1,0,this._findEndOfWord(t,n,r,0)):null};t._findEndOfWord=function(t,n,i,r){var e=n.findNextIntlWordAtOrAfterOffset(t,r),o=t.length;for(var s=r;s<o;s++){var u=t.charCodeAt(s),a=n.get(u);if(e&&s===e.index+e.segment.length||a===1||i===1&&a===2||i===2&&a===0)return s}return o};t._findNextWordOnLine=function(t,n,i){var r=n.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(r,t,i)};t._doFindNextWordOnLine=function(t,n,i){var r=0;var e=t.length,o=n.findNextIntlWordAtOrAfterOffset(t,i.column-1);for(var s=i.column-1;s<e;s++){var u=t.charCodeAt(s),a=n.get(u);if(o&&s===o.index)return this._createIntlWord(o,a);if(a===0){if(r===2)return this._createWord(t,r,a,this._findStartOfWord(t,n,r,s-1),s);r=1}else if(a===2){if(r===1)return this._createWord(t,r,a,this._findStartOfWord(t,n,r,s-1),s);r=2}else if(a===1&&r!==0)return this._createWord(t,r,a,this._findStartOfWord(t,n,r,s-1),s)}return r!==0?this._createWord(t,r,1,this._findStartOfWord(t,n,r,e-1),e):null};t._findStartOfWord=function(t,n,i,r){var e=n.findPrevIntlWordBeforeOrAtOffset(t,r);for(var o=r;o>=0;o--){var s=t.charCodeAt(o),u=n.get(s);if(e&&o===e.index)return o;if(u===1||i===1&&u===2||i===2&&u===0)return o+1}return 0};t.moveWordLeft=function(n,i,r,e){var o=r.lineNumber,s=r.column;s===1&&o>1&&(o-=1,s=i.getLineMaxColumn(o));var u=t._findPreviousWordOnLine(n,i,new Tr(o,s));if(e===0)return new Tr(o,u?u.start+1:1);if(e===1)return u&&u.wordType===2&&u.end-u.start==1&&u.nextCharClass===0&&(u=t._findPreviousWordOnLine(n,i,new Tr(o,u.start+1))),new Tr(o,u?u.start+1:1);if(e===3){for(;u&&u.wordType===2;)u=t._findPreviousWordOnLine(n,i,new Tr(o,u.start+1));return new Tr(o,u?u.start+1:1)}return u&&s<=u.end+1&&(u=t._findPreviousWordOnLine(n,i,new Tr(o,u.start+1))),new Tr(o,u?u.end+1:1)};t._moveWordPartLeft=function(t,n){var i=n.lineNumber,r=t.getLineMaxColumn(i);if(n.column===1)return i>1?new Tr(i-1,t.getLineMaxColumn(i-1)):n;var e=t.getLineContent(i);for(var o=n.column-1;o>1;o--){var s=e.charCodeAt(o-2),u=e.charCodeAt(o-1);if(s===95&&u!==95)return new Tr(i,o);if(s===45&&u!==45)return new Tr(i,o);if((ko(s)||_o(s))&&xo(u))return new Tr(i,o);if(xo(s)&&xo(u)&&o+1<r){var a=e.charCodeAt(o);if(ko(a)||_o(a))return new Tr(i,o)}}return new Tr(i,1)};t.moveWordRight=function(n,i,r,e){var o=r.lineNumber,s=r.column,u=!1;s===i.getLineMaxColumn(o)&&o<i.getLineCount()&&(u=!0,o+=1,s=1);var a=t._findNextWordOnLine(n,i,new Tr(o,s));if(e===2)a&&a.wordType===2&&a.end-a.start==1&&a.nextCharClass===0&&(a=t._findNextWordOnLine(n,i,new Tr(o,a.end+1))),s=a?a.end+1:i.getLineMaxColumn(o);else if(e===3){for(u&&(s=0);a&&(a.wordType===2||a.start+1<=s);)a=t._findNextWordOnLine(n,i,new Tr(o,a.end+1));s=a?a.start+1:i.getLineMaxColumn(o)}else a&&!u&&s>=a.start+1&&(a=t._findNextWordOnLine(n,i,new Tr(o,a.end+1))),s=a?a.start+1:i.getLineMaxColumn(o);return new Tr(o,s)};t._moveWordPartRight=function(t,n){var i=n.lineNumber,r=t.getLineMaxColumn(i);if(n.column===r)return i<t.getLineCount()?new Tr(i+1,1):n;var e=t.getLineContent(i);for(var o=n.column+1;o<r;o++){var s=e.charCodeAt(o-2),u=e.charCodeAt(o-1);if(s!==95&&u===95)return new Tr(i,o);if(s!==45&&u===45)return new Tr(i,o);if((ko(s)||_o(s))&&xo(u))return new Tr(i,o);if(xo(s)&&xo(u)&&o+1<r){var a=e.charCodeAt(o);if(ko(a)||_o(a))return new Tr(i,o)}}return new Tr(i,r)};t._deleteWordLeftWhitespace=function(t,n){var i=t.getLineContent(n.lineNumber),r=n.column-2,e=po(i,r);return e+1<r?new Ir(n.lineNumber,e+2,n.lineNumber,n.column):null};t.deleteWordLeft=function(n,i){var r=n.wordSeparators,e=n.model,o=n.selection,s=n.whitespaceHeuristics;if(!o.isEmpty())return o;if(xC.isAutoClosingPairDelete(n.autoClosingDelete,n.autoClosingBrackets,n.autoClosingQuotes,n.autoClosingPairs.autoClosingPairsOpenByEnd,n.model,[n.selection],n.autoClosedCharacters)){var u=n.selection.getPosition();return new Ir(u.lineNumber,u.column-1,u.lineNumber,u.column+1)}var a=new Tr(o.positionLineNumber,o.positionColumn);var h=a.lineNumber,c=a.column;if(h===1&&c===1)return null;if(s){var u=this._deleteWordLeftWhitespace(e,a);if(u)return u}var f=t._findPreviousWordOnLine(r,e,a);return i===0?f?c=f.start+1:c>1?c=1:(h--,c=e.getLineMaxColumn(h)):(f&&c<=f.end+1&&(f=t._findPreviousWordOnLine(r,e,new Tr(h,f.start+1))),f?c=f.end+1:c>1?c=1:(h--,c=e.getLineMaxColumn(h))),new Ir(h,c,a.lineNumber,a.column)};t.deleteInsideWord=function(t,n,i){if(!i.isEmpty())return i;var r=new Tr(i.positionLineNumber,i.positionColumn);return this._deleteInsideWordWhitespace(n,r)||this._deleteInsideWordDetermineDeleteRange(t,n,r)};t._charAtIsWhitespace=function(t,n){var i=t.charCodeAt(n);return i===32||i===9};t._deleteInsideWordWhitespace=function(t,n){var i=t.getLineContent(n.lineNumber),r=i.length;if(r===0)return null;var e=Math.max(n.column-2,0);if(!this._charAtIsWhitespace(i,e))return null;var o=Math.min(n.column-1,r-1);if(!this._charAtIsWhitespace(i,o))return null;for(;e>0&&this._charAtIsWhitespace(i,e-1);)e--;for(;o+1<r&&this._charAtIsWhitespace(i,o+1);)o++;return new Ir(n.lineNumber,e+1,n.lineNumber,o+2)};t._deleteInsideWordDetermineDeleteRange=function(n,i,r){var e=this;var o=i.getLineContent(r.lineNumber),s=o.length;if(s===0)return r.lineNumber>1?new Ir(r.lineNumber-1,i.getLineMaxColumn(r.lineNumber-1),r.lineNumber,1):r.lineNumber<i.getLineCount()?new Ir(r.lineNumber,1,r.lineNumber+1,1):new Ir(r.lineNumber,1,r.lineNumber,1);var u=function(t){return t.start+1<=r.column&&r.column<=t.end+1},a=function(t,n){return t=Math.min(t,r.column),n=Math.max(n,r.column),new Ir(r.lineNumber,t,r.lineNumber,n)},h=function(t){var n=t.start+1,i=t.end+1,r=!1;for(;i-1<s&&e._charAtIsWhitespace(o,i-1);)r=!0,i++;if(!r)for(;n>1&&e._charAtIsWhitespace(o,n-2);)n--;return a(n,i)},c=t._findPreviousWordOnLine(n,i,r);if(c&&u(c))return h(c);var f=t._findNextWordOnLine(n,i,r);return f&&u(f)?h(f):c&&f?a(c.end+1,f.start+1):c?a(c.start+1,c.end+1):f?a(f.start+1,f.end+1):a(1,s+1)};t._deleteWordPartLeft=function(n,i){if(!i.isEmpty())return i;var r=i.getPosition(),e=t._moveWordPartLeft(n,r);return new Ir(r.lineNumber,r.column,e.lineNumber,e.column)};t._findFirstNonWhitespaceChar=function(t,n){var i=t.length;for(var r=n;r<i;r++){var e=t.charAt(r);if(e!==" "&&e!=="\t")return r}return i};t._deleteWordRightWhitespace=function(t,n){var i=t.getLineContent(n.lineNumber),r=n.column-1,e=this._findFirstNonWhitespaceChar(i,r);return r+1<e?new Ir(n.lineNumber,n.column,n.lineNumber,e+1):null};t.deleteWordRight=function(n,i){var r=n.wordSeparators,e=n.model,o=n.selection,s=n.whitespaceHeuristics;if(!o.isEmpty())return o;var u=new Tr(o.positionLineNumber,o.positionColumn);var a=u.lineNumber,h=u.column;var c=e.getLineCount(),f=e.getLineMaxColumn(a);if(a===c&&h===f)return null;if(s){var l=this._deleteWordRightWhitespace(e,u);if(l)return l}var v=t._findNextWordOnLine(r,e,u);return i===2?v?h=v.end+1:h<f||a===c?h=f:(a++,v=t._findNextWordOnLine(r,e,new Tr(a,1)),h=v?v.start+1:e.getLineMaxColumn(a)):(v&&h>=v.start+1&&(v=t._findNextWordOnLine(r,e,new Tr(a,v.end+1))),v?h=v.start+1:h<f||a===c?h=f:(a++,v=t._findNextWordOnLine(r,e,new Tr(a,1)),h=v?v.start+1:e.getLineMaxColumn(a))),new Ir(a,h,u.lineNumber,u.column)};t._deleteWordPartRight=function(n,i){if(!i.isEmpty())return i;var r=i.getPosition(),e=t._moveWordPartRight(n,r);return new Ir(r.lineNumber,r.column,e.lineNumber,e.column)};t._createWordAtPosition=function(t,n,i){var r=new Ir(n,i.start+1,n,i.end+1);return{word:t.getValueInRange(r),startColumn:r.startColumn,endColumn:r.endColumn}};t.getWordAtPosition=function(n,i,r,e){var o=ld(i,r),s=t._findPreviousWordOnLine(o,n,e);if(s&&s.wordType===1&&s.start<=e.column-1&&e.column-1<=s.end)return t._createWordAtPosition(n,e.lineNumber,s);var u=t._findNextWordOnLine(o,n,e);return u&&u.wordType===1&&u.start<=e.column-1&&e.column-1<=u.end?t._createWordAtPosition(n,e.lineNumber,u):null};t.word=function(n,i,r,e,o){var s=ld(n.wordSeparators,n.wordSegmenterLocales),u=t._findPreviousWordOnLine(s,i,o),a=t._findNextWordOnLine(s,i,o);if(!e){var h=void 0,c=void 0;return u&&u.wordType===1&&u.start<=o.column-1&&o.column-1<=u.end?(h=u.start+1,c=u.end+1):a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(h=a.start+1,c=a.end+1):(h=u?u.end+1:1,c=a?a.start+1:i.getLineMaxColumn(o.lineNumber)),new lC(new Ir(o.lineNumber,h,o.lineNumber,c),1,0,new Tr(o.lineNumber,c),0)}var f,l;u&&u.wordType===1&&u.start<o.column-1&&o.column-1<u.end?(f=u.start+1,l=u.end+1):a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(f=a.start+1,l=a.end+1):(f=o.column,l=o.column);var v=o.lineNumber;var d;if(r.selectionStart.containsPosition(o))d=r.selectionStart.endColumn;else if(o.isBeforeOrEqual(r.selectionStart.getStartPosition())){d=f;var h=new Tr(v,d);r.selectionStart.containsPosition(h)&&(d=r.selectionStart.endColumn)}else{d=l;var h=new Tr(v,d);r.selectionStart.containsPosition(h)&&(d=r.selectionStart.startColumn)}return r.move(!0,v,d,0)};return t}();var SC=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.deleteWordPartLeft=function(t){var n=DC([CC.deleteWordLeft(t,0),CC.deleteWordLeft(t,2),CC._deleteWordPartLeft(t.model,t.selection)]);return n.sort(Ir.compareRangesUsingEnds),n[2]};n.deleteWordPartRight=function(t){var n=DC([CC.deleteWordRight(t,0),CC.deleteWordRight(t,2),CC._deleteWordPartRight(t.model,t.selection)]);return n.sort(Ir.compareRangesUsingStarts),n[0]};n.moveWordPartLeft=function(t,n,i){var r=DC([CC.moveWordLeft(t,n,i,0),CC.moveWordLeft(t,n,i,2),CC._moveWordPartLeft(n,i)]);return r.sort(Tr.compare),r[2]};n.moveWordPartRight=function(t,n,i){var r=DC([CC.moveWordRight(t,n,i,0),CC.moveWordRight(t,n,i,2),CC._moveWordPartRight(n,i)]);return r.sort(Tr.compare),r[0]};return n}(CC);function DC(t){return t.filter((function(t){return!!t}))}var AC=function(){function t(){}t.addCursorDown=function(t,n,i){var r=[];var e=0;for(var o=0,s=n.length;o<s;o++){var u=n[o];r[e++]=new hC(u.modelState,u.viewState),r[e++]=i?hC.fromModelState(kC.translateDown(t.cursorConfig,t.model,u.modelState)):hC.fromViewState(kC.translateDown(t.cursorConfig,t,u.viewState))}return r};t.addCursorUp=function(t,n,i){var r=[];var e=0;for(var o=0,s=n.length;o<s;o++){var u=n[o];r[e++]=new hC(u.modelState,u.viewState),r[e++]=i?hC.fromModelState(kC.translateUp(t.cursorConfig,t.model,u.modelState)):hC.fromViewState(kC.translateUp(t.cursorConfig,t,u.viewState))}return r};t.moveToBeginningOfLine=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e];r[e]=this._moveToLineStart(t,s,i)}return r};t._moveToLineStart=function(t,n,i){var r=n.viewState.position.column,e=r===n.modelState.position.column,o=n.viewState.position.lineNumber,s=t.getLineFirstNonWhitespaceColumn(o);return e||r===s?this._moveToLineStartByModel(t,n,i):this._moveToLineStartByView(t,n,i)};t._moveToLineStartByView=function(t,n,i){return hC.fromViewState(kC.moveToBeginningOfLine(t.cursorConfig,t,n.viewState,i))};t._moveToLineStartByModel=function(t,n,i){return hC.fromModelState(kC.moveToBeginningOfLine(t.cursorConfig,t.model,n.modelState,i))};t.moveToEndOfLine=function(t,n,i,r){var e=[];for(var o=0,s=n.length;o<s;o++){var u=n[o];e[o]=this._moveToLineEnd(t,u,i,r)}return e};t._moveToLineEnd=function(t,n,i,r){var e=n.viewState.position,o=t.getLineMaxColumn(e.lineNumber),s=e.column===o,u=n.modelState.position,a=t.model.getLineMaxColumn(u.lineNumber),h=o-e.column==a-u.column;return s||h?this._moveToLineEndByModel(t,n,i,r):this._moveToLineEndByView(t,n,i,r)};t._moveToLineEndByView=function(t,n,i,r){return hC.fromViewState(kC.moveToEndOfLine(t.cursorConfig,t,n.viewState,i,r))};t._moveToLineEndByModel=function(t,n,i,r){return hC.fromModelState(kC.moveToEndOfLine(t.cursorConfig,t.model,n.modelState,i,r))};t.expandLineSelection=function(t,n){var i=[];for(var r=0,e=n.length;r<e;r++){var o=n[r],s=o.modelState.selection.startLineNumber,u=t.model.getLineCount();var a=void 0,h=o.modelState.selection.endLineNumber;h===u?a=t.model.getLineMaxColumn(u):(h++,a=1),i[r]=hC.fromModelState(new lC(new Ir(s,1,s,1),0,0,new Tr(h,a),0))}return i};t.moveToBeginningOfBuffer=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e];r[e]=hC.fromModelState(kC.moveToBeginningOfBuffer(t.cursorConfig,t.model,s.modelState,i))}return r};t.moveToEndOfBuffer=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e];r[e]=hC.fromModelState(kC.moveToEndOfBuffer(t.cursorConfig,t.model,s.modelState,i))}return r};t.selectAll=function(t,n){var i=t.model.getLineCount(),r=t.model.getLineMaxColumn(i);return hC.fromModelState(new lC(new Ir(1,1,1,1),0,0,new Tr(i,r),0))};t.line=function(t,n,i,r,e){var o=t.model.validatePosition(r),s=e?t.coordinatesConverter.validateViewPosition(new Tr(e.lineNumber,e.column),o):t.coordinatesConverter.convertModelPositionToViewPosition(o);if(!i){var u=t.model.getLineCount();var a=o.lineNumber+1,h=1;return a>u&&(a=u,h=t.model.getLineMaxColumn(a)),hC.fromModelState(new lC(new Ir(o.lineNumber,1,a,h),2,0,new Tr(a,h),0))}var c=n.modelState.selectionStart.getStartPosition().lineNumber;if(o.lineNumber<c)return hC.fromViewState(n.viewState.move(!0,s.lineNumber,1,0));if(o.lineNumber>c){var u=t.getLineCount();var a=s.lineNumber+1,h=1;return a>u&&(a=u,h=t.getLineMaxColumn(a)),hC.fromViewState(n.viewState.move(!0,a,h,0))}{var u=n.modelState.selectionStart.getEndPosition();return hC.fromModelState(n.modelState.move(!0,u.lineNumber,u.column,0))}};t.word=function(t,n,i,r){var e=t.model.validatePosition(r);return hC.fromModelState(CC.word(t.cursorConfig,t.model,n.modelState,i,e))};t.cancelSelection=function(t,n){if(!n.modelState.hasSelection())return new hC(n.modelState,n.viewState);var i=n.viewState.position.lineNumber,r=n.viewState.position.column;return hC.fromViewState(new lC(new Ir(i,r,i,r),0,0,new Tr(i,r),0))};t.moveTo=function(t,n,i,r,e){if(i){if(n.modelState.selectionStartKind===1)return this.word(t,n,i,r);if(n.modelState.selectionStartKind===2)return this.line(t,n,i,r,e)}var o=t.model.validatePosition(r),s=e?t.coordinatesConverter.validateViewPosition(new Tr(e.lineNumber,e.column),o):t.coordinatesConverter.convertModelPositionToViewPosition(o);return hC.fromViewState(n.viewState.move(i,s.lineNumber,s.column,0))};t.simpleMove=function(t,n,i,r,e,o){switch(i){case 0:return o===4?this._moveHalfLineLeft(t,n,r):this._moveLeft(t,n,r,e);case 1:return o===4?this._moveHalfLineRight(t,n,r):this._moveRight(t,n,r,e);case 2:return o===2?this._moveUpByViewLines(t,n,r,e):this._moveUpByModelLines(t,n,r,e);case 3:return o===2?this._moveDownByViewLines(t,n,r,e):this._moveDownByModelLines(t,n,r,e);case 4:return o===2?n.map((function(n){return hC.fromViewState(kC.moveToPrevBlankLine(t.cursorConfig,t,n.viewState,r))})):n.map((function(n){return hC.fromModelState(kC.moveToPrevBlankLine(t.cursorConfig,t.model,n.modelState,r))}));case 5:return o===2?n.map((function(n){return hC.fromViewState(kC.moveToNextBlankLine(t.cursorConfig,t,n.viewState,r))})):n.map((function(n){return hC.fromModelState(kC.moveToNextBlankLine(t.cursorConfig,t.model,n.modelState,r))}));case 6:return this._moveToViewMinColumn(t,n,r);case 7:return this._moveToViewFirstNonWhitespaceColumn(t,n,r);case 8:return this._moveToViewCenterColumn(t,n,r);case 9:return this._moveToViewMaxColumn(t,n,r);case 10:return this._moveToViewLastNonWhitespaceColumn(t,n,r);default:return null}};t.viewportMove=function(t,n,i,r,e){var o=t.getCompletelyVisibleViewRange(),s=t.coordinatesConverter.convertViewRangeToModelRange(o);switch(i){case 11:{var u=this._firstLineNumberInRange(t.model,s,e),a=t.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(t,n[0],r,u,a)]}case 13:{var u=this._lastLineNumberInRange(t.model,s,e),a=t.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(t,n[0],r,u,a)]}case 12:{var u=Math.round((s.startLineNumber+s.endLineNumber)/2),a=t.model.getLineFirstNonWhitespaceColumn(u);return[this._moveToModelPosition(t,n[0],r,u,a)]}case 14:{var u=[];for(var a=0,h=n.length;a<h;a++){var c=n[a];u[a]=this.findPositionInViewportIfOutside(t,c,o,r)}return u}default:return null}};t.findPositionInViewportIfOutside=function(t,n,i,r){var e=n.viewState.position.lineNumber;if(i.startLineNumber<=e&&e<=i.endLineNumber-1)return new hC(n.modelState,n.viewState);{var o=void 0;o=e>i.endLineNumber-1?i.endLineNumber-1:e<i.startLineNumber?i.startLineNumber:e;var s=kC.vertical(t.cursorConfig,t,e,n.viewState.position.column,n.viewState.leftoverVisibleColumns,o,!1);return hC.fromViewState(n.viewState.move(r,s.lineNumber,s.column,s.leftoverVisibleColumns))}};t._firstLineNumberInRange=function(t,n,i){var r=n.startLineNumber;return n.startColumn!==t.getLineMinColumn(r)&&r++,Math.min(n.endLineNumber,r+i-1)};t._lastLineNumberInRange=function(t,n,i){var r=n.startLineNumber;return n.startColumn!==t.getLineMinColumn(r)&&r++,Math.max(r,n.endLineNumber-i+1)};t._moveLeft=function(t,n,i,r){return n.map((function(n){return hC.fromViewState(kC.moveLeft(t.cursorConfig,t,n.viewState,i,r))}))};t._moveHalfLineLeft=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e],u=s.viewState.position.lineNumber,a=Math.round(t.getLineLength(u)/2);r[e]=hC.fromViewState(kC.moveLeft(t.cursorConfig,t,s.viewState,i,a))}return r};t._moveRight=function(t,n,i,r){return n.map((function(n){return hC.fromViewState(kC.moveRight(t.cursorConfig,t,n.viewState,i,r))}))};t._moveHalfLineRight=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e],u=s.viewState.position.lineNumber,a=Math.round(t.getLineLength(u)/2);r[e]=hC.fromViewState(kC.moveRight(t.cursorConfig,t,s.viewState,i,a))}return r};t._moveDownByViewLines=function(t,n,i,r){var e=[];for(var o=0,s=n.length;o<s;o++){var u=n[o];e[o]=hC.fromViewState(kC.moveDown(t.cursorConfig,t,u.viewState,i,r))}return e};t._moveDownByModelLines=function(t,n,i,r){var e=[];for(var o=0,s=n.length;o<s;o++){var u=n[o];e[o]=hC.fromModelState(kC.moveDown(t.cursorConfig,t.model,u.modelState,i,r))}return e};t._moveUpByViewLines=function(t,n,i,r){var e=[];for(var o=0,s=n.length;o<s;o++){var u=n[o];e[o]=hC.fromViewState(kC.moveUp(t.cursorConfig,t,u.viewState,i,r))}return e};t._moveUpByModelLines=function(t,n,i,r){var e=[];for(var o=0,s=n.length;o<s;o++){var u=n[o];e[o]=hC.fromModelState(kC.moveUp(t.cursorConfig,t.model,u.modelState,i,r))}return e};t._moveToViewPosition=function(t,n,i,r,e){return hC.fromViewState(n.viewState.move(i,r,e,0))};t._moveToModelPosition=function(t,n,i,r,e){return hC.fromModelState(n.modelState.move(i,r,e,0))};t._moveToViewMinColumn=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e],u=s.viewState.position.lineNumber,a=t.getLineMinColumn(u);r[e]=this._moveToViewPosition(t,s,i,u,a)}return r};t._moveToViewFirstNonWhitespaceColumn=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e],u=s.viewState.position.lineNumber,a=t.getLineFirstNonWhitespaceColumn(u);r[e]=this._moveToViewPosition(t,s,i,u,a)}return r};t._moveToViewCenterColumn=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e],u=s.viewState.position.lineNumber,a=Math.round((t.getLineMaxColumn(u)+t.getLineMinColumn(u))/2);r[e]=this._moveToViewPosition(t,s,i,u,a)}return r};t._moveToViewMaxColumn=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e],u=s.viewState.position.lineNumber,a=t.getLineMaxColumn(u);r[e]=this._moveToViewPosition(t,s,i,u,a)}return r};t._moveToViewLastNonWhitespaceColumn=function(t,n,i){var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e],u=s.viewState.position.lineNumber,a=t.getLineLastNonWhitespaceColumn(u);r[e]=this._moveToViewPosition(t,s,i,u,a)}return r};return t}();var OC;function EC(t,n,i,r){var e=Ov(n,i.startLineNumber,i.startColumn),o=r.getLanguageConfiguration(e.languageId);if(!o)return null;var s=e.getLineContent(),u=s.substr(0,i.startColumn-1-e.firstCharOffset);var a;i.isEmpty()?a=s.substr(i.startColumn-1-e.firstCharOffset):a=Ov(n,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-e.firstCharOffset);var h="";if(i.startLineNumber>1&&e.firstCharOffset===0){var c=Ov(n,i.startLineNumber-1);c.languageId===e.languageId&&(h=c.getLineContent())}var f=o.onEnter(t,h,u,a);if(!f)return null;var l=f.indentAction;var v=f.appendText;var d=f.removeText||0;v?l===ul.Indent&&(v="\t"+v):v=l===ul.Indent||l===ul.IndentOutdent?"\t":"";var g=Av(n,i.startLineNumber,i.startColumn);return d&&(g=g.substring(0,g.length-d)),{indentAction:l,appendText:v,removeText:d,indentation:g}}(function(t){t.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t",constraint:function(t){if(!z(t))return!1;var n=t;return!!H(n.to)&&!(!G(n.select)&&!q(n.select))&&!(!G(n.by)&&!H(n.by))&&!(!G(n.value)&&!K(n.value))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},t.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},t.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},t.parse=function(n){if(!n.to)return null;var i;switch(n.to){case t.RawDirection.Left:i=0;break;case t.RawDirection.Right:i=1;break;case t.RawDirection.Up:i=2;break;case t.RawDirection.Down:i=3;break;case t.RawDirection.PrevBlankLine:i=4;break;case t.RawDirection.NextBlankLine:i=5;break;case t.RawDirection.WrappedLineStart:i=6;break;case t.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case t.RawDirection.WrappedLineColumnCenter:i=8;break;case t.RawDirection.WrappedLineEnd:i=9;break;case t.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case t.RawDirection.ViewPortTop:i=11;break;case t.RawDirection.ViewPortBottom:i=13;break;case t.RawDirection.ViewPortCenter:i=12;break;case t.RawDirection.ViewPortIfOutside:i=14;break;default:return null}var r=0;switch(n.by){case t.RawUnit.Line:r=1;break;case t.RawUnit.WrappedLine:r=2;break;case t.RawUnit.Character:r=3;break;case t.RawUnit.HalfLine:r=4}return{direction:i,unit:r,select:!!n.select,value:n.value||1}}})(OC||(OC={}));var MC,FC=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},LC=function(t,n){return function(i,r){n(i,r,t)}};var jC=Object.create(null);function RC(t,n){if(n<=0)return"";jC[t]||(jC[t]=["",t]);var i=jC[t];for(var r=i.length;r<=n;r++)i[r]=i[r-1]+t;return i[n]}var TC=MC=function(){function t(t,n,i){this._languageConfigurationService=i,this._opts=n,this._selection=t,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}t.unshiftIndent=function(t,n,i,r,e){var o=B_.visibleColumnFromColumn(t,n,i);if(e){var s=RC(" ",r);return RC(s,B_.prevIndentTabStop(o,r)/r)}return RC("\t",B_.prevRenderTabStop(o,i)/i)};t.shiftIndent=function(t,n,i,r,e){var o=B_.visibleColumnFromColumn(t,n,i);if(e){var s=RC(" ",r);return RC(s,B_.nextIndentTabStop(o,r)/r)}return RC("\t",B_.nextRenderTabStop(o,i)/i)};t.prototype._addEditOperation=function(t,n,i){this._useLastEditRangeForCursorEndPosition?t.addTrackedEditOperation(n,i):t.addEditOperation(n,i)};t.prototype.getEditOperations=function(n,i){var r=this._selection.startLineNumber;var e=this._selection.endLineNumber;this._selection.endColumn===1&&r!==e&&(e-=1);var o=this._opts,s=o.tabSize,u=o.indentSize,a=o.insertSpaces,h=r===e;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(n.getLineContent(r))&&(this._useLastEditRangeForCursorEndPosition=!0);var c=0,f=0;for(var l=r;l<=e;l++,c=f){f=0;var v=n.getLineContent(l);var d=void 0,g=vo(v);if((!this._opts.isUnshift||v.length!==0&&g!==0)&&(h||this._opts.isUnshift||v.length!==0)){if(g===-1&&(g=v.length),l>1&&B_.visibleColumnFromColumn(v,g+1,s)%u!=0&&n.tokenization.isCheapToTokenize(l-1)){var p=EC(this._opts.autoIndent,n,new Ir(l-1,n.getLineMaxColumn(l-1),l-1,n.getLineMaxColumn(l-1)),this._languageConfigurationService);if(p){if(f=c,p.appendText)for(var w=0,m=p.appendText.length;w<m&&f<u&&p.appendText.charCodeAt(w)===32;w++)f++;p.removeText&&(f=Math.max(0,f-p.removeText));for(var w=0;w<f&&g!==0&&v.charCodeAt(g-1)===32;w++)g--}}this._opts.isUnshift&&g===0||(d=this._opts.isUnshift?t.unshiftIndent(v,g+1,s,u,a):t.shiftIndent(v,g+1,s,u,a),this._addEditOperation(i,new Ir(l,1,l,g+1),d),l!==r||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=g+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&n.getLineLength(r)===0&&(this._useLastEditRangeForCursorEndPosition=!0);var c=a?RC(" ",u):"\t";for(var f=r;f<=e;f++){var l=n.getLineContent(f);var v=vo(l);if((!this._opts.isUnshift||l.length!==0&&v!==0)&&(h||this._opts.isUnshift||l.length!==0)&&(v===-1&&(v=l.length),!this._opts.isUnshift||v!==0))if(this._opts.isUnshift){v=Math.min(v,u);for(var d=0;d<v;d++)if(l.charCodeAt(d)===9){v=d+1;break}this._addEditOperation(i,new Ir(f,1,f,v+1),"")}else this._addEditOperation(i,new Ir(f,1,f,1),c),f!==r||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=i.trackSelection(this._selection)};t.prototype.computeCursorState=function(t,n){if(this._useLastEditRangeForCursorEndPosition){var i=n.getInverseEditOperations()[0];return new Br(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}var r=n.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){var i=this._selection.startColumn;return r.startColumn<=i?r:r.getDirection()===0?new Br(r.startLineNumber,i,r.endLineNumber,r.endColumn):new Br(r.endLineNumber,r.endColumn,r.startLineNumber,i)}return r};return t}();TC=MC=FC([LC(2,xv)],TC);var IC=function(){function t(t,n,i){this._range=t,this._charBeforeSelection=n,this._charAfterSelection=i}t.prototype.getEditOperations=function(t,n){n.addTrackedEditOperation(new Ir(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),n.addTrackedEditOperation(new Ir(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)};t.prototype.computeCursorState=function(t,n){var i=n.getInverseEditOperations(),r=i[0].range,e=i[1].range;return new Br(r.endLineNumber,r.endColumn,e.endLineNumber,e.endColumn-this._charAfterSelection.length)};return t}();var BC=function(){function t(t,n,i){this._position=t,this._text=n,this._charAfter=i}t.prototype.getEditOperations=function(t,n){n.addTrackedEditOperation(new Ir(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)};t.prototype.computeCursorState=function(t,n){var i=n.getInverseEditOperations()[0].range;return new Br(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)};return t}();function NC(t,n,i,r,e){if(r===void 0){r=!0}if(t<4)return null;var o=e.getLanguageConfiguration(n.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;if(i<=1)return{indentation:"",action:null};for(var s=i-1;s>0&&n.getLineContent(s)==="";s--)if(s===1)return{indentation:"",action:null};var u=function(t,n,i){var r=t.tokenization.getLanguageIdAtPosition(n,0);if(n>1){var e=void 0,o=-1;for(e=n-1;e>=1;e--){if(t.tokenization.getLanguageIdAtPosition(e,0)!==r)return o;var s=t.getLineContent(e);if(!i.shouldIgnore(s)&&!/^\s+$/.test(s)&&s!=="")return e;o=e}}return-1}(n,i,o);if(u<0)return null;if(u<1)return{indentation:"",action:null};var a=n.getLineContent(u);if(o.shouldIncrease(a)||o.shouldIndentNextLine(a))return{indentation:go(a),action:ul.Indent,line:u};if(o.shouldDecrease(a))return{indentation:go(a),action:null,line:u};{if(u===1)return{indentation:go(n.getLineContent(u)),action:null,line:u};var s=u-1,h=o.getIndentMetadata(n.getLineContent(s));if(!(3&h)&&4&h){var c=0;for(var f=s-1;f>0;f--)if(!o.shouldIndentNextLine(n.getLineContent(f))){c=f;break}return{indentation:go(n.getLineContent(c+1)),action:null,line:c+1}}if(r)return{indentation:go(n.getLineContent(u)),action:null,line:u};for(var c=u;c>0;c--){var f=n.getLineContent(c);if(o.shouldIncrease(f))return{indentation:go(f),action:ul.Indent,line:c};if(o.shouldIndentNextLine(f)){var l=0;for(var v=c-1;v>0;v--)if(!o.shouldIndentNextLine(n.getLineContent(c))){l=v;break}return{indentation:go(n.getLineContent(l+1)),action:null,line:l+1}}if(o.shouldDecrease(f))return{indentation:go(f),action:null,line:c}}return{indentation:go(n.getLineContent(1)),action:null,line:1}}}function PC(t,n,i,r,e,o){if(t<4)return null;var s=o.getLanguageConfiguration(i);if(!s)return null;var u=o.getLanguageConfiguration(i).indentRulesSupport;if(!u)return null;var a=NC(t,n,r,void 0,o),h=n.getLineContent(r);if(a){var c=a.line;if(c!==void 0){var f=!0;for(var l=c;l<r-1;l++)if(!/^\s*$/.test(n.getLineContent(l))){f=!1;break}if(f){var l=s.onEnter(t,"",n.getLineContent(c),"");if(l){var v=go(n.getLineContent(c));return l.removeText&&(v=v.substring(0,v.length-l.removeText)),l.indentAction===ul.Indent||l.indentAction===ul.IndentOutdent?v=e.shiftIndent(v):l.indentAction===ul.Outdent&&(v=e.unshiftIndent(v)),u.shouldDecrease(h)&&(v=e.unshiftIndent(v)),l.appendText&&(v+=l.appendText),go(v)}}}return u.shouldDecrease(h)?a.action===ul.Indent?a.indentation:e.unshiftIndent(a.indentation):a.action===ul.Indent?e.shiftIndent(a.indentation):a.indentation}return null}function WC(t,n,i){var r=i.getLanguageConfiguration(t.getLanguageId()).indentRulesSupport;return r?n<1||n>t.getLineCount()?null:r.getIndentMetadata(t.getLineContent(n)):null}var HC=function(){function t(){}t.indent=function(t,n,i){if(n===null||i===null)return[];var r=[];for(var e=0,o=i.length;e<o;e++)r[e]=new TC(i[e],{isUnshift:!1,tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,useTabStops:t.useTabStops,autoIndent:t.autoIndent},t.languageConfigurationService);return r};t.outdent=function(t,n,i){var r=[];for(var e=0,o=i.length;e<o;e++)r[e]=new TC(i[e],{isUnshift:!0,tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,useTabStops:t.useTabStops,autoIndent:t.autoIndent},t.languageConfigurationService);return r};t.shiftIndent=function(t,n,i){return i=i||1,TC.shiftIndent(n,n.length+i,t.tabSize,t.indentSize,t.insertSpaces)};t.unshiftIndent=function(t,n,i){return i=i||1,TC.unshiftIndent(n,n.length+i,t.tabSize,t.indentSize,t.insertSpaces)};t._distributedPaste=function(t,n,i,r){var e=[];for(var o=0,s=i.length;o<s;o++)e[o]=new pC(i[o],r[o]);return new vC(0,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})};t._simplePaste=function(t,n,i,r,e){var o=[];for(var s=0,u=i.length;s<u;s++){var a=i[s],h=a.getPosition();if(e&&!a.isEmpty()&&(e=!1),e&&r.indexOf("\n")!==r.length-1&&(e=!1),e){var c=new Ir(h.lineNumber,1,h.lineNumber,1);o[s]=new yC(c,r,a,!0)}else o[s]=new pC(a,r)}return new vC(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})};t._distributePasteToCursors=function(t,n,i,r,e){if(r||n.length===1)return null;if(e&&e.length===n.length)return e;if(t.multiCursorPaste==="spread"){i.charCodeAt(i.length-1)===10&&(i=i.substr(0,i.length-1)),i.charCodeAt(i.length-1)===13&&(i=i.substr(0,i.length-1));var o=lo(i);if(o.length===n.length)return o}return null};t.paste=function(t,n,i,r,e,o){var s=this._distributePasteToCursors(t,i,r,e,o);return s?(i=i.sort(Ir.compareRangesUsingStarts),this._distributedPaste(t,n,i,s)):this._simplePaste(t,n,i,r,e)};t._goodIndentForLine=function(n,i,r){var e=null,o="";var s=NC(n.autoIndent,i,r,!1,n.languageConfigurationService);if(s)e=s.action,o=s.indentation;else if(r>1){var u=void 0;for(u=r-1;u>=1&&!(po(i.getLineContent(u))>=0);u--);if(u<1)return null;var a=i.getLineMaxColumn(u),h=EC(n.autoIndent,i,new Ir(u,a,u,a),n.languageConfigurationService);h&&(o=h.indentation+h.appendText)}return e&&(e===ul.Indent&&(o=t.shiftIndent(n,o)),e===ul.Outdent&&(o=t.unshiftIndent(n,o)),o=n.normalizeIndentation(o)),o||null};t._replaceJumpToNextIndent=function(t,n,i,r){var e="";var o=i.getStartPosition();if(t.insertSpaces){var s=t.visibleColumnFromColumn(n,o),u=t.indentSize,a=u-s%u;for(var h=0;h<a;h++)e+=" "}else e="\t";return new pC(i,e,r)};t.tab=function(t,n,i){var r=[];for(var e=0,o=i.length;e<o;e++){var s=i[e];if(s.isEmpty()){var u=n.getLineContent(s.startLineNumber);if(/^\s*$/.test(u)&&n.tokenization.isCheapToTokenize(s.startLineNumber)){var a=this._goodIndentForLine(t,n,s.startLineNumber);a=a||"\t";var h=t.normalizeIndentation(a);if(!u.startsWith(h)){r[e]=new pC(new Ir(s.startLineNumber,1,s.startLineNumber,u.length+1),h,!0);continue}}r[e]=this._replaceJumpToNextIndent(t,n,s,!0)}else{if(s.startLineNumber===s.endLineNumber){var u=n.getLineMaxColumn(s.startLineNumber);if(s.startColumn!==1||s.endColumn!==u){r[e]=this._replaceJumpToNextIndent(t,n,s,!1);continue}}r[e]=new TC(s,{isUnshift:!1,tabSize:t.tabSize,indentSize:t.indentSize,insertSpaces:t.insertSpaces,useTabStops:t.useTabStops,autoIndent:t.autoIndent},t.languageConfigurationService)}}return r};t.compositionType=function(t,n,i,r,e,o,s,u){var a=this;var h=r.map((function(t){return a._compositionType(i,t,e,o,s,u)}));return new vC(4,h,{shouldPushStackElementBefore:VC(t,4),shouldPushStackElementAfter:!1})};t._compositionType=function(t,n,i,r,e,o){if(!n.isEmpty())return null;var s=n.getPosition(),u=Math.max(1,s.column-r),a=Math.min(t.getLineMaxColumn(s.lineNumber),s.column+e),h=new Ir(s.lineNumber,u,s.lineNumber,a);return t.getValueInRange(h)===i&&o===0?null:new bC(h,i,0,o)};t._typeCommand=function(t,n,i){return i?new mC(t,n,!0):new pC(t,n,!0)};t._enter=function(n,i,r,e){if(n.autoIndent===0)return t._typeCommand(e,"\n",r);if(!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber)||n.autoIndent===1){var o=go(i.getLineContent(e.startLineNumber)).substring(0,e.startColumn-1);return t._typeCommand(e,"\n"+n.normalizeIndentation(o),r)}var s=EC(n.autoIndent,i,e,n.languageConfigurationService);if(s){if(s.indentAction===ul.None||s.indentAction===ul.Indent)return t._typeCommand(e,"\n"+n.normalizeIndentation(s.indentation+s.appendText),r);if(s.indentAction===ul.IndentOutdent){var o=n.normalizeIndentation(s.indentation),u=n.normalizeIndentation(s.indentation+s.appendText),a="\n"+u+"\n"+o;return r?new mC(e,a,!0):new bC(e,a,-1,u.length-o.length,!0)}if(s.indentAction===ul.Outdent){var o=t.unshiftIndent(n,s.indentation);return t._typeCommand(e,"\n"+n.normalizeIndentation(o+s.appendText),r)}}var h=go(i.getLineContent(e.startLineNumber)).substring(0,e.startColumn-1);if(n.autoIndent>=4){var o=function(t,n,i,r,e){if(t<4)return null;n.tokenization.forceTokenization(i.startLineNumber);var o=n.tokenization.getLineTokens(i.startLineNumber),s=fl(o,i.startColumn-1),u=s.getLineContent();var a,h,c=!1;s.firstCharOffset>0&&o.getLanguageId(0)!==s.languageId?(c=!0,a=u.substr(0,i.startColumn-1-s.firstCharOffset)):a=o.getLineContent().substring(0,i.startColumn-1),h=i.isEmpty()?u.substr(i.startColumn-1-s.firstCharOffset):Ov(n,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-s.firstCharOffset);var f=e.getLanguageConfiguration(s.languageId).indentRulesSupport;if(!f)return null;var l=a,v=go(a),d={tokenization:{getLineTokens:function(t){return n.tokenization.getLineTokens(t)},getLanguageId:function(){return n.getLanguageId()},getLanguageIdAtPosition:function(t,i){return n.getLanguageIdAtPosition(t,i)}},getLineContent:function(t){return t===i.startLineNumber?l:n.getLineContent(t)}},g=go(o.getLineContent()),p=NC(t,d,i.startLineNumber+1,void 0,e);if(!p){var w=c?g:v;return{beforeEnter:w,afterEnter:w}}var m=c?g:p.indentation;return p.action===ul.Indent&&(m=r.shiftIndent(m)),f.shouldDecrease(h)&&(m=r.unshiftIndent(m)),{beforeEnter:c?g:v,afterEnter:m}}(n.autoIndent,i,e,{unshiftIndent:function(i){return t.unshiftIndent(n,i)},shiftIndent:function(i){return t.shiftIndent(n,i)},normalizeIndentation:function(t){return n.normalizeIndentation(t)}},n.languageConfigurationService);if(o){var u=n.visibleColumnFromColumn(i,e.getEndPosition());var a=e.endColumn,c=vo(i.getLineContent(e.endLineNumber));if(e=c>=0?e.setEndPosition(e.endLineNumber,Math.max(e.endColumn,c+1)):e.setEndPosition(e.endLineNumber,i.getLineMaxColumn(e.endLineNumber)),r)return new mC(e,"\n"+n.normalizeIndentation(o.afterEnter),!0);{var f=0;return a<=c+1&&(n.insertSpaces||(u=Math.ceil(u/n.indentSize)),f=Math.min(u+1-n.normalizeIndentation(o.afterEnter).length-1,0)),new bC(e,"\n"+n.normalizeIndentation(o.afterEnter),0,f,!0)}}}return t._typeCommand(e,"\n"+n.normalizeIndentation(h),r)};t._isAutoIndentType=function(t,n,i){if(t.autoIndent<4)return!1;for(var r=0,e=i.length;r<e;r++)if(!n.tokenization.isCheapToTokenize(i[r].getEndPosition().lineNumber))return!1;return!0};t._runAutoIndentType=function(n,i,r,e){var o=Av(i,r.startLineNumber,r.startColumn),s=function(t,n,i,r,e,o){if(t<4)return null;var s=Ov(n,i.startLineNumber,i.startColumn);if(s.firstCharOffset)return null;var u=o.getLanguageConfiguration(s.languageId).indentRulesSupport;if(!u)return null;var a=s.getLineContent(),h=a.substr(0,i.startColumn-1-s.firstCharOffset);var c;if(c=i.isEmpty()?a.substr(i.startColumn-1-s.firstCharOffset):Ov(n,i.endLineNumber,i.endColumn).getLineContent().substr(i.endColumn-1-s.firstCharOffset),!u.shouldDecrease(h+c)&&u.shouldDecrease(h+r+c)){var f=NC(t,n,i.startLineNumber,!1,o);if(!f)return null;var l=f.indentation;return f.action!==ul.Indent&&(l=e.unshiftIndent(l)),l}return null}(n.autoIndent,i,r,e,{shiftIndent:function(i){return t.shiftIndent(n,i)},unshiftIndent:function(i){return t.unshiftIndent(n,i)}},n.languageConfigurationService);if(s===null)return null;if(s!==n.normalizeIndentation(o)){var u=i.getLineFirstNonWhitespaceColumn(r.startLineNumber);return u===0?t._typeCommand(new Ir(r.startLineNumber,1,r.endLineNumber,r.endColumn),n.normalizeIndentation(s)+e,!1):t._typeCommand(new Ir(r.startLineNumber,1,r.endLineNumber,r.endColumn),n.normalizeIndentation(s)+i.getLineContent(r.startLineNumber).substring(u-1,r.startColumn-1)+e,!1)}return null};t._isAutoClosingOvertype=function(t,n,i,r,e){if(t.autoClosingOvertype==="never"||!t.autoClosingPairs.autoClosingPairsCloseSingleChar.has(e))return!1;for(var o=0,s=i.length;o<s;o++){var u=i[o];if(!u.isEmpty())return!1;var a=u.getPosition(),h=n.getLineContent(a.lineNumber);if(h.charAt(a.column-1)!==e)return!1;var c=dC(e);if((a.column>2?h.charCodeAt(a.column-2):0)===92&&c)return!1;if(t.autoClosingOvertype==="auto"){var f=!1;for(var l=0,v=r.length;l<v;l++){var d=r[l];if(a.lineNumber===d.startLineNumber&&a.column===d.startColumn){f=!0;break}}if(!f)return!1}}return!0};t._runAutoClosingOvertype=function(t,n,i,r,e){var o=[];for(var s=0,u=r.length;s<u;s++){var a=r[s].getPosition(),h=new Ir(a.lineNumber,a.column,a.lineNumber,a.column+1);o[s]=new pC(h,e)}return new vC(4,o,{shouldPushStackElementBefore:VC(t,4),shouldPushStackElementAfter:!1})};t._isBeforeClosingBrace=function(t,n){var i=n.charAt(0),r=t.autoClosingPairs.autoClosingPairsOpenByStart.get(i)||[],e=t.autoClosingPairs.autoClosingPairsCloseByStart.get(i)||[],o=r.some((function(t){return n.startsWith(t.open)})),s=e.some((function(t){return n.startsWith(t.close)}));return!o&&s};t._findAutoClosingPairOpen=function(t,n,i,r){var e=t.autoClosingPairs.autoClosingPairsOpenByEnd.get(r);if(!e)return null;var o=null;for(var s=0,u=e;s<u.length;s++){var a=u[s];if(o===null||a.open.length>o.open.length){var h=!0;for(var c=0,f=i;c<f.length;c++){var l=f[c];if(n.getValueInRange(new Ir(l.lineNumber,l.column-a.open.length+1,l.lineNumber,l.column))+r!==a.open){h=!1;break}}h&&(o=a)}}return o};t._findContainedAutoClosingPair=function(t,n){if(n.open.length<=1)return null;var i=n.close.charAt(n.close.length-1),r=t.autoClosingPairs.autoClosingPairsCloseByEnd.get(i)||[];var e=null;for(var o=0,s=r;o<s.length;o++){var u=s[o];u.open!==n.open&&n.open.includes(u.open)&&n.close.endsWith(u.close)&&(!e||u.open.length>e.open.length)&&(e=u)}return e};t._getAutoClosingPairClose=function(n,i,r,e,o){for(var s=0,u=r;s<u.length;s++){var a=u[s];if(!a.isEmpty())return null}var h=r.map((function(t){var n=t.getPosition();return o?{lineNumber:n.lineNumber,beforeColumn:n.column-e.length,afterColumn:n.column}:{lineNumber:n.lineNumber,beforeColumn:n.column,afterColumn:n.column}})),c=this._findAutoClosingPairOpen(n,i,h.map((function(t){return new Tr(t.lineNumber,t.beforeColumn)})),e);if(!c)return null;var f,l;if(dC(e)?(f=n.autoClosingQuotes,l=n.shouldAutoCloseBefore.quote):n.blockCommentStartToken&&c.open.includes(n.blockCommentStartToken)?(f=n.autoClosingComments,l=n.shouldAutoCloseBefore.comment):(f=n.autoClosingBrackets,l=n.shouldAutoCloseBefore.bracket),f==="never")return null;var v=this._findContainedAutoClosingPair(n,c),d=v?v.close:"";var g=!0;for(var p=0,w=h;p<w.length;p++){var a=w[p];var m=a.lineNumber,b=a.beforeColumn,y=a.afterColumn,_=i.getLineContent(m),k=_.substring(0,b-1),x=_.substring(y-1);if(x.startsWith(d)||(g=!1),x.length>0){var C=x.charAt(0);if(!t._isBeforeClosingBrace(n,x)&&!l(C))return null}if(c.open.length===1&&(e==="'"||e==='"')&&f!=="always"){var C=ld(n.wordSeparators,[]);if(k.length>0){var S=k.charCodeAt(k.length-1);if(C.get(S)===0)return null}}if(!i.tokenization.isCheapToTokenize(m))return null;i.tokenization.forceTokenization(m);var D=fl(i.tokenization.getLineTokens(m),b-1);if(!c.shouldAutoClose(D,b-D.firstCharOffset))return null;var A=c.findNeutralCharacter();if(A){var C=i.tokenization.getTokenTypeIfInsertingCharacter(m,b,A);if(!c.isOK(C))return null}}return g?c.close.substring(0,c.close.length-d.length):c.close};t._runAutoClosingOpenCharType=function(t,n,i,r,e,o,s){var u=[];for(var a=0,h=r.length;a<h;a++){var c=r[a];u[a]=new zC(c,e,!o,s)}return new vC(4,u,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})};t._shouldSurroundChar=function(t,n){return dC(n)?t.autoSurround==="quotes"||t.autoSurround==="languageDefined":t.autoSurround==="brackets"||t.autoSurround==="languageDefined"};t._isSurroundSelectionType=function(n,i,r,e){if(!t._shouldSurroundChar(n,e)||!n.surroundingPairs.hasOwnProperty(e))return!1;var o=dC(e);for(var s=0,u=r;s<u.length;s++){var a=u[s];if(a.isEmpty())return!1;var h=!0;for(var c=a.startLineNumber;c<=a.endLineNumber;c++){var f=i.getLineContent(c),l=c===a.startLineNumber?a.startColumn-1:0,v=c===a.endLineNumber?a.endColumn-1:f.length,d=f.substring(l,v);if(/[^ \t]/.test(d)){h=!1;break}}if(h||o&&a.startLineNumber===a.endLineNumber&&a.startColumn+1===a.endColumn&&dC(i.getValueInRange(a)))return!1}return!0};t._runSurroundSelectionType=function(t,n,i,r,e){var o=[];for(var s=0,u=r.length;s<u;s++){var a=r[s],h=n.surroundingPairs[e];o[s]=new IC(a,e,h)}return new vC(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})};t._isTypeInterceptorElectricChar=function(t,n,i){return!(i.length!==1||!n.tokenization.isCheapToTokenize(i[0].getEndPosition().lineNumber))};t._typeInterceptorElectricChar=function(t,n,i,r,e){if(!n.electricChars.hasOwnProperty(e)||!r.isEmpty())return null;var o=r.getPosition();i.tokenization.forceTokenization(o.lineNumber);var s=i.tokenization.getLineTokens(o.lineNumber);var u;try{u=n.onElectricCharacter(e,s,o.column)}catch(a){return Gn(a),null}if(!u)return null;if(u.matchOpenBracket){var a=(s.getLineContent()+e).lastIndexOf(u.matchOpenBracket)+1,h=i.bracketPairs.findMatchingBracketUp(u.matchOpenBracket,{lineNumber:o.lineNumber,column:a},500);if(h){if(h.startLineNumber===o.lineNumber)return null;var c=go(i.getLineContent(h.startLineNumber)),f=n.normalizeIndentation(c),l=i.getLineContent(o.lineNumber),v=i.getLineFirstNonWhitespaceColumn(o.lineNumber)||o.column,d=f+l.substring(v-1,o.column-1)+e,g=new Ir(o.lineNumber,1,o.lineNumber,o.column),p=new pC(g,d);return new vC(KC(d,t),[p],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null};t.compositionEndWithInterceptors=function(n,i,r,e,o,s){if(!e)return null;var u=null;for(var a=0,h=e;a<h.length;a++){var c=h[a];if(u===null)u=c.insertedText;else if(u!==c.insertedText)return null}if(!u||u.length!==1)return null;var f=u;var l=!1;for(var v=0,d=e;v<d.length;v++){var c=d[v];if(c.deletedText.length!==0){l=!0;break}}if(l){if(!t._shouldSurroundChar(i,f)||!i.surroundingPairs.hasOwnProperty(f))return null;var c=dC(f);for(var g=0,p=e;g<p.length;g++){var w=p[g];if(w.deletedSelectionStart!==0||w.deletedSelectionEnd!==w.deletedText.length||/^[ \t]+$/.test(w.deletedText)||c&&dC(w.deletedText))return null}var m=[];for(var b=0,y=o;b<y.length;b++){var w=y[b];if(!w.isEmpty())return null;m.push(w.getPosition())}if(m.length!==e.length)return null;var _=[];for(var w=0,k=m.length;w<k;w++)_.push(new BC(m[w],e[w].deletedText,i.surroundingPairs[f]));return new vC(4,_,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(i,r,o,s,f)){var c=o.map((function(t){return new pC(new Ir(t.positionLineNumber,t.positionColumn,t.positionLineNumber,t.positionColumn+1),"",!1)}));return new vC(4,c,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}var x=this._getAutoClosingPairClose(i,r,o,f,!0);return x!==null?this._runAutoClosingOpenCharType(n,i,r,o,f,!0,x):null};t.typeWithInterceptors=function(n,i,r,e,o,s,u){if(!n&&u==="\n"){var a=[];for(var h=0,c=o.length;h<c;h++)a[h]=t._enter(r,e,!1,o[h]);return new vC(4,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!n&&this._isAutoIndentType(r,e,o)){var a=[];var h=!1;for(var c=0,f=o.length;c<f;c++)if(a[c]=this._runAutoIndentType(r,e,o[c],u),!a[c]){h=!0;break}if(!h)return new vC(4,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(r,e,o,s,u))return this._runAutoClosingOvertype(i,r,e,o,u);if(!n){var a=this._getAutoClosingPairClose(r,e,o,u,!1);if(a)return this._runAutoClosingOpenCharType(i,r,e,o,u,!1,a)}if(!n&&this._isSurroundSelectionType(r,e,o,u))return this._runSurroundSelectionType(i,r,e,o,u);if(!n&&this._isTypeInterceptorElectricChar(r,e,o)){var a=this._typeInterceptorElectricChar(i,r,e,o[0],u);if(a)return a}var l=[];for(var a=0,h=o.length;a<h;a++)l[a]=new pC(o[a],u);var v=KC(u,i);return new vC(v,l,{shouldPushStackElementBefore:VC(i,v),shouldPushStackElementAfter:!1})};t.typeWithoutInterceptors=function(t,n,i,r,e){var o=[];for(var s=0,u=r.length;s<u;s++)o[s]=new pC(r[s],e);var a=KC(e,t);return new vC(a,o,{shouldPushStackElementBefore:VC(t,a),shouldPushStackElementAfter:!1})};t.lineInsertBefore=function(t,n,i){if(n===null||i===null)return[];var r=[];for(var e=0,o=i.length;e<o;e++){var s=i[e].positionLineNumber;if(s===1)r[e]=new mC(new Ir(1,1,1,1),"\n");else{s--;var u=n.getLineMaxColumn(s);r[e]=this._enter(t,n,!1,new Ir(s,u,s,u))}}return r};t.lineInsertAfter=function(t,n,i){if(n===null||i===null)return[];var r=[];for(var e=0,o=i.length;e<o;e++){var s=i[e].positionLineNumber,u=n.getLineMaxColumn(s);r[e]=this._enter(t,n,!1,new Ir(s,u,s,u))}return r};t.lineBreakInsert=function(t,n,i){var r=[];for(var e=0,o=i.length;e<o;e++)r[e]=this._enter(t,n,!0,i[e]);return r};return t}();var zC=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,n,(r?i:"")+e,0,-e.length)||this,o._openCharacter=i,o._closeCharacter=e,o.closeCharacterRange=null,o.enclosingRange=null;return o}n.prototype.computeCursorState=function(n,i){var r=i.getInverseEditOperations()[0].range;return this.closeCharacterRange=new Ir(r.startLineNumber,r.endColumn-this._closeCharacter.length,r.endLineNumber,r.endColumn),this.enclosingRange=new Ir(r.startLineNumber,r.endColumn-this._openCharacter.length-this._closeCharacter.length,r.endLineNumber,r.endColumn),t.prototype.computeCursorState.call(this,n,i)};return n}(bC);var UC=function(){function t(t,n,i,r,e,o){this.deletedText=t,this.deletedSelectionStart=n,this.deletedSelectionEnd=i,this.insertedText=r,this.insertedSelectionStart=e,this.insertedSelectionEnd=o}return t}();function KC(t,n){return t===" "?n===5||n===6?6:5:4}function VC(t,n){return!(!GC(t)||GC(n))||t!==5&&qC(t)!==qC(n)}function qC(t){return t===6||t===5?"space":t}function GC(t){return t===4||t===5||t===6}var $C;(function(t){t.editorSimpleInput=new qc("editorSimpleInput",!1,!0),t.editorTextFocus=new qc("editorTextFocus",!1,ht(0,"Whether the editor text has focus (cursor is blinking)")),t.focus=new qc("editorFocus",!1,ht(0,"Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),t.textInputFocus=new qc("textInputFocus",!1,ht(0,"Whether an editor or a rich text input has focus (cursor is blinking)")),t.readOnly=new qc("editorReadonly",!1,ht(0,"Whether the editor is read-only")),t.inDiffEditor=new qc("inDiffEditor",!1,ht(0,"Whether the context is a diff editor")),t.isEmbeddedDiffEditor=new qc("isEmbeddedDiffEditor",!1,ht(0,"Whether the context is an embedded diff editor")),t.inMultiDiffEditor=new qc("inMultiDiffEditor",!1,ht(0,"Whether the context is a multi diff editor")),t.multiDiffEditorAllCollapsed=new qc("multiDiffEditorAllCollapsed",void 0,ht(0,"Whether all files in multi diff editor are collapsed")),t.hasChanges=new qc("diffEditorHasChanges",!1,ht(0,"Whether the diff editor has changes")),t.comparingMovedCode=new qc("comparingMovedCode",!1,ht(0,"Whether a moved code block is selected for comparison")),t.accessibleDiffViewerVisible=new qc("accessibleDiffViewerVisible",!1,ht(0,"Whether the accessible diff viewer is visible")),t.diffEditorRenderSideBySideInlineBreakpointReached=new qc("diffEditorRenderSideBySideInlineBreakpointReached",!1,ht(0,"Whether the diff editor render side by side inline breakpoint is reached")),t.diffEditorInlineMode=new qc("diffEditorInlineMode",!1,ht(0,"Whether inline mode is active")),t.diffEditorOriginalWritable=new qc("diffEditorOriginalWritable",!1,ht(0,"Whether modified is writable in the diff editor")),t.diffEditorModifiedWritable=new qc("diffEditorModifiedWritable",!1,ht(0,"Whether modified is writable in the diff editor")),t.diffEditorOriginalUri=new qc("diffEditorOriginalUri","",ht(0,"The uri of the original document")),t.diffEditorModifiedUri=new qc("diffEditorModifiedUri","",ht(0,"The uri of the modified document")),t.columnSelection=new qc("editorColumnSelection",!1,ht(0,"Whether `editor.columnSelection` is enabled")),t.writable=t.readOnly.toNegated(),t.hasNonEmptySelection=new qc("editorHasSelection",!1,ht(0,"Whether the editor has text selected")),t.hasOnlyEmptySelection=t.hasNonEmptySelection.toNegated(),t.hasMultipleSelections=new qc("editorHasMultipleSelections",!1,ht(0,"Whether the editor has multiple selections")),t.hasSingleSelection=t.hasMultipleSelections.toNegated(),t.tabMovesFocus=new qc("editorTabMovesFocus",!1,ht(0,"Whether `Tab` will move focus out of the editor")),t.tabDoesNotMoveFocus=t.tabMovesFocus.toNegated(),t.isInEmbeddedEditor=new qc("isInEmbeddedEditor",!1,!0),t.canUndo=new qc("canUndo",!1,!0),t.canRedo=new qc("canRedo",!1,!0),t.hoverVisible=new qc("editorHoverVisible",!1,ht(0,"Whether the editor hover is visible")),t.hoverFocused=new qc("editorHoverFocused",!1,ht(0,"Whether the editor hover is focused")),t.stickyScrollFocused=new qc("stickyScrollFocused",!1,ht(0,"Whether the sticky scroll is focused")),t.stickyScrollVisible=new qc("stickyScrollVisible",!1,ht(0,"Whether the sticky scroll is visible")),t.standaloneColorPickerVisible=new qc("standaloneColorPickerVisible",!1,ht(0,"Whether the standalone color picker is visible")),t.standaloneColorPickerFocused=new qc("standaloneColorPickerFocused",!1,ht(0,"Whether the standalone color picker is focused")),t.inCompositeEditor=new qc("inCompositeEditor",void 0,ht(0,"Whether the editor is part of a larger editor (e.g. notebooks)")),t.notInCompositeEditor=t.inCompositeEditor.toNegated(),t.languageId=new qc("editorLangId","",ht(0,"The language identifier of the editor")),t.hasCompletionItemProvider=new qc("editorHasCompletionItemProvider",!1,ht(0,"Whether the editor has a completion item provider")),t.hasCodeActionsProvider=new qc("editorHasCodeActionsProvider",!1,ht(0,"Whether the editor has a code actions provider")),t.hasCodeLensProvider=new qc("editorHasCodeLensProvider",!1,ht(0,"Whether the editor has a code lens provider")),t.hasDefinitionProvider=new qc("editorHasDefinitionProvider",!1,ht(0,"Whether the editor has a definition provider")),t.hasDeclarationProvider=new qc("editorHasDeclarationProvider",!1,ht(0,"Whether the editor has a declaration provider")),t.hasImplementationProvider=new qc("editorHasImplementationProvider",!1,ht(0,"Whether the editor has an implementation provider")),t.hasTypeDefinitionProvider=new qc("editorHasTypeDefinitionProvider",!1,ht(0,"Whether the editor has a type definition provider")),t.hasHoverProvider=new qc("editorHasHoverProvider",!1,ht(0,"Whether the editor has a hover provider")),t.hasDocumentHighlightProvider=new qc("editorHasDocumentHighlightProvider",!1,ht(0,"Whether the editor has a document highlight provider")),t.hasDocumentSymbolProvider=new qc("editorHasDocumentSymbolProvider",!1,ht(0,"Whether the editor has a document symbol provider")),t.hasReferenceProvider=new qc("editorHasReferenceProvider",!1,ht(0,"Whether the editor has a reference provider")),t.hasRenameProvider=new qc("editorHasRenameProvider",!1,ht(0,"Whether the editor has a rename provider")),t.hasSignatureHelpProvider=new qc("editorHasSignatureHelpProvider",!1,ht(0,"Whether the editor has a signature help provider")),t.hasInlayHintsProvider=new qc("editorHasInlayHintsProvider",!1,ht(0,"Whether the editor has an inline hints provider")),t.hasDocumentFormattingProvider=new qc("editorHasDocumentFormattingProvider",!1,ht(0,"Whether the editor has a document formatting provider")),t.hasDocumentSelectionFormattingProvider=new qc("editorHasDocumentSelectionFormattingProvider",!1,ht(0,"Whether the editor has a document selection formatting provider")),t.hasMultipleDocumentFormattingProvider=new qc("editorHasMultipleDocumentFormattingProvider",!1,ht(0,"Whether the editor has multiple document formatting providers")),t.hasMultipleDocumentSelectionFormattingProvider=new qc("editorHasMultipleDocumentSelectionFormattingProvider",!1,ht(0,"Whether the editor has multiple document selection formatting providers"))})($C||($C={}));var JC=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.runEditorCommand=function(t,n,i){var r=n._getViewModel();r&&this.runCoreEditorCommand(r,i||{})};return n}(Ff);var ZC,QC,YC;(function(t){t.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(t){if(!z(t))return!1;var n=t;return!!H(n.to)&&!(!G(n.by)&&!H(n.by))&&!(!G(n.value)&&!K(n.value))&&!(!G(n.revealCursor)&&!q(n.revealCursor))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},t.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},t.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},t.parse=function(n){var i,r;switch(n.to){case t.RawDirection.Up:i=1;break;case t.RawDirection.Right:i=2;break;case t.RawDirection.Down:i=3;break;case t.RawDirection.Left:i=4;break;default:return null}switch(n.by){case t.RawUnit.Line:r=1;break;case t.RawUnit.WrappedLine:r=2;break;case t.RawUnit.Page:r=3;break;case t.RawUnit.HalfPage:r=4;break;case t.RawUnit.Editor:r=5;break;case t.RawUnit.Column:r=6;break;default:r=2}return{direction:i,unit:r,value:Math.floor(n.value||1),revealCursor:!!n.revealCursor,select:!!n.select}}})(ZC||(ZC={})),function(t){t.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(t){if(!z(t))return!1;var n=t;return!(!K(n.lineNumber)&&!H(n.lineNumber))&&!(!G(n.at)&&!H(n.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},t.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(QC||(QC={}));var XC=function(){function t(t){var n=this;t.addImplementation(1e4,"code-editor",(function(t,i){var r=t.get(Qh).getFocusedCodeEditor();return!(!r||!r.hasTextFocus())&&n._runEditorCommand(t,r,i)})),t.addImplementation(1e3,"generic-dom-input-textarea",(function(t,i){var r=Ka();return!!(r&&["input","textarea"].indexOf(r.tagName.toLowerCase())>=0)&&(n.runDOMCommand(r),!0)})),t.addImplementation(0,"generic-dom",(function(t,i){var r=t.get(Qh).getActiveCodeEditor();return!!r&&(r.focus(),n._runEditorCommand(t,r,i))}))}t.prototype._runEditorCommand=function(t,n,i){return this.runEditorCommand(t,n,i)||!0};return t}();(function(t){var n=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){n.position&&(t.model.pushStackElement(),t.setCursorStates(n.source,3,[AC.moveTo(t,t.getPrimaryCursorState(),this._inSelectionMode,n.position,n.viewPosition)])&&n.revealType!==2&&t.revealAllCursors(n.source,!0,!0))};return n}(JC);t.MoveTo=If(new n({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),t.MoveToSelect=If(new n({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));var i=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement();var i=this._getColumnSelectResult(t,t.getPrimaryCursorState(),t.getCursorColumnSelectData(),n);i!==null&&(t.setCursorStates(n.source,3,i.viewStates.map((function(t){return hC.fromViewState(t)}))),t.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:i.fromLineNumber,fromViewVisualColumn:i.fromVisualColumn,toViewLineNumber:i.toLineNumber,toViewVisualColumn:i.toVisualColumn}),i.reversed?t.revealTopMostCursor(n.source):t.revealBottomMostCursor(n.source))};return n}(JC);t.ColumnSelect=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"columnSelect",precondition:void 0})||this}n.prototype._getColumnSelectResult=function(t,n,i,r){if(r.position===void 0||r.viewPosition===void 0||r.mouseColumn===void 0)return null;var e=t.model.validatePosition(r.position),o=t.coordinatesConverter.validateViewPosition(new Tr(r.viewPosition.lineNumber,r.viewPosition.column),e),s=r.doColumnSelect?i.fromViewLineNumber:o.lineNumber,u=r.doColumnSelect?i.fromViewVisualColumn:r.mouseColumn-1;return gC.columnSelect(t.cursorConfig,t,s,u,o.lineNumber,r.mouseColumn-1)};return n}(i))),t.CursorColumnSelectLeft=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:3599,linux:{primary:0}}})||this}n.prototype._getColumnSelectResult=function(t,n,i,r){return gC.columnSelectLeft(t.cursorConfig,t,i)};return n}(i))),t.CursorColumnSelectRight=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:3601,linux:{primary:0}}})||this}n.prototype._getColumnSelectResult=function(t,n,i,r){return gC.columnSelectRight(t.cursorConfig,t,i)};return n}(i)));var r=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._isPaged=n.isPaged;return i}n.prototype._getColumnSelectResult=function(t,n,i,r){return gC.columnSelectUp(t.cursorConfig,t,i,this._isPaged)};return n}(i);t.CursorColumnSelectUp=If(new r({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:3600,linux:{primary:0}}})),t.CursorColumnSelectPageUp=If(new r({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:3595,linux:{primary:0}}}));var e=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._isPaged=n.isPaged;return i}n.prototype._getColumnSelectResult=function(t,n,i,r){return gC.columnSelectDown(t.cursorConfig,t,i,this._isPaged)};return n}(i);t.CursorColumnSelectDown=If(new e({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:3602,linux:{primary:0}}})),t.CursorColumnSelectPageDown=If(new e({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:3596,linux:{primary:0}}}));var o=function(t){__extends(n,t);function n(){return t.call(this,{id:"cursorMove",precondition:void 0,metadata:OC.metadata})||this}n.prototype.runCoreEditorCommand=function(t,n){var i=OC.parse(n);i&&this._runCursorMove(t,n.source,i)};n.prototype._runCursorMove=function(t,i,r){t.model.pushStackElement(),t.setCursorStates(i,3,n._move(t,t.getCursorStates(),r)),t.revealAllCursors(i,!0)};n._move=function(t,n,i){var r=i.select,e=i.value;switch(i.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return AC.simpleMove(t,n,i.direction,r,e,i.unit);case 11:case 13:case 12:case 14:return AC.viewportMove(t,n,i.direction,r,e);default:return null}};return n}(JC);t.CursorMoveImpl=o,t.CursorMove=If(new o);var s=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._staticArgs=n.args;return i}n.prototype.runCoreEditorCommand=function(t,n){var i=this._staticArgs;this._staticArgs.value===-1&&(i={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:n.pageSize||t.cursorConfig.pageSize}),t.model.pushStackElement(),t.setCursorStates(n.source,3,AC.simpleMove(t,t.getCursorStates(),i.direction,i.select,i.value,i.unit)),t.revealAllCursors(n.source,!0)};return n}(JC);t.CursorLeft=If(new s({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),t.CursorLeftSelect=If(new s({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:1039}})),t.CursorRight=If(new s({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),t.CursorRightSelect=If(new s({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:1041}})),t.CursorUp=If(new s({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),t.CursorUpSelect=If(new s({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),t.CursorPageUp=If(new s({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:11}})),t.CursorPageUpSelect=If(new s({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:1035}})),t.CursorDown=If(new s({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),t.CursorDownSelect=If(new s({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),t.CursorPageDown=If(new s({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:12}})),t.CursorPageDownSelect=If(new s({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:1036}})),t.CreateCursor=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"createCursor",precondition:void 0})||this}n.prototype.runCoreEditorCommand=function(t,n){if(!n.position)return;var i;i=n.wholeLine?AC.line(t,t.getPrimaryCursorState(),!1,n.position,n.viewPosition):AC.moveTo(t,t.getPrimaryCursorState(),!1,n.position,n.viewPosition);var r=t.getCursorStates();if(r.length>1){var e=i.modelState?i.modelState.position:null,o=i.viewState?i.viewState.position:null;for(var s=0,u=r.length;s<u;s++){var a=r[s];if((!e||a.modelState.selection.containsPosition(e))&&(!o||a.viewState.selection.containsPosition(o)))return r.splice(s,1),t.model.pushStackElement(),void t.setCursorStates(n.source,3,r)}}r.push(i),t.model.pushStackElement(),t.setCursorStates(n.source,3,r)};return n}(JC))),t.LastCursorMoveToSelect=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"_lastCursorMoveToSelect",precondition:void 0})||this}n.prototype.runCoreEditorCommand=function(t,n){if(!n.position)return;var i=t.getLastAddedCursorIndex(),r=t.getCursorStates(),e=r.slice(0);e[i]=AC.moveTo(t,r[i],!0,n.position,n.viewPosition),t.model.pushStackElement(),t.setCursorStates(n.source,3,e)};return n}(JC)));var u=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement(),t.setCursorStates(n.source,3,AC.moveToBeginningOfLine(t,t.getCursorStates(),this._inSelectionMode)),t.revealAllCursors(n.source,!0)};return n}(JC);t.CursorHome=If(new u({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),t.CursorHomeSelect=If(new u({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));var a=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement(),t.setCursorStates(n.source,3,this._exec(t.getCursorStates())),t.revealAllCursors(n.source,!0)};n.prototype._exec=function(t){var n=[];for(var i=0,r=t.length;i<r;i++){var e=t[i],o=e.modelState.position.lineNumber;n[i]=hC.fromModelState(e.modelState.move(this._inSelectionMode,o,1,0))}return n};return n}(JC);t.CursorLineStart=If(new a({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:0,mac:{primary:287}}})),t.CursorLineStartSelect=If(new a({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:0,mac:{primary:1311}}}));var h=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement(),t.setCursorStates(n.source,3,AC.moveToEndOfLine(t,t.getCursorStates(),this._inSelectionMode,n.sticky||!1)),t.revealAllCursors(n.source,!0)};return n}(JC);t.CursorEnd=If(new h({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:$C.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:ht(0,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),t.CursorEndSelect=If(new h({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:$C.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:ht(0,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));var c=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement(),t.setCursorStates(n.source,3,this._exec(t,t.getCursorStates())),t.revealAllCursors(n.source,!0)};n.prototype._exec=function(t,n){var i=[];for(var r=0,e=n.length;r<e;r++){var o=n[r],s=o.modelState.position.lineNumber,u=t.model.getLineMaxColumn(s);i[r]=hC.fromModelState(o.modelState.move(this._inSelectionMode,s,u,0))}return i};return n}(JC);t.CursorLineEnd=If(new c({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:0,mac:{primary:291}}})),t.CursorLineEndSelect=If(new c({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:0,mac:{primary:1315}}}));var f=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement(),t.setCursorStates(n.source,3,AC.moveToBeginningOfBuffer(t,t.getCursorStates(),this._inSelectionMode)),t.revealAllCursors(n.source,!0)};return n}(JC);t.CursorTop=If(new f({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:2062,mac:{primary:2064}}})),t.CursorTopSelect=If(new f({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:3086,mac:{primary:3088}}}));var l=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement(),t.setCursorStates(n.source,3,AC.moveToEndOfBuffer(t,t.getCursorStates(),this._inSelectionMode)),t.revealAllCursors(n.source,!0)};return n}(JC);t.CursorBottom=If(new l({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:2061,mac:{primary:2066}}})),t.CursorBottomSelect=If(new l({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:3085,mac:{primary:3090}}}));var v=function(t){__extends(n,t);function n(){return t.call(this,{id:"editorScroll",precondition:void 0,metadata:ZC.metadata})||this}n.prototype.determineScrollMethod=function(t){return[6].includes(t.unit)&&[4,2].includes(t.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(t.unit)&&[1,3].includes(t.direction)?this._runVerticalEditorScroll.bind(this):null};n.prototype.runCoreEditorCommand=function(t,n){var i=ZC.parse(n);if(!i)return;var r=this.determineScrollMethod(i);r&&r(t,n.source,i)};n.prototype._runVerticalEditorScroll=function(t,n,i){var r=this._computeDesiredScrollTop(t,i);if(i.revealCursor){var e=t.getCompletelyVisibleViewRangeAtScrollTop(r);t.setCursorStates(n,3,[AC.findPositionInViewportIfOutside(t,t.getPrimaryCursorState(),e,i.select)])}t.viewLayout.setScrollPosition({scrollTop:r},0)};n.prototype._computeDesiredScrollTop=function(t,n){if(n.unit===1){var i=t.viewLayout.getFutureViewport(),r=t.getCompletelyVisibleViewRangeAtScrollTop(i.top),e=t.coordinatesConverter.convertViewRangeToModelRange(r);var o=void 0;o=n.direction===1?Math.max(1,e.startLineNumber-n.value):Math.min(t.model.getLineCount(),e.startLineNumber+n.value);var s=t.coordinatesConverter.convertModelPositionToViewPosition(new Tr(o,1));return t.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber)}if(n.unit===5){var i=0;return n.direction===3&&(i=t.model.getLineCount()-t.cursorConfig.pageSize),t.viewLayout.getVerticalOffsetForLineNumber(i)}var u;u=n.unit===3?t.cursorConfig.pageSize*n.value:n.unit===4?Math.round(t.cursorConfig.pageSize/2)*n.value:n.value;var a=(n.direction===1?-1:1)*u;return t.viewLayout.getCurrentScrollTop()+a*t.cursorConfig.lineHeight};n.prototype._runHorizontalEditorScroll=function(t,n,i){var r=this._computeDesiredScrollLeft(t,i);t.viewLayout.setScrollPosition({scrollLeft:r},0)};n.prototype._computeDesiredScrollLeft=function(t,n){var i=(n.direction===4?-1:1)*n.value;return t.viewLayout.getCurrentScrollLeft()+i*t.cursorConfig.typicalHalfwidthCharacterWidth};return n}(JC);t.EditorScrollImpl=v,t.EditorScroll=If(new v),t.ScrollLineUp=If(new(function(n){__extends(i,n);function i(){return n.call(this,{id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:2064,mac:{primary:267}}})||this}i.prototype.runCoreEditorCommand=function(n,i){t.EditorScroll.runCoreEditorCommand(n,{to:ZC.RawDirection.Up,by:ZC.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})};return i}(JC))),t.ScrollPageUp=If(new(function(n){__extends(i,n);function i(){return n.call(this,{id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})||this}i.prototype.runCoreEditorCommand=function(n,i){t.EditorScroll.runCoreEditorCommand(n,{to:ZC.RawDirection.Up,by:ZC.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})};return i}(JC))),t.ScrollEditorTop=If(new(function(n){__extends(i,n);function i(){return n.call(this,{id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus}})||this}i.prototype.runCoreEditorCommand=function(n,i){t.EditorScroll.runCoreEditorCommand(n,{to:ZC.RawDirection.Up,by:ZC.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})};return i}(JC))),t.ScrollLineDown=If(new(function(n){__extends(i,n);function i(){return n.call(this,{id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:2066,mac:{primary:268}}})||this}i.prototype.runCoreEditorCommand=function(n,i){t.EditorScroll.runCoreEditorCommand(n,{to:ZC.RawDirection.Down,by:ZC.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})};return i}(JC))),t.ScrollPageDown=If(new(function(n){__extends(i,n);function i(){return n.call(this,{id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})||this}i.prototype.runCoreEditorCommand=function(n,i){t.EditorScroll.runCoreEditorCommand(n,{to:ZC.RawDirection.Down,by:ZC.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})};return i}(JC))),t.ScrollEditorBottom=If(new(function(n){__extends(i,n);function i(){return n.call(this,{id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus}})||this}i.prototype.runCoreEditorCommand=function(n,i){t.EditorScroll.runCoreEditorCommand(n,{to:ZC.RawDirection.Down,by:ZC.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})};return i}(JC))),t.ScrollLeft=If(new(function(n){__extends(i,n);function i(){return n.call(this,{id:"scrollLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus}})||this}i.prototype.runCoreEditorCommand=function(n,i){t.EditorScroll.runCoreEditorCommand(n,{to:ZC.RawDirection.Left,by:ZC.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})};return i}(JC))),t.ScrollRight=If(new(function(n){__extends(i,n);function i(){return n.call(this,{id:"scrollRight",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus}})||this}i.prototype.runCoreEditorCommand=function(n,i){t.EditorScroll.runCoreEditorCommand(n,{to:ZC.RawDirection.Right,by:ZC.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})};return i}(JC)));var d=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){n.position&&(t.model.pushStackElement(),t.setCursorStates(n.source,3,[AC.word(t,t.getPrimaryCursorState(),this._inSelectionMode,n.position)]),n.revealType!==2&&t.revealAllCursors(n.source,!0,!0))};return n}(JC);t.WordSelect=If(new d({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),t.WordSelectDrag=If(new d({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),t.LastCursorWordSelect=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"lastCursorWordSelect",precondition:void 0})||this}n.prototype.runCoreEditorCommand=function(t,n){if(!n.position)return;var i=t.getLastAddedCursorIndex(),r=t.getCursorStates(),e=r.slice(0),o=r[i];e[i]=AC.word(t,o,o.modelState.hasSelection(),n.position),t.model.pushStackElement(),t.setCursorStates(n.source,3,e)};return n}(JC)));var g=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){n.position&&(t.model.pushStackElement(),t.setCursorStates(n.source,3,[AC.line(t,t.getPrimaryCursorState(),this._inSelectionMode,n.position,n.viewPosition)]),n.revealType!==2&&t.revealAllCursors(n.source,!1,!0))};return n}(JC);t.LineSelect=If(new g({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),t.LineSelectDrag=If(new g({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));var p=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode;return i}n.prototype.runCoreEditorCommand=function(t,n){if(!n.position)return;var i=t.getLastAddedCursorIndex(),r=t.getCursorStates(),e=r.slice(0);e[i]=AC.line(t,r[i],this._inSelectionMode,n.position,n.viewPosition),t.model.pushStackElement(),t.setCursorStates(n.source,3,e)};return n}(JC);t.LastCursorLineSelect=If(new p({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),t.LastCursorLineSelectDrag=If(new p({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),t.CancelSelection=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"cancelSelection",precondition:$C.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:9,secondary:[1033]}})||this}n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement(),t.setCursorStates(n.source,3,[AC.cancelSelection(t,t.getPrimaryCursorState())]),t.revealAllCursors(n.source,!0)};return n}(JC))),t.RemoveSecondaryCursors=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"removeSecondaryCursors",precondition:$C.hasMultipleSelections,kbOpts:{weight:1,kbExpr:$C.textInputFocus,primary:9,secondary:[1033]}})||this}n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement(),t.setCursorStates(n.source,3,[t.getPrimaryCursorState()]),t.revealAllCursors(n.source,!0),_w(ht(0,"Removed secondary cursors"))};return n}(JC))),t.RevealLine=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"revealLine",precondition:void 0,metadata:QC.metadata})||this}n.prototype.runCoreEditorCommand=function(t,n){var i=n,r=i.lineNumber||0;var e=typeof r=="number"?r+1:parseInt(r)+1;e<1&&(e=1);var o=t.model.getLineCount();e>o&&(e=o);var s=new Ir(e,1,e,t.model.getLineMaxColumn(e));var u=0;if(i.at)switch(i.at){case QC.RawAtArgument.Top:u=3;break;case QC.RawAtArgument.Center:u=1;break;case QC.RawAtArgument.Bottom:u=4}var a=t.coordinatesConverter.convertModelRangeToViewRange(s);t.revealRange(n.source,!1,a,u,0)};return n}(JC))),t.SelectAll=new(function(t){__extends(n,t);function n(){return t.call(this,Vf)||this}n.prototype.runDOMCommand=function(t){is&&(t.focus(),t.select()),t.ownerDocument.execCommand("selectAll")};n.prototype.runEditorCommand=function(t,n,i){var r=n._getViewModel();r&&this.runCoreEditorCommand(r,i)};n.prototype.runCoreEditorCommand=function(t,n){t.model.pushStackElement(),t.setCursorStates("keyboard",3,[AC.selectAll(t,t.getPrimaryCursorState())])};return n}(XC)),t.SetSelection=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"setSelection",precondition:void 0})||this}n.prototype.runCoreEditorCommand=function(t,n){n.selection&&(t.model.pushStackElement(),t.setCursorStates(n.source,3,[hC.fromModelSelection(n.selection)]))};return n}(JC)))})(YC||(YC={}));var tS=Dc.and($C.textInputFocus,$C.columnSelection);function nS(t,n){uf.registerKeybindingRule({id:t,primary:n,when:tS,weight:1})}function iS(t){return t.register(),t}var rS,eS;nS(YC.CursorColumnSelectLeft.id,1039),nS(YC.CursorColumnSelectRight.id,1041),nS(YC.CursorColumnSelectUp.id,1040),nS(YC.CursorColumnSelectPageUp.id,1035),nS(YC.CursorColumnSelectDown.id,1042),nS(YC.CursorColumnSelectPageDown.id,1036),function(t){var n=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.runEditorCommand=function(t,n,i){var r=n._getViewModel();r&&this.runCoreEditingCommand(n,r,i||{})};return n}(Ff);t.CoreEditingCommand=n,t.LineBreakInsert=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"lineBreakInsert",precondition:$C.writable,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:0,mac:{primary:301}}})||this}n.prototype.runCoreEditingCommand=function(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,HC.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map((function(t){return t.modelState.selection}))))};return n}(n))),t.Outdent=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"outdent",precondition:$C.writable,kbOpts:{weight:0,kbExpr:Dc.and($C.editorTextFocus,$C.tabDoesNotMoveFocus),primary:1026}})||this}n.prototype.runCoreEditingCommand=function(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,HC.outdent(n.cursorConfig,n.model,n.getCursorStates().map((function(t){return t.modelState.selection})))),t.pushUndoStop()};return n}(n))),t.Tab=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"tab",precondition:$C.writable,kbOpts:{weight:0,kbExpr:Dc.and($C.editorTextFocus,$C.tabDoesNotMoveFocus),primary:2}})||this}n.prototype.runCoreEditingCommand=function(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,HC.tab(n.cursorConfig,n.model,n.getCursorStates().map((function(t){return t.modelState.selection})))),t.pushUndoStop()};return n}(n))),t.DeleteLeft=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})||this}n.prototype.runCoreEditingCommand=function(t,n,i){var r=xC.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map((function(t){return t.modelState.selection})),n.getCursorAutoClosedCharacters()),e=r[0],o=r[1];e&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(2)};return n}(n))),t.DeleteRight=If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})||this}n.prototype.runCoreEditingCommand=function(t,n,i){var r=xC.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map((function(t){return t.modelState.selection}))),e=r[0],o=r[1];e&&t.pushUndoStop(),t.executeCommands(this.id,o),n.setPrevEditOperationType(3)};return n}(n))),t.Undo=new(function(t){__extends(n,t);function n(){return t.call(this,Uf)||this}n.prototype.runDOMCommand=function(t){t.ownerDocument.execCommand("undo")};n.prototype.runEditorCommand=function(t,n,i){if(n.hasModel()&&n.getOption(91)!==!0)return n.getModel().undo()};return n}(XC)),t.Redo=new(function(t){__extends(n,t);function n(){return t.call(this,Kf)||this}n.prototype.runDOMCommand=function(t){t.ownerDocument.execCommand("redo")};n.prototype.runEditorCommand=function(t,n,i){if(n.hasModel()&&n.getOption(91)!==!0)return n.getModel().redo()};return n}(XC))}(rS||(rS={}));var oS=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,{id:n,precondition:void 0,metadata:r})||this,e._handlerId=i;return e}n.prototype.runCommand=function(t,n){var i=t.get(Qh).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,n)};return n}(Of);function sS(t,n){iS(new oS("default:"+t,t)),iS(new oS(t,t,n))}sS("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),sS("replacePreviousChar"),sS("compositionType"),sS("compositionStart"),sS("compositionEnd"),sS("paste"),sS("cut");var uS=function(){function t(t,n,i,r){this.configuration=t,this.viewModel=n,this.userInputEvents=i,this.commandDelegate=r}t.prototype.paste=function(t,n,i,r){this.commandDelegate.paste(t,n,i,r)};t.prototype.type=function(t){this.commandDelegate.type(t)};t.prototype.compositionType=function(t,n,i,r){this.commandDelegate.compositionType(t,n,i,r)};t.prototype.compositionStart=function(){this.commandDelegate.startComposition()};t.prototype.compositionEnd=function(){this.commandDelegate.endComposition()};t.prototype.cut=function(){this.commandDelegate.cut()};t.prototype.setSelection=function(t){YC.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:t})};t.prototype._validateViewColumn=function(t){var n=this.viewModel.getLineMinColumn(t.lineNumber);return t.column<n?new Tr(t.lineNumber,n):t};t.prototype._hasMulticursorModifier=function(t){switch(this.configuration.options.get(78)){case"altKey":return t.altKey;case"ctrlKey":return t.ctrlKey;case"metaKey":return t.metaKey;default:return!1}};t.prototype._hasNonMulticursorModifier=function(t){switch(this.configuration.options.get(78)){case"altKey":return t.ctrlKey||t.metaKey;case"ctrlKey":return t.altKey||t.metaKey;case"metaKey":return t.ctrlKey||t.altKey;default:return!1}};t.prototype.dispatchMouse=function(t){var n=this.configuration.options,i=Lt&&n.get(107),r=n.get(22);t.middleButton&&!i?this._columnSelect(t.position,t.mouseColumn,t.inSelectionMode):t.startedOnLineNumbers?this._hasMulticursorModifier(t)?t.inSelectionMode?this._lastCursorLineSelect(t.position,t.revealType):this._createCursor(t.position,!0):t.inSelectionMode?this._lineSelectDrag(t.position,t.revealType):this._lineSelect(t.position,t.revealType):t.mouseDownCount>=4?this._selectAll():t.mouseDownCount===3?this._hasMulticursorModifier(t)?t.inSelectionMode?this._lastCursorLineSelectDrag(t.position,t.revealType):this._lastCursorLineSelect(t.position,t.revealType):t.inSelectionMode?this._lineSelectDrag(t.position,t.revealType):this._lineSelect(t.position,t.revealType):t.mouseDownCount===2?t.onInjectedText||(this._hasMulticursorModifier(t)?this._lastCursorWordSelect(t.position,t.revealType):t.inSelectionMode?this._wordSelectDrag(t.position,t.revealType):this._wordSelect(t.position,t.revealType)):this._hasMulticursorModifier(t)?this._hasNonMulticursorModifier(t)||(t.shiftKey?this._columnSelect(t.position,t.mouseColumn,!0):t.inSelectionMode?this._lastCursorMoveToSelect(t.position,t.revealType):this._createCursor(t.position,!1)):t.inSelectionMode?t.altKey||r?this._columnSelect(t.position,t.mouseColumn,!0):this._moveToSelect(t.position,t.revealType):this.moveTo(t.position,t.revealType)};t.prototype._usualArgs=function(t,n){return t=this._validateViewColumn(t),{source:"mouse",position:this._convertViewToModelPosition(t),viewPosition:t,revealType:n}};t.prototype.moveTo=function(t,n){YC.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._moveToSelect=function(t,n){YC.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._columnSelect=function(t,n,i){t=this._validateViewColumn(t),YC.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(t),viewPosition:t,mouseColumn:n,doColumnSelect:i})};t.prototype._createCursor=function(t,n){t=this._validateViewColumn(t),YC.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(t),viewPosition:t,wholeLine:n})};t.prototype._lastCursorMoveToSelect=function(t,n){YC.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._wordSelect=function(t,n){YC.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._wordSelectDrag=function(t,n){YC.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._lastCursorWordSelect=function(t,n){YC.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._lineSelect=function(t,n){YC.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._lineSelectDrag=function(t,n){YC.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._lastCursorLineSelect=function(t,n){YC.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._lastCursorLineSelectDrag=function(t,n){YC.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(t,n))};t.prototype._selectAll=function(){YC.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})};t.prototype._convertViewToModelPosition=function(t){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t)};t.prototype.emitKeyDown=function(t){this.userInputEvents.emitKeyDown(t)};t.prototype.emitKeyUp=function(t){this.userInputEvents.emitKeyUp(t)};t.prototype.emitContextMenu=function(t){this.userInputEvents.emitContextMenu(t)};t.prototype.emitMouseMove=function(t){this.userInputEvents.emitMouseMove(t)};t.prototype.emitMouseLeave=function(t){this.userInputEvents.emitMouseLeave(t)};t.prototype.emitMouseUp=function(t){this.userInputEvents.emitMouseUp(t)};t.prototype.emitMouseDown=function(t){this.userInputEvents.emitMouseDown(t)};t.prototype.emitMouseDrag=function(t){this.userInputEvents.emitMouseDrag(t)};t.prototype.emitMouseDrop=function(t){this.userInputEvents.emitMouseDrop(t)};t.prototype.emitMouseDropCanceled=function(){this.userInputEvents.emitMouseDropCanceled()};t.prototype.emitMouseWheel=function(t){this.userInputEvents.emitMouseWheel(t)};return t}();var aS=function(){function t(t){this._createLine=t,this._set(1,[])}t.prototype.flush=function(){this._set(1,[])};t.prototype._set=function(t,n){this._lines=n,this._rendLineNumberStart=t};t.prototype._get=function(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}};t.prototype.getStartLineNumber=function(){return this._rendLineNumberStart};t.prototype.getEndLineNumber=function(){return this._rendLineNumberStart+this._lines.length-1};t.prototype.getCount=function(){return this._lines.length};t.prototype.getLine=function(t){var n=t-this._rendLineNumberStart;if(n<0||n>=this._lines.length)throw new ri("Illegal value for lineNumber");return this._lines[n]};t.prototype.onLinesDeleted=function(t,n){if(this.getCount()===0)return null;var i=this.getStartLineNumber(),r=this.getEndLineNumber();if(n<i){var e=n-t+1;return this._rendLineNumberStart-=e,null}if(t>r)return null;var o=0,s=0;for(var e=i;e<=r;e++){var u=e-this._rendLineNumberStart;t<=e&&e<=n&&(s===0?(o=u,s=1):s++)}if(t<i){var e=0;e=n<i?n-t+1:i-t,this._rendLineNumberStart-=e}return this._lines.splice(o,s)};t.prototype.onLinesChanged=function(t,n){var i=t+n-1;if(this.getCount()===0)return!1;var r=this.getStartLineNumber(),e=this.getEndLineNumber();var o=!1;for(var s=t;s<=i;s++)s>=r&&s<=e&&(this._lines[s-this._rendLineNumberStart].onContentChanged(),o=!0);return o};t.prototype.onLinesInserted=function(t,n){if(this.getCount()===0)return null;var i=n-t+1,r=this.getStartLineNumber(),e=this.getEndLineNumber();if(t<=r)return this._rendLineNumberStart+=i,null;if(t>e)return null;if(i+t>e)return this._lines.splice(t-this._rendLineNumberStart,e-t+1);var o=[];for(var s=0;s<i;s++)o[s]=this._createLine();var u=t-this._rendLineNumberStart,a=this._lines.slice(0,u),h=this._lines.slice(u,this._lines.length-i),c=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=a.concat(o).concat(h),c};t.prototype.onTokensChanged=function(t){if(this.getCount()===0)return!1;var n=this.getStartLineNumber(),i=this.getEndLineNumber();var r=!1;for(var e=0,o=t.length;e<o;e++){var s=t[e];if(s.toLineNumber<n||s.fromLineNumber>i)continue;var u=Math.max(n,s.fromLineNumber),a=Math.min(i,s.toLineNumber);for(var h=u;h<=a;h++){var c=h-this._rendLineNumberStart;this._lines[c].onTokensChanged(),r=!0}}return r};return t}();var hS=function(){function t(t){var n=this;this._host=t,this.domNode=this._createDomNode(),this._linesCollection=new aS((function(){return n._host.createVisibleLine()}))}t.prototype._createDomNode=function(){var t=Nh(document.createElement("div"));return t.setClassName("view-layer"),t.setPosition("absolute"),t.domNode.setAttribute("role","presentation"),t.domNode.setAttribute("aria-hidden","true"),t};t.prototype.onConfigurationChanged=function(t){return!!t.hasChanged(145)};t.prototype.onFlushed=function(t){return this._linesCollection.flush(),!0};t.prototype.onLinesChanged=function(t){return this._linesCollection.onLinesChanged(t.fromLineNumber,t.count)};t.prototype.onLinesDeleted=function(t){var n=this._linesCollection.onLinesDeleted(t.fromLineNumber,t.toLineNumber);if(n)for(var i=0,r=n.length;i<r;i++){var e=n[i].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0};t.prototype.onLinesInserted=function(t){var n=this._linesCollection.onLinesInserted(t.fromLineNumber,t.toLineNumber);if(n)for(var i=0,r=n.length;i<r;i++){var e=n[i].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0};t.prototype.onScrollChanged=function(t){return t.scrollTopChanged};t.prototype.onTokensChanged=function(t){return this._linesCollection.onTokensChanged(t.ranges)};t.prototype.onZonesChanged=function(t){return!0};t.prototype.getStartLineNumber=function(){return this._linesCollection.getStartLineNumber()};t.prototype.getEndLineNumber=function(){return this._linesCollection.getEndLineNumber()};t.prototype.getVisibleLine=function(t){return this._linesCollection.getLine(t)};t.prototype.renderLines=function(t){var n=this._linesCollection._get(),i=new cS(this.domNode.domNode,this._host,t),r={rendLineNumberStart:n.rendLineNumberStart,lines:n.lines,linesLength:n.lines.length},e=i.render(r,t.startLineNumber,t.endLineNumber,t.relativeVerticalOffset);this._linesCollection._set(e.rendLineNumberStart,e.lines)};return t}();var cS=function(){function t(t,n,i){this.domNode=t,this.host=n,this.viewportData=i}t.prototype.render=function(t,n,i,r){var e={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines.slice(0),linesLength:t.linesLength};if(e.rendLineNumberStart+e.linesLength-1<n||i<e.rendLineNumberStart){e.rendLineNumberStart=n,e.linesLength=i-n+1,e.lines=[];for(var o=n;o<=i;o++)e.lines[o-n]=this.host.createVisibleLine();return this._finishRendering(e,!0,r),e}if(this._renderUntouchedLines(e,Math.max(n-e.rendLineNumberStart,0),Math.min(i-e.rendLineNumberStart,e.linesLength-1),r,n),e.rendLineNumberStart>n){var o=n,s=Math.min(i,e.rendLineNumberStart-1);o<=s&&(this._insertLinesBefore(e,o,s,r,n),e.linesLength+=s-o+1)}else if(e.rendLineNumberStart<n){var o=Math.min(e.linesLength,n-e.rendLineNumberStart);o>0&&(this._removeLinesBefore(e,o),e.linesLength-=o)}if(e.rendLineNumberStart=n,e.rendLineNumberStart+e.linesLength-1<i){var o=e.rendLineNumberStart+e.linesLength,s=i;o<=s&&(this._insertLinesAfter(e,o,s,r,n),e.linesLength+=s-o+1)}else if(e.rendLineNumberStart+e.linesLength-1>i){var o=Math.max(0,i-e.rendLineNumberStart+1),s=e.linesLength-1-o+1;s>0&&(this._removeLinesAfter(e,s),e.linesLength-=s)}return this._finishRendering(e,!1,r),e};t.prototype._renderUntouchedLines=function(t,n,i,r,e){var o=t.rendLineNumberStart,s=t.lines;for(var u=n;u<=i;u++){var a=o+u;s[u].layoutLine(a,r[a-e],this.viewportData.lineHeight)}};t.prototype._insertLinesBefore=function(t,n,i,r,e){var o=[];var s=0;for(var u=n;u<=i;u++)o[s++]=this.host.createVisibleLine();t.lines=o.concat(t.lines)};t.prototype._removeLinesBefore=function(t,n){for(var i=0;i<n;i++){var r=t.lines[i].getDomNode();r&&this.domNode.removeChild(r)}t.lines.splice(0,n)};t.prototype._insertLinesAfter=function(t,n,i,r,e){var o=[];var s=0;for(var u=n;u<=i;u++)o[s++]=this.host.createVisibleLine();t.lines=t.lines.concat(o)};t.prototype._removeLinesAfter=function(t,n){var i=t.linesLength-n;for(var r=0;r<n;r++){var e=t.lines[i+r].getDomNode();e&&this.domNode.removeChild(e)}t.lines.splice(i,n)};t.prototype._finishRenderingNewLines=function(n,i,r,e){t._ttPolicy&&(r=t._ttPolicy.createHTML(r));var o=this.domNode.lastChild;i||!o?this.domNode.innerHTML=r:o.insertAdjacentHTML("afterend",r);var s=this.domNode.lastChild;for(var u=n.linesLength-1;u>=0;u--){var a=n.lines[u];e[u]&&(a.setDomNode(s),s=s.previousSibling)}};t.prototype._finishRenderingInvalidLines=function(n,i,r){var e=document.createElement("div");t._ttPolicy&&(i=t._ttPolicy.createHTML(i)),e.innerHTML=i;for(var o=0;o<n.linesLength;o++){var s=n.lines[o];if(r[o]){var u=e.firstChild,a=s.getDomNode();a.parentNode.replaceChild(u,a),s.setDomNode(u)}}};t.prototype._finishRendering=function(n,i,r){var e=t._sb,o=n.linesLength,s=n.lines,u=n.rendLineNumberStart,a=[];{e.reset();var h=!1;for(var c=0;c<o;c++){var f=s[c];a[c]=!1,!f.getDomNode()&&f.renderLine(c+u,r[c],this.viewportData.lineHeight,this.viewportData,e)&&(a[c]=!0,h=!0)}h&&this._finishRenderingNewLines(n,i,e.build(),a)}{e.reset();var h=!1;var c=[];for(var f=0;f<o;f++){var l=s[f];c[f]=!1,!a[f]&&l.renderLine(f+u,r[f],this.viewportData.lineHeight,this.viewportData,e)&&(c[f]=!0,h=!0)}h&&this._finishRenderingInvalidLines(n,e.build(),c)}};return t}();cS._ttPolicy=rl("editorViewLayer",{createHTML:function(t){return t}}),cS._sb=new Ml(1e5);var fS=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._visibleLines=new hS(i),i.domNode=i._visibleLines.domNode;var r=i._context.configuration.options.get(50);Ph(i.domNode,r),i._dynamicOverlays=[],i._isFocused=!1,i.domNode.setClassName("view-overlays");return i}n.prototype.shouldRender=function(){if(t.prototype.shouldRender.call(this))return!0;for(var n=0,i=this._dynamicOverlays.length;n<i;n++)if(this._dynamicOverlays[n].shouldRender())return!0;return!1};n.prototype.dispose=function(){t.prototype.dispose.call(this);for(var n=0,i=this._dynamicOverlays.length;n<i;n++)this._dynamicOverlays[n].dispose();this._dynamicOverlays=[]};n.prototype.getDomNode=function(){return this.domNode};n.prototype.createVisibleLine=function(){return new lS(this._dynamicOverlays)};n.prototype.addDynamicOverlay=function(t){this._dynamicOverlays.push(t)};n.prototype.onConfigurationChanged=function(t){this._visibleLines.onConfigurationChanged(t);var n=this._context.configuration.options.get(50);return Ph(this.domNode,n),!0};n.prototype.onFlushed=function(t){return this._visibleLines.onFlushed(t)};n.prototype.onFocusChanged=function(t){return this._isFocused=t.isFocused,!0};n.prototype.onLinesChanged=function(t){return this._visibleLines.onLinesChanged(t)};n.prototype.onLinesDeleted=function(t){return this._visibleLines.onLinesDeleted(t)};n.prototype.onLinesInserted=function(t){return this._visibleLines.onLinesInserted(t)};n.prototype.onScrollChanged=function(t){return this._visibleLines.onScrollChanged(t)||!0};n.prototype.onTokensChanged=function(t){return this._visibleLines.onTokensChanged(t)};n.prototype.onZonesChanged=function(t){return this._visibleLines.onZonesChanged(t)};n.prototype.prepareRender=function(t){var n=this._dynamicOverlays.filter((function(t){return t.shouldRender()}));for(var i=0,r=n.length;i<r;i++){var e=n[i];e.prepareRender(t),e.onDidRender()}};n.prototype.render=function(t){this._viewOverlaysRender(t),this.domNode.toggleClassName("focused",this._isFocused)};n.prototype._viewOverlaysRender=function(t){this._visibleLines.renderLines(t.viewportData)};return n}(v_);var lS=function(){function t(t){this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}t.prototype.getDomNode=function(){return this._domNode?this._domNode.domNode:null};t.prototype.setDomNode=function(t){this._domNode=Nh(t)};t.prototype.onContentChanged=function(){};t.prototype.onTokensChanged=function(){};t.prototype.renderLine=function(t,n,i,r,e){var o="";for(var s=0,u=this._dynamicOverlays.length;s<u;s++)o+=this._dynamicOverlays[s].render(r.startLineNumber,t);return this._renderedContent!==o&&(this._renderedContent=o,e.appendString('<div style="top:'),e.appendString(String(n)),e.appendString("px;height:"),e.appendString(String(i)),e.appendString('px;">'),e.appendString(o),e.appendString("</div>"),!0)};t.prototype.layoutLine=function(t,n,i){this._domNode&&(this._domNode.setTop(n),this._domNode.setHeight(i))};return t}();var vS=function(t){__extends(n,t);function n(n){var i=t.call(this,n)||this;var r=i._context.configuration.options.get(145);i._contentWidth=r.contentWidth,i.domNode.setHeight(0);return i}n.prototype.onConfigurationChanged=function(n){var i=this._context.configuration.options.get(145);return this._contentWidth=i.contentWidth,t.prototype.onConfigurationChanged.call(this,n)||!0};n.prototype.onScrollChanged=function(n){return t.prototype.onScrollChanged.call(this,n)||n.scrollWidthChanged};n.prototype._viewOverlaysRender=function(n){t.prototype._viewOverlaysRender.call(this,n),this.domNode.setWidth(Math.max(n.scrollWidth,this._contentWidth))};return n}(fS);var dS=function(t){__extends(n,t);function n(n){var i=t.call(this,n)||this;var r=i._context.configuration.options,e=r.get(145);i._contentLeft=e.contentLeft,i.domNode.setClassName("margin-view-overlays"),i.domNode.setWidth(1),Ph(i.domNode,r.get(50));return i}n.prototype.onConfigurationChanged=function(n){var i=this._context.configuration.options;Ph(this.domNode,i.get(50));var r=i.get(145);return this._contentLeft=r.contentLeft,t.prototype.onConfigurationChanged.call(this,n)||!0};n.prototype.onScrollChanged=function(n){return t.prototype.onScrollChanged.call(this,n)||n.scrollHeightChanged};n.prototype._viewOverlaysRender=function(n){t.prototype._viewOverlaysRender.call(this,n);var i=Math.min(n.scrollHeight,1e6);this.domNode.setHeight(i),this.domNode.setWidth(this._contentLeft)};return n}(fS);var gS=function(){function t(t){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=t}t.prototype.emitKeyDown=function(t){var n;(n=this.onKeyDown)===null||n===void 0||n.call(this,t)};t.prototype.emitKeyUp=function(t){var n;(n=this.onKeyUp)===null||n===void 0||n.call(this,t)};t.prototype.emitContextMenu=function(t){var n;(n=this.onContextMenu)===null||n===void 0||n.call(this,this._convertViewToModelMouseEvent(t))};t.prototype.emitMouseMove=function(t){var n;(n=this.onMouseMove)===null||n===void 0||n.call(this,this._convertViewToModelMouseEvent(t))};t.prototype.emitMouseLeave=function(t){var n;(n=this.onMouseLeave)===null||n===void 0||n.call(this,this._convertViewToModelMouseEvent(t))};t.prototype.emitMouseDown=function(t){var n;(n=this.onMouseDown)===null||n===void 0||n.call(this,this._convertViewToModelMouseEvent(t))};t.prototype.emitMouseUp=function(t){var n;(n=this.onMouseUp)===null||n===void 0||n.call(this,this._convertViewToModelMouseEvent(t))};t.prototype.emitMouseDrag=function(t){var n;(n=this.onMouseDrag)===null||n===void 0||n.call(this,this._convertViewToModelMouseEvent(t))};t.prototype.emitMouseDrop=function(t){var n;(n=this.onMouseDrop)===null||n===void 0||n.call(this,this._convertViewToModelMouseEvent(t))};t.prototype.emitMouseDropCanceled=function(){var t;(t=this.onMouseDropCanceled)===null||t===void 0||t.call(this)};t.prototype.emitMouseWheel=function(t){var n;(n=this.onMouseWheel)===null||n===void 0||n.call(this,t)};t.prototype._convertViewToModelMouseEvent=function(t){return t.target?{event:t.event,target:this._convertViewToModelMouseTarget(t.target)}:t};t.prototype._convertViewToModelMouseTarget=function(n){return t.convertViewToModelMouseTarget(n,this._coordinatesConverter)};t.convertViewToModelMouseTarget=function(t,n){var i=__assign({},t);return i.position&&(i.position=n.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=n.convertViewRangeToModelRange(i.range)),i.type!==5&&i.type!==8||(i.detail=this.convertViewToModelViewZoneData(i.detail,n)),i};t.convertViewToModelViewZoneData=function(t,n){return{viewZoneId:t.viewZoneId,positionBefore:t.positionBefore?n.convertViewPositionToModelPosition(t.positionBefore):t.positionBefore,positionAfter:t.positionAfter?n.convertViewPositionToModelPosition(t.positionAfter):t.positionAfter,position:n.convertViewPositionToModelPosition(t.position),afterLineNumber:n.convertViewPositionToModelPosition(new Tr(t.afterLineNumber,1)).lineNumber}};return t}();var pS=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i.blocks=[],i.contentWidth=-1,i.contentLeft=0,i.domNode=Nh(document.createElement("div")),i.domNode.setAttribute("role","presentation"),i.domNode.setAttribute("aria-hidden","true"),i.domNode.setClassName("blockDecorations-container"),i.update();return i}n.prototype.update=function(){var t=!1;var n=this._context.configuration.options.get(145),i=n.contentWidth-n.verticalScrollbarWidth;this.contentWidth!==i&&(this.contentWidth=i,t=!0);var r=n.contentLeft;return this.contentLeft!==r&&(this.contentLeft=r,t=!0),t};n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){return this.update()};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged||t.scrollLeftChanged};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onZonesChanged=function(t){return!0};n.prototype.prepareRender=function(t){};n.prototype.render=function(t){var n;var i=0;var r=t.getDecorationsInViewport();for(var e=0,o=r;e<o.length;e++){var s=o[e];if(!s.options.blockClassName)continue;var u=void 0,a=void 0,h=this.blocks[i];h||(h=this.blocks[i]=Nh(document.createElement("div")),this.domNode.appendChild(h)),s.options.blockIsAfterEnd?(u=t.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),a=t.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(u=t.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),a=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?t.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):t.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));var c=(n=s.options.blockPadding)!==null&&n!==void 0?n:[0,0,0,0],f=c[0],l=c[1],v=c[2],d=c[3];h.setClassName("blockDecorations-block "+s.options.blockClassName),h.setLeft(this.contentLeft-d),h.setWidth(this.contentWidth+d+l),h.setTop(u-t.scrollTop-f),h.setHeight(a-u+f+v),i++}for(var s=i;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=i};return n}(v_);var wS=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n)||this,r._viewDomNode=i,r._widgets={},r.domNode=Nh(document.createElement("div")),d_.write(r.domNode,1),r.domNode.setClassName("contentWidgets"),r.domNode.setPosition("absolute"),r.domNode.setTop(0),r.overflowingContentWidgetsDomNode=Nh(document.createElement("div")),d_.write(r.overflowingContentWidgetsDomNode,2),r.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets");return r}n.prototype.dispose=function(){t.prototype.dispose.call(this),this._widgets={}};n.prototype.onConfigurationChanged=function(t){var n=Object.keys(this._widgets);for(var i=0,r=n;i<r.length;i++){var e=r[i];this._widgets[e].onConfigurationChanged(t)}return!0};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onLineMappingChanged=function(t){return this._updateAnchorsViewPositions(),!0};n.prototype.onLinesChanged=function(t){return this._updateAnchorsViewPositions(),!0};n.prototype.onLinesDeleted=function(t){return this._updateAnchorsViewPositions(),!0};n.prototype.onLinesInserted=function(t){return this._updateAnchorsViewPositions(),!0};n.prototype.onScrollChanged=function(t){return!0};n.prototype.onZonesChanged=function(t){return!0};n.prototype._updateAnchorsViewPositions=function(){var t=Object.keys(this._widgets);for(var n=0,i=t;n<i.length;n++){var r=i[n];this._widgets[r].updateAnchorViewPosition()}};n.prototype.addWidget=function(t){var n=new mS(this._context,this._viewDomNode,t);this._widgets[n.id]=n,n.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(n.domNode):this.domNode.appendChild(n.domNode),this.setShouldRender()};n.prototype.setWidgetPosition=function(t,n,i,r,e){this._widgets[t.getId()].setPosition(n,i,r,e),this.setShouldRender()};n.prototype.removeWidget=function(t){var n=t.getId();if(this._widgets.hasOwnProperty(n)){var i=this._widgets[n];delete this._widgets[n];var r=i.domNode.domNode;r.parentNode.removeChild(r),r.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}};n.prototype.shouldSuppressMouseDownOnWidget=function(t){return!!this._widgets.hasOwnProperty(t)&&this._widgets[t].suppressMouseDown};n.prototype.onBeforeRender=function(t){var n=Object.keys(this._widgets);for(var i=0,r=n;i<r.length;i++){var e=r[i];this._widgets[e].onBeforeRender(t)}};n.prototype.prepareRender=function(t){var n=Object.keys(this._widgets);for(var i=0,r=n;i<r.length;i++){var e=r[i];this._widgets[e].prepareRender(t)}};n.prototype.render=function(t){var n=Object.keys(this._widgets);for(var i=0,r=n;i<r.length;i++){var e=r[i];this._widgets[e].render(t)}};return n}(v_);var mS=function(){function t(t,n,i){this._primaryAnchor=new bS(null,null),this._secondaryAnchor=new bS(null,null),this._context=t,this._viewDomNode=n,this._actual=i,this.domNode=Nh(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;var r=this._context.configuration.options,e=r.get(145);this._fixedOverflowWidgets=r.get(42),this._contentWidth=e.contentWidth,this._contentLeft=e.contentLeft,this._lineHeight=r.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}t.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options;if(this._lineHeight=n.get(67),t.hasChanged(145)){var i=n.get(145);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}};t.prototype.updateAnchorViewPosition=function(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)};t.prototype._setPosition=function(t,n,i){function r(t,n,i){if(!t)return new bS(null,null);var r=n.model.validatePosition(t);if(n.coordinatesConverter.modelPositionIsVisible(r)){var e=n.coordinatesConverter.convertModelPositionToViewPosition(r,i!==null&&i!==void 0?i:void 0);return new bS(t,e)}return new bS(t,null)}this._affinity=t,this._primaryAnchor=r(n,this._context.viewModel,this._affinity),this._secondaryAnchor=r(i,this._context.viewModel,this._affinity)};t.prototype._getMaxWidth=function(){var t=this.domNode.domNode.ownerDocument,n=t.defaultView;return this.allowEditorOverflow?(n==null?void 0:n.innerWidth)||t.documentElement.offsetWidth||t.body.offsetWidth:this._contentWidth};t.prototype.setPosition=function(t,n,i,r){this._setPosition(r,t,n),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1};t.prototype._layoutBoxInViewport=function(t,n,i,r){var e=t.top,o=e,s=t.top+t.height,u=e-i,a=o>=i,h=s,c=r.viewportHeight-s>=i;var f=t.left;return f+n>r.scrollLeft+r.viewportWidth&&(f=r.scrollLeft+r.viewportWidth-n),f<r.scrollLeft&&(f=r.scrollLeft),{fitsAbove:a,aboveTop:u,fitsBelow:c,belowTop:h,left:f}};t.prototype._layoutHorizontalSegmentInPage=function(t,n,i,r){var e;var o=Math.max(15,n.left-r),s=Math.min(n.left+n.width+r,t.width-15),u=this._viewDomNode.domNode.ownerDocument.defaultView;var a=n.left+i-((e=u==null?void 0:u.scrollX)!==null&&e!==void 0?e:0);if(a+r>s){var h=a-(s-r);a-=h,i-=h}if(a<o){var h=a-o;a-=h,i-=h}return[i,a]};t.prototype._layoutBoxInPage=function(t,n,i,r){var e,o;var s=t.top-i,u=t.top+t.height,a=ja(this._viewDomNode.domNode),h=this._viewDomNode.domNode.ownerDocument,c=h.defaultView,f=a.top+s-((e=c==null?void 0:c.scrollY)!==null&&e!==void 0?e:0),l=a.top+u-((o=c==null?void 0:c.scrollY)!==null&&o!==void 0?o:0),v=Ea(h.body),d=this._layoutHorizontalSegmentInPage(v,a,t.left-r.scrollLeft+this._contentLeft,n),g=d[0],p=d[1],w=f>=22,m=l+i<=v.height-22;return this._fixedOverflowWidgets?{fitsAbove:w,aboveTop:Math.max(f,22),fitsBelow:m,belowTop:l,left:p}:{fitsAbove:w,aboveTop:s,fitsBelow:m,belowTop:u,left:g}};t.prototype._prepareRenderWidgetAtExactPositionOverflowing=function(t){return new yS(t.top,t.left+this._contentLeft)};t.prototype._getAnchorsCoordinates=function(t){var n,i;return{primary:r(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),secondary:r(((n=this._secondaryAnchor.viewPosition)===null||n===void 0?void 0:n.lineNumber)===((i=this._primaryAnchor.viewPosition)===null||i===void 0?void 0:i.lineNumber)?this._secondaryAnchor.viewPosition:null,this._affinity,this._lineHeight)};function r(n,i,r){if(!n)return null;var e=t.visibleRangeForPosition(n);if(!e)return null;var o=n.column===1&&i===3?0:e.left,s=t.getVerticalOffsetForLineNumber(n.lineNumber)-t.scrollTop;return new _S(s,o,r)}};t.prototype._reduceAnchorCoordinates=function(t,n,i){if(!n)return t;var r=this._context.configuration.options.get(50);var e=n.left;return e=e<t.left?Math.max(e,t.left-i+r.typicalFullwidthCharacterWidth):Math.min(e,t.left+i-r.typicalFullwidthCharacterWidth),new _S(t.top,e,t.height)};t.prototype._prepareRenderWidget=function(t){if(!this._preference||this._preference.length===0)return null;var n=this._getAnchorsCoordinates(t),i=n.primary,r=n.secondary;if(!i)return null;if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){var e=null;if(typeof this._actual.beforeRender=="function"&&(e=kS(this._actual.beforeRender,this._actual)),e)this._cachedDomNodeOffsetWidth=e.width,this._cachedDomNodeOffsetHeight=e.height;else{var o=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(o.width),this._cachedDomNodeOffsetHeight=Math.round(o.height)}}var s=this._reduceAnchorCoordinates(i,r,this._cachedDomNodeOffsetWidth);var u;u=this.allowEditorOverflow?this._layoutBoxInPage(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,t):this._layoutBoxInViewport(s,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,t);for(var e=1;e<=2;e++)for(var a=0,h=this._preference;a<h.length;a++){var o=h[a];if(o===1){if(!u)return null;if(e===2||u.fitsAbove)return{coordinate:new yS(u.aboveTop,u.left),position:1}}else{if(o!==2)return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new yS(s.top,s.left)),position:0}:{coordinate:new yS(s.top,s.left),position:0};if(!u)return null;if(e===2||u.fitsBelow)return{coordinate:new yS(u.belowTop,u.left),position:2}}}return null};t.prototype.onBeforeRender=function(t){this._primaryAnchor.viewPosition&&this._preference&&(this._primaryAnchor.viewPosition.lineNumber<t.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>t.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))};t.prototype.prepareRender=function(t){this._renderData=this._prepareRenderWidget(t)};t.prototype.render=function(t){if(!this._renderData)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),void(typeof this._actual.afterRender=="function"&&kS(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+t.scrollTop-t.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&kS(this._actual.afterRender,this._actual,this._renderData.position)};return t}();var bS=function(){function t(t,n){this.modelPosition=t,this.viewPosition=n}return t}();var yS=function(){function t(t,n){this.top=t,this.left=n,this._coordinateBrand=void 0}return t}();var _S=function(){function t(t,n,i){this.top=t,this.left=n,this.height=i,this._anchorCoordinateBrand=void 0}return t}();function kS(t,n){var i=[];for(var r=2;r<arguments.length;r++){i[r-2]=arguments[r]}try{return t.call.apply(t,__spreadArray([n],i,false))}catch(t){return null}}var xS=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._context=n;var r=i._context.configuration.options,e=r.get(145);i._renderLineHighlight=r.get(96),i._renderLineHighlightOnlyWhenFocus=r.get(97),i._wordWrap=e.isViewportWrapping,i._contentLeft=e.contentLeft,i._contentWidth=e.contentWidth,i._selectionIsEmpty=!0,i._focused=!1,i._cursorLineNumbers=[1],i._selections=[new Br(1,1,1,1)],i._renderData=null,i._context.addEventHandler(i);return i}n.prototype.dispose=function(){this._context.removeEventHandler(this),t.prototype.dispose.call(this)};n.prototype._readFromSelections=function(){var t=!1;var n=new Set;for(var i=0,r=this._selections;i<r.length;i++){var e=r[i];n.add(e.positionLineNumber)}var o=Array.from(n);o.sort((function(t,n){return t-n})),v(this._cursorLineNumbers,o)||(this._cursorLineNumbers=o,t=!0);var s=this._selections.every((function(t){return t.isEmpty()}));return this._selectionIsEmpty!==s&&(this._selectionIsEmpty=s,t=!0),t};n.prototype.onThemeChanged=function(t){return this._readFromSelections()};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options,i=n.get(145);return this._renderLineHighlight=n.get(96),this._renderLineHighlightOnlyWhenFocus=n.get(97),this._wordWrap=i.isViewportWrapping,this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,!0};n.prototype.onCursorStateChanged=function(t){return this._selections=t.selections,this._readFromSelections()};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollWidthChanged||t.scrollTopChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype.onFocusChanged=function(t){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=t.isFocused,!0)};n.prototype.prepareRender=function(t){if(!this._shouldRenderThis())return void(this._renderData=null);var n=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber,r=[];for(var e=n;e<=i;e++)r[e-n]="";if(this._wordWrap){var e=this._renderOne(t,!1);for(var o=0,s=this._cursorLineNumbers;o<s.length;o++){var u=s[o];var a=this._context.viewModel.coordinatesConverter,h=a.convertViewPositionToModelPosition(new Tr(u,1)).lineNumber,c=a.convertModelPositionToViewPosition(new Tr(h,1)).lineNumber,f=a.convertModelPositionToViewPosition(new Tr(h,this._context.viewModel.model.getLineMaxColumn(h))).lineNumber,l=Math.max(c,n),v=Math.min(f,i);for(var d=l;d<=v;d++)r[d-n]=e}}var g=this._renderOne(t,!0);for(var p=0,w=this._cursorLineNumbers;p<w.length;p++){var e=w[p];e<n||e>i||(r[e-n]=g)}this._renderData=r};n.prototype.render=function(t,n){if(!this._renderData)return"";var i=n-t;return i>=this._renderData.length?"":this._renderData[i]};n.prototype._shouldRenderInMargin=function(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)};n.prototype._shouldRenderInContent=function(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)};return n}(Hk);var CS=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._renderOne=function(t,n){return'<div class="'.concat("current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(n?" current-line-exact":""),'" style="width:').concat(Math.max(t.scrollWidth,this._contentWidth),'px;"></div>')};n.prototype._shouldRenderThis=function(){return this._shouldRenderInContent()};n.prototype._shouldRenderOther=function(){return this._shouldRenderInMargin()};return n}(xS);var SS=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._renderOne=function(t,n){return'<div class="'.concat("current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&n?" current-line-exact-margin":""),'" style="width:').concat(this._contentLeft,'px"></div>')};n.prototype._shouldRenderThis=function(){return!0};n.prototype._shouldRenderOther=function(){return this._shouldRenderInContent()};return n}(xS);Gk((function(t,n){var i=t.getColor(Jk);if(i&&(n.addRule(".monaco-editor .view-overlays .current-line { background-color: ".concat(i,"; }")),n.addRule(".monaco-editor .margin-view-overlays .current-line-margin { background-color: ".concat(i,"; border: none; }"))),!i||i.isTransparent()||t.defines(Zk)){var r=t.getColor(Zk);r&&(n.addRule(".monaco-editor .view-overlays .current-line-exact { border: 2px solid ".concat(r,"; }")),n.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ".concat(r,"; }")),C_(t.type)&&(n.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),n.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}}));var DS=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._context=n;var r=i._context.configuration.options;i._typicalHalfwidthCharacterWidth=r.get(50).typicalHalfwidthCharacterWidth,i._renderResult=null,i._context.addEventHandler(i);return i}n.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=n.get(50).typicalHalfwidthCharacterWidth,!0};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged||t.scrollWidthChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype.prepareRender=function(t){var n=t.getDecorationsInViewport();var i=[],r=0;for(var e=0,o=n.length;e<o;e++){var s=n[e];s.options.className&&(i[r++]=s)}i=i.sort((function(t,n){if(t.options.zIndex<n.options.zIndex)return-1;if(t.options.zIndex>n.options.zIndex)return 1;var i=t.options.className,r=n.options.className;return i<r?-1:i>r?1:Ir.compareRangesUsingStarts(t.range,n.range)}));var u=t.visibleRange.startLineNumber,a=t.visibleRange.endLineNumber,h=[];for(var e=u;e<=a;e++)h[e-u]="";this._renderWholeLineDecorations(t,i,h),this._renderNormalDecorations(t,i,h),this._renderResult=h};n.prototype._renderWholeLineDecorations=function(t,n,i){var r=t.visibleRange.startLineNumber,e=t.visibleRange.endLineNumber;for(var o=0,s=n.length;o<s;o++){var u=n[o];if(!u.options.isWholeLine)continue;var a='<div class="cdr '+u.options.className+'" style="left:0;width:100%;"></div>',h=Math.max(u.range.startLineNumber,r),c=Math.min(u.range.endLineNumber,e);for(var f=h;f<=c;f++)i[f-r]+=a}};n.prototype._renderNormalDecorations=function(t,n,i){var r;var e=t.visibleRange.startLineNumber;var o=null,s=!1,u=null,a=!1;for(var h=0,c=n.length;h<c;h++){var f=n[h];if(f.options.isWholeLine)continue;var l=f.options.className,v=!!f.options.showIfCollapsed;var d=f.range;v&&d.endColumn===1&&d.endLineNumber!==d.startLineNumber&&(d=new Ir(d.startLineNumber,d.startColumn,d.endLineNumber-1,this._context.viewModel.getLineMaxColumn(d.endLineNumber-1))),o===l&&s===v&&Ir.areIntersectingOrTouching(u,d)?u=Ir.plusRange(u,d):(o!==null&&this._renderNormalDecoration(t,u,o,a,s,e,i),o=l,s=v,u=d,a=(r=f.options.shouldFillLineOnLineBreak)!==null&&r!==void 0&&r)}o!==null&&this._renderNormalDecoration(t,u,o,a,s,e,i)};n.prototype._renderNormalDecoration=function(t,n,i,r,e,o,s){var u=t.linesVisibleRangesForRange(n,i==="findMatch");if(u)for(var a=0,h=u.length;a<h;a++){var c=u[a];if(c.outsideRenderedLine)continue;var f=c.lineNumber-o;if(e&&c.ranges.length===1){var l=c.ranges[0];if(l.width<this._typicalHalfwidthCharacterWidth){var v=Math.round(l.left+l.width/2),d=Math.max(0,Math.round(v-this._typicalHalfwidthCharacterWidth/2));c.ranges[0]=new m_(d,this._typicalHalfwidthCharacterWidth)}}for(var l=0,v=c.ranges.length;l<v;l++){var d=r&&c.continuesOnNextLine&&v===1,g=c.ranges[l],p='<div class="cdr '+i+'" style="left:'+String(g.left)+"px;width:"+(d?"100%;":String(g.width)+"px;")+'"></div>';s[f]+=p}}};n.prototype.render=function(t,n){if(!this._renderResult)return"";var i=n-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]};return n}(Hk);var AS=function(t){__extends(n,t);function n(n,i,r,e){var o=t.call(this,n)||this;var s=o._context.configuration.options,u=s.get(103),a=s.get(75),h=s.get(40),c=s.get(106),f={listenOnDomNode:r.domNode,className:"editor-scrollable "+Kk(n.theme.type),useShadows:!1,lazyRender:!0,vertical:u.vertical,horizontal:u.horizontal,verticalHasArrows:u.verticalHasArrows,horizontalHasArrows:u.horizontalHasArrows,verticalScrollbarSize:u.verticalScrollbarSize,verticalSliderSize:u.verticalSliderSize,horizontalScrollbarSize:u.horizontalScrollbarSize,horizontalSliderSize:u.horizontalSliderSize,handleMouseWheel:u.handleMouseWheel,alwaysConsumeMouseWheel:u.alwaysConsumeMouseWheel,arrowSize:u.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:h,scrollPredominantAxis:c,scrollByPage:u.scrollByPage};o.scrollbar=o._register(new bk(i.domNode,f,o._context.viewLayout.getScrollable())),d_.write(o.scrollbar.getDomNode(),6),o.scrollbarDomNode=Nh(o.scrollbar.getDomNode()),o.scrollbarDomNode.setPosition("absolute"),o._setLayout();var l=function(t,n,i){var r={};{var e=t.scrollTop;e&&(r.scrollTop=o._context.viewLayout.getCurrentScrollTop()+e,t.scrollTop=0)}if(i){var e=t.scrollLeft;e&&(r.scrollLeft=o._context.viewLayout.getCurrentScrollLeft()+e,t.scrollLeft=0)}o._context.viewModel.viewLayout.setScrollPosition(r,1)};o._register(ma(r.domNode,"scroll",(function(t){return l(r.domNode,0,!0)}))),o._register(ma(i.domNode,"scroll",(function(t){return l(i.domNode,0,!1)}))),o._register(ma(e.domNode,"scroll",(function(t){return l(e.domNode,0,!1)}))),o._register(ma(o.scrollbarDomNode.domNode,"scroll",(function(t){return l(o.scrollbarDomNode.domNode,0,!1)})));return o}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype._setLayout=function(){var t=this._context.configuration.options,n=t.get(145);this.scrollbarDomNode.setLeft(n.contentLeft),t.get(73).side==="right"?this.scrollbarDomNode.setWidth(n.contentWidth+n.minimap.minimapWidth):this.scrollbarDomNode.setWidth(n.contentWidth),this.scrollbarDomNode.setHeight(n.height)};n.prototype.getOverviewRulerLayoutInfo=function(){return this.scrollbar.getOverviewRulerLayoutInfo()};n.prototype.getDomNode=function(){return this.scrollbarDomNode};n.prototype.delegateVerticalScrollbarPointerDown=function(t){this.scrollbar.delegateVerticalScrollbarPointerDown(t)};n.prototype.delegateScrollFromMouseWheelEvent=function(t){this.scrollbar.delegateScrollFromMouseWheelEvent(t)};n.prototype.onConfigurationChanged=function(t){if(t.hasChanged(103)||t.hasChanged(75)||t.hasChanged(40)){var n=this._context.configuration.options,i=n.get(103),r=n.get(75),e=n.get(40),o=n.get(106),s={vertical:i.vertical,horizontal:i.horizontal,verticalScrollbarSize:i.verticalScrollbarSize,horizontalScrollbarSize:i.horizontalScrollbarSize,scrollByPage:i.scrollByPage,handleMouseWheel:i.handleMouseWheel,mouseWheelScrollSensitivity:r,fastScrollSensitivity:e,scrollPredominantAxis:o};this.scrollbar.updateOptions(s)}return t.hasChanged(145)&&this._setLayout(),!0};n.prototype.onScrollChanged=function(t){return!0};n.prototype.onThemeChanged=function(t){return this.scrollbar.updateClassName("editor-scrollable "+Kk(this._context.theme.type)),!0};n.prototype.prepareRender=function(t){};n.prototype.render=function(t){this.scrollbar.renderNow()};return n}(v_);var OS=function(){function t(t,n,i,r,e){this.startLineNumber=t,this.endLineNumber=n,this.className=i,this.tooltip=r,this._decorationToRenderBrand=void 0,this.zIndex=e!==null&&e!==void 0?e:0}return t}();var ES=function(){function t(t,n,i){this.className=t,this.zIndex=n,this.tooltip=i}return t}();var MS=function(){function t(){this.decorations=[]}t.prototype.add=function(t){this.decorations.push(t)};t.prototype.getDecorations=function(){return this.decorations};return t}();var FS=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._render=function(t,n,i){var r=[];for(var e=t;e<=n;e++)r[e-t]=new MS;if(i.length===0)return r;i.sort((function(t,n){return t.className===n.className?t.startLineNumber===n.startLineNumber?t.endLineNumber-n.endLineNumber:t.startLineNumber-n.startLineNumber:t.className<n.className?-1:1}));var o=null,s=0;for(var e=0,u=i.length;e<u;e++){var a=i[e],h=a.className,c=a.zIndex;var f=Math.max(a.startLineNumber,t)-t;var l=Math.min(a.endLineNumber,n)-t;o===h?(f=Math.max(s+1,f),s=Math.max(s,l)):(o=h,s=l);for(var v=f;v<=s;v++)r[v].add(new ES(h,c,a.tooltip))}return r};return n}(Hk);var LS=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._widgets={},i._context=n;var r=i._context.configuration.options,e=r.get(145);i.domNode=Nh(document.createElement("div")),i.domNode.setClassName("glyph-margin-widgets"),i.domNode.setPosition("absolute"),i.domNode.setTop(0),i._lineHeight=r.get(67),i._glyphMargin=r.get(57),i._glyphMarginLeft=e.glyphMarginLeft,i._glyphMarginWidth=e.glyphMarginWidth,i._glyphMarginDecorationLaneCount=e.glyphMarginDecorationLaneCount,i._managedDomNodes=[],i._decorationGlyphsToRender=[];return i}n.prototype.dispose=function(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},t.prototype.dispose.call(this)};n.prototype.getWidgets=function(){return Object.values(this._widgets)};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options,i=n.get(145);return this._lineHeight=n.get(67),this._glyphMargin=n.get(57),this._glyphMarginLeft=i.glyphMarginLeft,this._glyphMarginWidth=i.glyphMarginWidth,this._glyphMarginDecorationLaneCount=i.glyphMarginDecorationLaneCount,!0};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype.addWidget=function(t){var n=Nh(t.getDomNode());this._widgets[t.getId()]={widget:t,preference:t.getPosition(),domNode:n,renderInfo:null},n.setPosition("absolute"),n.setDisplay("none"),n.setAttribute("widgetId",t.getId()),this.domNode.appendChild(n),this.setShouldRender()};n.prototype.setWidgetPosition=function(t,n){var i=this._widgets[t.getId()];return(i.preference.lane!==n.lane||i.preference.zIndex!==n.zIndex||!Ir.equalsRange(i.preference.range,n.range))&&(i.preference=n,this.setShouldRender(),!0)};n.prototype.removeWidget=function(t){var n;var i=t.getId();if(this._widgets[i]){var r=this._widgets[i].domNode.domNode;delete this._widgets[i],(n=r.parentNode)===null||n===void 0||n.removeChild(r),this.setShouldRender()}};n.prototype._collectDecorationBasedGlyphRenderRequest=function(t,n){var i,r,e;var o=t.visibleRange.startLineNumber,s=t.visibleRange.endLineNumber,u=t.getDecorationsInViewport();for(var a=0,h=u;a<h.length;a++){var c=h[a];var f=c.options.glyphMarginClassName;if(!f)continue;var l=Math.max(c.range.startLineNumber,o),v=Math.min(c.range.endLineNumber,s),d=(r=(i=c.options.glyphMargin)===null||i===void 0?void 0:i.position)!==null&&r!==void 0?r:dd.Center,g=(e=c.options.zIndex)!==null&&e!==void 0?e:0;for(var p=l;p<=v;p++){var w=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Tr(p,0)),m=this._context.viewModel.glyphLanes.getLanesAtLine(w.lineNumber).indexOf(d);n.push(new jS(p,m,g,f))}}};n.prototype._collectWidgetBasedGlyphRenderRequest=function(t,n){var i=t.visibleRange.startLineNumber,r=t.visibleRange.endLineNumber;for(var e=0,o=Object.values(this._widgets);e<o.length;e++){var s=o[e];var u=s.preference.range,a=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(Ir.lift(u)),h=a.startLineNumber,c=a.endLineNumber;if(!h||!c||c<i||h>r)continue;var f=Math.max(h,i),l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Tr(f,0)),v=this._context.viewModel.glyphLanes.getLanesAtLine(l.lineNumber).indexOf(s.preference.lane);n.push(new RS(f,v,s.preference.zIndex,s))}};n.prototype._collectSortedGlyphRenderRequests=function(t){var n=[];return this._collectDecorationBasedGlyphRenderRequest(t,n),this._collectWidgetBasedGlyphRenderRequest(t,n),n.sort((function(t,n){return t.lineNumber===n.lineNumber?t.laneIndex===n.laneIndex?t.zIndex===n.zIndex?n.type===t.type?t.type===0&&n.type===0?t.className<n.className?-1:1:0:n.type-t.type:n.zIndex-t.zIndex:t.laneIndex-n.laneIndex:t.lineNumber-n.lineNumber})),n};n.prototype.prepareRender=function(t){if(!this._glyphMargin)return void(this._decorationGlyphsToRender=[]);for(var n=0,i=Object.values(this._widgets);n<i.length;n++){var r=i[n];r.renderInfo=null}var e=new N(this._collectSortedGlyphRenderRequests(t)),o=[];var s=function(){var t=e.peek();if(!t)return"break";var n=e.takeWhile((function(n){return n.lineNumber===t.lineNumber&&n.laneIndex===t.laneIndex}));if(!n||n.length===0)return"break";var i=n[0];if(i.type===0){var r=[];for(var s=0,u=n;s<u.length;s++){var a=u[s];if(a.zIndex!==i.zIndex||a.type!==i.type)break;r.length!==0&&r[r.length-1]===a.className||r.push(a.className)}o.push(i.accept(r.join(" ")))}else i.widget.renderInfo={lineNumber:i.lineNumber,laneIndex:i.laneIndex}};for(;e.length>0;){var u=s();if(u==="break")break}this._decorationGlyphsToRender=o};n.prototype.render=function(t){if(!this._glyphMargin){for(var n=0,i=Object.values(this._widgets);n<i.length;n++){var r=i[n];r.domNode.setDisplay("none")}for(;this._managedDomNodes.length>0;){var r=this._managedDomNodes.pop();r==null||r.domNode.remove()}return}var e=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(var o=0,s=Object.values(this._widgets);o<s.length;o++){var r=s[o];if(r.renderInfo){var u=t.viewportData.relativeVerticalOffset[r.renderInfo.lineNumber-t.viewportData.startLineNumber],a=this._glyphMarginLeft+r.renderInfo.laneIndex*this._lineHeight;r.domNode.setDisplay("block"),r.domNode.setTop(u),r.domNode.setLeft(a),r.domNode.setWidth(e),r.domNode.setHeight(this._lineHeight)}else r.domNode.setDisplay("none")}for(var r=0;r<this._decorationGlyphsToRender.length;r++){var u=this._decorationGlyphsToRender[r],a=t.viewportData.relativeVerticalOffset[u.lineNumber-t.viewportData.startLineNumber],h=this._glyphMarginLeft+u.laneIndex*this._lineHeight;var c=void 0;r<this._managedDomNodes.length?c=this._managedDomNodes[r]:(c=Nh(document.createElement("div")),this._managedDomNodes.push(c),this.domNode.appendChild(c)),c.setClassName("cgmr codicon "+u.combinedClassName),c.setPosition("absolute"),c.setTop(a),c.setLeft(h),c.setWidth(e),c.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){var r=this._managedDomNodes.pop();r==null||r.domNode.remove()}};return n}(v_);var jS=function(){function t(t,n,i,r){this.lineNumber=t,this.laneIndex=n,this.zIndex=i,this.className=r,this.type=0}t.prototype.accept=function(t){return new TS(this.lineNumber,this.laneIndex,t)};return t}();var RS=function(){function t(t,n,i,r){this.lineNumber=t,this.laneIndex=n,this.zIndex=i,this.widget=r,this.type=1}return t}();var TS=function(){function t(t,n,i){this.lineNumber=t,this.laneIndex=n,this.combinedClassName=i}return t}();var IS=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._isDisposed=!1;return n}n.prototype.dispose=function(){t.prototype.dispose.call(this),this._isDisposed=!0};n.prototype.assertNotDisposed=function(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")};return n}(ci);function BS(t,n){var i=0,r=0;var e=t.length;for(;r<e;){var o=t.charCodeAt(r);if(o===32)i++;else{if(o!==9)break;i=i-i%n+n}r++}return r===e?-1:i}(function(t){t[t.Disabled=0]="Disabled",t[t.EnabledForActive=1]="EnabledForActive",t[t.Enabled=2]="Enabled"})(eS||(eS={}));var NS=function(){function t(t,n,i,r,e,o){if(this.visibleColumn=t,this.column=n,this.className=i,this.horizontalLine=r,this.forWrappedLinesAfterColumn=e,this.forWrappedLinesBeforeOrAtColumn=o,t!==-1==(n!==-1))throw new Error}return t}();var PS=function(){function t(t,n){this.top=t,this.endColumn=n}return t}();var WS=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.textModel=n,r.languageConfigurationService=i;return r}n.prototype.getLanguageConfiguration=function(t){return this.languageConfigurationService.getLanguageConfiguration(t)};n.prototype._computeIndentLevel=function(t){return BS(this.textModel.getLineContent(t+1),this.textModel.getOptions().tabSize)};n.prototype.getActiveIndentGuide=function(t,n,i){var r=this;this.assertNotDisposed();var e=this.textModel.getLineCount();if(t<1||t>e)throw new ri("Illegal value for lineNumber");var o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,s=!!(o&&o.offSide);var u=-2,a=-1,h=-2,c=-1;var f=function(t){if(u!==-1&&(u===-2||u>t-1)){u=-1,a=-1;for(var n=t-2;n>=0;n--){var i=r._computeIndentLevel(n);if(i>=0){u=n,a=i;break}}}if(h===-2){h=-1,c=-1;for(var n=t;n<e;n++){var i=r._computeIndentLevel(n);if(i>=0){h=n,c=i;break}}}};var l=-2,v=-1,d=-2,g=-1;var p=function(t){if(l===-2){l=-1,v=-1;for(var n=t-2;n>=0;n--){var i=r._computeIndentLevel(n);if(i>=0){l=n,v=i;break}}}if(d!==-1&&(d===-2||d<t-1)){d=-1,g=-1;for(var n=t;n<e;n++){var i=r._computeIndentLevel(n);if(i>=0){d=n,g=i;break}}}};var w=0,m=!0,b=0,y=!0,_=0,k=0;for(var x=0;m||y;x++){var C=t-x,S=t+x;x>1&&(C<1||C<n)&&(m=!1),x>1&&(S>e||S>i)&&(y=!1),x>5e4&&(m=!1,y=!1);var D=-1;if(m&&C>=1){var A=this._computeIndentLevel(C-1);A>=0?(h=C-1,c=A,D=Math.ceil(A/this.textModel.getOptions().indentSize)):(f(C),D=this._getIndentLevelForWhitespaceLine(s,a,c))}var O=-1;if(y&&S<=e){var A=this._computeIndentLevel(S-1);A>=0?(l=S-1,v=A,O=Math.ceil(A/this.textModel.getOptions().indentSize)):(p(S),O=this._getIndentLevelForWhitespaceLine(s,v,g))}if(x!==0){if(x===1){if(S<=e&&O>=0&&k+1===O){m=!1,w=S,b=S,_=O;continue}if(C>=1&&D>=0&&D-1===k){y=!1,w=C,b=C,_=D;continue}if(w=t,b=t,_=k,_===0)return{startLineNumber:w,endLineNumber:b,indent:_}}m&&(D>=_?w=C:m=!1),y&&(O>=_?b=S:y=!1)}else k=D}return{startLineNumber:w,endLineNumber:b,indent:_}};n.prototype.getLinesBracketGuides=function(t,n,i,r){var e;var o=[];for(var s=t;s<=n;s++)o.push([]);var u=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new Ir(t,1,n,this.textModel.getLineMaxColumn(n))).toArray();var a;i&&u.length>0&&(a=(e=Td((t<=i.lineNumber&&i.lineNumber<=n?u:this.textModel.bracketPairs.getBracketPairsInRange(Ir.fromPositions(i)).toArray()).filter((function(t){return Ir.strictContainsPosition(t.range,i)})),(function(t){return!0})))===null||e===void 0?void 0:e.range);var h=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,c=new HS;for(var f=0,l=u;f<l.length;f++){var s=l[f];if(!s.closingBracketRange)continue;var v=a&&s.range.equalsRange(a);if(!v&&!r.includeInactive)continue;var d=c.getInlineClassName(s.nestingLevel,s.nestingLevelOfEqualBracketType,h)+(r.highlightActive&&v?" "+c.activeClassName:""),g=s.openingBracketRange.getStartPosition(),p=s.closingBracketRange.getStartPosition(),w=r.horizontalGuides===eS.Enabled||r.horizontalGuides===eS.EnabledForActive&&v;if(s.range.startLineNumber===s.range.endLineNumber){w&&o[s.range.startLineNumber-t].push(new NS(-1,s.openingBracketRange.getEndPosition().column,d,new PS(!1,p.column),-1,-1));continue}var m=this.getVisibleColumnFromPosition(p),b=this.getVisibleColumnFromPosition(s.openingBracketRange.getStartPosition()),y=Math.min(b,m,s.minVisibleColumnIndentation+1);var _=!1;vo(this.textModel.getLineContent(s.closingBracketRange.startLineNumber))<s.closingBracketRange.startColumn-1&&(_=!0);var k=Math.max(g.lineNumber,t),x=Math.min(p.lineNumber,n),C=_?1:0;for(var S=k;S<x+C;S++)o[S-t].push(new NS(y,-1,d,null,S===g.lineNumber?g.column:-1,S===p.lineNumber?p.column:-1));w&&(g.lineNumber>=t&&b>y&&o[g.lineNumber-t].push(new NS(y,-1,d,new PS(!1,g.column),-1,-1)),p.lineNumber<=n&&m>y&&o[p.lineNumber-t].push(new NS(y,-1,d,new PS(!_,p.column),-1,-1)))}for(var D=0,A=o;D<A.length;D++){var s=A[D];s.sort((function(t,n){return t.visibleColumn-n.visibleColumn}))}return o};n.prototype.getVisibleColumnFromPosition=function(t){return B_.visibleColumnFromColumn(this.textModel.getLineContent(t.lineNumber),t.column,this.textModel.getOptions().tabSize)+1};n.prototype.getLinesIndentGuides=function(t,n){this.assertNotDisposed();var i=this.textModel.getLineCount();if(t<1||t>i)throw new Error("Illegal value for startLineNumber");if(n<1||n>i)throw new Error("Illegal value for endLineNumber");var r=this.textModel.getOptions(),e=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(e&&e.offSide),s=new Array(n-t+1);var u=-2,a=-1,h=-2,c=-1;for(var f=t;f<=n;f++){var l=f-t,v=this._computeIndentLevel(f-1);if(v>=0)u=f-1,a=v,s[l]=Math.ceil(v/r.indentSize);else{if(u===-2){u=-1,a=-1;for(var d=f-2;d>=0;d--){var g=this._computeIndentLevel(d);if(g>=0){u=d,a=g;break}}}if(h!==-1&&(h===-2||h<f-1)){h=-1,c=-1;for(var d=f;d<i;d++){var g=this._computeIndentLevel(d);if(g>=0){h=d,c=g;break}}}s[l]=this._getIndentLevelForWhitespaceLine(o,a,c)}}return s};n.prototype._getIndentLevelForWhitespaceLine=function(t,n,i){var r=this.textModel.getOptions();return n===-1||i===-1?0:n<i?1+Math.floor(n/r.indentSize):n===i||t?Math.ceil(i/r.indentSize):1+Math.floor(i/r.indentSize)};return n}(IS);var HS=function(){function t(){this.activeClassName="indent-active"}t.prototype.getInlineClassName=function(t,n,i){return this.getInlineClassNameOfLevel(i?n:t)};t.prototype.getInlineClassNameOfLevel=function(t){return"bracket-indent-guide lvl-"+t%30};return t}();var zS=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._context=n,i._primaryPosition=null;var r=i._context.configuration.options,e=r.get(146),o=r.get(50);i._spaceWidth=o.spaceWidth,i._maxIndentLeft=e.wrappingColumn===-1?-1:e.wrappingColumn*o.typicalHalfwidthCharacterWidth,i._bracketPairGuideOptions=r.get(16),i._renderResult=null,i._context.addEventHandler(i);return i}n.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options,i=n.get(146),r=n.get(50);return this._spaceWidth=r.spaceWidth,this._maxIndentLeft=i.wrappingColumn===-1?-1:i.wrappingColumn*r.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=n.get(16),!0};n.prototype.onCursorStateChanged=function(t){var n;var i=t.selections[0].getPosition();return!(!((n=this._primaryPosition)===null||n===void 0)&&n.equals(i))&&(this._primaryPosition=i,!0)};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype.onLanguageConfigurationChanged=function(t){return!0};n.prototype.prepareRender=function(t){var n,i,r,e;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1)return void(this._renderResult=null);var o=t.visibleRange.startLineNumber,s=t.visibleRange.endLineNumber,u=t.scrollWidth,a=this._primaryPosition,h=this.getGuidesByLine(o,Math.min(s+1,this._context.viewModel.getLineCount()),a),c=[];for(var f=o;f<=s;f++){var l=f-o,v=h[l];var d="";var g=(i=(n=t.visibleRangeForPosition(new Tr(f,1)))===null||n===void 0?void 0:n.left)!==null&&i!==void 0?i:0;for(var p=0,w=v;p<w.length;p++){var m=w[p];var b=m.column===-1?g+(m.visibleColumn-1)*this._spaceWidth:t.visibleRangeForPosition(new Tr(f,m.column)).left;if(b>u||this._maxIndentLeft>0&&b>this._maxIndentLeft)break;var y=m.horizontalLine?m.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",_=m.horizontalLine?((e=(r=t.visibleRangeForPosition(new Tr(f,m.horizontalLine.endColumn)))===null||r===void 0?void 0:r.left)!==null&&e!==void 0?e:b+this._spaceWidth)-b:this._spaceWidth;d+='<div class="core-guide '.concat(m.className," ").concat(y,'" style="left:').concat(b,"px;width:").concat(_,'px"></div>')}c[l]=d}this._renderResult=c};n.prototype.getGuidesByLine=function(t,n,i){var r=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(t,n,i,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?eS.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?eS.EnabledForActive:eS.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,e=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(t,n):null;var o=0,s=0,u=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&i){var a=this._context.viewModel.getActiveIndentGuide(i.lineNumber,t,n);o=a.startLineNumber,s=a.endLineNumber,u=a.indent}var h=this._context.viewModel.model.getOptions().indentSize,c=[];for(var a=t;a<=n;a++){var f=new Array;c.push(f);var l=r?r[a-t]:[],v=new N(l),d=e?e[a-t]:0;var g=function(t){var n=(t-1)*h+1,i=(p._bracketPairGuideOptions.highlightActiveIndentation==="always"||l.length===0)&&o<=a&&a<=s&&t===u;f.push.apply(f,v.takeWhile((function(t){return t.visibleColumn<n}))||[]);var r=v.peek();r&&r.visibleColumn===n&&!r.horizontalLine||f.push(new NS(n,-1,"core-guide-indent lvl-"+(t-1)%30+(i?" indent-active":""),null,-1,-1))};var p=this;for(var w=1;w<=d;w++){g(w)}f.push.apply(f,v.takeWhile((function(t){return!0}))||[])}return c};n.prototype.render=function(t,n){if(!this._renderResult)return"";var i=n-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]};return n}(Hk);function US(t){if(!t||!t.isTransparent())return t}Gk((function(t,n){var i=[{bracketColor:Ex,guideColor:Ix,guideColorActive:zx},{bracketColor:Mx,guideColor:Bx,guideColorActive:Ux},{bracketColor:Fx,guideColor:Nx,guideColorActive:Kx},{bracketColor:Lx,guideColor:Px,guideColorActive:Vx},{bracketColor:jx,guideColor:Wx,guideColorActive:qx},{bracketColor:Rx,guideColor:Hx,guideColorActive:Gx}],r=new HS,e=[{indentColor:ux,indentColorActive:vx},{indentColor:ax,indentColorActive:dx},{indentColor:hx,indentColorActive:gx},{indentColor:cx,indentColorActive:px},{indentColor:fx,indentColorActive:wx},{indentColor:lx,indentColorActive:mx}],o=i.map((function(n){var i,r;var e=t.getColor(n.bracketColor),o=t.getColor(n.guideColor),s=t.getColor(n.guideColorActive),u=US((i=US(o))!==null&&i!==void 0?i:e==null?void 0:e.transparent(.3)),a=US((r=US(s))!==null&&r!==void 0?r:e);if(u&&a)return{guideColor:u,guideColorActive:a}})).filter($),s=e.map((function(n){var i=t.getColor(n.indentColor),r=t.getColor(n.indentColorActive),e=US(i),o=US(r);if(e&&o)return{indentColor:e,indentColorActive:o}})).filter($);if(o.length>0){for(var u=0;u<30;u++){var a=o[u%o.length];n.addRule(".monaco-editor .".concat(r.getInlineClassNameOfLevel(u).replace(/ /g,".")," { --guide-color: ").concat(a.guideColor,"; --guide-color-active: ").concat(a.guideColorActive,"; }"))}n.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),n.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),n.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),n.addRule(".monaco-editor .vertical.".concat(r.activeClassName," { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }")),n.addRule(".monaco-editor .horizontal-top.".concat(r.activeClassName," { border-top: 1px solid var(--guide-color-active); }")),n.addRule(".monaco-editor .horizontal-bottom.".concat(r.activeClassName," { border-bottom: 1px solid var(--guide-color-active); }"))}if(s.length>0){for(var u=0;u<30;u++){var a=s[u%s.length];n.addRule(".monaco-editor .lines-content .core-guide-indent.lvl-".concat(u," { --indent-color: ").concat(a.indentColor,"; --indent-color-active: ").concat(a.indentColorActive,"; }"))}n.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),n.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}}));var KS=function(){function t(t,n){this._domNode=t,this.endNode=n,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}Object.defineProperty(t.prototype,"didDomLayout",{get:function(){return this._didDomLayout},enumerable:false,configurable:true});t.prototype.readClientRect=function(){if(!this._clientRectRead){this._clientRectRead=!0;var t=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=t.left,this._clientRectScale=t.width/this._domNode.offsetWidth}};Object.defineProperty(t.prototype,"clientRectDeltaLeft",{get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"clientRectScale",{get:function(){return this._clientRectRead||this.readClientRect(),this._clientRectScale},enumerable:false,configurable:true});t.prototype.markDidDomLayout=function(){this._didDomLayout=!0};return t}();var VS=function(){function t(){this._currentVisibleRange=new Ir(1,1,1,1)}t.prototype.getCurrentVisibleRange=function(){return this._currentVisibleRange};t.prototype.setCurrentVisibleRange=function(t){this._currentVisibleRange=t};return t}();var qS=function(){function t(t,n,i,r,e,o,s){this.minimalReveal=t,this.lineNumber=n,this.startColumn=i,this.endColumn=r,this.startScrollTop=e,this.stopScrollTop=o,this.scrollType=s,this.type="range",this.minLineNumber=n,this.maxLineNumber=n}return t}();var GS=function(){function t(t,n,i,r,e){this.minimalReveal=t,this.selections=n,this.startScrollTop=i,this.stopScrollTop=r,this.scrollType=e,this.type="selections";var o=n[0].startLineNumber,s=n[0].endLineNumber;for(var u=1,a=n.length;u<a;u++){var h=n[u];o=Math.min(o,h.startLineNumber),s=Math.max(s,h.endLineNumber)}this.minLineNumber=o,this.maxLineNumber=s}return t}();var $S=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n)||this,r._linesContent=i,r._textRangeRestingSpot=document.createElement("div"),r._visibleLines=new hS(r),r.domNode=r._visibleLines.domNode;var e=r._context.configuration,o=r._context.configuration.options,s=o.get(50),u=o.get(146);r._lineHeight=o.get(67),r._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,r._isViewportWrapping=u.isViewportWrapping,r._revealHorizontalRightPadding=o.get(100),r._cursorSurroundingLines=o.get(29),r._cursorSurroundingLinesStyle=o.get(30),r._canUseLayerHinting=!o.get(32),r._viewLineOptions=new O_(e,r._context.theme.type),d_.write(r.domNode,8),r.domNode.setClassName("view-lines ".concat(Zx)),Ph(r.domNode,s),r._maxLineWidth=0,r._asyncUpdateLineWidths=new Ts((function(){r._updateLineWidthsSlow()}),200),r._asyncCheckMonospaceFontAssumptions=new Ts((function(){r._checkMonospaceFontAssumptions()}),2e3),r._lastRenderedData=new VS,r._horizontalRevealRequest=null,r._stickyScrollEnabled=o.get(115).enabled,r._maxNumberStickyLines=o.get(115).maxLineCount;return r}n.prototype.dispose=function(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),t.prototype.dispose.call(this)};n.prototype.getDomNode=function(){return this.domNode};n.prototype.createVisibleLine=function(){return new E_(this._viewLineOptions)};n.prototype.onConfigurationChanged=function(t){this._visibleLines.onConfigurationChanged(t),t.hasChanged(146)&&(this._maxLineWidth=0);var n=this._context.configuration.options,i=n.get(50),r=n.get(146);return this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=n.get(100),this._cursorSurroundingLines=n.get(29),this._cursorSurroundingLinesStyle=n.get(30),this._canUseLayerHinting=!n.get(32),this._stickyScrollEnabled=n.get(115).enabled,this._maxNumberStickyLines=n.get(115).maxLineCount,Ph(this.domNode,i),this._onOptionsMaybeChanged(),t.hasChanged(145)&&(this._maxLineWidth=0),!0};n.prototype._onOptionsMaybeChanged=function(){var t=this._context.configuration,n=new O_(t,this._context.theme.type);if(!this._viewLineOptions.equals(n)){this._viewLineOptions=n;var i=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(var e=i;e<=r;e++)this._visibleLines.getVisibleLine(e).onOptionsChanged(this._viewLineOptions);return!0}return!1};n.prototype.onCursorStateChanged=function(t){var n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();var r=!1;for(var e=n;e<=i;e++)r=this._visibleLines.getVisibleLine(e).onSelectionChanged()||r;return r};n.prototype.onDecorationsChanged=function(t){{var n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(var r=n;r<=i;r++)this._visibleLines.getVisibleLine(r).onDecorationsChanged()}return!0};n.prototype.onFlushed=function(t){var n=this._visibleLines.onFlushed(t);return this._maxLineWidth=0,n};n.prototype.onLinesChanged=function(t){return this._visibleLines.onLinesChanged(t)};n.prototype.onLinesDeleted=function(t){return this._visibleLines.onLinesDeleted(t)};n.prototype.onLinesInserted=function(t){return this._visibleLines.onLinesInserted(t)};n.prototype.onRevealRangeRequest=function(t){var n=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),t.source,t.minimalReveal,t.range,t.selections,t.verticalType);if(n===-1)return!1;var i=this._context.viewLayout.validateScrollPosition({scrollTop:n});t.revealHorizontal?t.range&&t.range.startLineNumber!==t.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:t.range?this._horizontalRevealRequest=new qS(t.minimalReveal,t.range.startLineNumber,t.range.startColumn,t.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,t.scrollType):t.selections&&t.selections.length>0&&(this._horizontalRevealRequest=new GS(t.minimalReveal,t.selections,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,t.scrollType)):this._horizontalRevealRequest=null;var r=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop)<=this._lineHeight?1:t.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(i,r),!0};n.prototype.onScrollChanged=function(t){if(this._horizontalRevealRequest&&t.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&t.scrollTopChanged){var n=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(t.scrollTop<n||t.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(t.scrollWidth),this._visibleLines.onScrollChanged(t)||!0};n.prototype.onTokensChanged=function(t){return this._visibleLines.onTokensChanged(t)};n.prototype.onZonesChanged=function(t){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(t)};n.prototype.onThemeChanged=function(t){return this._onOptionsMaybeChanged()};n.prototype.getPositionFromDOMInfo=function(t,n){var i=this._getViewLineDomNode(t);if(i===null)return null;var r=this._getLineNumberFor(i);if(r===-1||r<1||r>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(r)===1)return new Tr(r,1);var e=this._visibleLines.getStartLineNumber(),o=this._visibleLines.getEndLineNumber();if(r<e||r>o)return null;var s=this._visibleLines.getVisibleLine(r).getColumnOfNodeOffset(t,n);var u=this._context.viewModel.getLineMinColumn(r);return s<u&&(s=u),new Tr(r,s)};n.prototype._getViewLineDomNode=function(t){for(;t&&t.nodeType===1;){if(t.className===E_.CLASS_NAME)return t;t=t.parentElement}return null};n.prototype._getLineNumberFor=function(t){var n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(var r=n;r<=i;r++)if(t===this._visibleLines.getVisibleLine(r).getDomNode())return r;return-1};n.prototype.getLineWidth=function(t){var n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();if(t<n||t>i)return-1;var r=new KS(this.domNode.domNode,this._textRangeRestingSpot),e=this._visibleLines.getVisibleLine(t).getWidth(r);return this._updateLineWidthsSlowIfDomDidLayout(r),e};n.prototype.linesVisibleRangesForRange=function(t,n){if(this.shouldRender())return null;var i=t.endLineNumber,r=Ir.intersectRanges(t,this._lastRenderedData.getCurrentVisibleRange());if(!r)return null;var e=[];var o=0;var s=new KS(this.domNode.domNode,this._textRangeRestingSpot);var u=0;n&&(u=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Tr(r.startLineNumber,1)).lineNumber);var a=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();for(var c=r.startLineNumber;c<=r.endLineNumber;c++){if(c<a||c>h)continue;var f=c===r.startLineNumber?r.startColumn:1,l=c!==r.endLineNumber,v=l?this._context.viewModel.getLineMaxColumn(c):r.endColumn,d=this._visibleLines.getVisibleLine(c).getVisibleRangesForRange(c,f,v,s);if(d){if(n&&c<i){var g=u;u=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Tr(c+1,1)).lineNumber,g!==u&&(d.ranges[d.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}e[o++]=new w_(d.outsideRenderedLine,c,m_.from(d.ranges),l)}}return this._updateLineWidthsSlowIfDomDidLayout(s),o===0?null:e};n.prototype._visibleRangesForLineRange=function(t,n,i){if(this.shouldRender()||t<this._visibleLines.getStartLineNumber()||t>this._visibleLines.getEndLineNumber())return null;var r=new KS(this.domNode.domNode,this._textRangeRestingSpot),e=this._visibleLines.getVisibleLine(t).getVisibleRangesForRange(t,n,i,r);return this._updateLineWidthsSlowIfDomDidLayout(r),e};n.prototype.visibleRangeForPosition=function(t){var n=this._visibleRangesForLineRange(t.lineNumber,t.column,t.column);return n?new y_(n.outsideRenderedLine,n.ranges[0].left):null};n.prototype._updateLineWidthsFast=function(){return this._updateLineWidths(!0)};n.prototype._updateLineWidthsSlow=function(){this._updateLineWidths(!1)};n.prototype._updateLineWidthsSlowIfDomDidLayout=function(t){t.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))};n.prototype._updateLineWidths=function(t){var n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();var r=1,e=!0;for(var o=n;o<=i;o++){var s=this._visibleLines.getVisibleLine(o);!t||s.getWidthIsFast()?r=Math.max(r,s.getWidth(null)):e=!1}return e&&n===1&&i===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(r),e};n.prototype._checkMonospaceFontAssumptions=function(){var t=-1,n=-1;var i=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(var e=i;e<=r;e++){var o=this._visibleLines.getVisibleLine(e);if(o.needsMonospaceFontCheck()){var s=o.getWidth(null);s>n&&(n=s,t=e)}}if(t!==-1&&!this._visibleLines.getVisibleLine(t).monospaceAssumptionsAreValid())for(var e=i;e<=r;e++)this._visibleLines.getVisibleLine(e).onMonospaceAssumptionsInvalidated()};n.prototype.prepareRender=function(){throw new Error("Not supported")};n.prototype.render=function(){throw new Error("Not supported")};n.prototype.renderText=function(t){if(this._visibleLines.renderLines(t),this._lastRenderedData.setCurrentVisibleRange(t.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){var n=this._horizontalRevealRequest;if(t.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=t.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();var i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Lt&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){var n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(var r=n;r<=i;r++)if(this._visibleLines.getVisibleLine(r).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");var e=this._context.viewLayout.getCurrentScrollTop()-t.bigNumbersDelta;this._linesContent.setTop(-e),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())};n.prototype._ensureMaxLineWidth=function(t){var n=Math.ceil(t);this._maxLineWidth<n&&(this._maxLineWidth=n,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))};n.prototype._computeScrollTopToRevealRange=function(t,n,i,r,e,o){var s=t.top,u=t.height,a=s+u;var h,c,f;if(e&&e.length>0){var l=e[0].startLineNumber,v=e[0].endLineNumber;for(var d=1,g=e.length;d<g;d++){var p=e[d];l=Math.min(l,p.startLineNumber),v=Math.max(v,p.endLineNumber)}h=!1,c=this._context.viewLayout.getVerticalOffsetForLineNumber(l),f=this._context.viewLayout.getVerticalOffsetForLineNumber(v)+this._lineHeight}else{if(!r)return-1;h=!0,c=this._context.viewLayout.getVerticalOffsetForLineNumber(r.startLineNumber),f=this._context.viewLayout.getVerticalOffsetForLineNumber(r.endLineNumber)+this._lineHeight}var w,m=0,b=0;if((n==="mouse"||i)&&this._cursorSurroundingLinesStyle==="default")i||(m=this._lineHeight);else{var l=Math.min(u/this._lineHeight/2,this._cursorSurroundingLines);m=this._stickyScrollEnabled?Math.max(l,this._maxNumberStickyLines)*this._lineHeight:l*this._lineHeight,b=Math.max(0,l-1)*this._lineHeight}if(i||o!==0&&o!==4||(b+=this._lineHeight),c-=m,f+=b,f-c>u){if(!h)return-1;w=c}else if(o===5||o===6)if(o===6&&s<=c&&f<=a)w=s;else{var l=c-Math.max(5*this._lineHeight,.2*u),v=f-u;w=Math.max(v,l)}else if(o===1||o===2)if(o===2&&s<=c&&f<=a)w=s;else{var l=(c+f)/2;w=Math.max(0,l-u/2)}else w=this._computeMinimumScrolling(s,a,c,f,o===3,o===4);return w};n.prototype._computeScrollLeftToReveal=function(t){var i=this._context.viewLayout.getCurrentViewport(),r=this._context.configuration.options.get(145),e=i.left,o=e+i.width-r.verticalScrollbarWidth;var s=1073741824,u=0;if(t.type==="range"){var a=this._visibleRangesForLineRange(t.lineNumber,t.startColumn,t.endColumn);if(!a)return null;for(var h=0,c=a.ranges;h<c.length;h++){var f=c[h];s=Math.min(s,Math.round(f.left)),u=Math.max(u,Math.round(f.left+f.width))}}else for(var l=0,v=t.selections;l<v.length;l++){var a=v[l];if(a.startLineNumber!==a.endLineNumber)return null;var f=this._visibleRangesForLineRange(a.startLineNumber,a.startColumn,a.endColumn);if(!f)return null;for(var d=0,g=f.ranges;d<g.length;d++){var p=g[d];s=Math.min(s,Math.round(p.left)),u=Math.max(u,Math.round(p.left+p.width))}}return t.minimalReveal||(s=Math.max(0,s-n.HORIZONTAL_EXTRA_PX),u+=this._revealHorizontalRightPadding),t.type==="selections"&&u-s>i.width?null:{scrollLeft:this._computeMinimumScrolling(e,o,s,u),maxHorizontalOffset:u}};n.prototype._computeMinimumScrolling=function(t,n,i,r,e,o){e=!!e,o=!!o;var s=(n|=0)-(t|=0);return(r|=0)-(i|=0)<s?e?i:o?Math.max(0,r-s):i<t?i:r>n?Math.max(0,r-s):t:i};return n}(v_);$S.HORIZONTAL_EXTRA_PX=30;var JS=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._context=n;var r=i._context.configuration.options.get(145);i._decorationsLeft=r.decorationsLeft,i._decorationsWidth=r.decorationsWidth,i._renderResult=null,i._context.addEventHandler(i);return i}n.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options.get(145);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype._getDecorations=function(t){var n,i;var r=t.getDecorationsInViewport(),e=[];var o=0;for(var s=0,u=r.length;s<u;s++){var a=r[s],h=a.options.linesDecorationsClassName,c=a.options.zIndex;h&&(e[o++]=new OS(a.range.startLineNumber,a.range.endLineNumber,h,(n=a.options.linesDecorationsTooltip)!==null&&n!==void 0?n:null,c));var f=a.options.firstLineDecorationClassName;f&&(e[o++]=new OS(a.range.startLineNumber,a.range.startLineNumber,f,(i=a.options.linesDecorationsTooltip)!==null&&i!==void 0?i:null,c))}return e};n.prototype.prepareRender=function(t){var n=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber,r=this._render(n,i,this._getDecorations(t)),e='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',o=[];for(var s=n;s<=i;s++){var u=s-n,a=r[u].getDecorations();var h="";for(var c=0,f=a;c<f.length;c++){var l=f[c];var v='<div class="cldr '+l.className;l.tooltip!==null&&(v+='" title="'+l.tooltip),v+=e,h+=v}o[u]=h}this._renderResult=o};n.prototype.render=function(t,n){return this._renderResult?this._renderResult[n-t]:""};return n}(FS);var ZS=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._context=n,i._renderResult=null,i._context.addEventHandler(i);return i}n.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){return!0};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype._getDecorations=function(t){var n=t.getDecorationsInViewport(),i=[];var r=0;for(var e=0,o=n.length;e<o;e++){var s=n[e],u=s.options.marginClassName,a=s.options.zIndex;u&&(i[r++]=new OS(s.range.startLineNumber,s.range.endLineNumber,u,null,a))}return i};n.prototype.prepareRender=function(t){var n=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber,r=this._render(n,i,this._getDecorations(t)),e=[];for(var o=n;o<=i;o++){var s=o-n,u=r[s].getDecorations();var a="";for(var h=0,c=u;h<c.length;h++){var f=c[h];a+='<div class="cmdr '+f.className+'" style=""></div>'}e[s]=a}this._renderResult=e};n.prototype.render=function(t,n){return this._renderResult?this._renderResult[n-t]:""};return n}(FS);var QS=function(){function t(n,i,r,e){this._rgba8Brand=void 0,this.r=t._clamp(n),this.g=t._clamp(i),this.b=t._clamp(r),this.a=t._clamp(e)}t.prototype.equals=function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a};t._clamp=function(t){return t<0?0:t>255?255:0|t};return t}();QS.Empty=new QS(0,0,0,0);var YS=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n._onDidChange=new ki,n.onDidChange=n._onDidChange.event,n._updateColorMap(),n._register(oe.onDidChange((function(t){t.changedColorMap&&n._updateColorMap()})));return n}n.getInstance=function(){return this._INSTANCE||(this._INSTANCE=new n),this._INSTANCE};n.prototype._updateColorMap=function(){var t=oe.getColorMap();if(!t)return this._colors=[QS.Empty],void(this._backgroundIsLight=!0);this._colors=[QS.Empty];for(var n=1;n<t.length;n++){var i=t[n].rgba;this._colors[n]=new QS(i.r,i.g,i.b,Math.round(255*i.a))}var r=t[2].getRelativeLuminance();this._backgroundIsLight=r>=.5,this._onDidChange.fire(void 0)};n.prototype.getColor=function(t){return(t<1||t>=this._colors.length)&&(t=2),this._colors[t]};n.prototype.backgroundIsLight=function(){return this._backgroundIsLight};return n}(ci);YS._INSTANCE=null;var XS=function(){var t=[];for(var n=32;n<=126;n++)t.push(n);return t.push(65533),t}();var tD=function(){function t(n,i){this.scale=i,this._minimapCharRendererBrand=void 0,this.charDataNormal=t.soften(n,.8),this.charDataLight=t.soften(n,50/60)}t.soften=function(t,n){var i=new Uint8ClampedArray(t.length);for(var r=0,e=t.length;r<e;r++)i[r]=zv(t[r]*n);return i};t.prototype.renderChar=function(t,n,i,r,e,o,s,u,a,h,c){var f=1*this.scale,l=2*this.scale,v=c?1:l;if(n+f>t.width||i+v>t.height)return void console.warn("bad render request outside image data");var d=h?this.charDataLight:this.charDataNormal,g=function(t,n){return(t-=32)<0||t>96?n<=2?(t+96)%96:95:t}(r,a),p=4*t.width,w=s.r,m=s.g,b=s.b,y=e.r-w,_=e.g-m,k=e.b-b,x=Math.max(o,u),C=t.data;var S=g*f*l,D=i*p+4*n;for(var A=0;A<v;A++){var O=D;for(var E=0;E<f;E++){var M=d[S++]/255*(o/255);C[O++]=w+y*M,C[O++]=m+_*M,C[O++]=b+k*M,C[O++]=x}D+=p}};t.prototype.blockRenderChar=function(t,n,i,r,e,o,s,u){var a=1*this.scale,h=2*this.scale,c=u?1:h;if(n+a>t.width||i+c>t.height)return void console.warn("bad render request outside image data");var f=4*t.width,l=e/255*.5,v=o.r,d=o.g,g=o.b,p=v+(r.r-v)*l,w=d+(r.g-d)*l,m=g+(r.b-g)*l,b=Math.max(e,s),y=t.data;var _=i*f+4*n;for(var k=0;k<c;k++){var x=_;for(var C=0;C<a;C++)y[x++]=p,y[x++]=w,y[x++]=m,y[x++]=b;_+=f}};return t}();var nD={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},iD=function(t){var n=new Uint8ClampedArray(t.length/2);for(var i=0;i<t.length;i+=2)n[i>>1]=nD[t[i]]<<4|15&nD[t[i+1]];return n},rD={1:ei((function(){return iD("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")})),2:ei((function(){return iD("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")}))};var eD=function(){function t(){}t.create=function(n,i){if(this.lastCreated&&n===this.lastCreated.scale&&i===this.lastFontFamily)return this.lastCreated;var r;return r=rD[n]?new tD(rD[n](),n):t.createFromSampleData(t.createSampleData(i).data,n),this.lastFontFamily=i,this.lastCreated=r,r};t.createSampleData=function(t){var n=document.createElement("canvas"),i=n.getContext("2d");n.style.height="16px",n.height=16,n.width=960,n.style.width="960px",i.fillStyle="#ffffff",i.font="bold 16px ".concat(t),i.textBaseline="middle";var r=0;for(var e=0,o=XS;e<o.length;e++){var s=o[e];i.fillText(String.fromCharCode(s),r,8),r+=10}return i.getImageData(0,0,960,16)};t.createFromSampleData=function(n,i){if(n.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");var r=t._downsample(n,i);return new tD(r,i)};t._downsampleChar=function(t,n,i,r,e){var o=1*e,s=2*e;var u=r,a=0;for(var h=0;h<s;h++){var c=h/s*16,f=(h+1)/s*16;for(var l=0;l<o;l++){var v=l/o*10,d=(l+1)/o*10;var g=0,p=0;for(var w=c;w<f;w++){var m=n+3840*Math.floor(w),b=1-(w-Math.floor(w));for(var y=v;y<d;y++){var _=1-(y-Math.floor(y)),k=m+4*Math.floor(y),x=_*b;p+=x,g+=t[k]*t[k+3]/255*x}}var C=g/p;a=Math.max(a,C),i[u++]=zv(C)}}return a};t._downsample=function(t,n){var i=2*n*1*n,r=96*i,e=new Uint8ClampedArray(r);var o=0,s=0,u=0;for(var a=0;a<96;a++)u=Math.max(u,this._downsampleChar(t,s,e,o,n)),o+=i,s+=40;if(u>0){var a=255/u;for(var h=0;h<r;h++)e[h]*=a}return e};return t}();var oD=Mt?'"Segoe WPC", "Segoe UI", sans-serif':Ft?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif';var sD=function(){function t(n,i,r){var e=this;var o=n.options,s=o.get(143),u=o.get(145),a=u.minimap,h=o.get(50),c=o.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=o.get(105),this.paddingTop=o.get(84).top,this.paddingBottom=o.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=h.typicalHalfwidthCharacterWidth,this.lineHeight=o.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=u.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=u.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=oD,this.sectionHeaderFontSize=c.sectionHeaderFontSize*s,this.sectionHeaderFontColor=t._getSectionHeaderColor(i,r.getColor(1)),this.charRenderer=ei((function(){return eD.create(e.fontScale,h.fontFamily)})),this.defaultBackgroundColor=r.getColor(2),this.backgroundColor=t._getMinimapBackground(i,this.defaultBackgroundColor),this.foregroundAlpha=t._getMinimapForegroundOpacity(i)}t._getMinimapBackground=function(t,n){var i=t.getColor(Db);return i?new QS(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):n};t._getMinimapForegroundOpacity=function(t){var n=t.getColor(Ab);return n?QS._clamp(Math.round(255*n.rgba.a)):255};t._getSectionHeaderColor=function(t,n){var i=t.getColor(bm);return i?new QS(i.rgba.r,i.rgba.g,i.rgba.b,Math.round(255*i.rgba.a)):n};t.prototype.equals=function(t){return this.renderMinimap===t.renderMinimap&&this.size===t.size&&this.minimapHeightIsEditorHeight===t.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===t.scrollBeyondLastLine&&this.paddingTop===t.paddingTop&&this.paddingBottom===t.paddingBottom&&this.showSlider===t.showSlider&&this.autohide===t.autohide&&this.pixelRatio===t.pixelRatio&&this.typicalHalfwidthCharacterWidth===t.typicalHalfwidthCharacterWidth&&this.lineHeight===t.lineHeight&&this.minimapLeft===t.minimapLeft&&this.minimapWidth===t.minimapWidth&&this.minimapHeight===t.minimapHeight&&this.canvasInnerWidth===t.canvasInnerWidth&&this.canvasInnerHeight===t.canvasInnerHeight&&this.canvasOuterWidth===t.canvasOuterWidth&&this.canvasOuterHeight===t.canvasOuterHeight&&this.isSampling===t.isSampling&&this.editorHeight===t.editorHeight&&this.fontScale===t.fontScale&&this.minimapLineHeight===t.minimapLineHeight&&this.minimapCharWidth===t.minimapCharWidth&&this.sectionHeaderFontSize===t.sectionHeaderFontSize&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(t.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(t.backgroundColor)&&this.foregroundAlpha===t.foregroundAlpha};return t}();var uD=function(){function t(t,n,i,r,e,o,s,u,a){this.scrollTop=t,this.scrollHeight=n,this.sliderNeeded=i,this._computedSliderRatio=r,this.sliderTop=e,this.sliderHeight=o,this.topPaddingLineCount=s,this.startLineNumber=u,this.endLineNumber=a}t.prototype.getDesiredScrollTopFromDelta=function(t){return Math.round(this.scrollTop+t/this._computedSliderRatio)};t.prototype.getDesiredScrollTopFromTouchLocation=function(t){return Math.round((t-this.sliderHeight/2)/this._computedSliderRatio)};t.prototype.intersectWithViewport=function(t){var n=Math.max(this.startLineNumber,t.startLineNumber),i=Math.min(this.endLineNumber,t.endLineNumber);return n>i?null:[n,i]};t.prototype.getYForLineNumber=function(t,n){return+(t-this.startLineNumber+this.topPaddingLineCount)*n};t.create=function(n,i,r,e,o,s,u,a,h,c,f){var l=n.pixelRatio,v=n.minimapLineHeight,d=Math.floor(n.canvasInnerHeight/v),g=n.lineHeight;if(n.minimapHeightIsEditorHeight){var p=a*n.lineHeight+n.paddingTop+n.paddingBottom;n.scrollBeyondLastLine&&(p+=Math.max(0,o-n.lineHeight-n.paddingBottom));var w=Math.max(1,Math.floor(o*o/p)),m=Math.max(0,n.minimapHeight-w),b=m/(c-o),y=h*b,_=m>0,k=Math.floor(n.canvasInnerHeight/n.minimapLineHeight),x=Math.floor(n.paddingTop/n.lineHeight);return new t(h,c,_,b,y,w,x,1,Math.min(u,k))}var C;if(s&&r!==u){var p=r-i+1;C=Math.floor(p*v/l)}else{var p=o/g;C=Math.floor(p*v/l)}var S=Math.floor(n.paddingTop/g);var D,A=Math.floor(n.paddingBottom/g);if(n.scrollBeyondLastLine){var p=o/g;A=Math.max(A,p-1)}A>0?D=(S+u+A-o/g-1)*v/l:D=Math.max(0,(S+u)*v/l-C),D=Math.min(n.minimapHeight-C,D);var O=D/(c-o),E=h*O;if(d>=S+u+A)return new t(h,c,D>0,O,E,C,S,1,u);{var p=void 0,w=void 0;p=i>1?i+S:Math.max(1,h/g);var m=Math.max(1,Math.floor(p-E*l/v));m<S?(w=S-m+1,m=1):(w=0,m=Math.max(1,m-S)),f&&f.scrollHeight===c&&(f.scrollTop>h&&(m=Math.min(m,f.startLineNumber),w=Math.max(w,f.topPaddingLineCount)),f.scrollTop<h&&(m=Math.max(m,f.startLineNumber),w=Math.min(w,f.topPaddingLineCount)));var b=Math.min(u,m-w+d-1),y=(h-e)/g;var _=void 0;return _=h>=n.paddingTop?(i-m+w+y)*v/l:h/n.paddingTop*(w+y)*v/l,new t(h,c,!0,O,_,C,w,m,b)}};return t}();var aD=function(){function t(t){this.dy=t}t.prototype.onContentChanged=function(){this.dy=-1};t.prototype.onTokensChanged=function(){this.dy=-1};return t}();aD.INVALID=new aD(-1);var hD=function(){function t(t,n,i){this.renderedLayout=t,this._imageData=n,this._renderedLines=new aS((function(){return aD.INVALID})),this._renderedLines._set(t.startLineNumber,i)}t.prototype.linesEquals=function(t){if(!this.scrollEquals(t))return!1;var n=this._renderedLines._get().lines;for(var i=0,r=n.length;i<r;i++)if(n[i].dy===-1)return!1;return!0};t.prototype.scrollEquals=function(t){return this.renderedLayout.startLineNumber===t.startLineNumber&&this.renderedLayout.endLineNumber===t.endLineNumber};t.prototype._get=function(){var t=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:t.rendLineNumberStart,lines:t.lines}};t.prototype.onLinesChanged=function(t,n){return this._renderedLines.onLinesChanged(t,n)};t.prototype.onLinesDeleted=function(t,n){this._renderedLines.onLinesDeleted(t,n)};t.prototype.onLinesInserted=function(t,n){this._renderedLines.onLinesInserted(t,n)};t.prototype.onTokensChanged=function(t){return this._renderedLines.onTokensChanged(t)};return t}();var cD=function(){function t(n,i,r,e){this._backgroundFillData=t._createBackgroundFillData(i,r,e),this._buffers=[n.createImageData(i,r),n.createImageData(i,r)],this._lastUsedBuffer=0}t.prototype.getBuffer=function(){this._lastUsedBuffer=1-this._lastUsedBuffer;var t=this._buffers[this._lastUsedBuffer];return t.data.set(this._backgroundFillData),t};t._createBackgroundFillData=function(t,n,i){var r=i.r,e=i.g,o=i.b,s=i.a,u=new Uint8ClampedArray(t*n*4);var a=0;for(var h=0;h<n;h++)for(var c=0;c<t;c++)u[a]=r,u[a+1]=e,u[a+2]=o,u[a+3]=s,a+=4;return u};return t}();var fD=function(){function t(t,n){this.samplingRatio=t,this.minimapLines=n}t.compute=function(n,i,r){if(n.renderMinimap===0||!n.isSampling)return[null,[]];var e=Mn.computeContainedMinimapLineCount({viewLineCount:i,scrollBeyondLastLine:n.scrollBeyondLastLine,paddingTop:n.paddingTop,paddingBottom:n.paddingBottom,height:n.editorHeight,lineHeight:n.lineHeight,pixelRatio:n.pixelRatio}).minimapLineCount,o=i/e,s=o/2;if(!r||r.minimapLines.length===0){var u=[];if(u[0]=1,e>1){for(var a=0,h=e-1;a<h;a++)u[a]=Math.round(a*o+s);u[e-1]=i}return[new t(o,u),[]]}var c=r.minimapLines,f=c.length,l=[];var v=0,d=0,g=1,p=[],w=null;for(var u=0;u<e;u++){var a=Math.max(g,Math.round(u*o)),h=Math.max(a,Math.round((u+1)*o));for(;v<f&&c[v]<a;){if(p.length<10){var m=v+1+d;w&&w.type==="deleted"&&w._oldIndex===v-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:v,deleteFromLineNumber:m,deleteToLineNumber:m},p.push(w)),d--}v++}var b=void 0;if(v<f&&c[v]<=h)b=c[v],v++;else if(b=u===0?1:u+1===e?i:Math.round(u*o+s),p.length<10){var m=v+1+d;w&&w.type==="inserted"&&w._i===u-1?w.insertToLineNumber++:(w={type:"inserted",_i:u,insertFromLineNumber:m,insertToLineNumber:m},p.push(w)),d++}l[u]=b,g=b}if(p.length<10)for(;v<f;){var u=v+1+d;w&&w.type==="deleted"&&w._oldIndex===v-1?w.deleteToLineNumber++:(w={type:"deleted",_oldIndex:v,deleteFromLineNumber:u,deleteToLineNumber:u},p.push(w)),d--,v++}else p=[{type:"flush"}];return[new t(o,l),p]};t.prototype.modelLineToMinimapLine=function(t){return Math.min(this.minimapLines.length,Math.max(1,Math.round(t/this.samplingRatio)))};t.prototype.modelLineRangeToMinimapLineRange=function(t,n){var i=this.modelLineToMinimapLine(t)-1;for(;i>0&&this.minimapLines[i-1]>=t;)i--;var r=this.modelLineToMinimapLine(n)-1;for(;r+1<this.minimapLines.length&&this.minimapLines[r+1]<=n;)r++;if(i===r){var e=this.minimapLines[i];if(e<t||e>n)return null}return[i+1,r+1]};t.prototype.decorationLineRangeToMinimapLineRange=function(t,n){var i=this.modelLineToMinimapLine(t),r=this.modelLineToMinimapLine(n);return t!==n&&r===i&&(r===this.minimapLines.length?i>1&&i--:r++),[i,r]};t.prototype.onLinesDeleted=function(t){var n=t.toLineNumber-t.fromLineNumber+1;var i=this.minimapLines.length,r=0;for(var e=this.minimapLines.length-1;e>=0&&!(this.minimapLines[e]<t.fromLineNumber);e--)this.minimapLines[e]<=t.toLineNumber?(this.minimapLines[e]=Math.max(1,t.fromLineNumber-1),i=Math.min(i,e),r=Math.max(r,e)):this.minimapLines[e]-=n;return[i,r]};t.prototype.onLinesInserted=function(t){var n=t.toLineNumber-t.fromLineNumber+1;for(var i=this.minimapLines.length-1;i>=0&&!(this.minimapLines[i]<t.fromLineNumber);i--)this.minimapLines[i]+=n};return t}();var lD=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._sectionHeaderCache=new ud(10,1.5),i.tokensColorTracker=YS.getInstance(),i._selections=[],i._minimapSelections=null,i.options=new sD(i._context.configuration,i._context.theme,i.tokensColorTracker);var r=fD.compute(i.options,i._context.viewModel.getLineCount(),null)[0];i._samplingState=r,i._shouldCheckSampling=!1,i._actual=new vD(n.theme,i);return i}n.prototype.dispose=function(){this._actual.dispose(),t.prototype.dispose.call(this)};n.prototype.getDomNode=function(){return this._actual.getDomNode()};n.prototype._onOptionsMaybeChanged=function(){var t=new sD(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(t)&&(this.options=t,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)};n.prototype.onConfigurationChanged=function(t){return this._onOptionsMaybeChanged()};n.prototype.onCursorStateChanged=function(t){return this._selections=t.selections,this._minimapSelections=null,this._actual.onSelectionChanged()};n.prototype.onDecorationsChanged=function(t){return!!t.affectsMinimap&&this._actual.onDecorationsChanged()};n.prototype.onFlushed=function(t){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()};n.prototype.onLinesChanged=function(t){if(this._samplingState){var n=this._samplingState.modelLineRangeToMinimapLineRange(t.fromLineNumber,t.fromLineNumber+t.count-1);return!!n&&this._actual.onLinesChanged(n[0],n[1]-n[0]+1)}return this._actual.onLinesChanged(t.fromLineNumber,t.count)};n.prototype.onLinesDeleted=function(t){if(this._samplingState){var n=this._samplingState.onLinesDeleted(t),i=n[0],r=n[1];return i<=r&&this._actual.onLinesChanged(i+1,r-i+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(t.fromLineNumber,t.toLineNumber)};n.prototype.onLinesInserted=function(t){return this._samplingState?(this._samplingState.onLinesInserted(t),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(t.fromLineNumber,t.toLineNumber)};n.prototype.onScrollChanged=function(t){return this._actual.onScrollChanged()};n.prototype.onThemeChanged=function(t){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0};n.prototype.onTokensChanged=function(t){if(this._samplingState){var n=[];for(var i=0,r=t.ranges;i<r.length;i++){var e=r[i];var o=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.toLineNumber);o&&n.push({fromLineNumber:o[0],toLineNumber:o[1]})}return!!n.length&&this._actual.onTokensChanged(n)}return this._actual.onTokensChanged(t.ranges)};n.prototype.onTokensColorsChanged=function(t){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()};n.prototype.onZonesChanged=function(t){return this._actual.onZonesChanged()};n.prototype.prepareRender=function(t){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())};n.prototype.render=function(t){var n=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber;this._samplingState&&(n=this._samplingState.modelLineToMinimapLine(n),i=this._samplingState.modelLineToMinimapLine(i));var r={viewportContainsWhitespaceGaps:t.viewportData.whitespaceViewportData.length>0,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,viewportStartLineNumber:n,viewportEndLineNumber:i,viewportStartLineNumberVerticalOffset:t.getVerticalOffsetForLineNumber(n),scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight};this._actual.render(r)};n.prototype._recreateLineSampling=function(){this._minimapSelections=null;var t=!!this._samplingState,n=fD.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState),i=n[0],r=n[1];if(this._samplingState=i,t&&this._samplingState)for(var e=0,o=r;e<o.length;e++){var s=o[e];switch(s.type){case"deleted":this._actual.onLinesDeleted(s.deleteFromLineNumber,s.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(s.insertFromLineNumber,s.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}};n.prototype.getLineCount=function(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()};n.prototype.getRealLineCount=function(){return this._context.viewModel.getLineCount()};n.prototype.getLineContent=function(t){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[t-1]):this._context.viewModel.getLineContent(t)};n.prototype.getLineMaxColumn=function(t){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[t-1]):this._context.viewModel.getLineMaxColumn(t)};n.prototype.getMinimapLinesRenderingData=function(t,n,i){if(this._samplingState){var r=[];for(var e=0,o=n-t+1;e<o;e++)i[e]?r[e]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[t+e-1]):r[e]=null;return r}return this._context.viewModel.getMinimapLinesRenderingData(t,n,i).data};n.prototype.getSelections=function(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(var t=0,n=this._selections;t<n.length;t++){var i=n[t];var r=this._samplingState.decorationLineRangeToMinimapLineRange(i.startLineNumber,i.endLineNumber),e=r[0],o=r[1];this._minimapSelections.push(new Br(e,i.startColumn,o,i.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections};n.prototype.getMinimapDecorationsInViewport=function(t,n){var i=this._getMinimapDecorationsInViewport(t,n).filter((function(t){var n;return!(!((n=t.options.minimap)===null||n===void 0)&&n.sectionHeaderStyle)}));if(this._samplingState){var r=[];for(var e=0,o=i;e<o.length;e++){var s=o[e];if(!s.options.minimap)continue;var u=s.range,a=this._samplingState.modelLineToMinimapLine(u.startLineNumber),h=this._samplingState.modelLineToMinimapLine(u.endLineNumber);r.push(new zp(new Ir(a,u.startColumn,h,u.endColumn),s.options))}return r}return i};n.prototype.getSectionHeaderDecorationsInViewport=function(t,n){var i=this.options.minimapLineHeight,r=this.options.sectionHeaderFontSize/i;return t=Math.floor(Math.max(1,t-r)),this._getMinimapDecorationsInViewport(t,n).filter((function(t){var n;return!!(!((n=t.options.minimap)===null||n===void 0)&&n.sectionHeaderStyle)}))};n.prototype._getMinimapDecorationsInViewport=function(t,n){var i;if(this._samplingState){var r=this._samplingState.minimapLines[t-1],e=this._samplingState.minimapLines[n-1];i=new Ir(r,1,e,this._context.viewModel.getLineMaxColumn(e))}else i=new Ir(t,1,n,this._context.viewModel.getLineMaxColumn(n));return this._context.viewModel.getMinimapDecorationsInRange(i)};n.prototype.getSectionHeaderText=function(t,n){var i;var r=(i=t.options.minimap)===null||i===void 0?void 0:i.sectionHeaderText;if(!r)return null;var e=this._sectionHeaderCache.get(r);if(e)return e;var o=n(r);return this._sectionHeaderCache.set(r,o),o};n.prototype.getOptions=function(){return this._context.viewModel.model.getOptions()};n.prototype.revealLineNumber=function(t){this._samplingState&&(t=this._samplingState.minimapLines[t-1]),this._context.viewModel.revealRange("mouse",!1,new Ir(t,1,t,1),1,0)};n.prototype.setScrollTop=function(t){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:t},1)};return n}(v_);var vD=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._renderDecorations=!1,r._gestureInProgress=!1,r._theme=n,r._model=i,r._lastRenderData=null,r._buffers=null,r._selectionColor=r._theme.getColor(kb),r._domNode=Nh(document.createElement("div")),d_.write(r._domNode,9),r._domNode.setClassName(r._getMinimapDomNodeClassName()),r._domNode.setPosition("absolute"),r._domNode.setAttribute("role","presentation"),r._domNode.setAttribute("aria-hidden","true"),r._shadow=Nh(document.createElement("div")),r._shadow.setClassName("minimap-shadow-hidden"),r._domNode.appendChild(r._shadow),r._canvas=Nh(document.createElement("canvas")),r._canvas.setPosition("absolute"),r._canvas.setLeft(0),r._domNode.appendChild(r._canvas),r._decorationsCanvas=Nh(document.createElement("canvas")),r._decorationsCanvas.setPosition("absolute"),r._decorationsCanvas.setClassName("minimap-decorations-layer"),r._decorationsCanvas.setLeft(0),r._domNode.appendChild(r._decorationsCanvas),r._slider=Nh(document.createElement("div")),r._slider.setPosition("absolute"),r._slider.setClassName("minimap-slider"),r._slider.setLayerHinting(!0),r._slider.setContain("strict"),r._domNode.appendChild(r._slider),r._sliderHorizontal=Nh(document.createElement("div")),r._sliderHorizontal.setPosition("absolute"),r._sliderHorizontal.setClassName("minimap-slider-horizontal"),r._slider.appendChild(r._sliderHorizontal),r._applyLayout(),r._pointerDownListener=ya(r._domNode.domNode,ah.POINTER_DOWN,(function(t){if(t.preventDefault(),r._model.options.renderMinimap===0||!r._lastRenderData)return;if(r._model.options.size!=="proportional"){if(t.button===0&&r._lastRenderData){var n=ja(r._slider.domNode),i=n.top+n.height/2;r._startSliderDragging(t,i,r._lastRenderData.renderedLayout)}return}var e=r._model.options.minimapLineHeight,o=r._model.options.canvasInnerHeight/r._model.options.canvasOuterHeight*t.offsetY;var s=Math.floor(o/e)+r._lastRenderData.renderedLayout.startLineNumber-r._lastRenderData.renderedLayout.topPaddingLineCount;s=Math.min(s,r._model.getLineCount()),r._model.revealLineNumber(s)})),r._sliderPointerMoveMonitor=new Kw,r._sliderPointerDownListener=ya(r._slider.domNode,ah.POINTER_DOWN,(function(t){t.preventDefault(),t.stopPropagation(),t.button===0&&r._lastRenderData&&r._startSliderDragging(t,t.pageY,r._lastRenderData.renderedLayout)})),r._gestureDisposable=nk.addTarget(r._domNode.domNode),r._sliderTouchStartListener=ma(r._domNode.domNode,X_.Start,(function(t){t.preventDefault(),t.stopPropagation(),r._lastRenderData&&(r._slider.toggleClassName("active",!0),r._gestureInProgress=!0,r.scrollDueToTouchEvent(t))}),{passive:!1}),r._sliderTouchMoveListener=ma(r._domNode.domNode,X_.Change,(function(t){t.preventDefault(),t.stopPropagation(),r._lastRenderData&&r._gestureInProgress&&r.scrollDueToTouchEvent(t)}),{passive:!1}),r._sliderTouchEndListener=ya(r._domNode.domNode,X_.End,(function(t){t.preventDefault(),t.stopPropagation(),r._gestureInProgress=!1,r._slider.toggleClassName("active",!1)}));return r}n.prototype._startSliderDragging=function(t,n,i){var r=this;if(!(t.target&&t.target instanceof Element))return;var e=t.pageX;this._slider.toggleClassName("active",!0);var o=function(t,o){var s=ja(r._domNode.domNode),u=Math.min(Math.abs(o-e),Math.abs(o-s.left),Math.abs(o-s.left-s.width));if(Mt&&u>140)return void r._model.setScrollTop(i.scrollTop);var a=t-n;r._model.setScrollTop(i.getDesiredScrollTopFromDelta(a))};t.pageY!==n&&o(t.pageY,e),this._sliderPointerMoveMonitor.startMonitoring(t.target,t.pointerId,t.buttons,(function(t){return o(t.pageY,t.pageX)}),(function(){r._slider.toggleClassName("active",!1)}))};n.prototype.scrollDueToTouchEvent=function(t){var n=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(t.pageY-n);this._model.setScrollTop(i)};n.prototype.dispose=function(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),t.prototype.dispose.call(this)};n.prototype._getMinimapDomNodeClassName=function(){var t=["minimap"];return this._model.options.showSlider==="always"?t.push("slider-always"):t.push("slider-mouseover"),this._model.options.autohide&&t.push("autohide"),t.join(" ")};n.prototype.getDomNode=function(){return this._domNode};n.prototype._applyLayout=function(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)};n.prototype._getBuffer=function(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new cD(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null};n.prototype.onDidChangeOptions=function(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())};n.prototype.onSelectionChanged=function(){return this._renderDecorations=!0,!0};n.prototype.onDecorationsChanged=function(){return this._renderDecorations=!0,!0};n.prototype.onFlushed=function(){return this._lastRenderData=null,!0};n.prototype.onLinesChanged=function(t,n){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(t,n)};n.prototype.onLinesDeleted=function(t,n){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesDeleted(t,n),!0};n.prototype.onLinesInserted=function(t,n){var i;return(i=this._lastRenderData)===null||i===void 0||i.onLinesInserted(t,n),!0};n.prototype.onScrollChanged=function(){return this._renderDecorations=!0,!0};n.prototype.onThemeChanged=function(){return this._selectionColor=this._theme.getColor(kb),this._renderDecorations=!0,!0};n.prototype.onTokensChanged=function(t){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(t)};n.prototype.onTokensColorsChanged=function(){return this._lastRenderData=null,this._buffers=null,!0};n.prototype.onZonesChanged=function(){return this._lastRenderData=null,!0};n.prototype.render=function(t){if(this._model.options.renderMinimap===0)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);t.scrollLeft+t.viewportWidth>=t.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");var n=uD.create(this._model.options,t.viewportStartLineNumber,t.viewportEndLineNumber,t.viewportStartLineNumberVerticalOffset,t.viewportHeight,t.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),t.scrollTop,t.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)};n.prototype.renderDecorations=function(t){if(this._renderDecorations){this._renderDecorations=!1;var n=this._model.getSelections();n.sort(Ir.compareRangesUsingStarts);var i=this._model.getMinimapDecorationsInViewport(t.startLineNumber,t.endLineNumber);i.sort((function(t,n){return(t.options.zIndex||0)-(n.options.zIndex||0)}));var r=this._model.options,e=r.canvasInnerWidth,o=r.canvasInnerHeight,s=this._model.options.minimapLineHeight,u=this._model.options.minimapCharWidth,a=this._model.getOptions().tabSize,h=this._decorationsCanvas.domNode.getContext("2d");h.clearRect(0,0,e,o);var c=new dD(t.startLineNumber,t.endLineNumber,!1);this._renderSelectionLineHighlights(h,n,c,t,s),this._renderDecorationsLineHighlights(h,i,c,t,s);var f=new dD(t.startLineNumber,t.endLineNumber,null);this._renderSelectionsHighlights(h,n,f,t,s,a,u,e),this._renderDecorationsHighlights(h,i,f,t,s,a,u,e),this._renderSectionHeaders(t)}};n.prototype._renderSelectionLineHighlights=function(t,n,i,r,e){if(!this._selectionColor||this._selectionColor.isTransparent())return;t.fillStyle=this._selectionColor.transparent(.5).toString();var o=0,s=0;for(var u=0,a=n;u<a.length;u++){var h=a[u];var c=r.intersectWithViewport(h);if(!c)continue;var f=c[0],l=c[1];for(var v=f;v<=l;v++)i.set(v,!0);var d=r.getYForLineNumber(f,e),g=r.getYForLineNumber(l,e);s>=d||(s>o&&t.fillRect(8,o,t.canvas.width,s-o),o=d),s=g}s>o&&t.fillRect(8,o,t.canvas.width,s-o)};n.prototype._renderDecorationsLineHighlights=function(t,n,i,r,e){var o=new Map;for(var s=n.length-1;s>=0;s--){var u=n[s],a=u.options.minimap;if(!a||a.position!==1)continue;var h=r.intersectWithViewport(u.range);if(!h)continue;var c=h[0],f=h[1],l=a.getColor(this._theme.value);if(!l||l.isTransparent())continue;var v=o.get(l.toString());v||(v=l.transparent(.5).toString(),o.set(l.toString(),v)),t.fillStyle=v;for(var d=c;d<=f;d++){if(i.has(d))continue;i.set(d,!0);var g=r.getYForLineNumber(c,e);t.fillRect(8,g,t.canvas.width,e)}}};n.prototype._renderSelectionsHighlights=function(t,n,i,r,e,o,s,u){if(this._selectionColor&&!this._selectionColor.isTransparent())for(var a=0,h=n;a<h.length;a++){var c=h[a];var f=r.intersectWithViewport(c);if(!f)continue;var l=f[0],v=f[1];for(var d=l;d<=v;d++)this.renderDecorationOnLine(t,i,c,this._selectionColor,r,d,e,e,o,s,u)}};n.prototype._renderDecorationsHighlights=function(t,n,i,r,e,o,s,u){for(var a=0,h=n;a<h.length;a++){var c=h[a];var f=c.options.minimap;if(!f)continue;var l=r.intersectWithViewport(c.range);if(!l)continue;var v=l[0],d=l[1],g=f.getColor(this._theme.value);if(g&&!g.isTransparent())for(var p=v;p<=d;p++)switch(f.position){case 1:this.renderDecorationOnLine(t,i,c.range,g,r,p,e,e,o,s,u);continue;case 2:{var w=r.getYForLineNumber(p,e);this.renderDecoration(t,g,2,w,2,e);continue}}}};n.prototype.renderDecorationOnLine=function(t,n,i,r,e,o,s,u,a,h,c){var f=e.getYForLineNumber(o,u);if(f+s<0||f>this._model.options.canvasInnerHeight)return;var l=i.startLineNumber,v=i.endLineNumber,d=l===o?i.startColumn:1,g=v===o?i.endColumn:this._model.getLineMaxColumn(o),p=this.getXOffsetForPosition(n,o,d,a,h,c),w=this.getXOffsetForPosition(n,o,g,a,h,c);this.renderDecoration(t,r,p,f,w-p,s)};n.prototype.getXOffsetForPosition=function(t,n,i,r,e,o){if(i===1)return 8;if((i-1)*e>=o)return o;var s=t.get(n);if(!s){var u=this._model.getLineContent(n);s=[8];var a=8;for(var h=1;h<u.length+1;h++){var c=u.charCodeAt(h-1),f=a+(c===9?r*e:zo(c)?2*e:e);if(f>=o){s[h]=o;break}s[h]=f,a=f}t.set(n,s)}return i-1<s.length?s[i-1]:o};n.prototype.renderDecoration=function(t,n,i,r,e,o){t.fillStyle=n&&n.toString()||"",t.fillRect(i,r,e,o)};n.prototype._renderSectionHeaders=function(t){var i;var r=this._model.options.minimapLineHeight,e=this._model.options.sectionHeaderFontSize,o=1.5*e,s=this._model.options.canvasInnerWidth,u=this._model.options.backgroundColor,a="rgb(".concat(u.r," ").concat(u.g," ").concat(u.b," / .7)"),h=this._model.options.sectionHeaderFontColor,c="rgb(".concat(h.r," ").concat(h.g," ").concat(h.b,")"),f=c,l=this._decorationsCanvas.domNode.getContext("2d");l.font=e+"px "+this._model.options.sectionHeaderFontFamily,l.strokeStyle=f,l.lineWidth=.2;var v=this._model.getSectionHeaderDecorationsInViewport(t.startLineNumber,t.endLineNumber);v.sort((function(t,n){return t.range.startLineNumber-n.range.startLineNumber}));var d=n._fitSectionHeader.bind(null,l,s-8);for(var g=0,p=v;g<p.length;g++){var w=p[g];var m=t.getYForLineNumber(w.range.startLineNumber,r)+e,b=m-e,y=b+2,_=this._model.getSectionHeaderText(w,d);n._renderSectionLabel(l,_,((i=w.options.minimap)===null||i===void 0?void 0:i.sectionHeaderStyle)===2,a,c,s,b,o,m,y)}};n._fitSectionHeader=function(t,n,i){if(!i)return i;var r=t.measureText(i).width,e=t.measureText("…").width;if(r<=n||r<=e)return i;var o=i.length,s=r/i.length,u=Math.floor((n-e)/s)-1;var a=Math.ceil(u/2);for(;a>0&&/\s/.test(i[a-1]);)--a;return i.substring(0,a)+"…"+i.substring(o-(u-a))};n._renderSectionLabel=function(t,n,i,r,e,o,s,u,a,h){n&&(t.fillStyle=r,t.fillRect(0,s,o,u),t.fillStyle=e,t.fillText(n,8,a)),i&&(t.beginPath(),t.moveTo(0,h),t.lineTo(o,h),t.closePath(),t.stroke())};n.prototype.renderLines=function(t){var i=t.startLineNumber,r=t.endLineNumber,e=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(t)){var o=this._lastRenderData._get();return new hD(t,o.imageData,o.lines)}var s=this._getBuffer();if(!s)return null;var u=n._renderUntouchedLines(s,t.topPaddingLineCount,i,r,e,this._lastRenderData),a=u[0],h=u[1],c=u[2],f=this._model.getMinimapLinesRenderingData(i,r,c),l=this._model.getOptions().tabSize,v=this._model.options.defaultBackgroundColor,d=this._model.options.backgroundColor,g=this._model.options.foregroundAlpha,p=this._model.tokensColorTracker,w=p.backgroundIsLight(),m=this._model.options.renderMinimap,b=this._model.options.charRenderer(),y=this._model.options.fontScale,_=this._model.options.minimapCharWidth,k=(m===1?2:3)*y,x=e>k?Math.floor((e-k)/2):0,C=d.a/255,S=new QS(Math.round((d.r-v.r)*C+v.r),Math.round((d.g-v.g)*C+v.g),Math.round((d.b-v.b)*C+v.b),255);var D=t.topPaddingLineCount*e;var A=[];for(var o=0,O=r-i+1;o<O;o++)c[o]&&n._renderLine(s,S,d.a,w,m,_,p,g,b,D,x,l,f[o],y,e),A[o]=new aD(D),D+=e;var E=a===-1?0:a,M=(h===-1?s.height:h)-E;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,E,s.width,M),new hD(t,s,A)};n._renderUntouchedLines=function(t,n,i,r,e,o){var s=[];if(!o){for(var u=0,a=r-i+1;u<a;u++)s[u]=!0;return[-1,-1,s]}var h=o._get(),c=h.imageData.data,f=h.rendLineNumberStart,l=h.lines,v=l.length,d=t.width,g=t.data,p=(r-i+1)*e*d*4;var w=-1,m=-1,b=-1,y=-1,_=-1,k=-1,x=n*e;for(var u=i;u<=r;u++){var a=u-i,C=u-f,S=C>=0&&C<v?l[C].dy:-1;if(S===-1){s[a]=!0,x+=e;continue}var D=S*d*4,A=(S+e)*d*4,O=x*d*4,E=(x+e)*d*4;y===D&&k===O?(y=A,k=E):(b!==-1&&(g.set(c.subarray(b,y),_),w===-1&&b===0&&b===_&&(w=y),m===-1&&y===p&&b===_&&(m=b)),b=D,y=A,_=O,k=E),s[a]=!1,x+=e}return b!==-1&&(g.set(c.subarray(b,y),_),w===-1&&b===0&&b===_&&(w=y),m===-1&&y===p&&b===_&&(m=b)),[w===-1?-1:w/(4*d),m===-1?-1:m/(4*d),s]};n._renderLine=function(t,n,i,r,e,o,s,u,a,h,c,f,l,v,d){var g=l.content,p=l.tokens,w=t.width-o,m=d===1;var b=8,y=0,_=0;for(var k=0,x=p.getCount();k<x;k++){var C=p.getEndOffset(k),S=p.getForeground(k),D=s.getColor(S);for(;y<C;y++){if(b>w)return;var A=g.charCodeAt(y);if(A===9){var O=f-(y+_)%f;_+=O-1,b+=O*o}else if(A===32)b+=o;else{var O=zo(A)?2:1;for(var E=0;E<O;E++)if(e===2?a.blockRenderChar(t,b,h+c,D,u,n,i,m):a.renderChar(t,b,h+c,A,D,u,n,i,v,r,m),b+=o,b>w)return}}}};return n}(ci);var dD=function(){function t(t,n,i){this._startLineNumber=t,this._endLineNumber=n,this._defaultValue=i,this._values=[];for(var r=0,e=this._endLineNumber-this._startLineNumber+1;r<e;r++)this._values[r]=i}t.prototype.has=function(t){return this.get(t)!==this._defaultValue};t.prototype.set=function(t,n){t<this._startLineNumber||t>this._endLineNumber||(this._values[t-this._startLineNumber]=n)};t.prototype.get=function(t){return t<this._startLineNumber||t>this._endLineNumber?this._defaultValue:this._values[t-this._startLineNumber]};return t}();var gD=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n)||this,r._viewDomNode=i;var e=r._context.configuration.options.get(145);r._widgets={},r._verticalScrollbarWidth=e.verticalScrollbarWidth,r._minimapWidth=e.minimap.minimapWidth,r._horizontalScrollbarHeight=e.horizontalScrollbarHeight,r._editorHeight=e.height,r._editorWidth=e.width,r._viewDomNodeRect={top:0,left:0,width:0,height:0},r._domNode=Nh(document.createElement("div")),d_.write(r._domNode,4),r._domNode.setClassName("overlayWidgets"),r.overflowingOverlayWidgetsDomNode=Nh(document.createElement("div")),d_.write(r.overflowingOverlayWidgetsDomNode,5),r.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets");return r}n.prototype.dispose=function(){t.prototype.dispose.call(this),this._widgets={}};n.prototype.getDomNode=function(){return this._domNode};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options.get(145);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0};n.prototype.addWidget=function(t){var n=Nh(t.getDomNode());this._widgets[t.getId()]={widget:t,preference:null,domNode:n},n.setPosition("absolute"),n.setAttribute("widgetId",t.getId()),t.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(n):this._domNode.appendChild(n),this.setShouldRender(),this._updateMaxMinWidth()};n.prototype.setWidgetPosition=function(t,n){var i=this._widgets[t.getId()];return i.preference===n?(this._updateMaxMinWidth(),!1):(i.preference=n,this.setShouldRender(),this._updateMaxMinWidth(),!0)};n.prototype.removeWidget=function(t){var n=t.getId();if(this._widgets.hasOwnProperty(n)){var i=this._widgets[n].domNode.domNode;delete this._widgets[n],i.remove(),this.setShouldRender(),this._updateMaxMinWidth()}};n.prototype._updateMaxMinWidth=function(){var t,n;var i=0;var r=Object.keys(this._widgets);for(var e=0,o=r.length;e<o;e++){var s=r[e],u=(n=(t=this._widgets[s].widget).getMinContentWidthInPx)===null||n===void 0?void 0:n.call(t);u!==void 0&&(i=Math.max(i,u))}this._context.viewLayout.setOverlayWidgetsMinWidth(i)};n.prototype._renderWidget=function(t){var n=t.domNode;if(t.preference!==null)if(t.preference===0)n.setTop(0),n.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(t.preference===1){var i=n.domNode.clientHeight;n.setTop(this._editorHeight-i-2*this._horizontalScrollbarHeight),n.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else if(t.preference===2)n.setTop(0),n.domNode.style.right="50%";else{var r=t.preference,i=r.top,e=r.left;if(this._context.configuration.options.get(42)&&t.widget.allowEditorOverflow){var o=this._viewDomNodeRect;n.setTop(i+o.top),n.setLeft(e+o.left),n.setPosition("fixed")}else n.setTop(i),n.setLeft(e),n.setPosition("absolute")}else n.setTop("")};n.prototype.prepareRender=function(t){this._viewDomNodeRect=ja(this._viewDomNode.domNode)};n.prototype.render=function(t){this._domNode.setWidth(this._editorWidth);var n=Object.keys(this._widgets);for(var i=0,r=n.length;i<r;i++){var e=n[i];this._renderWidget(this._widgets[e])}};return n}(v_);var pD=function(){function t(t,n){var i=t.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(143),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);var r=n.getColor(_x);this.borderColor=r?r.toString():null,this.hideCursor=i.get(59);var e=n.getColor(Qk);this.cursorColorSingle=e?e.transparent(.7).toString():null;var o=n.getColor(Xk);this.cursorColorPrimary=o?o.transparent(.7).toString():null;var s=n.getColor(nx);this.cursorColorSecondary=s?s.transparent(.7).toString():null,this.themeType=n.type;var u=i.get(73),a=u.enabled,h=u.side,c=n.getColor(kx),f=oe.getDefaultBackground();this.backgroundColor=c||(a&&h==="right"?f:null);var l=i.get(145).overviewRuler;this.top=l.top,this.right=l.right,this.domWidth=l.width,this.domHeight=l.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);var v=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes),d=v[0],g=v[1];this.x=d,this.w=g}t.prototype._initLanes=function(t,n,i){var r=n-t;if(i>=3){var e=Math.floor(r/3),o=Math.floor(r/3),s=r-e-o,u=t+e;return[[0,t,u,t,t+e+s,t,u,t],[0,e,s,e+s,o,e+s+o,s+o,e+s+o]]}if(i===2){var e=Math.floor(r/2),o=r-e;return[[0,t,t,t,t+e,t,t,t],[0,e,e,e,o,e+o,e+o,e+o]]}return[[0,t,t,t,t,t,t,t],[0,r,r,r,r,r,r,r]]};t.prototype.equals=function(t){return this.lineHeight===t.lineHeight&&this.pixelRatio===t.pixelRatio&&this.overviewRulerLanes===t.overviewRulerLanes&&this.renderBorder===t.renderBorder&&this.borderColor===t.borderColor&&this.hideCursor===t.hideCursor&&this.cursorColorSingle===t.cursorColorSingle&&this.cursorColorPrimary===t.cursorColorPrimary&&this.cursorColorSecondary===t.cursorColorSecondary&&this.themeType===t.themeType&&Ig.equals(this.backgroundColor,t.backgroundColor)&&this.top===t.top&&this.right===t.right&&this.domWidth===t.domWidth&&this.domHeight===t.domHeight&&this.canvasWidth===t.canvasWidth&&this.canvasHeight===t.canvasHeight};return t}();var wD=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._actualShouldRender=0,i._renderedDecorations=[],i._renderedCursorPositions=[],i._domNode=Nh(document.createElement("canvas")),i._domNode.setClassName("decorationsOverviewRuler"),i._domNode.setPosition("absolute"),i._domNode.setLayerHinting(!0),i._domNode.setContain("strict"),i._domNode.setAttribute("aria-hidden","true"),i._updateSettings(!1),i._tokensColorTrackerListener=oe.onDidChange((function(t){t.changedColorMap&&i._updateSettings(!0)})),i._cursorPositions=[{position:new Tr(1,1),color:i._settings.cursorColorSingle}];return i}n.prototype.dispose=function(){t.prototype.dispose.call(this),this._tokensColorTrackerListener.dispose()};n.prototype._updateSettings=function(t){var n=new pD(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(n))&&(this._settings=n,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,t&&this._render(),!0)};n.prototype._markRenderingIsNeeded=function(){return this._actualShouldRender=2,!0};n.prototype._markRenderingIsMaybeNeeded=function(){return this._actualShouldRender=1,!0};n.prototype.onConfigurationChanged=function(t){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()};n.prototype.onCursorStateChanged=function(t){this._cursorPositions=[];for(var n=0,i=t.selections.length;n<i;n++){var r=this._settings.cursorColorSingle;i>1&&(r=n===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:t.selections[n].getPosition(),color:r})}return this._cursorPositions.sort((function(t,n){return Tr.compare(t.position,n.position)})),this._markRenderingIsMaybeNeeded()};n.prototype.onDecorationsChanged=function(t){return!!t.affectsOverviewRuler&&this._markRenderingIsMaybeNeeded()};n.prototype.onFlushed=function(t){return this._markRenderingIsNeeded()};n.prototype.onScrollChanged=function(t){return!!t.scrollHeightChanged&&this._markRenderingIsNeeded()};n.prototype.onZonesChanged=function(t){return this._markRenderingIsNeeded()};n.prototype.onThemeChanged=function(t){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()};n.prototype.getDomNode=function(){return this._domNode.domNode};n.prototype.prepareRender=function(t){};n.prototype.render=function(t){this._render(),this._actualShouldRender=0};n.prototype._render=function(){var t=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0)return this._domNode.setBackgroundColor(t?Ig.Format.CSS.formatHexA(t):""),void this._domNode.setDisplay("none");var n=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(n.sort(Up.compareByRenderingProps),this._actualShouldRender!==1||Up.equalsArr(this._renderedDecorations,n)||(this._actualShouldRender=2),this._actualShouldRender!==1||v(this._renderedCursorPositions,this._cursorPositions,(function(t,n){return t.position.lineNumber===n.position.lineNumber&&t.color===n.color}))||(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=n,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");var i=this._settings.canvasWidth,r=this._settings.canvasHeight,e=this._settings.lineHeight,o=this._context.viewLayout,s=r/this._context.viewLayout.getScrollHeight(),u=6*this._settings.pixelRatio|0,a=u/2|0,h=this._domNode.domNode.getContext("2d");t?t.isOpaque()?(h.fillStyle=Ig.Format.CSS.formatHexA(t),h.fillRect(0,0,i,r)):(h.clearRect(0,0,i,r),h.fillStyle=Ig.Format.CSS.formatHexA(t),h.fillRect(0,0,i,r)):h.clearRect(0,0,i,r);var c=this._settings.x,f=this._settings.w;for(var l=0,d=n;l<d.length;l++){var g=d[l];var p=g.color,w=g.data;h.fillStyle=p;var m=0,b=0,y=0;for(var _=0,k=w.length/3;_<k;_++){var x=w[3*_],C=w[3*_+1],S=w[3*_+2];var D=o.getVerticalOffsetForLineNumber(C)*s|0,A=(o.getVerticalOffsetForLineNumber(S)+e)*s|0;if(A-D<u){var O=(D+A)/2|0;O<a?O=a:O+a>r&&(O=r-a),D=O-a,A=O+a}D>y+1||x!==m?(_!==0&&h.fillRect(c[m],b,f[m],y-b),m=x,b=D,y=A):A>y&&(y=A)}h.fillRect(c[m],b,f[m],y-b)}if(!this._settings.hideCursor){var g=2*this._settings.pixelRatio|0,p=g/2|0,w=this._settings.x[7],m=this._settings.w[7];var b=-100,y=-100,_=null;for(var k=0,x=this._cursorPositions.length;k<x;k++){var C=this._cursorPositions[k].color;if(!C)continue;var S=this._cursorPositions[k].position;var D=o.getVerticalOffsetForLineNumber(S.lineNumber)*s|0;D<p?D=p:D+p>r&&(D=r-p);var A=D-p,O=A+g;A>y+1||C!==_?(k!==0&&_&&h.fillRect(w,b,m,y-b),b=A,y=O):O>y&&(y=O),_=C,h.fillStyle=C}_&&h.fillRect(w,b,m,y-b)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,r),h.stroke(),h.moveTo(0,0),h.lineTo(i,0),h.stroke())};return n}(v_);var mD=function(){function t(t,n,i){this._colorZoneBrand=void 0,this.from=0|t,this.to=0|n,this.colorId=0|i}t.compare=function(t,n){return t.colorId===n.colorId?t.from===n.from?t.to-n.to:t.from-n.from:t.colorId-n.colorId};return t}();var bD=function(){function t(t,n,i,r){this._overviewRulerZoneBrand=void 0,this.startLineNumber=t,this.endLineNumber=n,this.heightInLines=i,this.color=r,this._colorZone=null}t.compare=function(t,n){return t.color===n.color?t.startLineNumber===n.startLineNumber?t.heightInLines===n.heightInLines?t.endLineNumber-n.endLineNumber:t.heightInLines-n.heightInLines:t.startLineNumber-n.startLineNumber:t.color<n.color?-1:1};t.prototype.setColorZone=function(t){this._colorZone=t};t.prototype.getColorZones=function(){return this._colorZone};return t}();var yD=function(){function t(t){this._getVerticalOffsetForLine=t,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}t.prototype.getId2Color=function(){return this._id2Color};t.prototype.setZones=function(t){this._zones=t,this._zones.sort(bD.compare)};t.prototype.setLineHeight=function(t){return this._lineHeight!==t&&(this._lineHeight=t,this._colorZonesInvalid=!0,!0)};t.prototype.setPixelRatio=function(t){this._pixelRatio=t,this._colorZonesInvalid=!0};t.prototype.getDOMWidth=function(){return this._domWidth};t.prototype.getCanvasWidth=function(){return this._domWidth*this._pixelRatio};t.prototype.setDOMWidth=function(t){return this._domWidth!==t&&(this._domWidth=t,this._colorZonesInvalid=!0,!0)};t.prototype.getDOMHeight=function(){return this._domHeight};t.prototype.getCanvasHeight=function(){return this._domHeight*this._pixelRatio};t.prototype.setDOMHeight=function(t){return this._domHeight!==t&&(this._domHeight=t,this._colorZonesInvalid=!0,!0)};t.prototype.getOuterHeight=function(){return this._outerHeight};t.prototype.setOuterHeight=function(t){return this._outerHeight!==t&&(this._outerHeight=t,this._colorZonesInvalid=!0,!0)};t.prototype.resolveColorZones=function(){var t=this._colorZonesInvalid,n=Math.floor(this._lineHeight),i=Math.floor(this.getCanvasHeight()),r=i/Math.floor(this._outerHeight),e=Math.floor(4*this._pixelRatio/2),o=[];for(var s=0,u=this._zones.length;s<u;s++){var a=this._zones[s];if(!t){var h=a.getColorZones();if(h){o.push(h);continue}}var c=this._getVerticalOffsetForLine(a.startLineNumber),f=a.heightInLines===0?this._getVerticalOffsetForLine(a.endLineNumber)+n:c+a.heightInLines*n,l=Math.floor(r*c),v=Math.floor(r*f);var d=Math.floor((l+v)/2),g=v-d;g<e&&(g=e),d-g<0&&(d=g),d+g>i&&(d=i-g);var p=a.color;var w=this._color2Id[p];w||(w=++this._lastAssignedId,this._color2Id[p]=w,this._id2Color[w]=p);var m=new mD(d-g,d+g,w);a.setColorZone(m),o.push(m)}return this._colorZonesInvalid=!1,o.sort(mD.compare),o};return t}();var _D=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._context=n;var e=r._context.configuration.options;r._domNode=Nh(document.createElement("canvas")),r._domNode.setClassName(i),r._domNode.setPosition("absolute"),r._domNode.setLayerHinting(!0),r._domNode.setContain("strict"),r._zoneManager=new yD((function(t){return r._context.viewLayout.getVerticalOffsetForLineNumber(t)})),r._zoneManager.setDOMWidth(0),r._zoneManager.setDOMHeight(0),r._zoneManager.setOuterHeight(r._context.viewLayout.getScrollHeight()),r._zoneManager.setLineHeight(e.get(67)),r._zoneManager.setPixelRatio(e.get(143)),r._context.addEventHandler(r);return r}n.prototype.dispose=function(){this._context.removeEventHandler(this),t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options;return t.hasChanged(67)&&(this._zoneManager.setLineHeight(n.get(67)),this._render()),t.hasChanged(143)&&(this._zoneManager.setPixelRatio(n.get(143)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0};n.prototype.onFlushed=function(t){return this._render(),!0};n.prototype.onScrollChanged=function(t){return t.scrollHeightChanged&&(this._zoneManager.setOuterHeight(t.scrollHeight),this._render()),!0};n.prototype.onZonesChanged=function(t){return this._render(),!0};n.prototype.getDomNode=function(){return this._domNode.domNode};n.prototype.setLayout=function(t){this._domNode.setTop(t.top),this._domNode.setRight(t.right);var n=!1;n=this._zoneManager.setDOMWidth(t.width)||n,n=this._zoneManager.setDOMHeight(t.height)||n,n&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())};n.prototype.setZones=function(t){this._zoneManager.setZones(t),this._render()};n.prototype._render=function(){if(this._zoneManager.getOuterHeight()===0)return!1;var t=this._zoneManager.getCanvasWidth(),n=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),r=this._zoneManager.getId2Color(),e=this._domNode.domNode.getContext("2d");return e.clearRect(0,0,t,n),i.length>0&&this._renderOneLane(e,i,r,t),!0};n.prototype._renderOneLane=function(t,n,i,r){var e=0,o=0,s=0;for(var u=0,a=n;u<a.length;u++){var h=a[u];var c=h.colorId,f=h.from,l=h.to;c!==e?(t.fillRect(0,o,r,s-o),e=c,t.fillStyle=i[e],o=f,s=l):s>=f?s=Math.max(s,l):(t.fillRect(0,o,r,s-o),o=f,s=l)}t.fillRect(0,o,r,s-o)};return n}(l_);var kD=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i.domNode=Nh(document.createElement("div")),i.domNode.setAttribute("role","presentation"),i.domNode.setAttribute("aria-hidden","true"),i.domNode.setClassName("view-rulers"),i._renderedRulers=[];var r=i._context.configuration.options;i._rulers=r.get(102),i._typicalHalfwidthCharacterWidth=r.get(50).typicalHalfwidthCharacterWidth;return i}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options;return this._rulers=n.get(102),this._typicalHalfwidthCharacterWidth=n.get(50).typicalHalfwidthCharacterWidth,!0};n.prototype.onScrollChanged=function(t){return t.scrollHeightChanged};n.prototype.prepareRender=function(t){};n.prototype._ensureRulersCount=function(){var t=this._renderedRulers.length,n=this._rulers.length;if(t===n)return;if(t<n){var i=this._context.viewModel.model.getOptions().tabSize,r=i;var e=n-t;for(;e>0;){var o=Nh(document.createElement("div"));o.setClassName("view-ruler"),o.setWidth(r),this.domNode.appendChild(o),this._renderedRulers.push(o),e--}return}var s=t-n;for(;s>0;){var i=this._renderedRulers.pop();this.domNode.removeChild(i),s--}};n.prototype.render=function(t){this._ensureRulersCount();for(var n=0,i=this._rulers.length;n<i;n++){var r=this._renderedRulers[n],e=this._rulers[n];r.setBoxShadow(e.color?"1px 0 0 0 ".concat(e.color," inset"):""),r.setHeight(Math.min(t.scrollHeight,1e6)),r.setLeft(e.column*this._typicalHalfwidthCharacterWidth)}};return n}(v_);var xD=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._scrollTop=0,i._width=0,i._updateWidth(),i._shouldShow=!1;var r=i._context.configuration.options.get(103);i._useShadows=r.useShadows,i._domNode=Nh(document.createElement("div")),i._domNode.setAttribute("role","presentation"),i._domNode.setAttribute("aria-hidden","true");return i}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype._updateShouldShow=function(){var t=this._useShadows&&this._scrollTop>0;return this._shouldShow!==t&&(this._shouldShow=t,!0)};n.prototype.getDomNode=function(){return this._domNode};n.prototype._updateWidth=function(){var t=this._context.configuration.options.get(145);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options.get(103);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0};n.prototype.onScrollChanged=function(t){return this._scrollTop=t.scrollTop,this._updateShouldShow()};n.prototype.prepareRender=function(t){};n.prototype.render=function(t){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")};return n}(v_);var CD=function(){function t(t){this.left=t.left,this.width=t.width,this.startStyle=null,this.endStyle=null}return t}();var SD=function(){function t(t,n){this.lineNumber=t,this.ranges=n}return t}();function DD(t){return new CD(t)}function AD(t){return new SD(t.lineNumber,t.ranges.map(DD))}var OD=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._previousFrameVisibleRangesWithStyle=[],i._context=n;var r=i._context.configuration.options;i._roundedSelection=r.get(101),i._typicalHalfwidthCharacterWidth=r.get(50).typicalHalfwidthCharacterWidth,i._selections=[],i._renderResult=null,i._context.addEventHandler(i);return i}n.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options;return this._roundedSelection=n.get(101),this._typicalHalfwidthCharacterWidth=n.get(50).typicalHalfwidthCharacterWidth,!0};n.prototype.onCursorStateChanged=function(t){return this._selections=t.selections.slice(0),!0};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype._visibleRangesHaveGaps=function(t){for(var n=0,i=t.length;n<i;n++)if(t[n].ranges.length>1)return!0;return!1};n.prototype._enrichVisibleRangesWithStyle=function(t,n,i){var r=this._typicalHalfwidthCharacterWidth/4;var e=null,o=null;if(i&&i.length>0&&n.length>0){var s=n[0].lineNumber;if(s===t.startLineNumber)for(var u=0;!e&&u<i.length;u++)i[u].lineNumber===s&&(e=i[u].ranges[0]);var a=n[n.length-1].lineNumber;if(a===t.endLineNumber)for(var u=i.length-1;!o&&u>=0;u--)i[u].lineNumber===a&&(o=i[u].ranges[0]);e&&!e.startStyle&&(e=null),o&&!o.startStyle&&(o=null)}for(var s=0,a=n.length;s<a;s++){var u=n[s].ranges[0],h=u.left,c=u.left+u.width,f={top:0,bottom:0},l={top:0,bottom:0};if(s>0){var v=n[s-1].ranges[0].left,d=n[s-1].ranges[0].left+n[s-1].ranges[0].width;ED(h-v)<r?f.top=2:h>v&&(f.top=1),ED(c-d)<r?l.top=2:v<c&&c<d&&(l.top=1)}else e&&(f.top=e.startStyle.top,l.top=e.endStyle.top);if(s+1<a){var v=n[s+1].ranges[0].left,d=n[s+1].ranges[0].left+n[s+1].ranges[0].width;ED(h-v)<r?f.bottom=2:v<h&&h<d&&(f.bottom=1),ED(c-d)<r?l.bottom=2:c<d&&(l.bottom=1)}else o&&(f.bottom=o.startStyle.bottom,l.bottom=o.endStyle.bottom);u.startStyle=f,u.endStyle=l}};n.prototype._getVisibleRangesWithStyle=function(t,n,i){var r=(n.linesVisibleRangesForRange(t,!0)||[]).map(AD);return!this._visibleRangesHaveGaps(r)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(n.visibleRange,r,i),r};n.prototype._createSelectionPiece=function(t,n,i,r,e){return'<div class="cslr '+i+'" style="top:'+t.toString()+"px;bottom:"+n.toString()+"px;left:"+r.toString()+"px;width:"+e.toString()+'px;"></div>'};n.prototype._actualRenderOneSelection=function(t,i,r,e){if(e.length===0)return;var o=!!e[0].ranges[0].startStyle,s=e[0].lineNumber,u=e[e.length-1].lineNumber;for(var a=0,h=e.length;a<h;a++){var c=e[a],f=c.lineNumber,l=f-i,v=r&&f===s?1:0,d=r&&f!==s&&f===u?1:0;var g="",p="";for(var w=0,m=c.ranges.length;w<m;w++){var b=c.ranges[w];if(o){var y=b.startStyle,_=b.endStyle;if(y.top===1||y.bottom===1){g+=this._createSelectionPiece(v,d,n.SELECTION_CLASS_NAME,b.left-n.ROUNDED_PIECE_WIDTH,n.ROUNDED_PIECE_WIDTH);var k=n.EDITOR_BACKGROUND_CLASS_NAME;y.top===1&&(k+=" "+n.SELECTION_TOP_RIGHT),y.bottom===1&&(k+=" "+n.SELECTION_BOTTOM_RIGHT),g+=this._createSelectionPiece(v,d,k,b.left-n.ROUNDED_PIECE_WIDTH,n.ROUNDED_PIECE_WIDTH)}if(_.top===1||_.bottom===1){g+=this._createSelectionPiece(v,d,n.SELECTION_CLASS_NAME,b.left+b.width,n.ROUNDED_PIECE_WIDTH);var k=n.EDITOR_BACKGROUND_CLASS_NAME;_.top===1&&(k+=" "+n.SELECTION_TOP_LEFT),_.bottom===1&&(k+=" "+n.SELECTION_BOTTOM_LEFT),g+=this._createSelectionPiece(v,d,k,b.left+b.width,n.ROUNDED_PIECE_WIDTH)}}var x=n.SELECTION_CLASS_NAME;if(o){var y=b.startStyle,_=b.endStyle;y.top===0&&(x+=" "+n.SELECTION_TOP_LEFT),y.bottom===0&&(x+=" "+n.SELECTION_BOTTOM_LEFT),_.top===0&&(x+=" "+n.SELECTION_TOP_RIGHT),_.bottom===0&&(x+=" "+n.SELECTION_BOTTOM_RIGHT)}p+=this._createSelectionPiece(v,d,x,b.left,b.width)}t[l][0]+=g,t[l][1]+=p}};n.prototype.prepareRender=function(t){var n=[],i=t.visibleRange.startLineNumber,r=t.visibleRange.endLineNumber;for(var e=i;e<=r;e++)n[e-i]=["",""];var o=[];for(var e=0,s=this._selections.length;e<s;e++){var u=this._selections[e];if(u.isEmpty()){o[e]=null;continue}var a=this._getVisibleRangesWithStyle(u,t,this._previousFrameVisibleRangesWithStyle[e]);o[e]=a,this._actualRenderOneSelection(n,i,this._selections.length>1,a)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=n.map((function(t){var n=t[0],i=t[1];return n+i}))};n.prototype.render=function(t,n){if(!this._renderResult)return"";var i=n-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]};return n}(Hk);function ED(t){return t<0?-t:t}OD.SELECTION_CLASS_NAME="selected-text",OD.SELECTION_TOP_LEFT="top-left-radius",OD.SELECTION_BOTTOM_LEFT="bottom-left-radius",OD.SELECTION_TOP_RIGHT="top-right-radius",OD.SELECTION_BOTTOM_RIGHT="bottom-right-radius",OD.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",OD.ROUNDED_PIECE_WIDTH=10,Gk((function(t,n){var i=t.getColor(jm);i&&!i.isTransparent()&&n.addRule(".monaco-editor .view-line span.inline-selected-text { color: ".concat(i,"; }"))}));var MD=function(){function t(t,n,i,r,e,o,s){this.top=t,this.left=n,this.paddingLeft=i,this.width=r,this.height=e,this.textContent=o,this.textContentClassName=s}return t}();var FD;(function(t){t[t.Single=0]="Single",t[t.MultiPrimary=1]="MultiPrimary",t[t.MultiSecondary=2]="MultiSecondary"})(FD||(FD={}));var LD=function(){function t(t,n){this._context=t;var i=this._context.configuration.options,r=i.get(50);this._cursorStyle=i.get(28),this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(i.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Nh(document.createElement("div")),this._domNode.setClassName("cursor ".concat(Zx)),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Ph(this._domNode,r),this._domNode.setDisplay("none"),this._position=new Tr(1,1),this._pluralityClass="",this.setPlurality(n),this._lastRenderedContent="",this._renderData=null}t.prototype.getDomNode=function(){return this._domNode};t.prototype.getPosition=function(){return this._position};t.prototype.setPlurality=function(t){switch(t){default:case FD.Single:this._pluralityClass="";break;case FD.MultiPrimary:this._pluralityClass="cursor-primary";break;case FD.MultiSecondary:this._pluralityClass="cursor-secondary"}};t.prototype.show=function(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)};t.prototype.hide=function(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)};t.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options,i=n.get(50);return this._cursorStyle=n.get(28),this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(n.get(31),this._typicalHalfwidthCharacterWidth),Ph(this._domNode,i),!0};t.prototype.onCursorPositionChanged=function(t,n){return this._domNode.domNode.style.transitionProperty=n?"none":"",this._position=t,!0};t.prototype._getGraphemeAwarePosition=function(){var t=this._position,n=t.lineNumber,i=t.column,r=this._context.viewModel.getLineContent(n),e=function(t,n){n>0&&Eo(t.charCodeAt(n))&&n--;var i=n+Ro(t,n);return[i-To(t,i),i]}(r,i-1),o=e[0],s=e[1];return[new Tr(n,o+1),r.substring(o,s)]};t.prototype._prepareRender=function(t){var n="",i="";var r=this._getGraphemeAwarePosition(),e=r[0],o=r[1];if(this._cursorStyle===Sn.Line||this._cursorStyle===Sn.LineThin){var s=t.visibleRangeForPosition(e);if(!s||s.outsideRenderedLine)return null;var u=sa(this._domNode.domNode);var a=void 0;this._cursorStyle===Sn.Line?(a=kh(u,this._lineCursorWidth>0?this._lineCursorWidth:2),a>2&&(n=o,i=this._getTokenClassName(e))):a=kh(u,1);var h=s.left,c=0;a>=2&&h>=1&&(c=1,h-=c);var f=t.getVerticalOffsetForLineNumber(e.lineNumber)-t.bigNumbersDelta;return new MD(f,h,c,a,this._lineHeight,n,i)}var l=t.linesVisibleRangesForRange(new Ir(e.lineNumber,e.column,e.lineNumber,e.column+o.length),!1);if(!l||l.length===0)return null;var v=l[0];if(v.outsideRenderedLine||v.ranges.length===0)return null;var d=v.ranges[0],g=o==="\t"||d.width<1?this._typicalHalfwidthCharacterWidth:d.width;this._cursorStyle===Sn.Block&&(n=o,i=this._getTokenClassName(e));var p=t.getVerticalOffsetForLineNumber(e.lineNumber)-t.bigNumbersDelta,w=this._lineHeight;return this._cursorStyle!==Sn.Underline&&this._cursorStyle!==Sn.UnderlineThin||(p+=this._lineHeight-2,w=2),new MD(p,d.left,0,g,w,n,i)};t.prototype._getTokenClassName=function(t){var n=this._context.viewModel.getViewLineData(t.lineNumber),i=n.tokens.findTokenIndexAtOffset(t.column-1);return n.tokens.getClassName(i)};t.prototype.prepareRender=function(t){this._renderData=this._prepareRender(t)};t.prototype.render=function(t){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName("cursor ".concat(this._pluralityClass," ").concat(Zx," ").concat(this._renderData.textContentClassName)),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)};return t}();var jD=function(t){__extends(n,t);function n(n){var i=t.call(this,n)||this;var r=i._context.configuration.options;i._readOnly=r.get(91),i._cursorBlinking=r.get(26),i._cursorStyle=r.get(28),i._cursorSmoothCaretAnimation=r.get(27),i._selectionIsEmpty=!0,i._isComposingInput=!1,i._isVisible=!1,i._primaryCursor=new LD(i._context,FD.Single),i._secondaryCursors=[],i._renderData=[],i._domNode=Nh(document.createElement("div")),i._domNode.setAttribute("role","presentation"),i._domNode.setAttribute("aria-hidden","true"),i._updateDomClassName(),i._domNode.appendChild(i._primaryCursor.getDomNode()),i._startCursorBlinkAnimation=new js,i._cursorFlatBlinkInterval=new Da,i._blinkingEnabled=!1,i._editorHasFocus=!1,i._updateBlinking();return i}n.prototype.dispose=function(){t.prototype.dispose.call(this),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()};n.prototype.getDomNode=function(){return this._domNode};n.prototype.onCompositionStart=function(t){return this._isComposingInput=!0,this._updateBlinking(),!0};n.prototype.onCompositionEnd=function(t){return this._isComposingInput=!1,this._updateBlinking(),!0};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options;this._readOnly=n.get(91),this._cursorBlinking=n.get(26),this._cursorStyle=n.get(28),this._cursorSmoothCaretAnimation=n.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(t);for(var i=0,r=this._secondaryCursors.length;i<r;i++)this._secondaryCursors[i].onConfigurationChanged(t);return!0};n.prototype._onCursorPositionChanged=function(t,n,i){var r=this._secondaryCursors.length!==n.length||this._cursorSmoothCaretAnimation==="explicit"&&i!==3;if(this._primaryCursor.setPlurality(n.length?FD.MultiPrimary:FD.Single),this._primaryCursor.onCursorPositionChanged(t,r),this._updateBlinking(),this._secondaryCursors.length<n.length){var e=n.length-this._secondaryCursors.length;for(var o=0;o<e;o++){var s=new LD(this._context,FD.MultiSecondary);this._domNode.domNode.insertBefore(s.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(s)}}else if(this._secondaryCursors.length>n.length){var e=this._secondaryCursors.length-n.length;for(var o=0;o<e;o++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(var e=0;e<n.length;e++)this._secondaryCursors[e].onCursorPositionChanged(n[e],r)};n.prototype.onCursorStateChanged=function(t){var n=[];for(var i=0,r=t.selections.length;i<r;i++)n[i]=t.selections[i].getPosition();this._onCursorPositionChanged(n[0],n.slice(1),t.reason);var e=t.selections[0].isEmpty();return this._selectionIsEmpty!==e&&(this._selectionIsEmpty=e,this._updateDomClassName()),!0};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onFocusChanged=function(t){return this._editorHasFocus=t.isFocused,this._updateBlinking(),!1};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return!0};n.prototype.onTokensChanged=function(t){var n=function(n){for(var i=0,r=t.ranges.length;i<r;i++)if(t.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=t.ranges[i].toLineNumber)return!0;return!1};if(n(this._primaryCursor.getPosition()))return!0;for(var i=0,r=this._secondaryCursors;i<r.length;i++){var e=r[i];if(n(e.getPosition()))return!0}return!1};n.prototype.onZonesChanged=function(t){return!0};n.prototype._getCursorBlinking=function(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0};n.prototype._updateBlinking=function(){var t=this;this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();var i=this._getCursorBlinking(),r=i===0,e=i===5;r?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),r||e||(i===1?this._cursorFlatBlinkInterval.cancelAndSet((function(){t._isVisible?t._hide():t._show()}),n.BLINK_INTERVAL,sa(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet((function(){t._blinkingEnabled=!0,t._updateDomClassName()}),n.BLINK_INTERVAL))};n.prototype._updateDomClassName=function(){this._domNode.setClassName(this._getClassName())};n.prototype._getClassName=function(){var t="cursors-layer";switch(this._selectionIsEmpty||(t+=" has-selection"),this._cursorStyle){case Sn.Line:t+=" cursor-line-style";break;case Sn.Block:t+=" cursor-block-style";break;case Sn.Underline:t+=" cursor-underline-style";break;case Sn.LineThin:t+=" cursor-line-thin-style";break;case Sn.BlockOutline:t+=" cursor-block-outline-style";break;case Sn.UnderlineThin:t+=" cursor-underline-thin-style";break;default:t+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:t+=" cursor-blink";break;case 2:t+=" cursor-smooth";break;case 3:t+=" cursor-phase";break;case 4:t+=" cursor-expand";break;default:t+=" cursor-solid"}else t+=" cursor-solid";return this._cursorSmoothCaretAnimation!=="on"&&this._cursorSmoothCaretAnimation!=="explicit"||(t+=" cursor-smooth-caret-animation"),t};n.prototype._show=function(){this._primaryCursor.show();for(var t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].show();this._isVisible=!0};n.prototype._hide=function(){this._primaryCursor.hide();for(var t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].hide();this._isVisible=!1};n.prototype.prepareRender=function(t){this._primaryCursor.prepareRender(t);for(var n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].prepareRender(t)};n.prototype.render=function(t){var n=[];var i=0;var r=this._primaryCursor.render(t);r&&(n[i++]=r);for(var e=0,o=this._secondaryCursors.length;e<o;e++){var s=this._secondaryCursors[e].render(t);s&&(n[i++]=s)}this._renderData=n};n.prototype.getLastRenderData=function(){return this._renderData};return n}(v_);jD.BLINK_INTERVAL=500,Gk((function(t,n){var i=[{class:".cursor",foreground:Qk,background:Yk},{class:".cursor-primary",foreground:Xk,background:tx},{class:".cursor-secondary",foreground:nx,background:ix}];for(var r=0,e=i;r<e.length;r++){var o=e[r];var s=t.getColor(o.foreground);if(s){var u=t.getColor(o.background);u||(u=s.opposite()),n.addRule(".monaco-editor .cursors-layer ".concat(o.class," { background-color: ").concat(s,"; border-color: ").concat(s,"; color: ").concat(u,"; }")),C_(t.type)&&n.addRule(".monaco-editor .cursors-layer.has-selection ".concat(o.class," { border-left: 1px solid ").concat(u,"; border-right: 1px solid ").concat(u,"; }"))}}}));var RD=function(){throw new Error("Invalid change accessor")};var TD=function(t){__extends(n,t);function n(n){var i=t.call(this,n)||this;var r=i._context.configuration.options,e=r.get(145);i._lineHeight=r.get(67),i._contentWidth=e.contentWidth,i._contentLeft=e.contentLeft,i.domNode=Nh(document.createElement("div")),i.domNode.setClassName("view-zones"),i.domNode.setPosition("absolute"),i.domNode.setAttribute("role","presentation"),i.domNode.setAttribute("aria-hidden","true"),i.marginDomNode=Nh(document.createElement("div")),i.marginDomNode.setClassName("margin-view-zones"),i.marginDomNode.setPosition("absolute"),i.marginDomNode.setAttribute("role","presentation"),i.marginDomNode.setAttribute("aria-hidden","true"),i._zones={};return i}n.prototype.dispose=function(){t.prototype.dispose.call(this),this._zones={}};n.prototype._recomputeWhitespacesProps=function(){var t=this;var n=this._context.viewLayout.getWhitespaces(),i=new Map;for(var r=0,e=n;r<e.length;r++){var o=e[r];i.set(o.id,o)}var s=!1;return this._context.viewModel.changeWhitespace((function(n){var r=Object.keys(t._zones);for(var e=0,o=r.length;e<o;e++){var u=r[e],a=t._zones[u],h=t._computeWhitespaceProps(a.delegate);a.isInHiddenArea=h.isInHiddenArea;var c=i.get(u);!c||c.afterLineNumber===h.afterViewLineNumber&&c.height===h.heightInPx||(n.changeOneWhitespace(u,h.afterViewLineNumber,h.heightInPx),t._safeCallOnComputedHeight(a.delegate,h.heightInPx),s=!0)}})),s};n.prototype.onConfigurationChanged=function(t){var n=this._context.configuration.options,i=n.get(145);return this._lineHeight=n.get(67),this._contentWidth=i.contentWidth,this._contentLeft=i.contentLeft,t.hasChanged(67)&&this._recomputeWhitespacesProps(),!0};n.prototype.onLineMappingChanged=function(t){return this._recomputeWhitespacesProps()};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged||t.scrollWidthChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype._getZoneOrdinal=function(t){var n,i;return(i=(n=t.ordinal)!==null&&n!==void 0?n:t.afterColumn)!==null&&i!==void 0?i:1e4};n.prototype._computeWhitespaceProps=function(t){if(t.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(t),minWidthInPx:this._minWidthInPixels(t)};var n,i;if(t.afterColumn!==void 0)n=this._context.viewModel.model.validatePosition({lineNumber:t.afterLineNumber,column:t.afterColumn});else{var r=this._context.viewModel.model.validatePosition({lineNumber:t.afterLineNumber,column:1}).lineNumber;n=new Tr(r,this._context.viewModel.model.getLineMaxColumn(r))}i=n.column===this._context.viewModel.model.getLineMaxColumn(n.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:n.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:n.lineNumber,column:n.column+1});var e=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n,t.afterColumnAffinity,!0),o=t.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(i);return{isInHiddenArea:!o,afterViewLineNumber:e.lineNumber,heightInPx:o?this._heightInPixels(t):0,minWidthInPx:this._minWidthInPixels(t)}};n.prototype.changeViewZones=function(t){var n=this;var i=!1;return this._context.viewModel.changeWhitespace((function(r){var e={addZone:function(t){return i=!0,n._addZone(r,t)},removeZone:function(t){t&&(i=n._removeZone(r,t)||i)},layoutZone:function(t){t&&(i=n._layoutZone(r,t)||i)}};(function(t,n){try{return t(n)}catch(t){Gn(t)}})(t,e),e.addZone=RD,e.removeZone=RD,e.layoutZone=RD})),i};n.prototype._addZone=function(t,n){var i=this._computeWhitespaceProps(n),r={whitespaceId:t.insertWhitespace(i.afterViewLineNumber,this._getZoneOrdinal(n),i.heightInPx,i.minWidthInPx),delegate:n,isInHiddenArea:i.isInHiddenArea,isVisible:!1,domNode:Nh(n.domNode),marginDomNode:n.marginDomNode?Nh(n.marginDomNode):null};return this._safeCallOnComputedHeight(r.delegate,i.heightInPx),r.domNode.setPosition("absolute"),r.domNode.domNode.style.width="100%",r.domNode.setDisplay("none"),r.domNode.setAttribute("monaco-view-zone",r.whitespaceId),this.domNode.appendChild(r.domNode),r.marginDomNode&&(r.marginDomNode.setPosition("absolute"),r.marginDomNode.domNode.style.width="100%",r.marginDomNode.setDisplay("none"),r.marginDomNode.setAttribute("monaco-view-zone",r.whitespaceId),this.marginDomNode.appendChild(r.marginDomNode)),this._zones[r.whitespaceId]=r,this.setShouldRender(),r.whitespaceId};n.prototype._removeZone=function(t,n){if(this._zones.hasOwnProperty(n)){var i=this._zones[n];return delete this._zones[n],t.removeWhitespace(i.whitespaceId),i.domNode.removeAttribute("monaco-visible-view-zone"),i.domNode.removeAttribute("monaco-view-zone"),i.domNode.domNode.parentNode.removeChild(i.domNode.domNode),i.marginDomNode&&(i.marginDomNode.removeAttribute("monaco-visible-view-zone"),i.marginDomNode.removeAttribute("monaco-view-zone"),i.marginDomNode.domNode.parentNode.removeChild(i.marginDomNode.domNode)),this.setShouldRender(),!0}return!1};n.prototype._layoutZone=function(t,n){if(this._zones.hasOwnProperty(n)){var i=this._zones[n],r=this._computeWhitespaceProps(i.delegate);return i.isInHiddenArea=r.isInHiddenArea,t.changeOneWhitespace(i.whitespaceId,r.afterViewLineNumber,r.heightInPx),this._safeCallOnComputedHeight(i.delegate,r.heightInPx),this.setShouldRender(),!0}return!1};n.prototype.shouldSuppressMouseDownOnViewZone=function(t){return this._zones.hasOwnProperty(t)?!!this._zones[t].delegate.suppressMouseDown:!1};n.prototype._heightInPixels=function(t){return typeof t.heightInPx=="number"?t.heightInPx:typeof t.heightInLines=="number"?this._lineHeight*t.heightInLines:this._lineHeight};n.prototype._minWidthInPixels=function(t){return typeof t.minWidthInPx=="number"?t.minWidthInPx:0};n.prototype._safeCallOnComputedHeight=function(t,n){if(typeof t.onComputedHeight=="function")try{t.onComputedHeight(n)}catch(t){Gn(t)}};n.prototype._safeCallOnDomNodeTop=function(t,n){if(typeof t.onDomNodeTop=="function")try{t.onDomNodeTop(n)}catch(t){Gn(t)}};n.prototype.prepareRender=function(t){};n.prototype.render=function(t){var n=t.viewportData.whitespaceViewportData,i={};var r=!1;for(var e=0,o=n;e<o.length;e++){var s=o[e];this._zones[s.id].isInHiddenArea||(i[s.id]=s,r=!0)}var u=Object.keys(this._zones);for(var s=0,a=u.length;s<a;s++){var h=u[s],c=this._zones[h];var f=0,l=0,v="none";i.hasOwnProperty(h)?(f=i[h].verticalOffset-t.bigNumbersDelta,l=i[h].height,v="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,t.getScrolledTopFromAbsoluteTop(i[h].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,t.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(f),c.domNode.setHeight(l),c.domNode.setDisplay(v),c.marginDomNode&&(c.marginDomNode.setTop(f),c.marginDomNode.setHeight(l),c.marginDomNode.setDisplay(v))}r&&(this.domNode.setWidth(Math.max(t.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))};return n}(v_);var ID=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._context=n,i._options=new BD(i._context.configuration),i._selection=[],i._renderResult=null,i._context.addEventHandler(i);return i}n.prototype.dispose=function(){this._context.removeEventHandler(this),this._renderResult=null,t.prototype.dispose.call(this)};n.prototype.onConfigurationChanged=function(t){var n=new BD(this._context.configuration);return this._options.equals(n)?t.hasChanged(145):(this._options=n,!0)};n.prototype.onCursorStateChanged=function(t){return this._selection=t.selections,this._options.renderWhitespace==="selection"};n.prototype.onDecorationsChanged=function(t){return!0};n.prototype.onFlushed=function(t){return!0};n.prototype.onLinesChanged=function(t){return!0};n.prototype.onLinesDeleted=function(t){return!0};n.prototype.onLinesInserted=function(t){return!0};n.prototype.onScrollChanged=function(t){return t.scrollTopChanged};n.prototype.onZonesChanged=function(t){return!0};n.prototype.prepareRender=function(t){if(this._options.renderWhitespace==="none")return void(this._renderResult=null);var n=t.visibleRange.startLineNumber,i=t.visibleRange.endLineNumber-n+1,r=new Array(i);for(var e=0;e<i;e++)r[e]=!0;var o=this._context.viewModel.getMinimapLinesRenderingData(t.viewportData.startLineNumber,t.viewportData.endLineNumber,r);this._renderResult=[];for(var e=t.viewportData.startLineNumber;e<=t.viewportData.endLineNumber;e++){var s=e-t.viewportData.startLineNumber,u=o.data[s];var a=null;if(this._options.renderWhitespace==="selection"){var h=this._selection;for(var c=0,f=h;c<f.length;c++){var l=f[c];if(l.endLineNumber<e||l.startLineNumber>e)continue;var v=l.startLineNumber===e?l.startColumn:u.minColumn,d=l.endLineNumber===e?l.endColumn:u.maxColumn;v<d&&(a||(a=[]),a.push(new Sp(v-1,d-1)))}}this._renderResult[s]=this._applyRenderWhitespace(t,e,a,u)}};n.prototype._applyRenderWhitespace=function(t,n,i,r){if(this._options.renderWhitespace==="selection"&&!i||this._options.renderWhitespace==="trailing"&&r.continuesWithWrappedLine)return"";var e=this._context.theme.getColor(rx),o=this._options.renderWithSVG,s=r.content,u=this._options.stopRenderingLineAfter===-1?s.length:Math.min(this._options.stopRenderingLineAfter,s.length),a=r.continuesWithWrappedLine,h=r.minColumn-1,c=this._options.renderWhitespace==="boundary",f=this._options.renderWhitespace==="trailing",l=this._options.lineHeight,v=this._options.middotWidth,d=this._options.wsmiddotWidth,g=this._options.spaceWidth,p=Math.abs(d-g)<Math.abs(v-g)?11825:183,w=this._options.canUseHalfwidthRightwardsArrow;var m,b="",y=!1,_=vo(s);_===-1?(y=!0,_=u,m=u):m=po(s);var k=0,x=i&&i[k],C=0;for(var S=h;S<u;S++){var D=s.charCodeAt(S);if(x&&S>=x.endOffset&&(k++,x=i&&i[k]),D!==9&&D!==32||f&&!y&&S<=m)continue;if(c&&S>=_&&S<=m&&D===32){var A=S-1>=0?s.charCodeAt(S-1):0,O=S+1<u?s.charCodeAt(S+1):0;if(A!==32&&O!==32)continue}if(c&&a&&S===u-1){var A=S-1>=0?s.charCodeAt(S-1):0;if(D===32&&A!==32&&A!==9)continue}if(i&&(!x||x.startOffset>S||x.endOffset<=S))continue;var E=t.visibleRangeForPosition(new Tr(n,S+1));E&&(o?(C=Math.max(C,E.left),b+=D===9?this._renderArrow(l,g,E.left):'<circle cx="'.concat((E.left+g/2).toFixed(2),'" cy="').concat((l/2).toFixed(2),'" r="').concat((g/7).toFixed(2),'" />')):b+=D===9?'<div class="mwh" style="left:'.concat(E.left,"px;height:").concat(l,'px;">').concat(w?"￫":"→","</div>"):'<div class="mwh" style="left:'.concat(E.left,"px;height:").concat(l,'px;">').concat(String.fromCharCode(p),"</div>"))}return o?(C=Math.round(C+g),'<svg style="bottom:0;position:absolute;width:'.concat(C,"px;height:").concat(l,'px" viewBox="0 0 ').concat(C," ").concat(l,'" xmlns="http://www.w3.org/2000/svg" fill="').concat(e,'">')+b+"</svg>"):b};n.prototype._renderArrow=function(t,n,i){var r=t/2,e=i,o={x:0,y:n/7/2},s={x:.8*n,y:o.y},u={x:s.x-.2*s.x,y:s.y+.2*s.x},a={x:u.x+.1*s.x,y:u.y+.1*s.x},h={x:a.x+.35*s.x,y:a.y-.35*s.x};return'<path d="M '.concat([o,s,u,a,h,{x:h.x,y:-h.y},{x:a.x,y:-a.y},{x:u.x,y:-u.y},{x:s.x,y:-s.y},{x:o.x,y:-o.y}].map((function(t){return"".concat((e+t.x).toFixed(2)," ").concat((r+t.y).toFixed(2))})).join(" L "),'" />')};n.prototype.render=function(t,n){if(!this._renderResult)return"";var i=n-t;return i<0||i>=this._renderResult.length?"":this._renderResult[i]};return n}(Hk);var BD=function(){function t(t){var n=t.options,i=n.get(50),r=n.get(38);r==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):r==="svg"?(this.renderWhitespace=n.get(99),this.renderWithSVG=!0):(this.renderWhitespace=n.get(99),this.renderWithSVG=!1),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(67),this.stopRenderingLineAfter=n.get(117)}t.prototype.equals=function(t){return this.renderWhitespace===t.renderWhitespace&&this.renderWithSVG===t.renderWithSVG&&this.spaceWidth===t.spaceWidth&&this.middotWidth===t.middotWidth&&this.wsmiddotWidth===t.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===t.canUseHalfwidthRightwardsArrow&&this.lineHeight===t.lineHeight&&this.stopRenderingLineAfter===t.stopRenderingLineAfter};return t}();var ND=function(){function t(t,n,i,r){this.selections=t,this.startLineNumber=0|n.startLineNumber,this.endLineNumber=0|n.endLineNumber,this.relativeVerticalOffset=n.relativeVerticalOffset,this.bigNumbersDelta=0|n.bigNumbersDelta,this.lineHeight=0|n.lineHeight,this.whitespaceViewportData=i,this._model=r,this.visibleRange=new Ir(n.startLineNumber,this._model.getLineMinColumn(n.startLineNumber),n.endLineNumber,this._model.getLineMaxColumn(n.endLineNumber))}t.prototype.getViewLineRenderingData=function(t){return this._model.getViewportViewLineRenderingData(this.visibleRange,t)};t.prototype.getDecorationsInViewport=function(){return this._model.getDecorationsInViewport(this.visibleRange)};return t}();var PD=function(){function t(t){this._theme=t}Object.defineProperty(t.prototype,"type",{get:function(){return this._theme.type},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"value",{get:function(){return this._theme},enumerable:false,configurable:true});t.prototype.update=function(t){this._theme=t};t.prototype.getColor=function(t){return this._theme.getColor(t)};return t}();var WD=function(){function t(t,n,i){this.configuration=t,this.theme=new PD(n),this.viewModel=i,this.viewLayout=i.viewLayout}t.prototype.addEventHandler=function(t){this.viewModel.addViewEventHandler(t)};t.prototype.removeEventHandler=function(t){this.viewModel.removeViewEventHandler(t)};return t}();var HD=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},zD=function(t,n){return function(i,r){n(i,r,t)}};var UD=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this)||this,a._instantiationService=u,a._shouldRecomputeGlyphMarginLanes=!1,a._selections=[new Br(1,1,1,1)],a._renderAnimationFrame=null;var h=new uS(i,e,o,n);a._context=new WD(i,r,e),a._context.addEventHandler(a),a._viewParts=[],a._textAreaHandler=a._instantiationService.createInstance(rC,a._context,h,a._createTextAreaHandlerHelper()),a._viewParts.push(a._textAreaHandler),a._linesContent=Nh(document.createElement("div")),a._linesContent.setClassName("lines-content monaco-editor-background"),a._linesContent.setPosition("absolute"),a.domNode=Nh(document.createElement("div")),a.domNode.setClassName(a._getEditorClassName()),a.domNode.setAttribute("role","code"),a._overflowGuardContainer=Nh(document.createElement("div")),d_.write(a._overflowGuardContainer,3),a._overflowGuardContainer.setClassName("overflow-guard"),a._scrollbar=new AS(a._context,a._linesContent,a.domNode,a._overflowGuardContainer),a._viewParts.push(a._scrollbar),a._viewLines=new $S(a._context,a._linesContent),a._viewZones=new TD(a._context),a._viewParts.push(a._viewZones);var c=new wD(a._context);a._viewParts.push(c);var f=new xD(a._context);a._viewParts.push(f);var l=new vS(a._context);a._viewParts.push(l),l.addDynamicOverlay(new CS(a._context)),l.addDynamicOverlay(new OD(a._context)),l.addDynamicOverlay(new zS(a._context)),l.addDynamicOverlay(new DS(a._context)),l.addDynamicOverlay(new ID(a._context));var v=new dS(a._context);a._viewParts.push(v),v.addDynamicOverlay(new SS(a._context)),v.addDynamicOverlay(new ZS(a._context)),v.addDynamicOverlay(new JS(a._context)),v.addDynamicOverlay(new $x(a._context)),a._glyphMarginWidgets=new LS(a._context),a._viewParts.push(a._glyphMarginWidgets);var d=new Jx(a._context);d.getDomNode().appendChild(a._viewZones.marginDomNode),d.getDomNode().appendChild(v.getDomNode()),d.getDomNode().appendChild(a._glyphMarginWidgets.domNode),a._viewParts.push(d),a._contentWidgets=new wS(a._context,a.domNode),a._viewParts.push(a._contentWidgets),a._viewCursors=new jD(a._context),a._viewParts.push(a._viewCursors),a._overlayWidgets=new gD(a._context,a.domNode),a._viewParts.push(a._overlayWidgets);var g=new kD(a._context);a._viewParts.push(g);var p=new pS(a._context);a._viewParts.push(p);var w=new lD(a._context);if(a._viewParts.push(w),c){var m=a._scrollbar.getOverviewRulerLayoutInfo();m.parent.insertBefore(c.getDomNode(),m.insertBefore)}a._linesContent.appendChild(l.getDomNode()),a._linesContent.appendChild(g.domNode),a._linesContent.appendChild(a._viewZones.domNode),a._linesContent.appendChild(a._viewLines.getDomNode()),a._linesContent.appendChild(a._contentWidgets.domNode),a._linesContent.appendChild(a._viewCursors.getDomNode()),a._overflowGuardContainer.appendChild(d.getDomNode()),a._overflowGuardContainer.appendChild(a._scrollbar.getDomNode()),a._overflowGuardContainer.appendChild(f.getDomNode()),a._overflowGuardContainer.appendChild(a._textAreaHandler.textArea),a._overflowGuardContainer.appendChild(a._textAreaHandler.textAreaCover),a._overflowGuardContainer.appendChild(a._overlayWidgets.getDomNode()),a._overflowGuardContainer.appendChild(w.getDomNode()),a._overflowGuardContainer.appendChild(p.domNode),a.domNode.appendChild(a._overflowGuardContainer),s?(s.appendChild(a._contentWidgets.overflowingContentWidgetsDomNode.domNode),s.appendChild(a._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(a.domNode.appendChild(a._contentWidgets.overflowingContentWidgetsDomNode),a.domNode.appendChild(a._overlayWidgets.overflowingOverlayWidgetsDomNode)),a._applyLayout(),a._pointerHandler=a._register(new Wk(a._context,h,a._createPointerHandlerHelper()));return a}n.prototype._computeGlyphMarginLanes=function(){var t=this._context.viewModel.model,n=this._context.viewModel.glyphLanes;var i=[],r=0;i=i.concat(t.getAllMarginDecorations().map((function(t){var n,i,e;var o=(i=(n=t.options.glyphMargin)===null||n===void 0?void 0:n.position)!==null&&i!==void 0?i:dd.Center;return r=Math.max(r,t.range.endLineNumber),{range:t.range,lane:o,persist:(e=t.options.glyphMargin)===null||e===void 0?void 0:e.persistLane}}))),i=i.concat(this._glyphMarginWidgets.getWidgets().map((function(n){var i=t.validateRange(n.preference.range);return r=Math.max(r,i.endLineNumber),{range:i,lane:n.preference.lane}}))),i.sort((function(t,n){return Ir.compareRangesUsingStarts(t.range,n.range)})),n.reset(r);for(var e=0,o=i;e<o.length;e++){var s=o[e];n.push(s.lane,s.range,s.persist)}return n};n.prototype._createPointerHandlerHelper=function(){var t=this;return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:function(){t.focus()},dispatchTextAreaEvent:function(n){t._textAreaHandler.textArea.domNode.dispatchEvent(n)},getLastRenderData:function(){var n=t._viewCursors.getLastRenderData()||[],i=t._textAreaHandler.getLastRenderData();return new z_(n,i)},renderNow:function(){t.render(!0,!1)},shouldSuppressMouseDownOnViewZone:function(n){return t._viewZones.shouldSuppressMouseDownOnViewZone(n)},shouldSuppressMouseDownOnWidget:function(n){return t._contentWidgets.shouldSuppressMouseDownOnWidget(n)},getPositionFromDOMInfo:function(n,i){return t._flushAccumulatedAndRenderNow(),t._viewLines.getPositionFromDOMInfo(n,i)},visibleRangeForPosition:function(n,i){return t._flushAccumulatedAndRenderNow(),t._viewLines.visibleRangeForPosition(new Tr(n,i))},getLineWidth:function(n){return t._flushAccumulatedAndRenderNow(),t._viewLines.getLineWidth(n)}}};n.prototype._createTextAreaHandlerHelper=function(){var t=this;return{visibleRangeForPosition:function(n){return t._flushAccumulatedAndRenderNow(),t._viewLines.visibleRangeForPosition(n)}}};n.prototype._applyLayout=function(){var t=this._context.configuration.options.get(145);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)};n.prototype._getEditorClassName=function(){var t=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(142)+" "+Kk(this._context.theme.type)+t};n.prototype.handleEvents=function(n){t.prototype.handleEvents.call(this,n),this._scheduleRender()};n.prototype.onConfigurationChanged=function(t){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1};n.prototype.onCursorStateChanged=function(t){return this._selections=t.selections,!1};n.prototype.onDecorationsChanged=function(t){return t.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1};n.prototype.onFocusChanged=function(t){return this.domNode.setClassName(this._getEditorClassName()),!1};n.prototype.onThemeChanged=function(t){return this._context.theme.update(t.theme),this.domNode.setClassName(this._getEditorClassName()),!1};n.prototype.dispose=function(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(var n=0,i=this._viewParts;n<i.length;n++){var r=i[n];r.dispose()}t.prototype.dispose.call(this)};n.prototype._scheduleRender=function(){var t=this;if(this._store.isDisposed)throw new ri;if(this._renderAnimationFrame===null){var n=this._createCoordinatedRendering();this._renderAnimationFrame=VD.INSTANCE.scheduleCoordinatedRendering({window:sa(this.domNode.domNode),prepareRenderText:function(){if(t._store.isDisposed)throw new ri;try{return n.prepareRenderText()}finally{t._renderAnimationFrame=null}},renderText:function(){if(t._store.isDisposed)throw new ri;return n.renderText()},prepareRender:function(i,r){if(t._store.isDisposed)throw new ri;return n.prepareRender(i,r)},render:function(i,r){if(t._store.isDisposed)throw new ri;return n.render(i,r)}})}};n.prototype._flushAccumulatedAndRenderNow=function(){var t=this._createCoordinatedRendering();KD((function(){return t.prepareRenderText()}));var n=KD((function(){return t.renderText()}));if(n){var i=n[0],r=n[1];KD((function(){return t.prepareRender(i,r)})),KD((function(){return t.render(i,r)}))}};n.prototype._getViewPartsToRender=function(){var t=[];var n=0;for(var i=0,r=this._viewParts;i<r.length;i++){var e=r[i];e.shouldRender()&&(t[n++]=e)}return t};n.prototype._createCoordinatedRendering=function(){var t=this;return{prepareRenderText:function(){if(t._shouldRecomputeGlyphMarginLanes){t._shouldRecomputeGlyphMarginLanes=!1;var n=t._computeGlyphMarginLanes();t._context.configuration.setGlyphMarginDecorationLaneCount(n.requiredLanes)}Uw.onRenderStart()},renderText:function(){if(!t.domNode.domNode.isConnected)return null;var n=t._getViewPartsToRender();if(!t._viewLines.shouldRender()&&n.length===0)return null;var i=t._context.viewLayout.getLinesViewportData();t._context.viewModel.setViewport(i.startLineNumber,i.endLineNumber,i.centeredLineNumber);var r=new ND(t._selections,i,t._context.viewLayout.getWhitespaceViewportData(),t._context.viewModel);return t._contentWidgets.shouldRender()&&t._contentWidgets.onBeforeRender(r),t._viewLines.shouldRender()&&(t._viewLines.renderText(r),t._viewLines.onDidRender(),n=t._getViewPartsToRender()),[n,new p_(t._context.viewLayout,r,t._viewLines)]},prepareRender:function(t,n){for(var i=0,r=t;i<r.length;i++){var e=r[i];e.prepareRender(n)}},render:function(t,n){for(var i=0,r=t;i<r.length;i++){var e=r[i];e.render(n),e.onDidRender()}}}};n.prototype.delegateVerticalScrollbarPointerDown=function(t){this._scrollbar.delegateVerticalScrollbarPointerDown(t)};n.prototype.delegateScrollFromMouseWheelEvent=function(t){this._scrollbar.delegateScrollFromMouseWheelEvent(t)};n.prototype.restoreState=function(t){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:t.scrollTop,scrollLeft:t.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()};n.prototype.getOffsetForColumn=function(t,n){var i=this._context.viewModel.model.validatePosition({lineNumber:t,column:n}),r=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();var e=this._viewLines.visibleRangeForPosition(new Tr(r.lineNumber,r.column));return e?e.left:-1};n.prototype.getTargetAtClientPoint=function(t,n){var i=this._pointerHandler.getTargetAtClientPoint(t,n);return i?gS.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null};n.prototype.createOverviewRuler=function(t){return new _D(this._context,t)};n.prototype.change=function(t){this._viewZones.changeViewZones(t),this._scheduleRender()};n.prototype.render=function(t,n){if(n){this._viewLines.forceShouldRender();for(var i=0,r=this._viewParts;i<r.length;i++){var e=r[i];e.forceShouldRender()}}t?this._flushAccumulatedAndRenderNow():this._scheduleRender()};n.prototype.writeScreenReaderContent=function(t){this._textAreaHandler.writeScreenReaderContent(t)};n.prototype.focus=function(){this._textAreaHandler.focusTextArea()};n.prototype.isFocused=function(){return this._textAreaHandler.isFocused()};n.prototype.setAriaOptions=function(t){this._textAreaHandler.setAriaOptions(t)};n.prototype.addContentWidget=function(t){this._contentWidgets.addWidget(t.widget),this.layoutContentWidget(t),this._scheduleRender()};n.prototype.layoutContentWidget=function(t){var n,i,r,e,o,s,u,a;this._contentWidgets.setWidgetPosition(t.widget,(i=(n=t.position)===null||n===void 0?void 0:n.position)!==null&&i!==void 0?i:null,(e=(r=t.position)===null||r===void 0?void 0:r.secondaryPosition)!==null&&e!==void 0?e:null,(s=(o=t.position)===null||o===void 0?void 0:o.preference)!==null&&s!==void 0?s:null,(a=(u=t.position)===null||u===void 0?void 0:u.positionAffinity)!==null&&a!==void 0?a:null),this._scheduleRender()};n.prototype.removeContentWidget=function(t){this._contentWidgets.removeWidget(t.widget),this._scheduleRender()};n.prototype.addOverlayWidget=function(t){this._overlayWidgets.addWidget(t.widget),this.layoutOverlayWidget(t),this._scheduleRender()};n.prototype.layoutOverlayWidget=function(t){var n=t.position?t.position.preference:null;this._overlayWidgets.setWidgetPosition(t.widget,n)&&this._scheduleRender()};n.prototype.removeOverlayWidget=function(t){this._overlayWidgets.removeWidget(t.widget),this._scheduleRender()};n.prototype.addGlyphMarginWidget=function(t){this._glyphMarginWidgets.addWidget(t.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()};n.prototype.layoutGlyphMarginWidget=function(t){var n=t.position;this._glyphMarginWidgets.setWidgetPosition(t.widget,n)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())};n.prototype.removeGlyphMarginWidget=function(t){this._glyphMarginWidgets.removeWidget(t.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()};return n}(l_);function KD(t){try{return t()}catch(t){return Gn(t),null}}UD=HD([zD(6,Jh)],UD);var VD=function(){function t(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}t.prototype.scheduleCoordinatedRendering=function(t){var n=this;return this._coordinatedRenderings.push(t),this._scheduleRender(t.window),{dispose:function(){var i=n._coordinatedRenderings.indexOf(t);if(i!==-1&&(n._coordinatedRenderings.splice(i,1),n._coordinatedRenderings.length===0)){for(var r=0,e=n._animationFrameRunners;r<e.length;r++){var o=e[r],s=o[0],u=o[1];u.dispose()}n._animationFrameRunners.clear()}}}};t.prototype._scheduleRender=function(t){var n=this;if(!this._animationFrameRunners.has(t)){var i=function(){n._animationFrameRunners.delete(t),n._onRenderScheduled()};this._animationFrameRunners.set(t,Ca(t,i,100))}};t.prototype._onRenderScheduled=function(){var t=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];var n=function(t){KD((function(){return t.prepareRenderText()}))};for(var i=0,r=t;i<r.length;i++){var e=r[i];n(e)}var o=[];var s=function(n,i){var r=t[n];o[n]=KD((function(){return r.renderText()}))};for(var e=0,u=t.length;e<u;e++){s(e,u)}var a=function(n,i){var r=t[n],e=o[n];if(!e)return"continue";var s=e[0],u=e[1];KD((function(){return r.prepareRender(s,u)}))};for(var e=0,u=t.length;e<u;e++){a(e,u)}var h=function(n,i){var r=t[n],e=o[n];if(!e)return"continue";var s=e[0],u=e[1];KD((function(){return r.render(s,u)}))};for(var e=0,u=t.length;e<u;e++){h(e,u)}};return t}();VD.INSTANCE=new VD;var qD=function(){function t(t,n,i,r,e){this.injectionOffsets=t,this.injectionOptions=n,this.breakOffsets=i,this.breakOffsetsVisibleColumn=r,this.wrappedTextIndentLength=e}t.prototype.getOutputLineCount=function(){return this.breakOffsets.length};t.prototype.getMinOutputOffset=function(t){return t>0?this.wrappedTextIndentLength:0};t.prototype.getLineLength=function(t){var n=t>0?this.breakOffsets[t-1]:0;var i=this.breakOffsets[t]-n;return t>0&&(i+=this.wrappedTextIndentLength),i};t.prototype.getMaxOutputOffset=function(t){return this.getLineLength(t)};t.prototype.translateToInputOffset=function(t,n){t>0&&(n=Math.max(0,n-this.wrappedTextIndentLength));var i=t===0?n:this.breakOffsets[t-1]+n;if(this.injectionOffsets!==null)for(var r=0;r<this.injectionOffsets.length&&i>this.injectionOffsets[r];r++)i<this.injectionOffsets[r]+this.injectionOptions[r].content.length?i=this.injectionOffsets[r]:i-=this.injectionOptions[r].content.length;return i};t.prototype.translateToOutputPosition=function(t,n){if(n===void 0){n=2}var i=t;if(this.injectionOffsets!==null)for(var r=0;r<this.injectionOffsets.length&&!(t<this.injectionOffsets[r])&&(n===1||t!==this.injectionOffsets[r]);r++)i+=this.injectionOptions[r].content.length;return this.offsetInInputWithInjectionsToOutputPosition(i,n)};t.prototype.offsetInInputWithInjectionsToOutputPosition=function(t,n){if(n===void 0){n=2}var i=0,r=this.breakOffsets.length-1,e=0,o=0;for(;i<=r;){e=i+(r-i)/2|0;var s=this.breakOffsets[e];if(o=e>0?this.breakOffsets[e-1]:0,n===0)if(t<=o)r=e-1;else{if(!(t>s))break;i=e+1}else if(t<o)r=e-1;else{if(!(t>=s))break;i=e+1}}var u=t-o;return e>0&&(u+=this.wrappedTextIndentLength),new JD(e,u)};t.prototype.normalizeOutputPosition=function(t,n,i){if(this.injectionOffsets!==null){var r=this.outputPositionToOffsetInInputWithInjections(t,n),e=this.normalizeOffsetInInputWithInjectionsAroundInjections(r,i);if(e!==r)return this.offsetInInputWithInjectionsToOutputPosition(e,i)}if(i===0){if(t>0&&n===this.getMinOutputOffset(t))return new JD(t-1,this.getMaxOutputOffset(t-1))}else if(i===1&&t<this.getOutputLineCount()-1&&n===this.getMaxOutputOffset(t))return new JD(t+1,this.getMinOutputOffset(t+1));return new JD(t,n)};t.prototype.outputPositionToOffsetInInputWithInjections=function(t,n){return t>0&&(n=Math.max(0,n-this.wrappedTextIndentLength)),(t>0?this.breakOffsets[t-1]:0)+n};t.prototype.normalizeOffsetInInputWithInjectionsAroundInjections=function(t,n){var i=this.getInjectedTextAtOffset(t);if(!i)return t;if(n===2){if(t===i.offsetInInputWithInjections+i.length&&GD(this.injectionOptions[i.injectedTextIndex].cursorStops))return i.offsetInInputWithInjections+i.length;{var r=i.offsetInInputWithInjections;if($D(this.injectionOptions[i.injectedTextIndex].cursorStops))return r;var e=i.injectedTextIndex-1;for(;e>=0&&this.injectionOffsets[e]===this.injectionOffsets[i.injectedTextIndex]&&!GD(this.injectionOptions[e].cursorStops)&&(r-=this.injectionOptions[e].content.length,!$D(this.injectionOptions[e].cursorStops));)e--;return r}}if(n===1||n===4){var r=i.offsetInInputWithInjections+i.length,e=i.injectedTextIndex;for(;e+1<this.injectionOffsets.length&&this.injectionOffsets[e+1]===this.injectionOffsets[e];)r+=this.injectionOptions[e+1].content.length,e++;return r}if(n===0||n===3){var r=i.offsetInInputWithInjections,e=i.injectedTextIndex;for(;e-1>=0&&this.injectionOffsets[e-1]===this.injectionOffsets[e];)r-=this.injectionOptions[e-1].content.length,e--;return r}tf()};t.prototype.getInjectedText=function(t,n){var i=this.outputPositionToOffsetInInputWithInjections(t,n),r=this.getInjectedTextAtOffset(i);return r?{options:this.injectionOptions[r.injectedTextIndex]}:null};t.prototype.getInjectedTextAtOffset=function(t){var n=this.injectionOffsets,i=this.injectionOptions;if(n!==null){var r=0;for(var e=0;e<n.length;e++){var o=i[e].content.length,s=n[e]+r,u=n[e]+r+o;if(s>t)break;if(t<=u)return{injectedTextIndex:e,offsetInInputWithInjections:s,length:o};r+=o}}};return t}();function GD(t){return t==null||t===gd.Right||t===gd.Both}function $D(t){return t==null||t===gd.Left||t===gd.Both}var JD=function(){function t(t,n){this.outputLineIndex=t,this.outputOffset=n}t.prototype.toString=function(){return"".concat(this.outputLineIndex,":").concat(this.outputOffset)};t.prototype.toPosition=function(t){return new Tr(t+this.outputLineIndex,this.outputOffset+1)};return t}();var ZD=function(){function t(){this.changeType=1}return t}();var QD=function(){function t(t,n,i,r,e){this.ownerId=t,this.lineNumber=n,this.column=i,this.options=r,this.order=e}t.applyInjectedText=function(t,n){if(!n||n.length===0)return t;var i="",r=0;for(var e=0,o=n;e<o.length;e++){var s=o[e];i+=t.substring(r,s.column-1),r=s.column-1,i+=s.options.content}return i+=t.substring(r),i};t.fromDecorations=function(n){var i=[];for(var r=0,e=n;r<e.length;r++){var o=e[r];o.options.before&&o.options.before.content.length>0&&i.push(new t(o.ownerId,o.range.startLineNumber,o.range.startColumn,o.options.before,0)),o.options.after&&o.options.after.content.length>0&&i.push(new t(o.ownerId,o.range.endLineNumber,o.range.endColumn,o.options.after,1))}return i.sort((function(t,n){return t.lineNumber===n.lineNumber?t.column===n.column?t.order-n.order:t.column-n.column:t.lineNumber-n.lineNumber})),i};return t}();var YD=function(){function t(t,n,i){this.changeType=2,this.lineNumber=t,this.detail=n,this.injectedText=i}return t}();var XD=function(){function t(t,n){this.changeType=3,this.fromLineNumber=t,this.toLineNumber=n}return t}();var tA=function(){function t(t,n,i,r){this.changeType=4,this.injectedTexts=r,this.fromLineNumber=t,this.toLineNumber=n,this.detail=i}return t}();var nA=function(){function t(){this.changeType=5}return t}();var iA=function(){function t(t,n,i,r){this.changes=t,this.versionId=n,this.isUndoing=i,this.isRedoing=r,this.resultingSelection=null}t.prototype.containsEvent=function(t){for(var n=0,i=this.changes.length;n<i;n++)if(this.changes[n].changeType===t)return!0;return!1};t.merge=function(n,i){var r=[].concat(n.changes).concat(i.changes),e=i.versionId,o=n.isUndoing||i.isUndoing,s=n.isRedoing||i.isRedoing;return new t(r,e,o,s)};return t}();var rA=function(){function t(t){this.changes=t}return t}();var eA=function(){function t(t,n){this.rawContentChangedEvent=t,this.contentChangedEvent=n}t.prototype.merge=function(n){var i=iA.merge(this.rawContentChangedEvent,n.rawContentChangedEvent),r=t._mergeChangeEvents(this.contentChangedEvent,n.contentChangedEvent);return new t(i,r)};t._mergeChangeEvents=function(t,n){var i=[].concat(t.changes).concat(n.changes),r=n.eol,e=n.versionId,o=t.isUndoing||n.isUndoing,s=t.isRedoing||n.isRedoing,u=t.isFlush||n.isFlush;return{changes:i,eol:r,isEolChange:t.isEolChange&&n.isEolChange,versionId:e,isUndoing:o,isRedoing:s,isFlush:u}};return t}();var oA=rl("domLineBreaksComputer",{createHTML:function(t){return t}});var sA=function(){function t(t){this.targetWindow=t}t.create=function(n){return new t(new WeakRef(n))};t.prototype.createLineBreaksComputer=function(t,n,i,r,e){var o=this;var s=[],u=[];return{addRequest:function(t,n,i){s.push(t),u.push(n)},finalize:function(){return function(t,n,i,r,e,o,s,u){var a;function h(t){var i=u[t];if(i){var r=QD.applyInjectedText(n[t],i),e=i.map((function(t){return t.options})),o=i.map((function(t){return t.column-1}));return new qD(o,e,[r.length],[],0)}return null}if(e===-1){var c=[];for(var f=0,l=n.length;f<l;f++)c[f]=h(f);return c}var v=Math.round(e*i.typicalHalfwidthCharacterWidth),d=o===3?2:o===2?1:0,g=Math.round(r*d),p=Math.ceil(i.spaceWidth*g),w=document.createElement("div");Ph(w,i);var m=new Ml(1e4),b=[],y=[],_=[],k=[],x=[];for(var c=0;c<n.length;c++){var f=QD.applyInjectedText(n[c],u[c]);var l=0,C=0,S=v;if(o!==0)if(l=vo(f),l===-1)l=0;else{for(var D=0;D<l;D++)C+=f.charCodeAt(D)===9?r-C%r:1;var A=Math.ceil(i.spaceWidth*C);A+i.typicalFullwidthCharacterWidth>v?(l=0,C=0):S=v-A}var O=f.substr(l),E=uA(O,C,r,S,m,p);b[c]=l,y[c]=C,_[c]=O,k[c]=E[0],x[c]=E[1]}var M=m.build(),F=(a=oA==null?void 0:oA.createHTML(M))!==null&&a!==void 0?a:M;w.innerHTML=F,w.style.position="absolute",w.style.top="10000",s==="keepAll"?(w.style.wordBreak="keep-all",w.style.overflowWrap="anywhere"):(w.style.wordBreak="inherit",w.style.overflowWrap="break-word"),t.document.body.appendChild(w);var L=document.createRange(),j=Array.prototype.slice.call(w.children,0),R=[];for(var c=0;c<n.length;c++){var f=aA(L,j[c],_[c],k[c]);if(f===null){R[c]=h(c);continue}var l=b[c],C=y[c]+g,S=x[c],O=[];for(var T=0,I=f.length;T<I;T++)O[T]=S[f[T]];if(l!==0)for(var T=0,I=f.length;T<I;T++)f[T]+=l;var E=void 0,A=void 0;var D=u[c];D?(E=D.map((function(t){return t.options})),A=D.map((function(t){return t.column-1}))):(E=null,A=null),R[c]=new qD(A,E,f,O,C)}return t.document.body.removeChild(w),R}(Q(o.targetWindow.deref()),s,t,n,i,r,e,u)}}};return t}();function uA(t,n,i,r,e,o){if(o!==0){var s=String(o);e.appendString('<div style="text-indent: -'),e.appendString(s),e.appendString("px; padding-left: "),e.appendString(s),e.appendString("px; box-sizing: border-box; width:")}else e.appendString('<div style="width:');e.appendString(String(r)),e.appendString('px;">');var u=t.length;var a=n,h=0;var c=[],f=[];var l=0<u?t.charCodeAt(0):0;e.appendString("<span>");for(var s=0;s<u;s++){s!==0&&s%16384==0&&e.appendString("</span><span>"),c[s]=h,f[s]=a;var v=l;l=s+1<u?t.charCodeAt(s+1):0;var d=1,g=1;switch(v){case 9:d=i-a%i,g=d;for(var p=1;p<=d;p++)p<d?e.appendCharCode(160):e.appendASCIICharCode(32);break;case 32:l===32?e.appendCharCode(160):e.appendASCIICharCode(32);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:zo(v)&&g++,v<32?e.appendCharCode(9216+v):e.appendCharCode(v)}h+=d,a+=g}return e.appendString("</span>"),c[t.length]=h,f[t.length]=a,e.appendString("</div>"),[c,f]}function aA(t,n,i,r){if(i.length<=1)return null;var e=Array.prototype.slice.call(n.children,0),o=[];try{hA(t,e,r,0,null,i.length-1,null,o)}catch(t){return console.log(t),null}return o.length===0?null:(o.push(i.length),o)}function hA(t,n,i,r,e,o,s,u){if(r===o||(e=e||cA(t,n,i[r],i[r+1]),s=s||cA(t,n,i[o],i[o+1]),Math.abs(e[0].top-s[0].top)<=.1))return;if(r+1===o)return void u.push(o);var a=r+(o-r)/2|0,h=cA(t,n,i[a],i[a+1]);hA(t,n,i,r,e,a,h,u),hA(t,n,i,a,h,o,s,u)}function cA(t,n,i,r){return t.setStart(n[i/16384|0].firstChild,i%16384),t.setEnd(n[r/16384|0].firstChild,r%16384),t.getClientRects()}var fA=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n._editor=null,n._instantiationService=null,n._instances=n._register(new di),n._pending=new Map,n._finishedInstantiation=[],n._finishedInstantiation[0]=!1,n._finishedInstantiation[1]=!1,n._finishedInstantiation[2]=!1,n._finishedInstantiation[3]=!1;return n}n.prototype.initialize=function(t,n,i){var r=this;this._editor=t,this._instantiationService=i;for(var e=0,o=n;e<o.length;e++){var s=o[e];this._pending.has(s.id)?Gn(new Error("Cannot have two contributions with the same id ".concat(s.id))):this._pending.set(s.id,s)}this._instantiateSome(0),this._register(ka(sa(this._editor.getDomNode()),(function(){r._instantiateSome(1)}))),this._register(ka(sa(this._editor.getDomNode()),(function(){r._instantiateSome(2)}))),this._register(ka(sa(this._editor.getDomNode()),(function(){r._instantiateSome(3)}),5e3))};n.prototype.saveViewState=function(){var t={};for(var n=0,i=this._instances;n<i.length;n++){var r=i[n],e=r[0],o=r[1];typeof o.saveViewState=="function"&&(t[e]=o.saveViewState())}return t};n.prototype.restoreViewState=function(t){for(var n=0,i=this._instances;n<i.length;n++){var r=i[n],e=r[0],o=r[1];typeof o.restoreViewState=="function"&&o.restoreViewState(t[e])}};n.prototype.get=function(t){return this._instantiateById(t),this._instances.get(t)||null};n.prototype.onBeforeInteractionEvent=function(){this._instantiateSome(2)};n.prototype.onAfterModelAttached=function(){var t=this;var n;return ka(sa((n=this._editor)===null||n===void 0?void 0:n.getDomNode()),(function(){t._instantiateSome(1)}),50)};n.prototype._instantiateSome=function(t){if(this._finishedInstantiation[t])return;this._finishedInstantiation[t]=!0;var n=this._findPendingContributionsByInstantiation(t);for(var i=0,r=n;i<r.length;i++){var e=r[i];this._instantiateById(e.id)}};n.prototype._findPendingContributionsByInstantiation=function(t){var n=[];for(var i=0,r=this._pending;i<r.length;i++){var e=r[i],o=e[1];o.instantiation===t&&n.push(o)}return n};n.prototype._instantiateById=function(t){var n=this._pending.get(t);if(n){if(this._pending.delete(t),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{var i=this._instantiationService.createInstance(n.ctor,this._editor);this._instances.set(n.id,i),typeof i.restoreViewState=="function"&&n.instantiation!==0&&console.warn("Editor contribution '".concat(n.id,"' should be eager instantiated because it uses saveViewState / restoreViewState."))}catch(i){Gn(i)}}};return n}(ci);var lA=function(){function t(t,n,i,r,e,o,s){this.id=t,this.label=n,this.alias=i,this.metadata=r,this._precondition=e,this._run=o,this._contextKeyService=s}t.prototype.isSupported=function(){return this._contextKeyService.contextMatchesRules(this._precondition)};t.prototype.run=function(t){return this.isSupported()?this._run(t):Promise.resolve(void 0)};return t}();function vA(t){var n=0,i=0,r=0,e=0;for(var o=0,s=t.length;o<s;o++){var u=t.charCodeAt(o);u===13?(n===0&&(i=o),n++,o+1<s&&t.charCodeAt(o+1)===10?(e|=2,o++):e|=3,r=o+1):u===10&&(e|=1,n===0&&(i=o),n++,r=o+1)}return n===0&&(i=t.length),[n,i,t.length-r,e]}var dA=function(){function t(t,n,i,r){this.range=t,this.nestingLevel=n,this.nestingLevelOfEqualBracketType=i,this.isInvalid=r}return t}();var gA=function(){function t(t,n,i,r,e,o){this.range=t,this.openingBracketRange=n,this.closingBracketRange=i,this.nestingLevel=r,this.nestingLevelOfEqualBracketType=e,this.bracketPairNode=o}Object.defineProperty(t.prototype,"openingBracketInfo",{get:function(){return this.bracketPairNode.openingBracket.bracketInfo},enumerable:false,configurable:true});return t}();var pA=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this,n,i,r,e,o,s)||this,a.minVisibleColumnIndentation=u;return a}return n}(gA);var wA=function(){function t(t,n){this.lineCount=t,this.columnCount=n}t.ofText=function(n){var i=0,r=0;for(var e=0,o=n;e<o.length;e++){var s=o[e];s==="\n"?(i++,r=0):r++}return new t(i,r)};t.prototype.createRange=function(t){return this.lineCount===0?new Ir(t.lineNumber,t.column,t.lineNumber,t.column+this.columnCount):new Ir(t.lineNumber,t.column,t.lineNumber+this.lineCount,this.columnCount+1)};t.prototype.addToPosition=function(t){return this.lineCount===0?new Tr(t.lineNumber,t.column+this.columnCount):new Tr(t.lineNumber+this.lineCount,this.columnCount+1)};t.prototype.toString=function(){return"".concat(this.lineCount,",").concat(this.columnCount)};return t}();wA.zero=new wA(0,0);var mA=0;function bA(t){return t===0}var yA=Math.pow(2,26);function _A(t,n){return t*yA+n}function kA(t){var n=t,i=Math.floor(n/yA);return new wA(i,n-i*yA)}function xA(t,n){var i=t+n;return n>=yA&&(i-=t%yA),i}function CA(t,n){return t.reduce((function(t,i){return xA(t,n(i))}),mA)}function SA(t,n){return t===n}function DA(t,n){var i=t,r=n;if(r-i<=0)return mA;var e=Math.floor(i/yA),o=Math.floor(r/yA),s=r-o*yA;return e===o?_A(0,s-(i-e*yA)):_A(o-e,s)}function AA(t,n){return t<n}function OA(t,n){return t<=n}function EA(t,n){return t>=n}function MA(t){return _A(t.lineNumber-1,t.column-1)}function FA(t,n){var i=t,r=Math.floor(i/yA),e=i-r*yA,o=n,s=Math.floor(o/yA);return new Ir(r+1,e+1,s+1,o-s*yA+1)}var LA=function(){function t(t,n,i){this.startOffset=t,this.endOffset=n,this.newLength=i}t.fromModelContentChanges=function(n){return n.map((function(n){var i=Ir.lift(n.range);return new t(MA(i.getStartPosition()),MA(i.getEndPosition()),function(t){var n=lo(t);return _A(n.length-1,n[n.length-1].length)}(n.text))})).reverse()};t.prototype.toString=function(){return"[".concat(kA(this.startOffset),"...").concat(kA(this.endOffset),") -> ").concat(kA(this.newLength))};return t}();var jA=function(){function t(t){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=t.map((function(t){return RA.from(t)}))}t.prototype.getOffsetBeforeChange=function(t){return this.adjustNextEdit(t),this.translateCurToOld(t)};t.prototype.getDistanceToNextChange=function(t){this.adjustNextEdit(t);var n=this.edits[this.nextEditIdx],i=n?this.translateOldToCur(n.offsetObj):null;return i===null?null:DA(t,i)};t.prototype.translateOldToCur=function(t){return t.lineCount===this.deltaLineIdxInOld?_A(t.lineCount+this.deltaOldToNewLineCount,t.columnCount+this.deltaOldToNewColumnCount):_A(t.lineCount+this.deltaOldToNewLineCount,t.columnCount)};t.prototype.translateCurToOld=function(t){var n=kA(t);return n.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?_A(n.lineCount-this.deltaOldToNewLineCount,n.columnCount-this.deltaOldToNewColumnCount):_A(n.lineCount-this.deltaOldToNewLineCount,n.columnCount)};t.prototype.adjustNextEdit=function(t){for(;this.nextEditIdx<this.edits.length;){var n=this.edits[this.nextEditIdx],i=this.translateOldToCur(n.endOffsetAfterObj);if(!OA(i,t))break;{this.nextEditIdx++;var r=kA(i),e=kA(this.translateOldToCur(n.endOffsetBeforeObj)),o=r.lineCount-e.lineCount;this.deltaOldToNewLineCount+=o;var s=this.deltaLineIdxInOld===n.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,u=r.columnCount-e.columnCount;this.deltaOldToNewColumnCount=s+u,this.deltaLineIdxInOld=n.endOffsetBeforeObj.lineCount}}};return t}();var RA=function(){function t(t,n,i){this.endOffsetBeforeObj=kA(n),this.endOffsetAfterObj=kA(xA(t,i)),this.offsetObj=kA(t)}t.from=function(n){return new t(n.startOffset,n.endOffset,n.newLength)};return t}();var TA=[];var IA=function(){function t(t,n){this.items=t,this.additionalItems=n}t.create=function(n,i){if(n<=128&&i.length===0){var r=t.cache[n];return r||(r=new t(n,i),t.cache[n]=r),r}return new t(n,i)};t.getEmpty=function(){return this.empty};t.prototype.add=function(n,i){var r=i.getKey(n);var e=r>>5;if(e===0){var o=1<<r|this.items;return o===this.items?this:t.create(o,this.additionalItems)}e--;var s=this.additionalItems.slice(0);for(;s.length<e;)s.push(0);return s[e]|=1<<(31&r),t.create(this.items,s)};t.prototype.merge=function(n){var i=this.items|n.items;if(this.additionalItems===TA&&n.additionalItems===TA)return i===this.items?this:i===n.items?n:t.create(i,TA);var r=[];for(var e=0;e<Math.max(this.additionalItems.length,n.additionalItems.length);e++){var o=this.additionalItems[e]||0,s=n.additionalItems[e]||0;r.push(o|s)}return t.create(i,r)};t.prototype.intersects=function(t){if(this.items&t.items)return!0;for(var n=0;n<Math.min(this.additionalItems.length,t.additionalItems.length);n++)if(this.additionalItems[n]&t.additionalItems[n])return!0;return!1};return t}();IA.cache=new Array(129),IA.empty=IA.create(0,TA);var BA={getKey:function(t){return t}};var NA=function(){function t(){this.items=new Map}t.prototype.getKey=function(t){var n=this.items.get(t);return n===void 0&&(n=this.items.size,this.items.set(t,n)),n};return t}();var PA=function(){function t(t){this._length=t}Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:false,configurable:true});return t}();var WA=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this,n)||this,s.openingBracket=i,s.child=r,s.closingBracket=e,s.missingOpeningBracketIds=o;return s}n.create=function(t,i,r){var e=t.length;return i&&(e=xA(e,i.length)),r&&(e=xA(e,r.length)),new n(e,t,i,r,i?i.missingOpeningBracketIds:IA.getEmpty())};Object.defineProperty(n.prototype,"kind",{get:function(){return 2},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"listHeight",{get:function(){return 0},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"childrenLength",{get:function(){return 3},enumerable:false,configurable:true});n.prototype.getChild=function(t){switch(t){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")};Object.defineProperty(n.prototype,"children",{get:function(){var t=[];return t.push(this.openingBracket),this.child&&t.push(this.child),this.closingBracket&&t.push(this.closingBracket),t},enumerable:false,configurable:true});n.prototype.canBeReused=function(t){return this.closingBracket!==null&&!t.intersects(this.missingOpeningBracketIds)};n.prototype.deepClone=function(){return new n(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)};n.prototype.computeMinIndentation=function(t,n){return this.child?this.child.computeMinIndentation(xA(t,this.openingBracket.length),n):Number.MAX_SAFE_INTEGER};return n}(PA);var HA=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n)||this,e.listHeight=i,e._missingOpeningBracketIds=r,e.cachedMinIndentation=-1;return e}n.create23=function(t,n,i,r){if(r===void 0){r=!1}var e=t.length,o=t.missingOpeningBracketIds;if(t.listHeight!==n.listHeight)throw new Error("Invalid list heights");if(e=xA(e,n.length),o=o.merge(n.missingOpeningBracketIds),i){if(t.listHeight!==i.listHeight)throw new Error("Invalid list heights");e=xA(e,i.length),o=o.merge(i.missingOpeningBracketIds)}return r?new UA(e,t.listHeight+1,t,n,i,o):new zA(e,t.listHeight+1,t,n,i,o)};n.getEmpty=function(){return new VA(mA,0,[],IA.getEmpty())};Object.defineProperty(n.prototype,"kind",{get:function(){return 4},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"missingOpeningBracketIds",{get:function(){return this._missingOpeningBracketIds},enumerable:false,configurable:true});n.prototype.throwIfImmutable=function(){};n.prototype.makeLastElementMutable=function(){this.throwIfImmutable();var t=this.childrenLength;if(t===0)return;var n=this.getChild(t-1),i=n.kind===4?n.toMutable():n;return n!==i&&this.setChild(t-1,i),i};n.prototype.makeFirstElementMutable=function(){if(this.throwIfImmutable(),this.childrenLength===0)return;var t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n};n.prototype.canBeReused=function(t){if(t.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;var n=this;for(;n.kind===4;){var i=n.childrenLength;if(i===0)throw new ri;n=n.getChild(i-1)}return n.canBeReused(t)};n.prototype.handleChildrenChanged=function(){this.throwIfImmutable();var t=this.childrenLength;var n=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(var r=1;r<t;r++){var e=this.getChild(r);n=xA(n,e.length),i=i.merge(e.missingOpeningBracketIds)}this._length=n,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1};n.prototype.computeMinIndentation=function(t,n){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;var i=Number.MAX_SAFE_INTEGER,r=t;for(var e=0;e<this.childrenLength;e++){var o=this.getChild(e);o&&(i=Math.min(i,o.computeMinIndentation(r,n)),r=xA(r,o.length))}return this.cachedMinIndentation=i,i};return n}(PA);var zA=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this,n,i,s)||this,u._item1=r,u._item2=e,u._item3=o;return u}Object.defineProperty(n.prototype,"childrenLength",{get:function(){return this._item3!==null?3:2},enumerable:false,configurable:true});n.prototype.getChild=function(t){switch(t){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")};n.prototype.setChild=function(t,n){switch(t){case 0:return void(this._item1=n);case 1:return void(this._item2=n);case 2:return void(this._item3=n)}throw new Error("Invalid child index")};Object.defineProperty(n.prototype,"children",{get:function(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"item1",{get:function(){return this._item1},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"item2",{get:function(){return this._item2},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"item3",{get:function(){return this._item3},enumerable:false,configurable:true});n.prototype.deepClone=function(){return new n(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)};n.prototype.appendChildOfSameHeight=function(t){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=t,this.handleChildrenChanged()};n.prototype.unappendChild=function(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();var t=this._item3;return this._item3=null,this.handleChildrenChanged(),t};n.prototype.prependChildOfSameHeight=function(t){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=t,this.handleChildrenChanged()};n.prototype.unprependChild=function(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();var t=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),t};n.prototype.toMutable=function(){return this};return n}(HA);var UA=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.toMutable=function(){return new zA(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)};n.prototype.throwIfImmutable=function(){throw new Error("this instance is immutable")};return n}(zA);var KA=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,n,i,e)||this,o._children=r;return o}Object.defineProperty(n.prototype,"childrenLength",{get:function(){return this._children.length},enumerable:false,configurable:true});n.prototype.getChild=function(t){return this._children[t]};n.prototype.setChild=function(t,n){this._children[t]=n};Object.defineProperty(n.prototype,"children",{get:function(){return this._children},enumerable:false,configurable:true});n.prototype.deepClone=function(){var t=new Array(this._children.length);for(var i=0;i<this._children.length;i++)t[i]=this._children[i].deepClone();return new n(this.length,this.listHeight,t,this.missingOpeningBracketIds)};n.prototype.appendChildOfSameHeight=function(t){this.throwIfImmutable(),this._children.push(t),this.handleChildrenChanged()};n.prototype.unappendChild=function(){this.throwIfImmutable();var t=this._children.pop();return this.handleChildrenChanged(),t};n.prototype.prependChildOfSameHeight=function(t){this.throwIfImmutable(),this._children.unshift(t),this.handleChildrenChanged()};n.prototype.unprependChild=function(){this.throwIfImmutable();var t=this._children.shift();return this.handleChildrenChanged(),t};n.prototype.toMutable=function(){return this};return n}(HA);var VA=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.toMutable=function(){return new KA(this.length,this.listHeight,__spreadArray([],this.children,true),this.missingOpeningBracketIds)};n.prototype.throwIfImmutable=function(){throw new Error("this instance is immutable")};return n}(KA);var qA=[];var GA=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}Object.defineProperty(n.prototype,"listHeight",{get:function(){return 0},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"childrenLength",{get:function(){return 0},enumerable:false,configurable:true});n.prototype.getChild=function(t){return null};Object.defineProperty(n.prototype,"children",{get:function(){return qA},enumerable:false,configurable:true});n.prototype.deepClone=function(){return this};return n}(PA);var $A=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}Object.defineProperty(n.prototype,"kind",{get:function(){return 0},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"missingOpeningBracketIds",{get:function(){return IA.getEmpty()},enumerable:false,configurable:true});n.prototype.canBeReused=function(t){return!0};n.prototype.computeMinIndentation=function(t,n){var i=kA(t),r=(i.columnCount===0?i.lineCount:i.lineCount+1)+1,e=function(t){return Math.floor(t/yA)}(xA(t,this.length))+1;var o=Number.MAX_SAFE_INTEGER;for(var s=r;s<=e;s++){var u=n.getLineFirstNonWhitespaceColumn(s),a=n.getLineContent(s);if(u===0)continue;var h=B_.visibleColumnFromColumn(a,u,n.getOptions().tabSize);o=Math.min(o,h)}return o};return n}(GA);var JA=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n)||this,e.bracketInfo=i,e.bracketIds=r;return e}n.create=function(t,i,r){return new n(t,i,r)};Object.defineProperty(n.prototype,"kind",{get:function(){return 1},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"missingOpeningBracketIds",{get:function(){return IA.getEmpty()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"text",{get:function(){return this.bracketInfo.bracketText},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"languageId",{get:function(){return this.bracketInfo.languageId},enumerable:false,configurable:true});n.prototype.canBeReused=function(t){return!1};n.prototype.computeMinIndentation=function(t,n){return Number.MAX_SAFE_INTEGER};return n}(GA);var ZA=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r.missingOpeningBracketIds=n;return r}Object.defineProperty(n.prototype,"kind",{get:function(){return 3},enumerable:false,configurable:true});n.prototype.canBeReused=function(t){return!t.intersects(this.missingOpeningBracketIds)};n.prototype.computeMinIndentation=function(t,n){return Number.MAX_SAFE_INTEGER};return n}(GA);var QA=function(){function t(t,n,i,r,e){this.length=t,this.kind=n,this.bracketId=i,this.bracketIds=r,this.astNode=e}return t}();var YA=function(){function t(t,n){this.textModel=t,this.bracketTokens=n,this.reader=new XA(this.textModel,this.bracketTokens),this._offset=mA,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=t.getLineCount(),this.textBufferLastLineLength=t.getLineLength(this.textBufferLineCount)}Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"length",{get:function(){return _A(this.textBufferLineCount-1,this.textBufferLastLineLength)},enumerable:false,configurable:true});t.prototype.skip=function(t){this.didPeek=!1,this._offset=xA(this._offset,t);var n=kA(this._offset);this.reader.setPosition(n.lineCount,n.columnCount)};t.prototype.read=function(){var t;return this.peeked?(this.didPeek=!1,t=this.peeked):t=this.reader.read(),t&&(this._offset=xA(this._offset,t.length)),t};t.prototype.peek=function(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked};return t}();var XA=function(){function t(t,n){this.textModel=t,this.bracketTokens=n,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=t.getLineCount(),this.textBufferLastLineLength=t.getLineLength(this.textBufferLineCount)}t.prototype.setPosition=function(t,n){t===this.lineIdx?(this.lineCharOffset=n,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=t,this.lineCharOffset=n,this.line=null),this.peekedToken=null};t.prototype.read=function(){if(this.peekedToken){var t=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=t.length,t}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));var n=this.lineIdx,i=this.lineCharOffset;var r=0;for(;;){var t=this.lineTokens,e=t.getCount();var o=null;if(this.lineTokenOffset<e){var s=t.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<e&&s===t.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;var u=wp.getTokenType(s)===0,a=wp.containsBalancedBrackets(s),h=t.getEndOffset(this.lineTokenOffset);if(a&&u&&this.lineCharOffset<h){var c=t.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,h),l=this.bracketTokens.getSingleLanguageBracketTokens(c),v=l.regExpGlobal;if(v){v.lastIndex=0;var d=v.exec(f);d&&(o=l.getToken(d[0]),o&&(this.lineCharOffset+=d.index))}}if(r+=h-this.lineCharOffset,o){if(n!==this.lineIdx||i!==this.lineCharOffset){this.peekedToken=o;break}return this.lineCharOffset+=o.length,o}this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,r+=33,r>1e3))break;if(r>1500)break}var g=(p=n,w=i,m=this.lineIdx,b=this.lineCharOffset,p!==m?_A(m-p,b):_A(0,b-w));var p,w,m,b;return new QA(g,0,-1,IA.getEmpty(),new $A(g))};return t}();var tO=function(){function t(t,n){this.text=t,this._offset=mA,this.idx=0;var i=n.getRegExpStr(),r=i?new RegExp(i+"|\n","gi"):null,e=[];var o,s=0,u=0,a=0,h=0;var c=[];for(var f=0;f<60;f++)c.push(new QA(_A(0,f),0,-1,IA.getEmpty(),new $A(_A(0,f))));var l=[];for(var f=0;f<60;f++)l.push(new QA(_A(1,f),0,-1,IA.getEmpty(),new $A(_A(1,f))));if(r)for(r.lastIndex=0;(o=r.exec(t))!==null;){var f=o.index,v=o[0];if(v==="\n")s++,u=f+1;else{if(a!==f){var d=void 0;if(h===s){var g=f-a;if(g<c.length)d=c[g];else{var p=_A(0,g);d=new QA(p,0,-1,IA.getEmpty(),new $A(p))}}else{var g=s-h,p=f-u;if(g===1&&p<l.length)d=l[p];else{var w=_A(g,p);d=new QA(w,0,-1,IA.getEmpty(),new $A(w))}}e.push(d)}e.push(n.getToken(v)),a=f+v.length,h=s}}var m=t.length;if(a!==m){var f=h===s?_A(0,m-a):_A(s-h,m-u);e.push(new QA(f,0,-1,IA.getEmpty(),new $A(f)))}this.length=_A(s,m-u),this.tokens=e}Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},enumerable:false,configurable:true});t.prototype.read=function(){return this.tokens[this.idx++]||null};t.prototype.peek=function(){return this.tokens[this.idx]||null};t.prototype.skip=function(t){throw new ni};return t}();var nO=function(){function t(t){this.map=t,this.hasRegExp=!1,this._regExpGlobal=null}t.createFromLanguage=function(n,i){function r(t){return i.getKey("".concat(t.languageId,":::").concat(t.bracketText))}var e=new Map;for(var o=0,s=n.bracketsNew.openingBrackets;o<s.length;o++){var u=s[o];var a=_A(0,u.bracketText.length),h=r(u),c=IA.getEmpty().add(h,BA);e.set(u.bracketText,new QA(a,1,h,c,JA.create(a,u,c)))}for(var f=0,l=n.bracketsNew.closingBrackets;f<l.length;f++){var u=l[f];var a=_A(0,u.bracketText.length);var h=IA.getEmpty();var c=u.getOpeningBrackets();for(var v=0,d=c;v<d.length;v++){var g=d[v];h=h.add(r(g),BA)}e.set(u.bracketText,new QA(a,2,r(c[0]),h,JA.create(a,u,h)))}return new t(e)};t.prototype.getRegExpStr=function(){if(this.isEmpty)return null;{var t=__spreadArray([],this.map.keys(),true);return t.sort(),t.reverse(),t.map((function(t){return function(t){var n=uo(t);return/^[\w ]+/.test(t)&&(n="\\b".concat(n)),/[\w ]+$/.test(t)&&(n="".concat(n,"\\b")),n}(t)})).join("|")}};Object.defineProperty(t.prototype,"regExpGlobal",{get:function(){if(!this.hasRegExp){var t=this.getRegExpStr();this._regExpGlobal=t?new RegExp(t,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal},enumerable:false,configurable:true});t.prototype.getToken=function(t){return this.map.get(t.toLowerCase())};t.prototype.findClosingTokenText=function(t){for(var n=0,i=this.map;n<i.length;n++){var r=i[n],e=r[0],o=r[1];if(o.kind===2&&o.bracketIds.intersects(t))return e}};Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.map.size===0},enumerable:false,configurable:true});return t}();var iO=function(){function t(t,n){this.denseKeyProvider=t,this.getLanguageConfiguration=n,this.languageIdToBracketTokens=new Map}t.prototype.didLanguageChange=function(t){return this.languageIdToBracketTokens.has(t)};t.prototype.getSingleLanguageBracketTokens=function(t){var n=this.languageIdToBracketTokens.get(t);return n||(n=nO.createFromLanguage(this.getLanguageConfiguration(t),this.denseKeyProvider),this.languageIdToBracketTokens.set(t,n)),n};return t}();function rO(t,n){if(n===void 0){n=!1}if(t.length===0)return null;if(t.length===1)return t[0];var i=t.length;for(;i>3;){var r=i>>1;for(var e=0;e<r;e++){var o=e<<1;t[e]=HA.create23(t[o],t[o+1],o+3===i?t[o+2]:null,n)}i=r}return HA.create23(t[0],t[1],i>=3?t[2]:null,n)}function eO(t,n){return Math.abs(t.listHeight-n.listHeight)}function oO(t,n){return t.listHeight===n.listHeight?HA.create23(t,n,null,!1):t.listHeight>n.listHeight?function(t,n){var i=t=t.toMutable();var r=[];var e;for(;;){if(n.listHeight===i.listHeight){e=n;break}if(i.kind!==4)throw new Error("unexpected");r.push(i),i=i.makeLastElementMutable()}for(var o=r.length-1;o>=0;o--){var s=r[o];e?s.childrenLength>=3?e=HA.create23(s.unappendChild(),e,null,!1):(s.appendChildOfSameHeight(e),e=void 0):s.handleChildrenChanged()}return e?HA.create23(t,e,null,!1):t}(t,n):function(t,n){var i=t=t.toMutable();var r=[];for(;n.listHeight!==i.listHeight;){if(i.kind!==4)throw new Error("unexpected");r.push(i),i=i.makeFirstElementMutable()}var e=n;for(var o=r.length-1;o>=0;o--){var s=r[o];e?s.childrenLength>=3?e=HA.create23(e,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(e),e=void 0):s.handleChildrenChanged()}return e?HA.create23(e,t,null,!1):t}(n,t)}var sO=function(){function t(t){this.lastOffset=mA,this.nextNodes=[t],this.offsets=[mA],this.idxs=[]}t.prototype.readLongestNodeAt=function(t,n){if(AA(t,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=t;;){var i=aO(this.nextNodes);if(!i)return;var r=aO(this.offsets);if(AA(t,r))return;if(AA(r,t))if(xA(r,i.length)<=t)this.nextNodeAfterCurrent();else{var e=uO(i);e!==-1?(this.nextNodes.push(i.getChild(e)),this.offsets.push(r),this.idxs.push(e)):this.nextNodeAfterCurrent()}else{if(n(i))return this.nextNodeAfterCurrent(),i;{var e=uO(i);if(e===-1)return void this.nextNodeAfterCurrent();this.nextNodes.push(i.getChild(e)),this.offsets.push(r),this.idxs.push(e)}}}};t.prototype.nextNodeAfterCurrent=function(){for(;;){var t=aO(this.offsets),n=aO(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;var i=aO(this.nextNodes),r=uO(i,this.idxs[this.idxs.length-1]);if(r!==-1){this.nextNodes.push(i.getChild(r)),this.offsets.push(xA(t,n.length)),this.idxs[this.idxs.length-1]=r;break}this.idxs.pop()}};return t}();function uO(t,n){if(n===void 0){n=-1}for(;;){if(++n>=t.childrenLength)return-1;if(t.getChild(n))return n}}function aO(t){return t.length>0?t[t.length-1]:void 0}function hO(t,n,i,r){return new cO(t,n,i,r).parseDocument()}var cO=function(){function t(t,n,i,r){if(this.tokenizer=t,this.createImmutableLists=r,this._itemsConstructed=0,this._itemsFromCache=0,i&&r)throw new Error("Not supported");this.oldNodeReader=i?new sO(i):void 0,this.positionMapper=new jA(n)}t.prototype.parseDocument=function(){this._itemsConstructed=0,this._itemsFromCache=0;var t=this.parseList(IA.getEmpty(),0);return t||(t=HA.getEmpty()),t};t.prototype.parseList=function(t,n){var i=[];for(;;){var r=this.tryReadChildFromCache(t);if(!r){var e=this.tokenizer.peek();if(!e||e.kind===2&&e.bracketIds.intersects(t))break;r=this.parseChild(t,n+1)}r.kind===4&&r.childrenLength===0||i.push(r)}return this.oldNodeReader?function(t){if(t.length===0)return null;if(t.length===1)return t[0];var n=0;function i(){if(n>=t.length)return null;var i=n,r=t[i].listHeight;for(n++;n<t.length&&t[n].listHeight===r;)n++;return n-i>=2?rO(i===0&&n===t.length?t:t.slice(i,n),!1):t[i]}var r=i(),e=i();if(!e)return r;for(var o=i();o;o=i())eO(r,e)<=eO(e,o)?(r=oO(r,e),e=o):e=oO(e,o);return oO(r,e)}(i):rO(i,this.createImmutableLists)};t.prototype.tryReadChildFromCache=function(t){if(this.oldNodeReader){var n=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(n===null||!bA(n)){var i=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(function(i){return n!==null&&!AA(i.length,n)?!1:i.canBeReused(t)}));if(i)return this._itemsFromCache++,this.tokenizer.skip(i.length),i}}};t.prototype.parseChild=function(t,n){this._itemsConstructed++;var i=this.tokenizer.read();switch(i.kind){case 2:return new ZA(i.bracketIds,i.length);case 0:return i.astNode;case 1:{if(n>300)return new $A(i.length);var r=t.merge(i.bracketIds),e=this.parseList(r,n+1),o=this.tokenizer.peek();return o&&o.kind===2&&(o.bracketId===i.bracketId||o.bracketIds.intersects(i.bracketIds))?(this.tokenizer.read(),WA.create(i.astNode,e,o.astNode)):WA.create(i.astNode,e,null)}default:throw new Error("unexpected")}};return t}();function fO(t,n){if(t.length===0)return n;if(n.length===0)return t;var i=new N(vO(t)),r=vO(n);r.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});var e=i.dequeue();function o(t){if(t===void 0){var n=i.takeWhile((function(t){return!0}))||[];return e&&n.unshift(e),n}var r=[];for(;e&&!bA(t);){var o=e.splitAt(t),n=o[0],s=o[1];r.push(n),t=DA(n.lengthAfter,t),e=s!==null&&s!==void 0?s:i.dequeue()}return bA(t)||r.push(new lO(!1,t,t)),r}var s=[];function u(t,n,i){if(s.length>0&&SA(s[s.length-1].endOffset,t)){var r=s[s.length-1];s[s.length-1]=new LA(r.startOffset,n,xA(r.newLength,i))}else s.push({startOffset:t,endOffset:n,newLength:i})}var a=mA;for(var h=0,c=r;h<c.length;h++){var f=c[h];var l=o(f.lengthBefore);if(f.modified){var v=xA(a,CA(l,(function(t){return t.lengthBefore})));u(a,v,f.lengthAfter),a=v}else for(var d=0,g=l;d<g.length;d++){var v=g[d];var p=a;a=xA(a,v.lengthBefore),v.modified&&u(p,a,v.lengthAfter)}}return s}var lO=function(){function t(t,n,i){this.modified=t,this.lengthBefore=n,this.lengthAfter=i}t.prototype.splitAt=function(n){var i=DA(n,this.lengthAfter);return SA(i,mA)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,n),new t(this.modified,mA,i)]:[new t(this.modified,n,n),new t(this.modified,i,i)]};t.prototype.toString=function(){return"".concat(this.modified?"M":"U",":").concat(kA(this.lengthBefore)," -> ").concat(kA(this.lengthAfter))};return t}();function vO(t){var n=[];var i=mA;for(var r=0,e=t;r<e.length;r++){var o=e[r];var s=DA(i,o.startOffset);bA(s)||n.push(new lO(!1,s,s));var u=DA(o.startOffset,o.endOffset);n.push(new lO(!0,u,o.newLength)),i=o.endOffset}return n}var dO=function(t){__extends(n,t);function n(n,i){var r=this;if(r=t.call(this)||this,r.textModel=n,r.getLanguageConfiguration=i,r.didChangeEmitter=new ki,r.denseKeyProvider=new NA,r.brackets=new iO(r.denseKeyProvider,r.getLanguageConfiguration),r.onDidChange=r.didChangeEmitter.event,r.queuedTextEditsForInitialAstWithoutTokens=[],r.queuedTextEdits=[],n.tokenization.hasTokens)n.tokenization.backgroundTokenizationState===2?(r.initialAstWithoutTokens=void 0,r.astWithTokens=r.parseDocumentFromTextBuffer([],void 0,!1)):(r.initialAstWithoutTokens=r.parseDocumentFromTextBuffer([],void 0,!0),r.astWithTokens=r.initialAstWithoutTokens);else{var e=r.brackets.getSingleLanguageBracketTokens(r.textModel.getLanguageId()),o=new tO(r.textModel.getValue(),e);r.initialAstWithoutTokens=hO(o,[],void 0,!0),r.astWithTokens=r.initialAstWithoutTokens}return r}n.prototype.didLanguageChange=function(t){return this.brackets.didLanguageChange(t)};n.prototype.handleDidChangeBackgroundTokenizationState=function(){if(this.textModel.tokenization.backgroundTokenizationState===2){var t=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,t||this.didChangeEmitter.fire()}};n.prototype.handleDidChangeTokens=function(t){var n=t.ranges;var i=n.map((function(t){return new LA(_A(t.fromLineNumber-1,0),_A(t.toLineNumber,0),_A(t.toLineNumber-t.fromLineNumber+1,0))}));this.handleEdits(i,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()};n.prototype.handleContentChanged=function(t){var n=LA.fromModelContentChanges(t.changes);this.handleEdits(n,!1)};n.prototype.handleEdits=function(t,n){var i=fO(this.queuedTextEdits,t);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!n&&(this.queuedTextEditsForInitialAstWithoutTokens=fO(this.queuedTextEditsForInitialAstWithoutTokens,t))};n.prototype.flushQueue=function(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])};n.prototype.parseDocumentFromTextBuffer=function(t,n,i){var r=n;return hO(new YA(this.textModel,this.brackets),t,r,i)};n.prototype.getBracketsInRange=function(t,n){var i=this;this.flushQueue();var r=_A(t.startLineNumber-1,t.startColumn-1),e=_A(t.endLineNumber-1,t.endColumn-1);return new P((function(t){var o=i.initialAstWithoutTokens||i.astWithTokens;wO(o,mA,o.length,r,e,t,0,0,new Map,n)}))};n.prototype.getBracketPairsInRange=function(t,n){var i=this;this.flushQueue();var r=MA(t.getStartPosition()),e=MA(t.getEndPosition());return new P((function(t){var o=i.initialAstWithoutTokens||i.astWithTokens,s=new mO(t,n,i.textModel);bO(o,mA,o.length,r,e,s,0,new Map)}))};n.prototype.getFirstBracketAfter=function(t){this.flushQueue();var n=this.initialAstWithoutTokens||this.astWithTokens;return pO(n,mA,n.length,MA(t))};n.prototype.getFirstBracketBefore=function(t){this.flushQueue();var n=this.initialAstWithoutTokens||this.astWithTokens;return gO(n,mA,n.length,MA(t))};return n}(ci);function gO(t,n,i,r){if(t.kind===4||t.kind===2){var e=[];for(var o=0,s=t.children;o<s.length;o++){var u=s[o];i=xA(n,u.length),e.push({nodeOffsetStart:n,nodeOffsetEnd:i}),n=i}for(var u=e.length-1;u>=0;u--){var a=e[u],h=a.nodeOffsetStart,c=a.nodeOffsetEnd;if(AA(h,r)){var f=gO(t.children[u],h,c,r);if(f)return f}}return null}if(t.kind===3)return null;if(t.kind===1){var e=FA(n,i);return{bracketInfo:t.bracketInfo,range:e}}return null}function pO(t,n,i,r){if(t.kind===4||t.kind===2){for(var e=0,o=t.children;e<o.length;e++){var s=o[e];if(AA(r,i=xA(n,s.length))){var u=pO(s,n,i,r);if(u)return u}n=i}return null}if(t.kind===3)return null;if(t.kind===1){var s=FA(n,i);return{bracketInfo:t.bracketInfo,range:s}}return null}function wO(t,n,i,r,e,o,s,u,a,h,c){if(c===void 0){c=!1}if(s>200)return!0;t:for(;;)switch(t.kind){case 4:{var f=t.childrenLength;for(var l=0;l<f;l++){var v=t.getChild(l);if(v){if(i=xA(n,v.length),OA(n,e)&&EA(i,r)){if(EA(i,e)){t=v;continue t}if(!wO(v,n,i,r,e,o,s,0,a,h))return!1}n=i}}return!0}case 2:{var f=!h||!t.closingBracket||t.closingBracket.bracketInfo.closesColorized(t.openingBracket.bracketInfo);var l=0;if(a){var d=a.get(t.openingBracket.text);d===void 0&&(d=0),l=d,f&&(d++,a.set(t.openingBracket.text,d))}var v=t.childrenLength;for(var d=0;d<v;d++){var g=t.getChild(d);if(g){if(i=xA(n,g.length),OA(n,e)&&EA(i,r)){if(EA(i,e)&&g.kind!==1){t=g,f?(s++,u=l+1):u=l;continue t}if((f||g.kind!==1||!t.closingBracket)&&!wO(g,n,i,r,e,o,f?s+1:s,f?l+1:l,a,h,!t.closingBracket))return!1}n=i}}return a==null||a.set(t.openingBracket.text,l),!0}case 3:{var f=FA(n,i);return o(new dA(f,s-1,0,!0))}case 1:{var f=FA(n,i);return o(new dA(f,s-1,u-1,c))}case 0:return!0}}var mO=function(){function t(t,n,i){this.push=t,this.includeMinIndentation=n,this.textModel=i}return t}();function bO(t,n,i,r,e,o,s,u){var a;if(s>200)return!0;var h=!0;if(t.kind===2){var c=0;if(u){var f=u.get(t.openingBracket.text);f===void 0&&(f=0),c=f,f++,u.set(t.openingBracket.text,f)}var l=xA(n,t.openingBracket.length);var v=-1;if(o.includeMinIndentation&&(v=t.computeMinIndentation(n,o.textModel)),h=o.push(new pA(FA(n,i),FA(n,l),t.closingBracket?FA(xA(l,((a=t.child)===null||a===void 0?void 0:a.length)||mA),i):void 0,s,c,t,v)),n=l,h&&t.child){var f=t.child;if(i=xA(n,f.length),OA(n,e)&&EA(i,r)&&(h=bO(f,n,i,r,e,o,s+1,u),!h))return!1}u==null||u.set(t.openingBracket.text,c)}else{var c=n;for(var d=0,g=t.children;d<g.length;d++){var l=g[d];var v=c;if(c=xA(c,l.length),OA(v,e)&&OA(r,c)&&(h=bO(l,v,c,r,e,o,s,u),!h))return!1}}return h}var yO=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.textModel=n,r.languageConfigurationService=i,r.bracketPairsTree=r._register(new fi),r.onDidChangeEmitter=new ki,r.onDidChange=r.onDidChangeEmitter.event,r.bracketsRequested=!1,r._register(r.languageConfigurationService.onDidChange((function(t){var n;t.languageId&&!(!((n=r.bracketPairsTree.value)===null||n===void 0)&&n.object.didLanguageChange(t.languageId))||(r.bracketPairsTree.clear(),r.updateBracketPairsTree())})));return r}Object.defineProperty(n.prototype,"canBuildAST",{get:function(){return this.textModel.getValueLength()<=5e6},enumerable:false,configurable:true});n.prototype.handleDidChangeOptions=function(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()};n.prototype.handleDidChangeLanguage=function(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()};n.prototype.handleDidChangeContent=function(t){var n;(n=this.bracketPairsTree.value)===null||n===void 0||n.object.handleContentChanged(t)};n.prototype.handleDidChangeBackgroundTokenizationState=function(){var t;(t=this.bracketPairsTree.value)===null||t===void 0||t.object.handleDidChangeBackgroundTokenizationState()};n.prototype.handleDidChangeTokens=function(t){var n;(n=this.bracketPairsTree.value)===null||n===void 0||n.object.handleDidChangeTokens(t)};n.prototype.updateBracketPairsTree=function(){var t=this;if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){var n=new hi;this.bracketPairsTree.value=(i=n.add(new dO(this.textModel,(function(n){return t.languageConfigurationService.getLanguageConfiguration(n)}))),r=n,{object:i,dispose:function(){return r==null?void 0:r.dispose()}}),n.add(this.bracketPairsTree.value.object.onDidChange((function(n){return t.onDidChangeEmitter.fire(n)}))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire());var i,r};n.prototype.getBracketPairsInRange=function(t){var n;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)===null||n===void 0?void 0:n.object.getBracketPairsInRange(t,!1))||P.empty};n.prototype.getBracketPairsInRangeWithMinIndentation=function(t){var n;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)===null||n===void 0?void 0:n.object.getBracketPairsInRange(t,!0))||P.empty};n.prototype.getBracketsInRange=function(t,n){if(n===void 0){n=!1}var i;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((i=this.bracketPairsTree.value)===null||i===void 0?void 0:i.object.getBracketsInRange(t,n))||P.empty};n.prototype.findMatchingBracketUp=function(t,n,i){var r=this.textModel.validatePosition(n),e=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);if(this.canBuildAST){var o=this.languageConfigurationService.getLanguageConfiguration(e).bracketsNew.getClosingBracketInfo(t);if(!o)return null;var s=this.getBracketPairsInRange(Ir.fromPositions(n,n)).findLast((function(t){return o.closes(t.openingBracketInfo)}));return s?s.openingBracketRange:null}{var u=t.toLowerCase(),s=this.languageConfigurationService.getLanguageConfiguration(e).brackets;if(!s)return null;var a=s.textIsBracket[u];return a?xO(this._findMatchingBracketUp(a,r,_O(i))):null}};n.prototype.matchBracket=function(t,n){if(this.canBuildAST){var i=this.getBracketPairsInRange(Ir.fromPositions(t,t)).filter((function(n){return n.closingBracketRange!==void 0&&(n.openingBracketRange.containsPosition(t)||n.closingBracketRange.containsPosition(t))})).findLastMaxBy(R((function(n){return n.openingBracketRange.containsPosition(t)?n.openingBracketRange:n.closingBracketRange}),Ir.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}{var i=_O(n);return this._matchBracket(this.textModel.validatePosition(t),i)}};n.prototype._establishBracketSearchOffsets=function(t,n,i,r){var e=n.getCount(),o=n.getLanguageId(r);var s=Math.max(0,t.column-1-i.maxBracketLength);for(var u=r-1;u>=0;u--){var a=n.getEndOffset(u);if(a<=s)break;if(vl(n.getStandardTokenType(u))||n.getLanguageId(u)!==o){s=a;break}}var h=Math.min(n.getLineContent().length,t.column-1+i.maxBracketLength);for(var u=r+1;u<e;u++){var a=n.getStartOffset(u);if(a>=h)break;if(vl(n.getStandardTokenType(u))||n.getLanguageId(u)!==o){h=a;break}}return{searchStartOffset:s,searchEndOffset:h}};n.prototype._matchBracket=function(t,n){var i=t.lineNumber,r=this.textModel.tokenization.getLineTokens(i),e=this.textModel.getLineContent(i),o=r.findTokenIndexAtOffset(t.column-1);if(o<0)return null;var s=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(o)).brackets;if(s&&!vl(r.getStandardTokenType(o))){var u=this._establishBracketSearchOffsets(t,r,s,o),a=u.searchStartOffset,h=u.searchEndOffset,c=null;for(;;){var f=Pl.findNextBracketInRange(s.forwardRegex,i,e,a,h);if(!f)break;if(f.startColumn<=t.column&&t.column<=f.endColumn){var l=e.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),v=this._matchFoundBracket(f,s.textIsBracket[l],s.textIsOpenBracket[l],n);if(v){if(v instanceof kO)return null;c=v}}a=f.endColumn-1}if(c)return c}if(o>0&&r.getStartOffset(o)===t.column-1){var a=o-1,h=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(a)).brackets;if(h&&!vl(r.getStandardTokenType(a))){var d=this._establishBracketSearchOffsets(t,r,h,a),c=d.searchStartOffset,f=d.searchEndOffset,l=Pl.findPrevBracketInRange(h.reversedRegex,i,e,c,f);if(l&&l.startColumn<=t.column&&t.column<=l.endColumn){var v=e.substring(l.startColumn-1,l.endColumn-1).toLowerCase(),g=this._matchFoundBracket(l,h.textIsBracket[v],h.textIsOpenBracket[v],n);if(g)return g instanceof kO?null:g}}}return null};n.prototype._matchFoundBracket=function(t,n,i,r){if(!n)return null;var e=i?this._findMatchingBracketDown(n,t.getEndPosition(),r):this._findMatchingBracketUp(n,t.getStartPosition(),r);return e?e instanceof kO?e:[t,e]:null};n.prototype._findMatchingBracketUp=function(t,n,i){var r=t.languageId,e=t.reversedRegex;var o=-1,s=0;var u=function(n,r,u,a){for(;;){if(i&&++s%100==0&&!i())return kO.INSTANCE;var h=Pl.findPrevBracketInRange(e,n,r,u,a);if(!h)break;var c=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(t.isOpen(c)?o++:t.isClose(c)&&o--,o===0)return h;a=h.startColumn-1}return null};for(var a=n.lineNumber;a>=1;a--){var h=this.textModel.tokenization.getLineTokens(a),c=h.getCount(),f=this.textModel.getLineContent(a);var l=c-1,v=f.length,d=f.length;a===n.lineNumber&&(l=h.findTokenIndexAtOffset(n.column-1),v=n.column-1,d=n.column-1);var g=!0;for(;l>=0;l--){var p=h.getLanguageId(l)===r&&!vl(h.getStandardTokenType(l));if(p)g?v=h.getStartOffset(l):(v=h.getStartOffset(l),d=h.getEndOffset(l));else if(g&&v!==d){var w=u(a,f,v,d);if(w)return w}g=p}if(g&&v!==d){var p=u(a,f,v,d);if(p)return p}}return null};n.prototype._findMatchingBracketDown=function(t,n,i){var r=t.languageId,e=t.forwardRegex;var o=1,s=0;var u=function(n,r,u,a){for(;;){if(i&&++s%100==0&&!i())return kO.INSTANCE;var h=Pl.findNextBracketInRange(e,n,r,u,a);if(!h)break;var c=r.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(t.isOpen(c)?o++:t.isClose(c)&&o--,o===0)return h;u=h.endColumn-1}return null},a=this.textModel.getLineCount();for(var h=n.lineNumber;h<=a;h++){var c=this.textModel.tokenization.getLineTokens(h),f=c.getCount(),l=this.textModel.getLineContent(h);var v=0,d=0,g=0;h===n.lineNumber&&(v=c.findTokenIndexAtOffset(n.column-1),d=n.column-1,g=n.column-1);var p=!0;for(;v<f;v++){var w=c.getLanguageId(v)===r&&!vl(c.getStandardTokenType(v));if(w)p||(d=c.getStartOffset(v)),g=c.getEndOffset(v);else if(p&&d!==g){var m=u(h,l,d,g);if(m)return m}p=w}if(p&&d!==g){var w=u(h,l,d,g);if(w)return w}}return null};n.prototype.findPrevBracket=function(t){var n;var i=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)===null||n===void 0?void 0:n.object.getFirstBracketBefore(i))||null;var r=null,e=null,o=null;for(var s=i.lineNumber;s>=1;s--){var u=this.textModel.tokenization.getLineTokens(s),a=u.getCount(),h=this.textModel.getLineContent(s);var c=a-1,f=h.length,l=h.length;if(s===i.lineNumber){c=u.findTokenIndexAtOffset(i.column-1),f=i.column-1,l=i.column-1;var v=u.getLanguageId(c);r!==v&&(r=v,e=this.languageConfigurationService.getLanguageConfiguration(r).brackets,o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}var d=!0;for(;c>=0;c--){var v=u.getLanguageId(c);if(r!==v){if(e&&o&&d&&f!==l){var g=Pl.findPrevBracketInRange(e.reversedRegex,s,h,f,l);if(g)return this._toFoundBracket(o,g);d=!1}r=v,e=this.languageConfigurationService.getLanguageConfiguration(r).brackets,o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}var p=!!e&&!vl(u.getStandardTokenType(c));if(p)d?f=u.getStartOffset(c):(f=u.getStartOffset(c),l=u.getEndOffset(c));else if(o&&e&&d&&f!==l){var g=Pl.findPrevBracketInRange(e.reversedRegex,s,h,f,l);if(g)return this._toFoundBracket(o,g)}d=p}if(o&&e&&d&&f!==l){var v=Pl.findPrevBracketInRange(e.reversedRegex,s,h,f,l);if(v)return this._toFoundBracket(o,v)}}return null};n.prototype.findNextBracket=function(t){var n;var i=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)===null||n===void 0?void 0:n.object.getFirstBracketAfter(i))||null;var r=this.textModel.getLineCount();var e=null,o=null,s=null;for(var u=i.lineNumber;u<=r;u++){var a=this.textModel.tokenization.getLineTokens(u),h=a.getCount(),c=this.textModel.getLineContent(u);var f=0,l=0,v=0;if(u===i.lineNumber){f=a.findTokenIndexAtOffset(i.column-1),l=i.column-1,v=i.column-1;var d=a.getLanguageId(f);e!==d&&(e=d,o=this.languageConfigurationService.getLanguageConfiguration(e).brackets,s=this.languageConfigurationService.getLanguageConfiguration(e).bracketsNew)}var g=!0;for(;f<h;f++){var d=a.getLanguageId(f);if(e!==d){if(s&&o&&g&&l!==v){var p=Pl.findNextBracketInRange(o.forwardRegex,u,c,l,v);if(p)return this._toFoundBracket(s,p);g=!1}e=d,o=this.languageConfigurationService.getLanguageConfiguration(e).brackets,s=this.languageConfigurationService.getLanguageConfiguration(e).bracketsNew}var w=!!o&&!vl(a.getStandardTokenType(f));if(w)g||(l=a.getStartOffset(f)),v=a.getEndOffset(f);else if(s&&o&&g&&l!==v){var p=Pl.findNextBracketInRange(o.forwardRegex,u,c,l,v);if(p)return this._toFoundBracket(s,p)}g=w}if(s&&o&&g&&l!==v){var d=Pl.findNextBracketInRange(o.forwardRegex,u,c,l,v);if(d)return this._toFoundBracket(s,d)}}return null};n.prototype.findEnclosingBrackets=function(t,n){var i=this;var r=this.textModel.validatePosition(t);if(this.canBuildAST){var e=Ir.fromPositions(r),o=this.getBracketPairsInRange(Ir.fromPositions(r,r)).findLast((function(t){return t.closingBracketRange!==void 0&&t.range.strictContainsRange(e)}));return o?[o.openingBracketRange,o.closingBracketRange]:null}var s=_O(n),u=this.textModel.getLineCount(),a=new Map;var h=[];var c=function(t,n){if(!a.has(t)){var i=[];for(var r=0,e=n?n.brackets.length:0;r<e;r++)i[r]=0;a.set(t,i)}h=a.get(t)};var f=0;var l=function(t,n,r,e,o){for(;;){if(s&&++f%100==0&&!s())return kO.INSTANCE;var u=Pl.findNextBracketInRange(t.forwardRegex,n,r,e,o);if(!u)break;var a=r.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),c=t.textIsBracket[a];if(c&&(c.isOpen(a)?h[c.index]++:c.isClose(a)&&h[c.index]--,h[c.index]===-1))return i._matchFoundBracket(u,c,!1,s);e=u.endColumn-1}return null};var v=null,d=null;for(var g=r.lineNumber;g<=u;g++){var o=this.textModel.tokenization.getLineTokens(g),p=o.getCount(),w=this.textModel.getLineContent(g);var m=0,b=0,y=0;if(g===r.lineNumber){m=o.findTokenIndexAtOffset(r.column-1),b=r.column-1,y=r.column-1;var _=o.getLanguageId(m);v!==_&&(v=_,d=this.languageConfigurationService.getLanguageConfiguration(v).brackets,c(v,d))}var k=!0;for(;m<p;m++){var _=o.getLanguageId(m);if(v!==_){if(d&&k&&b!==y){var x=l(d,g,w,b,y);if(x)return xO(x);k=!1}v=_,d=this.languageConfigurationService.getLanguageConfiguration(v).brackets,c(v,d)}var C=!!d&&!vl(o.getStandardTokenType(m));if(C)k||(b=o.getStartOffset(m)),y=o.getEndOffset(m);else if(d&&k&&b!==y){var x=l(d,g,w,b,y);if(x)return xO(x)}k=C}if(d&&k&&b!==y){var _=l(d,g,w,b,y);if(_)return xO(_)}}return null};n.prototype._toFoundBracket=function(t,n){if(!n)return null;var i=this.textModel.getValueInRange(n);i=i.toLowerCase();var r=t.getBracketInfo(i);return r?{range:n,bracketInfo:r}:null};return n}(ci);function _O(t){if(t===void 0)return function(){return!0};{var n=Date.now();return function(){return Date.now()-n<=t}}}var kO=function(){function t(){this._searchCanceledBrand=void 0}return t}();function xO(t){return t instanceof kO?null:t}kO.INSTANCE=new kO;var CO=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.textModel=n,i.colorProvider=new SO,i.onDidChangeEmitter=new ki,i.onDidChange=i.onDidChangeEmitter.event,i.colorizationOptions=n.getOptions().bracketPairColorizationOptions,i._register(n.bracketPairs.onDidChange((function(t){i.onDidChangeEmitter.fire()})));return i}n.prototype.handleDidChangeOptions=function(t){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions};n.prototype.getDecorationsInRange=function(t,n,i,r){var e=this;return r?[]:n===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(t,!0).map((function(t){return{id:"bracket".concat(t.range.toString(),"-").concat(t.nestingLevel),options:{description:"BracketPairColorization",inlineClassName:e.colorProvider.getInlineClassName(t,e.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:t.range}})).toArray():[]};n.prototype.getAllDecorations=function(t,n){return t===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new Ir(1,1,this.textModel.getLineCount(),1),t,n):[]};return n}(ci);var SO=function(){function t(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}t.prototype.getInlineClassName=function(t,n){return t.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(n?t.nestingLevelOfEqualBracketType:t.nestingLevel)};t.prototype.getInlineClassNameOfLevel=function(t){return"bracket-highlighting-"+t%30};return t}();function DO(t){return t.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}Gk((function(t,n){var i=[Ex,Mx,Fx,Lx,jx,Rx],r=new SO;n.addRule(".monaco-editor .".concat(r.unexpectedClosingBracketClassName," { color: ").concat(t.getColor(Tx),"; }"));var e=i.map((function(n){return t.getColor(n)})).filter((function(t){return!!t})).filter((function(t){return!t.isTransparent()}));for(var o=0;o<30;o++){var s=e[o%e.length];n.addRule(".monaco-editor .".concat(r.getInlineClassNameOfLevel(o)," { color: ").concat(s,"; }"))}}));var AO=function(){function t(t,n,i,r){this.oldPosition=t,this.oldText=n,this.newPosition=i,this.newText=r}Object.defineProperty(t.prototype,"oldLength",{get:function(){return this.oldText.length},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"oldEnd",{get:function(){return this.oldPosition+this.oldText.length},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"newLength",{get:function(){return this.newText.length},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"newEnd",{get:function(){return this.newPosition+this.newText.length},enumerable:false,configurable:true});t.prototype.toString=function(){return this.oldText.length===0?"(insert@".concat(this.oldPosition,' "').concat(DO(this.newText),'")'):this.newText.length===0?"(delete@".concat(this.oldPosition,' "').concat(DO(this.oldText),'")'):"(replace@".concat(this.oldPosition,' "').concat(DO(this.oldText),'" with "').concat(DO(this.newText),'")')};t._writeStringSize=function(t){return 4+2*t.length};t._writeString=function(t,n,i){var r=n.length;Cl(t,r,i),i+=4;for(var e=0;e<r;e++)kl(t,n.charCodeAt(e),i),i+=2;return i};t._readString=function(t,n){var i=xl(t,n);return El(t,n+=4,i)};t.prototype.writeSize=function(){return 8+t._writeStringSize(this.oldText)+t._writeStringSize(this.newText)};t.prototype.write=function(n,i){return Cl(n,this.oldPosition,i),i+=4,Cl(n,this.newPosition,i),i+=4,i=t._writeString(n,this.oldText,i),i=t._writeString(n,this.newText,i)};t.read=function(n,i,r){var e=xl(n,i),o=xl(n,i+=4);i+=4;var s=t._readString(n,i);i+=t._writeStringSize(s);var u=t._readString(n,i);return i+=t._writeStringSize(u),r.push(new t(e,s,o,u)),i};return t}();var OO=function(){function t(t,n){this._prevEdits=t,this._currEdits=n,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}t.prototype.compress=function(){var n=0,i=0,r=this._getPrev(n),e=this._getCurr(i);for(;n<this._prevLen||i<this._currLen;){if(r===null){this._acceptCurr(e),e=this._getCurr(++i);continue}if(e===null){this._acceptPrev(r),r=this._getPrev(++n);continue}if(e.oldEnd<=r.newPosition){this._acceptCurr(e),e=this._getCurr(++i);continue}if(r.newEnd<=e.oldPosition){this._acceptPrev(r),r=this._getPrev(++n);continue}if(e.oldPosition<r.newPosition){var o=t._splitCurr(e,r.newPosition-e.oldPosition),s=o[0],u=o[1];this._acceptCurr(s),e=u;continue}if(r.newPosition<e.oldPosition){var a=t._splitPrev(r,e.oldPosition-r.newPosition),s=a[0],u=a[1];this._acceptPrev(s),r=u;continue}var h=void 0,c=void 0;if(e.oldEnd===r.newEnd)h=r,c=e,r=this._getPrev(++n),e=this._getCurr(++i);else if(e.oldEnd<r.newEnd){var f=t._splitPrev(r,e.oldLength),s=f[0],u=f[1];h=s,c=e,r=u,e=this._getCurr(++i)}else{var l=t._splitCurr(e,r.newLength),s=l[0],u=l[1];h=r,c=s,r=this._getPrev(++n),e=u}this._result[this._resultLen++]=new AO(h.oldPosition,h.oldText,c.newPosition,c.newText),this._prevDeltaOffset+=h.newLength-h.oldLength,this._currDeltaOffset+=c.newLength-c.oldLength}var v=t._merge(this._result);return t._removeNoOps(v)};t.prototype._acceptCurr=function(n){this._result[this._resultLen++]=t._rebaseCurr(this._prevDeltaOffset,n),this._currDeltaOffset+=n.newLength-n.oldLength};t.prototype._getCurr=function(t){return t<this._currLen?this._currEdits[t]:null};t.prototype._acceptPrev=function(n){this._result[this._resultLen++]=t._rebasePrev(this._currDeltaOffset,n),this._prevDeltaOffset+=n.newLength-n.oldLength};t.prototype._getPrev=function(t){return t<this._prevLen?this._prevEdits[t]:null};t._rebaseCurr=function(t,n){return new AO(n.oldPosition-t,n.oldText,n.newPosition,n.newText)};t._rebasePrev=function(t,n){return new AO(n.oldPosition,n.oldText,n.newPosition+t,n.newText)};t._splitPrev=function(t,n){var i=t.newText.substr(0,n),r=t.newText.substr(n);return[new AO(t.oldPosition,t.oldText,t.newPosition,i),new AO(t.oldEnd,"",t.newPosition+n,r)]};t._splitCurr=function(t,n){var i=t.oldText.substr(0,n),r=t.oldText.substr(n);return[new AO(t.oldPosition,i,t.newPosition,t.newText),new AO(t.oldPosition+n,r,t.newEnd,"")]};t._merge=function(t){if(t.length===0)return t;var n=[];var i=0,r=t[0];for(var e=1;e<t.length;e++){var o=t[e];r.oldEnd===o.oldPosition?r=new AO(r.oldPosition,r.oldText+o.oldText,r.newPosition,r.newText+o.newText):(n[i++]=r,r=o)}return n[i++]=r,n};t._removeNoOps=function(t){if(t.length===0)return t;var n=[];var i=0;for(var r=0;r<t.length;r++){var e=t[r];e.oldText!==e.newText&&(n[i++]=e)}return n};return t}();function EO(t){return t===47||t===92}function MO(t){return t.replace(/[\\/]/g,cr.sep)}function FO(t,n){if(n===void 0){n=cr.sep}if(!t)return"";var i=t.length,r=t.charCodeAt(0);if(EO(r)){if(EO(t.charCodeAt(1))&&!EO(t.charCodeAt(2))){var e=3;var o=e;for(;e<i&&!EO(t.charCodeAt(e));e++);if(o!==e&&!EO(t.charCodeAt(e+1))){for(e+=1;e<i;e++)if(EO(t.charCodeAt(e)))return t.slice(0,e+1).replace(/[\\/]/g,n)}}return n}if(jO(r)&&t.charCodeAt(1)===58)return EO(t.charCodeAt(2))?t.slice(0,2)+n:t.slice(0,2);var s=t.indexOf("://");if(s!==-1){for(s+=3;s<i;s++)if(EO(t.charCodeAt(s)))return t.slice(0,s+1)}return""}function LO(t,n,i,r){if(r===void 0){r=wr}if(t===n)return!0;if(!t||!n||n.length>t.length)return!1;if(i){if(!So(t,n))return!1;if(n.length===t.length)return!0;var e=n.length;return n.charAt(n.length-1)===r&&e--,t.charAt(e)===r}return n.charAt(n.length-1)!==r&&(n+=r),t.indexOf(n)===0}function jO(t){return t>=65&&t<=90||t>=97&&t<=122}function RO(t){return Mr(t,!0)}var TO=new(function(){function t(t){this._ignorePathCasing=t}t.prototype.compare=function(t,n,i){if(i===void 0){i=!1}return t===n?0:wo(this.getComparisonKey(t,i),this.getComparisonKey(n,i))};t.prototype.isEqual=function(t,n,i){if(i===void 0){i=!1}return t===n||!(!t||!n)&&this.getComparisonKey(t,i)===this.getComparisonKey(n,i)};t.prototype.getComparisonKey=function(t,n){if(n===void 0){n=!1}return t.with({path:this._ignorePathCasing(t)?t.path.toLowerCase():void 0,fragment:n?null:void 0}).toString()};t.prototype.isEqualOrParent=function(t,n,i){if(i===void 0){i=!1}if(t.scheme===n.scheme){if(t.scheme===Uu.file)return LO(RO(t),RO(n),this._ignorePathCasing(t))&&t.query===n.query&&(i||t.fragment===n.fragment);if(VO(t.authority,n.authority))return LO(t.path,n.path,this._ignorePathCasing(t),"/")&&t.query===n.query&&(i||t.fragment===n.fragment)}return!1};t.prototype.joinPath=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return Cr.joinPath.apply(Cr,__spreadArray([t],n,false))};t.prototype.basenameOrAuthority=function(t){return NO(t)||t.authority};t.prototype.basename=function(t){return cr.basename(t.path)};t.prototype.extname=function(t){return cr.extname(t.path)};t.prototype.dirname=function(t){if(t.path.length===0)return t;var n;return t.scheme===Uu.file?n=Cr.file(dr(RO(t))).path:(n=cr.dirname(t.path),t.authority&&n.length&&n.charCodeAt(0)!==47&&(console.error('dirname("'.concat(t.toString,")) resulted in a relative path")),n="/")),t.with({path:n})};t.prototype.normalizePath=function(t){if(!t.path.length)return t;var n;return n=t.scheme===Uu.file?Cr.file(fr(RO(t))).path:cr.normalize(t.path),t.with({path:n})};t.prototype.relativePath=function(t,n){if(t.scheme!==n.scheme||!VO(t.authority,n.authority))return;if(t.scheme===Uu.file){var i=vr(RO(t),RO(n));return Mt?MO(i):i}var r=t.path||"/";var e=n.path||"/";if(this._ignorePathCasing(t)){var i=0;for(var o=Math.min(r.length,e.length);i<o&&(r.charCodeAt(i)===e.charCodeAt(i)||r.charAt(i).toLowerCase()===e.charAt(i).toLowerCase());i++);r=e.substr(0,i)+r.substr(i)}return cr.relative(r,e)};t.prototype.resolvePath=function(t,n){if(t.scheme===Uu.file){var i=Cr.file(lr(RO(t),n));return t.with({authority:i.authority,path:i.path})}var r;return(r=n).indexOf("/")===-1&&(r=MO(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),n=r,t.with({path:cr.resolve(t.path,n)})};t.prototype.isAbsolutePath=function(t){return!!t.path&&t.path[0]==="/"};t.prototype.isEqualAuthority=function(t,n){return t===n||t!==void 0&&n!==void 0&&Co(t,n)};t.prototype.hasTrailingPathSeparator=function(t,n){if(n===void 0){n=wr}if(t.scheme===Uu.file){var i=RO(t);return i.length>FO(i).length&&i[i.length-1]===n}{var i=t.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(t.fsPath)}};t.prototype.removeTrailingPathSeparator=function(t,n){if(n===void 0){n=wr}return qO(t,n)?t.with({path:t.path.substr(0,t.path.length-1)}):t};t.prototype.addTrailingPathSeparator=function(t,n){if(n===void 0){n=wr}var i=!1;if(t.scheme===Uu.file){var r=RO(t);i=r!==void 0&&r.length===FO(r).length&&r[r.length-1]===n}else{n="/";var r=t.path;i=r.length===1&&r.charCodeAt(r.length-1)===47}return i||qO(t,n)?t:t.with({path:t.path+"/"})};return t}())((function(){return!1})),IO=TO.isEqual.bind(TO);TO.isEqualOrParent.bind(TO),TO.getComparisonKey.bind(TO);var BO=TO.basenameOrAuthority.bind(TO),NO=TO.basename.bind(TO),PO=TO.extname.bind(TO),WO=TO.dirname.bind(TO),HO=TO.joinPath.bind(TO),zO=TO.normalizePath.bind(TO),UO=TO.relativePath.bind(TO),KO=TO.resolvePath.bind(TO);TO.isAbsolutePath.bind(TO);var VO=TO.isEqualAuthority.bind(TO),qO=TO.hasTrailingPathSeparator.bind(TO);var GO;function $O(t){return t.toString()}TO.removeTrailingPathSeparator.bind(TO),TO.addTrailingPathSeparator.bind(TO),function(t){t.META_DATA_LABEL="label",t.META_DATA_DESCRIPTION="description",t.META_DATA_SIZE="size",t.META_DATA_MIME="mime",t.parseMetaData=function(n){var i=new Map;n.path.substring(n.path.indexOf(";")+1,n.path.lastIndexOf(";")).split(";").forEach((function(t){var n=t.split(":"),r=n[0],e=n[1];r&&e&&i.set(r,e)}));var r=n.path.substring(0,n.path.indexOf(";"));return r&&i.set(t.META_DATA_MIME,r),i}}(GO||(GO={}));var JO=function(){function t(t,n,i,r,e,o,s){this.beforeVersionId=t,this.afterVersionId=n,this.beforeEOL=i,this.afterEOL=r,this.beforeCursorState=e,this.afterCursorState=o,this.changes=s}t.create=function(n,i){var r=n.getAlternativeVersionId(),e=YO(n);return new t(r,r,e,e,i,i,[])};t.prototype.append=function(t,n,i,r,e){var o,s;n.length>0&&(this.changes=(o=this.changes,s=n,o===null||o.length===0?s:new OO(o,s).compress())),this.afterEOL=i,this.afterVersionId=r,this.afterCursorState=e};t._writeSelectionsSize=function(t){return 4+16*(t?t.length:0)};t._writeSelections=function(t,n,i){if(Cl(t,n?n.length:0,i),i+=4,n)for(var r=0,e=n;r<e.length;r++){var o=e[r];Cl(t,o.selectionStartLineNumber,i),i+=4,Cl(t,o.selectionStartColumn,i),i+=4,Cl(t,o.positionLineNumber,i),i+=4,Cl(t,o.positionColumn,i),i+=4}return i};t._readSelections=function(t,n,i){var r=xl(t,n);n+=4;for(var e=0;e<r;e++){var o=xl(t,n),s=xl(t,n+=4),u=xl(t,n+=4),a=xl(t,n+=4);n+=4,i.push(new Br(o,s,u,a))}return n};t.prototype.serialize=function(){var n=10+t._writeSelectionsSize(this.beforeCursorState)+t._writeSelectionsSize(this.afterCursorState)+4;for(var i=0,r=this.changes;i<r.length;i++){var e=r[i];n+=e.writeSize()}var o=new Uint8Array(n);var s=0;Cl(o,this.beforeVersionId,s),s+=4,Cl(o,this.afterVersionId,s),s+=4,Dl(o,this.beforeEOL,s),s+=1,Dl(o,this.afterEOL,s),s+=1,s=t._writeSelections(o,this.beforeCursorState,s),s=t._writeSelections(o,this.afterCursorState,s),Cl(o,this.changes.length,s),s+=4;for(var u=0,a=this.changes;u<a.length;u++){var e=a[u];s=e.write(o,s)}return o.buffer};t.deserialize=function(n){var i=new Uint8Array(n);var r=0;var e=xl(i,r);r+=4;var o=xl(i,r);r+=4;var s=Sl(i,r);r+=1;var u=Sl(i,r);r+=1;var a=[];r=t._readSelections(i,r,a);var h=[];r=t._readSelections(i,r,h);var c=xl(i,r);r+=4;var f=[];for(var l=0;l<c;l++)r=AO.read(i,r,f);return new t(e,o,s,u,a,h,f)};return t}();var ZO=function(){function t(t,n,i,r){this.label=t,this.code=n,this.model=i,this._data=JO.create(i,r)}Object.defineProperty(t.prototype,"type",{get:function(){return 0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"resource",{get:function(){return Cr.isUri(this.model)?this.model:this.model.uri},enumerable:false,configurable:true});t.prototype.toString=function(){return(this._data instanceof JO?this._data:JO.deserialize(this._data)).changes.map((function(t){return t.toString()})).join(", ")};t.prototype.matchesResource=function(t){return(Cr.isUri(this.model)?this.model:this.model.uri).toString()===t.toString()};t.prototype.setModel=function(t){this.model=t};t.prototype.canAppend=function(t){return this.model===t&&this._data instanceof JO};t.prototype.append=function(t,n,i,r,e){this._data instanceof JO&&this._data.append(t,n,i,r,e)};t.prototype.close=function(){this._data instanceof JO&&(this._data=this._data.serialize())};t.prototype.open=function(){this._data instanceof JO||(this._data=JO.deserialize(this._data))};t.prototype.undo=function(){if(Cr.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof JO&&(this._data=this._data.serialize());var t=JO.deserialize(this._data);this.model._applyUndo(t.changes,t.beforeEOL,t.beforeVersionId,t.beforeCursorState)};t.prototype.redo=function(){if(Cr.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof JO&&(this._data=this._data.serialize());var t=JO.deserialize(this._data);this.model._applyRedo(t.changes,t.afterEOL,t.afterVersionId,t.afterCursorState)};t.prototype.heapSize=function(){return this._data instanceof JO&&(this._data=this._data.serialize()),this._data.byteLength+168};return t}();var QO=function(){function t(t,n,i){this.label=t,this.code=n,this.type=1,this._isOpen=!0,this._editStackElementsArr=i.slice(0),this._editStackElementsMap=new Map;for(var r=0,e=this._editStackElementsArr;r<e.length;r++){var o=e[r];var s=$O(o.resource);this._editStackElementsMap.set(s,o)}this._delegate=null}Object.defineProperty(t.prototype,"resources",{get:function(){return this._editStackElementsArr.map((function(t){return t.resource}))},enumerable:false,configurable:true});t.prototype.prepareUndoRedo=function(){if(this._delegate)return this._delegate.prepareUndoRedo(this)};t.prototype.matchesResource=function(t){var n=$O(t);return this._editStackElementsMap.has(n)};t.prototype.setModel=function(t){var n=$O(Cr.isUri(t)?t:t.uri);this._editStackElementsMap.has(n)&&this._editStackElementsMap.get(n).setModel(t)};t.prototype.canAppend=function(t){if(!this._isOpen)return!1;var n=$O(t.uri);return this._editStackElementsMap.has(n)?this._editStackElementsMap.get(n).canAppend(t):!1};t.prototype.append=function(t,n,i,r,e){var o=$O(t.uri);this._editStackElementsMap.get(o).append(t,n,i,r,e)};t.prototype.close=function(){this._isOpen=!1};t.prototype.open=function(){};t.prototype.undo=function(){this._isOpen=!1;for(var t=0,n=this._editStackElementsArr;t<n.length;t++){var i=n[t];i.undo()}};t.prototype.redo=function(){for(var t=0,n=this._editStackElementsArr;t<n.length;t++){var i=n[t];i.redo()}};t.prototype.heapSize=function(t){var n=$O(t);return this._editStackElementsMap.has(n)?this._editStackElementsMap.get(n).heapSize():0};t.prototype.split=function(){return this._editStackElementsArr};t.prototype.toString=function(){var t=[];for(var n=0,i=this._editStackElementsArr;n<i.length;n++){var r=i[n];t.push("".concat(NO(r.resource),": ").concat(r))}return"{".concat(t.join(", "),"}")};return t}();function YO(t){return t.getEOL()==="\n"?0:1}function XO(t){return!!t&&(t instanceof ZO||t instanceof QO)}var tE=function(){function t(t,n){this._model=t,this._undoRedoService=n}t.prototype.pushStackElement=function(){var t=this._undoRedoService.getLastElement(this._model.uri);XO(t)&&t.close()};t.prototype.popStackElement=function(){var t=this._undoRedoService.getLastElement(this._model.uri);XO(t)&&t.open()};t.prototype.clear=function(){this._undoRedoService.removeElements(this._model.uri)};t.prototype._getOrCreateEditStackElement=function(t,n){var i=this._undoRedoService.getLastElement(this._model.uri);if(XO(i)&&i.canAppend(this._model))return i;var r=new ZO(ht(0,"Typing"),"undoredo.textBufferEdit",this._model,t);return this._undoRedoService.pushElement(r,n),r};t.prototype.pushEOL=function(t){var n=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(t),n.append(this._model,[],YO(this._model),this._model.getAlternativeVersionId(),null)};t.prototype.pushEditOperation=function(n,i,r,e){var o=this._getOrCreateEditStackElement(n,e),s=this._model.applyEdits(i,!0),u=t._computeCursorState(r,s),a=s.map((function(t,n){return{index:n,textChange:t.textChange}}));return a.sort((function(t,n){return t.textChange.oldPosition===n.textChange.oldPosition?t.index-n.index:t.textChange.oldPosition-n.textChange.oldPosition})),o.append(this._model,a.map((function(t){return t.textChange})),YO(this._model),this._model.getAlternativeVersionId(),u),u};t._computeCursorState=function(t,n){try{return t?t(n):null}catch(t){return Gn(t),null}};return t}();var nE=function(){function t(){this.spacesDiff=0,this.looksLikeAlignment=!1}return t}();function iE(t,n,i,r,e){var o;for(e.spacesDiff=0,e.looksLikeAlignment=!1,o=0;o<n&&o<r&&t.charCodeAt(o)===i.charCodeAt(o);o++);var s=0,u=0;for(var a=o;a<n;a++)t.charCodeAt(a)===32?s++:u++;var h=0,c=0;for(var a=o;a<r;a++)i.charCodeAt(a)===32?h++:c++;if(s>0&&u>0||h>0&&c>0)return;var f=Math.abs(u-c),l=Math.abs(s-h);if(f===0)return e.spacesDiff=l,void(l>0&&0<=h-1&&h-1<t.length&&h<i.length&&i.charCodeAt(h)!==32&&t.charCodeAt(h-1)===32&&t.charCodeAt(t.length-1)===44&&(e.looksLikeAlignment=!0));l%f!=0||(e.spacesDiff=l/f)}function rE(t,n,i){var r=Math.min(t.getLineCount(),1e4);var e=0,o=0,s="",u=0;var a=[2,4,6,8,3,5,7],h=[0,0,0,0,0,0,0,0,0],c=new nE;for(var f=1;f<=r;f++){var l=t.getLineLength(f),v=t.getLineContent(f),d=l<=65536;var g=!1,p=0,w=0,m=0;for(var b=0,y=l;b<y;b++){var _=d?v.charCodeAt(b):t.getLineCharCode(f,b);if(_===9)m++;else{if(_!==32){g=!0,p=b;break}w++}}if(!g||(m>0?e++:w>1&&o++,iE(s,u,v,p,c),c.looksLikeAlignment&&(!i||n!==c.spacesDiff)))continue;var k=c.spacesDiff;k<=8&&h[k]++,s=v,u=p}var x=i;e!==o&&(x=e<o);var C=n;if(x){var S=x?0:.1*r;a.forEach((function(t){var n=h[t];n>S&&(S=n,C=t)})),C===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(C=2)}return{insertSpaces:x,tabSize:C}}function eE(t){return(1&t.metadata)>>>0}function oE(t,n){t.metadata=254&t.metadata|n}function sE(t){return(2&t.metadata)>>>1==1}function uE(t,n){t.metadata=253&t.metadata|(n?1:0)<<1}function aE(t){return(4&t.metadata)>>>2==1}function hE(t,n){t.metadata=251&t.metadata|(n?1:0)<<2}function cE(t){return(64&t.metadata)>>>6==1}function fE(t,n){t.metadata=191&t.metadata|(n?1:0)<<6}function lE(t,n){t.metadata=231&t.metadata|n<<3}function vE(t,n){t.metadata=223&t.metadata|(n?1:0)<<5}var dE=function(){function t(t,n,i){this.metadata=0,this.parent=this,this.left=this,this.right=this,oE(this,1),this.start=n,this.end=i,this.delta=0,this.maxEnd=i,this.id=t,this.ownerId=0,this.options=null,hE(this,!1),fE(this,!1),lE(this,1),vE(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=n,this.cachedAbsoluteEnd=i,this.range=null,uE(this,!1)}t.prototype.reset=function(t,n,i,r){this.start=n,this.end=i,this.maxEnd=i,this.cachedVersionId=t,this.cachedAbsoluteStart=n,this.cachedAbsoluteEnd=i,this.range=r};t.prototype.setOptions=function(t){this.options=t;var n=this.options.className;hE(this,n==="squiggly-error"||n==="squiggly-warning"||n==="squiggly-info"),fE(this,this.options.glyphMarginClassName!==null),lE(this,this.options.stickiness),vE(this,this.options.collapseOnReplaceEdit)};t.prototype.setCachedOffsets=function(t,n,i){this.cachedVersionId!==i&&(this.range=null),this.cachedVersionId=i,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n};t.prototype.detach=function(){this.parent=null,this.left=null,this.right=null};return t}();var gE=new dE(null,0,0);gE.parent=gE,gE.left=gE,gE.right=gE,oE(gE,0);var pE=function(){function t(){this.root=gE,this.requestNormalizeDelta=!1}t.prototype.intervalSearch=function(t,n,i,r,e,o){return this.root===gE?[]:function(t,n,i,r,e,o,s){var u=t.root,a=0,h=0,c=0,f=0;var l=[];var v=0;for(;u!==gE;)if(sE(u))uE(u.left,!1),uE(u.right,!1),u===u.parent.right&&(a-=u.parent.delta),u=u.parent;else{if(!sE(u.left)){if(h=a+u.maxEnd,h<n){uE(u,!0);continue}if(u.left!==gE){u=u.left;continue}}if(c=a+u.start,c>i)uE(u,!0);else{if(f=a+u.end,f>=n){u.setCachedOffsets(c,f,o);var d=!0;r&&u.ownerId&&u.ownerId!==r&&(d=!1),e&&aE(u)&&(d=!1),s&&!cE(u)&&(d=!1),d&&(l[v++]=u)}uE(u,!0),u.right===gE||sE(u.right)||(a+=u.delta,u=u.right)}}return uE(t.root,!1),l}(this,t,n,i,r,e,o)};t.prototype.search=function(t,n,i,r){return this.root===gE?[]:function(t,n,i,r,e){var o=t.root,s=0,u=0,a=0;var h=[];var c=0;for(;o!==gE;){if(sE(o)){uE(o.left,!1),uE(o.right,!1),o===o.parent.right&&(s-=o.parent.delta),o=o.parent;continue}if(o.left!==gE&&!sE(o.left)){o=o.left;continue}u=s+o.start,a=s+o.end,o.setCachedOffsets(u,a,r);var f=!0;n&&o.ownerId&&o.ownerId!==n&&(f=!1),i&&aE(o)&&(f=!1),e&&!cE(o)&&(f=!1),f&&(h[c++]=o),uE(o,!0),o.right===gE||sE(o.right)||(s+=o.delta,o=o.right)}return uE(t.root,!1),h}(this,t,n,i,r)};t.prototype.collectNodesFromOwner=function(t){return function(t,n){var i=t.root;var r=[];var e=0;for(;i!==gE;)sE(i)?(uE(i.left,!1),uE(i.right,!1),i=i.parent):i.left===gE||sE(i.left)?(i.ownerId===n&&(r[e++]=i),uE(i,!0),i.right===gE||sE(i.right)||(i=i.right)):i=i.left;return uE(t.root,!1),r}(this,t)};t.prototype.collectNodesPostOrder=function(){return function(t){var n=t.root;var i=[];var r=0;for(;n!==gE;)sE(n)?(uE(n.left,!1),uE(n.right,!1),n=n.parent):n.left===gE||sE(n.left)?n.right===gE||sE(n.right)?(i[r++]=n,uE(n,!0)):n=n.right:n=n.left;return uE(t.root,!1),i}(this)};t.prototype.insert=function(t){bE(this,t),this._normalizeDeltaIfNecessary()};t.prototype.delete=function(t){yE(this,t),this._normalizeDeltaIfNecessary()};t.prototype.resolveNode=function(t,n){var i=t;var r=0;for(;t!==this.root;)t===t.parent.right&&(r+=t.parent.delta),t=t.parent;var e=i.start+r,o=i.end+r;i.setCachedOffsets(e,o,n)};t.prototype.acceptReplace=function(t,n,i,r){var e=function(t,n,i){var r=t.root,e=0,o=0,s=0,u=0;var a=[];var h=0;for(;r!==gE;)if(sE(r))uE(r.left,!1),uE(r.right,!1),r===r.parent.right&&(e-=r.parent.delta),r=r.parent;else{if(!sE(r.left)){if(o=e+r.maxEnd,o<n){uE(r,!0);continue}if(r.left!==gE){r=r.left;continue}}s=e+r.start,s>i?uE(r,!0):(u=e+r.end,u>=n&&(r.setCachedOffsets(s,u,0),a[h++]=r),uE(r,!0),r.right===gE||sE(r.right)||(e+=r.delta,r=r.right))}return uE(t.root,!1),a}(this,t,t+n);for(var o=0,s=e.length;o<s;o++)yE(this,e[o]);this._normalizeDeltaIfNecessary(),function(t,n,i,r){var e=t.root,o=0,s=0,u=0;var a=r-(i-n);for(;e!==gE;)if(sE(e))uE(e.left,!1),uE(e.right,!1),e===e.parent.right&&(o-=e.parent.delta),SE(e),e=e.parent;else{if(!sE(e.left)){if(s=o+e.maxEnd,s<n){uE(e,!0);continue}if(e.left!==gE){e=e.left;continue}}u=o+e.start,u>i?(e.start+=a,e.end+=a,e.delta+=a,(e.delta<-1073741824||e.delta>1073741824)&&(t.requestNormalizeDelta=!0),uE(e,!0)):(uE(e,!0),e.right===gE||sE(e.right)||(o+=e.delta,e=e.right))}uE(t.root,!1)}(this,t,t+n,i),this._normalizeDeltaIfNecessary();for(var o=0,s=e.length;o<s;o++){var u=e[o];u.start=u.cachedAbsoluteStart,u.end=u.cachedAbsoluteEnd,mE(u,t,t+n,i,r),u.maxEnd=u.end,bE(this,u)}this._normalizeDeltaIfNecessary()};t.prototype._normalizeDeltaIfNecessary=function(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(t){var n=t.root,i=0;for(;n!==gE;)n.left===gE||sE(n.left)?n.right===gE||sE(n.right)?(n.start=i+n.start,n.end=i+n.end,n.delta=0,SE(n),uE(n,!0),uE(n.left,!1),uE(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent):(i+=n.delta,n=n.right):n=n.left;uE(t.root,!1)}(this))};return t}();function wE(t,n,i,r){return t<i||!(t>i)&&r!==1&&(r===2||n)}function mE(t,n,i,r,e){var o=function(t){return(24&t.metadata)>>>3}(t),s=o===0||o===2,u=o===1||o===2,a=i-n,h=r,c=Math.min(a,h),f=t.start;var l=!1;var v=t.end;var d=!1;n<=f&&v<=i&&function(t){return(32&t.metadata)>>>5==1}(t)&&(t.start=n,l=!0,t.end=n,d=!0);{var g=e?1:a>0?2:0;!l&&wE(f,s,n,g)&&(l=!0),!d&&wE(v,u,n,g)&&(d=!0)}if(c>0&&!e){var g=a>h?2:0;!l&&wE(f,s,n+c,g)&&(l=!0),!d&&wE(v,u,n+c,g)&&(d=!0)}{var g=e?1:0;!l&&wE(f,s,i,g)&&(t.start=n+h,l=!0),!d&&wE(v,u,i,g)&&(t.end=n+h,d=!0)}var p=h-a;l||(t.start=Math.max(0,f+p)),d||(t.end=Math.max(0,v+p)),t.start>t.end&&(t.end=t.start)}function bE(t,n){if(t.root===gE)return n.parent=gE,n.left=gE,n.right=gE,oE(n,0),t.root=n,t.root;(function(t,n){var i=0,r=t.root;var e=n.start,o=n.end;for(;;)if(AE(e,o,r.start+i,r.end+i)<0){if(r.left===gE){n.start-=i,n.end-=i,n.maxEnd-=i,r.left=n;break}r=r.left}else{if(r.right===gE){n.start-=i+r.delta,n.end-=i+r.delta,n.maxEnd-=i+r.delta,r.right=n;break}i+=r.delta,r=r.right}n.parent=r,n.left=gE,n.right=gE,oE(n,1)})(t,n),DE(n.parent);var i=n;for(;i!==t.root&&eE(i.parent)===1;)if(i.parent===i.parent.parent.left){var r=i.parent.parent.right;eE(r)===1?(oE(i.parent,0),oE(r,0),oE(i.parent.parent,1),i=i.parent.parent):(i===i.parent.right&&(i=i.parent,kE(t,i)),oE(i.parent,0),oE(i.parent.parent,1),xE(t,i.parent.parent))}else{var r=i.parent.parent.left;eE(r)===1?(oE(i.parent,0),oE(r,0),oE(i.parent.parent,1),i=i.parent.parent):(i===i.parent.left&&(i=i.parent,xE(t,i)),oE(i.parent,0),oE(i.parent.parent,1),kE(t,i.parent.parent))}return oE(t.root,0),n}function yE(t,n){var i,r;if(n.left===gE?(i=n.right,r=n,i.delta+=n.delta,(i.delta<-1073741824||i.delta>1073741824)&&(t.requestNormalizeDelta=!0),i.start+=n.delta,i.end+=n.delta):n.right===gE?(i=n.left,r=n):(r=function(t){for(;t.left!==gE;)t=t.left;return t}(n.right),i=r.right,i.start+=r.delta,i.end+=r.delta,i.delta+=r.delta,(i.delta<-1073741824||i.delta>1073741824)&&(t.requestNormalizeDelta=!0),r.start+=n.delta,r.end+=n.delta,r.delta=n.delta,(r.delta<-1073741824||r.delta>1073741824)&&(t.requestNormalizeDelta=!0)),r===t.root)return t.root=i,oE(i,0),n.detach(),_E(),SE(i),void(t.root.parent=gE);var e=eE(r)===1;if(r===r.parent.left?r.parent.left=i:r.parent.right=i,r===n?i.parent=r.parent:(r.parent===n?i.parent=r:i.parent=r.parent,r.left=n.left,r.right=n.right,r.parent=n.parent,oE(r,eE(n)),n===t.root?t.root=r:n===n.parent.left?n.parent.left=r:n.parent.right=r,r.left!==gE&&(r.left.parent=r),r.right!==gE&&(r.right.parent=r)),n.detach(),e)return DE(i.parent),r!==n&&(DE(r),DE(r.parent)),void _E();var o;for(DE(i),DE(i.parent),r!==n&&(DE(r),DE(r.parent));i!==t.root&&eE(i)===0;)i===i.parent.left?(o=i.parent.right,eE(o)===1&&(oE(o,0),oE(i.parent,1),kE(t,i.parent),o=i.parent.right),eE(o.left)===0&&eE(o.right)===0?(oE(o,1),i=i.parent):(eE(o.right)===0&&(oE(o.left,0),oE(o,1),xE(t,o),o=i.parent.right),oE(o,eE(i.parent)),oE(i.parent,0),oE(o.right,0),kE(t,i.parent),i=t.root)):(o=i.parent.left,eE(o)===1&&(oE(o,0),oE(i.parent,1),xE(t,i.parent),o=i.parent.left),eE(o.left)===0&&eE(o.right)===0?(oE(o,1),i=i.parent):(eE(o.left)===0&&(oE(o.right,0),oE(o,1),kE(t,o),o=i.parent.left),oE(o,eE(i.parent)),oE(i.parent,0),oE(o.left,0),xE(t,i.parent),i=t.root));oE(i,0),_E()}function _E(){gE.parent=gE,gE.delta=0,gE.start=0,gE.end=0}function kE(t,n){var i=n.right;i.delta+=n.delta,(i.delta<-1073741824||i.delta>1073741824)&&(t.requestNormalizeDelta=!0),i.start+=n.delta,i.end+=n.delta,n.right=i.left,i.left!==gE&&(i.left.parent=n),i.parent=n.parent,n.parent===gE?t.root=i:n===n.parent.left?n.parent.left=i:n.parent.right=i,i.left=n,n.parent=i,SE(n),SE(i)}function xE(t,n){var i=n.left;n.delta-=i.delta,(n.delta<-1073741824||n.delta>1073741824)&&(t.requestNormalizeDelta=!0),n.start-=i.delta,n.end-=i.delta,n.left=i.right,i.right!==gE&&(i.right.parent=n),i.parent=n.parent,n.parent===gE?t.root=i:n===n.parent.right?n.parent.right=i:n.parent.left=i,i.right=n,n.parent=i,SE(n),SE(i)}function CE(t){var n=t.end;if(t.left!==gE){var i=t.left.maxEnd;i>n&&(n=i)}if(t.right!==gE){var i=t.right.maxEnd+t.delta;i>n&&(n=i)}return n}function SE(t){t.maxEnd=CE(t)}function DE(t){for(;t!==gE;){var n=CE(t);if(t.maxEnd===n)return;t.maxEnd=n,t=t.parent}}function AE(t,n,i,r){return t===i?n-r:t-i}var OE=function(){function t(t,n){this.piece=t,this.color=n,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}t.prototype.next=function(){if(this.right!==EE)return ME(this.right);var t=this;for(;t.parent!==EE&&t.parent.left!==t;)t=t.parent;return t.parent===EE?EE:t.parent};t.prototype.prev=function(){if(this.left!==EE)return FE(this.left);var t=this;for(;t.parent!==EE&&t.parent.right!==t;)t=t.parent;return t.parent===EE?EE:t.parent};t.prototype.detach=function(){this.parent=null,this.left=null,this.right=null};return t}();var EE=new OE(null,0);function ME(t){for(;t.left!==EE;)t=t.left;return t}function FE(t){for(;t.right!==EE;)t=t.right;return t}function LE(t){return t===EE?0:t.size_left+t.piece.length+LE(t.right)}function jE(t){return t===EE?0:t.lf_left+t.piece.lineFeedCnt+jE(t.right)}function RE(){EE.parent=EE}function TE(t,n){var i=n.right;i.size_left+=n.size_left+(n.piece?n.piece.length:0),i.lf_left+=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),n.right=i.left,i.left!==EE&&(i.left.parent=n),i.parent=n.parent,n.parent===EE?t.root=i:n.parent.left===n?n.parent.left=i:n.parent.right=i,i.left=n,n.parent=i}function IE(t,n){var i=n.left;n.left=i.right,i.right!==EE&&(i.right.parent=n),i.parent=n.parent,n.size_left-=i.size_left+(i.piece?i.piece.length:0),n.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),n.parent===EE?t.root=i:n===n.parent.right?n.parent.right=i:n.parent.left=i,i.right=n,n.parent=i}function BE(t,n){var i,r;if(n.left===EE?(r=n,i=r.right):n.right===EE?(r=n,i=r.left):(r=ME(n.right),i=r.right),r===t.root)return t.root=i,i.color=0,n.detach(),RE(),void(t.root.parent=EE);var e=r.color===1;if(r===r.parent.left?r.parent.left=i:r.parent.right=i,r===n?(i.parent=r.parent,WE(t,i)):(r.parent===n?i.parent=r:i.parent=r.parent,WE(t,i),r.left=n.left,r.right=n.right,r.parent=n.parent,r.color=n.color,n===t.root?t.root=r:n===n.parent.left?n.parent.left=r:n.parent.right=r,r.left!==EE&&(r.left.parent=r),r.right!==EE&&(r.right.parent=r),r.size_left=n.size_left,r.lf_left=n.lf_left,WE(t,r)),n.detach(),i.parent.left===i){var o=LE(i),s=jE(i);if(o!==i.parent.size_left||s!==i.parent.lf_left){var u=o-i.parent.size_left,a=s-i.parent.lf_left;i.parent.size_left=o,i.parent.lf_left=s,PE(t,i.parent,u,a)}}if(WE(t,i.parent),e)return void RE();var h;for(;i!==t.root&&i.color===0;)i===i.parent.left?(h=i.parent.right,h.color===1&&(h.color=0,i.parent.color=1,TE(t,i.parent),h=i.parent.right),h.left.color===0&&h.right.color===0?(h.color=1,i=i.parent):(h.right.color===0&&(h.left.color=0,h.color=1,IE(t,h),h=i.parent.right),h.color=i.parent.color,i.parent.color=0,h.right.color=0,TE(t,i.parent),i=t.root)):(h=i.parent.left,h.color===1&&(h.color=0,i.parent.color=1,IE(t,i.parent),h=i.parent.left),h.left.color===0&&h.right.color===0?(h.color=1,i=i.parent):(h.left.color===0&&(h.right.color=0,h.color=1,TE(t,h),h=i.parent.left),h.color=i.parent.color,i.parent.color=0,h.left.color=0,IE(t,i.parent),i=t.root));i.color=0,RE()}function NE(t,n){for(WE(t,n);n!==t.root&&n.parent.color===1;)if(n.parent===n.parent.parent.left){var i=n.parent.parent.right;i.color===1?(n.parent.color=0,i.color=0,n.parent.parent.color=1,n=n.parent.parent):(n===n.parent.right&&TE(t,n=n.parent),n.parent.color=0,n.parent.parent.color=1,IE(t,n.parent.parent))}else{var i=n.parent.parent.left;i.color===1?(n.parent.color=0,i.color=0,n.parent.parent.color=1,n=n.parent.parent):(n===n.parent.left&&IE(t,n=n.parent),n.parent.color=0,n.parent.parent.color=1,TE(t,n.parent.parent))}t.root.color=0}function PE(t,n,i,r){for(;n!==t.root&&n!==EE;)n.parent.left===n&&(n.parent.size_left+=i,n.parent.lf_left+=r),n=n.parent}function WE(t,n){var i=0,r=0;if(n!==t.root){for(;n!==t.root&&n===n.parent.right;)n=n.parent;if(n!==t.root)for(i=LE((n=n.parent).left)-n.size_left,r=jE(n.left)-n.lf_left,n.size_left+=i,n.lf_left+=r;n!==t.root&&(i!==0||r!==0);)n.parent.left===n&&(n.parent.size_left+=i,n.parent.lf_left+=r),n=n.parent}}EE.parent=EE,EE.left=EE,EE.right=EE,EE.color=0;var HE=65535;function zE(t){var n;return n=t[t.length-1]<65536?new Uint16Array(t.length):new Uint32Array(t.length),n.set(t,0),n}var UE=function(){function t(t,n,i,r,e){this.lineStarts=t,this.cr=n,this.lf=i,this.crlf=r,this.isBasicASCII=e}return t}();function KE(t,n){if(n===void 0){n=!0}var i=[0];var r=1;for(var e=0,o=t.length;e<o;e++){var s=t.charCodeAt(e);s===13?e+1<o&&t.charCodeAt(e+1)===10?(i[r++]=e+2,e++):i[r++]=e+1:s===10&&(i[r++]=e+1)}return n?zE(i):i}var VE=function(){function t(t,n,i,r,e){this.bufferIndex=t,this.start=n,this.end=i,this.lineFeedCnt=r,this.length=e}return t}();var qE=function(){function t(t,n){this.buffer=t,this.lineStarts=n}return t}();var GE=function(){function t(t,n){var i=this;this._pieces=[],this._tree=t,this._BOM=n,this._index=0,t.root!==EE&&t.iterate(t.root,(function(t){return t!==EE&&i._pieces.push(t.piece),!0}))}t.prototype.read=function(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])};return t}();var $E=function(){function t(t){this._limit=t,this._cache=[]}t.prototype.get=function(t){for(var n=this._cache.length-1;n>=0;n--){var i=this._cache[n];if(i.nodeStartOffset<=t&&i.nodeStartOffset+i.node.piece.length>=t)return i}return null};t.prototype.get2=function(t){for(var n=this._cache.length-1;n>=0;n--){var i=this._cache[n];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<t&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=t)return i}return null};t.prototype.set=function(t){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(t)};t.prototype.validate=function(t){var n=!1;var i=this._cache;for(var r=0;r<i.length;r++){var e=i[r];(e.node.parent===null||e.nodeStartOffset>=t)&&(i[r]=null,n=!0)}if(n){var r=[];for(var o=0,s=i;o<s.length;o++){var e=s[o];e!==null&&r.push(e)}this._cache=r}};return t}();var JE=function(){function t(t,n,i){this.create(t,n,i)}t.prototype.create=function(t,n,i){this._buffers=[new qE("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=EE,this._lineCnt=1,this._length=0,this._EOL=n,this._EOLLength=n.length,this._EOLNormalized=i;var r=null;for(var e=0,o=t.length;e<o;e++)if(t[e].buffer.length>0){t[e].lineStarts||(t[e].lineStarts=KE(t[e].buffer));var s=new VE(e+1,{line:0,column:0},{line:t[e].lineStarts.length-1,column:t[e].buffer.length-t[e].lineStarts[t[e].lineStarts.length-1]},t[e].lineStarts.length-1,t[e].buffer.length);this._buffers.push(t[e]),r=this.rbInsertRight(r,s)}this._searchCache=new $E(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()};t.prototype.normalizeEOL=function(t){var n=this;var i=HE,r=i-Math.floor(21845),e=2*r;var o="",s=0;var u=[];if(this.iterate(this.root,(function(i){var a=n.getNodeContent(i),h=a.length;if(s<=r||s+h<e)return o+=a,s+=h,!0;var c=o.replace(/\r\n|\r|\n/g,t);return u.push(new qE(c,KE(c))),o=a,s=h,!0})),s>0){var a=o.replace(/\r\n|\r|\n/g,t);u.push(new qE(a,KE(a)))}this.create(u,t,!0)};t.prototype.getEOL=function(){return this._EOL};t.prototype.setEOL=function(t){this._EOL=t,this._EOLLength=this._EOL.length,this.normalizeEOL(t)};t.prototype.createSnapshot=function(t){return new GE(this,t)};t.prototype.getOffsetAt=function(t,n){var i=0,r=this.root;for(;r!==EE;)if(r.left!==EE&&r.lf_left+1>=t)r=r.left;else{if(r.lf_left+r.piece.lineFeedCnt+1>=t)return i+=r.size_left,i+(this.getAccumulatedValue(r,t-r.lf_left-2)+n-1);t-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right}return i};t.prototype.getPositionAt=function(t){t=Math.floor(t),t=Math.max(0,t);var n=this.root,i=0;var r=t;for(;n!==EE;)if(n.size_left!==0&&n.size_left>=t)n=n.left;else{if(n.size_left+n.piece.length>=t){var e=this.getIndexOf(n,t-n.size_left);if(i+=n.lf_left+e.index,e.index===0){var o=this.getOffsetAt(i+1,1);return new Tr(i+1,r-o+1)}return new Tr(i+1,e.remainder+1)}if(t-=n.size_left+n.piece.length,i+=n.lf_left+n.piece.lineFeedCnt,n.right===EE){var e=this.getOffsetAt(i+1,1);return new Tr(i+1,r-t-e+1)}n=n.right}return new Tr(1,1)};t.prototype.getValueInRange=function(t,n){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";var i=this.nodeAt2(t.startLineNumber,t.startColumn),r=this.nodeAt2(t.endLineNumber,t.endColumn),e=this.getValueInRange2(i,r);return n?n===this._EOL&&this._EOLNormalized&&n===this.getEOL()&&this._EOLNormalized?e:e.replace(/\r\n|\r|\n/g,n):e};t.prototype.getValueInRange2=function(t,n){if(t.node===n.node){var i=t.node,r=this._buffers[i.piece.bufferIndex].buffer,e=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r.substring(e+t.remainder,e+n.remainder)}var o=t.node;var s=this._buffers[o.piece.bufferIndex].buffer,u=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);var a=s.substring(u+t.remainder,u+o.piece.length);for(o=o.next();o!==EE;){var i=this._buffers[o.piece.bufferIndex].buffer,r=this.offsetInBuffer(o.piece.bufferIndex,o.piece.start);if(o===n.node){a+=i.substring(r,r+n.remainder);break}a+=i.substr(r,o.piece.length),o=o.next()}return a};t.prototype.getLinesContent=function(){var t=this;var n=[];var i=0,r="",e=!1;return this.iterate(this.root,(function(o){if(o===EE)return!0;var s=o.piece;var u=s.length;if(u===0)return!0;var a=t._buffers[s.bufferIndex].buffer,h=t._buffers[s.bufferIndex].lineStarts,c=s.start.line,f=s.end.line;var l=h[c]+s.start.column;if(e&&(a.charCodeAt(l)===10&&(l++,u--),n[i++]=r,r="",e=!1,u===0))return!0;if(c===f)return t._EOLNormalized||a.charCodeAt(l+u-1)!==13?r+=a.substr(l,u):(e=!0,r+=a.substr(l,u-1)),!0;r+=t._EOLNormalized?a.substring(l,Math.max(l,h[c+1]-t._EOLLength)):a.substring(l,h[c+1]).replace(/(\r\n|\r|\n)$/,""),n[i++]=r;for(var v=c+1;v<f;v++)r=t._EOLNormalized?a.substring(h[v],h[v+1]-t._EOLLength):a.substring(h[v],h[v+1]).replace(/(\r\n|\r|\n)$/,""),n[i++]=r;return t._EOLNormalized||a.charCodeAt(h[f]+s.end.column-1)!==13?r=a.substr(h[f],s.end.column):(e=!0,s.end.column===0?i--:r=a.substr(h[f],s.end.column-1)),!0})),e&&(n[i++]=r,r=""),n[i++]=r,n};t.prototype.getLength=function(){return this._length};t.prototype.getLineCount=function(){return this._lineCnt};t.prototype.getLineContent=function(t){return this._lastVisitedLine.lineNumber===t||(this._lastVisitedLine.lineNumber=t,t===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(t):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(t,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value};t.prototype._getCharCode=function(t){if(t.remainder===t.node.piece.length){var n=t.node.next();if(!n)return 0;var i=this._buffers[n.piece.bufferIndex],r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.buffer.charCodeAt(r)}{var n=this._buffers[t.node.piece.bufferIndex],i=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return n.buffer.charCodeAt(i)}};t.prototype.getLineCharCode=function(t,n){var i=this.nodeAt2(t,n+1);return this._getCharCode(i)};t.prototype.getLineLength=function(t){if(t===this.getLineCount()){var n=this.getOffsetAt(t,1);return this.getLength()-n}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this._EOLLength};t.prototype.findMatchesInNode=function(t,n,i,r,e,o,s,u,a,h,c){var f=this._buffers[t.piece.bufferIndex],l=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start),v=this.offsetInBuffer(t.piece.bufferIndex,e),d=this.offsetInBuffer(t.piece.bufferIndex,o);var g;var p={line:0,column:0};var w,m;n._wordSeparators?(w=f.buffer.substring(v,d),m=function(t){return t+v},n.reset(0)):(w=f.buffer,m=function(t){return t},n.reset(v));do{if(g=n.next(w),g){if(m(g.index)>=d)return h;this.positionInBuffer(t,m(g.index)-l,p);var b=this.getLineFeedCnt(t.piece.bufferIndex,e,p),y=p.line===e.line?p.column-e.column+r:p.column+1,_=y+g[0].length;if(c[h++]=xd(new Ir(i+b,y,i+b,_),g,u),m(g.index)+g[0].length>=d||h>=a)return h}}while(g);return h};t.prototype.findMatchesLineByLine=function(t,n,i,r){var e=[];var o=0;var s=new Ad(n.wordSeparators,n.regex);var u=this.nodeAt2(t.startLineNumber,t.startColumn);if(u===null)return[];var a=this.nodeAt2(t.endLineNumber,t.endColumn);if(a===null)return[];var h=this.positionInBuffer(u.node,u.remainder);var c=this.positionInBuffer(a.node,a.remainder);if(u.node===a.node)return this.findMatchesInNode(u.node,s,t.startLineNumber,t.startColumn,h,c,n,i,r,o,e),e;var f=t.startLineNumber,l=u.node;for(;l!==a.node;){var v=this.getLineFeedCnt(l.piece.bufferIndex,h,l.piece.end);if(v>=1){var d=this._buffers[l.piece.bufferIndex].lineStarts,g=this.offsetInBuffer(l.piece.bufferIndex,l.piece.start),p=d[h.line+v],w=f===t.startLineNumber?t.startColumn:1;if(o=this.findMatchesInNode(l,s,f,w,h,this.positionInBuffer(l,p-g),n,i,r,o,e),o>=r)return e;f+=v}var m=f===t.startLineNumber?t.startColumn-1:0;if(f===t.endLineNumber){var d=this.getLineContent(f).substring(m,t.endColumn-1);return o=this._findMatchesInLine(n,s,d,t.endLineNumber,m,o,e,i,r),e}if(o=this._findMatchesInLine(n,s,this.getLineContent(f).substr(m),f,m,o,e,i,r),o>=r)return e;f++,u=this.nodeAt2(f,1),l=u.node,h=this.positionInBuffer(u.node,u.remainder)}if(f===t.endLineNumber){var v=f===t.startLineNumber?t.startColumn-1:0,m=this.getLineContent(f).substring(v,t.endColumn-1);return o=this._findMatchesInLine(n,s,m,t.endLineNumber,v,o,e,i,r),e}var b=f===t.startLineNumber?t.startColumn:1;return o=this.findMatchesInNode(a.node,s,f,b,h,c,n,i,r,o,e),e};t.prototype._findMatchesInLine=function(t,n,i,r,e,o,s,u,a){var h=t.wordSeparators;if(!u&&t.simpleSearch){var c=t.simpleSearch,f=c.length,l=i.length;var v=-f;for(;(v=i.indexOf(c,v+f))!==-1;)if((!h||Dd(h,i,l,v,f))&&(s[o++]=new wd(new Ir(r,v+1+e,r,v+1+f+e),null),o>=a))return o;return o}var d;n.reset(0);do{if(d=n.next(i),d&&(s[o++]=xd(new Ir(r,d.index+1+e,r,d.index+1+d[0].length+e),d,u),o>=a))return o}while(d);return o};t.prototype.insert=function(t,n,i){if(i===void 0){i=!1}if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==EE){var r=this.nodeAt(t),e=r.node,o=r.remainder,s=r.nodeStartOffset,u=e.piece,a=u.bufferIndex,h=this.positionInBuffer(e,o);if(e.piece.bufferIndex===0&&u.end.line===this._lastChangeBufferPos.line&&u.end.column===this._lastChangeBufferPos.column&&s+u.length===t&&n.length<HE)return this.appendToNode(e,n),void this.computeBufferMetadata();if(s===t)this.insertContentToNodeLeft(n,e),this._searchCache.validate(t);else if(s+e.piece.length>t){var c=[];var f=new VE(u.bufferIndex,h,u.end,this.getLineFeedCnt(u.bufferIndex,h,u.end),this.offsetInBuffer(a,u.end)-this.offsetInBuffer(a,h));if(this.shouldCheckCRLF()&&this.endWithCR(n)&&this.nodeCharCodeAt(e,o)===10){var l={line:f.start.line+1,column:0};f=new VE(f.bufferIndex,l,f.end,this.getLineFeedCnt(f.bufferIndex,l,f.end),f.length-1),n+="\n"}if(this.shouldCheckCRLF()&&this.startWithLF(n))if(this.nodeCharCodeAt(e,o-1)===13){var l=this.positionInBuffer(e,o-1);this.deleteNodeTail(e,l),n="\r"+n,e.piece.length===0&&c.push(e)}else this.deleteNodeTail(e,h);else this.deleteNodeTail(e,h);var v=this.createNewPieces(n);f.length>0&&this.rbInsertRight(e,f);var d=e;for(var l=0;l<v.length;l++)d=this.rbInsertRight(d,v[l]);this.deleteNodes(c)}else this.insertContentToNodeRight(n,e)}else{var e=this.createNewPieces(n);var o=this.rbInsertLeft(null,e[0]);for(var s=1;s<e.length;s++)o=this.rbInsertRight(o,e[s])}this.computeBufferMetadata()};t.prototype.delete=function(t,n){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",n<=0||this.root===EE)return;var i=this.nodeAt(t),r=this.nodeAt(t+n),e=i.node,o=r.node;if(e===o){var s=this.positionInBuffer(e,i.remainder),u=this.positionInBuffer(e,r.remainder);if(i.nodeStartOffset===t){if(n===e.piece.length){var a=e.next();return BE(this,e),this.validateCRLFWithPrevNode(a),void this.computeBufferMetadata()}return this.deleteNodeHead(e,u),this._searchCache.validate(t),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return i.nodeStartOffset+e.piece.length===t+n?(this.deleteNodeTail(e,s),this.validateCRLFWithNextNode(e),void this.computeBufferMetadata()):(this.shrinkNode(e,s,u),void this.computeBufferMetadata())}var h=[],c=this.positionInBuffer(e,i.remainder);this.deleteNodeTail(e,c),this._searchCache.validate(t),e.piece.length===0&&h.push(e);var f=this.positionInBuffer(o,r.remainder);this.deleteNodeHead(o,f),o.piece.length===0&&h.push(o);for(var s=e.next();s!==EE&&s!==o;s=s.next())h.push(s);var l=e.piece.length===0?e.prev():e;this.deleteNodes(h),this.validateCRLFWithNextNode(l),this.computeBufferMetadata()};t.prototype.insertContentToNodeLeft=function(t,n){var i=[];if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.startWithLF(n)){var r=n.piece,e={line:r.start.line+1,column:0},o=new VE(r.bufferIndex,e,r.end,this.getLineFeedCnt(r.bufferIndex,e,r.end),r.length-1);n.piece=o,t+="\n",PE(this,n,-1,-1),n.piece.length===0&&i.push(n)}var s=this.createNewPieces(t);var u=this.rbInsertLeft(n,s[s.length-1]);for(var r=s.length-2;r>=0;r--)u=this.rbInsertLeft(u,s[r]);this.validateCRLFWithPrevNode(u),this.deleteNodes(i)};t.prototype.insertContentToNodeRight=function(t,n){this.adjustCarriageReturnFromNext(t,n)&&(t+="\n");var i=this.createNewPieces(t),r=this.rbInsertRight(n,i[0]);var e=r;for(var o=1;o<i.length;o++)e=this.rbInsertRight(e,i[o]);this.validateCRLFWithPrevNode(r)};t.prototype.positionInBuffer=function(t,n,i){var r=t.piece,e=t.piece.bufferIndex,o=this._buffers[e].lineStarts,s=o[r.start.line]+r.start.column+n;var u=r.start.line,a=r.end.line,h=0,c=0,f=0;for(;u<=a&&(h=u+(a-u)/2|0,f=o[h],h!==a);)if(c=o[h+1],s<f)a=h-1;else{if(!(s>=c))break;u=h+1}return i?(i.line=h,i.column=s-f,null):{line:h,column:s-f}};t.prototype.getLineFeedCnt=function(t,n,i){if(i.column===0)return i.line-n.line;var r=this._buffers[t].lineStarts;if(i.line===r.length-1)return i.line-n.line;var e=r[i.line+1],o=r[i.line]+i.column;if(e>o+1)return i.line-n.line;var s=o-1;return this._buffers[t].buffer.charCodeAt(s)===13?i.line-n.line+1:i.line-n.line};t.prototype.offsetInBuffer=function(t,n){return this._buffers[t].lineStarts[n.line]+n.column};t.prototype.deleteNodes=function(t){for(var n=0;n<t.length;n++)BE(this,t[n])};t.prototype.createNewPieces=function(t){if(t.length>HE){var n=[];for(;t.length>HE;){var i=t.charCodeAt(65534);var r=void 0;i===13||i>=55296&&i<=56319?(r=t.substring(0,65534),t=t.substring(65534)):(r=t.substring(0,HE),t=t.substring(HE));var e=KE(r);n.push(new VE(this._buffers.length,{line:0,column:0},{line:e.length-1,column:r.length-e[e.length-1]},e.length-1,r.length)),this._buffers.push(new qE(r,e))}var o=KE(t);return n.push(new VE(this._buffers.length,{line:0,column:0},{line:o.length-1,column:t.length-o[o.length-1]},o.length-1,t.length)),this._buffers.push(new qE(t,o)),n}var s=this._buffers[0].buffer.length;var u=KE(t,!1);var a=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===s&&s!==0&&this.startWithLF(t)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},a=this._lastChangeBufferPos;for(var n=0;n<u.length;n++)u[n]+=s+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(u.slice(1)),this._buffers[0].buffer+="_"+t,s+=1}else{if(s!==0)for(var n=0;n<u.length;n++)u[n]+=s;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(u.slice(1)),this._buffers[0].buffer+=t}var h=this._buffers[0].buffer.length,c=this._buffers[0].lineStarts.length-1,f={line:c,column:h-this._buffers[0].lineStarts[c]},l=new VE(0,a,f,this.getLineFeedCnt(0,a,f),h-s);return this._lastChangeBufferPos=f,[l]};t.prototype.getLineRawContent=function(t,n){if(n===void 0){n=0}var i=this.root,r="";var e=this._searchCache.get2(t);if(e){i=e.node;var o=this.getAccumulatedValue(i,t-e.nodeStartLineNumber-1),s=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(e.nodeStartLineNumber+i.piece.lineFeedCnt!==t){var a=this.getAccumulatedValue(i,t-e.nodeStartLineNumber);return s.substring(u+o,u+a-n)}r=s.substring(u+o,u+i.piece.length)}else{var o=0;var s=t;for(;i!==EE;)if(i.left!==EE&&i.lf_left>=t-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>t-1){var u=this.getAccumulatedValue(i,t-i.lf_left-2),a=this.getAccumulatedValue(i,t-i.lf_left-1),h=this._buffers[i.piece.bufferIndex].buffer,c=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:s-(t-1-i.lf_left)}),h.substring(c+u,c+a-n)}if(i.lf_left+i.piece.lineFeedCnt===t-1){var u=this.getAccumulatedValue(i,t-i.lf_left-2),a=this._buffers[i.piece.bufferIndex].buffer,h=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);r=a.substring(h+u,h+i.piece.length);break}t-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}}for(i=i.next();i!==EE;){var o=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){var s=this.getAccumulatedValue(i,0),u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return r+=o.substring(u,u+s-n),r}{var s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);r+=o.substr(s,i.piece.length)}i=i.next()}return r};t.prototype.computeBufferMetadata=function(){var t=this.root,n=1,i=0;for(;t!==EE;)n+=t.lf_left+t.piece.lineFeedCnt,i+=t.size_left+t.piece.length,t=t.right;this._lineCnt=n,this._length=i,this._searchCache.validate(this._length)};t.prototype.getIndexOf=function(t,n){var i=t.piece,r=this.positionInBuffer(t,n),e=r.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===n){var o=this.getLineFeedCnt(t.piece.bufferIndex,i.start,r);if(o!==e)return{index:o,remainder:0}}return{index:e,remainder:r.column}};t.prototype.getAccumulatedValue=function(t,n){if(n<0)return 0;var i=t.piece,r=this._buffers[i.bufferIndex].lineStarts,e=i.start.line+n+1;return e>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[e]-r[i.start.line]-i.start.column};t.prototype.deleteNodeTail=function(t,n){var i=t.piece,r=i.lineFeedCnt,e=this.offsetInBuffer(i.bufferIndex,i.end),o=n,s=this.offsetInBuffer(i.bufferIndex,o),u=this.getLineFeedCnt(i.bufferIndex,i.start,o),a=u-r,h=s-e,c=i.length+h;t.piece=new VE(i.bufferIndex,i.start,o,u,c),PE(this,t,h,a)};t.prototype.deleteNodeHead=function(t,n){var i=t.piece,r=i.lineFeedCnt,e=this.offsetInBuffer(i.bufferIndex,i.start),o=n,s=this.getLineFeedCnt(i.bufferIndex,o,i.end),u=s-r,a=e-this.offsetInBuffer(i.bufferIndex,o),h=i.length+a;t.piece=new VE(i.bufferIndex,o,i.end,s,h),PE(this,t,a,u)};t.prototype.shrinkNode=function(t,n,i){var r=t.piece,e=r.start,o=r.end,s=r.length,u=r.lineFeedCnt,a=n,h=this.getLineFeedCnt(r.bufferIndex,r.start,a),c=this.offsetInBuffer(r.bufferIndex,n)-this.offsetInBuffer(r.bufferIndex,e);t.piece=new VE(r.bufferIndex,r.start,a,h,c),PE(this,t,c-s,h-u);var f=new VE(r.bufferIndex,i,o,this.getLineFeedCnt(r.bufferIndex,i,o),this.offsetInBuffer(r.bufferIndex,o)-this.offsetInBuffer(r.bufferIndex,i)),l=this.rbInsertRight(t,f);this.validateCRLFWithPrevNode(l)};t.prototype.appendToNode=function(t,n){this.adjustCarriageReturnFromNext(n,t)&&(n+="\n");var i=this.shouldCheckCRLF()&&this.startWithLF(n)&&this.endWithCR(t),r=this._buffers[0].buffer.length;this._buffers[0].buffer+=n;var e=KE(n,!1);for(var o=0;o<e.length;o++)e[o]+=r;if(i){var o=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:r-o}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(e.slice(1));var s=this._buffers[0].lineStarts.length-1,u={line:s,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[s]},a=t.piece.length+n.length,h=t.piece.lineFeedCnt,c=this.getLineFeedCnt(0,t.piece.start,u),f=c-h;t.piece=new VE(t.piece.bufferIndex,t.piece.start,u,c,a),this._lastChangeBufferPos=u,PE(this,t,n.length,f)};t.prototype.nodeAt=function(t){var n=this.root;var i=this._searchCache.get(t);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:t-i.nodeStartOffset};var r=0;for(;n!==EE;)if(n.size_left>t)n=n.left;else{if(n.size_left+n.piece.length>=t){r+=n.size_left;var e={node:n,remainder:t-n.size_left,nodeStartOffset:r};return this._searchCache.set(e),e}t-=n.size_left+n.piece.length,r+=n.size_left+n.piece.length,n=n.right}return null};t.prototype.nodeAt2=function(t,n){var i=this.root,r=0;for(;i!==EE;)if(i.left!==EE&&i.lf_left>=t-1)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt>t-1){var e=this.getAccumulatedValue(i,t-i.lf_left-2),o=this.getAccumulatedValue(i,t-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(e+n-1,o),nodeStartOffset:r}}if(i.lf_left+i.piece.lineFeedCnt===t-1){var e=this.getAccumulatedValue(i,t-i.lf_left-2);if(e+n-1<=i.piece.length)return{node:i,remainder:e+n-1,nodeStartOffset:r};n-=i.piece.length-e;break}t-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==EE;){if(i.piece.lineFeedCnt>0){var e=this.getAccumulatedValue(i,0),o=this.offsetOfNode(i);return{node:i,remainder:Math.min(n-1,e),nodeStartOffset:o}}if(i.piece.length>=n-1)return{node:i,remainder:n-1,nodeStartOffset:this.offsetOfNode(i)};n-=i.piece.length,i=i.next()}return null};t.prototype.nodeCharCodeAt=function(t,n){if(t.piece.lineFeedCnt<1)return-1;var i=this._buffers[t.piece.bufferIndex],r=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start)+n;return i.buffer.charCodeAt(r)};t.prototype.offsetOfNode=function(t){if(!t)return 0;var n=t.size_left;for(;t!==this.root;)t.parent.right===t&&(n+=t.parent.size_left+t.parent.piece.length),t=t.parent;return n};t.prototype.shouldCheckCRLF=function(){return!(this._EOLNormalized&&this._EOL==="\n")};t.prototype.startWithLF=function(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===EE||t.piece.lineFeedCnt===0)return!1;var n=t.piece,i=this._buffers[n.bufferIndex].lineStarts,r=n.start.line,e=i[r]+n.start.column;return r===i.length-1?!1:!(i[r+1]>e+1)&&this._buffers[n.bufferIndex].buffer.charCodeAt(e)===10};t.prototype.endWithCR=function(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t!==EE&&t.piece.lineFeedCnt!==0&&this.nodeCharCodeAt(t,t.piece.length-1)===13};t.prototype.validateCRLFWithPrevNode=function(t){if(this.shouldCheckCRLF()&&this.startWithLF(t)){var n=t.prev();this.endWithCR(n)&&this.fixCRLF(n,t)}};t.prototype.validateCRLFWithNextNode=function(t){if(this.shouldCheckCRLF()&&this.endWithCR(t)){var n=t.next();this.startWithLF(n)&&this.fixCRLF(t,n)}};t.prototype.fixCRLF=function(t,n){var i=[],r=this._buffers[t.piece.bufferIndex].lineStarts;var e;e=t.piece.end.column===0?{line:t.piece.end.line-1,column:r[t.piece.end.line]-r[t.piece.end.line-1]-1}:{line:t.piece.end.line,column:t.piece.end.column-1};var o=t.piece.length-1,s=t.piece.lineFeedCnt-1;t.piece=new VE(t.piece.bufferIndex,t.piece.start,e,s,o),PE(this,t,-1,-1),t.piece.length===0&&i.push(t);var u={line:n.piece.start.line+1,column:0},a=n.piece.length-1,h=this.getLineFeedCnt(n.piece.bufferIndex,u,n.piece.end);n.piece=new VE(n.piece.bufferIndex,u,n.piece.end,h,a),PE(this,n,-1,-1),n.piece.length===0&&i.push(n);var c=this.createNewPieces("\r\n");this.rbInsertRight(t,c[0]);for(var f=0;f<i.length;f++)BE(this,i[f])};t.prototype.adjustCarriageReturnFromNext=function(t,n){if(this.shouldCheckCRLF()&&this.endWithCR(t)){var i=n.next();if(this.startWithLF(i)){if(t+="\n",i.piece.length===1)BE(this,i);else{var r=i.piece,e={line:r.start.line+1,column:0},o=r.length-1,s=this.getLineFeedCnt(r.bufferIndex,e,r.end);i.piece=new VE(r.bufferIndex,e,r.end,s,o),PE(this,i,-1,-1)}return!0}}return!1};t.prototype.iterate=function(t,n){if(t===EE)return n(EE);var i=this.iterate(t.left,n);return i&&n(t)&&this.iterate(t.right,n)};t.prototype.getNodeContent=function(t){if(t===EE)return"";var n=this._buffers[t.piece.bufferIndex],i=t.piece,r=this.offsetInBuffer(i.bufferIndex,i.start),e=this.offsetInBuffer(i.bufferIndex,i.end);return n.buffer.substring(r,e)};t.prototype.getPieceContent=function(t){var n=this._buffers[t.bufferIndex],i=this.offsetInBuffer(t.bufferIndex,t.start),r=this.offsetInBuffer(t.bufferIndex,t.end);return n.buffer.substring(i,r)};t.prototype.rbInsertRight=function(t,n){var i=new OE(n,1);if(i.left=EE,i.right=EE,i.parent=EE,i.size_left=0,i.lf_left=0,this.root===EE)this.root=i,i.color=0;else if(t.right===EE)t.right=i,i.parent=t;else{var r=ME(t.right);r.left=i,i.parent=r}return NE(this,i),i};t.prototype.rbInsertLeft=function(t,n){var i=new OE(n,1);if(i.left=EE,i.right=EE,i.parent=EE,i.size_left=0,i.lf_left=0,this.root===EE)this.root=i,i.color=0;else if(t.left===EE)t.left=i,i.parent=t;else{var r=FE(t.left);r.right=i,i.parent=r}return NE(this,i),i};return t}();var ZE=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this)||this,a._onDidChangeContent=a._register(new ki),a._BOM=i,a._mightContainNonBasicASCII=!s,a._mightContainRTL=e,a._mightContainUnusualLineTerminators=o,a._pieceTree=new JE(n,r,u);return a}n.prototype.mightContainRTL=function(){return this._mightContainRTL};n.prototype.mightContainUnusualLineTerminators=function(){return this._mightContainUnusualLineTerminators};n.prototype.resetMightContainUnusualLineTerminators=function(){this._mightContainUnusualLineTerminators=!1};n.prototype.mightContainNonBasicASCII=function(){return this._mightContainNonBasicASCII};n.prototype.getBOM=function(){return this._BOM};n.prototype.getEOL=function(){return this._pieceTree.getEOL()};n.prototype.createSnapshot=function(t){return this._pieceTree.createSnapshot(t?this._BOM:"")};n.prototype.getOffsetAt=function(t,n){return this._pieceTree.getOffsetAt(t,n)};n.prototype.getPositionAt=function(t){return this._pieceTree.getPositionAt(t)};n.prototype.getRangeAt=function(t,n){var i=t+n,r=this.getPositionAt(t),e=this.getPositionAt(i);return new Ir(r.lineNumber,r.column,e.lineNumber,e.column)};n.prototype.getValueInRange=function(t,n){if(n===void 0){n=0}if(t.isEmpty())return"";var i=this._getEndOfLine(n);return this._pieceTree.getValueInRange(t,i)};n.prototype.getValueLengthInRange=function(t,n){if(n===void 0){n=0}if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;var i=this.getOffsetAt(t.startLineNumber,t.startColumn),r=this.getOffsetAt(t.endLineNumber,t.endColumn);var e=0;var o=this._getEndOfLine(n),s=this.getEOL();return o.length!==s.length&&(e=(o.length-s.length)*(t.endLineNumber-t.startLineNumber)),r-i+e};n.prototype.getCharacterCountInRange=function(t,n){if(n===void 0){n=0}if(this._mightContainNonBasicASCII){var i=0;var r=t.startLineNumber,e=t.endLineNumber;for(var o=r;o<=e;o++){var s=this.getLineContent(o),u=o===r?t.startColumn-1:0,a=o===e?t.endColumn-1:s.length;for(var h=u;h<a;h++)Oo(s.charCodeAt(h))?(i+=1,h+=1):i+=1}return i+=this._getEndOfLine(n).length*(e-r),i}return this.getValueLengthInRange(t,n)};n.prototype.getLength=function(){return this._pieceTree.getLength()};n.prototype.getLineCount=function(){return this._pieceTree.getLineCount()};n.prototype.getLinesContent=function(){return this._pieceTree.getLinesContent()};n.prototype.getLineContent=function(t){return this._pieceTree.getLineContent(t)};n.prototype.getLineCharCode=function(t,n){return this._pieceTree.getLineCharCode(t,n)};n.prototype.getLineLength=function(t){return this._pieceTree.getLineLength(t)};n.prototype.getLineFirstNonWhitespaceColumn=function(t){var n=vo(this.getLineContent(t));return n===-1?0:n+1};n.prototype.getLineLastNonWhitespaceColumn=function(t){var n=po(this.getLineContent(t));return n===-1?0:n+2};n.prototype._getEndOfLine=function(t){switch(t){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}};n.prototype.setEOL=function(t){this._pieceTree.setEOL(t)};n.prototype.applyEdits=function(t,i,r){var e;var o=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,u=this._mightContainNonBasicASCII,a=!0,h=[];for(var c=0;c<t.length;c++){var f=t[c];a&&f._isTracked&&(a=!1);var l=f.range;if(f.text){var v=!0;u||(v=!Po(f.text),u=v),!o&&v&&(o=Bo(f.text)),!s&&v&&(s=Ho(f.text))}var d="",g=0,p=0,w=0;if(f.text){var v=void 0;e=vA(f.text),g=e[0],p=e[1],w=e[2],v=e[3];var m=this.getEOL();d=v===0||v===(m==="\r\n"?2:1)?f.text:f.text.replace(/\r\n|\r|\n/g,m)}h[c]={sortIndex:c,identifier:f.identifier||null,range:l,rangeOffset:this.getOffsetAt(l.startLineNumber,l.startColumn),rangeLength:this.getValueLengthInRange(l),text:d,eolCount:g,firstLineLength:p,lastLineLength:w,forceMoveMarkers:!!f.forceMoveMarkers,isAutoWhitespaceEdit:f.isAutoWhitespaceEdit||!1}}h.sort(n._sortOpsAscending);var b=!1;for(var c=0,f=h.length-1;c<f;c++){var l=h[c].range.getEndPosition(),d=h[c+1].range.getStartPosition();if(d.isBeforeOrEqual(l)){if(d.isBefore(l))throw new Error("Overlapping ranges are not allowed!");b=!0}}a&&(h=this._reduceOperations(h));var y=r||i?n._getInverseEditRanges(h):[],_=[];if(i)for(var c=0;c<h.length;c++){var f=h[c],l=y[c];if(f.isAutoWhitespaceEdit&&f.range.isEmpty())for(var d=l.startLineNumber;d<=l.endLineNumber;d++){var g="";d===l.startLineNumber&&(g=this.getLineContent(f.range.startLineNumber),vo(g)!==-1)||_.push({lineNumber:d,oldContent:g})}}var k=null;if(r){var c=0;k=[];for(var f=0;f<h.length;f++){var l=h[f],d=y[f],g=this.getValueInRange(l.range),p=l.rangeOffset+c;c+=l.text.length-g.length,k[f]={sortIndex:l.sortIndex,identifier:l.identifier,range:d,text:g,textChange:new AO(l.rangeOffset,g,p,l.text)}}b||k.sort((function(t,n){return t.sortIndex-n.sortIndex}))}this._mightContainRTL=o,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=u;var x=this._doApplyEdits(h);var C=null;if(i&&_.length>0){_.sort((function(t,n){return n.lineNumber-t.lineNumber})),C=[];for(var c=0,f=_.length;c<f;c++){var l=_[c].lineNumber;if(c>0&&_[c-1].lineNumber===l)continue;var d=_[c].oldContent,g=this.getLineContent(l);g.length!==0&&g!==d&&vo(g)===-1&&C.push(l)}}return this._onDidChangeContent.fire(),new yd(k,x,C)};n.prototype._reduceOperations=function(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]};n.prototype._toSingleEditOperation=function(t){var n=!1;var i=t[0].range,r=t[t.length-1].range,e=new Ir(i.startLineNumber,i.startColumn,r.endLineNumber,r.endColumn);var o=i.startLineNumber,s=i.startColumn;var u=[];for(var a=0,h=t.length;a<h;a++){var c=t[a],f=c.range;n=n||c.forceMoveMarkers,u.push(this.getValueInRange(new Ir(o,s,f.startLineNumber,f.startColumn))),c.text.length>0&&u.push(c.text),o=f.endLineNumber,s=f.endColumn}var l=u.join(""),v=vA(l),d=v[0],g=v[1],p=v[2];return{sortIndex:0,identifier:t[0].identifier,range:e,rangeOffset:this.getOffsetAt(e.startLineNumber,e.startColumn),rangeLength:this.getValueLengthInRange(e,0),text:l,eolCount:d,firstLineLength:g,lastLineLength:p,forceMoveMarkers:n,isAutoWhitespaceEdit:!1}};n.prototype._doApplyEdits=function(t){t.sort(n._sortOpsDescending);var i=[];for(var r=0;r<t.length;r++){var e=t[r],o=e.range.startLineNumber,s=e.range.startColumn,u=e.range.endLineNumber,a=e.range.endColumn;if(o===u&&s===a&&e.text.length===0)continue;e.text?(this._pieceTree.delete(e.rangeOffset,e.rangeLength),this._pieceTree.insert(e.rangeOffset,e.text,!0)):this._pieceTree.delete(e.rangeOffset,e.rangeLength);var h=new Ir(o,s,u,a);i.push({range:h,rangeLength:e.rangeLength,text:e.text,rangeOffset:e.rangeOffset,forceMoveMarkers:e.forceMoveMarkers})}return i};n.prototype.findMatchesLineByLine=function(t,n,i,r){return this._pieceTree.findMatchesLineByLine(t,n,i,r)};n._getInverseEditRanges=function(t){var n=[];var i=0,r=0,e=null;for(var o=0,s=t.length;o<s;o++){var u=t[o];var a=void 0,h=void 0,c=void 0;if(e?e.range.endLineNumber===u.range.startLineNumber?(a=i,h=r+(u.range.startColumn-e.range.endColumn)):(a=i+(u.range.startLineNumber-e.range.endLineNumber),h=u.range.startColumn):(a=u.range.startLineNumber,h=u.range.startColumn),u.text.length>0){var f=u.eolCount+1;c=f===1?new Ir(a,h,a,h+u.firstLineLength):new Ir(a,h,a+f-1,u.lastLineLength+1)}else c=new Ir(a,h,a,h);i=c.endLineNumber,r=c.endColumn,n.push(c),e=u}return n};n._sortOpsAscending=function(t,n){var i=Ir.compareRangesUsingEnds(t.range,n.range);return i===0?t.sortIndex-n.sortIndex:i};n._sortOpsDescending=function(t,n){var i=Ir.compareRangesUsingEnds(t.range,n.range);return i===0?n.sortIndex-t.sortIndex:-i};return n}(ci);var QE=function(){function t(t,n,i,r,e,o,s,u,a){this._chunks=t,this._bom=n,this._cr=i,this._lf=r,this._crlf=e,this._containsRTL=o,this._containsUnusualLineTerminators=s,this._isBasicASCII=u,this._normalizeEOL=a}t.prototype._getEOL=function(t){var n=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return n===0?t===1?"\n":"\r\n":i>n/2?"\r\n":"\n"};t.prototype.create=function(t){var n=this._getEOL(t),i=this._chunks;if(this._normalizeEOL&&(n==="\r\n"&&(this._cr>0||this._lf>0)||n==="\n"&&(this._cr>0||this._crlf>0)))for(var r=0,e=i.length;r<e;r++){var o=i[r].buffer.replace(/\r\n|\r|\n/g,n),s=KE(o);i[r]=new qE(o,s)}var u=new ZE(i,this._bom,n,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:u,disposable:u}};return t}();var YE=function(){function t(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}t.prototype.acceptChunk=function(t){if(t.length===0)return;this.chunks.length===0&&Vo(t)&&(this.BOM=Ko,t=t.substr(1));var n=t.charCodeAt(t.length-1);n===13||n>=55296&&n<=56319?(this._acceptChunk1(t.substr(0,t.length-1),!1),this._hasPreviousChar=!0,this._previousChar=n):(this._acceptChunk1(t,!1),this._hasPreviousChar=!1,this._previousChar=n)};t.prototype._acceptChunk1=function(t,n){(n||t.length!==0)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+t):this._acceptChunk2(t))};t.prototype._acceptChunk2=function(t){var n=function(t,n){t.length=0,t[0]=0;var i=1,r=0,e=0,o=0,s=!0;for(var u=0,a=n.length;u<a;u++){var h=n.charCodeAt(u);h===13?u+1<a&&n.charCodeAt(u+1)===10?(o++,t[i++]=u+2,u++):(r++,t[i++]=u+1):h===10?(e++,t[i++]=u+1):s&&h!==9&&(h<32||h>126)&&(s=!1)}var c=new UE(zE(t),r,e,o,s);return t.length=0,c}(this._tmpLineStarts,t);this.chunks.push(new qE(t,n.lineStarts)),this.cr+=n.cr,this.lf+=n.lf,this.crlf+=n.crlf,n.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=Bo(t)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Ho(t)))};t.prototype.finish=function(t){if(t===void 0){t=!0}return this._finish(),new QE(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,t)};t.prototype._finish=function(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;var t=this.chunks[this.chunks.length-1];t.buffer+=String.fromCharCode(this._previousChar);var n=KE(t.buffer);t.lineStarts=n,this._previousChar===13&&this.cr++}};return t}();var XE=function(){function t(t){this._default=t,this._store=[]}t.prototype.get=function(t){return t<this._store.length?this._store[t]:this._default};t.prototype.set=function(t,n){for(;t>=this._store.length;)this._store[this._store.length]=this._default;this._store[t]=n};t.prototype.replace=function(t,n,i){if(t>=this._store.length)return;if(n===0)return void this.insert(t,i);if(i===0)return void this.delete(t,n);var r=this._store.slice(0,t),e=this._store.slice(t+n),o=function(t,n){var i=[];for(var r=0;r<t;r++)i[r]=n;return i}(i,this._default);this._store=r.concat(o,e)};t.prototype.delete=function(t,n){n===0||t>=this._store.length||this._store.splice(t,n)};t.prototype.insert=function(t,n){if(n===0||t>=this._store.length)return;var i=[];for(var r=0;r<n;r++)i[r]=this._default;this._store=D(this._store,t,i)};return t}();var tM=function(){function t(t,n){this._startLineNumber=t,this._tokens=n}Object.defineProperty(t.prototype,"startLineNumber",{get:function(){return this._startLineNumber},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"endLineNumber",{get:function(){return this._startLineNumber+this._tokens.length-1},enumerable:false,configurable:true});t.prototype.getLineTokens=function(t){return this._tokens[t-this._startLineNumber]};t.prototype.appendLineTokens=function(t){this._tokens.push(t)};return t}();var nM=function(){function t(){this._tokens=[]}t.prototype.add=function(t,n){if(this._tokens.length>0){var i=this._tokens[this._tokens.length-1];if(i.endLineNumber+1===t)return void i.appendLineTokens(n)}this._tokens.push(new tM(t,[n]))};t.prototype.finalize=function(){return this._tokens};return t}();var iM=function(){function t(t,n){this.tokenizationSupport=n,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new eM(t)}t.prototype.getStartState=function(t){return this.store.getStartState(t,this.initialState)};t.prototype.getFirstInvalidLine=function(){return this.store.getFirstInvalidLine(this.initialState)};return t}();var rM=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,n,i)||this,o._textModel=r,o._languageIdCodec=e;return o}n.prototype.updateTokensUntilLine=function(t,n){var i=this._textModel.getLanguageId();for(;;){var r=this.getFirstInvalidLine();if(!r||r.lineNumber>n)break;var e=this._textModel.getLineContent(r.lineNumber),o=uM(this._languageIdCodec,i,this.tokenizationSupport,e,!0,r.startState);t.add(r.lineNumber,o.tokens),this.store.setEndState(r.lineNumber,o.endState)}};n.prototype.getTokenTypeIfInsertingCharacter=function(t,n){var i=this.getStartState(t.lineNumber);if(!i)return 0;var r=this._textModel.getLanguageId(),e=this._textModel.getLineContent(t.lineNumber),o=e.substring(0,t.column-1)+n+e.substring(t.column-1),s=uM(this._languageIdCodec,r,this.tokenizationSupport,o,!0,i),u=new mp(s.tokens,o,this._languageIdCodec);if(u.getCount()===0)return 0;var a=u.findTokenIndexAtOffset(t.column-1);return u.getStandardTokenType(a)};n.prototype.tokenizeLineWithEdit=function(t,n,i){var r=t.lineNumber,e=t.column,o=this.getStartState(r);if(!o)return null;var s=this._textModel.getLineContent(r),u=s.substring(0,e-1)+i+s.substring(e-1+n),a=this._textModel.getLanguageIdAtPosition(r,0),h=uM(this._languageIdCodec,a,this.tokenizationSupport,u,!0,o);return new mp(h.tokens,u,this._languageIdCodec)};n.prototype.hasAccurateTokensForLine=function(t){return t<this.store.getFirstInvalidEndStateLineNumberOrMax()};n.prototype.isCheapToTokenize=function(t){var n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n||t===n&&this._textModel.getLineLength(t)<2048};n.prototype.tokenizeHeuristically=function(t,n,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(t,i),{heuristicTokens:!1};var r=this.guessStartState(n);var e=this._textModel.getLanguageId();for(var o=n;o<=i;o++){var s=this._textModel.getLineContent(o),u=uM(this._languageIdCodec,e,this.tokenizationSupport,s,!0,r);t.add(o,u.tokens),r=u.endState}return{heuristicTokens:!0}};n.prototype.guessStartState=function(t){var n=this._textModel.getLineFirstNonWhitespaceColumn(t);var i=[];var r=null;for(var e=t-1;n>1&&e>=1;e--){var o=this._textModel.getLineFirstNonWhitespaceColumn(e);if(o!==0&&o<n&&(i.push(this._textModel.getLineContent(e)),n=o,r=this.getStartState(e),r))break}r||(r=this.tokenizationSupport.getInitialState()),i.reverse();var s=this._textModel.getLanguageId();var u=r;for(var a=0,h=i;a<h.length;a++){var e=h[a];u=uM(this._languageIdCodec,s,this.tokenizationSupport,e,!1,u).endState}return u};return n}(iM);var eM=function(){function t(t){this.lineCount=t,this._tokenizationStateStore=new oM,this._invalidEndStatesLineNumbers=new sM,this._invalidEndStatesLineNumbers.addRange(new jd(1,t+1))}t.prototype.getEndState=function(t){return this._tokenizationStateStore.getEndState(t)};t.prototype.setEndState=function(t,n){if(!n)throw new ri("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(t);var i=this._tokenizationStateStore.setEndState(t,n);return i&&t<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new jd(t+1,t+2)),i};t.prototype.acceptChange=function(t,n){this.lineCount+=n-t.length,this._tokenizationStateStore.acceptChange(t,n),this._invalidEndStatesLineNumbers.addRangeAndResize(new jd(t.startLineNumber,t.endLineNumberExclusive),n)};t.prototype.acceptChanges=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];var e=vA(r.text)[0];this.acceptChange(new zd(r.range.startLineNumber,r.range.endLineNumber+1),e+1)}};t.prototype.invalidateEndStateRange=function(t){this._invalidEndStatesLineNumbers.addRange(new jd(t.startLineNumber,t.endLineNumberExclusive))};t.prototype.getFirstInvalidEndStateLineNumber=function(){return this._invalidEndStatesLineNumbers.min};t.prototype.getFirstInvalidEndStateLineNumberOrMax=function(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER};t.prototype.allStatesValid=function(){return this._invalidEndStatesLineNumbers.min===null};t.prototype.getStartState=function(t,n){return t===1?n:this.getEndState(t-1)};t.prototype.getFirstInvalidLine=function(t){var n=this.getFirstInvalidEndStateLineNumber();if(n===null)return null;var i=this.getStartState(n,t);if(!i)throw new ri("Start state must be defined");return{lineNumber:n,startState:i}};return t}();var oM=function(){function t(){this._lineEndStates=new XE(null)}t.prototype.getEndState=function(t){return this._lineEndStates.get(t)};t.prototype.setEndState=function(t,n){var i=this._lineEndStates.get(t);return(!i||!i.equals(n))&&(this._lineEndStates.set(t,n),!0)};t.prototype.acceptChange=function(t,n){var i=t.length;n>0&&i>0&&(i--,n--),this._lineEndStates.replace(t.startLineNumber,i,n)};return t}();var sM=function(){function t(){this._ranges=[]}Object.defineProperty(t.prototype,"min",{get:function(){return this._ranges.length===0?null:this._ranges[0].start},enumerable:false,configurable:true});t.prototype.delete=function(t){var n=this._ranges.findIndex((function(n){return n.contains(t)}));if(n!==-1){var i=this._ranges[n];i.start===t?i.endExclusive===t+1?this._ranges.splice(n,1):this._ranges[n]=new jd(t+1,i.endExclusive):i.endExclusive===t+1?this._ranges[n]=new jd(i.start,t):this._ranges.splice(n,1,new jd(i.start,t),new jd(t+1,i.endExclusive))}};t.prototype.addRange=function(t){jd.addRange(t,this._ranges)};t.prototype.addRangeAndResize=function(t,n){var i=0;for(;!(i>=this._ranges.length||t.start<=this._ranges[i].endExclusive);)i++;var r=i;for(;!(r>=this._ranges.length||t.endExclusive<this._ranges[r].start);)r++;var e=n-t.length;for(var o=r;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(e);if(i===r){var o=new jd(t.start,t.start+n);o.isEmpty||this._ranges.splice(i,0,o)}else{var o=Math.min(t.start,this._ranges[i].start),s=Math.max(t.endExclusive,this._ranges[r-1].endExclusive),u=new jd(o,s+e);u.isEmpty?this._ranges.splice(i,r-i):this._ranges.splice(i,r-i,u)}};t.prototype.toString=function(){return this._ranges.map((function(t){return t.toString()})).join(" + ")};return t}();function uM(t,n,i,r,e,o){var s=null;if(i)try{s=i.tokenizeEncoded(r,e,o.clone())}catch(t){Gn(t)}return s||(s=pp(t.encodeLanguageId(n),o)),mp.convertToEndOffset(s.tokens,r.length),s}var aM=function(){function t(t,n){this._tokenizerWithStateStore=t,this._backgroundTokenStore=n,this._isDisposed=!1,this._isScheduled=!1}t.prototype.dispose=function(){this._isDisposed=!0};t.prototype.handleChanges=function(){this._beginBackgroundTokenization()};t.prototype._beginBackgroundTokenization=function(){var t=this;!this._isScheduled&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,Is((function(n){t._isScheduled=!1,t._backgroundTokenizeWithDeadline(n)})))};t.prototype._backgroundTokenizeWithDeadline=function(t){var n=this;var i=Date.now()+t.timeRemaining(),r=function(){!n._isDisposed&&n._tokenizerWithStateStore._textModel.isAttachedToEditor()&&n._hasLinesToTokenize()&&(n._backgroundTokenizeForAtLeast1ms(),Date.now()<i?Ht(r):n._beginBackgroundTokenization())};r()};t.prototype._backgroundTokenizeForAtLeast1ms=function(){var t=this._tokenizerWithStateStore._textModel.getLineCount(),n=new nM,i=pi.create(!1);do{if(i.elapsed()>1||this._tokenizeOneInvalidLine(n)>=t)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(n.finalize()),this.checkFinished()};t.prototype._hasLinesToTokenize=function(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.allStatesValid()};t.prototype._tokenizeOneInvalidLine=function(t){var n;var i=(n=this._tokenizerWithStateStore)===null||n===void 0?void 0:n.getFirstInvalidLine();return i?(this._tokenizerWithStateStore.updateTokensUntilLine(t,i.lineNumber),i.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1};t.prototype.checkFinished=function(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()};t.prototype.requestTokens=function(t,n){this._tokenizerWithStateStore.store.invalidateEndStateRange(new zd(t,n))};return t}();var hM=new Uint32Array(0).buffer;var cM=function(){function t(){}t.deleteBeginning=function(n,i){return n===null||n===hM?n:t.delete(n,0,i)};t.deleteEnding=function(n,i){if(n===null||n===hM)return n;var r=fM(n),e=r[r.length-2];return t.delete(n,i,e)};t.delete=function(t,n,i){if(t===null||t===hM||n===i)return t;var r=fM(t),e=r.length>>>1;if(n===0&&r[r.length-2]===i)return hM;var o=mp.findIndexInTokensArray(r,n),s=o>0?r[o-1<<1]:0;if(i<r[o<<1]){var u=i-n;for(var a=o;a<e;a++)r[a<<1]-=u;return t}var h,c;s!==n?(r[o<<1]=n,h=o+1<<1,c=n):(h=o<<1,c=s);var f=i-n;for(var u=o+1;u<e;u++){var a=r[u<<1]-f;a>c&&(r[h++]=a,r[h++]=r[1+(u<<1)],c=a)}if(h===r.length)return t;var l=new Uint32Array(h);return l.set(r.subarray(0,h),0),l.buffer};t.append=function(t,n){if(n===hM)return t;if(t===hM)return n;if(t===null)return t;if(n===null)return null;var i=fM(t),r=fM(n),e=r.length>>>1,o=new Uint32Array(i.length+r.length);o.set(i,0);var s=i.length;var u=i[i.length-2];for(var a=0;a<e;a++)o[s++]=r[a<<1]+u,o[s++]=r[1+(a<<1)];return o.buffer};t.insert=function(t,n,i){if(t===null||t===hM)return t;var r=fM(t),e=r.length>>>1;var o=mp.findIndexInTokensArray(r,n);o>0&&r[o-1<<1]===n&&o--;for(var s=o;s<e;s++)r[s<<1]+=i;return t};return t}();function fM(t){return t instanceof Uint32Array?t:new Uint32Array(t)}var lM=function(){function t(t){this._lineTokens=[],this._len=0,this._languageIdCodec=t}t.prototype.flush=function(){this._lineTokens=[],this._len=0};Object.defineProperty(t.prototype,"hasTokens",{get:function(){return this._lineTokens.length>0},enumerable:false,configurable:true});t.prototype.getTokens=function(t,n,i){var r=null;if(n<this._len&&(r=this._lineTokens[n]),r!==null&&r!==hM)return new mp(fM(r),i,this._languageIdCodec);var e=new Uint32Array(2);return e[0]=i.length,e[1]=vM(this._languageIdCodec.encodeLanguageId(t)),new mp(e,i,this._languageIdCodec)};t._massageTokens=function(t,n,i){var r=i?fM(i):null;if(n===0){var e=!1;if(r&&r.length>1&&(e=wp.getLanguageId(r[1])!==t),!e)return hM}if(!r||r.length===0){var e=new Uint32Array(2);return e[0]=n,e[1]=vM(t),e.buffer}return r[r.length-2]=n,r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:r};t.prototype._ensureLine=function(t){for(;t>=this._len;)this._lineTokens[this._len]=null,this._len++};t.prototype._deleteLines=function(t,n){n!==0&&(t+n>this._len&&(n=this._len-t),this._lineTokens.splice(t,n),this._len-=n)};t.prototype._insertLines=function(t,n){if(n===0)return;var i=[];for(var r=0;r<n;r++)i[r]=null;this._lineTokens=D(this._lineTokens,t,i),this._len+=n};t.prototype.setTokens=function(n,i,r,e,o){var s=t._massageTokens(this._languageIdCodec.encodeLanguageId(n),r,e);this._ensureLine(i);var u=this._lineTokens[i];return this._lineTokens[i]=s,!!o&&!t._equals(u,s)};t._equals=function(t,n){if(!t||!n)return!t&&!n;var i=fM(t),r=fM(n);if(i.length!==r.length)return!1;for(var e=0,o=i.length;e<o;e++)if(i[e]!==r[e])return!1;return!0};t.prototype.acceptEdit=function(t,n,i){this._acceptDeleteRange(t),this._acceptInsertText(new Tr(t.startLineNumber,t.startColumn),n,i)};t.prototype._acceptDeleteRange=function(t){var n=t.startLineNumber-1;if(n>=this._len)return;if(t.startLineNumber===t.endLineNumber)return t.startColumn===t.endColumn?void 0:void(this._lineTokens[n]=cM.delete(this._lineTokens[n],t.startColumn-1,t.endColumn-1));this._lineTokens[n]=cM.deleteEnding(this._lineTokens[n],t.startColumn-1);var i=t.endLineNumber-1;var r=null;i<this._len&&(r=cM.deleteBeginning(this._lineTokens[i],t.endColumn-1)),this._lineTokens[n]=cM.append(this._lineTokens[n],r),this._deleteLines(t.startLineNumber,t.endLineNumber-t.startLineNumber)};t.prototype._acceptInsertText=function(t,n,i){if(n===0&&i===0)return;var r=t.lineNumber-1;r>=this._len||(n!==0?(this._lineTokens[r]=cM.deleteEnding(this._lineTokens[r],t.column-1),this._lineTokens[r]=cM.insert(this._lineTokens[r],t.column-1,i),this._insertLines(t.lineNumber,n)):this._lineTokens[r]=cM.insert(this._lineTokens[r],t.column-1,i))};t.prototype.setMultilineTokens=function(t,n){if(t.length===0)return{changes:[]};var i=[];for(var r=0,e=t.length;r<e;r++){var o=t[r];var s=0,u=0,a=!1;for(var h=o.startLineNumber;h<=o.endLineNumber;h++)a?(this.setTokens(n.getLanguageId(),h-1,n.getLineLength(h),o.getLineTokens(h),!1),u=h):this.setTokens(n.getLanguageId(),h-1,n.getLineLength(h),o.getLineTokens(h),!0)&&(a=!0,s=h,u=h);a&&i.push({fromLineNumber:s,toLineNumber:u})}return{changes:i}};return t}();function vM(t){return(32768|t|2<<24|1024)>>>0}var dM=function(){function t(t){this._pieces=[],this._isComplete=!1,this._languageIdCodec=t}t.prototype.flush=function(){this._pieces=[],this._isComplete=!1};t.prototype.isEmpty=function(){return this._pieces.length===0};t.prototype.set=function(t,n){this._pieces=t||[],this._isComplete=n};t.prototype.setPartial=function(t,n){var i=t;if(n.length>0){var r=n[0].getRange(),e=n[n.length-1].getRange();if(!r||!e)return t;i=t.plusRange(r).plusRange(e)}var o=null;for(var r=0,e=this._pieces.length;r<e;r++){var s=this._pieces[r];if(s.endLineNumber<i.startLineNumber)continue;if(s.startLineNumber>i.endLineNumber){o=o||{index:r};break}if(s.removeTokens(i),s.isEmpty()){this._pieces.splice(r,1),r--,e--;continue}if(s.endLineNumber<i.startLineNumber)continue;if(s.startLineNumber>i.endLineNumber){o=o||{index:r};continue}var u=s.split(i),a=u[0],h=u[1];a.isEmpty()?o=o||{index:r}:h.isEmpty()||(this._pieces.splice(r,1,a,h),r++,e++,o=o||{index:r})}return o=o||{index:this._pieces.length},n.length>0&&(this._pieces=D(this._pieces,o.index,n)),i};t.prototype.isComplete=function(){return this._isComplete};t.prototype.addSparseTokens=function(n,i){if(i.getLineContent().length===0)return i;var r=this._pieces;if(r.length===0)return i;var e=r[t._findFirstPieceWithLine(r,n)].getLineTokens(n);if(!e)return i;var o=i.getCount(),s=e.getCount();var u=0;var a=[];var h=0,c=0;var f=function(t,n){t!==c&&(c=t,a[h++]=t,a[h++]=n)};for(var l=0;l<s;l++){var v=e.getStartCharacter(l),d=e.getEndCharacter(l),g=e.getMetadata(l),p=((1&g?2048:0)|(2&g?4096:0)|(4&g?8192:0)|(8&g?16384:0)|(16&g?16744448:0)|(32&g?4278190080:0))>>>0,w=~p>>>0;for(;u<o&&i.getEndOffset(u)<=v;)f(i.getEndOffset(u),i.getMetadata(u)),u++;for(u<o&&i.getStartOffset(u)<v&&f(v,i.getMetadata(u));u<o&&i.getEndOffset(u)<d;)f(i.getEndOffset(u),i.getMetadata(u)&w|g&p),u++;if(u<o)f(d,i.getMetadata(u)&w|g&p),i.getEndOffset(u)===d&&u++;else{var m=Math.min(Math.max(0,u-1),o-1);f(d,i.getMetadata(m)&w|g&p)}}for(;u<o;)f(i.getEndOffset(u),i.getMetadata(u)),u++;return new mp(new Uint32Array(a),i.getLineContent(),this._languageIdCodec)};t._findFirstPieceWithLine=function(t,n){var i=0,r=t.length-1;for(;i<r;){var e=i+Math.floor((r-i)/2);if(t[e].endLineNumber<n)i=e+1;else{if(!(t[e].startLineNumber>n)){for(;e>i&&t[e-1].startLineNumber<=n&&n<=t[e-1].endLineNumber;)e--;return e}r=e-1}}return i};t.prototype.acceptEdit=function(t,n,i,r,e){for(var o=0,s=this._pieces;o<s.length;o++){var u=s[o];u.acceptEdit(t,n,i,r,e)}};return t}();var gM=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._languageService=n,u._languageConfigurationService=i,u._textModel=r,u._bracketPairsTextModelPart=e,u._languageId=o,u._attachedViews=s,u._semanticTokens=new dM(u._languageService.languageIdCodec),u._onDidChangeLanguage=u._register(new ki),u.onDidChangeLanguage=u._onDidChangeLanguage.event,u._onDidChangeLanguageConfiguration=u._register(new ki),u.onDidChangeLanguageConfiguration=u._onDidChangeLanguageConfiguration.event,u._onDidChangeTokens=u._register(new ki),u.onDidChangeTokens=u._onDidChangeTokens.event,u.grammarTokens=u._register(new pM(u._languageService.languageIdCodec,u._textModel,(function(){return u._languageId}),u._attachedViews)),u._register(u._languageConfigurationService.onDidChange((function(t){t.affects(u._languageId)&&u._onDidChangeLanguageConfiguration.fire({})}))),u._register(u.grammarTokens.onDidChangeTokens((function(t){u._emitModelTokensChangedEvent(t)}))),u._register(u.grammarTokens.onDidChangeBackgroundTokenizationState((function(t){u._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})));return u}n.prototype.handleDidChangeContent=function(t){if(t.isFlush)this._semanticTokens.flush();else if(!t.isEolChange)for(var n=0,i=t.changes;n<i.length;n++){var r=i[n];var e=vA(r.text),o=e[0],s=e[1],u=e[2];this._semanticTokens.acceptEdit(r.range,o,s,u,r.text.length>0?r.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(t)};n.prototype.handleDidChangeAttached=function(){this.grammarTokens.handleDidChangeAttached()};n.prototype.getLineTokens=function(t){this.validateLineNumber(t);var n=this.grammarTokens.getLineTokens(t);return this._semanticTokens.addSparseTokens(t,n)};n.prototype._emitModelTokensChangedEvent=function(t){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(t),this._onDidChangeTokens.fire(t))};n.prototype.validateLineNumber=function(t){if(t<1||t>this._textModel.getLineCount())throw new ri("Illegal value for lineNumber")};Object.defineProperty(n.prototype,"hasTokens",{get:function(){return this.grammarTokens.hasTokens},enumerable:false,configurable:true});n.prototype.resetTokenization=function(){this.grammarTokens.resetTokenization()};Object.defineProperty(n.prototype,"backgroundTokenizationState",{get:function(){return this.grammarTokens.backgroundTokenizationState},enumerable:false,configurable:true});n.prototype.forceTokenization=function(t){this.validateLineNumber(t),this.grammarTokens.forceTokenization(t)};n.prototype.hasAccurateTokensForLine=function(t){return this.validateLineNumber(t),this.grammarTokens.hasAccurateTokensForLine(t)};n.prototype.isCheapToTokenize=function(t){return this.validateLineNumber(t),this.grammarTokens.isCheapToTokenize(t)};n.prototype.tokenizeIfCheap=function(t){this.validateLineNumber(t),this.grammarTokens.tokenizeIfCheap(t)};n.prototype.getTokenTypeIfInsertingCharacter=function(t,n,i){return this.grammarTokens.getTokenTypeIfInsertingCharacter(t,n,i)};n.prototype.tokenizeLineWithEdit=function(t,n,i){return this.grammarTokens.tokenizeLineWithEdit(t,n,i)};n.prototype.setSemanticTokens=function(t,n){this._semanticTokens.set(t,n),this._emitModelTokensChangedEvent({semanticTokensApplied:t!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})};n.prototype.hasCompleteSemanticTokens=function(){return this._semanticTokens.isComplete()};n.prototype.hasSomeSemanticTokens=function(){return!this._semanticTokens.isEmpty()};n.prototype.setPartialSemanticTokens=function(t,n){if(this.hasCompleteSemanticTokens())return;var i=this._textModel.validateRange(this._semanticTokens.setPartial(t,n));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})};n.prototype.getWordAtPosition=function(t){this.assertNotDisposed();var i=this._textModel.validatePosition(t),r=this._textModel.getLineContent(i.lineNumber),e=this.getLineTokens(i.lineNumber),o=e.findTokenIndexAtOffset(i.column-1),s=n._findLanguageBoundaries(e,o),u=s[0],a=s[1],h=sn(i.column,this.getLanguageConfiguration(e.getLanguageId(o)).getWordDefinition(),r.substring(u,a),u);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn)return h;if(o>0&&u===i.column-1){var c=n._findLanguageBoundaries(e,o-1),f=c[0],l=c[1],v=sn(i.column,this.getLanguageConfiguration(e.getLanguageId(o-1)).getWordDefinition(),r.substring(f,l),f);if(v&&v.startColumn<=t.column&&t.column<=v.endColumn)return v}return null};n.prototype.getLanguageConfiguration=function(t){return this._languageConfigurationService.getLanguageConfiguration(t)};n._findLanguageBoundaries=function(t,n){var i=t.getLanguageId(n);var r=0;for(var e=n;e>=0&&t.getLanguageId(e)===i;e--)r=t.getStartOffset(e);var o=t.getLineContent().length;for(var e=n,s=t.getCount();e<s&&t.getLanguageId(e)===i;e++)o=t.getEndOffset(e);return[r,o]};n.prototype.getWordUntilPosition=function(t){var n=this.getWordAtPosition(t);return n?{word:n.word.substr(0,t.column-n.startColumn),startColumn:n.startColumn,endColumn:t.column}:{word:"",startColumn:t.column,endColumn:t.column}};n.prototype.getLanguageId=function(){return this._languageId};n.prototype.getLanguageIdAtPosition=function(t,n){var i=this._textModel.validatePosition(new Tr(t,n)),r=this.getLineTokens(i.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(i.column-1))};n.prototype.setLanguageId=function(t,n){if(n===void 0){n="api"}if(this._languageId===t)return;var i={oldLanguage:this._languageId,newLanguage:t,source:n};this._languageId=t,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})};return n}(IS);var pM=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._languageIdCodec=n,o._textModel=i,o.getLanguageId=r,o._tokenizer=null,o._defaultBackgroundTokenizer=null,o._backgroundTokenizer=o._register(new fi),o._tokens=new lM(o._languageIdCodec),o._debugBackgroundTokenizer=o._register(new fi),o._backgroundTokenizationState=1,o._onDidChangeBackgroundTokenizationState=o._register(new ki),o.onDidChangeBackgroundTokenizationState=o._onDidChangeBackgroundTokenizationState.event,o._onDidChangeTokens=o._register(new ki),o.onDidChangeTokens=o._onDidChangeTokens.event,o._attachedViewStates=o._register(new di),o._register(oe.onDidChange((function(t){var n=o.getLanguageId();t.changedLanguages.indexOf(n)!==-1&&o.resetTokenization()}))),o.resetTokenization(),o._register(e.onDidChangeVisibleRanges((function(t){var n=t.view,i=t.state;if(i){var r=o._attachedViewStates.get(n);r||(r=new wM((function(){return o.refreshRanges(r.lineRanges)})),o._attachedViewStates.set(n,r)),r.handleStateChange(i)}else o._attachedViewStates.deleteAndDispose(n)})));return o}Object.defineProperty(n.prototype,"backgroundTokenizationState",{get:function(){return this._backgroundTokenizationState},enumerable:false,configurable:true});n.prototype.resetTokenization=function(t){var n=this;if(t===void 0){t=!0}var i;this._tokens.flush(),(i=this._debugBackgroundTokens)===null||i===void 0||i.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new eM(this._textModel.getLineCount())),t&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});var r=function(){if(n._textModel.isTooLargeForTokenization())return[null,null];var t=oe.get(n.getLanguageId());if(!t)return[null,null];var i;try{i=t.getInitialState()}catch(t){return Gn(t),[null,null]}return[t,i]}(),e=r[0],o=r[1];if(this._tokenizer=e&&o?new rM(this._textModel.getLineCount(),e,this._textModel,this._languageIdCodec):null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){var s={setTokens:function(t){n.setTokens(t)},backgroundTokenizationFinished:function(){n._backgroundTokenizationState!==2&&(n._backgroundTokenizationState=2,n._onDidChangeBackgroundTokenizationState.fire())},setEndState:function(t,i){var r;if(!n._tokenizer)return;var e=n._tokenizer.store.getFirstInvalidEndStateLineNumber();e!==null&&t>=e&&((r=n._tokenizer)===null||r===void 0||r.store.setEndState(t,i))}};e&&e.createBackgroundTokenizer&&!e.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=e.createBackgroundTokenizer(this._textModel,s)),this._backgroundTokenizer.value||this._textModel.isTooLargeForTokenization()||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new aM(this._tokenizer,s),this._defaultBackgroundTokenizer.handleChanges()),e!=null&&e.backgroundTokenizerShouldOnlyVerifyTokens&&e.createBackgroundTokenizer?(this._debugBackgroundTokens=new lM(this._languageIdCodec),this._debugBackgroundStates=new eM(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=e.createBackgroundTokenizer(this._textModel,{setTokens:function(t){var i;(i=n._debugBackgroundTokens)===null||i===void 0||i.setMultilineTokens(t,n._textModel)},backgroundTokenizationFinished:function(){},setEndState:function(t,i){var r;(r=n._debugBackgroundStates)===null||r===void 0||r.setEndState(t,i)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()};n.prototype.handleDidChangeAttached=function(){var t;(t=this._defaultBackgroundTokenizer)===null||t===void 0||t.handleChanges()};n.prototype.handleDidChangeContent=function(t){var n,i,r;if(t.isFlush)this.resetTokenization(!1);else if(!t.isEolChange){for(var e=0,o=t.changes;e<o.length;e++){var s=o[e];var u=vA(s.text),a=u[0],h=u[1];this._tokens.acceptEdit(s.range,a,h),(n=this._debugBackgroundTokens)===null||n===void 0||n.acceptEdit(s.range,a,h)}(i=this._debugBackgroundStates)===null||i===void 0||i.acceptChanges(t.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(t.changes),(r=this._defaultBackgroundTokenizer)===null||r===void 0||r.handleChanges()}};n.prototype.setTokens=function(t){var n=this._tokens.setMultilineTokens(t,this._textModel).changes;return n.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:n}),{changes:n}};n.prototype.refreshAllVisibleLineTokens=function(){var t=zd.joinMany(__spreadArray([],this._attachedViewStates,true).map((function(t){var n=t[0],i=t[1];return i.lineRanges})));this.refreshRanges(t)};n.prototype.refreshRanges=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.refreshRange(r.startLineNumber,r.endLineNumberExclusive-1)}};n.prototype.refreshRange=function(t,n){var i,r;if(!this._tokenizer)return;t=Math.max(1,Math.min(this._textModel.getLineCount(),t)),n=Math.min(this._textModel.getLineCount(),n);var e=new nM,o=this._tokenizer.tokenizeHeuristically(e,t,n).heuristicTokens,s=this.setTokens(e.finalize());if(o)for(var u=0,a=s.changes;u<a.length;u++){var h=a[u];(i=this._backgroundTokenizer.value)===null||i===void 0||i.requestTokens(h.fromLineNumber,h.toLineNumber+1)}(r=this._defaultBackgroundTokenizer)===null||r===void 0||r.checkFinished()};n.prototype.forceTokenization=function(t){var n,i;var r=new nM;(n=this._tokenizer)===null||n===void 0||n.updateTokensUntilLine(r,t),this.setTokens(r.finalize()),(i=this._defaultBackgroundTokenizer)===null||i===void 0||i.checkFinished()};n.prototype.hasAccurateTokensForLine=function(t){return!this._tokenizer||this._tokenizer.hasAccurateTokensForLine(t)};n.prototype.isCheapToTokenize=function(t){return!this._tokenizer||this._tokenizer.isCheapToTokenize(t)};n.prototype.tokenizeIfCheap=function(t){this.isCheapToTokenize(t)&&this.forceTokenization(t)};n.prototype.getLineTokens=function(t){var n;var i=this._textModel.getLineContent(t),r=this._tokens.getTokens(this._textModel.getLanguageId(),t-1,i);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>t&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>t){var e=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),t-1,i);!r.equals(e)&&(!((n=this._debugBackgroundTokenizer.value)===null||n===void 0)&&n.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(t)}return r};n.prototype.getTokenTypeIfInsertingCharacter=function(t,n,i){if(!this._tokenizer)return 0;var r=this._textModel.validatePosition(new Tr(t,n));return this.forceTokenization(r.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(r,i)};n.prototype.tokenizeLineWithEdit=function(t,n,i){if(!this._tokenizer)return null;var r=this._textModel.validatePosition(t);return this.forceTokenization(r.lineNumber),this._tokenizer.tokenizeLineWithEdit(r,n,i)};Object.defineProperty(n.prototype,"hasTokens",{get:function(){return this._tokens.hasTokens},enumerable:false,configurable:true});return n}(ci);var wM=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._refreshTokens=n,i.runner=i._register(new Ts((function(){return i.update()}),50)),i._computedLineRanges=[],i._lineRanges=[];return i}Object.defineProperty(n.prototype,"lineRanges",{get:function(){return this._lineRanges},enumerable:false,configurable:true});n.prototype.update=function(){v(this._computedLineRanges,this._lineRanges,(function(t,n){return t.equals(n)}))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())};n.prototype.handleStateChange=function(t){this._lineRanges=t.visibleLineRanges,t.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()};return n}(ci);var mM=Zh("undoRedoService");var bM=function(){function t(t,n){this.resource=t,this.elements=n}return t}();var yM=function(){function t(){this.id=t._ID++,this.order=1}t.prototype.nextOrder=function(){return this.id===0?0:this.order++};return t}();yM._ID=0,yM.None=new yM;var _M=function(){function t(){this.id=t._ID++,this.order=1}t.prototype.nextOrder=function(){return this.id===0?0:this.order++};return t}();_M._ID=0,_M.None=new _M;var kM,xM=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},CM=function(t,n){return function(i,r){n(i,r,t)}};function SM(t,n){var i;var r;return typeof t=="string"?i=function(t){var n=new YE;return n.acceptChunk(t),n.finish()}(t):i=(r=t)&&typeof r.read=="function"?function(t){var n=new YE;var i;for(;typeof(i=t.read())=="string";)n.acceptChunk(i);return n.finish()}(t):t,i.create(n)}var DM=0;var AM=function(){function t(t){this._source=t,this._eos=!1}t.prototype.read=function(){if(this._eos)return null;var t=[];var n=0,i=0;for(;;){var r=this._source.read();if(r===null)return this._eos=!0,n===0?null:t.join("");if(r.length>0&&(t[n++]=r,i+=r.length),i>=65536)return t.join("")}};return t}();var OM=function(){throw new Error("Invalid change accessor")};var EM=kM=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){if(e===void 0){e=null}var a=this;a=t.call(this)||this,a._undoRedoService=o,a._languageService=s,a._languageConfigurationService=u,a._onWillDispose=a._register(new ki),a.onWillDispose=a._onWillDispose.event,a._onDidChangeDecorations=a._register(new zM((function(t){return a.handleBeforeFireDecorationsChangedEvent(t)}))),a.onDidChangeDecorations=a._onDidChangeDecorations.event,a._onDidChangeOptions=a._register(new ki),a.onDidChangeOptions=a._onDidChangeOptions.event,a._onDidChangeAttached=a._register(new ki),a.onDidChangeAttached=a._onDidChangeAttached.event,a._onDidChangeInjectedText=a._register(new ki),a._eventEmitter=a._register(new UM),a._languageSelectionListener=a._register(new fi),a._deltaDecorationCallCnt=0,a._attachedViews=new KM,DM++,a.id="$model"+DM,a.isForSimpleWidget=r.isForSimpleWidget,a._associatedResource=e!==null&&e!==void 0?e:Cr.parse("inmemory://model/"+DM),a._attachedEditorCount=0;var h=SM(n,r.defaultEOL),c=h.textBuffer,f=h.disposable;a._buffer=c,a._bufferDisposable=f,a._options=kM.resolveOptions(a._buffer,r);var l=typeof i=="string"?i:i.languageId;typeof i!="string"&&(a._languageSelectionListener.value=i.onDidChange((function(){return a._setLanguage(i.languageId)}))),a._bracketPairs=a._register(new yO(a,a._languageConfigurationService)),a._guidesTextModelPart=a._register(new WS(a,a._languageConfigurationService)),a._decorationProvider=a._register(new CO(a)),a._tokenizationTextModelPart=new gM(a._languageService,a._languageConfigurationService,a,a._bracketPairs,l,a._attachedViews);var v=a._buffer.getLineCount(),d=a._buffer.getValueLengthInRange(new Ir(1,1,v,a._buffer.getLineLength(v)+1),0);r.largeFileOptimizations?(a._isTooLargeForTokenization=d>kM.LARGE_FILE_SIZE_THRESHOLD||v>kM.LARGE_FILE_LINE_COUNT_THRESHOLD,a._isTooLargeForHeapOperation=d>kM.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(a._isTooLargeForTokenization=!1,a._isTooLargeForHeapOperation=!1),a._isTooLargeForSyncing=d>kM._MODEL_SYNC_LIMIT,a._versionId=1,a._alternativeVersionId=1,a._initialUndoRedoSnapshot=null,a._isDisposed=!1,a.__isDisposing=!1,a._instanceId=qo(DM),a._lastDecorationId=0,a._decorations=Object.create(null),a._decorationsTree=new LM,a._commandManager=new tE(a,a._undoRedoService),a._isUndoing=!1,a._isRedoing=!1,a._trimAutoWhitespaceLines=null,a._register(a._decorationProvider.onDidChange((function(){a._onDidChangeDecorations.beginDeferredEmit(),a._onDidChangeDecorations.fire(),a._onDidChangeDecorations.endDeferredEmit()}))),a._languageService.requestRichLanguageFeatures(l);return a}n.resolveOptions=function(t,n){if(n.detectIndentation){var i=rE(t,n.tabSize,n.insertSpaces);return new pd({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:n.trimAutoWhitespace,defaultEOL:n.defaultEOL,bracketPairColorizationOptions:n.bracketPairColorizationOptions})}return new pd(n)};Object.defineProperty(n.prototype,"onDidChangeLanguage",{get:function(){return this._tokenizationTextModelPart.onDidChangeLanguage},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"onDidChangeLanguageConfiguration",{get:function(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"onDidChangeTokens",{get:function(){return this._tokenizationTextModelPart.onDidChangeTokens},enumerable:false,configurable:true});n.prototype.onDidChangeContent=function(t){return this._eventEmitter.slowEvent((function(n){return t(n.contentChangedEvent)}))};n.prototype.onDidChangeContentOrInjectedText=function(t){return ui(this._eventEmitter.fastEvent((function(n){return t(n)})),this._onDidChangeInjectedText.event((function(n){return t(n)})))};n.prototype._isDisposing=function(){return this.__isDisposing};Object.defineProperty(n.prototype,"tokenization",{get:function(){return this._tokenizationTextModelPart},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"bracketPairs",{get:function(){return this._bracketPairs},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"guides",{get:function(){return this._guidesTextModelPart},enumerable:false,configurable:true});n.prototype.dispose=function(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,t.prototype.dispose.call(this),this._bufferDisposable.dispose(),this.__isDisposing=!1;var n=new ZE([],"","\n",!1,!1,!0,!0);n.dispose(),this._buffer=n,this._bufferDisposable=ci.None};n.prototype._assertNotDisposed=function(){if(this._isDisposed)throw new Error("Model is disposed!")};n.prototype._emitContentChangedEvent=function(t,n){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(n),this._bracketPairs.handleDidChangeContent(n),this._eventEmitter.fire(new eA(t,n)))};n.prototype.setValue=function(t){if(this._assertNotDisposed(),t==null)throw Xn();var n=SM(t,this._options.defaultEOL),i=n.textBuffer,r=n.disposable;this._setValueFromTextBuffer(i,r)};n.prototype._createContentChanged2=function(t,n,i,r,e,o,s,u){return{changes:[{range:t,rangeOffset:n,rangeLength:i,text:r}],eol:this._buffer.getEOL(),isEolChange:u,versionId:this.getVersionId(),isUndoing:e,isRedoing:o,isFlush:s}};n.prototype._setValueFromTextBuffer=function(t,n){this._assertNotDisposed();var i=this.getFullModelRange(),r=this.getValueLengthInRange(i),e=this.getLineCount(),o=this.getLineMaxColumn(e);this._buffer=t,this._bufferDisposable.dispose(),this._bufferDisposable=n,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new LM,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new iA([new ZD],this._versionId,!1,!1),this._createContentChanged2(new Ir(1,1,e,o),0,r,this.getValue(),!1,!1,!0,!1))};n.prototype.setEOL=function(t){this._assertNotDisposed();var n=t===1?"\r\n":"\n";if(this._buffer.getEOL()===n)return;var i=this.getFullModelRange(),r=this.getValueLengthInRange(i),e=this.getLineCount(),o=this.getLineMaxColumn(e);this._onBeforeEOLChange(),this._buffer.setEOL(n),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new iA([new nA],this._versionId,!1,!1),this._createContentChanged2(new Ir(1,1,e,o),0,r,this.getValue(),!1,!1,!1,!0))};n.prototype._onBeforeEOLChange=function(){this._decorationsTree.ensureAllNodesHaveRanges(this)};n.prototype._onAfterEOLChange=function(){var t=this.getVersionId(),n=this._decorationsTree.collectNodesPostOrder();for(var i=0,r=n.length;i<r;i++){var e=n[i],o=e.range,s=e.cachedAbsoluteStart-e.start,u=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);e.cachedAbsoluteStart=u,e.cachedAbsoluteEnd=a,e.cachedVersionId=t,e.start=u-s,e.end=a-s,SE(e)}};n.prototype.onBeforeAttached=function(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()};n.prototype.onBeforeDetached=function(t){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(t)};n.prototype.isAttachedToEditor=function(){return this._attachedEditorCount>0};n.prototype.getAttachedEditorCount=function(){return this._attachedEditorCount};n.prototype.isTooLargeForSyncing=function(){return this._isTooLargeForSyncing};n.prototype.isTooLargeForTokenization=function(){return this._isTooLargeForTokenization};n.prototype.isTooLargeForHeapOperation=function(){return this._isTooLargeForHeapOperation};n.prototype.isDisposed=function(){return this._isDisposed};n.prototype.isDominatedByLongLines=function(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;var t=0,n=0;var i=this._buffer.getLineCount();for(var r=1;r<=i;r++){var e=this._buffer.getLineLength(r);e>=1e4?n+=e:t+=e}return n>t};Object.defineProperty(n.prototype,"uri",{get:function(){return this._associatedResource},enumerable:false,configurable:true});n.prototype.getOptions=function(){return this._assertNotDisposed(),this._options};n.prototype.getFormattingOptions=function(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}};n.prototype.updateOptions=function(t){this._assertNotDisposed();var n=t.tabSize!==void 0?t.tabSize:this._options.tabSize,i=t.indentSize!==void 0?t.indentSize:this._options.originalIndentSize,r=t.insertSpaces!==void 0?t.insertSpaces:this._options.insertSpaces,e=t.trimAutoWhitespace!==void 0?t.trimAutoWhitespace:this._options.trimAutoWhitespace,o=t.bracketColorizationOptions!==void 0?t.bracketColorizationOptions:this._options.bracketPairColorizationOptions,s=new pd({tabSize:n,indentSize:i,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:e,bracketPairColorizationOptions:o});if(this._options.equals(s))return;var u=this._options.createChangeEvent(s);this._options=s,this._bracketPairs.handleDidChangeOptions(u),this._decorationProvider.handleDidChangeOptions(u),this._onDidChangeOptions.fire(u)};n.prototype.detectIndentation=function(t,n){this._assertNotDisposed();var i=rE(this._buffer,n,t);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})};n.prototype.normalizeIndentation=function(t){return this._assertNotDisposed(),eC(t,this._options.indentSize,this._options.insertSpaces)};n.prototype.getVersionId=function(){return this._assertNotDisposed(),this._versionId};n.prototype.mightContainRTL=function(){return this._buffer.mightContainRTL()};n.prototype.mightContainUnusualLineTerminators=function(){return this._buffer.mightContainUnusualLineTerminators()};n.prototype.removeUnusualLineTerminators=function(t){if(t===void 0){t=null}var n=this.findMatches(Wo.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(t,n.map((function(t){return{range:t.range,text:null}})),(function(){return null}))};n.prototype.mightContainNonBasicASCII=function(){return this._buffer.mightContainNonBasicASCII()};n.prototype.getAlternativeVersionId=function(){return this._assertNotDisposed(),this._alternativeVersionId};n.prototype.getInitialUndoRedoSnapshot=function(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot};n.prototype.getOffsetAt=function(t){this._assertNotDisposed();var n=this._validatePosition(t.lineNumber,t.column,0);return this._buffer.getOffsetAt(n.lineNumber,n.column)};n.prototype.getPositionAt=function(t){this._assertNotDisposed();var n=Math.min(this._buffer.getLength(),Math.max(0,t));return this._buffer.getPositionAt(n)};n.prototype._increaseVersionId=function(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId};n.prototype._overwriteVersionId=function(t){this._versionId=t};n.prototype._overwriteAlternativeVersionId=function(t){this._alternativeVersionId=t};n.prototype._overwriteInitialUndoRedoSnapshot=function(t){this._initialUndoRedoSnapshot=t};n.prototype.getValue=function(t,n){if(n===void 0){n=!1}if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new ri("Operation would exceed heap memory limits");var i=this.getFullModelRange(),r=this.getValueInRange(i,t);return n?this._buffer.getBOM()+r:r};n.prototype.createSnapshot=function(t){if(t===void 0){t=!1}return new AM(this._buffer.createSnapshot(t))};n.prototype.getValueLength=function(t,n){if(n===void 0){n=!1}this._assertNotDisposed();var i=this.getFullModelRange(),r=this.getValueLengthInRange(i,t);return n?this._buffer.getBOM().length+r:r};n.prototype.getValueInRange=function(t,n){if(n===void 0){n=0}return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(t),n)};n.prototype.getValueLengthInRange=function(t,n){if(n===void 0){n=0}return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(t),n)};n.prototype.getCharacterCountInRange=function(t,n){if(n===void 0){n=0}return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(t),n)};n.prototype.getLineCount=function(){return this._assertNotDisposed(),this._buffer.getLineCount()};n.prototype.getLineContent=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineContent(t)};n.prototype.getLineLength=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineLength(t)};n.prototype.getLinesContent=function(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new ri("Operation would exceed heap memory limits");return this._buffer.getLinesContent()};n.prototype.getEOL=function(){return this._assertNotDisposed(),this._buffer.getEOL()};n.prototype.getEndOfLineSequence=function(){return this._assertNotDisposed(),this._buffer.getEOL()==="\n"?0:1};n.prototype.getLineMinColumn=function(t){return this._assertNotDisposed(),1};n.prototype.getLineMaxColumn=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineLength(t)+1};n.prototype.getLineFirstNonWhitespaceColumn=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(t)};n.prototype.getLineLastNonWhitespaceColumn=function(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new ri("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(t)};n.prototype._validateRangeRelaxedNoAllocations=function(t){var n=this._buffer.getLineCount(),i=t.startLineNumber,r=t.startColumn;var e=Math.floor(typeof i!="number"||isNaN(i)?1:i),o=Math.floor(typeof r!="number"||isNaN(r)?1:r);if(e<1)e=1,o=1;else if(e>n)e=n,o=this.getLineMaxColumn(e);else if(o<=1)o=1;else{var s=this.getLineMaxColumn(e);o>=s&&(o=s)}var u=t.endLineNumber,a=t.endColumn;var h=Math.floor(typeof u!="number"||isNaN(u)?1:u),c=Math.floor(typeof a!="number"||isNaN(a)?1:a);if(h<1)h=1,c=1;else if(h>n)h=n,c=this.getLineMaxColumn(h);else if(c<=1)c=1;else{var s=this.getLineMaxColumn(h);c>=s&&(c=s)}return i===e&&r===o&&u===h&&a===c&&t instanceof Ir&&!(t instanceof Br)?t:new Ir(e,o,h,c)};n.prototype._isValidPosition=function(t,n,i){return typeof t!="number"||typeof n!="number"||isNaN(t)||isNaN(n)||t<1||n<1||(0|t)!==t||(0|n)!==n||t>this._buffer.getLineCount()?!1:n===1?!0:!(n>this.getLineMaxColumn(t)||i===1&&Oo(this._buffer.getLineCharCode(t,n-2)))};n.prototype._validatePosition=function(t,n,i){var r=Math.floor(typeof t!="number"||isNaN(t)?1:t),e=Math.floor(typeof n!="number"||isNaN(n)?1:n),o=this._buffer.getLineCount();if(r<1)return new Tr(1,1);if(r>o)return new Tr(o,this.getLineMaxColumn(o));if(e<=1)return new Tr(r,1);var s=this.getLineMaxColumn(r);return e>=s?new Tr(r,s):i===1&&Oo(this._buffer.getLineCharCode(r,e-2))?new Tr(r,e-1):new Tr(r,e)};n.prototype.validatePosition=function(t){return this._assertNotDisposed(),t instanceof Tr&&this._isValidPosition(t.lineNumber,t.column,1)?t:this._validatePosition(t.lineNumber,t.column,1)};n.prototype._isValidRange=function(t,n){var i=t.startLineNumber,r=t.startColumn,e=t.endLineNumber,o=t.endColumn;if(!this._isValidPosition(i,r,0)||!this._isValidPosition(e,o,0))return!1;if(n===1){var s=r>1?this._buffer.getLineCharCode(i,r-2):0,u=o>1&&o<=this._buffer.getLineLength(e)?this._buffer.getLineCharCode(e,o-2):0,a=Oo(s),h=Oo(u);return!a&&!h}return!0};n.prototype.validateRange=function(t){if(this._assertNotDisposed(),t instanceof Ir&&!(t instanceof Br)&&this._isValidRange(t,1))return t;var n=this._validatePosition(t.startLineNumber,t.startColumn,0),i=this._validatePosition(t.endLineNumber,t.endColumn,0),r=n.lineNumber,e=n.column,o=i.lineNumber,s=i.column;{var u=e>1?this._buffer.getLineCharCode(r,e-2):0,a=s>1&&s<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,s-2):0,h=Oo(u),c=Oo(a);return h||c?r===o&&e===s?new Ir(r,e-1,o,s-1):h&&c?new Ir(r,e-1,o,s+1):h?new Ir(r,e-1,o,s):new Ir(r,e,o,s+1):new Ir(r,e,o,s)}};n.prototype.modifyPosition=function(t,n){this._assertNotDisposed();var i=this.getOffsetAt(t)+n;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))};n.prototype.getFullModelRange=function(){this._assertNotDisposed();var t=this.getLineCount();return new Ir(1,1,t,this.getLineMaxColumn(t))};n.prototype.findMatchesLineByLine=function(t,n,i,r){return this._buffer.findMatchesLineByLine(t,n,i,r)};n.prototype.findMatches=function(t,n,i,r,e,o,s){var u=this;if(s===void 0){s=999}this._assertNotDisposed();var a=null;n!==null&&(Array.isArray(n)||(n=[n]),n.every((function(t){return Ir.isIRange(t)}))&&(a=n.map((function(t){return u.validateRange(t)})))),a===null&&(a=[this.getFullModelRange()]),a=a.sort((function(t,n){return t.startLineNumber-n.startLineNumber||t.startColumn-n.startColumn}));var h=[];var c;if(h.push(a.reduce((function(t,n){return Ir.areIntersecting(t,n)?t.plusRange(n):(h.push(t),n)}))),!i&&t.indexOf("\n")<0){var f=new kd(t,i,r,e).parseSearchRequest();if(!f)return[];c=function(t){return u.findMatchesLineByLine(t,f,o,s)}}else c=function(n){return Sd.findMatches(u,new kd(t,i,r,e),n,o,s)};return h.map(c).reduce((function(t,n){return t.concat(n)}),[])};n.prototype.findNextMatch=function(t,n,i,r,e,o){this._assertNotDisposed();var s=this.validatePosition(n);if(!i&&t.indexOf("\n")<0){var u=new kd(t,i,r,e).parseSearchRequest();if(!u)return null;var a=this.getLineCount();var h=new Ir(s.lineNumber,s.column,a,this.getLineMaxColumn(a)),c=this.findMatchesLineByLine(h,u,o,1);return Sd.findNextMatch(this,new kd(t,i,r,e),s,o),c.length>0?c[0]:(h=new Ir(1,1,s.lineNumber,this.getLineMaxColumn(s.lineNumber)),c=this.findMatchesLineByLine(h,u,o,1),c.length>0?c[0]:null)}return Sd.findNextMatch(this,new kd(t,i,r,e),s,o)};n.prototype.findPreviousMatch=function(t,n,i,r,e,o){this._assertNotDisposed();var s=this.validatePosition(n);return Sd.findPreviousMatch(this,new kd(t,i,r,e),s,o)};n.prototype.pushStackElement=function(){this._commandManager.pushStackElement()};n.prototype.popStackElement=function(){this._commandManager.popStackElement()};n.prototype.pushEOL=function(t){if((this.getEOL()==="\n"?0:1)!==t)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}};n.prototype._validateEditOperation=function(t){return t instanceof md?t:new md(t.identifier||null,this.validateRange(t.range),t.text,t.forceMoveMarkers||!1,t.isAutoWhitespaceEdit||!1,t._isTracked||!1)};n.prototype._validateEditOperations=function(t){var n=[];for(var i=0,r=t.length;i<r;i++)n[i]=this._validateEditOperation(t[i]);return n};n.prototype.pushEditOperations=function(t,n,i,r){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(t,this._validateEditOperations(n),i,r)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}};n.prototype._pushEditOperations=function(t,n,i,r){var e=this;if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){var o=n.map((function(t){return{range:e.validateRange(t.range),text:t.text}}));var s=!0;if(t)for(var u=0,a=t.length;u<a;u++){var h=t[u];var c=!1;for(var f=0,l=o.length;f<l;f++){var v=o[f].range,d=v.startLineNumber>h.endLineNumber,g=h.startLineNumber>v.endLineNumber;if(!d&&!g){c=!0;break}}if(!c){s=!1;break}}if(s)for(var u=0,a=this._trimAutoWhitespaceLines.length;u<a;u++){var h=this._trimAutoWhitespaceLines[u],c=this.getLineMaxColumn(h);var f=!0;for(var l=0,v=o.length;l<v;l++){var d=o[l].range,g=o[l].text;if(!(h<d.startLineNumber||h>d.endLineNumber)&&!(h===d.startLineNumber&&d.startColumn===c&&d.isEmpty()&&g&&g.length>0&&g.charAt(0)==="\n"||h===d.startLineNumber&&d.startColumn===1&&d.isEmpty()&&g&&g.length>0&&g.charAt(g.length-1)==="\n")){f=!1;break}}if(f){var l=new Ir(h,1,h,c);n.push(new md(null,l,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(t,n,i,r)};n.prototype._applyUndo=function(t,n,i,r){var e=this;var o=t.map((function(t){var n=e.getPositionAt(t.newPosition),i=e.getPositionAt(t.newEnd);return{range:new Ir(n.lineNumber,n.column,i.lineNumber,i.column),text:t.oldText}}));this._applyUndoRedoEdits(o,n,!0,!1,i,r)};n.prototype._applyRedo=function(t,n,i,r){var e=this;var o=t.map((function(t){var n=e.getPositionAt(t.oldPosition),i=e.getPositionAt(t.oldEnd);return{range:new Ir(n.lineNumber,n.column,i.lineNumber,i.column),text:t.newText}}));this._applyUndoRedoEdits(o,n,!1,!0,i,r)};n.prototype._applyUndoRedoEdits=function(t,n,i,r,e,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=r,this.applyEdits(t,!1),this.setEOL(n),this._overwriteAlternativeVersionId(e)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}};n.prototype.applyEdits=function(t,n){if(n===void 0){n=!1}try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();var i=this._validateEditOperations(t);return this._doApplyEdits(i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}};n.prototype._doApplyEdits=function(t,n){var i=this._buffer.getLineCount(),r=this._buffer.applyEdits(t,this._options.trimAutoWhitespace,n),e=this._buffer.getLineCount(),o=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,o.length!==0){for(var s=0,u=o.length;s<u;s++){var a=o[s];this._decorationsTree.acceptReplace(a.rangeOffset,a.rangeLength,a.text.length,a.forceMoveMarkers)}var h=[];this._increaseVersionId();var c=i;for(var s=0,u=o.length;s<u;s++){var a=o[s],f=vA(a.text)[0];this._onDidChangeDecorations.fire();var l=a.range.startLineNumber,v=a.range.endLineNumber,d=v-l,g=f,p=Math.min(d,g),w=g-d,m=e-c-w+l,b=m,y=m+g,_=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Tr(b,1)),this.getOffsetAt(new Tr(y,this.getLineMaxColumn(y))),0),k=QD.fromDecorations(_),x=new N(k);var C=function(t){var n=l+t,i=m+t;x.takeFromEndWhile((function(t){return t.lineNumber>i}));var r=x.takeFromEndWhile((function(t){return t.lineNumber===i}));h.push(new YD(n,S.getLineContent(i),r))};var S=this;for(var D=p;D>=0;D--){C(D)}if(p<d){var D=l+p;h.push(new XD(D+1,v))}if(p<g){var D=new N(k),A=l+p,O=g-p,E=e-c-O+A+1,M=[],F=[];var L=function(t){var n=E+t;F[t]=j.getLineContent(n),D.takeWhile((function(t){return t.lineNumber<n})),M[t]=D.takeWhile((function(t){return t.lineNumber===n}))};var j=this;for(var R=0;R<O;R++){L(R)}h.push(new tA(A+1,l+g,F,M))}c+=w}this._emitContentChangedEvent(new iA(h,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits};n.prototype.undo=function(){return this._undoRedoService.undo(this.uri)};n.prototype.canUndo=function(){return this._undoRedoService.canUndo(this.uri)};n.prototype.redo=function(){return this._undoRedoService.redo(this.uri)};n.prototype.canRedo=function(){return this._undoRedoService.canRedo(this.uri)};n.prototype.handleBeforeFireDecorationsChangedEvent=function(t){var n=this;if(t===null||t.size===0)return;var i=Array.from(t).map((function(t){return new YD(t,n.getLineContent(t),n._getInjectedTextInLine(t))}));this._onDidChangeInjectedText.fire(new rA(i))};n.prototype.changeDecorations=function(t,n){if(n===void 0){n=0}this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(n,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}};n.prototype._changeDecorations=function(t,n){var i=this;var r={addDecoration:function(n,r){return i._deltaDecorationsImpl(t,[],[{range:n,options:r}])[0]},changeDecoration:function(t,n){i._changeDecorationImpl(t,n)},changeDecorationOptions:function(t,n){i._changeDecorationOptionsImpl(t,HM(n))},removeDecoration:function(n){i._deltaDecorationsImpl(t,[n],[])},deltaDecorations:function(n,r){return n.length===0&&r.length===0?[]:i._deltaDecorationsImpl(t,n,r)}};var e=null;try{e=n(r)}catch(t){Gn(t)}return r.addDecoration=OM,r.changeDecoration=OM,r.changeDecorationOptions=OM,r.removeDecoration=OM,r.deltaDecorations=OM,e};n.prototype.deltaDecorations=function(t,n,i){if(i===void 0){i=0}if(this._assertNotDisposed(),t||(t=[]),t.length===0&&n.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Gn(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,t,n)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}};n.prototype._getTrackedRange=function(t){return this.getDecorationRange(t)};n.prototype._setTrackedRange=function(t,n,i){var r=t?this._decorations[t]:null;if(!r)return n?this._deltaDecorationsImpl(0,[],[{range:n,options:WM[i]}],!0)[0]:null;if(!n)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;var e=this._validateRangeRelaxedNoAllocations(n),o=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),o,s,e),r.setOptions(WM[i]),this._decorationsTree.insert(r),r.id};n.prototype.removeAllDecorationsWithOwnerId=function(t){if(this._isDisposed)return;var n=this._decorationsTree.collectNodesFromOwner(t);for(var i=0,r=n.length;i<r;i++){var e=n[i];this._decorationsTree.delete(e),delete this._decorations[e.id]}};n.prototype.getDecorationOptions=function(t){var n=this._decorations[t];return n?n.options:null};n.prototype.getDecorationRange=function(t){var n=this._decorations[t];return n?this._decorationsTree.getNodeRange(this,n):null};n.prototype.getLineDecorations=function(t,n,i){if(n===void 0){n=0}if(i===void 0){i=!1}return t<1||t>this.getLineCount()?[]:this.getLinesDecorations(t,t,n,i)};n.prototype.getLinesDecorations=function(t,n,i,r,e){if(i===void 0){i=0}if(r===void 0){r=!1}if(e===void 0){e=!1}var o=this.getLineCount(),s=Math.min(o,Math.max(1,t)),u=Math.min(o,Math.max(1,n)),a=this.getLineMaxColumn(u),h=new Ir(s,1,u,a),c=this._getDecorationsInRange(h,i,r,e);return E(c,this._decorationProvider.getDecorationsInRange(h,i,r)),c};n.prototype.getDecorationsInRange=function(t,n,i,r,e){if(n===void 0){n=0}if(i===void 0){i=!1}if(r===void 0){r=!1}if(e===void 0){e=!1}var o=this.validateRange(t),s=this._getDecorationsInRange(o,n,i,e);return E(s,this._decorationProvider.getDecorationsInRange(o,n,i,r)),s};n.prototype.getOverviewRulerDecorations=function(t,n){if(t===void 0){t=0}if(n===void 0){n=!1}return this._decorationsTree.getAll(this,t,n,!0,!1)};n.prototype.getInjectedTextDecorations=function(t){if(t===void 0){t=0}return this._decorationsTree.getAllInjectedText(this,t)};n.prototype._getInjectedTextInLine=function(t){var n=this._buffer.getOffsetAt(t,1),i=n+this._buffer.getLineLength(t),r=this._decorationsTree.getInjectedTextInInterval(this,n,i,0);return QD.fromDecorations(r).filter((function(n){return n.lineNumber===t}))};n.prototype.getAllDecorations=function(t,n){if(t===void 0){t=0}if(n===void 0){n=!1}var i=this._decorationsTree.getAll(this,t,n,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(t,n)),i};n.prototype.getAllMarginDecorations=function(t){if(t===void 0){t=0}return this._decorationsTree.getAll(this,t,!1,!1,!0)};n.prototype._getDecorationsInRange=function(t,n,i,r){var e=this._buffer.getOffsetAt(t.startLineNumber,t.startColumn),o=this._buffer.getOffsetAt(t.endLineNumber,t.endColumn);return this._decorationsTree.getAllInInterval(this,e,o,n,i,r)};n.prototype.getRangeAt=function(t,n){return this._buffer.getRangeAt(t,n-t)};n.prototype._changeDecorationImpl=function(t,n){var i=this._decorations[t];if(!i)return;if(i.options.after){var r=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber)}if(i.options.before){var r=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}var e=this._validateRangeRelaxedNoAllocations(n),o=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),s=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),o,s,e),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)};n.prototype._changeDecorationOptionsImpl=function(t,n){var i=this._decorations[t];if(!i)return;var r=!(!i.options.overviewRuler||!i.options.overviewRuler.color),e=!(!n.overviewRuler||!n.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(n),i.options.after||n.after){var o=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber)}if(i.options.before||n.before){var o=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}var s=r!==e,u=function(t){return!!t.after||!!t.before}(n)!==FM(i);s||u?(this._decorationsTree.delete(i),i.setOptions(n),this._decorationsTree.insert(i)):i.setOptions(n)};n.prototype._deltaDecorationsImpl=function(t,n,i,r){if(r===void 0){r=!1}var e=this.getVersionId(),o=n.length;var s=0;var u=i.length;var a=0;this._onDidChangeDecorations.beginDeferredEmit();try{var h=new Array(u);for(;s<o||a<u;){var c=null;if(s<o){do{c=this._decorations[n[s++]]}while(!c&&s<o);if(c){if(c.options.after){var f=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber)}if(c.options.before){var f=this._decorationsTree.getNodeRange(this,c);this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber)}this._decorationsTree.delete(c),r||this._onDidChangeDecorations.checkAffectedAndFire(c.options)}}if(a<u){if(!c){var l=++this._lastDecorationId,v="".concat(this._instanceId,";").concat(l);c=new dE(v,0,0),this._decorations[v]=c}var f=i[a],d=this._validateRangeRelaxedNoAllocations(f.range),g=HM(f.options),p=this._buffer.getOffsetAt(d.startLineNumber,d.startColumn),w=this._buffer.getOffsetAt(d.endLineNumber,d.endColumn);c.ownerId=t,c.reset(e,p,w,d),c.setOptions(g),c.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber),c.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber),r||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(c),h[a]=c.id,a++}else c&&delete this._decorations[c.id]}return h}finally{this._onDidChangeDecorations.endDeferredEmit()}};n.prototype.getLanguageId=function(){return this.tokenization.getLanguageId()};n.prototype.setLanguage=function(t,n){var i=this;typeof t=="string"?(this._languageSelectionListener.clear(),this._setLanguage(t,n)):(this._languageSelectionListener.value=t.onDidChange((function(){return i._setLanguage(t.languageId,n)})),this._setLanguage(t.languageId,n))};n.prototype._setLanguage=function(t,n){this.tokenization.setLanguageId(t,n),this._languageService.requestRichLanguageFeatures(t)};n.prototype.getLanguageIdAtPosition=function(t,n){return this.tokenization.getLanguageIdAtPosition(t,n)};n.prototype.getWordAtPosition=function(t){return this._tokenizationTextModelPart.getWordAtPosition(t)};n.prototype.getWordUntilPosition=function(t){return this._tokenizationTextModelPart.getWordUntilPosition(t)};n.prototype.normalizePosition=function(t,n){return t};n.prototype.getLineIndentColumn=function(t){return function(t){var n=0;for(var i=0,r=t;i<r.length;i++){var e=r[i];if(e!==" "&&e!=="\t")break;n++}return n}(this.getLineContent(t))+1};return n}(ci);function MM(t){return!(!t.options.overviewRuler||!t.options.overviewRuler.color)}function FM(t){return!!t.options.after||!!t.options.before}EM._MODEL_SYNC_LIMIT=52428800,EM.LARGE_FILE_SIZE_THRESHOLD=20971520,EM.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,EM.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456,EM.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Qt.tabSize,indentSize:Qt.indentSize,insertSpaces:Qt.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Qt.trimAutoWhitespace,largeFileOptimizations:Qt.largeFileOptimizations,bracketPairColorizationOptions:Qt.bracketPairColorizationOptions},EM=kM=xM([CM(4,mM),CM(5,Zl),CM(6,xv)],EM);var LM=function(){function t(){this._decorationsTree0=new pE,this._decorationsTree1=new pE,this._injectedTextDecorationsTree=new pE}t.prototype.ensureAllNodesHaveRanges=function(t){this.getAll(t,0,!1,!1,!1)};t.prototype._ensureNodesHaveRanges=function(t,n){for(var i=0,r=n;i<r.length;i++){var e=r[i];e.range===null&&(e.range=t.getRangeAt(e.cachedAbsoluteStart,e.cachedAbsoluteEnd))}return n};t.prototype.getAllInInterval=function(t,n,i,r,e,o){var s=t.getVersionId(),u=this._intervalSearch(n,i,r,e,s,o);return this._ensureNodesHaveRanges(t,u)};t.prototype._intervalSearch=function(t,n,i,r,e,o){var s=this._decorationsTree0.intervalSearch(t,n,i,r,e,o),u=this._decorationsTree1.intervalSearch(t,n,i,r,e,o),a=this._injectedTextDecorationsTree.intervalSearch(t,n,i,r,e,o);return s.concat(u).concat(a)};t.prototype.getInjectedTextInInterval=function(t,n,i,r){var e=t.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(n,i,r,!1,e,!1);return this._ensureNodesHaveRanges(t,o).filter((function(t){return t.options.showIfCollapsed||!t.range.isEmpty()}))};t.prototype.getAllInjectedText=function(t,n){var i=t.getVersionId(),r=this._injectedTextDecorationsTree.search(n,!1,i,!1);return this._ensureNodesHaveRanges(t,r).filter((function(t){return t.options.showIfCollapsed||!t.range.isEmpty()}))};t.prototype.getAll=function(t,n,i,r,e){var o=t.getVersionId(),s=this._search(n,i,r,o,e);return this._ensureNodesHaveRanges(t,s)};t.prototype._search=function(t,n,i,r,e){if(i)return this._decorationsTree1.search(t,n,r,e);{var o=this._decorationsTree0.search(t,n,r,e),s=this._decorationsTree1.search(t,n,r,e),u=this._injectedTextDecorationsTree.search(t,n,r,e);return o.concat(s).concat(u)}};t.prototype.collectNodesFromOwner=function(t){var n=this._decorationsTree0.collectNodesFromOwner(t),i=this._decorationsTree1.collectNodesFromOwner(t),r=this._injectedTextDecorationsTree.collectNodesFromOwner(t);return n.concat(i).concat(r)};t.prototype.collectNodesPostOrder=function(){var t=this._decorationsTree0.collectNodesPostOrder(),n=this._decorationsTree1.collectNodesPostOrder(),i=this._injectedTextDecorationsTree.collectNodesPostOrder();return t.concat(n).concat(i)};t.prototype.insert=function(t){FM(t)?this._injectedTextDecorationsTree.insert(t):MM(t)?this._decorationsTree1.insert(t):this._decorationsTree0.insert(t)};t.prototype.delete=function(t){FM(t)?this._injectedTextDecorationsTree.delete(t):MM(t)?this._decorationsTree1.delete(t):this._decorationsTree0.delete(t)};t.prototype.getNodeRange=function(t,n){var i=t.getVersionId();return n.cachedVersionId!==i&&this._resolveNode(n,i),n.range===null&&(n.range=t.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd)),n.range};t.prototype._resolveNode=function(t,n){FM(t)?this._injectedTextDecorationsTree.resolveNode(t,n):MM(t)?this._decorationsTree1.resolveNode(t,n):this._decorationsTree0.resolveNode(t,n)};t.prototype.acceptReplace=function(t,n,i,r){this._decorationsTree0.acceptReplace(t,n,i,r),this._decorationsTree1.acceptReplace(t,n,i,r),this._injectedTextDecorationsTree.acceptReplace(t,n,i,r)};return t}();function jM(t){return t.replace(/[^a-z0-9\-_]/gi," ")}var RM=function(){function t(t){this.color=t.color||"",this.darkColor=t.darkColor||""}return t}();var TM=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._resolvedColor=null,i.position=typeof n.position=="number"?n.position:vd.Center;return i}n.prototype.getColor=function(t){return this._resolvedColor||(t.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,t):this._resolvedColor=this._resolveColor(this.color,t)),this._resolvedColor};n.prototype.invalidateCachedColor=function(){this._resolvedColor=null};n.prototype._resolveColor=function(t,n){if(typeof t=="string")return t;var i=t?n.getColor(t.id):null;return i?i.toString():""};return n}(RM);var IM=function(){function t(t){var n;this.position=(n=t==null?void 0:t.position)!==null&&n!==void 0?n:dd.Center,this.persistLane=t==null?void 0:t.persistLane}return t}();var BM=function(t){__extends(n,t);function n(n){var i=this;var r,e;i=t.call(this,n)||this,i.position=n.position,i.sectionHeaderStyle=(r=n.sectionHeaderStyle)!==null&&r!==void 0?r:null,i.sectionHeaderText=(e=n.sectionHeaderText)!==null&&e!==void 0?e:null;return i}n.prototype.getColor=function(t){return this._resolvedColor||(t.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,t):this._resolvedColor=this._resolveColor(this.color,t)),this._resolvedColor};n.prototype.invalidateCachedColor=function(){this._resolvedColor=void 0};n.prototype._resolveColor=function(t,n){return typeof t=="string"?Ig.fromHex(t):n.getColor(t.id)};return n}(RM);var NM=function(){function t(t){this.content=t.content||"",this.inlineClassName=t.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=t.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=t.attachedData||null,this.cursorStops=t.cursorStops||null}t.from=function(n){return n instanceof t?n:new t(n)};return t}();var PM=function(){function t(t){var n,i,r,e,o,s;this.description=t.description,this.blockClassName=t.blockClassName?jM(t.blockClassName):null,this.blockDoesNotCollapse=(n=t.blockDoesNotCollapse)!==null&&n!==void 0?n:null,this.blockIsAfterEnd=(i=t.blockIsAfterEnd)!==null&&i!==void 0?i:null,this.blockPadding=(r=t.blockPadding)!==null&&r!==void 0?r:null,this.stickiness=t.stickiness||0,this.zIndex=t.zIndex||0,this.className=t.className?jM(t.className):null,this.shouldFillLineOnLineBreak=(e=t.shouldFillLineOnLineBreak)!==null&&e!==void 0?e:null,this.hoverMessage=t.hoverMessage||null,this.glyphMarginHoverMessage=t.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=t.lineNumberHoverMessage||null,this.isWholeLine=t.isWholeLine||!1,this.showIfCollapsed=t.showIfCollapsed||!1,this.collapseOnReplaceEdit=t.collapseOnReplaceEdit||!1,this.overviewRuler=t.overviewRuler?new TM(t.overviewRuler):null,this.minimap=t.minimap?new BM(t.minimap):null,this.glyphMargin=t.glyphMarginClassName?new IM(t.glyphMargin):null,this.glyphMarginClassName=t.glyphMarginClassName?jM(t.glyphMarginClassName):null,this.linesDecorationsClassName=t.linesDecorationsClassName?jM(t.linesDecorationsClassName):null,this.lineNumberClassName=t.lineNumberClassName?jM(t.lineNumberClassName):null,this.linesDecorationsTooltip=t.linesDecorationsTooltip?t.linesDecorationsTooltip.replace(/[<>"'&]/g,(function(t){switch(t){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return t})):null,this.firstLineDecorationClassName=t.firstLineDecorationClassName?jM(t.firstLineDecorationClassName):null,this.marginClassName=t.marginClassName?jM(t.marginClassName):null,this.inlineClassName=t.inlineClassName?jM(t.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=t.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=t.beforeContentClassName?jM(t.beforeContentClassName):null,this.afterContentClassName=t.afterContentClassName?jM(t.afterContentClassName):null,this.after=t.after?NM.from(t.after):null,this.before=t.before?NM.from(t.before):null,this.hideInCommentTokens=(o=t.hideInCommentTokens)!==null&&o!==void 0&&o,this.hideInStringTokens=(s=t.hideInStringTokens)!==null&&s!==void 0&&s}t.register=function(n){return new t(n)};t.createDynamic=function(n){return new t(n)};return t}();PM.EMPTY=PM.register({description:"empty"});var WM=[PM.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),PM.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),PM.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),PM.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function HM(t){return t instanceof PM?t:PM.createDynamic(t)}var zM=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.handleBeforeFire=n,i._actual=i._register(new ki),i.event=i._actual.event,i._affectedInjectedTextLines=null,i._deferredCnt=0,i._shouldFireDeferred=!1,i._affectsMinimap=!1,i._affectsOverviewRuler=!1,i._affectsGlyphMargin=!1,i._affectsLineNumber=!1;return i}n.prototype.beginDeferredEmit=function(){this._deferredCnt++};n.prototype.endDeferredEmit=function(){var t;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(t=this._affectedInjectedTextLines)===null||t===void 0||t.clear(),this._affectedInjectedTextLines=null)};n.prototype.recordLineAffectedByInjectedText=function(t){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(t)};n.prototype.checkAffectedAndFire=function(t){var n,i;this._affectsMinimap||(this._affectsMinimap=!!(!((n=t.minimap)===null||n===void 0)&&n.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(!((i=t.overviewRuler)===null||i===void 0)&&i.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!t.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!t.lineNumberClassName),this.tryFire()};n.prototype.fire=function(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()};n.prototype.tryFire=function(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0};n.prototype.doFire=function(){this.handleBeforeFire(this._affectedInjectedTextLines);var t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(t)};return n}(ci);var UM=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n._fastEmitter=n._register(new ki),n.fastEvent=n._fastEmitter.event,n._slowEmitter=n._register(new ki),n.slowEvent=n._slowEmitter.event,n._deferredCnt=0,n._deferredEvent=null;return n}n.prototype.beginDeferredEmit=function(){this._deferredCnt++};n.prototype.endDeferredEmit=function(t){if(t===void 0){t=null}if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=t;var n=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(n),this._slowEmitter.fire(n)}};n.prototype.fire=function(t){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(t):this._deferredEvent=t:(this._fastEmitter.fire(t),this._slowEmitter.fire(t))};return n}(ci);var KM=function(){function t(){this._onDidChangeVisibleRanges=new ki,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}t.prototype.attachView=function(){var t=this;var n=new VM((function(i){t._onDidChangeVisibleRanges.fire({view:n,state:i})}));return this._views.add(n),n};t.prototype.detachView=function(t){this._views.delete(t),this._onDidChangeVisibleRanges.fire({view:t,state:void 0})};return t}();var VM=function(){function t(t){this.handleStateChange=t}t.prototype.setVisibleLines=function(t,n){var i=t.map((function(t){return new zd(t.startLineNumber,t.endLineNumber+1)}));this.handleStateChange({visibleLineRanges:i,stabilized:n})};return t}();var qM=function(){function t(t,n){this.classifier=new GM(t,n)}t.create=function(n){return new t(n.get(134),n.get(133))};t.prototype.createLineBreaksComputer=function(t,n,i,r,e){var o=this;var s=[],u=[],a=[];return{addRequest:function(t,n,i){s.push(t),u.push(n),a.push(i)},finalize:function(){var h=t.typicalFullwidthCharacterWidth/t.typicalHalfwidthCharacterWidth,c=[];for(var f=0,l=s.length;f<l;f++){var v=u[f],d=a[f];!d||d.injectionOptions||v?c[f]=QM(o.classifier,s[f],v,n,i,h,r,e):c[f]=ZM(o.classifier,d,s[f],n,i,h,r,e)}return $M.length=0,JM.length=0,c}}};return t}();var GM=function(t){__extends(n,t);function n(n,i){var r=t.call(this,0)||this;for(var e=0;e<n.length;e++)r.set(n.charCodeAt(e),1);for(var e=0;e<i.length;e++)r.set(i.charCodeAt(e),2);return r}n.prototype.get=function(t){return t>=0&&t<256?this._asciiMap[t]:t>=12352&&t<=12543||t>=13312&&t<=19903||t>=19968&&t<=40959?3:this._map.get(t)||this._defaultValue};return n}($v);var $M=[],JM=[];function ZM(t,n,i,r,e,o,s,u){if(e===-1)return null;var a=i.length;if(a<=1)return null;var h=u==="keepAll",c=n.breakOffsets,f=n.breakOffsetsVisibleColumn,l=nF(i,r,e,o,s),v=e-l,d=$M,g=JM;var p=0,w=0,m=0,b=e;var y=c.length;var _=0;if(_>=0){var k=Math.abs(f[_]-b);for(;_+1<y;){var x=Math.abs(f[_+1]-b);if(x>=k)break;k=x,_++}}for(;_<y;){var k=_<0?0:c[_],x=_<0?0:f[_];w>k&&(k=w,x=m);var C=0,S=0,D=0,A=0;if(x<=b){var O=x,E=k===0?0:i.charCodeAt(k-1),M=k===0?0:t.get(E),F=!0;for(var L=k;L<a;L++){var j=L,R=i.charCodeAt(L);var T=void 0,I=void 0;if(Oo(R)?(L++,T=0,I=2):(T=t.get(R),I=YM(R,O,r,o)),j>w&&tF(E,M,R,T,h)&&(C=j,S=O),O+=I,O>b){j>w?(D=j,A=O-I):(D=L+1,A=O),O-S>v&&(C=0),F=!1;break}E=R,M=T}if(F){p>0&&(d[p]=c[c.length-1],g[p]=f[c.length-1],p++);break}}if(C===0){var O=x,E=i.charCodeAt(k),M=t.get(E),F=!1;for(var L=k-1;L>=w;L--){var j=L+1,R=i.charCodeAt(L);if(R===9){F=!0;break}var T=void 0,I=void 0;if(Eo(R)?(L--,T=0,I=2):(T=t.get(R),I=zo(R)?o:1),O<=b){if(D===0&&(D=j,A=O),O<=b-v)break;if(tF(R,T,E,M,h)){C=j,S=O;break}}O-=I,E=R,M=T}if(C!==0){var L=v-(A-S);if(L<=r){var j=i.charCodeAt(D);var R=void 0;R=Oo(j)?2:YM(j,A,r,o),L-R<0&&(C=0)}}if(F){_--;continue}}if(C===0&&(C=D,S=A),C<=w){var O=i.charCodeAt(w);Oo(O)?(C=w+2,S=m+2):(C=w+1,S=m+YM(O,m,r,o))}for(w=C,d[p]=C,m=S,g[p]=S,p++,b=S+v;_<0||_<y&&f[_]<S;)_++;var B=Math.abs(f[_]-b);for(;_+1<y;){var O=Math.abs(f[_+1]-b);if(O>=B)break;B=O,_++}}return p===0?null:(d.length=p,g.length=p,$M=n.breakOffsets,JM=n.breakOffsetsVisibleColumn,n.breakOffsets=d,n.breakOffsetsVisibleColumn=g,n.wrappedTextIndentLength=l,n)}function QM(t,n,i,r,e,o,s,u){var a=QD.applyInjectedText(n,i);var h,c;if(i&&i.length>0?(h=i.map((function(t){return t.options})),c=i.map((function(t){return t.column-1}))):(h=null,c=null),e===-1)return h?new qD(c,h,[a.length],[],0):null;var f=a.length;if(f<=1)return h?new qD(c,h,[a.length],[],0):null;var l=u==="keepAll",v=nF(a,r,e,o,s),d=e-v,g=[],p=[];var w=0,m=0,b=0,y=e,_=a.charCodeAt(0),k=t.get(_),x=YM(_,0,r,o),C=1;Oo(_)&&(x+=1,_=a.charCodeAt(1),k=t.get(_),C++);for(var S=C;S<f;S++){var D=S,A=a.charCodeAt(S);var O=void 0,E=void 0;Oo(A)?(S++,O=0,E=2):(O=t.get(A),E=YM(A,x,r,o)),tF(_,k,A,O,l)&&(m=D,b=x),x+=E,x>y&&((m===0||x-b>d)&&(m=D,b=x-E),g[w]=m,p[w]=b,w++,y=b+d,m=0),_=A,k=O}return w!==0||i&&i.length!==0?(g[w]=f,p[w]=x,new qD(c,h,g,p,v)):null}function YM(t,n,i,r){return t===9?i-n%i:zo(t)||t<32?r:1}function XM(t,n){return n-t%n}function tF(t,n,i,r,e){return i!==32&&(n===2&&r!==2||n!==1&&r===1||!e&&n===3&&r!==2||!e&&r===3&&n!==1)}function nF(t,n,i,r,e){var o=0;if(e!==0){var s=vo(t);if(s!==-1){for(var u=0;u<s;u++)o+=t.charCodeAt(u)===9?XM(o,n):1;var a=e===3?2:e===2?1:0;for(var u=0;u<a;u++)o+=XM(o,n);o+r>i&&(o=0)}}return o}var iF=function(){function t(t){this._selTrackedRange=null,this._trackSelection=!0,this._setState(t,new lC(new Ir(1,1,1,1),0,0,new Tr(1,1),0),new lC(new Ir(1,1,1,1),0,0,new Tr(1,1),0))}t.prototype.dispose=function(t){this._removeTrackedRange(t)};t.prototype.startTrackingSelection=function(t){this._trackSelection=!0,this._updateTrackedRange(t)};t.prototype.stopTrackingSelection=function(t){this._trackSelection=!1,this._removeTrackedRange(t)};t.prototype._updateTrackedRange=function(t){this._trackSelection&&(this._selTrackedRange=t.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))};t.prototype._removeTrackedRange=function(t){this._selTrackedRange=t.model._setTrackedRange(this._selTrackedRange,null,0)};t.prototype.asCursorState=function(){return new hC(this.modelState,this.viewState)};t.prototype.readSelectionFromMarkers=function(t){var n=t.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!n.isEmpty()?Br.fromRange(n.collapseToEnd(),this.modelState.selection.getDirection()):Br.fromRange(n,this.modelState.selection.getDirection())};t.prototype.ensureValidState=function(t){this._setState(t,this.modelState,this.viewState)};t.prototype.setState=function(t,n,i){this._setState(t,n,i)};t._validatePositionWithCache=function(t,n,i,r){return n.equals(i)?r:t.normalizePosition(n,2)};t._validateViewState=function(t,n){var i=n.position,r=n.selectionStart.getStartPosition(),e=n.selectionStart.getEndPosition(),o=t.normalizePosition(i,2),s=this._validatePositionWithCache(t,r,i,o),u=this._validatePositionWithCache(t,e,r,s);return i.equals(o)&&r.equals(s)&&e.equals(u)?n:new lC(Ir.fromPositions(s,u),n.selectionStartKind,n.selectionStartLeftoverVisibleColumns+r.column-s.column,o,n.leftoverVisibleColumns+i.column-o.column)};t.prototype._setState=function(n,i,r){if(r&&(r=t._validateViewState(n.viewModel,r)),i){var e=n.model.validateRange(i.selectionStart),o=i.selectionStart.equalsRange(e)?i.selectionStartLeftoverVisibleColumns:0,s=n.model.validatePosition(i.position),u=i.position.equals(s)?i.leftoverVisibleColumns:0;i=new lC(e,i.selectionStartKind,o,s,u)}else{if(!r)return;var e=n.model.validateRange(n.coordinatesConverter.convertViewRangeToModelRange(r.selectionStart)),o=n.model.validatePosition(n.coordinatesConverter.convertViewPositionToModelPosition(r.position));i=new lC(e,r.selectionStartKind,r.selectionStartLeftoverVisibleColumns,o,r.leftoverVisibleColumns)}if(r){var e=n.coordinatesConverter.validateViewRange(r.selectionStart,i.selectionStart),o=n.coordinatesConverter.validateViewPosition(r.position,i.position);r=new lC(e,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,o,i.leftoverVisibleColumns)}else{var e=n.coordinatesConverter.convertModelPositionToViewPosition(new Tr(i.selectionStart.startLineNumber,i.selectionStart.startColumn)),o=n.coordinatesConverter.convertModelPositionToViewPosition(new Tr(i.selectionStart.endLineNumber,i.selectionStart.endColumn)),s=new Ir(e.lineNumber,e.column,o.lineNumber,o.column),u=n.coordinatesConverter.convertModelPositionToViewPosition(i.position);r=new lC(s,i.selectionStartKind,i.selectionStartLeftoverVisibleColumns,u,i.leftoverVisibleColumns)}this.modelState=i,this.viewState=r,this._updateTrackedRange(n)};return t}();var rF=function(){function t(t){this.context=t,this.cursors=[new iF(t)],this.lastAddedCursorIndex=0}t.prototype.dispose=function(){for(var t=0,n=this.cursors;t<n.length;t++){var i=n[t];i.dispose(this.context)}};t.prototype.startTrackingSelections=function(){for(var t=0,n=this.cursors;t<n.length;t++){var i=n[t];i.startTrackingSelection(this.context)}};t.prototype.stopTrackingSelections=function(){for(var t=0,n=this.cursors;t<n.length;t++){var i=n[t];i.stopTrackingSelection(this.context)}};t.prototype.updateContext=function(t){this.context=t};t.prototype.ensureValidState=function(){for(var t=0,n=this.cursors;t<n.length;t++){var i=n[t];i.ensureValidState(this.context)}};t.prototype.readSelectionFromMarkers=function(){var t=this;return this.cursors.map((function(n){return n.readSelectionFromMarkers(t.context)}))};t.prototype.getAll=function(){return this.cursors.map((function(t){return t.asCursorState()}))};t.prototype.getViewPositions=function(){return this.cursors.map((function(t){return t.viewState.position}))};t.prototype.getTopMostViewPosition=function(){return function(t,n){return Wd(t,(function(t,i){return-n(t,i)}))}(this.cursors,R((function(t){return t.viewState.position}),Tr.compare)).viewState.position};t.prototype.getBottomMostViewPosition=function(){return function(t,n){if(t.length===0)return;var i=t[0];for(var r=1;r<t.length;r++){var e=t[r];n(e,i)>=0&&(i=e)}return i}(this.cursors,R((function(t){return t.viewState.position}),Tr.compare)).viewState.position};t.prototype.getSelections=function(){return this.cursors.map((function(t){return t.modelState.selection}))};t.prototype.getViewSelections=function(){return this.cursors.map((function(t){return t.viewState.selection}))};t.prototype.setSelections=function(t){this.setStates(hC.fromModelSelections(t))};t.prototype.getPrimaryCursor=function(){return this.cursors[0].asCursorState()};t.prototype.setStates=function(t){t!==null&&(this.cursors[0].setState(this.context,t[0].modelState,t[0].viewState),this._setSecondaryStates(t.slice(1)))};t.prototype._setSecondaryStates=function(t){var n=this.cursors.length-1,i=t.length;if(n<i){var r=i-n;for(var e=0;e<r;e++)this._addSecondaryCursor()}else if(n>i){var r=n-i;for(var e=0;e<r;e++)this._removeSecondaryCursor(this.cursors.length-2)}for(var r=0;r<i;r++)this.cursors[r+1].setState(this.context,t[r].modelState,t[r].viewState)};t.prototype.killSecondaryCursors=function(){this._setSecondaryStates([])};t.prototype._addSecondaryCursor=function(){this.cursors.push(new iF(this.context)),this.lastAddedCursorIndex=this.cursors.length-1};t.prototype.getLastAddedCursorIndex=function(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex};t.prototype._removeSecondaryCursor=function(t){this.lastAddedCursorIndex>=t+1&&this.lastAddedCursorIndex--,this.cursors[t+1].dispose(this.context),this.cursors.splice(t+1,1)};t.prototype.normalize=function(){if(this.cursors.length===1)return;var t=this.cursors.slice(0),n=[];for(var i=0,r=t.length;i<r;i++)n.push({index:i,selection:t[i].modelState.selection});n.sort(R((function(t){return t.selection}),Ir.compareRangesUsingStarts));for(var i=0;i<n.length-1;i++){var r=n[i],e=n[i+1],o=r.selection,s=e.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;var u=void 0;if(u=s.isEmpty()||o.isEmpty()?s.getStartPosition().isBeforeOrEqual(o.getEndPosition()):s.getStartPosition().isBefore(o.getEndPosition()),u){var a=r.index<e.index?i:i+1,h=r.index<e.index?i+1:i,c=n[h].index,f=n[a].index,l=n[h].selection,v=n[a].selection;if(!l.equalsSelection(v)){var d=l.plusRange(v),g=l.selectionStartLineNumber===l.startLineNumber&&l.selectionStartColumn===l.startColumn,p=v.selectionStartLineNumber===v.startLineNumber&&v.selectionStartColumn===v.startColumn;var w=void 0,m=void 0;c===this.lastAddedCursorIndex?(w=g,this.lastAddedCursorIndex=f):w=p,m=w?new Br(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn):new Br(d.endLineNumber,d.endColumn,d.startLineNumber,d.startColumn),n[a].selection=m;var b=hC.fromModelSelection(m);t[f].setState(this.context,b.modelState,b.viewState)}for(var y=0,_=n;y<_.length;y++){var d=_[y];d.index>c&&d.index--}t.splice(c,1),n.splice(h,1),this._removeSecondaryCursor(c-1),i--}}};return t}();var eF=function(){function t(t,n,i,r){this._cursorContextBrand=void 0,this.model=t,this.viewModel=n,this.coordinatesConverter=i,this.cursorConfig=r}return t}();var oF=function(){function t(){this.type=0}return t}();var sF=function(){function t(){this.type=1}return t}();var uF=function(){function t(t){this.type=2,this._source=t}t.prototype.hasChanged=function(t){return this._source.hasChanged(t)};return t}();var aF=function(){function t(t,n,i){this.selections=t,this.modelSelections=n,this.reason=i,this.type=3}return t}();var hF=function(){function t(t){this.type=4,t?(this.affectsMinimap=t.affectsMinimap,this.affectsOverviewRuler=t.affectsOverviewRuler,this.affectsGlyphMargin=t.affectsGlyphMargin,this.affectsLineNumber=t.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}return t}();var cF=function(){function t(){this.type=5}return t}();var fF=function(){function t(t){this.type=6,this.isFocused=t}return t}();var lF=function(){function t(){this.type=7}return t}();var vF=function(){function t(){this.type=8}return t}();var dF=function(){function t(t,n){this.fromLineNumber=t,this.count=n,this.type=9}return t}();var gF=function(){function t(t,n){this.type=10,this.fromLineNumber=t,this.toLineNumber=n}return t}();var pF=function(){function t(t,n){this.type=11,this.fromLineNumber=t,this.toLineNumber=n}return t}();var wF=function(){function t(t,n,i,r,e,o,s){this.source=t,this.minimalReveal=n,this.range=i,this.selections=r,this.verticalType=e,this.revealHorizontal=o,this.scrollType=s,this.type=12}return t}();var mF=function(){function t(t){this.type=13,this.scrollWidth=t.scrollWidth,this.scrollLeft=t.scrollLeft,this.scrollHeight=t.scrollHeight,this.scrollTop=t.scrollTop,this.scrollWidthChanged=t.scrollWidthChanged,this.scrollLeftChanged=t.scrollLeftChanged,this.scrollHeightChanged=t.scrollHeightChanged,this.scrollTopChanged=t.scrollTopChanged}return t}();var bF=function(){function t(t){this.theme=t,this.type=14}return t}();var yF=function(){function t(t){this.type=15,this.ranges=t}return t}();var _F=function(){function t(){this.type=16}return t}();var kF=function(){function t(){this.type=17}return t}();var xF=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n._onEvent=n._register(new ki),n.onEvent=n._onEvent.event,n._eventHandlers=[],n._viewEventQueue=null,n._isConsumingViewEventQueue=!1,n._collector=null,n._collectorCnt=0,n._outgoingEvents=[];return n}n.prototype.emitOutgoingEvent=function(t){this._addOutgoingEvent(t),this._emitOutgoingEvents()};n.prototype._addOutgoingEvent=function(t){for(var n=0,i=this._outgoingEvents.length;n<i;n++){var r=this._outgoingEvents[n].kind===t.kind?this._outgoingEvents[n].attemptToMerge(t):null;if(r)return void(this._outgoingEvents[n]=r)}this._outgoingEvents.push(t)};n.prototype._emitOutgoingEvents=function(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;var t=this._outgoingEvents.shift();t.isNoOp()||this._onEvent.fire(t)}};n.prototype.addViewEventHandler=function(t){for(var n=0,i=this._eventHandlers.length;n<i;n++)this._eventHandlers[n]===t&&console.warn("Detected duplicate listener in ViewEventDispatcher",t);this._eventHandlers.push(t)};n.prototype.removeViewEventHandler=function(t){for(var n=0;n<this._eventHandlers.length;n++)if(this._eventHandlers[n]===t){this._eventHandlers.splice(n,1);break}};n.prototype.beginEmitViewEvents=function(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new CF),this._collector};n.prototype.endEmitViewEvents=function(){if(this._collectorCnt--,this._collectorCnt===0){var t=this._collector.outgoingEvents,n=this._collector.viewEvents;this._collector=null;for(var i=0,r=t;i<r.length;i++){var e=r[i];this._addOutgoingEvent(e)}n.length>0&&this._emitMany(n)}this._emitOutgoingEvents()};n.prototype.emitSingleViewEvent=function(t){try{this.beginEmitViewEvents().emitViewEvent(t)}finally{this.endEmitViewEvents()}};n.prototype._emitMany=function(t){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(t):this._viewEventQueue=t,this._isConsumingViewEventQueue||this._consumeViewEventQueue()};n.prototype._consumeViewEventQueue=function(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}};n.prototype._doConsumeQueue=function(){for(;this._viewEventQueue;){var t=this._viewEventQueue;this._viewEventQueue=null;var n=this._eventHandlers.slice(0);for(var i=0,r=n;i<r.length;i++){var e=r[i];e.handleEvents(t)}}};return n}(ci);var CF=function(){function t(){this.viewEvents=[],this.outgoingEvents=[]}t.prototype.emitViewEvent=function(t){this.viewEvents.push(t)};t.prototype.emitOutgoingEvent=function(t){this.outgoingEvents.push(t)};return t}();var SF=function(){function t(t,n,i,r){this.kind=0,this._oldContentWidth=t,this._oldContentHeight=n,this.contentWidth=i,this.contentHeight=r,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}t.prototype.isNoOp=function(){return!this.contentWidthChanged&&!this.contentHeightChanged};t.prototype.attemptToMerge=function(n){return n.kind!==this.kind?null:new t(this._oldContentWidth,this._oldContentHeight,n.contentWidth,n.contentHeight)};return t}();var DF=function(){function t(t,n){this.kind=1,this.oldHasFocus=t,this.hasFocus=n}t.prototype.isNoOp=function(){return this.oldHasFocus===this.hasFocus};t.prototype.attemptToMerge=function(n){return n.kind!==this.kind?null:new t(this.oldHasFocus,n.hasFocus)};return t}();var AF=function(){function t(t,n,i,r,e,o,s,u){this.kind=2,this._oldScrollWidth=t,this._oldScrollLeft=n,this._oldScrollHeight=i,this._oldScrollTop=r,this.scrollWidth=e,this.scrollLeft=o,this.scrollHeight=s,this.scrollTop=u,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}t.prototype.isNoOp=function(){return!(this.scrollWidthChanged||this.scrollLeftChanged||this.scrollHeightChanged||this.scrollTopChanged)};t.prototype.attemptToMerge=function(n){return n.kind!==this.kind?null:new t(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,n.scrollWidth,n.scrollLeft,n.scrollHeight,n.scrollTop)};return t}();var OF=function(){function t(){this.kind=3}t.prototype.isNoOp=function(){return!1};t.prototype.attemptToMerge=function(t){return t.kind!==this.kind?null:this};return t}();var EF=function(){function t(){this.kind=4}t.prototype.isNoOp=function(){return!1};t.prototype.attemptToMerge=function(t){return t.kind!==this.kind?null:this};return t}();var MF=function(){function t(t,n,i,r,e,o,s){this.kind=6,this.oldSelections=t,this.selections=n,this.oldModelVersionId=i,this.modelVersionId=r,this.source=e,this.reason=o,this.reachedMaxCursorCount=s}t._selectionsAreEqual=function(t,n){if(!t&&!n)return!0;if(!t||!n)return!1;var i=t.length;if(i!==n.length)return!1;for(var r=0;r<i;r++)if(!t[r].equalsSelection(n[r]))return!1;return!0};t.prototype.isNoOp=function(){return t._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId};t.prototype.attemptToMerge=function(n){return n.kind!==this.kind?null:new t(this.oldSelections,n.selections,this.oldModelVersionId,n.modelVersionId,n.source,n.reason,this.reachedMaxCursorCount||n.reachedMaxCursorCount)};return t}();var FF=function(){function t(){this.kind=5}t.prototype.isNoOp=function(){return!1};t.prototype.attemptToMerge=function(t){return t.kind!==this.kind?null:this};return t}();var LF=function(){function t(t){this.event=t,this.kind=7}t.prototype.isNoOp=function(){return!1};t.prototype.attemptToMerge=function(t){return null};return t}();var jF=function(){function t(t){this.event=t,this.kind=8}t.prototype.isNoOp=function(){return!1};t.prototype.attemptToMerge=function(t){return null};return t}();var RF=function(){function t(t){this.event=t,this.kind=9}t.prototype.isNoOp=function(){return!1};t.prototype.attemptToMerge=function(t){return null};return t}();var TF=function(){function t(t){this.event=t,this.kind=10}t.prototype.isNoOp=function(){return!1};t.prototype.attemptToMerge=function(t){return null};return t}();var IF=function(){function t(t){this.event=t,this.kind=11}t.prototype.isNoOp=function(){return!1};t.prototype.attemptToMerge=function(t){return null};return t}();var BF=function(){function t(t){this.event=t,this.kind=12}t.prototype.isNoOp=function(){return!1};t.prototype.attemptToMerge=function(t){return null};return t}();var NF=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._model=n,o._knownModelVersionId=o._model.getVersionId(),o._viewModel=i,o._coordinatesConverter=r,o.context=new eF(o._model,o._viewModel,o._coordinatesConverter,e),o._cursors=new rF(o.context),o._hasFocus=!1,o._isHandling=!1,o._compositionState=null,o._columnSelectData=null,o._autoClosedActions=[],o._prevEditOperationType=0;return o}n.prototype.dispose=function(){this._cursors.dispose(),this._autoClosedActions=si(this._autoClosedActions),t.prototype.dispose.call(this)};n.prototype.updateConfiguration=function(t){this.context=new eF(this._model,this._viewModel,this._coordinatesConverter,t),this._cursors.updateContext(this.context)};n.prototype.onLineMappingChanged=function(t){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(t,"viewModel",0,this.getCursorStates())};n.prototype.setHasFocus=function(t){this._hasFocus=t};n.prototype._validateAutoClosedActions=function(){if(this._autoClosedActions.length>0){var t=this._cursors.getSelections();for(var n=0;n<this._autoClosedActions.length;n++){var i=this._autoClosedActions[n];i.isValid(t)||(i.dispose(),this._autoClosedActions.splice(n,1),n--)}}};n.prototype.getPrimaryCursorState=function(){return this._cursors.getPrimaryCursor()};n.prototype.getLastAddedCursorIndex=function(){return this._cursors.getLastAddedCursorIndex()};n.prototype.getCursorStates=function(){return this._cursors.getAll()};n.prototype.setStates=function(t,n,i,r){var e=!1;var o=this.context.cursorConfig.multiCursorLimit;r!==null&&r.length>o&&(r=r.slice(0,o),e=!0);var s=PF.from(this._model,this);return this._cursors.setStates(r),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,s,e)};n.prototype.setCursorColumnSelectData=function(t){this._columnSelectData=t};n.prototype.revealAll=function(t,n,i,r,e,o){var s=this._cursors.getViewPositions();var u=null,a=null;s.length>1?a=this._cursors.getViewSelections():u=Ir.fromPositions(s[0],s[0]),t.emitViewEvent(new wF(n,i,u,a,r,e,o))};n.prototype.revealPrimary=function(t,n,i,r,e,o){var s=[this._cursors.getPrimaryCursor().viewState.selection];t.emitViewEvent(new wF(n,i,null,s,r,e,o))};n.prototype.saveState=function(){var t=[],n=this._cursors.getSelections();for(var i=0,r=n.length;i<r;i++){var e=n[i];t.push({inSelectionMode:!e.isEmpty(),selectionStart:{lineNumber:e.selectionStartLineNumber,column:e.selectionStartColumn},position:{lineNumber:e.positionLineNumber,column:e.positionColumn}})}return t};n.prototype.restoreState=function(t,n){var i=[];for(var r=0,e=n.length;r<e;r++){var o=n[r];var s=1,u=1;o.position&&o.position.lineNumber&&(s=o.position.lineNumber),o.position&&o.position.column&&(u=o.position.column);var a=s,h=u;o.selectionStart&&o.selectionStart.lineNumber&&(a=o.selectionStart.lineNumber),o.selectionStart&&o.selectionStart.column&&(h=o.selectionStart.column),i.push({selectionStartLineNumber:a,selectionStartColumn:h,positionLineNumber:s,positionColumn:u})}this.setStates(t,"restoreState",0,hC.fromModelSelections(i)),this.revealAll(t,"restoreState",!1,0,!0,1)};n.prototype.onModelContentChanged=function(t,n){if(n instanceof rA){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(t,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{var i=n.rawContentChangedEvent;if(this._knownModelVersionId=i.versionId,this._isHandling)return;var r=i.containsEvent(1);if(this._prevEditOperationType=0,r)this._cursors.dispose(),this._cursors=new rF(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,"model",1,null,!1);else if(this._hasFocus&&i.resultingSelection&&i.resultingSelection.length>0){var e=hC.fromModelSelections(i.resultingSelection);this.setStates(t,"modelChange",i.isUndoing?5:i.isRedoing?6:2,e)&&this.revealAll(t,"modelChange",!1,0,!0,0)}else{var e=this._cursors.readSelectionFromMarkers();this.setStates(t,"modelChange",2,hC.fromModelSelections(e))}}};n.prototype.getSelection=function(){return this._cursors.getPrimaryCursor().modelState.selection};n.prototype.getTopMostViewPosition=function(){return this._cursors.getTopMostViewPosition()};n.prototype.getBottomMostViewPosition=function(){return this._cursors.getBottomMostViewPosition()};n.prototype.getCursorColumnSelectData=function(){if(this._columnSelectData)return this._columnSelectData;var t=this._cursors.getPrimaryCursor(),n=t.viewState.selectionStart.getStartPosition(),i=t.viewState.position;return{isReal:!1,fromViewLineNumber:n.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n),toViewLineNumber:i.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,i)}};n.prototype.getSelections=function(){return this._cursors.getSelections()};n.prototype.setSelections=function(t,n,i,r){this.setStates(t,n,r,hC.fromModelSelections(i))};n.prototype.getPrevEditOperationType=function(){return this._prevEditOperationType};n.prototype.setPrevEditOperationType=function(t){this._prevEditOperationType=t};n.prototype._pushAutoClosedAction=function(t,n){var i=[],r=[];for(var e=0,o=t.length;e<o;e++)i.push({range:t[e],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),r.push({range:n[e],options:{description:"auto-closed-enclosing",stickiness:1}});var s=this._model.deltaDecorations([],i),u=this._model.deltaDecorations([],r);this._autoClosedActions.push(new WF(this._model,s,u))};n.prototype._executeEditOperation=function(t){if(!t)return;t.shouldPushStackElementBefore&&this._model.pushStackElement();var n=HF.executeCommands(this._model,this._cursors.getSelections(),t.commands);if(n){this._interpretCommandResult(n);var i=[],r=[];for(var e=0;e<t.commands.length;e++){var o=t.commands[e];o instanceof zC&&o.enclosingRange&&o.closeCharacterRange&&(i.push(o.closeCharacterRange),r.push(o.enclosingRange))}i.length>0&&this._pushAutoClosedAction(i,r),this._prevEditOperationType=t.type}t.shouldPushStackElementAfter&&this._model.pushStackElement()};n.prototype._interpretCommandResult=function(t){t&&t.length!==0||(t=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(t),this._cursors.normalize()};n.prototype._emitStateChangedIfNecessary=function(t,n,i,r,e){var o=PF.from(this._model,this);if(o.equals(r))return!1;var s=this._cursors.getSelections(),u=this._cursors.getViewSelections();if(t.emitViewEvent(new aF(u,s,i)),!r||r.cursorState.length!==o.cursorState.length||o.cursorState.some((function(t,n){return!t.modelState.equals(r.cursorState[n].modelState)}))){var a=r?r.cursorState.map((function(t){return t.modelState.selection})):null,h=r?r.modelVersionId:0;t.emitOutgoingEvent(new MF(a,s,h,o.modelVersionId,n||"keyboard",i,e))}return!0};n.prototype._findAutoClosingPairs=function(t){if(!t.length)return null;var n=[];for(var i=0,r=t.length;i<r;i++){var e=t[i];if(!e.text||e.text.indexOf("\n")>=0)return null;var o=e.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!o)return null;var s=o[1],u=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(s);if(!u||u.length!==1)return null;var a=u[0].open,h=e.text.length-o[2].length-1,c=e.text.lastIndexOf(a,h-1);if(c===-1)return null;n.push([c,h])}return n};n.prototype.executeEdits=function(t,n,i,r){var e=this;var o=null;n==="snippet"&&(o=this._findAutoClosingPairs(i)),o&&(i[0]._isTracked=!0);var s=[],u=[],a=this._model.pushEditOperations(this.getSelections(),i,(function(t){if(o)for(var n=0,i=o.length;n<i;n++){var a=o[n],h=a[0],c=a[1],f=t[n],l=f.range.startLineNumber,v=f.range.startColumn-1+h,d=f.range.startColumn-1+c;s.push(new Ir(l,d+1,l,d+2)),u.push(new Ir(l,v+1,l,d+2))}var g=r(t);return g&&(e._isHandling=!0),g}));a&&(this._isHandling=!1,this.setSelections(t,n,a,0)),s.length>0&&this._pushAutoClosedAction(s,u)};n.prototype._executeEdit=function(t,n,i,r){if(r===void 0){r=0}if(this.context.cursorConfig.readOnly)return;var e=PF.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),t()}catch(t){Gn(t)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(n,i,r,e,!1)&&this.revealAll(n,i,!1,0,!0,0)};n.prototype.getAutoClosedCharacters=function(){return WF.getAllAutoClosedCharacters(this._autoClosedActions)};n.prototype.startComposition=function(t){this._compositionState=new UF(this._model,this.getSelections())};n.prototype.endComposition=function(t,n){var i=this;var r=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit((function(){n==="keyboard"&&i._executeEditOperation(HC.compositionEndWithInterceptors(i._prevEditOperationType,i.context.cursorConfig,i._model,r,i.getSelections(),i.getAutoClosedCharacters()))}),t,n)};n.prototype.type=function(t,n,i){var r=this;this._executeEdit((function(){if(i==="keyboard"){var t=n.length;var e=0;for(;e<t;){var o=Ro(n,e),s=n.substr(e,o);r._executeEditOperation(HC.typeWithInterceptors(!!r._compositionState,r._prevEditOperationType,r.context.cursorConfig,r._model,r.getSelections(),r.getAutoClosedCharacters(),s)),e+=o}}else r._executeEditOperation(HC.typeWithoutInterceptors(r._prevEditOperationType,r.context.cursorConfig,r._model,r.getSelections(),n))}),t,i)};n.prototype.compositionType=function(t,n,i,r,e,o){var s=this;if(n.length!==0||i!==0||r!==0)this._executeEdit((function(){s._executeEditOperation(HC.compositionType(s._prevEditOperationType,s.context.cursorConfig,s._model,s.getSelections(),n,i,r,e))}),t,o);else if(e!==0){var u=this.getSelections().map((function(t){var n=t.getPosition();return new Br(n.lineNumber,n.column+e,n.lineNumber,n.column+e)}));this.setSelections(t,o,u,0)}};n.prototype.paste=function(t,n,i,r,e){var o=this;this._executeEdit((function(){o._executeEditOperation(HC.paste(o.context.cursorConfig,o._model,o.getSelections(),n,i,r||[]))}),t,e,4)};n.prototype.cut=function(t,n){var i=this;this._executeEdit((function(){i._executeEditOperation(xC.cut(i.context.cursorConfig,i._model,i.getSelections()))}),t,n)};n.prototype.executeCommand=function(t,n,i){var r=this;this._executeEdit((function(){r._cursors.killSecondaryCursors(),r._executeEditOperation(new vC(0,[n],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),t,i)};n.prototype.executeCommands=function(t,n,i){var r=this;this._executeEdit((function(){r._executeEditOperation(new vC(0,n,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),t,i)};return n}(ci);var PF=function(){function t(t,n){this.modelVersionId=t,this.cursorState=n}t.from=function(n,i){return new t(n.getVersionId(),i.getCursorStates())};t.prototype.equals=function(t){if(!t||this.modelVersionId!==t.modelVersionId||this.cursorState.length!==t.cursorState.length)return!1;for(var n=0,i=this.cursorState.length;n<i;n++)if(!this.cursorState[n].equals(t.cursorState[n]))return!1;return!0};return t}();var WF=function(){function t(t,n,i){this._model=t,this._autoClosedCharactersDecorations=n,this._autoClosedEnclosingDecorations=i}t.getAllAutoClosedCharacters=function(t){var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];n=n.concat(e.getAutoClosedCharactersRanges())}return n};t.prototype.dispose=function(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])};t.prototype.getAutoClosedCharactersRanges=function(){var t=[];for(var n=0;n<this._autoClosedCharactersDecorations.length;n++){var i=this._model.getDecorationRange(this._autoClosedCharactersDecorations[n]);i&&t.push(i)}return t};t.prototype.isValid=function(t){var n=[];for(var i=0;i<this._autoClosedEnclosingDecorations.length;i++){var r=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);if(r&&(n.push(r),r.startLineNumber!==r.endLineNumber))return!1}n.sort(Ir.compareRangesUsingStarts),t.sort(Ir.compareRangesUsingStarts);for(var i=0;i<t.length;i++)if(i>=n.length||!n[i].strictContainsRange(t[i]))return!1;return!0};return t}();var HF=function(){function t(){}t.executeCommands=function(t,n,i){var r={model:t,selectionsBefore:n,trackedRanges:[],trackedRangesDirection:[]},e=this._innerExecuteCommands(r,i);for(var o=0,s=r.trackedRanges.length;o<s;o++)r.model._setTrackedRange(r.trackedRanges[o],null,0);return e};t._innerExecuteCommands=function(t,n){if(this._arrayIsEmpty(n))return null;var i=this._getEditOperations(t,n);if(i.operations.length===0)return null;var r=i.operations,e=this._getLoserCursorMap(r);if(e.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;var o=[];for(var s=0,u=r.length;s<u;s++)e.hasOwnProperty(r[s].identifier.major.toString())||o.push(r[s]);i.hadTrackedEditOperation&&o.length>0&&(o[0]._isTracked=!0);var a=t.model.pushEditOperations(t.selectionsBefore,o,(function(i){var r=[];for(var e=0;e<t.selectionsBefore.length;e++)r[e]=[];for(var o=0,s=i;o<s.length;o++){var e=s[o];e.identifier&&r[e.identifier.major].push(e)}var u=function(t,n){return t.identifier.minor-n.identifier.minor},a=[];var h=function(i){r[i].length>0?(r[i].sort(u),a[i]=n[i].computeCursorState(t.model,{getInverseEditOperations:function(){return r[i]},getTrackedSelection:function(n){var i=parseInt(n,10),r=t.model._getTrackedRange(t.trackedRanges[i]);return t.trackedRangesDirection[i]===0?new Br(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn):new Br(r.endLineNumber,r.endColumn,r.startLineNumber,r.startColumn)}})):a[i]=t.selectionsBefore[i]};for(var e=0;e<t.selectionsBefore.length;e++){h(e)}return a}));a||(a=t.selectionsBefore);var h=[];for(var s in e)e.hasOwnProperty(s)&&h.push(parseInt(s,10));h.sort((function(t,n){return n-t}));for(var c=0,f=h;c<f.length;c++){var s=f[c];a.splice(s,1)}return a};t._arrayIsEmpty=function(t){for(var n=0,i=t.length;n<i;n++)if(t[n])return!1;return!0};t._getEditOperations=function(t,n){var i=[],r=!1;for(var e=0,o=n.length;e<o;e++){var s=n[e];if(s){var u=this._getEditOperationsFromCommand(t,e,s);i=i.concat(u.operations),r=r||u.hadTrackedEditOperation}}return{operations:i,hadTrackedEditOperation:r}};t._getEditOperationsFromCommand=function(t,n,i){var r=[];var e=0;var o=function(t,o,s){if(s===void 0){s=!1}Ir.isEmpty(t)&&o===""||r.push({identifier:{major:n,minor:e++},range:t,text:o,forceMoveMarkers:s,isAutoWhitespaceEdit:i.insertsAutoWhitespace})};var s=!1;var u={addEditOperation:o,addTrackedEditOperation:function(t,n,i){s=!0,o(t,n,i)},trackSelection:function(n,i){var r=Br.liftSelection(n);var e;if(r.isEmpty())if(typeof i=="boolean")e=i?2:3;else{var o=t.model.getLineMaxColumn(r.startLineNumber);e=r.startColumn===o?2:3}else e=1;var s=t.trackedRanges.length,u=t.model._setTrackedRange(null,r,e);return t.trackedRanges[s]=u,t.trackedRangesDirection[s]=r.getDirection(),s.toString()}};try{i.getEditOperations(t.model,u)}catch(t){return Gn(t),{operations:[],hadTrackedEditOperation:!1}}return{operations:r,hadTrackedEditOperation:s}};t._getLoserCursorMap=function(t){(t=t.slice(0)).sort((function(t,n){return-Ir.compareRangesUsingEnds(t.range,n.range)}));var n={};for(var i=1;i<t.length;i++){var r=t[i-1],e=t[i];if(Ir.getStartPosition(r.range).isBefore(Ir.getEndPosition(e.range))){var o=void 0;o=r.identifier.major>e.identifier.major?r.identifier.major:e.identifier.major,n[o.toString()]=!0;for(var s=0;s<t.length;s++)t[s].identifier.major===o&&(t.splice(s,1),s<i&&i--,s--);i>0&&i--}}return n};return t}();var zF=function(){function t(t,n,i){this.text=t,this.startSelection=n,this.endSelection=i}return t}();var UF=function(){function t(n,i){this._original=t._capture(n,i)}t._capture=function(t,n){var i=[];for(var r=0,e=n;r<e.length;r++){var o=e[r];if(o.startLineNumber!==o.endLineNumber)return null;i.push(new zF(t.getLineContent(o.startLineNumber),o.startColumn-1,o.endColumn-1))}return i};t.prototype.deduceOutcome=function(n,i){if(!this._original)return null;var r=t._capture(n,i);if(!r||this._original.length!==r.length)return null;var e=[];for(var o=0,s=this._original.length;o<s;o++)e.push(t._deduceOutcome(this._original[o],r[o]));return e};t._deduceOutcome=function(t,n){var i=Math.min(t.startSelection,n.startSelection,Do(t.text,n.text)),r=Math.min(t.text.length-t.endSelection,n.text.length-n.endSelection,Ao(t.text,n.text)),e=t.text.substring(i,t.text.length-r),o=n.text.substring(i,n.text.length-r);return new UC(e,t.startSelection-i,t.endSelection-i,o,n.startSelection-i,n.endSelection-i)};return t}();var KF={getInitialState:function(){return dp},tokenizeEncoded:function(t,n,i){return pp(0,i)}};function VF(t,n,i,r,e,o,s){var u="<div>",a=r,h=0,c=!0;for(var f=0,l=n.getCount();f<l;f++){var v=n.getEndOffset(f);if(v<=r)continue;var d="";for(;a<v&&a<e;a++){var g=t.charCodeAt(a);switch(g){case 9:{var p=o-(a+h)%o;for(h+=p-1;p>0;)s&&c?(d+="&#160;",c=!1):(d+=" ",c=!0),p--;break}case 60:d+="&lt;",c=!1;break;case 62:d+="&gt;",c=!1;break;case 38:d+="&amp;",c=!1;break;case 0:d+="&#00;",c=!1;break;case 65279:case 8232:case 8233:case 133:d+="�",c=!1;break;case 13:d+="&#8203",c=!1;break;case 32:s&&c?(d+="&#160;",c=!1):(d+=" ",c=!0);break;default:d+=String.fromCharCode(g),c=!1}}if(u+='<span style="'.concat(n.getInlineStyle(f,i),'">').concat(d,"</span>"),v>e||a>=e)break}return u+="</div>",u}function qF(t,n,i){var r='<div class="monaco-tokenized-source">';var e=lo(t);var o=i.getInitialState();for(var s=0,u=e.length;s<u;s++){var a=e[s];s>0&&(r+="<br/>");var h=i.tokenizeEncoded(a,!0,o);mp.convertToEndOffset(h.tokens,a.length);var c=new mp(h.tokens,a,n).inflate();var f=0;for(var l=0,v=c.getCount();l<v;l++){var d=c.getClassName(l),g=c.getEndOffset(l);r+='<span class="'.concat(d,'">').concat(so(a.substring(f,g)),"</span>"),f=g}o=h.endState}return r+="</div>",r}var GF=function(){function t(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}t.prototype.insert=function(t){this._hasPending=!0,this._inserts.push(t)};t.prototype.change=function(t){this._hasPending=!0,this._changes.push(t)};t.prototype.remove=function(t){this._hasPending=!0,this._removes.push(t)};t.prototype.mustCommit=function(){return this._hasPending};t.prototype.commit=function(t){if(!this._hasPending)return;var n=this._inserts,i=this._changes,r=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],t._commitPendingChanges(n,i,r)};return t}();var $F=function(){function t(t,n,i,r,e){this.id=t,this.afterLineNumber=n,this.ordinal=i,this.height=r,this.minWidth=e,this.prefixSum=0}return t}();var JF=function(){function t(n,i,r,e){this._instanceId=qo(++t.INSTANCE_COUNT),this._pendingChanges=new GF,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=n,this._lineHeight=i,this._paddingTop=r,this._paddingBottom=e}t.findInsertionIndex=function(t,n,i){var r=0,e=t.length;for(;r<e;){var o=r+e>>>1;n===t[o].afterLineNumber?i<t[o].ordinal?e=o:r=o+1:n<t[o].afterLineNumber?e=o:r=o+1}return r};t.prototype.setLineHeight=function(t){this._checkPendingChanges(),this._lineHeight=t};t.prototype.setPadding=function(t,n){this._paddingTop=t,this._paddingBottom=n};t.prototype.onFlushed=function(t){this._checkPendingChanges(),this._lineCount=t};t.prototype.changeWhitespace=function(t){var n=this;var i=!1;try{t({insertWhitespace:function(t,r,e,o){i=!0,t|=0,r|=0,e|=0,o|=0;var s=n._instanceId+ ++n._lastWhitespaceId;return n._pendingChanges.insert(new $F(s,t,r,e,o)),s},changeOneWhitespace:function(t,r,e){i=!0,r|=0,e|=0,n._pendingChanges.change({id:t,newAfterLineNumber:r,newHeight:e})},removeWhitespace:function(t){i=!0,n._pendingChanges.remove({id:t})}})}finally{this._pendingChanges.commit(this)}return i};t.prototype._commitPendingChanges=function(t,n,i){if((t.length>0||i.length>0)&&(this._minWidth=-1),t.length+n.length+i.length<=1){for(var r=0,e=t;r<e.length;r++){var o=e[r];this._insertWhitespace(o)}for(var s=0,u=n;s<u.length;s++){var o=u[s];this._changeOneWhitespace(o.id,o.newAfterLineNumber,o.newHeight)}for(var a=0,h=i;a<h.length;a++){var o=h[a];var c=this._findWhitespaceIndex(o.id);c!==-1&&this._removeWhitespace(c)}return}var f=new Set;for(var l=0,v=i;l<v.length;l++){var o=v[l];f.add(o.id)}var d=new Map;for(var g=0,p=n;g<p.length;g++){var o=p[g];d.set(o.id,o)}var w=function(t){var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];if(!f.has(e.id)){if(d.has(e.id)){var o=d.get(e.id);e.afterLineNumber=o.newAfterLineNumber,e.height=o.newHeight}n.push(e)}}return n},m=w(this._arr).concat(w(t));m.sort((function(t,n){return t.afterLineNumber===n.afterLineNumber?t.ordinal-n.ordinal:t.afterLineNumber-n.afterLineNumber})),this._arr=m,this._prefixSumValidIndex=-1};t.prototype._checkPendingChanges=function(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)};t.prototype._insertWhitespace=function(n){var i=t.findInsertionIndex(this._arr,n.afterLineNumber,n.ordinal);this._arr.splice(i,0,n),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)};t.prototype._findWhitespaceIndex=function(t){var n=this._arr;for(var i=0,r=n.length;i<r;i++)if(n[i].id===t)return i;return-1};t.prototype._changeOneWhitespace=function(t,n,i){var r=this._findWhitespaceIndex(t);if(r!==-1&&(this._arr[r].height!==i&&(this._arr[r].height=i,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,r-1)),this._arr[r].afterLineNumber!==n)){var e=this._arr[r];this._removeWhitespace(r),e.afterLineNumber=n,this._insertWhitespace(e)}};t.prototype._removeWhitespace=function(t){this._arr.splice(t,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)};t.prototype.onLinesDeleted=function(t,n){this._checkPendingChanges(),t|=0,n|=0,this._lineCount-=n-t+1;for(var i=0,r=this._arr.length;i<r;i++){var e=this._arr[i].afterLineNumber;t<=e&&e<=n?this._arr[i].afterLineNumber=t-1:e>n&&(this._arr[i].afterLineNumber-=n-t+1)}};t.prototype.onLinesInserted=function(t,n){this._checkPendingChanges(),t|=0,n|=0,this._lineCount+=n-t+1;for(var i=0,r=this._arr.length;i<r;i++)t<=this._arr[i].afterLineNumber&&(this._arr[i].afterLineNumber+=n-t+1)};t.prototype.getWhitespacesTotalHeight=function(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)};t.prototype.getWhitespacesAccumulatedHeight=function(t){this._checkPendingChanges(),t|=0;var n=Math.max(0,this._prefixSumValidIndex+1);n===0&&(this._arr[0].prefixSum=this._arr[0].height,n++);for(var i=n;i<=t;i++)this._arr[i].prefixSum=this._arr[i-1].prefixSum+this._arr[i].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,t),this._arr[t].prefixSum};t.prototype.getLinesTotalHeight=function(){return this._checkPendingChanges(),this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom};t.prototype.getWhitespaceAccumulatedHeightBeforeLineNumber=function(t){this._checkPendingChanges(),t|=0;var n=this._findLastWhitespaceBeforeLineNumber(t);return n===-1?0:this.getWhitespacesAccumulatedHeight(n)};t.prototype._findLastWhitespaceBeforeLineNumber=function(t){t|=0;var n=this._arr;var i=0,r=n.length-1;for(;i<=r;){var e=i+((r-i|0)/2|0)|0;if(n[e].afterLineNumber<t){if(e+1>=n.length||n[e+1].afterLineNumber>=t)return e;i=e+1|0}else r=e-1|0}return-1};t.prototype._findFirstWhitespaceAfterLineNumber=function(t){t|=0;var n=this._findLastWhitespaceBeforeLineNumber(t)+1;return n<this._arr.length?n:-1};t.prototype.getFirstWhitespaceIndexAfterLineNumber=function(t){return this._checkPendingChanges(),t|=0,this._findFirstWhitespaceAfterLineNumber(t)};t.prototype.getVerticalOffsetForLineNumber=function(t,n){if(n===void 0){n=!1}var i;return this._checkPendingChanges(),i=(t|=0)>1?this._lineHeight*(t-1):0,i+this.getWhitespaceAccumulatedHeightBeforeLineNumber(t-(n?1:0))+this._paddingTop};t.prototype.getVerticalOffsetAfterLineNumber=function(t,n){if(n===void 0){n=!1}return this._checkPendingChanges(),t|=0,this._lineHeight*t+this.getWhitespaceAccumulatedHeightBeforeLineNumber(t+(n?1:0))+this._paddingTop};t.prototype.getWhitespaceMinWidth=function(){if(this._checkPendingChanges(),this._minWidth===-1){var t=0;for(var n=0,i=this._arr.length;n<i;n++)t=Math.max(t,this._arr[n].minWidth);this._minWidth=t}return this._minWidth};t.prototype.isAfterLines=function(t){return this._checkPendingChanges(),t>this.getLinesTotalHeight()};t.prototype.isInTopPadding=function(t){return this._paddingTop!==0&&(this._checkPendingChanges(),t<this._paddingTop)};t.prototype.isInBottomPadding=function(t){return this._paddingBottom===0?!1:(this._checkPendingChanges(),t>=this.getLinesTotalHeight()-this._paddingBottom)};t.prototype.getLineNumberAtOrAfterVerticalOffset=function(t){if(this._checkPendingChanges(),(t|=0)<0)return 1;var n=0|this._lineCount,i=this._lineHeight;var r=1,e=n;for(;r<e;){var o=(r+e)/2|0,s=0|this.getVerticalOffsetForLineNumber(o);if(t>=s+i)r=o+1;else{if(t>=s)return o;e=o}}return r>n?n:r};t.prototype.getLinesViewportData=function(t,n){this._checkPendingChanges(),t|=0,n|=0;var i=this._lineHeight,r=0|this.getLineNumberAtOrAfterVerticalOffset(t),e=0|this.getVerticalOffsetForLineNumber(r);var o=0|this._lineCount,s=0|this.getFirstWhitespaceIndexAfterLineNumber(r);var u=0|this.getWhitespacesCount();var a,h;s===-1?(s=u,h=o+1,a=0):(h=0|this.getAfterLineNumberForWhitespaceIndex(s),a=0|this.getHeightForWhitespaceIndex(s));var c=e,f=c;var l=5e5;var v=0;e>=l&&(v=Math.floor(e/l)*l,v=Math.floor(v/i)*i,f-=v);var d=[],g=t+(n-t)/2;var p=-1;for(var w=r;w<=o;w++){for(p===-1&&(c<=g&&g<c+i||c>g)&&(p=w),c+=i,d[w-r]=f,f+=i;h===w;)f+=a,c+=a,s++,s>=u?h=o+1:(h=0|this.getAfterLineNumberForWhitespaceIndex(s),a=0|this.getHeightForWhitespaceIndex(s));if(c>=n){o=w;break}}p===-1&&(p=o);var m=0|this.getVerticalOffsetForLineNumber(o);var b=r,y=o;return b<y&&e<t&&b++,b<y&&m+i>n&&y--,{bigNumbersDelta:v,startLineNumber:r,endLineNumber:o,relativeVerticalOffset:d,centeredLineNumber:p,completelyVisibleStartLineNumber:b,completelyVisibleEndLineNumber:y,lineHeight:this._lineHeight}};t.prototype.getVerticalOffsetForWhitespaceIndex=function(t){this._checkPendingChanges(),t|=0;var n=this.getAfterLineNumberForWhitespaceIndex(t);var i,r;return i=n>=1?this._lineHeight*n:0,r=t>0?this.getWhitespacesAccumulatedHeight(t-1):0,i+r+this._paddingTop};t.prototype.getWhitespaceIndexAtOrAfterVerticallOffset=function(t){this._checkPendingChanges(),t|=0;var n=0,i=this.getWhitespacesCount()-1;if(i<0||t>=this.getVerticalOffsetForWhitespaceIndex(i)+this.getHeightForWhitespaceIndex(i))return-1;for(;n<i;){var r=Math.floor((n+i)/2),e=this.getVerticalOffsetForWhitespaceIndex(r);if(t>=e+this.getHeightForWhitespaceIndex(r))n=r+1;else{if(t>=e)return r;i=r}}return n};t.prototype.getWhitespaceAtVerticalOffset=function(t){this._checkPendingChanges(),t|=0;var n=this.getWhitespaceIndexAtOrAfterVerticallOffset(t);if(n<0||n>=this.getWhitespacesCount())return null;var i=this.getVerticalOffsetForWhitespaceIndex(n);if(i>t)return null;var r=this.getHeightForWhitespaceIndex(n);return{id:this.getIdForWhitespaceIndex(n),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(n),verticalOffset:i,height:r}};t.prototype.getWhitespaceViewportData=function(t,n){this._checkPendingChanges(),t|=0,n|=0;var i=this.getWhitespaceIndexAtOrAfterVerticallOffset(t),r=this.getWhitespacesCount()-1;if(i<0)return[];var e=[];for(var o=i;o<=r;o++){var s=this.getVerticalOffsetForWhitespaceIndex(o),u=this.getHeightForWhitespaceIndex(o);if(s>=n)break;e.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:s,height:u})}return e};t.prototype.getWhitespaces=function(){return this._checkPendingChanges(),this._arr.slice(0)};t.prototype.getWhitespacesCount=function(){return this._checkPendingChanges(),this._arr.length};t.prototype.getIdForWhitespaceIndex=function(t){return this._checkPendingChanges(),t|=0,this._arr[t].id};t.prototype.getAfterLineNumberForWhitespaceIndex=function(t){return this._checkPendingChanges(),t|=0,this._arr[t].afterLineNumber};t.prototype.getHeightForWhitespaceIndex=function(t){return this._checkPendingChanges(),t|=0,this._arr[t].height};return t}();JF.INSTANCE_COUNT=0;var ZF=function(){function t(t,n,i,r){(t|=0)<0&&(t=0),(n|=0)<0&&(n=0),(i|=0)<0&&(i=0),(r|=0)<0&&(r=0),this.width=t,this.contentWidth=n,this.scrollWidth=Math.max(t,n),this.height=i,this.contentHeight=r,this.scrollHeight=Math.max(i,r)}t.prototype.equals=function(t){return this.width===t.width&&this.contentWidth===t.contentWidth&&this.height===t.height&&this.contentHeight===t.contentHeight};return t}();var QF=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._onDidContentSizeChange=r._register(new ki),r.onDidContentSizeChange=r._onDidContentSizeChange.event,r._dimensions=new ZF(0,0,0,0),r._scrollable=r._register(new fk({forceIntegerValues:!0,smoothScrollDuration:n,scheduleAtNextAnimationFrame:i})),r.onDidScroll=r._scrollable.onScroll;return r}n.prototype.getScrollable=function(){return this._scrollable};n.prototype.setSmoothScrollDuration=function(t){this._scrollable.setSmoothScrollDuration(t)};n.prototype.validateScrollPosition=function(t){return this._scrollable.validateScrollPosition(t)};n.prototype.getScrollDimensions=function(){return this._dimensions};n.prototype.setScrollDimensions=function(t){if(this._dimensions.equals(t))return;var n=this._dimensions;this._dimensions=t,this._scrollable.setScrollDimensions({width:t.width,scrollWidth:t.scrollWidth,height:t.height,scrollHeight:t.scrollHeight},!0);var i=n.contentWidth!==t.contentWidth,r=n.contentHeight!==t.contentHeight;(i||r)&&this._onDidContentSizeChange.fire(new SF(n.contentWidth,n.contentHeight,t.contentWidth,t.contentHeight))};n.prototype.getFutureScrollPosition=function(){return this._scrollable.getFutureScrollPosition()};n.prototype.getCurrentScrollPosition=function(){return this._scrollable.getCurrentScrollPosition()};n.prototype.setScrollPositionNow=function(t){this._scrollable.setScrollPositionNow(t)};n.prototype.setScrollPositionSmooth=function(t){this._scrollable.setScrollPositionSmooth(t)};n.prototype.hasPendingScrollAnimation=function(){return this._scrollable.hasPendingScrollAnimation()};return n}(ci);var YF=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._configuration=n;var o=e._configuration.options,s=o.get(145),u=o.get(84);e._linesLayout=new JF(i,o.get(67),u.top,u.bottom),e._maxLineWidth=0,e._overlayWidgetsMinWidth=0,e._scrollable=e._register(new QF(0,r)),e._configureSmoothScrollDuration(),e._scrollable.setScrollDimensions(new ZF(s.contentWidth,0,s.height,0)),e.onDidScroll=e._scrollable.onDidScroll,e.onDidContentSizeChange=e._scrollable.onDidContentSizeChange,e._updateHeight();return e}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.getScrollable=function(){return this._scrollable.getScrollable()};n.prototype.onHeightMaybeChanged=function(){this._updateHeight()};n.prototype._configureSmoothScrollDuration=function(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(114)?125:0)};n.prototype.onConfigurationChanged=function(t){var n=this._configuration.options;if(t.hasChanged(67)&&this._linesLayout.setLineHeight(n.get(67)),t.hasChanged(84)){var i=n.get(84);this._linesLayout.setPadding(i.top,i.bottom)}if(t.hasChanged(145)){var i=n.get(145),r=i.contentWidth,e=i.height,o=this._scrollable.getScrollDimensions(),s=o.contentWidth;this._scrollable.setScrollDimensions(new ZF(r,o.contentWidth,e,this._getContentHeight(r,e,s)))}else this._updateHeight();t.hasChanged(114)&&this._configureSmoothScrollDuration()};n.prototype.onFlushed=function(t){this._linesLayout.onFlushed(t)};n.prototype.onLinesDeleted=function(t,n){this._linesLayout.onLinesDeleted(t,n)};n.prototype.onLinesInserted=function(t,n){this._linesLayout.onLinesInserted(t,n)};n.prototype._getHorizontalScrollbarHeight=function(t,n){var i=this._configuration.options.get(103);return i.horizontal===2||t>=n?0:i.horizontalScrollbarSize};n.prototype._getContentHeight=function(t,n,i){var r=this._configuration.options;var e=this._linesLayout.getLinesTotalHeight();return r.get(105)?e+=Math.max(0,n-r.get(67)-r.get(84).bottom):r.get(103).ignoreHorizontalScrollbarInContentHeight||(e+=this._getHorizontalScrollbarHeight(t,i)),e};n.prototype._updateHeight=function(){var t=this._scrollable.getScrollDimensions(),n=t.width,i=t.height,r=t.contentWidth;this._scrollable.setScrollDimensions(new ZF(n,t.contentWidth,i,this._getContentHeight(n,i,r)))};n.prototype.getCurrentViewport=function(){var t=this._scrollable.getScrollDimensions(),n=this._scrollable.getCurrentScrollPosition();return new Ip(n.scrollTop,n.scrollLeft,t.width,t.height)};n.prototype.getFutureViewport=function(){var t=this._scrollable.getScrollDimensions(),n=this._scrollable.getFutureScrollPosition();return new Ip(n.scrollTop,n.scrollLeft,t.width,t.height)};n.prototype._computeContentWidth=function(){var t=this._configuration.options,n=this._maxLineWidth,i=t.get(146),r=t.get(50),e=t.get(145);if(i.isViewportWrapping){var o=t.get(73);return n>e.contentWidth+r.typicalHalfwidthCharacterWidth&&o.enabled&&o.side==="right"?n+e.verticalScrollbarWidth:n}{var o=t.get(104)*r.typicalHalfwidthCharacterWidth,s=this._linesLayout.getWhitespaceMinWidth();return Math.max(n+o+e.verticalScrollbarWidth,s,this._overlayWidgetsMinWidth)}};n.prototype.setMaxLineWidth=function(t){this._maxLineWidth=t,this._updateContentWidth()};n.prototype.setOverlayWidgetsMinWidth=function(t){this._overlayWidgetsMinWidth=t,this._updateContentWidth()};n.prototype._updateContentWidth=function(){var t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new ZF(t.width,this._computeContentWidth(),t.height,t.contentHeight)),this._updateHeight()};n.prototype.saveState=function(){var t=this._scrollable.getFutureScrollPosition(),n=t.scrollTop,i=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(n);return{scrollTop:n,scrollTopWithoutViewZones:n-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(i),scrollLeft:t.scrollLeft}};n.prototype.changeWhitespace=function(t){var n=this._linesLayout.changeWhitespace(t);return n&&this.onHeightMaybeChanged(),n};n.prototype.getVerticalOffsetForLineNumber=function(t,n){if(n===void 0){n=!1}return this._linesLayout.getVerticalOffsetForLineNumber(t,n)};n.prototype.getVerticalOffsetAfterLineNumber=function(t,n){if(n===void 0){n=!1}return this._linesLayout.getVerticalOffsetAfterLineNumber(t,n)};n.prototype.isAfterLines=function(t){return this._linesLayout.isAfterLines(t)};n.prototype.isInTopPadding=function(t){return this._linesLayout.isInTopPadding(t)};n.prototype.isInBottomPadding=function(t){return this._linesLayout.isInBottomPadding(t)};n.prototype.getLineNumberAtVerticalOffset=function(t){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t)};n.prototype.getWhitespaceAtVerticalOffset=function(t){return this._linesLayout.getWhitespaceAtVerticalOffset(t)};n.prototype.getLinesViewportData=function(){var t=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(t.top,t.top+t.height)};n.prototype.getLinesViewportDataAtScrollTop=function(t){var n=this._scrollable.getScrollDimensions();return t+n.height>n.scrollHeight&&(t=n.scrollHeight-n.height),t<0&&(t=0),this._linesLayout.getLinesViewportData(t,t+n.height)};n.prototype.getWhitespaceViewportData=function(){var t=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(t.top,t.top+t.height)};n.prototype.getWhitespaces=function(){return this._linesLayout.getWhitespaces()};n.prototype.getContentWidth=function(){return this._scrollable.getScrollDimensions().contentWidth};n.prototype.getScrollWidth=function(){return this._scrollable.getScrollDimensions().scrollWidth};n.prototype.getContentHeight=function(){return this._scrollable.getScrollDimensions().contentHeight};n.prototype.getScrollHeight=function(){return this._scrollable.getScrollDimensions().scrollHeight};n.prototype.getCurrentScrollLeft=function(){return this._scrollable.getCurrentScrollPosition().scrollLeft};n.prototype.getCurrentScrollTop=function(){return this._scrollable.getCurrentScrollPosition().scrollTop};n.prototype.validateScrollPosition=function(t){return this._scrollable.validateScrollPosition(t)};n.prototype.setScrollPosition=function(t,n){n===1?this._scrollable.setScrollPositionNow(t):this._scrollable.setScrollPositionSmooth(t)};n.prototype.hasPendingScrollAnimation=function(){return this._scrollable.hasPendingScrollAnimation()};n.prototype.deltaScrollNow=function(t,n){var i=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:i.scrollLeft+t,scrollTop:i.scrollTop+n})};return n}(ci);var XF=function(){function t(t,n,i,r,e){this.editorId=t,this.model=n,this.configuration=i,this._linesCollection=r,this._coordinatesConverter=e,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}t.prototype._clearCachedModelDecorationsResolver=function(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null};t.prototype.dispose=function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()};t.prototype.reset=function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()};t.prototype.onModelDecorationsChanged=function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()};t.prototype.onLineMappingChanged=function(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()};t.prototype._getOrCreateViewModelDecoration=function(t){var n=t.id;var i=this._decorationsCache[n];if(!i){var r=t.range,e=t.options;var o=void 0;if(e.isWholeLine){var s=this._coordinatesConverter.convertModelPositionToViewPosition(new Tr(r.startLineNumber,1),0,!1,!0),u=this._coordinatesConverter.convertModelPositionToViewPosition(new Tr(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);o=new Ir(s.lineNumber,s.column,u.lineNumber,u.column)}else o=this._coordinatesConverter.convertModelRangeToViewRange(r,1);i=new zp(o,e),this._decorationsCache[n]=i}return i};t.prototype.getMinimapDecorationsInRange=function(t){return this._getDecorationsInRange(t,!0,!1).decorations};t.prototype.getDecorationsViewportData=function(t){var n=this._cachedModelDecorationsResolver!==null;return n=n&&t.equalsRange(this._cachedModelDecorationsResolverViewRange),n||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(t,!1,!1),this._cachedModelDecorationsResolverViewRange=t),this._cachedModelDecorationsResolver};t.prototype.getInlineDecorationsOnLine=function(t,n,i){if(n===void 0){n=!1}if(i===void 0){i=!1}var r=new Ir(t,this._linesCollection.getViewLineMinColumn(t),t,this._linesCollection.getViewLineMaxColumn(t));return this._getDecorationsInRange(r,n,i).inlineDecorations[0]};t.prototype._getDecorationsInRange=function(t,n,i){var r=this._linesCollection.getDecorationsInRange(t,this.editorId,Fn(this.configuration.options),n,i),e=t.startLineNumber,o=t.endLineNumber,s=[];var u=0;var a=[];for(var h=e;h<=o;h++)a[h-e]=[];for(var h=0,c=r.length;h<c;h++){var f=r[h],l=f.options;if(!tL(this.model,f))continue;var v=this._getOrCreateViewModelDecoration(f),d=v.range;if(s[u++]=v,l.inlineClassName){var g=new Wp(d,l.inlineClassName,l.inlineClassNameAffectsLetterSpacing?3:0),p=Math.max(e,d.startLineNumber),w=Math.min(o,d.endLineNumber);for(var m=p;m<=w;m++)a[m-e].push(g)}if(l.beforeContentClassName&&e<=d.startLineNumber&&d.startLineNumber<=o){var g=new Wp(new Ir(d.startLineNumber,d.startColumn,d.startLineNumber,d.startColumn),l.beforeContentClassName,1);a[d.startLineNumber-e].push(g)}if(l.afterContentClassName&&e<=d.endLineNumber&&d.endLineNumber<=o){var g=new Wp(new Ir(d.endLineNumber,d.endColumn,d.endLineNumber,d.endColumn),l.afterContentClassName,2);a[d.endLineNumber-e].push(g)}}return{decorations:s,inlineDecorations:a}};return t}();function tL(t,n){return(!n.options.hideInCommentTokens||!nL(t,n))&&(!n.options.hideInStringTokens||!iL(t,n))}function nL(t,n){return rL(t,n.range,(function(t){return t===1}))}function iL(t,n){return rL(t,n.range,(function(t){return t===2}))}function rL(t,n,i){for(var r=n.startLineNumber;r<=n.endLineNumber;r++){var e=t.tokenization.getLineTokens(r),o=r===n.startLineNumber,s=r===n.endLineNumber;var u=o?e.findTokenIndexAtOffset(n.startColumn-1):0;for(;u<e.getCount()&&!(s&&e.getStartOffset(u)>n.endColumn-1);){if(!i(e.getStandardTokenType(u)))return!1;u++}}return!0}function eL(t,n){return t===null?n?sL.INSTANCE:uL.INSTANCE:new oL(t,n)}var oL=function(){function t(t,n){this._projectionData=t,this._isVisible=n}t.prototype.isVisible=function(){return this._isVisible};t.prototype.setVisible=function(t){return this._isVisible=t,this};t.prototype.getProjectionData=function(){return this._projectionData};t.prototype.getViewLineCount=function(){return this._isVisible?this._projectionData.getOutputLineCount():0};t.prototype.getViewLineContent=function(t,n,i){var r=this;this._assertVisible();var e=i>0?this._projectionData.breakOffsets[i-1]:0,o=this._projectionData.breakOffsets[i];var s;if(this._projectionData.injectionOffsets!==null){var u=this._projectionData.injectionOffsets.map((function(t,n){return new QD(0,0,t+1,r._projectionData.injectionOptions[n],0)}));s=QD.applyInjectedText(t.getLineContent(n),u).substring(e,o)}else s=t.getValueInRange({startLineNumber:n,startColumn:e+1,endLineNumber:n,endColumn:o+1});return i>0&&(s=hL(this._projectionData.wrappedTextIndentLength)+s),s};t.prototype.getViewLineLength=function(t,n,i){return this._assertVisible(),this._projectionData.getLineLength(i)};t.prototype.getViewLineMinColumn=function(t,n,i){return this._assertVisible(),this._projectionData.getMinOutputOffset(i)+1};t.prototype.getViewLineMaxColumn=function(t,n,i){return this._assertVisible(),this._projectionData.getMaxOutputOffset(i)+1};t.prototype.getViewLineData=function(t,n,i){var r=new Array;return this.getViewLinesData(t,n,i,1,0,[!0],r),r[0]};t.prototype.getViewLinesData=function(t,n,i,r,e,o,s){this._assertVisible();var u=this._projectionData,a=u.injectionOffsets,h=u.injectionOptions;var c,f=null;if(a){f=[];var l=0,v=0;for(var d=0;d<u.getOutputLineCount();d++){var g=new Array;f[d]=g;var p=d>0?u.breakOffsets[d-1]:0,w=u.breakOffsets[d];for(;v<a.length;){var m=h[v].content.length,b=a[v]+l,y=b+m;if(b>w)break;if(p<y){var _=h[v];if(_.inlineClassName){var k=d>0?u.wrappedTextIndentLength:0,x=k+Math.max(b-p,0),C=k+Math.min(y-p,w-p);x!==C&&g.push(new Hp(x,C,_.inlineClassName,_.inlineClassNameAffectsLetterSpacing))}}if(!(y<=w))break;l+=m,v++}}}c=a?t.tokenization.getLineTokens(n).withInserted(a.map((function(t,n){return{offset:t,text:h[n].content,tokenMetadata:mp.defaultTokenMetadata}}))):t.tokenization.getLineTokens(n);for(var l=i;l<i+r;l++){var v=e+l-i;o[v]?s[v]=this._getViewLineData(c,f?f[l]:null,l):s[v]=null}};t.prototype._getViewLineData=function(t,n,i){this._assertVisible();var r=this._projectionData,e=i>0?r.wrappedTextIndentLength:0,o=i>0?r.breakOffsets[i-1]:0,s=r.breakOffsets[i],u=t.sliceAndInflate(o,s,e);var a=u.getLineContent();i>0&&(a=hL(r.wrappedTextIndentLength)+a);var h=this._projectionData.getMinOutputOffset(i)+1,c=a.length+1,f=i+1<this.getViewLineCount(),l=i===0?0:r.breakOffsetsVisibleColumn[i-1];return new Np(a,f,h,c,l,u,n)};t.prototype.getModelColumnOfViewPosition=function(t,n){return this._assertVisible(),this._projectionData.translateToInputOffset(t,n-1)+1};t.prototype.getViewPositionOfModelPosition=function(t,n,i){if(i===void 0){i=2}return this._assertVisible(),this._projectionData.translateToOutputPosition(n-1,i).toPosition(t)};t.prototype.getViewLineNumberOfModelPosition=function(t,n){return this._assertVisible(),t+this._projectionData.translateToOutputPosition(n-1).outputLineIndex};t.prototype.normalizePosition=function(t,n,i){var r=n.lineNumber-t;return this._projectionData.normalizeOutputPosition(t,n.column-1,i).toPosition(r)};t.prototype.getInjectedTextAt=function(t,n){return this._projectionData.getInjectedText(t,n-1)};t.prototype._assertVisible=function(){if(!this._isVisible)throw new Error("Not supported")};return t}();var sL=function(){function t(){}t.prototype.isVisible=function(){return!0};t.prototype.setVisible=function(t){return t?this:uL.INSTANCE};t.prototype.getProjectionData=function(){return null};t.prototype.getViewLineCount=function(){return 1};t.prototype.getViewLineContent=function(t,n,i){return t.getLineContent(n)};t.prototype.getViewLineLength=function(t,n,i){return t.getLineLength(n)};t.prototype.getViewLineMinColumn=function(t,n,i){return t.getLineMinColumn(n)};t.prototype.getViewLineMaxColumn=function(t,n,i){return t.getLineMaxColumn(n)};t.prototype.getViewLineData=function(t,n,i){var r=t.tokenization.getLineTokens(n),e=r.getLineContent();return new Np(e,!1,1,e.length+1,0,r.inflate(),null)};t.prototype.getViewLinesData=function(t,n,i,r,e,o,s){o[e]?s[e]=this.getViewLineData(t,n,0):s[e]=null};t.prototype.getModelColumnOfViewPosition=function(t,n){return n};t.prototype.getViewPositionOfModelPosition=function(t,n){return new Tr(t,n)};t.prototype.getViewLineNumberOfModelPosition=function(t,n){return t};t.prototype.normalizePosition=function(t,n,i){return n};t.prototype.getInjectedTextAt=function(t,n){return null};return t}();sL.INSTANCE=new sL;var uL=function(){function t(){}t.prototype.isVisible=function(){return!1};t.prototype.setVisible=function(t){return t?sL.INSTANCE:this};t.prototype.getProjectionData=function(){return null};t.prototype.getViewLineCount=function(){return 0};t.prototype.getViewLineContent=function(t,n,i){throw new Error("Not supported")};t.prototype.getViewLineLength=function(t,n,i){throw new Error("Not supported")};t.prototype.getViewLineMinColumn=function(t,n,i){throw new Error("Not supported")};t.prototype.getViewLineMaxColumn=function(t,n,i){throw new Error("Not supported")};t.prototype.getViewLineData=function(t,n,i){throw new Error("Not supported")};t.prototype.getViewLinesData=function(t,n,i,r,e,o,s){throw new Error("Not supported")};t.prototype.getModelColumnOfViewPosition=function(t,n){throw new Error("Not supported")};t.prototype.getViewPositionOfModelPosition=function(t,n){throw new Error("Not supported")};t.prototype.getViewLineNumberOfModelPosition=function(t,n){throw new Error("Not supported")};t.prototype.normalizePosition=function(t,n,i){throw new Error("Not supported")};t.prototype.getInjectedTextAt=function(t,n){throw new Error("Not supported")};return t}();uL.INSTANCE=new uL;var aL=[""];function hL(t){if(t>=aL.length)for(var n=1;n<=t;n++)aL[n]=cL(n);return aL[t]}function cL(t){return new Array(t+1).join(" ")}var fL=function(){function t(t,n,i,r,e,o,s,u,a,h){this._editorId=t,this.model=n,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=i,this._monospaceLineBreaksComputerFactory=r,this.fontInfo=e,this.tabSize=o,this.wrappingStrategy=s,this.wrappingColumn=u,this.wrappingIndent=a,this.wordBreak=h,this._constructLines(!0,null)}t.prototype.dispose=function(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])};t.prototype.createCoordinatesConverter=function(){return new dL(this)};t.prototype._constructLines=function(t,n){var i=this;this.modelLineProjections=[],t&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));var r=this.model.getLinesContent(),e=this.model.getInjectedTextDecorations(this._editorId),o=r.length,s=this.createLineBreaksComputer(),u=new N(QD.fromDecorations(e));var a=function(t){var i=u.takeWhile((function(n){return n.lineNumber===t+1}));s.addRequest(r[t],i,n?n[t]:null)};for(var h=0;h<o;h++){a(h)}var c=s.finalize(),f=[],l=this.hiddenAreasDecorationIds.map((function(t){return i.model.getDecorationRange(t)})).sort(Ir.compareRangesUsingStarts);var v=1,d=0,g=-1,p=g+1<l.length?d+1:o+2;for(var h=0;h<o;h++){var w=h+1;w===p&&(g++,v=l[g].startLineNumber,d=l[g].endLineNumber,p=g+1<l.length?d+1:o+2);var m=w>=v&&w<=d,b=eL(c[h],!m);f[h]=b.getViewLineCount(),this.modelLineProjections[h]=b}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Vv(f)};t.prototype.getHiddenAreas=function(){var t=this;return this.hiddenAreasDecorationIds.map((function(n){return t.model.getDecorationRange(n)}))};t.prototype.setHiddenAreas=function(t){var n=this;var i=function(t){if(t.length===0)return[];var n=t.slice();n.sort(Ir.compareRangesUsingStarts);var i=[];var r=n[0].startLineNumber,e=n[0].endLineNumber;for(var o=1,s=n.length;o<s;o++){var u=n[o];u.startLineNumber>e+1?(i.push(new Ir(r,1,e,1)),r=u.startLineNumber,e=u.endLineNumber):u.endLineNumber>e&&(e=u.endLineNumber)}return i.push(new Ir(r,1,e,1)),i}(t.map((function(t){return n.model.validateRange(t)}))),r=this.hiddenAreasDecorationIds.map((function(t){return n.model.getDecorationRange(t)})).sort(Ir.compareRangesUsingStarts);if(i.length===r.length){var e=!1;for(var o=0;o<i.length;o++)if(!i[o].equalsRange(r[o])){e=!0;break}if(!e)return!1}var s=i.map((function(t){return{range:t,options:PM.EMPTY}}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,s);var u=i;var a=1,h=0,c=-1,f=c+1<u.length?h+1:this.modelLineProjections.length+2,l=!1;for(var e=0;e<this.modelLineProjections.length;e++){var o=e+1;o===f&&(c++,a=u[c].startLineNumber,h=u[c].endLineNumber,f=c+1<u.length?h+1:this.modelLineProjections.length+2);var v=!1;if(o>=a&&o<=h?this.modelLineProjections[e].isVisible()&&(this.modelLineProjections[e]=this.modelLineProjections[e].setVisible(!1),v=!0):(l=!0,this.modelLineProjections[e].isVisible()||(this.modelLineProjections[e]=this.modelLineProjections[e].setVisible(!0),v=!0)),v){var d=this.modelLineProjections[e].getViewLineCount();this.projectedModelLineLineCounts.setValue(e,d)}}return l||this.setHiddenAreas([]),!0};t.prototype.modelPositionIsVisible=function(t,n){return!(t<1||t>this.modelLineProjections.length)&&this.modelLineProjections[t-1].isVisible()};t.prototype.getModelLineViewLineCount=function(t){return t<1||t>this.modelLineProjections.length?1:this.modelLineProjections[t-1].getViewLineCount()};t.prototype.setTabSize=function(t){return this.tabSize!==t&&(this.tabSize=t,this._constructLines(!1,null),!0)};t.prototype.setWrappingSettings=function(t,n,i,r,e){var o=this.fontInfo.equals(t),s=this.wrappingStrategy===n,u=this.wrappingColumn===i,a=this.wrappingIndent===r,h=this.wordBreak===e;if(o&&s&&u&&a&&h)return!1;var c=o&&s&&!u&&a&&h;this.fontInfo=t,this.wrappingStrategy=n,this.wrappingColumn=i,this.wrappingIndent=r,this.wordBreak=e;var f=null;if(c){f=[];for(var l=0,v=this.modelLineProjections.length;l<v;l++)f[l]=this.modelLineProjections[l].getProjectionData()}return this._constructLines(!1,f),!0};t.prototype.createLineBreaksComputer=function(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)};t.prototype.onModelFlushed=function(){this._constructLines(!0,null)};t.prototype.onModelLinesDeleted=function(t,n,i){if(!t||t<=this._validModelVersionId)return null;var r=n===1?1:this.projectedModelLineLineCounts.getPrefixSum(n-1)+1,e=this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections.splice(n-1,i-n+1),this.projectedModelLineLineCounts.removeValues(n-1,i-n+1),new gF(r,e)};t.prototype.onModelLinesInserted=function(t,n,i,r){if(!t||t<=this._validModelVersionId)return null;var e=n>2&&!this.modelLineProjections[n-2].isVisible(),o=n===1?1:this.projectedModelLineLineCounts.getPrefixSum(n-1)+1;var s=0;var u=[],a=[];for(var h=0,c=r.length;h<c;h++){var f=eL(r[h],!e);u.push(f);var l=f.getViewLineCount();s+=l,a[h]=l}return this.modelLineProjections=this.modelLineProjections.slice(0,n-1).concat(u).concat(this.modelLineProjections.slice(n-1)),this.projectedModelLineLineCounts.insertValues(n-1,a),new pF(o,o+s-1)};t.prototype.onModelLineChanged=function(t,n,i){if(t!==null&&t<=this._validModelVersionId)return[!1,null,null,null];var r=n-1,e=this.modelLineProjections[r].getViewLineCount(),o=eL(i,this.modelLineProjections[r].isVisible());this.modelLineProjections[r]=o;var s=this.modelLineProjections[r].getViewLineCount();var u=!1,a=0,h=-1,c=0,f=-1,l=0,v=-1;return e>s?(a=this.projectedModelLineLineCounts.getPrefixSum(n-1)+1,h=a+s-1,l=h+1,v=l+(e-s)-1,u=!0):e<s?(a=this.projectedModelLineLineCounts.getPrefixSum(n-1)+1,h=a+e-1,c=h+1,f=c+(s-e)-1,u=!0):(a=this.projectedModelLineLineCounts.getPrefixSum(n-1)+1,h=a+s-1),this.projectedModelLineLineCounts.setValue(r,s),[u,a<=h?new dF(a,h-a+1):null,c<=f?new pF(c,f):null,l<=v?new gF(l,v):null]};t.prototype.acceptVersionId=function(t){this._validModelVersionId=t,this.modelLineProjections.length!==1||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])};t.prototype.getViewLineCount=function(){return this.projectedModelLineLineCounts.getTotalSum()};t.prototype._toValidViewLineNumber=function(t){if(t<1)return 1;var n=this.getViewLineCount();return t>n?n:0|t};t.prototype.getActiveIndentGuide=function(t,n,i){t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n),i=this._toValidViewLineNumber(i);var r=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),e=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),o=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),s=this.model.guides.getActiveIndentGuide(r.lineNumber,e.lineNumber,o.lineNumber),u=this.convertModelPositionToViewPosition(s.startLineNumber,1),a=this.convertModelPositionToViewPosition(s.endLineNumber,this.model.getLineMaxColumn(s.endLineNumber));return{startLineNumber:u.lineNumber,endLineNumber:a.lineNumber,indent:s.indent}};t.prototype.getViewLineInfo=function(t){t=this._toValidViewLineNumber(t);var n=this.projectedModelLineLineCounts.getIndexOf(t-1),i=n.index,r=n.remainder;return new lL(i+1,r)};t.prototype.getMinColumnOfViewLine=function(t){return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)};t.prototype.getMaxColumnOfViewLine=function(t){return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)};t.prototype.getModelStartPositionOfViewLine=function(t){var n=this.modelLineProjections[t.modelLineNumber-1],i=n.getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx),r=n.getModelColumnOfViewPosition(t.modelLineWrappedLineIdx,i);return new Tr(t.modelLineNumber,r)};t.prototype.getModelEndPositionOfViewLine=function(t){var n=this.modelLineProjections[t.modelLineNumber-1],i=n.getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx),r=n.getModelColumnOfViewPosition(t.modelLineWrappedLineIdx,i);return new Tr(t.modelLineNumber,r)};t.prototype.getViewLineInfosGroupedByModelRanges=function(t,n){var i=this.getViewLineInfo(t),r=this.getViewLineInfo(n),e=new Array;var o=this.getModelStartPositionOfViewLine(i),s=new Array;for(var u=i.modelLineNumber;u<=r.modelLineNumber;u++){var a=this.modelLineProjections[u-1];if(a.isVisible()){var h=u===i.modelLineNumber?i.modelLineWrappedLineIdx:0,c=u===r.modelLineNumber?r.modelLineWrappedLineIdx+1:a.getViewLineCount();for(var f=h;f<c;f++)s.push(new lL(u,f))}if(!a.isVisible()&&o){var h=new Tr(u-1,this.model.getLineMaxColumn(u-1)+1),c=Ir.fromPositions(o,h);e.push(new vL(c,s)),s=[],o=null}else a.isVisible()&&!o&&(o=new Tr(u,1))}if(o){var u=Ir.fromPositions(o,this.getModelEndPositionOfViewLine(r));e.push(new vL(u,s))}return e};t.prototype.getViewLinesBracketGuides=function(t,n,i,r){var e=this;var o=i?this.convertViewPositionToModelPosition(i.lineNumber,i.column):null,s=[];for(var u=0,a=this.getViewLineInfosGroupedByModelRanges(t,n);u<a.length;u++){var h=a[u];var c=h.modelRange.startLineNumber,f=this.model.guides.getLinesBracketGuides(c,h.modelRange.endLineNumber,o,r);var l=function(t){var n=f[t.modelLineNumber-c].map((function(n){if(n.forWrappedLinesAfterColumn!==-1&&e.modelLineProjections[t.modelLineNumber-1].getViewPositionOfModelPosition(0,n.forWrappedLinesAfterColumn).lineNumber>=t.modelLineWrappedLineIdx||n.forWrappedLinesBeforeOrAtColumn!==-1&&e.modelLineProjections[t.modelLineNumber-1].getViewPositionOfModelPosition(0,n.forWrappedLinesBeforeOrAtColumn).lineNumber<t.modelLineWrappedLineIdx)return;if(!n.horizontalLine)return n;var i=-1;if(n.column!==-1){var r=e.modelLineProjections[t.modelLineNumber-1].getViewPositionOfModelPosition(0,n.column);if(r.lineNumber===t.modelLineWrappedLineIdx)i=r.column;else if(r.lineNumber<t.modelLineWrappedLineIdx)i=e.getMinColumnOfViewLine(t);else if(r.lineNumber>t.modelLineWrappedLineIdx)return}var o=e.convertModelPositionToViewPosition(t.modelLineNumber,n.horizontalLine.endColumn),s=e.modelLineProjections[t.modelLineNumber-1].getViewPositionOfModelPosition(0,n.horizontalLine.endColumn);return s.lineNumber===t.modelLineWrappedLineIdx?new NS(n.visibleColumn,i,n.className,new PS(n.horizontalLine.top,o.column),-1,-1):s.lineNumber<t.modelLineWrappedLineIdx||n.visibleColumn!==-1?void 0:new NS(n.visibleColumn,i,n.className,new PS(n.horizontalLine.top,e.getMaxColumnOfViewLine(t)),-1,-1)}));s.push(n.filter((function(t){return!!t})))};for(var v=0,d=h.viewLines;v<d.length;v++){var g=d[v];l(g)}}return s};t.prototype.getViewLinesIndentGuides=function(t,n){t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);var i=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(n,this.getViewLineMaxColumn(n));var e=[];var o=[],s=[],u=i.lineNumber-1,a=r.lineNumber-1;var h=null;for(var c=u;c<=a;c++){var f=this.modelLineProjections[c];if(f.isVisible()){var l=f.getViewLineNumberOfModelPosition(0,c===u?i.column:1),v=f.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(c+1)),d=v-l+1;var g=0;d>1&&f.getViewLineMinColumn(this.model,c+1,v)===1&&(g=l===0?1:2),o.push(d),s.push(g),h===null&&(h=new Tr(c+1,0))}else h!==null&&(e=e.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,c)),h=null)}h!==null&&(e=e.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,r.lineNumber)),h=null);var p=n-t+1,w=new Array(p);var m=0;for(var c=0,f=e.length;c<f;c++){var l=e[c];var v=Math.min(p-m,o[c]),d=s[c];var g=void 0;g=d===2?0:d===1?1:v;for(var b=0;b<v;b++)b===g&&(l=0),w[m++]=l}return w};t.prototype.getViewLineContent=function(t){var n=this.getViewLineInfo(t);return this.modelLineProjections[n.modelLineNumber-1].getViewLineContent(this.model,n.modelLineNumber,n.modelLineWrappedLineIdx)};t.prototype.getViewLineLength=function(t){var n=this.getViewLineInfo(t);return this.modelLineProjections[n.modelLineNumber-1].getViewLineLength(this.model,n.modelLineNumber,n.modelLineWrappedLineIdx)};t.prototype.getViewLineMinColumn=function(t){var n=this.getViewLineInfo(t);return this.modelLineProjections[n.modelLineNumber-1].getViewLineMinColumn(this.model,n.modelLineNumber,n.modelLineWrappedLineIdx)};t.prototype.getViewLineMaxColumn=function(t){var n=this.getViewLineInfo(t);return this.modelLineProjections[n.modelLineNumber-1].getViewLineMaxColumn(this.model,n.modelLineNumber,n.modelLineWrappedLineIdx)};t.prototype.getViewLineData=function(t){var n=this.getViewLineInfo(t);return this.modelLineProjections[n.modelLineNumber-1].getViewLineData(this.model,n.modelLineNumber,n.modelLineWrappedLineIdx)};t.prototype.getViewLinesData=function(t,n,i){t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);var r=this.projectedModelLineLineCounts.getIndexOf(t-1);var e=t;var o=r.index,s=r.remainder,u=[];for(var a=o,h=this.model.getLineCount();a<h;a++){var c=this.modelLineProjections[a];if(!c.isVisible())continue;var f=a===o?s:0;var l=c.getViewLineCount()-f,v=!1;if(e+l>n&&(v=!0,l=n-e+1),c.getViewLinesData(this.model,a+1,f,l,e-t,i,u),e+=l,v)break}return u};t.prototype.validateViewPosition=function(t,n,i){t=this._toValidViewLineNumber(t);var r=this.projectedModelLineLineCounts.getIndexOf(t-1),e=r.index,o=r.remainder,s=this.modelLineProjections[e],u=s.getViewLineMinColumn(this.model,e+1,o),a=s.getViewLineMaxColumn(this.model,e+1,o);n<u&&(n=u),n>a&&(n=a);var h=s.getModelColumnOfViewPosition(o,n);return this.model.validatePosition(new Tr(e+1,h)).equals(i)?new Tr(t,n):this.convertModelPositionToViewPosition(i.lineNumber,i.column)};t.prototype.validateViewRange=function(t,n){var i=this.validateViewPosition(t.startLineNumber,t.startColumn,n.getStartPosition()),r=this.validateViewPosition(t.endLineNumber,t.endColumn,n.getEndPosition());return new Ir(i.lineNumber,i.column,r.lineNumber,r.column)};t.prototype.convertViewPositionToModelPosition=function(t,n){var i=this.getViewLineInfo(t),r=this.modelLineProjections[i.modelLineNumber-1].getModelColumnOfViewPosition(i.modelLineWrappedLineIdx,n);return this.model.validatePosition(new Tr(i.modelLineNumber,r))};t.prototype.convertViewRangeToModelRange=function(t){var n=this.convertViewPositionToModelPosition(t.startLineNumber,t.startColumn),i=this.convertViewPositionToModelPosition(t.endLineNumber,t.endColumn);return new Ir(n.lineNumber,n.column,i.lineNumber,i.column)};t.prototype.convertModelPositionToViewPosition=function(t,n,i,r,e){if(i===void 0){i=2}if(r===void 0){r=!1}if(e===void 0){e=!1}var o=this.model.validatePosition(new Tr(t,n)),s=o.lineNumber,u=o.column;var a=s-1,h=!1;if(e)for(;a<this.modelLineProjections.length&&!this.modelLineProjections[a].isVisible();)a++,h=!0;else for(;a>0&&!this.modelLineProjections[a].isVisible();)a--,h=!0;if(a===0&&!this.modelLineProjections[a].isVisible())return new Tr(r?0:1,1);var c=1+this.projectedModelLineLineCounts.getPrefixSum(a);var f;return f=h?e?this.modelLineProjections[a].getViewPositionOfModelPosition(c,1,i):this.modelLineProjections[a].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(a+1),i):this.modelLineProjections[s-1].getViewPositionOfModelPosition(c,u,i),f};t.prototype.convertModelRangeToViewRange=function(t,n){if(n===void 0){n=0}if(t.isEmpty()){var i=this.convertModelPositionToViewPosition(t.startLineNumber,t.startColumn,n);return Ir.fromPositions(i)}{var i=this.convertModelPositionToViewPosition(t.startLineNumber,t.startColumn,1),r=this.convertModelPositionToViewPosition(t.endLineNumber,t.endColumn,0);return new Ir(i.lineNumber,i.column,r.lineNumber,r.column)}};t.prototype.getViewLineNumberOfModelPosition=function(t,n){var i=t-1;if(this.modelLineProjections[i].isVisible()){var r=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(r,n)}for(;i>0&&!this.modelLineProjections[i].isVisible();)i--;if(i===0&&!this.modelLineProjections[i].isVisible())return 1;var e=1+this.projectedModelLineLineCounts.getPrefixSum(i);return this.modelLineProjections[i].getViewLineNumberOfModelPosition(e,this.model.getLineMaxColumn(i+1))};t.prototype.getDecorationsInRange=function(t,n,i,r,e){var o=this.convertViewPositionToModelPosition(t.startLineNumber,t.startColumn),s=this.convertViewPositionToModelPosition(t.endLineNumber,t.endColumn);if(s.lineNumber-o.lineNumber<=t.endLineNumber-t.startLineNumber)return this.model.getDecorationsInRange(new Ir(o.lineNumber,1,s.lineNumber,s.column),n,i,r,e);var u=[];var a=o.lineNumber-1,h=s.lineNumber-1;var c=null;for(var f=a;f<=h;f++)if(this.modelLineProjections[f].isVisible())c===null&&(c=new Tr(f+1,f===a?o.column:1));else if(c!==null){var l=this.model.getLineMaxColumn(f);u=u.concat(this.model.getDecorationsInRange(new Ir(c.lineNumber,c.column,f,l),n,i,r)),c=null}c!==null&&(u=u.concat(this.model.getDecorationsInRange(new Ir(c.lineNumber,c.column,s.lineNumber,s.column),n,i,r)),c=null),u.sort((function(t,n){var i=Ir.compareRangesUsingStarts(t.range,n.range);return i===0?t.id<n.id?-1:t.id>n.id?1:0:i}));var v=[];var d=0,g=null;for(var p=0,w=u;p<w.length;p++){var f=w[p];var l=f.id;g!==l&&(g=l,v[d++]=f)}return v};t.prototype.getInjectedTextAt=function(t){var n=this.getViewLineInfo(t.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].getInjectedTextAt(n.modelLineWrappedLineIdx,t.column)};t.prototype.normalizePosition=function(t,n){var i=this.getViewLineInfo(t.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].normalizePosition(i.modelLineWrappedLineIdx,t,n)};t.prototype.getLineIndentColumn=function(t){var n=this.getViewLineInfo(t);return n.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(n.modelLineNumber):0};return t}();var lL=function(){function t(t,n){this.modelLineNumber=t,this.modelLineWrappedLineIdx=n}return t}();var vL=function(){function t(t,n){this.modelRange=t,this.viewLines=n}return t}();var dL=function(){function t(t){this._lines=t}t.prototype.convertViewPositionToModelPosition=function(t){return this._lines.convertViewPositionToModelPosition(t.lineNumber,t.column)};t.prototype.convertViewRangeToModelRange=function(t){return this._lines.convertViewRangeToModelRange(t)};t.prototype.validateViewPosition=function(t,n){return this._lines.validateViewPosition(t.lineNumber,t.column,n)};t.prototype.validateViewRange=function(t,n){return this._lines.validateViewRange(t,n)};t.prototype.convertModelPositionToViewPosition=function(t,n,i,r){return this._lines.convertModelPositionToViewPosition(t.lineNumber,t.column,n,i,r)};t.prototype.convertModelRangeToViewRange=function(t,n){return this._lines.convertModelRangeToViewRange(t,n)};t.prototype.modelPositionIsVisible=function(t){return this._lines.modelPositionIsVisible(t.lineNumber,t.column)};t.prototype.getModelLineViewLineCount=function(t){return this._lines.getModelLineViewLineCount(t)};t.prototype.getViewLineNumberOfModelPosition=function(t,n){return this._lines.getViewLineNumberOfModelPosition(t,n)};return t}();var gL=function(){function t(t){this.model=t}t.prototype.dispose=function(){};t.prototype.createCoordinatesConverter=function(){return new pL(this)};t.prototype.getHiddenAreas=function(){return[]};t.prototype.setHiddenAreas=function(t){return!1};t.prototype.setTabSize=function(t){return!1};t.prototype.setWrappingSettings=function(t,n,i,r){return!1};t.prototype.createLineBreaksComputer=function(){var t=[];return{addRequest:function(n,i,r){t.push(null)},finalize:function(){return t}}};t.prototype.onModelFlushed=function(){};t.prototype.onModelLinesDeleted=function(t,n,i){return new gF(n,i)};t.prototype.onModelLinesInserted=function(t,n,i,r){return new pF(n,i)};t.prototype.onModelLineChanged=function(t,n,i){return[!1,new dF(n,1),null,null]};t.prototype.acceptVersionId=function(t){};t.prototype.getViewLineCount=function(){return this.model.getLineCount()};t.prototype.getActiveIndentGuide=function(t,n,i){return{startLineNumber:t,endLineNumber:t,indent:0}};t.prototype.getViewLinesBracketGuides=function(t,n,i){return new Array(n-t+1).fill([])};t.prototype.getViewLinesIndentGuides=function(t,n){var i=n-t+1,r=new Array(i);for(var e=0;e<i;e++)r[e]=0;return r};t.prototype.getViewLineContent=function(t){return this.model.getLineContent(t)};t.prototype.getViewLineLength=function(t){return this.model.getLineLength(t)};t.prototype.getViewLineMinColumn=function(t){return this.model.getLineMinColumn(t)};t.prototype.getViewLineMaxColumn=function(t){return this.model.getLineMaxColumn(t)};t.prototype.getViewLineData=function(t){var n=this.model.tokenization.getLineTokens(t),i=n.getLineContent();return new Np(i,!1,1,i.length+1,0,n.inflate(),null)};t.prototype.getViewLinesData=function(t,n,i){var r=this.model.getLineCount();t=Math.min(Math.max(1,t),r),n=Math.min(Math.max(1,n),r);var e=[];for(var o=t;o<=n;o++){var s=o-t;e[s]=i[s]?this.getViewLineData(o):null}return e};t.prototype.getDecorationsInRange=function(t,n,i,r,e){return this.model.getDecorationsInRange(t,n,i,r,e)};t.prototype.normalizePosition=function(t,n){return this.model.normalizePosition(t,n)};t.prototype.getLineIndentColumn=function(t){return this.model.getLineIndentColumn(t)};t.prototype.getInjectedTextAt=function(t){return null};return t}();var pL=function(){function t(t){this._lines=t}t.prototype._validPosition=function(t){return this._lines.model.validatePosition(t)};t.prototype._validRange=function(t){return this._lines.model.validateRange(t)};t.prototype.convertViewPositionToModelPosition=function(t){return this._validPosition(t)};t.prototype.convertViewRangeToModelRange=function(t){return this._validRange(t)};t.prototype.validateViewPosition=function(t,n){return this._validPosition(n)};t.prototype.validateViewRange=function(t,n){return this._validRange(n)};t.prototype.convertModelPositionToViewPosition=function(t){return this._validPosition(t)};t.prototype.convertModelRangeToViewRange=function(t){return this._validRange(t)};t.prototype.modelPositionIsVisible=function(t){var n=this._lines.model.getLineCount();return!(t.lineNumber<1||t.lineNumber>n)};t.prototype.getModelLineViewLineCount=function(t){return 1};t.prototype.getViewLineNumberOfModelPosition=function(t,n){return t};return t}();var wL=dd.Right;var mL=function(){function t(t){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((t+1)*wL/8))}t.prototype.reset=function(t){var n=Math.ceil((t+1)*wL/8);this.lanes.length<n?this.lanes=new Uint8Array(n):this.lanes.fill(0),this._requiredLanes=1};Object.defineProperty(t.prototype,"requiredLanes",{get:function(){return this._requiredLanes},enumerable:false,configurable:true});t.prototype.push=function(t,n,i){i&&(this.persist|=1<<t-1);for(var r=n.startLineNumber;r<=n.endLineNumber;r++){var e=wL*r+(t-1);this.lanes[e>>>3]|=1<<e%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(r))}};t.prototype.getLanesAtLine=function(t){var n=[];var i=wL*t;for(var r=0;r<wL;r++)(this.persist&1<<r||this.lanes[i>>>3]&1<<i%8)&&n.push(r+1),i++;return n.length?n:[dd.Center]};t.prototype.countAtLine=function(t){var n=wL*t,i=0;for(var r=0;r<wL;r++)(this.persist&1<<r||this.lanes[n>>>3]&1<<n%8)&&i++,n++;return i};return t}();var bL=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;if(c=t.call(this)||this,c.languageConfigurationService=u,c._themeService=a,c._attachedView=h,c.hiddenAreasModel=new kL,c.previousHiddenAreas=[],c._editorId=n,c._configuration=i,c.model=r,c._eventDispatcher=new xF,c.onEvent=c._eventDispatcher.onEvent,c.cursorConfig=new aC(c.model.getLanguageId(),c.model.getOptions(),c._configuration,c.languageConfigurationService),c._updateConfigurationViewLineCount=c._register(new Ts((function(){return c._updateConfigurationViewLineCountNow()}),0)),c._hasFocus=!1,c._viewportStart=yL.create(c.model),c.glyphLanes=new mL(0),c.model.isTooLargeForTokenization())c._lines=new gL(c.model);else{var f=c._configuration.options,l=f.get(50),v=f.get(139),d=f.get(146),g=f.get(138),p=f.get(129);c._lines=new fL(c._editorId,c.model,e,o,l,c.model.getOptions().tabSize,v,d.wrappingColumn,g,p)}c.coordinatesConverter=c._lines.createCoordinatesConverter(),c._cursor=c._register(new NF(r,c,c.coordinatesConverter,c.cursorConfig)),c.viewLayout=c._register(new YF(c._configuration,c.getLineCount(),s)),c._register(c.viewLayout.onDidScroll((function(t){t.scrollTopChanged&&c._handleVisibleLinesChanged(),t.scrollTopChanged&&c._viewportStart.invalidate(),c._eventDispatcher.emitSingleViewEvent(new mF(t)),c._eventDispatcher.emitOutgoingEvent(new AF(t.oldScrollWidth,t.oldScrollLeft,t.oldScrollHeight,t.oldScrollTop,t.scrollWidth,t.scrollLeft,t.scrollHeight,t.scrollTop))}))),c._register(c.viewLayout.onDidContentSizeChange((function(t){c._eventDispatcher.emitOutgoingEvent(t)}))),c._decorations=new XF(c._editorId,c.model,c._configuration,c._lines,c.coordinatesConverter),c._registerModelEvents(),c._register(c._configuration.onDidChangeFast((function(t){try{var n=c._eventDispatcher.beginEmitViewEvents();c._onConfigurationChanged(n,t)}finally{c._eventDispatcher.endEmitViewEvents()}}))),c._register(YS.getInstance().onDidChange((function(){c._eventDispatcher.emitSingleViewEvent(new _F)}))),c._register(c._themeService.onDidColorThemeChange((function(t){c._invalidateDecorationsColorCache(),c._eventDispatcher.emitSingleViewEvent(new bF(t))}))),c._updateConfigurationViewLineCountNow();return c}n.prototype.dispose=function(){t.prototype.dispose.call(this),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()};n.prototype.createLineBreaksComputer=function(){return this._lines.createLineBreaksComputer()};n.prototype.addViewEventHandler=function(t){this._eventDispatcher.addViewEventHandler(t)};n.prototype.removeViewEventHandler=function(t){this._eventDispatcher.removeViewEventHandler(t)};n.prototype._updateConfigurationViewLineCountNow=function(){this._configuration.setViewLineCount(this._lines.getViewLineCount())};n.prototype.getModelVisibleRanges=function(){var t=this.viewLayout.getLinesViewportData(),n=new Ir(t.startLineNumber,this.getLineMinColumn(t.startLineNumber),t.endLineNumber,this.getLineMaxColumn(t.endLineNumber));return this._toModelVisibleRanges(n)};n.prototype.visibleLinesStabilized=function(){var t=this.getModelVisibleRanges();this._attachedView.setVisibleLines(t,!0)};n.prototype._handleVisibleLinesChanged=function(){var t=this.getModelVisibleRanges();this._attachedView.setVisibleLines(t,!1)};n.prototype.setHasFocus=function(t){this._hasFocus=t,this._cursor.setHasFocus(t),this._eventDispatcher.emitSingleViewEvent(new fF(t)),this._eventDispatcher.emitOutgoingEvent(new DF(!t,t))};n.prototype.onCompositionStart=function(){this._eventDispatcher.emitSingleViewEvent(new oF)};n.prototype.onCompositionEnd=function(){this._eventDispatcher.emitSingleViewEvent(new sF)};n.prototype._captureStableViewport=function(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){var t=new Tr(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),n=this.coordinatesConverter.convertViewPositionToModelPosition(t);return new CL(n,this._viewportStart.startLineDelta)}return new CL(null,0)};n.prototype._onConfigurationChanged=function(t,n){var i=this._captureStableViewport(),r=this._configuration.options,e=r.get(50),o=r.get(139),s=r.get(146),u=r.get(138),a=r.get(129);this._lines.setWrappingSettings(e,o,s.wrappingColumn,u,a)&&(t.emitViewEvent(new cF),t.emitViewEvent(new vF),t.emitViewEvent(new hF(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),n.hasChanged(91)&&(this._decorations.reset(),t.emitViewEvent(new hF(null))),n.hasChanged(98)&&(this._decorations.reset(),t.emitViewEvent(new hF(null))),t.emitViewEvent(new uF(n)),this.viewLayout.onConfigurationChanged(n),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),aC.shouldRecreate(n)&&(this.cursorConfig=new aC(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))};n.prototype._registerModelEvents=function(){var t=this;this._register(this.model.onDidChangeContentOrInjectedText((function(n){try{var i=t._eventDispatcher.beginEmitViewEvents();var r=!1,e=!1;var o=n instanceof eA?n.rawContentChangedEvent.changes:n.changes,s=n instanceof eA?n.rawContentChangedEvent.versionId:null,u=t._lines.createLineBreaksComputer();for(var a=0,h=o;a<h.length;a++){var c=h[a];switch(c.changeType){case 4:for(var f=0;f<c.detail.length;f++){var l=c.detail[f];var v=c.injectedTexts[f];v&&(v=v.filter((function(n){return!n.ownerId||n.ownerId===t._editorId}))),u.addRequest(l,v,null)}break;case 2:{var f=null;c.injectedText&&(f=c.injectedText.filter((function(n){return!n.ownerId||n.ownerId===t._editorId}))),u.addRequest(c.detail,f,null);break}}}var d=u.finalize(),g=new N(d);for(var p=0,w=o;p<w.length;p++){var c=w[p];switch(c.changeType){case 1:t._lines.onModelFlushed(),i.emitViewEvent(new cF),t._decorations.reset(),t.viewLayout.onFlushed(t.getLineCount()),r=!0;break;case 3:{var f=t._lines.onModelLinesDeleted(s,c.fromLineNumber,c.toLineNumber);f!==null&&(i.emitViewEvent(f),t.viewLayout.onLinesDeleted(f.fromLineNumber,f.toLineNumber)),r=!0;break}case 4:{var f=g.takeCount(c.detail.length),l=t._lines.onModelLinesInserted(s,c.fromLineNumber,c.toLineNumber,f);l!==null&&(i.emitViewEvent(l),t.viewLayout.onLinesInserted(l.fromLineNumber,l.toLineNumber)),r=!0;break}case 2:{var f=g.dequeue(),m=t._lines.onModelLineChanged(s,c.lineNumber,f),l=m[0],v=m[1],b=m[2],y=m[3];e=l,v&&i.emitViewEvent(v),b&&(i.emitViewEvent(b),t.viewLayout.onLinesInserted(b.fromLineNumber,b.toLineNumber)),y&&(i.emitViewEvent(y),t.viewLayout.onLinesDeleted(y.fromLineNumber,y.toLineNumber));break}}}s!==null&&t._lines.acceptVersionId(s),t.viewLayout.onHeightMaybeChanged(),!r&&e&&(i.emitViewEvent(new vF),i.emitViewEvent(new hF(null)),t._cursor.onLineMappingChanged(i),t._decorations.onLineMappingChanged())}finally{t._eventDispatcher.endEmitViewEvents()}var _=t._viewportStart.isValid;if(t._viewportStart.invalidate(),t._configuration.setModelLineCount(t.model.getLineCount()),t._updateConfigurationViewLineCountNow(),!t._hasFocus&&t.model.getAttachedEditorCount()>=2&&_){var i=t.model._getTrackedRange(t._viewportStart.modelTrackedRange);if(i){var r=t.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),e=t.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber);t.viewLayout.setScrollPosition({scrollTop:e+t._viewportStart.startLineDelta},1)}}try{var i=t._eventDispatcher.beginEmitViewEvents();n instanceof eA&&i.emitOutgoingEvent(new TF(n.contentChangedEvent)),t._cursor.onModelContentChanged(i,n)}finally{t._eventDispatcher.endEmitViewEvents()}t._handleVisibleLinesChanged()}))),this._register(this.model.onDidChangeTokens((function(n){var i=[];for(var r=0,e=n.ranges.length;r<e;r++){var o=n.ranges[r],s=t.coordinatesConverter.convertModelPositionToViewPosition(new Tr(o.fromLineNumber,1)).lineNumber,u=t.coordinatesConverter.convertModelPositionToViewPosition(new Tr(o.toLineNumber,t.model.getLineMaxColumn(o.toLineNumber))).lineNumber;i[r]={fromLineNumber:s,toLineNumber:u}}t._eventDispatcher.emitSingleViewEvent(new yF(i)),t._eventDispatcher.emitOutgoingEvent(new BF(n))}))),this._register(this.model.onDidChangeLanguageConfiguration((function(n){t._eventDispatcher.emitSingleViewEvent(new lF),t.cursorConfig=new aC(t.model.getLanguageId(),t.model.getOptions(),t._configuration,t.languageConfigurationService),t._cursor.updateConfiguration(t.cursorConfig),t._eventDispatcher.emitOutgoingEvent(new RF(n))}))),this._register(this.model.onDidChangeLanguage((function(n){t.cursorConfig=new aC(t.model.getLanguageId(),t.model.getOptions(),t._configuration,t.languageConfigurationService),t._cursor.updateConfiguration(t.cursorConfig),t._eventDispatcher.emitOutgoingEvent(new jF(n))}))),this._register(this.model.onDidChangeOptions((function(n){if(t._lines.setTabSize(t.model.getOptions().tabSize)){try{var i=t._eventDispatcher.beginEmitViewEvents();i.emitViewEvent(new cF),i.emitViewEvent(new vF),i.emitViewEvent(new hF(null)),t._cursor.onLineMappingChanged(i),t._decorations.onLineMappingChanged(),t.viewLayout.onFlushed(t.getLineCount())}finally{t._eventDispatcher.endEmitViewEvents()}t._updateConfigurationViewLineCount.schedule()}t.cursorConfig=new aC(t.model.getLanguageId(),t.model.getOptions(),t._configuration,t.languageConfigurationService),t._cursor.updateConfiguration(t.cursorConfig),t._eventDispatcher.emitOutgoingEvent(new IF(n))}))),this._register(this.model.onDidChangeDecorations((function(n){t._decorations.onModelDecorationsChanged(),t._eventDispatcher.emitSingleViewEvent(new hF(n)),t._eventDispatcher.emitOutgoingEvent(new LF(n))})))};n.prototype.setHiddenAreas=function(t,n){var i;this.hiddenAreasModel.setHiddenAreas(n,t);var r=this.hiddenAreasModel.getMergedRanges();if(r===this.previousHiddenAreas)return;this.previousHiddenAreas=r;var e=this._captureStableViewport();var o=!1;try{var s=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(r),o&&(s.emitViewEvent(new cF),s.emitViewEvent(new vF),s.emitViewEvent(new hF(null)),this._cursor.onLineMappingChanged(s),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());var u=(i=e.viewportStartModelPosition)===null||i===void 0?void 0:i.lineNumber;u&&r.some((function(t){return t.startLineNumber<=u&&u<=t.endLineNumber}))||e.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new EF)};n.prototype.getVisibleRangesPlusViewportAboveBelow=function(){var t=this._configuration.options.get(145),n=this._configuration.options.get(67),i=Math.max(20,Math.round(t.height/n)),r=this.viewLayout.getLinesViewportData(),e=Math.max(1,r.completelyVisibleStartLineNumber-i),o=Math.min(this.getLineCount(),r.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new Ir(e,this.getLineMinColumn(e),o,this.getLineMaxColumn(o)))};n.prototype.getVisibleRanges=function(){var t=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(t)};n.prototype.getHiddenAreas=function(){return this._lines.getHiddenAreas()};n.prototype._toModelVisibleRanges=function(t){var n=this.coordinatesConverter.convertViewRangeToModelRange(t),i=this._lines.getHiddenAreas();if(i.length===0)return[n];var r=[];var e=0,o=n.startLineNumber,s=n.startColumn;var u=n.endLineNumber,a=n.endColumn;for(var h=0,c=i.length;h<c;h++){var f=i[h].startLineNumber,l=i[h].endLineNumber;l<o||f>u||(o<f&&(r[e++]=new Ir(o,s,f-1,this.model.getLineMaxColumn(f-1))),o=l+1,s=1)}return(o<u||o===u&&s<a)&&(r[e++]=new Ir(o,s,u,a)),r};n.prototype.getCompletelyVisibleViewRange=function(){var t=this.viewLayout.getLinesViewportData(),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new Ir(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))};n.prototype.getCompletelyVisibleViewRangeAtScrollTop=function(t){var n=this.viewLayout.getLinesViewportDataAtScrollTop(t),i=n.completelyVisibleStartLineNumber,r=n.completelyVisibleEndLineNumber;return new Ir(i,this.getLineMinColumn(i),r,this.getLineMaxColumn(r))};n.prototype.saveState=function(){var t=this.viewLayout.saveState(),n=t.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(n),r=this.coordinatesConverter.convertViewPositionToModelPosition(new Tr(i,this.getLineMinColumn(i))),e=this.viewLayout.getVerticalOffsetForLineNumber(i)-n;return{scrollLeft:t.scrollLeft,firstPosition:r,firstPositionDeltaTop:e}};n.prototype.reduceRestoreState=function(t){if(t.firstPosition===void 0)return this._reduceRestoreStateCompatibility(t);var n=this.model.validatePosition(t.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(n),r=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-t.firstPositionDeltaTop;return{scrollLeft:t.scrollLeft,scrollTop:r}};n.prototype._reduceRestoreStateCompatibility=function(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTopWithoutViewZones}};n.prototype.getTabSize=function(){return this.model.getOptions().tabSize};n.prototype.getLineCount=function(){return this._lines.getViewLineCount()};n.prototype.setViewport=function(t,n,i){this._viewportStart.update(this,t)};n.prototype.getActiveIndentGuide=function(t,n,i){return this._lines.getActiveIndentGuide(t,n,i)};n.prototype.getLinesIndentGuides=function(t,n){return this._lines.getViewLinesIndentGuides(t,n)};n.prototype.getBracketGuidesInRangeByLine=function(t,n,i,r){return this._lines.getViewLinesBracketGuides(t,n,i,r)};n.prototype.getLineContent=function(t){return this._lines.getViewLineContent(t)};n.prototype.getLineLength=function(t){return this._lines.getViewLineLength(t)};n.prototype.getLineMinColumn=function(t){return this._lines.getViewLineMinColumn(t)};n.prototype.getLineMaxColumn=function(t){return this._lines.getViewLineMaxColumn(t)};n.prototype.getLineFirstNonWhitespaceColumn=function(t){var n=vo(this.getLineContent(t));return n===-1?0:n+1};n.prototype.getLineLastNonWhitespaceColumn=function(t){var n=po(this.getLineContent(t));return n===-1?0:n+2};n.prototype.getMinimapDecorationsInRange=function(t){return this._decorations.getMinimapDecorationsInRange(t)};n.prototype.getDecorationsInViewport=function(t){return this._decorations.getDecorationsViewportData(t).decorations};n.prototype.getInjectedTextAt=function(t){return this._lines.getInjectedTextAt(t)};n.prototype.getViewportViewLineRenderingData=function(t,n){var i=this._decorations.getDecorationsViewportData(t).inlineDecorations[n-t.startLineNumber];return this._getViewLineRenderingData(n,i)};n.prototype.getViewLineRenderingData=function(t){var n=this._decorations.getInlineDecorationsOnLine(t);return this._getViewLineRenderingData(t,n)};n.prototype._getViewLineRenderingData=function(t,n){var i=this.model.mightContainRTL(),r=this.model.mightContainNonBasicASCII(),e=this.getTabSize(),o=this._lines.getViewLineData(t);return o.inlineDecorations&&(n=__spreadArray(__spreadArray([],n,true),o.inlineDecorations.map((function(n){return n.toInlineDecoration(t)})),true)),new Pp(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,i,r,o.tokens,n,e,o.startVisibleColumn)};n.prototype.getViewLineData=function(t){return this._lines.getViewLineData(t)};n.prototype.getMinimapLinesRenderingData=function(t,n,i){var r=this._lines.getViewLinesData(t,n,i);return new Bp(this.getTabSize(),r)};n.prototype.getAllOverviewRulerDecorations=function(t){var n=this.model.getOverviewRulerDecorations(this._editorId,Fn(this._configuration.options)),i=new _L;for(var r=0,e=n;r<e.length;r++){var o=e[r];var s=o.options,u=s.overviewRuler;if(!u)continue;var a=u.position;if(a===0)continue;var h=u.getColor(t.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(o.range.startLineNumber,o.range.startColumn),f=this.coordinatesConverter.getViewLineNumberOfModelPosition(o.range.endLineNumber,o.range.endColumn);i.accept(h,s.zIndex,c,f,a)}return i.asArray};n.prototype._invalidateDecorationsColorCache=function(){var t=this.model.getOverviewRulerDecorations();for(var n=0,i=t;n<i.length;n++){var r=i[n];var e=r.options.overviewRuler;e==null||e.invalidateCachedColor();var o=r.options.minimap;o==null||o.invalidateCachedColor()}};n.prototype.getValueInRange=function(t,n){var i=this.coordinatesConverter.convertViewRangeToModelRange(t);return this.model.getValueInRange(i,n)};n.prototype.getValueLengthInRange=function(t,n){var i=this.coordinatesConverter.convertViewRangeToModelRange(t);return this.model.getValueLengthInRange(i,n)};n.prototype.modifyPosition=function(t,n){var i=this.coordinatesConverter.convertViewPositionToModelPosition(t),r=this.model.modifyPosition(i,n);return this.coordinatesConverter.convertModelPositionToViewPosition(r)};n.prototype.deduceModelPositionRelativeToViewPosition=function(t,n,i){var r=this.coordinatesConverter.convertViewPositionToModelPosition(t);this.model.getEOL().length===2&&(n<0?n-=i:n+=i);var e=this.model.getOffsetAt(r)+n;return this.model.getPositionAt(e)};n.prototype.getPlainTextToCopy=function(t,n,i){var r=i?"\r\n":this.model.getEOL();(t=t.slice(0)).sort(Ir.compareRangesUsingStarts);var e=!1,o=!1;for(var s=0,u=t;s<u.length;s++){var a=u[s];a.isEmpty()?e=!0:o=!0}if(!o){if(!n)return"";var a=t.map((function(t){return t.startLineNumber}));var h="";for(var c=0;c<a.length;c++)c>0&&a[c-1]===a[c]||(h+=this.model.getLineContent(a[c])+r);return h}if(e&&n){var a=[];var h=0;for(var f=0,l=t;f<l.length;f++){var c=l[f];var v=c.startLineNumber;c.isEmpty()?v!==h&&a.push(this.model.getLineContent(v)):a.push(this.model.getValueInRange(c,i?2:0)),h=v}return a.length===1?a[0]:a}var d=[];for(var g=0,p=t;g<p.length;g++){var a=p[g];a.isEmpty()||d.push(this.model.getValueInRange(a,i?2:0))}return d.length===1?d[0]:d};n.prototype.getRichTextToCopy=function(t,n){var i=this.model.getLanguageId();if(i===dv||t.length!==1)return null;var r=t[0];if(r.isEmpty()){if(!n)return null;var e=r.startLineNumber;r=new Ir(e,this.model.getLineMinColumn(e),e,this.model.getLineMaxColumn(e))}var o=this._configuration.options.get(50),s=this._getColorMap();var u;return/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===zn.fontFamily?u=zn.fontFamily:(u=o.fontFamily,u=u.replace(/"/g,"'"),/[,']/.test(u)||/[+ ]/.test(u)&&(u="'".concat(u,"'")),u="".concat(u,", ").concat(zn.fontFamily)),{mode:i,html:'<div style="color: '.concat(s[1],";background-color: ").concat(s[2],";font-family: ").concat(u,";font-weight: ").concat(o.fontWeight,";font-size: ").concat(o.fontSize,"px;line-height: ").concat(o.lineHeight,'px;white-space: pre;">')+this._getHTMLToCopy(r,s)+"</div>"}};n.prototype._getHTMLToCopy=function(t,n){var i=t.startLineNumber,r=t.startColumn,e=t.endLineNumber,o=t.endColumn,s=this.getTabSize();var u="";for(var a=i;a<=e;a++){var h=this.model.tokenization.getLineTokens(a),c=h.getLineContent(),f=a===i?r-1:0,l=a===e?o-1:c.length;u+=c===""?"<br>":VF(c,h.inflate(),n,f,l,s,Mt)}return u};n.prototype._getColorMap=function(){var t=oe.getColorMap(),n=["#000000"];if(t)for(var i=1,r=t.length;i<r;i++)n[i]=Ig.Format.CSS.formatHex(t[i]);return n};n.prototype.getPrimaryCursorState=function(){return this._cursor.getPrimaryCursorState()};n.prototype.getLastAddedCursorIndex=function(){return this._cursor.getLastAddedCursorIndex()};n.prototype.getCursorStates=function(){return this._cursor.getCursorStates()};n.prototype.setCursorStates=function(t,n,i){var r=this;return this._withViewEventsCollector((function(e){return r._cursor.setStates(e,t,n,i)}))};n.prototype.getCursorColumnSelectData=function(){return this._cursor.getCursorColumnSelectData()};n.prototype.getCursorAutoClosedCharacters=function(){return this._cursor.getAutoClosedCharacters()};n.prototype.setCursorColumnSelectData=function(t){this._cursor.setCursorColumnSelectData(t)};n.prototype.getPrevEditOperationType=function(){return this._cursor.getPrevEditOperationType()};n.prototype.setPrevEditOperationType=function(t){this._cursor.setPrevEditOperationType(t)};n.prototype.getSelection=function(){return this._cursor.getSelection()};n.prototype.getSelections=function(){return this._cursor.getSelections()};n.prototype.getPosition=function(){return this._cursor.getPrimaryCursorState().modelState.position};n.prototype.setSelections=function(t,n,i){var r=this;if(i===void 0){i=0}this._withViewEventsCollector((function(e){return r._cursor.setSelections(e,t,n,i)}))};n.prototype.saveCursorState=function(){return this._cursor.saveState()};n.prototype.restoreCursorState=function(t){var n=this;this._withViewEventsCollector((function(i){return n._cursor.restoreState(i,t)}))};n.prototype._executeCursorEdit=function(t){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new FF):this._withViewEventsCollector(t)};n.prototype.executeEdits=function(t,n,i){var r=this;this._executeCursorEdit((function(e){return r._cursor.executeEdits(e,t,n,i)}))};n.prototype.startComposition=function(){var t=this;this._executeCursorEdit((function(n){return t._cursor.startComposition(n)}))};n.prototype.endComposition=function(t){var n=this;this._executeCursorEdit((function(i){return n._cursor.endComposition(i,t)}))};n.prototype.type=function(t,n){var i=this;this._executeCursorEdit((function(r){return i._cursor.type(r,t,n)}))};n.prototype.compositionType=function(t,n,i,r,e){var o=this;this._executeCursorEdit((function(s){return o._cursor.compositionType(s,t,n,i,r,e)}))};n.prototype.paste=function(t,n,i,r){var e=this;this._executeCursorEdit((function(o){return e._cursor.paste(o,t,n,i,r)}))};n.prototype.cut=function(t){var n=this;this._executeCursorEdit((function(i){return n._cursor.cut(i,t)}))};n.prototype.executeCommand=function(t,n){var i=this;this._executeCursorEdit((function(r){return i._cursor.executeCommand(r,t,n)}))};n.prototype.executeCommands=function(t,n){var i=this;this._executeCursorEdit((function(r){return i._cursor.executeCommands(r,t,n)}))};n.prototype.revealAllCursors=function(t,n,i){var r=this;if(i===void 0){i=!1}this._withViewEventsCollector((function(e){return r._cursor.revealAll(e,t,i,0,n,0)}))};n.prototype.revealPrimaryCursor=function(t,n,i){var r=this;if(i===void 0){i=!1}this._withViewEventsCollector((function(e){return r._cursor.revealPrimary(e,t,i,0,n,0)}))};n.prototype.revealTopMostCursor=function(t){var n=this._cursor.getTopMostViewPosition(),i=new Ir(n.lineNumber,n.column,n.lineNumber,n.column);this._withViewEventsCollector((function(n){return n.emitViewEvent(new wF(t,!1,i,null,0,!0,0))}))};n.prototype.revealBottomMostCursor=function(t){var n=this._cursor.getBottomMostViewPosition(),i=new Ir(n.lineNumber,n.column,n.lineNumber,n.column);this._withViewEventsCollector((function(n){return n.emitViewEvent(new wF(t,!1,i,null,0,!0,0))}))};n.prototype.revealRange=function(t,n,i,r,e){this._withViewEventsCollector((function(o){return o.emitViewEvent(new wF(t,!1,i,null,r,n,e))}))};n.prototype.changeWhitespace=function(t){this.viewLayout.changeWhitespace(t)&&(this._eventDispatcher.emitSingleViewEvent(new kF),this._eventDispatcher.emitOutgoingEvent(new OF))};n.prototype._withViewEventsCollector=function(t){try{return t(this._eventDispatcher.beginEmitViewEvents())}finally{this._eventDispatcher.endEmitViewEvents()}};n.prototype.normalizePosition=function(t,n){return this._lines.normalizePosition(t,n)};n.prototype.getLineIndentColumn=function(t){return this._lines.getLineIndentColumn(t)};return n}(ci);var yL=function(){function t(t,n,i,r,e){this._model=t,this._viewLineNumber=n,this._isValid=i,this._modelTrackedRange=r,this._startLineDelta=e}t.create=function(n){var i=n._setTrackedRange(null,new Ir(1,1,1,1),1);return new t(n,1,!1,i,0)};Object.defineProperty(t.prototype,"viewLineNumber",{get:function(){return this._viewLineNumber},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isValid",{get:function(){return this._isValid},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"modelTrackedRange",{get:function(){return this._modelTrackedRange},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"startLineDelta",{get:function(){return this._startLineDelta},enumerable:false,configurable:true});t.prototype.dispose=function(){this._model._setTrackedRange(this._modelTrackedRange,null,1)};t.prototype.update=function(t,n){var i=t.coordinatesConverter.convertViewPositionToModelPosition(new Tr(n,t.getLineMinColumn(n))),r=t.model._setTrackedRange(this._modelTrackedRange,new Ir(i.lineNumber,i.column,i.lineNumber,i.column),1),e=t.viewLayout.getVerticalOffsetForLineNumber(n),o=t.viewLayout.getCurrentScrollTop();this._viewLineNumber=n,this._isValid=!0,this._modelTrackedRange=r,this._startLineDelta=o-e};t.prototype.invalidate=function(){this._isValid=!1};return t}();var _L=function(){function t(){this._asMap=Object.create(null),this.asArray=[]}t.prototype.accept=function(t,n,i,r,e){var o=this._asMap[t];if(o){var s=o.data,u=s[s.length-3],a=s[s.length-1];if(u===e&&a+1>=i)return void(r>a&&(s[s.length-1]=r));s.push(e,i,r)}else{var s=new Up(t,n,[e,i,r]);this._asMap[t]=s,this.asArray.push(s)}};return t}();var kL=function(){function t(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}t.prototype.setHiddenAreas=function(t,n){var i=this.hiddenAreas.get(t);i&&xL(i,n)||(this.hiddenAreas.set(t,n),this.shouldRecompute=!0)};t.prototype.getMergedRanges=function(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;var t=Array.from(this.hiddenAreas.values()).reduce((function(t,n){return function(t,n){var i=[];var r=0,e=0;for(;r<t.length&&e<n.length;){var o=t[r],s=n[e];if(o.endLineNumber<s.startLineNumber-1)i.push(t[r++]);else if(s.endLineNumber<o.startLineNumber-1)i.push(n[e++]);else{var u=Math.min(o.startLineNumber,s.startLineNumber),a=Math.max(o.endLineNumber,s.endLineNumber);i.push(new Ir(u,1,a,1)),r++,e++}}for(;r<t.length;)i.push(t[r++]);for(;e<n.length;)i.push(n[e++]);return i}(t,n)}),[]);return xL(this.ranges,t)||(this.ranges=t),this.ranges};return t}();function xL(t,n){if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equalsRange(n[i]))return!1;return!0}var CL=function(){function t(t,n){this.viewportStartModelPosition=t,this.startLineDelta=n}t.prototype.recoverViewportStart=function(t,n){if(!this.viewportStartModelPosition)return;var i=t.convertModelPositionToViewPosition(this.viewportStartModelPosition),r=n.getVerticalOffsetForLineNumber(i.lineNumber);n.setScrollPosition({scrollTop:r+this.startLineDelta},1)};return t}();var SL=function(){function t(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}this._entries=new Map;for(var i=0,r=t;i<r.length;i++){var e=r[i],o=e[0],s=e[1];this.set(o,s)}}t.prototype.set=function(t,n){var i=this._entries.get(t);return this._entries.set(t,n),i};t.prototype.get=function(t){return this._entries.get(t)};return t}();var DL;(function(t){t[t.Ignore=0]="Ignore",t[t.Info=1]="Info",t[t.Warning=2]="Warning",t[t.Error=3]="Error"})(DL||(DL={})),function(t){var n="error",i="warning",r="info";t.fromValue=function(e){return e?Co(n,e)?t.Error:Co(i,e)||Co("warn",e)?t.Warning:Co(r,e)?t.Info:t.Ignore:t.Ignore},t.toString=function(e){switch(e){case t.Error:return n;case t.Warning:return i;case t.Info:return r;default:return"ignore"}}}(DL||(DL={}));var AL=DL;var OL=AL;var EL=Zh("notificationService");var ML,FL=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},LL=function(t,n){return function(i,r){n(i,r,t)}};var jL=ML=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c,f,l){var v=this;var d;v=t.call(this)||this,v.languageConfigurationService=f,v._deliveryQueue=new xi,v._contributions=v._register(new fA),v._onDidDispose=v._register(new ki),v.onDidDispose=v._onDidDispose.event,v._onDidChangeModelContent=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeModelContent=v._onDidChangeModelContent.event,v._onDidChangeModelLanguage=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeModelLanguage=v._onDidChangeModelLanguage.event,v._onDidChangeModelLanguageConfiguration=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeModelLanguageConfiguration=v._onDidChangeModelLanguageConfiguration.event,v._onDidChangeModelOptions=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeModelOptions=v._onDidChangeModelOptions.event,v._onDidChangeModelDecorations=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeModelDecorations=v._onDidChangeModelDecorations.event,v._onDidChangeModelTokens=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeModelTokens=v._onDidChangeModelTokens.event,v._onDidChangeConfiguration=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeConfiguration=v._onDidChangeConfiguration.event,v._onWillChangeModel=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onWillChangeModel=v._onWillChangeModel.event,v._onDidChangeModel=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeModel=v._onDidChangeModel.event,v._onDidChangeCursorPosition=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeCursorPosition=v._onDidChangeCursorPosition.event,v._onDidChangeCursorSelection=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeCursorSelection=v._onDidChangeCursorSelection.event,v._onDidAttemptReadOnlyEdit=v._register(new BL(v._contributions,v._deliveryQueue)),v.onDidAttemptReadOnlyEdit=v._onDidAttemptReadOnlyEdit.event,v._onDidLayoutChange=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidLayoutChange=v._onDidLayoutChange.event,v._editorTextFocus=v._register(new IL({deliveryQueue:v._deliveryQueue})),v.onDidFocusEditorText=v._editorTextFocus.onDidChangeToTrue,v.onDidBlurEditorText=v._editorTextFocus.onDidChangeToFalse,v._editorWidgetFocus=v._register(new IL({deliveryQueue:v._deliveryQueue})),v.onDidFocusEditorWidget=v._editorWidgetFocus.onDidChangeToTrue,v.onDidBlurEditorWidget=v._editorWidgetFocus.onDidChangeToFalse,v._onWillType=v._register(new BL(v._contributions,v._deliveryQueue)),v.onWillType=v._onWillType.event,v._onDidType=v._register(new BL(v._contributions,v._deliveryQueue)),v.onDidType=v._onDidType.event,v._onDidCompositionStart=v._register(new BL(v._contributions,v._deliveryQueue)),v.onDidCompositionStart=v._onDidCompositionStart.event,v._onDidCompositionEnd=v._register(new BL(v._contributions,v._deliveryQueue)),v.onDidCompositionEnd=v._onDidCompositionEnd.event,v._onDidPaste=v._register(new BL(v._contributions,v._deliveryQueue)),v.onDidPaste=v._onDidPaste.event,v._onMouseUp=v._register(new BL(v._contributions,v._deliveryQueue)),v.onMouseUp=v._onMouseUp.event,v._onMouseDown=v._register(new BL(v._contributions,v._deliveryQueue)),v.onMouseDown=v._onMouseDown.event,v._onMouseDrag=v._register(new BL(v._contributions,v._deliveryQueue)),v.onMouseDrag=v._onMouseDrag.event,v._onMouseDrop=v._register(new BL(v._contributions,v._deliveryQueue)),v.onMouseDrop=v._onMouseDrop.event,v._onMouseDropCanceled=v._register(new BL(v._contributions,v._deliveryQueue)),v.onMouseDropCanceled=v._onMouseDropCanceled.event,v._onDropIntoEditor=v._register(new BL(v._contributions,v._deliveryQueue)),v.onDropIntoEditor=v._onDropIntoEditor.event,v._onContextMenu=v._register(new BL(v._contributions,v._deliveryQueue)),v.onContextMenu=v._onContextMenu.event,v._onMouseMove=v._register(new BL(v._contributions,v._deliveryQueue)),v.onMouseMove=v._onMouseMove.event,v._onMouseLeave=v._register(new BL(v._contributions,v._deliveryQueue)),v.onMouseLeave=v._onMouseLeave.event,v._onMouseWheel=v._register(new BL(v._contributions,v._deliveryQueue)),v.onMouseWheel=v._onMouseWheel.event,v._onKeyUp=v._register(new BL(v._contributions,v._deliveryQueue)),v.onKeyUp=v._onKeyUp.event,v._onKeyDown=v._register(new BL(v._contributions,v._deliveryQueue)),v.onKeyDown=v._onKeyDown.event,v._onDidContentSizeChange=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidContentSizeChange=v._onDidContentSizeChange.event,v._onDidScrollChange=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidScrollChange=v._onDidScrollChange.event,v._onDidChangeViewZones=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeViewZones=v._onDidChangeViewZones.event,v._onDidChangeHiddenAreas=v._register(new ki({deliveryQueue:v._deliveryQueue})),v.onDidChangeHiddenAreas=v._onDidChangeHiddenAreas.event,v._actions=new Map,v._bannerDomNode=null,v._dropIntoEditorDecorations=v.createDecorationsCollection(),o.willCreateCodeEditor();var g=__assign({},i);var p;v._domElement=n,v._overflowWidgetsDomNode=g.overflowWidgetsDomNode,delete g.overflowWidgetsDomNode,v._id=++RL,v._decorationTypeKeysToIds={},v._decorationTypeSubtypes={},v._telemetryData=r.telemetryData,v._configuration=v._register(v._createConfiguration(r.isSimpleWidget||!1,g,c)),v._register(v._configuration.onDidChange((function(t){v._onDidChangeConfiguration.fire(t);var n=v._configuration.options;if(t.hasChanged(145)){var i=n.get(145);v._onDidLayoutChange.fire(i)}}))),v._contextKeyService=v._register(u.createScoped(v._domElement)),v._notificationService=h,v._codeEditorService=o,v._commandService=s,v._themeService=a,v._register(new NL(v,v._contextKeyService)),v._register(new PL(v,v._contextKeyService,l)),v._instantiationService=e.createChild(new SL([Gc,v._contextKeyService])),v._modelData=null,v._focusTracker=new WL(n,v._overflowWidgetsDomNode),v._register(v._focusTracker.onChange((function(){v._editorWidgetFocus.setValue(v._focusTracker.hasFocus())}))),v._contentWidgets={},v._overlayWidgets={},v._glyphMarginWidgets={},p=Array.isArray(r.contributions)?r.contributions:Wf.getEditorContributions(),v._contributions.initialize(v,p,v._instantiationService);var w=function(t){if(m._actions.has(t.id)){Gn(new Error("Cannot have two actions with the same id ".concat(t.id)));return"continue"}var n=new lA(t.id,t.label,t.alias,t.metadata,(d=t.precondition)!==null&&d!==void 0?d:void 0,(function(n){return v._instantiationService.invokeFunction((function(i){return Promise.resolve(t.runEditorCommand(i,v,n))}))}),m._contextKeyService);m._actions.set(n.id,n)};var m=this;for(var b=0,y=Wf.getEditorActions();b<y.length;b++){var _=y[b];w(_)}var k=function(){return!v._configuration.options.get(91)&&v._configuration.options.get(36).enabled};v._register(new Eh(v._domElement,{onDragOver:function(t){if(!k())return;var n=v.getTargetAtClientPoint(t.clientX,t.clientY);n!=null&&n.position&&v.showDropIndicatorAt(n.position)},onDrop:function(t){return __awaiter(v,void 0,void 0,(function(){var n;return __generator(this,(function(i){if(!k()||(this.removeDropIndicator(),!t.dataTransfer))return[2];n=this.getTargetAtClientPoint(t.clientX,t.clientY);n!=null&&n.position&&this._onDropIntoEditor.fire({position:n.position,event:t});return[2]}))}))},onDragLeave:function(){v.removeDropIndicator()},onDragEnd:function(){v.removeDropIndicator()}})),v._codeEditorService.addCodeEditor(v);return v}Object.defineProperty(n.prototype,"isSimpleWidget",{get:function(){return this._configuration.isSimpleWidget},enumerable:false,configurable:true});n.prototype.writeScreenReaderContent=function(t){var n;(n=this._modelData)===null||n===void 0||n.view.writeScreenReaderContent(t)};n.prototype._createConfiguration=function(t,n,i){return new Bw(t,n,this._domElement,i)};n.prototype.getId=function(){return this.getEditorType()+":"+this._id};n.prototype.getEditorType=function(){return vp.ICodeEditor};n.prototype.dispose=function(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),t.prototype.dispose.call(this)};n.prototype.invokeWithinContext=function(t){return this._instantiationService.invokeFunction(t)};n.prototype.updateOptions=function(t){this._configuration.updateOptions(t||{})};n.prototype.getOptions=function(){return this._configuration.options};n.prototype.getOption=function(t){return this._configuration.options.get(t)};n.prototype.getRawOptions=function(){return this._configuration.getRawOptions()};n.prototype.getOverflowWidgetsDomNode=function(){return this._overflowWidgetsDomNode};n.prototype.getConfiguredWordAtPosition=function(t){return this._modelData?CC.getWordAtPosition(this._modelData.model,this._configuration.options.get(131),this._configuration.options.get(130),t):null};n.prototype.getValue=function(t){if(t===void 0){t=null}if(!this._modelData)return"";var n=!(!t||!t.preserveBOM);var i=0;return t&&t.lineEnding&&t.lineEnding==="\n"?i=1:t&&t.lineEnding&&t.lineEnding==="\r\n"&&(i=2),this._modelData.model.getValue(i,n)};n.prototype.setValue=function(t){this._modelData&&this._modelData.model.setValue(t)};n.prototype.getModel=function(){return this._modelData?this._modelData.model:null};n.prototype.setModel=function(t){if(t===void 0){t=null}var n;var i=t;if(this._modelData===null&&i===null||this._modelData&&this._modelData.model===i)return;var r={oldModelUrl:((n=this._modelData)===null||n===void 0?void 0:n.model.uri)||null,newModelUrl:(i==null?void 0:i.uri)||null};this._onWillChangeModel.fire(r);var e=this.hasTextFocus(),o=this._detachModel();this._attachModel(i),e&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(r),this._postDetachModelCleanup(o),this._contributionsDisposable=this._contributions.onAfterModelAttached()};n.prototype._removeDecorationTypes=function(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(var t in this._decorationTypeSubtypes){var n=this._decorationTypeSubtypes[t];for(var i in n)this._removeDecorationType(t+"-"+i)}this._decorationTypeSubtypes={}}};n.prototype.getVisibleRanges=function(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]};n.prototype.getVisibleRangesPlusViewportAboveBelow=function(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]};n.prototype.getWhitespaces=function(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]};n._getVerticalOffsetAfterPosition=function(t,n,i,r){var e=t.model.validatePosition({lineNumber:n,column:i}),o=t.viewModel.coordinatesConverter.convertModelPositionToViewPosition(e);return t.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(o.lineNumber,r)};n.prototype.getTopForLineNumber=function(t,n){if(n===void 0){n=!1}return this._modelData?ML._getVerticalOffsetForPosition(this._modelData,t,1,n):-1};n.prototype.getTopForPosition=function(t,n){return this._modelData?ML._getVerticalOffsetForPosition(this._modelData,t,n,!1):-1};n._getVerticalOffsetForPosition=function(t,n,i,r){if(r===void 0){r=!1}var e=t.model.validatePosition({lineNumber:n,column:i}),o=t.viewModel.coordinatesConverter.convertModelPositionToViewPosition(e);return t.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber,r)};n.prototype.getBottomForLineNumber=function(t,n){if(n===void 0){n=!1}return this._modelData?ML._getVerticalOffsetAfterPosition(this._modelData,t,1,n):-1};n.prototype.setHiddenAreas=function(t,n){var i;(i=this._modelData)===null||i===void 0||i.viewModel.setHiddenAreas(t.map((function(t){return Ir.lift(t)})),n)};n.prototype.getVisibleColumnFromPosition=function(t){if(!this._modelData)return t.column;var n=this._modelData.model.validatePosition(t),i=this._modelData.model.getOptions().tabSize;return B_.visibleColumnFromColumn(this._modelData.model.getLineContent(n.lineNumber),n.column,i)+1};n.prototype.getPosition=function(){return this._modelData?this._modelData.viewModel.getPosition():null};n.prototype.setPosition=function(t,n){if(n===void 0){n="api"}if(this._modelData){if(!Tr.isIPosition(t))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(n,[{selectionStartLineNumber:t.lineNumber,selectionStartColumn:t.column,positionLineNumber:t.lineNumber,positionColumn:t.column}])}};n.prototype._sendRevealRange=function(t,n,i,r){if(!this._modelData)return;if(!Ir.isIRange(t))throw new Error("Invalid arguments");var e=this._modelData.model.validateRange(t),o=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(e);this._modelData.viewModel.revealRange("api",i,o,n,r)};n.prototype.revealLine=function(t,n){if(n===void 0){n=0}this._revealLine(t,0,n)};n.prototype.revealLineInCenter=function(t,n){if(n===void 0){n=0}this._revealLine(t,1,n)};n.prototype.revealLineInCenterIfOutsideViewport=function(t,n){if(n===void 0){n=0}this._revealLine(t,2,n)};n.prototype.revealLineNearTop=function(t,n){if(n===void 0){n=0}this._revealLine(t,5,n)};n.prototype._revealLine=function(t,n,i){if(typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Ir(t,1,t,1),n,!1,i)};n.prototype.revealPosition=function(t,n){if(n===void 0){n=0}this._revealPosition(t,0,!0,n)};n.prototype.revealPositionInCenter=function(t,n){if(n===void 0){n=0}this._revealPosition(t,1,!0,n)};n.prototype.revealPositionInCenterIfOutsideViewport=function(t,n){if(n===void 0){n=0}this._revealPosition(t,2,!0,n)};n.prototype.revealPositionNearTop=function(t,n){if(n===void 0){n=0}this._revealPosition(t,5,!0,n)};n.prototype._revealPosition=function(t,n,i,r){if(!Tr.isIPosition(t))throw new Error("Invalid arguments");this._sendRevealRange(new Ir(t.lineNumber,t.column,t.lineNumber,t.column),n,i,r)};n.prototype.getSelection=function(){return this._modelData?this._modelData.viewModel.getSelection():null};n.prototype.getSelections=function(){return this._modelData?this._modelData.viewModel.getSelections():null};n.prototype.setSelection=function(t,n){if(n===void 0){n="api"}var i=Br.isISelection(t),r=Ir.isIRange(t);if(!i&&!r)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(t,n);else if(r){var e={selectionStartLineNumber:t.startLineNumber,selectionStartColumn:t.startColumn,positionLineNumber:t.endLineNumber,positionColumn:t.endColumn};this._setSelectionImpl(e,n)}};n.prototype._setSelectionImpl=function(t,n){if(!this._modelData)return;var i=new Br(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn);this._modelData.viewModel.setSelections(n,[i])};n.prototype.revealLines=function(t,n,i){if(i===void 0){i=0}this._revealLines(t,n,0,i)};n.prototype.revealLinesInCenter=function(t,n,i){if(i===void 0){i=0}this._revealLines(t,n,1,i)};n.prototype.revealLinesInCenterIfOutsideViewport=function(t,n,i){if(i===void 0){i=0}this._revealLines(t,n,2,i)};n.prototype.revealLinesNearTop=function(t,n,i){if(i===void 0){i=0}this._revealLines(t,n,5,i)};n.prototype._revealLines=function(t,n,i,r){if(typeof t!="number"||typeof n!="number")throw new Error("Invalid arguments");this._sendRevealRange(new Ir(t,1,n,1),i,!1,r)};n.prototype.revealRange=function(t,n,i,r){if(n===void 0){n=0}if(i===void 0){i=!1}if(r===void 0){r=!0}this._revealRange(t,i?1:0,r,n)};n.prototype.revealRangeInCenter=function(t,n){if(n===void 0){n=0}this._revealRange(t,1,!0,n)};n.prototype.revealRangeInCenterIfOutsideViewport=function(t,n){if(n===void 0){n=0}this._revealRange(t,2,!0,n)};n.prototype.revealRangeNearTop=function(t,n){if(n===void 0){n=0}this._revealRange(t,5,!0,n)};n.prototype.revealRangeNearTopIfOutsideViewport=function(t,n){if(n===void 0){n=0}this._revealRange(t,6,!0,n)};n.prototype.revealRangeAtTop=function(t,n){if(n===void 0){n=0}this._revealRange(t,3,!0,n)};n.prototype._revealRange=function(t,n,i,r){if(!Ir.isIRange(t))throw new Error("Invalid arguments");this._sendRevealRange(Ir.lift(t),n,i,r)};n.prototype.setSelections=function(t,n,i){if(n===void 0){n="api"}if(i===void 0){i=0}if(this._modelData){if(!t||t.length===0)throw new Error("Invalid arguments");for(var r=0,e=t.length;r<e;r++)if(!Br.isISelection(t[r]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(n,t,i)}};n.prototype.getContentWidth=function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1};n.prototype.getScrollWidth=function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1};n.prototype.getScrollLeft=function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1};n.prototype.getContentHeight=function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1};n.prototype.getScrollHeight=function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1};n.prototype.getScrollTop=function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1};n.prototype.setScrollLeft=function(t,n){if(n===void 0){n=1}if(this._modelData){if(typeof t!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:t},n)}};n.prototype.setScrollTop=function(t,n){if(n===void 0){n=1}if(this._modelData){if(typeof t!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:t},n)}};n.prototype.setScrollPosition=function(t,n){if(n===void 0){n=1}this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(t,n)};n.prototype.hasPendingScrollAnimation=function(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()};n.prototype.saveViewState=function(){if(!this._modelData)return null;var t=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:t}};n.prototype.restoreViewState=function(t){if(!this._modelData||!this._modelData.hasRealView)return;var n=t;if(n&&n.cursorState&&n.viewState){var i=n.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(n.contributionsState||{});var r=this._modelData.viewModel.reduceRestoreState(n.viewState);this._modelData.view.restoreState(r)}};n.prototype.handleInitialized=function(){var t;(t=this._getViewModel())===null||t===void 0||t.visibleLinesStabilized()};n.prototype.getContribution=function(t){return this._contributions.get(t)};n.prototype.getActions=function(){return Array.from(this._actions.values())};n.prototype.getSupportedActions=function(){var t=this.getActions();return t=t.filter((function(t){return t.isSupported()})),t};n.prototype.getAction=function(t){return this._actions.get(t)||null};n.prototype.trigger=function(t,n,i){switch(i=i||{},n){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(t);case"type":{var r=i;return void this._type(t,r.text||"")}case"replacePreviousChar":{var r=i;return void this._compositionType(t,r.text||"",r.replaceCharCnt||0,0,0)}case"compositionType":{var r=i;return void this._compositionType(t,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0)}case"paste":{var r=i;return void this._paste(t,r.text||"",r.pasteOnNewLine||!1,r.multicursorText||null,r.mode||null,r.clipboardEvent)}case"cut":return void this._cut(t)}var e=this.getAction(n);e?Promise.resolve(e.run(i)).then(void 0,Gn):this._modelData&&(this._triggerEditorCommand(t,n,i)||this._triggerCommand(n,i))};n.prototype._triggerCommand=function(t,n){this._commandService.executeCommand(t,n)};n.prototype._startComposition=function(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())};n.prototype._endComposition=function(t){this._modelData&&(this._modelData.viewModel.endComposition(t),this._onDidCompositionEnd.fire())};n.prototype._type=function(t,n){this._modelData&&n.length!==0&&(t==="keyboard"&&this._onWillType.fire(n),this._modelData.viewModel.type(n,t),t==="keyboard"&&this._onDidType.fire(n))};n.prototype._compositionType=function(t,n,i,r,e){this._modelData&&this._modelData.viewModel.compositionType(n,i,r,e,t)};n.prototype._paste=function(t,n,i,r,e,o){if(!this._modelData)return;var s=this._modelData.viewModel,u=s.getSelection().getStartPosition();s.paste(n,i,r,t);var a=s.getSelection().getStartPosition();t==="keyboard"&&this._onDidPaste.fire({clipboardEvent:o,range:new Ir(u.lineNumber,u.column,a.lineNumber,a.column),languageId:e})};n.prototype._cut=function(t){this._modelData&&this._modelData.viewModel.cut(t)};n.prototype._triggerEditorCommand=function(t,n,i){var r=this;var e=Wf.getEditorCommand(n);return!!e&&((i=i||{}).source=t,this._instantiationService.invokeFunction((function(t){Promise.resolve(e.runEditorCommand(t,r,i)).then(void 0,Gn)})),!0)};n.prototype._getViewModel=function(){return this._modelData?this._modelData.viewModel:null};n.prototype.pushUndoStop=function(){return!!this._modelData&&!this._configuration.options.get(91)&&(this._modelData.model.pushStackElement(),!0)};n.prototype.popUndoStop=function(){return!!this._modelData&&!this._configuration.options.get(91)&&(this._modelData.model.popStackElement(),!0)};n.prototype.executeEdits=function(t,n,i){if(!this._modelData||this._configuration.options.get(91))return!1;var r;return r=i?Array.isArray(i)?function(){return i}:i:function(){return null},this._modelData.viewModel.executeEdits(t,n,r),!0};n.prototype.executeCommand=function(t,n){this._modelData&&this._modelData.viewModel.executeCommand(n,t)};n.prototype.executeCommands=function(t,n){this._modelData&&this._modelData.viewModel.executeCommands(n,t)};n.prototype.createDecorationsCollection=function(t){return new HL(this,t)};n.prototype.changeDecorations=function(t){return this._modelData?this._modelData.model.changeDecorations(t,this._id):null};n.prototype.getLineDecorations=function(t){return this._modelData?this._modelData.model.getLineDecorations(t,this._id,Fn(this._configuration.options)):null};n.prototype.getDecorationsInRange=function(t){return this._modelData?this._modelData.model.getDecorationsInRange(t,this._id,Fn(this._configuration.options)):null};n.prototype.deltaDecorations=function(t,n){return this._modelData?t.length===0&&n.length===0?t:this._modelData.model.deltaDecorations(t,n,this._id):[]};n.prototype.removeDecorations=function(t){this._modelData&&t.length!==0&&this._modelData.model.changeDecorations((function(n){n.deltaDecorations(t,[])}))};n.prototype.removeDecorationsByType=function(t){var n=this._decorationTypeKeysToIds[t];n&&this.changeDecorations((function(t){return t.deltaDecorations(n,[])})),this._decorationTypeKeysToIds.hasOwnProperty(t)&&delete this._decorationTypeKeysToIds[t],this._decorationTypeSubtypes.hasOwnProperty(t)&&delete this._decorationTypeSubtypes[t]};n.prototype.getLayoutInfo=function(){return this._configuration.options.get(145)};n.prototype.createOverviewRuler=function(t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(t):null};n.prototype.getContainerDomNode=function(){return this._domElement};n.prototype.getDomNode=function(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null};n.prototype.delegateVerticalScrollbarPointerDown=function(t){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(t)};n.prototype.delegateScrollFromMouseWheelEvent=function(t){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(t)};n.prototype.layout=function(t,n){if(n===void 0){n=!1}this._configuration.observeContainer(t),n||this.render()};n.prototype.focus=function(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()};n.prototype.hasTextFocus=function(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()};n.prototype.hasWidgetFocus=function(){return this._focusTracker&&this._focusTracker.hasFocus()};n.prototype.addContentWidget=function(t){var n={widget:t,position:t.getPosition()};this._contentWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting a content widget with the same id:"+t.getId()),this._contentWidgets[t.getId()]=n,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(n)};n.prototype.layoutContentWidget=function(t){var n=t.getId();if(this._contentWidgets.hasOwnProperty(n)){var i=this._contentWidgets[n];i.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}};n.prototype.removeContentWidget=function(t){var n=t.getId();if(this._contentWidgets.hasOwnProperty(n)){var i=this._contentWidgets[n];delete this._contentWidgets[n],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}};n.prototype.addOverlayWidget=function(t){var n={widget:t,position:t.getPosition()};this._overlayWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[t.getId()]=n,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(n)};n.prototype.layoutOverlayWidget=function(t){var n=t.getId();if(this._overlayWidgets.hasOwnProperty(n)){var i=this._overlayWidgets[n];i.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}};n.prototype.removeOverlayWidget=function(t){var n=t.getId();if(this._overlayWidgets.hasOwnProperty(n)){var i=this._overlayWidgets[n];delete this._overlayWidgets[n],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}};n.prototype.addGlyphMarginWidget=function(t){var n={widget:t,position:t.getPosition()};this._glyphMarginWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[t.getId()]=n,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(n)};n.prototype.layoutGlyphMarginWidget=function(t){var n=t.getId();if(this._glyphMarginWidgets.hasOwnProperty(n)){var i=this._glyphMarginWidgets[n];i.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}};n.prototype.removeGlyphMarginWidget=function(t){var n=t.getId();if(this._glyphMarginWidgets.hasOwnProperty(n)){var i=this._glyphMarginWidgets[n];delete this._glyphMarginWidgets[n],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}};n.prototype.changeViewZones=function(t){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(t)};n.prototype.getTargetAtClientPoint=function(t,n){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(t,n):null};n.prototype.getScrolledVisiblePosition=function(t){if(!this._modelData||!this._modelData.hasRealView)return null;var n=this._modelData.model.validatePosition(t),i=this._configuration.options,r=i.get(145);return{top:ML._getVerticalOffsetForPosition(this._modelData,n.lineNumber,n.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(n.lineNumber,n.column)+r.glyphMarginWidth+r.lineNumbersWidth+r.decorationsWidth-this.getScrollLeft(),height:i.get(67)}};n.prototype.getOffsetForColumn=function(t,n){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(t,n):-1};n.prototype.render=function(t){if(t===void 0){t=!1}this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,t)};n.prototype.setAriaOptions=function(t){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(t)};n.prototype.applyFontInfo=function(t){Ph(t,this._configuration.options.get(50))};n.prototype.setBanner=function(t,n){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=t,this._configuration.setReservedHeight(t?n:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)};n.prototype._attachModel=function(t){var n=this;if(!t)return void(this._modelData=null);var i=[];this._domElement.setAttribute("data-mode-id",t.getLanguageId()),this._configuration.setIsDominatedByLongLines(t.isDominatedByLongLines()),this._configuration.setModelLineCount(t.getLineCount());var r=t.onBeforeAttached(),e=new bL(this._id,this._configuration,t,sA.create(sa(this._domElement)),qM.create(this._configuration.options),(function(t){return Sa(sa(n._domElement),t)}),this.languageConfigurationService,this._themeService,r);i.push(t.onWillDispose((function(){return n.setModel(null)}))),i.push(e.onEvent((function(i){switch(i.kind){case 0:n._onDidContentSizeChange.fire(i);break;case 1:n._editorTextFocus.setValue(i.hasFocus);break;case 2:n._onDidScrollChange.fire(i);break;case 3:n._onDidChangeViewZones.fire();break;case 4:n._onDidChangeHiddenAreas.fire();break;case 5:n._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(i.reachedMaxCursorCount){var r=ht(0,"The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",n.getOption(80));n._notificationService.prompt(OL.Warning,r,[{label:"Find and Replace",run:function(){n._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:ht(0,"Increase Multi Cursor Limit"),run:function(){n._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}var e=[];for(var r=0,o=i.selections.length;r<o;r++)e[r]=i.selections[r].getPosition();var s={position:e[0],secondaryPositions:e.slice(1),reason:i.reason,source:i.source};n._onDidChangeCursorPosition.fire(s);var u={selection:i.selections[0],secondarySelections:i.selections.slice(1),modelVersionId:i.modelVersionId,oldSelections:i.oldSelections,oldModelVersionId:i.oldModelVersionId,source:i.source,reason:i.reason};n._onDidChangeCursorSelection.fire(u);break}case 7:n._onDidChangeModelDecorations.fire(i.event);break;case 8:n._domElement.setAttribute("data-mode-id",t.getLanguageId()),n._onDidChangeModelLanguage.fire(i.event);break;case 9:n._onDidChangeModelLanguageConfiguration.fire(i.event);break;case 10:n._onDidChangeModelContent.fire(i.event);break;case 11:n._onDidChangeModelOptions.fire(i.event);break;case 12:n._onDidChangeModelTokens.fire(i.event)}})));var o=this._createView(e),s=o[0],u=o[1];if(u){this._domElement.appendChild(s.domNode.domNode);var a=Object.keys(this._contentWidgets);for(var h=0,c=a.length;h<c;h++){var f=a[h];s.addContentWidget(this._contentWidgets[f])}a=Object.keys(this._overlayWidgets);for(var h=0,c=a.length;h<c;h++){var f=a[h];s.addOverlayWidget(this._overlayWidgets[f])}a=Object.keys(this._glyphMarginWidgets);for(var h=0,c=a.length;h<c;h++){var f=a[h];s.addGlyphMarginWidget(this._glyphMarginWidgets[f])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",t.uri.toString())}this._modelData=new TL(t,e,s,u,i,r)};n.prototype._createView=function(t){var n=this;var i;i=this.isSimpleWidget?{paste:function(t,i,r,e){n._paste("keyboard",t,i,r,e)},type:function(t){n._type("keyboard",t)},compositionType:function(t,i,r,e){n._compositionType("keyboard",t,i,r,e)},startComposition:function(){n._startComposition()},endComposition:function(){n._endComposition("keyboard")},cut:function(){n._cut("keyboard")}}:{paste:function(t,i,r,e){var o={text:t,pasteOnNewLine:i,multicursorText:r,mode:e};n._commandService.executeCommand("paste",o)},type:function(t){var i={text:t};n._commandService.executeCommand("type",i)},compositionType:function(t,i,r,e){if(r||e){var o={text:t,replacePrevCharCnt:i,replaceNextCharCnt:r,positionDelta:e};n._commandService.executeCommand("compositionType",o)}else{var o={text:t,replaceCharCnt:i};n._commandService.executeCommand("replacePreviousChar",o)}},startComposition:function(){n._commandService.executeCommand("compositionStart",{})},endComposition:function(){n._commandService.executeCommand("compositionEnd",{})},cut:function(){n._commandService.executeCommand("cut",{})}};var r=new gS(t.coordinatesConverter);return r.onKeyDown=function(t){return n._onKeyDown.fire(t)},r.onKeyUp=function(t){return n._onKeyUp.fire(t)},r.onContextMenu=function(t){return n._onContextMenu.fire(t)},r.onMouseMove=function(t){return n._onMouseMove.fire(t)},r.onMouseLeave=function(t){return n._onMouseLeave.fire(t)},r.onMouseDown=function(t){return n._onMouseDown.fire(t)},r.onMouseUp=function(t){return n._onMouseUp.fire(t)},r.onMouseDrag=function(t){return n._onMouseDrag.fire(t)},r.onMouseDrop=function(t){return n._onMouseDrop.fire(t)},r.onMouseDropCanceled=function(t){return n._onMouseDropCanceled.fire(t)},r.onMouseWheel=function(t){return n._onMouseWheel.fire(t)},[new UD(i,this._configuration,this._themeService.getColorTheme(),t,r,this._overflowWidgetsDomNode,this._instantiationService),!0]};n.prototype._postDetachModelCleanup=function(t){t==null||t.removeAllDecorationsWithOwnerId(this._id)};n.prototype._detachModel=function(){var t;if((t=this._contributionsDisposable)===null||t===void 0||t.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;var n=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),n};n.prototype._removeDecorationType=function(t){this._codeEditorService.removeDecorationType(t)};n.prototype.hasModel=function(){return this._modelData!==null};n.prototype.showDropIndicatorAt=function(t){var n=[{range:new Ir(t.lineNumber,t.column,t.lineNumber,t.column),options:ML.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(n),this.revealPosition(t,1)};n.prototype.removeDropIndicator=function(){this._dropIntoEditorDecorations.clear()};n.prototype.setContextValue=function(t,n){this._contextKeyService.createKey(t,n)};return n}(ci);jL.dropIntoEditorDecorationOptions=PM.register({description:"workbench-dnd-target",className:"dnd-target"}),jL=ML=FL([LL(3,Jh),LL(4,Qh),LL(5,ac),LL(6,Gc),LL(7,zk),LL(8,EL),LL(9,jw),LL(10,xv),LL(11,tp)],jL);var RL=0,TL=function(){function t(t,n,i,r,e,o){this.model=t,this.viewModel=n,this.view=i,this.hasRealView=r,this.listenersToRemove=e,this.attachedView=o}t.prototype.dispose=function(){si(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()};return t}();var IL=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._emitterOptions=n,i._onDidChangeToTrue=i._register(new ki(i._emitterOptions)),i.onDidChangeToTrue=i._onDidChangeToTrue.event,i._onDidChangeToFalse=i._register(new ki(i._emitterOptions)),i.onDidChangeToFalse=i._onDidChangeToFalse.event,i._value=0;return i}n.prototype.setValue=function(t){var n=t?2:1;this._value!==n&&(this._value=n,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())};return n}(ci);var BL=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,{deliveryQueue:i})||this,r._contributions=n;return r}n.prototype.fire=function(n){this._contributions.onBeforeInteractionEvent(),t.prototype.fire.call(this,n)};return n}(ki);var NL=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._editor=n,i.createKey("editorId",n.getId()),r._editorSimpleInput=$C.editorSimpleInput.bindTo(i),r._editorFocus=$C.focus.bindTo(i),r._textInputFocus=$C.textInputFocus.bindTo(i),r._editorTextFocus=$C.editorTextFocus.bindTo(i),r._tabMovesFocus=$C.tabMovesFocus.bindTo(i),r._editorReadonly=$C.readOnly.bindTo(i),r._inDiffEditor=$C.inDiffEditor.bindTo(i),r._editorColumnSelection=$C.columnSelection.bindTo(i),r._hasMultipleSelections=$C.hasMultipleSelections.bindTo(i),r._hasNonEmptySelection=$C.hasNonEmptySelection.bindTo(i),r._canUndo=$C.canUndo.bindTo(i),r._canRedo=$C.canRedo.bindTo(i),r._register(r._editor.onDidChangeConfiguration((function(){return r._updateFromConfig()}))),r._register(r._editor.onDidChangeCursorSelection((function(){return r._updateFromSelection()}))),r._register(r._editor.onDidFocusEditorWidget((function(){return r._updateFromFocus()}))),r._register(r._editor.onDidBlurEditorWidget((function(){return r._updateFromFocus()}))),r._register(r._editor.onDidFocusEditorText((function(){return r._updateFromFocus()}))),r._register(r._editor.onDidBlurEditorText((function(){return r._updateFromFocus()}))),r._register(r._editor.onDidChangeModel((function(){return r._updateFromModel()}))),r._register(r._editor.onDidChangeConfiguration((function(){return r._updateFromModel()}))),r._register(Lw.onDidChangeTabFocus((function(t){return r._tabMovesFocus.set(t)}))),r._updateFromConfig(),r._updateFromSelection(),r._updateFromFocus(),r._updateFromModel(),r._editorSimpleInput.set(r._editor.isSimpleWidget);return r}n.prototype._updateFromConfig=function(){var t=this._editor.getOptions();this._tabMovesFocus.set(Lw.getTabFocusMode()),this._editorReadonly.set(t.get(91)),this._inDiffEditor.set(t.get(61)),this._editorColumnSelection.set(t.get(22))};n.prototype._updateFromSelection=function(){var t=this._editor.getSelections();t?(this._hasMultipleSelections.set(t.length>1),this._hasNonEmptySelection.set(t.some((function(t){return!t.isEmpty()})))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())};n.prototype._updateFromFocus=function(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())};n.prototype._updateFromModel=function(){var t=this._editor.getModel();this._canUndo.set(!!(t&&t.canUndo())),this._canRedo.set(!!(t&&t.canRedo()))};return n}(ci);var PL=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._editor=n,e._contextKeyService=i,e._languageFeaturesService=r,e._langId=$C.languageId.bindTo(i),e._hasCompletionItemProvider=$C.hasCompletionItemProvider.bindTo(i),e._hasCodeActionsProvider=$C.hasCodeActionsProvider.bindTo(i),e._hasCodeLensProvider=$C.hasCodeLensProvider.bindTo(i),e._hasDefinitionProvider=$C.hasDefinitionProvider.bindTo(i),e._hasDeclarationProvider=$C.hasDeclarationProvider.bindTo(i),e._hasImplementationProvider=$C.hasImplementationProvider.bindTo(i),e._hasTypeDefinitionProvider=$C.hasTypeDefinitionProvider.bindTo(i),e._hasHoverProvider=$C.hasHoverProvider.bindTo(i),e._hasDocumentHighlightProvider=$C.hasDocumentHighlightProvider.bindTo(i),e._hasDocumentSymbolProvider=$C.hasDocumentSymbolProvider.bindTo(i),e._hasReferenceProvider=$C.hasReferenceProvider.bindTo(i),e._hasRenameProvider=$C.hasRenameProvider.bindTo(i),e._hasSignatureHelpProvider=$C.hasSignatureHelpProvider.bindTo(i),e._hasInlayHintsProvider=$C.hasInlayHintsProvider.bindTo(i),e._hasDocumentFormattingProvider=$C.hasDocumentFormattingProvider.bindTo(i),e._hasDocumentSelectionFormattingProvider=$C.hasDocumentSelectionFormattingProvider.bindTo(i),e._hasMultipleDocumentFormattingProvider=$C.hasMultipleDocumentFormattingProvider.bindTo(i),e._hasMultipleDocumentSelectionFormattingProvider=$C.hasMultipleDocumentSelectionFormattingProvider.bindTo(i),e._isInEmbeddedEditor=$C.isInEmbeddedEditor.bindTo(i);var o=function(){return e._update()};e._register(n.onDidChangeModel(o)),e._register(n.onDidChangeModelLanguage(o)),e._register(r.completionProvider.onDidChange(o)),e._register(r.codeActionProvider.onDidChange(o)),e._register(r.codeLensProvider.onDidChange(o)),e._register(r.definitionProvider.onDidChange(o)),e._register(r.declarationProvider.onDidChange(o)),e._register(r.implementationProvider.onDidChange(o)),e._register(r.typeDefinitionProvider.onDidChange(o)),e._register(r.hoverProvider.onDidChange(o)),e._register(r.documentHighlightProvider.onDidChange(o)),e._register(r.documentSymbolProvider.onDidChange(o)),e._register(r.referenceProvider.onDidChange(o)),e._register(r.renameProvider.onDidChange(o)),e._register(r.documentFormattingEditProvider.onDidChange(o)),e._register(r.documentRangeFormattingEditProvider.onDidChange(o)),e._register(r.signatureHelpProvider.onDidChange(o)),e._register(r.inlayHintsProvider.onDidChange(o)),o();return e}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.reset=function(){var t=this;this._contextKeyService.bufferChangeEvents((function(){t._langId.reset(),t._hasCompletionItemProvider.reset(),t._hasCodeActionsProvider.reset(),t._hasCodeLensProvider.reset(),t._hasDefinitionProvider.reset(),t._hasDeclarationProvider.reset(),t._hasImplementationProvider.reset(),t._hasTypeDefinitionProvider.reset(),t._hasHoverProvider.reset(),t._hasDocumentHighlightProvider.reset(),t._hasDocumentSymbolProvider.reset(),t._hasReferenceProvider.reset(),t._hasRenameProvider.reset(),t._hasDocumentFormattingProvider.reset(),t._hasDocumentSelectionFormattingProvider.reset(),t._hasSignatureHelpProvider.reset(),t._isInEmbeddedEditor.reset()}))};n.prototype._update=function(){var t=this;var n=this._editor.getModel();n?this._contextKeyService.bufferChangeEvents((function(){t._langId.set(n.getLanguageId()),t._hasCompletionItemProvider.set(t._languageFeaturesService.completionProvider.has(n)),t._hasCodeActionsProvider.set(t._languageFeaturesService.codeActionProvider.has(n)),t._hasCodeLensProvider.set(t._languageFeaturesService.codeLensProvider.has(n)),t._hasDefinitionProvider.set(t._languageFeaturesService.definitionProvider.has(n)),t._hasDeclarationProvider.set(t._languageFeaturesService.declarationProvider.has(n)),t._hasImplementationProvider.set(t._languageFeaturesService.implementationProvider.has(n)),t._hasTypeDefinitionProvider.set(t._languageFeaturesService.typeDefinitionProvider.has(n)),t._hasHoverProvider.set(t._languageFeaturesService.hoverProvider.has(n)),t._hasDocumentHighlightProvider.set(t._languageFeaturesService.documentHighlightProvider.has(n)),t._hasDocumentSymbolProvider.set(t._languageFeaturesService.documentSymbolProvider.has(n)),t._hasReferenceProvider.set(t._languageFeaturesService.referenceProvider.has(n)),t._hasRenameProvider.set(t._languageFeaturesService.renameProvider.has(n)),t._hasSignatureHelpProvider.set(t._languageFeaturesService.signatureHelpProvider.has(n)),t._hasInlayHintsProvider.set(t._languageFeaturesService.inlayHintsProvider.has(n)),t._hasDocumentFormattingProvider.set(t._languageFeaturesService.documentFormattingEditProvider.has(n)||t._languageFeaturesService.documentRangeFormattingEditProvider.has(n)),t._hasDocumentSelectionFormattingProvider.set(t._languageFeaturesService.documentRangeFormattingEditProvider.has(n)),t._hasMultipleDocumentFormattingProvider.set(t._languageFeaturesService.documentFormattingEditProvider.all(n).length+t._languageFeaturesService.documentRangeFormattingEditProvider.all(n).length>1),t._hasMultipleDocumentSelectionFormattingProvider.set(t._languageFeaturesService.documentRangeFormattingEditProvider.all(n).length>1),t._isInEmbeddedEditor.set(n.uri.scheme===Uu.walkThroughSnippet||n.uri.scheme===Uu.vscodeChatCodeBlock)})):this.reset()};return n}(ci);var WL=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._onChange=r._register(new ki),r.onChange=r._onChange.event,r._hadFocus=void 0,r._hasDomElementFocus=!1,r._domFocusTracker=r._register(lh(n)),r._overflowWidgetsDomNodeHasFocus=!1,r._register(r._domFocusTracker.onDidFocus((function(){r._hasDomElementFocus=!0,r._update()}))),r._register(r._domFocusTracker.onDidBlur((function(){r._hasDomElementFocus=!1,r._update()}))),i&&(r._overflowWidgetsDomNode=r._register(lh(i)),r._register(r._overflowWidgetsDomNode.onDidFocus((function(){r._overflowWidgetsDomNodeHasFocus=!0,r._update()}))),r._register(r._overflowWidgetsDomNode.onDidBlur((function(){r._overflowWidgetsDomNodeHasFocus=!1,r._update()}))));return r}n.prototype._update=function(){var t=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==t&&(this._hadFocus=t,this._onChange.fire(void 0))};n.prototype.hasFocus=function(){var t;return(t=this._hadFocus)!==null&&t!==void 0&&t};return n}(ci);var HL=function(){function t(t,n){this._editor=t,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(n)&&n.length>0&&this.set(n)}Object.defineProperty(t.prototype,"length",{get:function(){return this._decorationIds.length},enumerable:false,configurable:true});t.prototype.onDidChange=function(t,n,i){var r=this;return this._editor.onDidChangeModelDecorations((function(i){r._isChangingDecorations||t.call(n,i)}),i)};t.prototype.getRange=function(t){return this._editor.hasModel()?t>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[t]):null};t.prototype.getRanges=function(){if(!this._editor.hasModel())return[];var t=this._editor.getModel(),n=[];for(var i=0,r=this._decorationIds;i<r.length;i++){var e=r[i];var o=t.getDecorationRange(e);o&&n.push(o)}return n};t.prototype.has=function(t){return this._decorationIds.includes(t.id)};t.prototype.clear=function(){this._decorationIds.length!==0&&this.set([])};t.prototype.set=function(t){var n=this;try{this._isChangingDecorations=!0,this._editor.changeDecorations((function(i){n._decorationIds=i.deltaDecorations(n._decorationIds,t)}))}finally{this._isChangingDecorations=!1}return this._decorationIds};t.prototype.append=function(t){var n=this;var i=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations((function(r){i=r.deltaDecorations([],t),n._decorationIds=n._decorationIds.concat(i)}))}finally{this._isChangingDecorations=!1}return i};return t}();var zL=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),UL=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function KL(t){return zL+encodeURIComponent(t.toString())+UL}var VL=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),qL=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');Gk((function(t,n){var i=t.getColor(xm);i&&n.addRule('.monaco-editor .squiggly-error { background: url("data:image/svg+xml,'.concat(KL(i),'") repeat-x bottom left; }'));var r=t.getColor(Dm);r&&n.addRule('.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,'.concat(KL(r),'") repeat-x bottom left; }'));var e=t.getColor(Om);e&&n.addRule('.monaco-editor .squiggly-info { background: url("data:image/svg+xml,'.concat(KL(e),'") repeat-x bottom left; }'));var o=t.getColor(Mm);var s;o&&n.addRule('.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,'.concat((s=o,VL+encodeURIComponent(s.toString())+qL),'") no-repeat bottom left; }'));var u=t.getColor(xx);u&&n.addRule(".monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ".concat(u.rgba.a,"; }"))}));var GL=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},$L=function(t,n){return function(i,r){n(i,r,t)}};var JL=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._themeService=n,i._onWillCreateCodeEditor=i._register(new ki),i._onCodeEditorAdd=i._register(new ki),i.onCodeEditorAdd=i._onCodeEditorAdd.event,i._onCodeEditorRemove=i._register(new ki),i.onCodeEditorRemove=i._onCodeEditorRemove.event,i._onWillCreateDiffEditor=i._register(new ki),i._onDiffEditorAdd=i._register(new ki),i.onDiffEditorAdd=i._onDiffEditorAdd.event,i._onDiffEditorRemove=i._register(new ki),i.onDiffEditorRemove=i._onDiffEditorRemove.event,i._decorationOptionProviders=new Map,i._codeEditorOpenHandlers=new tn,i._modelProperties=new Map,i._codeEditors=Object.create(null),i._diffEditors=Object.create(null),i._globalStyleSheet=null;return i}n.prototype.willCreateCodeEditor=function(){this._onWillCreateCodeEditor.fire()};n.prototype.addCodeEditor=function(t){this._codeEditors[t.getId()]=t,this._onCodeEditorAdd.fire(t)};n.prototype.removeCodeEditor=function(t){delete this._codeEditors[t.getId()]&&this._onCodeEditorRemove.fire(t)};n.prototype.listCodeEditors=function(){var t=this;return Object.keys(this._codeEditors).map((function(n){return t._codeEditors[n]}))};n.prototype.willCreateDiffEditor=function(){this._onWillCreateDiffEditor.fire()};n.prototype.addDiffEditor=function(t){this._diffEditors[t.getId()]=t,this._onDiffEditorAdd.fire(t)};n.prototype.listDiffEditors=function(){var t=this;return Object.keys(this._diffEditors).map((function(n){return t._diffEditors[n]}))};n.prototype.getFocusedCodeEditor=function(){var t=null;var n=this.listCodeEditors();for(var i=0,r=n;i<r.length;i++){var e=r[i];if(e.hasTextFocus())return e;e.hasWidgetFocus()&&(t=e)}return t};n.prototype.removeDecorationType=function(t){var n=this._decorationOptionProviders.get(t);n&&(n.refCount--,n.refCount<=0&&(this._decorationOptionProviders.delete(t),n.dispose(),this.listCodeEditors().forEach((function(n){return n.removeDecorationsByType(t)}))))};n.prototype.setModelProperty=function(t,n,i){var r=t.toString();var e;this._modelProperties.has(r)?e=this._modelProperties.get(r):(e=new Map,this._modelProperties.set(r,e)),e.set(n,i)};n.prototype.getModelProperty=function(t,n){var i=t.toString();if(this._modelProperties.has(i))return this._modelProperties.get(i).get(n)};n.prototype.openCodeEditor=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s;return __generator(this,(function(u){switch(u.label){case 0:r=0,e=this._codeEditorOpenHandlers;u.label=1;case 1:if(!(r<e.length))return[3,4];o=e[r];return[4,o(t,n,i)];case 2:s=u.sent();if(s!==null)return[2,s];u.label=3;case 3:r++;return[3,1];case 4:return[2,null]}}))}))};n.prototype.registerCodeEditorOpenHandler=function(t){return ai(this._codeEditorOpenHandlers.unshift(t))};return n}(ci);JL=GL([$L(0,zk)],JL);var ZL=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},QL=function(t,n){return function(i,r){n(i,r,t)}};var YL=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r._register(r.onCodeEditorAdd((function(){return r._checkContextKey()}))),r._register(r.onCodeEditorRemove((function(){return r._checkContextKey()}))),r._editorIsOpen=n.createKey("editorIsOpen",!1),r._activeCodeEditor=null,r._register(r.registerCodeEditorOpenHandler((function(t,n,i){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(i){return[2,n?this.doOpenEditor(n,t):null]}))}))})));return r}n.prototype._checkContextKey=function(){var t=!1;for(var n=0,i=this.listCodeEditors();n<i.length;n++){var r=i[n];if(!r.isSimpleWidget){t=!0;break}}this._editorIsOpen.set(t)};n.prototype.setActiveCodeEditor=function(t){this._activeCodeEditor=t};n.prototype.getActiveCodeEditor=function(){return this._activeCodeEditor};n.prototype.doOpenEditor=function(t,n){if(!this.findModel(t,n.resource)){if(n.resource){var i=n.resource.scheme;if(i===Uu.http||i===Uu.https)return xh(n.resource.toString()),t}return null}var r=n.options?n.options.selection:null;if(r)if(typeof r.endLineNumber=="number"&&typeof r.endColumn=="number")t.setSelection(r),t.revealRangeInCenter(r,1);else{var i={lineNumber:r.startLineNumber,column:r.startColumn};t.setPosition(i),t.revealPositionInCenter(i,1)}return t};n.prototype.findModel=function(t,n){var i=t.getModel();return i&&i.uri.toString()!==n.toString()?null:i};return n}(JL);YL=ZL([QL(0,Gc),QL(1,zk)],YL),Xl(Qh,YL,0);var XL=Zh("layoutService");var tj=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},nj=function(t,n){return function(i,r){n(i,r,t)}};var ij=function(){function t(t){this._codeEditorService=t,this.onDidLayoutMainContainer=wi.None,this.onDidLayoutActiveContainer=wi.None,this.onDidLayoutContainer=wi.None,this.onDidChangeActiveContainer=wi.None,this.onDidAddContainer=wi.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}Object.defineProperty(t.prototype,"mainContainer",{get:function(){var t,n;return(n=(t=C(this._codeEditorService.listCodeEditors()))===null||t===void 0?void 0:t.getContainerDomNode())!==null&&n!==void 0?n:Xe.document.body},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"activeContainer",{get:function(){var t,n;var i=(t=this._codeEditorService.getFocusedCodeEditor())!==null&&t!==void 0?t:this._codeEditorService.getActiveCodeEditor();return(n=i==null?void 0:i.getContainerDomNode())!==null&&n!==void 0?n:this.mainContainer},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"mainContainerDimension",{get:function(){return Ea(this.mainContainer)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"activeContainerDimension",{get:function(){return Ea(this.activeContainer)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"containers",{get:function(){return b(this._codeEditorService.listCodeEditors().map((function(t){return t.getContainerDomNode()})))},enumerable:false,configurable:true});t.prototype.getContainer=function(){return this.activeContainer};t.prototype.whenContainerStylesLoaded=function(){};t.prototype.focus=function(){var t;(t=this._codeEditorService.getFocusedCodeEditor())===null||t===void 0||t.focus()};return t}();ij=tj([nj(0,Qh)],ij);var rj=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r._container=n;return r}Object.defineProperty(n.prototype,"mainContainer",{get:function(){return this._container},enumerable:false,configurable:true});return n}(ij);rj=tj([nj(1,Qh)],rj),Xl(XL,ij,1);var ej=Zh("dialogService");var oj=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},sj=function(t,n){return function(i,r){n(i,r,t)}};function uj(t){return t.scheme===Uu.file?t.fsPath:t.path}var aj=0;var hj=function(){function t(t,n,i,r,e,o,s){this.id=++aj,this.type=0,this.actual=t,this.label=t.label,this.confirmBeforeUndo=t.confirmBeforeUndo||!1,this.resourceLabel=n,this.strResource=i,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=r,this.groupOrder=e,this.sourceId=o,this.sourceOrder=s,this.isValid=!0}t.prototype.setValid=function(t){this.isValid=t};t.prototype.toString=function(){return"[id:".concat(this.id,"] [group:").concat(this.groupId,"] [").concat(this.isValid?"  VALID":"INVALID","] ").concat(this.actual.constructor.name," - ").concat(this.actual)};return t}();var cj=function(){function t(t,n){this.resourceLabel=t,this.reason=n}return t}();var fj=function(){function t(){this.elements=new Map}t.prototype.createMessage=function(){var t=[],n=[];for(var i=0,r=this.elements;i<r.length;i++){var e=r[i],o=e[1];(o.reason===0?t:n).push(o.resourceLabel)}var s=[];return t.length>0&&s.push(ht(0,"The following files have been closed and modified on disk: {0}.",t.join(", "))),n.length>0&&s.push(ht(0,"The following files have been modified in an incompatible way: {0}.",n.join(", "))),s.join("\n")};Object.defineProperty(t.prototype,"size",{get:function(){return this.elements.size},enumerable:false,configurable:true});t.prototype.has=function(t){return this.elements.has(t)};t.prototype.set=function(t,n){this.elements.set(t,n)};t.prototype.delete=function(t){return this.elements.delete(t)};return t}();var lj=function(){function t(t,n,i,r,e,o,s){this.id=++aj,this.type=1,this.actual=t,this.label=t.label,this.confirmBeforeUndo=t.confirmBeforeUndo||!1,this.resourceLabels=n,this.strResources=i,this.groupId=r,this.groupOrder=e,this.sourceId=o,this.sourceOrder=s,this.removedResources=null,this.invalidatedResources=null}t.prototype.canSplit=function(){return typeof this.actual.split=="function"};t.prototype.removeResource=function(t,n,i){this.removedResources||(this.removedResources=new fj),this.removedResources.has(n)||this.removedResources.set(n,new cj(t,i))};t.prototype.setValid=function(t,n,i){i?this.invalidatedResources&&(this.invalidatedResources.delete(n),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new fj),this.invalidatedResources.has(n)||this.invalidatedResources.set(n,new cj(t,0)))};t.prototype.toString=function(){return"[id:".concat(this.id,"] [group:").concat(this.groupId,"] [").concat(this.invalidatedResources?"INVALID":"  VALID","] ").concat(this.actual.constructor.name," - ").concat(this.actual)};return t}();var vj=function(){function t(t,n){this.resourceLabel=t,this.strResource=n,this._past=[],this._future=[],this.locked=!1,this.versionId=1}t.prototype.dispose=function(){for(var t=0,n=this._past;t<n.length;t++){var i=n[t];i.type===1&&i.removeResource(this.resourceLabel,this.strResource,0)}for(var r=0,e=this._future;r<e.length;r++){var i=e[r];i.type===1&&i.removeResource(this.resourceLabel,this.strResource,0)}this.versionId++};t.prototype.toString=function(){var t=[];t.push("* ".concat(this.strResource,":"));for(var n=0;n<this._past.length;n++)t.push("   * [UNDO] ".concat(this._past[n]));for(var n=this._future.length-1;n>=0;n--)t.push("   * [REDO] ".concat(this._future[n]));return t.join("\n")};t.prototype.flushAllElements=function(){this._past=[],this._future=[],this.versionId++};t.prototype._setElementValidFlag=function(t,n){t.type===1?t.setValid(this.resourceLabel,this.strResource,n):t.setValid(n)};t.prototype.setElementsValidFlag=function(t,n){for(var i=0,r=this._past;i<r.length;i++){var e=r[i];n(e.actual)&&this._setElementValidFlag(e,t)}for(var o=0,s=this._future;o<s.length;o++){var e=s[o];n(e.actual)&&this._setElementValidFlag(e,t)}};t.prototype.pushElement=function(t){for(var n=0,i=this._future;n<i.length;n++){var r=i[n];r.type===1&&r.removeResource(this.resourceLabel,this.strResource,1)}this._future=[],this._past.push(t),this.versionId++};t.prototype.createSnapshot=function(t){var n=[];for(var i=0,r=this._past.length;i<r;i++)n.push(this._past[i].id);for(var i=this._future.length-1;i>=0;i--)n.push(this._future[i].id);return new bM(t,n)};t.prototype.restoreSnapshot=function(t){var n=t.elements.length;var i=!0,r=0,e=-1;for(var o=0,s=this._past.length;o<s;o++,r++){var u=this._past[o];i&&(r>=n||u.id!==t.elements[r])&&(i=!1,e=0),i||u.type!==1||u.removeResource(this.resourceLabel,this.strResource,0)}var a=-1;for(var o=this._future.length-1;o>=0;o--,r++){var s=this._future[o];i&&(r>=n||s.id!==t.elements[r])&&(i=!1,a=o),i||s.type!==1||s.removeResource(this.resourceLabel,this.strResource,0)}e!==-1&&(this._past=this._past.slice(0,e)),a!==-1&&(this._future=this._future.slice(a+1)),this.versionId++};t.prototype.getElements=function(){var t=[],n=[];for(var i=0,r=this._past;i<r.length;i++){var e=r[i];t.push(e.actual)}for(var o=0,s=this._future;o<s.length;o++){var e=s[o];n.push(e.actual)}return{past:t,future:n}};t.prototype.getClosestPastElement=function(){return this._past.length===0?null:this._past[this._past.length-1]};t.prototype.getSecondClosestPastElement=function(){return this._past.length<2?null:this._past[this._past.length-2]};t.prototype.getClosestFutureElement=function(){return this._future.length===0?null:this._future[this._future.length-1]};t.prototype.hasPastElements=function(){return this._past.length>0};t.prototype.hasFutureElements=function(){return this._future.length>0};t.prototype.splitPastWorkspaceElement=function(t,n){for(var i=this._past.length-1;i>=0;i--)if(this._past[i]===t){n.has(this.strResource)?this._past[i]=n.get(this.strResource):this._past.splice(i,1);break}this.versionId++};t.prototype.splitFutureWorkspaceElement=function(t,n){for(var i=this._future.length-1;i>=0;i--)if(this._future[i]===t){n.has(this.strResource)?this._future[i]=n.get(this.strResource):this._future.splice(i,1);break}this.versionId++};t.prototype.moveBackward=function(t){this._past.pop(),this._future.push(t),this.versionId++};t.prototype.moveForward=function(t){this._future.pop(),this._past.push(t),this.versionId++};return t}();var dj=function(){function t(t){this.editStacks=t,this._versionIds=[];for(var n=0,i=this.editStacks.length;n<i;n++)this._versionIds[n]=this.editStacks[n].versionId}t.prototype.isValid=function(){for(var t=0,n=this.editStacks.length;t<n;t++)if(this._versionIds[t]!==this.editStacks[t].versionId)return!1;return!0};return t}();var gj=new vj("","");gj.locked=!0;var pj=function(){function t(t,n){this._dialogService=t,this._notificationService=n,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}t.prototype.getUriComparisonKey=function(t){for(var n=0,i=this._uriComparisonKeyComputers;n<i.length;n++){var r=i[n];if(r[0]===t.scheme)return r[1].getComparisonKey(t)}return t.toString()};t.prototype._print=function(t){console.log("------------------------------------"),console.log("AFTER ".concat(t,": "));var n=[];for(var i=0,r=this._editStacks;i<r.length;i++){var e=r[i];n.push(e[1].toString())}console.log(n.join("\n"))};t.prototype.pushElement=function(t,n,i){if(n===void 0){n=yM.None}if(i===void 0){i=_M.None}if(t.type===0){var r=uj(t.resource),e=this.getUriComparisonKey(t.resource);this._pushElement(new hj(t,r,e,n.id,n.nextOrder(),i.id,i.nextOrder()))}else{var r=new Set,e=[],o=[];for(var s=0,u=t.resources;s<u.length;s++){var a=u[s];var h=uj(a),c=this.getUriComparisonKey(a);r.has(c)||(r.add(c),e.push(h),o.push(c))}e.length===1?this._pushElement(new hj(t,e[0],o[0],n.id,n.nextOrder(),i.id,i.nextOrder())):this._pushElement(new lj(t,e,o,n.id,n.nextOrder(),i.id,i.nextOrder()))}};t.prototype._pushElement=function(t){for(var n=0,i=t.strResources.length;n<i;n++){var r=t.resourceLabels[n],e=t.strResources[n];var o=void 0;this._editStacks.has(e)?o=this._editStacks.get(e):(o=new vj(r,e),this._editStacks.set(e,o)),o.pushElement(t)}};t.prototype.getLastElement=function(t){var n=this.getUriComparisonKey(t);if(this._editStacks.has(n)){var i=this._editStacks.get(n);if(i.hasFutureElements())return null;var r=i.getClosestPastElement();return r?r.actual:null}return null};t.prototype._splitPastWorkspaceElement=function(t,n){var i=t.actual.split(),r=new Map;for(var e=0,o=i;e<o.length;e++){var s=o[e];var u=uj(s.resource),a=this.getUriComparisonKey(s.resource),h=new hj(s,u,a,0,0,0,0);r.set(h.strResource,h)}for(var c=0,f=t.strResources;c<f.length;c++){var s=f[c];n&&n.has(s)||this._editStacks.get(s).splitPastWorkspaceElement(t,r)}};t.prototype._splitFutureWorkspaceElement=function(t,n){var i=t.actual.split(),r=new Map;for(var e=0,o=i;e<o.length;e++){var s=o[e];var u=uj(s.resource),a=this.getUriComparisonKey(s.resource),h=new hj(s,u,a,0,0,0,0);r.set(h.strResource,h)}for(var c=0,f=t.strResources;c<f.length;c++){var s=f[c];n&&n.has(s)||this._editStacks.get(s).splitFutureWorkspaceElement(t,r)}};t.prototype.removeElements=function(t){var n=typeof t=="string"?t:this.getUriComparisonKey(t);this._editStacks.has(n)&&(this._editStacks.get(n).dispose(),this._editStacks.delete(n))};t.prototype.setElementsValidFlag=function(t,n,i){var r=this.getUriComparisonKey(t);this._editStacks.has(r)&&this._editStacks.get(r).setElementsValidFlag(n,i)};t.prototype.createSnapshot=function(t){var n=this.getUriComparisonKey(t);return this._editStacks.has(n)?this._editStacks.get(n).createSnapshot(t):new bM(t,[])};t.prototype.restoreSnapshot=function(t){var n=this.getUriComparisonKey(t.resource);if(this._editStacks.has(n)){var i=this._editStacks.get(n);i.restoreSnapshot(t),i.hasPastElements()||i.hasFutureElements()||(i.dispose(),this._editStacks.delete(n))}};t.prototype.getElements=function(t){var n=this.getUriComparisonKey(t);return this._editStacks.has(n)?this._editStacks.get(n).getElements():{past:[],future:[]}};t.prototype._findClosestUndoElementWithSource=function(t){if(!t)return[null,null];var n=null,i=null;for(var r=0,e=this._editStacks;r<e.length;r++){var o=e[r],s=o[0],u=o[1];var a=u.getClosestPastElement();a&&a.sourceId===t&&(!n||a.sourceOrder>n.sourceOrder)&&(n=a,i=s)}return[n,i]};t.prototype.canUndo=function(t){if(t instanceof _M){var n=this._findClosestUndoElementWithSource(t.id),i=n[1];return!!i}var r=this.getUriComparisonKey(t);return this._editStacks.has(r)?this._editStacks.get(r).hasPastElements():!1};t.prototype._onError=function(t,n){Gn(t);for(var i=0,r=n.strResources;i<r.length;i++){var e=r[i];this.removeElements(e)}this._notificationService.error(t)};t.prototype._acquireLocks=function(t){for(var n=0,i=t.editStacks;n<i.length;n++){var r=i[n];if(r.locked)throw new Error("Cannot acquire edit stack lock")}for(var e=0,o=t.editStacks;e<o.length;e++){var r=o[e];r.locked=!0}return function(){for(var n=0,i=t.editStacks;n<i.length;n++){var r=i[n];r.locked=!1}}};t.prototype._safeInvokeWithLocks=function(t,n,i,r,e){var o=this;var s=this._acquireLocks(i);var u;try{u=n()}catch(n){return s(),r.dispose(),this._onError(n,t)}return u?u.then((function(){return s(),r.dispose(),e()}),(function(n){return s(),r.dispose(),o._onError(n,t)})):(s(),r.dispose(),e())};t.prototype._invokeWorkspacePrepare=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){if(t.actual.prepareUndoRedo===void 0)return[2,ci.None];n=t.actual.prepareUndoRedo();return[2,n===void 0?ci.None:n]}))}))};t.prototype._invokeResourcePrepare=function(t,n){if(t.actual.type!==1||t.actual.prepareUndoRedo===void 0)return n(ci.None);var i=t.actual.prepareUndoRedo();return i?oi(i)?n(i):i.then((function(t){return n(t)})):n(ci.None)};t.prototype._getAffectedEditStacks=function(t){var n=[];for(var i=0,r=t.strResources;i<r.length;i++){var e=r[i];n.push(this._editStacks.get(e)||gj)}return new dj(n)};t.prototype._tryToSplitAndUndo=function(t,n,i,r){if(n.canSplit())return this._splitPastWorkspaceElement(n,i),this._notificationService.warn(r),new wj(this._undo(t,0,!0));for(var e=0,o=n.strResources;e<o.length;e++){var s=o[e];this.removeElements(s)}return this._notificationService.warn(r),new wj};t.prototype._checkWorkspaceUndo=function(t,n,i,r){if(n.removedResources)return this._tryToSplitAndUndo(t,n,n.removedResources,ht(0,"Could not undo '{0}' across all files. {1}",n.label,n.removedResources.createMessage()));if(r&&n.invalidatedResources)return this._tryToSplitAndUndo(t,n,n.invalidatedResources,ht(0,"Could not undo '{0}' across all files. {1}",n.label,n.invalidatedResources.createMessage()));var e=[];for(var o=0,s=i.editStacks;o<s.length;o++){var u=s[o];u.getClosestPastElement()!==n&&e.push(u.resourceLabel)}if(e.length>0)return this._tryToSplitAndUndo(t,n,null,ht(0,"Could not undo '{0}' across all files because changes were made to {1}",n.label,e.join(", ")));var a=[];for(var h=0,c=i.editStacks;h<c.length;h++){var u=c[h];u.locked&&a.push(u.resourceLabel)}return a.length>0?this._tryToSplitAndUndo(t,n,null,ht(0,"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",n.label,a.join(", "))):i.isValid()?null:this._tryToSplitAndUndo(t,n,null,ht(0,"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",n.label))};t.prototype._workspaceUndo=function(t,n,i){var r=this._getAffectedEditStacks(n),e=this._checkWorkspaceUndo(t,n,r,!1);return e?e.returnValue:this._confirmAndExecuteWorkspaceUndo(t,n,r,i)};t.prototype._isPartOfUndoGroup=function(t){if(!t.groupId)return!1;for(var n=0,i=this._editStacks;n<i.length;n++){var r=i[n],e=r[1];var o=e.getClosestPastElement();if(o){if(o===t){var s=e.getSecondClosestPastElement();if(s&&s.groupId===t.groupId)return!0}if(o.groupId===t.groupId)return!0}}return!1};t.prototype._confirmAndExecuteWorkspaceUndo=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a,h,c,f,l;var v=this;return __generator(this,(function(d){switch(d.label){case 0:if(!(n.canSplit()&&!this._isPartOfUndoGroup(n)))return[3,2];(function(t){t[t.All=0]="All",t[t.This=1]="This",t[t.Cancel=2]="Cancel"})(e||(e={}));return[4,this._dialogService.prompt({type:AL.Info,message:ht(0,"Would you like to undo '{0}' across all files?",n.label),buttons:[{label:ht(0,"&&Undo in {0} Files",i.editStacks.length),run:function(){return e.All}},{label:ht(0,"Undo this &&File"),run:function(){return e.This}}],cancelButton:{run:function(){return e.Cancel}}})];case 1:o=d.sent().result;if(o===e.Cancel)return[2];if(o===e.This)return[2,(this._splitPastWorkspaceElement(n,null),this._undo(t,0,!0))];s=this._checkWorkspaceUndo(t,n,i,!1);if(s)return[2,s.returnValue];r=!0;d.label=2;case 2:d.trys.push([2,4,,5]);return[4,this._invokeWorkspacePrepare(n)];case 3:u=d.sent();return[3,5];case 4:a=d.sent();return[2,this._onError(a,n)];case 5:h=this._checkWorkspaceUndo(t,n,i,!0);if(h)return[2,(u.dispose(),h.returnValue)];for(c=0,f=i.editStacks;c<f.length;c++){l=f[c];l.moveBackward(n)}return[2,this._safeInvokeWithLocks(n,(function(){return n.actual.undo()}),i,u,(function(){return v._continueUndoInGroup(n.groupId,r)}))]}}))}))};t.prototype._resourceUndo=function(t,n,i){var r=this;if(n.isValid){if(!t.locked)return this._invokeResourcePrepare(n,(function(e){return t.moveBackward(n),r._safeInvokeWithLocks(n,(function(){return n.actual.undo()}),new dj([t]),e,(function(){return r._continueUndoInGroup(n.groupId,i)}))}));{var e=ht(0,"Could not undo '{0}' because there is already an undo or redo operation running.",n.label);this._notificationService.warn(e)}}else t.flushAllElements()};t.prototype._findClosestUndoElementInGroup=function(t){if(!t)return[null,null];var n=null,i=null;for(var r=0,e=this._editStacks;r<e.length;r++){var o=e[r],s=o[0],u=o[1];var a=u.getClosestPastElement();a&&a.groupId===t&&(!n||a.groupOrder>n.groupOrder)&&(n=a,i=s)}return[n,i]};t.prototype._continueUndoInGroup=function(t,n){if(!t)return;var i=this._findClosestUndoElementInGroup(t),r=i[1];return r?this._undo(r,0,n):void 0};t.prototype.undo=function(t){if(t instanceof _M){var n=this._findClosestUndoElementWithSource(t.id),i=n[1];return i?this._undo(i,t.id,!1):void 0}return typeof t=="string"?this._undo(t,0,!1):this._undo(this.getUriComparisonKey(t),0,!1)};t.prototype._undo=function(t,n,i){if(n===void 0){n=0}if(!this._editStacks.has(t))return;var r=this._editStacks.get(t),e=r.getClosestPastElement();if(e){if(e.groupId){var o=this._findClosestUndoElementInGroup(e.groupId),s=o[0],u=o[1];if(e!==s&&u)return this._undo(u,n,i)}if((e.sourceId!==n||e.confirmBeforeUndo)&&!i)return this._confirmAndContinueUndo(t,n,e);try{return e.type===1?this._workspaceUndo(t,e,i):this._resourceUndo(r,e,i)}finally{}}};t.prototype._confirmAndContinueUndo=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){switch(r.label){case 0:return[4,this._dialogService.confirm({message:ht(0,"Would you like to undo '{0}'?",i.label),primaryButton:ht(0,"&&Yes"),cancelButton:ht(0,"No")})];case 1:if(r.sent().confirmed)return[2,this._undo(t,n,!0)];return[2]}}))}))};t.prototype._findClosestRedoElementWithSource=function(t){if(!t)return[null,null];var n=null,i=null;for(var r=0,e=this._editStacks;r<e.length;r++){var o=e[r],s=o[0],u=o[1];var a=u.getClosestFutureElement();a&&a.sourceId===t&&(!n||a.sourceOrder<n.sourceOrder)&&(n=a,i=s)}return[n,i]};t.prototype.canRedo=function(t){if(t instanceof _M){var n=this._findClosestRedoElementWithSource(t.id),i=n[1];return!!i}var r=this.getUriComparisonKey(t);return this._editStacks.has(r)?this._editStacks.get(r).hasFutureElements():!1};t.prototype._tryToSplitAndRedo=function(t,n,i,r){if(n.canSplit())return this._splitFutureWorkspaceElement(n,i),this._notificationService.warn(r),new wj(this._redo(t));for(var e=0,o=n.strResources;e<o.length;e++){var s=o[e];this.removeElements(s)}return this._notificationService.warn(r),new wj};t.prototype._checkWorkspaceRedo=function(t,n,i,r){if(n.removedResources)return this._tryToSplitAndRedo(t,n,n.removedResources,ht(0,"Could not redo '{0}' across all files. {1}",n.label,n.removedResources.createMessage()));if(r&&n.invalidatedResources)return this._tryToSplitAndRedo(t,n,n.invalidatedResources,ht(0,"Could not redo '{0}' across all files. {1}",n.label,n.invalidatedResources.createMessage()));var e=[];for(var o=0,s=i.editStacks;o<s.length;o++){var u=s[o];u.getClosestFutureElement()!==n&&e.push(u.resourceLabel)}if(e.length>0)return this._tryToSplitAndRedo(t,n,null,ht(0,"Could not redo '{0}' across all files because changes were made to {1}",n.label,e.join(", ")));var a=[];for(var h=0,c=i.editStacks;h<c.length;h++){var u=c[h];u.locked&&a.push(u.resourceLabel)}return a.length>0?this._tryToSplitAndRedo(t,n,null,ht(0,"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",n.label,a.join(", "))):i.isValid()?null:this._tryToSplitAndRedo(t,n,null,ht(0,"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",n.label))};t.prototype._workspaceRedo=function(t,n){var i=this._getAffectedEditStacks(n),r=this._checkWorkspaceRedo(t,n,i,!1);return r?r.returnValue:this._executeWorkspaceRedo(t,n,i)};t.prototype._executeWorkspaceRedo=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u,a;var h=this;return __generator(this,(function(c){switch(c.label){case 0:c.trys.push([0,2,,3]);return[4,this._invokeWorkspacePrepare(n)];case 1:r=c.sent();return[3,3];case 2:e=c.sent();return[2,this._onError(e,n)];case 3:o=this._checkWorkspaceRedo(t,n,i,!0);if(o)return[2,(r.dispose(),o.returnValue)];for(s=0,u=i.editStacks;s<u.length;s++){a=u[s];a.moveForward(n)}return[2,this._safeInvokeWithLocks(n,(function(){return n.actual.redo()}),i,r,(function(){return h._continueRedoInGroup(n.groupId)}))]}}))}))};t.prototype._resourceRedo=function(t,n){var i=this;if(n.isValid){if(!t.locked)return this._invokeResourcePrepare(n,(function(r){return t.moveForward(n),i._safeInvokeWithLocks(n,(function(){return n.actual.redo()}),new dj([t]),r,(function(){return i._continueRedoInGroup(n.groupId)}))}));{var r=ht(0,"Could not redo '{0}' because there is already an undo or redo operation running.",n.label);this._notificationService.warn(r)}}else t.flushAllElements()};t.prototype._findClosestRedoElementInGroup=function(t){if(!t)return[null,null];var n=null,i=null;for(var r=0,e=this._editStacks;r<e.length;r++){var o=e[r],s=o[0],u=o[1];var a=u.getClosestFutureElement();a&&a.groupId===t&&(!n||a.groupOrder<n.groupOrder)&&(n=a,i=s)}return[n,i]};t.prototype._continueRedoInGroup=function(t){if(!t)return;var n=this._findClosestRedoElementInGroup(t),i=n[1];return i?this._redo(i):void 0};t.prototype.redo=function(t){if(t instanceof _M){var n=this._findClosestRedoElementWithSource(t.id),i=n[1];return i?this._redo(i):void 0}return typeof t=="string"?this._redo(t):this._redo(this.getUriComparisonKey(t))};t.prototype._redo=function(t){if(!this._editStacks.has(t))return;var n=this._editStacks.get(t),i=n.getClosestFutureElement();if(i){if(i.groupId){var r=this._findClosestRedoElementInGroup(i.groupId),e=r[0],o=r[1];if(i!==e&&o)return this._redo(o)}try{return i.type===1?this._workspaceRedo(t,i):this._resourceRedo(n,i)}finally{}}};return t}();pj=oj([sj(0,ej),sj(1,EL)],pj);var wj=function(){function t(t){this.returnValue=t}return t}();function mj(t,n,i){return Math.min(Math.max(t,n),i)}Xl(mM,pj,1);var bj=function(){function t(){this._n=1,this._val=0}t.prototype.update=function(t){return this._val=this._val+(t-this._val)/this._n,this._n+=1,this._val};Object.defineProperty(t.prototype,"value",{get:function(){return this._val},enumerable:false,configurable:true});return t}();var yj=function(){function t(t){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(t),this._values.fill(0,0,t)}t.prototype.update=function(t){var n=this._values[this._index];return this._values[this._index]=t,this._index=(this._index+1)%this._values.length,this._sum-=n,this._sum+=t,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val};Object.defineProperty(t.prototype,"value",{get:function(){return this._val},enumerable:false,configurable:true});return t}();var _j=Zh("environmentService");var kj=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},xj=function(t,n){return function(i,r){n(i,r,t)}};var Cj=Zh("ILanguageFeatureDebounceService");var Sj;(function(t){var n=new WeakMap;var i=0;t.of=function(t){var r=n.get(t);return r===void 0&&(r=++i,n.set(t,r)),r}})(Sj||(Sj={}));var Dj=function(){function t(t){this._default=t}t.prototype.get=function(t){return this._default};t.prototype.update=function(t,n){return this._default};t.prototype.default=function(){return this._default};return t}();var Aj=function(){function t(t,n,i,r,e,o){this._logService=t,this._name=n,this._registry=i,this._default=r,this._min=e,this._max=o,this._cache=new ud(50,.7)}t.prototype._key=function(t){return t.id+this._registry.all(t).reduce((function(t,n){return Qu(Sj.of(n),t)}),0)};t.prototype.get=function(t){var n=this._key(t),i=this._cache.get(n);return i?mj(i.value,this._min,this._max):this.default()};t.prototype.update=function(t,n){var i=this._key(t);var r=this._cache.get(i);r||(r=new yj(6),this._cache.set(i,r));var e=mj(r.update(n),this._min,this._max);return Ku(t.uri,"output")||this._logService.trace("[DEBOUNCE: ".concat(this._name,"] for ").concat(t.uri.toString()," is ").concat(e,"ms")),e};t.prototype._overall=function(){var t=new bj;for(var n=0,i=this._cache;n<i.length;n++){var r=i[n],e=r[1];t.update(e.value)}return t.value};t.prototype.default=function(){return mj(0|this._overall()||this._default,this._min,this._max)};return t}();var Oj=function(){function t(t,n){this._logService=t,this._data=new Map,this._isDev=n.isExtensionDevelopment||!n.isBuilt}t.prototype.for=function(t,n,i){var r,e,o;var s=(r=i==null?void 0:i.min)!==null&&r!==void 0?r:50,u=(e=i==null?void 0:i.max)!==null&&e!==void 0?e:Math.pow(s,2),a=(o=i==null?void 0:i.key)!==null&&o!==void 0?o:void 0,h="".concat(Sj.of(t),",").concat(s).concat(a?","+a:"");var c=this._data.get(h);return c||(this._isDev?c=new Aj(this._logService,n,t,0|this._overallAverage()||1.5*s,s,u):(this._logService.debug("[DEBOUNCE: ".concat(n,"] is disabled in developed mode")),c=new Dj(1.5*s)),this._data.set(h,c)),c};t.prototype._overallAverage=function(){var t=new bj;for(var n=0,i=this._data.values();n<i.length;n++){var r=i[n];t.update(r.default())}return t.value};return t}();Oj=kj([xj(0,kf),xj(1,_j)],Oj),Xl(Cj,Oj,1);var Ej=function(){function t(t,n){this._startLineNumber=t,this._tokens=n,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}t.create=function(n,i){return new t(n,new Mj(i))};Object.defineProperty(t.prototype,"startLineNumber",{get:function(){return this._startLineNumber},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"endLineNumber",{get:function(){return this._endLineNumber},enumerable:false,configurable:true});t.prototype.toString=function(){return this._tokens.toString(this._startLineNumber)};t.prototype._updateEndLineNumber=function(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()};t.prototype.isEmpty=function(){return this._tokens.isEmpty()};t.prototype.getLineTokens=function(t){return this._startLineNumber<=t&&t<=this._endLineNumber?this._tokens.getLineTokens(t-this._startLineNumber):null};t.prototype.getRange=function(){var t=this._tokens.getRange();return t&&new Ir(this._startLineNumber+t.startLineNumber,t.startColumn,this._startLineNumber+t.endLineNumber,t.endColumn)};t.prototype.removeTokens=function(t){var n=t.startLineNumber-this._startLineNumber,i=t.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(n,t.startColumn-1,i,t.endColumn-1),this._updateEndLineNumber()};t.prototype.split=function(n){var i=n.startLineNumber-this._startLineNumber,r=n.endLineNumber-this._startLineNumber,e=this._tokens.split(i,n.startColumn-1,r,n.endColumn-1),o=e[0],s=e[1],u=e[2];return[new t(this._startLineNumber,o),new t(this._startLineNumber+u,s)]};t.prototype.applyEdit=function(t,n){var i=vA(n),r=i[0],e=i[1],o=i[2];this.acceptEdit(t,r,e,o,n.length>0?n.charCodeAt(0):0)};t.prototype.acceptEdit=function(t,n,i,r,e){this._acceptDeleteRange(t),this._acceptInsertText(new Tr(t.startLineNumber,t.startColumn),n,i,r,e),this._updateEndLineNumber()};t.prototype._acceptDeleteRange=function(t){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return;var n=t.startLineNumber-this._startLineNumber,i=t.endLineNumber-this._startLineNumber;if(i<0){var r=i-n;return void(this._startLineNumber-=r)}var e=this._tokens.getMaxDeltaLine();if(!(n>=e+1)){if(n<0&&i>=e+1)return this._startLineNumber=0,void this._tokens.clear();if(n<0){var r=-n;this._startLineNumber-=r,this._tokens.acceptDeleteRange(t.startColumn-1,0,0,i,t.endColumn-1)}else this._tokens.acceptDeleteRange(0,n,t.startColumn-1,i,t.endColumn-1)}};t.prototype._acceptInsertText=function(t,n,i,r,e){if(n===0&&i===0)return;var o=t.lineNumber-this._startLineNumber;if(o<0)return void(this._startLineNumber+=n);o>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(o,t.column-1,n,i,r,e)};return t}();var Mj=function(){function t(t){this._tokens=t,this._tokenCount=t.length/4}t.prototype.toString=function(t){var n=[];for(var i=0;i<this._tokenCount;i++)n.push("(".concat(this._getDeltaLine(i)+t,",").concat(this._getStartCharacter(i),"-").concat(this._getEndCharacter(i),")"));return"[".concat(n.join(","),"]")};t.prototype.getMaxDeltaLine=function(){var t=this._getTokenCount();return t===0?-1:this._getDeltaLine(t-1)};t.prototype.getRange=function(){var t=this._getTokenCount();if(t===0)return null;var n=this._getStartCharacter(0),i=this._getDeltaLine(t-1),r=this._getEndCharacter(t-1);return new Ir(0,n+1,i,r+1)};t.prototype._getTokenCount=function(){return this._tokenCount};t.prototype._getDeltaLine=function(t){return this._tokens[4*t]};t.prototype._getStartCharacter=function(t){return this._tokens[4*t+1]};t.prototype._getEndCharacter=function(t){return this._tokens[4*t+2]};t.prototype.isEmpty=function(){return this._getTokenCount()===0};t.prototype.getLineTokens=function(t){var n=0,i=this._getTokenCount()-1;for(;n<i;){var r=n+Math.floor((i-n)/2),e=this._getDeltaLine(r);if(e<t)n=r+1;else{if(!(e>t)){var o=r;for(;o>n&&this._getDeltaLine(o-1)===t;)o--;var s=r;for(;s<i&&this._getDeltaLine(s+1)===t;)s++;return new Fj(this._tokens.subarray(4*o,4*s+4))}i=r-1}}return this._getDeltaLine(n)===t?new Fj(this._tokens.subarray(4*n,4*n+4)):null};t.prototype.clear=function(){this._tokenCount=0};t.prototype.removeTokens=function(t,n,i,r){var e=this._tokens,o=this._tokenCount;var s=0,u=!1,a=0;for(var h=0;h<o;h++){var c=4*h,f=e[c],l=e[c+1],v=e[c+2],d=e[c+3];if((f>t||f===t&&v>=n)&&(f<i||f===i&&l<=r))u=!0;else{if(s===0&&(a=f),u){var g=4*s;e[g]=f-a,e[g+1]=l,e[g+2]=v,e[g+3]=d}s++}}return this._tokenCount=s,a};t.prototype.split=function(n,i,r,e){var o=this._tokens,s=this._tokenCount,u=[],a=[];var h=u,c=0,f=0;for(var l=0;l<s;l++){var v=4*l,d=o[v],g=o[v+1],p=o[v+2],w=o[v+3];if(d>n||d===n&&p>=i){if(d<r||d===r&&g<=e)continue;h!==a&&(h=a,c=0,f=d)}h[c++]=d-f,h[c++]=g,h[c++]=p,h[c++]=w}return[new t(new Uint32Array(u)),new t(new Uint32Array(a)),f]};t.prototype.acceptDeleteRange=function(t,n,i,r,e){var o=this._tokens,s=this._tokenCount,u=r-n;var a=0,h=!1;for(var c=0;c<s;c++){var f=4*c;var l=o[f],v=o[f+1],d=o[f+2];var g=o[f+3];if(l<n||l===n&&d<=i){a++;continue}if(l===n&&v<i)l===r&&d>e?d-=e-i:d=i;else if(l===n&&v===i){if(!(l===r&&d>e)){h=!0;continue}d-=e-i}else if(l<r||l===r&&v<e){if(!(l===r&&d>e)){h=!0;continue}l=n,v=i,d=v+(d-e)}else if(l>r){if(u===0&&!h){a=s;break}l-=u}else{if(!(l===r&&v>=e))throw new Error("Not possible!");t&&l===0&&(v+=t,d+=t),l-=u,v-=e-i,d-=e-i}var p=4*a;o[p]=l,o[p+1]=v,o[p+2]=d,o[p+3]=g,a++}this._tokenCount=a};t.prototype.acceptInsertText=function(t,n,i,r,e,o){var s=i===0&&r===1&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),u=this._tokens,a=this._tokenCount;for(var h=0;h<a;h++){var c=4*h;var f=u[c],l=u[c+1],v=u[c+2];if(!(f<t||f===t&&v<n)){if(f===t&&v===n){if(!s)continue;v+=1}else if(f===t&&l<n&&n<v)i===0?v+=r:v=n;else{if(f===t&&l===n&&s)continue;if(f===t)if(f+=i,i===0)l+=r,v+=r;else{var d=v-l;l=e+(l-n),v=l+d}else f+=i}u[c]=f,u[c+1]=l,u[c+2]=v}}};return t}();var Fj=function(){function t(t){this._tokens=t}t.prototype.getCount=function(){return this._tokens.length/4};t.prototype.getStartCharacter=function(t){return this._tokens[4*t+1]};t.prototype.getEndCharacter=function(t){return this._tokens[4*t+2]};t.prototype.getMetadata=function(t){return this._tokens[4*t+3]};return t}();var Lj=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},jj=function(t,n){return function(i,r){n(i,r,t)}};var Rj=function(){function t(t,n,i,r){this._legend=t,this._themeService=n,this._languageService=i,this._logService=r,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new Bj}t.prototype.getMetadata=function(t,n,i){var r=this._languageService.languageIdCodec.encodeLanguageId(i),e=this._hashTable.get(t,n,r);var o;if(e)o=e.metadata,this._logService.getLevel()===xf.Trace&&this._logService.trace("SemanticTokensProviderStyling [CACHED] ".concat(t," / ").concat(n,": foreground ").concat(wp.getForeground(o),", fontStyle ").concat(wp.getFontStyle(o).toString(2)));else{var s=this._legend.tokenTypes[t];var u=[];if(s){var a=n;for(var h=0;a>0&&h<this._legend.tokenModifiers.length;h++)1&a&&u.push(this._legend.tokenModifiers[h]),a>>=1;a>0&&this._logService.getLevel()===xf.Trace&&(this._logService.trace("SemanticTokensProviderStyling: unknown token modifier index: ".concat(n.toString(2)," for legend: ").concat(JSON.stringify(this._legend.tokenModifiers))),u.push("not-in-legend"));var c=this._themeService.getColorTheme().getTokenStyleMetadata(s,u,i);c===void 0?o=2147483647:(o=0,c.italic!==void 0&&(o|=1|(c.italic?1:0)<<11),c.bold!==void 0&&(o|=2|(c.bold?2:0)<<11),c.underline!==void 0&&(o|=4|(c.underline?4:0)<<11),c.strikethrough!==void 0&&(o|=8|(c.strikethrough?8:0)<<11),c.foreground&&(o|=16|c.foreground<<15),o===0&&(o=2147483647))}else this._logService.getLevel()===xf.Trace&&this._logService.trace("SemanticTokensProviderStyling: unknown token type index: ".concat(t," for legend: ").concat(JSON.stringify(this._legend.tokenTypes))),o=2147483647,s="not-in-legend";this._hashTable.add(t,n,r,o),this._logService.getLevel()===xf.Trace&&this._logService.trace("SemanticTokensProviderStyling ".concat(t," (").concat(s,") / ").concat(n," (").concat(u.join(" "),"): foreground ").concat(wp.getForeground(o),", fontStyle ").concat(wp.getFontStyle(o).toString(2)))}return o};t.prototype.warnOverlappingSemanticTokens=function(t,n){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn("Overlapping semantic tokens detected at lineNumber ".concat(t,", column ").concat(n)))};t.prototype.warnInvalidLengthSemanticTokens=function(t,n){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn("Semantic token with invalid length detected at lineNumber ".concat(t,", column ").concat(n)))};t.prototype.warnInvalidEditStart=function(t,n,i,r,e){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn("Invalid semantic tokens edit detected (previousResultId: ".concat(t,", resultId: ").concat(n,") at edit #").concat(i,": The provided start offset ").concat(r," is outside the previous data (length ").concat(e,").")))};return t}();function Tj(t,n,i){var r=t.data,e=t.data.length/5|0,o=Math.max(Math.ceil(e/1024),400),s=[];var u=0,a=1,h=0;for(;u<e;){var c=u;var f=Math.min(c+o,e);if(f<e){var l=f;for(;l-1>c&&r[5*l]===0;)l--;if(l-1===c){var v=f;for(;v+1<e&&r[5*v]===0;)v++;f=v}else f=l}var d=new Uint32Array(4*(f-c)),g=0,p=0,w=0,m=0;for(;u<f;){var l=5*u,v=r[l],b=r[l+1],y=a+v|0,_=v===0?h+b|0:b,k=_+r[l+2]|0,x=r[l+3],C=r[l+4];if(k<=_)n.warnInvalidLengthSemanticTokens(y,_+1);else if(w===y&&m>_)n.warnOverlappingSemanticTokens(y,_+1);else{var S=n.getMetadata(x,C,i);S!==2147483647&&(p===0&&(p=y),d[g]=y-p,d[g+1]=_,d[g+2]=k,d[g+3]=S,g+=4,w=y,m=k)}a=y,h=_,u++}g!==d.length&&(d=d.subarray(0,g));var D=Ej.create(p,d);s.push(D)}return s}Rj=Lj([jj(1,zk),jj(2,Zl),jj(3,kf)],Rj);var Ij=function(){function t(t,n,i,r){this.tokenTypeIndex=t,this.tokenModifierSet=n,this.languageId=i,this.metadata=r,this.next=null}return t}();var Bj=function(){function t(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=t._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<t._SIZES.length?2/3*this._currentLength:0),this._elements=[],t._nullOutEntries(this._elements,this._currentLength)}t._nullOutEntries=function(t,n){for(var i=0;i<n;i++)t[i]=null};t.prototype._hash2=function(t,n){return(t<<5)-t+n|0};t.prototype._hashFunc=function(t,n,i){return this._hash2(this._hash2(t,n),i)%this._currentLength};t.prototype.get=function(t,n,i){var r=this._hashFunc(t,n,i);var e=this._elements[r];for(;e;){if(e.tokenTypeIndex===t&&e.tokenModifierSet===n&&e.languageId===i)return e;e=e.next}return null};t.prototype.add=function(n,i,r,e){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){var o=this._elements;this._currentLengthIndex++,this._currentLength=t._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<t._SIZES.length?2/3*this._currentLength:0),this._elements=[],t._nullOutEntries(this._elements,this._currentLength);for(var s=0,u=o;s<u.length;s++){var a=u[s];var h=a;for(;h;){var c=h.next;h.next=null,this._add(h),h=c}}}this._add(new Ij(n,i,r,e))};t.prototype._add=function(t){var n=this._hashFunc(t.tokenTypeIndex,t.tokenModifierSet,t.languageId);t.next=this._elements[n],this._elements[n]=t};return t}();Bj._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];var Nj=Zh("semanticTokensStylingService");var Pj=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Wj=function(t,n){return function(i,r){n(i,r,t)}};var Hj=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._themeService=n,e._logService=i,e._languageService=r,e._caches=new WeakMap,e._register(e._themeService.onDidColorThemeChange((function(){e._caches=new WeakMap})));return e}n.prototype.getStyling=function(t){return this._caches.has(t)||this._caches.set(t,new Rj(t.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(t)};return n}(ci);Hj=Pj([Wj(0,zk),Wj(1,kf),Wj(2,Zl)],Hj),Xl(Nj,Hj,1);var zj="**",Uj="/",Kj="[/\\\\]",Vj="[^/\\\\]",qj=/\//g;function Gj(t,n){switch(t){case 0:return"";case 1:return"".concat(Vj,"*?");default:return"(?:".concat(Kj,"|").concat(Vj,"+").concat(Kj).concat(n?"|".concat(Kj).concat(Vj,"+"):"",")*?")}}function $j(t,n){if(!t)return[];var i=[];var r=!1,e=!1,o="";for(var s=0,u=t;s<u.length;s++){var a=u[s];switch(a){case n:if(!r&&!e){i.push(o),o="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":e=!0;break;case"]":e=!1}o+=a}return o&&i.push(o),i}function Jj(t){if(!t)return"";var n="";var i=$j(t,Uj);if(i.every((function(t){return t===zj})))n=".*";else{var r=!1;i.forEach((function(t,e){if(t===zj){if(r)return;n+=Gj(2,e===i.length-1)}else{var o=!1,s="",u=!1,a="";for(var h=0,c=t;h<c.length;h++){var f=c[h];if(f!=="}"&&o)s+=f;else if(!u||f==="]"&&a)switch(f){case"{":o=!0;continue;case"[":u=!0;continue;case"}":{var l="(?:".concat($j(s,",").map((function(t){return Jj(t)})).join("|"),")");n+=l,o=!1,s="";break}case"]":n+="["+a+"]",u=!1,a="";break;case"?":n+=Vj;continue;case"*":n+=Gj(1);continue;default:n+=uo(f)}else{var l=void 0;l=f==="-"?f:f!=="^"&&f!=="!"||a?f===Uj?"":uo(f):"^",a+=l}}e<i.length-1&&(i[e+1]!==zj||e+2<i.length)&&(n+=Kj)}r=t===zj}))}return n}var Zj=/^\*\*\/\*\.[\w\.-]+$/,Qj=/^\*\*\/([\w\.-]+)\/?$/,Yj=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,Xj=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,tR=/^\*\*((\/[\w\.-]+)+)\/?$/,nR=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,iR=new ud(1e4),rR=function(){return!1},eR=function(){return null};function oR(t,n){if(!t)return eR;var i;i=typeof t!="string"?t.pattern:t,i=i.trim();var r="".concat(i,"_").concat(!!n.trimForExclusions);var e,o=iR.get(r);return o||(o=Zj.test(i)?function(t,n){return function(i,r){return typeof i=="string"&&i.endsWith(t)?n:null}}(i.substr(4),i):(e=Qj.exec(uR(i,n)))?function(t,n){var i="/".concat(t),r="\\".concat(t),e=function(e,o){return typeof e!="string"?null:o?o===t?n:null:e===t||e.endsWith(i)||e.endsWith(r)?n:null},o=[t];return e.basenames=o,e.patterns=[n],e.allBasenames=o,e}(e[1],i):(n.trimForExclusions?Xj:Yj).test(i)?function(t,n){var i=cR(t.slice(1,-1).split(",").map((function(t){return oR(t,n)})).filter((function(t){return t!==eR})),t),r=i.length;if(!r)return eR;if(r===1)return i[0];var e=function(n,r){for(var e=0,o=i.length;e<o;e++)if(i[e](n,r))return t;return null},o=i.find((function(t){return!!t.allBasenames}));o&&(e.allBasenames=o.allBasenames);var s=i.reduce((function(t,n){return n.allPaths?t.concat(n.allPaths):t}),[]);return s.length&&(e.allPaths=s),e}(i,n):(e=tR.exec(uR(i,n)))?aR(e[1].substr(1),i,!0):(e=nR.exec(uR(i,n)))?aR(e[1],i,!1):function(t){try{var n=new RegExp("^".concat(Jj(t),"$"));return function(i){return n.lastIndex=0,typeof i=="string"&&n.test(i)?t:null}}catch(t){return eR}}(i),iR.set(r,o)),sR(o,t)}function sR(t,n){if(typeof n=="string")return t;var i=function(i,r){return LO(i,n.base,!Lt)?t(ho(i.substr(n.base.length),wr),r):null};return i.allBasenames=t.allBasenames,i.allPaths=t.allPaths,i.basenames=t.basenames,i.patterns=t.patterns,i}function uR(t,n){return n.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}function aR(t,n,i){var r=wr===cr.sep,e=r?t:t.replace(qj,wr),o=wr+e,s=cr.sep+t;var u;return u=i?function(i,u){return typeof i!="string"||i!==e&&!i.endsWith(o)&&(r||i!==t&&!i.endsWith(s))?null:n}:function(i,o){return typeof i!="string"||i!==e&&(r||i!==t)?null:n},u.allPaths=[(i?"*/":"./")+t],u}function hR(t,n){if(n===void 0){n={}}if(!t)return rR;if(typeof t=="string"||function(t){var n=t;return n?typeof n.base=="string"&&typeof n.pattern=="string":!1}(t)){var i=oR(t,n);if(i===eR)return rR;var r=function(t,n){return!!i(t,n)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return function(t,n){var i=cR(Object.getOwnPropertyNames(t).map((function(i){return function(t,n,i){if(n===!1)return eR;var r=oR(t,i);if(r===eR)return eR;if(typeof n=="boolean")return r;if(n){var e=n.when;if(typeof e=="string"){var o=function(n,i,o,s){if(!s||!r(n,i))return null;var u=s(e.replace("$(basename)",(function(){return o})));return Cs(u)?u.then((function(n){return n?t:null})):u?t:null};return o.requiresSiblings=!0,o}}return r}(i,t[i],n)})).filter((function(t){return t!==eR}))),r=i.length;if(!r)return eR;if(!i.some((function(t){return!!t.requiresSiblings}))){if(r===1)return i[0];var e=function(t,n){var r=this;var e;for(var o=0,s=i.length;o<s;o++){var u=i[o](t,n);if(typeof u=="string")return u;Cs(u)&&(e||(e=[]),e.push(u))}return e?function(){return __awaiter(r,void 0,void 0,(function(){var t,n,i,r;return __generator(this,(function(o){switch(o.label){case 0:t=0,n=e;o.label=1;case 1:if(!(t<n.length))return[3,4];i=n[t];return[4,i];case 2:r=o.sent();if(typeof r=="string")return[2,r];o.label=3;case 3:t++;return[3,1];case 4:return[2,null]}}))}))}():null},o=i.find((function(t){return!!t.allBasenames}));o&&(e.allBasenames=o.allBasenames);var s=i.reduce((function(t,n){return n.allPaths?t.concat(n.allPaths):t}),[]);return s.length&&(e.allPaths=s),e}var u=function(t,n,r){var e=this;var o,s;for(var u=0,a=i.length;u<a;u++){var h=i[u];h.requiresSiblings&&r&&(n||(n=gr(t)),o||(o=n.substr(0,n.length-pr(t).length)));var c=h(t,n,o,r);if(typeof c=="string")return c;Cs(c)&&(s||(s=[]),s.push(c))}return s?function(){return __awaiter(e,void 0,void 0,(function(){var t,n,i,r;return __generator(this,(function(e){switch(e.label){case 0:t=0,n=s;e.label=1;case 1:if(!(t<n.length))return[3,4];i=n[t];return[4,i];case 2:r=e.sent();if(typeof r=="string")return[2,r];e.label=3;case 3:t++;return[3,1];case 4:return[2,null]}}))}))}():null},a=i.find((function(t){return!!t.allBasenames}));a&&(u.allBasenames=a.allBasenames);var h=i.reduce((function(t,n){return n.allPaths?t.concat(n.allPaths):t}),[]);return h.length&&(u.allPaths=h),u}(t,n)}function cR(t,n){var i=t.filter((function(t){return!!t.basenames}));if(i.length<2)return t;var r=i.reduce((function(t,n){var i=n.basenames;return i?t.concat(i):t}),[]);var e;if(n){e=[];for(var o=0,s=r.length;o<s;o++)e.push(n)}else e=i.reduce((function(t,n){var i=n.patterns;return i?t.concat(i):t}),[]);var u=function(t,n){if(typeof t!="string")return null;if(!n){var i=void 0;for(i=t.length;i>0;i--){var o=t.charCodeAt(i-1);if(o===47||o===92)break}n=t.substr(i)}var s=r.indexOf(n);return s!==-1?e[s]:null};u.basenames=r,u.patterns=e,u.allBasenames=r;var a=t.filter((function(t){return!t.basenames}));return a.push(u),a}function fR(t,n,i,r,e,o){if(Array.isArray(t)){var s=0;for(var u=0,a=t;u<a.length;u++){var h=a[u];var c=fR(h,n,i,r,e,o);if(c===10)return c;c>s&&(s=c)}return s}if(typeof t=="string")return r?t==="*"?5:t===i?10:0:0;if(t){var s=t.language,h=t.pattern,c=t.scheme,f=t.hasAccessToAllModels,l=t.notebookType;if(!r&&!f)return 0;l&&e&&(n=e);var v=0;if(c)if(c===n.scheme)v=10;else{if(c!=="*")return 0;v=5}if(s)if(s===i)v=10;else{if(s!=="*")return 0;v=Math.max(v,5)}if(l)if(l===o)v=10;else{if(l!=="*"||o===void 0)return 0;v=Math.max(v,5)}if(h){var d=void 0;if(d=typeof h=="string"?h:__assign(__assign({},h),{base:fr(h.base)}),d!==n.fsPath&&(g=d,p=n.fsPath,!g||typeof p!="string"||!hR(g)(p,void 0,w)))return 0;v=10}return v}return 0;var g,p,w}function lR(t){return typeof t!="string"&&(Array.isArray(t)?t.every(lR):!!t.exclusive)}var vR=function(){function t(t,n,i,r){this.uri=t,this.languageId=n,this.notebookUri=i,this.notebookType=r}t.prototype.equals=function(t){var n,i;return this.notebookType===t.notebookType&&this.languageId===t.languageId&&this.uri.toString()===t.uri.toString()&&((n=this.notebookUri)===null||n===void 0?void 0:n.toString())===((i=t.notebookUri)===null||i===void 0?void 0:i.toString())};return t}();var dR=function(){function t(t){this._notebookInfoResolver=t,this._clock=0,this._entries=[],this._onDidChange=new ki,this.onDidChange=this._onDidChange.event}t.prototype.register=function(t,n){var i=this;var r={selector:t,provider:n,_score:-1,_time:this._clock++};return this._entries.push(r),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),ai((function(){if(r){var t=i._entries.indexOf(r);t>=0&&(i._entries.splice(t,1),i._lastCandidate=void 0,i._onDidChange.fire(i._entries.length),r=void 0)}}))};t.prototype.has=function(t){return this.all(t).length>0};t.prototype.all=function(t){if(!t)return[];this._updateScores(t);var n=[];for(var i=0,r=this._entries;i<r.length;i++){var e=r[i];e._score>0&&n.push(e.provider)}return n};t.prototype.ordered=function(t){var n=[];return this._orderedForEach(t,(function(t){return n.push(t.provider)})),n};t.prototype.orderedGroups=function(t){var n=[];var i,r;return this._orderedForEach(t,(function(t){i&&r===t._score?i.push(t.provider):(r=t._score,i=[t.provider],n.push(i))})),n};t.prototype._orderedForEach=function(t,n){this._updateScores(t);for(var i=0,r=this._entries;i<r.length;i++){var e=r[i];e._score>0&&n(e)}};t.prototype._updateScores=function(n){var i,r;var e=(i=this._notebookInfoResolver)===null||i===void 0?void 0:i.call(this,n.uri),o=e?new vR(n.uri,n.getLanguageId(),e.uri,e.type):new vR(n.uri,n.getLanguageId(),void 0,void 0);if(!(!((r=this._lastCandidate)===null||r===void 0)&&r.equals(o))){this._lastCandidate=o;for(var s=0,u=this._entries;s<u.length;s++){var a=u[s];if(a._score=fR(a.selector,o.uri,o.languageId,_d(n),o.notebookUri,o.notebookType),lR(a.selector)&&a._score>0){for(var h=0,c=this._entries;h<c.length;h++){var f=c[h];f._score=0}a._score=1e3;break}}this._entries.sort(t._compareByScoreAndTime)}};t._compareByScoreAndTime=function(t,n){return t._score<n._score?1:t._score>n._score?-1:gR(t.selector)&&!gR(n.selector)?1:!gR(t.selector)&&gR(n.selector)?-1:t._time<n._time?1:t._time>n._time?-1:0};return t}();function gR(t){return typeof t!="string"&&(Array.isArray(t)?t.some(gR):!!t.isBuiltin)}Xl(tp,function(){function t(){this.referenceProvider=new dR(this._score.bind(this)),this.renameProvider=new dR(this._score.bind(this)),this.newSymbolNamesProvider=new dR(this._score.bind(this)),this.codeActionProvider=new dR(this._score.bind(this)),this.definitionProvider=new dR(this._score.bind(this)),this.typeDefinitionProvider=new dR(this._score.bind(this)),this.declarationProvider=new dR(this._score.bind(this)),this.implementationProvider=new dR(this._score.bind(this)),this.documentSymbolProvider=new dR(this._score.bind(this)),this.inlayHintsProvider=new dR(this._score.bind(this)),this.colorProvider=new dR(this._score.bind(this)),this.codeLensProvider=new dR(this._score.bind(this)),this.documentFormattingEditProvider=new dR(this._score.bind(this)),this.documentRangeFormattingEditProvider=new dR(this._score.bind(this)),this.onTypeFormattingEditProvider=new dR(this._score.bind(this)),this.signatureHelpProvider=new dR(this._score.bind(this)),this.hoverProvider=new dR(this._score.bind(this)),this.documentHighlightProvider=new dR(this._score.bind(this)),this.multiDocumentHighlightProvider=new dR(this._score.bind(this)),this.selectionRangeProvider=new dR(this._score.bind(this)),this.foldingRangeProvider=new dR(this._score.bind(this)),this.linkProvider=new dR(this._score.bind(this)),this.inlineCompletionsProvider=new dR(this._score.bind(this)),this.inlineEditProvider=new dR(this._score.bind(this)),this.completionProvider=new dR(this._score.bind(this)),this.linkedEditingRangeProvider=new dR(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new dR(this._score.bind(this)),this.documentSemanticTokensProvider=new dR(this._score.bind(this)),this.documentOnDropEditProvider=new dR(this._score.bind(this)),this.documentPasteEditProvider=new dR(this._score.bind(this))}t.prototype._score=function(t){var n;return(n=this._notebookTypeResolver)===null||n===void 0?void 0:n.call(this,t)};return t}(),1);var pR=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},wR=function(t,n){return function(i,r){n(i,r,t)}};var mR=Zh("hoverService");var bR=function(t){__extends(n,t);function n(n,i,r,e,o){if(r===void 0){r={}}var s=this;s=t.call(this)||this,s.placement=n,s.instantHover=i,s.overrideOptions=r,s.configurationService=e,s.hoverService=o,s.lastHoverHideTime=0,s.timeLimit=200,s.hoverDisposables=s._register(new hi),s._delay=s.configurationService.getValue("workbench.hover.delay"),s._register(s.configurationService.onDidChangeConfiguration((function(t){t.affectsConfiguration("workbench.hover.delay")&&(s._delay=s.configurationService.getValue("workbench.hover.delay"))})));return s}Object.defineProperty(n.prototype,"delay",{get:function(){return this.isInstantlyHovering()?0:this._delay},enumerable:false,configurable:true});n.prototype.showHover=function(t,n){var i=this;var r=typeof this.overrideOptions=="function"?this.overrideOptions(t,n):this.overrideOptions;this.hoverDisposables.clear();var e=t.target instanceof HTMLElement?[t.target]:t.target.targetElements;for(var o=0,s=e;o<s.length;o++){var u=s[o];this.hoverDisposables.add(ya(u,"keydown",(function(t){t.equals(9)&&i.hoverService.hideHover()})))}var a=t.content instanceof HTMLElement?void 0:t.content.toString();return this.hoverService.showHover(__assign(__assign(__assign({},t),r),{persistence:__assign({hideOnKeyDown:!0},r.persistence),id:a,appearance:__assign(__assign(__assign({},t.appearance),{compact:!0,skipFadeInAnimation:this.isInstantlyHovering()}),r.appearance)}),n)};n.prototype.isInstantlyHovering=function(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit};n.prototype.onDidHideHover=function(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())};return n}(ci);bR=pR([wR(3,Kl),wR(4,mR)],bR);var yR=Zh("contextViewService"),_R=Zh("contextMenuService"),kR=bh;var xR=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n.containerDomNode=document.createElement("div"),n.containerDomNode.className="monaco-hover",n.containerDomNode.tabIndex=0,n.containerDomNode.setAttribute("role","tooltip"),n.contentsDomNode=document.createElement("div"),n.contentsDomNode.className="monaco-hover-content",n.scrollbar=n._register(new yk(n.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),n.containerDomNode.appendChild(n.scrollbar.getDomNode());return n}n.prototype.onContentsChanged=function(){this.scrollbar.scanDomNode()};return n}(ci);var CR=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.actionContainer=vh(n,kR("div.action-container")),e.actionContainer.setAttribute("tabindex","0"),e.action=vh(e.actionContainer,kR("a.action")),e.action.setAttribute("role","button"),i.iconClass&&vh(e.action,kR("span.icon.".concat(i.iconClass))),vh(e.action,kR("span")).textContent=r?"".concat(i.label," (").concat(r,")"):i.label,e._register(ma(e.actionContainer,ah.CLICK,(function(t){t.stopPropagation(),t.preventDefault(),i.run(e.actionContainer)}))),e._register(ma(e.actionContainer,ah.KEY_DOWN,(function(t){var n=new ws(t);(n.equals(3)||n.equals(10))&&(t.stopPropagation(),t.preventDefault(),i.run(e.actionContainer))}))),e.setEnabled(!0);return e}n.render=function(t,i,r){return new n(t,i,r)};n.prototype.setEnabled=function(t){t?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))};return n}(ci);function SR(t,n){return t&&n?ht(0,"Inspect this in the accessible view with {0}.",n):t?ht(0,"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}var DR=Zh("openerService");function AR(t,n){if(n===void 0){n={}}var i=OR(n);return MR(i,function(t,n){var i={type:1,children:[]};var r=0,e=i;var o=[],s=new ER(t);for(;!s.eos();){var u=s.next();var a=u==="\\"&&LR(s.peek(),n)!==0;if(a&&(u=s.next()),!a&&FR(u,n)&&u===s.peek()){s.advance(),e.type===2&&(e=o.pop());var h=LR(u,n);if(e.type===h||e.type===5&&h===6)e=o.pop();else{var c={type:h,children:[]};h===5&&(c.index=r,r++),e.children.push(c),o.push(e),e=c}}else if(u==="\n")e.type===2&&(e=o.pop()),e.children.push({type:8});else if(e.type!==2){var h={type:2,content:u};e.children.push(h),o.push(e),e=h}else e.content+=u}return e.type===2&&(e=o.pop()),i}(t,!!n.renderCodeSegments),n.actionHandler,n.renderCodeSegments),i}function OR(t){var n=t.inline?"span":"div",i=document.createElement(n);return t.className&&(i.className=t.className),i}var ER=function(){function t(t){this.source=t,this.index=0}t.prototype.eos=function(){return this.index>=this.source.length};t.prototype.next=function(){var t=this.peek();return this.advance(),t};t.prototype.peek=function(){return this.source[this.index]};t.prototype.advance=function(){this.index++};return t}();function MR(t,n,i,r){var e;if(n.type===2)e=document.createTextNode(n.content||"");else if(n.type===3)e=document.createElement("b");else if(n.type===4)e=document.createElement("i");else if(n.type===7&&r)e=document.createElement("code");else if(n.type===5&&i){var o=document.createElement("a");i.disposables.add(ya(o,"click",(function(t){i.callback(String(n.index),t)}))),e=o}else n.type===8?e=document.createElement("br"):n.type===1&&(e=t);e&&t!==e&&t.appendChild(e),e&&Array.isArray(n.children)&&n.children.forEach((function(t){MR(e,t,i,r)}))}function FR(t,n){return LR(t,n)!==0}function LR(t,n){switch(t){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return n?7:0;default:return 0}}var jR=new RegExp("(\\\\)?\\$\\((".concat(uc.iconNameExpression,"(?:").concat(uc.iconModifierExpression,")?)\\)"),"g");function RR(t){var n=new Array;var i,r=0,e=0;for(;(i=jR.exec(t))!==null;){e=i.index||0,r<e&&n.push(t.substring(r,e)),r=(i.index||0)+i[0].length;var o=i[1],s=i[2];n.push(o?"$(".concat(s,")"):TR({id:s}))}return r<t.length&&n.push(t.substring(r)),n}function TR(t){var n;var i=bh("span");return(n=i.classList).add.apply(n,uc.asClassNameArray(t)),i}function IR(t){var n=function(t){if(BR=0,PR(t,WR,4352),BR>0||(PR(t,HR,4449),BR>0)||(PR(t,zR,4520),BR>0)||(PR(t,UR,12593),BR))return NR.subarray(0,BR);if(t>=44032&&t<=55203){var n=t-44032,i=n%588,r=Math.floor(n/588),e=Math.floor(i/28),o=i%28-1;if(r<WR.length?PR(r,WR,0):4352+r-12593<UR.length&&PR(4352+r,UR,12593),e<HR.length?PR(e,HR,0):4449+e-12593<UR.length&&PR(4449+e-12593,UR,12593),o>=0&&(o<zR.length?PR(o,zR,0):4520+o-12593<UR.length&&PR(4520+o-12593,UR,12593)),BR>0)return NR.subarray(0,BR)}}(t);if(n&&n.length>0)return new Uint32Array(n)}var BR=0;var NR=new Uint32Array(10);function PR(t,n,i){t>=i&&t<i+n.length&&function(t){t!==0&&(NR[BR++]=255&t,t>>8&&(NR[BR++]=t>>8&255),t>>16&&(NR[BR++]=t>>16&255))}(n[t-i])}var WR=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),HR=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),zR=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),UR=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function KR(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return function(n,i){for(var r=0,e=t.length;r<e;r++){var o=t[r](n,i);if(o)return o}return null}}qR.bind(void 0,!1);var VR=qR.bind(void 0,!0);function qR(t,n,i){if(!i||i.length<n.length)return null;var r;return r=t?So(i,n):i.indexOf(n)===0,r?n.length>0?[{start:0,end:n.length}]:[]:null}function GR(t,n){var i=n.toLowerCase().indexOf(t.toLowerCase());return i===-1?null:[{start:i,end:i+t.length}]}function $R(t,n){return JR(t.toLowerCase(),n.toLowerCase(),0,0)}function JR(t,n,i,r){if(i===t.length)return[];if(r===n.length)return null;if(t[i]===n[r]){var e=null;return(e=JR(t,n,i+1,r+1))?sT({start:r,end:r+1},e):null}return JR(t,n,i,r+1)}function ZR(t){return 97<=t&&t<=122}function QR(t){return 65<=t&&t<=90}function YR(t){return 48<=t&&t<=57}function XR(t){return t===32||t===9||t===10||t===13}var tT=new Set;function nT(t){return XR(t)||tT.has(t)}function iT(t,n){return t===n||nT(t)&&nT(n)}"()[]{}<>`'\"-/;:,.?!".split("").forEach((function(t){return tT.add(t.charCodeAt(0))}));var rT=new Map;function eT(t){if(rT.has(t))return rT.get(t);var n;var i=IR(t);return i&&(n=i),rT.set(t,n),n}function oT(t){return ZR(t)||QR(t)||YR(t)}function sT(t,n){return n.length===0?n=[t]:t.end===n[0].start?n[0].start=t.start:n.unshift(t),n}function uT(t,n){for(var i=n;i<t.length;i++){var r=t.charCodeAt(i);if(QR(r)||YR(r)||i>0&&!oT(t.charCodeAt(i-1)))return i}return t.length}function aT(t,n,i,r){if(i===t.length)return[];if(r===n.length||t[i]!==n[r].toLowerCase())return null;{var e=null,o=r+1;for(e=aT(t,n,i+1,r+1);!e&&(o=uT(n,o))<n.length;)e=aT(t,n,i+1,o),o++;return e===null?null:sT({start:r,end:r+1},e)}}function hT(t,n){if(!n||(n=n.trim()).length===0||!function(t){var n=0,i=0,r=0,e=0;for(var o=0;o<t.length;o++)r=t.charCodeAt(o),QR(r)&&n++,ZR(r)&&i++,XR(r)&&e++;return n!==0&&i!==0||e!==0?n<=5:t.length<=30}(t))return null;n.length>60&&(n=n.substring(0,60));var i=function(t){var n=0,i=0,r=0,e=0,o=0;for(var s=0;s<t.length;s++)o=t.charCodeAt(s),QR(o)&&n++,ZR(o)&&i++,oT(o)&&r++,YR(o)&&e++;return{upperPercent:n/t.length,lowerPercent:i/t.length,alphaPercent:r/t.length,numericPercent:e/t.length}}(n);if(!function(t){var n=t.upperPercent,i=t.lowerPercent,r=t.alphaPercent,e=t.numericPercent;return i>.2&&n<.8&&r>.6&&e<.2}(i)){if(!function(t){var n=t.upperPercent,i=t.lowerPercent;return i===0&&n>.6}(i))return null;n=n.toLowerCase()}var r=null,e=0;for(t=t.toLowerCase();e<n.length&&(r=aT(t,n,0,e))===null;)e=uT(n,e+1);return r}function cT(t,n,i,r,e){var o=0;if(i===t.length)return[];if(r===n.length)return null;if(!iT(t.charCodeAt(i),n.charCodeAt(r))){var s=eT(t.charCodeAt(i));if(!s)return null;for(var u=0;u<s.length;u++)if(!iT(s[u],n.charCodeAt(r+u)))return null;o+=s.length-1}var a=null,h=r+o+1;if(a=cT(t,n,i+1,h,e),!e)for(;!a&&(h=fT(n,h))<n.length;)a=cT(t,n,i+1,h,e),h++;if(!a)return null;if(t.charCodeAt(i)!==n.charCodeAt(r)){var s=eT(t.charCodeAt(i));if(!s)return a;for(var u=0;u<s.length;u++)if(s[u]!==n.charCodeAt(r+u))return a}return sT({start:r,end:r+o+1},a)}function fT(t,n){for(var i=n;i<t.length;i++)if(nT(t.charCodeAt(i))||i>0&&nT(t.charCodeAt(i-1)))return i;return t.length}var lT=KR(VR,hT,GR),vT=KR(VR,hT,$R),dT=new ud(1e4);function gT(t,n,i){if(i===void 0){i=!1}if(typeof t!="string"||typeof n!="string")return null;var r=dT.get(t);r||(r=new RegExp(t.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*"),"i"),dT.set(t,r));var e=r.exec(n);return e?[{start:e.index,end:e.index+e[0].length}]:i?vT(t,n):lT(t,n)}function pT(t,n){var i=LT(t,t.toLowerCase(),0,n,n.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?mT(i):null}function wT(t,n,i,r,e,o){var s=Math.min(13,t.length);for(;i<s;i++){var u=LT(t,n,i,r,e,o,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(u)return u}return[0,o]}function mT(t){if(t===void 0)return[];var n=[],i=t[1];for(var r=t.length-1;r>1;r--){var e=t[r]+i,o=n[n.length-1];o&&o.end===e?o.end=e+1:n.push({start:e,end:e+1})}return n}var bT=128;function yT(){var t=[],n=[];for(var i=0;i<=bT;i++)n[i]=0;for(var i=0;i<=bT;i++)t.push(n.slice(0));return t}function _T(t){var n=[];for(var i=0;i<=t;i++)n[i]=0;return n}var kT=_T(2*bT),xT=_T(2*bT),CT=yT(),ST=yT(),DT=yT();function AT(t,n){if(n<0||n>=t.length)return!1;var i=t.codePointAt(n);switch(i){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Uo(i)}}function OT(t,n){if(n<0||n>=t.length)return!1;switch(t.charCodeAt(n)){case 32:case 9:return!0;default:return!1}}function ET(t,n,i){return n[t]!==i[t]}var MT;(function(t){t.Default=[-100,0],t.isDefault=function(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}})(MT||(MT={}));var FT=function(){function t(t,n){this.firstMatchCanBeWeak=t,this.boostFullMatch=n}return t}();function LT(t,n,i,r,e,o,s){if(s===void 0){s=FT.default}var u=t.length>bT?bT:t.length,a=r.length>bT?bT:r.length;if(i>=u||o>=a||u-i>a-o||!function(t,n,i,r,e,o,s){if(s===void 0){s=!1}for(;n<i&&e<o;)t[n]===r[e]&&(s&&(kT[n]=e),n+=1),e+=1;return n===i}(n,i,u,e,o,a,!0))return;(function(t,n,i,r,e,o){var s=t-1,u=n-1;for(;s>=i&&u>=r;)e[s]===o[u]&&(xT[s]=u,s--),u--})(u,a,i,o,n,e);var h=1,c=1,f=i,l=o;var v=[!1];for(h=1,f=i;f<u;h++,f++){var d=kT[f],g=xT[f],p=f+1<u?xT[f+1]:a;for(c=d-o+1,l=d;l<p;c++,l++){var w=Number.MIN_SAFE_INTEGER,m=!1;l<=g&&(w=jT(t,n,f,i,r,e,l,a,o,CT[h-1][c-1]===0,v));var b=0;w!==Number.MAX_SAFE_INTEGER&&(m=!0,b=w+ST[h-1][c-1]);var y=l>d,_=y?ST[h][c-1]+(CT[h][c-1]>0?-5:0):0,k=l>d+1&&CT[h][c-1]>0,x=k?ST[h][c-2]+(CT[h][c-2]>0?-5:0):0;if(k&&(!y||x>=_)&&(!m||x>=b))ST[h][c]=x,DT[h][c]=3,CT[h][c]=0;else if(y&&(!m||_>=b))ST[h][c]=_,DT[h][c]=2,CT[h][c]=0;else{if(!m)throw new Error("not possible");ST[h][c]=b,DT[h][c]=1,CT[h][c]=CT[h-1][c-1]+1}}}if(!v[0]&&!s.firstMatchCanBeWeak)return;h--,c--;var C=[ST[h][c],o];var S=0,D=0;for(;h>=1;){var d=c;do{var g=DT[h][d];if(g===3)d-=2;else{if(g!==2)break;d-=1}}while(d>=1);S>1&&n[i+h-1]===e[o+c-1]&&!ET(d+o-1,r,e)&&S+1>CT[h][d]&&(d=c),d===c?S++:S=1,D||(D=d),h--,c=d-1,C.push(c)}a===u&&s.boostFullMatch&&(C[0]+=2);var A=D-u;return C[0]-=A,C}function jT(t,n,i,r,e,o,s,u,a,h,c){if(n[i]!==o[s])return Number.MIN_SAFE_INTEGER;var f=1,l=!1;return s===i-r?f=t[i]===e[s]?7:5:!ET(s,e,o)||s!==0&&ET(s-1,e,o)?!AT(o,s)||s!==0&&AT(o,s-1)?(AT(o,s-1)||OT(o,s-1))&&(f=5,l=!0):f=5:(f=t[i]===e[s]?7:5,l=!0),f>1&&i===r&&(c[0]=!0),l||(l=ET(s,e,o)||AT(o,s-1)||OT(o,s-1)),i===r?s>a&&(f-=l?3:5):f+=h?l?2:0:l?0:1,s+1===u&&(f-=l?3:5),f}function RT(t,n,i,r,e,o,s){return function(t,n,i,r,e,o,s,u){var a=LT(t,n,i,r,e,o,u);if(a&&!s)return a;if(t.length>=3){var h=Math.min(7,t.length-1);for(var c=i+1;c<h;c++){var f=TT(t,c);if(f){var l=LT(f,f.toLowerCase(),i,r,e,o,u);l&&(l[0]-=3,(!a||l[0]>a[0])&&(a=l))}}}return a}(t,n,i,r,e,o,!0,s)}function TT(t,n){if(n+1>=t.length)return;var i=t[n],r=t[n+1];return i!==r?t.slice(0,n)+r+i+t.slice(n+2):void 0}FT.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};var IT="$(",BT=new RegExp("\\$\\(".concat(uc.iconNameExpression,"(?:").concat(uc.iconModifierExpression,")?\\)"),"g"),NT=new RegExp("(\\\\)?".concat(BT.source),"g"),PT=new RegExp("\\\\".concat(BT.source),"g"),WT=new RegExp("(\\s)?(\\\\)?".concat(BT.source,"(\\s)?"),"g");function HT(t){return t.indexOf(IT)===-1?t:t.replace(WT,(function(t,n,i,r){return i?t:n||r||""}))}var zT=new RegExp("\\$\\(".concat(uc.iconNameCharacter,"+\\)"),"g");function UT(t){zT.lastIndex=0;var n="";var i=[];var r=0;for(;;){var e=zT.lastIndex,o=zT.exec(t),s=t.substring(e,o==null?void 0:o.index);if(s.length>0){n+=s;for(var u=0;u<s.length;u++)i.push(r)}if(!o)break;r+=o[0].length}return{text:n,iconOffsets:i}}function KT(t,n,i){if(i===void 0){i=!1}var r=n.text,e=n.iconOffsets;if(!e||e.length===0)return gT(t,r,i);var o=ho(r," "),s=r.length-o.length,u=gT(t,o,i);if(u)for(var a=0,h=u;a<h.length;a++){var c=h[a];var f=e[c.start+s]+s;c.start+=f,c.end+=f}return u}var VT=function(){function t(t,n){if(t===void 0){t=""}if(n===void 0){n=!1}var i,r,e;if(this.value=t,typeof this.value!="string")throw Xn("value");typeof n=="boolean"?(this.isTrusted=n,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=(i=n.isTrusted)!==null&&i!==void 0?i:void 0,this.supportThemeIcons=(r=n.supportThemeIcons)!==null&&r!==void 0&&r,this.supportHtml=(e=n.supportHtml)!==null&&e!==void 0&&e)}t.prototype.appendText=function(t,n){if(n===void 0){n=0}return this.value+=function(t){return t.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}(this.supportThemeIcons?function(t){return t.replace(NT,(function(t,n){return n?t:"\\".concat(t)}))}(t):t).replace(/([ \t]+)/g,(function(t,n){return"&nbsp;".repeat(n.length)})).replace(/\>/gm,"\\>").replace(/\n/g,n===1?"\\\n":"\n\n"),this};t.prototype.appendMarkdown=function(t){return this.value+=t,this};t.prototype.appendCodeblock=function(t,n){return this.value+="\n".concat(function(t,n){var i,r;var e=(r=(i=t.match(/^`+/gm))===null||i===void 0?void 0:i.reduce((function(t,n){return t.length>n.length?t:n})).length)!==null&&r!==void 0?r:0,o=e>=3?e+1:3;return["".concat("`".repeat(o)).concat(n),t,"".concat("`".repeat(o))].join("\n")}(n,t),"\n"),this};t.prototype.appendLink=function(t,n,i){return this.value+="[",this.value+=this._escape(n,"]"),this.value+="](",this.value+=this._escape(String(t),")"),i&&(this.value+=' "'.concat(this._escape(this._escape(i,'"'),")"),'"')),this.value+=")",this};t.prototype._escape=function(t,n){var i=new RegExp(uo(n),"g");return t.replace(i,(function(n,i){return t.charAt(i-1)!=="\\"?"\\".concat(n):n}))};return t}();function qT(t){return GT(t)?!t.value:!Array.isArray(t)||t.every(qT)}function GT(t){return t instanceof VT||!(!t||typeof t!="object")&&!(typeof t.value!="string"||typeof t.isTrusted!="boolean"&&typeof t.isTrusted!="object"&&t.isTrusted!==void 0||typeof t.supportThemeIcons!="boolean"&&t.supportThemeIcons!==void 0)}function $T(t){return t.replace(/"/g,"&quot;")}function JT(t){return t&&t.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}var ZT=function(){function t(t){this._prefix=t,this._lastId=0}t.prototype.nextId=function(){return this._prefix+ ++this._lastId};return t}();var QT=new ZT("id#");var YT={};(function(){function i(t,n){n(YT)}var r,e;i.amd=!0,r=this,e=function(t){function n(t,n,i){return i&&function(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,n){(n==null||n>t.length)&&(n=t.length);for(var i=0,r=new Array(n);i<n;i++)r[i]=t[i];return r}function r(t,n){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,n){if(t){if(typeof t=="string")return i(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,n):void 0}}(t))||n){r&&(t=r);var e=0;return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function e(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}t.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var o=/[&<>"']/,s=/[&<>"']/g,u=/[<>"']|&(?!#?\w+;)/,a=/[<>"']|&(?!#?\w+;)/g,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=function(t){return h[t]};function f(t,n){if(n){if(o.test(t))return t.replace(s,c)}else if(u.test(t))return t.replace(a,c);return t}var l=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function v(t){return t.replace(l,(function(t,n){return(n=n.toLowerCase())==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""}))}var d=/(^|[^\[])\^/g;function g(t,n){t=typeof t=="string"?t:t.source,n=n||"";var i={replace:function(n,r){return r=(r=r.source||r).replace(d,"$1"),t=t.replace(n,r),i},getRegex:function(){return new RegExp(t,n)}};return i}var p=/[^\w:]/g,w=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(t,n,i){if(t){var r;try{r=decodeURIComponent(v(i)).replace(p,"").toLowerCase()}catch(t){return null}if(r.indexOf("javascript:")===0||r.indexOf("vbscript:")===0||r.indexOf("data:")===0)return null}n&&!w.test(i)&&(i=function(t,n){b[" "+t]||(y.test(t)?b[" "+t]=t+"/":b[" "+t]=D(t,"/",!0));var i=(t=b[" "+t]).indexOf(":")===-1;return n.substring(0,2)==="//"?i?n:t.replace(_,"$1")+n:n.charAt(0)==="/"?i?n:t.replace(k,"$1")+n:t+n}(n,i));try{i=encodeURI(i).replace(/%25/g,"%")}catch(t){return null}return i}var b={},y=/^[^:]+:\/*[^/]*$/,_=/^([^:]+:)[\s\S]*$/,k=/^([^:]+:\/*[^/]*)[\s\S]*$/,x={exec:function(){}};function C(t){for(var n,i,r=1;r<arguments.length;r++)for(i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}function S(t,n){var i=t.replace(/\|/g,(function(t,n,i){for(var r=!1,e=n;--e>=0&&i[e]==="\\";)r=!r;return r?"|":" |"})).split(/ \|/),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>n)i.splice(n);else for(;i.length<n;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function D(t,n,i){var r=t.length;if(r===0)return"";for(var e=0;e<r;){var o=t.charAt(r-e-1);if(o!==n||i){if(o===n||!i)break;e++}else e++}return t.slice(0,r-e)}function A(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function O(t,n){if(n<1)return"";for(var i="";n>1;)1&n&&(i+=t),n>>=1,t+=t;return i+t}function E(t,n,i,r){var e=n.href,o=n.title?f(n.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;var u={type:"link",raw:i,href:e,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,u}return{type:"image",raw:i,href:e,title:o,text:f(s)}}var M=function(){function n(n){this.options=n||t.defaults}var i=n.prototype;return i.space=function(t){var n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}},i.code=function(t){var n=this.rules.block.code.exec(t);if(n){var i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:D(i,"\n")}}},i.fences=function(t){var n=this.rules.block.fences.exec(t);if(n){var i=n[0],r=function(t,n){var i=t.match(/^(\s+)(?:```)/);if(i===null)return n;var r=i[1];return n.split("\n").map((function(t){var n=t.match(/^\s+/);return n===null?t:n[0].length>=r.length?t.slice(r.length):t})).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim():n[2],text:r}}},i.heading=function(t){var n=this.rules.block.heading.exec(t);if(n){var i=n[2].trim();if(/#$/.test(i)){var r=D(i,"#");this.options.pedantic?i=r.trim():r&&!/ $/.test(r)||(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}},i.hr=function(t){var n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}},i.blockquote=function(t){var n=this.rules.block.blockquote.exec(t);if(n){var i=n[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:n[0],tokens:this.lexer.blockTokens(i,[]),text:i}}},i.list=function(t){var n=this.rules.block.list.exec(t);if(n){var i,e,o,s,u,a,h,c,f,l,v,d,g=n[1].trim(),p=g.length>1,w={type:"list",raw:"",ordered:p,start:p?+g.slice(0,-1):"",loose:!1,items:[]};g=p?"\\d{1,9}\\"+g.slice(-1):"\\"+g,this.options.pedantic&&(g=p?g:"[*+-]");for(var m=new RegExp("^( {0,3}"+g+")((?:[\t ][^\\n]*)?(?:\\n|$))");t&&(d=!1,n=m.exec(t))&&!this.rules.block.hr.test(t);){if(i=n[0],t=t.substring(i.length),c=n[2].split("\n",1)[0],f=t.split("\n",1)[0],this.options.pedantic?(s=2,v=c.trimLeft()):(s=(s=n[2].search(/[^ ]/))>4?1:s,v=c.slice(s),s+=n[1].length),a=!1,!c&&/^ *$/.test(f)&&(i+=f+"\n",t=t.substring(f.length+1),d=!0),!d)for(var b=new RegExp("^ {0,"+Math.min(3,s-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),y=new RegExp("^ {0,"+Math.min(3,s-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),_=new RegExp("^ {0,"+Math.min(3,s-1)+"}(?:```|~~~)"),k=new RegExp("^ {0,"+Math.min(3,s-1)+"}#");t&&(c=l=t.split("\n",1)[0],this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!_.test(c))&&!k.test(c)&&!b.test(c)&&!y.test(t);){if(c.search(/[^ ]/)>=s||!c.trim())v+="\n"+c.slice(s);else{if(a)break;v+="\n"+c}a||c.trim()||(a=!0),i+=l+"\n",t=t.substring(l.length+1)}w.loose||(h?w.loose=!0:/\n *\n *$/.test(i)&&(h=!0)),this.options.gfm&&(e=/^\[[ xX]\] /.exec(v))&&(o=e[0]!=="[ ] ",v=v.replace(/^\[[ xX]\] +/,"")),w.items.push({type:"list_item",raw:i,task:!!e,checked:o,loose:!1,text:v}),w.raw+=i}w.items[w.items.length-1].raw=i.trimRight(),w.items[w.items.length-1].text=v.trimRight(),w.raw=w.raw.trimRight();var x=w.items.length;for(u=0;u<x;u++){this.lexer.state.top=!1,w.items[u].tokens=this.lexer.blockTokens(w.items[u].text,[]);var C=w.items[u].tokens.filter((function(t){return t.type==="space"})),S=C.every((function(t){for(var n,i=0,e=r(t.raw.split(""));!(n=e()).done;)if(n.value==="\n"&&(i+=1),i>1)return!0;return!1}));!w.loose&&C.length&&S&&(w.loose=!0,w.items[u].loose=!0)}return w}},i.html=function(t){var n=this.rules.block.html.exec(t);if(n){var i={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){var r=this.options.sanitizer?this.options.sanitizer(n[0]):f(n[0]);i.type="paragraph",i.text=r,i.tokens=this.lexer.inline(r)}return i}},i.def=function(t){var n=this.rules.block.def.exec(t);if(n)return n[3]&&(n[3]=n[3].substring(1,n[3].length-1)),{type:"def",tag:n[1].toLowerCase().replace(/\s+/g," "),raw:n[0],href:n[2],title:n[3]}},i.table=function(t){var n=this.rules.block.table.exec(t);if(n){var i={type:"table",header:S(n[1]).map((function(t){return{text:t}})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(i.header.length===i.align.length){i.raw=n[0];var r,e,o,s,u=i.align.length;for(r=0;r<u;r++)/^ *-+: *$/.test(i.align[r])?i.align[r]="right":/^ *:-+: *$/.test(i.align[r])?i.align[r]="center":/^ *:-+ *$/.test(i.align[r])?i.align[r]="left":i.align[r]=null;for(u=i.rows.length,r=0;r<u;r++)i.rows[r]=S(i.rows[r],i.header.length).map((function(t){return{text:t}}));for(u=i.header.length,e=0;e<u;e++)i.header[e].tokens=this.lexer.inline(i.header[e].text);for(u=i.rows.length,e=0;e<u;e++)for(s=i.rows[e],o=0;o<s.length;o++)s[o].tokens=this.lexer.inline(s[o].text);return i}}},i.lheading=function(t){var n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}},i.paragraph=function(t){var n=this.rules.block.paragraph.exec(t);if(n){var i=n[1].charAt(n[1].length-1)==="\n"?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}},i.text=function(t){var n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}},i.escape=function(t){var n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:f(n[1])}},i.tag=function(t){var n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):f(n[0]):n[0]}},i.link=function(t){var n=this.rules.inline.link.exec(t);if(n){var i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;var r=D(i.slice(0,-1),"\\");if((i.length-r.length)%2==0)return}else{var e=function(t,n){if(t.indexOf(n[1])===-1)return-1;for(var i=t.length,r=0,e=0;e<i;e++)if(t[e]==="\\")e++;else if(t[e]===n[0])r++;else if(t[e]===n[1]&&--r<0)return e;return-1}(n[2],"()");if(e>-1){var o=(n[0].indexOf("!")===0?5:4)+n[1].length+e;n[2]=n[2].substring(0,e),n[0]=n[0].substring(0,o).trim(),n[3]=""}}var s=n[2],u="";if(this.options.pedantic){var a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);a&&(s=a[1],u=a[3])}else u=n[3]?n[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(i)?s.slice(1):s.slice(1,-1)),E(n,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:u&&u.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}},i.reflink=function(t,n){var i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){var r=(i[2]||i[1]).replace(/\s+/g," ");if(!(r=n[r.toLowerCase()])||!r.href){var e=i[0].charAt(0);return{type:"text",raw:e,text:e}}return E(i,r,i[0],this.lexer)}},i.emStrong=function(t,n,i){i===void 0&&(i="");var r=this.rules.inline.emStrong.lDelim.exec(t);if(r&&(!r[3]||!i.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var e=r[1]||r[2]||"";if(!e||e&&(i===""||this.rules.inline.punctuation.exec(i))){var o,s,u=r[0].length-1,a=u,h=0,c=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,n=n.slice(-1*t.length+u);(r=c.exec(n))!=null;)if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6])if(s=o.length,r[3]||r[4])a+=s;else if(!((r[5]||r[6])&&u%3)||(u+s)%3){if(!((a-=s)>0)){if(s=Math.min(s,s+a+h),Math.min(u,s)%2){var f=t.slice(1,u+r.index+s);return{type:"em",raw:t.slice(0,u+r.index+s+1),text:f,tokens:this.lexer.inlineTokens(f)}}var l=t.slice(2,u+r.index+s-1);return{type:"strong",raw:t.slice(0,u+r.index+s+1),text:l,tokens:this.lexer.inlineTokens(l)}}}else h+=s}}},i.codespan=function(t){var n=this.rules.inline.code.exec(t);if(n){var i=n[2].replace(/\n/g," "),r=/[^ ]/.test(i),e=/^ /.test(i)&&/ $/.test(i);return r&&e&&(i=i.substring(1,i.length-1)),i=f(i,!0),{type:"codespan",raw:n[0],text:i}}},i.br=function(t){var n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}},i.del=function(t){var n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}},i.autolink=function(t,n){var i,r,e=this.rules.inline.autolink.exec(t);if(e)return r=e[2]==="@"?"mailto:"+(i=f(this.options.mangle?n(e[1]):e[1])):i=f(e[1]),{type:"link",raw:e[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}},i.url=function(t,n){var i;if(i=this.rules.inline.url.exec(t)){var r,e;if(i[2]==="@")e="mailto:"+(r=f(this.options.mangle?n(i[0]):i[0]));else{var o;do{o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0]}while(o!==i[0]);r=f(i[0]),e=i[1]==="www."?"http://"+r:r}return{type:"link",raw:i[0],text:r,href:e,tokens:[{type:"text",raw:r,text:r}]}}},i.inlineText=function(t,n){var i,r=this.rules.inline.text.exec(t);if(r)return i=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):f(r[0]):r[0]:f(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:i}},n}(),F={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:x,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};F.def=g(F.def).replace("label",F._label).replace("title",F._title).getRegex(),F.bullet=/(?:[*+-]|\d{1,9}[.)])/,F.listItemStart=g(/^( *)(bull) */).replace("bull",F.bullet).getRegex(),F.list=g(F.list).replace(/bull/g,F.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+F.def.source+")").getRegex(),F._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",F._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,F.html=g(F.html,"i").replace("comment",F._comment).replace("tag",F._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),F.paragraph=g(F._paragraph).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F._tag).getRegex(),F.blockquote=g(F.blockquote).replace("paragraph",F.paragraph).getRegex(),F.normal=C({},F),F.gfm=C({},F.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),F.gfm.table=g(F.gfm.table).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F._tag).getRegex(),F.gfm.paragraph=g(F._paragraph).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",F.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F._tag).getRegex(),F.pedantic=C({},F.normal,{html:g("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",F._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:x,paragraph:g(F.normal._paragraph).replace("hr",F.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",F.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var L={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:x,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:x,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function j(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function R(t){var n,i,r="",e=t.length;for(n=0;n<e;n++)i=t.charCodeAt(n),Math.random()>.5&&(i="x"+i.toString(16)),r+="&#"+i+";";return r}L._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",L.punctuation=g(L.punctuation).replace(/punctuation/g,L._punctuation).getRegex(),L.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,L.escapedEmSt=/\\\*|\\_/g,L._comment=g(F._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),L.emStrong.lDelim=g(L.emStrong.lDelim).replace(/punct/g,L._punctuation).getRegex(),L.emStrong.rDelimAst=g(L.emStrong.rDelimAst,"g").replace(/punct/g,L._punctuation).getRegex(),L.emStrong.rDelimUnd=g(L.emStrong.rDelimUnd,"g").replace(/punct/g,L._punctuation).getRegex(),L._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,L._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,L._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,L.autolink=g(L.autolink).replace("scheme",L._scheme).replace("email",L._email).getRegex(),L._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,L.tag=g(L.tag).replace("comment",L._comment).replace("attribute",L._attribute).getRegex(),L._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,L._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,L._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,L.link=g(L.link).replace("label",L._label).replace("href",L._href).replace("title",L._title).getRegex(),L.reflink=g(L.reflink).replace("label",L._label).replace("ref",F._label).getRegex(),L.nolink=g(L.nolink).replace("ref",F._label).getRegex(),L.reflinkSearch=g(L.reflinkSearch,"g").replace("reflink",L.reflink).replace("nolink",L.nolink).getRegex(),L.normal=C({},L),L.pedantic=C({},L.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:g(/^!?\[(label)\]\((.*?)\)/).replace("label",L._label).getRegex(),reflink:g(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",L._label).getRegex()}),L.gfm=C({},L.normal,{escape:g(L.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),L.gfm.url=g(L.gfm.url,"i").replace("email",L.gfm._extended_email).getRegex(),L.breaks=C({},L.gfm,{br:g(L.br).replace("{2,}","*").getRegex(),text:g(L.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var T=function(){function i(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||t.defaults,this.options.tokenizer=this.options.tokenizer||new M,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var i={block:F.normal,inline:L.normal};this.options.pedantic?(i.block=F.pedantic,i.inline=L.pedantic):this.options.gfm&&(i.block=F.gfm,this.options.breaks?i.inline=L.breaks:i.inline=L.gfm),this.tokenizer.rules=i}i.lex=function(t,n){return new i(n).lex(t)},i.lexInline=function(t,n){return new i(n).inlineTokens(t)};var r=i.prototype;return r.lex=function(t){var n;for(t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens},r.blockTokens=function(t,n){var i,r,e,o,s=this;for(n===void 0&&(n=[]),t=this.options.pedantic?t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t.replace(/^( *)(\t+)/gm,(function(t,n,i){return n+"    ".repeat(i.length)}));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(r){return!!(i=r.call({lexer:s},t,n))&&(t=t.substring(i.raw.length),n.push(i),!0)})))){if(i=this.tokenizer.space(t))t=t.substring(i.raw.length),i.raw.length===1&&n.length>0?n[n.length-1].raw+="\n":n.push(i);else if(i=this.tokenizer.code(t))t=t.substring(i.raw.length),!(r=n[n.length-1])||r.type!=="paragraph"&&r.type!=="text"?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(i=this.tokenizer.fences(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.heading(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.hr(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.blockquote(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.list(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.html(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.def(t))t=t.substring(i.raw.length),!(r=n[n.length-1])||r.type!=="paragraph"&&r.type!=="text"?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(i=this.tokenizer.table(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.lheading(t))t=t.substring(i.raw.length),n.push(i);else if(e=t,this.options.extensions&&this.options.extensions.startBlock&&function(){var n=1/0,i=t.slice(1),r=void 0;s.options.extensions.startBlock.forEach((function(t){typeof(r=t.call({lexer:this},i))=="number"&&r>=0&&(n=Math.min(n,r))})),n<1/0&&n>=0&&(e=t.substring(0,n+1))}(),this.state.top&&(i=this.tokenizer.paragraph(e)))r=n[n.length-1],o&&r.type==="paragraph"?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),o=e.length!==t.length,t=t.substring(i.raw.length);else if(i=this.tokenizer.text(t))t=t.substring(i.raw.length),(r=n[n.length-1])&&r.type==="text"?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);else if(t){var u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return this.state.top=!0,n},r.inline=function(t,n){return n===void 0&&(n=[]),this.inlineQueue.push({src:t,tokens:n}),n},r.inlineTokens=function(t,n){var i,r,e,o=this;n===void 0&&(n=[]);var s,u,a,h=t;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(h))!=null;)c.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(h=h.slice(0,s.index)+"["+O("a",s[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(h))!=null;)h=h.slice(0,s.index)+"["+O("a",s[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.escapedEmSt.exec(h))!=null;)h=h.slice(0,s.index)+"++"+h.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(u||(a=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(r){return!!(i=r.call({lexer:o},t,n))&&(t=t.substring(i.raw.length),n.push(i),!0)}))))if(i=this.tokenizer.escape(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.tag(t))t=t.substring(i.raw.length),(r=n[n.length-1])&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);else if(i=this.tokenizer.link(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(i.raw.length),(r=n[n.length-1])&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);else if(i=this.tokenizer.emStrong(t,h,a))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.codespan(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.br(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.del(t))t=t.substring(i.raw.length),n.push(i);else if(i=this.tokenizer.autolink(t,R))t=t.substring(i.raw.length),n.push(i);else if(this.state.inLink||!(i=this.tokenizer.url(t,R))){if(e=t,this.options.extensions&&this.options.extensions.startInline&&function(){var n=1/0,i=t.slice(1),r=void 0;o.options.extensions.startInline.forEach((function(t){typeof(r=t.call({lexer:this},i))=="number"&&r>=0&&(n=Math.min(n,r))})),n<1/0&&n>=0&&(e=t.substring(0,n+1))}(),i=this.tokenizer.inlineText(e,j))t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(a=i.raw.slice(-1)),u=!0,(r=n[n.length-1])&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):n.push(i);else if(t){var f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}throw new Error(f)}}else t=t.substring(i.raw.length),n.push(i);return n},n(i,0,[{key:"rules",get:function(){return{block:F,inline:L}}}]),i}(),I=function(){function n(n){this.options=n||t.defaults}var i=n.prototype;return i.code=function(t,n,i){var r=(n||"").match(/\S*/)[0];if(this.options.highlight){var e=this.options.highlight(t,r);e!=null&&e!==t&&(i=!0,t=e)}return t=t.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+f(r,!0)+'">'+(i?t:f(t,!0))+"</code></pre>\n":"<pre><code>"+(i?t:f(t,!0))+"</code></pre>\n"},i.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},i.html=function(t){return t},i.heading=function(t,n,i,r){return this.options.headerIds?"<h"+n+' id="'+(this.options.headerPrefix+r.slug(i))+'">'+t+"</h"+n+">\n":"<h"+n+">"+t+"</h"+n+">\n"},i.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.list=function(t,n,i){var r=n?"ol":"ul";return"<"+r+(n&&i!==1?' start="'+i+'"':"")+">\n"+t+"</"+r+">\n"},i.listitem=function(t){return"<li>"+t+"</li>\n"},i.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},i.paragraph=function(t){return"<p>"+t+"</p>\n"},i.table=function(t,n){return n&&(n="<tbody>"+n+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+n+"</table>\n"},i.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},i.tablecell=function(t,n){var i=n.header?"th":"td";return(n.align?"<"+i+' align="'+n.align+'">':"<"+i+">")+t+"</"+i+">\n"},i.strong=function(t){return"<strong>"+t+"</strong>"},i.em=function(t){return"<em>"+t+"</em>"},i.codespan=function(t){return"<code>"+t+"</code>"},i.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.del=function(t){return"<del>"+t+"</del>"},i.link=function(t,n,i){if((t=m(this.options.sanitize,this.options.baseUrl,t))===null)return i;var r='<a href="'+f(t)+'"';return n&&(r+=' title="'+n+'"'),r+=">"+i+"</a>"},i.image=function(t,n,i){if((t=m(this.options.sanitize,this.options.baseUrl,t))===null)return i;var r='<img src="'+t+'" alt="'+i+'"';return n&&(r+=' title="'+n+'"'),r+=this.options.xhtml?"/>":">"},i.text=function(t){return t},n}(),B=function(){function t(){}var n=t.prototype;return n.strong=function(t){return t},n.em=function(t){return t},n.codespan=function(t){return t},n.del=function(t){return t},n.html=function(t){return t},n.text=function(t){return t},n.link=function(t,n,i){return""+i},n.image=function(t,n,i){return""+i},n.br=function(){return""},t}(),N=function(){function t(){this.seen={}}var n=t.prototype;return n.serialize=function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},n.getNextSafeSlug=function(t,n){var i=t,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[t];do{i=t+"-"+ ++r}while(this.seen.hasOwnProperty(i))}return n||(this.seen[t]=r,this.seen[i]=0),i},n.slug=function(t,n){n===void 0&&(n={});var i=this.serialize(t);return this.getNextSafeSlug(i,n.dryrun)},t}(),P=function(){function n(n){this.options=n||t.defaults,this.options.renderer=this.options.renderer||new I,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new B,this.slugger=new N}n.parse=function(t,i){return new n(i).parse(t)},n.parseInline=function(t,i){return new n(i).parseInline(t)};var i=n.prototype;return i.parse=function(t,n){n===void 0&&(n=!0);var i,r,e,o,s,u,a,h,c,f,l,d,g,p,w,m,b,y,_,k="",x=t.length;for(i=0;i<x;i++)if(f=t[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type])||(_=this.options.extensions.renderers[f.type].call({parser:this},f))===!1&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(f.type))switch(f.type){case"space":continue;case"hr":k+=this.renderer.hr();continue;case"heading":k+=this.renderer.heading(this.parseInline(f.tokens),f.depth,v(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue;case"code":k+=this.renderer.code(f.text,f.lang,f.escaped);continue;case"table":for(h="",a="",o=f.header.length,r=0;r<o;r++)a+=this.renderer.tablecell(this.parseInline(f.header[r].tokens),{header:!0,align:f.align[r]});for(h+=this.renderer.tablerow(a),c="",o=f.rows.length,r=0;r<o;r++){for(a="",s=(u=f.rows[r]).length,e=0;e<s;e++)a+=this.renderer.tablecell(this.parseInline(u[e].tokens),{header:!1,align:f.align[e]});c+=this.renderer.tablerow(a)}k+=this.renderer.table(h,c);continue;case"blockquote":c=this.parse(f.tokens),k+=this.renderer.blockquote(c);continue;case"list":for(l=f.ordered,d=f.start,g=f.loose,o=f.items.length,c="",r=0;r<o;r++)m=(w=f.items[r]).checked,b=w.task,p="",w.task&&(y=this.renderer.checkbox(m),g?w.tokens.length>0&&w.tokens[0].type==="paragraph"?(w.tokens[0].text=y+" "+w.tokens[0].text,w.tokens[0].tokens&&w.tokens[0].tokens.length>0&&w.tokens[0].tokens[0].type==="text"&&(w.tokens[0].tokens[0].text=y+" "+w.tokens[0].tokens[0].text)):w.tokens.unshift({type:"text",text:y}):p+=y),p+=this.parse(w.tokens,g),c+=this.renderer.listitem(p,b,m);k+=this.renderer.list(c,l,d);continue;case"html":k+=this.renderer.html(f.text);continue;case"paragraph":k+=this.renderer.paragraph(this.parseInline(f.tokens));continue;case"text":for(c=f.tokens?this.parseInline(f.tokens):f.text;i+1<x&&t[i+1].type==="text";)c+="\n"+((f=t[++i]).tokens?this.parseInline(f.tokens):f.text);k+=n?this.renderer.paragraph(c):c;continue;default:var C='Token with "'+f.type+'" type was not found.';if(this.options.silent)return void console.error(C);throw new Error(C)}else k+=_||"";return k},i.parseInline=function(t,n){n=n||this.renderer;var i,r,e,o="",s=t.length;for(i=0;i<s;i++)if(r=t[i],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type])||(e=this.options.extensions.renderers[r.type].call({parser:this},r))===!1&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))switch(r.type){case"escape":case"text":o+=n.text(r.text);break;case"html":o+=n.html(r.text);break;case"link":o+=n.link(r.href,r.title,this.parseInline(r.tokens,n));break;case"image":o+=n.image(r.href,r.title,r.text);break;case"strong":o+=n.strong(this.parseInline(r.tokens,n));break;case"em":o+=n.em(this.parseInline(r.tokens,n));break;case"codespan":o+=n.codespan(r.text);break;case"br":o+=n.br();break;case"del":o+=n.del(this.parseInline(r.tokens,n));break;default:var u='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(u);throw new Error(u)}else o+=e||"";return o},n}();function W(t,n,i){if(t==null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof n=="function"&&(i=n,n=null),A(n=C({},W.defaults,n||{})),i){var r,e=n.highlight;try{r=T.lex(t,n)}catch(t){return i(t)}var o=function(t){var o;if(!t)try{n.walkTokens&&W.walkTokens(r,n.walkTokens),o=P.parse(r,n)}catch(n){t=n}return n.highlight=e,t?i(t):i(null,o)};if(!e||e.length<3||(delete n.highlight,!r.length))return o();var s=0;return W.walkTokens(r,(function(t){t.type==="code"&&(s++,setTimeout((function(){e(t.text,t.lang,(function(n,i){if(n)return o(n);i!=null&&i!==t.text&&(t.text=i,t.escaped=!0),--s==0&&o()}))}),0))})),void(s===0&&o())}function u(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",n.silent)return"<p>An error occurred:</p><pre>"+f(t.message+"",!0)+"</pre>";throw t}try{var a=T.lex(t,n);if(n.walkTokens){if(n.async)return Promise.all(W.walkTokens(a,n.walkTokens)).then((function(){return P.parse(a,n)})).catch(u);W.walkTokens(a,n.walkTokens)}return P.parse(a,n)}catch(t){u(t)}}W.options=W.setOptions=function(n){var i;return C(W.defaults,n),i=W.defaults,t.defaults=i,W},W.getDefaults=e,W.defaults=t.defaults,W.use=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r,e=C.apply(void 0,[{}].concat(n)),o=W.defaults.extensions||{renderers:{},childTokens:{}};n.forEach((function(t){if(t.extensions&&(r=!0,t.extensions.forEach((function(t){if(!t.name)throw new Error("extension name required");if(t.renderer){var n=o.renderers?o.renderers[t.name]:null;o.renderers[t.name]=n?function(){for(var i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];var o=t.renderer.apply(this,r);return o===!1&&(o=n.apply(this,r)),o}:t.renderer}if(t.tokenizer){if(!t.level||t.level!=="block"&&t.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");o[t.level]?o[t.level].unshift(t.tokenizer):o[t.level]=[t.tokenizer],t.start&&(t.level==="block"?o.startBlock?o.startBlock.push(t.start):o.startBlock=[t.start]:t.level==="inline"&&(o.startInline?o.startInline.push(t.start):o.startInline=[t.start]))}t.childTokens&&(o.childTokens[t.name]=t.childTokens)}))),t.renderer&&function(){var n=W.defaults.renderer||new I,i=function(i){var r=n[i];n[i]=function(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];var u=t.renderer[i].apply(n,o);return u===!1&&(u=r.apply(n,o)),u}};for(var r in t.renderer)i(r);e.renderer=n}(),t.tokenizer&&function(){var n=W.defaults.tokenizer||new M,i=function(i){var r=n[i];n[i]=function(){for(var e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];var u=t.tokenizer[i].apply(n,o);return u===!1&&(u=r.apply(n,o)),u}};for(var r in t.tokenizer)i(r);e.tokenizer=n}(),t.walkTokens){var n=W.defaults.walkTokens;e.walkTokens=function(i){var r=[];return r.push(t.walkTokens.call(this,i)),n&&(r=r.concat(n.call(this,i))),r}}r&&(e.extensions=o),W.setOptions(e)}))},W.walkTokens=function(t,n){for(var i,e=[],o=function(){var t=i.value;switch(e=e.concat(n.call(W,t)),t.type){case"table":for(var o,s=r(t.header);!(o=s()).done;){var u=o.value;e=e.concat(W.walkTokens(u.tokens,n))}for(var a,h=r(t.rows);!(a=h()).done;)for(var c,f=r(a.value);!(c=f()).done;){var l=c.value;e=e.concat(W.walkTokens(l.tokens,n))}break;case"list":e=e.concat(W.walkTokens(t.items,n));break;default:W.defaults.extensions&&W.defaults.extensions.childTokens&&W.defaults.extensions.childTokens[t.type]?W.defaults.extensions.childTokens[t.type].forEach((function(i){e=e.concat(W.walkTokens(t[i],n))})):t.tokens&&(e=e.concat(W.walkTokens(t.tokens,n)))}},s=r(t);!(i=s()).done;)o();return e},W.parseInline=function(t,n){if(t==null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");A(n=C({},W.defaults,n||{}));try{var i=T.lexInline(t,n);return n.walkTokens&&W.walkTokens(i,n.walkTokens),P.parseInline(i,n)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",n.silent)return"<p>An error occurred:</p><pre>"+f(t.message+"",!0)+"</pre>";throw t}},W.Parser=P,W.parser=P.parse,W.Renderer=I,W.TextRenderer=B,W.Lexer=T,W.lexer=T.lex,W.Tokenizer=M,W.Slugger=N,W.parse=W;var H=W.options,z=W.setOptions,U=W.use,K=W.walkTokens,V=W.parseInline,q=W,G=P.parse,$=T.lex;t.Lexer=T,t.Parser=P,t.Renderer=I,t.Slugger=N,t.TextRenderer=B,t.Tokenizer=M,t.getDefaults=e,t.lexer=$,t.marked=W,t.options=H,t.parse=q,t.parseInline=V,t.parser=G,t.setOptions=z,t.use=U,t.walkTokens=K,Object.defineProperty(t,"__esModule",{value:!0})},i.amd?i(0,e):e(typeof t=="object"&&typeof n<"u"?t:(r=typeof globalThis<"u"?globalThis:r||self).marked={})})(),YT.Lexer||t.Lexer,YT.Parser||t.Parser,YT.Renderer||t.Renderer,YT.Slugger||t.Slugger,YT.TextRenderer||t.TextRenderer,YT.Tokenizer||t.Tokenizer,YT.getDefaults||t.getDefaults,YT.lexer||t.lexer;var XT=YT.marked||t.marked;function tI(t){var n=JSON.parse(t);return n=iI(n),n}function nI(t,n){return n instanceof RegExp?{$mid:2,source:n.source,flags:n.flags}:n}function iI(t,n){if(n===void 0){n=0}if(!t||n>200)return t;if(typeof t=="object"){switch(t.$mid){case 1:return Cr.revive(t);case 2:return new RegExp(t.source,t.flags);case 17:return new Date(t.source)}if(t instanceof yl||t instanceof Uint8Array)return t;if(Array.isArray(t))for(var i=0;i<t.length;++i)t[i]=iI(t[i],n+1);else for(var i in t)Object.hasOwnProperty.call(t,i)&&(t[i]=iI(t[i],n+1))}return t}YT.options||t.options,YT.parse||t.parse,YT.parseInline||t.parseInline,YT.parser||t.parser,YT.setOptions||t.setOptions,YT.use||t.use,YT.walkTokens||t.walkTokens;var rI=Object.freeze({image:function(t,n,i){var r;var e=[],o=[];return t&&(r=function(t){var n=[],i=t.split("|").map((function(t){return t.trim()}));t=i[0];var r=i[1];if(r){var e=/height=(\d+)/.exec(r),o=/width=(\d+)/.exec(r),s=e?e[1]:"",u=o?o[1]:"",a=isFinite(parseInt(u)),h=isFinite(parseInt(s));a&&n.push('width="'.concat(u,'"')),h&&n.push('height="'.concat(s,'"'))}return{href:t,dimensions:n}}(t),t=r.href,e=r.dimensions,o.push('src="'.concat($T(t),'"'))),i&&o.push('alt="'.concat($T(i),'"')),n&&o.push('title="'.concat($T(n),'"')),e.length&&(o=o.concat(e)),"<img "+o.join(" ")+">"},paragraph:function(t){return"<p>".concat(t,"</p>")},link:function(t,n,i){return typeof t!="string"?"":(t===i&&(i=JT(i)),n=typeof n=="string"?$T(JT(n)):"",'<a href="'.concat(t=(t=JT(t)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),'" title="').concat(n||t,'" draggable="false">').concat(i,"</a>"))}});function eI(t,n,i){if(n===void 0){n={}}if(i===void 0){i={}}var r,e;var o=new hi;var s=!1;var u=OR(n),a=function(n){var i;try{i=tI(decodeURIComponent(n))}catch(t){}return i?(i=it(i,(function(n){return t.uris&&t.uris[n]?Cr.revive(t.uris[n]):void 0})),encodeURIComponent(JSON.stringify(i))):n},h=function(n,i){var r=t.uris&&t.uris[n];var e=Cr.revive(r);return i?n.startsWith(Uu.data+":")?n:(e||(e=Cr.parse(n)),$u.uriToBrowserUri(e).toString(!0)):e?Cr.parse(n).toString()===e.toString()?n:(e.query&&(e=e.with({query:a(e.query)})),e.toString()):n},c=new XT.Renderer;c.image=rI.image,c.link=rI.link,c.paragraph=rI.paragraph;var f=[],l=[];if(n.codeBlockRendererSync?c.code=function(t,i){var r=QT.nextId(),e=n.codeBlockRendererSync(oI(i),t);return l.push([r,e]),'<div class="code" data-code="'.concat(r,'">').concat(so(t),"</div>")}:n.codeBlockRenderer&&(c.code=function(t,i){var r=QT.nextId(),e=n.codeBlockRenderer(oI(i),t);return f.push(e.then((function(t){return[r,t]}))),'<div class="code" data-code="'.concat(r,'">').concat(so(t),"</div>")}),n.actionHandler){var v=function(i){var r=i.target;if(r.tagName==="A"||(r=r.parentElement,r&&r.tagName==="A"))try{var e=r.dataset.href;e&&(t.baseUri&&(e=sI(Cr.from(t.baseUri),e)),n.actionHandler.callback(e,i))}catch(e){Gn(e)}finally{i.preventDefault()}},d=n.actionHandler.disposables.add(new Dk(u,"click")),g=n.actionHandler.disposables.add(new Dk(u,"auxclick"));n.actionHandler.disposables.add(wi.any(d.event,g.event)((function(t){var n=new _s(sa(u),t);(n.leftButton||n.middleButton)&&v(n)}))),n.actionHandler.disposables.add(ma(u,"keydown",(function(t){var n=new ws(t);(n.equals(10)||n.equals(3))&&v(n)})))}t.supportHtml||(i.sanitizer=function(n){return t.isTrusted&&n.match(/^(<span[^>]+>)|(<\/\s*span>)$/)?n:""},i.sanitize=!0,i.silent=!0),i.renderer=c;var p,w=(r=t.value)!==null&&r!==void 0?r:"";if(w.length>1e5&&(w="".concat(w.substr(0,1e5),"…")),t.supportThemeIcons&&(w=function(t){return t.replace(PT,(function(t){return"\\".concat(t)}))}(w)),n.fillInIncompleteTokens){var m=__assign(__assign({},XT.defaults),i),d=function(t){var n,i;for(n=0;n<t.length;n++){var r=t[n];var e=void 0;if(r.type==="paragraph"&&(e=r.raw.match(/(\n|^)(````*)/))){var o=e[2];i=gI(t.slice(n),o);break}if(r.type==="paragraph"&&r.raw.match(/(\n|^)\|/)){i=CI(t.slice(n));break}if(n===t.length-1&&r.type==="paragraph"){var o=vI(r);if(o){i=[o];break}}}if(i){var r=__spreadArray(__spreadArray([],t.slice(0,n),true),i,true);return r.links=t.links,r}return t}(XT.lexer(w,m));p=XT.parser(d,m)}else p=XT.parse(w,i);t.supportThemeIcons&&(p=RR(p).map((function(t){return typeof t=="string"?t:t.outerHTML})).join(""));var b=(new DOMParser).parseFromString(uI(t,p),"text/html");if(b.body.querySelectorAll("img").forEach((function(n){var i=n.getAttribute("src");if(i){var r=i;try{t.baseUri&&(r=sI(Cr.from(t.baseUri),r))}catch(t){}n.src=h(r,!0)}})),b.body.querySelectorAll("a").forEach((function(n){var i=n.getAttribute("href");if(n.setAttribute("href",""),!i||/^data:|javascript:/i.test(i)||/^command:/i.test(i)&&!t.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(i))n.replaceWith.apply(n,n.childNodes);else{var r=h(i,!1);t.baseUri&&(r=sI(Cr.from(t.baseUri),i)),n.dataset.href=r}})),u.innerHTML=uI(t,b.body.innerHTML),f.length>0)Promise.all(f).then((function(t){var i,r;if(s)return;var e=new Map(t),o=u.querySelectorAll("div[data-code]");for(var a=0,h=o;a<h.length;a++){var c=h[a];var f=e.get((i=c.dataset.code)!==null&&i!==void 0?i:"");f&&gh(c,f)}(r=n.asyncRenderCallback)===null||r===void 0||r.call(n)}));else if(l.length>0){var m=new Map(l),d=u.querySelectorAll("div[data-code]");for(var v=0,y=d;v<y.length;v++){var g=y[v];var _=m.get((e=g.dataset.code)!==null&&e!==void 0?e:"");_&&gh(g,_)}}if(n.asyncRenderCallback){var k=function(t){var i=o.add(ma(t,"load",(function(){i.dispose(),n.asyncRenderCallback()})))};for(var x=0,C=u.getElementsByTagName("img");x<C.length;x++){var m=C[x];k(m)}}return{element:u,dispose:function(){s=!0,o.dispose()}}}function oI(t){if(!t)return"";var n=t.split(/[\s+|:|,|\{|\?]/,1);return n.length?n[0]:t}function sI(t,n){return/^\w[\w\d+.-]*:/.test(n)?n:t.path.endsWith("/")?KO(t,n).toString():KO(WO(t),n).toString()}function uI(t,n){var i=function(t){var n=[Uu.http,Uu.https,Uu.mailto,Uu.data,Uu.file,Uu.vscodeFileResource,Uu.vscodeRemote,Uu.vscodeRemoteResource];return t.isTrusted&&n.push(Uu.command),{config:{ALLOWED_TAGS:__spreadArray([],Ah,true),ALLOWED_ATTR:aI,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:n}}(t),r=i.config,e=i.allowedSchemes;Hu("uponSanitizeAttribute",(function(t,n){var i;if(n.attrName!=="style"&&n.attrName!=="class"){if(t.tagName==="INPUT"&&((i=t.attributes.getNamedItem("type"))===null||i===void 0?void 0:i.value)==="checkbox"){if(n.attrName==="type"&&n.attrValue==="checkbox"||n.attrName==="disabled"||n.attrName==="checked")return void(n.keepAttr=!0);n.keepAttr=!1}}else{if(t.tagName==="SPAN"){if(n.attrName==="style")return void(n.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(n.attrValue));if(n.attrName==="class")return void(n.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(n.attrValue))}n.keepAttr=!1}})),Hu("uponSanitizeElement",(function(t,n){var i,r;n.tagName==="input"&&(((i=t.attributes.getNamedItem("type"))===null||i===void 0?void 0:i.value)==="checkbox"?t.setAttribute("disabled",""):(r=t.parentElement)===null||r===void 0||r.removeChild(t))}));var o=function(t,n){if(n===void 0){n=!1}var i=document.createElement("a");return Hu("afterSanitizeAttributes",(function(r){for(var e=0,o=["href","src"];e<o.length;e++){var s=o[e];if(r.hasAttribute(s)){var u=r.getAttribute(s);if(s==="href"&&u.startsWith("#"))continue;if(i.href=u,!t.includes(i.protocol.replace(/:$/,""))){if(n&&s==="src"&&i.href.startsWith("data:"))continue;r.removeAttribute(s)}}}})),ai((function(){zu("afterSanitizeAttributes")}))}(e);try{return Wu(n,__assign(__assign({},r),{RETURN_TRUSTED_TYPE:!0}))}finally{zu("uponSanitizeAttribute"),o.dispose()}}var aI=["align","autoplay","alt","checked","class","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","src","style","target","title","type","width","start"];function hI(t){return typeof t=="string"?t:function(t){var n;var i=(n=t.value)!==null&&n!==void 0?n:"";i.length>1e5&&(i="".concat(i.substr(0,1e5),"…"));var r=XT.parse(i,{renderer:fI.value}).replace(/&(#\d+|[a-zA-Z]+);/g,(function(t){var n;return(n=cI.get(t))!==null&&n!==void 0?n:t}));return uI({isTrusted:!1},r).toString()}(t)}var cI=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),fI=new no((function(){var t=new XT.Renderer;return t.code=function(t){return t},t.blockquote=function(t){return t},t.html=function(t){return""},t.heading=function(t,n,i){return t+"\n"},t.hr=function(){return""},t.list=function(t,n){return t},t.listitem=function(t){return t+"\n"},t.paragraph=function(t){return t+"\n"},t.table=function(t,n){return t+n+"\n"},t.tablerow=function(t){return t},t.tablecell=function(t,n){return t+" "},t.strong=function(t){return t},t.em=function(t){return t},t.codespan=function(t){return t},t.br=function(){return"\n"},t.del=function(t){return t},t.image=function(t,n,i){return""},t.text=function(t){return t},t.link=function(t,n,i){return i},t}));function lI(t){var n="";return t.forEach((function(t){n+=t.raw})),n}function vI(t){var n,i;for(var r=0;r<t.tokens.length;r++){var e=t.tokens[r];if(e.type==="text"){var o=e.raw.split("\n"),s=o[o.length-1];if(s.includes("`"))return pI(t);if(s.includes("**"))return xI(t,"**");if(s.match(/\*\w/))return wI(t);if(s.match(/(^|\s)__\w/))return kI(t);if(s.match(/(^|\s)_\w/))return mI(t);if(s.match(/(^|\s)\[.*\]\(\w*/)){var u=t.tokens.slice(r+1);return((n=u[0])===null||n===void 0?void 0:n.type)==="link"&&((i=u[1])===null||i===void 0?void 0:i.type)==="text"&&u[1].raw.match(/^ *"[^"]*$/)?yI(t):bI(t)}if(dI(s))return bI(t);if(s.match(/(^|\s)\[\w/)&&!t.tokens.slice(r+1).some((function(t){return dI(t.raw)})))return _I(t)}}}function dI(t){return!!t.match(/^[^\[]*\]\([^\)]*$/)}function gI(t,n){var i=lI(t);return XT.lexer(i+"\n".concat(n))}function pI(t){return xI(t,"`")}function wI(t){return xI(t,"*")}function mI(t){return xI(t,"_")}function bI(t){return xI(t,")")}function yI(t){return xI(t,'")')}function _I(t){return xI(t,"](about:blank)")}function kI(t){return xI(t,"__")}function xI(t,n){var i=lI(Array.isArray(t)?t:[t]);return XT.lexer(i+n)[0]}function CI(t){var n=lI(t),i=n.split("\n");var r,e=!1;for(var o=0;o<i.length;o++){var s=i[o].trim();if(r===void 0&&s.match(/^\s*\|/)){var u=s.match(/(\|[^\|]+)(?=\||$)/g);u&&(r=u.length)}else if(typeof r=="number"){if(!s.match(/^\s*\|/)||o!==i.length-1)return;e=!0}}if(typeof r=="number"&&r>0){var o=e?i.slice(0,-1).join("\n"):n,s=!!o.match(/\|\s*$/),u=o+(s?"":"|")+"\n|".concat(" --- |".repeat(r));return XT.lexer(u)}}var SI,DI=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},AI=function(t,n){return function(i,r){n(i,r,t)}};var OI=SI=function(){function t(t,n,i){this._options=t,this._languageService=n,this._openerService=i,this._onDidRenderAsync=new ki,this.onDidRenderAsync=this._onDidRenderAsync.event}t.prototype.dispose=function(){this._onDidRenderAsync.dispose()};t.prototype.render=function(t,n,i){if(!t)return{element:document.createElement("span"),dispose:function(){}};var r=new hi,e=r.add(eI(t,__assign(__assign({},this._getRenderOptions(t,r)),n),i));return e.element.classList.add("rendered-markdown"),{element:e.element,dispose:function(){return r.dispose()}}};t.prototype._getRenderOptions=function(t,n){var i=this;return{codeBlockRenderer:function(t,n){return __awaiter(i,void 0,void 0,(function(){var i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:t?o=this._languageService.getLanguageIdByLanguageName(t):this._options.editor&&(o=(i=this._options.editor.getModel())===null||i===void 0?void 0:i.getLanguageId()),o||(o=dv);return[4,function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(e){switch(e.label){case 0:if(!i)return[2,qF(n,t.languageIdCodec,KF)];return[4,oe.getOrCreate(i)];case 1:r=e.sent();return[2,qF(n,t.languageIdCodec,r||KF)]}}))}))}(this._languageService,n,o)];case 1:s=a.sent(),u=document.createElement("span");return[2,(u.innerHTML=(e=(r=SI._ttpTokenizer)===null||r===void 0?void 0:r.createHTML(s))!==null&&e!==void 0?e:s,this._options.editor?Ph(u,this._options.editor.getOption(50)):this._options.codeBlockFontFamily&&(u.style.fontFamily=this._options.codeBlockFontFamily),this._options.codeBlockFontSize!==void 0&&(u.style.fontSize=this._options.codeBlockFontSize),u)]}}))}))},asyncRenderCallback:function(){return i._onDidRenderAsync.fire()},actionHandler:{callback:function(n){return EI(i._openerService,n,t.isTrusted)},disposables:n}}};return t}();function EI(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(e){switch(e.label){case 0:e.trys.push([0,2,,3]);return[4,t.open(n,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:MI(i)})];case 1:return[2,e.sent()];case 2:r=e.sent();return[2,(Gn(r),!1)];case 3:return[2]}}))}))}function MI(t){return t===!0||!(!t||!Array.isArray(t.enabledCommands))&&t.enabledCommands}OI._ttpTokenizer=rl("tokenizeToString",{createHTML:function(t){return t}}),OI=SI=DI([AI(1,Zl),AI(2,DR)],OI);var FI=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},LI=function(t,n){return function(i,r){n(i,r,t)}};var jI=bh;var RI=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u;var a=this;var h,c,f,l,v,d,g,p;a=t.call(this)||this,a._keybindingService=i,a._configurationService=r,a._openerService=e,a._instantiationService=o,a._accessibilityService=s,a._messageListeners=new hi,a._isDisposed=!1,a._forcePosition=!1,a._x=0,a._y=0,a._isLocked=!1,a._enableFocusTraps=!1,a._addedFocusTrap=!1,a._onDispose=a._register(new ki),a._onRequestLayout=a._register(new ki),a._linkHandler=n.linkHandler||function(t){return EI(a._openerService,t,GT(n.content)?n.content.isTrusted:void 0)},a._target="targetElements"in n.target?n.target:new II(n.target),a._hoverPointer=!((h=n.appearance)===null||h===void 0)&&h.showPointer?jI("div.workbench-hover-pointer"):void 0,a._hover=a._register(new xR),a._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),!((c=n.appearance)===null||c===void 0)&&c.compact&&a._hover.containerDomNode.classList.add("workbench-hover","compact"),!((f=n.appearance)===null||f===void 0)&&f.skipFadeInAnimation&&a._hover.containerDomNode.classList.add("skip-fade-in"),n.additionalClasses&&(u=a._hover.containerDomNode.classList).add.apply(u,n.additionalClasses),!((l=n.position)===null||l===void 0)&&l.forcePosition&&(a._forcePosition=!0),n.trapFocus&&(a._enableFocusTraps=!0),a._hoverPosition=(d=(v=n.position)===null||v===void 0?void 0:v.hoverPosition)!==null&&d!==void 0?d:3,a.onmousedown(a._hover.containerDomNode,(function(t){return t.stopPropagation()})),a.onkeydown(a._hover.containerDomNode,(function(t){t.equals(9)&&a.dispose()})),a._register(ma(a._targetWindow,"blur",(function(){return a.dispose()})));var w=jI("div.hover-row.markdown-hover"),m=jI("div.hover-contents");if(typeof n.content=="string")m.textContent=n.content,m.style.whiteSpace="pre-wrap";else if(n.content instanceof HTMLElement)m.appendChild(n.content),m.classList.add("html-hover-contents");else{var b=n.content,y=a._instantiationService.createInstance(OI,{codeBlockFontFamily:a._configurationService.getValue("editor").fontFamily||zn.fontFamily}),_=y.render(b,{actionHandler:{callback:function(t){return a._linkHandler(t)},disposables:a._messageListeners},asyncRenderCallback:function(){m.classList.add("code-hover-contents"),a.layout(),a._onRequestLayout.fire()}}).element;m.appendChild(_)}if(w.appendChild(m),a._hover.contentsDomNode.appendChild(w),n.actions&&n.actions.length>0){var b=jI("div.hover-row.status-bar"),k=jI("div.actions");n.actions.forEach((function(t){var n=a._keybindingService.lookupKeybinding(t.commandId),i=n?n.getLabel():null;CR.render(k,{label:t.label,commandId:t.commandId,run:function(n){t.run(n),a.dispose()},iconClass:t.iconClass},i)})),b.appendChild(k),a._hover.containerDomNode.appendChild(b)}var x;if(a._hoverContainer=jI("div.workbench-hover-container"),a._hoverPointer&&a._hoverContainer.appendChild(a._hoverPointer),a._hoverContainer.appendChild(a._hover.containerDomNode),x=!(n.actions&&n.actions.length>0)&&(((g=n.persistence)===null||g===void 0?void 0:g.hideOnHover)===void 0?typeof n.content=="string"||GT(n.content)&&!n.content.value.includes("](")&&!n.content.value.includes("</a>"):n.persistence.hideOnHover),x&&((p=n.appearance)===null||p===void 0?void 0:p.showHoverHint)){var b=jI("div.hover-row.status-bar"),y=jI("div.info");y.textContent=ht(0,"Hold {0} key to mouse over",Ft?"Option":"Alt"),b.appendChild(y),a._hover.containerDomNode.appendChild(b)}var C=__spreadArray([],a._target.targetElements,true);x||C.push(a._hoverContainer);var S=a._register(new TI(C));if(a._register(S.onMouseOut((function(){a._isLocked||a.dispose()}))),x){var b=__spreadArray(__spreadArray([],a._target.targetElements,true),[a._hoverContainer],false);a._lockMouseTracker=a._register(new TI(b)),a._register(a._lockMouseTracker.onMouseOut((function(){a._isLocked||a.dispose()})))}else a._lockMouseTracker=S;return a}Object.defineProperty(n.prototype,"_targetWindow",{get:function(){return sa(this._target.targetElements[0])},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"_targetDocumentElement",{get:function(){return sa(this._target.targetElements[0]).document.documentElement},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isMouseIn",{get:function(){return this._lockMouseTracker.isMouseIn},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"domNode",{get:function(){return this._hover.containerDomNode},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"onRequestLayout",{get:function(){return this._onRequestLayout.event},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"anchor",{get:function(){return this._hoverPosition===2?0:1},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isLocked",{get:function(){return this._isLocked},set:function(t){this._isLocked!==t&&(this._isLocked=t,this._hoverContainer.classList.toggle("locked",this._isLocked))},enumerable:false,configurable:true});n.prototype.addFocusTrap=function(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;var t=this._hover.containerDomNode,n=this.findLastFocusableChild(this._hover.containerDomNode);if(n){var i=dh(this._hoverContainer,jI("div")),r=vh(this._hoverContainer,jI("div"));i.tabIndex=0,r.tabIndex=0,this._register(ma(r,"focus",(function(n){t.focus(),n.preventDefault()}))),this._register(ma(i,"focus",(function(t){n.focus(),t.preventDefault()})))}};n.prototype.findLastFocusableChild=function(t){if(t.hasChildNodes())for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes.item(t.childNodes.length-n-1);if(i.nodeType===i.ELEMENT_NODE){var r=i;if(typeof r.tabIndex=="number"&&r.tabIndex>=0)return r}var e=this.findLastFocusableChild(i);if(e)return e}};n.prototype.render=function(t){var n;t.appendChild(this._hoverContainer);var i=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&SR(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(n=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||n===void 0?void 0:n.getAriaLabel());i&&_w(i),this.layout(),this.addFocusTrap()};n.prototype.layout=function(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";var t=this._target.targetElements.map((function(t){return function(t){var n=Ra(t),i=t.getBoundingClientRect();return{top:i.top*n,bottom:i.bottom*n,right:i.right*n,left:i.left*n}}(t)})),n=t[0],i=n.top,r=n.right,e=n.bottom,o=n.left,s=r-o,u=e-i,a={top:i,right:r,bottom:e,left:o,width:s,height:u,center:{x:o+s/2,y:i+u/2}};if(this.adjustHorizontalHoverPosition(a),this.adjustVerticalHoverPosition(a),this.adjustHoverMaxHeight(a),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:a.left+=3,a.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:a.left-=3,a.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:a.top+=3,a.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:a.top-=3,a.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px"}a.center.x=a.left+s/2,a.center.y=a.top+u/2}this.computeXCordinate(a),this.computeYCordinate(a),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(a)),this._hover.onContentsChanged()};n.prototype.computeXCordinate=function(t){var n=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=t.right:this._hoverPosition===0?this._x=t.left-n:(this._hoverPointer?this._x=t.center.x-this._hover.containerDomNode.clientWidth/2:this._x=t.left,this._x+n>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-n-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=t.left+2)};n.prototype.computeYCordinate=function(t){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=t.top:this._hoverPosition===2?this._y=t.bottom-2:this._hoverPointer?this._y=t.center.y+this._hover.containerDomNode.clientHeight/2:this._y=t.bottom,this._y>this._targetWindow.innerHeight&&(this._y=t.bottom)};n.prototype.adjustHorizontalHoverPosition=function(t){if(this._target.x!==void 0)return;var n=this._hoverPointer?3:0;if(this._forcePosition){var i=n+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=this._targetDocumentElement.clientWidth-t.right-i+"px":this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=t.left-i+"px")}else this._hoverPosition===1?this._targetDocumentElement.clientWidth-t.right<this._hover.containerDomNode.clientWidth+n&&(t.left>=this._hover.containerDomNode.clientWidth+n?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(t.left<this._hover.containerDomNode.clientWidth+n&&(this._targetDocumentElement.clientWidth-t.right>=this._hover.containerDomNode.clientWidth+n?this._hoverPosition=1:this._hoverPosition=2),t.left-this._hover.containerDomNode.clientWidth-n<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))};n.prototype.adjustVerticalHoverPosition=function(t){if(this._target.y!==void 0||this._forcePosition)return;var n=this._hoverPointer?3:0;this._hoverPosition===3?t.top-this._hover.containerDomNode.clientHeight-n<0&&(this._hoverPosition=2):this._hoverPosition===2&&t.bottom+this._hover.containerDomNode.clientHeight+n>this._targetWindow.innerHeight&&(this._hoverPosition=3)};n.prototype.adjustHoverMaxHeight=function(t){var n=this._targetWindow.innerHeight/2;if(this._forcePosition){var i=2+(this._hoverPointer?3:0);this._hoverPosition===3?n=Math.min(n,t.top-i):this._hoverPosition===2&&(n=Math.min(n,this._targetWindow.innerHeight-t.bottom-i))}if(this._hover.containerDomNode.style.maxHeight="".concat(n,"px"),this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){var i="".concat(this._hover.scrollbar.options.verticalScrollbarSize,"px");this._hover.contentsDomNode.style.paddingRight!==i&&(this._hover.contentsDomNode.style.paddingRight=i)}};n.prototype.setHoverPointerPosition=function(t){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");var n=this._hover.containerDomNode.clientHeight;n>t.height?this._hoverPointer.style.top=t.center.y-(this._y-n)-3+"px":this._hoverPointer.style.top=Math.round(n/2)-3+"px";break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");var n=this._hover.containerDomNode.clientWidth;var i=Math.round(n/2)-3;var r=this._x+i;(r<t.left||r>t.right)&&(i=t.center.x-this._x-3),this._hoverPointer.style.left="".concat(i,"px");break}}};n.prototype.focus=function(){this._hover.containerDomNode.focus()};n.prototype.dispose=function(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),t.prototype.dispose.call(this)),this._isDisposed=!0};return n}(ik);RI=FI([LI(1,Yx),LI(2,Kl),LI(3,DR),LI(4,Jh),LI(5,jw)],RI);var TI=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._elements=n,i._isMouseIn=!0,i._onMouseOut=i._register(new ki),i._elements.forEach((function(t){return i.onmouseover(t,(function(){return i._onTargetMouseOver(t)}))})),i._elements.forEach((function(t){return i.onmouseleave(t,(function(){return i._onTargetMouseLeave(t)}))}));return i}Object.defineProperty(n.prototype,"onMouseOut",{get:function(){return this._onMouseOut.event},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isMouseIn",{get:function(){return this._isMouseIn},enumerable:false,configurable:true});n.prototype._onTargetMouseOver=function(t){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(t)};n.prototype._onTargetMouseLeave=function(t){this._isMouseIn=!1,this._evaluateMouseState(t)};n.prototype._evaluateMouseState=function(t){var n=this;this._clearEvaluateMouseStateTimeout(t),this._mouseTimeout=sa(t).setTimeout((function(){return n._fireIfMouseOutside()}),0)};n.prototype._clearEvaluateMouseStateTimeout=function(t){this._mouseTimeout&&(sa(t).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)};n.prototype._fireIfMouseOutside=function(){this._isMouseIn||this._onMouseOut.fire()};return n}(ik);var II=function(){function t(t){this._element=t,this.targetElements=[this._element]}t.prototype.dispose=function(){};return t}();var BI,NI;function PI(t,n,i){var r=i.mode===NI.ALIGN?i.offset:i.offset+i.size,e=i.mode===NI.ALIGN?i.offset+i.size:i.offset;return i.position===0?n<=t-r?r:n<=e?e-n:Math.max(t-n,0):n<=e?e-n:n<=t-r?r:0}(function(t){function n(t,n){if(t.start>=n.end||n.start>=t.end)return{start:0,end:0};var i=Math.max(t.start,n.start),r=Math.min(t.end,n.end);return r-i<=0?{start:0,end:0}:{start:i,end:r}}function i(t){return t.end-t.start<=0}t.intersect=n,t.isEmpty=i,t.intersects=function(t,r){return!i(n(t,r))},t.relativeComplement=function(t,n){var r=[],e={start:t.start,end:Math.min(n.start,t.end)},o={start:Math.max(n.end,t.start),end:t.end};return i(e)||r.push(e),i(o)||r.push(o),r}})(BI||(BI={})),function(t){t[t.AVOID=0]="AVOID",t[t.ALIGN=1]="ALIGN"}(NI||(NI={}));var WI=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.container=null,r.useFixedPosition=!1,r.useShadowDOM=!1,r.delegate=null,r.toDisposeOnClean=ci.None,r.toDisposeOnSetContainer=ci.None,r.shadowRoot=null,r.shadowRootHostElement=null,r.view=bh(".context-view"),_h(r.view),r.setContainer(n,i),r._register(ai((function(){return r.setContainer(null,1)})));return r}n.prototype.setContainer=function(t,i){var r=this;var e;this.useFixedPosition=i!==1;var o=this.useShadowDOM;if(this.useShadowDOM=i===3,(t!==this.container||o!==this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,(e=this.shadowRootHostElement)===null||e===void 0||e.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),t)){if(this.container=t,this.useShadowDOM){this.shadowRootHostElement=bh(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});var s=document.createElement("style");s.textContent=HI,this.shadowRoot.appendChild(s),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(bh("slot"))}else this.container.appendChild(this.view);var u=new hi;n.BUBBLE_UP_EVENTS.forEach((function(t){u.add(ya(r.container,t,(function(t){r.onDOMEvent(t,!1)})))})),n.BUBBLE_DOWN_EVENTS.forEach((function(t){u.add(ya(r.container,t,(function(t){r.onDOMEvent(t,!0)}),!0))})),this.toDisposeOnSetContainer=u}};n.prototype.show=function(t){var n,i,r;this.isVisible()&&this.hide(),pa(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="".concat(2575+((n=t.layer)!==null&&n!==void 0?n:0)),this.view.style.position=this.useFixedPosition?"fixed":"absolute",yh(this.view),this.toDisposeOnClean=t.render(this.view)||ci.None,this.delegate=t,this.doLayout(),(r=(i=this.delegate).focus)===null||r===void 0||r.call(i)};n.prototype.getViewElement=function(){return this.view};n.prototype.layout=function(){var t,n;this.isVisible()&&(this.delegate.canRelayout!==!1||It&&as?((n=(t=this.delegate)===null||t===void 0?void 0:t.layout)===null||n===void 0||n.call(t),this.doLayout()):this.hide())};n.prototype.doLayout=function(){if(!this.isVisible())return;var t=this.delegate.getAnchor();var n;if(t instanceof HTMLElement){var i=ja(t),r=Ra(t);n={top:i.top*r,left:i.left*r,width:i.width*r,height:i.height*r}}else n=function(t){var n=t;return!!n&&typeof n.x=="number"&&typeof n.y=="number"}(t)?{top:t.y,left:t.x,width:t.width||1,height:t.height||2}:{top:t.posy,left:t.posx,width:2,height:2};var e=Ta(this.view),o=Na(this.view),s=this.delegate.anchorPosition||0,u=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;var h,c;var f=function(){var t,n;return(n=(t=Ga().defaultView)===null||t===void 0?void 0:t.window)!==null&&n!==void 0?n:Xe}();if(a===0){var i={offset:n.top-f.pageYOffset,size:n.height,position:s===0?0:1},r={offset:n.left,size:n.width,position:u===0?0:1,mode:NI.ALIGN};h=PI(f.innerHeight,o,i)+f.pageYOffset,BI.intersects({start:h,end:h+o},{start:i.offset,end:i.offset+i.size})&&(r.mode=NI.AVOID),c=PI(f.innerWidth,e,r)}else{var i={offset:n.left,size:n.width,position:u===0?0:1},r={offset:n.top,size:n.height,position:s===0?0:1,mode:NI.ALIGN};c=PI(f.innerWidth,e,i),BI.intersects({start:c,end:c+e},{start:i.offset,end:i.offset+i.size})&&(r.mode=NI.AVOID),h=PI(f.innerHeight,o,r)+f.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(s===0?"bottom":"top"),this.view.classList.add(u===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);var l=ja(this.container);this.view.style.top=h-(this.useFixedPosition?ja(this.view).top:l.top)+"px",this.view.style.left=c-(this.useFixedPosition?ja(this.view).left:l.left)+"px",this.view.style.width="initial"};n.prototype.hide=function(t){var n=this.delegate;this.delegate=null,n!=null&&n.onHide&&n.onHide(t),this.toDisposeOnClean.dispose(),_h(this.view)};n.prototype.isVisible=function(){return!!this.delegate};n.prototype.onDOMEvent=function(t,n){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(t,sa(t).document.activeElement):n&&!Pa(t.target,this.container)&&this.hide())};n.prototype.dispose=function(){this.hide(),t.prototype.dispose.call(this)};return n}(ci);WI.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],WI.BUBBLE_DOWN_EVENTS=["click"];var HI='\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*=\'codicon-\'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n';var zI=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},UI=function(t,n){return function(i,r){n(i,r,t)}};var KI=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.layoutService=n,i.currentViewDisposable=i._register(new fi),i.contextView=i._register(new WI(i.layoutService.mainContainer,1)),i.layout(),i._register(n.onDidLayoutContainer((function(){return i.layout()})));return i}n.prototype.showContextView=function(t,n,i){var r=this;var e;e=n?n===this.layoutService.getContainer(sa(n))?1:i?3:2:1,this.contextView.setContainer(n!==null&&n!==void 0?n:this.layoutService.activeContainer,e),this.contextView.show(t);var o=ai((function(){r.currentViewDisposable===o&&r.hideContextView()}));return this.currentViewDisposable.value=o,o};n.prototype.layout=function(){this.contextView.layout()};n.prototype.hideContextView=function(t){this.contextView.hide(t)};return n}(ci);KI=zI([UI(0,XL)],KI);var VI=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.getContextViewElement=function(){return this.contextView.getViewElement()};return n}(KI);var qI=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},GI=function(t,n){return function(i,r){n(i,r,t)}};var $I=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s._instantiationService=n,s._keybindingService=r,s._layoutService=e,s._accessibilityService=o,i.onDidShowContextMenu((function(){return s.hideHover()})),s._contextViewHandler=s._register(new KI(s._layoutService));return s}n.prototype.showHover=function(t,n,i){var r=this;var e,o,s,u;if(JI(this._currentHoverOptions)===JI(t)||this._currentHover&&(!((o=(e=this._currentHoverOptions)===null||e===void 0?void 0:e.persistence)===null||o===void 0)&&o.sticky))return;this._currentHoverOptions=t,this._lastHoverOptions=t;var a=t.trapFocus||this._accessibilityService.isScreenReaderOptimized(),h=Ka();i||(this._lastFocusedElementBeforeOpen=a&&h?h:void 0);var c=new hi,f=this._instantiationService.createInstance(RI,t);if(!((s=t.persistence)===null||s===void 0)&&s.sticky&&(f.isLocked=!0),f.onDispose((function(){var n,i;!((n=r._currentHover)===null||n===void 0)&&n.domNode&&qa(r._currentHover.domNode)&&((i=r._lastFocusedElementBeforeOpen)===null||i===void 0||i.focus()),r._currentHoverOptions===t&&(r._currentHoverOptions=void 0),c.dispose()})),!t.container){var l=t.target instanceof HTMLElement?t.target:t.target.targetElements[0];t.container=this._layoutService.getContainer(sa(l))}if(this._contextViewHandler.showContextView(new ZI(f,n),t.container),f.onRequestLayout((function(){return r._contextViewHandler.layout()})),(u=t.persistence)===null||u===void 0?void 0:u.sticky)c.add(ma(sa(t.container).document,ah.MOUSE_DOWN,(function(t){Pa(t.target,f.domNode)||r.doHideHover()})));else{if("targetElements"in t.target)for(var v=0,d=t.target.targetElements;v<d.length;v++){var g=d[v];c.add(ma(g,ah.CLICK,(function(){return r.hideHover()})))}else c.add(ma(t.target,ah.CLICK,(function(){return r.hideHover()})));var l=Ka();if(l){var g=sa(l).document;c.add(ma(l,ah.KEY_DOWN,(function(n){var i;return r._keyDown(n,f,!!(!((i=t.persistence)===null||i===void 0)&&i.hideOnKeyDown))}))),c.add(ma(g,ah.KEY_DOWN,(function(n){var i;return r._keyDown(n,f,!!(!((i=t.persistence)===null||i===void 0)&&i.hideOnKeyDown))}))),c.add(ma(l,ah.KEY_UP,(function(t){return r._keyUp(t,f)}))),c.add(ma(g,ah.KEY_UP,(function(t){return r._keyUp(t,f)})))}}if("IntersectionObserver"in Xe){var p=new IntersectionObserver((function(t){return r._intersectionChange(t,f)}),{threshold:0}),g="targetElements"in t.target?t.target.targetElements[0]:t.target;p.observe(g),c.add(ai((function(){return p.disconnect()})))}return this._currentHover=f,f};n.prototype.hideHover=function(){var t;!(!((t=this._currentHover)===null||t===void 0)&&t.isLocked)&&this._currentHoverOptions&&this.doHideHover()};n.prototype.doHideHover=function(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()};n.prototype._intersectionChange=function(t,n){t[t.length-1].isIntersecting||n.dispose()};n.prototype._keyDown=function(t,n,i){var r,e;if(t.key==="Alt")return void(n.isLocked=!0);var o=new ws(t);this._keybindingService.resolveKeyboardEvent(o).getSingleModifierDispatchChords().some((function(t){return!!t}))||this._keybindingService.softDispatch(o,o.target).kind!==0||!i||!((r=this._currentHoverOptions)===null||r===void 0)&&r.trapFocus&&t.key==="Tab"||(this.hideHover(),(e=this._lastFocusedElementBeforeOpen)===null||e===void 0||e.focus())};n.prototype._keyUp=function(t,n){var i;t.key==="Alt"&&(n.isLocked=!1,n.isMouseIn||(this.hideHover(),(i=this._lastFocusedElementBeforeOpen)===null||i===void 0||i.focus()))};return n}(ci);function JI(t){var n;if(t!==void 0)return(n=t==null?void 0:t.id)!==null&&n!==void 0?n:t}$I=qI([GI(0,Jh),GI(1,_R),GI(2,Yx),GI(3,XL),GI(4,jw)],$I);var ZI=function(){function t(t,n){if(n===void 0){n=!1}this._hover=t,this._focus=n,this.layer=1}Object.defineProperty(t.prototype,"anchorPosition",{get:function(){return this._hover.anchor},enumerable:false,configurable:true});t.prototype.render=function(t){return this._hover.render(t),this._focus&&this._hover.focus(),this._hover};t.prototype.getAnchor=function(){return{x:this._hover.x,y:this._hover.y}};t.prototype.layout=function(){this._hover.layout()};return t}();Xl(mR,$I,1),Gk((function(t,n){var i=t.getColor(Wm);i&&(n.addRule(".monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(i.transparent(.5),"; }")),n.addRule(".monaco-workbench .workbench-hover hr { border-top: 1px solid ".concat(i.transparent(.5),"; }")))}));var QI=Zh("IWorkspaceEditService");var YI=function(){function t(t){this.metadata=t}t.convert=function(t){return t.edits.map((function(t){if(XI.is(t))return XI.lift(t);if(tB.is(t))return tB.lift(t);throw new Error("Unsupported edit")}))};return t}();var XI=function(t){__extends(n,t);function n(n,i,r,e){if(r===void 0){r=void 0}var o=this;o=t.call(this,e)||this,o.resource=n,o.textEdit=i,o.versionId=r;return o}n.is=function(t){return t instanceof n||z(t)&&Cr.isUri(t.resource)&&z(t.textEdit)};n.lift=function(t){return t instanceof n?t:new n(t.resource,t.textEdit,t.versionId,t.metadata)};return n}(YI);var tB=function(t){__extends(n,t);function n(n,i,r,e){if(r===void 0){r={}}var o=this;o=t.call(this,e)||this,o.oldResource=n,o.newResource=i,o.options=r;return o}n.is=function(t){return t instanceof n||z(t)&&(!!t.newResource||!!t.oldResource)};n.lift=function(t){return t instanceof n?t:new n(t.oldResource,t.newResource,t.options,t.metadata)};return n}(YI);var nB={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0},iB=Object.freeze({id:"editor",order:5,type:"object",title:ht(0,"Editor"),scope:5}),rB=__assign(__assign({},iB),{properties:{"editor.tabSize":{type:"number",default:Qt.tabSize,minimum:1,markdownDescription:ht(0,"The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:ht(0,'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Qt.insertSpaces,markdownDescription:ht(0,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Qt.detectIndentation,markdownDescription:ht(0,"Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Qt.trimAutoWhitespace,description:ht(0,"Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Qt.largeFileOptimizations,description:ht(0,"Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[ht(0,"Turn off Word Based Suggestions."),ht(0,"Only suggest words from the active document."),ht(0,"Suggest words from all open documents of the same language."),ht(0,"Suggest words from all open documents.")],description:ht(0,"Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[ht(0,"Semantic highlighting enabled for all color themes."),ht(0,"Semantic highlighting disabled for all color themes."),ht(0,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:ht(0,"Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:ht(0,"Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:ht(0,"Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:ht(0,"Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:ht(0,"Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:ht(0,"Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:ht(0,"Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:ht(0,"The opening bracket character or string sequence.")},{type:"string",description:ht(0,"The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:ht(0,"Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:ht(0,"The opening bracket character or string sequence.")},{type:"string",description:ht(0,"The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:nB.maxComputationTime,description:ht(0,"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:nB.maxFileSize,description:ht(0,"Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:nB.renderSideBySide,description:ht(0,"Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:nB.renderSideBySideInlineBreakpoint,description:ht(0,"If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:nB.useInlineViewWhenSpaceIsLimited,description:ht(0,"If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:nB.renderMarginRevertIcon,description:ht(0,"When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:nB.renderGutterMenu,description:ht(0,"When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:nB.ignoreTrimWhitespace,description:ht(0,"When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:nB.renderIndicators,description:ht(0,"Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:nB.diffCodeLens,description:ht(0,"Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:nB.diffWordWrap,markdownEnumDescriptions:[ht(0,"Lines will never wrap."),ht(0,"Lines will wrap at the viewport width."),ht(0,"Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:nB.diffAlgorithm,markdownEnumDescriptions:[ht(0,"Uses the legacy diffing algorithm."),ht(0,"Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:nB.hideUnchangedRegions.enabled,markdownDescription:ht(0,"Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:nB.hideUnchangedRegions.revealLineCount,markdownDescription:ht(0,"Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:nB.hideUnchangedRegions.minimumLineCount,markdownDescription:ht(0,"Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:nB.hideUnchangedRegions.contextLineCount,markdownDescription:ht(0,"Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:nB.experimental.showMoves,markdownDescription:ht(0,"Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:nB.experimental.showEmptyDecorations,description:ht(0,"Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}});for(var eB=0,oB=Un;eB<oB.length;eB++){var At=oB[eB];var Ot=At.schema;if(Ot!==void 0)if((sB=Ot).type!==void 0||sB.anyOf!==void 0)rB.properties["editor.".concat(At.name)]=Ot;else for(var Et in Ot)Object.hasOwnProperty.call(Ot,Et)&&(rB.properties[Et]=Ot[Et])}var sB;var uB=null;function aB(){return uB===null&&(uB=Object.create(null),Object.keys(rB.properties).forEach((function(t){uB[t]=!0}))),uB}of.as(ev).registerConfiguration(rB);var hB=function(){function t(){}t.insert=function(t,n){return{range:new Ir(t.lineNumber,t.column,t.lineNumber,t.column),text:n,forceMoveMarkers:!0}};t.delete=function(t){return{range:t,text:null}};t.replace=function(t,n){return{range:t,text:n}};t.replaceMove=function(t,n){return{range:t,text:n,forceMoveMarkers:!0}};return t}();function cB(t){return Object.isFrozen(t)?t:function(t){if(!t||typeof t!="object")return t;var n=[t];for(;n.length>0;){var i=n.shift();Object.freeze(i);for(var r in i)if(nt.call(i,r)){var e=i[r];typeof e!="object"||Object.isFrozen(e)||U(e)||n.push(e)}}return t}(t)}var fB=function(){function t(t,n,i,r){if(t===void 0){t={}}if(n===void 0){n=[]}if(i===void 0){i=[]}this._contents=t,this._keys=n,this._overrides=i,this.raw=r,this.overrideConfigurations=new Map}Object.defineProperty(t.prototype,"rawConfiguration",{get:function(){var n;if(!this._rawConfiguration)if(!((n=this.raw)===null||n===void 0)&&n.length){var i=this.raw.map((function(n){if(n instanceof t)return n;var i=new lB("");return i.parseRaw(n),i.configurationModel}));this._rawConfiguration=i.reduce((function(t,n){return n===t?n:t.merge(n)}),i[0])}else this._rawConfiguration=this;return this._rawConfiguration},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"contents",{get:function(){return this._contents},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"overrides",{get:function(){return this._overrides},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"keys",{get:function(){return this._keys},enumerable:false,configurable:true});t.prototype.isEmpty=function(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0};t.prototype.getValue=function(t){return t?Jl(this.contents,t):this.contents};t.prototype.inspect=function(n,i){var r=this;return{get value(){return cB(r.rawConfiguration.getValue(n))},get override(){return i?cB(r.rawConfiguration.getOverrideValue(n,i)):void 0},get merged(){return cB(i?r.rawConfiguration.override(i).getValue(n):r.rawConfiguration.getValue(n))},get overrides(){var i=[];for(var e=0,o=r.rawConfiguration.overrides;e<o.length;e++){var s=o[e],u=s.contents,a=s.identifiers,h=s.keys;var c=new t(u,h).getValue(n);c!==void 0&&i.push({identifiers:a,value:c})}return i.length?cB(i):void 0}}};t.prototype.getOverrideValue=function(t,n){var i=this.getContentsForOverrideIdentifer(n);return i?t?Jl(i,t):i:void 0};t.prototype.override=function(t){var n=this.overrideConfigurations.get(t);return n||(n=this.createOverrideConfigurationModel(t),this.overrideConfigurations.set(t,n)),n};t.prototype.merge=function(){var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}var r,e;var o=tt(this.contents),s=tt(this.overrides),u=__spreadArray([],this.keys,true),a=!((r=this.raw)===null||r===void 0)&&r.length?__spreadArray([],this.raw,true):[this];for(var h=0,c=n;h<c.length;h++){var f=c[h];if(a.push.apply(a,!((e=f.raw)===null||e===void 0)&&e.length?f.raw:[f]),!f.isEmpty()){this.mergeContents(o,f.contents);var l=function(t){var n;var i=s.filter((function(n){return v(n.identifiers,t.identifiers)}))[0];i?(d.mergeContents(i.contents,t.contents),(n=i.keys).push.apply(n,t.keys),i.keys=x(i.keys)):s.push(tt(t))};var d=this;for(var g=0,p=f.overrides;g<p.length;g++){var w=p[g];l(w)}for(var m=0,b=f.keys;m<b.length;m++){var w=b[m];u.indexOf(w)===-1&&u.push(w)}}}return new t(o,u,s,a.every((function(n){return n instanceof t}))?void 0:a)};t.prototype.createOverrideConfigurationModel=function(n){var i=this.getContentsForOverrideIdentifer(n);if(!i||typeof i!="object"||!Object.keys(i).length)return this;var r={};for(var e=0,o=x(__spreadArray(__spreadArray([],Object.keys(this.contents),true),Object.keys(i),true));e<o.length;e++){var s=o[e];var u=this.contents[s];var a=i[s];a&&(typeof u=="object"&&typeof a=="object"?(u=tt(u),this.mergeContents(u,a)):u=a),r[s]=u}return new t(r,this.keys,this.overrides)};t.prototype.mergeContents=function(t,n){for(var i=0,r=Object.keys(n);i<r.length;i++){var e=r[i];e in t&&z(t[e])&&z(n[e])?this.mergeContents(t[e],n[e]):t[e]=tt(n[e])}};t.prototype.getContentsForOverrideIdentifer=function(t){var n=this;var i=null,r=null;var e=function(t){t&&(r?n.mergeContents(r,t):r=tt(t))};for(var o=0,s=this.overrides;o<s.length;o++){var u=s[o];u.identifiers.length===1&&u.identifiers[0]===t?i=u.contents:u.identifiers.includes(t)&&e(u.contents)}return e(i),r};t.prototype.toJSON=function(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}};t.prototype.addValue=function(t,n){this.updateValue(t,n,!0)};t.prototype.setValue=function(t,n){this.updateValue(t,n,!1)};t.prototype.removeValue=function(t){var n=this.keys.indexOf(t);n!==-1&&(this.keys.splice(n,1),Gl(this.contents,t),hv.test(t)&&this.overrides.splice(this.overrides.findIndex((function(n){return v(n.identifiers,cv(t))})),1))};t.prototype.updateValue=function(t,n,i){ql(this.contents,t,n,(function(t){return console.error(t)})),(i=i||this.keys.indexOf(t)===-1)&&this.keys.push(t),hv.test(t)&&this.overrides.push({identifiers:cv(t),keys:Object.keys(this.contents[t]),contents:Vl(this.contents[t],(function(t){return console.error(t)}))})};return t}();var lB=function(){function t(t){this._name=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}Object.defineProperty(t.prototype,"configurationModel",{get:function(){return this._configurationModel||new fB},enumerable:false,configurable:true});t.prototype.parseRaw=function(t,n){this._raw=t;var i=this.doParseRaw(t,n),r=i.contents,e=i.keys,o=i.overrides,s=i.restricted,u=i.hasExcludedProperties;this._configurationModel=new fB(r,e,o,u?[t]:void 0),this._restrictedConfigurations=s||[]};t.prototype.doParseRaw=function(t,n){var i=this;var r=of.as(ev).getConfigurationProperties(),e=this.filter(t,r,!0,n);return{contents:Vl(t=e.raw,(function(t){return console.error("Conflict in settings file ".concat(i._name,": ").concat(t))})),keys:Object.keys(t),overrides:this.toOverrides(t,(function(t){return console.error("Conflict in settings file ".concat(i._name,": ").concat(t))})),restricted:e.restricted,hasExcludedProperties:e.hasExcludedProperties}};t.prototype.filter=function(t,n,i,r){var e,o,s;var u=!1;if(!(r!=null&&r.scopes)&&!(r!=null&&r.skipRestricted)&&!(!((e=r==null?void 0:r.exclude)===null||e===void 0)&&e.length))return{raw:t,restricted:[],hasExcludedProperties:u};var a={},h=[];for(var c in t)if(hv.test(c)&&i){var f=this.filter(t[c],n,!1,r);a[c]=f.raw,u=u||f.hasExcludedProperties,h.push.apply(h,f.restricted)}else{var f=n[c],l=f?f.scope!==void 0?f.scope:3:void 0;f!=null&&f.restricted&&h.push(c),!((o=r.exclude)===null||o===void 0)&&o.includes(c)||!(!((s=r.include)===null||s===void 0)&&s.includes(c))&&(l!==void 0&&r.scopes!==void 0&&!r.scopes.includes(l)||r.skipRestricted&&(f!=null&&f.restricted))?u=!0:a[c]=t[c]}return{raw:a,restricted:h,hasExcludedProperties:u}};t.prototype.toOverrides=function(t,n){var i=[];for(var r=0,e=Object.keys(t);r<e.length;r++){var o=e[r];if(hv.test(o)){var s={};for(var u in t[o])s[u]=t[o][u];i.push({identifiers:cv(o),keys:Object.keys(s),contents:Vl(s,n)})}}return i};return t}();var vB=function(){function t(t,n,i,r,e,o,s,u,a,h,c,f,l){this.key=t,this.overrides=n,this._value=i,this.overrideIdentifiers=r,this.defaultConfiguration=e,this.policyConfiguration=o,this.applicationConfiguration=s,this.userConfiguration=u,this.localUserConfiguration=a,this.remoteUserConfiguration=h,this.workspaceConfiguration=c,this.folderConfigurationModel=f,this.memoryConfigurationModel=l}t.prototype.toInspectValue=function(t){return(t==null?void 0:t.value)!==void 0||(t==null?void 0:t.override)!==void 0||(t==null?void 0:t.overrides)!==void 0?t:void 0};Object.defineProperty(t.prototype,"userInspectValue",{get:function(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"user",{get:function(){return this.toInspectValue(this.userInspectValue)},enumerable:false,configurable:true});return t}();var dB=function(){function t(t,n,i,r,e,o,s,u,a){if(e===void 0){e=new fB}if(o===void 0){o=new fB}if(s===void 0){s=new od}if(u===void 0){u=new fB}if(a===void 0){a=new od}this._defaultConfiguration=t,this._policyConfiguration=n,this._applicationConfiguration=i,this._localUserConfiguration=r,this._remoteUserConfiguration=e,this._workspaceConfiguration=o,this._folderConfigurations=s,this._memoryConfiguration=u,this._memoryConfigurationByResource=a,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new od,this._userConfiguration=null}t.prototype.getValue=function(t,n,i){return this.getConsolidatedConfigurationModel(t,n,i).getValue(t)};t.prototype.updateValue=function(t,n,i){if(i===void 0){i={}}var r;i.resource?(r=this._memoryConfigurationByResource.get(i.resource),r||(r=new fB,this._memoryConfigurationByResource.set(i.resource,r))):r=this._memoryConfiguration,n===void 0?r.removeValue(t):r.setValue(t,n),i.resource||(this._workspaceConsolidatedConfiguration=null)};t.prototype.inspect=function(t,n,i){var r=this.getConsolidatedConfigurationModel(t,n,i),e=this.getFolderConfigurationModelForResource(n.resource,i),o=n.resource&&this._memoryConfigurationByResource.get(n.resource)||this._memoryConfiguration,s=new Set;for(var u=0,a=r.overrides;u<a.length;u++){var h=a[u];for(var c=0,f=h.identifiers;c<f.length;c++){var l=f[c];r.getOverrideValue(t,l)!==void 0&&s.add(l)}}return new vB(t,n,r.getValue(t),s.size?__spreadArray([],s,true):void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,e||void 0,o)};Object.defineProperty(t.prototype,"applicationConfiguration",{get:function(){return this._applicationConfiguration},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"userConfiguration",{get:function(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"localUserConfiguration",{get:function(){return this._localUserConfiguration},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"remoteUserConfiguration",{get:function(){return this._remoteUserConfiguration},enumerable:false,configurable:true});t.prototype.getConsolidatedConfigurationModel=function(t,n,i){var r=this.getConsolidatedConfigurationModelForResource(n,i);return n.overrideIdentifier&&(r=r.override(n.overrideIdentifier)),this._policyConfiguration.isEmpty()||this._policyConfiguration.getValue(t)===void 0||(r=r.merge(this._policyConfiguration)),r};t.prototype.getConsolidatedConfigurationModelForResource=function(t,n){var i=t.resource;var r=this.getWorkspaceConsolidatedConfiguration();if(n&&i){var e=n.getFolder(i);e&&(r=this.getFolderConsolidatedConfiguration(e.uri)||r);var o=this._memoryConfigurationByResource.get(i);o&&(r=r.merge(o))}return r};t.prototype.getWorkspaceConsolidatedConfiguration=function(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration};t.prototype.getFolderConsolidatedConfiguration=function(t){var n=this._foldersConsolidatedConfigurations.get(t);if(!n){var i=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(t);r?(n=i.merge(r),this._foldersConsolidatedConfigurations.set(t,n)):n=i}return n};t.prototype.getFolderConfigurationModelForResource=function(t,n){if(n&&t){var i=n.getFolder(t);if(i)return this._folderConfigurations.get(i.uri)}};t.prototype.toData=function(){var t=this;return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:__spreadArray([],this._folderConfigurations.keys(),true).reduce((function(n,i){var r=t._folderConfigurations.get(i),e=r.contents,o=r.overrides,s=r.keys;return n.push([i,{contents:e,overrides:o,keys:s}]),n}),[])}};t.parse=function(n){var i=this;var r=this.parseConfigurationModel(n.defaults),e=this.parseConfigurationModel(n.policy),o=this.parseConfigurationModel(n.application),s=this.parseConfigurationModel(n.user),u=this.parseConfigurationModel(n.workspace),a=n.folders.reduce((function(t,n){return t.set(Cr.revive(n[0]),i.parseConfigurationModel(n[1])),t}),new od);return new t(r,e,o,s,new fB,u,a,new fB,new od)};t.parseConfigurationModel=function(t){return new fB(t.contents,t.keys,t.overrides)};return t}();var gB=function(){function t(t,n,i,r){this.change=t,this.previous=n,this.currentConfiguraiton=i,this.currentWorkspace=r,this._marker="\n",this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(var e=0,o=t.keys;e<o.length;e++){var s=o[e];this.affectedKeys.add(s)}for(var u=0,a=t.overrides;u<a.length;u++){var h=a[u],s=h[1];for(var c=0,f=s;c<f.length;c++){var l=f[c];this.affectedKeys.add(l)}}this._affectsConfigStr=this._marker;for(var v=0,d=this.affectedKeys;v<d.length;v++){var s=d[v];this._affectsConfigStr+=s+this._marker}}Object.defineProperty(t.prototype,"previousConfiguration",{get:function(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=dB.parse(this.previous.data)),this._previousConfiguration},enumerable:false,configurable:true});t.prototype.affectsConfiguration=function(t,n){var i;var r=this._marker+t,e=this._affectsConfigStr.indexOf(r);if(e<0)return!1;var o=e+r.length;if(o>=this._affectsConfigStr.length)return!1;var s=this._affectsConfigStr.charCodeAt(o);return s!==this._markerCode1&&s!==this._markerCode2?!1:n?!ot(this.previousConfiguration?this.previousConfiguration.getValue(t,n,(i=this.previous)===null||i===void 0?void 0:i.workspace):void 0,this.currentConfiguraiton.getValue(t,n,this.currentWorkspace)):!0};return t}();var pB={kind:0},wB={kind:1};var mB=function(){function t(n,i,r){var e;this._log=r,this._defaultKeybindings=n,this._defaultBoundCommands=new Map;for(var o=0,s=n;o<s.length;o++){var u=s[o];var a=u.command;a&&a.charAt(0)!=="-"&&this._defaultBoundCommands.set(a,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=t.handleRemovals([].concat(n).concat(i));for(var u=0,a=this._keybindings.length;u<a;u++){var h=this._keybindings[u];if(h.chords.length===0)continue;var c=(e=h.when)===null||e===void 0?void 0:e.substituteConstants();c&&c.type===0||this._addKeyPress(h.chords[0],h)}}t._isTargetedForRemoval=function(t,n,i){if(n){for(var r=0;r<n.length;r++)if(n[r]!==t.chords[r])return!1}return!(i&&i.type!==1&&(!t.when||!function(t,n){var i=t?t.substituteConstants():void 0,r=n?n.substituteConstants():void 0;return!i&&!r||!(!i||!r)&&i.equals(r)}(i,t.when)))};t.handleRemovals=function(t){var n=new Map;for(var i=0,r=t.length;i<r;i++){var e=t[i];if(e.command&&e.command.charAt(0)==="-"){var o=e.command.substring(1);n.has(o)?n.get(o).push(e):n.set(o,[e])}}if(n.size===0)return t;var s=[];for(var i=0,r=t.length;i<r;i++){var e=t[i];if(!e.command||e.command.length===0){s.push(e);continue}if(e.command.charAt(0)==="-")continue;var o=n.get(e.command);if(!o||!e.isDefault){s.push(e);continue}var u=!1;for(var a=0,h=o;a<h.length;a++){var c=h[a];var f=c.when;if(this._isTargetedForRemoval(e,c.chords,f)){u=!0;break}}u||s.push(e)}return s};t.prototype._addKeyPress=function(n,i){var r=this._map.get(n);if(r===void 0)return this._map.set(n,[i]),void this._addToLookupMap(i);for(var e=r.length-1;e>=0;e--){var o=r[e];if(o.command===i.command)continue;var s=!0;for(var u=1;u<o.chords.length&&u<i.chords.length;u++)if(o.chords[u]!==i.chords[u]){s=!1;break}s&&t.whenIsEntirelyIncluded(o.when,i.when)&&this._removeFromLookupMap(o)}r.push(i),this._addToLookupMap(i)};t.prototype._addToLookupMap=function(t){if(!t.command)return;var n=this._lookupMap.get(t.command);n===void 0?(n=[t],this._lookupMap.set(t.command,n)):n.push(t)};t.prototype._removeFromLookupMap=function(t){if(!t.command)return;var n=this._lookupMap.get(t.command);if(n!==void 0){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return void n.splice(i,1)}};t.whenIsEntirelyIncluded=function(t,n){return!n||n.type===1||!(!t||t.type===1)&&Zc(t,n)};t.prototype.getKeybindings=function(){return this._keybindings};t.prototype.lookupPrimaryKeybinding=function(t,n){var i=this._lookupMap.get(t);if(i===void 0||i.length===0)return null;if(i.length===1)return i[0];for(var r=i.length-1;r>=0;r--){var e=i[r];if(n.contextMatchesRules(e.when))return e}return i[i.length-1]};t.prototype.resolve=function(t,n,i){var r=__spreadArray(__spreadArray([],n,true),[i],false);this._log("| Resolving ".concat(r));var e=this._map.get(r[0]);if(e===void 0)return this._log("\\ No keybinding entries."),pB;var o=null;if(r.length<2)o=e;else{o=[];for(var s=0,u=e.length;s<u;s++){var a=e[s];if(r.length>a.chords.length)continue;var h=!0;for(var c=1;c<r.length;c++)if(a.chords[c]!==r[c]){h=!1;break}h&&o.push(a)}}var f=this._findCommand(t,o);return f?r.length<f.chords.length?(this._log("\\ From ".concat(o.length," keybinding entries, awaiting ").concat(f.chords.length-r.length," more chord(s), when: ").concat(bB(f.when),", source: ").concat(yB(f),".")),wB):(this._log("\\ From ".concat(o.length," keybinding entries, matched ").concat(f.command,", when: ").concat(bB(f.when),", source: ").concat(yB(f),".")),l=f.command,v=f.commandArgs,d=f.bubble,{kind:2,commandId:l,commandArgs:v,isBubble:d}):(this._log("\\ From ".concat(o.length," keybinding entries, no when clauses matched the context.")),pB);var l,v,d};t.prototype._findCommand=function(n,i){for(var r=i.length-1;r>=0;r--){var e=i[r];if(t._contextMatchesRules(n,e.when))return e}return null};t._contextMatchesRules=function(t,n){return!n||n.evaluate(t)};return t}();function bB(t){return t?"".concat(t.serialize()):"no when condition"}function yB(t){return t.extensionId?t.isBuiltinExtension?"built-in extension ".concat(t.extensionId):"user extension ".concat(t.extensionId):t.isDefault?"built-in":"user"}var _B=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;var kB=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s._contextKeyService=n,s._commandService=i,s._telemetryService=r,s._notificationService=e,s._logService=o,s._onDidUpdateKeybindings=s._register(new ki),s._currentChords=[],s._currentChordChecker=new Rs,s._currentChordStatusMessage=null,s._ignoreSingleModifiers=xB.EMPTY,s._currentSingleModifier=null,s._currentSingleModifierClearTimeout=new js,s._currentlyDispatchingCommandId=null,s._logging=!1;return s}Object.defineProperty(n.prototype,"onDidUpdateKeybindings",{get:function(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:wi.None},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"inChordMode",{get:function(){return this._currentChords.length>0},enumerable:false,configurable:true});n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype._log=function(t){this._logging&&this._logService.info("[KeybindingService]: ".concat(t))};n.prototype.getKeybindings=function(){return this._getResolver().getKeybindings()};n.prototype.lookupKeybinding=function(t,n){var i=this._getResolver().lookupPrimaryKeybinding(t,n||this._contextKeyService);if(i)return i.resolvedKeybinding};n.prototype.dispatchEvent=function(t,n){return this._dispatch(t,n)};n.prototype.softDispatch=function(t,n){this._log("/ Soft dispatching keyboard event");var i=this.resolveKeyboardEvent(t);if(i.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),pB;var r=i.getDispatchChords()[0];if(r===null)return this._log("\\ Keyboard event cannot be dispatched"),pB;var e=this._contextKeyService.getContext(n),o=this._currentChords.map((function(t){var n=t.keypress;return n}));return this._getResolver().resolve(e,o,r)};n.prototype._scheduleLeaveChordMode=function(){var t=this;var n=Date.now();this._currentChordChecker.cancelAndSet((function(){t._documentHasFocus()?Date.now()-n>5e3&&t._leaveChordMode():t._leaveChordMode()}),500)};n.prototype._expectAnotherChord=function(t,n){switch(this._currentChords.push({keypress:t,label:n}),this._currentChords.length){case 0:throw ti("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(ht(0,"({0}) was pressed. Waiting for second key of chord...",n));break;default:{var i=this._currentChords.map((function(t){var n=t.label;return n})).join(", ");this._currentChordStatusMessage=this._notificationService.status(ht(0,"({0}) was pressed. Waiting for next key of chord...",i))}}this._scheduleLeaveChordMode(),Qx.enabled&&Qx.disable()};n.prototype._leaveChordMode=function(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],Qx.enable()};n.prototype._dispatch=function(t,n){return this._doDispatch(this.resolveKeyboardEvent(t),n,!1)};n.prototype._singleModifierDispatch=function(t,n){var i=this;var r=this.resolveKeyboardEvent(t),e=r.getSingleModifierDispatchChords()[0];if(e)return this._ignoreSingleModifiers.has(e)?(this._log("+ Ignoring single modifier ".concat(e," due to it being pressed together with other keys.")),this._ignoreSingleModifiers=xB.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=xB.EMPTY,this._currentSingleModifier===null?(this._log("+ Storing single modifier for possible chord ".concat(e,".")),this._currentSingleModifier=e,this._currentSingleModifierClearTimeout.cancelAndSet((function(){i._log("+ Clearing single modifier due to 300ms elapsed."),i._currentSingleModifier=null}),300),!1):e===this._currentSingleModifier?(this._log("/ Dispatching single modifier chord ".concat(e," ").concat(e)),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(r,n,!0)):(this._log("+ Clearing single modifier due to modifier mismatch: ".concat(this._currentSingleModifier," ").concat(e)),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));var o=r.getChords()[0];return this._ignoreSingleModifiers=new xB(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1};n.prototype._doDispatch=function(t,n,i){var r=this;if(i===void 0){i=!1}var e;var o=!1;if(t.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;var s=null,u=null;if(i){var a=t.getSingleModifierDispatchChords()[0];s=a,u=a?[a]:[]}else s=t.getDispatchChords()[0],u=this._currentChords.map((function(t){var n=t.keypress;return n}));if(s===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),o;var h=this._contextKeyService.getContext(n),c=t.getLabel(),f=this._getResolver().resolve(h,u,s);switch(f.kind){case 0:if(this._logService.trace("KeybindingService#dispatch",c,"[ No matching keybinding ]"),this.inChordMode){var a=this._currentChords.map((function(t){var n=t.label;return n})).join(", ");this._log('+ Leaving multi-chord mode: Nothing bound to "'.concat(a,", ").concat(c,'".')),this._notificationService.status(ht(0,"The key combination ({0}, {1}) is not a command.",a,c),{hideAfter:1e4}),this._leaveChordMode(),o=!0}return o;case 1:return this._logService.trace("KeybindingService#dispatch",c,"[ Several keybindings match - more chords needed ]"),o=!0,this._expectAnotherChord(s,c),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),o;case 2:if(this._logService.trace("KeybindingService#dispatch",c,"[ Will dispatch command ".concat(f.commandId," ]")),f.commandId===null||f.commandId===""){if(this.inChordMode){var a=this._currentChords.map((function(t){var n=t.label;return n})).join(", ");this._log('+ Leaving chord mode: Nothing bound to "'.concat(a,", ").concat(c,'".')),this._notificationService.status(ht(0,"The key combination ({0}, {1}) is not a command.",a,c),{hideAfter:1e4}),this._leaveChordMode(),o=!0}}else{this.inChordMode&&this._leaveChordMode(),f.isBubble||(o=!0),this._log("+ Invoking command ".concat(f.commandId,".")),this._currentlyDispatchingCommandId=f.commandId;try{f.commandArgs===void 0?this._commandService.executeCommand(f.commandId).then(void 0,(function(t){return r._notificationService.warn(t)})):this._commandService.executeCommand(f.commandId,f.commandArgs).then(void 0,(function(t){return r._notificationService.warn(t)}))}finally{this._currentlyDispatchingCommandId=null}_B.test(f.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:f.commandId,from:"keybinding",detail:(e=t.getUserSettingsLabel())!==null&&e!==void 0?e:void 0})}return o}};n.prototype.mightProducePrintableCharacter=function(t){return!t.ctrlKey&&!t.metaKey&&(t.keyCode>=31&&t.keyCode<=56||t.keyCode>=21&&t.keyCode<=30)};return n}(ci);var xB=function(){function t(t){this._ctrlKey=!!t&&t.ctrlKey,this._shiftKey=!!t&&t.shiftKey,this._altKey=!!t&&t.altKey,this._metaKey=!!t&&t.metaKey}t.prototype.has=function(t){switch(t){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}};return t}();xB.EMPTY=new xB(null);var CB=function(){function t(t,n,i,r,e,o,s){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=t,this.chords=t?SB(t.getDispatchChords()):[],t&&this.chords.length===0&&(this.chords=SB(t.getSingleModifierDispatchChords())),this.bubble=!!n&&n.charCodeAt(0)===94,this.command=this.bubble?n.substr(1):n,this.commandArgs=i,this.when=r,this.isDefault=e,this.extensionId=o,this.isBuiltinExtension=s}return t}();function SB(t){var n=[];for(var i=0,r=t.length;i<r;i++){var e=t[i];if(!e)return[];n.push(e)}return n}var DB=function(){function t(t,n,i){if(i===void 0){i=n}this.modifierLabels=[null],this.modifierLabels[2]=t,this.modifierLabels[1]=n,this.modifierLabels[3]=i}t.prototype.toLabel=function(t,n,i){if(n.length===0)return null;var r=[];for(var e=0,o=n.length;e<o;e++){var s=n[e],u=i(s);if(u===null)return null;r[e]=FB(s,u,this.modifierLabels[t])}return r.join(" ")};return t}();var AB=new DB({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:ht(0,"Ctrl"),shiftKey:ht(0,"Shift"),altKey:ht(0,"Alt"),metaKey:ht(0,"Windows"),separator:"+"},{ctrlKey:ht(0,"Ctrl"),shiftKey:ht(0,"Shift"),altKey:ht(0,"Alt"),metaKey:ht(0,"Super"),separator:"+"}),OB=new DB({ctrlKey:ht(0,"Control"),shiftKey:ht(0,"Shift"),altKey:ht(0,"Option"),metaKey:ht(0,"Command"),separator:"+"},{ctrlKey:ht(0,"Control"),shiftKey:ht(0,"Shift"),altKey:ht(0,"Alt"),metaKey:ht(0,"Windows"),separator:"+"},{ctrlKey:ht(0,"Control"),shiftKey:ht(0,"Shift"),altKey:ht(0,"Alt"),metaKey:ht(0,"Super"),separator:"+"}),EB=new DB({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),MB=new DB({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function FB(t,n,i){if(n===null)return"";var r=[];return t.ctrlKey&&r.push(i.ctrlKey),t.shiftKey&&r.push(i.shiftKey),t.altKey&&r.push(i.altKey),t.metaKey&&r.push(i.metaKey),n!==""&&r.push(n),r.join(i.separator)}var LB=function(t){__extends(n,t);function n(n,i){var r=this;if(r=t.call(this)||this,i.length===0)throw Xn("chords");r._os=n,r._chords=i;return r}n.prototype.getLabel=function(){var t=this;return AB.toLabel(this._os,this._chords,(function(n){return t._getLabel(n)}))};n.prototype.getAriaLabel=function(){var t=this;return OB.toLabel(this._os,this._chords,(function(n){return t._getAriaLabel(n)}))};n.prototype.getElectronAccelerator=function(){var t=this;return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:EB.toLabel(this._os,this._chords,(function(n){return t._getElectronAccelerator(n)}))};n.prototype.getUserSettingsLabel=function(){var t=this;return MB.toLabel(this._os,this._chords,(function(n){return t._getUserSettingsLabel(n)}))};n.prototype.hasMultipleChords=function(){return this._chords.length>1};n.prototype.getChords=function(){var t=this;return this._chords.map((function(n){return t._getChord(n)}))};n.prototype._getChord=function(t){return new vs(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,this._getLabel(t),this._getAriaLabel(t))};n.prototype.getDispatchChords=function(){var t=this;return this._chords.map((function(n){return t._getChordDispatch(n)}))};n.prototype.getSingleModifierDispatchChords=function(){var t=this;return this._chords.map((function(n){return t._getSingleModifierChordDispatch(n)}))};return n}(ds);var jB=function(t){__extends(n,t);function n(n,i){return t.call(this,i,n)||this}n.prototype._keyCodeToUILabel=function(t){if(this._os===2)switch(t){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return zi.toString(t)};n.prototype._getLabel=function(t){return t.isDuplicateModifierCase()?"":this._keyCodeToUILabel(t.keyCode)};n.prototype._getAriaLabel=function(t){return t.isDuplicateModifierCase()?"":zi.toString(t.keyCode)};n.prototype._getElectronAccelerator=function(t){return zi.toElectronAccelerator(t.keyCode)};n.prototype._getUserSettingsLabel=function(t){if(t.isDuplicateModifierCase())return"";var n=zi.toUserSettingsUS(t.keyCode);return n&&n.toLowerCase()};n.prototype._getChordDispatch=function(t){return n.getDispatchStr(t)};n.getDispatchStr=function(t){if(t.isModifierKey())return null;var n="";return t.ctrlKey&&(n+="ctrl+"),t.shiftKey&&(n+="shift+"),t.altKey&&(n+="alt+"),t.metaKey&&(n+="meta+"),n+=zi.toString(t.keyCode),n};n.prototype._getSingleModifierChordDispatch=function(t){return t.keyCode!==5||t.shiftKey||t.altKey||t.metaKey?t.keyCode!==4||t.ctrlKey||t.altKey||t.metaKey?t.keyCode!==6||t.ctrlKey||t.shiftKey||t.metaKey?t.keyCode!==57||t.ctrlKey||t.shiftKey||t.altKey?null:"meta":"alt":"shift":"ctrl"};n._scanCodeToKeyCode=function(t){var n=Hi[t];if(n!==-1)return n;switch(t){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0};n._toKeyCodeChord=function(t){if(!t)return null;if(t instanceof fs)return t;var n=this._scanCodeToKeyCode(t.scanCode);return n===0?null:new fs(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,n)};n.resolveKeybinding=function(t,i){var r=this;var e=SB(t.chords.map((function(t){return r._toKeyCodeChord(t)})));return e.length>0?[new n(e,i)]:[]};return n}(LB);var RB=Zh("labelService"),TB=Zh("progressService");var IB=function(){function t(t){this.callback=t}t.prototype.report=function(t){this._value=t,this.callback(this._value)};return t}();IB.None=Object.freeze({report:function(){}});var BB=Zh("editorProgressService");var NB=function(){function t(){this._value="",this._pos=0}t.prototype.reset=function(t){return this._value=t,this._pos=0,this};t.prototype.next=function(){return this._pos+=1,this};t.prototype.hasNext=function(){return this._pos<this._value.length-1};t.prototype.cmp=function(t){return t.charCodeAt(0)-this._value.charCodeAt(this._pos)};t.prototype.value=function(){return this._value[this._pos]};return t}();var PB=function(){function t(t){if(t===void 0){t=!0}this._caseSensitive=t}t.prototype.reset=function(t){return this._value=t,this._from=0,this._to=0,this.next()};t.prototype.hasNext=function(){return this._to<this._value.length};t.prototype.next=function(){this._from=this._to;var t=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46){if(!t)break;this._from++}else t=!1;return this};t.prototype.cmp=function(t){return this._caseSensitive?mo(t,this._value,0,t.length,this._from,this._to):yo(t,this._value,0,t.length,this._from,this._to)};t.prototype.value=function(){return this._value.substring(this._from,this._to)};return t}();var WB=function(){function t(t,n){if(t===void 0){t=!0}if(n===void 0){n=!0}this._splitOnBackslash=t,this._caseSensitive=n}t.prototype.reset=function(t){this._from=0,this._to=0,this._value=t,this._valueLen=t.length;for(var n=t.length-1;n>=0;n--,this._valueLen--){var i=this._value.charCodeAt(n);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()};t.prototype.hasNext=function(){return this._to<this._valueLen};t.prototype.next=function(){this._from=this._to;var t=!0;for(;this._to<this._valueLen;this._to++){var n=this._value.charCodeAt(this._to);if(n===47||this._splitOnBackslash&&n===92){if(!t)break;this._from++}else t=!1}return this};t.prototype.cmp=function(t){return this._caseSensitive?mo(t,this._value,0,t.length,this._from,this._to):yo(t,this._value,0,t.length,this._from,this._to)};t.prototype.value=function(){return this._value.substring(this._from,this._to)};return t}();var HB=function(){function t(t,n){this._ignorePathCasing=t,this._ignoreQueryAndFragment=n,this._states=[],this._stateIdx=0}t.prototype.reset=function(t){return this._value=t,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new WB(!1,!this._ignorePathCasing(t)),this._pathIterator.reset(t.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(t)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this};t.prototype.next=function(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this};t.prototype.hasNext=function(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1};t.prototype.cmp=function(t){if(this._states[this._stateIdx]===1)return bo(t,this._value.scheme);if(this._states[this._stateIdx]===2)return bo(t,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(t);if(this._states[this._stateIdx]===4)return wo(t,this._value.query);if(this._states[this._stateIdx]===5)return wo(t,this._value.fragment);throw new Error};t.prototype.value=function(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error};return t}();var zB=function(){function t(){this.height=1}t.prototype.rotateLeft=function(){var t=this.right;return this.right=t.left,t.left=this,this.updateHeight(),t.updateHeight(),t};t.prototype.rotateRight=function(){var t=this.left;return this.left=t.right,t.right=this,this.updateHeight(),t.updateHeight(),t};t.prototype.updateHeight=function(){this.height=1+Math.max(this.heightLeft,this.heightRight)};t.prototype.balanceFactor=function(){return this.heightRight-this.heightLeft};Object.defineProperty(t.prototype,"heightLeft",{get:function(){var t,n;return(n=(t=this.left)===null||t===void 0?void 0:t.height)!==null&&n!==void 0?n:0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"heightRight",{get:function(){var t,n;return(n=(t=this.right)===null||t===void 0?void 0:t.height)!==null&&n!==void 0?n:0},enumerable:false,configurable:true});return t}();var UB=function(){function t(t){this._iter=t}t.forUris=function(n,i){if(n===void 0){n=function(){return!1}}if(i===void 0){i=function(){return!1}}return new t(new HB(n,i))};t.forStrings=function(){return new t(new NB)};t.forConfigKeys=function(){return new t(new PB)};t.prototype.clear=function(){this._root=void 0};t.prototype.set=function(t,n){var i=this._iter.reset(t);var r;this._root||(this._root=new zB,this._root.segment=i.value());var e=[];for(r=this._root;;){var o=i.cmp(r.segment);if(o>0)r.left||(r.left=new zB,r.left.segment=i.value()),e.push([-1,r]),r=r.left;else if(o<0)r.right||(r.right=new zB,r.right.segment=i.value()),e.push([1,r]),r=r.right;else{if(!i.hasNext())break;i.next(),r.mid||(r.mid=new zB,r.mid.segment=i.value()),e.push([0,r]),r=r.mid}}var s=r.value;r.value=n,r.key=t;for(var o=e.length-1;o>=0;o--){var u=e[o][1];u.updateHeight();var a=u.balanceFactor();if(a<-1||a>1){var h=e[o][0],c=e[o+1][0];if(h===1&&c===1)e[o][1]=u.rotateLeft();else if(h===-1&&c===-1)e[o][1]=u.rotateRight();else if(h===1&&c===-1)u.right=e[o+1][1]=e[o+1][1].rotateRight(),e[o][1]=u.rotateLeft();else{if(h!==-1||c!==1)throw new Error;u.left=e[o+1][1]=e[o+1][1].rotateLeft(),e[o][1]=u.rotateRight()}if(o>0)switch(e[o-1][0]){case-1:e[o-1][1].left=e[o][1];break;case 1:e[o-1][1].right=e[o][1];break;case 0:e[o-1][1].mid=e[o][1]}else this._root=e[0][1]}}return s};t.prototype.get=function(t){var n;return(n=this._getNode(t))===null||n===void 0?void 0:n.value};t.prototype._getNode=function(t){var n=this._iter.reset(t);var i=this._root;for(;i;){var r=n.cmp(i.segment);if(r>0)i=i.left;else if(r<0)i=i.right;else{if(!n.hasNext())break;n.next(),i=i.mid}}return i};t.prototype.has=function(t){var n=this._getNode(t);return!((n==null?void 0:n.value)===void 0&&(n==null?void 0:n.mid)===void 0)};t.prototype.delete=function(t){return this._delete(t,!1)};t.prototype.deleteSuperstr=function(t){return this._delete(t,!0)};t.prototype._delete=function(t,n){var i;var r=this._iter.reset(t),e=[];var o=this._root;for(;o;){var s=r.cmp(o.segment);if(s>0)e.push([-1,o]),o=o.left;else if(s<0)e.push([1,o]),o=o.right;else{if(!r.hasNext())break;r.next(),e.push([0,o]),o=o.mid}}if(o){if(n?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){var s=this._min(o.right);if(s.key){var u=s.key,a=s.value,h=s.segment;this._delete(s.key,!1),o.key=u,o.value=a,o.segment=h}}else{var s=(i=o.left)!==null&&i!==void 0?i:o.right;if(e.length>0){var c=e[e.length-1],u=c[0],a=c[1];switch(u){case-1:a.left=s;break;case 0:a.mid=s;break;case 1:a.right=s}}else this._root=s}for(var s=e.length-1;s>=0;s--){var u=e[s][1];u.updateHeight();var a=u.balanceFactor();if(a>1?(u.right.balanceFactor()>=0||(u.right=u.right.rotateRight()),e[s][1]=u.rotateLeft()):a<-1&&(u.left.balanceFactor()<=0||(u.left=u.left.rotateLeft()),e[s][1]=u.rotateRight()),s>0)switch(e[s-1][0]){case-1:e[s-1][1].left=e[s][1];break;case 1:e[s-1][1].right=e[s][1];break;case 0:e[s-1][1].mid=e[s][1]}else this._root=e[0][1]}}};t.prototype._min=function(t){for(;t.left;)t=t.left;return t};t.prototype.findSubstr=function(t){var n=this._iter.reset(t);var i,r=this._root;for(;r;){var e=n.cmp(r.segment);if(e>0)r=r.left;else if(e<0)r=r.right;else{if(!n.hasNext())break;n.next(),i=r.value||i,r=r.mid}}return r&&r.value||i};t.prototype.findSuperstr=function(t){return this._findSuperstrOrElement(t,!1)};t.prototype._findSuperstrOrElement=function(t,n){var i=this._iter.reset(t);var r=this._root;for(;r;){var e=i.cmp(r.segment);if(e>0)r=r.left;else if(e<0)r=r.right;else{if(!i.hasNext())return r.mid?this._entries(r.mid):n?r.value:void 0;i.next(),r=r.mid}}};t.prototype.forEach=function(t){for(var n=0,i=this;n<i.length;n++){var r=i[n],e=r[0],o=r[1];t(o,e)}};t.prototype[Symbol.iterator]=function(){return __generator(this,(function(t){switch(t.label){case 0:return[5,__values(this._entries(this._root))];case 1:t.sent();return[2]}}))};t.prototype._entries=function(t){var n=[];return this._dfsEntries(t,n),n[Symbol.iterator]()};t.prototype._dfsEntries=function(t,n){t&&(t.left&&this._dfsEntries(t.left,n),t.value&&n.push([t.key,t.value]),t.mid&&this._dfsEntries(t.mid,n),t.right&&this._dfsEntries(t.right,n))};return t}();var KB=Zh("contextService");function VB(t){var n=t;return typeof(n==null?void 0:n.id)=="string"&&Cr.isUri(n.uri)}function qB(t){var n=t;return typeof(n==null?void 0:n.id)=="string"&&!VB(t)&&!function(t){var n=t;return typeof(n==null?void 0:n.id)=="string"&&Cr.isUri(n.configPath)}(t)}var GB={id:"empty-window"};var $B=function(){function t(t,n){this.raw=n,this.uri=t.uri,this.index=t.index,this.name=t.name}t.prototype.toJSON=function(){return{uri:this.uri,name:this.name,index:this.index}};return t}();var JB="code-workspace";ht(0,"Code Workspace");var ZB="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var QB,YB,XB,tN,nN,iN,rN,eN;(function(t){t.inspectTokensAction=ht(0,"Developer: Inspect Tokens")})(QB||(QB={})),function(t){t.gotoLineActionLabel=ht(0,"Go to Line/Column...")}(YB||(YB={})),function(t){t.helpQuickAccessActionLabel=ht(0,"Show all Quick Access Providers")}(XB||(XB={})),function(t){t.quickCommandActionLabel=ht(0,"Command Palette"),t.quickCommandHelp=ht(0,"Show And Run Commands")}(tN||(tN={})),function(t){t.quickOutlineActionLabel=ht(0,"Go to Symbol..."),t.quickOutlineByCategoryActionLabel=ht(0,"Go to Symbol by Category...")}(nN||(nN={})),function(t){t.editorViewAccessibleLabel=ht(0,"Editor content"),t.accessibilityHelpMessage=ht(0,"Press Alt+F1 for Accessibility Options.")}(iN||(iN={})),function(t){t.toggleHighContrast=ht(0,"Toggle High Contrast Theme")}(rN||(rN={})),function(t){t.bulkEditServiceSummary=ht(0,"Made {0} edits in {1} files")}(eN||(eN={}));var oN=Zh("workspaceTrustManagementService");var sN=[],uN=[],aN=[];function hN(t,n){if(n===void 0){n=!1}(function(t,n,i){var r=function(t,n){return{id:t.id,mime:t.mime,filename:t.filename,extension:t.extension,filepattern:t.filepattern,firstline:t.firstline,userConfigured:n,filenameLowercase:t.filename?t.filename.toLowerCase():void 0,extensionLowercase:t.extension?t.extension.toLowerCase():void 0,filepatternLowercase:t.filepattern?hR(t.filepattern.toLowerCase()):void 0,filepatternOnPath:!!t.filepattern&&t.filepattern.indexOf(cr.sep)>=0}}(t,n);sN.push(r),r.userConfigured?aN.push(r):uN.push(r),i&&!r.userConfigured&&sN.forEach((function(t){t.mime===r.mime||t.userConfigured||(r.extension&&t.extension===r.extension&&console.warn("Overwriting extension <<".concat(r.extension,">> to now point to mime <<").concat(r.mime,">>")),r.filename&&t.filename===r.filename&&console.warn("Overwriting filename <<".concat(r.filename,">> to now point to mime <<").concat(r.mime,">>")),r.filepattern&&t.filepattern===r.filepattern&&console.warn("Overwriting filepattern <<".concat(r.filepattern,">> to now point to mime <<").concat(r.mime,">>")),r.firstline&&t.firstline===r.firstline&&console.warn("Overwriting firstline <<".concat(r.firstline,">> to now point to mime <<").concat(r.mime,">>")))}))})(t,!1,n)}function cN(t,n){return function(t,n){var i;if(t)switch(t.scheme){case Uu.file:i=t.fsPath;break;case Uu.data:i=GO.parseMetaData(t).get(GO.META_DATA_LABEL);break;case Uu.vscodeNotebookCell:i=void 0;break;default:i=t.path}if(!i)return[{id:"unknown",mime:nv.unknown}];i=i.toLowerCase();var r=gr(i),e=fN(i,r,aN);if(e)return[e,{id:dv,mime:nv.text}];var o=fN(i,r,uN);if(o)return[o,{id:dv,mime:nv.text}];if(n){var s=function(t){if(Vo(t)&&(t=t.substr(1)),t.length>0)for(var n=sN.length-1;n>=0;n--){var i=sN[n];if(!i.firstline)continue;var r=t.match(i.firstline);if(r&&r.length>0)return i}}(n);if(s)return[s,{id:dv,mime:nv.text}]}return[{id:"unknown",mime:nv.unknown}]}(t,n).map((function(t){return t.id}))}function fN(t,n,i){var r;var e,o,s;for(var u=i.length-1;u>=0;u--){var a=i[u];if(n===a.filenameLowercase){e=a;break}if(a.filepattern&&(!o||a.filepattern.length>o.filepattern.length)){var h=a.filepatternOnPath?t:n;!((r=a.filepatternLowercase)===null||r===void 0)&&r.call(a,h)&&(o=a)}a.extension&&(!s||a.extension.length>s.extension.length)&&n.endsWith(a.extensionLowercase)&&(s=a)}return e||o||s||void 0}var lN=Object.prototype.hasOwnProperty,vN="vs.editor.nullLanguage";var dN=function(){function t(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(vN,0),this._register(dv,1),this._nextLanguageId=2}t.prototype._register=function(t,n){this._languageIdToLanguage[n]=t,this._languageToLanguageId.set(t,n)};t.prototype.register=function(t){if(this._languageToLanguageId.has(t))return;var n=this._nextLanguageId++;this._register(t,n)};t.prototype.encodeLanguageId=function(t){return this._languageToLanguageId.get(t)||0};t.prototype.decodeLanguageId=function(t){return this._languageIdToLanguage[t]||vN};return t}();var gN=function(t){__extends(n,t);function n(i,r){if(i===void 0){i=!0}if(r===void 0){r=!1}var e=this;e=t.call(this)||this,e._onDidChange=e._register(new ki),e.onDidChange=e._onDidChange.event,n.instanceCount++,e._warnOnOverwrite=r,e.languageIdCodec=new dN,e._dynamicLanguages=[],e._languages={},e._mimeTypesMap={},e._nameMap={},e._lowercaseNameMap={},i&&(e._initializeFromRegistry(),e._register(vv.onDidChangeLanguages((function(t){e._initializeFromRegistry()}))));return e}n.prototype.dispose=function(){n.instanceCount--,t.prototype.dispose.call(this)};n.prototype._initializeFromRegistry=function(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},sN=sN.filter((function(t){return t.userConfigured})),uN=[];var t=[].concat(vv.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(t)};n.prototype._registerLanguages=function(t){var n=this;for(var i=0,r=t;i<r.length;i++){var e=r[i];this._registerLanguage(e)}this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach((function(t){var i=n._languages[t];i.name&&(n._nameMap[i.name]=i.identifier),i.aliases.forEach((function(t){n._lowercaseNameMap[t.toLowerCase()]=i.identifier})),i.mimetypes.forEach((function(t){n._mimeTypesMap[t]=i.identifier}))})),of.as(ev).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()};n.prototype._registerLanguage=function(t){var n=t.id;var i;lN.call(this._languages,n)?i=this._languages[n]:(this.languageIdCodec.register(n),i={identifier:n,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[n]=i),this._mergeLanguage(i,t)};n.prototype._mergeLanguage=function(t,n){var i;var r=n.id;var e=null;if(Array.isArray(n.mimetypes)&&n.mimetypes.length>0&&((i=t.mimetypes).push.apply(i,n.mimetypes),e=n.mimetypes[0]),e||(e="text/x-".concat(r),t.mimetypes.push(e)),Array.isArray(n.extensions)){n.configuration?t.extensions=n.extensions.concat(t.extensions):t.extensions=t.extensions.concat(n.extensions);for(var o=0,s=n.extensions;o<s.length;o++){var u=s[o];hN({id:r,mime:e,extension:u},this._warnOnOverwrite)}}if(Array.isArray(n.filenames))for(var a=0,h=n.filenames;a<h.length;a++){var u=h[a];hN({id:r,mime:e,filename:u},this._warnOnOverwrite),t.filenames.push(u)}if(Array.isArray(n.filenamePatterns))for(var c=0,f=n.filenamePatterns;c<f.length;c++){var u=f[c];hN({id:r,mime:e,filepattern:u},this._warnOnOverwrite)}if(typeof n.firstLine=="string"&&n.firstLine.length>0){var u=n.firstLine;u.charAt(0)!=="^"&&(u="^"+u);try{var l=new RegExp(u);(v=l).source!=="^"&&v.source!=="^$"&&v.source!=="$"&&v.source!=="^\\s*$"&&v.exec("")&&v.lastIndex===0||hN({id:r,mime:e,firstline:l},this._warnOnOverwrite)}catch(l){console.warn("[".concat(n.id,"]: Invalid regular expression `").concat(u,"`: "),l)}}var v;t.aliases.push(r);var d=null;if(n.aliases!==void 0&&Array.isArray(n.aliases)&&(d=n.aliases.length===0?[null]:n.aliases),d!==null)for(var g=0,p=d;g<p.length;g++){var u=p[g];u&&u.length!==0&&t.aliases.push(u)}var w=d!==null&&d.length>0;if(!(w&&d[0]===null)){var u=(w?d[0]:null)||r;!w&&t.name||(t.name=u)}n.configuration&&t.configurationFiles.push(n.configuration),n.icon&&t.icons.push(n.icon)};n.prototype.isRegisteredLanguageId=function(t){return!!t&&lN.call(this._languages,t)};n.prototype.getRegisteredLanguageIds=function(){return Object.keys(this._languages)};n.prototype.getLanguageIdByLanguageName=function(t){var n=t.toLowerCase();return lN.call(this._lowercaseNameMap,n)?this._lowercaseNameMap[n]:null};n.prototype.getLanguageIdByMimeType=function(t){return t&&lN.call(this._mimeTypesMap,t)?this._mimeTypesMap[t]:null};n.prototype.guessLanguageIdByFilepathOrFirstLine=function(t,n){return t||n?cN(t,n):[]};return n}(ci);gN.instanceCount=0;var pN=function(t){__extends(n,t);function n(i){if(i===void 0){i=!1}var r=this;r=t.call(this)||this,r._onDidRequestBasicLanguageFeatures=r._register(new ki),r.onDidRequestBasicLanguageFeatures=r._onDidRequestBasicLanguageFeatures.event,r._onDidRequestRichLanguageFeatures=r._register(new ki),r.onDidRequestRichLanguageFeatures=r._onDidRequestRichLanguageFeatures.event,r._onDidChange=r._register(new ki({leakWarningThreshold:200})),r.onDidChange=r._onDidChange.event,r._requestedBasicLanguages=new Set,r._requestedRichLanguages=new Set,n.instanceCount++,r._registry=r._register(new gN(!0,i)),r.languageIdCodec=r._registry.languageIdCodec,r._register(r._registry.onDidChange((function(){return r._onDidChange.fire()})));return r}n.prototype.dispose=function(){n.instanceCount--,t.prototype.dispose.call(this)};n.prototype.isRegisteredLanguageId=function(t){return this._registry.isRegisteredLanguageId(t)};n.prototype.getLanguageIdByLanguageName=function(t){return this._registry.getLanguageIdByLanguageName(t)};n.prototype.getLanguageIdByMimeType=function(t){return this._registry.getLanguageIdByMimeType(t)};n.prototype.guessLanguageIdByFilepathOrFirstLine=function(t,n){return C(this._registry.guessLanguageIdByFilepathOrFirstLine(t,n),null)};n.prototype.createById=function(t){var n=this;return new wN(this.onDidChange,(function(){return n._createAndGetLanguageIdentifier(t)}))};n.prototype.createByFilepathOrFirstLine=function(t,n){var i=this;return new wN(this.onDidChange,(function(){var r=i.guessLanguageIdByFilepathOrFirstLine(t,n);return i._createAndGetLanguageIdentifier(r)}))};n.prototype._createAndGetLanguageIdentifier=function(t){return t&&this.isRegisteredLanguageId(t)||(t=dv),t};n.prototype.requestBasicLanguageFeatures=function(t){this._requestedBasicLanguages.has(t)||(this._requestedBasicLanguages.add(t),this._onDidRequestBasicLanguageFeatures.fire(t))};n.prototype.requestRichLanguageFeatures=function(t){this._requestedRichLanguages.has(t)||(this._requestedRichLanguages.add(t),this.requestBasicLanguageFeatures(t),oe.getOrCreate(t),this._onDidRequestRichLanguageFeatures.fire(t))};return n}(ci);pN.instanceCount=0;var wN=function(){function t(t,n){this._onDidChangeLanguages=t,this._selector=n,this._listener=null,this._emitter=null,this.languageId=this._selector()}t.prototype._dispose=function(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)};Object.defineProperty(t.prototype,"onDidChange",{get:function(){var t=this;return this._listener||(this._listener=this._onDidChangeLanguages((function(){return t._evaluate()}))),this._emitter||(this._emitter=new ki({onDidRemoveLastListener:function(){t._dispose()}})),this._emitter.event},enumerable:false,configurable:true});t.prototype._evaluate=function(){var t;var n=this._selector();n!==this.languageId&&(this.languageId=n,(t=this._emitter)===null||t===void 0||t.fire(this.languageId))};return t}();var mN={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:nv.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};var bN=function(){return{get delay(){return-1},dispose:function(){},showHover:function(){}}};var yN=new no((function(){return bN("mouse",!1)})),_N=new no((function(){return bN("element",!1)}));function kN(t){return t==="element"?_N.value:yN.value}function xN(){return bN("element",!0)}var CN=function(){function t(t,n,i){this.hoverDelegate=t,this.target=n,this.fadeInAnimation=i}t.prototype.update=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o;return __generator(this,(function(s){switch(s.label){case 0:if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return[2];if(!(t===void 0||H(t)||t instanceof HTMLElement))return[3,1];e=t;return[3,4];case 1:if(!Y(t.markdown))return[3,3];this._hoverWidget||this.show(ht(0,"Loading..."),n),this._cancellationTokenSource=new ji;o=this._cancellationTokenSource.token;return[4,t.markdown(o)];case 2:if(e=s.sent(),e===void 0&&(e=t.markdownNotSupportedFallback),this.isDisposed||o.isCancellationRequested)return[2];return[3,4];case 3:e=(r=t.markdown)!==null&&r!==void 0?r:t.markdownNotSupportedFallback;s.label=4;case 4:this.show(e,n,i);return[2]}}))}))};t.prototype.show=function(t,n,i){var r=this._hoverWidget;if(this.hasContent(t)){var e=__assign({content:t,target:this.target,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!r},position:{hoverPosition:2}},i);this._hoverWidget=this.hoverDelegate.showHover(e,n)}r==null||r.dispose()};t.prototype.hasContent=function(t){return!!t&&(!GT(t)||!!t.value)};Object.defineProperty(t.prototype,"isDisposed",{get:function(){var t;return(t=this._hoverWidget)===null||t===void 0?void 0:t.isDisposed},enumerable:false,configurable:true});t.prototype.dispose=function(){var t,n;(t=this._hoverWidget)===null||t===void 0||t.dispose(),(n=this._cancellationTokenSource)===null||n===void 0||n.dispose(!0),this._cancellationTokenSource=void 0};return t}();function SN(t,n){for(n=n!==null&&n!==void 0?n:sa(t).document.body;!t.hasAttribute("custom-hover")&&t!==n;)t=t.parentElement;return t}function DN(t,n,i,r){var e=this;var o,s;n.setAttribute("custom-hover","true"),n.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",n.title),n.title="");var u=function(n,i){var r;var e=s!==void 0;n&&(s==null||s.dispose(),s=void 0),i&&(o==null||o.dispose(),o=void 0),e&&((r=t.onDidHideHover)===null||r===void 0||r.call(t),s=void 0)},a=function(o,u,a){return new js((function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(h){switch(h.label){case 0:e=s&&!s.isDisposed;if(e)return[3,2];s=new CN(t,a||n,o>0);return[4,s.update(typeof i=="function"?i():i,u,r)];case 1:e=h.sent();h.label=2;case 2:e;return[2]}}))}))}),o)};var h=!1;var c=ma(n,ah.MOUSE_DOWN,(function(){h=!0,u(!0,!0)}),!0),f=ma(n,ah.MOUSE_UP,(function(){h=!1}),!0),l=ma(n,ah.MOUSE_LEAVE,(function(t){h=!1,u(!1,t.fromElement===n)}),!0),v=ma(n,ah.MOUSE_OVER,(function(i){if(o)return;var r=new hi,e={targetElements:[n],dispose:function(){}};if(t.placement===void 0||t.placement==="mouse"){var s=function(t){e.x=t.x+10,t.target instanceof HTMLElement&&SN(t.target,n)!==n&&u(!0,!0)};r.add(ma(n,ah.MOUSE_MOVE,s,!0))}o=r,i.target instanceof HTMLElement&&SN(i.target,n)!==n||r.add(a(t.delay,!1,e))}),!0),d=function(){if(h||o)return;var i={targetElements:[n],dispose:function(){}},r=new hi;r.add(ma(n,ah.BLUR,(function(){return u(!0,!0)}),!0)),r.add(a(t.delay,!1,i)),o=r};var g;var p=n.tagName.toLowerCase();return p!=="input"&&p!=="textarea"&&(g=ma(n,ah.FOCUS,d,!0)),{show:function(t){u(!1,!0),a(0,t)},hide:function(){u(!0,!0)},update:function(t,n){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(r){switch(r.label){case 0:i=t;return[4,s==null?void 0:s.update(i,void 0,n)];case 1:r.sent();return[2]}}))}))},dispose:function(){v.dispose(),l.dispose(),c.dispose(),f.dispose(),g==null||g.dispose(),u(!0,!0)}}}var AN=function(){function t(t){this.spliceables=t}t.prototype.splice=function(t,n,i){this.spliceables.forEach((function(r){return r.splice(t,n,i)}))};return t}();var ON=function(t){__extends(n,t);function n(n,i){return t.call(this,"ListError [".concat(n,"] ").concat(i))||this}return n}(Error);function EN(t,n){var i=[];for(var r=0,e=n;r<e.length;r++){var o=e[r];if(t.start>=o.range.end)continue;if(t.end<o.range.start)break;var s=BI.intersect(t,o.range);BI.isEmpty(s)||i.push({range:s,size:o.size})}return i}function MN(t,n){var i=t.start,r=t.end;return{start:i+n,end:r+n}}var FN=function(){function t(t){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=t!==null&&t!==void 0?t:0,this._size=this._paddingTop}Object.defineProperty(t.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){this._size=this._size+t-this._paddingTop,this._paddingTop=t},enumerable:false,configurable:true});t.prototype.splice=function(t,n,i){if(i===void 0){i=[]}var r=i.length-n,e=EN({start:0,end:t},this.groups),o=EN({start:t+n,end:Number.POSITIVE_INFINITY},this.groups).map((function(t){return{range:MN(t.range,r),size:t.size}})),s=i.map((function(n,i){return{range:{start:t+i,end:t+i+1},size:n.size}}));this.groups=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return function(t){var n=[];var i=null;for(var r=0,e=t;r<e.length;r++){var o=e[r];var s=o.range.start,u=o.range.end,a=o.size;i&&a===i.size?i.range.end=u:(i={range:{start:s,end:u},size:a},n.push(i))}return n}(t.reduce((function(t,n){return t.concat(n)}),[]))}(e,s,o),this._size=this._paddingTop+this.groups.reduce((function(t,n){return t+n.size*(n.range.end-n.range.start)}),0)};Object.defineProperty(t.prototype,"count",{get:function(){var t=this.groups.length;return t?this.groups[t-1].range.end:0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:false,configurable:true});t.prototype.indexAt=function(t){if(t<0)return-1;if(t<this._paddingTop)return 0;var n=0,i=this._paddingTop;for(var r=0,e=this.groups;r<e.length;r++){var o=e[r];var s=o.range.end-o.range.start,u=i+s*o.size;if(t<u)return n+Math.floor((t-i)/o.size);n+=s,i=u}return n};t.prototype.indexAfter=function(t){return Math.min(this.indexAt(t)+1,this.count)};t.prototype.positionAt=function(t){if(t<0)return-1;var n=0,i=0;for(var r=0,e=this.groups;r<e.length;r++){var o=e[r];var s=o.range.end-o.range.start,u=i+s;if(t<u)return this._paddingTop+n+(t-i)*o.size;n+=s*o.size,i=u}return-1};return t}();var LN=function(){function t(t){this.renderers=t,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}t.prototype.alloc=function(t){var n=this.getTemplateCache(t).pop(),i=!1;if(n)i=this.transactionNodesPendingRemoval.has(n.domNode),i&&this.transactionNodesPendingRemoval.delete(n.domNode);else{var r=bh(".monaco-list-row");n={domNode:r,templateId:t,templateData:this.getRenderer(t).renderTemplate(r)}}return{row:n,isReusingConnectedDomNode:i}};t.prototype.release=function(t){t&&this.releaseRow(t)};t.prototype.transact=function(t){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{t()}finally{for(var n=0,i=this.transactionNodesPendingRemoval;n<i.length;n++){var r=i[n];this.doRemoveNode(r)}this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}};t.prototype.releaseRow=function(t){var n=t.domNode,i=t.templateId;n&&(this.inTransaction?this.transactionNodesPendingRemoval.add(n):this.doRemoveNode(n)),this.getTemplateCache(i).push(t)};t.prototype.doRemoveNode=function(t){t.classList.remove("scrolling"),function(t){var n;try{(n=t.parentElement)===null||n===void 0||n.removeChild(t)}catch(t){}}(t)};t.prototype.getTemplateCache=function(t){var n=this.cache.get(t);return n||(n=[],this.cache.set(t,n)),n};t.prototype.dispose=function(){var t=this;this.cache.forEach((function(n,i){for(var r=0,e=n;r<e.length;r++){var o=e[r];t.getRenderer(i).disposeTemplate(o.templateData),o.templateData=null}})),this.cache.clear(),this.transactionNodesPendingRemoval.clear()};t.prototype.getRenderer=function(t){var n=this.renderers.get(t);if(!n)throw new Error("No renderer found for ".concat(t));return n};return t}();var jN=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s};var RN={CurrentDragAndDropData:void 0},TN={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:function(t){return[t]},getDragURI:function(){return null},onDragStart:function(){},onDragOver:function(){return!1},drop:function(){},dispose:function(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};var IN=function(){function t(t){this.elements=t}t.prototype.update=function(){};t.prototype.getData=function(){return this.elements};return t}();var BN=function(){function t(t){this.elements=t}t.prototype.update=function(){};t.prototype.getData=function(){return this.elements};return t}();var NN=function(){function t(){this.types=[],this.files=[]}t.prototype.update=function(t){var n;if(t.types&&(n=this.types).splice.apply(n,__spreadArray([0,this.types.length],t.types,false)),t.files){this.files.splice(0,this.files.length);for(var i=0;i<t.files.length;i++){var r=t.files.item(i);r&&(r.size||r.type)&&this.files.push(r)}}};t.prototype.getData=function(){return{types:this.types,files:this.files}};return t}();var PN=function(){function t(t){t!=null&&t.getSetSize?this.getSetSize=t.getSetSize.bind(t):this.getSetSize=function(t,n,i){return i},t!=null&&t.getPosInSet?this.getPosInSet=t.getPosInSet.bind(t):this.getPosInSet=function(t,n){return n+1},t!=null&&t.getRole?this.getRole=t.getRole.bind(t):this.getRole=function(t){return"listitem"},t!=null&&t.isChecked?this.isChecked=t.isChecked.bind(t):this.isChecked=function(t){}}return t}();var WN=function(){function t(n,i,r,e){if(e===void 0){e=TN}var o=this;var s,u,a,h,c,f,l,v,d,g,p,w,m;if(this.virtualDelegate=i,this.domId="list_id_"+ ++t.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Os(50),this.splicing=!1,this.dragOverAnimationStopDisposable=ci.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=ci.None,this.onDragLeaveTimeout=ci.None,this.disposables=new hi,this._onDidChangeContentHeight=new ki,this._onDidChangeContentWidth=new ki,this.onDidChangeContentHeight=wi.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,e.horizontalScrolling&&e.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap((s=e.paddingTop)!==null&&s!==void 0?s:0);for(var b=0,y=r;b<y.length;b++){var _=y[b];this.renderers.set(_.templateId,_)}this.cache=this.disposables.add(new LN(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof e.mouseSupport!="boolean"||e.mouseSupport),this._horizontalScrolling=(u=e.horizontalScrolling)!==null&&u!==void 0?u:TN.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=e.paddingBottom===void 0?0:e.paddingBottom,this.accessibilityProvider=new PN(e.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",((a=e.transformOptimization)!==null&&a!==void 0?a:TN.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(nk.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new fk({forceIntegerValues:!0,smoothScrollDuration:(h=e.smoothScrolling)!==null&&h!==void 0&&h?125:0,scheduleAtNextAnimationFrame:function(t){return Sa(sa(o.domNode),t)}})),this.scrollableElement=this.disposables.add(new bk(this.rowsContainer,{alwaysConsumeMouseWheel:(c=e.alwaysConsumeMouseWheel)!==null&&c!==void 0?c:TN.alwaysConsumeMouseWheel,horizontal:1,vertical:(f=e.verticalScrollMode)!==null&&f!==void 0?f:TN.verticalScrollMode,useShadows:(l=e.useShadows)!==null&&l!==void 0?l:TN.useShadows,mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity,fastScrollSensitivity:e.fastScrollSensitivity,scrollByPage:e.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),n.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(ma(this.rowsContainer,X_.Change,(function(t){return o.onTouchChange(t)}))),this.disposables.add(ma(this.scrollableElement.getDomNode(),"scroll",(function(t){return t.target.scrollTop=0}))),this.disposables.add(ma(this.domNode,"dragover",(function(t){return o.onDragOver(o.toDragEvent(t))}))),this.disposables.add(ma(this.domNode,"drop",(function(t){return o.onDrop(o.toDragEvent(t))}))),this.disposables.add(ma(this.domNode,"dragleave",(function(t){return o.onDragLeave(o.toDragEvent(t))}))),this.disposables.add(ma(this.domNode,"dragend",(function(t){return o.onDragEnd(t)}))),this.setRowLineHeight=(v=e.setRowLineHeight)!==null&&v!==void 0?v:TN.setRowLineHeight,this.setRowHeight=(d=e.setRowHeight)!==null&&d!==void 0?d:TN.setRowHeight,this.supportDynamicHeights=(g=e.supportDynamicHeights)!==null&&g!==void 0?g:TN.supportDynamicHeights,this.dnd=(p=e.dnd)!==null&&p!==void 0?p:this.disposables.add(TN.dnd),this.layout((w=e.initialSize)===null||w===void 0?void 0:w.height,(m=e.initialSize)===null||m===void 0?void 0:m.width)}Object.defineProperty(t.prototype,"contentHeight",{get:function(){return this.rangeMap.size},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidScroll",{get:function(){return this.scrollableElement.onScroll},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"scrollableElementDomNode",{get:function(){return this.scrollableElement.getDomNode()},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"horizontalScrolling",{get:function(){return this._horizontalScrolling},set:function(t){if(t!==this._horizontalScrolling){if(t&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=t,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(var n=0,i=this.items;n<i.length;n++){var r=i[n];this.measureItemWidth(r)}this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Ia(this.domNode)}),this.rowsContainer.style.width="".concat(Math.max(this.scrollWidth||0,this.renderWidth),"px")}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}},enumerable:false,configurable:true});t.prototype.updateOptions=function(t){var n;if(t.paddingBottom!==void 0&&(this.paddingBottom=t.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),t.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(t.smoothScrolling?125:0),t.horizontalScrolling!==void 0&&(this.horizontalScrolling=t.horizontalScrolling),t.scrollByPage!==void 0&&(n=__assign(__assign({},n!==null&&n!==void 0?n:{}),{scrollByPage:t.scrollByPage})),t.mouseWheelScrollSensitivity!==void 0&&(n=__assign(__assign({},n!==null&&n!==void 0?n:{}),{mouseWheelScrollSensitivity:t.mouseWheelScrollSensitivity})),t.fastScrollSensitivity!==void 0&&(n=__assign(__assign({},n!==null&&n!==void 0?n:{}),{fastScrollSensitivity:t.fastScrollSensitivity})),n&&this.scrollableElement.updateOptions(n),t.paddingTop!==void 0&&t.paddingTop!==this.rangeMap.paddingTop){var i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r=t.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=t.paddingTop,this.render(i,Math.max(0,this.lastRenderTop+r),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}};t.prototype.createRangeMap=function(t){return new FN(t)};t.prototype.splice=function(t,n,i){if(i===void 0){i=[]}if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(t,n,i)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}};t.prototype._splice=function(t,n,i){var r;var e=this;if(i===void 0){i=[]}var o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:t,end:t+n},u=BI.intersect(o,s),a=new Map;for(var h=u.end-1;h>=u.start;h--){var c=this.items[h];if(c.dragStartDisposable.dispose(),c.checkedDisposable.dispose(),c.row){var f=a.get(c.templateId);f||(f=[],a.set(c.templateId,f));var l=this.renderers.get(c.templateId);l&&l.disposeElement&&l.disposeElement(c.element,h,c.row.templateData,c.size),f.push(c.row)}c.row=null,c.stale=!0}var v={start:t+n,end:this.items.length},d=BI.intersect(v,o),g=BI.relativeComplement(v,o),p=i.map((function(t){return{id:String(e.itemId++),element:t,templateId:e.virtualDelegate.getTemplateId(t),size:e.virtualDelegate.getHeight(t),width:void 0,hasDynamicHeight:!!e.virtualDelegate.hasDynamicHeight&&e.virtualDelegate.hasDynamicHeight(t),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:ci.None,checkedDisposable:ci.None,stale:!1}}));var w;t===0&&n>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,p),w=this.items,this.items=p):(this.rangeMap.splice(t,n,p),w=(r=this.items).splice.apply(r,__spreadArray([t,n],p,false)));var m=i.length-n,b=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),y=MN(d,m),_=BI.intersect(b,y);for(var h=_.start;h<_.end;h++)this.updateItemInDOM(this.items[h],h);var k=BI.relativeComplement(y,b);for(var x=0,C=k;x<C.length;x++){var h=C[x];for(var c=h.start;c<h.end;c++)this.removeItemFromDOM(c)}var S=g.map((function(t){return MN(t,m)})),D=__spreadArray([{start:t,end:t+i.length}],S,true).map((function(t){return BI.intersect(b,t)})).reverse();for(var A=0,O=D;A<O.length;A++){var h=O[A];for(var c=h.end-1;c>=h.start;c--){var f=this.items[c],l=a.get(f.templateId),E=l==null?void 0:l.pop();this.insertItemInDOM(c,E)}}for(var M=0,F=a.values();M<F.length;M++){var h=F[M];for(var L=0,j=h;L<j.length;L++){var c=j[L];this.cache.release(c)}}return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),w.map((function(t){return t.element}))};t.prototype.eventuallyUpdateScrollDimensions=function(){var t=this;this._scrollHeight=this.contentHeight,this.rowsContainer.style.height="".concat(this._scrollHeight,"px"),this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Sa(sa(this.domNode),(function(){t.scrollableElement.setScrollDimensions({scrollHeight:t.scrollHeight}),t.updateScrollWidth(),t.scrollableElementUpdateDisposable=null})))};t.prototype.eventuallyUpdateScrollWidth=function(){var t=this;this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((function(){return t.updateScrollWidth()})):this.scrollableElementWidthDelayer.cancel()};t.prototype.updateScrollWidth=function(){if(!this.horizontalScrolling)return;var t=0;for(var n=0,i=this.items;n<i.length;n++){var r=i[n];r.width!==void 0&&(t=Math.max(t,r.width))}this.scrollWidth=t,this.scrollableElement.setScrollDimensions({scrollWidth:t===0?0:t+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)};t.prototype.rerender=function(){if(this.supportDynamicHeights){for(var t=0,n=this.items;t<n.length;t++){var i=n[t];i.lastDynamicHeightWidth=void 0}this._rerender(this.lastRenderTop,this.lastRenderHeight)}};Object.defineProperty(t.prototype,"length",{get:function(){return this.items.length},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"renderHeight",{get:function(){return this.scrollableElement.getScrollDimensions().height},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"firstVisibleIndex",{get:function(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start},enumerable:false,configurable:true});t.prototype.element=function(t){return this.items[t].element};t.prototype.indexOf=function(t){return this.items.findIndex((function(n){return n.element===t}))};t.prototype.domElement=function(t){var n=this.items[t].row;return n&&n.domNode};t.prototype.elementHeight=function(t){return this.items[t].size};t.prototype.elementTop=function(t){return this.rangeMap.positionAt(t)};t.prototype.indexAt=function(t){return this.rangeMap.indexAt(t)};t.prototype.indexAfter=function(t){return this.rangeMap.indexAfter(t)};t.prototype.layout=function(t,n){var i={height:typeof t=="number"?t:Ba(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,i.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(i),n!==void 0&&(this.renderWidth=n,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof n=="number"?n:Ia(this.domNode)})};t.prototype.render=function(t,n,i,r,e,o){var s=this;if(o===void 0){o=!1}var u=this.getRenderRange(n,i),a=BI.relativeComplement(u,t).reverse(),h=BI.relativeComplement(t,u);if(o){var c=BI.intersect(t,u);for(var f=c.start;f<c.end;f++)this.updateItemInDOM(this.items[f],f)}this.cache.transact((function(){for(var t=0,n=h;t<n.length;t++){var i=n[t];for(var r=i.start;r<i.end;r++)s.removeItemFromDOM(r)}for(var e=0,o=a;e<o.length;e++){var i=o[e];for(var r=i.end-1;r>=i.start;r--)s.insertItemInDOM(r)}})),r!==void 0&&(this.rowsContainer.style.left="-".concat(r,"px")),this.rowsContainer.style.top="-".concat(n,"px"),this.horizontalScrolling&&e!==void 0&&(this.rowsContainer.style.width="".concat(Math.max(e,this.renderWidth),"px")),this.lastRenderTop=n,this.lastRenderHeight=i};t.prototype.insertItemInDOM=function(t,n){var i=this;var r,e,o;var s=this.items[t];if(!s.row)if(n)s.row=n,s.stale=!0;else{var u=this.cache.alloc(s.templateId);s.row=u.row,s.stale||(s.stale=u.isReusingConnectedDomNode)}var a=this.accessibilityProvider.getRole(s.element)||"listitem";s.row.domNode.setAttribute("role",a);var h=this.accessibilityProvider.isChecked(s.element);if(typeof h=="boolean")s.row.domNode.setAttribute("aria-checked",String(!!h));else if(h){var u=function(t){return s.row.domNode.setAttribute("aria-checked",String(!!t))};u(h.value),s.checkedDisposable=h.onDidChange(u)}if(s.stale||!s.row.domNode.parentElement){var u=(o=(e=(r=this.items.at(t+1))===null||r===void 0?void 0:r.row)===null||e===void 0?void 0:e.domNode)!==null&&o!==void 0?o:null;this.rowsContainer.insertBefore(s.row.domNode,u),s.stale=!1}this.updateItemInDOM(s,t);var c=this.renderers.get(s.templateId);if(!c)throw new Error("No renderer found for template id ".concat(s.templateId));c==null||c.renderElement(s.element,t,s.row.templateData,s.size);var f=this.dnd.getDragURI(s.element);s.dragStartDisposable.dispose(),s.row.domNode.draggable=!!f,f&&(s.dragStartDisposable=ma(s.row.domNode,"dragstart",(function(t){return i.onDragStart(s.element,f,t)}))),this.horizontalScrolling&&(this.measureItemWidth(s),this.eventuallyUpdateScrollWidth())};t.prototype.measureItemWidth=function(t){if(!t.row||!t.row.domNode)return;t.row.domNode.style.width="fit-content",t.width=Ia(t.row.domNode);var n=sa(t.row.domNode).getComputedStyle(t.row.domNode);n.paddingLeft&&(t.width+=parseFloat(n.paddingLeft)),n.paddingRight&&(t.width+=parseFloat(n.paddingRight)),t.row.domNode.style.width=""};t.prototype.updateItemInDOM=function(t,n){t.row.domNode.style.top="".concat(this.elementTop(n),"px"),this.setRowHeight&&(t.row.domNode.style.height="".concat(t.size,"px")),this.setRowLineHeight&&(t.row.domNode.style.lineHeight="".concat(t.size,"px")),t.row.domNode.setAttribute("data-index","".concat(n)),t.row.domNode.setAttribute("data-last-element",n===this.length-1?"true":"false"),t.row.domNode.setAttribute("data-parity",n%2==0?"even":"odd"),t.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t.element,n,this.length))),t.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t.element,n))),t.row.domNode.setAttribute("id",this.getElementDomId(n)),t.row.domNode.classList.toggle("drop-target",t.dropTarget)};t.prototype.removeItemFromDOM=function(t){var n=this.items[t];if(n.dragStartDisposable.dispose(),n.checkedDisposable.dispose(),n.row){var i=this.renderers.get(n.templateId);i&&i.disposeElement&&i.disposeElement(n.element,t,n.row.templateData,n.size),this.cache.release(n.row),n.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()};t.prototype.getScrollTop=function(){return this.scrollableElement.getScrollPosition().scrollTop};t.prototype.setScrollTop=function(t,n){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:t,reuseAnimation:n})};Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.getScrollTop()},set:function(t){this.setScrollTop(t)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"scrollHeight",{get:function(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseClick",{get:function(){var t=this;return wi.map(this.disposables.add(new Dk(this.domNode,"click")).event,(function(n){return t.toMouseEvent(n)}),this.disposables)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseDblClick",{get:function(){var t=this;return wi.map(this.disposables.add(new Dk(this.domNode,"dblclick")).event,(function(n){return t.toMouseEvent(n)}),this.disposables)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseMiddleClick",{get:function(){var t=this;return wi.filter(wi.map(this.disposables.add(new Dk(this.domNode,"auxclick")).event,(function(n){return t.toMouseEvent(n)}),this.disposables),(function(t){return t.browserEvent.button===1}),this.disposables)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseDown",{get:function(){var t=this;return wi.map(this.disposables.add(new Dk(this.domNode,"mousedown")).event,(function(n){return t.toMouseEvent(n)}),this.disposables)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseOver",{get:function(){var t=this;return wi.map(this.disposables.add(new Dk(this.domNode,"mouseover")).event,(function(n){return t.toMouseEvent(n)}),this.disposables)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseOut",{get:function(){var t=this;return wi.map(this.disposables.add(new Dk(this.domNode,"mouseout")).event,(function(n){return t.toMouseEvent(n)}),this.disposables)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onContextMenu",{get:function(){var t=this;return wi.any(wi.map(this.disposables.add(new Dk(this.domNode,"contextmenu")).event,(function(n){return t.toMouseEvent(n)}),this.disposables),wi.map(this.disposables.add(new Dk(this.domNode,X_.Contextmenu)).event,(function(n){return t.toGestureEvent(n)}),this.disposables))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onTouchStart",{get:function(){var t=this;return wi.map(this.disposables.add(new Dk(this.domNode,"touchstart")).event,(function(n){return t.toTouchEvent(n)}),this.disposables)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onTap",{get:function(){var t=this;return wi.map(this.disposables.add(new Dk(this.rowsContainer,X_.Tap)).event,(function(n){return t.toGestureEvent(n)}),this.disposables)},enumerable:false,configurable:true});t.prototype.toMouseEvent=function(t){var n=this.getItemIndexFromEventTarget(t.target||null),i=n===void 0?void 0:this.items[n];return{browserEvent:t,index:n,element:i&&i.element}};t.prototype.toTouchEvent=function(t){var n=this.getItemIndexFromEventTarget(t.target||null),i=n===void 0?void 0:this.items[n];return{browserEvent:t,index:n,element:i&&i.element}};t.prototype.toGestureEvent=function(t){var n=this.getItemIndexFromEventTarget(t.initialTarget||null),i=n===void 0?void 0:this.items[n];return{browserEvent:t,index:n,element:i&&i.element}};t.prototype.toDragEvent=function(t){var n=this.getItemIndexFromEventTarget(t.target||null),i=n===void 0?void 0:this.items[n];return{browserEvent:t,index:n,element:i&&i.element,sector:this.getTargetSector(t,n)}};t.prototype.onScroll=function(t){try{var n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(n,t.scrollTop,t.height,t.scrollLeft,t.scrollWidth),this.supportDynamicHeights&&this._rerender(t.scrollTop,t.height,t.inSmoothScrolling)}catch(n){throw console.error("Got bad scroll event:",t),n}};t.prototype.onTouchChange=function(t){t.preventDefault(),t.stopPropagation(),this.scrollTop-=t.translationY};t.prototype.onDragStart=function(t,n,i){var r=this;var e,o;if(!i.dataTransfer)return;var s=this.dnd.getDragElements(t);if(i.dataTransfer.effectAllowed="copyMove",i.dataTransfer.setData(mN.TEXT,n),i.dataTransfer.setDragImage){var u=void 0;this.dnd.getDragLabel&&(u=this.dnd.getDragLabel(s,i)),u===void 0&&(u=String(s.length));var a=bh(".monaco-drag-image");a.textContent=u;var h=function(t){for(;t&&!t.classList.contains("monaco-workbench");)t=t.parentElement;return t||r.domNode.ownerDocument}(this.domNode);h.appendChild(a),i.dataTransfer.setDragImage(a,-10,-10),setTimeout((function(){return h.removeChild(a)}),0)}this.domNode.classList.add("dragging"),this.currentDragData=new IN(s),RN.CurrentDragAndDropData=new BN(s),(o=(e=this.dnd).onDragStart)===null||o===void 0||o.call(e,this.currentDragData,i)};t.prototype.onDragOver=function(t){var n=this;var i,r;if(t.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),RN.CurrentDragAndDropData&&RN.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(t.browserEvent),!t.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(RN.CurrentDragAndDropData)this.currentDragData=RN.CurrentDragAndDropData;else{if(!t.browserEvent.dataTransfer.types)return!1;this.currentDragData=new NN}var e=this.dnd.onDragOver(this.currentDragData,t.element,t.index,t.sector,t.browserEvent);if(this.canDrop=typeof e=="boolean"?e:e.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;var o;t.browserEvent.dataTransfer.dropEffect=typeof e!="boolean"&&((i=e.effect)===null||i===void 0?void 0:i.type)===0?"copy":"move",o=typeof e!="boolean"&&e.feedback?e.feedback:t.index===void 0?[-1]:[t.index],o=x(o).filter((function(t){return t>=-1&&t<n.length})).sort((function(t,n){return t-n})),o=o[0]===-1?[-1]:o;var s=typeof e!="boolean"&&e.effect&&e.effect.position?e.effect.position:"drop-target";if(u=this.currentDragFeedback,a=o,(Array.isArray(u)&&Array.isArray(a)?v(u,a):u===a)&&this.currentDragFeedbackPosition===s)return!0;var u,a;if(this.currentDragFeedback=o,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),o[0]===-1)this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=ai((function(){n.domNode.classList.remove(s),n.rowsContainer.classList.remove(s)}));else{if(o.length>1&&s!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");s==="drop-target-after"&&o[0]<this.length-1&&(o[0]+=1,s="drop-target-before");for(var h=0,c=o;h<c.length;h++){var f=c[h];var l=this.items[f];l.dropTarget=!0,(r=l.row)===null||r===void 0||r.domNode.classList.add(s)}this.currentDragFeedbackDisposable=ai((function(){var t;for(var i=0,r=o;i<r.length;i++){var e=r[i];var u=n.items[e];u.dropTarget=!1,(t=u.row)===null||t===void 0||t.domNode.classList.remove(s)}}))}return!0};t.prototype.onDragLeave=function(t){var n=this;var i,r;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Fs((function(){return n.clearDragOverFeedback()}),100,this.disposables),this.currentDragData&&((r=(i=this.dnd).onDragLeave)===null||r===void 0||r.call(i,this.currentDragData,t.element,t.index,t.browserEvent))};t.prototype.onDrop=function(t){if(!this.canDrop)return;var n=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,RN.CurrentDragAndDropData=void 0,n&&t.browserEvent.dataTransfer&&(t.browserEvent.preventDefault(),n.update(t.browserEvent.dataTransfer),this.dnd.drop(n,t.element,t.index,t.sector,t.browserEvent))};t.prototype.onDragEnd=function(t){var n,i;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,RN.CurrentDragAndDropData=void 0,(i=(n=this.dnd).onDragEnd)===null||i===void 0||i.call(n,t)};t.prototype.clearDragOverFeedback=function(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=ci.None};t.prototype.setupDragAndDropScrollTopAnimation=function(t){var n=this;if(!this.dragOverAnimationDisposable){var i=La(this.domNode).top;this.dragOverAnimationDisposable=function(t,n){var i=function(){n(),r=Sa(t,i)};var r=Sa(t,i);return ai((function(){return r.dispose()}))}(sa(this.domNode),this.animateDragAndDropScrollTop.bind(this,i))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Fs((function(){n.dragOverAnimationDisposable&&(n.dragOverAnimationDisposable.dispose(),n.dragOverAnimationDisposable=void 0)}),1e3,this.disposables),this.dragOverMouseY=t.pageY};t.prototype.animateDragAndDropScrollTop=function(t){if(this.dragOverMouseY===void 0)return;var n=this.dragOverMouseY-t,i=this.renderHeight-35;n<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(n-35))):n>i&&(this.scrollTop+=Math.min(14,Math.floor(.3*(n-i))))};t.prototype.teardownDragAndDropScrollTopAnimation=function(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)};t.prototype.getTargetSector=function(t,n){if(n===void 0)return;var i=t.offsetY/this.items[n].size;return mj(Math.floor(i/.25),0,3)};t.prototype.getItemIndexFromEventTarget=function(t){var n=this.scrollableElement.getDomNode();var i=t;for(;i instanceof HTMLElement&&i!==this.rowsContainer&&n.contains(i);){var r=i.getAttribute("data-index");if(r){var e=Number(r);if(!isNaN(e))return e}i=i.parentElement}};t.prototype.getRenderRange=function(t,n){return{start:this.rangeMap.indexAt(t),end:this.rangeMap.indexAfter(t+n-1)}};t.prototype._rerender=function(t,n,i){var r=this.getRenderRange(t,n);var e,o;t===this.elementTop(r.start)?(e=r.start,o=0):r.end-r.start>1&&(e=r.start+1,o=this.elementTop(e)-t);var s=0;for(;;){var u=this.getRenderRange(t,n);var a=!1;for(var h=u.start;h<u.end;h++){var c=this.probeDynamicHeight(h);c!==0&&this.rangeMap.splice(h,1,[this.items[h]]),s+=c,a=a||c!==0}if(!a){s!==0&&this.eventuallyUpdateScrollDimensions();var h=BI.relativeComplement(r,u);for(var f=0,l=h;f<l.length;f++){var v=l[f];for(var d=v.start;d<v.end;d++)this.items[d].row&&this.removeItemFromDOM(d)}var c=BI.relativeComplement(u,r).reverse();for(var g=0,p=c;g<p.length;g++){var v=p[g];for(var d=v.end-1;d>=v.start;d--)this.insertItemInDOM(d)}for(var v=u.start;v<u.end;v++)this.items[v].row&&this.updateItemInDOM(this.items[v],v);if(typeof e=="number"){var v=this.scrollable.getFutureScrollPosition().scrollTop-t,d=this.elementTop(e)-o+v;this.setScrollTop(d,i)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}};t.prototype.probeDynamicHeight=function(t){var n,i,r;var e=this.items[t];if(this.virtualDelegate.getDynamicHeight){var o=this.virtualDelegate.getDynamicHeight(e.element);if(o!==null){var s=e.size;return e.size=o,e.lastDynamicHeightWidth=this.renderWidth,o-s}}if(!e.hasDynamicHeight||e.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(e.element))return 0;var u=e.size;if(e.row)return e.row.domNode.style.height="",e.size=e.row.domNode.offsetHeight,e.size!==0||Pa(e.row.domNode,sa(e.row.domNode).document.body)||console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!"),e.lastDynamicHeightWidth=this.renderWidth,e.size-u;var a=this.cache.alloc(e.templateId).row;a.domNode.style.height="",this.rowsContainer.appendChild(a.domNode);var h=this.renderers.get(e.templateId);if(!h)throw new ri("Missing renderer for templateId: "+e.templateId);return h.renderElement(e.element,t,a.templateData,void 0),e.size=a.domNode.offsetHeight,(n=h.disposeElement)===null||n===void 0||n.call(h,e.element,t,a.templateData,void 0),(r=(i=this.virtualDelegate).setDynamicHeight)===null||r===void 0||r.call(i,e.element,e.size),e.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(a.domNode),this.cache.release(a),e.size-u};t.prototype.getElementDomId=function(t){return"".concat(this.domId,"_").concat(t)};t.prototype.dispose=function(){var t,n;for(var i=0,r=this.items;i<r.length;i++){var e=r[i];if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){var o=this.renderers.get(e.row.templateId);o&&((t=o.disposeElement)===null||t===void 0||t.call(o,e.element,-1,e.row.templateData,void 0),o.disposeTemplate(e.row.templateData))}}this.items=[],this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),(n=this.dragOverAnimationDisposable)===null||n===void 0||n.dispose(),this.disposables.dispose()};return t}();WN.InstanceCount=0,jN([Y_],WN.prototype,"onMouseClick",null),jN([Y_],WN.prototype,"onMouseDblClick",null),jN([Y_],WN.prototype,"onMouseMiddleClick",null),jN([Y_],WN.prototype,"onMouseDown",null),jN([Y_],WN.prototype,"onMouseOver",null),jN([Y_],WN.prototype,"onMouseOut",null),jN([Y_],WN.prototype,"onContextMenu",null),jN([Y_],WN.prototype,"onTouchStart",null),jN([Y_],WN.prototype,"onTap",null);var HN=function(){function t(t,n,i){this.owner=t,this.debugNameSource=n,this.referenceFn=i}t.prototype.getDebugName=function(t){return function(t,n){var i;var r=UN.get(t);if(r)return r;var e=function(t,n){var i=UN.get(t);if(i)return i;var r=n.owner?function(t){var n;var i=VN.get(t);if(i)return i;var r=function(t){var n=t.constructor;return n?n.name:"Object"}(t);var e=(n=KN.get(r))!==null&&n!==void 0?n:0;e++,KN.set(r,e);var o=e===1?r:"".concat(r,"#").concat(e);return VN.set(t,o),o}(n.owner)+".":"";var e;var o=n.debugNameSource;if(o!==void 0){if(typeof o!="function")return r+o;if(e=o(),e!==void 0)return r+e}var s=n.referenceFn;if(s!==void 0&&(e=qN(s),e!==void 0))return r+e;if(n.owner!==void 0){var u=function(t,n){for(var i in t)if(t[i]===n)return i}(n.owner,t);if(u!==void 0)return r+u}}(t,n);if(e){var o=(i=zN.get(e))!==null&&i!==void 0?i:0;o++,zN.set(e,o);var s=o===1?e:"".concat(e,"#").concat(o);return UN.set(t,s),s}}(t,this)};return t}();var zN=new Map,UN=new WeakMap,KN=new Map,VN=new WeakMap;function qN(t){var n=t.toString(),i=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(n),r=i?i[1]:void 0;return r==null?void 0:r.trim()}var GN,$N,JN;var ZN=function(){function t(){}Object.defineProperty(t.prototype,"TChange",{get:function(){return null},enumerable:false,configurable:true});t.prototype.reportChanges=function(){this.get()};t.prototype.read=function(t){return t?t.readObservable(this):this.get()};t.prototype.map=function(t,n){var i=this;var r=n===void 0?void 0:t,e=n===void 0?t:n;return $N({owner:r,debugName:function(){var t=qN(e);if(t!==void 0)return t;var n=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(e.toString());return n?"".concat(i.debugName,".").concat(n[2]):r?void 0:"".concat(i.debugName," (mapped)")}},(function(t){return e(i.read(t),t)}))};t.prototype.recomputeInitiallyAndOnChange=function(t,n){return t.add(GN(this,n)),this};return t}();var QN=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n.observers=new Set;return n}n.prototype.addObserver=function(t){var n=this.observers.size;this.observers.add(t),n===0&&this.onFirstObserverAdded()};n.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size===0&&this.onLastObserverRemoved()};n.prototype.onFirstObserverAdded=function(){};n.prototype.onLastObserverRemoved=function(){};return n}(ZN);function YN(t,n){var i=new nP(t,n);try{t(i)}finally{i.finish()}}function XN(t){if(JN)t(JN);else{var n=new nP(t,void 0);JN=n;try{t(n)}finally{n.finish(),JN=void 0}}}function tP(t,n,i){t?n(t):YN(n,i)}var nP=function(){function t(t,n){var i;this._fn=t,this._getDebugName=n,this.updatingObservers=[],(i=void 0)===null||i===void 0||i.handleBeginTransaction(this)}t.prototype.getDebugName=function(){return this._getDebugName?this._getDebugName():qN(this._fn)};t.prototype.updateObserver=function(t,n){this.updatingObservers.push({observer:t,observable:n}),t.beginUpdate(n)};t.prototype.finish=function(){var t;var n=this.updatingObservers;for(var i=0;i<n.length;i++){var r=n[i],e=r.observer,o=r.observable;e.endUpdate(o)}this.updatingObservers=null,(t=void 0)===null||t===void 0||t.handleEndTransaction()};return t}();function iP(t,n){return typeof t=="string"?new rP(void 0,t,n):new rP(t,void 0,n)}var rP=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._owner=n,e._debugName=i,e._value=r;return e}Object.defineProperty(n.prototype,"debugName",{get:function(){var t;return(t=new HN(this._owner,this._debugName,void 0).getDebugName(this))!==null&&t!==void 0?t:"ObservableValue"},enumerable:false,configurable:true});n.prototype.get=function(){return this._value};n.prototype.set=function(t,n,i){var r=this;var e;if(this._value===t)return;var o;n||(n=o=new nP((function(){}),(function(){return"Setting ".concat(r.debugName)})));try{var s=this._value;this._setValue(t),(e=void 0)===null||e===void 0||e.handleObservableChanged(this,{oldValue:s,newValue:t,change:i,didChange:!0,hadValue:!0});for(var u=0,a=this.observers;u<a.length;u++){var h=a[u];n.updateObserver(h,this),h.handleChange(this,i)}}finally{o&&o.finish()}};n.prototype.toString=function(){return"".concat(this.debugName,": ").concat(this._value)};n.prototype._setValue=function(t){this._value=t};return n}(QN);function eP(t,n){return typeof t=="string"?new oP(void 0,t,n):new oP(t,void 0,n)}var oP=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._setValue=function(t){this._value!==t&&(this._value&&this._value.dispose(),this._value=t)};n.prototype.dispose=function(){var t;(t=this._value)===null||t===void 0||t.dispose()};return n}(rP);var sP=function(t,n){return t===n};function uP(t,n){return n!==void 0?new fP(new HN(t,void 0,n),n,void 0,void 0,void 0,sP):new fP(new HN(void 0,void 0,t),t,void 0,void 0,void 0,sP)}function aP(t,n){var i;return new fP(new HN(t.owner,t.debugName,t.debugReferenceFn),n,void 0,void 0,t.onLastObserverRemoved,(i=t.equalityComparer)!==null&&i!==void 0?i:sP)}function hP(t,n){var i,r;n===void 0?(i=t,r=void 0):(r=t,i=n);var e=new hi;return new fP(new HN(r,void 0,i),(function(t){return e.clear(),i(t,e)}),void 0,void 0,(function(){return e.dispose()}),sP)}function cP(t,n){var i,r;n===void 0?(i=t,r=void 0):(r=t,i=n);var e=new hi;return new fP(new HN(r,void 0,i),(function(t){e.clear();var n=i(t);return n&&e.add(n),n}),void 0,void 0,(function(){return e.dispose()}),sP)}(function(t){$N=t})(aP);var fP=function(t){__extends(n,t);function n(n,i,r,e,o,s){if(o===void 0){o=void 0}var u=this;var a,h;u=t.call(this)||this,u._debugNameData=n,u._computeFn=i,u.createChangeSummary=r,u._handleChange=e,u._handleLastObserverRemoved=o,u._equalityComparator=s,u.state=0,u.value=void 0,u.updateCount=0,u.dependencies=new Set,u.dependenciesToBeRemoved=new Set,u.changeSummary=void 0,u.changeSummary=(a=u.createChangeSummary)===null||a===void 0?void 0:a.call(u),(h=void 0)===null||h===void 0||h.handleDerivedCreated(u);return u}Object.defineProperty(n.prototype,"debugName",{get:function(){var t;return(t=this._debugNameData.getDebugName(this))!==null&&t!==void 0?t:"(anonymous)"},enumerable:false,configurable:true});n.prototype.onLastObserverRemoved=function(){var t;this.state=0,this.value=void 0;for(var n=0,i=this.dependencies;n<i.length;n++){var r=i[n];r.removeObserver(this)}this.dependencies.clear(),(t=this._handleLastObserverRemoved)===null||t===void 0||t.call(this)};n.prototype.get=function(){var t;if(this.observers.size===0){var n=this._computeFn(this,(t=this.createChangeSummary)===null||t===void 0?void 0:t.call(this));return this.onLastObserverRemoved(),n}do{if(this.state===1){for(var i=0,r=this.dependencies;i<r.length;i++){var n=r[i];if(n.reportChanges(),this.state===2)break}}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value};n.prototype._recomputeIfNeeded=function(){var t,n;if(this.state===3)return;var i=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=i;var r=this.state!==0,e=this.value;this.state=3;var o=this.changeSummary;this.changeSummary=(t=this.createChangeSummary)===null||t===void 0?void 0:t.call(this);try{this.value=this._computeFn(this,o)}finally{for(var s=0,u=this.dependenciesToBeRemoved;s<u.length;s++){var a=u[s];a.removeObserver(this)}this.dependenciesToBeRemoved.clear()}var h=r&&!this._equalityComparator(e,this.value);if((n=void 0)===null||n===void 0||n.handleDerivedRecomputed(this,{oldValue:e,newValue:this.value,change:void 0,didChange:h,hadValue:r}),h)for(var c=0,f=this.observers;c<f.length;c++){var a=f[c];a.handleChange(this,void 0)}};n.prototype.toString=function(){return"LazyDerived<".concat(this.debugName,">")};n.prototype.beginUpdate=function(t){this.updateCount++;var n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(var i=0,r=this.observers;i<r.length;i++){var e=r[i];e.handlePossibleChange(this)}if(n)for(var o=0,s=this.observers;o<s.length;o++){var e=s[o];e.beginUpdate(this)}};n.prototype.endUpdate=function(t){var n=this;if(this.updateCount--,this.updateCount===0){var i=__spreadArray([],this.observers,true);for(var r=0,e=i;r<e.length;r++){var o=e[r];o.endUpdate(this)}}rf((function(){return n.updateCount>=0}))};n.prototype.handlePossibleChange=function(t){if(this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){this.state=1;for(var n=0,i=this.observers;n<i.length;n++){var r=i[n];r.handlePossibleChange(this)}}};n.prototype.handleChange=function(t,n){if(this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){var i=!this._handleChange||this._handleChange({changedObservable:t,change:n,didChange:function(n){return n===t}},this.changeSummary),r=this.state===3;if(i&&(this.state===1||r)&&(this.state=2,r))for(var e=0,o=this.observers;e<o.length;e++){var s=o[e];s.handlePossibleChange(this)}}};n.prototype.readObservable=function(t){t.addObserver(this);var n=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),n};n.prototype.addObserver=function(n){var i=!this.observers.has(n)&&this.updateCount>0;t.prototype.addObserver.call(this,n),i&&n.beginUpdate(this)};n.prototype.removeObserver=function(n){var i=this.observers.has(n)&&this.updateCount>0;t.prototype.removeObserver.call(this,n),i&&n.endUpdate(this)};return n}(QN);function lP(t){return new pP(new HN(void 0,void 0,t),t,void 0,void 0)}function vP(t,n){var i;return new pP(new HN(t.owner,t.debugName,(i=t.debugReferenceFn)!==null&&i!==void 0?i:n),n,void 0,void 0)}function dP(t,n){var i;return new pP(new HN(t.owner,t.debugName,(i=t.debugReferenceFn)!==null&&i!==void 0?i:n),n,t.createEmptyChangeSummary,t.handleChange)}function gP(t){var n=new hi,i=vP({owner:void 0,debugName:void 0,debugReferenceFn:t},(function(i){n.clear(),t(i,n)}));return ai((function(){i.dispose(),n.dispose()}))}var pP=function(){function t(t,n,i,r){var e,o;this._debugNameData=t,this._runFn=n,this.createChangeSummary=i,this._handleChange=r,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(e=this.createChangeSummary)===null||e===void 0?void 0:e.call(this),(o=void 0)===null||o===void 0||o.handleAutorunCreated(this),this._runIfNeeded()}Object.defineProperty(t.prototype,"debugName",{get:function(){var t;return(t=this._debugNameData.getDebugName(this))!==null&&t!==void 0?t:"(anonymous)"},enumerable:false,configurable:true});t.prototype.dispose=function(){this.disposed=!0;for(var t=0,n=this.dependencies;t<n.length;t++){var i=n[t];i.removeObserver(this)}this.dependencies.clear()};t.prototype._runIfNeeded=function(){var t,n,i;if(this.state===3)return;var r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r,this.state=3;var e=this.disposed;try{if(!e){(t=void 0)===null||t===void 0||t.handleAutorunTriggered(this);var o=this.changeSummary;this.changeSummary=(n=this.createChangeSummary)===null||n===void 0?void 0:n.call(this),this._runFn(this,o)}}finally{e||(i=void 0)===null||i===void 0||i.handleAutorunFinished(this);for(var s=0,u=this.dependenciesToBeRemoved;s<u.length;s++){var o=u[s];o.removeObserver(this)}this.dependenciesToBeRemoved.clear()}};t.prototype.toString=function(){return"Autorun<".concat(this.debugName,">")};t.prototype.beginUpdate=function(){this.state===3&&(this.state=1),this.updateCount++};t.prototype.endUpdate=function(){var t=this;if(this.updateCount===1)do{if(this.state===1){this.state=3;for(var n=0,i=this.dependencies;n<i.length;n++){var r=i[n];if(r.reportChanges(),this.state===2)break}}this._runIfNeeded()}while(this.state!==3);this.updateCount--,rf((function(){return t.updateCount>=0}))};t.prototype.handlePossibleChange=function(t){this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)&&(this.state=1)};t.prototype.handleChange=function(t,n){this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)&&(!this._handleChange||this._handleChange({changedObservable:t,change:n,didChange:function(n){return n===t}},this.changeSummary))&&(this.state=2)};t.prototype.readObservable=function(t){if(this.disposed)return t.get();t.addObserver(this);var n=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),n};return t}();function wP(t){return new mP(t)}(function(t){t.Observer=pP})(lP||(lP={}));var mP=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.value=n;return i}Object.defineProperty(n.prototype,"debugName",{get:function(){return this.toString()},enumerable:false,configurable:true});n.prototype.get=function(){return this.value};n.prototype.addObserver=function(t){};n.prototype.removeObserver=function(t){};n.prototype.toString=function(){return"Const: ".concat(this.value)};return n}(ZN);function bP(t,n){return new yP(t,n)}var yP=function(t){__extends(n,t);function n(i,r){var e=this;e=t.call(this)||this,e.event=i,e._getValue=r,e.hasValue=!1,e.handleEvent=function(t){var i;var r=e._getValue(t),o=e.value,s=!e.hasValue||o!==r;var u=!1;s&&(e.value=r,e.hasValue&&(u=!0,tP(n.globalTransaction,(function(t){var n;(n=void 0)===null||n===void 0||n.handleFromEventObservableTriggered(e,{oldValue:o,newValue:r,change:void 0,didChange:s,hadValue:e.hasValue});for(var i=0,u=e.observers;i<u.length;i++){var a=u[i];t.updateObserver(a,e),a.handleChange(e,void 0)}}),(function(){var t=e.getDebugName();return"Event fired"+(t?": ".concat(t):"")}))),e.hasValue=!0),u||(i=void 0)===null||i===void 0||i.handleFromEventObservableTriggered(e,{oldValue:o,newValue:r,change:void 0,didChange:s,hadValue:e.hasValue})};return e}n.prototype.getDebugName=function(){return qN(this._getValue)};Object.defineProperty(n.prototype,"debugName",{get:function(){var t=this.getDebugName();return"From Event"+(t?": ".concat(t):"")},enumerable:false,configurable:true});n.prototype.onFirstObserverAdded=function(){this.subscription=this.event(this.handleEvent)};n.prototype.onLastObserverRemoved=function(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0};n.prototype.get=function(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)};return n}(QN);function _P(t,n){return new kP(t,n)}(function(t){t.Observer=yP,t.batchEventsGlobally=function(t,n){var i=!1;yP.globalTransaction===void 0&&(yP.globalTransaction=t,i=!0);try{n()}finally{i&&(yP.globalTransaction=void 0)}}})(bP||(bP={}));var kP=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.debugName=n,r.event=i,r.handleEvent=function(){YN((function(t){for(var n=0,i=r.observers;n<i.length;n++){var e=i[n];t.updateObserver(e,r),e.handleChange(r,void 0)}}),(function(){return r.debugName}))};return r}n.prototype.onFirstObserverAdded=function(){this.subscription=this.event(this.handleEvent)};n.prototype.onLastObserverRemoved=function(){this.subscription.dispose(),this.subscription=void 0};n.prototype.get=function(){};return n}(QN);function xP(t){return typeof t=="string"?new CP(t):new CP(void 0,t)}var CP=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._debugName=n,r._owner=i;return r}Object.defineProperty(n.prototype,"debugName",{get:function(){var t;return(t=new HN(this._owner,this._debugName,void 0).getDebugName(this))!==null&&t!==void 0?t:"Observable Signal"},enumerable:false,configurable:true});n.prototype.trigger=function(t,n){var i=this;if(t)for(var r=0,e=this.observers;r<e.length;r++){var o=e[r];t.updateObserver(o,this),o.handleChange(this,n)}else YN((function(t){i.trigger(t,n)}),(function(){return"Trigger signal ".concat(i.debugName)}))};n.prototype.get=function(){};return n}(QN);function SP(t,n){var i=new DP(!0,n);return t.addObserver(i),n?n(t.get()):t.reportChanges(),ai((function(){t.removeObserver(i)}))}(function(t){GN=t})(SP);var DP=function(){function t(t,n){this._forceRecompute=t,this._handleValue=n,this._counter=0}t.prototype.beginUpdate=function(t){this._counter++};t.prototype.endUpdate=function(t){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(t.get()):t.reportChanges())};t.prototype.handlePossibleChange=function(t){};t.prototype.handleChange=function(t,n){};return t}();var AP=function(){function t(t,n){this._map=t,this._keySelector=n,this._cache=new Map,this._items=[]}t.prototype.dispose=function(){this._cache.forEach((function(t){return t.store.dispose()})),this._cache.clear()};t.prototype.setItems=function(t){var n=[],i=new Set(this._cache.keys());for(var r=0,e=t;r<e.length;r++){var o=e[r];var s=this._keySelector?this._keySelector(o):o;var u=this._cache.get(s);if(u)i.delete(s);else{var a=new hi;u={out:this._map(o,a),store:a},this._cache.set(s,u)}n.push(u.out)}for(var h=0,c=i;h<c.length;h++){var o=c[h];this._cache.get(o).store.dispose(),this._cache.delete(o)}this._items=n};t.prototype.getItems=function(){return this._items};return t}();var OP=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s};var EP=function(){function t(t){this.trait=t,this.renderedElements=[]}Object.defineProperty(t.prototype,"templateId",{get:function(){return"template:".concat(this.trait.name)},enumerable:false,configurable:true});t.prototype.renderTemplate=function(t){return t};t.prototype.renderElement=function(t,n,i){var r=this.renderedElements.findIndex((function(t){return t.templateData===i}));if(r>=0){var e=this.renderedElements[r];this.trait.unrender(i),e.index=n}else{var e={index:n,templateData:i};this.renderedElements.push(e)}this.trait.renderIndex(n,i)};t.prototype.splice=function(t,n,i){var r=[];for(var e=0,o=this.renderedElements;e<o.length;e++){var s=o[e];s.index<t?r.push(s):s.index>=t+n&&r.push({index:s.index+i-n,templateData:s.templateData})}this.renderedElements=r};t.prototype.renderIndexes=function(t){for(var n=0,i=this.renderedElements;n<i.length;n++){var r=i[n],e=r.index,o=r.templateData;t.indexOf(e)>-1&&this.trait.renderIndex(e,o)}};t.prototype.disposeTemplate=function(t){var n=this.renderedElements.findIndex((function(n){return n.templateData===t}));n<0||this.renderedElements.splice(n,1)};return t}();var MP=function(){function t(t){this._trait=t,this.indexes=[],this.sortedIndexes=[],this._onChange=new ki,this.onChange=this._onChange.event}Object.defineProperty(t.prototype,"name",{get:function(){return this._trait},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"renderer",{get:function(){return new EP(this)},enumerable:false,configurable:true});t.prototype.splice=function(t,n,i){var r=i.length-n,e=t+n,o=[];var s=0;for(;s<this.sortedIndexes.length&&this.sortedIndexes[s]<t;)o.push(this.sortedIndexes[s++]);for(var u=0;u<i.length;u++)i[u]&&o.push(u+t);for(;s<this.sortedIndexes.length&&this.sortedIndexes[s]>=e;)o.push(this.sortedIndexes[s++]+r);this.renderer.splice(t,n,i.length),this._set(o,o)};t.prototype.renderIndex=function(t,n){n.classList.toggle(this._trait,this.contains(t))};t.prototype.unrender=function(t){t.classList.remove(this._trait)};t.prototype.set=function(t,n){return this._set(t,__spreadArray([],t,true).sort(XP),n)};t.prototype._set=function(t,n,i){var r=this.indexes,e=this.sortedIndexes;this.indexes=t,this.sortedIndexes=n;var o=YP(e,t);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:t,browserEvent:i}),r};t.prototype.get=function(){return this.indexes};t.prototype.contains=function(t){return d(this.sortedIndexes,t,XP)>=0};t.prototype.dispose=function(){si(this._onChange)};return t}();OP([Y_],MP.prototype,"renderer",null);var FP=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,"selected")||this,i.setAriaSelected=n;return i}n.prototype.renderIndex=function(n,i){t.prototype.renderIndex.call(this,n,i),this.setAriaSelected&&(this.contains(n)?i.setAttribute("aria-selected","true"):i.setAttribute("aria-selected","false"))};return n}(MP);var LP=function(){function t(t,n,i){this.trait=t,this.view=n,this.identityProvider=i}t.prototype.splice=function(t,n,i){var r=this;if(!this.identityProvider)return this.trait.splice(t,n,new Array(i.length).fill(!1));var e=this.trait.get().map((function(t){return r.identityProvider.getId(r.view.element(t)).toString()}));if(e.length===0)return this.trait.splice(t,n,new Array(i.length).fill(!1));var o=new Set(e),s=i.map((function(t){return o.has(r.identityProvider.getId(t).toString())}));this.trait.splice(t,n,s)};return t}();function jP(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"}function RP(t,n){return!!t.classList.contains(n)||!t.classList.contains("monaco-list")&&!!t.parentElement&&RP(t.parentElement,n)}function TP(t){return RP(t,"monaco-editor")}function IP(t){return RP(t,"monaco-tree-sticky-row")}function BP(t){return t.classList.contains("monaco-tree-sticky-container")}function NP(t){return!!(t.tagName==="A"&&t.classList.contains("monaco-button")||t.tagName==="DIV"&&t.classList.contains("monaco-button-dropdown"))||!t.classList.contains("monaco-list")&&!!t.parentElement&&NP(t.parentElement)}var PP=function(){function t(t,n,i){var r=this;this.list=t,this.view=n,this.disposables=new hi,this.multipleSelectionDisposables=new hi,this.multipleSelectionSupport=i.multipleSelectionSupport,this.disposables.add(this.onKeyDown((function(t){switch(t.keyCode){case 3:return r.onEnter(t);case 16:return r.onUpArrow(t);case 18:return r.onDownArrow(t);case 11:return r.onPageUpArrow(t);case 12:return r.onPageDownArrow(t);case 9:return r.onEscape(t);case 31:r.multipleSelectionSupport&&(Ft?t.metaKey:t.ctrlKey)&&r.onCtrlA(t)}})))}Object.defineProperty(t.prototype,"onKeyDown",{get:function(){return wi.chain(this.disposables.add(new Dk(this.view.domNode,"keydown")).event,(function(t){return t.filter((function(t){return!jP(t.target)})).map((function(t){return new ws(t)}))}))},enumerable:false,configurable:true});t.prototype.updateOptions=function(t){t.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=t.multipleSelectionSupport)};t.prototype.onEnter=function(t){t.preventDefault(),t.stopPropagation(),this.list.setSelection(this.list.getFocus(),t.browserEvent)};t.prototype.onUpArrow=function(t){t.preventDefault(),t.stopPropagation(),this.list.focusPrevious(1,!1,t.browserEvent);var n=this.list.getFocus()[0];this.list.setAnchor(n),this.list.reveal(n),this.view.domNode.focus()};t.prototype.onDownArrow=function(t){t.preventDefault(),t.stopPropagation(),this.list.focusNext(1,!1,t.browserEvent);var n=this.list.getFocus()[0];this.list.setAnchor(n),this.list.reveal(n),this.view.domNode.focus()};t.prototype.onPageUpArrow=function(t){t.preventDefault(),t.stopPropagation(),this.list.focusPreviousPage(t.browserEvent);var n=this.list.getFocus()[0];this.list.setAnchor(n),this.list.reveal(n),this.view.domNode.focus()};t.prototype.onPageDownArrow=function(t){t.preventDefault(),t.stopPropagation(),this.list.focusNextPage(t.browserEvent);var n=this.list.getFocus()[0];this.list.setAnchor(n),this.list.reveal(n),this.view.domNode.focus()};t.prototype.onCtrlA=function(t){t.preventDefault(),t.stopPropagation(),this.list.setSelection(S(this.list.length),t.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()};t.prototype.onEscape=function(t){this.list.getSelection().length&&(t.preventDefault(),t.stopPropagation(),this.list.setSelection([],t.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())};t.prototype.dispose=function(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()};return t}();var WP,HP;OP([Y_],PP.prototype,"onKeyDown",null),function(t){t[t.Automatic=0]="Automatic",t[t.Trigger=1]="Trigger"}(WP||(WP={})),function(t){t[t.Idle=0]="Idle",t[t.Typing=1]="Typing"}(HP||(HP={}));var zP=new(function(){function t(){}t.prototype.mightProducePrintableCharacter=function(t){return!(t.ctrlKey||t.metaKey||t.altKey)&&(t.keyCode>=31&&t.keyCode<=56||t.keyCode>=21&&t.keyCode<=30||t.keyCode>=98&&t.keyCode<=107||t.keyCode>=85&&t.keyCode<=95)};return t}());var UP=function(){function t(t,n,i,r,e){this.list=t,this.view=n,this.keyboardNavigationLabelProvider=i,this.keyboardNavigationEventFilter=r,this.delegate=e,this.enabled=!1,this.state=HP.Idle,this.mode=WP.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new hi,this.disposables=new hi,this.updateOptions(t.options)}t.prototype.updateOptions=function(t){var n,i;(n=t.typeNavigationEnabled)===null||n===void 0||n?this.enable():this.disable(),this.mode=(i=t.typeNavigationMode)!==null&&i!==void 0?i:WP.Automatic};t.prototype.enable=function(){var t=this;if(this.enabled)return;var n=!1;var i=wi.chain(this.enabledDisposables.add(new Dk(this.view.domNode,"keydown")).event,(function(i){return i.filter((function(t){return!jP(t.target)})).filter((function(){return t.mode===WP.Automatic||t.triggered})).map((function(t){return new ws(t)})).filter((function(i){return n||t.keyboardNavigationEventFilter(i)})).filter((function(n){return t.delegate.mightProducePrintableCharacter(n)})).forEach((function(t){return ch(t,!0)})).map((function(t){return t.browserEvent.key}))})),r=wi.debounce(i,(function(){return null}),800,void 0,void 0,void 0,this.enabledDisposables);wi.reduce(wi.any(i,r),(function(t,n){return n===null?null:(t||"")+n}),void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),r(this.onClear,this,this.enabledDisposables),i((function(){return n=!0}),void 0,this.enabledDisposables),r((function(){return n=!1}),void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1};t.prototype.disable=function(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)};t.prototype.onClear=function(){var t;var n=this.list.getFocus();if(n.length>0&&n[0]===this.previouslyFocused){var i=(t=this.list.options.accessibilityProvider)===null||t===void 0?void 0:t.getAriaLabel(this.list.element(n[0]));typeof i=="string"?yw(i):i&&yw(i.get())}this.previouslyFocused=-1};t.prototype.onInput=function(t){if(!t)return this.state=HP.Idle,void(this.triggered=!1);var n=this.list.getFocus(),i=n.length>0?n[0]:0,r=this.state===HP.Idle?1:0;this.state=HP.Typing;for(var e=0;e<this.list.length;e++){var o=(i+e+r)%this.list.length,s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),u=s&&s.toString();if(this.list.options.typeNavigationEnabled){if(u!==void 0){if(VR(t,u))return this.previouslyFocused=i,this.list.setFocus([o]),void this.list.reveal(o);var a=pT(t,u);if(a&&a[0].end-a[0].start>1&&a.length===1)return this.previouslyFocused=i,this.list.setFocus([o]),void this.list.reveal(o)}}else if(u===void 0||VR(t,u))return this.previouslyFocused=i,this.list.setFocus([o]),void this.list.reveal(o)}};t.prototype.dispose=function(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()};return t}();var KP=function(){function t(t,n){this.list=t,this.view=n,this.disposables=new hi;var i=wi.chain(this.disposables.add(new Dk(n.domNode,"keydown")).event,(function(t){return t.filter((function(t){return!jP(t.target)})).map((function(t){return new ws(t)}))}));wi.chain(i,(function(t){return t.filter((function(t){return!(t.keyCode!==2||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)}))}))(this.onTab,this,this.disposables)}t.prototype.onTab=function(t){if(t.target!==this.view.domNode)return;var n=this.list.getFocus();if(n.length===0)return;var i=this.view.domElement(n[0]);if(!i)return;var r=i.querySelector("[tabIndex]");if(!(r&&r instanceof HTMLElement&&r.tabIndex!==-1))return;var e=sa(r).getComputedStyle(r);e.visibility!=="hidden"&&e.display!=="none"&&(t.preventDefault(),t.stopPropagation(),r.focus())};t.prototype.dispose=function(){this.disposables.dispose()};return t}();function VP(t){return Ft?t.browserEvent.metaKey:t.browserEvent.ctrlKey}function qP(t){return t.browserEvent.shiftKey}var GP={isSelectionSingleChangeEvent:VP,isSelectionRangeChangeEvent:qP};var $P=function(){function t(t){this.list=t,this.disposables=new hi,this._onPointer=new ki,this.onPointer=this._onPointer.event,t.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||GP),this.mouseSupport=t.options.mouseSupport===void 0||!!t.options.mouseSupport,this.mouseSupport&&(t.onMouseDown(this.onMouseDown,this,this.disposables),t.onContextMenu(this.onContextMenu,this,this.disposables),t.onMouseDblClick(this.onDoubleClick,this,this.disposables),t.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(nk.addTarget(t.getHTMLElement()))),wi.any(t.onMouseClick,t.onMouseMiddleClick,t.onTap)(this.onViewPointer,this,this.disposables)}t.prototype.updateOptions=function(t){t.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,t.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||GP))};t.prototype.isSelectionSingleChangeEvent=function(t){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(t)};t.prototype.isSelectionRangeChangeEvent=function(t){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(t)};t.prototype.isSelectionChangeEvent=function(t){return this.isSelectionSingleChangeEvent(t)||this.isSelectionRangeChangeEvent(t)};t.prototype.onMouseDown=function(t){TP(t.browserEvent.target)||Ka()!==t.browserEvent.target&&this.list.domFocus()};t.prototype.onContextMenu=function(t){if(jP(t.browserEvent.target)||TP(t.browserEvent.target))return;var n=t.index===void 0?[]:[t.index];this.list.setFocus(n,t.browserEvent)};t.prototype.onViewPointer=function(t){if(!this.mouseSupport||jP(t.browserEvent.target)||TP(t.browserEvent.target)||t.browserEvent.isHandledByList)return;t.browserEvent.isHandledByList=!0;var n=t.index;return n===void 0?(this.list.setFocus([],t.browserEvent),this.list.setSelection([],t.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionChangeEvent(t)?this.changeSelection(t):(this.list.setFocus([n],t.browserEvent),this.list.setAnchor(n),sh(i=t.browserEvent)&&i.button===2||this.list.setSelection([n],t.browserEvent),void this._onPointer.fire(t));var i};t.prototype.onDoubleClick=function(t){if(jP(t.browserEvent.target)||TP(t.browserEvent.target)||this.isSelectionChangeEvent(t)||t.browserEvent.isHandledByList)return;t.browserEvent.isHandledByList=!0;var n=this.list.getFocus();this.list.setSelection(n,t.browserEvent)};t.prototype.changeSelection=function(t){var n=t.index;var i=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(t)){if(i===void 0){var r=this.list.getFocus()[0];i=r!==null&&r!==void 0?r:n,this.list.setAnchor(i)}var e=S(Math.min(i,n),Math.max(i,n)+1),o=this.list.getSelection(),s=function(t,n){var i=t.indexOf(n);if(i===-1)return[];var r=[];var e=i-1;for(;e>=0&&t[e]===n-(i-e);)r.push(t[e--]);for(r.reverse(),e=i;e<t.length&&t[e]===n+(e-i);)r.push(t[e++]);return r}(YP(o,[i]),i);if(s.length===0)return;var u=YP(e,function(t,n){var i=[];var r=0,e=0;for(;r<t.length||e<n.length;)if(r>=t.length)i.push(n[e++]);else if(e>=n.length)i.push(t[r++]);else{if(t[r]===n[e]){r++,e++;continue}t[r]<n[e]?i.push(t[r++]):e++}return i}(o,s));this.list.setSelection(u,t.browserEvent),this.list.setFocus([n],t.browserEvent)}else if(this.isSelectionSingleChangeEvent(t)){var e=this.list.getSelection(),o=e.filter((function(t){return t!==n}));this.list.setFocus([n]),this.list.setAnchor(n),e.length===o.length?this.list.setSelection(__spreadArray(__spreadArray([],o,true),[n],false),t.browserEvent):this.list.setSelection(o,t.browserEvent)}};t.prototype.dispose=function(){this.disposables.dispose()};return t}();var JP=function(){function t(t,n){this.styleElement=t,this.selectorSuffix=n}t.prototype.style=function(t){var n,i;var r=this.selectorSuffix&&".".concat(this.selectorSuffix),e=[];t.listBackground&&e.push(".monaco-list".concat(r," .monaco-list-rows { background: ").concat(t.listBackground,"; }")),t.listFocusBackground&&(e.push(".monaco-list".concat(r,":focus .monaco-list-row.focused { background-color: ").concat(t.listFocusBackground,"; }")),e.push(".monaco-list".concat(r,":focus .monaco-list-row.focused:hover { background-color: ").concat(t.listFocusBackground,"; }"))),t.listFocusForeground&&e.push(".monaco-list".concat(r,":focus .monaco-list-row.focused { color: ").concat(t.listFocusForeground,"; }")),t.listActiveSelectionBackground&&(e.push(".monaco-list".concat(r,":focus .monaco-list-row.selected { background-color: ").concat(t.listActiveSelectionBackground,"; }")),e.push(".monaco-list".concat(r,":focus .monaco-list-row.selected:hover { background-color: ").concat(t.listActiveSelectionBackground,"; }"))),t.listActiveSelectionForeground&&e.push(".monaco-list".concat(r,":focus .monaco-list-row.selected { color: ").concat(t.listActiveSelectionForeground,"; }")),t.listActiveSelectionIconForeground&&e.push(".monaco-list".concat(r,":focus .monaco-list-row.selected .codicon { color: ").concat(t.listActiveSelectionIconForeground,"; }")),t.listFocusAndSelectionBackground&&e.push("\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list".concat(r,":focus .monaco-list-row.selected.focused { background-color: ").concat(t.listFocusAndSelectionBackground,"; }\n\t\t\t")),t.listFocusAndSelectionForeground&&e.push("\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list".concat(r,":focus .monaco-list-row.selected.focused { color: ").concat(t.listFocusAndSelectionForeground,"; }\n\t\t\t")),t.listInactiveFocusForeground&&(e.push(".monaco-list".concat(r," .monaco-list-row.focused { color:  ").concat(t.listInactiveFocusForeground,"; }")),e.push(".monaco-list".concat(r," .monaco-list-row.focused:hover { color:  ").concat(t.listInactiveFocusForeground,"; }"))),t.listInactiveSelectionIconForeground&&e.push(".monaco-list".concat(r," .monaco-list-row.focused .codicon { color:  ").concat(t.listInactiveSelectionIconForeground,"; }")),t.listInactiveFocusBackground&&(e.push(".monaco-list".concat(r," .monaco-list-row.focused { background-color:  ").concat(t.listInactiveFocusBackground,"; }")),e.push(".monaco-list".concat(r," .monaco-list-row.focused:hover { background-color:  ").concat(t.listInactiveFocusBackground,"; }"))),t.listInactiveSelectionBackground&&(e.push(".monaco-list".concat(r," .monaco-list-row.selected { background-color:  ").concat(t.listInactiveSelectionBackground,"; }")),e.push(".monaco-list".concat(r," .monaco-list-row.selected:hover { background-color:  ").concat(t.listInactiveSelectionBackground,"; }"))),t.listInactiveSelectionForeground&&e.push(".monaco-list".concat(r," .monaco-list-row.selected { color: ").concat(t.listInactiveSelectionForeground,"; }")),t.listHoverBackground&&e.push(".monaco-list".concat(r,":not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ").concat(t.listHoverBackground,"; }")),t.listHoverForeground&&e.push(".monaco-list".concat(r,":not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ").concat(t.listHoverForeground,"; }"));var o=Dh(t.listFocusAndSelectionOutline,Dh(t.listSelectionOutline,(n=t.listFocusOutline)!==null&&n!==void 0?n:""));o&&e.push(".monaco-list".concat(r,":focus .monaco-list-row.focused.selected { outline: 1px solid ").concat(o,"; outline-offset: -1px;}")),t.listFocusOutline&&e.push("\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list".concat(r,":focus .monaco-list-row.focused { outline: 1px solid ").concat(t.listFocusOutline,"; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list").concat(r,".last-focused .monaco-list-row.focused { outline: 1px solid ").concat(t.listFocusOutline,"; outline-offset: -1px; }\n\t\t\t"));var s=Dh(t.listSelectionOutline,(i=t.listInactiveFocusOutline)!==null&&i!==void 0?i:"");s&&e.push(".monaco-list".concat(r," .monaco-list-row.focused.selected { outline: 1px dotted ").concat(s,"; outline-offset: -1px; }")),t.listSelectionOutline&&e.push(".monaco-list".concat(r," .monaco-list-row.selected { outline: 1px dotted ").concat(t.listSelectionOutline,"; outline-offset: -1px; }")),t.listInactiveFocusOutline&&e.push(".monaco-list".concat(r," .monaco-list-row.focused { outline: 1px dotted ").concat(t.listInactiveFocusOutline,"; outline-offset: -1px; }")),t.listHoverOutline&&e.push(".monaco-list".concat(r," .monaco-list-row:hover { outline: 1px dashed ").concat(t.listHoverOutline,"; outline-offset: -1px; }")),t.listDropOverBackground&&e.push("\n\t\t\t\t.monaco-list".concat(r,".drop-target,\n\t\t\t\t.monaco-list").concat(r," .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list").concat(r," .monaco-list-row.drop-target { background-color: ").concat(t.listDropOverBackground," !important; color: inherit !important; }\n\t\t\t")),t.listDropBetweenBackground&&(e.push("\n\t\t\t.monaco-list".concat(r," .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list").concat(r,' .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ').concat(t.listDropBetweenBackground,";\n\t\t\t}")),e.push("\n\t\t\t.monaco-list".concat(r," .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list").concat(r,' .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ').concat(t.listDropBetweenBackground,";\n\t\t\t}"))),t.tableColumnsBorder&&e.push("\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ".concat(t.tableColumnsBorder,";\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t")),t.tableOddRowsBackgroundColor&&e.push("\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ".concat(t.tableOddRowsBackgroundColor,";\n\t\t\t\t}\n\t\t\t")),this.styleElement.textContent=e.join("\n")};return t}();var ZP={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:Ig.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:Ig.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:Ig.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},QP={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:function(){return null},onDragStart:function(){},onDragOver:function(){return!1},drop:function(){},dispose:function(){}}};function YP(t,n){var i=[];var r=0,e=0;for(;r<t.length||e<n.length;)if(r>=t.length)i.push(n[e++]);else if(e>=n.length)i.push(t[r++]);else{if(t[r]===n[e]){i.push(t[r]),r++,e++;continue}t[r]<n[e]?i.push(t[r++]):i.push(n[e++])}return i}var XP=function(t,n){return t-n};var tW=function(){function t(t,n){this._templateId=t,this.renderers=n}Object.defineProperty(t.prototype,"templateId",{get:function(){return this._templateId},enumerable:false,configurable:true});t.prototype.renderTemplate=function(t){return this.renderers.map((function(n){return n.renderTemplate(t)}))};t.prototype.renderElement=function(t,n,i,r){var e=0;for(var o=0,s=this.renderers;o<s.length;o++){var u=s[o];u.renderElement(t,n,i[e++],r)}};t.prototype.disposeElement=function(t,n,i,r){var e;var o=0;for(var s=0,u=this.renderers;s<u.length;s++){var a=u[s];(e=a.disposeElement)===null||e===void 0||e.call(a,t,n,i[o],r),o+=1}};t.prototype.disposeTemplate=function(t){var n=0;for(var i=0,r=this.renderers;i<r.length;i++){var e=r[i];e.disposeTemplate(t[n++])}};return t}();var nW=function(){function t(t){this.accessibilityProvider=t,this.templateId="a18n"}t.prototype.renderTemplate=function(t){return{container:t,disposables:new hi}};t.prototype.renderElement=function(t,n,i){var r=this;var e=this.accessibilityProvider.getAriaLabel(t),o=e&&typeof e!="string"?e:wP(e);i.disposables.add(lP((function(t){r.setAriaLabel(t.readObservable(o),i.container)})));var s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);typeof s=="number"?i.container.setAttribute("aria-level","".concat(s)):i.container.removeAttribute("aria-level")};t.prototype.setAriaLabel=function(t,n){t?n.setAttribute("aria-label",t):n.removeAttribute("aria-label")};t.prototype.disposeElement=function(t,n,i,r){i.disposables.clear()};t.prototype.disposeTemplate=function(t){t.disposables.dispose()};return t}();var iW=function(){function t(t,n){this.list=t,this.dnd=n}t.prototype.getDragElements=function(t){var n=this.list.getSelectedElements();return n.indexOf(t)>-1?n:[t]};t.prototype.getDragURI=function(t){return this.dnd.getDragURI(t)};t.prototype.getDragLabel=function(t,n){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(t,n)};t.prototype.onDragStart=function(t,n){var i,r;(r=(i=this.dnd).onDragStart)===null||r===void 0||r.call(i,t,n)};t.prototype.onDragOver=function(t,n,i,r,e){return this.dnd.onDragOver(t,n,i,r,e)};t.prototype.onDragLeave=function(t,n,i,r){var e,o;(o=(e=this.dnd).onDragLeave)===null||o===void 0||o.call(e,t,n,i,r)};t.prototype.onDragEnd=function(t){var n,i;(i=(n=this.dnd).onDragEnd)===null||i===void 0||i.call(n,t)};t.prototype.drop=function(t,n,i,r,e){this.dnd.drop(t,n,i,r,e)};t.prototype.dispose=function(){this.dnd.dispose()};return t}();var rW=function(){function t(t,n,i,r,e){if(e===void 0){e=QP}var o,s,u,a;this.user=t,this._options=e,this.focus=new MP("focused"),this.anchor=new MP("anchor"),this.eventBufferer=new Oi,this._ariaLabel="",this.disposables=new hi,this._onDidDispose=new ki,this.onDidDispose=this._onDidDispose.event;var h=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(o=this._options.accessibilityProvider)===null||o===void 0?void 0:o.getWidgetRole():"list";this.selection=new FP(h!=="listbox");var c=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=e.accessibilityProvider,this.accessibilityProvider&&(c.push(new nW(this.accessibilityProvider)),(u=(s=this.accessibilityProvider).onDidChangeActiveDescendant)===null||u===void 0||u.call(s,this.onDidChangeActiveDescendant,this,this.disposables)),r=r.map((function(t){return new tW(t.templateId,__spreadArray(__spreadArray([],c,true),[t],false))}));var f=__assign(__assign({},e),{dnd:e.dnd&&new iW(this,e.dnd)});if(this.view=this.createListView(n,i,r,f),this.view.domNode.setAttribute("role",h),e.styleController)this.styleController=e.styleController(this.view.domId);else{var l=Qa(this.view.domNode);this.styleController=new JP(l,this.view.domId)}if(this.spliceable=new AN([new LP(this.focus,this.view,e.identityProvider),new LP(this.selection,this.view,e.identityProvider),new LP(this.anchor,this.view,e.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new KP(this,this.view)),(typeof e.keyboardSupport!="boolean"||e.keyboardSupport)&&(this.keyboardController=new PP(this,this.view,e),this.disposables.add(this.keyboardController)),e.keyboardNavigationLabelProvider){var l=e.keyboardNavigationDelegate||zP;this.typeNavigationController=new UP(this,this.view,e.keyboardNavigationLabelProvider,(a=e.keyboardNavigationEventFilter)!==null&&a!==void 0?a:function(){return!0},l),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(e),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}Object.defineProperty(t.prototype,"onDidChangeFocus",{get:function(){var t=this;return wi.map(this.eventBufferer.wrapEvent(this.focus.onChange),(function(n){return t.toListEvent(n)}),this.disposables)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeSelection",{get:function(){var t=this;return wi.map(this.eventBufferer.wrapEvent(this.selection.onChange),(function(n){return t.toListEvent(n)}),this.disposables)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"domId",{get:function(){return this.view.domId},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidScroll",{get:function(){return this.view.onDidScroll},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseClick",{get:function(){return this.view.onMouseClick},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseDblClick",{get:function(){return this.view.onMouseDblClick},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseMiddleClick",{get:function(){return this.view.onMouseMiddleClick},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onPointer",{get:function(){return this.mouseController.onPointer},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseDown",{get:function(){return this.view.onMouseDown},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseOver",{get:function(){return this.view.onMouseOver},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseOut",{get:function(){return this.view.onMouseOut},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onTouchStart",{get:function(){return this.view.onTouchStart},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onTap",{get:function(){return this.view.onTap},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onContextMenu",{get:function(){var t=this;var n=!1;var i=wi.chain(this.disposables.add(new Dk(this.view.domNode,"keydown")).event,(function(t){return t.map((function(t){return new ws(t)})).filter((function(t){return n=t.keyCode===58||t.shiftKey&&t.keyCode===68})).map((function(t){return ch(t,!0)})).filter((function(){return!1}))})),r=wi.chain(this.disposables.add(new Dk(this.view.domNode,"keyup")).event,(function(i){return i.forEach((function(){return n=!1})).map((function(t){return new ws(t)})).filter((function(t){return t.keyCode===58||t.shiftKey&&t.keyCode===68})).map((function(t){return ch(t,!0)})).map((function(n){var i=n.browserEvent;var r=t.getFocus(),e=r.length?r[0]:void 0;return{index:e,element:e!==void 0?t.view.element(e):void 0,anchor:e!==void 0?t.view.domElement(e):t.view.domNode,browserEvent:i}}))})),e=wi.chain(this.view.onContextMenu,(function(i){return i.filter((function(t){return!n})).map((function(n){var i=n.element,r=n.index,e=n.browserEvent;return{element:i,index:r,anchor:new _s(sa(t.view.domNode),e),browserEvent:e}}))}));return wi.any(i,r,e)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onKeyDown",{get:function(){return this.disposables.add(new Dk(this.view.domNode,"keydown")).event},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidFocus",{get:function(){return wi.signal(this.disposables.add(new Dk(this.view.domNode,"focus",!0)).event)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidBlur",{get:function(){return wi.signal(this.disposables.add(new Dk(this.view.domNode,"blur",!0)).event)},enumerable:false,configurable:true});t.prototype.createListView=function(t,n,i,r){return new WN(t,n,i,r)};t.prototype.createMouseController=function(t){return new $P(this)};t.prototype.updateOptions=function(t){if(t===void 0){t={}}var n,i;this._options=__assign(__assign({},this._options),t),(n=this.typeNavigationController)===null||n===void 0||n.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(t),(i=this.keyboardController)===null||i===void 0||i.updateOptions(t),this.view.updateOptions(t)};Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:false,configurable:true});t.prototype.splice=function(t,n,i){var r=this;if(i===void 0){i=[]}if(t<0||t>this.view.length)throw new ON(this.user,"Invalid start index: ".concat(t));if(n<0)throw new ON(this.user,"Invalid delete count: ".concat(n));n===0&&i.length===0||this.eventBufferer.bufferEvents((function(){return r.spliceable.splice(t,n,i)}))};t.prototype.rerender=function(){this.view.rerender()};t.prototype.element=function(t){return this.view.element(t)};t.prototype.indexOf=function(t){return this.view.indexOf(t)};t.prototype.indexAt=function(t){return this.view.indexAt(t)};Object.defineProperty(t.prototype,"length",{get:function(){return this.view.length},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"contentHeight",{get:function(){return this.view.contentHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeContentHeight",{get:function(){return this.view.onDidChangeContentHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.view.getScrollTop()},set:function(t){this.view.setScrollTop(t)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"scrollHeight",{get:function(){return this.view.scrollHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"renderHeight",{get:function(){return this.view.renderHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"firstVisibleIndex",{get:function(){return this.view.firstVisibleIndex},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(t){this._ariaLabel=t,this.view.domNode.setAttribute("aria-label",t)},enumerable:false,configurable:true});t.prototype.domFocus=function(){this.view.domNode.focus({preventScroll:!0})};t.prototype.layout=function(t,n){this.view.layout(t,n)};t.prototype.setSelection=function(t,n){for(var i=0,r=t;i<r.length;i++){var e=r[i];if(e<0||e>=this.length)throw new ON(this.user,"Invalid index ".concat(e))}this.selection.set(t,n)};t.prototype.getSelection=function(){return this.selection.get()};t.prototype.getSelectedElements=function(){var t=this;return this.getSelection().map((function(n){return t.view.element(n)}))};t.prototype.setAnchor=function(t){if(t!==void 0){if(t<0||t>=this.length)throw new ON(this.user,"Invalid index ".concat(t));this.anchor.set([t])}else this.anchor.set([])};t.prototype.getAnchor=function(){return C(this.anchor.get(),void 0)};t.prototype.getAnchorElement=function(){var t=this.getAnchor();return t===void 0?void 0:this.element(t)};t.prototype.setFocus=function(t,n){for(var i=0,r=t;i<r.length;i++){var e=r[i];if(e<0||e>=this.length)throw new ON(this.user,"Invalid index ".concat(e))}this.focus.set(t,n)};t.prototype.focusNext=function(t,n,i,r){if(t===void 0){t=1}if(n===void 0){n=!1}if(this.length===0)return;var e=this.focus.get(),o=this.findNextIndex(e.length>0?e[0]+t:0,n,r);o>-1&&this.setFocus([o],i)};t.prototype.focusPrevious=function(t,n,i,r){if(t===void 0){t=1}if(n===void 0){n=!1}if(this.length===0)return;var e=this.focus.get(),o=this.findPreviousIndex(e.length>0?e[0]-t:0,n,r);o>-1&&this.setFocus([o],i)};t.prototype.focusNextPage=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,e,o,s;return __generator(this,(function(u){switch(u.label){case 0:i=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);i=i===0?0:i-1;r=this.getFocus()[0];if(!(r!==i&&(r===void 0||i>r)))return[3,1];e=this.findPreviousIndex(i,!1,n);e>-1&&r!==e?this.setFocus([e],t):this.setFocus([i],t);return[3,5];case 1:e=this.view.getScrollTop();o=e+this.view.renderHeight;i>r&&(o-=this.view.elementHeight(i)),this.view.setScrollTop(o);s=this.view.getScrollTop()!==e;if(!s)return[3,4];this.setFocus([]);return[4,Ms(0)];case 2:u.sent();return[4,this.focusNextPage(t,n)];case 3:s=u.sent();u.label=4;case 4:s;u.label=5;case 5:return[2]}}))}))};t.prototype.focusPreviousPage=function(t,n){return __awaiter(this,arguments,void 0,(function(t,n,i){var r,e,o,s,u,u,a;if(i===void 0){i=function(){return 0}}return __generator(this,(function(h){switch(h.label){case 0:e=i(),o=this.view.getScrollTop()+e;r=o===0?this.view.indexAt(o):this.view.indexAfter(o-1);s=this.getFocus()[0];if(!(s!==r&&(s===void 0||s>=r)))return[3,1];u=this.findNextIndex(r,!1,n);u>-1&&s!==u?this.setFocus([u],t):this.setFocus([r],t);return[3,5];case 1:u=o;this.view.setScrollTop(o-this.view.renderHeight-e);a=this.view.getScrollTop()+i()!==u;if(!a)return[3,4];this.setFocus([]);return[4,Ms(0)];case 2:h.sent();return[4,this.focusPreviousPage(t,n,i)];case 3:a=h.sent();h.label=4;case 4:a;h.label=5;case 5:return[2]}}))}))};t.prototype.focusLast=function(t,n){if(this.length===0)return;var i=this.findPreviousIndex(this.length-1,!1,n);i>-1&&this.setFocus([i],t)};t.prototype.focusFirst=function(t,n){this.focusNth(0,t,n)};t.prototype.focusNth=function(t,n,i){if(this.length===0)return;var r=this.findNextIndex(t,!1,i);r>-1&&this.setFocus([r],n)};t.prototype.findNextIndex=function(t,n,i){if(n===void 0){n=!1}for(var r=0;r<this.length;r++){if(t>=this.length&&!n)return-1;if(t%=this.length,!i||i(this.element(t)))return t;t++}return-1};t.prototype.findPreviousIndex=function(t,n,i){if(n===void 0){n=!1}for(var r=0;r<this.length;r++){if(t<0&&!n)return-1;if(t=(this.length+t%this.length)%this.length,!i||i(this.element(t)))return t;t--}return-1};t.prototype.getFocus=function(){return this.focus.get()};t.prototype.getFocusedElements=function(){var t=this;return this.getFocus().map((function(n){return t.view.element(n)}))};t.prototype.reveal=function(t,n,i){if(i===void 0){i=0}if(t<0||t>=this.length)throw new ON(this.user,"Invalid index ".concat(t));var r=this.view.getScrollTop(),e=this.view.elementTop(t),o=this.view.elementHeight(t);if(K(n)){var s=o-this.view.renderHeight+i;this.view.setScrollTop(s*mj(n,0,1)+e-i)}else{var s=e+o,u=r+this.view.renderHeight;e<r+i&&s>=u||(e<r+i||s>=u&&o>=this.view.renderHeight?this.view.setScrollTop(e-i):s>=u&&this.view.setScrollTop(s-this.view.renderHeight))}};t.prototype.getRelativeTop=function(t,n){if(n===void 0){n=0}if(t<0||t>=this.length)throw new ON(this.user,"Invalid index ".concat(t));var i=this.view.getScrollTop(),r=this.view.elementTop(t),e=this.view.elementHeight(t);if(r<i+n||r+e>i+this.view.renderHeight)return null;var o=e-this.view.renderHeight+n;return Math.abs((i+n-r)/o)};t.prototype.getHTMLElement=function(){return this.view.domNode};t.prototype.getScrollableElement=function(){return this.view.scrollableElementDomNode};t.prototype.getElementID=function(t){return this.view.getElementDomId(t)};t.prototype.getElementTop=function(t){return this.view.elementTop(t)};t.prototype.style=function(t){this.styleController.style(t)};t.prototype.toListEvent=function(t){var n=this;var i=t.indexes,r=t.browserEvent;return{indexes:i,elements:i.map((function(t){return n.view.element(t)})),browserEvent:r}};t.prototype._onFocusChange=function(){var t=this.focus.get();this.view.domNode.classList.toggle("element-focused",t.length>0),this.onDidChangeActiveDescendant()};t.prototype.onDidChangeActiveDescendant=function(){var t;var n=this.focus.get();if(n.length>0){var i=void 0;!((t=this.accessibilityProvider)===null||t===void 0)&&t.getActiveDescendantId&&(i=this.accessibilityProvider.getActiveDescendantId(this.view.element(n[0]))),this.view.domNode.setAttribute("aria-activedescendant",i||this.view.getElementDomId(n[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")};t.prototype._onSelectionChange=function(){var t=this.selection.get();this.view.domNode.classList.toggle("selection-none",t.length===0),this.view.domNode.classList.toggle("selection-single",t.length===1),this.view.domNode.classList.toggle("selection-multiple",t.length>1)};t.prototype.dispose=function(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()};return t}();OP([Y_],rW.prototype,"onDidChangeFocus",null),OP([Y_],rW.prototype,"onDidChangeSelection",null),OP([Y_],rW.prototype,"onContextMenu",null),OP([Y_],rW.prototype,"onKeyDown",null),OP([Y_],rW.prototype,"onDidFocus",null),OP([Y_],rW.prototype,"onDidBlur",null);var eW=bh,oW="selectOption.entry.template";var sW=function(){function t(){}Object.defineProperty(t.prototype,"templateId",{get:function(){return oW},enumerable:false,configurable:true});t.prototype.renderTemplate=function(t){var n=Object.create(null);return n.root=t,n.text=vh(t,eW(".option-text")),n.detail=vh(t,eW(".option-detail")),n.decoratorRight=vh(t,eW(".option-decorator-right")),n};t.prototype.renderElement=function(t,n,i){var r=i,e=t.text,o=t.detail,s=t.decoratorRight,u=t.isDisabled;r.text.textContent=e,r.detail.textContent=o||"",r.decoratorRight.innerText=s||"",u?r.root.classList.add("option-disabled"):r.root.classList.remove("option-disabled")};t.prototype.disposeTemplate=function(t){};return t}();var uW=function(t){__extends(n,t);function n(i,r,e,o,s){var u=this;u=t.call(this)||this,u.options=[],u._currentSelection=0,u._hasDetails=!1,u._skipLayout=!1,u._sticky=!1,u._isVisible=!1,u.styles=o,u.selectBoxOptions=s||Object.create(null),typeof u.selectBoxOptions.minBottomMargin!="number"?u.selectBoxOptions.minBottomMargin=n.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:u.selectBoxOptions.minBottomMargin<0&&(u.selectBoxOptions.minBottomMargin=0),u.selectElement=document.createElement("select"),u.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof u.selectBoxOptions.ariaLabel=="string"&&u.selectElement.setAttribute("aria-label",u.selectBoxOptions.ariaLabel),typeof u.selectBoxOptions.ariaDescription=="string"&&u.selectElement.setAttribute("aria-description",u.selectBoxOptions.ariaDescription),u._onDidSelect=new ki,u._register(u._onDidSelect),u.registerListeners(),u.constructSelectDropDown(e),u.selected=r||0,i&&u.setOptions(i,r),u.initStyleSheet();return u}n.prototype.setTitle=function(t){!this._hover&&t?this._hover=this._register(DN(kN("mouse"),this.selectElement,t)):this._hover&&this._hover.update(t)};n.prototype.getHeight=function(){return 22};n.prototype.getTemplateId=function(){return oW};n.prototype.constructSelectDropDown=function(t){this.contextViewProvider=t,this.selectDropDownContainer=bh(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=vh(this.selectDropDownContainer,eW(".select-box-details-pane"));var n=vh(this.selectDropDownContainer,eW(".select-box-dropdown-container-width-control")),i=vh(n,eW(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",vh(i,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Qa(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(ma(this.selectDropDownContainer,ah.DRAG_START,(function(t){ch(t,!0)})))};n.prototype.registerListeners=function(){var t=this;var n;this._register(ya(this.selectElement,"change",(function(n){t.selected=n.target.selectedIndex,t._onDidSelect.fire({index:n.target.selectedIndex,selected:n.target.value}),t.options[t.selected]&&t.options[t.selected].text&&t.setTitle(t.options[t.selected].text)}))),this._register(ma(this.selectElement,ah.CLICK,(function(n){ch(n),t._isVisible?t.hideSelectDropDown(!0):t.showSelectDropDown()}))),this._register(ma(this.selectElement,ah.MOUSE_DOWN,(function(t){ch(t)}))),this._register(ma(this.selectElement,"touchstart",(function(i){n=t._isVisible}))),this._register(ma(this.selectElement,"touchend",(function(i){ch(i),n?t.hideSelectDropDown(!0):t.showSelectDropDown()}))),this._register(ma(this.selectElement,ah.KEY_DOWN,(function(n){var i=new ws(n);var r=!1;Ft?i.keyCode!==18&&i.keyCode!==16&&i.keyCode!==10&&i.keyCode!==3||(r=!0):(i.keyCode===18&&i.altKey||i.keyCode===16&&i.altKey||i.keyCode===10||i.keyCode===3)&&(r=!0),r&&(t.showSelectDropDown(),ch(n,!0))})))};Object.defineProperty(n.prototype,"onDidSelect",{get:function(){return this._onDidSelect.event},enumerable:false,configurable:true});n.prototype.setOptions=function(t,n){var i=this;v(this.options,t)||(this.options=t,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((function(t,n){i.selectElement.add(i.createOption(t.text,n,t.isDisabled)),typeof t.description=="string"&&(i._hasDetails=!0)}))),n!==void 0&&(this.select(n),this._currentSelection=this.selected)};n.prototype.setOptionsList=function(){var t;(t=this.selectList)===null||t===void 0||t.splice(0,this.selectList.length,this.options)};n.prototype.select=function(t){t>=0&&t<this.options.length?this.selected=t:t>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)};n.prototype.focus=function(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())};n.prototype.blur=function(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())};n.prototype.setFocusable=function(t){this.selectElement.tabIndex=t?0:-1};n.prototype.render=function(t){this.container=t,t.classList.add("select-container"),t.appendChild(this.selectElement),this.styleSelectElement()};n.prototype.initStyleSheet=function(){var t=[];this.styles.listFocusBackground&&t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ".concat(this.styles.listFocusBackground," !important; }")),this.styles.listFocusForeground&&t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ".concat(this.styles.listFocusForeground," !important; }")),this.styles.decoratorRightForeground&&t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ".concat(this.styles.decoratorRightForeground,"; }")),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(t.push(".monaco-select-box-dropdown-container { border: 1px solid ".concat(this.styles.selectBorder," } ")),t.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ".concat(this.styles.selectBorder," } ")),t.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ".concat(this.styles.selectBorder," } "))):this.styles.selectListBorder&&(t.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ".concat(this.styles.selectListBorder," } ")),t.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ".concat(this.styles.selectListBorder," } "))),this.styles.listHoverForeground&&t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ".concat(this.styles.listHoverForeground," !important; }")),this.styles.listHoverBackground&&t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ".concat(this.styles.listHoverBackground," !important; }")),this.styles.listFocusOutline&&t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ".concat(this.styles.listFocusOutline," !important; outline-offset: -1.6px !important; }")),this.styles.listHoverOutline&&t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ".concat(this.styles.listHoverOutline," !important; outline-offset: -1.6px !important; }")),t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),t.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=t.join("\n")};n.prototype.styleSelectElement=function(){var t,n,i;var r=(t=this.styles.selectBackground)!==null&&t!==void 0?t:"",e=(n=this.styles.selectForeground)!==null&&n!==void 0?n:"",o=(i=this.styles.selectBorder)!==null&&i!==void 0?i:"";this.selectElement.style.backgroundColor=r,this.selectElement.style.color=e,this.selectElement.style.borderColor=o};n.prototype.styleList=function(){var t,n;var i=(t=this.styles.selectBackground)!==null&&t!==void 0?t:"",r=Dh(this.styles.selectListBackground,i);this.selectDropDownListContainer.style.backgroundColor=r,this.selectionDetailsPane.style.backgroundColor=r;var e=(n=this.styles.focusBorder)!==null&&n!==void 0?n:"";this.selectDropDownContainer.style.outlineColor=e,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)};n.prototype.createOption=function(t,n,i){var r=document.createElement("option");return r.value=t,r.text=t,r.disabled=!!i,r};n.prototype.showSelectDropDown=function(){var t=this;this.selectionDetailsPane.innerText="",this.contextViewProvider&&!this._isVisible&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:function(){return t.selectElement},render:function(n){return t.renderSelectDropDown(n,!0)},layout:function(){t.layoutSelectDropDown()},onHide:function(){t.selectDropDownContainer.classList.remove("visible"),t.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:function(){return t.selectElement},render:function(n){return t.renderSelectDropDown(n)},layout:function(){return t.layoutSelectDropDown()},onHide:function(){t.selectDropDownContainer.classList.remove("visible"),t.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))};n.prototype.hideSelectDropDown=function(t){this.contextViewProvider&&this._isVisible&&(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),t&&this.selectElement.focus(),this.contextViewProvider.hideContextView())};n.prototype.renderSelectDropDown=function(t,n){var i=this;return t.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(n),{dispose:function(){try{t.removeChild(i.selectDropDownContainer)}catch(t){}}}};n.prototype.measureMaxDetailsHeight=function(){var t=this;var n=0;return this.options.forEach((function(i,r){t.updateDetail(r),t.selectionDetailsPane.offsetHeight>n&&(n=t.selectionDetailsPane.offsetHeight)})),n};n.prototype.layoutSelectDropDown=function(t){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");var i=sa(this.selectElement),r=ja(this.selectElement),e=sa(this.selectElement).getComputedStyle(this.selectElement),o=parseFloat(e.getPropertyValue("--dropdown-padding-top"))+parseFloat(e.getPropertyValue("--dropdown-padding-bottom")),s=i.innerHeight-r.top-r.height-(this.selectBoxOptions.minBottomMargin||0),u=r.top-n.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,a=this.selectElement.offsetWidth,h=this.setWidthControlElement(this.widthControlElement),c=Math.max(h,Math.round(a)).toString()+"px";this.selectDropDownContainer.style.width=c,this.selectList.getHTMLElement().style.height="",this.selectList.layout();var f=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());var l=this._hasDetails?this._cachedMaxDetailsHeight:0,v=f+o+l,d=Math.floor((s-o-l)/this.getHeight()),g=Math.floor((u-o-l)/this.getHeight());if(t)return!(r.top+r.height>i.innerHeight-22||r.top<n.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||d<1&&g<1)&&(d<n.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&g>d&&this.options.length>d?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(r.top+r.height>i.innerHeight-22||r.top<n.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&d<1||this._dropDownPosition===1&&g<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&d+g<1)return this.hideSelectDropDown(!0),!1;v>s&&(f=d*this.getHeight())}else v>u&&(f=g*this.getHeight());return this.selectList.layout(f),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=f+o+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=f+o+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=c,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}return!1};n.prototype.setWidthControlElement=function(t){var n=0;if(t){var i=0,r=0;this.options.forEach((function(t,n){var e=t.detail?t.detail.length:0,o=t.decoratorRight?t.decoratorRight.length:0,s=t.text.length+e+o;s>r&&(i=n,r=s)})),t.textContent=this.options[i].text+(this.options[i].decoratorRight?this.options[i].decoratorRight+" ":""),n=Ta(t)}return n};n.prototype.createSelectList=function(t){var n=this;if(this.selectList)return;this.selectDropDownListContainer=vh(t,eW(".select-box-dropdown-list-container")),this.listRenderer=new sW,this.selectList=new rW("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:function(t){var n=t.text;return t.detail&&(n+=". ".concat(t.detail)),t.decoratorRight&&(n+=". ".concat(t.decoratorRight)),t.description&&(n+=". ".concat(t.description)),n},getWidgetAriaLabel:function(){return ht(0,"Select Box")},getRole:function(){return Ft?"":"option"},getWidgetRole:function(){return"listbox"}}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);var i=this._register(new Dk(this.selectDropDownListContainer,"keydown")),r=wi.chain(i.event,(function(t){return t.filter((function(){return n.selectList.length>0})).map((function(t){return new ws(t)}))}));this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode===3}))}))(this.onEnter,this)),this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode===2}))}))(this.onEnter,this)),this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode===9}))}))(this.onEscape,this)),this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode===16}))}))(this.onUpArrow,this)),this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode===18}))}))(this.onDownArrow,this)),this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode===12}))}))(this.onPageDown,this)),this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode===11}))}))(this.onPageUp,this)),this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode===14}))}))(this.onHome,this)),this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode===13}))}))(this.onEnd,this)),this._register(wi.chain(r,(function(t){return t.filter((function(t){return t.keyCode>=21&&t.keyCode<=56||t.keyCode>=85&&t.keyCode<=113}))}))(this.onCharacter,this)),this._register(ma(this.selectList.getHTMLElement(),ah.POINTER_UP,(function(t){return n.onPointerUp(t)}))),this._register(this.selectList.onMouseOver((function(t){return t.index!==void 0&&n.selectList.setFocus([t.index])}))),this._register(this.selectList.onDidChangeFocus((function(t){return n.onListFocus(t)}))),this._register(ma(this.selectDropDownContainer,ah.FOCUS_OUT,(function(t){n._isVisible&&!Pa(t.relatedTarget,n.selectDropDownContainer)&&n.onListBlur()}))),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()};n.prototype.onPointerUp=function(t){if(!this.selectList.length)return;ch(t);var n=t.target;if(!n||n.classList.contains("slider"))return;var i=n.closest(".monaco-list-row");if(!i)return;var r=Number(i.getAttribute("data-index")),e=i.classList.contains("option-disabled");r>=0&&r<this.options.length&&!e&&(this.selected=r,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))};n.prototype.onListBlur=function(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))};n.prototype.renderDescriptionMarkdown=function(t,n){var i=function(t){for(var n=0;n<t.childNodes.length;n++){var r=t.childNodes.item(n);(r.tagName&&r.tagName.toLowerCase())==="img"?t.removeChild(r):i(r)}},r=eI({value:t,supportThemeIcons:!0},{actionHandler:n});return r.element.classList.add("select-box-description-markdown"),i(r.element),r.element};n.prototype.onListFocus=function(t){this._isVisible&&this._hasDetails&&this.updateDetail(t.indexes[0])};n.prototype.updateDetail=function(t){var n,i;this.selectionDetailsPane.innerText="";var r=this.options[t],e=(n=r==null?void 0:r.description)!==null&&n!==void 0?n:"",o=(i=r==null?void 0:r.descriptionIsMarkdown)!==null&&i!==void 0&&i;if(e){if(o){var s=r.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(e,s))}else this.selectionDetailsPane.innerText=e;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1};n.prototype.onEscape=function(t){ch(t),this.select(this._currentSelection),this.hideSelectDropDown(!0)};n.prototype.onEnter=function(t){ch(t),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)};n.prototype.onDownArrow=function(t){if(this.selected<this.options.length-1){ch(t,!0);var n=this.options[this.selected+1].isDisabled;if(n&&this.options.length>this.selected+2)this.selected+=2;else{if(n)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}};n.prototype.onUpArrow=function(t){this.selected>0&&(ch(t,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))};n.prototype.onPageUp=function(t){var n=this;ch(t),this.selectList.focusPreviousPage(),setTimeout((function(){n.selected=n.selectList.getFocus()[0],n.options[n.selected].isDisabled&&n.selected<n.options.length-1&&(n.selected++,n.selectList.setFocus([n.selected])),n.selectList.reveal(n.selected),n.select(n.selected)}),1)};n.prototype.onPageDown=function(t){var n=this;ch(t),this.selectList.focusNextPage(),setTimeout((function(){n.selected=n.selectList.getFocus()[0],n.options[n.selected].isDisabled&&n.selected>0&&(n.selected--,n.selectList.setFocus([n.selected])),n.selectList.reveal(n.selected),n.select(n.selected)}),1)};n.prototype.onHome=function(t){ch(t),this.options.length<2||(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))};n.prototype.onEnd=function(t){ch(t),this.options.length<2||(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))};n.prototype.onCharacter=function(t){var n=zi.toString(t.keyCode);var i=-1;for(var r=0;r<this.options.length-1;r++)if(i=(r+this.selected+1)%this.options.length,this.options[i].text.charAt(0).toUpperCase()===n&&!this.options[i].isDisabled){this.select(i),this.selectList.setFocus([i]),this.selectList.reveal(this.selectList.getFocus()[0]),ch(t);break}};n.prototype.dispose=function(){this.hideSelectDropDown(!1),t.prototype.dispose.call(this)};return n}(ci);uW.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,uW.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,uW.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;var aW=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o.selected=0,o.selectBoxOptions=e||Object.create(null),o.options=[],o.selectElement=document.createElement("select"),o.selectElement.className="monaco-select-box",typeof o.selectBoxOptions.ariaLabel=="string"&&o.selectElement.setAttribute("aria-label",o.selectBoxOptions.ariaLabel),typeof o.selectBoxOptions.ariaDescription=="string"&&o.selectElement.setAttribute("aria-description",o.selectBoxOptions.ariaDescription),o._onDidSelect=o._register(new ki),o.styles=r,o.registerListeners(),o.setOptions(n,i);return o}n.prototype.registerListeners=function(){var t=this;this._register(nk.addTarget(this.selectElement)),[X_.Tap].forEach((function(n){t._register(ma(t.selectElement,n,(function(n){t.selectElement.focus()})))})),this._register(ya(this.selectElement,"click",(function(t){ch(t,!0)}))),this._register(ya(this.selectElement,"change",(function(n){t.selectElement.title=n.target.value,t._onDidSelect.fire({index:n.target.selectedIndex,selected:n.target.value})}))),this._register(ya(this.selectElement,"keydown",(function(t){var n=!1;Ft?t.keyCode!==18&&t.keyCode!==16&&t.keyCode!==10||(n=!0):(t.keyCode===18&&t.altKey||t.keyCode===10||t.keyCode===3)&&(n=!0),n&&t.stopPropagation()})))};Object.defineProperty(n.prototype,"onDidSelect",{get:function(){return this._onDidSelect.event},enumerable:false,configurable:true});n.prototype.setOptions=function(t,n){var i=this;this.options&&v(this.options,t)||(this.options=t,this.selectElement.options.length=0,this.options.forEach((function(t,n){i.selectElement.add(i.createOption(t.text,n,t.isDisabled))}))),n!==void 0&&this.select(n)};n.prototype.select=function(t){this.options.length===0?this.selected=0:t>=0&&t<this.options.length?this.selected=t:t>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""};n.prototype.focus=function(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())};n.prototype.blur=function(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())};n.prototype.setFocusable=function(t){this.selectElement.tabIndex=t?0:-1};n.prototype.render=function(t){t.classList.add("select-container"),t.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()};n.prototype.applyStyles=function(){var t,n,i;this.selectElement&&(this.selectElement.style.backgroundColor=(t=this.styles.selectBackground)!==null&&t!==void 0?t:"",this.selectElement.style.color=(n=this.styles.selectForeground)!==null&&n!==void 0?n:"",this.selectElement.style.borderColor=(i=this.styles.selectBorder)!==null&&i!==void 0?i:"")};n.prototype.createOption=function(t,n,i){var r=document.createElement("option");return r.value=t,r.text=t,r.disabled=!!i,r};return n}(ci);var hW=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,Ft&&!(o!=null&&o.useCustomDrawn)?s.selectBoxDelegate=new aW(n,i,e,o):s.selectBoxDelegate=new uW(n,i,r,e,o),s._register(s.selectBoxDelegate);return s}Object.defineProperty(n.prototype,"onDidSelect",{get:function(){return this.selectBoxDelegate.onDidSelect},enumerable:false,configurable:true});n.prototype.setOptions=function(t,n){this.selectBoxDelegate.setOptions(t,n)};n.prototype.select=function(t){this.selectBoxDelegate.select(t)};n.prototype.focus=function(){this.selectBoxDelegate.focus()};n.prototype.blur=function(){this.selectBoxDelegate.blur()};n.prototype.setFocusable=function(t){this.selectBoxDelegate.setFocusable(t)};n.prototype.render=function(t){this.selectBoxDelegate.render(t)};return n}(ik);var cW=function(t){__extends(n,t);function n(n,i,r){if(r===void 0){r={}}var e=this;e=t.call(this)||this,e.options=r,e._context=n||e,e._action=i,i instanceof tc&&e._register(i.onDidChange((function(t){e.element&&e.handleActionChangeEvent(t)})));return e}Object.defineProperty(n.prototype,"action",{get:function(){return this._action},enumerable:false,configurable:true});n.prototype.handleActionChangeEvent=function(t){t.enabled!==void 0&&this.updateEnabled(),t.checked!==void 0&&this.updateChecked(),t.class!==void 0&&this.updateClass(),t.label!==void 0&&(this.updateLabel(),this.updateTooltip()),t.tooltip!==void 0&&this.updateTooltip()};Object.defineProperty(n.prototype,"actionRunner",{get:function(){return this._actionRunner||(this._actionRunner=this._register(new nc)),this._actionRunner},set:function(t){this._actionRunner=t},enumerable:false,configurable:true});n.prototype.isEnabled=function(){return this._action.enabled};n.prototype.setActionContext=function(t){this._context=t};n.prototype.render=function(t){var n=this;var i=this.element=t;this._register(nk.addTarget(t));var r=this.options&&this.options.draggable;r&&(t.draggable=!0,is&&this._register(ma(t,ah.DRAG_START,(function(t){var i;return(i=t.dataTransfer)===null||i===void 0?void 0:i.setData(mN.TEXT,n._action.label)})))),this._register(ma(i,X_.Tap,(function(t){return n.onClick(t,!0)}))),this._register(ma(i,ah.MOUSE_DOWN,(function(t){r||ch(t,!0),n._action.enabled&&t.button===0&&i.classList.add("active")}))),Ft&&this._register(ma(i,ah.CONTEXT_MENU,(function(t){t.button===0&&t.ctrlKey===!0&&n.onClick(t)}))),this._register(ma(i,ah.CLICK,(function(t){ch(t,!0),n.options&&n.options.isMenu||n.onClick(t)}))),this._register(ma(i,ah.DBLCLICK,(function(t){ch(t,!0)}))),[ah.MOUSE_UP,ah.MOUSE_OUT].forEach((function(t){n._register(ma(i,t,(function(t){ch(t),i.classList.remove("active")})))}))};n.prototype.onClick=function(t,n){if(n===void 0){n=!1}var i;ch(t,!0);var r=J(this._context)?!((i=this.options)===null||i===void 0)&&i.useEventAsContext?t:{preserveFocus:n}:this._context;this.actionRunner.run(this._action,r)};n.prototype.focus=function(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))};n.prototype.blur=function(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))};n.prototype.setFocusable=function(t){this.element&&(this.element.tabIndex=t?0:-1)};Object.defineProperty(n.prototype,"trapsArrowNavigation",{get:function(){return!1},enumerable:false,configurable:true});n.prototype.updateEnabled=function(){};n.prototype.updateLabel=function(){};n.prototype.getClass=function(){return this.action.class};n.prototype.getTooltip=function(){return this.action.tooltip};n.prototype.updateTooltip=function(){var t,n,i;if(!this.element)return;var r=(t=this.getTooltip())!==null&&t!==void 0?t:"";if(this.updateAriaLabel(),(n=this.options.hoverDelegate)===null||n===void 0?void 0:n.showNativeHover)this.element.title=r;else if(this.customHover||r==="")this.customHover&&this.customHover.update(r);else{var e=(i=this.options.hoverDelegate)!==null&&i!==void 0?i:kN("element");this.customHover=this._store.add(DN(e,this.element,r))}};n.prototype.updateAriaLabel=function(){var t;if(this.element){var n=(t=this.getTooltip())!==null&&t!==void 0?t:"";this.element.setAttribute("aria-label",n)}};n.prototype.updateClass=function(){};n.prototype.updateChecked=function(){};n.prototype.dispose=function(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,t.prototype.dispose.call(this)};return n}(ci);var fW=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,i,r)||this,e.options=r,e.options.icon=r.icon!==void 0&&r.icon,e.options.label=r.label===void 0||r.label,e.cssClass="";return e}n.prototype.render=function(n){t.prototype.render.call(this,n),Z(this.element);var i=document.createElement("a");if(i.classList.add("action-label"),i.setAttribute("role",this.getDefaultAriaRole()),this.label=i,this.element.appendChild(i),this.options.label&&this.options.keybinding){var r=document.createElement("span");r.classList.add("keybinding"),r.textContent=this.options.keybinding,this.element.appendChild(r)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()};n.prototype.getDefaultAriaRole=function(){return this._action.id===ic.ID?"presentation":this.options.isMenu?"menuitem":"button"};n.prototype.focus=function(){this.label&&(this.label.tabIndex=0,this.label.focus())};n.prototype.blur=function(){this.label&&(this.label.tabIndex=-1)};n.prototype.setFocusable=function(t){this.label&&(this.label.tabIndex=t?0:-1)};n.prototype.updateLabel=function(){this.options.label&&this.label&&(this.label.textContent=this.action.label)};n.prototype.getTooltip=function(){var t=null;return this.action.tooltip?t=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(t=this.action.label,this.options.keybinding&&(t=ht(0,"{0} ({1})",t,this.options.keybinding))),t!==null&&t!==void 0?t:void 0};n.prototype.updateClass=function(){var t,n;var i;this.cssClass&&this.label&&(t=this.label.classList).remove.apply(t,this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&(n=this.label.classList).add.apply(n,this.cssClass.split(" "))),this.updateEnabled()):(i=this.label)===null||i===void 0||i.classList.remove("codicon")};n.prototype.updateEnabled=function(){var t,n;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(t=this.element)===null||t===void 0||t.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(n=this.element)===null||n===void 0||n.classList.add("disabled"))};n.prototype.updateAriaLabel=function(){var t;if(this.label){var n=(t=this.getTooltip())!==null&&t!==void 0?t:"";this.label.setAttribute("aria-label",n)}};n.prototype.updateChecked=function(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.removeAttribute("aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))};return n}(cW);var lW=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this,n,i)||this,a.selectBox=new hW(r,e,o,s,u),a.selectBox.setFocusable(!1),a._register(a.selectBox),a.registerListeners();return a}n.prototype.select=function(t){this.selectBox.select(t)};n.prototype.registerListeners=function(){var t=this;this._register(this.selectBox.onDidSelect((function(n){return t.runAction(n.selected,n.index)})))};n.prototype.runAction=function(t,n){this.actionRunner.run(this._action,this.getActionContext(t,n))};n.prototype.getActionContext=function(t,n){return t};n.prototype.setFocusable=function(t){this.selectBox.setFocusable(t)};n.prototype.focus=function(){var t;(t=this.selectBox)===null||t===void 0||t.focus()};n.prototype.blur=function(){var t;(t=this.selectBox)===null||t===void 0||t.blur()};n.prototype.render=function(t){this.selectBox.render(t)};return n}(cW);var vW=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._onDidChangeVisibility=r._register(new ki),r.onDidChangeVisibility=r._onDidChangeVisibility.event,r._element=vh(n,bh(".monaco-dropdown")),r._label=vh(r._element,bh(".dropdown-label"));var e=i.labelRenderer;e||(e=function(t){return t.textContent=i.label||"",null});for(var o=0,s=[ah.CLICK,ah.MOUSE_DOWN,X_.Tap];o<s.length;o++){var u=s[o];r._register(ma(r.element,u,(function(t){return ch(t,!0)})))}for(var a=0,h=[ah.MOUSE_DOWN,X_.Tap];a<h.length;a++){var u=h[a];r._register(ma(r._label,u,(function(t){sh(t)&&(t.detail>1||t.button!==0)||(r.visible?r.hide():r.show())})))}r._register(ma(r._label,ah.KEY_UP,(function(t){var n=new ws(t);(n.equals(3)||n.equals(10))&&(ch(t,!0),r.visible?r.hide():r.show())})));var c=e(r._label);c&&r._register(c),r._register(nk.addTarget(r._label));return r}Object.defineProperty(n.prototype,"element",{get:function(){return this._element},enumerable:false,configurable:true});n.prototype.show=function(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))};n.prototype.hide=function(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))};n.prototype.dispose=function(){t.prototype.dispose.call(this),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)};return n}(nc);var dW=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n,i)||this,r._options=i,r._actions=[],r.actions=i.actions||[];return r}Object.defineProperty(n.prototype,"menuOptions",{get:function(){return this._menuOptions},set:function(t){this._menuOptions=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"actions",{get:function(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions},set:function(t){this._actions=t},enumerable:false,configurable:true});n.prototype.show=function(){var n=this;t.prototype.show.call(this),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:function(){return n.element},getActions:function(){return n.actions},getActionsContext:function(){return n.menuOptions?n.menuOptions.context:null},getActionViewItem:function(t,i){return n.menuOptions&&n.menuOptions.actionViewItemProvider?n.menuOptions.actionViewItemProvider(t,i):void 0},getKeyBinding:function(t){return n.menuOptions&&n.menuOptions.getKeyBinding?n.menuOptions.getKeyBinding(t):void 0},getMenuClassName:function(){return n._options.menuClassName||""},onHide:function(){return n.onHide()},actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})};n.prototype.hide=function(){t.prototype.hide.call(this)};n.prototype.onHide=function(){this.hide(),this.element.classList.remove("active")};return n}(vW);var gW=function(t){__extends(n,t);function n(n,i,r,e){if(e===void 0){e=Object.create(null)}var o=this;o=t.call(this,null,n,e)||this,o.actionItem=null,o._onDidChangeVisibility=o._register(new ki),o.onDidChangeVisibility=o._onDidChangeVisibility.event,o.menuActionsOrProvider=i,o.contextMenuProvider=r,o.options=e,o.options.actionRunner&&(o.actionRunner=o.options.actionRunner);return o}n.prototype.render=function(t){var n=this;this.actionItem=t;var i=Array.isArray(this.menuActionsOrProvider),r={contextMenuProvider:this.contextMenuProvider,labelRenderer:function(t){var i;var r;n.element=vh(t,bh("a.action-label"));var e=[];return typeof n.options.classNames=="string"?e=n.options.classNames.split(/\s+/g).filter((function(t){return!!t})):n.options.classNames&&(e=n.options.classNames),e.find((function(t){return t==="icon"}))||e.push("codicon"),(i=n.element.classList).add.apply(i,e),n.element.setAttribute("role","button"),n.element.setAttribute("aria-haspopup","true"),n.element.setAttribute("aria-expanded","false"),n._action.label&&n._register(DN((r=n.options.hoverDelegate)!==null&&r!==void 0?r:kN("mouse"),n.element,n._action.label)),n.element.ariaLabel=n._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:i?this.menuActionsOrProvider:void 0,actionProvider:i?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new dW(t,r)),this._register(this.dropdownMenu.onDidChangeVisibility((function(t){var i;(i=n.element)===null||i===void 0||i.setAttribute("aria-expanded","".concat(t)),n._onDidChangeVisibility.fire(t)}))),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){var e=this;this.dropdownMenu.menuOptions=__assign(__assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return e.options.anchorAlignmentProvider()}})}this.updateTooltip(),this.updateEnabled()};n.prototype.getTooltip=function(){var t=null;return this.action.tooltip?t=this.action.tooltip:this.action.label&&(t=this.action.label),t!==null&&t!==void 0?t:void 0};n.prototype.setActionContext=function(n){t.prototype.setActionContext.call(this,n),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=n:this.dropdownMenu.menuOptions={context:n})};n.prototype.show=function(){var t;(t=this.dropdownMenu)===null||t===void 0||t.show()};n.prototype.updateEnabled=function(){var t,n;var i=!this.action.enabled;(t=this.actionItem)===null||t===void 0||t.classList.toggle("disabled",i),(n=this.element)===null||n===void 0||n.classList.toggle("disabled",i)};return n}(cW);var pW,wW;(function(t){t[t.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",t[t.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(pW||(pW={})),function(t){t[t.None=0]="None",t[t.Initialized=1]="Initialized",t[t.Closed=2]="Closed"}(wW||(wW={}));var mW=function(t){__extends(n,t);function n(i,r){if(r===void 0){r=Object.create(null)}var e=this;e=t.call(this)||this,e.database=i,e.options=r,e._onDidChangeStorage=e._register(new Ci),e.onDidChangeStorage=e._onDidChangeStorage.event,e.state=wW.None,e.cache=new Map,e.flushDelayer=e._register(new Es(n.DEFAULT_FLUSH_DELAY)),e.pendingDeletes=new Set,e.pendingInserts=new Map,e.whenFlushedCallbacks=[],e.registerListeners();return e}n.prototype.registerListeners=function(){var t=this;this._register(this.database.onDidChangeItemsExternal((function(n){return t.onDidChangeItemsExternal(n)})))};n.prototype.onDidChangeItemsExternal=function(t){var n=this;var i,r;this._onDidChangeStorage.pause();try{(i=t.changed)===null||i===void 0||i.forEach((function(t,i){return n.acceptExternal(i,t)})),(r=t.deleted)===null||r===void 0||r.forEach((function(t){return n.acceptExternal(t,void 0)}))}finally{this._onDidChangeStorage.resume()}};n.prototype.acceptExternal=function(t,n){if(this.state===wW.Closed)return;var i=!1;J(n)?i=this.cache.delete(t):this.cache.get(t)!==n&&(this.cache.set(t,n),i=!0),i&&this._onDidChangeStorage.fire({key:t,external:!0})};n.prototype.get=function(t,n){var i=this.cache.get(t);return J(i)?n:i};n.prototype.getBoolean=function(t,n){var i=this.get(t);return J(i)?n:i==="true"};n.prototype.getNumber=function(t,n){var i=this.get(t);return J(i)?n:parseInt(i,10)};n.prototype.set=function(t,n){return __awaiter(this,arguments,void 0,(function(t,n,i){var r,e;if(i===void 0){i=!1}return __generator(this,(function(o){if(this.state===wW.Closed)return[2];if(J(n))return[2,this.delete(t,i)];r=z(n)||Array.isArray(n)?(e=n,JSON.stringify(e,nI)):String(n);return[2,this.cache.get(t)!==r?(this.cache.set(t,r),this.pendingInserts.set(t,r),this.pendingDeletes.delete(t),this._onDidChangeStorage.fire({key:t,external:i}),this.doFlush()):void 0]}))}))};n.prototype.delete=function(t){return __awaiter(this,arguments,void 0,(function(t,n){if(n===void 0){n=!1}return __generator(this,(function(i){if(this.state!==wW.Closed)return[2,this.cache.delete(t)?(this.pendingDeletes.has(t)||this.pendingDeletes.add(t),this.pendingInserts.delete(t),this._onDidChangeStorage.fire({key:t,external:n}),this.doFlush()):void 0];return[2]}))}))};Object.defineProperty(n.prototype,"hasPending",{get:function(){return this.pendingInserts.size>0||this.pendingDeletes.size>0},enumerable:false,configurable:true});n.prototype.flushPending=function(){return __awaiter(this,void 0,void 0,(function(){var t;var n=this;return __generator(this,(function(i){if(!this.hasPending)return[2];t={insert:this.pendingInserts,delete:this.pendingDeletes};return[2,(this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(t).finally((function(){var t;if(!n.hasPending)for(;n.whenFlushedCallbacks.length;)(t=n.whenFlushedCallbacks.pop())===null||t===void 0||t()})))]}))}))};n.prototype.doFlush=function(t){return __awaiter(this,void 0,void 0,(function(){var n=this;return __generator(this,(function(i){return[2,this.options.hint===pW.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger((function(){return n.flushPending()}),t)]}))}))};return n}(ci);mW.DEFAULT_FLUSH_DELAY=100;var bW=function(){function t(){this.onDidChangeItemsExternal=wi.None,this.items=new Map}t.prototype.updateItems=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;var r=this;return __generator(this,(function(e){(n=t.insert)===null||n===void 0||n.forEach((function(t,n){return r.items.set(n,t)})),(i=t.delete)===null||i===void 0||i.forEach((function(t){return r.items.delete(t)}));return[2]}))}))};return t}();var yW="__$__targetStorageMarker",_W=Zh("storageService");var kW;(function(t){t[t.NONE=0]="NONE",t[t.SHUTDOWN=1]="SHUTDOWN"})(kW||(kW={}));var xW=function(t){__extends(n,t);function n(i){if(i===void 0){i={flushInterval:n.DEFAULT_FLUSH_INTERVAL}}var r=this;r=t.call(this)||this,r.options=i,r._onDidChangeValue=r._register(new Ci),r._onDidChangeTarget=r._register(new Ci),r._onWillSaveState=r._register(new ki),r.onWillSaveState=r._onWillSaveState.event,r._workspaceKeyTargets=void 0,r._profileKeyTargets=void 0,r._applicationKeyTargets=void 0;return r}n.prototype.onDidChangeValue=function(t,n,i){return wi.filter(this._onDidChangeValue.event,(function(i){return i.scope===t&&(n===void 0||i.key===n)}),i)};n.prototype.emitDidChangeValue=function(t,n){var i=n.key,r=n.external;if(i===yW){switch(t){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:t})}else this._onDidChangeValue.fire({scope:t,key:i,target:this.getKeyTargets(t)[i],external:r})};n.prototype.get=function(t,n,i){var r;return(r=this.getStorage(n))===null||r===void 0?void 0:r.get(t,i)};n.prototype.getBoolean=function(t,n,i){var r;return(r=this.getStorage(n))===null||r===void 0?void 0:r.getBoolean(t,i)};n.prototype.getNumber=function(t,n,i){var r;return(r=this.getStorage(n))===null||r===void 0?void 0:r.getNumber(t,i)};n.prototype.store=function(t,n,i,r,e){var o=this;if(e===void 0){e=!1}J(n)?this.remove(t,i,e):this.withPausedEmitters((function(){var s;o.updateKeyTarget(t,i,r),(s=o.getStorage(i))===null||s===void 0||s.set(t,n,e)}))};n.prototype.remove=function(t,n,i){var r=this;if(i===void 0){i=!1}this.withPausedEmitters((function(){var e;r.updateKeyTarget(t,n,void 0),(e=r.getStorage(n))===null||e===void 0||e.delete(t,i)}))};n.prototype.withPausedEmitters=function(t){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{t()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}};n.prototype.updateKeyTarget=function(t,n,i,r){if(r===void 0){r=!1}var e,o;var s=this.getKeyTargets(n);typeof i=="number"?s[t]!==i&&(s[t]=i,(e=this.getStorage(n))===null||e===void 0||e.set(yW,JSON.stringify(s),r)):typeof s[t]=="number"&&(delete s[t],(o=this.getStorage(n))===null||o===void 0||o.set(yW,JSON.stringify(s),r))};Object.defineProperty(n.prototype,"workspaceKeyTargets",{get:function(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"profileKeyTargets",{get:function(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"applicationKeyTargets",{get:function(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets},enumerable:false,configurable:true});n.prototype.getKeyTargets=function(t){switch(t){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}};n.prototype.loadKeyTargets=function(t){var n=this.getStorage(t);return n?function(t){var n=t.get(yW);if(n)try{return JSON.parse(n)}catch(t){}return Object.create(null)}(n):Object.create(null)};return n}(ci);xW.DEFAULT_FLUSH_INTERVAL=6e4;var CW={keybindingLabelBackground:qw(ey),keybindingLabelForeground:qw(oy),keybindingLabelBorder:qw(sy),keybindingLabelBottomBorder:qw(uy),keybindingLabelShadow:qw(tb)},SW={buttonForeground:qw(Gb),buttonSeparator:qw($b),buttonBackground:qw(Jb),buttonHoverBackground:qw(Zb),buttonSecondaryForeground:qw(Yb),buttonSecondaryBackground:qw(Xb),buttonSecondaryHoverBackground:qw(ty),buttonBorder:qw(Qb)},DW={progressBarBackground:qw(wm)},AW={inputActiveOptionBorder:qw(Fb),inputActiveOptionForeground:qw(jb),inputActiveOptionBackground:qw(Lb)};qw(ny),qw(ry),qw(iy),qw(ym),qw(_m),qw(tb),qw(am),qw(wb),qw(mb),qw(bb),qw(cm);var OW={inputBackground:qw(Ob),inputForeground:qw(Eb),inputBorder:qw(Mb),inputValidationInfoBorder:qw(Ib),inputValidationInfoBackground:qw(Rb),inputValidationInfoForeground:qw(Tb),inputValidationWarningBorder:qw(Pb),inputValidationWarningBackground:qw(Bb),inputValidationWarningForeground:qw(Nb),inputValidationErrorBorder:qw(zb),inputValidationErrorBackground:qw(Wb),inputValidationErrorForeground:qw(Hb)},EW={listFilterWidgetBackground:qw(Ey),listFilterWidgetOutline:qw(My),listFilterWidgetNoMatchesOutline:qw(Fy),listFilterWidgetShadow:qw(Ly),inputBoxStyles:OW,toggleStyles:AW},MW={badgeBackground:qw(fm),badgeForeground:qw(lm),badgeBorder:qw(am)};qw(eb),qw(rb),qw(ob),qw(ob),qw(sb);var FW={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:qw(ay),listFocusForeground:qw(hy),listFocusOutline:qw(cy),listActiveSelectionBackground:qw(ly),listActiveSelectionForeground:qw(vy),listActiveSelectionIconForeground:qw(dy),listFocusAndSelectionOutline:qw(fy),listFocusAndSelectionBackground:qw(ly),listFocusAndSelectionForeground:qw(vy),listInactiveSelectionBackground:qw(gy),listInactiveSelectionIconForeground:qw(wy),listInactiveSelectionForeground:qw(py),listInactiveFocusBackground:qw(my),listInactiveFocusOutline:qw(by),listHoverBackground:qw(yy),listHoverForeground:qw(_y),listDropOverBackground:qw(ky),listDropBetweenBackground:qw(xy),listSelectionOutline:qw(hm),listHoverOutline:qw(hm),treeIndentGuidesStroke:qw(jy),treeInactiveIndentGuidesStroke:qw(Ry),tableColumnsBorder:qw(Ty),tableOddRowsBackgroundColor:qw(Iy)};function LW(t){return function(t,n){var i=__assign({},n);for(var r in t){var e=t[r];i[r]=e!==void 0?qw(e):void 0}return i}(t,FW)}var jW={selectBackground:qw(Ub),selectListBackground:qw(Kb),selectForeground:qw(Vb),decoratorRightForeground:qw(Gy),selectBorder:qw(qb),focusBorder:qw(um),listFocusBackground:qw(Yy),listInactiveSelectionIconForeground:qw(Qy),listFocusForeground:qw(Zy),listFocusOutline:(RW=hm,TW=Ig.transparent.toString(),"var(".concat(Vw(RW),", ").concat(TW,")")),listHoverBackground:qw(yy),listHoverForeground:qw(_y),listHoverOutline:qw(hm),selectListBorder:qw(km),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0};var RW,TW;var IW={shadowColor:qw(tb),borderColor:qw(By),foregroundColor:qw(Ny),backgroundColor:qw(Py),selectionForegroundColor:qw(Wy),selectionBackgroundColor:qw(Hy),selectionBorderColor:qw(zy),separatorColor:qw(Uy),scrollbarShadow:qw(vm),scrollbarSliderBackground:qw(dm),scrollbarSliderHoverBackground:qw(gm),scrollbarSliderActiveBackground:qw(pm)};var BW=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},NW=function(t,n){return function(i,r){n(i,r,t)}};function PW(t,n,i,r,e,o){WW(t.getActions(n),i,!1,typeof r=="string"?function(t){return t===r}:r,e,o)}function WW(t,n,i,r,e,o){if(r===void 0){r=function(t){return t==="navigation"}}if(e===void 0){e=function(){return!1}}if(o===void 0){o=!1}var s,u;Array.isArray(n)?(s=n,u=n):(s=n.primary,u=n.secondary);var a=new Set;for(var h=0,c=t;h<c.length;h++){var f=c[h],l=f[0],v=f[1];var d=void 0;r(l)?(d=s,d.length>0&&o&&d.push(new ic)):(d=u,d.length>0&&d.push(new ic));for(var g=0,p=v;g<p.length;g++){var w=p[g];i&&(w=w instanceof mf&&w.alt?w.alt:w);var m=d.push(w);w instanceof rc&&a.add({group:l,action:w,index:m-1})}}for(var b=0,y=a;b<y.length;b++){var _=y[b],l=_.group,v=_.action,d=_.index;var w=r(l)?s:u,m=v.actions;e(v,l,w.length)&&w.splice.apply(w,__spreadArray([d,1],m,false))}}var HW=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a){var h=this;h=t.call(this,void 0,n,{icon:!(!n.class&&!n.item.icon),label:!n.class&&!n.item.icon,draggable:i==null?void 0:i.draggable,keybinding:i==null?void 0:i.keybinding,hoverDelegate:i==null?void 0:i.hoverDelegate})||this,h._keybindingService=r,h._notificationService=e,h._contextKeyService=o,h._themeService=s,h._contextMenuService=u,h._accessibilityService=a,h._wantsAltCommand=!1,h._itemClassDispose=h._register(new fi),h._altKey=Oh.getInstance();return h}Object.defineProperty(n.prototype,"_menuItemAction",{get:function(){return this._action},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"_commandAction",{get:function(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction},enumerable:false,configurable:true});n.prototype.onClick=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:t.preventDefault(),t.stopPropagation();i.label=1;case 1:i.trys.push([1,3,,4]);return[4,this.actionRunner.run(this._commandAction,this._context)];case 2:i.sent();return[3,4];case 3:n=i.sent();this._notificationService.error(n);return[3,4];case 4:return[2]}}))}))};n.prototype.render=function(n){var i=this;if(t.prototype.render.call(this,n),n.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){var r=!1;var e=function(){var t;var n=!!(!((t=i._menuItemAction.alt)===null||t===void 0)&&t.enabled)&&(!i._accessibilityService.isMotionReduced()||r)&&(i._altKey.keyStatus.altKey||i._altKey.keyStatus.shiftKey&&r);n!==i._wantsAltCommand&&(i._wantsAltCommand=n,i.updateLabel(),i.updateTooltip(),i.updateClass())};this._register(this._altKey.event(e)),this._register(ma(n,"mouseleave",(function(t){r=!1,e()}))),this._register(ma(n,"mouseenter",(function(t){r=!0,e()}))),e()}};n.prototype.updateLabel=function(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)};n.prototype.getTooltip=function(){var t;var n=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),i=n&&n.getLabel(),r=this._commandAction.tooltip||this._commandAction.label;var e=i?ht(0,"{0} ({1})",r,i):r;if(!this._wantsAltCommand&&(!((t=this._menuItemAction.alt)===null||t===void 0)&&t.enabled)){var o=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,s=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),u=s&&s.getLabel(),a=u?ht(0,"{0} ({1})",o,u):o;e=ht(0,"{0}\n[{1}] {2}",e,AB.modifierLabels[zt].altKey,a)}return e};n.prototype.updateClass=function(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))};n.prototype._updateItemClass=function(t){var n;var i=this;this._itemClassDispose.value=void 0;var r=this,e=r.element,o=r.label;if(!e||!o)return;var s=this._commandAction.checked&&(u=t.toggled)&&u.condition!==void 0&&t.toggled.icon?t.toggled.icon:t.icon;var u;if(s)if(uc.isThemeIcon(s)){var a=uc.asClassNameArray(s);(n=o.classList).add.apply(n,a),this._itemClassDispose.value=ai((function(){var t;(t=o.classList).remove.apply(t,a)}))}else o.style.backgroundImage=S_(this._themeService.getColorTheme().type)?Ch(s.dark):Ch(s.light),o.classList.add("icon"),this._itemClassDispose.value=ui(ai((function(){o.style.backgroundImage="",o.classList.remove("icon")})),this._themeService.onDidColorThemeChange((function(){i.updateClass()})))};return n}(fW);HW=BW([NW(2,Yx),NW(3,EL),NW(4,Gc),NW(5,zk),NW(6,_R),NW(7,jw)],HW);var zW=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;var u,a,h;var c=__assign(__assign({},i),{menuAsChild:(u=i==null?void 0:i.menuAsChild)!==null&&u!==void 0&&u,classNames:(a=i==null?void 0:i.classNames)!==null&&a!==void 0?a:uc.isThemeIcon(n.item.icon)?uc.asClassName(n.item.icon):void 0,keybindingProvider:(h=i==null?void 0:i.keybindingProvider)!==null&&h!==void 0?h:function(t){return r.lookupKeybinding(t.id)}});s=t.call(this,n,{getActions:function(){return n.actions}},e,c)||this,s._keybindingService=r,s._contextMenuService=e,s._themeService=o;return s}n.prototype.render=function(n){var i=this;t.prototype.render.call(this,n),Z(this.element),n.classList.add("menu-entry");var r=this._action,e=r.item.icon;if(e&&!uc.isThemeIcon(e)){this.element.classList.add("icon");var o=function(){i.element&&(i.element.style.backgroundImage=S_(i._themeService.getColorTheme().type)?Ch(e.dark):Ch(e.light))};o(),this._register(this._themeService.onDidColorThemeChange((function(){o()})))}};return n}(gW);zW=BW([NW(2,Yx),NW(3,_R),NW(4,zk)],zW);var UW=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a){var h=this;var c,f,l;var v;h=t.call(this,null,n)||this,h._keybindingService=r,h._notificationService=e,h._contextMenuService=o,h._menuService=s,h._instaService=u,h._storageService=a,h._container=null,h._options=i,h._storageKey="".concat(n.item.submenu.id,"_lastActionId");var d=i!=null&&i.persistLastActionId?a.get(h._storageKey,1):void 0;d&&(v=n.actions.find((function(t){return d===t.id}))),v||(v=n.actions[0]),h._defaultAction=h._instaService.createInstance(HW,v,{keybinding:h._getDefaultActionKeybindingLabel(v)});var g=__assign(__assign({keybindingProvider:function(t){return h._keybindingService.lookupKeybinding(t.id)}},i),{menuAsChild:(c=i==null?void 0:i.menuAsChild)===null||c===void 0||c,classNames:(f=i==null?void 0:i.classNames)!==null&&f!==void 0?f:["codicon","codicon-chevron-down"],actionRunner:(l=i==null?void 0:i.actionRunner)!==null&&l!==void 0?l:new nc});h._dropdown=new gW(n,n.actions,h._contextMenuService,g),h._register(h._dropdown.actionRunner.onDidRun((function(t){t.action instanceof mf&&h.update(t.action)})));return h}n.prototype.update=function(t){var n;!((n=this._options)===null||n===void 0)&&n.persistLastActionId&&this._storageService.store(this._storageKey,t.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(HW,t,{keybinding:this._getDefaultActionKeybindingLabel(t)}),this._defaultAction.actionRunner=new(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.runAction=function(t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,t.run(void 0)];case 1:n.sent();return[2]}}))}))};return n}(nc)),this._container&&this._defaultAction.render(dh(this._container,bh(".action-container")))};n.prototype._getDefaultActionKeybindingLabel=function(t){var n;var i;if(!((n=this._options)===null||n===void 0)&&n.renderKeybindingWithDefaultActionLabel){var r=this._keybindingService.lookupKeybinding(t.id);r&&(i="(".concat(r.getLabel(),")"))}return i};n.prototype.setActionContext=function(n){t.prototype.setActionContext.call(this,n),this._defaultAction.setActionContext(n),this._dropdown.setActionContext(n)};n.prototype.render=function(n){var i=this;this._container=n,t.prototype.render.call(this,this._container),this._container.classList.add("monaco-dropdown-with-default");var r=bh(".action-container");this._defaultAction.render(vh(this._container,r)),this._register(ma(r,ah.KEY_DOWN,(function(t){var n=new ws(t);n.equals(17)&&(i._defaultAction.element.tabIndex=-1,i._dropdown.focus(),n.stopPropagation())})));var e=bh(".dropdown-action-container");this._dropdown.render(vh(this._container,e)),this._register(ma(e,ah.KEY_DOWN,(function(t){var n;var r=new ws(t);r.equals(15)&&(i._defaultAction.element.tabIndex=0,i._dropdown.setFocusable(!1),(n=i._defaultAction.element)===null||n===void 0||n.focus(),r.stopPropagation())})))};n.prototype.focus=function(t){t?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())};n.prototype.blur=function(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()};n.prototype.setFocusable=function(t){t?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))};n.prototype.dispose=function(){this._defaultAction.dispose(),this._dropdown.dispose(),t.prototype.dispose.call(this)};return n}(cW);UW=BW([NW(2,Yx),NW(3,EL),NW(4,_R),NW(5,df),NW(6,Jh),NW(7,_W)],UW);var KW=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,null,n,n.actions.map((function(t){return{text:t.id===ic.ID?"─────────":t.label,isDisabled:!t.enabled}})),0,i,jW,{ariaLabel:n.tooltip,optionsAsChildren:!0})||this,r.select(Math.max(0,n.actions.findIndex((function(t){return t.checked}))));return r}n.prototype.render=function(n){t.prototype.render.call(this,n),n.style.borderColor=qw(qb)};n.prototype.runAction=function(t,n){var i=this.action.actions[n];i&&this.actionRunner.run(i)};return n}(lW);function VW(t,n,i){return n instanceof mf?t.createInstance(HW,n,i):n instanceof wf?n.item.isSelection?t.createInstance(KW,n):n.item.rememberDefaultAction?t.createInstance(UW,n,__assign(__assign({},i),{persistLastActionId:!0})):t.createInstance(zW,n,i):void 0}KW=BW([NW(1,yR)],KW);var qW=function(t){__extends(n,t);function n(n,i){if(i===void 0){i={}}var r=this;var e,o,s,u,a,h,c;var f,l;switch(r=t.call(this)||this,r._actionRunnerDisposables=r._register(new hi),r.viewItemDisposables=r._register(new di),r.triggerKeyDown=!1,r.focusable=!0,r._onDidBlur=r._register(new ki),r.onDidBlur=r._onDidBlur.event,r._onDidCancel=r._register(new ki({onWillAddFirstListener:function(){return r.cancelHasListener=!0}})),r.onDidCancel=r._onDidCancel.event,r.cancelHasListener=!1,r._onDidRun=r._register(new ki),r.onDidRun=r._onDidRun.event,r._onWillRun=r._register(new ki),r.onWillRun=r._onWillRun.event,r.options=i,r._context=(e=i.context)!==null&&e!==void 0?e:null,r._orientation=(o=r.options.orientation)!==null&&o!==void 0?o:0,r._triggerKeys={keyDown:(u=(s=r.options.triggerKeys)===null||s===void 0?void 0:s.keyDown)!==null&&u!==void 0&&u,keys:(h=(a=r.options.triggerKeys)===null||a===void 0?void 0:a.keys)!==null&&h!==void 0?h:[3,10]},r._hoverDelegate=(c=i.hoverDelegate)!==null&&c!==void 0?c:r._register(xN()),r.options.actionRunner?r._actionRunner=r.options.actionRunner:(r._actionRunner=new nc,r._actionRunnerDisposables.add(r._actionRunner)),r._actionRunnerDisposables.add(r._actionRunner.onDidRun((function(t){return r._onDidRun.fire(t)}))),r._actionRunnerDisposables.add(r._actionRunner.onWillRun((function(t){return r._onWillRun.fire(t)}))),r.viewItems=[],r.focusedItem=void 0,r.domNode=document.createElement("div"),r.domNode.className="monaco-action-bar",r._orientation){case 0:f=[15],l=[17];break;case 1:f=[16],l=[18],r.domNode.className+=" vertical"}r._register(ma(r.domNode,ah.KEY_DOWN,(function(t){var n=new ws(t);var i=!0;var e=typeof r.focusedItem=="number"?r.viewItems[r.focusedItem]:void 0;f&&(n.equals(f[0])||n.equals(f[1]))?i=r.focusPrevious():l&&(n.equals(l[0])||n.equals(l[1]))?i=r.focusNext():n.equals(9)&&r.cancelHasListener?r._onDidCancel.fire():n.equals(14)?i=r.focusFirst():n.equals(13)?i=r.focusLast():n.equals(2)&&e instanceof cW&&e.trapsArrowNavigation?i=r.focusNext():r.isTriggerKeyEvent(n)?r._triggerKeys.keyDown?r.doTrigger(n):r.triggerKeyDown=!0:i=!1,i&&(n.preventDefault(),n.stopPropagation())}))),r._register(ma(r.domNode,ah.KEY_UP,(function(t){var n=new ws(t);r.isTriggerKeyEvent(n)?(!r._triggerKeys.keyDown&&r.triggerKeyDown&&(r.triggerKeyDown=!1,r.doTrigger(n)),n.preventDefault(),n.stopPropagation()):(n.equals(2)||n.equals(1026)||n.equals(16)||n.equals(18)||n.equals(15)||n.equals(17))&&r.updateFocusedItem()}))),r.focusTracker=r._register(lh(r.domNode)),r._register(r.focusTracker.onDidBlur((function(){Ka()!==r.domNode&&Pa(Ka(),r.domNode)||(r._onDidBlur.fire(),r.previouslyFocusedItem=r.focusedItem,r.focusedItem=void 0,r.triggerKeyDown=!1)}))),r._register(r.focusTracker.onDidFocus((function(){return r.updateFocusedItem()}))),r.actionsList=document.createElement("ul"),r.actionsList.className="actions-container",r.options.highlightToggledItems&&r.actionsList.classList.add("highlight-toggled"),r.actionsList.setAttribute("role",r.options.ariaRole||"toolbar"),r.options.ariaLabel&&r.actionsList.setAttribute("aria-label",r.options.ariaLabel),r.domNode.appendChild(r.actionsList),n.appendChild(r.domNode);return r}n.prototype.refreshRole=function(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")};n.prototype.setFocusable=function(t){if(this.focusable=t,this.focusable){var n=this.viewItems.find((function(t){return t instanceof cW&&t.isEnabled()}));n instanceof cW&&n.setFocusable(!0)}else this.viewItems.forEach((function(t){t instanceof cW&&t.setFocusable(!1)}))};n.prototype.isTriggerKeyEvent=function(t){var n=!1;return this._triggerKeys.keys.forEach((function(i){n=n||t.equals(i)})),n};n.prototype.updateFocusedItem=function(){var t,n;for(var i=0;i<this.actionsList.children.length;i++){var r=this.actionsList.children[i];if(Pa(Ka(),r)){this.focusedItem=i,(n=(t=this.viewItems[this.focusedItem])===null||t===void 0?void 0:t.showHover)===null||n===void 0||n.call(t);break}}};Object.defineProperty(n.prototype,"context",{get:function(){return this._context},set:function(t){this._context=t,this.viewItems.forEach((function(n){return n.setActionContext(t)}))},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"actionRunner",{get:function(){return this._actionRunner},set:function(t){var n=this;this._actionRunner=t,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((function(t){return n._onDidRun.fire(t)}))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((function(t){return n._onWillRun.fire(t)}))),this.viewItems.forEach((function(n){return n.actionRunner=t}))},enumerable:false,configurable:true});n.prototype.getContainer=function(){return this.domNode};n.prototype.getAction=function(t){var n;if(typeof t=="number")return(n=this.viewItems[t])===null||n===void 0?void 0:n.action;if(t instanceof HTMLElement){for(;t.parentElement!==this.actionsList;){if(!t.parentElement)return;t=t.parentElement}for(var i=0;i<this.actionsList.childNodes.length;i++)if(this.actionsList.childNodes[i]===t)return this.viewItems[i].action}};n.prototype.push=function(t,n){var i=this;if(n===void 0){n={}}var r=Array.isArray(t)?t:[t];var e=K(n.index)?n.index:null;r.forEach((function(t){var r=document.createElement("li");var o;r.className="action-item",r.setAttribute("role","presentation");var s=__assign({hoverDelegate:i._hoverDelegate},n);i.options.actionViewItemProvider&&(o=i.options.actionViewItemProvider(t,s)),o||(o=new fW(i.context,t,s)),i.options.allowContextMenu||i.viewItemDisposables.set(o,ma(r,ah.CONTEXT_MENU,(function(t){ch(t,!0)}))),o.actionRunner=i._actionRunner,o.setActionContext(i.context),o.render(r),i.focusable&&o instanceof cW&&i.viewItems.length===0&&o.setFocusable(!0),e===null||e<0||e>=i.actionsList.children.length?(i.actionsList.appendChild(r),i.viewItems.push(o)):(i.actionsList.insertBefore(r,i.actionsList.children[e]),i.viewItems.splice(e,0,o),e++)})),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()};n.prototype.clear=function(){this.isEmpty()||(this.viewItems=si(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),pa(this.actionsList),this.refreshRole())};n.prototype.length=function(){return this.viewItems.length};n.prototype.isEmpty=function(){return this.viewItems.length===0};n.prototype.focus=function(t){var n,i=!1;if(t===void 0?i=!0:typeof t=="number"?n=t:typeof t=="boolean"&&(i=t),i&&this.focusedItem===void 0){var r=this.viewItems.findIndex((function(t){return t.isEnabled()}));this.focusedItem=r===-1?void 0:r,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)};n.prototype.focusFirst=function(){return this.focusedItem=this.length()-1,this.focusNext(!0)};n.prototype.focusLast=function(){return this.focusedItem=0,this.focusPrevious(!0)};n.prototype.focusNext=function(t){if(this.focusedItem===void 0)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;var n=this.focusedItem;var i;do{if(!t&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===ic.ID));return this.updateFocus(),!0};n.prototype.focusPrevious=function(t){if(this.focusedItem===void 0)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;var n=this.focusedItem;var i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!t&&this.options.preventLoopNavigation)return this.focusedItem=n,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===ic.ID));return this.updateFocus(!0),!0};n.prototype.updateFocus=function(t,n,i){if(i===void 0){i=!1}var r,e;this.focusedItem===void 0&&this.actionsList.focus({preventScroll:n}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((r=this.viewItems[this.previouslyFocusedItem])===null||r===void 0||r.blur());var o=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(o){var s=!0;Y(o.focus)||(s=!1),this.options.focusOnlyEnabledItems&&Y(o.isEnabled)&&!o.isEnabled()&&(s=!1),o.action.id===ic.ID&&(s=!1),s?(i||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(t),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:n}),this.previouslyFocusedItem=void 0),s&&((e=o.showHover)===null||e===void 0||e.call(o))}};n.prototype.doTrigger=function(t){if(this.focusedItem===void 0)return;var n=this.viewItems[this.focusedItem];if(n instanceof cW){var i=n._context===null||n._context===void 0?t:n._context;this.run(n._action,i)}};n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,this._actionRunner.run(t,n)];case 1:i.sent();return[2]}}))}))};n.prototype.dispose=function(){this._context=void 0,this.viewItems=si(this.viewItems),this.getContainer().remove(),t.prototype.dispose.call(this)};return n}(ci);var GW=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,$W=/(&amp;)?(&amp;)([^\s&])/g;var JW,ZW;(function(t){t[t.Right=0]="Right",t[t.Left=1]="Left"})(JW||(JW={})),function(t){t[t.Above=0]="Above",t[t.Below=1]="Below"}(ZW||(ZW={}));var QW=function(t){__extends(n,t);function n(n,i,r,e){var o=this;n.classList.add("monaco-menu-container"),n.setAttribute("role","presentation");var s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),o=t.call(this,s,{orientation:1,actionViewItemProvider:function(t){return o.doGetActionViewItem(t,r,u)},context:r.context,actionRunner:r.actionRunner,ariaLabel:r.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:__spreadArray([3],Ft||Lt?[10]:[],true),keyDown:!0}})||this,o.menuStyles=e,o.menuElement=s,o.actionsList.tabIndex=0,o.initializeOrUpdateStyleSheet(n,e),o._register(nk.addTarget(s)),o._register(ma(s,ah.KEY_DOWN,(function(t){new ws(t).equals(2)&&t.preventDefault()}))),r.enableMnemonics&&o._register(ma(s,ah.KEY_DOWN,(function(t){var n=t.key.toLocaleLowerCase();if(o.mnemonics.has(n)){ch(t,!0);var i=o.mnemonics.get(n);if(i.length===1&&(i[0]instanceof XW&&i[0].container&&o.focusItemByElement(i[0].container),i[0].onClick(t)),i.length>1){var r=i.shift();r&&r.container&&(o.focusItemByElement(r.container),i.push(r)),o.mnemonics.set(n,i)}}}))),Lt&&o._register(ma(s,ah.KEY_DOWN,(function(t){var n=new ws(t);n.equals(14)||n.equals(11)?(o.focusedItem=o.viewItems.length-1,o.focusNext(),ch(t,!0)):(n.equals(13)||n.equals(12))&&(o.focusedItem=0,o.focusPrevious(),ch(t,!0))}))),o._register(ma(o.domNode,ah.MOUSE_OUT,(function(t){Pa(t.relatedTarget,o.domNode)||(o.focusedItem=void 0,o.updateFocus(),t.stopPropagation())}))),o._register(ma(o.actionsList,ah.MOUSE_OVER,(function(t){var n=t.target;if(n&&Pa(n,o.actionsList)&&n!==o.actionsList){for(;n.parentElement!==o.actionsList&&n.parentElement!==null;)n=n.parentElement;if(n.classList.contains("action-item")){var i=o.focusedItem;o.setFocusedItem(n),i!==o.focusedItem&&o.updateFocus()}}}))),o._register(nk.addTarget(o.actionsList)),o._register(ma(o.actionsList,X_.Tap,(function(t){var n=t.initialTarget;if(n&&Pa(n,o.actionsList)&&n!==o.actionsList){for(;n.parentElement!==o.actionsList&&n.parentElement!==null;)n=n.parentElement;if(n.classList.contains("action-item")){var i=o.focusedItem;o.setFocusedItem(n),i!==o.focusedItem&&o.updateFocus()}}})));var u={parent:o};o.mnemonics=new Map,o.scrollableElement=o._register(new yk(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));var a=o.scrollableElement.getDomNode();a.style.position="",o.styleScrollElement(a,e),o._register(ma(s,X_.Change,(function(t){ch(t,!0);var n=o.scrollableElement.getScrollPosition().scrollTop;o.scrollableElement.setScrollPosition({scrollTop:n-t.translationY})}))),o._register(ma(a,ah.MOUSE_UP,(function(t){t.preventDefault()})));var h=sa(n);s.style.maxHeight="".concat(Math.max(10,h.innerHeight-n.getBoundingClientRect().top-35),"px"),i=i.filter((function(t,n){var e;return!((e=r.submenuIds)===null||e===void 0)&&e.has(t.id)?(console.warn("Found submenu cycle: ".concat(t.id)),!1):!(t instanceof ic&&(n===i.length-1||n===0||i[n-1]instanceof ic))})),o.push(i,{icon:!0,label:!0,isMenu:!0}),n.appendChild(o.scrollableElement.getDomNode()),o.scrollableElement.scanDomNode(),o.viewItems.filter((function(t){return!(t instanceof tH)})).forEach((function(t,n,i){t.updatePositionInSet(n+1,i.length)}));return o}n.prototype.initializeOrUpdateStyleSheet=function(t,i){this.styleSheet||(za(t)?this.styleSheet=Qa(t):(n.globalStyleSheet||(n.globalStyleSheet=Qa()),this.styleSheet=n.globalStyleSheet)),this.styleSheet.textContent=function(t,n){var i="\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n".concat(nH(Hr.menuSelection),"\n").concat(nH(Hr.menuSubmenu),"\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}");if(n){i+="\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t";var r=t.scrollbarShadow;r&&(i+="\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ".concat(r," 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ").concat(r," 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ").concat(r," 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t"));var e=t.scrollbarSliderBackground;e&&(i+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ".concat(e,";\n\t\t\t\t}\n\t\t\t"));var o=t.scrollbarSliderHoverBackground;o&&(i+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ".concat(o,";\n\t\t\t\t}\n\t\t\t"));var s=t.scrollbarSliderActiveBackground;s&&(i+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ".concat(s,";\n\t\t\t\t}\n\t\t\t"))}return i}(i,za(t))};n.prototype.styleScrollElement=function(t,n){var i,r;var e=(i=n.foregroundColor)!==null&&i!==void 0?i:"",o=(r=n.backgroundColor)!==null&&r!==void 0?r:"",s=n.borderColor?"1px solid ".concat(n.borderColor):"",u=n.shadowColor?"0 2px 8px ".concat(n.shadowColor):"";t.style.outline=s,t.style.borderRadius="5px",t.style.color=e,t.style.backgroundColor=o,t.style.boxShadow=u};n.prototype.getContainer=function(){return this.scrollableElement.getDomNode()};Object.defineProperty(n.prototype,"onScroll",{get:function(){return this.scrollableElement.onScroll},enumerable:false,configurable:true});n.prototype.focusItemByElement=function(t){var n=this.focusedItem;this.setFocusedItem(t),n!==this.focusedItem&&this.updateFocus()};n.prototype.setFocusedItem=function(t){for(var n=0;n<this.actionsList.children.length;n++)if(t===this.actionsList.children[n]){this.focusedItem=n;break}};n.prototype.updateFocus=function(n){t.prototype.updateFocus.call(this,n,!0,!0),this.focusedItem!==void 0&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})};n.prototype.doGetActionViewItem=function(t,n,i){if(t instanceof ic)return new tH(n.context,t,{icon:!0},this.menuStyles);if(t instanceof rc){var r=new XW(t,t.actions,i,__assign(__assign({},n),{submenuIds:new Set(__spreadArray(__spreadArray([],n.submenuIds||[],true),[t.id],false))}),this.menuStyles);if(n.enableMnemonics){var e=r.getMnemonic();if(e&&r.isEnabled()){var o=[];this.mnemonics.has(e)&&(o=this.mnemonics.get(e)),o.push(r),this.mnemonics.set(e,o)}}return r}{var r={enableMnemonics:n.enableMnemonics,useEventAsContext:n.useEventAsContext};if(n.getKeyBinding){var o=n.getKeyBinding(t);if(o){var s=o.getLabel();s&&(r.keybinding=s)}}var e=new YW(n.context,t,r,this.menuStyles);if(n.enableMnemonics){var o=e.getMnemonic();if(o&&e.isEnabled()){var s=[];this.mnemonics.has(o)&&(s=this.mnemonics.get(o)),s.push(e),this.mnemonics.set(o,s)}}return e}};return n}(qW);var YW=function(t){__extends(n,t);function n(n,i,r,e){var o=this;if(r.isMenu=!0,o=t.call(this,i,i,r)||this,o.menuStyle=e,o.options=r,o.options.icon=r.icon!==void 0&&r.icon,o.options.label=r.label===void 0||r.label,o.cssClass="",o.options.label&&r.enableMnemonics){var s=o.action.label;if(s){var u=GW.exec(s);u&&(o.mnemonic=(u[1]?u[1]:u[3]).toLocaleLowerCase())}}o.runOnceToEnableMouseUp=new Ts((function(){o.element&&(o._register(ma(o.element,ah.MOUSE_UP,(function(t){if(ch(t,!0),is){if(new _s(sa(o.element),t).rightButton)return;o.onClick(t)}else setTimeout((function(){o.onClick(t)}),0)}))),o._register(ma(o.element,ah.CONTEXT_MENU,(function(t){ch(t,!0)}))))}),100),o._register(o.runOnceToEnableMouseUp);return o}n.prototype.render=function(n){t.prototype.render.call(this,n),this.element&&(this.container=n,this.item=vh(this.element,bh("a.action-menu-item")),this._action.id===ic.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts","".concat(this.mnemonic))),this.check=vh(this.item,bh("span.menu-item-check"+uc.asCSSSelector(Hr.menuSelection))),this.check.setAttribute("role","none"),this.label=vh(this.item,bh("span.action-label")),this.options.label&&this.options.keybinding&&(vh(this.item,bh("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())};n.prototype.blur=function(){t.prototype.blur.call(this),this.applyStyle()};n.prototype.focus=function(){var n;t.prototype.focus.call(this),(n=this.item)===null||n===void 0||n.focus(),this.applyStyle()};n.prototype.updatePositionInSet=function(t,n){this.item&&(this.item.setAttribute("aria-posinset","".concat(t)),this.item.setAttribute("aria-setsize","".concat(n)))};n.prototype.updateLabel=function(){var t;if(this.label&&this.options.label){pa(this.label);var n=HT(this.action.label);if(n){var i=function(t){var n=GW,i=n.exec(t);if(!i)return t;var r=!i[1];return t.replace(n,r?"$2$3":"").trim()}(n);this.options.enableMnemonics||(n=i),this.label.setAttribute("aria-label",i.replace(/&&/g,"&"));var r=GW.exec(n);if(r){n=so(n),$W.lastIndex=0;var e=$W.exec(n);for(;e&&e[1];)e=$W.exec(n);var o=function(t){return t.replace(/&amp;&amp;/g,"&amp;")};e?this.label.append(ho(o(n.substr(0,e.index))," "),bh("u",{"aria-hidden":"true"},e[3]),co(o(n.substr(e.index+e[0].length))," ")):this.label.innerText=o(n).trim(),(t=this.item)===null||t===void 0||t.setAttribute("aria-keyshortcuts",(r[1]?r[1]:r[3]).toLocaleLowerCase())}else this.label.innerText=n.replace(/&&/g,"&").trim()}}};n.prototype.updateTooltip=function(){};n.prototype.updateClass=function(){var t,n;this.cssClass&&this.item&&(t=this.item.classList).remove.apply(t,this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&(n=this.label.classList).add.apply(n,this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")};n.prototype.updateEnabled=function(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))};n.prototype.updateChecked=function(){if(!this.item)return;var t=this.action.checked;this.item.classList.toggle("checked",!!t),t!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",t?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))};n.prototype.getMnemonic=function(){return this.mnemonic};n.prototype.applyStyle=function(){var t=this.element&&this.element.classList.contains("focused"),n=t&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,i=t&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,r=t&&this.menuStyle.selectionBorderColor?"1px solid ".concat(this.menuStyle.selectionBorderColor):"",e=t&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=n!==null&&n!==void 0?n:"",this.item.style.backgroundColor=i!==null&&i!==void 0?i:"",this.item.style.outline=r,this.item.style.outlineOffset=e),this.check&&(this.check.style.color=n!==null&&n!==void 0?n:"")};return n}(cW);var XW=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this,n,n,e,o)||this,s.submenuActions=i,s.parentData=r,s.submenuOptions=e,s.mysubmenu=null,s.submenuDisposables=s._register(new hi),s.mouseOver=!1,s.expandDirection=e&&e.expandDirection!==void 0?e.expandDirection:{horizontal:JW.Right,vertical:ZW.Below},s.showScheduler=new Ts((function(){s.mouseOver&&(s.cleanupExistingSubmenu(!1),s.createSubmenu(!1))}),250),s.hideScheduler=new Ts((function(){s.element&&!Pa(Ka(),s.element)&&s.parentData.submenu===s.mysubmenu&&(s.parentData.parent.focus(!1),s.cleanupExistingSubmenu(!0))}),750);return s}n.prototype.render=function(n){var i=this;t.prototype.render.call(this,n),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=vh(this.item,bh("span.submenu-indicator"+uc.asCSSSelector(Hr.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(ma(this.element,ah.KEY_UP,(function(t){var n=new ws(t);(n.equals(17)||n.equals(3))&&(ch(t,!0),i.createSubmenu(!0))}))),this._register(ma(this.element,ah.KEY_DOWN,(function(t){var n=new ws(t);Ka()===i.item&&(n.equals(17)||n.equals(3))&&ch(t,!0)}))),this._register(ma(this.element,ah.MOUSE_OVER,(function(t){i.mouseOver||(i.mouseOver=!0,i.showScheduler.schedule())}))),this._register(ma(this.element,ah.MOUSE_LEAVE,(function(t){i.mouseOver=!1}))),this._register(ma(this.element,ah.FOCUS_OUT,(function(t){i.element&&!Pa(Ka(),i.element)&&i.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((function(){i.parentData.submenu===i.mysubmenu&&(i.parentData.parent.focus(!1),i.cleanupExistingSubmenu(!0))}))))};n.prototype.updateEnabled=function(){};n.prototype.onClick=function(t){ch(t,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)};n.prototype.cleanupExistingSubmenu=function(t){if(this.parentData.submenu&&(t||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(t){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}};n.prototype.calculateSubmenuMenuLayout=function(t,n,i,r){var e={top:0,left:0};return e.left=PI(t.width,n.width,{position:r.horizontal===JW.Right?0:1,offset:i.left,size:i.width}),e.left>=i.left&&e.left<i.left+i.width&&(i.left+10+n.width<=t.width&&(e.left=i.left+10),i.top+=10,i.height=0),e.top=PI(t.height,n.height,{position:0,offset:i.top,size:0}),e.top+n.height===i.top&&e.top+i.height+n.height<=t.height&&(e.top+=i.height),e};n.prototype.createSubmenu=function(t){var n=this;if(t===void 0){t=!0}if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=vh(this.element,bh("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");var i=sa(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),r=parseFloat(i.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new QW(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new ec],this.submenuOptions,this.menuStyle);var e=this.element.getBoundingClientRect(),o={top:e.top-r,left:e.left,height:e.height+2*r,width:e.width},s=this.submenuContainer.getBoundingClientRect(),u=sa(this.element),a=this.calculateSubmenuMenuLayout(new Fa(u.innerWidth,u.innerHeight),Fa.lift(s),o,this.expandDirection),h=a.top,c=a.left;this.submenuContainer.style.left=c-s.left+"px",this.submenuContainer.style.top=h-s.top+"px",this.submenuDisposables.add(ma(this.submenuContainer,ah.KEY_UP,(function(t){new ws(t).equals(15)&&(ch(t,!0),n.parentData.parent.focus(),n.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add(ma(this.submenuContainer,ah.KEY_DOWN,(function(t){new ws(t).equals(15)&&ch(t,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((function(){n.parentData.parent.focus(),n.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(t),this.mysubmenu=this.parentData.submenu}};n.prototype.updateAriaExpanded=function(t){var n;this.item&&((n=this.item)===null||n===void 0||n.setAttribute("aria-expanded",t))};n.prototype.applyStyle=function(){t.prototype.applyStyle.call(this);var n=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=n!==null&&n!==void 0?n:"")};n.prototype.dispose=function(){t.prototype.dispose.call(this),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)};return n}(YW);var tH=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,n,i,r)||this,o.menuStyles=e;return o}n.prototype.render=function(n){t.prototype.render.call(this,n),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?"".concat(this.menuStyles.separatorColor):"")};return n}(fW);function nH(t){var n=Wr()[t.id];return".codicon-".concat(t.id,":before { content: '\\").concat(n.toString(16),"'; }")}var iH=function(){function t(t,n,i,r){this.contextViewService=t,this.telemetryService=n,this.notificationService=i,this.keybindingService=r,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}t.prototype.configure=function(t){this.options=t};t.prototype.showContextMenu=function(t){var n=this;var i=t.getActions();if(!i.length)return;var r;this.focusToReturn=Ka();var e=t.domForShadowRoot instanceof HTMLElement?t.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:function(){return t.getAnchor()},canRelayout:!1,anchorAlignment:t.anchorAlignment,anchorAxisAlignment:t.anchorAxisAlignment,render:function(e){var o;n.lastContainer=e;var s=t.getMenuClassName?t.getMenuClassName():"";s&&(e.className+=" "+s),n.options.blockMouse&&(n.block=e.appendChild(bh(".context-view-block")),n.block.style.position="fixed",n.block.style.cursor="initial",n.block.style.left="0",n.block.style.top="0",n.block.style.width="100%",n.block.style.height="100%",n.block.style.zIndex="-1",(o=n.blockDisposable)===null||o===void 0||o.dispose(),n.blockDisposable=ma(n.block,ah.MOUSE_DOWN,(function(t){return t.stopPropagation()})));var u=new hi,a=t.actionRunner||new nc;a.onWillRun((function(i){return n.onActionRun(i,!t.skipTelemetry)}),n,u),a.onDidRun(n.onDidActionRun,n,u),r=new QW(e,i,{actionViewItemProvider:t.getActionViewItem,context:t.getActionsContext?t.getActionsContext():null,actionRunner:a,getKeyBinding:t.getKeyBinding?t.getKeyBinding:function(t){return n.keybindingService.lookupKeybinding(t.id)}},IW),r.onDidCancel((function(){return n.contextViewService.hideContextView(!0)}),null,u),r.onDidBlur((function(){return n.contextViewService.hideContextView(!0)}),null,u);var h=sa(e);return u.add(ma(h,ah.BLUR,(function(){return n.contextViewService.hideContextView(!0)}))),u.add(ma(h,ah.MOUSE_DOWN,(function(t){if(t.defaultPrevented)return;var i=new _s(h,t);var r=i.target;if(!i.rightButton){for(;r;){if(r===e)return;r=r.parentElement}n.contextViewService.hideContextView(!0)}}))),ui(u,r)},focus:function(){r==null||r.focus(!!t.autoSelectFirstItem)},onHide:function(i){var r,e,o;(r=t.onHide)===null||r===void 0||r.call(t,!!i),n.block&&(n.block.remove(),n.block=null),(e=n.blockDisposable)===null||e===void 0||e.dispose(),n.blockDisposable=null,n.lastContainer&&(Ka()===n.lastContainer||Pa(Ka(),n.lastContainer))&&((o=n.focusToReturn)===null||o===void 0||o.focus()),n.lastContainer=null}},e,!!e)};t.prototype.onActionRun=function(t,n){n&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)};t.prototype.onDidActionRun=function(t){t.error&&!Qn(t.error)&&this.notificationService.error(t.error)};return t}();var rH=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},eH=function(t,n){return function(i,r){n(i,r,t)}};var oH=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u.telemetryService=n,u.notificationService=i,u.contextViewService=r,u.keybindingService=e,u.menuService=o,u.contextKeyService=s,u._contextMenuHandler=void 0,u._onDidShowContextMenu=u._store.add(new ki),u.onDidShowContextMenu=u._onDidShowContextMenu.event,u._onDidHideContextMenu=u._store.add(new ki);return u}Object.defineProperty(n.prototype,"contextMenuHandler",{get:function(){return this._contextMenuHandler||(this._contextMenuHandler=new iH(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler},enumerable:false,configurable:true});n.prototype.configure=function(t){this.contextMenuHandler.configure(t)};n.prototype.showContextMenu=function(t){var n=this;t=sH.transform(t,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu(__assign(__assign({},t),{onHide:function(i){var r;(r=t.onHide)===null||r===void 0||r.call(t,i),n._onDidHideContextMenu.fire()}})),Oh.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()};return n}(ci);var sH,uH;oH=rH([eH(0,_f),eH(1,EL),eH(2,yR),eH(3,Yx),eH(4,df),eH(5,Gc)],oH),function(t){t.transform=function(t,n,i){if(!((r=t)&&r.menuId instanceof vf))return t;var r;var e=t.menuId,o=t.menuActionOptions,s=t.contextKeyService;return __assign(__assign({},t),{getActions:function(){var r=[];if(e){var u=n.createMenu(e,s!==null&&s!==void 0?s:i);(function(t,n,i,r){var e=t.getActions(n),o=Oh.getInstance();WW(e,i,o.keyStatus.altKey||(Mt||Lt)&&o.keyStatus.shiftKey,(function(t){return t==="navigation"}))})(u,o,r),u.dispose()}return t.getActions?ic.join(t.getActions(),r):r}})}}(sH||(sH={})),function(t){t[t.API=0]="API",t[t.USER=1]="USER"}(uH||(uH={}));var aH=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},hH=function(t,n){return function(i,r){n(i,r,t)}};var cH=function(){function t(t){this._commandService=t}t.prototype.open=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i;var r;return __generator(this,(function(e){switch(e.label){case 0:if(!Ku(t,Uu.command))return[2,!1];if(!(n!=null&&n.allowCommands)||(typeof t=="string"&&(t=Cr.parse(t)),Array.isArray(n.allowCommands)&&!n.allowCommands.includes(t.path)))return[2,!0];i=[];try{i=tI(decodeURIComponent(t.query))}catch(n){try{i=tI(t.query)}catch(t){}}Array.isArray(i)||(i=[i]);return[4,(r=this._commandService).executeCommand.apply(r,__spreadArray([t.path],i,false))];case 1:return[2,(e.sent(),!0)]}}))}))};return t}();cH=aH([hH(0,ac)],cH);var fH=function(){function t(t){this._editorService=t}t.prototype.open=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e;return __generator(this,(function(o){switch(o.label){case 0:typeof t=="string"&&(t=Cr.parse(t));i=function(t){var n;var i=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(t.fragment);return i&&(n={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1,endLineNumber:i[4]?parseInt(i[4]):void 0,endColumn:i[4]?i[5]?parseInt(i[5]):1:void 0},t=t.with({fragment:""})),{selection:n,uri:t}}(t),r=i.selection,e=i.uri;(t=e).scheme===Uu.file&&(t=zO(t));return[4,this._editorService.openCodeEditor({resource:t,options:__assign({selection:r,source:n!=null&&n.fromUserGesture?uH.USER:uH.API},n==null?void 0:n.editorOptions)},this._editorService.getFocusedCodeEditor(),n==null?void 0:n.openToSide)];case 1:return[2,(o.sent(),!0)]}}))}))};return t}();fH=aH([hH(0,Qh)],fH);var lH=function(){function t(t,n){var i=this;this._openers=new tn,this._validators=new tn,this._resolvers=new tn,this._resolvedUriTargets=new od((function(t){return t.with({path:null,fragment:null,query:null}).toString()})),this._externalOpeners=new tn,this._defaultExternalOpener={openExternal:function(t){return __awaiter(i,void 0,void 0,(function(){return __generator(this,(function(n){return[2,(Vu(t,Uu.http,Uu.https)?xh(t):Xe.location.href=t,!0)]}))}))}},this._openers.push({open:function(t,n){return __awaiter(i,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:i=!(!(n!=null&&n.openExternal)&&!Vu(t,Uu.mailto,Uu.http,Uu.https,Uu.vsls));if(!i)return[3,2];return[4,this._doOpenExternal(t,n)];case 1:i=(r.sent(),!0);r.label=2;case 2:return[2,i]}}))}))}}),this._openers.push(new cH(n)),this._openers.push(new fH(t))}t.prototype.registerOpener=function(t){return{dispose:this._openers.unshift(t)}};t.prototype.open=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u,a,h,u;return __generator(this,(function(c){switch(c.label){case 0:r=typeof t=="string"?Cr.parse(t):t,e=(i=this._resolvedUriTargets.get(r))!==null&&i!==void 0?i:t;o=0,s=this._validators;c.label=1;case 1:if(!(o<s.length))return[3,4];u=s[o];return[4,u.shouldOpen(e,n)];case 2:if(!c.sent())return[2,!1];c.label=3;case 3:o++;return[3,1];case 4:a=0,h=this._openers;c.label=5;case 5:if(!(a<h.length))return[3,8];u=h[a];return[4,u.open(t,n)];case 6:if(c.sent())return[2,!0];c.label=7;case 7:a++;return[3,5];case 8:return[2,!1]}}))}))};t.prototype.resolveExternalUri=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s;return __generator(this,(function(u){switch(u.label){case 0:i=0,r=this._resolvers;u.label=1;case 1:if(!(i<r.length))return[3,6];e=r[i];u.label=2;case 2:u.trys.push([2,4,,5]);return[4,e.resolveExternalUri(t,n)];case 3:o=u.sent();if(o)return[2,(this._resolvedUriTargets.has(o.resolved)||this._resolvedUriTargets.set(o.resolved,t),o)];return[3,5];case 4:s=u.sent();return[3,5];case 5:i++;return[3,1];case 6:throw new Error("Could not resolve external URI: "+t.toString())}}))}))};t.prototype._doOpenExternal=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u,a,h;return __generator(this,(function(c){switch(c.label){case 0:i=typeof t=="string"?Cr.parse(t):t;c.label=1;case 1:c.trys.push([1,3,,4]);return[4,this.resolveExternalUri(i,n)];case 2:r=c.sent().resolved;return[3,4];case 3:o=c.sent();r=i;return[3,4];case 4:if(!(e=typeof t=="string"&&i.toString()===r.toString()?t:encodeURI(r.toString(!0)),n==null?void 0:n.allowContributedOpeners))return[3,8];s=typeof(n==null?void 0:n.allowContributedOpeners)=="string"?n==null?void 0:n.allowContributedOpeners:void 0;u=0,a=this._externalOpeners;c.label=5;case 5:if(!(u<a.length))return[3,8];h=a[u];return[4,h.openExternal(e,{sourceUri:i,preferredOpenerId:s},Fi.None)];case 6:if(c.sent())return[2,!0];c.label=7;case 7:u++;return[3,5];case 8:return[2,this._defaultExternalOpener.openExternal(e,{sourceUri:i},Fi.None)]}}))}))};t.prototype.dispose=function(){this._validators.clear()};return t}();lH=aH([hH(0,Qh),hH(1,ac)],lH);var vH=Zh("editorWorkerService");var dH,gH;(function(t){t[t.Hint=1]="Hint",t[t.Info=2]="Info",t[t.Warning=4]="Warning",t[t.Error=8]="Error"})(dH||(dH={})),function(t){t.compare=function(t,n){return n-t};var n=Object.create(null);n[t.Error]=ht(0,"Error"),n[t.Warning]=ht(0,"Warning"),n[t.Info]=ht(0,"Info"),t.toString=function(t){return n[t]||""},t.fromSeverity=function(n){switch(n){case AL.Error:return t.Error;case AL.Warning:return t.Warning;case AL.Info:return t.Info;case AL.Ignore:return t.Hint}},t.toSeverity=function(n){switch(n){case t.Error:return AL.Error;case t.Warning:return AL.Warning;case t.Info:return AL.Info;case t.Hint:return AL.Ignore}}}(dH||(dH={})),function(t){var n="";function i(t,i){var r=[n];return t.source?r.push(t.source.replace("¦","\\¦")):r.push(n),t.code?typeof t.code=="string"?r.push(t.code.replace("¦","\\¦")):r.push(t.code.value.replace("¦","\\¦")):r.push(n),t.severity!==void 0&&t.severity!==null?r.push(dH.toString(t.severity)):r.push(n),t.message&&i?r.push(t.message.replace("¦","\\¦")):r.push(n),t.startLineNumber!==void 0&&t.startLineNumber!==null?r.push(t.startLineNumber.toString()):r.push(n),t.startColumn!==void 0&&t.startColumn!==null?r.push(t.startColumn.toString()):r.push(n),t.endLineNumber!==void 0&&t.endLineNumber!==null?r.push(t.endLineNumber.toString()):r.push(n),t.endColumn!==void 0&&t.endColumn!==null?r.push(t.endColumn.toString()):r.push(n),r.push(n),r.join("¦")}t.makeKey=function(t){return i(t,!0)},t.makeKeyOptionalMessage=i}(gH||(gH={}));var pH=Zh("markerService");var wH=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},mH=function(t,n){return function(i,r){n(i,r,t)}};var bH=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._markerService=i,r._onDidChangeMarker=r._register(new ki),r._markerDecorations=new od,n.getModels().forEach((function(t){return r._onModelAdded(t)})),r._register(n.onModelAdded(r._onModelAdded,r)),r._register(n.onModelRemoved(r._onModelRemoved,r)),r._register(r._markerService.onMarkerChanged(r._handleMarkerChange,r));return r}n.prototype.dispose=function(){t.prototype.dispose.call(this),this._markerDecorations.forEach((function(t){return t.dispose()})),this._markerDecorations.clear()};n.prototype.getMarker=function(t,n){var i=this._markerDecorations.get(t);return i&&i.getMarker(n)||null};n.prototype._handleMarkerChange=function(t){var n=this;t.forEach((function(t){var i=n._markerDecorations.get(t);i&&n._updateDecorations(i)}))};n.prototype._onModelAdded=function(t){var n=new yH(t);this._markerDecorations.set(t.uri,n),this._updateDecorations(n)};n.prototype._onModelRemoved=function(t){var n=this;var i;var r=this._markerDecorations.get(t.uri);r&&(r.dispose(),this._markerDecorations.delete(t.uri)),t.uri.scheme!==Uu.inMemory&&t.uri.scheme!==Uu.internal&&t.uri.scheme!==Uu.vscode||(i=this._markerService)===null||i===void 0||i.read({resource:t.uri}).map((function(t){return t.owner})).forEach((function(i){return n._markerService.remove(i,[t.uri])}))};n.prototype._updateDecorations=function(t){var n=this._markerService.read({resource:t.model.uri,take:500});t.update(n)&&this._onDidChangeMarker.fire(t.model)};return n}(ci);bH=wH([mH(0,Yh),mH(1,pH)],bH);var yH=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.model=n,i._map=new ad,i._register(ai((function(){i.model.deltaDecorations(__spreadArray([],i._map.values(),true),[]),i._map.clear()})));return i}n.prototype.update=function(t){var n=this;var i=function(t,n){var i=[],r=[];for(var e=0,o=t;e<o.length;e++){var s=o[e];n.has(s)||i.push(s)}for(var u=0,a=n;u<a.length;u++){var s=a[u];t.has(s)||r.push(s)}return{removed:i,added:r}}(new Set(this._map.keys()),new Set(t)),r=i.added,e=i.removed;if(r.length===0&&e.length===0)return!1;var o=e.map((function(t){return n._map.get(t)})),s=r.map((function(t){return{range:n._createDecorationRange(n.model,t),options:n._createDecorationOption(t)}})),u=this.model.deltaDecorations(o,s);for(var a=0,h=e;a<h.length;a++){var c=h[a];this._map.delete(c)}for(var c=0;c<u.length;c++)this._map.set(r[c],u[c]);return!0};n.prototype.getMarker=function(t){return this._map.getKey(t.id)};n.prototype._createDecorationRange=function(t,n){var i=Ir.lift(n);if(n.severity!==dH.Hint||this._hasMarkerTag(n,1)||this._hasMarkerTag(n,2)||(i=i.setEndPosition(i.startLineNumber,i.startColumn+2)),i=t.validateRange(i),i.isEmpty()){var r=t.getLineLastNonWhitespaceColumn(i.startLineNumber)||t.getLineMaxColumn(i.startLineNumber);if(r===1||i.endColumn>=r)return i;var e=t.getWordAtPosition(i.getStartPosition());e&&(i=new Ir(i.startLineNumber,e.startColumn,i.endLineNumber,e.endColumn))}else if(n.endColumn===Number.MAX_VALUE&&n.startColumn===1&&i.startLineNumber===i.endLineNumber){var r=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);r<i.endColumn&&(i=new Ir(i.startLineNumber,r,i.endLineNumber,i.endColumn),n.startColumn=r)}return i};n.prototype._createDecorationOption=function(t){var n,i,r,e,o;switch(t.severity){case dH.Hint:n=this._hasMarkerTag(t,2)?void 0:this._hasMarkerTag(t,1)?"squiggly-unnecessary":"squiggly-hint",r=0;break;case dH.Info:n="squiggly-info",i=Uk(Ox),r=10,o={color:Uk(xb),position:1};break;case dH.Warning:n="squiggly-warning",i=Uk(Ax),r=20,o={color:Uk(Cb),position:1};break;case dH.Error:default:n="squiggly-error",i=Uk(Dx),r=30,o={color:Uk(Sb),position:1}}return t.tags&&(t.tags.indexOf(1)!==-1&&(e="squiggly-inline-unnecessary"),t.tags.indexOf(2)!==-1&&(e="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:n,showIfCollapsed:!0,overviewRuler:{color:i,position:vd.Right},minimap:o,zIndex:r,inlineClassName:e}};n.prototype._hasMarkerTag=function(t,n){return!!t.tags&&t.tags.indexOf(n)>=0};return n}(ci);var _H,kH=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},xH=function(t,n){return function(i,r){n(i,r,t)}};function CH(t){return t.toString()}var SH=function(){function t(t,n,i){this.model=t,this._modelEventListeners=new hi,this.model=t,this._modelEventListeners.add(t.onWillDispose((function(){return n(t)}))),this._modelEventListeners.add(t.onDidChangeLanguage((function(n){return i(t,n)})))}t.prototype.dispose=function(){this._modelEventListeners.dispose()};return t}();var DH=Lt||Ft?1:2;var AH=function(){function t(t,n,i,r,e,o,s,u){this.uri=t,this.initialUndoRedoSnapshot=n,this.time=i,this.sharesUndoRedoStack=r,this.heapSize=e,this.sha1=o,this.versionId=s,this.alternativeVersionId=u}return t}();var OH=_H=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s._configurationService=n,s._resourcePropertiesService=i,s._undoRedoService=r,s._languageService=e,s._languageConfigurationService=o,s._onModelAdded=s._register(new ki),s.onModelAdded=s._onModelAdded.event,s._onModelRemoved=s._register(new ki),s.onModelRemoved=s._onModelRemoved.event,s._onModelModeChanged=s._register(new ki),s.onModelLanguageChanged=s._onModelModeChanged.event,s._modelCreationOptionsByLanguageAndResource=Object.create(null),s._models={},s._disposedModels=new Map,s._disposedModelsHeapSize=0,s._register(s._configurationService.onDidChangeConfiguration((function(t){return s._updateModelOptions(t)}))),s._updateModelOptions(void 0);return s}n._readModelOptions=function(t,n){var i;var r=Qt.tabSize;if(t.editor&&t.editor.tabSize!==void 0){var e=parseInt(t.editor.tabSize,10);isNaN(e)||(r=e),r<1&&(r=1)}var o="tabSize";if(t.editor&&t.editor.indentSize!==void 0&&t.editor.indentSize!=="tabSize"){var e=parseInt(t.editor.indentSize,10);isNaN(e)||(o=Math.max(e,1))}var s=Qt.insertSpaces;t.editor&&t.editor.insertSpaces!==void 0&&(s=t.editor.insertSpaces!=="false"&&!!t.editor.insertSpaces);var u=DH;var a=t.eol;a==="\r\n"?u=2:a==="\n"&&(u=1);var h=Qt.trimAutoWhitespace;t.editor&&t.editor.trimAutoWhitespace!==void 0&&(h=t.editor.trimAutoWhitespace!=="false"&&!!t.editor.trimAutoWhitespace);var c=Qt.detectIndentation;t.editor&&t.editor.detectIndentation!==void 0&&(c=t.editor.detectIndentation!=="false"&&!!t.editor.detectIndentation);var f=Qt.largeFileOptimizations;t.editor&&t.editor.largeFileOptimizations!==void 0&&(f=t.editor.largeFileOptimizations!=="false"&&!!t.editor.largeFileOptimizations);var l=Qt.bracketPairColorizationOptions;return!((i=t.editor)===null||i===void 0)&&i.bracketPairColorization&&typeof t.editor.bracketPairColorization=="object"&&(l={enabled:!!t.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!t.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:n,tabSize:r,indentSize:o,insertSpaces:s,detectIndentation:c,defaultEOL:u,trimAutoWhitespace:h,largeFileOptimizations:f,bracketPairColorizationOptions:l}};n.prototype._getEOL=function(t,n){if(t)return this._resourcePropertiesService.getEOL(t,n);var i=this._configurationService.getValue("files.eol",{overrideIdentifier:n});return i&&typeof i=="string"&&i!=="auto"?i:zt===3||zt===2?"\n":"\r\n"};n.prototype._shouldRestoreUndoStack=function(){var t=this._configurationService.getValue("files.restoreUndoStack");return typeof t!="boolean"||t};n.prototype.getCreationOptions=function(t,i,r){var e=typeof t=="string"?t:t.languageId;var o=this._modelCreationOptionsByLanguageAndResource[e+i];if(!o){var s=this._configurationService.getValue("editor",{overrideIdentifier:e,resource:i}),u=this._getEOL(i,e);o=n._readModelOptions({editor:s,eol:u},r),this._modelCreationOptionsByLanguageAndResource[e+i]=o}return o};n.prototype._updateModelOptions=function(t){var i=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);var r=Object.keys(this._models);for(var e=0,o=r.length;e<o;e++){var s=r[e],u=this._models[s],a=u.model.getLanguageId(),h=u.model.uri;if(t&&!t.affectsConfiguration("editor",{overrideIdentifier:a,resource:h})&&!t.affectsConfiguration("files.eol",{overrideIdentifier:a,resource:h}))continue;var c=i[a+h],f=this.getCreationOptions(a,h,u.model.isForSimpleWidget);n._setModelOptionsForModel(u.model,f,c)}};n._setModelOptionsForModel=function(t,n,i){i&&i.defaultEOL!==n.defaultEOL&&t.getLineCount()===1&&t.setEOL(n.defaultEOL===1?0:1),i&&i.detectIndentation===n.detectIndentation&&i.insertSpaces===n.insertSpaces&&i.tabSize===n.tabSize&&i.indentSize===n.indentSize&&i.trimAutoWhitespace===n.trimAutoWhitespace&&ot(i.bracketPairColorizationOptions,n.bracketPairColorizationOptions)||(n.detectIndentation?(t.detectIndentation(n.insertSpaces,n.tabSize),t.updateOptions({trimAutoWhitespace:n.trimAutoWhitespace,bracketColorizationOptions:n.bracketPairColorizationOptions})):t.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.indentSize,trimAutoWhitespace:n.trimAutoWhitespace,bracketColorizationOptions:n.bracketPairColorizationOptions}))};n.prototype._insertDisposedModel=function(t){this._disposedModels.set(CH(t.uri),t),this._disposedModelsHeapSize+=t.heapSize};n.prototype._removeDisposedModel=function(t){var n=this._disposedModels.get(CH(t));return n&&(this._disposedModelsHeapSize-=n.heapSize),this._disposedModels.delete(CH(t)),n};n.prototype._ensureDisposedModelsHeapSize=function(t){if(this._disposedModelsHeapSize>t){var n=[];for(this._disposedModels.forEach((function(t){t.sharesUndoRedoStack||n.push(t)})),n.sort((function(t,n){return t.time-n.time}));n.length>0&&this._disposedModelsHeapSize>t;){var i=n.shift();this._removeDisposedModel(i.uri),i.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(i.initialUndoRedoSnapshot)}}};n.prototype._createModelData=function(t,n,i,r){var e=this;var o=this.getCreationOptions(n,i,r),s=new EM(t,n,o,i,this._undoRedoService,this._languageService,this._languageConfigurationService);if(i&&this._disposedModels.has(CH(i))){var u=this._removeDisposedModel(i),a=this._undoRedoService.getElements(i),h=this._getSHA1Computer(),c=!!h.canComputeSHA1(s)&&h.computeSHA1(s)===u.sha1;if(c||u.sharesUndoRedoStack){for(var f=0,l=a.past;f<l.length;f++){var v=l[f];XO(v)&&v.matchesResource(i)&&v.setModel(s)}for(var d=0,g=a.future;d<g.length;d++){var v=g[d];XO(v)&&v.matchesResource(i)&&v.setModel(s)}this._undoRedoService.setElementsValidFlag(i,!0,(function(t){return XO(t)&&t.matchesResource(i)})),c&&(s._overwriteVersionId(u.versionId),s._overwriteAlternativeVersionId(u.alternativeVersionId),s._overwriteInitialUndoRedoSnapshot(u.initialUndoRedoSnapshot))}else u.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(u.initialUndoRedoSnapshot)}var p=CH(s.uri);if(this._models[p])throw new Error("ModelService: Cannot add model because it already exists!");var w=new SH(s,(function(t){return e._onWillDispose(t)}),(function(t,n){return e._onDidChangeLanguage(t,n)}));return this._models[p]=w,w};n.prototype.createModel=function(t,n,i,r){if(r===void 0){r=!1}var e;return e=n?this._createModelData(t,n,i,r):this._createModelData(t,dv,i,r),this._onModelAdded.fire(e.model),e.model};n.prototype.getModels=function(){var t=[],n=Object.keys(this._models);for(var i=0,r=n.length;i<r;i++){var e=n[i];t.push(this._models[e].model)}return t};n.prototype.getModel=function(t){var n=CH(t),i=this._models[n];return i?i.model:null};n.prototype._schemaShouldMaintainUndoRedoElements=function(t){return t.scheme===Uu.file||t.scheme===Uu.vscodeRemote||t.scheme===Uu.vscodeUserData||t.scheme===Uu.vscodeNotebookCell||t.scheme==="fake-fs"};n.prototype._onWillDispose=function(t){var i=CH(t.uri),r=this._models[i],e=this._undoRedoService.getUriComparisonKey(t.uri)!==t.uri.toString();var o=!1,s=0;if(e||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(t.uri)){var u=this._undoRedoService.getElements(t.uri);if(u.past.length>0||u.future.length>0){for(var a=0,h=u.past;a<h.length;a++){var c=h[a];XO(c)&&c.matchesResource(t.uri)&&(o=!0,s+=c.heapSize(t.uri),c.setModel(t.uri))}for(var f=0,l=u.future;f<l.length;f++){var c=l[f];XO(c)&&c.matchesResource(t.uri)&&(o=!0,s+=c.heapSize(t.uri),c.setModel(t.uri))}}}var v=n.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,d=this._getSHA1Computer();if(o)if(e||!(s>v)&&d.canComputeSHA1(t))this._ensureDisposedModelsHeapSize(v-s),this._undoRedoService.setElementsValidFlag(t.uri,!1,(function(n){return XO(n)&&n.matchesResource(t.uri)})),this._insertDisposedModel(new AH(t.uri,r.model.getInitialUndoRedoSnapshot(),Date.now(),e,s,d.computeSHA1(t),t.getVersionId(),t.getAlternativeVersionId()));else{var u=r.model.getInitialUndoRedoSnapshot();u!==null&&this._undoRedoService.restoreSnapshot(u)}else if(!e){var u=r.model.getInitialUndoRedoSnapshot();u!==null&&this._undoRedoService.restoreSnapshot(u)}delete this._models[i],r.dispose(),delete this._modelCreationOptionsByLanguageAndResource[t.getLanguageId()+t.uri],this._onModelRemoved.fire(t)};n.prototype._onDidChangeLanguage=function(t,i){var r=i.oldLanguage,e=t.getLanguageId(),o=this.getCreationOptions(r,t.uri,t.isForSimpleWidget),s=this.getCreationOptions(e,t.uri,t.isForSimpleWidget);n._setModelOptionsForModel(t,s,o),this._onModelModeChanged.fire({model:t,oldLanguageId:r})};n.prototype._getSHA1Computer=function(){return new EH};return n}(ci);OH.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520,OH=_H=kH([xH(0,Kl),xH(1,Xg),xH(2,mM),xH(3,Zl),xH(4,xv)],OH);var EH=function(){function t(){}t.prototype.canComputeSHA1=function(n){return n.getValueLength()<=t.MAX_MODEL_SIZE};t.prototype.computeSHA1=function(t){var n=new ra,i=t.createSnapshot();var r;for(;r=i.read();)n.update(r);return n.digest()};return t}();var MH;EH.MAX_MODEL_SIZE=10485760,function(t){t[t.PRESERVE=0]="PRESERVE",t[t.LAST=1]="LAST"}(MH||(MH={}));var FH="workbench.contributions.quickaccess";of.add(FH,new(function(){function t(){this.providers=[],this.defaultProvider=void 0}t.prototype.registerQuickAccessProvider=function(t){var n=this;return t.prefix.length===0?this.defaultProvider=t:this.providers.push(t),this.providers.sort((function(t,n){return n.prefix.length-t.prefix.length})),ai((function(){n.providers.splice(n.providers.indexOf(t),1),n.defaultProvider===t&&(n.defaultProvider=void 0)}))};t.prototype.getQuickAccessProviders=function(){return b(__spreadArray([this.defaultProvider],this.providers,true))};t.prototype.getQuickAccessProvider=function(t){return t&&this.providers.find((function(n){return t.startsWith(n.prefix)}))||void 0||this.defaultProvider};return t}()));var LH={ctrlCmd:!1,alt:!1};var jH,RH;(function(t){t[t.Blur=1]="Blur",t[t.Gesture=2]="Gesture",t[t.Other=3]="Other"})(jH||(jH={})),function(t){t[t.NONE=0]="NONE",t[t.FIRST=1]="FIRST",t[t.SECOND=2]="SECOND",t[t.LAST=3]="LAST"}(RH||(RH={}));var TH=Zh("quickInputService");var IH=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},BH=function(t,n){return function(i,r){n(i,r,t)}};var NH=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.quickInputService=n,r.instantiationService=i,r.registry=of.as(FH),r.mapProviderToDescriptor=new Map,r.lastAcceptedPickerValues=new Map,r.visibleQuickAccess=void 0;return r}n.prototype.show=function(t,n){if(t===void 0){t=""}this.doShowOrPick(t,!1,n)};n.prototype.doShowOrPick=function(t,n,i){var r,e,o;var s=this.getOrInstantiateProvider(t),u=s[0],a=s[1],h=this.visibleQuickAccess,c=h==null?void 0:h.descriptor;if(h&&a&&c===a)return t===a.prefix||i!=null&&i.preserveValue||(h.picker.value=t),void this.adjustValueSelection(h.picker,a,i);if(a&&!(i!=null&&i.preserveValue)){var f=void 0;if(h&&c&&c!==a){var l=h.value.substr(c.prefix.length);l&&(f="".concat(a.prefix).concat(l))}if(!f){var l=u==null?void 0:u.defaultFilterValue;l===MH.LAST?f=this.lastAcceptedPickerValues.get(a):typeof l=="string"&&(f="".concat(a.prefix).concat(l))}typeof f=="string"&&(t=f)}var v=(r=h==null?void 0:h.picker)===null||r===void 0?void 0:r.valueSelection,d=(e=h==null?void 0:h.picker)===null||e===void 0?void 0:e.value,g=new hi,p=g.add(this.quickInputService.createQuickPick());var w;p.value=t,this.adjustValueSelection(p,a,i),p.placeholder=a==null?void 0:a.placeholder,p.quickNavigate=i==null?void 0:i.quickNavigateConfiguration,p.hideInput=!!p.quickNavigate&&!h,(typeof(i==null?void 0:i.itemActivation)=="number"||i!=null&&i.quickNavigateConfiguration)&&(p.itemActivation=(o=i==null?void 0:i.itemActivation)!==null&&o!==void 0?o:RH.SECOND),p.contextKey=a==null?void 0:a.contextKey,p.filterValue=function(t){return t.substring(a?a.prefix.length:0)},n&&(w=new Ws,g.add(wi.once(p.onWillAccept)((function(t){t.veto(),p.hide()})))),g.add(this.registerPickerListeners(p,u,a,t,i==null?void 0:i.providerOptions));var m=g.add(new ji);return u&&g.add(u.provide(p,m.token,i==null?void 0:i.providerOptions)),wi.once(p.onDidHide)((function(){p.selectedItems.length===0&&m.cancel(),g.dispose(),w==null||w.complete(p.selectedItems.slice(0))})),p.show(),v&&d===t&&(p.valueSelection=v),n?w==null?void 0:w.p:void 0};n.prototype.adjustValueSelection=function(t,n,i){var r;var e;e=i!=null&&i.preserveValue?[t.value.length,t.value.length]:[(r=n==null?void 0:n.prefix.length)!==null&&r!==void 0?r:0,t.value.length],t.valueSelection=e};n.prototype.registerPickerListeners=function(t,n,i,r,e){var o=this;var s=new hi,u=this.visibleQuickAccess={picker:t,descriptor:i,value:r};return s.add(ai((function(){u===o.visibleQuickAccess&&(o.visibleQuickAccess=void 0)}))),s.add(t.onDidChangeValue((function(t){var i=o.getOrInstantiateProvider(t)[0];i!==n?o.show(t,{preserveValue:!0,providerOptions:e}):u.value=t}))),i&&s.add(t.onDidAccept((function(){o.lastAcceptedPickerValues.set(i,t.value)}))),s};n.prototype.getOrInstantiateProvider=function(t){var n=this.registry.getQuickAccessProvider(t);if(!n)return[void 0,void 0];var i=this.mapProviderToDescriptor.get(n);return i||(i=this.instantiationService.createInstance(n.ctor),this.mapProviderToDescriptor.set(n,i)),[i,n]};return n}(ci);NH=IH([BH(0,TH),BH(1,Jh)],NH);var PH=function(t){__extends(n,t);function n(n){var i;var r=this;var e;r=t.call(this)||this,r._onChange=r._register(new ki),r.onChange=r._onChange.event,r._onKeyDown=r._register(new ki),r.onKeyDown=r._onKeyDown.event,r._opts=n,r._checked=r._opts.isChecked;var o=["monaco-custom-toggle"];r._opts.icon&&(r._icon=r._opts.icon,o.push.apply(o,uc.asClassNameArray(r._icon))),r._opts.actionClassName&&o.push.apply(o,r._opts.actionClassName.split(" ")),r._checked&&o.push("checked"),r.domNode=document.createElement("div"),r._hover=r._register(DN((e=n.hoverDelegate)!==null&&e!==void 0?e:kN("mouse"),r.domNode,r._opts.title)),(i=r.domNode.classList).add.apply(i,o),r._opts.notFocusable||(r.domNode.tabIndex=0),r.domNode.setAttribute("role","checkbox"),r.domNode.setAttribute("aria-checked",String(r._checked)),r.domNode.setAttribute("aria-label",r._opts.title),r.applyStyles(),r.onclick(r.domNode,(function(t){r.enabled&&(r.checked=!r._checked,r._onChange.fire(!1),t.preventDefault())})),r._register(r.ignoreGesture(r.domNode)),r.onkeydown(r.domNode,(function(t){if(t.keyCode===10||t.keyCode===3)return r.checked=!r._checked,r._onChange.fire(!0),t.preventDefault(),void t.stopPropagation();r._onKeyDown.fire(t)}));return r}Object.defineProperty(n.prototype,"enabled",{get:function(){return this.domNode.getAttribute("aria-disabled")!=="true"},enumerable:false,configurable:true});n.prototype.focus=function(){this.domNode.focus()};Object.defineProperty(n.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()},enumerable:false,configurable:true});n.prototype.width=function(){return 22};n.prototype.applyStyles=function(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")};n.prototype.enable=function(){this.domNode.setAttribute("aria-disabled",String(!1))};n.prototype.disable=function(){this.domNode.setAttribute("aria-disabled",String(!0))};return n}(ik);var WH=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s};var HH=function(){function t(t){this.nodes=t}t.prototype.toString=function(){return this.nodes.map((function(t){return typeof t=="string"?t:t.label})).join("")};return t}();WH([Y_],HH.prototype,"toString",null);var zH=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi,UH={},KH=new ZT("quick-input-button-icon-");function VH(t,n,i){var r=t.iconClass||function(t){if(!t)return;var n;var i=t.dark.toString();return UH[i]?n=UH[i]:(n=KH.nextId(),rh(".".concat(n,", .hc-light .").concat(n),"background-image: ".concat(Ch(t.light||t.dark))),rh(".vs-dark .".concat(n,", .hc-black .").concat(n),"background-image: ".concat(Ch(t.dark))),UH[i]=n),n}(t.iconPath);return t.alwaysVisible&&(r=r?"".concat(r," always-visible"):"always-visible"),{id:n,label:"",tooltip:t.tooltip||"",class:r,enabled:!0,run:i}}function qH(t,n,i){gh(n);var r=function(t){var n=[];var i,r=0;for(;i=zH.exec(t);){i.index-r>0&&n.push(t.substring(r,i.index));var e=i[1],o=i[2],s=i[4];s?n.push({label:e,href:o,title:s}):n.push({label:e,href:o}),r=i.index+i[0].length}return r<t.length&&n.push(t.substring(r)),new HH(n)}(t);var e=0;var o=function(t){if(typeof t=="string")n.append.apply(n,RR(t));else{var r=t.title;!r&&t.href.startsWith("command:")?r=ht(0,"Click to execute command '{0}'",t.href.substring(8)):r||(r=t.href);var o=bh("a",{href:t.href,title:r,tabIndex:e++},t.label);o.style.textDecoration="underline";var s=function(n){hh(n)&&ch(n,!0),i.callback(t.href)},u=i.disposables.add(new Dk(o,ah.CLICK)).event,a=i.disposables.add(new Dk(o,ah.KEY_DOWN)).event,h=wi.chain(a,(function(t){return t.filter((function(t){var n=new ws(t);return n.equals(10)||n.equals(3)}))}));i.disposables.add(nk.addTarget(o));var c=i.disposables.add(new Dk(o,X_.Tap)).event;wi.any(u,c,h)(s,null,i.disposables),n.appendChild(o)}};for(var s=0,u=r.nodes;s<u.length;s++){var a=u[s];o(a)}}var GH=function(){function t(t,n){this.renderer=t,this.modelProvider=n}Object.defineProperty(t.prototype,"templateId",{get:function(){return this.renderer.templateId},enumerable:false,configurable:true});t.prototype.renderTemplate=function(t){return{data:this.renderer.renderTemplate(t),disposable:ci.None}};t.prototype.renderElement=function(t,n,i,r){var e=this;var o;if((o=i.disposable)===null||o===void 0||o.dispose(),!i.data)return;var s=this.modelProvider();if(s.isResolved(t))return this.renderer.renderElement(s.get(t),t,i.data,r);var u=new ji,a=s.resolve(t,u.token);i.disposable={dispose:function(){return u.cancel()}},this.renderer.renderPlaceholder(t,i.data),a.then((function(n){return e.renderer.renderElement(n,t,i.data,r)}))};t.prototype.disposeTemplate=function(t){t.disposable&&(t.disposable.dispose(),t.disposable=void 0),t.data&&(this.renderer.disposeTemplate(t.data),t.data=void 0)};return t}();var $H=function(){function t(t,n){this.modelProvider=t,this.accessibilityProvider=n}t.prototype.getWidgetAriaLabel=function(){return this.accessibilityProvider.getWidgetAriaLabel()};t.prototype.getAriaLabel=function(t){var n=this.modelProvider();return n.isResolved(t)?this.accessibilityProvider.getAriaLabel(n.get(t)):null};return t}();var JH=function(){function t(t,n,i,r,e){if(e===void 0){e={}}var o=this;var s=function(){return o.model},u=r.map((function(t){return new GH(t,s)}));this.list=new rW(t,n,i,u,function(t,n){return __assign(__assign({},n),{accessibilityProvider:n.accessibilityProvider&&new $H(t,n.accessibilityProvider)})}(s,e))}t.prototype.updateOptions=function(t){this.list.updateOptions(t)};t.prototype.getHTMLElement=function(){return this.list.getHTMLElement()};Object.defineProperty(t.prototype,"onDidFocus",{get:function(){return this.list.onDidFocus},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"widget",{get:function(){return this.list},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidDispose",{get:function(){return this.list.onDidDispose},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseDblClick",{get:function(){var t=this;return wi.map(this.list.onMouseDblClick,(function(n){var i=n.element,r=n.index,e=n.browserEvent;return{element:i===void 0?void 0:t._model.get(i),index:r,browserEvent:e}}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onPointer",{get:function(){var t=this;return wi.map(this.list.onPointer,(function(n){var i=n.element,r=n.index,e=n.browserEvent;return{element:i===void 0?void 0:t._model.get(i),index:r,browserEvent:e}}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeSelection",{get:function(){var t=this;return wi.map(this.list.onDidChangeSelection,(function(n){var i=n.elements,r=n.indexes,e=n.browserEvent;return{elements:i.map((function(n){return t._model.get(n)})),indexes:r,browserEvent:e}}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t,this.list.splice(0,this.list.length,S(t.length))},enumerable:false,configurable:true});t.prototype.getFocus=function(){return this.list.getFocus()};t.prototype.getSelection=function(){return this.list.getSelection()};t.prototype.getSelectedElements=function(){var t=this;return this.getSelection().map((function(n){return t.model.get(n)}))};t.prototype.style=function(t){this.list.style(t)};t.prototype.dispose=function(){this.list.dispose()};return t}();var ZH=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},QH;(function(t){t.North="north",t.South="south",t.East="east",t.West="west"})(QH||(QH={}));var YH=new ki,XH=new ki;var tz=function(){function t(t){this.el=t,this.disposables=new hi}Object.defineProperty(t.prototype,"onPointerMove",{get:function(){return this.disposables.add(new Dk(sa(this.el),"mousemove")).event},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onPointerUp",{get:function(){return this.disposables.add(new Dk(sa(this.el),"mouseup")).event},enumerable:false,configurable:true});t.prototype.dispose=function(){this.disposables.dispose()};return t}();ZH([Y_],tz.prototype,"onPointerMove",null),ZH([Y_],tz.prototype,"onPointerUp",null);var nz=function(){function t(t){this.el=t,this.disposables=new hi}Object.defineProperty(t.prototype,"onPointerMove",{get:function(){return this.disposables.add(new Dk(this.el,X_.Change)).event},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onPointerUp",{get:function(){return this.disposables.add(new Dk(this.el,X_.End)).event},enumerable:false,configurable:true});t.prototype.dispose=function(){this.disposables.dispose()};return t}();ZH([Y_],nz.prototype,"onPointerMove",null),ZH([Y_],nz.prototype,"onPointerUp",null);var iz=function(){function t(t){this.factory=t}Object.defineProperty(t.prototype,"onPointerMove",{get:function(){return this.factory.onPointerMove},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onPointerUp",{get:function(){return this.factory.onPointerUp},enumerable:false,configurable:true});t.prototype.dispose=function(){};return t}();ZH([Y_],iz.prototype,"onPointerMove",null),ZH([Y_],iz.prototype,"onPointerUp",null);var rz="pointer-events-disabled";var ez=function(t){__extends(n,t);function n(i,r,e){var o=this;o=t.call(this)||this,o.hoverDelay=300,o.hoverDelayer=o._register(new Os(o.hoverDelay)),o._state=3,o.onDidEnablementChange=o._register(new ki),o._onDidStart=o._register(new ki),o._onDidChange=o._register(new ki),o._onDidReset=o._register(new ki),o._onDidEnd=o._register(new ki),o.orthogonalStartSashDisposables=o._register(new hi),o.orthogonalStartDragHandleDisposables=o._register(new hi),o.orthogonalEndSashDisposables=o._register(new hi),o.orthogonalEndDragHandleDisposables=o._register(new hi),o.onDidStart=o._onDidStart.event,o.onDidChange=o._onDidChange.event,o.onDidReset=o._onDidReset.event,o.onDidEnd=o._onDidEnd.event,o.linkedSash=void 0,o.el=vh(i,bh(".monaco-sash")),e.orthogonalEdge&&o.el.classList.add("orthogonal-edge-".concat(e.orthogonalEdge)),Ft&&o.el.classList.add("mac");var s=o._register(new Dk(o.el,"mousedown")).event;o._register(s((function(t){return o.onPointerStart(t,new tz(i))}),o));var u=o._register(new Dk(o.el,"dblclick")).event;o._register(u(o.onPointerDoublePress,o));var a=o._register(new Dk(o.el,"mouseenter")).event;o._register(a((function(){return n.onMouseEnter(o)})));var h=o._register(new Dk(o.el,"mouseleave")).event;o._register(h((function(){return n.onMouseLeave(o)}))),o._register(nk.addTarget(o.el));var c=o._register(new Dk(o.el,X_.Start)).event;o._register(c((function(t){return o.onPointerStart(t,new nz(o.el))}),o));var f=o._register(new Dk(o.el,X_.Tap)).event;var l;o._register(f((function(t){if(l)return clearTimeout(l),l=void 0,void o.onPointerDoublePress(t);clearTimeout(l),l=setTimeout((function(){return l=void 0}),250)}),o)),typeof e.size=="number"?(o.size=e.size,e.orientation===0?o.el.style.width="".concat(o.size,"px"):o.el.style.height="".concat(o.size,"px")):(o.size=4,o._register(YH.event((function(t){o.size=t,o.layout()})))),o._register(XH.event((function(t){return o.hoverDelay=t}))),o.layoutProvider=r,o.orthogonalStartSash=e.orthogonalStartSash,o.orthogonalEndSash=e.orthogonalEndSash,o.orientation=e.orientation||0,o.orientation===1?(o.el.classList.add("horizontal"),o.el.classList.remove("vertical")):(o.el.classList.remove("horizontal"),o.el.classList.add("vertical")),o.el.classList.toggle("debug",!1),o.layout();return o}Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(t){this._state!==t&&(this.el.classList.toggle("disabled",t===0),this.el.classList.toggle("minimum",t===1),this.el.classList.toggle("maximum",t===2),this._state=t,this.onDidEnablementChange.fire(t))},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"orthogonalStartSash",{get:function(){return this._orthogonalStartSash},set:function(t){var i=this;if(this._orthogonalStartSash!==t){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),t){var r=function(r){i.orthogonalStartDragHandleDisposables.clear(),r!==0&&(i._orthogonalStartDragHandle=vh(i.el,bh(".orthogonal-drag-handle.start")),i.orthogonalStartDragHandleDisposables.add(ai((function(){return i._orthogonalStartDragHandle.remove()}))),i.orthogonalStartDragHandleDisposables.add(new Dk(i._orthogonalStartDragHandle,"mouseenter")).event((function(){return n.onMouseEnter(t)}),void 0,i.orthogonalStartDragHandleDisposables),i.orthogonalStartDragHandleDisposables.add(new Dk(i._orthogonalStartDragHandle,"mouseleave")).event((function(){return n.onMouseLeave(t)}),void 0,i.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(t.onDidEnablementChange.event(r,this)),r(t.state)}this._orthogonalStartSash=t}},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"orthogonalEndSash",{get:function(){return this._orthogonalEndSash},set:function(t){var i=this;if(this._orthogonalEndSash!==t){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),t){var r=function(r){i.orthogonalEndDragHandleDisposables.clear(),r!==0&&(i._orthogonalEndDragHandle=vh(i.el,bh(".orthogonal-drag-handle.end")),i.orthogonalEndDragHandleDisposables.add(ai((function(){return i._orthogonalEndDragHandle.remove()}))),i.orthogonalEndDragHandleDisposables.add(new Dk(i._orthogonalEndDragHandle,"mouseenter")).event((function(){return n.onMouseEnter(t)}),void 0,i.orthogonalEndDragHandleDisposables),i.orthogonalEndDragHandleDisposables.add(new Dk(i._orthogonalEndDragHandle,"mouseleave")).event((function(){return n.onMouseLeave(t)}),void 0,i.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(t.onDidEnablementChange.event(r,this)),r(t.state)}this._orthogonalEndSash=t}},enumerable:false,configurable:true});n.prototype.onPointerStart=function(t,n){var i=this;ch(t);var r=!1;if(!t.__orthogonalSashEvent){var e=this.getOrthogonalSash(t);e&&(r=!0,t.__orthogonalSashEvent=!0,e.onPointerStart(t,new iz(n)))}if(this.linkedSash&&!t.__linkedSashEvent&&(t.__linkedSashEvent=!0,this.linkedSash.onPointerStart(t,new iz(n))),!this.state)return;var o=this.el.ownerDocument.getElementsByTagName("iframe");for(var s=0,u=o;s<u.length;s++){var e=u[s];e.classList.add(rz)}var a=t.pageX,h=t.pageY,c=t.altKey,f={startX:a,currentX:a,startY:h,currentY:h,altKey:c};this.el.classList.add("active"),this._onDidStart.fire(f);var l=Qa(this.el),v=function(){var t="";t=r?"all-scroll":i.orientation===1?i.state===1?"s-resize":i.state===2?"n-resize":Ft?"row-resize":"ns-resize":i.state===1?"e-resize":i.state===2?"w-resize":Ft?"col-resize":"ew-resize",l.textContent="* { cursor: ".concat(t," !important; }")},d=new hi;v(),r||this.onDidEnablementChange.event(v,null,d),n.onPointerMove((function(t){ch(t,!1);var n={startX:a,currentX:t.pageX,startY:h,currentY:t.pageY,altKey:c};i._onDidChange.fire(n)}),null,d),n.onPointerUp((function(t){ch(t,!1),i.el.removeChild(l),i.el.classList.remove("active"),i._onDidEnd.fire(),d.dispose();for(var n=0,r=o;n<r.length;n++){var e=r[n];e.classList.remove(rz)}}),null,d),d.add(n)};n.prototype.onPointerDoublePress=function(t){var n=this.getOrthogonalSash(t);n&&n._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()};n.onMouseEnter=function(t,i){if(i===void 0){i=!1}t.el.classList.contains("active")?(t.hoverDelayer.cancel(),t.el.classList.add("hover")):t.hoverDelayer.trigger((function(){return t.el.classList.add("hover")}),t.hoverDelay).then(void 0,(function(){})),!i&&t.linkedSash&&n.onMouseEnter(t.linkedSash,!0)};n.onMouseLeave=function(t,i){if(i===void 0){i=!1}t.hoverDelayer.cancel(),t.el.classList.remove("hover"),!i&&t.linkedSash&&n.onMouseLeave(t.linkedSash,!0)};n.prototype.clearSashHoverState=function(){n.onMouseLeave(this)};n.prototype.layout=function(){if(this.orientation===0){var t=this.layoutProvider;this.el.style.left=t.getVerticalSashLeft(this)-this.size/2+"px",t.getVerticalSashTop&&(this.el.style.top=t.getVerticalSashTop(this)+"px"),t.getVerticalSashHeight&&(this.el.style.height=t.getVerticalSashHeight(this)+"px")}else{var t=this.layoutProvider;this.el.style.top=t.getHorizontalSashTop(this)-this.size/2+"px",t.getHorizontalSashLeft&&(this.el.style.left=t.getHorizontalSashLeft(this)+"px"),t.getHorizontalSashWidth&&(this.el.style.width=t.getHorizontalSashWidth(this)+"px")}};n.prototype.getOrthogonalSash=function(t){var n;var i=(n=t.initialTarget)!==null&&n!==void 0?n:t.target;if(i&&i instanceof HTMLElement)return i.classList.contains("orthogonal-drag-handle")?i.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash:void 0};n.prototype.dispose=function(){t.prototype.dispose.call(this),this.el.remove()};return n}(ci);var oz={separatorBorder:Ig.transparent};var sz=function(){function t(t,n,i,r){this.container=t,this.view=n,this.disposable=r,this._cachedVisibleSize=void 0,typeof i=="number"?(this._size=i,this._cachedVisibleSize=void 0,t.classList.add("visible")):(this._size=0,this._cachedVisibleSize=i.cachedVisibleSize)}Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return this._cachedVisibleSize===void 0},enumerable:false,configurable:true});t.prototype.setVisible=function(t,n){var i,r;if(t!==this.visible){t?(this.size=mj(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof n=="number"?n:this.size,this.size=0),this.container.classList.toggle("visible",t);try{(r=(i=this.view).setVisible)===null||r===void 0||r.call(i,t)}catch(t){console.error("Splitview: Failed to set visible view"),console.error(t)}}};Object.defineProperty(t.prototype,"minimumSize",{get:function(){return this.visible?this.view.minimumSize:0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"viewMinimumSize",{get:function(){return this.view.minimumSize},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"maximumSize",{get:function(){return this.visible?this.view.maximumSize:0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"viewMaximumSize",{get:function(){return this.view.maximumSize},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"priority",{get:function(){return this.view.priority},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"proportionalLayout",{get:function(){var t;return(t=this.view.proportionalLayout)===null||t===void 0||t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"snap",{get:function(){return!!this.view.snap},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"enabled",{set:function(t){this.container.style.pointerEvents=t?"":"none"},enumerable:false,configurable:true});t.prototype.layout=function(t,n){this.layoutContainer(t);try{this.view.layout(this.size,t,n)}catch(t){console.error("Splitview: Failed to layout view"),console.error(t)}};t.prototype.dispose=function(){this.disposable.dispose()};return t}();var uz=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.layoutContainer=function(t){this.container.style.top="".concat(t,"px"),this.container.style.height="".concat(this.size,"px")};return n}(sz);var az=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.layoutContainer=function(t){this.container.style.left="".concat(t,"px"),this.container.style.width="".concat(this.size,"px")};return n}(sz);var hz,cz;(function(t){t[t.Idle=0]="Idle",t[t.Busy=1]="Busy"})(hz||(hz={})),function(t){t.Distribute={type:"distribute"},t.Split=function(t){return{type:"split",index:t}},t.Auto=function(t){return{type:"auto",index:t}},t.Invisible=function(t){return{type:"invisible",cachedVisibleSize:t}}}(cz||(cz={}));var fz=function(t){__extends(n,t);function n(n,i){if(i===void 0){i={}}var r=this;var e,o,s,u,a;r=t.call(this)||this,r.size=0,r._contentSize=0,r.proportions=void 0,r.viewItems=[],r.sashItems=[],r.state=hz.Idle,r._onDidSashChange=r._register(new ki),r._onDidSashReset=r._register(new ki),r._startSnappingEnabled=!0,r._endSnappingEnabled=!0,r.onDidSashChange=r._onDidSashChange.event,r.onDidSashReset=r._onDidSashReset.event,r.orientation=(e=i.orientation)!==null&&e!==void 0?e:0,r.inverseAltBehavior=(o=i.inverseAltBehavior)!==null&&o!==void 0&&o,r.proportionalLayout=(s=i.proportionalLayout)===null||s===void 0||s,r.getSashOrthogonalSize=i.getSashOrthogonalSize,r.el=document.createElement("div"),r.el.classList.add("monaco-split-view2"),r.el.classList.add(r.orientation===0?"vertical":"horizontal"),n.appendChild(r.el),r.sashContainer=vh(r.el,bh(".sash-container")),r.viewContainer=bh(".split-view-container"),r.scrollable=r._register(new fk({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:function(t){return Sa(sa(r.el),t)}})),r.scrollableElement=r._register(new bk(r.viewContainer,{vertical:r.orientation===0?(u=i.scrollbarVisibility)!==null&&u!==void 0?u:1:2,horizontal:r.orientation===1?(a=i.scrollbarVisibility)!==null&&a!==void 0?a:1:2},r.scrollable));var h=r._register(new Dk(r.viewContainer,"scroll")).event;r._register(h((function(t){var n=r.scrollableElement.getScrollPosition(),i=Math.abs(r.viewContainer.scrollLeft-n.scrollLeft)<=1?void 0:r.viewContainer.scrollLeft,e=Math.abs(r.viewContainer.scrollTop-n.scrollTop)<=1?void 0:r.viewContainer.scrollTop;i===void 0&&e===void 0||r.scrollableElement.setScrollPosition({scrollLeft:i,scrollTop:e})}))),r.onDidScroll=r.scrollableElement.onScroll,r._register(r.onDidScroll((function(t){t.scrollTopChanged&&(r.viewContainer.scrollTop=t.scrollTop),t.scrollLeftChanged&&(r.viewContainer.scrollLeft=t.scrollLeft)}))),vh(r.el,r.scrollableElement.getDomNode()),r.style(i.styles||oz),i.descriptor&&(r.size=i.descriptor.size,i.descriptor.views.forEach((function(t,n){var i=G(t.visible)||t.visible?t.size:{type:"invisible",cachedVisibleSize:t.size},e=t.view;r.doAddView(e,i,n,!0)})),r._contentSize=r.viewItems.reduce((function(t,n){return t+n.size}),0),r.saveProportions());return r}Object.defineProperty(n.prototype,"orthogonalStartSash",{get:function(){return this._orthogonalStartSash},set:function(t){for(var n=0,i=this.sashItems;n<i.length;n++){var r=i[n];r.sash.orthogonalStartSash=t}this._orthogonalStartSash=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"orthogonalEndSash",{get:function(){return this._orthogonalEndSash},set:function(t){for(var n=0,i=this.sashItems;n<i.length;n++){var r=i[n];r.sash.orthogonalEndSash=t}this._orthogonalEndSash=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"startSnappingEnabled",{get:function(){return this._startSnappingEnabled},set:function(t){this._startSnappingEnabled!==t&&(this._startSnappingEnabled=t,this.updateSashEnablement())},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"endSnappingEnabled",{get:function(){return this._endSnappingEnabled},set:function(t){this._endSnappingEnabled!==t&&(this._endSnappingEnabled=t,this.updateSashEnablement())},enumerable:false,configurable:true});n.prototype.style=function(t){t.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",t.separatorBorder.toString()))};n.prototype.addView=function(t,n,i,r){if(i===void 0){i=this.viewItems.length}this.doAddView(t,n,i,r)};n.prototype.layout=function(t,n){var i=this;var r=Math.max(this.size,this._contentSize);if(this.size=t,this.layoutContext=n,this.proportions){var e=0;for(var o=0;o<this.viewItems.length;o++){var s=this.viewItems[o],u=this.proportions[o];typeof u=="number"?e+=u:t-=s.size}for(var o=0;o<this.viewItems.length;o++){var s=this.viewItems[o],u=this.proportions[o];typeof u=="number"&&e>0&&(s.size=mj(Math.round(u*t/e),s.minimumSize,s.maximumSize))}}else{var e=S(this.viewItems.length),o=e.filter((function(t){return i.viewItems[t].priority===1})),s=e.filter((function(t){return i.viewItems[t].priority===2}));this.resize(this.viewItems.length-1,t-r,void 0,o,s)}this.distributeEmptySpace(),this.layoutViews()};n.prototype.saveProportions=function(){var t=this;this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map((function(n){return n.proportionalLayout&&n.visible?n.size/t._contentSize:void 0})))};n.prototype.onSashStart=function(t){var n=this;var i=t.sash,r=t.start,e=t.alt;for(var o=0,s=this.viewItems;o<s.length;o++){var u=s[o];u.enabled=!1}var a=this.sashItems.findIndex((function(t){return t.sash===i})),h=ui(ma(this.el.ownerDocument.body,"keydown",(function(t){return c(n.sashDragState.current,t.altKey)})),ma(this.el.ownerDocument.body,"keyup",(function(){return c(n.sashDragState.current,!1)}))),c=function(t,i){var r=n.viewItems.map((function(t){return t.size}));var e,o,s=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(n.inverseAltBehavior&&(i=!i),i)if(a===n.sashItems.length-1){var c=n.viewItems[a];s=(c.minimumSize-c.size)/2,u=(c.maximumSize-c.size)/2}else{var c=n.viewItems[a+1];s=(c.size-c.maximumSize)/2,u=(c.size-c.minimumSize)/2}if(!i){var c=S(a,-1),f=S(a+1,n.viewItems.length),l=c.reduce((function(t,i){return t+(n.viewItems[i].minimumSize-r[i])}),0),v=c.reduce((function(t,i){return t+(n.viewItems[i].viewMaximumSize-r[i])}),0),d=f.length===0?Number.POSITIVE_INFINITY:f.reduce((function(t,i){return t+(r[i]-n.viewItems[i].minimumSize)}),0),g=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((function(t,i){return t+(r[i]-n.viewItems[i].viewMaximumSize)}),0),p=Math.max(l,g),w=Math.min(d,v),m=n.findFirstSnapIndex(c),b=n.findFirstSnapIndex(f);if(typeof m=="number"){var y=n.viewItems[m],_=Math.floor(y.viewMinimumSize/2);e={index:m,limitDelta:y.visible?p-_:p+_,size:y.size}}if(typeof b=="number"){var y=n.viewItems[b],_=Math.floor(y.viewMinimumSize/2);o={index:b,limitDelta:y.visible?w+_:w-_,size:y.size}}}n.sashDragState={start:t,current:t,index:a,sizes:r,minDelta:s,maxDelta:u,alt:i,snapBefore:e,snapAfter:o,disposable:h}};c(r,e)};n.prototype.onSashChange=function(t){var n=t.current;var i=this.sashDragState,r=i.index,e=i.start,o=i.sizes,s=i.alt,u=i.minDelta,a=i.maxDelta,h=i.snapBefore,c=i.snapAfter;this.sashDragState.current=n;var f=n-e,l=this.resize(r,f,o,void 0,void 0,u,a,h,c);if(s){var v=r===this.sashItems.length-1,d=this.viewItems.map((function(t){return t.size})),g=v?r:r+1,p=this.viewItems[g],w=p.size-p.maximumSize,m=p.size-p.minimumSize,b=v?r-1:r+1;this.resize(b,-l,d,void 0,void 0,w,m)}this.distributeEmptySpace(),this.layoutViews()};n.prototype.onSashEnd=function(t){this._onDidSashChange.fire(t),this.sashDragState.disposable.dispose(),this.saveProportions();for(var n=0,i=this.viewItems;n<i.length;n++){var r=i[n];r.enabled=!0}};n.prototype.onViewChange=function(t,n){var i=this.viewItems.indexOf(t);i<0||i>=this.viewItems.length||(n=mj(n=typeof n=="number"?n:t.size,t.minimumSize,t.maximumSize),this.inverseAltBehavior&&i>0?(this.resize(i-1,Math.floor((t.size-n)/2)),this.distributeEmptySpace(),this.layoutViews()):(t.size=n,this.relayout([i],void 0)))};n.prototype.resizeView=function(t,n){var i=this;if(!(t<0||t>=this.viewItems.length)){if(this.state!==hz.Idle)throw new Error("Cant modify splitview");this.state=hz.Busy;try{var r=S(this.viewItems.length).filter((function(n){return n!==t})),e=__spreadArray(__spreadArray([],r.filter((function(t){return i.viewItems[t].priority===1})),true),[t],false),o=r.filter((function(t){return i.viewItems[t].priority===2})),s=this.viewItems[t];n=mj(n=Math.round(n),s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=n,this.relayout(e,o)}finally{this.state=hz.Idle}}};n.prototype.distributeViewSizes=function(){var t=this;var n=[];var i=0;for(var r=0,e=this.viewItems;r<e.length;r++){var o=e[r];o.maximumSize-o.minimumSize>0&&(n.push(o),i+=o.size)}var s=Math.floor(i/n.length);for(var u=0,a=n;u<a.length;u++){var o=a[u];o.size=mj(s,o.minimumSize,o.maximumSize)}var h=S(this.viewItems.length),c=h.filter((function(n){return t.viewItems[n].priority===1})),f=h.filter((function(n){return t.viewItems[n].priority===2}));this.relayout(c,f)};n.prototype.getViewSize=function(t){return t<0||t>=this.viewItems.length?-1:this.viewItems[t].size};n.prototype.doAddView=function(t,n,i,r){var e=this;if(i===void 0){i=this.viewItems.length}if(this.state!==hz.Idle)throw new Error("Cant modify splitview");this.state=hz.Busy;try{var o=bh(".split-view-view");i===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(i));var s=t.onDidChange((function(t){return e.onViewChange(h,t)})),u=ui(s,ai((function(){return e.viewContainer.removeChild(o)})));var a=void 0;typeof n=="number"?a=n:(n.type==="auto"&&(n=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:n.index}),a=n.type==="split"?this.getViewSize(n.index)/2:n.type==="invisible"?{cachedVisibleSize:n.cachedVisibleSize}:t.minimumSize);var h=this.orientation===0?new uz(o,t,a,u):new az(o,t,a,u);if(this.viewItems.splice(i,0,h),this.viewItems.length>1){var c={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new ez(this.sashContainer,{getHorizontalSashTop:function(t){return e.getSashPosition(t)},getHorizontalSashWidth:this.getSashOrthogonalSize},__assign(__assign({},c),{orientation:1})):new ez(this.sashContainer,{getVerticalSashLeft:function(t){return e.getSashPosition(t)},getVerticalSashHeight:this.getSashOrthogonalSize},__assign(__assign({},c),{orientation:0})),l=this.orientation===0?function(t){return{sash:f,start:t.startY,current:t.currentY,alt:t.altKey}}:function(t){return{sash:f,start:t.startX,current:t.currentX,alt:t.altKey}},v=wi.map(f.onDidStart,l)(this.onSashStart,this),d=wi.map(f.onDidChange,l)(this.onSashChange,this),g=wi.map(f.onDidEnd,(function(){return e.sashItems.findIndex((function(t){return t.sash===f}))})),p=g(this.onSashEnd,this),w=f.onDidReset((function(){var t=e.sashItems.findIndex((function(t){return t.sash===f})),n=S(t,-1),i=S(t+1,e.viewItems.length),r=e.findFirstSnapIndex(n),o=e.findFirstSnapIndex(i);(typeof r!="number"||e.viewItems[r].visible)&&(typeof o!="number"||e.viewItems[o].visible)&&e._onDidSashReset.fire(t)})),m=ui(v,d,p,w,f),b={sash:f,disposable:m};this.sashItems.splice(i-1,0,b)}var y=void 0;o.appendChild(t.element),typeof n!="number"&&n.type==="split"&&(y=[n.index]),r||this.relayout([i],y),r||typeof n=="number"||n.type!=="distribute"||this.distributeViewSizes()}finally{this.state=hz.Idle}};n.prototype.relayout=function(t,n){var i=this.viewItems.reduce((function(t,n){return t+n.size}),0);this.resize(this.viewItems.length-1,this.size-i,void 0,t,n),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()};n.prototype.resize=function(t,n,i,r,e,o,s,u,a){var h=this;if(i===void 0){i=this.viewItems.map((function(t){return t.size}))}if(o===void 0){o=Number.NEGATIVE_INFINITY}if(s===void 0){s=Number.POSITIVE_INFINITY}if(t<0||t>=this.viewItems.length)return 0;var c=S(t,-1),f=S(t+1,this.viewItems.length);if(e)for(var l=0,v=e;l<v.length;l++){var d=v[l];A(c,d),A(f,d)}if(r)for(var g=0,p=r;g<p.length;g++){var d=p[g];O(c,d),O(f,d)}var w=c.map((function(t){return h.viewItems[t]})),m=c.map((function(t){return i[t]})),b=f.map((function(t){return h.viewItems[t]})),y=f.map((function(t){return i[t]})),_=c.reduce((function(t,n){return t+(h.viewItems[n].minimumSize-i[n])}),0),k=c.reduce((function(t,n){return t+(h.viewItems[n].maximumSize-i[n])}),0),x=f.length===0?Number.POSITIVE_INFINITY:f.reduce((function(t,n){return t+(i[n]-h.viewItems[n].minimumSize)}),0),C=f.length===0?Number.NEGATIVE_INFINITY:f.reduce((function(t,n){return t+(i[n]-h.viewItems[n].maximumSize)}),0),D=Math.max(_,C,o),E=Math.min(x,k,s);var M=!1;if(u){var d=this.viewItems[u.index],F=n>=u.limitDelta;M=F!==d.visible,d.setVisible(F,u.size)}if(!M&&a){var d=this.viewItems[a.index],F=n<a.limitDelta;M=F!==d.visible,d.setVisible(F,a.size)}if(M)return this.resize(t,n,i,r,e,o,s);for(var d=0,F=n=mj(n,D,E);d<w.length;d++){var L=w[d],j=mj(m[d]+F,L.minimumSize,L.maximumSize);F-=j-m[d],L.size=j}for(var d=0,F=n;d<b.length;d++){var L=b[d],j=mj(y[d]-F,L.minimumSize,L.maximumSize);F+=j-y[d],L.size=j}return n};n.prototype.distributeEmptySpace=function(t){var n=this;var i=this.viewItems.reduce((function(t,n){return t+n.size}),0);var r=this.size-i;var e=S(this.viewItems.length-1,-1),o=e.filter((function(t){return n.viewItems[t].priority===1})),s=e.filter((function(t){return n.viewItems[t].priority===2}));for(var u=0,a=s;u<a.length;u++){var h=a[u];A(e,h)}for(var c=0,f=o;c<f.length;c++){var h=f[c];O(e,h)}typeof t=="number"&&O(e,t);for(var h=0;r!==0&&h<e.length;h++){var l=this.viewItems[e[h]],v=mj(l.size+r,l.minimumSize,l.maximumSize);r-=v-l.size,l.size=v}};n.prototype.layoutViews=function(){this._contentSize=this.viewItems.reduce((function(t,n){return t+n.size}),0);var t=0;for(var n=0,i=this.viewItems;n<i.length;n++){var r=i[n];r.layout(t,this.layoutContext),t+=r.size}this.sashItems.forEach((function(t){return t.sash.layout()})),this.updateSashEnablement(),this.updateScrollableElement()};n.prototype.updateScrollableElement=function(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})};n.prototype.updateSashEnablement=function(){var t=!1;var n=this.viewItems.map((function(n){return t=n.size-n.minimumSize>0||t}));t=!1;var i=this.viewItems.map((function(n){return t=n.maximumSize-n.size>0||t})),r=__spreadArray([],this.viewItems,true).reverse();t=!1;var e=r.map((function(n){return t=n.size-n.minimumSize>0||t})).reverse();t=!1;var o=r.map((function(n){return t=n.maximumSize-n.size>0||t})).reverse();var s=0;for(var u=0;u<this.sashItems.length;u++){var a=this.sashItems[u].sash;s+=this.viewItems[u].size;var h=!(n[u]&&o[u+1]),c=!(i[u]&&e[u+1]);if(h&&c){var f=S(u,-1),l=S(u+1,this.viewItems.length),v=this.findFirstSnapIndex(f),d=this.findFirstSnapIndex(l),g=typeof v=="number"&&!this.viewItems[v].visible,p=typeof d=="number"&&!this.viewItems[d].visible;g&&e[u]&&(s>0||this.startSnappingEnabled)?a.state=1:p&&n[u]&&(s<this._contentSize||this.endSnappingEnabled)?a.state=2:a.state=0}else a.state=h&&!c?1:!h&&c?2:3}};n.prototype.getSashPosition=function(t){var n=0;for(var i=0;i<this.sashItems.length;i++)if(n+=this.viewItems[i].size,this.sashItems[i].sash===t)return n;return 0};n.prototype.findFirstSnapIndex=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];var e=this.viewItems[r];if(e.visible&&e.snap)return r}for(var o=0,s=t;o<s.length;o++){var r=s[o];var e=this.viewItems[r];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return r}};n.prototype.areViewsDistributed=function(){var t,n;for(var i=0,r=this.viewItems;i<r.length;i++){var e=r[i];if(t=t===void 0?e.size:Math.min(t,e.size),n=n===void 0?e.size:Math.max(n,e.size),n-t>2)return!1}return!0};n.prototype.dispose=function(){var n;(n=this.sashDragState)===null||n===void 0||n.disposable.dispose(),si(this.viewItems),this.viewItems=[],this.sashItems.forEach((function(t){return t.disposable.dispose()})),this.sashItems=[],t.prototype.dispose.call(this)};return n}(ci);var lz=function(){function t(n,i,r){this.columns=n,this.getColumnSize=r,this.templateId=t.TemplateId,this.renderedTemplates=new Set;var e=new Map(i.map((function(t){return[t.templateId,t]})));this.renderers=[];for(var o=0,s=n;o<s.length;o++){var u=s[o];var a=e.get(u.templateId);if(!a)throw new Error("Table cell renderer for template id ".concat(u.templateId," not found."));this.renderers.push(a)}}t.prototype.renderTemplate=function(t){var n=vh(t,bh(".monaco-table-tr")),i=[],r=[];for(var e=0;e<this.columns.length;e++){var o=this.renderers[e],s=vh(n,bh(".monaco-table-td",{"data-col-index":e}));s.style.width="".concat(this.getColumnSize(e),"px"),i.push(s),r.push(o.renderTemplate(s))}var u={container:t,cellContainers:i,cellTemplateData:r};return this.renderedTemplates.add(u),u};t.prototype.renderElement=function(t,n,i,r){for(var e=0;e<this.columns.length;e++){var o=this.columns[e].project(t);this.renderers[e].renderElement(o,n,i.cellTemplateData[e],r)}};t.prototype.disposeElement=function(t,n,i,r){for(var e=0;e<this.columns.length;e++){var o=this.renderers[e];if(o.disposeElement){var s=this.columns[e].project(t);o.disposeElement(s,n,i.cellTemplateData[e],r)}}};t.prototype.disposeTemplate=function(t){for(var n=0;n<this.columns.length;n++)this.renderers[n].disposeTemplate(t.cellTemplateData[n]);pa(t.container),this.renderedTemplates.delete(t)};t.prototype.layoutColumn=function(t,n){for(var i=0,r=this.renderedTemplates;i<r.length;i++){var e=r[i].cellContainers;e[t].style.width="".concat(n,"px")}};return t}();lz.TemplateId="row";var vz=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.column=n,r.index=i,r._onDidLayout=new ki,r.onDidLayout=r._onDidLayout.event,r.element=bh(".monaco-table-th",{"data-col-index":i},n.label),n.tooltip&&r._register(DN(kN("mouse"),r.element,n.tooltip));return r}Object.defineProperty(n.prototype,"minimumSize",{get:function(){var t;return(t=this.column.minimumWidth)!==null&&t!==void 0?t:120},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"maximumSize",{get:function(){var t;return(t=this.column.maximumWidth)!==null&&t!==void 0?t:Number.POSITIVE_INFINITY},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"onDidChange",{get:function(){var t;return(t=this.column.onDidChangeWidthConstraints)!==null&&t!==void 0?t:wi.None},enumerable:false,configurable:true});n.prototype.layout=function(t){this._onDidLayout.fire([this.index,t])};return n}(ci);var dz=function(){function t(n,i,r,e,o,s){var u=this;this.virtualDelegate=r,this.domId="table_id_"+ ++t.InstanceCount,this.disposables=new hi,this.cachedWidth=0,this.cachedHeight=0,this.domNode=vh(i,bh(".monaco-table.".concat(this.domId)));var a=e.map((function(t,n){return u.disposables.add(new vz(t,n))})),h={size:a.reduce((function(t,n){return t+n.column.weight}),0),views:a.map((function(t){return{size:t.column.weight,view:t}}))};this.splitview=this.disposables.add(new fz(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:function(){return u.cachedHeight},descriptor:h})),this.splitview.el.style.height="".concat(r.headerRowHeight,"px"),this.splitview.el.style.lineHeight="".concat(r.headerRowHeight,"px");var c=new lz(e,o,(function(t){return u.splitview.getViewSize(t)}));var f;this.list=this.disposables.add(new rW(n,this.domNode,(f=r,{getHeight:function(t){return f.getHeight(t)},getTemplateId:function(){return lz.TemplateId}}),[c],s)),wi.any.apply(wi,a.map((function(t){return t.onDidLayout})))((function(t){var n=t[0],i=t[1];return c.layoutColumn(n,i)}),null,this.disposables),this.splitview.onDidSashReset((function(t){var n=e.reduce((function(t,n){return t+n.weight}),0),i=e[t].weight/n*u.cachedWidth;u.splitview.resizeView(t,i)}),null,this.disposables),this.styleElement=Qa(this.domNode),this.style(ZP)}Object.defineProperty(t.prototype,"onDidChangeFocus",{get:function(){return this.list.onDidChangeFocus},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeSelection",{get:function(){return this.list.onDidChangeSelection},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidScroll",{get:function(){return this.list.onDidScroll},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseDblClick",{get:function(){return this.list.onMouseDblClick},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onPointer",{get:function(){return this.list.onPointer},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidFocus",{get:function(){return this.list.onDidFocus},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.list.scrollTop},set:function(t){this.list.scrollTop=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"scrollHeight",{get:function(){return this.list.scrollHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"renderHeight",{get:function(){return this.list.renderHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidDispose",{get:function(){return this.list.onDidDispose},enumerable:false,configurable:true});t.prototype.updateOptions=function(t){this.list.updateOptions(t)};t.prototype.splice=function(t,n,i){if(i===void 0){i=[]}this.list.splice(t,n,i)};t.prototype.getHTMLElement=function(){return this.domNode};t.prototype.style=function(t){var n=[];n.push(".monaco-table.".concat(this.domId," > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ").concat(this.virtualDelegate.headerRowHeight+1,"px;\n\t\t\theight: calc(100% - ").concat(this.virtualDelegate.headerRowHeight,"px);\n\t\t}")),this.styleElement.textContent=n.join("\n"),this.list.style(t)};t.prototype.getSelectedElements=function(){return this.list.getSelectedElements()};t.prototype.getSelection=function(){return this.list.getSelection()};t.prototype.getFocus=function(){return this.list.getFocus()};t.prototype.dispose=function(){this.disposables.dispose()};return t}();dz.InstanceCount=0;var gz=ht(0,"Match Case"),pz=ht(0,"Match Whole Word"),wz=ht(0,"Use Regular Expression");var mz=function(t){__extends(n,t);function n(n){var i;return t.call(this,{icon:Hr.caseSensitive,title:gz+n.appendTitle,isChecked:n.isChecked,hoverDelegate:(i=n.hoverDelegate)!==null&&i!==void 0?i:kN("element"),inputActiveOptionBorder:n.inputActiveOptionBorder,inputActiveOptionForeground:n.inputActiveOptionForeground,inputActiveOptionBackground:n.inputActiveOptionBackground})||this}return n}(PH);var bz=function(t){__extends(n,t);function n(n){var i;return t.call(this,{icon:Hr.wholeWord,title:pz+n.appendTitle,isChecked:n.isChecked,hoverDelegate:(i=n.hoverDelegate)!==null&&i!==void 0?i:kN("element"),inputActiveOptionBorder:n.inputActiveOptionBorder,inputActiveOptionForeground:n.inputActiveOptionForeground,inputActiveOptionBackground:n.inputActiveOptionBackground})||this}return n}(PH);var yz=function(t){__extends(n,t);function n(n){var i;return t.call(this,{icon:Hr.regex,title:wz+n.appendTitle,isChecked:n.isChecked,hoverDelegate:(i=n.hoverDelegate)!==null&&i!==void 0?i:kN("element"),inputActiveOptionBorder:n.inputActiveOptionBorder,inputActiveOptionForeground:n.inputActiveOptionForeground,inputActiveOptionBackground:n.inputActiveOptionBackground})||this}return n}(PH);var _z=function(){function t(t,n,i,r){if(n===void 0){n=0}if(i===void 0){i=t.length}if(r===void 0){r=n-1}this.items=t,this.start=n,this.end=i,this.index=r}t.prototype.current=function(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]};t.prototype.next=function(){return this.index=Math.min(this.index+1,this.end),this.current()};t.prototype.previous=function(){return this.index=Math.max(this.index-1,this.start-1),this.current()};t.prototype.first=function(){return this.index=this.start,this.current()};t.prototype.last=function(){return this.index=this.end-1,this.current()};return t}();var kz=function(){function t(t,n){if(t===void 0){t=[]}if(n===void 0){n=10}this._initialize(t),this._limit=n,this._onChange()}t.prototype.getHistory=function(){return this._elements};t.prototype.add=function(t){this._history.delete(t),this._history.add(t),this._onChange()};t.prototype.next=function(){return this._navigator.next()};t.prototype.previous=function(){return this._currentPosition()!==0?this._navigator.previous():null};t.prototype.current=function(){return this._navigator.current()};t.prototype.first=function(){return this._navigator.first()};t.prototype.last=function(){return this._navigator.last()};t.prototype.isLast=function(){return this._currentPosition()>=this._elements.length-1};t.prototype.isNowhere=function(){return this._navigator.current()===null};t.prototype.has=function(t){return this._history.has(t)};t.prototype._onChange=function(){this._reduceToLimit();var t=this._elements;this._navigator=new _z(t,0,t.length,t.length)};t.prototype._reduceToLimit=function(){var t=this._elements;t.length>this._limit&&this._initialize(t.slice(t.length-this._limit))};t.prototype._currentPosition=function(){var t=this._navigator.current();return t?this._elements.indexOf(t):-1};t.prototype._initialize=function(t){this._history=new Set;for(var n=0,i=t;n<i.length;n++){var r=i[n];this._history.add(r)}};Object.defineProperty(t.prototype,"_elements",{get:function(){var t=[];return this._history.forEach((function(n){return t.push(n)})),t},enumerable:false,configurable:true});return t}();var xz=bh;var Cz=function(t){__extends(n,t);function n(n,i,r){var e=this;var o;e=t.call(this)||this,e.state="idle",e.maxHeight=Number.POSITIVE_INFINITY,e._onDidChange=e._register(new ki),e.onDidChange=e._onDidChange.event,e._onDidHeightChange=e._register(new ki),e.onDidHeightChange=e._onDidHeightChange.event,e.contextViewProvider=i,e.options=r,e.message=null,e.placeholder=e.options.placeholder||"",e.tooltip=(o=e.options.tooltip)!==null&&o!==void 0?o:e.placeholder||"",e.ariaLabel=e.options.ariaLabel||"",e.options.validationOptions&&(e.validation=e.options.validationOptions.validation),e.element=vh(n,xz(".monaco-inputbox.idle"));var s=e.options.flexibleHeight?"textarea":"input",u=vh(e.element,xz(".ibwrapper"));if(e.input=vh(u,xz(s+".input.empty")),e.input.setAttribute("autocorrect","off"),e.input.setAttribute("autocapitalize","off"),e.input.setAttribute("spellcheck","false"),e.onfocus(e.input,(function(){return e.element.classList.add("synthetic-focus")})),e.onblur(e.input,(function(){return e.element.classList.remove("synthetic-focus")})),e.options.flexibleHeight){e.maxHeight=typeof e.options.flexibleMaxHeight=="number"?e.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,e.mirror=vh(u,xz("div.mirror")),e.mirror.innerText=" ",e.scrollableElement=new mk(e.element,{vertical:1}),e.options.flexibleWidth&&(e.input.setAttribute("wrap","off"),e.mirror.style.whiteSpace="pre",e.mirror.style.wordWrap="initial"),vh(n,e.scrollableElement.getDomNode()),e._register(e.scrollableElement),e._register(e.scrollableElement.onScroll((function(t){return e.input.scrollTop=t.scrollTop})));var a=e._register(new Dk(n.ownerDocument,"selectionchange")),h=wi.filter(a.event,(function(){var t=n.ownerDocument.getSelection();return(t==null?void 0:t.anchorNode)===u}));e._register(h(e.updateScrollDimensions,e)),e._register(e.onDidHeightChange(e.updateScrollDimensions,e))}else e.input.type=e.options.type||"text",e.input.setAttribute("wrap","off");e.ariaLabel&&e.input.setAttribute("aria-label",e.ariaLabel),e.placeholder&&!e.options.showPlaceholderOnFocus&&e.setPlaceHolder(e.placeholder),e.tooltip&&e.setTooltip(e.tooltip),e.oninput(e.input,(function(){return e.onValueChange()})),e.onblur(e.input,(function(){return e.onBlur()})),e.onfocus(e.input,(function(){return e.onFocus()})),e._register(e.ignoreGesture(e.input)),setTimeout((function(){return e.updateMirror()}),0),e.options.actions&&(e.actionbar=e._register(new qW(e.element)),e.actionbar.push(e.options.actions,{icon:!0,label:!1})),e.applyStyles();return e}n.prototype.onBlur=function(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")};n.prototype.onFocus=function(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")};n.prototype.setPlaceHolder=function(t){this.placeholder=t,this.input.setAttribute("placeholder",t)};n.prototype.setTooltip=function(t){this.tooltip=t,this.hover?this.hover.update(t):this.hover=this._register(DN(kN("mouse"),this.input,t))};Object.defineProperty(n.prototype,"inputElement",{get:function(){return this.input},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"value",{get:function(){return this.input.value},set:function(t){this.input.value!==t&&(this.input.value=t,this.onValueChange())},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"height",{get:function(){return typeof this.cachedHeight=="number"?this.cachedHeight:Na(this.element)},enumerable:false,configurable:true});n.prototype.focus=function(){this.input.focus()};n.prototype.blur=function(){this.input.blur()};n.prototype.hasFocus=function(){return Va(this.input)};n.prototype.select=function(t){if(t===void 0){t=null}this.input.select(),t&&(this.input.setSelectionRange(t.start,t.end),t.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))};n.prototype.isSelectionAtEnd=function(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd};n.prototype.getSelection=function(){var t;var n=this.input.selectionStart;return n===null?null:{start:n,end:(t=this.input.selectionEnd)!==null&&t!==void 0?t:n}};n.prototype.enable=function(){this.input.removeAttribute("disabled")};n.prototype.disable=function(){this.blur(),this.input.disabled=!0,this._hideMessage()};Object.defineProperty(n.prototype,"paddingRight",{set:function(t){this.input.style.width="calc(100% - ".concat(t,"px)"),this.mirror&&(this.mirror.style.paddingRight=t+"px")},enumerable:false,configurable:true});n.prototype.updateScrollDimensions=function(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;var t=this.cachedContentHeight,n=this.cachedHeight,i=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:t,height:n}),this.scrollableElement.setScrollPosition({scrollTop:i})};n.prototype.showMessage=function(t,n){if(this.state==="open"&&ot(this.message,t))return;this.message=t,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(t.type));var i=this.stylesForType(this.message.type);this.element.style.border="1px solid ".concat(Dh(i.border,"transparent")),this.message.content&&(this.hasFocus()||n)&&this._showMessage()};n.prototype.hideMessage=function(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()};n.prototype.validate=function(){var t=null;return this.validation&&(t=this.validation(this.value),t?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(t)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),t==null?void 0:t.type};n.prototype.stylesForType=function(t){var n=this.options.inputBoxStyles;switch(t){case 1:return{border:n.inputValidationInfoBorder,background:n.inputValidationInfoBackground,foreground:n.inputValidationInfoForeground};case 2:return{border:n.inputValidationWarningBorder,background:n.inputValidationWarningBackground,foreground:n.inputValidationWarningForeground};default:return{border:n.inputValidationErrorBorder,background:n.inputValidationErrorBackground,foreground:n.inputValidationErrorForeground}}};n.prototype.classForType=function(t){switch(t){case 1:return"info";case 2:return"warning";default:return"error"}};n.prototype._showMessage=function(){var t=this;if(!this.contextViewProvider||!this.message)return;var n;var i=function(){return n.style.width=Ta(t.element)+"px"};var r;this.contextViewProvider.showContextView({getAnchor:function(){return t.element},anchorAlignment:1,render:function(r){var e,o;if(!t.message)return null;n=vh(r,xz(".monaco-inputbox-container")),i();var s={inline:!0,className:"monaco-inputbox-message"},u=t.message.formatContent?AR(t.message.content,s):function(t,n){if(n===void 0){n={}}var i=OR(n);return i.textContent=t,i}(t.message.content,s);u.classList.add(t.classForType(t.message.type));var a=t.stylesForType(t.message.type);return u.style.backgroundColor=(e=a.background)!==null&&e!==void 0?e:"",u.style.color=(o=a.foreground)!==null&&o!==void 0?o:"",u.style.border=a.border?"1px solid ".concat(a.border):"",vh(n,u),null},onHide:function(){t.state="closed"},layout:i}),r=this.message.type===3?ht(0,"Error: {0}",this.message.content):this.message.type===2?ht(0,"Warning: {0}",this.message.content):ht(0,"Info: {0}",this.message.content),yw(r),this.state="open"};n.prototype._hideMessage=function(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")};n.prototype.onValueChange=function(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()};n.prototype.updateMirror=function(){if(!this.mirror)return;var t=this.value,n=t.charCodeAt(t.length-1)===10?" ":"";(t+n).replace(/\u000c/g,"")?this.mirror.textContent=t+n:this.mirror.innerText=" ",this.layout()};n.prototype.applyStyles=function(){var t,n,i;var r=this.options.inputBoxStyles,e=(t=r.inputBackground)!==null&&t!==void 0?t:"",o=(n=r.inputForeground)!==null&&n!==void 0?n:"",s=(i=r.inputBorder)!==null&&i!==void 0?i:"";this.element.style.backgroundColor=e,this.element.style.color=o,this.input.style.backgroundColor="inherit",this.input.style.color=o,this.element.style.border="1px solid ".concat(Dh(s,"transparent"))};n.prototype.layout=function(){if(!this.mirror)return;var t=this.cachedContentHeight;this.cachedContentHeight=Na(this.mirror),t!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))};n.prototype.insertAtCursor=function(t){var n=this.inputElement,i=n.selectionStart,r=n.selectionEnd,e=n.value;i!==null&&r!==null&&(this.value=e.substr(0,i)+t+e.substr(r),n.setSelectionRange(i+1,i+1),this.layout())};n.prototype.dispose=function(){var n;this._hideMessage(),this.message=null,(n=this.actionbar)===null||n===void 0||n.dispose(),t.prototype.dispose.call(this)};return n}(ik);var Sz=function(t){__extends(n,t);function n(n,i,r){var e=this;var o=ht(0," or {0} for history","⇅"),s=ht(0," ({0} for history)","⇅");e=t.call(this,n,i,r)||this,e._onDidFocus=e._register(new ki),e.onDidFocus=e._onDidFocus.event,e._onDidBlur=e._register(new ki),e.onDidBlur=e._onDidBlur.event,e.history=new kz(r.history,100);var u=function(){if(r.showHistoryHint&&r.showHistoryHint()&&!e.placeholder.endsWith(o)&&!e.placeholder.endsWith(s)&&e.history.getHistory().length){var t=e.placeholder.endsWith(")")?o:s,n=e.placeholder+t;r.showPlaceholderOnFocus&&!Va(e.input)?e.placeholder=n:e.setPlaceHolder(n)}};e.observer=new MutationObserver((function(t,n){t.forEach((function(t){t.target.textContent||u()}))})),e.observer.observe(e.input,{attributeFilter:["class"]}),e.onfocus(e.input,(function(){return u()})),e.onblur(e.input,(function(){var t=function(t){if(e.placeholder.endsWith(t)){var n=e.placeholder.slice(0,e.placeholder.length-t.length);return r.showPlaceholderOnFocus?e.placeholder=n:e.setPlaceHolder(n),!0}return!1};t(s)||t(o)}));return e}n.prototype.dispose=function(){t.prototype.dispose.call(this),this.observer&&(this.observer.disconnect(),this.observer=void 0)};n.prototype.addToHistory=function(t){this.value&&(t||this.value!==this.getCurrentValue())&&this.history.add(this.value)};n.prototype.isAtLastInHistory=function(){return this.history.isLast()};n.prototype.isNowhereInHistory=function(){return this.history.isNowhere()};n.prototype.showNextValue=function(){this.history.has(this.value)||this.addToHistory();var t=this.getNextValue();t&&(t=t===this.value?this.getNextValue():t),this.value=t!==null&&t!==void 0?t:"",_w(this.value?this.value:ht(0,"Cleared Input"))};n.prototype.showPreviousValue=function(){this.history.has(this.value)||this.addToHistory();var t=this.getPreviousValue();t&&(t=t===this.value?this.getPreviousValue():t),t&&(this.value=t,_w(this.value))};n.prototype.setPlaceHolder=function(n){t.prototype.setPlaceHolder.call(this,n),this.setTooltip(n)};n.prototype.onBlur=function(){t.prototype.onBlur.call(this),this._onDidBlur.fire()};n.prototype.onFocus=function(){t.prototype.onFocus.call(this),this._onDidFocus.fire()};n.prototype.getCurrentValue=function(){var t=this.history.current();return t||(t=this.history.last(),this.history.next()),t};n.prototype.getPreviousValue=function(){return this.history.previous()||this.history.first()};n.prototype.getNextValue=function(){return this.history.next()};return n}(Cz);var Dz=ht(0,"input");var Az=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.fixFocusOnOptionClickEnabled=!0,e.imeSessionInProgress=!1,e.additionalTogglesDisposables=e._register(new fi),e.additionalToggles=[],e._onDidOptionChange=e._register(new ki),e.onDidOptionChange=e._onDidOptionChange.event,e._onKeyDown=e._register(new ki),e.onKeyDown=e._onKeyDown.event,e._onMouseDown=e._register(new ki),e.onMouseDown=e._onMouseDown.event,e._onInput=e._register(new ki),e._onKeyUp=e._register(new ki),e._onCaseSensitiveKeyDown=e._register(new ki),e.onCaseSensitiveKeyDown=e._onCaseSensitiveKeyDown.event,e._onRegexKeyDown=e._register(new ki),e.onRegexKeyDown=e._onRegexKeyDown.event,e._lastHighlightFindOptions=0,e.placeholder=r.placeholder||"",e.validation=r.validation,e.label=r.label||Dz,e.showCommonFindToggles=!!r.showCommonFindToggles;var o=r.appendCaseSensitiveLabel||"",s=r.appendWholeWordsLabel||"",u=r.appendRegexLabel||"",a=r.history||[],h=!!r.flexibleHeight,c=!!r.flexibleWidth,f=r.flexibleMaxHeight;e.domNode=document.createElement("div"),e.domNode.classList.add("monaco-findInput"),e.inputBox=e._register(new Sz(e.domNode,i,{placeholder:e.placeholder||"",ariaLabel:e.label||"",validationOptions:{validation:e.validation},history:a,showHistoryHint:r.showHistoryHint,flexibleHeight:h,flexibleWidth:c,flexibleMaxHeight:f,inputBoxStyles:r.inputBoxStyles}));var l=e._register(xN());if(e.showCommonFindToggles){e.regex=e._register(new yz(__assign({appendTitle:u,isChecked:!1,hoverDelegate:l},r.toggleStyles))),e._register(e.regex.onChange((function(t){e._onDidOptionChange.fire(t),!t&&e.fixFocusOnOptionClickEnabled&&e.inputBox.focus(),e.validate()}))),e._register(e.regex.onKeyDown((function(t){e._onRegexKeyDown.fire(t)}))),e.wholeWords=e._register(new bz(__assign({appendTitle:s,isChecked:!1,hoverDelegate:l},r.toggleStyles))),e._register(e.wholeWords.onChange((function(t){e._onDidOptionChange.fire(t),!t&&e.fixFocusOnOptionClickEnabled&&e.inputBox.focus(),e.validate()}))),e.caseSensitive=e._register(new mz(__assign({appendTitle:o,isChecked:!1,hoverDelegate:l},r.toggleStyles))),e._register(e.caseSensitive.onChange((function(t){e._onDidOptionChange.fire(t),!t&&e.fixFocusOnOptionClickEnabled&&e.inputBox.focus(),e.validate()}))),e._register(e.caseSensitive.onKeyDown((function(t){e._onCaseSensitiveKeyDown.fire(t)})));var v=[e.caseSensitive.domNode,e.wholeWords.domNode,e.regex.domNode];e.onkeydown(e.domNode,(function(t){if(t.equals(15)||t.equals(17)||t.equals(9)){var n=v.indexOf(e.domNode.ownerDocument.activeElement);if(n>=0){var i=-1;t.equals(17)?i=(n+1)%v.length:t.equals(15)&&(i=n===0?v.length-1:n-1),t.equals(9)?(v[n].blur(),e.inputBox.focus()):i>=0&&v[i].focus(),ch(t,!0)}}}))}e.controls=document.createElement("div"),e.controls.className="controls",e.controls.style.display=e.showCommonFindToggles?"":"none",e.caseSensitive&&e.controls.append(e.caseSensitive.domNode),e.wholeWords&&e.controls.appendChild(e.wholeWords.domNode),e.regex&&e.controls.appendChild(e.regex.domNode),e.setAdditionalToggles(r==null?void 0:r.additionalToggles),e.controls&&e.domNode.appendChild(e.controls),n==null||n.appendChild(e.domNode),e._register(ma(e.inputBox.inputElement,"compositionstart",(function(t){e.imeSessionInProgress=!0}))),e._register(ma(e.inputBox.inputElement,"compositionend",(function(t){e.imeSessionInProgress=!1,e._onInput.fire()}))),e.onkeydown(e.inputBox.inputElement,(function(t){return e._onKeyDown.fire(t)})),e.onkeyup(e.inputBox.inputElement,(function(t){return e._onKeyUp.fire(t)})),e.oninput(e.inputBox.inputElement,(function(t){return e._onInput.fire()})),e.onmousedown(e.inputBox.inputElement,(function(t){return e._onMouseDown.fire(t)}));return e}Object.defineProperty(n.prototype,"onDidChange",{get:function(){return this.inputBox.onDidChange},enumerable:false,configurable:true});n.prototype.layout=function(t){this.inputBox.layout(),this.updateInputBoxPadding(t.collapsedFindWidget)};n.prototype.enable=function(){var t,n,i;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(t=this.regex)===null||t===void 0||t.enable(),(n=this.wholeWords)===null||n===void 0||n.enable(),(i=this.caseSensitive)===null||i===void 0||i.enable();for(var r=0,e=this.additionalToggles;r<e.length;r++){var o=e[r];o.enable()}};n.prototype.disable=function(){var t,n,i;this.domNode.classList.add("disabled"),this.inputBox.disable(),(t=this.regex)===null||t===void 0||t.disable(),(n=this.wholeWords)===null||n===void 0||n.disable(),(i=this.caseSensitive)===null||i===void 0||i.disable();for(var r=0,e=this.additionalToggles;r<e.length;r++){var o=e[r];o.disable()}};n.prototype.setFocusInputOnOptionClick=function(t){this.fixFocusOnOptionClickEnabled=t};n.prototype.setEnabled=function(t){t?this.enable():this.disable()};n.prototype.setAdditionalToggles=function(t){var n=this;for(var i=0,r=this.additionalToggles;i<r.length;i++){var e=r[i];e.domNode.remove()}this.additionalToggles=[],this.additionalTogglesDisposables.value=new hi;for(var o=0,s=t!==null&&t!==void 0?t:[];o<s.length;o++){var e=s[o];this.additionalTogglesDisposables.value.add(e),this.controls.appendChild(e.domNode),this.additionalTogglesDisposables.value.add(e.onChange((function(t){n._onDidOptionChange.fire(t),!t&&n.fixFocusOnOptionClickEnabled&&n.inputBox.focus()}))),this.additionalToggles.push(e)}this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()};n.prototype.updateInputBoxPadding=function(t){if(t===void 0){t=!1}var n,i,r,e,o,s;this.inputBox.paddingRight=t?0:((i=(n=this.caseSensitive)===null||n===void 0?void 0:n.width())!==null&&i!==void 0?i:0)+((e=(r=this.wholeWords)===null||r===void 0?void 0:r.width())!==null&&e!==void 0?e:0)+((s=(o=this.regex)===null||o===void 0?void 0:o.width())!==null&&s!==void 0?s:0)+this.additionalToggles.reduce((function(t,n){return t+n.width()}),0)};n.prototype.getValue=function(){return this.inputBox.value};n.prototype.setValue=function(t){this.inputBox.value!==t&&(this.inputBox.value=t)};n.prototype.select=function(){this.inputBox.select()};n.prototype.focus=function(){this.inputBox.focus()};n.prototype.getCaseSensitive=function(){var t,n;return(n=(t=this.caseSensitive)===null||t===void 0?void 0:t.checked)!==null&&n!==void 0&&n};n.prototype.setCaseSensitive=function(t){this.caseSensitive&&(this.caseSensitive.checked=t)};n.prototype.getWholeWords=function(){var t,n;return(n=(t=this.wholeWords)===null||t===void 0?void 0:t.checked)!==null&&n!==void 0&&n};n.prototype.setWholeWords=function(t){this.wholeWords&&(this.wholeWords.checked=t)};n.prototype.getRegex=function(){var t,n;return(n=(t=this.regex)===null||t===void 0?void 0:t.checked)!==null&&n!==void 0&&n};n.prototype.setRegex=function(t){this.regex&&(this.regex.checked=t,this.validate())};n.prototype.focusOnCaseSensitive=function(){var t;(t=this.caseSensitive)===null||t===void 0||t.focus()};n.prototype.highlightFindOptions=function(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)};n.prototype.validate=function(){this.inputBox.validate()};n.prototype.showMessage=function(t){this.inputBox.showMessage(t)};n.prototype.clearMessage=function(){this.inputBox.hideMessage()};return n}(ik);var Oz,Ez,Mz,Fz,Lz;(function(t){t[t.Expanded=0]="Expanded",t[t.Collapsed=1]="Collapsed",t[t.PreserveOrExpanded=2]="PreserveOrExpanded",t[t.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Oz||(Oz={})),function(t){t[t.Unknown=0]="Unknown",t[t.Twistie=1]="Twistie",t[t.Element=2]="Element",t[t.Filter=3]="Filter"}(Ez||(Ez={}));var jz=function(t){__extends(n,t);function n(n,i){return t.call(this,"TreeError [".concat(n,"] ").concat(i))||this}return n}(Error);var Rz=function(){function t(t){this.fn=t,this._map=new WeakMap}t.prototype.map=function(t){var n=this._map.get(t);return n||(n=this.fn(t),this._map.set(t,n)),n};return t}();function Tz(t){return typeof t=="object"&&"visibility"in t&&"data"in t}function Iz(t){switch(t){case!0:return 1;case!1:return 0;default:return t}}function Bz(t){return typeof t.collapsible=="boolean"}var Nz=function(){function t(t,n,i,r){if(r===void 0){r={}}var e;this.user=t,this.list=n,this.rootRef=[],this.eventBufferer=new Oi,this._onDidChangeCollapseState=new ki,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new ki,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new ki,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new Os(xs),this.collapseByDefault=r.collapseByDefault!==void 0&&r.collapseByDefault,this.allowNonCollapsibleParents=(e=r.allowNonCollapsibleParents)!==null&&e!==void 0&&e,this.filter=r.filter,this.autoExpandSingleChildren=r.autoExpandSingleChildren!==void 0&&r.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}t.prototype.splice=function(t,n,i,r){if(i===void 0){i=Yt.empty()}if(r===void 0){r={}}if(t.length===0)throw new jz(this.user,"Invalid tree location");r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,t,n,i,r):this.spliceSimple(t,n,i,r)};t.prototype.spliceSmart=function(t,n,i,r,e,o){var s=this;var u;r===void 0&&(r=Yt.empty()),o===void 0&&(o=(u=e.diffDepth)!==null&&u!==void 0?u:0);var a=this.getParentNodeWithListIndex(n).parentNode;if(!a.lastDiffIds)return this.spliceSimple(n,i,r,e);var h=__spreadArray([],r,true),c=n[n.length-1],f=new Hv({getElements:function(){return a.lastDiffIds}},{getElements:function(){return __spreadArray(__spreadArray(__spreadArray([],a.children.slice(0,c),true),h,true),a.children.slice(c+i),true).map((function(n){return t.getId(n.element).toString()}))}}).ComputeDiff(!1);if(f.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(n,i,h,e);var l=n.slice(0,-1),v=function(n,i,r){if(o>0)for(var u=0;u<r;u++)n--,i--,s.spliceSmart(t,__spreadArray(__spreadArray([],l,true),[n,0],false),Number.MAX_SAFE_INTEGER,h[i].children,e,o-1)};var d=Math.min(a.children.length,c+i),g=h.length;for(var p=0,w=f.changes.sort((function(t,n){return n.originalStart-t.originalStart}));p<w.length;p++){var m=w[p];v(d,g,d-(m.originalStart+m.originalLength)),d=m.originalStart,g=m.modifiedStart-c,this.spliceSimple(__spreadArray(__spreadArray([],l,true),[d],false),m.originalLength,Yt.slice(h,g,g+m.modifiedLength),e)}v(d,g,d)};t.prototype.spliceSimple=function(t,n,i,r){var e=this;if(i===void 0){i=Yt.empty()}var o=r.onDidCreateNode,s=r.onDidDeleteNode,u=r.diffIdentityProvider;var a=this.getParentNodeWithListIndex(t),h=a.parentNode,c=a.listIndex,f=a.revealed,l=a.visible,v=[],d=Yt.map(i,(function(t){return e.createTreeNode(t,h,h.visible?1:0,f,v,o)})),g=t[t.length-1];var p=0;for(var w=g;w>=0&&w<h.children.length;w--){var m=h.children[w];if(m.visible){p=m.visibleChildIndex;break}}var b=[];var y=0,_=0;for(var k=0,x=d;k<x.length;k++){var w=x[k];b.push(w),_+=w.renderNodeCount,w.visible&&(w.visibleChildIndex=p+y++)}var C=F(h.children,g,n,b);u?h.lastDiffIds?F(h.lastDiffIds,g,n,b.map((function(t){return u.getId(t.element).toString()}))):h.lastDiffIds=h.children.map((function(t){return u.getId(t.element).toString()})):h.lastDiffIds=void 0;var S=0;for(var D=0,A=C;D<A.length;D++){var w=A[D];w.visible&&S++}if(S!==0)for(var w=g+b.length;w<h.children.length;w++){var m=h.children[w];m.visible&&(m.visibleChildIndex-=S)}if(h.visibleChildrenCount+=y-S,f&&l){var w=C.reduce((function(t,n){return t+(n.visible?n.renderNodeCount:0)}),0);this._updateAncestorsRenderNodeCount(h,_-w),this.list.splice(c,w,v)}if(C.length>0&&s){var O=function(t){s(t),t.children.forEach(O)};C.forEach(O)}this._onDidSplice.fire({insertedNodes:b,deletedNodes:C});var E=h;for(;E;){if(E.visibility===2){this.refilterDelayer.trigger((function(){return e.refilter()}));break}E=E.parent}};t.prototype.rerender=function(t){if(t.length===0)throw new jz(this.user,"Invalid tree location");var n=this.getTreeNodeWithListIndex(t),i=n.node,r=n.listIndex,e=n.revealed;i.visible&&e&&this.list.splice(r,1,[i])};t.prototype.has=function(t){return this.hasTreeNode(t)};t.prototype.getListIndex=function(t){var n=this.getTreeNodeWithListIndex(t),i=n.listIndex,r=n.visible,e=n.revealed;return r&&e?i:-1};t.prototype.getListRenderCount=function(t){return this.getTreeNode(t).renderNodeCount};t.prototype.isCollapsible=function(t){return this.getTreeNode(t).collapsible};t.prototype.setCollapsible=function(t,n){var i=this;var r=this.getTreeNode(t);n===void 0&&(n=!r.collapsible);var e={collapsible:n};return this.eventBufferer.bufferEvents((function(){return i._setCollapseState(t,e)}))};t.prototype.isCollapsed=function(t){return this.getTreeNode(t).collapsed};t.prototype.setCollapsed=function(t,n,i){var r=this;var e=this.getTreeNode(t);n===void 0&&(n=!e.collapsed);var o={collapsed:n,recursive:i||!1};return this.eventBufferer.bufferEvents((function(){return r._setCollapseState(t,o)}))};t.prototype._setCollapseState=function(t,n){var i=this.getTreeNodeWithListIndex(t),r=i.node,e=i.listIndex,o=i.revealed,s=this._setListNodeCollapseState(r,e,o,n);if(r!==this.root&&this.autoExpandSingleChildren&&s&&!Bz(n)&&r.collapsible&&!r.collapsed&&!n.recursive){var u=-1;for(var a=0;a<r.children.length;a++)if(r.children[a].visible){if(u>-1){u=-1;break}u=a}u>-1&&this._setCollapseState(__spreadArray(__spreadArray([],t,true),[u],false),n)}return s};t.prototype._setListNodeCollapseState=function(t,n,i,r){var e=this._setNodeCollapseState(t,r,!1);if(!i||!t.visible||!e)return e;var o=t.renderNodeCount,s=this.updateNodeAfterCollapseChange(t),u=o-(n===-1?0:1);return this.list.splice(n+1,u,s.slice(1)),e};t.prototype._setNodeCollapseState=function(t,n,i){var r;if(t===this.root?r=!1:(Bz(n)?(r=t.collapsible!==n.collapsible,t.collapsible=n.collapsible):t.collapsible?(r=t.collapsed!==n.collapsed,t.collapsed=n.collapsed):r=!1,r&&this._onDidChangeCollapseState.fire({node:t,deep:i})),!Bz(n)&&n.recursive)for(var e=0,o=t.children;e<o.length;e++){var s=o[e];r=this._setNodeCollapseState(s,n,!0)||r}return r};t.prototype.expandTo=function(t){var n=this;this.eventBufferer.bufferEvents((function(){var i=n.getTreeNode(t);for(;i.parent;)i=i.parent,t=t.slice(0,t.length-1),i.collapsed&&n._setCollapseState(t,{collapsed:!1,recursive:!1})}))};t.prototype.refilter=function(){var t=this.root.renderNodeCount,n=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,t,n),this.refilterDelayer.cancel()};t.prototype.createTreeNode=function(t,n,i,r,e,o){var s={parent:n,element:t.element,children:[],depth:n.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof t.collapsible=="boolean"?t.collapsible:t.collapsed!==void 0,collapsed:t.collapsed===void 0?this.collapseByDefault:t.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},u=this._filterNode(s,i);s.visibility=u,r&&e.push(s);var a=t.children||Yt.empty(),h=r&&u!==0&&!s.collapsed;var c=0,f=1;for(var l=0,v=a;l<v.length;l++){var d=v[l];var g=this.createTreeNode(d,s,u,h,e,o);s.children.push(g),f+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=c++)}return this.allowNonCollapsibleParents||(s.collapsible=s.collapsible||s.children.length>0),s.visibleChildrenCount=c,s.visible=u===2?c>0:u===1,s.visible?s.collapsed||(s.renderNodeCount=f):(s.renderNodeCount=0,r&&e.pop()),o==null||o(s),s};t.prototype.updateNodeAfterCollapseChange=function(t){var n=t.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(t,i),this._updateAncestorsRenderNodeCount(t.parent,i.length-n),i};t.prototype._updateNodeAfterCollapseChange=function(t,n){if(t.visible===!1)return 0;if(n.push(t),t.renderNodeCount=1,!t.collapsed)for(var i=0,r=t.children;i<r.length;i++){var e=r[i];t.renderNodeCount+=this._updateNodeAfterCollapseChange(e,n)}return this._onDidChangeRenderNodeCount.fire(t),t.renderNodeCount};t.prototype.updateNodeAfterFilterChange=function(t){var n=t.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(t,t.visible?1:0,i),this._updateAncestorsRenderNodeCount(t.parent,i.length-n),i};t.prototype._updateNodeAfterFilterChange=function(t,n,i,r){if(r===void 0){r=!0}var e;if(t!==this.root){if(e=this._filterNode(t,n),e===0)return t.visible=!1,t.renderNodeCount=0,!1;r&&i.push(t)}var o=i.length;t.renderNodeCount=t===this.root?0:1;var s=!1;if(t.collapsed&&e===0)t.visibleChildrenCount=0;else{var u=0;for(var a=0,h=t.children;a<h.length;a++){var c=h[a];s=this._updateNodeAfterFilterChange(c,e,i,r&&!t.collapsed)||s,c.visible&&(c.visibleChildIndex=u++)}t.visibleChildrenCount=u}return t!==this.root&&(t.visible=e===2?s:e===1,t.visibility=e),t.visible?t.collapsed||(t.renderNodeCount+=i.length-o):(t.renderNodeCount=0,r&&i.pop()),this._onDidChangeRenderNodeCount.fire(t),t.visible};t.prototype._updateAncestorsRenderNodeCount=function(t,n){if(n!==0)for(;t;)t.renderNodeCount+=n,this._onDidChangeRenderNodeCount.fire(t),t=t.parent};t.prototype._filterNode=function(t,n){var i=this.filter?this.filter.filter(t.element,n):1;return typeof i=="boolean"?(t.filterData=void 0,i?1:0):Tz(i)?(t.filterData=i.data,Iz(i.visibility)):(t.filterData=void 0,Iz(i))};t.prototype.hasTreeNode=function(t,n){if(n===void 0){n=this.root}if(!t||t.length===0)return!0;var i=t[0],r=t.slice(1);return!(i<0||i>n.children.length)&&this.hasTreeNode(r,n.children[i])};t.prototype.getTreeNode=function(t,n){if(n===void 0){n=this.root}if(!t||t.length===0)return n;var i=t[0],r=t.slice(1);if(i<0||i>n.children.length)throw new jz(this.user,"Invalid tree location");return this.getTreeNode(r,n.children[i])};t.prototype.getTreeNodeWithListIndex=function(t){if(t.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};var n=this.getParentNodeWithListIndex(t),i=n.parentNode,r=n.listIndex,e=n.revealed,o=n.visible,s=t[t.length-1];if(s<0||s>i.children.length)throw new jz(this.user,"Invalid tree location");var u=i.children[s];return{node:u,listIndex:r,revealed:e,visible:o&&u.visible}};t.prototype.getParentNodeWithListIndex=function(t,n,i,r,e){if(n===void 0){n=this.root}if(i===void 0){i=0}if(r===void 0){r=!0}if(e===void 0){e=!0}var o=t[0],s=t.slice(1);if(o<0||o>n.children.length)throw new jz(this.user,"Invalid tree location");for(var u=0;u<o;u++)i+=n.children[u].renderNodeCount;return r=r&&!n.collapsed,e=e&&n.visible,s.length===0?{parentNode:n,listIndex:i,revealed:r,visible:e}:this.getParentNodeWithListIndex(s,n.children[o],i+1,r,e)};t.prototype.getNode=function(t){if(t===void 0){t=[]}return this.getTreeNode(t)};t.prototype.getNodeLocation=function(t){var n=[];var i=t;for(;i.parent;)n.push(i.parent.children.indexOf(i)),i=i.parent;return n.reverse()};t.prototype.getParentNodeLocation=function(t){return t.length===0?void 0:t.length===1?[]:function(t){if(t.length===0)throw new Error("Invalid tail call");return[t.slice(0,t.length-1),t[t.length-1]]}(t)[0]};t.prototype.getFirstElementChild=function(t){var n=this.getTreeNode(t);if(n.children.length!==0)return n.children[0].element};return t}();var Pz=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n.elements.map((function(t){return t.element})))||this,i.data=n;return i}return n}(IN);function Wz(t){return t instanceof IN?new Pz(t):t}var Hz=function(){function t(t,n){this.modelProvider=t,this.dnd=n,this.autoExpandDisposable=ci.None,this.disposables=new hi}t.prototype.getDragURI=function(t){return this.dnd.getDragURI(t.element)};t.prototype.getDragLabel=function(t,n){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(t.map((function(t){return t.element})),n)};t.prototype.onDragStart=function(t,n){var i,r;(r=(i=this.dnd).onDragStart)===null||r===void 0||r.call(i,Wz(t),n)};t.prototype.onDragOver=function(t,n,i,r,e,o){var s=this;if(o===void 0){o=!0}var u=this.dnd.onDragOver(Wz(t),n&&n.element,i,r,e),a=this.autoExpandNode!==n;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=n),n===void 0)return u;if(a&&typeof u!="boolean"&&u.autoExpand&&(this.autoExpandDisposable=Fs((function(){var t=s.modelProvider(),i=t.getNodeLocation(n);t.isCollapsed(i)&&t.setCollapsed(i,!1),s.autoExpandNode=void 0}),500,this.disposables)),typeof u=="boolean"||!u.accept||u.bubble===void 0||u.feedback)return o?u:{accept:typeof u=="boolean"?u:u.accept,effect:typeof u=="boolean"?void 0:u.effect,feedback:[i]};if(u.bubble===1){var h=this.modelProvider(),c=h.getNodeLocation(n),f=h.getParentNodeLocation(c),l=h.getNode(f),v=f&&h.getListIndex(f);return this.onDragOver(t,l,v,r,e,!1)}var d=this.modelProvider(),g=d.getNodeLocation(n),p=d.getListIndex(g),w=d.getListRenderCount(g);return __assign(__assign({},u),{feedback:S(p,p+w)})};t.prototype.drop=function(t,n,i,r,e){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(Wz(t),n&&n.element,i,r,e)};t.prototype.onDragEnd=function(t){var n,i;(i=(n=this.dnd).onDragEnd)===null||i===void 0||i.call(n,t)};t.prototype.dispose=function(){this.disposables.dispose(),this.dnd.dispose()};return t}();var zz=function(){function t(t){this.delegate=t}t.prototype.getHeight=function(t){return this.delegate.getHeight(t.element)};t.prototype.getTemplateId=function(t){return this.delegate.getTemplateId(t.element)};t.prototype.hasDynamicHeight=function(t){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(t.element)};t.prototype.setDynamicHeight=function(t,n){var i,r;(r=(i=this.delegate).setDynamicHeight)===null||r===void 0||r.call(i,t.element,n)};return t}();(function(t){t.None="none",t.OnHover="onHover",t.Always="always"})(Mz||(Mz={}));var Uz=function(){function t(t,n){if(n===void 0){n=[]}var i=this;this._elements=n,this.disposables=new hi,this.onDidChange=wi.forEach(t,(function(t){return i._elements=t}),this.disposables)}Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:false,configurable:true});t.prototype.dispose=function(){this.disposables.dispose()};return t}();var Kz=function(){function t(n,i,r,e,o,s){if(s===void 0){s={}}var u;this.renderer=n,this.modelProvider=i,this.activeNodes=e,this.renderedIndentGuides=o,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=t.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=ci.None,this.disposables=new hi,this.templateId=n.templateId,this.updateOptions(s),wi.map(r,(function(t){return t.node}))(this.onDidChangeNodeTwistieState,this,this.disposables),(u=n.onDidChangeTwistieState)===null||u===void 0||u.call(n,this.onDidChangeTwistieState,this,this.disposables)}t.prototype.updateOptions=function(t){if(t===void 0){t={}}if(t.indent!==void 0){var n=mj(t.indent,0,40);if(n!==this.indent){this.indent=n;for(var i=0,r=this.renderedNodes;i<r.length;i++){var e=r[i],o=e[0],s=e[1];this.renderTreeElement(o,s)}}}if(t.renderIndentGuides!==void 0){var n=t.renderIndentGuides!==Mz.None;if(n!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=n;for(var u=0,a=this.renderedNodes;u<a.length;u++){var h=a[u],o=h[0],s=h[1];this._renderIndentGuides(o,s)}if(this.indentGuidesDisposable.dispose(),n){var o=new hi;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,o),this.indentGuidesDisposable=o,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}t.hideTwistiesOfChildlessElements!==void 0&&(this.hideTwistiesOfChildlessElements=t.hideTwistiesOfChildlessElements)};t.prototype.renderTemplate=function(t){var n=vh(t,bh(".monaco-tl-row")),i=vh(n,bh(".monaco-tl-indent")),r=vh(n,bh(".monaco-tl-twistie")),e=vh(n,bh(".monaco-tl-contents")),o=this.renderer.renderTemplate(e);return{container:t,indent:i,twistie:r,indentGuidesDisposable:ci.None,templateData:o}};t.prototype.renderElement=function(t,n,i,r){this.renderedNodes.set(t,i),this.renderedElements.set(t.element,t),this.renderTreeElement(t,i),this.renderer.renderElement(t,n,i.templateData,r)};t.prototype.disposeElement=function(t,n,i,r){var e,o;i.indentGuidesDisposable.dispose(),(o=(e=this.renderer).disposeElement)===null||o===void 0||o.call(e,t,n,i.templateData,r),typeof r=="number"&&(this.renderedNodes.delete(t),this.renderedElements.delete(t.element))};t.prototype.disposeTemplate=function(t){this.renderer.disposeTemplate(t.templateData)};t.prototype.onDidChangeTwistieState=function(t){var n=this.renderedElements.get(t);n&&this.onDidChangeNodeTwistieState(n)};t.prototype.onDidChangeNodeTwistieState=function(t){var n=this.renderedNodes.get(t);n&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(t,n))};t.prototype.renderTreeElement=function(n,i){var r,e;var o=t.DefaultIndent+(n.depth-1)*this.indent;i.twistie.style.paddingLeft="".concat(o,"px"),i.indent.style.width=o+this.indent-16+"px",n.collapsible?i.container.setAttribute("aria-expanded",String(!n.collapsed)):i.container.removeAttribute("aria-expanded"),(r=i.twistie.classList).remove.apply(r,uc.asClassNameArray(Hr.treeItemExpanded));var s=!1;this.renderer.renderTwistie&&(s=this.renderer.renderTwistie(n.element,i.twistie)),n.collapsible&&(!this.hideTwistiesOfChildlessElements||n.visibleChildrenCount>0)?(s||(e=i.twistie.classList).add.apply(e,uc.asClassNameArray(Hr.treeItemExpanded)),i.twistie.classList.add("collapsible"),i.twistie.classList.toggle("collapsed",n.collapsed)):i.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(n,i)};t.prototype._renderIndentGuides=function(t,n){var i=this;if(pa(n.indent),n.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;var r=new hi,e=this.modelProvider();var o=function(){var o=e.getNodeLocation(t),u=e.getParentNodeLocation(o);if(!u)return"break";var a=e.getNode(u),h=bh(".indent-guide",{style:"width: ".concat(s.indent,"px")});s.activeIndentNodes.has(a)&&h.classList.add("active"),n.indent.childElementCount===0?n.indent.appendChild(h):n.indent.insertBefore(h,n.indent.firstElementChild),s.renderedIndentGuides.add(a,h),r.add(ai((function(){return i.renderedIndentGuides.delete(a,h)}))),t=a};var s=this;for(;;){var u=o();if(u==="break")break}n.indentGuidesDisposable=r};t.prototype._onDidChangeActiveNodes=function(t){var n=this;if(!this.shouldRenderIndentGuides)return;var i=new Set,r=this.modelProvider();t.forEach((function(t){var n=r.getNodeLocation(t);try{var e=r.getParentNodeLocation(n);t.collapsible&&t.children.length>0&&!t.collapsed?i.add(t):e&&i.add(r.getNode(e))}catch(t){}})),this.activeIndentNodes.forEach((function(t){i.has(t)||n.renderedIndentGuides.forEach(t,(function(t){return t.classList.remove("active")}))})),i.forEach((function(t){n.activeIndentNodes.has(t)||n.renderedIndentGuides.forEach(t,(function(t){return t.classList.add("active")}))})),this.activeIndentNodes=i};t.prototype.dispose=function(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),si(this.disposables)};return t}();Kz.DefaultIndent=8;var Vz=function(){function t(t,n,i){this.tree=t,this.keyboardNavigationLabelProvider=n,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new hi,t.onWillRefilter(this.reset,this,this.disposables)}Object.defineProperty(t.prototype,"totalCount",{get:function(){return this._totalCount},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"matchCount",{get:function(){return this._matchCount},enumerable:false,configurable:true});t.prototype.filter=function(t,n){var i=1;if(this._filter){var r=this._filter.filter(t,n);if(i=typeof r=="boolean"?r?1:0:Tz(r)?Iz(r.visibility):r,i===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:MT.Default,visibility:i};var e=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t),o=Array.isArray(e)?e:[e];for(var s=0,u=o;s<u.length;s++){var r=u[s];var a=r&&r.toString();if(a===void 0)return{data:MT.Default,visibility:i};var h=void 0;if(this.tree.findMatchType===Lz.Contiguous){var c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){h=[Number.MAX_SAFE_INTEGER,0];for(var f=this._lowercasePattern.length;f>0;f--)h.push(c+f-1)}}else h=LT(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(h)return this._matchCount++,o.length===1?{data:h,visibility:i}:{data:{label:a,score:h},visibility:i}}return this.tree.findMode===Fz.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(t):2:{data:MT.Default,visibility:i}};t.prototype.reset=function(){this._totalCount=0,this._matchCount=0};t.prototype.dispose=function(){si(this.disposables)};return t}();(function(t){t[t.Highlight=0]="Highlight",t[t.Filter=1]="Filter"})(Fz||(Fz={})),function(t){t[t.Fuzzy=0]="Fuzzy",t[t.Contiguous=1]="Contiguous"}(Lz||(Lz={}));var qz=function(){function t(t,n,i,r,e,o){if(o===void 0){o={}}var s,u;this.tree=t,this.view=i,this.filter=r,this.contextViewProvider=e,this.options=o,this._pattern="",this.width=0,this._onDidChangeMode=new ki,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new ki,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new ki,this._onDidChangeOpenState=new ki,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new hi,this.disposables=new hi,this._mode=(s=t.options.defaultFindMode)!==null&&s!==void 0?s:Fz.Highlight,this._matchType=(u=t.options.defaultFindMatchType)!==null&&u!==void 0?u:Lz.Fuzzy,n.onDidSplice(this.onDidSpliceModel,this,this.disposables)}Object.defineProperty(t.prototype,"pattern",{get:function(){return this._pattern},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(t){t!==this._mode&&(this._mode=t,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(t))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"matchType",{get:function(){return this._matchType},set:function(t){t!==this._matchType&&(this._matchType=t,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(t))},enumerable:false,configurable:true});t.prototype.updateOptions=function(t){if(t===void 0){t={}}t.defaultFindMode!==void 0&&(this.mode=t.defaultFindMode),t.defaultFindMatchType!==void 0&&(this.matchType=t.defaultFindMatchType)};t.prototype.onDidSpliceModel=function(){this.widget&&this.pattern.length!==0&&(this.tree.refilter(),this.render())};t.prototype.render=function(){var t,n,i,r;var e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(t=this.tree.options.showNotFoundMessage)===null||t===void 0||t?(n=this.widget)===null||n===void 0||n.showMessage({type:2,content:ht(0,"No elements found.")}):(i=this.widget)===null||i===void 0||i.showMessage({type:2}):(r=this.widget)===null||r===void 0||r.clearMessage()};t.prototype.shouldAllowFocus=function(t){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1||!MT.isDefault(t.filterData)};t.prototype.layout=function(t){var n;this.width=t,(n=this.widget)===null||n===void 0||n.layout(t)};t.prototype.dispose=function(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()};return t}();function Gz(t,n){return t.position===n.position&&$z(t,n)}function $z(t,n){return t.node.element===n.node.element&&t.startIndex===n.startIndex&&t.height===n.height&&t.endIndex===n.endIndex}var Jz=function(){function t(t){if(t===void 0){t=[]}this.stickyNodes=t}Object.defineProperty(t.prototype,"count",{get:function(){return this.stickyNodes.length},enumerable:false,configurable:true});t.prototype.equal=function(t){return v(this.stickyNodes,t.stickyNodes,Gz)};t.prototype.lastNodePartiallyVisible=function(){if(this.count===0)return!1;var t=this.stickyNodes[this.count-1];if(this.count===1)return t.position!==0;var n=this.stickyNodes[this.count-2];return n.position+n.height!==t.position};t.prototype.animationStateChanged=function(t){if(!v(this.stickyNodes,t.stickyNodes,$z)||this.count===0)return!1;var n=this.stickyNodes[this.count-1],i=t.stickyNodes[t.count-1];return n.position!==i.position};return t}();var Zz=function(){function t(){}t.prototype.constrainStickyScrollNodes=function(t,n,i){for(var r=0;r<t.length;r++){var e=t[r];if(e.position+e.height>i||r>=n)return t.slice(0,r)}return t};return t}();var Qz=function(t){__extends(n,t);function n(n,i,r,e,o,s){if(s===void 0){s={}}var u=this;var a;u=t.call(this)||this,u.tree=n,u.model=i,u.view=r,u.treeDelegate=o,u.maxWidgetViewRatio=.4;var h=u.validateStickySettings(s);u.stickyScrollMaxItemCount=h.stickyScrollMaxItemCount,u.stickyScrollDelegate=(a=s.stickyScrollDelegate)!==null&&a!==void 0?a:new Zz,u._widget=u._register(new Yz(r.getScrollableElement(),r,n,e,o,s.accessibilityProvider)),u.onDidChangeHasFocus=u._widget.onDidChangeHasFocus,u.onContextMenu=u._widget.onContextMenu,u._register(r.onDidScroll((function(){return u.update()}))),u._register(r.onDidChangeContentHeight((function(){return u.update()}))),u._register(n.onDidChangeCollapseState((function(){return u.update()}))),u.update();return u}Object.defineProperty(n.prototype,"height",{get:function(){return this._widget.height},enumerable:false,configurable:true});n.prototype.getNodeAtHeight=function(t){var n;if(n=t===0?this.view.firstVisibleIndex:this.view.indexAt(t+this.view.scrollTop),!(n<0||n>=this.view.length))return this.view.element(n)};n.prototype.update=function(){var t=this.getNodeAtHeight(0);if(!t||this.tree.scrollTop===0)return void this._widget.setState(void 0);var n=this.findStickyState(t);this._widget.setState(n)};n.prototype.findStickyState=function(t){var n=[];var i=t,r=0,e=this.getNextStickyNode(i,void 0,r);for(;e&&(n.push(e),r+=e.height,!(n.length<=this.stickyScrollMaxItemCount)||(i=this.getNextVisibleNode(e),i));)e=this.getNextStickyNode(i,e.node,r);var o=this.constrainStickyNodes(n);return o.length?new Jz(o):void 0};n.prototype.getNextVisibleNode=function(t){return this.getNodeAtHeight(t.position+t.height)};n.prototype.getNextStickyNode=function(t,n,i){var r=this.getAncestorUnderPrevious(t,n);if(r)return r===t&&(!this.nodeIsUncollapsedParent(t)||this.nodeTopAlignsWithStickyNodesBottom(t,i))?void 0:this.createStickyScrollNode(r,i)};n.prototype.nodeTopAlignsWithStickyNodesBottom=function(t,n){var i=this.getNodeIndex(t),r=this.view.getElementTop(i),e=n;return this.view.scrollTop===r-e};n.prototype.createStickyScrollNode=function(t,n){var i=this.treeDelegate.getHeight(t),r=this.getNodeRange(t),e=r.startIndex,o=r.endIndex;return{node:t,position:this.calculateStickyNodePosition(o,n,i),height:i,startIndex:e,endIndex:o}};n.prototype.getAncestorUnderPrevious=function(t,n){if(n===void 0){n=void 0}var i=t,r=this.getParentNode(i);for(;r;){if(r===n)return i;i=r,r=this.getParentNode(i)}if(n===void 0)return i};n.prototype.calculateStickyNodePosition=function(t,n,i){var r=this.view.getRelativeTop(t);if(r===null&&this.view.firstVisibleIndex===t&&t+1<this.view.length){var e=this.treeDelegate.getHeight(this.view.element(t)),o=this.view.getRelativeTop(t+1);r=o?o-e/this.view.renderHeight:null}if(r===null)return n;var s=this.view.element(t),u=this.treeDelegate.getHeight(s),a=r*this.view.renderHeight+u;return n+i>a&&n<=a?a-i:n};n.prototype.constrainStickyNodes=function(t){if(t.length===0)return[];var n=this.view.renderHeight*this.maxWidgetViewRatio,i=t[t.length-1];if(t.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=n)return t;var r=this.stickyScrollDelegate.constrainStickyScrollNodes(t,this.stickyScrollMaxItemCount,n);if(!r.length)return[];var e=r[r.length-1];if(r.length>this.stickyScrollMaxItemCount||e.position+e.height>n)throw new Error("stickyScrollDelegate violates constraints");return r};n.prototype.getParentNode=function(t){var n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return i?this.model.getNode(i):void 0};n.prototype.nodeIsUncollapsedParent=function(t){var n=this.model.getNodeLocation(t);return this.model.getListRenderCount(n)>1};n.prototype.getNodeIndex=function(t){var n=this.model.getNodeLocation(t);return this.model.getListIndex(n)};n.prototype.getNodeRange=function(t){var n=this.model.getNodeLocation(t),i=this.model.getListIndex(n);if(i<0)throw new Error("Node not found in tree");return{startIndex:i,endIndex:i+this.model.getListRenderCount(n)-1}};n.prototype.nodePositionTopBelowWidget=function(t){var n=[];var i=this.getParentNode(t);for(;i;)n.push(i),i=this.getParentNode(i);var r=0;for(var e=0;e<n.length&&e<this.stickyScrollMaxItemCount;e++)r+=this.treeDelegate.getHeight(n[e]);return r};n.prototype.domFocus=function(){this._widget.domFocus()};n.prototype.focusedLast=function(){return this._widget.focusedLast()};n.prototype.updateOptions=function(t){if(t===void 0){t={}}if(!t.stickyScrollMaxItemCount)return;var n=this.validateStickySettings(t);this.stickyScrollMaxItemCount!==n.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=n.stickyScrollMaxItemCount,this.update())};n.prototype.validateStickySettings=function(t){var n=7;return typeof t.stickyScrollMaxItemCount=="number"&&(n=Math.max(t.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:n}};return n}(ci),Yz=function(){function t(t,n,i,r,e,o){this.view=n,this.tree=i,this.treeRenderers=r,this.treeDelegate=e,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new hi,this._rootDomNode=bh(".monaco-tree-sticky-container.empty"),t.appendChild(this._rootDomNode);var s=bh(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(s),this.stickyScrollFocus=new Xz(this._rootDomNode,n),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}Object.defineProperty(t.prototype,"height",{get:function(){if(!this._previousState)return 0;var t=this._previousState.stickyNodes[this._previousState.count-1];return t.position+t.height},enumerable:false,configurable:true});t.prototype.setState=function(t){var n=!!this._previousState&&this._previousState.count>0,i=!!t&&t.count>0;if(!n&&!i||n&&i&&this._previousState.equal(t))return;if(n!==i&&this.setVisible(i),!i)return this._previousState=void 0,this._previousElements=[],void this._previousStateDisposables.clear();var r=t.stickyNodes[t.count-1];if(this._previousState&&t.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top="".concat(r.position,"px");else{this._previousStateDisposables.clear();var e=Array(t.count);for(var o=t.count-1;o>=0;o--){var s=t.stickyNodes[o],u=this.createElement(s,o,t.count),a=u.element,h=u.disposable;e[o]=a,this._rootDomNode.appendChild(a),this._previousStateDisposables.add(h)}this.stickyScrollFocus.updateElements(e,t),this._previousElements=e}this._previousState=t,this._rootDomNode.style.height="".concat(r.position+r.height,"px")};t.prototype.createElement=function(t,n,i){var r=t.startIndex,e=document.createElement("div");e.style.top="".concat(t.position,"px"),this.tree.options.setRowHeight!==!1&&(e.style.height="".concat(t.height,"px")),this.tree.options.setRowLineHeight!==!1&&(e.style.lineHeight="".concat(t.height,"px")),e.classList.add("monaco-tree-sticky-row"),e.classList.add("monaco-list-row"),e.setAttribute("data-index","".concat(r)),e.setAttribute("data-parity",r%2==0?"even":"odd"),e.setAttribute("id",this.view.getElementID(r));var o=this.setAccessibilityAttributes(e,t.node.element,n,i),s=this.treeDelegate.getTemplateId(t.node),u=this.treeRenderers.find((function(t){return t.templateId===s}));if(!u)throw new Error("No renderer found for template id ".concat(s));var a=t.node;a===this.tree.getNode(this.tree.getNodeLocation(t.node))&&(a=new Proxy(t.node,{}));var h=u.renderTemplate(e);u.renderElement(a,t.startIndex,h,t.height);var c=ai((function(){o.dispose(),u.disposeElement(a,t.startIndex,h,t.height),u.disposeTemplate(h),e.remove()}));return{element:e,disposable:c}};t.prototype.setAccessibilityAttributes=function(t,n,i,r){var e;if(!this.accessibilityProvider)return ci.None;this.accessibilityProvider.getSetSize&&t.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(n,i,r))),this.accessibilityProvider.getPosInSet&&t.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(n,i))),this.accessibilityProvider.getRole&&t.setAttribute("role",(e=this.accessibilityProvider.getRole(n))!==null&&e!==void 0?e:"treeitem");var o=this.accessibilityProvider.getAriaLabel(n),s=o&&typeof o!="string"?o:wP(o),u=lP((function(n){var i=n.readObservable(s);i?t.setAttribute("aria-label",i):t.removeAttribute("aria-label")}));typeof o=="string"||o&&t.setAttribute("aria-label",o.get());var a=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(n);return typeof a=="number"&&t.setAttribute("aria-level","".concat(a)),t.setAttribute("aria-selected",String(!1)),u};t.prototype.setVisible=function(t){this._rootDomNode.classList.toggle("empty",!t),t||this.stickyScrollFocus.updateElements([],void 0)};t.prototype.domFocus=function(){this.stickyScrollFocus.domFocus()};t.prototype.focusedLast=function(){return this.stickyScrollFocus.focusedLast()};t.prototype.dispose=function(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()};return t}();var Xz=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.container=n,r.view=i,r.focusedIndex=-1,r.elements=[],r._onDidChangeHasFocus=new ki,r.onDidChangeHasFocus=r._onDidChangeHasFocus.event,r._onContextMenu=new ki,r.onContextMenu=r._onContextMenu.event,r._domHasFocus=!1,r.container.addEventListener("focus",(function(){return r.onFocus()})),r.container.addEventListener("blur",(function(){return r.onBlur()})),r._register(r.view.onDidFocus((function(){return r.toggleStickyScrollFocused(!1)}))),r._register(r.view.onKeyDown((function(t){return r.onKeyDown(t)}))),r._register(r.view.onMouseDown((function(t){return r.onMouseDown(t)}))),r._register(r.view.onContextMenu((function(t){return r.handleContextMenu(t)})));return r}Object.defineProperty(n.prototype,"domHasFocus",{get:function(){return this._domHasFocus},set:function(t){t!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(t),this._domHasFocus=t)},enumerable:false,configurable:true});n.prototype.handleContextMenu=function(t){var n=t.browserEvent.target;if(!BP(n)&&!IP(n))return void(this.focusedLast()&&this.view.domFocus());if(!uh(t.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");var i=this.state.stickyNodes.findIndex((function(n){var i;return n.node.element===((i=t.element)===null||i===void 0?void 0:i.element)}));if(i===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");return this.container.focus(),void this.setFocus(i)}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");var r=this.state.stickyNodes[this.focusedIndex].node.element,e=this.elements[this.focusedIndex];this._onContextMenu.fire({element:r,anchor:e,browserEvent:t.browserEvent,isStickyScroll:!0})};n.prototype.onKeyDown=function(t){if(this.domHasFocus&&this.state){if(t.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),t.preventDefault(),t.stopPropagation();else if(t.key==="ArrowDown"||t.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){var n=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([n]),this.scrollNodeUnderWidget(n,this.state)}else this.setFocusedElement(this.focusedIndex+1);t.preventDefault(),t.stopPropagation()}}};n.prototype.onMouseDown=function(t){var n=t.browserEvent.target;(BP(n)||IP(n))&&(t.browserEvent.preventDefault(),t.browserEvent.stopPropagation())};n.prototype.updateElements=function(t,n){if(n&&n.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(n&&n.count!==t.length)throw new Error("Sticky scroll focus received illigel state");var i=this.focusedIndex;if(this.removeFocus(),this.elements=t,this.state=n,n){var r=mj(i,0,n.count-1);this.setFocus(r)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=n?0:-1};n.prototype.setFocusedElement=function(t){var n=this.state;if(!n)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(t),!(t<n.count-1)&&n.lastNodePartiallyVisible()){var i=n.stickyNodes[t];this.scrollNodeUnderWidget(i.endIndex+1,n)}};n.prototype.scrollNodeUnderWidget=function(t,n){var i=n.stickyNodes[n.count-1],r=n.count>1?n.stickyNodes[n.count-2]:void 0,e=this.view.getElementTop(t),o=r?r.position+r.height+i.height:i.height;this.view.scrollTop=e-o};n.prototype.domFocus=function(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()};n.prototype.focusedLast=function(){return!!this.state&&this.view.getHTMLElement().classList.contains("sticky-scroll-focused")};n.prototype.removeFocus=function(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)};n.prototype.setFocus=function(t){if(0>t)throw new Error("addFocus() can not remove focus");if(!this.state&&t>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&t>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");var n=this.focusedIndex;n>=0&&this.toggleElementFocus(this.elements[n],!1),t>=0&&this.toggleElementFocus(this.elements[t],!0),this.focusedIndex=t};n.prototype.toggleElementFocus=function(t,n){this.toggleElementActiveFocus(t,n&&this.domHasFocus),this.toggleElementPassiveFocus(t,n)};n.prototype.toggleCurrentElementActiveFocus=function(t){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],t)};n.prototype.toggleElementActiveFocus=function(t,n){t.classList.toggle("focused",n)};n.prototype.toggleElementPassiveFocus=function(t,n){t.classList.toggle("passive-focused",n)};n.prototype.toggleStickyScrollFocused=function(t){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",t)};n.prototype.onFocus=function(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)};n.prototype.onBlur=function(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)};n.prototype.dispose=function(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),t.prototype.dispose.call(this)};return n}(ci);function tU(t){var n=Ez.Unknown;return Wa(t.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?n=Ez.Twistie:Wa(t.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?n=Ez.Element:Wa(t.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(n=Ez.Filter),{browserEvent:t.browserEvent,element:t.element?t.element.element:null,target:n}}function nU(t){var n=BP(t.browserEvent.target);return{element:t.element?t.element.element:null,browserEvent:t.browserEvent,anchor:t.anchor,isStickyScroll:n}}function iU(t,n){n(t),t.children.forEach((function(t){return iU(t,n)}))}var rU=function(){function t(t,n){this.getFirstViewElementWithTrait=t,this.identityProvider=n,this.nodes=[],this._onDidChange=new ki,this.onDidChange=this._onDidChange.event}Object.defineProperty(t.prototype,"nodeSet",{get:function(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet},enumerable:false,configurable:true});t.prototype.set=function(t,n){!(n!=null&&n.__forceEvent)&&v(this.nodes,t)||this._set(t,!1,n)};t.prototype._set=function(t,n,i){if(this.nodes=__spreadArray([],t,true),this.elements=void 0,this._nodeSet=void 0,!n){var r=this;this._onDidChange.fire({get elements(){return r.get()},browserEvent:i})}};t.prototype.get=function(){return this.elements||(this.elements=this.nodes.map((function(t){return t.element}))),__spreadArray([],this.elements,true)};t.prototype.getNodes=function(){return this.nodes};t.prototype.has=function(t){return this.nodeSet.has(t)};t.prototype.onDidModelSplice=function(t){var n=this;var i=t.insertedNodes,r=t.deletedNodes;if(!this.identityProvider){var e=this.createNodeSet(),o=function(t){return e.delete(t)};return r.forEach((function(t){return iU(t,o)})),void this.set(__spreadArray([],e.values(),true))}var s=new Set,u=function(t){return s.add(n.identityProvider.getId(t.element).toString())};r.forEach((function(t){return iU(t,u)}));var a=new Map,h=function(t){return a.set(n.identityProvider.getId(t.element).toString(),t)};i.forEach((function(t){return iU(t,h)}));var c=[];for(var f=0,l=this.nodes;f<l.length;f++){var v=l[f];var d=this.identityProvider.getId(v.element).toString();if(s.has(d)){var g=a.get(d);g&&g.visible&&c.push(g)}else c.push(v)}if(this.nodes.length>0&&c.length===0){var v=this.getFirstViewElementWithTrait();v&&c.push(v)}this._set(c,!0)};t.prototype.createNodeSet=function(){var t=new Set;for(var n=0,i=this.nodes;n<i.length;n++){var r=i[n];t.add(r)}return t};return t}();var eU=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n)||this,e.tree=i,e.stickyScrollProvider=r;return e}n.prototype.onViewPointer=function(n){if(NP(n.browserEvent.target)||jP(n.browserEvent.target)||TP(n.browserEvent.target)||n.browserEvent.isHandledByList)return;var i=n.element;if(!i)return t.prototype.onViewPointer.call(this,n);if(this.isSelectionRangeChangeEvent(n)||this.isSelectionSingleChangeEvent(n))return t.prototype.onViewPointer.call(this,n);var r=n.browserEvent.target,e=r.classList.contains("monaco-tl-twistie")||r.classList.contains("monaco-icon-label")&&r.classList.contains("folder-icon")&&n.browserEvent.offsetX<16,o=IP(n.browserEvent.target);var s=!1;if(s=!!o||(typeof this.tree.expandOnlyOnTwistieClick=="function"?this.tree.expandOnlyOnTwistieClick(i.element):!!this.tree.expandOnlyOnTwistieClick),o)this.handleStickyScrollMouseEvent(n,i);else{if(s&&!e&&n.browserEvent.detail!==2)return t.prototype.onViewPointer.call(this,n);if(!this.tree.expandOnDoubleClick&&n.browserEvent.detail===2)return t.prototype.onViewPointer.call(this,n)}if(i.collapsible&&(!o||e)){var u=this.tree.getNodeLocation(i),a=n.browserEvent.altKey;if(this.tree.setFocus([u]),this.tree.toggleCollapsed(u,a),s&&e)return void(n.browserEvent.isHandledByList=!0)}o||t.prototype.onViewPointer.call(this,n)};n.prototype.handleStickyScrollMouseEvent=function(t,n){if(function(t){return RP(t,"monaco-custom-toggle")}(t.browserEvent.target)||function(t){return RP(t,"action-item")}(t.browserEvent.target))return;var i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");var r=this.list.indexOf(n),e=this.list.getElementTop(r),o=i.nodePositionTopBelowWidget(n);this.tree.scrollTop=e-o,this.list.domFocus(),this.list.setFocus([r]),this.list.setSelection([r])};n.prototype.onDoubleClick=function(n){!n.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&(n.browserEvent.isHandledByList||t.prototype.onDoubleClick.call(this,n))};n.prototype.onMouseDown=function(n){var i=n.browserEvent.target;BP(i)||IP(i)||t.prototype.onMouseDown.call(this,n)};n.prototype.onContextMenu=function(n){var i=n.browserEvent.target;BP(i)||IP(i)||t.prototype.onContextMenu.call(this,n)};return n}($P);var oU=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a){var h=this;h=t.call(this,n,i,r,e,a)||this,h.focusTrait=o,h.selectionTrait=s,h.anchorTrait=u;return h}n.prototype.createMouseController=function(t){return new eU(this,t.tree,t.stickyScrollProvider)};n.prototype.splice=function(n,i,r){var e=this;if(r===void 0){r=[]}if(t.prototype.splice.call(this,n,i,r),r.length===0)return;var o=[],s=[];var u;r.forEach((function(t,i){e.focusTrait.has(t)&&o.push(n+i),e.selectionTrait.has(t)&&s.push(n+i),e.anchorTrait.has(t)&&(u=n+i)})),o.length>0&&t.prototype.setFocus.call(this,x(__spreadArray(__spreadArray([],t.prototype.getFocus.call(this),true),o,true))),s.length>0&&t.prototype.setSelection.call(this,x(__spreadArray(__spreadArray([],t.prototype.getSelection.call(this),true),s,true))),typeof u=="number"&&t.prototype.setAnchor.call(this,u)};n.prototype.setFocus=function(n,i,r){var e=this;if(r===void 0){r=!1}t.prototype.setFocus.call(this,n,i),r||this.focusTrait.set(n.map((function(t){return e.element(t)})),i)};n.prototype.setSelection=function(n,i,r){var e=this;if(r===void 0){r=!1}t.prototype.setSelection.call(this,n,i),r||this.selectionTrait.set(n.map((function(t){return e.element(t)})),i)};n.prototype.setAnchor=function(n,i){if(i===void 0){i=!1}t.prototype.setAnchor.call(this,n),i||(n===void 0?this.anchorTrait.set([]):this.anchorTrait.set([this.element(n)]))};return n}(rW);var sU=function(){function t(t,n,i,r,e){if(e===void 0){e={}}var o=this;var s;this._user=t,this._options=e,this.eventBufferer=new Oi,this.onDidChangeFindOpenState=wi.None,this.onDidChangeStickyScrollFocused=wi.None,this.disposables=new hi,this._onWillRefilter=new ki,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new ki,this.treeDelegate=new zz(i);var u=new Ei,a=new Ei,h=this.disposables.add(new Uz(a.event)),c=new hd;this.renderers=r.map((function(t){return new Kz(t,(function(){return o.model}),u.event,h,c,e)}));for(var f=0,l=this.renderers;f<l.length;f++){var v=l[f];this.disposables.add(v)}var d;var g,p;e.keyboardNavigationLabelProvider&&(d=new Vz(this,e.keyboardNavigationLabelProvider,e.filter),e=__assign(__assign({},e),{filter:d}),this.disposables.add(d)),this.focus=new rU((function(){return o.view.getFocusedElements()[0]}),e.identityProvider),this.selection=new rU((function(){return o.view.getSelectedElements()[0]}),e.identityProvider),this.anchor=new rU((function(){return o.view.getAnchorElement()}),e.identityProvider),this.view=new oU(t,n,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,__assign(__assign({},(g=function(){return o.model},p=e,p&&__assign(__assign({},p),{identityProvider:p.identityProvider&&{getId:function(t){return p.identityProvider.getId(t.element)}},dnd:p.dnd&&new Hz(g,p.dnd),multipleSelectionController:p.multipleSelectionController&&{isSelectionSingleChangeEvent:function(t){return p.multipleSelectionController.isSelectionSingleChangeEvent(__assign(__assign({},t),{element:t.element}))},isSelectionRangeChangeEvent:function(t){return p.multipleSelectionController.isSelectionRangeChangeEvent(__assign(__assign({},t),{element:t.element}))}},accessibilityProvider:p.accessibilityProvider&&__assign(__assign({},p.accessibilityProvider),{getSetSize:function(t){var n=g(),i=n.getNodeLocation(t),r=n.getParentNodeLocation(i);return n.getNode(r).visibleChildrenCount},getPosInSet:function(t){return t.visibleChildIndex+1},isChecked:p.accessibilityProvider&&p.accessibilityProvider.isChecked?function(t){return p.accessibilityProvider.isChecked(t.element)}:void 0,getRole:p.accessibilityProvider&&p.accessibilityProvider.getRole?function(t){return p.accessibilityProvider.getRole(t.element)}:function(){return"treeitem"},getAriaLabel:function(t){return p.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel:function(){return p.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:p.accessibilityProvider&&p.accessibilityProvider.getWidgetRole?function(){return p.accessibilityProvider.getWidgetRole()}:function(){return"tree"},getAriaLevel:p.accessibilityProvider&&p.accessibilityProvider.getAriaLevel?function(t){return p.accessibilityProvider.getAriaLevel(t.element)}:function(t){return t.depth},getActiveDescendantId:p.accessibilityProvider.getActiveDescendantId&&function(t){return p.accessibilityProvider.getActiveDescendantId(t.element)}}),keyboardNavigationLabelProvider:p.keyboardNavigationLabelProvider&&__assign(__assign({},p.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel:function(t){return p.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}})}))),{tree:this,stickyScrollProvider:function(){return o.stickyScrollController}})),this.model=this.createModel(t,this.view,e),u.input=this.model.onDidChangeCollapseState;var w=wi.forEach(this.model.onDidSplice,(function(t){o.eventBufferer.bufferEvents((function(){o.focus.onDidModelSplice(t),o.selection.onDidModelSplice(t)}))}),this.disposables);w((function(){return null}),null,this.disposables);var m=this.disposables.add(new ki),b=this.disposables.add(new Os(0));if(this.disposables.add(wi.any(w,this.focus.onDidChange,this.selection.onDidChange)((function(){b.trigger((function(){var t=new Set;for(var n=0,i=o.focus.getNodes();n<i.length;n++){var r=i[n];t.add(r)}for(var e=0,s=o.selection.getNodes();e<s.length;e++){var r=s[e];t.add(r)}m.fire(__spreadArray([],t.values(),true))}))}))),a.input=m.event,e.keyboardSupport!==!1){var v=wi.chain(this.view.onKeyDown,(function(t){return t.filter((function(t){return!jP(t.target)})).map((function(t){return new ws(t)}))}));wi.chain(v,(function(t){return t.filter((function(t){return t.keyCode===15}))}))(this.onLeftArrow,this,this.disposables),wi.chain(v,(function(t){return t.filter((function(t){return t.keyCode===17}))}))(this.onRightArrow,this,this.disposables),wi.chain(v,(function(t){return t.filter((function(t){return t.keyCode===10}))}))(this.onSpace,this,this.disposables)}if(((s=e.findWidgetEnabled)===null||s===void 0||s)&&e.keyboardNavigationLabelProvider&&e.contextViewProvider){var v=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new qz(this,this.model,this.view,d,e.contextViewProvider,v),this.focusNavigationFilter=function(t){return o.findController.shouldAllowFocus(t)},this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=wi.None,this.onDidChangeFindMatchType=wi.None;e.enableStickyScroll&&(this.stickyScrollController=new Qz(this,this.model,this.view,this.renderers,this.treeDelegate,e),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Qa(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Mz.Always)}Object.defineProperty(t.prototype,"onDidScroll",{get:function(){return this.view.onDidScroll},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeFocus",{get:function(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeSelection",{get:function(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseDblClick",{get:function(){return wi.filter(wi.map(this.view.onMouseDblClick,tU),(function(t){return t.target!==Ez.Filter}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseOver",{get:function(){return wi.map(this.view.onMouseOver,tU)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseOut",{get:function(){return wi.map(this.view.onMouseOut,tU)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onContextMenu",{get:function(){var t,n;return wi.any(wi.filter(wi.map(this.view.onContextMenu,nU),(function(t){return!t.isStickyScroll})),(n=(t=this.stickyScrollController)===null||t===void 0?void 0:t.onContextMenu)!==null&&n!==void 0?n:wi.None)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onPointer",{get:function(){return wi.map(this.view.onPointer,tU)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onKeyDown",{get:function(){return this.view.onKeyDown},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidFocus",{get:function(){return this.view.onDidFocus},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeModel",{get:function(){return wi.signal(this.model.onDidSplice)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeCollapseState",{get:function(){return this.model.onDidChangeCollapseState},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"findMode",{get:function(){var t,n;return(n=(t=this.findController)===null||t===void 0?void 0:t.mode)!==null&&n!==void 0?n:Fz.Highlight},set:function(t){this.findController&&(this.findController.mode=t)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"findMatchType",{get:function(){var t,n;return(n=(t=this.findController)===null||t===void 0?void 0:t.matchType)!==null&&n!==void 0?n:Lz.Fuzzy},set:function(t){this.findController&&(this.findController.matchType=t)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"expandOnDoubleClick",{get:function(){return this._options.expandOnDoubleClick===void 0||this._options.expandOnDoubleClick},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"expandOnlyOnTwistieClick",{get:function(){return this._options.expandOnlyOnTwistieClick===void 0||this._options.expandOnlyOnTwistieClick},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidDispose",{get:function(){return this.view.onDidDispose},enumerable:false,configurable:true});t.prototype.updateOptions=function(t){if(t===void 0){t={}}var n;this._options=__assign(__assign({},this._options),t);for(var i=0,r=this.renderers;i<r.length;i++){var e=r[i];e.updateOptions(t)}this.view.updateOptions(this._options),(n=this.findController)===null||n===void 0||n.updateOptions(t),this.updateStickyScroll(t),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===Mz.Always)};Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:false,configurable:true});t.prototype.updateStickyScroll=function(t){var n;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new Qz(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=wi.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(n=this.stickyScrollController)===null||n===void 0||n.updateOptions(t)};t.prototype.getHTMLElement=function(){return this.view.getHTMLElement()};Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.view.scrollTop},set:function(t){this.view.scrollTop=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"scrollHeight",{get:function(){return this.view.scrollHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"renderHeight",{get:function(){return this.view.renderHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"ariaLabel",{get:function(){return this.view.ariaLabel},set:function(t){this.view.ariaLabel=t},enumerable:false,configurable:true});t.prototype.domFocus=function(){var t;!((t=this.stickyScrollController)===null||t===void 0)&&t.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()};t.prototype.layout=function(t,n){var i;this.view.layout(t,n),K(n)&&((i=this.findController)===null||i===void 0||i.layout(n))};t.prototype.style=function(t){var n;var i=".".concat(this.view.domId),r=[];t.treeIndentGuidesStroke&&(r.push(".monaco-list".concat(i,":hover .monaco-tl-indent > .indent-guide, .monaco-list").concat(i,".always .monaco-tl-indent > .indent-guide  { border-color: ").concat(t.treeInactiveIndentGuidesStroke,"; }")),r.push(".monaco-list".concat(i," .monaco-tl-indent > .indent-guide.active { border-color: ").concat(t.treeIndentGuidesStroke,"; }"))),t.listBackground&&(r.push(".monaco-list".concat(i," .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ").concat(t.listBackground,"; }")),r.push(".monaco-list".concat(i," .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ").concat(t.listBackground,"; }"))),t.listFocusForeground&&(r.push(".monaco-list".concat(i,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ").concat(t.listFocusForeground,"; }")),r.push(".monaco-list".concat(i,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }")));var e=Dh(t.listFocusAndSelectionOutline,Dh(t.listSelectionOutline,(n=t.listFocusOutline)!==null&&n!==void 0?n:""));e&&(r.push(".monaco-list".concat(i,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ").concat(e,"; outline-offset: -1px;}")),r.push(".monaco-list".concat(i,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}"))),t.listFocusOutline&&(r.push(".monaco-list".concat(i,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ").concat(t.listFocusOutline,"; outline-offset: -1px; }")),r.push(".monaco-list".concat(i,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }")),r.push(".monaco-workbench.context-menu-visible .monaco-list".concat(i,".last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ").concat(t.listFocusOutline,"; outline-offset: -1px; }")),r.push(".monaco-workbench.context-menu-visible .monaco-list".concat(i,".last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }")),r.push(".monaco-workbench.context-menu-visible .monaco-list".concat(i,".last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }"))),this.styleElement.textContent=r.join("\n"),this.view.style(t)};t.prototype.getParentElement=function(t){var n=this.model.getParentNodeLocation(t);return this.model.getNode(n).element};t.prototype.getFirstElementChild=function(t){return this.model.getFirstElementChild(t)};t.prototype.getNode=function(t){return this.model.getNode(t)};t.prototype.getNodeLocation=function(t){return this.model.getNodeLocation(t)};t.prototype.collapse=function(t,n){if(n===void 0){n=!1}return this.model.setCollapsed(t,!0,n)};t.prototype.expand=function(t,n){if(n===void 0){n=!1}return this.model.setCollapsed(t,!1,n)};t.prototype.toggleCollapsed=function(t,n){if(n===void 0){n=!1}return this.model.setCollapsed(t,void 0,n)};t.prototype.isCollapsible=function(t){return this.model.isCollapsible(t)};t.prototype.setCollapsible=function(t,n){return this.model.setCollapsible(t,n)};t.prototype.isCollapsed=function(t){return this.model.isCollapsed(t)};t.prototype.refilter=function(){this._onWillRefilter.fire(void 0),this.model.refilter()};t.prototype.setSelection=function(t,n){var i=this;this.eventBufferer.bufferEvents((function(){var r=t.map((function(t){return i.model.getNode(t)}));i.selection.set(r,n);var e=t.map((function(t){return i.model.getListIndex(t)})).filter((function(t){return t>-1}));i.view.setSelection(e,n,!0)}))};t.prototype.getSelection=function(){return this.selection.get()};t.prototype.setFocus=function(t,n){var i=this;this.eventBufferer.bufferEvents((function(){var r=t.map((function(t){return i.model.getNode(t)}));i.focus.set(r,n);var e=t.map((function(t){return i.model.getListIndex(t)})).filter((function(t){return t>-1}));i.view.setFocus(e,n,!0)}))};t.prototype.focusNext=function(t,n,i,r){if(t===void 0){t=1}if(n===void 0){n=!1}if(r===void 0){r=uh(i)&&i.altKey?void 0:this.focusNavigationFilter}this.view.focusNext(t,n,i,r)};t.prototype.focusPrevious=function(t,n,i,r){if(t===void 0){t=1}if(n===void 0){n=!1}if(r===void 0){r=uh(i)&&i.altKey?void 0:this.focusNavigationFilter}this.view.focusPrevious(t,n,i,r)};t.prototype.focusNextPage=function(t,n){if(n===void 0){n=uh(t)&&t.altKey?void 0:this.focusNavigationFilter}return this.view.focusNextPage(t,n)};t.prototype.focusPreviousPage=function(t,n){var i=this;if(n===void 0){n=uh(t)&&t.altKey?void 0:this.focusNavigationFilter}return this.view.focusPreviousPage(t,n,(function(){var t,n;return(n=(t=i.stickyScrollController)===null||t===void 0?void 0:t.height)!==null&&n!==void 0?n:0}))};t.prototype.focusFirst=function(t,n){if(n===void 0){n=uh(t)&&t.altKey?void 0:this.focusNavigationFilter}this.view.focusFirst(t,n)};t.prototype.getFocus=function(){return this.focus.get()};t.prototype.reveal=function(t,n){this.model.expandTo(t);var i=this.model.getListIndex(t);if(i!==-1)if(this.stickyScrollController){var r=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(t));this.view.reveal(i,n,r)}else this.view.reveal(i,n)};t.prototype.onLeftArrow=function(t){t.preventDefault(),t.stopPropagation();var n=this.view.getFocusedElements();if(n.length===0)return;var i=n[0],r=this.model.getNodeLocation(i);if(!this.model.setCollapsed(r,!0)){var e=this.model.getParentNodeLocation(r);if(!e)return;var o=this.model.getListIndex(e);this.view.reveal(o),this.view.setFocus([o])}};t.prototype.onRightArrow=function(t){t.preventDefault(),t.stopPropagation();var n=this.view.getFocusedElements();if(n.length===0)return;var i=n[0],r=this.model.getNodeLocation(i);if(!this.model.setCollapsed(r,!1)){if(!i.children.some((function(t){return t.visible})))return;var e=this.view.getFocus()[0],o=e+1;this.view.reveal(o),this.view.setFocus([o])}};t.prototype.onSpace=function(t){t.preventDefault(),t.stopPropagation();var n=this.view.getFocusedElements();if(n.length===0)return;var i=n[0],r=this.model.getNodeLocation(i),e=t.browserEvent.altKey;this.model.setCollapsed(r,void 0,e)};t.prototype.dispose=function(){var t;si(this.disposables),(t=this.stickyScrollController)===null||t===void 0||t.dispose(),this.view.dispose()};return t}();var uU=function(){function t(t,n,i){if(i===void 0){i={}}this.user=t,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new Nz(t,n,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare:function(t,n){return i.sorter.compare(t.element,n.element)}}),this.identityProvider=i.identityProvider}t.prototype.setChildren=function(t,n,i){if(n===void 0){n=Yt.empty()}if(i===void 0){i={}}var r=this.getElementLocation(t);this._setChildren(r,this.preserveCollapseState(n),i)};t.prototype._setChildren=function(t,n,i){var r=this;if(n===void 0){n=Yt.empty()}var e=new Set,o=new Set;this.model.splice(__spreadArray(__spreadArray([],t,true),[0],false),Number.MAX_VALUE,n,__assign(__assign({},i),{onDidCreateNode:function(t){var n;if(t.element===null)return;var s=t;if(e.add(s.element),r.nodes.set(s.element,s),r.identityProvider){var u=r.identityProvider.getId(s.element).toString();o.add(u),r.nodesByIdentity.set(u,s)}(n=i.onDidCreateNode)===null||n===void 0||n.call(i,s)},onDidDeleteNode:function(t){var n;if(t.element===null)return;var s=t;if(e.has(s.element)||r.nodes.delete(s.element),r.identityProvider){var u=r.identityProvider.getId(s.element).toString();o.has(u)||r.nodesByIdentity.delete(u)}(n=i.onDidDeleteNode)===null||n===void 0||n.call(i,s)}}))};t.prototype.preserveCollapseState=function(t){var n=this;if(t===void 0){t=Yt.empty()}return this.sorter&&(t=__spreadArray([],t,true).sort(this.sorter.compare.bind(this.sorter))),Yt.map(t,(function(t){var i=n.nodes.get(t.element);if(!i&&n.identityProvider){var r=n.identityProvider.getId(t.element).toString();i=n.nodesByIdentity.get(r)}if(!i){var r=void 0;return r=t.collapsed===void 0?void 0:t.collapsed===Oz.Collapsed||t.collapsed===Oz.PreserveOrCollapsed||t.collapsed!==Oz.Expanded&&t.collapsed!==Oz.PreserveOrExpanded&&!!t.collapsed,__assign(__assign({},t),{children:n.preserveCollapseState(t.children),collapsed:r})}var e=typeof t.collapsible=="boolean"?t.collapsible:i.collapsible;var o;return o=t.collapsed===void 0||t.collapsed===Oz.PreserveOrCollapsed||t.collapsed===Oz.PreserveOrExpanded?i.collapsed:t.collapsed===Oz.Collapsed||t.collapsed!==Oz.Expanded&&!!t.collapsed,__assign(__assign({},t),{collapsible:e,collapsed:o,children:n.preserveCollapseState(t.children)})}))};t.prototype.rerender=function(t){var n=this.getElementLocation(t);this.model.rerender(n)};t.prototype.getFirstElementChild=function(t){if(t===void 0){t=null}var n=this.getElementLocation(t);return this.model.getFirstElementChild(n)};t.prototype.has=function(t){return this.nodes.has(t)};t.prototype.getListIndex=function(t){var n=this.getElementLocation(t);return this.model.getListIndex(n)};t.prototype.getListRenderCount=function(t){var n=this.getElementLocation(t);return this.model.getListRenderCount(n)};t.prototype.isCollapsible=function(t){var n=this.getElementLocation(t);return this.model.isCollapsible(n)};t.prototype.setCollapsible=function(t,n){var i=this.getElementLocation(t);return this.model.setCollapsible(i,n)};t.prototype.isCollapsed=function(t){var n=this.getElementLocation(t);return this.model.isCollapsed(n)};t.prototype.setCollapsed=function(t,n,i){var r=this.getElementLocation(t);return this.model.setCollapsed(r,n,i)};t.prototype.expandTo=function(t){var n=this.getElementLocation(t);this.model.expandTo(n)};t.prototype.refilter=function(){this.model.refilter()};t.prototype.getNode=function(t){if(t===void 0){t=null}if(t===null)return this.model.getNode(this.model.rootRef);var n=this.nodes.get(t);if(!n)throw new jz(this.user,"Tree element not found: ".concat(t));return n};t.prototype.getNodeLocation=function(t){return t.element};t.prototype.getParentNodeLocation=function(t){if(t===null)throw new jz(this.user,"Invalid getParentNodeLocation call");var n=this.nodes.get(t);if(!n)throw new jz(this.user,"Tree element not found: ".concat(t));var i=this.model.getNodeLocation(n),r=this.model.getParentNodeLocation(i);return this.model.getNode(r).element};t.prototype.getElementLocation=function(t){if(t===null)return[];var n=this.nodes.get(t);if(!n)throw new jz(this.user,"Tree element not found: ".concat(t));return this.model.getNodeLocation(n)};return t}();function aU(t){return{element:{elements:[t.element],incompressible:t.incompressible||!1},children:Yt.map(Yt.from(t.children),aU),collapsible:t.collapsible,collapsed:t.collapsed}}function hU(t){var n;var i=[t.element],r=t.incompressible||!1;var e,o;for(;n=Yt.consume(Yt.from(t.children),2),o=n[0],e=n[1],o.length===1&&!o[0].incompressible;)t=o[0],i.push(t.element);return{element:{elements:i,incompressible:r},children:Yt.map(Yt.concat(o,e),hU),collapsible:t.collapsible,collapsed:t.collapsed}}function cU(t,n){if(n===void 0){n=0}var i;return i=n<t.element.elements.length-1?[cU(t,n+1)]:Yt.map(Yt.from(t.children),(function(t){return cU(t,0)})),n===0&&t.element.incompressible?{element:t.element.elements[n],children:i,incompressible:!0,collapsible:t.collapsible,collapsed:t.collapsed}:{element:t.element.elements[n],children:i,collapsible:t.collapsible,collapsed:t.collapsed}}function fU(t){return cU(t,0)}function lU(t,n,i){return t.element===n?__assign(__assign({},t),{children:i}):__assign(__assign({},t),{children:Yt.map(Yt.from(t.children),(function(t){return lU(t,n,i)}))})}var vU=function(){function t(t,n,i){if(i===void 0){i={}}this.user=t,this.rootRef=null,this.nodes=new Map,this.model=new uU(t,n,i),this.enabled=i.compressionEnabled===void 0||i.compressionEnabled,this.identityProvider=i.identityProvider}Object.defineProperty(t.prototype,"onDidSplice",{get:function(){return this.model.onDidSplice},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeCollapseState",{get:function(){return this.model.onDidChangeCollapseState},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeRenderNodeCount",{get:function(){return this.model.onDidChangeRenderNodeCount},enumerable:false,configurable:true});t.prototype.setChildren=function(t,n,i){if(n===void 0){n=Yt.empty()}var r=i.diffIdentityProvider&&(e=i.diffIdentityProvider,{getId:function(t){return t.elements.map((function(t){return e.getId(t).toString()})).join("\0")}});var e;if(t===null){var o=Yt.map(n,this.enabled?hU:aU);return void this._setChildren(null,o,{diffIdentityProvider:r,diffDepth:1/0})}var s=this.nodes.get(t);if(!s)throw new jz(this.user,"Unknown compressed tree node");var u=this.model.getNode(s),a=this.model.getParentNodeLocation(s),h=this.model.getNode(a),c=lU(fU(u),t,n),f=(this.enabled?hU:aU)(c),l=i.diffIdentityProvider?function(t,n){return i.diffIdentityProvider.getId(t)===i.diffIdentityProvider.getId(n)}:void 0;if(v(f.element.elements,u.element.elements,l))return void this._setChildren(s,f.children||Yt.empty(),{diffIdentityProvider:r,diffDepth:1});var d=h.children.map((function(t){return t===u?f:t}));this._setChildren(h.element,d,{diffIdentityProvider:r,diffDepth:u.depth-h.depth})};t.prototype.isCompressionEnabled=function(){return this.enabled};t.prototype.setCompressionEnabled=function(t){if(t===this.enabled)return;this.enabled=t;var n=this.model.getNode().children,i=Yt.map(n,fU),r=Yt.map(i,t?hU:aU);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})};t.prototype._setChildren=function(t,n,i){var r=this;var e=new Set;this.model.setChildren(t,n,__assign(__assign({},i),{onDidCreateNode:function(t){for(var n=0,i=t.element.elements;n<i.length;n++){var o=i[n];e.add(o),r.nodes.set(o,t.element)}},onDidDeleteNode:function(t){for(var n=0,i=t.element.elements;n<i.length;n++){var o=i[n];e.has(o)||r.nodes.delete(o)}}}))};t.prototype.has=function(t){return this.nodes.has(t)};t.prototype.getListIndex=function(t){var n=this.getCompressedNode(t);return this.model.getListIndex(n)};t.prototype.getListRenderCount=function(t){var n=this.getCompressedNode(t);return this.model.getListRenderCount(n)};t.prototype.getNode=function(t){if(t===void 0)return this.model.getNode();var n=this.getCompressedNode(t);return this.model.getNode(n)};t.prototype.getNodeLocation=function(t){var n=this.model.getNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]};t.prototype.getParentNodeLocation=function(t){var n=this.getCompressedNode(t),i=this.model.getParentNodeLocation(n);return i===null?null:i.elements[i.elements.length-1]};t.prototype.getFirstElementChild=function(t){var n=this.getCompressedNode(t);return this.model.getFirstElementChild(n)};t.prototype.isCollapsible=function(t){var n=this.getCompressedNode(t);return this.model.isCollapsible(n)};t.prototype.setCollapsible=function(t,n){var i=this.getCompressedNode(t);return this.model.setCollapsible(i,n)};t.prototype.isCollapsed=function(t){var n=this.getCompressedNode(t);return this.model.isCollapsed(n)};t.prototype.setCollapsed=function(t,n,i){var r=this.getCompressedNode(t);return this.model.setCollapsed(r,n,i)};t.prototype.expandTo=function(t){var n=this.getCompressedNode(t);this.model.expandTo(n)};t.prototype.rerender=function(t){var n=this.getCompressedNode(t);this.model.rerender(n)};t.prototype.refilter=function(){this.model.refilter()};t.prototype.getCompressedNode=function(t){if(t===null)return null;var n=this.nodes.get(t);if(!n)throw new jz(this.user,"Tree element not found: ".concat(t));return n};return t}();var dU=function(t){return t[t.length-1]};var gU=function(){function t(t,n){this.unwrapper=t,this.node=n}Object.defineProperty(t.prototype,"element",{get:function(){return this.node.element===null?null:this.unwrapper(this.node.element)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"children",{get:function(){var n=this;return this.node.children.map((function(i){return new t(n.unwrapper,i)}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"depth",{get:function(){return this.node.depth},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visibleChildrenCount",{get:function(){return this.node.visibleChildrenCount},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visibleChildIndex",{get:function(){return this.node.visibleChildIndex},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"collapsible",{get:function(){return this.node.collapsible},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"collapsed",{get:function(){return this.node.collapsed},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return this.node.visible},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"filterData",{get:function(){return this.node.filterData},enumerable:false,configurable:true});return t}();var pU=function(){function t(t,n,i){if(i===void 0){i={}}var r=this;this.rootRef=null,this.elementMapper=i.elementMapper||dU;var e=function(t){return r.elementMapper(t.elements)};this.nodeMapper=new Rz((function(t){return new gU(e,t)})),this.model=new vU(t,function(t,n){return{splice:function(i,r,e){n.splice(i,r,e.map((function(n){return t.map(n)})))},updateElementHeight:function(t,i){n.updateElementHeight(t,i)}}}(this.nodeMapper,n),function(t,n){return __assign(__assign({},n),{identityProvider:n.identityProvider&&{getId:function(i){return n.identityProvider.getId(t(i))}},sorter:n.sorter&&{compare:function(t,i){return n.sorter.compare(t.elements[0],i.elements[0])}},filter:n.filter&&{filter:function(i,r){return n.filter.filter(t(i),r)}}})}(e,i))}Object.defineProperty(t.prototype,"onDidSplice",{get:function(){var t=this;return wi.map(this.model.onDidSplice,(function(n){var i=n.insertedNodes,r=n.deletedNodes;return{insertedNodes:i.map((function(n){return t.nodeMapper.map(n)})),deletedNodes:r.map((function(n){return t.nodeMapper.map(n)}))}}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeCollapseState",{get:function(){var t=this;return wi.map(this.model.onDidChangeCollapseState,(function(n){var i=n.node,r=n.deep;return{node:t.nodeMapper.map(i),deep:r}}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeRenderNodeCount",{get:function(){var t=this;return wi.map(this.model.onDidChangeRenderNodeCount,(function(n){return t.nodeMapper.map(n)}))},enumerable:false,configurable:true});t.prototype.setChildren=function(t,n,i){if(n===void 0){n=Yt.empty()}if(i===void 0){i={}}this.model.setChildren(t,n,i)};t.prototype.isCompressionEnabled=function(){return this.model.isCompressionEnabled()};t.prototype.setCompressionEnabled=function(t){this.model.setCompressionEnabled(t)};t.prototype.has=function(t){return this.model.has(t)};t.prototype.getListIndex=function(t){return this.model.getListIndex(t)};t.prototype.getListRenderCount=function(t){return this.model.getListRenderCount(t)};t.prototype.getNode=function(t){return this.nodeMapper.map(this.model.getNode(t))};t.prototype.getNodeLocation=function(t){return t.element};t.prototype.getParentNodeLocation=function(t){return this.model.getParentNodeLocation(t)};t.prototype.getFirstElementChild=function(t){var n=this.model.getFirstElementChild(t);return n==null?n:this.elementMapper(n.elements)};t.prototype.isCollapsible=function(t){return this.model.isCollapsible(t)};t.prototype.setCollapsible=function(t,n){return this.model.setCollapsible(t,n)};t.prototype.isCollapsed=function(t){return this.model.isCollapsed(t)};t.prototype.setCollapsed=function(t,n,i){return this.model.setCollapsed(t,n,i)};t.prototype.expandTo=function(t){return this.model.expandTo(t)};t.prototype.rerender=function(t){return this.model.rerender(t)};t.prototype.refilter=function(){return this.model.refilter()};t.prototype.getCompressedTreeNode=function(t){if(t===void 0){t=null}return this.model.getNode(t)};return t}();var wU=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s};var mU=function(t){__extends(n,t);function n(n,i,r,e,o){if(o===void 0){o={}}var s=this;s=t.call(this,n,i,r,e,o)||this,s.user=n;return s}Object.defineProperty(n.prototype,"onDidChangeCollapseState",{get:function(){return this.model.onDidChangeCollapseState},enumerable:false,configurable:true});n.prototype.setChildren=function(t,n,i){if(n===void 0){n=Yt.empty()}this.model.setChildren(t,n,i)};n.prototype.rerender=function(t){t!==void 0?this.model.rerender(t):this.view.rerender()};n.prototype.hasElement=function(t){return this.model.has(t)};n.prototype.createModel=function(t,n,i){return new uU(t,n,i)};return n}(sU);var bU=function(){function t(t,n,i){this._compressedTreeNodeProvider=t,this.stickyScrollDelegate=n,this.renderer=i,this.templateId=i.templateId,i.onDidChangeTwistieState&&(this.onDidChangeTwistieState=i.onDidChangeTwistieState)}Object.defineProperty(t.prototype,"compressedTreeNodeProvider",{get:function(){return this._compressedTreeNodeProvider()},enumerable:false,configurable:true});t.prototype.renderTemplate=function(t){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(t)}};t.prototype.renderElement=function(t,n,i,r){var e=this.stickyScrollDelegate.getCompressedNode(t);e||(e=this.compressedTreeNodeProvider.getCompressedTreeNode(t.element)),e.element.elements.length===1?(i.compressedTreeNode=void 0,this.renderer.renderElement(t,n,i.data,r)):(i.compressedTreeNode=e,this.renderer.renderCompressedElements(e,n,i.data,r))};t.prototype.disposeElement=function(t,n,i,r){var e,o,s,u;i.compressedTreeNode?(o=(e=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(e,i.compressedTreeNode,n,i.data,r):(u=(s=this.renderer).disposeElement)===null||u===void 0||u.call(s,t,n,i.data,r)};t.prototype.disposeTemplate=function(t){this.renderer.disposeTemplate(t.data)};t.prototype.renderTwistie=function(t,n){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(t,n)};return t}();wU([Y_],bU.prototype,"compressedTreeNodeProvider",null);var yU=function(){function t(t){this.modelProvider=t,this.compressedStickyNodes=new Map}t.prototype.getCompressedNode=function(t){return this.compressedStickyNodes.get(t)};t.prototype.constrainStickyScrollNodes=function(t,n,i){if(this.compressedStickyNodes.clear(),t.length===0)return[];for(var r=0;r<t.length;r++){var e=t[r],o=e.position+e.height;if(r+1<t.length&&o+t[r+1].height>i||r>=n-1&&n<t.length){var s=t.slice(0,r),u=t.slice(r);return __spreadArray(__spreadArray([],s,true),[this.compressStickyNodes(u)],false)}}return t};t.prototype.compressStickyNodes=function(t){if(t.length===0)throw new Error("Can't compress empty sticky nodes");if(!this.modelProvider().isCompressionEnabled())return t[0];var n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];var o=this.modelProvider().getCompressedTreeNode(e.node.element);if(o.element){if(o.element.incompressible)break;n.push.apply(n,o.element.elements)}}if(n.length<2)return t[0];var s=t[t.length-1],u={elements:n,incompressible:!1},a=__assign(__assign({},s.node),{children:[],element:u}),h=new Proxy(t[0].node,{}),c={node:h,startIndex:t[0].startIndex,endIndex:s.endIndex,position:t[0].position,height:t[0].height};return this.compressedStickyNodes.set(h,a),c};return t}();function _U(t,n){return n&&__assign(__assign({},n),{keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel:function(i){var r;try{r=t().getCompressedTreeNode(i)}catch(t){return n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return r.element.elements.length===1?n.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):n.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(r.element.elements)}}})}var kU=function(t){__extends(n,t);function n(n,i,r,e,o){if(o===void 0){o={}}var s=this;var u=function(){return s},a=new yU((function(){return s.model}));return s=t.call(this,n,i,r,e.map((function(t){return new bU(u,a,t)})),__assign(__assign({},_U(u,o)),{stickyScrollDelegate:a}))||this}n.prototype.setChildren=function(t,n,i){if(n===void 0){n=Yt.empty()}this.model.setChildren(t,n,i)};n.prototype.createModel=function(t,n,i){return new pU(t,n,i)};n.prototype.updateOptions=function(n){if(n===void 0){n={}}t.prototype.updateOptions.call(this,n),n.compressionEnabled!==void 0&&this.model.setCompressionEnabled(n.compressionEnabled)};n.prototype.getCompressedTreeNode=function(t){if(t===void 0){t=null}return this.model.getCompressedTreeNode(t)};return n}(mU);function xU(t){return __assign(__assign({},t),{children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1})}function CU(t,n){return!!n.parent&&(n.parent===t||CU(t,n.parent))}var SU=function(){function t(t){this.node=t}Object.defineProperty(t.prototype,"element",{get:function(){return this.node.element.element},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"children",{get:function(){return this.node.children.map((function(n){return new t(n)}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"depth",{get:function(){return this.node.depth},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visibleChildrenCount",{get:function(){return this.node.visibleChildrenCount},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visibleChildIndex",{get:function(){return this.node.visibleChildIndex},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"collapsible",{get:function(){return this.node.collapsible},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"collapsed",{get:function(){return this.node.collapsed},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return this.node.visible},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"filterData",{get:function(){return this.node.filterData},enumerable:false,configurable:true});return t}();var DU=function(){function t(t,n,i){this.renderer=t,this.nodeMapper=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=t.templateId}t.prototype.renderTemplate=function(t){return{templateData:this.renderer.renderTemplate(t)}};t.prototype.renderElement=function(t,n,i,r){this.renderer.renderElement(this.nodeMapper.map(t),n,i.templateData,r)};t.prototype.renderTwistie=function(t,n){var i,r;return t.slow?((i=n.classList).add.apply(i,uc.asClassNameArray(Hr.treeItemLoading)),!0):((r=n.classList).remove.apply(r,uc.asClassNameArray(Hr.treeItemLoading)),!1)};t.prototype.disposeElement=function(t,n,i,r){var e,o;(o=(e=this.renderer).disposeElement)===null||o===void 0||o.call(e,this.nodeMapper.map(t),n,i.templateData,r)};t.prototype.disposeTemplate=function(t){this.renderer.disposeTemplate(t.templateData)};t.prototype.dispose=function(){this.renderedNodes.clear()};return t}();function AU(t){return{browserEvent:t.browserEvent,elements:t.elements.map((function(t){return t.element}))}}function OU(t){return{browserEvent:t.browserEvent,element:t.element&&t.element.element,target:t.target}}var EU=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n.elements.map((function(t){return t.element})))||this,i.data=n;return i}return n}(IN);function MU(t){return t instanceof IN?new EU(t):t}var FU=function(){function t(t){this.dnd=t}t.prototype.getDragURI=function(t){return this.dnd.getDragURI(t.element)};t.prototype.getDragLabel=function(t,n){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(t.map((function(t){return t.element})),n)};t.prototype.onDragStart=function(t,n){var i,r;(r=(i=this.dnd).onDragStart)===null||r===void 0||r.call(i,MU(t),n)};t.prototype.onDragOver=function(t,n,i,r,e,o){if(o===void 0){o=!0}return this.dnd.onDragOver(MU(t),n&&n.element,i,r,e)};t.prototype.drop=function(t,n,i,r,e){this.dnd.drop(MU(t),n&&n.element,i,r,e)};t.prototype.onDragEnd=function(t){var n,i;(i=(n=this.dnd).onDragEnd)===null||i===void 0||i.call(n,t)};t.prototype.dispose=function(){this.dnd.dispose()};return t}();function LU(t){return t&&__assign(__assign({},t),{collapseByDefault:!0,identityProvider:t.identityProvider&&{getId:function(n){return t.identityProvider.getId(n.element)}},dnd:t.dnd&&new FU(t.dnd),multipleSelectionController:t.multipleSelectionController&&{isSelectionSingleChangeEvent:function(n){return t.multipleSelectionController.isSelectionSingleChangeEvent(__assign(__assign({},n),{element:n.element}))},isSelectionRangeChangeEvent:function(n){return t.multipleSelectionController.isSelectionRangeChangeEvent(__assign(__assign({},n),{element:n.element}))}},accessibilityProvider:t.accessibilityProvider&&__assign(__assign({},t.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:t.accessibilityProvider.getRole?function(n){return t.accessibilityProvider.getRole(n.element)}:function(){return"treeitem"},isChecked:t.accessibilityProvider.isChecked?function(n){var i;return!!(!((i=t.accessibilityProvider)===null||i===void 0)&&i.isChecked(n.element))}:void 0,getAriaLabel:function(n){return t.accessibilityProvider.getAriaLabel(n.element)},getWidgetAriaLabel:function(){return t.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:t.accessibilityProvider.getWidgetRole?function(){return t.accessibilityProvider.getWidgetRole()}:function(){return"tree"},getAriaLevel:t.accessibilityProvider.getAriaLevel&&function(n){return t.accessibilityProvider.getAriaLevel(n.element)},getActiveDescendantId:t.accessibilityProvider.getActiveDescendantId&&function(n){return t.accessibilityProvider.getActiveDescendantId(n.element)}}),filter:t.filter&&{filter:function(n,i){return t.filter.filter(n.element,i)}},keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&__assign(__assign({},t.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel:function(n){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n.element)}}),sorter:void 0,expandOnlyOnTwistieClick:t.expandOnlyOnTwistieClick===void 0?void 0:typeof t.expandOnlyOnTwistieClick!="function"?t.expandOnlyOnTwistieClick:function(n){return t.expandOnlyOnTwistieClick(n.element)},defaultFindVisibility:function(n){return n.hasChildren&&n.stale?1:typeof t.defaultFindVisibility=="number"?t.defaultFindVisibility:t.defaultFindVisibility===void 0?2:t.defaultFindVisibility(n.element)}})}function jU(t,n){n(t),t.children.forEach((function(t){return jU(t,n)}))}var RU=function(){function t(t,n,i,r,e,o){if(o===void 0){o={}}this.user=t,this.dataSource=e,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new ki,this._onDidChangeNodeSlowState=new ki,this.nodeMapper=new Rz((function(t){return new SU(t)})),this.disposables=new hi,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=o.autoExpandSingleChildren!==void 0&&o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=function(t){return o.collapseByDefault?o.collapseByDefault(t)?Oz.PreserveOrCollapsed:Oz.PreserveOrExpanded:void 0},this.tree=this.createTree(t,n,i,r,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=xU({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root=__assign(__assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}Object.defineProperty(t.prototype,"onDidScroll",{get:function(){return this.tree.onDidScroll},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeFocus",{get:function(){return wi.map(this.tree.onDidChangeFocus,AU)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeSelection",{get:function(){return wi.map(this.tree.onDidChangeSelection,AU)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onMouseDblClick",{get:function(){return wi.map(this.tree.onMouseDblClick,OU)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onPointer",{get:function(){return wi.map(this.tree.onPointer,OU)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidFocus",{get:function(){return this.tree.onDidFocus},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeModel",{get:function(){return this.tree.onDidChangeModel},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeCollapseState",{get:function(){return this.tree.onDidChangeCollapseState},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeFindOpenState",{get:function(){return this.tree.onDidChangeFindOpenState},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidChangeStickyScrollFocused",{get:function(){return this.tree.onDidChangeStickyScrollFocused},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidDispose",{get:function(){return this.tree.onDidDispose},enumerable:false,configurable:true});t.prototype.createTree=function(t,n,i,r,e){var o=this;var s=new zz(i),u=r.map((function(t){return new DU(t,o.nodeMapper,o._onDidChangeNodeSlowState.event)})),a=LU(e)||{};return new mU(t,n,s,u,a)};t.prototype.updateOptions=function(t){if(t===void 0){t={}}this.tree.updateOptions(t)};t.prototype.getHTMLElement=function(){return this.tree.getHTMLElement()};Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.tree.scrollTop},set:function(t){this.tree.scrollTop=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"scrollHeight",{get:function(){return this.tree.scrollHeight},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"renderHeight",{get:function(){return this.tree.renderHeight},enumerable:false,configurable:true});t.prototype.domFocus=function(){this.tree.domFocus()};t.prototype.layout=function(t,n){this.tree.layout(t,n)};t.prototype.style=function(t){this.tree.style(t)};t.prototype.getInput=function(){return this.root.element};t.prototype.setInput=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:this.refreshPromises.forEach((function(t){return t.cancel()})),this.refreshPromises.clear(),this.root.element=t;i=n&&{viewState:n,focus:[],selection:[]};return[4,this._updateChildren(t,!0,!1,i)];case 1:r.sent(),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),n&&typeof n.scrollTop=="number"&&(this.scrollTop=n.scrollTop);return[2]}}))}))};t.prototype._updateChildren=function(){return __awaiter(this,arguments,void 0,(function(t,n,i,r,e){var o,s;if(t===void 0){t=this.root.element}if(n===void 0){n=!0}if(i===void 0){i=!1}return __generator(this,(function(u){switch(u.label){case 0:if(this.root.element===void 0)throw new jz(this.user,"Tree input not set");o=this.root.refreshPromise;if(!o)return[3,3];return[4,this.root.refreshPromise];case 1:u.sent();return[4,wi.toPromise(this._onDidRender.event)];case 2:o=u.sent();u.label=3;case 3:o;s=this.getDataNode(t);return[4,this.refreshAndRenderNode(s,n,r,e)];case 4:if(u.sent(),i)try{this.tree.rerender(s)}catch(t){}return[2]}}))}))};t.prototype.rerender=function(t){if(t===void 0||t===this.root.element)return void this.tree.rerender();var n=this.getDataNode(t);this.tree.rerender(n)};t.prototype.getNode=function(t){if(t===void 0){t=this.root.element}var n=this.getDataNode(t),i=this.tree.getNode(n===this.root?null:n);return this.nodeMapper.map(i)};t.prototype.collapse=function(t,n){if(n===void 0){n=!1}var i=this.getDataNode(t);return this.tree.collapse(i===this.root?null:i,n)};t.prototype.expand=function(t){return __awaiter(this,arguments,void 0,(function(t,n){var i,r,e,o,s,u;if(n===void 0){n=!1}return __generator(this,(function(a){switch(a.label){case 0:if(this.root.element===void 0)throw new jz(this.user,"Tree input not set");i=this.root.refreshPromise;if(!i)return[3,3];return[4,this.root.refreshPromise];case 1:a.sent();return[4,wi.toPromise(this._onDidRender.event)];case 2:i=a.sent();a.label=3;case 3:i;r=this.getDataNode(t);e=this.tree.hasElement(r)&&!this.tree.isCollapsible(r);if(e)return[3,7];o=r.refreshPromise;if(!o)return[3,6];return[4,this.root.refreshPromise];case 4:a.sent();return[4,wi.toPromise(this._onDidRender.event)];case 5:o=a.sent();a.label=6;case 6:e=(o,r!==this.root&&!r.refreshPromise&&!this.tree.isCollapsed(r));a.label=7;case 7:if(e)return[2,!1];s=this.tree.expand(r===this.root?null:r,n);u=r.refreshPromise;if(!u)return[3,10];return[4,this.root.refreshPromise];case 8:a.sent();return[4,wi.toPromise(this._onDidRender.event)];case 9:u=a.sent();a.label=10;case 10:return[2,(u,s)]}}))}))};t.prototype.setSelection=function(t,n){var i=this;var r=t.map((function(t){return i.getDataNode(t)}));this.tree.setSelection(r,n)};t.prototype.getSelection=function(){return this.tree.getSelection().map((function(t){return t.element}))};t.prototype.setFocus=function(t,n){var i=this;var r=t.map((function(t){return i.getDataNode(t)}));this.tree.setFocus(r,n)};t.prototype.getFocus=function(){return this.tree.getFocus().map((function(t){return t.element}))};t.prototype.reveal=function(t,n){this.tree.reveal(this.getDataNode(t),n)};t.prototype.getParentElement=function(t){var n=this.tree.getParentElement(this.getDataNode(t));return n&&n.element};t.prototype.getFirstElementChild=function(t){if(t===void 0){t=this.root.element}var n=this.getDataNode(t),i=this.tree.getFirstElementChild(n===this.root?null:n);return i&&i.element};t.prototype.getDataNode=function(t){var n=this.nodes.get(t===this.root.element?null:t);if(!n)throw new jz(this.user,"Data tree node not found: ".concat(t));return n};t.prototype.refreshAndRenderNode=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.refreshNode(t,n,i)];case 1:e.sent(),this.disposables.isDisposed||this.render(t,i,r);return[2]}}))}))};t.prototype.refreshNode=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r;var e=this;return __generator(this,(function(o){return[2,(this.subTreeRefreshPromises.forEach((function(o,s){!r&&function(t,n){return t===n||CU(t,n)||CU(n,t)}(s,t)&&(r=o.then((function(){return e.refreshNode(t,n,i)})))})),r||(t!==this.root&&this.tree.getNode(t).collapsed?(t.hasChildren=!!this.dataSource.hasChildren(t.element),t.stale=!0,void this.setChildren(t,[],n,i)):this.doRefreshSubTree(t,n,i)))]}))}))};t.prototype.doRefreshSubTree=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e;var o=this;return __generator(this,(function(s){switch(s.label){case 0:t.refreshPromise=new Promise((function(t){return r=t})),this.subTreeRefreshPromises.set(t,t.refreshPromise),t.refreshPromise.finally((function(){t.refreshPromise=void 0,o.subTreeRefreshPromises.delete(t)}));s.label=1;case 1:s.trys.push([1,,4,5]);return[4,this.doRefreshNode(t,n,i)];case 2:e=s.sent();t.stale=!1;return[4,Hs.settled(e.map((function(t){return o.doRefreshSubTree(t,n,i)})))];case 3:s.sent();return[3,5];case 4:r();return[7];case 5:return[2]}}))}))};t.prototype.doRefreshNode=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,e,s;var u=this;return __generator(this,(function(a){switch(a.label){case 0:if(t.hasChildren=!!this.dataSource.hasChildren(t.element),t.hasChildren){e=this.doGetChildren(t);if(V(e))r=Promise.resolve(e);else{o=Ms(800);o.then((function(){t.slow=!0,u._onDidChangeNodeSlowState.fire(t)}),(function(t){return null})),r=e.finally((function(){return o.cancel()}))}}else r=Promise.resolve(Yt.empty());a.label=1;case 1:a.trys.push([1,3,4,5]);return[4,r];case 2:e=a.sent();return[2,this.setChildren(t,e,n,i)];case 3:s=a.sent();if(t!==this.root&&this.tree.hasElement(t)&&this.tree.collapse(t),Qn(s))return[2,[]];throw s;case 4:t.slow&&(t.slow=!1,this._onDidChangeNodeSlowState.fire(t));return[7];case 5:return[2]}}))}))};t.prototype.doGetChildren=function(t){var n=this;var i=this.refreshPromises.get(t);if(i)return i;var r=this.dataSource.getChildren(t.element);return V(r)?this.processChildren(r):(i=Ss((function(){return __awaiter(n,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t=this.processChildren;return[4,r];case 1:return[2,t.apply(this,[n.sent()])]}}))}))})),this.refreshPromises.set(t,i),i.finally((function(){n.refreshPromises.delete(t)})))};t.prototype._onDidChangeCollapseState=function(t){var n=t.node,i=t.deep;n.element!==null&&!n.collapsed&&n.element.stale&&(i?this.collapse(n.element.element):this.refreshAndRenderNode(n.element,!1).catch(Gn))};t.prototype.setChildren=function(t,n,i,r){var e;var o=this;var s=__spreadArray([],n,true);if(t.children.length===0&&s.length===0)return[];var u=new Map,a=new Map;for(var h=0,c=t.children;h<c.length;h++){var f=c[h];u.set(f.element,f),this.identityProvider&&a.set(f.id,{node:f,collapsed:this.tree.hasElement(f)&&this.tree.isCollapsed(f)})}var l=[],v=s.map((function(n){var e=!!o.dataSource.hasChildren(n);if(!o.identityProvider){var s=xU({element:n,parent:t,hasChildren:e,defaultCollapseState:o.getDefaultCollapseState(n)});return e&&s.defaultCollapseState===Oz.PreserveOrExpanded&&l.push(s),s}var h=o.identityProvider.getId(n).toString(),c=a.get(h);if(c){var s=c.node;return u.delete(s.element),o.nodes.delete(s.element),o.nodes.set(n,s),s.element=n,s.hasChildren=e,i?c.collapsed?(s.children.forEach((function(t){return jU(t,(function(t){return o.nodes.delete(t.element)}))})),s.children.splice(0,s.children.length),s.stale=!0):l.push(s):e&&!c.collapsed&&l.push(s),s}var f=xU({element:n,parent:t,id:h,hasChildren:e,defaultCollapseState:o.getDefaultCollapseState(n)});return r&&r.viewState.focus&&r.viewState.focus.indexOf(h)>-1&&r.focus.push(f),r&&r.viewState.selection&&r.viewState.selection.indexOf(h)>-1&&r.selection.push(f),(r&&r.viewState.expanded&&r.viewState.expanded.indexOf(h)>-1||e&&f.defaultCollapseState===Oz.PreserveOrExpanded)&&l.push(f),f}));for(var d=0,g=u.values();d<g.length;d++){var f=g[d];jU(f,(function(t){return o.nodes.delete(t.element)}))}for(var p=0,w=v;p<w.length;p++){var f=w[p];this.nodes.set(f.element,f)}return(e=t.children).splice.apply(e,__spreadArray([0,t.children.length],v,false)),t!==this.root&&this.autoExpandSingleChildren&&v.length===1&&l.length===0&&(v[0].forceExpanded=!0,l.push(v[0])),l};t.prototype.render=function(t,n,i){var r=this;var e=t.children.map((function(t){return r.asTreeElement(t,n)})),o=i&&__assign(__assign({},i),{diffIdentityProvider:i.diffIdentityProvider&&{getId:function(t){return i.diffIdentityProvider.getId(t.element)}}});this.tree.setChildren(t===this.root?null:t,e,o),t!==this.root&&this.tree.setCollapsible(t,t.hasChildren),this._onDidRender.fire()};t.prototype.asTreeElement=function(t,n){var i=this;if(t.stale)return{element:t,collapsible:t.hasChildren,collapsed:!0};var r;return n&&n.viewState.expanded&&t.id&&n.viewState.expanded.indexOf(t.id)>-1?r=!1:t.forceExpanded?(r=!1,t.forceExpanded=!1):r=t.defaultCollapseState,{element:t,children:t.hasChildren?Yt.map(t.children,(function(t){return i.asTreeElement(t,n)})):[],collapsible:t.hasChildren,collapsed:r}};t.prototype.processChildren=function(t){return this.sorter&&(t=__spreadArray([],t,true).sort(this.sorter.compare.bind(this.sorter))),t};t.prototype.dispose=function(){this.disposables.dispose(),this.tree.dispose()};return t}();var TU=function(){function t(t){this.node=t}Object.defineProperty(t.prototype,"element",{get:function(){return{elements:this.node.element.elements.map((function(t){return t.element})),incompressible:this.node.element.incompressible}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"children",{get:function(){return this.node.children.map((function(n){return new t(n)}))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"depth",{get:function(){return this.node.depth},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visibleChildrenCount",{get:function(){return this.node.visibleChildrenCount},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visibleChildIndex",{get:function(){return this.node.visibleChildIndex},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"collapsible",{get:function(){return this.node.collapsible},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"collapsed",{get:function(){return this.node.collapsed},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"visible",{get:function(){return this.node.visible},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"filterData",{get:function(){return this.node.filterData},enumerable:false,configurable:true});return t}();var IU=function(){function t(t,n,i,r){this.renderer=t,this.nodeMapper=n,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=r,this.renderedNodes=new Map,this.disposables=[],this.templateId=t.templateId}t.prototype.renderTemplate=function(t){return{templateData:this.renderer.renderTemplate(t)}};t.prototype.renderElement=function(t,n,i,r){this.renderer.renderElement(this.nodeMapper.map(t),n,i.templateData,r)};t.prototype.renderCompressedElements=function(t,n,i,r){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(t),n,i.templateData,r)};t.prototype.renderTwistie=function(t,n){var i,r;return t.slow?((i=n.classList).add.apply(i,uc.asClassNameArray(Hr.treeItemLoading)),!0):((r=n.classList).remove.apply(r,uc.asClassNameArray(Hr.treeItemLoading)),!1)};t.prototype.disposeElement=function(t,n,i,r){var e,o;(o=(e=this.renderer).disposeElement)===null||o===void 0||o.call(e,this.nodeMapper.map(t),n,i.templateData,r)};t.prototype.disposeCompressedElements=function(t,n,i,r){var e,o;(o=(e=this.renderer).disposeCompressedElements)===null||o===void 0||o.call(e,this.compressibleNodeMapperProvider().map(t),n,i.templateData,r)};t.prototype.disposeTemplate=function(t){this.renderer.disposeTemplate(t.templateData)};t.prototype.dispose=function(){this.renderedNodes.clear(),this.disposables=si(this.disposables)};return t}();var BU=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){if(u===void 0){u={}}var a=this;a=t.call(this,n,i,r,o,s,u)||this,a.compressionDelegate=e,a.compressibleNodeMapper=new Rz((function(t){return new TU(t)})),a.filter=u.filter;return a}n.prototype.createTree=function(t,n,i,r,e){var o=this;var s=new zz(i),u=r.map((function(t){return new IU(t,o.nodeMapper,(function(){return o.compressibleNodeMapper}),o._onDidChangeNodeSlowState.event)})),a=function(t){var n=t&&LU(t);return n&&__assign(__assign({},n),{keyboardNavigationLabelProvider:n.keyboardNavigationLabelProvider&&__assign(__assign({},n.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel:function(n){return t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.map((function(t){return t.element})))}})})}(e)||{};return new kU(t,n,s,u,a)};n.prototype.asTreeElement=function(n,i){return __assign({incompressible:this.compressionDelegate.isIncompressible(n.element)},t.prototype.asTreeElement.call(this,n,i))};n.prototype.updateOptions=function(t){if(t===void 0){t={}}this.tree.updateOptions(t)};n.prototype.render=function(n,i,r){var e=this;if(!this.identityProvider)return t.prototype.render.call(this,n,i);var o=function(t){return e.identityProvider.getId(t).toString()},s=function(t){var n=new Set;for(var i=0,r=t;i<r.length;i++){var s=r[i];var u=e.tree.getCompressedTreeNode(s===e.root?null:s);if(u.element)for(var a=0,h=u.element.elements;a<h.length;a++){var c=h[a];n.add(o(c.element))}}return n},u=s(this.tree.getSelection()),a=s(this.tree.getFocus());t.prototype.render.call(this,n,i,r);var h=this.getSelection();var c=!1;var f=this.getFocus();var l=!1;var v=function(t){var n=t.element;if(n)for(var i=0;i<n.elements.length;i++){var r=o(n.elements[i].element),e=n.elements[n.elements.length-1].element;u.has(r)&&h.indexOf(e)===-1&&(h.push(e),c=!0),a.has(r)&&f.indexOf(e)===-1&&(f.push(e),l=!0)}t.children.forEach(v)};v(this.tree.getCompressedTreeNode(n===this.root?null:n)),c&&this.setSelection(h),l&&this.setFocus(f)};n.prototype.processChildren=function(n){var i=this;return this.filter&&(n=Yt.filter(n,(function(t){var n=i.filter.filter(t,1),r=typeof(e=n)=="boolean"?e?1:0:Tz(e)?Iz(e.visibility):Iz(e);var e;if(r===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return r===1}))),t.prototype.processChildren.call(this,n)};return n}(RU);var NU=function(t){__extends(n,t);function n(n,i,r,e,o,s){if(s===void 0){s={}}var u=this;u=t.call(this,n,i,r,e,s)||this,u.user=n,u.dataSource=o,u.identityProvider=s.identityProvider;return u}n.prototype.createModel=function(t,n,i){return new uU(t,n,i)};return n}(sU);new qc("isMac",Ft,ht(0,"Whether the operating system is macOS")),new qc("isLinux",Lt,ht(0,"Whether the operating system is Linux"));var PU=new qc("isWindows",Mt,ht(0,"Whether the operating system is Windows")),WU=new qc("isWeb",Rt,ht(0,"Whether the platform is a web browser"));new qc("isMacNative",Ft&&!Rt,ht(0,"Whether the operating system is macOS on a non-browser platform")),new qc("isIOS",It,ht(0,"Whether the operating system is iOS")),new qc("isMobile",Bt,ht(0,"Whether the platform is a mobile web browser")),new qc("isDevelopment",!1,!0),new qc("productQualityType","",ht(0,"Quality type of VS Code"));var HU="inputFocus",zU=new qc(HU,!1,ht(0,"Whether keyboard focus is inside an input box"));var UU=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},KU=function(t,n){return function(i,r){n(i,r,t)}};var VU=Zh("listService"),qU=new qc("listScrollAtBoundary","none");Dc.or(qU.isEqualTo("top"),qU.isEqualTo("both")),Dc.or(qU.isEqualTo("bottom"),qU.isEqualTo("both"));var GU=new qc("listFocus",!0),$U=new qc("treestickyScrollFocused",!1),JU=new qc("listSupportsMultiselect",!0),ZU=Dc.and(GU,Dc.not(HU),$U.negate()),QU=new qc("listHasSelectionOrFocus",!1),YU=new qc("listDoubleSelection",!1),XU=new qc("listMultiSelection",!1),tK=new qc("listSelectionNavigation",!1),nK=new qc("listSupportsFind",!0),iK=new qc("treeElementCanCollapse",!1),rK=new qc("treeElementHasParent",!1),eK=new qc("treeElementCanExpand",!1),oK=new qc("treeElementHasChild",!1),sK=new qc("treeFindOpen",!1),uK="listTypeNavigationMode",aK="listAutomaticKeyboardNavigation";function hK(t,n){var i=t.createScoped(n.getHTMLElement());return GU.bindTo(i),i}function cK(t,n){var i=qU.bindTo(t),r=function(){var t=n.scrollTop===0,r=n.scrollHeight-n.renderHeight-n.scrollTop<1;t&&r?i.set("both"):t?i.set("top"):r?i.set("bottom"):i.set("none")};return r(),n.onDidScroll(r)}var fK="workbench.list.multiSelectModifier",lK="workbench.list.openMode",vK="workbench.list.horizontalScrolling",dK="workbench.list.defaultFindMode",gK="workbench.list.typeNavigationMode",pK="workbench.list.keyboardNavigation",wK="workbench.list.scrollByPage",mK="workbench.list.defaultFindMatchType",bK="workbench.tree.indent",yK="workbench.tree.renderIndentGuides",_K="workbench.list.smoothScrolling",kK="workbench.list.mouseWheelScrollSensitivity",xK="workbench.list.fastScrollSensitivity",CK="workbench.tree.expandMode",SK="workbench.tree.enableStickyScroll",DK="workbench.tree.stickyScrollMaxItemCount";function AK(t){return t.getValue(fK)==="alt"}var OK=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.configurationService=n,i.useAltAsMultipleSelectionModifier=AK(n),i.registerListeners();return i}n.prototype.registerListeners=function(){var t=this;this._register(this.configurationService.onDidChangeConfiguration((function(n){n.affectsConfiguration(fK)&&(t.useAltAsMultipleSelectionModifier=AK(t.configurationService))})))};n.prototype.isSelectionSingleChangeEvent=function(t){return this.useAltAsMultipleSelectionModifier?t.browserEvent.altKey:VP(t)};n.prototype.isSelectionRangeChangeEvent=function(t){return qP(t)};return n}(ci);function EK(t,n){var i;var r=t.get(Kl),e=t.get(Yx),o=new hi;return[__assign(__assign({},n),{keyboardNavigationDelegate:{mightProducePrintableCharacter:function(t){return e.mightProducePrintableCharacter(t)}},smoothScrolling:!!r.getValue(_K),mouseWheelScrollSensitivity:r.getValue(kK),fastScrollSensitivity:r.getValue(xK),multipleSelectionController:(i=n.multipleSelectionController)!==null&&i!==void 0?i:o.add(new OK(r)),keyboardNavigationEventFilter:BK(e),scrollByPage:!!r.getValue(wK)}),o]}var MK=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;var f=o.horizontalScrolling!==void 0?o.horizontalScrolling:!!a.getValue(vK),l=h.invokeFunction(EK,o),v=l[0],d=l[1];c=t.call(this,n,i,r,e,__assign(__assign({keyboardSupport:!1},v),{horizontalScrolling:f}))||this,c.disposables.add(d),c.contextKeyService=hK(s,c),c.disposables.add(cK(c.contextKeyService,c)),c.listSupportsMultiSelect=JU.bindTo(c.contextKeyService),c.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),tK.bindTo(c.contextKeyService).set(!!o.selectionNavigation),c.listHasSelectionOrFocus=QU.bindTo(c.contextKeyService),c.listDoubleSelection=YU.bindTo(c.contextKeyService),c.listMultiSelection=XU.bindTo(c.contextKeyService),c.horizontalScrolling=o.horizontalScrolling,c._useAltAsMultipleSelectionModifier=AK(a),c.disposables.add(c.contextKeyService),c.disposables.add(u.register(c)),c.updateStyles(o.overrideStyles),c.disposables.add(c.onDidChangeSelection((function(){var t=c.getSelection(),n=c.getFocus();c.contextKeyService.bufferChangeEvents((function(){c.listHasSelectionOrFocus.set(t.length>0||n.length>0),c.listMultiSelection.set(t.length>1),c.listDoubleSelection.set(t.length===2)}))}))),c.disposables.add(c.onDidChangeFocus((function(){var t=c.getSelection(),n=c.getFocus();c.listHasSelectionOrFocus.set(t.length>0||n.length>0)}))),c.disposables.add(a.onDidChangeConfiguration((function(t){t.affectsConfiguration(fK)&&(c._useAltAsMultipleSelectionModifier=AK(a));var n={};if(t.affectsConfiguration(vK)&&c.horizontalScrolling===void 0){var i=!!a.getValue(vK);n=__assign(__assign({},n),{horizontalScrolling:i})}if(t.affectsConfiguration(wK)){var i=!!a.getValue(wK);n=__assign(__assign({},n),{scrollByPage:i})}if(t.affectsConfiguration(_K)){var i=!!a.getValue(_K);n=__assign(__assign({},n),{smoothScrolling:i})}if(t.affectsConfiguration(kK)){var i=a.getValue(kK);n=__assign(__assign({},n),{mouseWheelScrollSensitivity:i})}if(t.affectsConfiguration(xK)){var i=a.getValue(xK);n=__assign(__assign({},n),{fastScrollSensitivity:i})}Object.keys(n).length>0&&c.updateOptions(n)}))),c.navigator=new RK(c,__assign({configurationService:a},o)),c.disposables.add(c.navigator);return c}n.prototype.updateOptions=function(n){t.prototype.updateOptions.call(this,n),n.overrideStyles!==void 0&&this.updateStyles(n.overrideStyles),n.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!n.multipleSelectionSupport)};n.prototype.updateStyles=function(t){this.style(t?LW(t):FW)};return n}(rW);MK=UU([KU(5,Gc),KU(6,VU),KU(7,Kl),KU(8,Jh)],MK);var FK=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;var f=o.horizontalScrolling!==void 0?o.horizontalScrolling:!!a.getValue(vK),l=h.invokeFunction(EK,o),v=l[0],d=l[1];c=t.call(this,n,i,r,e,__assign(__assign({keyboardSupport:!1},v),{horizontalScrolling:f}))||this,c.disposables=new hi,c.disposables.add(d),c.contextKeyService=hK(s,c),c.disposables.add(cK(c.contextKeyService,c.widget)),c.horizontalScrolling=o.horizontalScrolling,c.listSupportsMultiSelect=JU.bindTo(c.contextKeyService),c.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),tK.bindTo(c.contextKeyService).set(!!o.selectionNavigation),c._useAltAsMultipleSelectionModifier=AK(a),c.disposables.add(c.contextKeyService),c.disposables.add(u.register(c)),c.updateStyles(o.overrideStyles),c.disposables.add(a.onDidChangeConfiguration((function(t){t.affectsConfiguration(fK)&&(c._useAltAsMultipleSelectionModifier=AK(a));var n={};if(t.affectsConfiguration(vK)&&c.horizontalScrolling===void 0){var i=!!a.getValue(vK);n=__assign(__assign({},n),{horizontalScrolling:i})}if(t.affectsConfiguration(wK)){var i=!!a.getValue(wK);n=__assign(__assign({},n),{scrollByPage:i})}if(t.affectsConfiguration(_K)){var i=!!a.getValue(_K);n=__assign(__assign({},n),{smoothScrolling:i})}if(t.affectsConfiguration(kK)){var i=a.getValue(kK);n=__assign(__assign({},n),{mouseWheelScrollSensitivity:i})}if(t.affectsConfiguration(xK)){var i=a.getValue(xK);n=__assign(__assign({},n),{fastScrollSensitivity:i})}Object.keys(n).length>0&&c.updateOptions(n)}))),c.navigator=new RK(c,__assign({configurationService:a},o)),c.disposables.add(c.navigator);return c}n.prototype.updateOptions=function(n){t.prototype.updateOptions.call(this,n),n.overrideStyles!==void 0&&this.updateStyles(n.overrideStyles),n.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!n.multipleSelectionSupport)};n.prototype.updateStyles=function(t){this.style(t?LW(t):FW)};n.prototype.dispose=function(){this.disposables.dispose(),t.prototype.dispose.call(this)};return n}(JH);FK=UU([KU(5,Gc),KU(6,VU),KU(7,Kl),KU(8,Jh)],FK);var LK=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c){var f=this;var l=s.horizontalScrolling!==void 0?s.horizontalScrolling:!!h.getValue(vK),v=c.invokeFunction(EK,s),d=v[0],g=v[1];f=t.call(this,n,i,r,e,o,__assign(__assign({keyboardSupport:!1},d),{horizontalScrolling:l}))||this,f.disposables.add(g),f.contextKeyService=hK(u,f),f.disposables.add(cK(f.contextKeyService,f)),f.listSupportsMultiSelect=JU.bindTo(f.contextKeyService),f.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),tK.bindTo(f.contextKeyService).set(!!s.selectionNavigation),f.listHasSelectionOrFocus=QU.bindTo(f.contextKeyService),f.listDoubleSelection=YU.bindTo(f.contextKeyService),f.listMultiSelection=XU.bindTo(f.contextKeyService),f.horizontalScrolling=s.horizontalScrolling,f._useAltAsMultipleSelectionModifier=AK(h),f.disposables.add(f.contextKeyService),f.disposables.add(a.register(f)),f.updateStyles(s.overrideStyles),f.disposables.add(f.onDidChangeSelection((function(){var t=f.getSelection(),n=f.getFocus();f.contextKeyService.bufferChangeEvents((function(){f.listHasSelectionOrFocus.set(t.length>0||n.length>0),f.listMultiSelection.set(t.length>1),f.listDoubleSelection.set(t.length===2)}))}))),f.disposables.add(f.onDidChangeFocus((function(){var t=f.getSelection(),n=f.getFocus();f.listHasSelectionOrFocus.set(t.length>0||n.length>0)}))),f.disposables.add(h.onDidChangeConfiguration((function(t){t.affectsConfiguration(fK)&&(f._useAltAsMultipleSelectionModifier=AK(h));var n={};if(t.affectsConfiguration(vK)&&f.horizontalScrolling===void 0){var i=!!h.getValue(vK);n=__assign(__assign({},n),{horizontalScrolling:i})}if(t.affectsConfiguration(wK)){var i=!!h.getValue(wK);n=__assign(__assign({},n),{scrollByPage:i})}if(t.affectsConfiguration(_K)){var i=!!h.getValue(_K);n=__assign(__assign({},n),{smoothScrolling:i})}if(t.affectsConfiguration(kK)){var i=h.getValue(kK);n=__assign(__assign({},n),{mouseWheelScrollSensitivity:i})}if(t.affectsConfiguration(xK)){var i=h.getValue(xK);n=__assign(__assign({},n),{fastScrollSensitivity:i})}Object.keys(n).length>0&&f.updateOptions(n)}))),f.navigator=new TK(f,__assign({configurationService:h},s)),f.disposables.add(f.navigator);return f}n.prototype.updateOptions=function(n){t.prototype.updateOptions.call(this,n),n.overrideStyles!==void 0&&this.updateStyles(n.overrideStyles),n.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!n.multipleSelectionSupport)};n.prototype.updateStyles=function(t){this.style(t?LW(t):FW)};n.prototype.dispose=function(){this.disposables.dispose(),t.prototype.dispose.call(this)};return n}(dz);LK=UU([KU(6,Gc),KU(7,VU),KU(8,Kl),KU(9,Jh)],LK);var jK=function(t){__extends(n,t);function n(n,i){var r=this;var e;r=t.call(this)||this,r.widget=n,r._onDidOpen=r._register(new ki),r.onDidOpen=r._onDidOpen.event,r._register(wi.filter(r.widget.onDidChangeSelection,(function(t){return uh(t.browserEvent)}))((function(t){return r.onSelectionFromKeyboard(t)}))),r._register(r.widget.onPointer((function(t){return r.onPointer(t.element,t.browserEvent)}))),r._register(r.widget.onMouseDblClick((function(t){return r.onMouseDblClick(t.element,t.browserEvent)}))),typeof(i==null?void 0:i.openOnSingleClick)!="boolean"&&(i!=null&&i.configurationService)?(r.openOnSingleClick=(i==null?void 0:i.configurationService.getValue(lK))!=="doubleClick",r._register(i==null?void 0:i.configurationService.onDidChangeConfiguration((function(t){t.affectsConfiguration(lK)&&(r.openOnSingleClick=(i==null?void 0:i.configurationService.getValue(lK))!=="doubleClick")})))):r.openOnSingleClick=(e=i==null?void 0:i.openOnSingleClick)===null||e===void 0||e;return r}n.prototype.onSelectionFromKeyboard=function(t){if(t.elements.length!==1)return;var n=t.browserEvent,i=typeof n.preserveFocus!="boolean"||n.preserveFocus,r=typeof n.pinned=="boolean"?n.pinned:!i;this._open(this.getSelectedElement(),i,r,!1,t.browserEvent)};n.prototype.onPointer=function(t,n){if(!this.openOnSingleClick||n.detail===2)return;var i=n.button===1,r=n.ctrlKey||n.metaKey||n.altKey;this._open(t,!0,i,r,n)};n.prototype.onMouseDblClick=function(t,n){if(!n)return;var i=n.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&n.offsetX<16)return;var r=n.ctrlKey||n.metaKey||n.altKey;this._open(t,!1,!0,r,n)};n.prototype._open=function(t,n,i,r,e){t&&this._onDidOpen.fire({editorOptions:{preserveFocus:n,pinned:i,revealIfVisible:!0},sideBySide:r,element:t,browserEvent:e})};return n}(ci);var RK=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n,i)||this,r.widget=n;return r}n.prototype.getSelectedElement=function(){return this.widget.getSelectedElements()[0]};return n}(jK);var TK=function(t){__extends(n,t);function n(n,i){return t.call(this,n,i)||this}n.prototype.getSelectedElement=function(){return this.widget.getSelectedElements()[0]};return n}(jK);var IK=function(t){__extends(n,t);function n(n,i){return t.call(this,n,i)||this}n.prototype.getSelectedElement=function(){var t;return(t=this.widget.getSelection()[0])!==null&&t!==void 0?t:void 0};return n}(jK);function BK(t){var n=!1;return function(i){if(i.toKeyCodeChord().isModifierKey())return!1;if(n)return n=!1,!1;var r=t.softDispatch(i,i.target);return r.kind===1?(n=!0,!1):(n=!1,r.kind===0)}}var NK=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;var f=s.invokeFunction(VK,o),l=f.options,v=f.getTypeNavigationMode,d=f.disposable;c=t.call(this,n,i,r,e,l)||this,c.disposables.add(d),c.internals=new qK(c,o,v,o.overrideStyles,u,a,h),c.disposables.add(c.internals);return c}n.prototype.updateOptions=function(n){t.prototype.updateOptions.call(this,n),this.internals.updateOptions(n)};return n}(mU);NK=UU([KU(5,Jh),KU(6,Gc),KU(7,VU),KU(8,Kl)],NK);var PK=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;var f=s.invokeFunction(VK,o),l=f.options,v=f.getTypeNavigationMode,d=f.disposable;c=t.call(this,n,i,r,e,l)||this,c.disposables.add(d),c.internals=new qK(c,o,v,o.overrideStyles,u,a,h),c.disposables.add(c.internals);return c}n.prototype.updateOptions=function(n){if(n===void 0){n={}}t.prototype.updateOptions.call(this,n),n.overrideStyles&&this.internals.updateStyleOverrides(n.overrideStyles),this.internals.updateOptions(n)};return n}(kU);PK=UU([KU(5,Jh),KU(6,Gc),KU(7,VU),KU(8,Kl)],PK);var WK=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c){var f=this;var l=u.invokeFunction(VK,s),v=l.options,d=l.getTypeNavigationMode,g=l.disposable;f=t.call(this,n,i,r,e,o,v)||this,f.disposables.add(g),f.internals=new qK(f,s,d,s.overrideStyles,a,h,c),f.disposables.add(f.internals);return f}n.prototype.updateOptions=function(n){if(n===void 0){n={}}t.prototype.updateOptions.call(this,n),n.overrideStyles!==void 0&&this.internals.updateStyleOverrides(n.overrideStyles),this.internals.updateOptions(n)};return n}(NU);WK=UU([KU(6,Jh),KU(7,Gc),KU(8,VU),KU(9,Kl)],WK);var HK=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c){var f=this;var l=u.invokeFunction(VK,s),v=l.options,d=l.getTypeNavigationMode,g=l.disposable;f=t.call(this,n,i,r,e,o,v)||this,f.disposables.add(g),f.internals=new qK(f,s,d,s.overrideStyles,a,h,c),f.disposables.add(f.internals);return f}Object.defineProperty(n.prototype,"onDidOpen",{get:function(){return this.internals.onDidOpen},enumerable:false,configurable:true});n.prototype.updateOptions=function(n){if(n===void 0){n={}}t.prototype.updateOptions.call(this,n),n.overrideStyles&&this.internals.updateStyleOverrides(n.overrideStyles),this.internals.updateOptions(n)};return n}(RU);HK=UU([KU(6,Jh),KU(7,Gc),KU(8,VU),KU(9,Kl)],HK);var zK=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c,f){var l=this;var v=a.invokeFunction(VK,u),d=v.options,g=v.getTypeNavigationMode,p=v.disposable;l=t.call(this,n,i,r,e,o,s,d)||this,l.disposables.add(p),l.internals=new qK(l,u,g,u.overrideStyles,h,c,f),l.disposables.add(l.internals);return l}n.prototype.updateOptions=function(n){t.prototype.updateOptions.call(this,n),this.internals.updateOptions(n)};return n}(BU);function UK(t){var n=t.getValue(dK);if(n==="highlight")return Fz.Highlight;if(n==="filter")return Fz.Filter;var i=t.getValue(pK);return i==="simple"||i==="highlight"?Fz.Highlight:i==="filter"?Fz.Filter:void 0}function KK(t){var n=t.getValue(mK);return n==="fuzzy"?Lz.Fuzzy:n==="contiguous"?Lz.Contiguous:void 0}function VK(t,n){var i;var r=t.get(Kl),e=t.get(yR),o=t.get(Gc),s=t.get(Jh),u=n.horizontalScrolling!==void 0?n.horizontalScrolling:!!r.getValue(vK),a=s.invokeFunction(EK,n),h=a[0],c=a[1],f=n.paddingBottom,l=n.renderIndentGuides!==void 0?n.renderIndentGuides:r.getValue(yK);return{getTypeNavigationMode:function(){var t=o.getContextKeyValue(uK);if(t==="automatic")return WP.Automatic;if(t==="trigger"||o.getContextKeyValue(aK)===!1)return WP.Trigger;var n=r.getValue(gK);return n==="automatic"?WP.Automatic:n==="trigger"?WP.Trigger:void 0},disposable:c,options:__assign(__assign({keyboardSupport:!1},h),{indent:typeof r.getValue(bK)=="number"?r.getValue(bK):void 0,renderIndentGuides:l,smoothScrolling:!!r.getValue(_K),defaultFindMode:UK(r),defaultFindMatchType:KK(r),horizontalScrolling:u,scrollByPage:!!r.getValue(wK),paddingBottom:f,hideTwistiesOfChildlessElements:n.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:(i=n.expandOnlyOnTwistieClick)!==null&&i!==void 0?i:r.getValue(CK)==="doubleClick",contextViewProvider:e,findWidgetStyles:EW,enableStickyScroll:!!r.getValue(SK),stickyScrollMaxItemCount:Number(r.getValue(DK))})}}zK=UU([KU(7,Jh),KU(8,Gc),KU(9,VU),KU(10,Kl)],zK);var qK=function(){function t(t,n,i,r,e,o,s){var u=this;var a;this.tree=t,this.disposables=[],this.contextKeyService=hK(e,t),this.disposables.push(cK(this.contextKeyService,t)),this.listSupportsMultiSelect=JU.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(n.multipleSelectionSupport!==!1),tK.bindTo(this.contextKeyService).set(!!n.selectionNavigation),this.listSupportFindWidget=nK.bindTo(this.contextKeyService),this.listSupportFindWidget.set((a=n.findWidgetEnabled)===null||a===void 0||a),this.hasSelectionOrFocus=QU.bindTo(this.contextKeyService),this.hasDoubleSelection=YU.bindTo(this.contextKeyService),this.hasMultiSelection=XU.bindTo(this.contextKeyService),this.treeElementCanCollapse=iK.bindTo(this.contextKeyService),this.treeElementHasParent=rK.bindTo(this.contextKeyService),this.treeElementCanExpand=eK.bindTo(this.contextKeyService),this.treeElementHasChild=oK.bindTo(this.contextKeyService),this.treeFindOpen=sK.bindTo(this.contextKeyService),this.treeStickyScrollFocused=$U.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=AK(s),this.updateStyleOverrides(r);var h=function(){var n=t.getFocus()[0];if(!n)return;var i=t.getNode(n);u.treeElementCanCollapse.set(i.collapsible&&!i.collapsed),u.treeElementHasParent.set(!!t.getParentElement(n)),u.treeElementCanExpand.set(i.collapsible&&i.collapsed),u.treeElementHasChild.set(!!t.getFirstElementChild(n))},c=new Set;c.add(uK),c.add(aK),this.disposables.push(this.contextKeyService,o.register(t),t.onDidChangeSelection((function(){var n=t.getSelection(),i=t.getFocus();u.contextKeyService.bufferChangeEvents((function(){u.hasSelectionOrFocus.set(n.length>0||i.length>0),u.hasMultiSelection.set(n.length>1),u.hasDoubleSelection.set(n.length===2)}))})),t.onDidChangeFocus((function(){var n=t.getSelection(),i=t.getFocus();u.hasSelectionOrFocus.set(n.length>0||i.length>0),h()})),t.onDidChangeCollapseState(h),t.onDidChangeModel(h),t.onDidChangeFindOpenState((function(t){return u.treeFindOpen.set(t)})),t.onDidChangeStickyScrollFocused((function(t){return u.treeStickyScrollFocused.set(t)})),s.onDidChangeConfiguration((function(r){var e={};if(r.affectsConfiguration(fK)&&(u._useAltAsMultipleSelectionModifier=AK(s)),r.affectsConfiguration(bK)){var o=s.getValue(bK);e=__assign(__assign({},e),{indent:o})}if(r.affectsConfiguration(yK)&&n.renderIndentGuides===void 0){var o=s.getValue(yK);e=__assign(__assign({},e),{renderIndentGuides:o})}if(r.affectsConfiguration(_K)){var o=!!s.getValue(_K);e=__assign(__assign({},e),{smoothScrolling:o})}if(r.affectsConfiguration(dK)||r.affectsConfiguration(pK)){var o=UK(s);e=__assign(__assign({},e),{defaultFindMode:o})}if(r.affectsConfiguration(gK)||r.affectsConfiguration(pK)){var o=i();e=__assign(__assign({},e),{typeNavigationMode:o})}if(r.affectsConfiguration(mK)){var o=KK(s);e=__assign(__assign({},e),{defaultFindMatchType:o})}if(r.affectsConfiguration(vK)&&n.horizontalScrolling===void 0){var o=!!s.getValue(vK);e=__assign(__assign({},e),{horizontalScrolling:o})}if(r.affectsConfiguration(wK)){var o=!!s.getValue(wK);e=__assign(__assign({},e),{scrollByPage:o})}if(r.affectsConfiguration(CK)&&n.expandOnlyOnTwistieClick===void 0&&(e=__assign(__assign({},e),{expandOnlyOnTwistieClick:s.getValue(CK)==="doubleClick"})),r.affectsConfiguration(SK)){var o=s.getValue(SK);e=__assign(__assign({},e),{enableStickyScroll:o})}if(r.affectsConfiguration(DK)){var o=Math.max(1,s.getValue(DK));e=__assign(__assign({},e),{stickyScrollMaxItemCount:o})}if(r.affectsConfiguration(kK)){var o=s.getValue(kK);e=__assign(__assign({},e),{mouseWheelScrollSensitivity:o})}if(r.affectsConfiguration(xK)){var o=s.getValue(xK);e=__assign(__assign({},e),{fastScrollSensitivity:o})}Object.keys(e).length>0&&t.updateOptions(e)})),this.contextKeyService.onDidChangeContext((function(n){n.affectsSome(c)&&t.updateOptions({typeNavigationMode:i()})}))),this.navigator=new IK(t,__assign({configurationService:s},n)),this.disposables.push(this.navigator)}Object.defineProperty(t.prototype,"onDidOpen",{get:function(){return this.navigator.onDidOpen},enumerable:false,configurable:true});t.prototype.updateOptions=function(t){t.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!t.multipleSelectionSupport)};t.prototype.updateStyleOverrides=function(t){this.tree.style(t?LW(t):FW)};t.prototype.dispose=function(){this.disposables=si(this.disposables)};return t}();qK=UU([KU(4,Gc),KU(5,VU),KU(6,Kl)],qK);of.as(ev).registerConfiguration({id:"workbench",order:7,title:ht(0,"Workbench"),type:"object",properties:(i={},i[fK]={type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[ht(0,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),ht(0,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:ht(0,"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},i[lK]={type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:ht(0,"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},i[vK]={type:"boolean",default:!1,description:ht(0,"Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},i[wK]={type:"boolean",default:!1,description:ht(0,"Controls whether clicks in the scrollbar scroll page by page.")},i[bK]={type:"number",default:8,minimum:4,maximum:40,description:ht(0,"Controls tree indentation in pixels.")},i[yK]={type:"string",enum:["none","onHover","always"],default:"onHover",description:ht(0,"Controls whether the tree should render indent guides.")},i[_K]={type:"boolean",default:!1,description:ht(0,"Controls whether lists and trees have smooth scrolling.")},i[kK]={type:"number",default:1,markdownDescription:ht(0,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},i[xK]={type:"number",default:5,markdownDescription:ht(0,"Scrolling speed multiplier when pressing `Alt`.")},i[dK]={type:"string",enum:["highlight","filter"],enumDescriptions:[ht(0,"Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),ht(0,"Filter elements when searching.")],default:"highlight",description:ht(0,"Controls the default find mode for lists and trees in the workbench.")},i[pK]={type:"string",enum:["simple","highlight","filter"],enumDescriptions:[ht(0,"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),ht(0,"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),ht(0,"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:ht(0,"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:ht(0,"Please use 'workbench.list.defaultFindMode' and\t'workbench.list.typeNavigationMode' instead.")},i[mK]={type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[ht(0,"Use fuzzy matching when searching."),ht(0,"Use contiguous matching when searching.")],default:"fuzzy",description:ht(0,"Controls the type of matching used when searching lists and trees in the workbench.")},i[CK]={type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:ht(0,"Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},i[SK]={type:"boolean",default:!0,description:ht(0,"Controls whether sticky scrolling is enabled in trees.")},i[DK]={type:"number",minimum:1,default:7,markdownDescription:ht(0,"Controls the number of sticky elements displayed in the tree when `#workbench.tree.enableStickyScroll#` is enabled.")},i[gK]={type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:ht(0,"Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")},i)});var GK=function(t){__extends(n,t);function n(n,i){var r=this;var e;r=t.call(this)||this,r.options=i,r.text="",r.title="",r.highlights=[],r.didEverRender=!1,r.supportIcons=(e=i==null?void 0:i.supportIcons)!==null&&e!==void 0&&e,r.domNode=vh(n,bh("span.monaco-highlighted-label"));return r}Object.defineProperty(n.prototype,"element",{get:function(){return this.domNode},enumerable:false,configurable:true});n.prototype.set=function(t,i,r,e){if(i===void 0){i=[]}if(r===void 0){r=""}t||(t=""),e&&(t=n.escapeNewLines(t,i)),this.didEverRender&&this.text===t&&this.title===r&&ot(this.highlights,i)||(this.text=t,this.title=r,this.highlights=i,this.render())};n.prototype.render=function(){var t;var n,i,r,e;var o=[];var s=0;for(var u=0,a=this.highlights;u<a.length;u++){var h=a[u];if(h.end===h.start)continue;if(s<h.start){var c=this.text.substring(s,h.start);this.supportIcons?o.push.apply(o,RR(c)):o.push(c),s=h.start}var f=this.text.substring(s,h.end),l=bh.apply(void 0,__spreadArray(["span.highlight",void 0],this.supportIcons?RR(f):[f],false));h.extraClasses&&(t=l.classList).add.apply(t,h.extraClasses),o.push(l),s=h.end}if(s<this.text.length){var h=this.text.substring(s);this.supportIcons?o.push.apply(o,RR(h)):o.push(h)}if(gh.apply(void 0,__spreadArray([this.domNode],o,false)),(i=(n=this.options)===null||n===void 0?void 0:n.hoverDelegate)===null||i===void 0?void 0:i.showNativeHover)this.domNode.title=this.title;else if(this.customHover||this.title==="")this.customHover&&this.customHover.update(this.title);else{var h=(e=(r=this.options)===null||r===void 0?void 0:r.hoverDelegate)!==null&&e!==void 0?e:kN("mouse");this.customHover=this._register(DN(h,this.domNode,this.title))}this.didEverRender=!0};n.escapeNewLines=function(t,n){var i=0,r=0;return t.replace(/\r\n|\r|\n/g,(function(t,e){r=t==="\r\n"?-1:0,e+=i;for(var o=0,s=n;o<s.length;o++){var u=s[o];u.end<=e||(u.start>=e&&(u.start+=r),u.end>=e&&(u.end+=r))}return i+=r,"⏎"}))};return n}(ci);var $K=function(){function t(t){this._element=t}Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"textContent",{set:function(t){this.disposed||t===this._textContent||(this._textContent=t,this._element.textContent=t)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"className",{set:function(t){this.disposed||t===this._className||(this._className=t,this._element.className=t)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"empty",{set:function(t){this.disposed||t===this._empty||(this._empty=t,this._element.style.marginLeft=t?"0":"")},enumerable:false,configurable:true});t.prototype.dispose=function(){this.disposed=!0};return t}();var JK=function(t){__extends(n,t);function n(n,i){var r=this;var e;r=t.call(this)||this,r.customHovers=new Map,r.creationOptions=i,r.domNode=r._register(new $K(vh(n,bh(".monaco-icon-label")))),r.labelContainer=vh(r.domNode.element,bh(".monaco-icon-label-container")),r.nameContainer=vh(r.labelContainer,bh("span.monaco-icon-name-container")),i!=null&&i.supportHighlights||i!=null&&i.supportIcons?r.nameNode=r._register(new QK(r.nameContainer,!!i.supportIcons)):r.nameNode=new ZK(r.nameContainer),r.hoverDelegate=(e=i==null?void 0:i.hoverDelegate)!==null&&e!==void 0?e:kN("mouse");return r}Object.defineProperty(n.prototype,"element",{get:function(){return this.domNode.element},enumerable:false,configurable:true});n.prototype.setLabel=function(t,n,i){var r;var e=["monaco-icon-label"],o=["monaco-icon-label-container"];var s="";if(i&&(i.extraClasses&&e.push.apply(e,i.extraClasses),i.italic&&e.push("italic"),i.strikethrough&&e.push("strikethrough"),i.disabledCommand&&o.push("disabled"),i.title&&(typeof i.title=="string"?s+=i.title:s+=t)),this.domNode.className=e.join(" "),this.domNode.element.setAttribute("aria-label",s),this.labelContainer.className=o.join(" "),this.setupHover(i!=null&&i.descriptionTitle?this.labelContainer:this.element,i==null?void 0:i.title),this.nameNode.setLabel(t,i),n||this.descriptionNode){var u=this.getOrCreateDescriptionNode();u instanceof GK?(u.set(n||"",i?i.descriptionMatches:void 0,void 0,i==null?void 0:i.labelEscapeNewLines),this.setupHover(u.element,i==null?void 0:i.descriptionTitle)):(u.textContent=n&&(i!=null&&i.labelEscapeNewLines)?GK.escapeNewLines(n,[]):n||"",this.setupHover(u.element,(i==null?void 0:i.descriptionTitle)||""),u.empty=!n)}(i!=null&&i.suffix||this.suffixNode)&&(this.getOrCreateSuffixNode().textContent=(r=i==null?void 0:i.suffix)!==null&&r!==void 0?r:"")};n.prototype.setupHover=function(t,n){var i=this.customHovers.get(t);if(i&&(i.dispose(),this.customHovers.delete(t)),n)if(this.hoverDelegate.showNativeHover)(function(t,n){H(n)?t.title=HT(n):n!=null&&n.markdownNotSupportedFallback?t.title=n.markdownNotSupportedFallback:t.removeAttribute("title")})(t,n);else{var r=DN(this.hoverDelegate,t,n);r&&this.customHovers.set(t,r)}else t.removeAttribute("title")};n.prototype.dispose=function(){t.prototype.dispose.call(this);for(var n=0,i=this.customHovers.values();n<i.length;n++){var r=i[n];r.dispose()}this.customHovers.clear()};n.prototype.getOrCreateSuffixNode=function(){if(!this.suffixNode){var t=this._register(new $K((n=this.nameContainer,i=bh("span.monaco-icon-suffix-container"),n.after(i),i)));this.suffixNode=this._register(new $K(vh(t.element,bh("span.label-suffix"))))}var n,i;return this.suffixNode};n.prototype.getOrCreateDescriptionNode=function(){var t;if(!this.descriptionNode){var n=this._register(new $K(vh(this.labelContainer,bh("span.monaco-icon-description-container"))));!((t=this.creationOptions)===null||t===void 0)&&t.supportDescriptionHighlights?this.descriptionNode=this._register(new GK(vh(n.element,bh("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new $K(vh(n.element,bh("span.label-description"))))}return this.descriptionNode};return n}(ci);var ZK=function(){function t(t){this.container=t,this.label=void 0,this.singleLabel=void 0}t.prototype.setLabel=function(t,n){if(this.label!==t||!ot(this.options,n))if(this.label=t,this.options=n,typeof t=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=vh(this.container,bh("a.label-name",{id:n==null?void 0:n.domId}))),this.singleLabel.textContent=t;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(var i=0;i<t.length;i++){var r=t[i],e=(n==null?void 0:n.domId)&&"".concat(n==null?void 0:n.domId,"_").concat(i);vh(this.container,bh("a.label-name",{id:e,"data-icon-label-count":t.length,"data-icon-label-index":i,role:"treeitem"},r)),i<t.length-1&&vh(this.container,bh("span.label-separator",void 0,(n==null?void 0:n.separator)||"/"))}}};return t}();var QK=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.container=n,r.supportIcons=i,r.label=void 0,r.singleLabel=void 0;return r}n.prototype.setLabel=function(t,n){if(this.label!==t||!ot(this.options,n))if(this.label=t,this.options=n,typeof t=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new GK(vh(this.container,bh("a.label-name",{id:n==null?void 0:n.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(t,n==null?void 0:n.matches,void 0,n==null?void 0:n.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;var i=(n==null?void 0:n.separator)||"/",r=function(t,n,i){if(!i)return;var r=0;return t.map((function(t){var e={start:r,end:r+t.length},o=i.map((function(t){return BI.intersect(e,t)})).filter((function(t){return!BI.isEmpty(t)})).map((function(t){var n=t.start,i=t.end;return{start:n-r,end:i-r}}));return r=e.end+n.length,o}))}(t,i,n==null?void 0:n.matches);for(var e=0;e<t.length;e++){var o=t[e],s=r?r[e]:void 0,u=bh("a.label-name",{id:(n==null?void 0:n.domId)&&"".concat(n==null?void 0:n.domId,"_").concat(e),"data-icon-label-count":t.length,"data-icon-label-index":e,role:"treeitem"});this._register(new GK(vh(this.container,u),{supportIcons:this.supportIcons})).set(o,s,void 0,n==null?void 0:n.labelEscapeNewLines),e<t.length-1&&vh(u,bh("span.label-separator",void 0,i))}}};return n}(ci);var YK=bh,XK={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};var tV=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.os=i,e.keyElements=new Set,e.options=r||Object.create(null);var o=e.options.keybindingLabelForeground;e.domNode=vh(n,YK(".monaco-keybinding")),o&&(e.domNode.style.color=o),e.hover=e._register(DN(kN("mouse"),e.domNode,"")),e.didEverRender=!1,n.appendChild(e.domNode);return e}Object.defineProperty(n.prototype,"element",{get:function(){return this.domNode},enumerable:false,configurable:true});n.prototype.set=function(t,i){this.didEverRender&&this.keybinding===t&&n.areSame(this.matches,i)||(this.keybinding=t,this.matches=i,this.render())};n.prototype.render=function(){var t;if(this.clear(),this.keybinding){var n=this.keybinding.getChords();n[0]&&this.renderChord(this.domNode,n[0],this.matches?this.matches.firstPart:null);for(var i=1;i<n.length;i++)vh(this.domNode,YK("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,n[i],this.matches?this.matches.chordPart:null);var r=(t=this.options.disableTitle)!==null&&t!==void 0&&t?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(r),this.domNode.setAttribute("aria-label",r||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0};n.prototype.clear=function(){pa(this.domNode),this.keyElements.clear()};n.prototype.renderChord=function(t,n,i){var r=AB.modifierLabels[this.os];n.ctrlKey&&this.renderKey(t,r.ctrlKey,!!(i!=null&&i.ctrlKey),r.separator),n.shiftKey&&this.renderKey(t,r.shiftKey,!!(i!=null&&i.shiftKey),r.separator),n.altKey&&this.renderKey(t,r.altKey,!!(i!=null&&i.altKey),r.separator),n.metaKey&&this.renderKey(t,r.metaKey,!!(i!=null&&i.metaKey),r.separator);var e=n.keyLabel;e&&this.renderKey(t,e,!!(i!=null&&i.keyCode),"")};n.prototype.renderKey=function(t,n,i,r){vh(t,this.createKeyElement(n,i?".highlight":"")),r&&vh(t,YK("span.monaco-keybinding-key-separator",void 0,r))};n.prototype.renderUnbound=function(t){vh(t,this.createKeyElement(ht(0,"Unbound")))};n.prototype.createKeyElement=function(t,n){if(n===void 0){n=""}var i=YK("span.monaco-keybinding-key"+n,void 0,t);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow="inset 0 -1px 0 ".concat(this.options.keybindingLabelShadow)),i};n.areSame=function(t,n){return t===n||!t&&!n||!!t&&!!n&&ot(t.firstPart,n.firstPart)&&ot(t.chordPart,n.chordPart)};return n}(ci);var nV=new no((function(){var t=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:t,collatorIsNumeric:t.resolvedOptions().numeric}}));function iV(t,n,i){var r=t.toLowerCase(),e=n.toLowerCase(),o=function(t,n,i){var r=t.toLowerCase(),e=n.toLowerCase(),o=r.startsWith(i),s=e.startsWith(i);if(o!==s)return o?-1:1;if(o&&s){if(r.length<e.length)return-1;if(r.length>e.length)return 1}return 0}(t,n,i);if(o)return o;var s=r.endsWith(i);if(s!==e.endsWith(i))return s?-1:1;var u=function(t,n,i){if(i===void 0){i=!1}var r=t||"",e=n||"",o=nV.value.collator.compare(r,e);return nV.value.collatorIsNumeric&&o===0&&r!==e?r<e?-1:1:o}(r,e);return u!==0?u:r.localeCompare(e)}var rV,eV=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},oV=function(t,n){return function(i,r){n(i,r,t)}};var sV=bh;var uV,aV;(function(t){t[t.First=1]="First",t[t.Second=2]="Second",t[t.Last=3]="Last",t[t.Next=4]="Next",t[t.Previous=5]="Previous",t[t.NextPage=6]="NextPage",t[t.PreviousPage=7]="PreviousPage",t[t.NextSeparator=8]="NextSeparator",t[t.PreviousSeparator=9]="PreviousSeparator"})(uV||(uV={}));var hV=function(){function t(t,n,i){var r=this;this.index=t,this.hasCheckbox=n,this._hidden=!1,this._init=new no((function(){var t;var n=(t=i.label)!==null&&t!==void 0?t:"",e=UT(n).text.trim(),o=i.ariaLabel||[n,r.saneDescription,r.saneDetail].map((function(t){return function(t){return t?t.replace(/\$\((.*?)\)/g,(function(t,n){return" ".concat(n," ")})).trim():""}(t)})).filter((function(t){return!!t})).join(", ");return{saneLabel:n,saneSortLabel:e,saneAriaLabel:o}})),this._saneDescription=i.description,this._saneTooltip=i.tooltip}Object.defineProperty(t.prototype,"saneLabel",{get:function(){return this._init.value.saneLabel},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"saneSortLabel",{get:function(){return this._init.value.saneSortLabel},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"saneAriaLabel",{get:function(){return this._init.value.saneAriaLabel},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(t){this._element=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"hidden",{get:function(){return this._hidden},set:function(t){this._hidden=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"saneDescription",{get:function(){return this._saneDescription},set:function(t){this._saneDescription=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"saneDetail",{get:function(){return this._saneDetail},set:function(t){this._saneDetail=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"saneTooltip",{get:function(){return this._saneTooltip},set:function(t){this._saneTooltip=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"labelHighlights",{get:function(){return this._labelHighlights},set:function(t){this._labelHighlights=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"descriptionHighlights",{get:function(){return this._descriptionHighlights},set:function(t){this._descriptionHighlights=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"detailHighlights",{get:function(){return this._detailHighlights},set:function(t){this._detailHighlights=t},enumerable:false,configurable:true});return t}();var cV=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;var a,h,c;u=t.call(this,n,i,o)||this,u.fireButtonTriggered=r,u._onChecked=e,u.item=o,u._separator=s,u._checked=!1,u.onChecked=i?wi.map(wi.filter(u._onChecked.event,(function(t){return t.element===u})),(function(t){return t.checked})):wi.None,u._saneDetail=o.detail,u._labelHighlights=(a=o.highlights)===null||a===void 0?void 0:a.label,u._descriptionHighlights=(h=o.highlights)===null||h===void 0?void 0:h.description,u._detailHighlights=(c=o.highlights)===null||c===void 0?void 0:c.detail;return u}Object.defineProperty(n.prototype,"separator",{get:function(){return this._separator},set:function(t){this._separator=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"checked",{get:function(){return this._checked},set:function(t){t!==this._checked&&(this._checked=t,this._onChecked.fire({element:this,checked:t}))},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"checkboxDisabled",{get:function(){return!!this.item.disabled},enumerable:false,configurable:true});return n}(hV);(function(t){t[t.NONE=0]="NONE",t[t.MOUSE_HOVER=1]="MOUSE_HOVER",t[t.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(aV||(aV={}));var fV=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,!1,r)||this,e.fireSeparatorButtonTriggered=i,e.separator=r,e.children=new Array,e.focusInsideSeparator=aV.NONE;return e}return n}(hV);var lV=function(){function t(){}t.prototype.getHeight=function(t){return t instanceof fV?30:t.saneDetail?44:22};t.prototype.getTemplateId=function(t){return t instanceof cV?gV.ID:pV.ID};return t}();var vV=function(){function t(){}t.prototype.getWidgetAriaLabel=function(){return ht(0,"Quick Input")};t.prototype.getAriaLabel=function(t){var n;return!((n=t.separator)===null||n===void 0)&&n.label?"".concat(t.saneAriaLabel,", ").concat(t.separator.label):t.saneAriaLabel};t.prototype.getWidgetRole=function(){return"listbox"};t.prototype.getRole=function(t){return t.hasCheckbox?"checkbox":"option"};t.prototype.isChecked=function(t){if(t.hasCheckbox&&t instanceof cV)return{value:t.checked,onDidChange:t.onChecked}};return t}();var dV=function(){function t(t){this.hoverDelegate=t}t.prototype.renderTemplate=function(t){var n=Object.create(null);n.toDisposeElement=new hi,n.toDisposeTemplate=new hi,n.entry=vh(t,sV(".quick-input-list-entry"));var i=vh(n.entry,sV("label.quick-input-list-label"));n.toDisposeTemplate.add(ya(i,ah.CLICK,(function(t){n.checkbox.offsetParent||t.preventDefault()}))),n.checkbox=vh(i,sV("input.quick-input-list-checkbox")),n.checkbox.type="checkbox";var r=vh(i,sV(".quick-input-list-rows")),e=vh(r,sV(".quick-input-list-row")),o=vh(r,sV(".quick-input-list-row"));n.label=new JK(e,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),n.toDisposeTemplate.add(n.label),n.icon=dh(n.label.element,sV(".quick-input-list-icon"));var s=vh(e,sV(".quick-input-list-entry-keybinding"));n.keybinding=new tV(s,zt),n.toDisposeTemplate.add(n.keybinding);var u=vh(o,sV(".quick-input-list-label-meta"));return n.detail=new JK(u,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),n.toDisposeTemplate.add(n.detail),n.separator=vh(n.entry,sV(".quick-input-list-separator")),n.actionBar=new qW(n.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),n.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),n.toDisposeTemplate.add(n.actionBar),n};t.prototype.disposeTemplate=function(t){t.toDisposeElement.dispose(),t.toDisposeTemplate.dispose()};t.prototype.disposeElement=function(t,n,i){i.toDisposeElement.clear(),i.actionBar.clear()};return t}();var gV=rV=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n)||this,r.themeService=i,r._itemsWithSeparatorsFrequency=new Map;return r}Object.defineProperty(n.prototype,"templateId",{get:function(){return n.ID},enumerable:false,configurable:true});n.prototype.renderTemplate=function(n){var i=t.prototype.renderTemplate.call(this,n);return i.toDisposeTemplate.add(ya(i.checkbox,ah.CHANGE,(function(t){i.element.checked=i.checkbox.checked}))),i};n.prototype.renderElement=function(t,n,i){var r,e,o;var s=t.element;i.element=s,s.element=(r=i.entry)!==null&&r!==void 0?r:void 0;var u=s.item;i.checkbox.checked=s.checked,i.toDisposeElement.add(s.onChecked((function(t){return i.checkbox.checked=t}))),i.checkbox.disabled=s.checkboxDisabled;var a=s.labelHighlights,h=s.descriptionHighlights,c=s.detailHighlights;if(u.iconPath){var f=S_(this.themeService.getColorTheme().type)?u.iconPath.dark:(e=u.iconPath.light)!==null&&e!==void 0?e:u.iconPath.dark,l=Cr.revive(f);i.icon.className="quick-input-list-icon",i.icon.style.backgroundImage=Ch(l)}else i.icon.style.backgroundImage="",i.icon.className=u.iconClass?"quick-input-list-icon ".concat(u.iconClass):"";var v;!s.saneTooltip&&s.saneDescription&&(v={markdown:{value:s.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});var d={matches:a||[],descriptionTitle:v,descriptionMatches:h||[],labelEscapeNewLines:!0};if(d.extraClasses=u.iconClasses,d.italic=u.italic,d.strikethrough=u.strikethrough,i.entry.classList.remove("quick-input-list-separator-as-item"),i.label.setLabel(s.saneLabel,s.saneDescription,d),i.keybinding.set(u.keybinding),s.saneDetail){var f=void 0;s.saneTooltip||(f={markdown:{value:s.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(s.saneDetail,void 0,{matches:c,title:f,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";!((o=s.separator)===null||o===void 0)&&o.label?(i.separator.textContent=s.separator.label,i.separator.style.display="",this.addItemWithSeparator(s)):i.separator.style.display="none",i.entry.classList.toggle("quick-input-list-separator-border",!!s.separator);var g=u.buttons;g&&g.length?(i.actionBar.push(g.map((function(t,n){return VH(t,"id-".concat(n),(function(){return s.fireButtonTriggered({button:t,item:s.item})}))})),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions")};n.prototype.disposeElement=function(n,i,r){this.removeItemWithSeparator(n.element),t.prototype.disposeElement.call(this,n,i,r)};n.prototype.isItemWithSeparatorVisible=function(t){return this._itemsWithSeparatorsFrequency.has(t)};n.prototype.addItemWithSeparator=function(t){this._itemsWithSeparatorsFrequency.set(t,(this._itemsWithSeparatorsFrequency.get(t)||0)+1)};n.prototype.removeItemWithSeparator=function(t){var n=this._itemsWithSeparatorsFrequency.get(t)||0;n>1?this._itemsWithSeparatorsFrequency.set(t,n-1):this._itemsWithSeparatorsFrequency.delete(t)};return n}(dV);gV.ID="quickpickitem",gV=rV=eV([oV(1,zk)],gV);var pV=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._visibleSeparatorsFrequency=new Map;return n}Object.defineProperty(n.prototype,"templateId",{get:function(){return n.ID},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"visibleSeparators",{get:function(){return __spreadArray([],this._visibleSeparatorsFrequency.keys(),true)},enumerable:false,configurable:true});n.prototype.isSeparatorVisible=function(t){return this._visibleSeparatorsFrequency.has(t)};n.prototype.renderElement=function(t,n,i){var r;var e=t.element;i.element=e,e.element=(r=i.entry)!==null&&r!==void 0?r:void 0,e.element.classList.toggle("focus-inside",!!e.focusInsideSeparator);var o=e.separator,s=e.labelHighlights,u=e.descriptionHighlights,a=e.detailHighlights;var h;i.icon.style.backgroundImage="",i.icon.className="",!e.saneTooltip&&e.saneDescription&&(h={markdown:{value:e.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:e.saneDescription});var c={matches:s||[],descriptionTitle:h,descriptionMatches:u||[],labelEscapeNewLines:!0};if(i.entry.classList.add("quick-input-list-separator-as-item"),i.label.setLabel(e.saneLabel,e.saneDescription,c),e.saneDetail){var f=void 0;e.saneTooltip||(f={markdown:{value:e.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:e.saneDetail}),i.detail.element.style.display="",i.detail.setLabel(e.saneDetail,void 0,{matches:a,title:f,labelEscapeNewLines:!0})}else i.detail.element.style.display="none";i.separator.style.display="none",i.entry.classList.add("quick-input-list-separator-border");var l=o.buttons;l&&l.length?(i.actionBar.push(l.map((function(t,n){return VH(t,"id-".concat(n),(function(){return e.fireSeparatorButtonTriggered({button:t,separator:e.separator})}))})),{icon:!0,label:!1}),i.entry.classList.add("has-actions")):i.entry.classList.remove("has-actions"),this.addSeparator(e)};n.prototype.disposeElement=function(n,i,r){var e;this.removeSeparator(n.element),this.isSeparatorVisible(n.element)||(e=n.element.element)===null||e===void 0||e.classList.remove("focus-inside"),t.prototype.disposeElement.call(this,n,i,r)};n.prototype.addSeparator=function(t){this._visibleSeparatorsFrequency.set(t,(this._visibleSeparatorsFrequency.get(t)||0)+1)};n.prototype.removeSeparator=function(t){var n=this._visibleSeparatorsFrequency.get(t)||0;n>1?this._visibleSeparatorsFrequency.set(t,n-1):this._visibleSeparatorsFrequency.delete(t)};return n}(dV);pV.ID="quickpickseparator";var wV=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s.parent=n,s.hoverDelegate=i,s.linkOpenerDelegate=r,s._onKeyDown=new ki,s.onKeyDown=s._onKeyDown.event,s._onLeave=new ki,s.onLeave=s._onLeave.event,s._onChangedAllVisibleChecked=new ki,s.onChangedAllVisibleChecked=s._onChangedAllVisibleChecked.event,s._onChangedCheckedCount=new ki,s.onChangedCheckedCount=s._onChangedCheckedCount.event,s._onChangedVisibleCount=new ki,s.onChangedVisibleCount=s._onChangedVisibleCount.event,s._onChangedCheckedElements=new ki,s.onChangedCheckedElements=s._onChangedCheckedElements.event,s._onButtonTriggered=new ki,s.onButtonTriggered=s._onButtonTriggered.event,s._onSeparatorButtonTriggered=new ki,s.onSeparatorButtonTriggered=s._onSeparatorButtonTriggered.event,s._onTriggerEmptySelectionOrFocus=new ki,s._elementChecked=new ki,s._inputElements=new Array,s._elementTree=new Array,s._itemElements=new Array,s._elementDisposable=s._register(new hi),s._shouldFireCheckedEvents=!0,s._matchOnDescription=!1,s._matchOnDetail=!1,s._matchOnLabel=!0,s._matchOnLabelMode="fuzzy",s._sortByLabel=!0,s._container=vh(s.parent,sV(".quick-input-list")),s._separatorRenderer=new pV(i),s._itemRenderer=o.createInstance(gV,i),s._tree=s._register(o.createInstance(NK,"QuickInput",s._container,new lV,[s._itemRenderer,s._separatorRenderer],{accessibilityProvider:new vV,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:Mz.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,identityProvider:{getId:function(t){var n,i,r,e,o,s,u,a;return(a=(s=(e=(i=(n=t.item)===null||n===void 0?void 0:n.id)!==null&&i!==void 0?i:(r=t.item)===null||r===void 0?void 0:r.label)!==null&&e!==void 0?e:(o=t.separator)===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:(u=t.separator)===null||u===void 0?void 0:u.label)!==null&&a!==void 0?a:""}},alwaysConsumeMouseWheel:!0})),s._tree.getHTMLElement().id=e,s._registerListeners();return s}Object.defineProperty(n.prototype,"onDidChangeFocus",{get:function(){return wi.map(wi.any(this._tree.onDidChangeFocus,this._onTriggerEmptySelectionOrFocus.event),(function(t){return t.elements.filter((function(t){return t instanceof cV})).map((function(t){return t.item}))}))},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"onDidChangeSelection",{get:function(){return wi.map(wi.any(this._tree.onDidChangeSelection,this._onTriggerEmptySelectionOrFocus.event),(function(t){return{items:t.elements.filter((function(t){return t instanceof cV})).map((function(t){return t.item})),event:t.browserEvent}}))},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"scrollTop",{get:function(){return this._tree.scrollTop},set:function(t){this._tree.scrollTop=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"ariaLabel",{get:function(){return this._tree.ariaLabel},set:function(t){this._tree.ariaLabel=t!==null&&t!==void 0?t:""},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"enabled",{set:function(t){this._tree.getHTMLElement().style.pointerEvents=t?"":"none"},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchOnDescription",{get:function(){return this._matchOnDescription},set:function(t){this._matchOnDescription=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchOnDetail",{get:function(){return this._matchOnDetail},set:function(t){this._matchOnDetail=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchOnLabel",{get:function(){return this._matchOnLabel},set:function(t){this._matchOnLabel=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchOnLabelMode",{get:function(){return this._matchOnLabelMode},set:function(t){this._matchOnLabelMode=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"sortByLabel",{get:function(){return this._sortByLabel},set:function(t){this._sortByLabel=t},enumerable:false,configurable:true});n.prototype._registerListeners=function(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()};n.prototype._registerOnKeyDown=function(){var t=this;this._register(this._tree.onKeyDown((function(n){var i=new ws(n);switch(i.keyCode){case 10:t.toggleCheckbox();break;case 31:(Ft?n.metaKey:n.ctrlKey)&&t._tree.setFocus(t._itemElements);break;case 16:{var r=t._tree.getFocus();r.length===1&&r[0]===t._itemElements[0]&&t._onLeave.fire();break}case 18:{var r=t._tree.getFocus();r.length===1&&r[0]===t._itemElements[t._itemElements.length-1]&&t._onLeave.fire();break}}t._onKeyDown.fire(i)})))};n.prototype._registerOnContainerClick=function(){var t=this;this._register(ma(this._container,ah.CLICK,(function(n){(n.x||n.y)&&t._onLeave.fire()})))};n.prototype._registerOnMouseMiddleClick=function(){var t=this;this._register(ma(this._container,ah.AUXCLICK,(function(n){n.button===1&&t._onLeave.fire()})))};n.prototype._registerOnElementChecked=function(){var t=this;this._register(this._elementChecked.event((function(n){return t._fireCheckedEvents()})))};n.prototype._registerOnContextMenu=function(){var t=this;this._register(this._tree.onContextMenu((function(n){n.element&&(n.browserEvent.preventDefault(),t._tree.setSelection([n.element]))})))};n.prototype._registerHoverListeners=function(){var t=this;var n=this._register(new Es(this.hoverDelegate.delay));this._register(this._tree.onMouseOver((function(i){return __awaiter(t,void 0,void 0,(function(){var t,r;var e=this;return __generator(this,(function(o){switch(o.label){case 0:if(!(i.browserEvent.target instanceof HTMLAnchorElement))return[3,1];n.cancel();return[3,5];case 1:if(!(i.browserEvent.relatedTarget instanceof HTMLAnchorElement||!Pa(i.browserEvent.relatedTarget,(t=i.element)===null||t===void 0?void 0:t.element)))return[3,5];o.label=2;case 2:o.trys.push([2,4,,5]);return[4,n.trigger((function(){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(t){i.element instanceof cV&&this.showHover(i.element);return[2]}))}))}))];case 3:o.sent();return[3,5];case 4:r=o.sent();if(!Qn(r))throw r;return[3,5];case 5:return[2]}}))}))}))),this._register(this._tree.onMouseOut((function(t){var i;Pa(t.browserEvent.relatedTarget,(i=t.element)===null||i===void 0?void 0:i.element)||n.cancel()})))};n.prototype._registerSeparatorActionShowingListeners=function(){var t=this;this._register(this._tree.onDidChangeFocus((function(n){var i=n.elements[0]?t._tree.getParentElement(n.elements[0]):null;for(var r=0,e=t._separatorRenderer.visibleSeparators;r<e.length;r++){var o=e[r];var s=o===i;!!(o.focusInsideSeparator&aV.ACTIVE_ITEM)!==s&&(s?o.focusInsideSeparator|=aV.ACTIVE_ITEM:o.focusInsideSeparator&=~aV.ACTIVE_ITEM,t._tree.rerender(o))}}))),this._register(this._tree.onMouseOver((function(n){var i=n.element?t._tree.getParentElement(n.element):null;for(var r=0,e=t._separatorRenderer.visibleSeparators;r<e.length;r++){var o=e[r];o===i&&(o.focusInsideSeparator&aV.MOUSE_HOVER||(o.focusInsideSeparator|=aV.MOUSE_HOVER,t._tree.rerender(o)))}}))),this._register(this._tree.onMouseOut((function(n){var i=n.element?t._tree.getParentElement(n.element):null;for(var r=0,e=t._separatorRenderer.visibleSeparators;r<e.length;r++){var o=e[r];o===i&&o.focusInsideSeparator&aV.MOUSE_HOVER&&(o.focusInsideSeparator&=~aV.MOUSE_HOVER,t._tree.rerender(o))}})))};n.prototype._registerSelectionChangeListener=function(){var t=this;this._register(this._tree.onDidChangeSelection((function(n){var i=n.elements.filter((function(t){return t instanceof cV}));i.length!==n.elements.length&&(n.elements.length===1&&n.elements[0]instanceof fV&&(t._tree.setFocus([n.elements[0].children[0]]),t._tree.reveal(n.elements[0],0)),t._tree.setSelection(i))})))};n.prototype.getAllVisibleChecked=function(){return this._allVisibleChecked(this._itemElements,!1)};n.prototype.getCheckedCount=function(){return this._itemElements.filter((function(t){return t.checked})).length};n.prototype.getVisibleCount=function(){return this._itemElements.filter((function(t){return!t.hidden})).length};n.prototype.setAllVisibleChecked=function(t){try{this._shouldFireCheckedEvents=!1,this._itemElements.forEach((function(n){n.hidden||n.checkboxDisabled||(n.checked=t)}))}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}};n.prototype.setElements=function(t){var n=this;this._elementDisposable.clear(),this._inputElements=t;var i=this.parent.classList.contains("show-checkboxes");var r;this._itemElements=new Array,this._elementTree=t.reduce((function(e,o,s){var u;if(o.type==="separator"){if(!o.buttons)return e;r=new fV(s,(function(t){return n.fireSeparatorButtonTriggered(t)}),o),u=r}else{var a=s>0?t[s-1]:void 0;var h=void 0;a&&a.type==="separator"&&!a.buttons&&(r=void 0,h=a);var c=new cV(s,i,(function(t){return n.fireButtonTriggered(t)}),n._elementChecked,o,h);if(n._itemElements.push(c),r)return r.children.push(c),e;u=c}return e.push(u),e}),new Array);var e=new Array;var o=0;for(var s=0,u=this._elementTree;s<u.length;s++){var a=u[s];a instanceof fV?(e.push({element:a,collapsible:!1,collapsed:!1,children:a.children.map((function(t){return{element:t,collapsible:!1,collapsed:!1}}))}),o+=a.children.length+1):(e.push({element:a,collapsible:!1,collapsed:!1}),o++)}this._tree.setChildren(null,e),this._onChangedVisibleCount.fire(o)};n.prototype.setFocusedElements=function(t){var n=this;var i=t.map((function(t){return n._itemElements.find((function(n){return n.item===t}))})).filter((function(t){return!!t}));if(this._tree.setFocus(i),t.length>0){var r=this._tree.getFocus()[0];r&&this._tree.reveal(r)}};n.prototype.getActiveDescendant=function(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")};n.prototype.setSelectedElements=function(t){var n=this;var i=t.map((function(t){return n._itemElements.find((function(n){return n.item===t}))})).filter((function(t){return!!t}));this._tree.setSelection(i)};n.prototype.getCheckedElements=function(){return this._itemElements.filter((function(t){return t.checked})).map((function(t){return t.item}))};n.prototype.setCheckedElements=function(t){try{this._shouldFireCheckedEvents=!1;var n=new Set;for(var i=0,r=t;i<r.length;i++){var e=r[i];n.add(e)}for(var o=0,s=this._itemElements;o<s.length;o++){var e=s[o];e.checked=n.has(e.item)}}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}};n.prototype.focus=function(t){var n=this;var i;if(this._itemElements.length)switch(t===uV.Second&&this._itemElements.length<2&&(t=uV.First),t){case uV.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,(function(t){return t.element instanceof cV}));break;case uV.Second:this._tree.scrollTop=0,this._tree.setFocus([this._itemElements[1]]);break;case uV.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]);break;case uV.Next:this._tree.focusNext(void 0,!0,void 0,(function(t){return t.element instanceof cV&&(n._tree.reveal(t.element),!0)}));break;case uV.Previous:this._tree.focusPrevious(void 0,!0,void 0,(function(t){if(!(t.element instanceof cV))return!1;var i=n._tree.getParentElement(t.element);return i===null||i.children[0]!==t.element?n._tree.reveal(t.element):n._tree.reveal(i),!0}));break;case uV.NextPage:this._tree.focusNextPage(void 0,(function(t){return t.element instanceof cV&&(n._tree.reveal(t.element),!0)}));break;case uV.PreviousPage:this._tree.focusPreviousPage(void 0,(function(t){if(!(t.element instanceof cV))return!1;var i=n._tree.getParentElement(t.element);return i===null||i.children[0]!==t.element?n._tree.reveal(t.element):n._tree.reveal(i),!0}));break;case uV.NextSeparator:{var r=!1;var e=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,(function(t){if(r)return!0;if(t.element instanceof fV)r=!0,n._separatorRenderer.isSeparatorVisible(t.element)?n._tree.reveal(t.element.children[0]):n._tree.reveal(t.element,0);else if(t.element instanceof cV){if(t.element.separator)return n._itemRenderer.isItemWithSeparatorVisible(t.element)?n._tree.reveal(t.element):n._tree.reveal(t.element,0),!0;if(t.element===n._elementTree[0])return n._tree.reveal(t.element,0),!0}return!1})),e===this._tree.getFocus()[0]&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.setFocus([this._itemElements[this._itemElements.length-1]]));break}case uV.PreviousSeparator:{var o,s=!!(!((i=this._tree.getFocus()[0])===null||i===void 0)&&i.separator);this._tree.focusPrevious(void 0,!0,void 0,(function(t){if(t.element instanceof fV)s?o||(n._separatorRenderer.isSeparatorVisible(t.element)?n._tree.reveal(t.element):n._tree.reveal(t.element,0),o=t.element.children[0]):s=!0;else if(t.element instanceof cV&&!o){if(t.element.separator)n._itemRenderer.isItemWithSeparatorVisible(t.element)?n._tree.reveal(t.element):n._tree.reveal(t.element,0),o=t.element;else if(t.element===n._elementTree[0])return n._tree.reveal(t.element,0),!0}return!1})),o&&this._tree.setFocus([o]);break}}};n.prototype.clearFocus=function(){this._tree.setFocus([])};n.prototype.domFocus=function(){this._tree.domFocus()};n.prototype.layout=function(t){this._tree.getHTMLElement().style.maxHeight=t?44*Math.floor(t/44)+6+"px":"",this._tree.layout()};n.prototype.filter=function(t){var n=this;if(!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;var i=t;if((t=t.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){var r;this._elementTree.forEach((function(e){var o,s,u,a;var h;h=n.matchOnLabelMode==="fuzzy"?n.matchOnLabel&&(o=KT(t,UT(e.saneLabel)))!==null&&o!==void 0?o:void 0:n.matchOnLabel&&(s=function(t,n){var i=n.text,r=n.iconOffsets;if(!r||r.length===0)return mV(t,i);var e=ho(i," "),o=i.length-e.length,s=mV(t,e);if(s)for(var u=0,a=s;u<a.length;u++){var h=a[u];var c=r[h.start+o]+o;h.start+=c,h.end+=c}return s}(i,UT(e.saneLabel)))!==null&&s!==void 0?s:void 0;var c=n.matchOnDescription&&(u=KT(t,UT(e.saneDescription||"")))!==null&&u!==void 0?u:void 0,f=n.matchOnDetail&&(a=KT(t,UT(e.saneDetail||"")))!==null&&a!==void 0?a:void 0;if(h||c||f?(e.labelHighlights=h,e.descriptionHighlights=c,e.detailHighlights=f,e.hidden=!1):(e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!e.item||!e.item.alwaysShow),e.item?e.separator=void 0:e.separator&&(e.hidden=!0),!n.sortByLabel){var l=e.index&&n._inputElements[e.index-1];r=l&&l.type==="separator"?l:r,r&&!e.hidden&&(e.separator=r,r=void 0)}}))}else this._itemElements.forEach((function(t){t.labelHighlights=void 0,t.descriptionHighlights=void 0,t.detailHighlights=void 0,t.hidden=!1;var i=t.index&&n._inputElements[t.index-1];t.item&&(t.separator=i&&i.type==="separator"&&!i.buttons?i:void 0)}));var e=this._elementTree.filter((function(t){return!t.hidden}));if(this.sortByLabel&&t){var o=t.toLowerCase();e.sort((function(t,n){return function(t,n,i){var r=t.labelHighlights||[],e=n.labelHighlights||[];return r.length&&!e.length?-1:!r.length&&e.length?1:r.length===0&&e.length===0?0:iV(t.saneSortLabel,n.saneSortLabel,i)}(t,n,o)}))}var s;var u=e.reduce((function(t,n,i){return n instanceof cV?s?s.children.push(n):t.push(n):n instanceof fV&&(n.children=[],s=n,t.push(n)),t}),new Array),a=new Array;for(var h=0,c=u;h<c.length;h++){var f=c[h];f instanceof fV?a.push({element:f,collapsible:!1,collapsed:!1,children:f.children.map((function(t){return{element:t,collapsible:!1,collapsed:!1}}))}):a.push({element:f,collapsible:!1,collapsed:!1})}var l=this._tree.getFocus().length;return this._tree.setChildren(null,a),l>0&&a.length===0&&this._onTriggerEmptySelectionOrFocus.fire({elements:[]}),this._tree.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(e.length),!0};n.prototype.toggleCheckbox=function(){try{this._shouldFireCheckedEvents=!1;var t=this._tree.getFocus().filter((function(t){return t instanceof cV})),n=this._allVisibleChecked(t);for(var i=0,r=t;i<r.length;i++){var e=r[i];e.checkboxDisabled||(e.checked=!n)}}finally{this._shouldFireCheckedEvents=!0,this._fireCheckedEvents()}};n.prototype.display=function(t){this._container.style.display=t?"":"none"};n.prototype.isDisplayed=function(){return this._container.style.display!=="none"};n.prototype.style=function(t){this._tree.style(t)};n.prototype.toggleHover=function(){var t=this;var n=this._tree.getFocus()[0];if(!(n!=null&&n.saneTooltip&&n instanceof cV))return;if(this._lastHover&&!this._lastHover.isDisposed)return void this._lastHover.dispose();this.showHover(n);var i=new hi;i.add(this._tree.onDidChangeFocus((function(n){n.elements[0]instanceof cV&&t.showHover(n.elements[0])}))),this._lastHover&&i.add(this._lastHover),this._elementDisposable.add(i)};n.prototype._allVisibleChecked=function(t,n){if(n===void 0){n=!0}for(var i=0,r=t.length;i<r;i++){var e=t[i];if(!e.hidden){if(!e.checked)return!1;n=!0}}return n};n.prototype._fireCheckedEvents=function(){this._shouldFireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))};n.prototype.fireButtonTriggered=function(t){this._onButtonTriggered.fire(t)};n.prototype.fireSeparatorButtonTriggered=function(t){this._onSeparatorButtonTriggered.fire(t)};n.prototype.showHover=function(t){var n=this;var i,r,e;this._lastHover&&!this._lastHover.isDisposed&&((r=(i=this.hoverDelegate).onDidHideHover)===null||r===void 0||r.call(i),(e=this._lastHover)===null||e===void 0||e.dispose()),t.element&&t.saneTooltip&&(this._lastHover=this.hoverDelegate.showHover({content:t.saneTooltip,target:t.element,linkHandler:function(t){n.linkOpenerDelegate(t)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))};return n}(ci);function mV(t,n){var i=n.toLowerCase().indexOf(t.toLowerCase());return i!==-1?[{start:i,end:i+t.length}]:null}eV([Y_],wV.prototype,"onDidChangeFocus",null),eV([Y_],wV.prototype,"onDidChangeSelection",null),wV=eV([oV(4,Jh)],wV);var bV=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},yV=function(t,n){return function(i,r){n(i,r,t)}};var _V={iconClass:uc.asClassName(Hr.quickInputBack),tooltip:ht(0,"Back"),handle:-1};var kV=function(t){__extends(n,t);function n(i){var r=this;r=t.call(this)||this,r.ui=i,r._widgetUpdated=!1,r.visible=!1,r._enabled=!0,r._busy=!1,r._ignoreFocusOut=!1,r._buttons=[],r.buttonsUpdated=!1,r._toggles=[],r.togglesUpdated=!1,r.noValidationMessage=n.noPromptMessage,r._severity=AL.Ignore,r.onDidTriggerButtonEmitter=r._register(new ki),r.onDidHideEmitter=r._register(new ki),r.onWillHideEmitter=r._register(new ki),r.onDisposeEmitter=r._register(new ki),r.visibleDisposables=r._register(new hi),r.onDidHide=r.onDidHideEmitter.event;return r}Object.defineProperty(n.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"step",{get:function(){return this._steps},set:function(t){this._steps=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"totalSteps",{get:function(){return this._totalSteps},set:function(t){this._totalSteps=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"contextKey",{get:function(){return this._contextKey},set:function(t){this._contextKey=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"busy",{get:function(){return this._busy},set:function(t){this._busy=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"ignoreFocusOut",{get:function(){return this._ignoreFocusOut},set:function(t){var n=this._ignoreFocusOut!==t&&!It;this._ignoreFocusOut=t&&!It,n&&this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"buttons",{get:function(){return this._buttons},set:function(t){this._buttons=t,this.buttonsUpdated=!0,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"toggles",{get:function(){return this._toggles},set:function(t){this._toggles=t!==null&&t!==void 0?t:[],this.togglesUpdated=!0,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"validationMessage",{get:function(){return this._validationMessage},set:function(t){this._validationMessage=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"severity",{get:function(){return this._severity},set:function(t){this._severity=t,this.update()},enumerable:false,configurable:true});n.prototype.show=function(){var t=this;this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton((function(n){t.buttons.indexOf(n)!==-1&&t.onDidTriggerButtonEmitter.fire(n)}))),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())};n.prototype.hide=function(){this.visible&&this.ui.hide()};n.prototype.didHide=function(t){if(t===void 0){t=jH.Other}this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:t})};n.prototype.willHide=function(t){if(t===void 0){t=jH.Other}this.onWillHideEmitter.fire({reason:t})};n.prototype.update=function(){var t=this;var n,i;if(!this.visible)return;var r=this.getTitle();r&&this.ui.title.textContent!==r?this.ui.title.textContent=r:r||this.ui.title.innerHTML==="&nbsp;"||(this.ui.title.innerText=" ");var e=this.getDescription();if(this.ui.description1.textContent!==e&&(this.ui.description1.textContent=e),this.ui.description2.textContent!==e&&(this.ui.description2.textContent=e),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?gh(this.ui.widget,this._widget):gh(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new js,this.busyDelay.setIfNotSet((function(){t.visible&&t.ui.progressBar.infinite()}),800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();var o=this.buttons.filter((function(t){return t===_V})).map((function(n,i){return VH(n,"id-".concat(i),(function(){return __awaiter(t,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.onDidTriggerButtonEmitter.fire(n)]}))}))}))}));this.ui.leftActionBar.push(o,{icon:!0,label:!1}),this.ui.rightActionBar.clear();var s=this.buttons.filter((function(t){return t!==_V})).map((function(n,i){return VH(n,"id-".concat(i),(function(){return __awaiter(t,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.onDidTriggerButtonEmitter.fire(n)]}))}))}))}));this.ui.rightActionBar.push(s,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;var o=(i=(n=this.toggles)===null||n===void 0?void 0:n.filter((function(t){return t instanceof PH})))!==null&&i!==void 0?i:[];this.ui.inputBox.toggles=o}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);var u=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==u&&(this._lastValidationMessage=u,gh(this.ui.message),qH(u,this.ui.message,{callback:function(n){t.ui.linkOpenerDelegate(n)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))};n.prototype.getTitle=function(){return this.title&&this.step?"".concat(this.title," (").concat(this.getSteps(),")"):this.title?this.title:this.step?this.getSteps():""};n.prototype.getDescription=function(){return this.description||""};n.prototype.getSteps=function(){return this.step&&this.totalSteps?ht(0,"{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""};n.prototype.showMessageDecoration=function(t){if(this.ui.inputBox.showDecoration(t),t!==AL.Ignore){var n=this.ui.inputBox.stylesForType(t);this.ui.message.style.color=n.foreground?"".concat(n.foreground):"",this.ui.message.style.backgroundColor=n.background?"".concat(n.background):"",this.ui.message.style.border=n.border?"1px solid ".concat(n.border):"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""};n.prototype.dispose=function(){this.hide(),this.onDisposeEmitter.fire(),t.prototype.dispose.call(this)};return n}(ci);kV.noPromptMessage=ht(0,"Press 'Enter' to confirm your input or 'Escape' to cancel");var xV=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._value="",n.onDidChangeValueEmitter=n._register(new ki),n.onWillAcceptEmitter=n._register(new ki),n.onDidAcceptEmitter=n._register(new ki),n.onDidCustomEmitter=n._register(new ki),n._items=[],n.itemsUpdated=!1,n._canSelectMany=!1,n._canAcceptInBackground=!1,n._matchOnDescription=!1,n._matchOnDetail=!1,n._matchOnLabel=!0,n._matchOnLabelMode="fuzzy",n._sortByLabel=!0,n._keepScrollPosition=!1,n._itemActivation=RH.FIRST,n._activeItems=[],n.activeItemsUpdated=!1,n.activeItemsToConfirm=[],n.onDidChangeActiveEmitter=n._register(new ki),n._selectedItems=[],n.selectedItemsUpdated=!1,n.selectedItemsToConfirm=[],n.onDidChangeSelectionEmitter=n._register(new ki),n.onDidTriggerItemButtonEmitter=n._register(new ki),n.onDidTriggerSeparatorButtonEmitter=n._register(new ki),n.valueSelectionUpdated=!0,n._ok="default",n._customButton=!1,n.filterValue=function(t){return t},n.onDidChangeValue=n.onDidChangeValueEmitter.event,n.onWillAccept=n.onWillAcceptEmitter.event,n.onDidAccept=n.onDidAcceptEmitter.event,n.onDidChangeActive=n.onDidChangeActiveEmitter.event,n.onDidChangeSelection=n.onDidChangeSelectionEmitter.event,n.onDidTriggerItemButton=n.onDidTriggerItemButtonEmitter.event,n.onDidTriggerSeparatorButton=n.onDidTriggerSeparatorButtonEmitter.event;return n}Object.defineProperty(n.prototype,"quickNavigate",{get:function(){return this._quickNavigate},set:function(t){this._quickNavigate=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(t){this.doSetValue(t)},enumerable:false,configurable:true});n.prototype.doSetValue=function(t,n){this._value!==t&&(this._value=t,n||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))};Object.defineProperty(n.prototype,"ariaLabel",{get:function(){return this._ariaLabel},set:function(t){this._ariaLabel=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){this._placeholder=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t,this.itemsUpdated=!0,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"scrollTop",{get:function(){return this.ui.list.scrollTop},set:function(t){this.ui.list.scrollTop=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"canSelectMany",{get:function(){return this._canSelectMany},set:function(t){this._canSelectMany=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"canAcceptInBackground",{get:function(){return this._canAcceptInBackground},set:function(t){this._canAcceptInBackground=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchOnDescription",{get:function(){return this._matchOnDescription},set:function(t){this._matchOnDescription=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchOnDetail",{get:function(){return this._matchOnDetail},set:function(t){this._matchOnDetail=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchOnLabel",{get:function(){return this._matchOnLabel},set:function(t){this._matchOnLabel=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchOnLabelMode",{get:function(){return this._matchOnLabelMode},set:function(t){this._matchOnLabelMode=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"sortByLabel",{get:function(){return this._sortByLabel},set:function(t){this._sortByLabel=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"keepScrollPosition",{get:function(){return this._keepScrollPosition},set:function(t){this._keepScrollPosition=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"itemActivation",{get:function(){return this._itemActivation},set:function(t){this._itemActivation=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"activeItems",{get:function(){return this._activeItems},set:function(t){this._activeItems=t,this.activeItemsUpdated=!0,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"selectedItems",{get:function(){return this._selectedItems},set:function(t){this._selectedItems=t,this.selectedItemsUpdated=!0,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"keyMods",{get:function(){return this._quickNavigate?LH:this.ui.keyMods},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"valueSelection",{get:function(){var t=this.ui.inputBox.getSelection();if(t)return[t.start,t.end]},set:function(t){this._valueSelection=t,this.valueSelectionUpdated=!0,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"customButton",{get:function(){return this._customButton},set:function(t){this._customButton=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"customLabel",{get:function(){return this._customButtonLabel},set:function(t){this._customButtonLabel=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"customHover",{get:function(){return this._customButtonHover},set:function(t){this._customButtonHover=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"ok",{get:function(){return this._ok},set:function(t){this._ok=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"hideInput",{get:function(){return!!this._hideInput},set:function(t){this._hideInput=t,this.update()},enumerable:false,configurable:true});n.prototype.trySelectFirst=function(){this.canSelectMany||this.ui.list.focus(uV.First)};n.prototype.show=function(){var n=this;this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((function(t){n.doSetValue(t,!0)}))),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown((function(t){switch(t.keyCode){case 18:(Ft?t.metaKey:t.altKey)?n.ui.list.focus(uV.NextSeparator):n.ui.list.focus(uV.Next),n.canSelectMany&&n.ui.list.domFocus(),ch(t,!0);break;case 16:(Ft?t.metaKey:t.altKey)?n.ui.list.focus(uV.PreviousSeparator):n.ui.list.focus(uV.Previous),n.canSelectMany&&n.ui.list.domFocus(),ch(t,!0);break;case 12:n.ui.list.focus(uV.NextPage),n.canSelectMany&&n.ui.list.domFocus(),ch(t,!0);break;case 11:n.ui.list.focus(uV.PreviousPage),n.canSelectMany&&n.ui.list.domFocus(),ch(t,!0);break;case 17:if(!n._canAcceptInBackground||!n.ui.inputBox.isSelectionAtEnd())return;n.activeItems[0]&&(n._selectedItems=[n.activeItems[0]],n.onDidChangeSelectionEmitter.fire(n.selectedItems),n.handleAccept(!0));break;case 14:!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(n.ui.list.focus(uV.First),ch(t,!0));break;case 13:!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(n.ui.list.focus(uV.Last),ch(t,!0))}}))),this.visibleDisposables.add(this.ui.onDidAccept((function(){n.canSelectMany?n.ui.list.getCheckedElements().length||(n._selectedItems=[],n.onDidChangeSelectionEmitter.fire(n.selectedItems)):n.activeItems[0]&&(n._selectedItems=[n.activeItems[0]],n.onDidChangeSelectionEmitter.fire(n.selectedItems)),n.handleAccept(!1)}))),this.visibleDisposables.add(this.ui.onDidCustom((function(){n.onDidCustomEmitter.fire()}))),this.visibleDisposables.add(this.ui.list.onDidChangeFocus((function(t){n.activeItemsUpdated||n.activeItemsToConfirm!==n._activeItems&&v(t,n._activeItems,(function(t,n){return t===n}))||(n._activeItems=t,n.onDidChangeActiveEmitter.fire(t))}))),this.visibleDisposables.add(this.ui.list.onDidChangeSelection((function(t){var i=t.items,r=t.event;n.canSelectMany?i.length&&n.ui.list.setSelectedElements([]):n.selectedItemsToConfirm!==n._selectedItems&&v(i,n._selectedItems,(function(t,n){return t===n}))||(n._selectedItems=i,n.onDidChangeSelectionEmitter.fire(i),i.length&&n.handleAccept(sh(r)&&r.button===1))}))),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((function(t){n.canSelectMany&&(n.selectedItemsToConfirm!==n._selectedItems&&v(t,n._selectedItems,(function(t,n){return t===n}))||(n._selectedItems=t,n.onDidChangeSelectionEmitter.fire(t)))}))),this.visibleDisposables.add(this.ui.list.onButtonTriggered((function(t){return n.onDidTriggerItemButtonEmitter.fire(t)}))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered((function(t){return n.onDidTriggerSeparatorButtonEmitter.fire(t)}))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),t.prototype.show.call(this)};n.prototype.handleAccept=function(t){var n=!1;this.onWillAcceptEmitter.fire({veto:function(){return n=!0}}),n||this.onDidAcceptEmitter.fire({inBackground:t})};n.prototype.registerQuickNavigation=function(){var t=this;return ma(this.ui.container,ah.KEY_UP,(function(n){if(t.canSelectMany||!t._quickNavigate)return;var i=new ws(n),r=i.keyCode;t._quickNavigate.keybindings.some((function(t){var n=t.getChords();return!(n.length>1)&&(n[0].shiftKey&&r===4?!(i.ctrlKey||i.altKey||i.metaKey):!(!n[0].altKey||r!==6)||!(!n[0].ctrlKey||r!==5)||!(!n[0].metaKey||r!==57))}))&&(t.activeItems[0]&&(t._selectedItems=[t.activeItems[0]],t.onDidChangeSelectionEmitter.fire(t.selectedItems),t.handleAccept(!1)),t._quickNavigate=void 0)}))};n.prototype.update=function(){if(!this.visible)return;var i=this.keepScrollPosition?this.scrollTop:0,r=!!this.description,e={title:!!this.title||!!this.step||!!this.buttons.length,description:r,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||r,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(e),t.prototype.update.call(this),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");var o=this.ariaLabel;if(!o&&e.inputBox&&(o=this.placeholder||n.DEFAULT_ARIA_LABEL,this.title&&(o+=" - ".concat(this.title))),this.ui.list.ariaLabel!==o&&(this.ui.list.ariaLabel=o!==null&&o!==void 0?o:null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated){this.itemsUpdated=!1;var s=this._activeItems;switch(this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case RH.NONE:s.length>0&&(this._activeItems=[],this.onDidChangeActiveEmitter.fire(this._activeItems)),this._itemActivation=RH.FIRST;break;case RH.SECOND:this.ui.list.focus(uV.Second),this._itemActivation=RH.FIRST;break;case RH.LAST:this.ui.list.focus(uV.Last),this._itemActivation=RH.FIRST;break;default:this.trySelectFirst()}}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",e.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(uV.First)),this.keepScrollPosition&&(this.scrollTop=i)};return n}(kV);xV.DEFAULT_ARIA_LABEL=ht(0,"Type to narrow down results.");var CV=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._value="",n.valueSelectionUpdated=!0,n._password=!1,n.onDidValueChangeEmitter=n._register(new ki),n.onDidAcceptEmitter=n._register(new ki),n.onDidChangeValue=n.onDidValueChangeEmitter.event,n.onDidAccept=n.onDidAcceptEmitter.event;return n}Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t||"",this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){this._placeholder=t,this.update()},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"password",{get:function(){return this._password},set:function(t){this._password=t,this.update()},enumerable:false,configurable:true});n.prototype.show=function(){var n=this;this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((function(t){t!==n.value&&(n._value=t,n.onDidValueChangeEmitter.fire(t))}))),this.visibleDisposables.add(this.ui.onDidAccept((function(){return n.onDidAcceptEmitter.fire()}))),this.valueSelectionUpdated=!0),t.prototype.show.call(this)};n.prototype.update=function(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");var n={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(n),t.prototype.update.call(this),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)};return n}(kV);var SV=function(t){__extends(n,t);function n(n,i){var r=t.call(this,"element",!1,(function(t){return r.getOverrideOptions(t)}),n,i)||this;return r}n.prototype.getOverrideOptions=function(t){var n;return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:(t.content instanceof HTMLElement?(n=t.content.textContent)!==null&&n!==void 0?n:"":typeof t.content=="string"?t.content:t.content.value).includes("\n"),skipFadeInAnimation:!0}}};return n}(bR);SV=bV([yV(0,Kl),yV(1,mR)],SV),Ig.white.toString(),Ig.white.toString();var DV=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._label="",r._onDidClick=r._register(new ki),r._onDidEscape=r._register(new ki),r.options=i,r._element=document.createElement("a"),r._element.classList.add("monaco-button"),r._element.tabIndex=0,r._element.setAttribute("role","button"),r._element.classList.toggle("secondary",!!i.secondary);var e=i.secondary?i.buttonSecondaryBackground:i.buttonBackground,o=i.secondary?i.buttonSecondaryForeground:i.buttonForeground;r._element.style.color=o||"",r._element.style.backgroundColor=e||"",i.supportShortLabel&&(r._labelShortElement=document.createElement("div"),r._labelShortElement.classList.add("monaco-button-label-short"),r._element.appendChild(r._labelShortElement),r._labelElement=document.createElement("div"),r._labelElement.classList.add("monaco-button-label"),r._element.appendChild(r._labelElement),r._element.classList.add("monaco-text-button-with-short-label")),typeof i.title=="string"&&r.setTitle(i.title),typeof i.ariaLabel=="string"&&r._element.setAttribute("aria-label",i.ariaLabel),n.appendChild(r._element),r._register(nk.addTarget(r._element)),[ah.CLICK,X_.Tap].forEach((function(t){r._register(ma(r._element,t,(function(t){r.enabled?r._onDidClick.fire(t):ch(t)})))})),r._register(ma(r._element,ah.KEY_DOWN,(function(t){var n=new ws(t);var i=!1;r.enabled&&(n.equals(3)||n.equals(10))?(r._onDidClick.fire(t),i=!0):n.equals(9)&&(r._onDidEscape.fire(t),r._element.blur(),i=!0),i&&ch(n,!0)}))),r._register(ma(r._element,ah.MOUSE_OVER,(function(t){r._element.classList.contains("disabled")||r.updateBackground(!0)}))),r._register(ma(r._element,ah.MOUSE_OUT,(function(t){r.updateBackground(!1)}))),r.focusTracker=r._register(lh(r._element)),r._register(r.focusTracker.onDidFocus((function(){r.enabled&&r.updateBackground(!0)}))),r._register(r.focusTracker.onDidBlur((function(){r.enabled&&r.updateBackground(!1)})));return r}Object.defineProperty(n.prototype,"onDidClick",{get:function(){return this._onDidClick.event},enumerable:false,configurable:true});n.prototype.dispose=function(){t.prototype.dispose.call(this),this._element.remove()};n.prototype.getContentElements=function(t){var n=[];for(var i=0,r=RR(t);i<r.length;i++){var e=r[i];if(typeof e=="string"){if(e=e.trim(),e==="")continue;var o=document.createElement("span");o.textContent=e,n.push(o)}else n.push(e)}return n};n.prototype.updateBackground=function(t){var n;n=this.options.secondary?t?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t?this.options.buttonHoverBackground:this.options.buttonBackground,n&&(this._element.style.backgroundColor=n)};Object.defineProperty(n.prototype,"element",{get:function(){return this._element},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"label",{get:function(){return this._label},set:function(t){var n,i,r;if(this._label===t||GT(this._label)&&GT(t)&&((i=this._label)===(r=t)||i&&r&&i.value===r.value&&i.isTrusted===r.isTrusted&&i.supportThemeIcons===r.supportThemeIcons&&i.supportHtml===r.supportHtml&&(i.baseUri===r.baseUri||i.baseUri&&r.baseUri&&IO(Cr.from(i.baseUri),Cr.from(r.baseUri)))))return;this._element.classList.add("monaco-text-button");var e=this.options.supportShortLabel?this._labelElement:this._element;if(GT(t)){var o=eI(t,{inline:!0});o.dispose();var s=(n=o.element.querySelector("p"))===null||n===void 0?void 0:n.innerHTML;if(s){var u=Wu(s,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});e.innerHTML=u}else gh(e)}else this.options.supportIcons?gh.apply(void 0,__spreadArray([e],this.getContentElements(t),false)):e.textContent=t;var a="";typeof this.options.title=="string"?a=this.options.title:this.options.title&&(a=hI(t)),this.setTitle(a),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",a),this._label=t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"icon",{set:function(t){var n;(n=this._element.classList).add.apply(n,uc.asClassNameArray(t))},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"enabled",{get:function(){return!this._element.classList.contains("disabled")},set:function(t){t?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))},enumerable:false,configurable:true});n.prototype.setTitle=function(t){var n;this._hover||t===""?this._hover&&this._hover.update(t):this._hover=this._register(DN((n=this.options.hoverDelegate)!==null&&n!==void 0?n:kN("mouse"),this._element,t))};return n}(ci);var AV=function(){function t(t,n,i){this.options=n,this.styles=i,this.count=0,this.element=vh(t,bh(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}t.prototype.setCount=function(t){this.count=t,this.render()};t.prototype.setTitleFormat=function(t){this.titleFormat=t,this.render()};t.prototype.render=function(){var t,n;this.element.textContent=oo(this.countFormat,this.count),this.element.title=oo(this.titleFormat,this.count),this.element.style.backgroundColor=(t=this.styles.badgeBackground)!==null&&t!==void 0?t:"",this.element.style.color=(n=this.styles.badgeForeground)!==null&&n!==void 0?n:"",this.styles.badgeBorder&&(this.element.style.border="1px solid ".concat(this.styles.badgeBorder))};return t}();var OV="done",EV="active",MV="infinite",FV="infinite-long-running",LV="discrete";var jV=function(t){__extends(n,t);function n(i,r){var e=this;e=t.call(this)||this,e.workedVal=0,e.showDelayedScheduler=e._register(new Ts((function(){return yh(e.element)}),0)),e.longRunningScheduler=e._register(new Ts((function(){return e.infiniteLongRunning()}),n.LONG_RUNNING_INFINITE_THRESHOLD)),e.create(i,r);return e}n.prototype.create=function(t,n){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),t.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(n==null?void 0:n.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)};n.prototype.off=function(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(EV,MV,FV,LV),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()};n.prototype.stop=function(){return this.doDone(!1)};n.prototype.doDone=function(t){var n=this;return this.element.classList.add(OV),this.element.classList.contains(MV)?(this.bit.style.opacity="0",t?setTimeout((function(){return n.off()}),200):this.off()):(this.bit.style.width="inherit",t?setTimeout((function(){return n.off()}),200):this.off()),this};n.prototype.infinite=function(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(LV,OV,FV),this.element.classList.add(EV,MV),this.longRunningScheduler.schedule(),this};n.prototype.infiniteLongRunning=function(){this.element.classList.add(FV)};n.prototype.getContainer=function(){return this.element};return n}(ci);jV.LONG_RUNNING_INFINITE_THRESHOLD=1e4;var RV=bh;var TV=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.parent=n,e.onKeyDown=function(t){return ya(e.findInput.inputBox.inputElement,ah.KEY_DOWN,t)},e.onDidChange=function(t){return e.findInput.onDidChange(t)},e.container=vh(e.parent,RV(".quick-input-box")),e.findInput=e._register(new Az(e.container,void 0,{label:"",inputBoxStyles:i,toggleStyles:r}));var o=e.findInput.inputBox.inputElement;o.role="combobox",o.ariaHasPopup="menu",o.ariaAutoComplete="list",o.ariaExpanded="true";return e}Object.defineProperty(n.prototype,"value",{get:function(){return this.findInput.getValue()},set:function(t){this.findInput.setValue(t)},enumerable:false,configurable:true});n.prototype.select=function(t){if(t===void 0){t=null}this.findInput.inputBox.select(t)};n.prototype.getSelection=function(){return this.findInput.inputBox.getSelection()};n.prototype.isSelectionAtEnd=function(){return this.findInput.inputBox.isSelectionAtEnd()};Object.defineProperty(n.prototype,"placeholder",{get:function(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""},set:function(t){this.findInput.inputBox.setPlaceHolder(t)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"password",{get:function(){return this.findInput.inputBox.inputElement.type==="password"},set:function(t){this.findInput.inputBox.inputElement.type=t?"password":"text"},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"enabled",{set:function(t){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!t)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"toggles",{set:function(t){this.findInput.setAdditionalToggles(t)},enumerable:false,configurable:true});n.prototype.setAttribute=function(t,n){this.findInput.inputBox.inputElement.setAttribute(t,n)};n.prototype.showDecoration=function(t){t===AL.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:t===AL.Info?1:t===AL.Warning?2:3,content:""})};n.prototype.stylesForType=function(t){return this.findInput.inputBox.stylesForType(t===AL.Info?1:t===AL.Warning?2:3)};n.prototype.setFocus=function(){this.findInput.focus()};n.prototype.layout=function(){this.findInput.inputBox.layout()};return n}(ci);var IV,BV=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},NV=function(t,n){return function(i,r){n(i,r,t)}};var PV=bh;var WV=IV=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.options=n,e.layoutService=i,e.instantiationService=r,e.enabled=!0,e.onDidAcceptEmitter=e._register(new ki),e.onDidCustomEmitter=e._register(new ki),e.onDidTriggerButtonEmitter=e._register(new ki),e.keyMods={ctrlCmd:!1,alt:!1},e.controller=null,e.onShowEmitter=e._register(new ki),e.onShow=e.onShowEmitter.event,e.onHideEmitter=e._register(new ki),e.onHide=e.onHideEmitter.event,e.idPrefix=n.idPrefix,e._container=n.container,e.styles=n.styles,e._register(wi.runAndSubscribe(va,(function(t){var n=t.window,i=t.disposables;return e.registerKeyModsListeners(n,i)}),{window:Xe,disposables:e._store})),e._register(da((function(t){e.ui&&sa(e.ui.container)===t&&(e.reparentUI(e.layoutService.mainContainer),e.layout(e.layoutService.mainContainerDimension,e.layoutService.mainContainerOffset.quickPickTop))})));return e}Object.defineProperty(n.prototype,"container",{get:function(){return this._container},enumerable:false,configurable:true});n.prototype.registerKeyModsListeners=function(t,n){var i=this;var r=function(t){i.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,i.keyMods.alt=t.altKey};for(var e=0,o=[ah.KEY_DOWN,ah.KEY_UP,ah.MOUSE_DOWN];e<o.length;e++){var s=o[e];n.add(ma(t,s,r,!0))}};n.prototype.getUI=function(t){var n=this;if(this.ui)return t&&sa(this._container)!==sa(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;var i=vh(this._container,PV(".quick-input-widget.show-file-icons"));i.tabIndex=-1,i.style.display="none";var r=Qa(i),e=vh(i,PV(".quick-input-titlebar")),o=this._register(new qW(e,{hoverDelegate:this.options.hoverDelegate}));o.domNode.classList.add("quick-input-left-action-bar");var s=vh(e,PV(".quick-input-title")),u=this._register(new qW(e,{hoverDelegate:this.options.hoverDelegate}));u.domNode.classList.add("quick-input-right-action-bar");var a=vh(i,PV(".quick-input-header")),h=vh(a,PV("input.quick-input-check-all"));h.type="checkbox",h.setAttribute("aria-label",ht(0,"Toggle all checkboxes")),this._register(ya(h,ah.CHANGE,(function(t){var n=h.checked;A.setAllVisibleChecked(n)}))),this._register(ma(h,ah.CLICK,(function(t){(t.x||t.y)&&v.setFocus()})));var c=vh(a,PV(".quick-input-description")),f=vh(a,PV(".quick-input-and-message")),l=vh(f,PV(".quick-input-filter")),v=this._register(new TV(l,this.styles.inputBox,this.styles.toggle));v.setAttribute("aria-describedby","".concat(this.idPrefix,"message"));var d=vh(l,PV(".quick-input-visible-count"));d.setAttribute("aria-live","polite"),d.setAttribute("aria-atomic","true");var g=new AV(d,{countFormat:ht(0,"{0} Results")},this.styles.countBadge),p=vh(l,PV(".quick-input-count"));p.setAttribute("aria-live","polite");var w=new AV(p,{countFormat:ht(0,"{0} Selected")},this.styles.countBadge),m=vh(a,PV(".quick-input-action")),b=this._register(new DV(m,this.styles.button));b.label=ht(0,"OK"),this._register(b.onDidClick((function(t){n.onDidAcceptEmitter.fire()})));var y=vh(a,PV(".quick-input-action")),_=this._register(new DV(y,__assign(__assign({},this.styles.button),{supportIcons:!0})));_.label=ht(0,"Custom"),this._register(_.onDidClick((function(t){n.onDidCustomEmitter.fire()})));var k=vh(f,PV("#".concat(this.idPrefix,"message.quick-input-message"))),x=this._register(new jV(i,this.styles.progressBar));x.getContainer().classList.add("quick-input-progress");var C=vh(i,PV(".quick-input-html-widget"));C.tabIndex=-1;var S=vh(i,PV(".quick-input-description")),D=this.idPrefix+"list",A=this._register(this.instantiationService.createInstance(wV,i,this.options.hoverDelegate,this.options.linkOpenerDelegate,D));v.setAttribute("aria-controls",D),this._register(A.onDidChangeFocus((function(){var t;v.setAttribute("aria-activedescendant",(t=A.getActiveDescendant())!==null&&t!==void 0?t:"")}))),this._register(A.onChangedAllVisibleChecked((function(t){h.checked=t}))),this._register(A.onChangedVisibleCount((function(t){g.setCount(t)}))),this._register(A.onChangedCheckedCount((function(t){w.setCount(t)}))),this._register(A.onLeave((function(){setTimeout((function(){n.controller&&(v.setFocus(),n.controller instanceof xV&&n.controller.canSelectMany&&A.clearFocus())}),0)})));var O=lh(i);return this._register(O),this._register(ma(i,ah.FOCUS,(function(t){Pa(t.relatedTarget,i)||(n.previousFocusElement=t.relatedTarget instanceof HTMLElement?t.relatedTarget:void 0)}),!0)),this._register(O.onDidBlur((function(){n.getUI().ignoreFocusOut||n.options.ignoreFocusOut()||n.hide(jH.Blur),n.previousFocusElement=void 0}))),this._register(ma(i,ah.FOCUS,(function(t){v.setFocus()}))),this._register(ya(i,ah.KEY_DOWN,(function(t){if(!Pa(t.target,C))switch(t.keyCode){case 3:ch(t,!0),n.enabled&&n.onDidAcceptEmitter.fire();break;case 9:ch(t,!0),n.hide(jH.Gesture);break;case 2:if(!t.altKey&&!t.ctrlKey&&!t.metaKey){var r=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(i.classList.contains("show-checkboxes")?r.push("input"):r.push("input[type=text]"),n.getUI().list.isDisplayed()&&r.push(".monaco-list"),n.getUI().message&&r.push(".quick-input-message a"),n.getUI().widget){if(Pa(t.target,n.getUI().widget))break;r.push(".quick-input-html-widget")}var e=i.querySelectorAll(r.join(", "));t.shiftKey&&t.target===e[0]?(ch(t,!0),A.clearFocus()):!t.shiftKey&&Pa(t.target,e[e.length-1])&&(ch(t,!0),e[0].focus())}break;case 10:t.ctrlKey&&(ch(t,!0),n.getUI().list.toggleHover())}}))),this.ui={container:i,styleSheet:r,leftActionBar:o,titleBar:e,title:s,description1:S,description2:c,widget:C,rightActionBar:u,checkAll:h,inputContainer:f,filterContainer:l,inputBox:v,visibleCountContainer:d,visibleCount:g,countContainer:p,count:w,okContainer:m,ok:b,message:k,customButtonContainer:y,customButton:_,list:A,progressBar:x,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:function(t){return n.show(t)},hide:function(){return n.hide()},setVisibilities:function(t){return n.setVisibilities(t)},setEnabled:function(t){return n.setEnabled(t)},setContextKey:function(t){return n.options.setContextKey(t)},linkOpenerDelegate:function(t){return n.options.linkOpenerDelegate(t)}},this.updateStyles(),this.ui};n.prototype.reparentUI=function(t){this.ui&&(this._container=t,vh(this._container,this.ui.container))};n.prototype.pick=function(t,n,i){var r=this;if(n===void 0){n={}}if(i===void 0){i=Fi.None}return new Promise((function(e,o){var s=function(t){var i;s=e,(i=n.onKeyMods)===null||i===void 0||i.call(n,u.keyMods),e(t)};if(i.isCancellationRequested)return void s(void 0);var u=r.createQuickPick();var a;var h=[u,u.onDidAccept((function(){if(u.canSelectMany)s(u.selectedItems.slice()),u.hide();else{var t=u.activeItems[0];t&&(s(t),u.hide())}})),u.onDidChangeActive((function(t){var i=t[0];i&&n.onDidFocus&&n.onDidFocus(i)})),u.onDidChangeSelection((function(t){if(!u.canSelectMany){var n=t[0];n&&(s(n),u.hide())}})),u.onDidTriggerItemButton((function(t){return n.onDidTriggerItemButton&&n.onDidTriggerItemButton(__assign(__assign({},t),{removeItem:function(){var n=u.items.indexOf(t.item);if(n!==-1){var i=u.items.slice(),r=i.splice(n,1),e=u.activeItems.filter((function(t){return t!==r[0]})),o=u.keepScrollPosition;u.keepScrollPosition=!0,u.items=i,e&&(u.activeItems=e),u.keepScrollPosition=o}}}))})),u.onDidTriggerSeparatorButton((function(t){var i;return(i=n.onDidTriggerSeparatorButton)===null||i===void 0?void 0:i.call(n,t)})),u.onDidChangeValue((function(t){!a||t||u.activeItems.length===1&&u.activeItems[0]===a||(u.activeItems=[a])})),i.onCancellationRequested((function(){u.hide()})),u.onDidHide((function(){si(h),s(void 0)}))];u.title=n.title,u.canSelectMany=!!n.canPickMany,u.placeholder=n.placeHolder,u.ignoreFocusOut=!!n.ignoreFocusLost,u.matchOnDescription=!!n.matchOnDescription,u.matchOnDetail=!!n.matchOnDetail,u.matchOnLabel=n.matchOnLabel===void 0||n.matchOnLabel,u.quickNavigate=n.quickNavigate,u.hideInput=!!n.hideInput,u.contextKey=n.contextKey,u.busy=!0,Promise.all([t,n.activeItem]).then((function(t){var n=t[0],i=t[1];a=i,u.busy=!1,u.items=n,u.canSelectMany&&(u.selectedItems=n.filter((function(t){return t.type!=="separator"&&t.picked}))),a&&(u.activeItems=[a])})),u.show(),Promise.resolve(t).then(void 0,(function(t){o(t),u.hide()}))}))};n.prototype.createQuickPick=function(){var t=this.getUI(!0);return new xV(t)};n.prototype.createInputBox=function(){var t=this.getUI(!0);return new CV(t)};n.prototype.show=function(t){var n=this.getUI(!0);this.onShowEmitter.fire();var i=this.controller;this.controller=t,i==null||i.didHide(),this.setEnabled(!0),n.leftActionBar.clear(),n.title.textContent="",n.description1.textContent="",n.description2.textContent="",gh(n.widget),n.rightActionBar.clear(),n.checkAll.checked=!1,n.inputBox.placeholder="",n.inputBox.password=!1,n.inputBox.showDecoration(AL.Ignore),n.visibleCount.setCount(0),n.count.setCount(0),gh(n.message),n.progressBar.stop(),n.list.setElements([]),n.list.matchOnDescription=!1,n.list.matchOnDetail=!1,n.list.matchOnLabel=!0,n.list.sortByLabel=!0,n.ignoreFocusOut=!1,n.inputBox.toggles=void 0;var r=this.options.backKeybindingLabel();_V.tooltip=r?ht(0,"Back ({0})",r):ht(0,"Back"),n.container.style.display="",this.updateLayout(),n.inputBox.setFocus()};n.prototype.isVisible=function(){return!!this.ui&&this.ui.container.style.display!=="none"};n.prototype.setVisibilities=function(t){var n=this.getUI();n.title.style.display=t.title?"":"none",n.description1.style.display=t.description&&(t.inputBox||t.checkAll)?"":"none",n.description2.style.display=!t.description||t.inputBox||t.checkAll?"none":"",n.checkAll.style.display=t.checkAll?"":"none",n.inputContainer.style.display=t.inputBox?"":"none",n.filterContainer.style.display=t.inputBox?"":"none",n.visibleCountContainer.style.display=t.visibleCount?"":"none",n.countContainer.style.display=t.count?"":"none",n.okContainer.style.display=t.ok?"":"none",n.customButtonContainer.style.display=t.customButton?"":"none",n.message.style.display=t.message?"":"none",n.progressBar.getContainer().style.display=t.progressBar?"":"none",n.list.display(!!t.list),n.container.classList.toggle("show-checkboxes",!!t.checkBox),n.container.classList.toggle("hidden-input",!t.inputBox&&!t.description),this.updateLayout()};n.prototype.setEnabled=function(t){if(t!==this.enabled){this.enabled=t;for(var n=0,i=this.getUI().leftActionBar.viewItems;n<i.length;n++){var r=i[n];r.action.enabled=t}for(var e=0,o=this.getUI().rightActionBar.viewItems;e<o.length;e++){var r=o[e];r.action.enabled=t}this.getUI().checkAll.disabled=!t,this.getUI().inputBox.enabled=t,this.getUI().ok.enabled=t,this.getUI().list.enabled=t}};n.prototype.hide=function(t){var n,i;var r=this.controller;if(!r)return;r.willHide(t);var e=(n=this.ui)===null||n===void 0?void 0:n.container,o=e&&!qa(e);if(this.controller=null,this.onHideEmitter.fire(),e&&(e.style.display="none"),!o){var s=this.previousFocusElement;for(;s&&!s.offsetParent;)s=(i=s.parentElement)!==null&&i!==void 0?i:void 0;s!=null&&s.offsetParent?(s.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}r.didHide(t)};n.prototype.layout=function(t,n){this.dimension=t,this.titleBarOffset=n,this.updateLayout()};n.prototype.updateLayout=function(){if(this.ui&&this.isVisible()){this.ui.container.style.top="".concat(this.titleBarOffset,"px");var t=this.ui.container.style,n=Math.min(.62*this.dimension.width,IV.MAX_WIDTH);t.width=n+"px",t.marginLeft="-"+n/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}};n.prototype.applyStyles=function(t){this.styles=t,this.updateStyles()};n.prototype.updateStyles=function(){if(this.ui){var t=this.styles.widget,n=t.quickInputTitleBackground,i=t.quickInputBackground,r=t.quickInputForeground,e=t.widgetBorder,o=t.widgetShadow;this.ui.titleBar.style.backgroundColor=n!==null&&n!==void 0?n:"",this.ui.container.style.backgroundColor=i!==null&&i!==void 0?i:"",this.ui.container.style.color=r!==null&&r!==void 0?r:"",this.ui.container.style.border=e?"1px solid ".concat(e):"",this.ui.container.style.boxShadow=o?"0 0 8px 2px ".concat(o):"",this.ui.list.style(this.styles.list);var s=[];this.styles.pickerGroup.pickerGroupBorder&&s.push(".quick-input-list .quick-input-list-entry { border-top-color:  ".concat(this.styles.pickerGroup.pickerGroupBorder,"; }")),this.styles.pickerGroup.pickerGroupForeground&&s.push(".quick-input-list .quick-input-list-separator { color:  ".concat(this.styles.pickerGroup.pickerGroupForeground,"; }")),this.styles.pickerGroup.pickerGroupForeground&&s.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(s.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&s.push("background-color: ".concat(this.styles.keybindingLabel.keybindingLabelBackground,";")),this.styles.keybindingLabel.keybindingLabelBorder&&s.push("border-color: ".concat(this.styles.keybindingLabel.keybindingLabelBorder,";")),this.styles.keybindingLabel.keybindingLabelBottomBorder&&s.push("border-bottom-color: ".concat(this.styles.keybindingLabel.keybindingLabelBottomBorder,";")),this.styles.keybindingLabel.keybindingLabelShadow&&s.push("box-shadow: inset 0 -1px 0 ".concat(this.styles.keybindingLabel.keybindingLabelShadow,";")),this.styles.keybindingLabel.keybindingLabelForeground&&s.push("color: ".concat(this.styles.keybindingLabel.keybindingLabelForeground,";")),s.push("}"));var u=s.join("\n");u!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=u)}};return n}(ci);WV.MAX_WIDTH=600,WV=IV=BV([NV(1,XL),NV(2,Jh)],WV);var HV=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},zV=function(t,n){return function(i,r){n(i,r,t)}};var UV=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this,r)||this,s.instantiationService=n,s.contextKeyService=i,s.layoutService=e,s.configurationService=o,s._onShow=s._register(new ki),s._onHide=s._register(new ki),s.contexts=new Map;return s}Object.defineProperty(n.prototype,"controller",{get:function(){return this._controller||(this._controller=this._register(this.createController())),this._controller},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"hasController",{get:function(){return!!this._controller},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"quickAccess",{get:function(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(NH))),this._quickAccess},enumerable:false,configurable:true});n.prototype.createController=function(t,n){var i=this;if(t===void 0){t=this.layoutService}var r={idPrefix:"quickInput_",container:t.activeContainer,ignoreFocusOut:function(){return!1},backKeybindingLabel:function(){},setContextKey:function(t){return i.setContextKey(t)},linkOpenerDelegate:function(t){i.instantiationService.invokeFunction((function(n){n.get(DR).open(t,{allowCommands:!0,fromUserGesture:!0})}))},returnFocus:function(){return t.focus()},styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(SV))},e=this._register(this.instantiationService.createInstance(WV,__assign(__assign({},r),n)));return e.layout(t.activeContainerDimension,t.activeContainerOffset.quickPickTop),this._register(t.onDidLayoutActiveContainer((function(n){sa(t.activeContainer)===sa(e.container)&&e.layout(n,t.activeContainerOffset.quickPickTop)}))),this._register(t.onDidChangeActiveContainer((function(){e.isVisible()||e.layout(t.activeContainerDimension,t.activeContainerOffset.quickPickTop)}))),this._register(e.onShow((function(){i.resetContextKeys(),i._onShow.fire()}))),this._register(e.onHide((function(){i.resetContextKeys(),i._onHide.fire()}))),e};n.prototype.setContextKey=function(t){var n;t&&(n=this.contexts.get(t),n||(n=new qc(t,!1).bindTo(this.contextKeyService),this.contexts.set(t,n))),n&&n.get()||(this.resetContextKeys(),n==null||n.set(!0))};n.prototype.resetContextKeys=function(){this.contexts.forEach((function(t){t.get()&&t.reset()}))};n.prototype.pick=function(t,n,i){if(n===void 0){n={}}if(i===void 0){i=Fi.None}return this.controller.pick(t,n,i)};n.prototype.createQuickPick=function(){return this.controller.createQuickPick()};n.prototype.createInputBox=function(){return this.controller.createInputBox()};n.prototype.updateStyles=function(){this.hasController&&this.controller.applyStyles(this.computeStyles())};n.prototype.computeStyles=function(){return{widget:{quickInputBackground:qw(Ky),quickInputForeground:qw(Vy),quickInputTitleBackground:qw(qy),widgetBorder:qw(nb),widgetShadow:qw(tb)},inputBox:OW,toggle:AW,countBadge:MW,button:SW,progressBar:DW,keybindingLabel:CW,list:LW({listBackground:Ky,listFocusBackground:Yy,listFocusForeground:Zy,listInactiveFocusForeground:Zy,listInactiveSelectionIconForeground:Qy,listInactiveFocusBackground:Yy,listFocusOutline:hm,listInactiveFocusOutline:hm}),pickerGroup:{pickerGroupBorder:qw($y),pickerGroupForeground:qw(Gy)}}};return n}($k);UV=HV([zV(0,Jh),zV(1,Gc),zV(2,zk),zV(3,XL),zV(4,Kl)],UV);var KV=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},VV=function(t,n){return function(i,r){n(i,r,t)}};var qV=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this,i,r,e,new rj(n.getContainerDomNode(),o),s)||this,u.host=void 0;var a=$V.get(n);if(a){var h=a.widget;u.host={_serviceBrand:void 0,get mainContainer(){return h.getDomNode()},getContainer:function(){return h.getDomNode()},whenContainerStylesLoaded:function(){},get containers(){return[h.getDomNode()]},get activeContainer(){return h.getDomNode()},get mainContainerDimension(){return n.getLayoutInfo()},get activeContainerDimension(){return n.getLayoutInfo()},get onDidLayoutMainContainer(){return n.onDidLayoutChange},get onDidLayoutActiveContainer(){return n.onDidLayoutChange},get onDidLayoutContainer(){return wi.map(n.onDidLayoutChange,(function(t){return{container:h.getDomNode(),dimension:t}}))},get onDidChangeActiveContainer(){return wi.None},get onDidAddContainer(){return wi.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:function(){return n.focus()}}}else u.host=void 0;return u}n.prototype.createController=function(){return t.prototype.createController.call(this,this.host)};return n}(UV);qV=KV([VV(1,Jh),VV(2,Gc),VV(3,zk),VV(4,Qh),VV(5,Kl)],qV);var GV=function(){function t(t,n){this.instantiationService=t,this.codeEditorService=n,this.mapEditorToService=new Map}Object.defineProperty(t.prototype,"activeService",{get:function(){var t=this;var n=this.codeEditorService.getFocusedCodeEditor();if(!n)throw new Error("Quick input service needs a focused editor to work.");var i=this.mapEditorToService.get(n);if(!i){var r=i=this.instantiationService.createInstance(qV,n);this.mapEditorToService.set(n,i),ei(n.onDidDispose)((function(){r.dispose(),t.mapEditorToService.delete(n)}))}return i},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"quickAccess",{get:function(){return this.activeService.quickAccess},enumerable:false,configurable:true});t.prototype.pick=function(t,n,i){if(n===void 0){n={}}if(i===void 0){i=Fi.None}return this.activeService.pick(t,n,i)};t.prototype.createQuickPick=function(){return this.activeService.createQuickPick()};t.prototype.createInputBox=function(){return this.activeService.createInputBox()};return t}();GV=KV([VV(0,Jh),VV(1,Qh)],GV);var $V=function(){function t(t){this.editor=t,this.widget=new JV(this.editor)}t.get=function(n){return n.getContribution(t.ID)};t.prototype.dispose=function(){this.widget.dispose()};return t}();$V.ID="editor.controller.quickInput";var JV=function(){function t(t){this.codeEditor=t,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}t.prototype.getId=function(){return t.ID};t.prototype.getDomNode=function(){return this.domNode};t.prototype.getPosition=function(){return{preference:2}};t.prototype.dispose=function(){this.codeEditor.removeOverlayWidget(this)};return t}();JV.ID="editor.contrib.quickInputWidget",Pf($V.ID,$V,4);var ZV=function(){function t(t,n,i,r,e){this._parsedThemeRuleBrand=void 0,this.token=t,this.index=n,this.fontStyle=i,this.foreground=r,this.background=e}return t}();var QV=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;var YV=function(){function t(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}t.prototype.getId=function(t){if(t===null)return 0;var n=t.match(QV);if(!n)throw new Error("Illegal value for token color: "+t);t=n[1].toUpperCase();var i=this._color2id.get(t);return i||(i=++this._lastColorId,this._color2id.set(t,i),this._id2color[i]=Ig.fromHex("#"+t),i)};t.prototype.getColorMap=function(){return this._id2color.slice(0)};return t}();var XV=function(){function t(t,n){this._colorMap=t,this._root=n,this._cache=new Map}t.createFromRawTokenTheme=function(t,n){return this.createFromParsedTokenTheme(function(t){if(!t||!Array.isArray(t))return[];var n=[];var i=0;for(var r=0,e=t.length;r<e;r++){var o=t[r];var s=-1;if(typeof o.fontStyle=="string"){s=0;var u=o.fontStyle.split(" ");for(var a=0,h=u.length;a<h;a++)switch(u[a]){case"italic":s|=1;break;case"bold":s|=2;break;case"underline":s|=4;break;case"strikethrough":s|=8}}var c=null;typeof o.foreground=="string"&&(c=o.foreground);var f=null;typeof o.background=="string"&&(f=o.background),n[i++]=new ZV(o.token||"",r,s,c,f)}return n}(t),n)};t.createFromParsedTokenTheme=function(n,i){return function(n,i){n.sort((function(t,n){var i=function(t,n){return t<n?-1:t>n?1:0}(t.token,n.token);return i!==0?i:t.index-n.index}));var r=0,e="000000",o="ffffff";for(;n.length>=1&&n[0].token==="";){var s=n.shift();s.fontStyle!==-1&&(r=s.fontStyle),s.foreground!==null&&(e=s.foreground),s.background!==null&&(o=s.background)}var u=new YV;for(var a=0,h=i;a<h.length;a++){var s=h[a];u.getId(s)}var c=u.getId(e),f=u.getId(o),l=new nq(r,c,f),v=new iq(l);for(var s=0,d=n.length;s<d;s++){var g=n[s];v.insert(g.token,g.fontStyle,u.getId(g.foreground),u.getId(g.background))}return new t(u,v)}(n,i)};t.prototype.getColorMap=function(){return this._colorMap.getColorMap()};t.prototype._match=function(t){return this._root.match(t)};t.prototype.match=function(t,n){var i=this._cache.get(n);if(i===void 0){var r=this._match(n),e=function(t){var n=t.match(tq);if(!n)return 0;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}(n);i=(r.metadata|e<<8)>>>0,this._cache.set(n,i)}return(i|t)>>>0};return t}();var tq=/\b(comment|string|regex|regexp)\b/;var nq=function(){function t(t,n,i){this._themeTrieElementRuleBrand=void 0,this._fontStyle=t,this._foreground=n,this._background=i,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}t.prototype.clone=function(){return new t(this._fontStyle,this._foreground,this._background)};t.prototype.acceptOverwrite=function(t,n,i){t!==-1&&(this._fontStyle=t),n!==0&&(this._foreground=n),i!==0&&(this._background=i),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0};return t}();var iq=function(){function t(t){this._themeTrieElementBrand=void 0,this._mainRule=t,this._children=new Map}t.prototype.match=function(t){if(t==="")return this._mainRule;var n=t.indexOf(".");var i,r;n===-1?(i=t,r=""):(i=t.substring(0,n),r=t.substring(n+1));var e=this._children.get(i);return e!==void 0?e.match(r):this._mainRule};t.prototype.insert=function(n,i,r,e){if(n==="")return void this._mainRule.acceptOverwrite(i,r,e);var o=n.indexOf(".");var s,u;o===-1?(s=n,u=""):(s=n.substring(0,o),u=n.substring(o+1));var a=this._children.get(s);a===void 0&&(a=new t(this._mainRule.clone()),this._children.set(s,a)),a.insert(u,i,r,e)};return t}();var rq={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:(r={},r[mm]="#FFFFFE",r[bm]="#000000",r[Rm]="#E5EBF1",r[ux]="#D3D3D3",r[vx]="#939393",r[Tm]="#ADD6FF4D",r)},eq={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:(e={},e[mm]="#1E1E1E",e[bm]="#D4D4D4",e[Rm]="#3A3D41",e[ux]="#404040",e[vx]="#707070",e[Tm]="#ADD6FF26",e)},oq={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:(o={},o[mm]="#000000",o[bm]="#FFFFFF",o[ux]="#FFFFFF",o[vx]="#FFFFFF",o)},sq={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:(s={},s[mm]="#FFFFFF",s[bm]="#292929",s[ux]="#292929",s[vx]="#292929",s)};var uq,aq;(function(t){t.getDefinition=function(t,n){var i=t.defaults;for(;uc.isThemeIcon(i);){var r=hq.getIcon(i.id);if(!r)return;i=r.defaults}return i}})(uq||(uq={})),function(t){t.toJSONObject=function(t){return{weight:t.weight,style:t.style,src:t.src.map((function(t){return{format:t.format,location:t.location.toString()}}))}},t.fromJSONObject=function(t){var n=function(t){return H(t)?t:void 0};if(t&&Array.isArray(t.src)&&t.src.every((function(t){return H(t.format)&&H(t.location)})))return{weight:n(t.weight),style:n(t.style),src:t.src.map((function(t){return{format:t.format,location:Cr.parse(t.location)}}))}}}(aq||(aq={}));var hq=new(function(){function t(){this._onDidChange=new ki,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:ht(0,"The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:ht(0,"The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:"^".concat(uc.iconNameExpression,"$"),enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}t.prototype.registerIcon=function(t,n,i,r){var e=this.iconsById[t];if(e){if(i&&!e.description){e.description=i,this.iconSchema.properties[t].markdownDescription="".concat(i," $(").concat(t,")");var o=this.iconReferenceSchema.enum.indexOf(t);o!==-1&&(this.iconReferenceSchema.enumDescriptions[o]=i),this._onDidChange.fire()}return e}var s={id:t,description:i,defaults:n,deprecationMessage:r};this.iconsById[t]=s;var u={$ref:"#/definitions/icons"};return r&&(u.deprecationMessage=r),i&&(u.markdownDescription="".concat(i,": $(").concat(t,")")),this.iconSchema.properties[t]=u,this.iconReferenceSchema.enum.push(t),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:t}};t.prototype.getIcons=function(){var t=this;return Object.keys(this.iconsById).map((function(n){return t.iconsById[n]}))};t.prototype.getIcon=function(t){return this.iconsById[t]};t.prototype.getIconSchema=function(){return this.iconSchema};t.prototype.toString=function(){var t=this;var n=function(t,n){return t.id.localeCompare(n.id)},i=function(n){for(;uc.isThemeIcon(n.defaults);)n=t.iconsById[n.defaults.id];return"codicon codicon-".concat(n?n.id:"")},r=[];r.push("| preview     | identifier                        | default codicon ID                | description"),r.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");var e=Object.keys(this.iconsById).map((function(n){return t.iconsById[n]}));for(var o=0,s=e.filter((function(t){return!!t.description})).sort(n);o<s.length;o++){var u=s[o];r.push('|<i class="'.concat(i(u),'"></i>|').concat(u.id,"|").concat(uc.isThemeIcon(u.defaults)?u.defaults.id:u.id,"|").concat(u.description||"","|"))}r.push("| preview     | identifier                        "),r.push("| ----------- | --------------------------------- |");for(var a=0,h=e.filter((function(t){return!uc.isThemeIcon(t.defaults)})).sort(n);a<h.length;a++){var u=h[a];r.push('|<i class="'.concat(i(u),'"></i>|').concat(u.id,"|"))}return r.join("\n")};return t}());function cq(t,n,i,r){return hq.registerIcon(t,n,i,r)}function fq(){return hq}of.add("base.contributions.icons",hq),function(){var t=Wr();for(var n in t){var i="\\"+t[n].toString(16);hq.registerIcon(n,{fontCharacter:i})}}();var lq="vscode://schemas/icons",vq=of.as(iv);vq.registerSchema(lq,hq.getIconSchema());var dq=new Ts((function(){return vq.notifySchemaChanged(lq)}),200);hq.onDidChange((function(){dq.isScheduled()||dq.schedule()}));var gq=cq("widget-close",Hr.close,ht(0,"Icon for the close action in widgets."));cq("goto-previous-location",Hr.arrowUp,ht(0,"Icon for goto previous editor location.")),cq("goto-next-location",Hr.arrowDown,ht(0,"Icon for goto next editor location.")),uc.modify(Hr.sync,"spin"),uc.modify(Hr.loading,"spin");var pq=function(){function t(){}t.prototype.getIcon=function(t){var n=fq();var i=t.defaults;for(;uc.isThemeIcon(i);){var r=n.getIcon(i.id);if(!r)return;i=r.defaults}return i};return t}();var wq="vs",mq="vs-dark",bq="hc-black",yq="hc-light",_q=of.as(Gw),kq=of.as(Vk);var xq=function(){function t(t,n){this.semanticHighlighting=!1,this.themeData=n;var i=n.base;t.length>0?(Cq(t)?this.id=t:this.id=i+" "+t,this.themeName=t):(this.id=i,this.themeName=i),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}Object.defineProperty(t.prototype,"base",{get:function(){return this.themeData.base},enumerable:false,configurable:true});t.prototype.notifyBaseUpdated=function(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)};t.prototype.getColors=function(){if(!this.colors){var t=new Map;for(var n in this.themeData.colors)t.set(n,Ig.fromHex(this.themeData.colors[n]));if(this.themeData.inherit){var n=Sq(this.themeData.base);for(var i in n.colors)t.has(i)||t.set(i,Ig.fromHex(n.colors[i]))}this.colors=t}return this.colors};t.prototype.getColor=function(t,n){return this.getColors().get(t)||(n!==!1?this.getDefault(t):void 0)};t.prototype.getDefault=function(t){var n=this.defaultColors[t];return n||(n=_q.resolveDefaultColor(t,this),this.defaultColors[t]=n,n)};t.prototype.defines=function(t){return this.getColors().has(t)};Object.defineProperty(t.prototype,"type",{get:function(){switch(this.base){case wq:return x_.LIGHT;case bq:return x_.HIGH_CONTRAST_DARK;case yq:return x_.HIGH_CONTRAST_LIGHT;default:return x_.DARK}},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"tokenTheme",{get:function(){if(!this._tokenTheme){var t=[],n=[];if(this.themeData.inherit){var i=Sq(this.themeData.base);t=i.rules,i.encodedTokensColors&&(n=i.encodedTokensColors)}var r=this.themeData.colors["editor.foreground"],e=this.themeData.colors["editor.background"];if(r||e){var i={token:""};r&&(i.foreground=r),e&&(i.background=e),t.push(i)}t=t.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(n=this.themeData.encodedTokensColors),this._tokenTheme=XV.createFromRawTokenTheme(t,n)}return this._tokenTheme},enumerable:false,configurable:true});t.prototype.getTokenStyleMetadata=function(t,n,i){var r=this.tokenTheme._match([t].concat(n).join(".")).metadata,e=wp.getForeground(r),o=wp.getFontStyle(r);return{foreground:e,italic:!!(1&o),bold:!!(2&o),underline:!!(4&o),strikethrough:!!(8&o)}};return t}();function Cq(t){return t===wq||t===mq||t===bq||t===yq}function Sq(t){switch(t){case wq:return rq;case mq:return eq;case bq:return oq;case yq:return sq}}function Dq(t){var n=Sq(t);return new xq(t,n)}var Aq=Zh("themeService");var Oq=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Eq=function(t,n){return function(i,r){n(i,r,t)}};var Mq=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._contextKeyService=n,e._layoutService=i,e._configurationService=r,e._accessibilitySupport=0,e._onDidChangeScreenReaderOptimized=new ki,e._onDidChangeReducedMotion=new ki,e._accessibilityModeEnabledContext=Rw.bindTo(e._contextKeyService);var o=function(){return e._accessibilityModeEnabledContext.set(e.isScreenReaderOptimized())};e._register(e._configurationService.onDidChangeConfiguration((function(t){t.affectsConfiguration("editor.accessibilitySupport")&&(o(),e._onDidChangeScreenReaderOptimized.fire()),t.affectsConfiguration("workbench.reduceMotion")&&(e._configMotionReduced=e._configurationService.getValue("workbench.reduceMotion"),e._onDidChangeReducedMotion.fire())}))),o(),e._register(e.onDidChangeScreenReaderOptimized((function(){return o()})));var s=Xe.matchMedia("(prefers-reduced-motion: reduce)");e._systemMotionReduced=s.matches,e._configMotionReduced=e._configurationService.getValue("workbench.reduceMotion"),e.initReducedMotionListeners(s);return e}n.prototype.initReducedMotionListeners=function(t){var n=this;this._register(ma(t,"change",(function(){n._systemMotionReduced=t.matches,n._configMotionReduced==="auto"&&n._onDidChangeReducedMotion.fire()})));var i=function(){var t=n.isMotionReduced();n._layoutService.mainContainer.classList.toggle("reduce-motion",t),n._layoutService.mainContainer.classList.toggle("enable-motion",!t)};i(),this._register(this.onDidChangeReducedMotion((function(){return i()})))};Object.defineProperty(n.prototype,"onDidChangeScreenReaderOptimized",{get:function(){return this._onDidChangeScreenReaderOptimized.event},enumerable:false,configurable:true});n.prototype.isScreenReaderOptimized=function(){var t=this._configurationService.getValue("editor.accessibilitySupport");return t==="on"||t==="auto"&&this._accessibilitySupport===2};Object.defineProperty(n.prototype,"onDidChangeReducedMotion",{get:function(){return this._onDidChangeReducedMotion.event},enumerable:false,configurable:true});n.prototype.isMotionReduced=function(){var t=this._configMotionReduced;return t==="on"||t==="auto"&&this._systemMotionReduced};n.prototype.getAccessibilitySupport=function(){return this._accessibilitySupport};return n}(ci);Mq=Oq([Eq(0,Gc),Eq(1,XL),Eq(2,Kl)],Mq);var Fq,Lq,jq=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Rq=function(t,n){return function(i,r){n(i,r,t)}};var Tq=function(){function t(t,n){this._commandService=t,this._hiddenStates=new Iq(n)}t.prototype.createMenu=function(t,n,i){return new Nq(t,this._hiddenStates,__assign({emitEventsForSubmenuChanges:!1,eventDebounceDelay:50},i),this._commandService,n)};t.prototype.resetHiddenStates=function(t){this._hiddenStates.reset(t)};return t}();Tq=jq([Rq(0,ac),Rq(1,_W)],Tq);var Iq=Fq=function(){function t(t){var n=this;this._storageService=t,this._disposables=new hi,this._onDidChange=new ki,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{var i=t.get(Fq._key,0,"{}");this._data=JSON.parse(i)}catch(t){this._data=Object.create(null)}this._disposables.add(t.onDidChangeValue(0,Fq._key,this._disposables)((function(){if(!n._ignoreChangeEvent)try{var i=t.get(Fq._key,0,"{}");n._data=JSON.parse(i)}catch(i){console.log("FAILED to read storage after UPDATE",i)}n._onDidChange.fire()})))}t.prototype.dispose=function(){this._onDidChange.dispose(),this._disposables.dispose()};t.prototype._isHiddenByDefault=function(t,n){var i;return(i=this._hiddenByDefaultCache.get("".concat(t.id,"/").concat(n)))!==null&&i!==void 0&&i};t.prototype.setDefaultState=function(t,n,i){this._hiddenByDefaultCache.set("".concat(t.id,"/").concat(n),i)};t.prototype.isHidden=function(t,n){var i,r;var e=this._isHiddenByDefault(t,n),o=(r=(i=this._data[t.id])===null||i===void 0?void 0:i.includes(n))!==null&&r!==void 0&&r;return e?!o:o};t.prototype.updateHidden=function(t,n,i){this._isHiddenByDefault(t,n)&&(i=!i);var r=this._data[t.id];if(i)r?r.indexOf(n)<0&&r.push(n):this._data[t.id]=[n];else if(r){var e=r.indexOf(n);e>=0&&function(t,n){var i=t.length-1;n<i&&(t[n]=t[i]),t.pop()}(r,e),r.length===0&&delete this._data[t.id]}this._persist()};t.prototype.reset=function(t){if(t===void 0)this._data=Object.create(null),this._persist();else{for(var n=0,i=t;n<i.length;n++){var r=i[n].id;this._data[r]&&delete this._data[r]}this._persist()}};t.prototype._persist=function(){try{this._ignoreChangeEvent=!0;var t=JSON.stringify(this._data);this._storageService.store(Fq._key,t,0,0)}finally{this._ignoreChangeEvent=!1}};return t}();Iq._key="menu.hiddenCommands",Iq=Fq=jq([Rq(0,_W)],Iq);var Bq=Lq=function(){function t(t,n,i,r,e){this._id=t,this._hiddenStates=n,this._collectContextKeysForSubmenus=i,this._commandService=r,this._contextKeyService=e,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}Object.defineProperty(t.prototype,"structureContextKeys",{get:function(){return this._structureContextKeys},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"preconditionContextKeys",{get:function(){return this._preconditionContextKeys},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"toggledContextKeys",{get:function(){return this._toggledContextKeys},enumerable:false,configurable:true});t.prototype.refresh=function(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();var n=pf.getMenuItems(this._id);var i;n.sort(t._compareMenuItems);for(var r=0,e=n;r<e.length;r++){var o=e[r];var s=o.group||"";i&&i[0]===s||(i=[s,[]],this._menuGroups.push(i)),i[1].push(o),this._collectContextKeys(o)}};t.prototype._collectContextKeys=function(n){if(t._fillInKbExprKeys(n.when,this._structureContextKeys),lf(n)){if(n.command.precondition&&t._fillInKbExprKeys(n.command.precondition,this._preconditionContextKeys),n.command.toggled){var i=n.command.toggled.condition||n.command.toggled;t._fillInKbExprKeys(i,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&pf.getMenuItems(n.submenu).forEach(this._collectContextKeys,this)};t.prototype.createActionGroups=function(n){var i=[];for(var r=0,e=this._menuGroups;r<e.length;r++){var o=e[r];var s=o[0],u=o[1],a=[];for(var h=0,c=u;h<c.length;h++){var f=c[h];if(this._contextKeyService.contextMatchesRules(f.when)){var l=lf(f);l&&this._hiddenStates.setDefaultState(this._id,f.command.id,!!f.isHiddenByDefault);var v=Pq(this._id,l?f.command:f,this._hiddenStates);if(l)a.push(new mf(f.command,f.alt,n,v,this._contextKeyService,this._commandService));else{var d=new t(f.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(n),g=ic.join.apply(ic,d.map((function(t){return t[1]})));g.length>0&&a.push(new wf(f,v,g))}}}a.length>0&&i.push([s,a])}return i};t._fillInKbExprKeys=function(t,n){if(t)for(var i=0,r=t.keys();i<r.length;i++){var e=r[i];n.add(e)}};t._compareMenuItems=function(n,i){var r=n.group,e=i.group;if(r!==e){if(!r)return 1;if(!e||r==="navigation")return-1;if(e==="navigation")return 1;var o=r.localeCompare(e);if(o!==0)return o}var s=n.order||0,u=i.order||0;return s<u?-1:s>u?1:t._compareTitles(lf(n)?n.command.title:n.title,lf(i)?i.command.title:i.title)};t._compareTitles=function(t,n){var i=typeof t=="string"?t:t.original,r=typeof n=="string"?n:n.original;return i.localeCompare(r)};return t}();Bq=Lq=jq([Rq(3,ac),Rq(4,Gc)],Bq);var Nq=function(){function t(t,n,i,r,e){var o=this;this._disposables=new hi,this._menuInfo=new Bq(t,n,i.emitEventsForSubmenuChanges,r,e);var s=new Ts((function(){o._menuInfo.refresh(),o._onDidChange.fire({menu:o,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})}),i.eventDebounceDelay);this._disposables.add(s),this._disposables.add(pf.onDidChangeMenu((function(n){n.has(t)&&s.schedule()})));var u=this._disposables.add(new hi);this._onDidChange=new Si({onWillAddFirstListener:function(){u.add(e.onDidChangeContext((function(t){var n=t.affectsSome(o._menuInfo.structureContextKeys),i=t.affectsSome(o._menuInfo.preconditionContextKeys),r=t.affectsSome(o._menuInfo.toggledContextKeys);(n||i||r)&&o._onDidChange.fire({menu:o,isStructuralChange:n,isEnablementChange:i,isToggleChange:r})}))),u.add(n.onDidChange((function(t){o._onDidChange.fire({menu:o,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})})))},onDidRemoveLastListener:u.clear.bind(u),delay:i.eventDebounceDelay,merge:function(t){var n=!1,i=!1,r=!1;for(var e=0,s=t;e<s.length;e++){var u=s[e];if(n=n||u.isStructuralChange,i=i||u.isEnablementChange,r=r||u.isToggleChange,n&&i&&r)break}return{menu:o,isStructuralChange:n,isEnablementChange:i,isToggleChange:r}}}),this.onDidChange=this._onDidChange.event}t.prototype.getActions=function(t){return this._menuInfo.createActionGroups(t)};t.prototype.dispose=function(){this._disposables.dispose(),this._onDidChange.dispose()};return t}();function Pq(t,n,i){var r=n.submenu!==void 0?n.submenu.id:n.id,e=typeof n.title=="string"?n.title:n.title.value,o=oc({id:"hide/".concat(t.id,"/").concat(r),label:ht(0,"Hide '{0}'",e),run:function(){i.updateHidden(t,r,!0)}}),s=oc({id:"toggle/".concat(t.id,"/").concat(r),label:e,get checked(){return!i.isHidden(t,r)},run:function(){i.updateHidden(t,r,!!this.checked)}});return{hide:o,toggle:s,get isHidden(){return!s.checked}}}Nq=jq([Rq(3,ac),Rq(4,Gc)],Nq);var Wq,Hq=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},zq=function(t,n){return function(i,r){n(i,r,t)}};var Uq=Wq=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.layoutService=n,r.logService=i,r.mapTextToType=new Map,r.findText="",r.resources=[],r.resourcesStateHash=void 0,(os||ss)&&r.installWebKitWriteTextWorkaround(),r._register(wi.runAndSubscribe(va,(function(t){var n=t.window,i=t.disposables;i.add(ma(n.document,"copy",(function(){return r.clearResources()})))}),{window:Xe,disposables:r._store}));return r}n.prototype.installWebKitWriteTextWorkaround=function(){var t=this;var n=function(){var n=new Ws;t.webKitPendingClipboardWritePromise&&!t.webKitPendingClipboardWritePromise.isSettled&&t.webKitPendingClipboardWritePromise.cancel(),t.webKitPendingClipboardWritePromise=n,navigator.clipboard.write([new ClipboardItem({"text/plain":n.p})]).catch((function(i){return __awaiter(t,void 0,void 0,(function(){return __generator(this,(function(t){i instanceof Error&&i.name==="NotAllowedError"&&n.isRejected||this.logService.error(i);return[2]}))}))}))};this._register(wi.runAndSubscribe(this.layoutService.onDidAddContainer,(function(t){var i=t.container,r=t.disposables;r.add(ma(i,"click",n)),r.add(ma(i,"keydown",n))}),{container:this.layoutService.mainContainer,disposables:this._store}))};n.prototype.writeText=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:if(!(this.writeResources([]),n))return[3,1];this.mapTextToType.set(n,t);return[3,6];case 1:if(this.webKitPendingClipboardWritePromise)return[2,this.webKitPendingClipboardWritePromise.complete(t)];r.label=2;case 2:r.trys.push([2,4,,5]);return[4,navigator.clipboard.writeText(t)];case 3:return[2,r.sent()];case 4:i=r.sent();console.error(i);return[3,5];case 5:this.fallbackWriteText(t);r.label=6;case 6:return[2]}}))}))};n.prototype.fallbackWriteText=function(t){var n=Ga(),i=n.activeElement,r=n.body.appendChild(bh("textarea",{"aria-hidden":!0}));r.style.height="1px",r.style.width="1px",r.style.position="absolute",r.value=t,r.focus(),r.select(),n.execCommand("copy"),i instanceof HTMLElement&&i.focus(),n.body.removeChild(r)};n.prototype.readText=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:if(t)return[2,this.mapTextToType.get(t)||""];i.label=1;case 1:i.trys.push([1,3,,4]);return[4,navigator.clipboard.readText()];case 2:return[2,i.sent()];case 3:n=i.sent();console.error(n);return[3,4];case 4:return[2,""]}}))}))};n.prototype.readFindText=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.findText]}))}))};n.prototype.writeFindText=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){this.findText=t;return[2]}))}))};n.prototype.writeResources=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(r){switch(r.label){case 0:if(!(t.length===0))return[3,1];n=this.clearResources();return[3,3];case 1:this.resources=t;i=this;return[4,this.computeResourcesStateHash()];case 2:n=i.resourcesStateHash=r.sent();r.label=3;case 3:n;return[2]}}))}))};n.prototype.readResources=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.computeResourcesStateHash()];case 1:t=n.sent();return[2,(this.resourcesStateHash!==t&&this.clearResources(),this.resources)]}}))}))};n.prototype.computeResourcesStateHash=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(!(this.resources.length!==0))return[3,2];t=Zu;return[4,this.readText()];case 1:return[2,t.apply(void 0,[n.sent().substring(0,Wq.MAX_RESOURCE_STATE_SOURCE_LENGTH)])];case 2:return[2]}}))}))};n.prototype.clearResources=function(){this.resources=[],this.resourcesStateHash=void 0};return n}(ci);Uq.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,Uq=Wq=Hq([zq(0,XL),zq(1,kf)],Uq);var Kq=Zh("clipboardService");var Vq=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},qq=function(t,n){return function(i,r){n(i,r,t)}};var Gq="data-keybinding-context";var $q=function(){function t(t,n){this._id=t,this._parent=n,this._value=Object.create(null),this._value._contextId=t}Object.defineProperty(t.prototype,"value",{get:function(){return __assign({},this._value)},enumerable:false,configurable:true});t.prototype.setValue=function(t,n){return this._value[t]!==n&&(this._value[t]=n,!0)};t.prototype.removeValue=function(t){return t in this._value&&(delete this._value[t],!0)};t.prototype.getValue=function(t){var n=this._value[t];return n===void 0&&this._parent?this._parent.getValue(t):n};return t}();var Jq=function(t){__extends(n,t);function n(){return t.call(this,-1,null)||this}n.prototype.setValue=function(t,n){return!1};n.prototype.removeValue=function(t){return!1};n.prototype.getValue=function(t){};return n}($q);Jq.INSTANCE=new Jq;var Zq=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,null)||this,e._configurationService=i,e._values=UB.forConfigKeys(),e._listener=e._configurationService.onDidChangeConfiguration((function(t){if(t.source===7){var n=Array.from(e._values,(function(t){var n=t[0];return n}));e._values.clear(),r.fire(new Xq(n))}else{var n=[];for(var i=0,o=t.affectedKeys;i<o.length;i++){var s=o[i];var u="config.".concat(s),a=e._values.findSuperstr(u);a!==void 0&&(n.push.apply(n,Yt.map(a,(function(t){var n=t[0];return n}))),e._values.deleteSuperstr(u)),e._values.has(u)&&(n.push(u),e._values.delete(u))}r.fire(new Xq(n))}}));return e}n.prototype.dispose=function(){this._listener.dispose()};n.prototype.getValue=function(i){if(i.indexOf(n._keyPrefix)!==0)return t.prototype.getValue.call(this,i);if(this._values.has(i))return this._values.get(i);var r=i.substr(n._keyPrefix.length),e=this._configurationService.getValue(r);var o;switch(typeof e){case"number":case"boolean":case"string":o=e;break;default:o=Array.isArray(e)?JSON.stringify(e):e}return this._values.set(i,o),o};n.prototype.setValue=function(n,i){return t.prototype.setValue.call(this,n,i)};n.prototype.removeValue=function(n){return t.prototype.removeValue.call(this,n)};return n}($q);Zq._keyPrefix="config.";var Qq=function(){function t(t,n,i){this._service=t,this._key=n,this._defaultValue=i,this.reset()}t.prototype.set=function(t){this._service.setContext(this._key,t)};t.prototype.reset=function(){this._defaultValue===void 0?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)};t.prototype.get=function(){return this._service.getContextKeyValue(this._key)};return t}();var Yq=function(){function t(t){this.key=t}t.prototype.affectsSome=function(t){return t.has(this.key)};t.prototype.allKeysContainedIn=function(t){return this.affectsSome(t)};return t}();var Xq=function(){function t(t){this.keys=t}t.prototype.affectsSome=function(t){for(var n=0,i=this.keys;n<i.length;n++){var r=i[n];if(t.has(r))return!0}return!1};t.prototype.allKeysContainedIn=function(t){return this.keys.every((function(n){return t.has(n)}))};return t}();var tG=function(){function t(t){this.events=t}t.prototype.affectsSome=function(t){for(var n=0,i=this.events;n<i.length;n++){var r=i[n];if(r.affectsSome(t))return!0}return!1};t.prototype.allKeysContainedIn=function(t){return this.events.every((function(n){return n.allKeysContainedIn(t)}))};return t}();var nG=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._onDidChangeContext=i._register(new Ci({merge:function(t){return new tG(t)}})),i.onDidChangeContext=i._onDidChangeContext.event,i._isDisposed=!1,i._myContextId=n;return i}n.prototype.createKey=function(t,n){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Qq(this,t,n)};n.prototype.bufferChangeEvents=function(t){this._onDidChangeContext.pause();try{t()}finally{this._onDidChangeContext.resume()}};n.prototype.createScoped=function(t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new rG(this,t)};n.prototype.contextMatchesRules=function(t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");var n=this.getContextValuesContainer(this._myContextId);return!t||t.evaluate(n)};n.prototype.getContextKeyValue=function(t){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(t)};n.prototype.setContext=function(t,n){if(this._isDisposed)return;var i=this.getContextValuesContainer(this._myContextId);i&&i.setValue(t,n)&&this._onDidChangeContext.fire(new Yq(t))};n.prototype.removeContext=function(t){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(t)&&this._onDidChangeContext.fire(new Yq(t))};n.prototype.getContext=function(t){return this._isDisposed?Jq.INSTANCE:this.getContextValuesContainer(function(t){for(;t;){if(t.hasAttribute(Gq)){var n=t.getAttribute(Gq);return n?parseInt(n,10):NaN}t=t.parentElement}return 0}(t))};n.prototype.dispose=function(){t.prototype.dispose.call(this),this._isDisposed=!0};return n}(ci);var iG=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,0)||this,i._contexts=new Map,i._lastContextId=0;var r=i._register(new Zq(i._myContextId,n,i._onDidChangeContext));i._contexts.set(i._myContextId,r);return i}n.prototype.getContextValuesContainer=function(t){return this._isDisposed?Jq.INSTANCE:this._contexts.get(t)||Jq.INSTANCE};n.prototype.createChildContext=function(t){if(t===void 0){t=this._myContextId}if(this._isDisposed)throw new Error("ContextKeyService has been disposed");var n=++this._lastContextId;return this._contexts.set(n,new $q(n,this.getContextValuesContainer(t))),n};n.prototype.disposeContext=function(t){this._isDisposed||this._contexts.delete(t)};return n}(nG);iG=Vq([qq(0,Kl)],iG);var rG=function(t){__extends(n,t);function n(n,i){var r=this;if(r=t.call(this,n.createChildContext())||this,r._parentChangeListener=r._register(new fi),r._parent=n,r._updateParentChangeListener(),r._domNode=i,r._domNode.hasAttribute(Gq)){var e="";r._domNode.classList&&(e=Array.from(r._domNode.classList.values()).join(", ")),console.error("Element already has context attribute"+(e?": "+e:""))}r._domNode.setAttribute(Gq,String(r._myContextId));return r}n.prototype._updateParentChangeListener=function(){var t=this;this._parentChangeListener.value=this._parent.onDidChangeContext((function(n){var i=t._parent.getContextValuesContainer(t._myContextId).value;var r;r=i,n.allKeysContainedIn(new Set(Object.keys(r)))||t._onDidChangeContext.fire(n)}))};n.prototype.dispose=function(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(Gq),t.prototype.dispose.call(this))};n.prototype.getContextValuesContainer=function(t){return this._isDisposed?Jq.INSTANCE:this._parent.getContextValuesContainer(t)};n.prototype.createChildContext=function(t){if(t===void 0){t=this._myContextId}if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(t)};n.prototype.disposeContext=function(t){this._isDisposed||this._parent.disposeContext(t)};return n}(nG);hc.registerCommand("_setContext",(function(t,n,i){t.get(Gc).createKey(String(n),function(t){return it(t,(function(t){return typeof t=="object"&&t.$mid===1?Cr.revive(t).toString():t instanceof Cr?t.toString():void 0}))}(i))})),hc.registerCommand({id:"getContextKeyInfo",handler:function(){return __spreadArray([],qc.all(),true).sort((function(t,n){return t.key.localeCompare(n.key)}))},metadata:{description:ht(0,"A command that returns information about context keys"),args:[]}}),hc.registerCommand("_generateContextKeyInfo",(function(){var t=[],n=new Set;for(var i=0,r=qc.all();i<r.length;i++){var e=r[i];n.has(e.key)||(n.add(e.key),t.push(e))}t.sort((function(t,n){return t.key.localeCompare(n.key)})),console.log(JSON.stringify(t,void 0,2))}));var eG=function(){function t(t,n){this.key=t,this.data=n,this.incoming=new Map,this.outgoing=new Map}return t}();var oG=function(){function t(t){this._hashFn=t,this._nodes=new Map}t.prototype.roots=function(){var t=[];for(var n=0,i=this._nodes.values();n<i.length;n++){var r=i[n];r.outgoing.size===0&&t.push(r)}return t};t.prototype.insertEdge=function(t,n){var i=this.lookupOrInsertNode(t),r=this.lookupOrInsertNode(n);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)};t.prototype.removeNode=function(t){var n=this._hashFn(t);this._nodes.delete(n);for(var i=0,r=this._nodes.values();i<r.length;i++){var e=r[i];e.outgoing.delete(n),e.incoming.delete(n)}};t.prototype.lookupOrInsertNode=function(t){var n=this._hashFn(t);var i=this._nodes.get(n);return i||(i=new eG(n,t),this._nodes.set(n,i)),i};t.prototype.isEmpty=function(){return this._nodes.size===0};t.prototype.toString=function(){var t=[];for(var n=0,i=this._nodes;n<i.length;n++){var r=i[n],e=r[0],o=r[1];t.push("".concat(e,"\n\t(-> incoming)[").concat(__spreadArray([],o.incoming.keys(),true).join(", "),"]\n\t(outgoing ->)[").concat(__spreadArray([],o.outgoing.keys(),true).join(","),"]\n"))}return t.join("\n")};t.prototype.findCycleSlow=function(){for(var t=0,n=this._nodes;t<n.length;t++){var i=n[t],r=i[0],e=i[1];var o=new Set([r]),s=this._findCycle(e,o);if(s)return s}};t.prototype._findCycle=function(t,n){for(var i=0,r=t.outgoing;i<r.length;i++){var e=r[i],o=e[0],s=e[1];if(n.has(o))return __spreadArray(__spreadArray([],n,true),[o],false).join(" -> ");n.add(o);var u=this._findCycle(s,n);if(u)return u;n.delete(o)}};return t}();var sG=function(t){__extends(n,t);function n(n){var i=this;var r;i=t.call(this,"cyclic dependency between services")||this,i.message=(r=n.findCycleSlow())!==null&&r!==void 0?r:"UNABLE to detect cycle, dumping graph: \n".concat(n.toString());return i}return n}(Error);var uG=function(){function t(t,n,i,r){if(t===void 0){t=new SL}if(n===void 0){n=!1}if(r===void 0){r=!1}var e;this._services=t,this._strict=n,this._parent=i,this._enableTracing=r,this._activeInstantiations=new Set,this._services.set(Jh,this),this._globalGraph=r?(e=i==null?void 0:i._globalGraph)!==null&&e!==void 0?e:new oG((function(t){return t})):void 0}t.prototype.createChild=function(n){return new t(n,this._strict,this,this._enableTracing)};t.prototype.invokeFunction=function(t){var n=this;var i=[];for(var r=1;r<arguments.length;r++){i[r-1]=arguments[r]}var e=aG.traceInvocation(this._enableTracing,t);var o=!1;try{return t.apply(void 0,__spreadArray([{get:function(t){if(o)throw ti("service accessor is only valid during the invocation of its target method");var i=n._getOrCreateServiceInstance(t,e);if(!i)throw new Error("[invokeFunction] unknown service '".concat(t,"'"));return i}}],i,false))}finally{o=!0,e.stop()}};t.prototype.createInstance=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r,e;return t instanceof Ql?(r=aG.traceCreation(this._enableTracing,t.ctor),e=this._createInstance(t.ctor,t.staticArguments.concat(n),r)):(r=aG.traceCreation(this._enableTracing,t),e=this._createInstance(t,n,r)),r.stop(),e};t.prototype._createInstance=function(t,n,i){if(n===void 0){n=[]}var r=$h.getServiceDependencies(t).sort((function(t,n){return t.index-n.index})),e=[];for(var o=0,s=r;o<s.length;o++){var u=s[o];var a=this._getOrCreateServiceInstance(u.id,i);a||this._throwIfStrict("[createInstance] ".concat(t.name," depends on UNKNOWN service ").concat(u.id,"."),!1),e.push(a)}var h=r.length>0?r[0].index:n.length;if(n.length!==h){console.trace("[createInstance] First service dependency of ".concat(t.name," at position ").concat(h+1," conflicts with ").concat(n.length," static arguments"));var u=h-n.length;n=u>0?n.concat(new Array(u)):n.slice(0,h)}return Reflect.construct(t,n.concat(e))};t.prototype._setServiceInstance=function(t,n){if(this._services.get(t)instanceof Ql)this._services.set(t,n);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(t,n)}};t.prototype._getServiceInstanceOrDescriptor=function(t){var n=this._services.get(t);return!n&&this._parent?this._parent._getServiceInstanceOrDescriptor(t):n};t.prototype._getOrCreateServiceInstance=function(t,n){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(t));var i=this._getServiceInstanceOrDescriptor(t);return i instanceof Ql?this._safeCreateAndCacheServiceInstance(t,i,n.branch(t,!0)):(n.branch(t,!1),i)};t.prototype._safeCreateAndCacheServiceInstance=function(t,n,i){if(this._activeInstantiations.has(t))throw new Error("illegal state - RECURSIVELY instantiating service '".concat(t,"'"));this._activeInstantiations.add(t);try{return this._createAndCacheServiceInstance(t,n,i)}finally{this._activeInstantiations.delete(t)}};t.prototype._createAndCacheServiceInstance=function(t,n,i){var r;var e=new oG((function(t){return t.id.toString()}));var o=0;var s=[{id:t,desc:n,_trace:i}];for(;s.length;){var u=s.pop();if(e.lookupOrInsertNode(u),o++>1e3)throw new sG(e);for(var a=0,h=$h.getServiceDependencies(u.desc.ctor);a<h.length;a++){var c=h[a];var f=this._getServiceInstanceOrDescriptor(c.id);if(f||this._throwIfStrict("[createInstance] ".concat(t," depends on ").concat(c.id," which is NOT registered."),!0),(r=this._globalGraph)===null||r===void 0||r.insertEdge(String(u.id),String(c.id)),f instanceof Ql){var l={id:c.id,desc:f,_trace:u._trace.branch(c.id,!0)};e.insertEdge(u,l),s.push(l)}}}for(;;){var u=e.roots();if(u.length===0){if(!e.isEmpty())throw new sG(e);break}for(var v=0,d=u;v<d.length;v++){var c=d[v].data;if(this._getServiceInstanceOrDescriptor(c.id)instanceof Ql){var f=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setServiceInstance(c.id,f)}e.removeNode(c)}}return this._getServiceInstanceOrDescriptor(t)};t.prototype._createServiceInstanceWithOwner=function(t,n,i,r,e){if(i===void 0){i=[]}if(this._services.get(t)instanceof Ql)return this._createServiceInstance(t,n,i,r,e);if(this._parent)return this._parent._createServiceInstanceWithOwner(t,n,i,r,e);throw new Error("illegalState - creating UNKNOWN service instance ".concat(n.name))};t.prototype._createServiceInstance=function(n,i,r,e,o){if(r===void 0){r=[]}if(e){var s=new t(void 0,this._strict,this,this._enableTracing);s._globalGraphImplicitDependency=String(n);var u=new Map,a=new Ps((function(){var t=s._createInstance(i,r,o);for(var n=0,e=u;n<e.length;n++){var a=e[n],h=a[0],c=a[1];var f=t[h];if(typeof f=="function")for(var l=0,v=c;l<v.length;l++){var d=v[l];d.disposable=f.apply(t,d.listener)}}return u.clear(),t}));return new Proxy(Object.create(null),{get:function(t,n){if(!a.isInitialized&&typeof n=="string"&&(n.startsWith("onDid")||n.startsWith("onWill"))){var i=u.get(n);return i||(i=new tn,u.set(n,i)),function(t,r,e){if(a.isInitialized)return a.value[n](t,r,e);{var o={listener:[t,r,e],disposable:void 0},s=i.push(o);return ai((function(){var t;s(),(t=o.disposable)===null||t===void 0||t.dispose()}))}}}if(n in t)return t[n];var r=a.value;var e=r[n];return typeof e!="function"||(e=e.bind(r),t[n]=e),e},set:function(t,n,i){return a.value[n]=i,!0},getPrototypeOf:function(t){return i.prototype}})}return this._createInstance(i,r,o)};t.prototype._throwIfStrict=function(t,n){if(n&&console.warn(t),this._strict)throw new Error(t)};return t}();var aG=function(){function t(t,n){this.type=t,this.name=n,this._start=Date.now(),this._dep=[]}t.traceInvocation=function(n,i){return n?new t(2,i.name||(new Error).stack.split("\n").slice(3,4).join("\n")):t._None};t.traceCreation=function(n,i){return n?new t(1,i.name):t._None};t.prototype.branch=function(n,i){var r=new t(3,n.toString());return this._dep.push([n,i,r]),r};t.prototype.stop=function(){var n=Date.now()-this._start;t._totals+=n;var i=!1;var r=["".concat(this.type===1?"CREATE":"CALL"," ").concat(this.name),"".concat(function t(n,r){var e=[],o=new Array(n+1).join("\t");for(var s=0,u=r._dep;s<u.length;s++){var a=u[s],h=a[0],c=a[1],f=a[2];if(c&&f){i=!0,e.push("".concat(o,"CREATES -> ").concat(h));var l=t(n+1,f);l&&e.push(l)}else e.push("".concat(o,"uses -> ").concat(h))}return e.join("\n")}(1,this)),"DONE, took ".concat(n.toFixed(2),"ms (grand total ").concat(t._totals.toFixed(2),"ms)")];(n>2||i)&&t.all.add(r.join("\n"))};return t}();aG.all=new Set,aG._None=new(function(t){__extends(n,t);function n(){return t.call(this,0,null)||this}n.prototype.stop=function(){};n.prototype.branch=function(){return this};return n}(aG)),aG._totals=0;var hG=new Set([Uu.inMemory,Uu.vscodeSourceControl,Uu.walkThrough,Uu.walkThroughSnippet,Uu.vscodeChatCodeBlock]);var cG=function(){function t(){this._byResource=new od,this._byOwner=new Map}t.prototype.set=function(t,n,i){var r=this._byResource.get(t);r||(r=new Map,this._byResource.set(t,r)),r.set(n,i);var e=this._byOwner.get(n);e||(e=new od,this._byOwner.set(n,e)),e.set(t,i)};t.prototype.get=function(t,n){var i=this._byResource.get(t);return i==null?void 0:i.get(n)};t.prototype.delete=function(t,n){var i=!1,r=!1;var e=this._byResource.get(t);e&&(i=e.delete(n));var o=this._byOwner.get(n);if(o&&(r=o.delete(t)),i!==r)throw new Error("illegal state");return i&&r};t.prototype.values=function(t){var n,i,r,e;return typeof t=="string"?(i=(n=this._byOwner.get(t))===null||n===void 0?void 0:n.values())!==null&&i!==void 0?i:Yt.empty():Cr.isUri(t)?(e=(r=this._byResource.get(t))===null||r===void 0?void 0:r.values())!==null&&e!==void 0?e:Yt.empty():Yt.map(Yt.concat.apply(Yt,this._byOwner.values()),(function(t){return t[1]}))};return t}();var fG=function(){function t(t){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new od,this._service=t,this._subscription=t.onMarkerChanged(this._update,this)}t.prototype.dispose=function(){this._subscription.dispose()};t.prototype._update=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];var e=this._data.get(r);e&&this._substract(e);var o=this._resourceStats(r);this._add(o),this._data.set(r,o)}};t.prototype._resourceStats=function(t){var n={errors:0,warnings:0,infos:0,unknowns:0};if(hG.has(t.scheme))return n;for(var i=0,r=this._service.read({resource:t});i<r.length;i++){var e=r[i].severity;e===dH.Error?n.errors+=1:e===dH.Warning?n.warnings+=1:e===dH.Info?n.infos+=1:n.unknowns+=1}return n};t.prototype._substract=function(t){this.errors-=t.errors,this.warnings-=t.warnings,this.infos-=t.infos,this.unknowns-=t.unknowns};t.prototype._add=function(t){this.errors+=t.errors,this.warnings+=t.warnings,this.infos+=t.infos,this.unknowns+=t.unknowns};return t}();var lG=function(){function t(){this._onMarkerChanged=new Si({delay:0,merge:t._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new cG,this._stats=new fG(this)}t.prototype.dispose=function(){this._stats.dispose(),this._onMarkerChanged.dispose()};t.prototype.remove=function(t,n){for(var i=0,r=n||[];i<r.length;i++){var e=r[i];this.changeOne(t,e,[])}};t.prototype.changeOne=function(n,i,r){if(_(r))this._data.delete(i,n)&&this._onMarkerChanged.fire([i]);else{var e=[];for(var o=0,s=r;o<s.length;o++){var u=s[o];var a=t._toMarker(n,i,u);a&&e.push(a)}this._data.set(i,n,e),this._onMarkerChanged.fire([i])}};t._toMarker=function(t,n,i){var r=i.code,e=i.severity,o=i.message,s=i.source,u=i.startLineNumber,a=i.startColumn,h=i.endLineNumber,c=i.endColumn,f=i.relatedInformation,l=i.tags;if(o)return u=u>0?u:1,a=a>0?a:1,h=h>=u?h:u,c=c>0?c:a,{resource:n,owner:t,code:r,severity:e,message:o,source:s,startLineNumber:u,startColumn:a,endLineNumber:h,endColumn:c,relatedInformation:f,tags:l}};t.prototype.changeAll=function(n,i){var r=[],e=this._data.values(n);if(e)for(var o=0,s=e;o<s.length;o++){var u=s[o];var a=Yt.first(u);a&&(r.push(a.resource),this._data.delete(a.resource,n))}if(k(i)){var u=new od;for(var h=0,c=i;h<c.length;h++){var f=c[h],a=f.resource,l=f.marker;var v=t._toMarker(n,a,l);if(!v)continue;var d=u.get(a);d?d.push(v):(u.set(a,[v]),r.push(a))}for(var g=0,p=u;g<p.length;g++){var w=p[g],a=w[0],l=w[1];this._data.set(a,n,l)}}r.length>0&&this._onMarkerChanged.fire(r)};t.prototype.read=function(n){if(n===void 0){n=Object.create(null)}var i=n.owner,r=n.resource,e=n.severities,o=n.take;if((!o||o<0)&&(o=-1),i&&r){var s=this._data.get(r,i);if(s){var u=[];for(var a=0,h=s;a<h.length;a++){var c=h[a];if(t._accept(c,e)){var f=u.push(c);if(o>0&&f===o)break}}return u}return[]}if(i||r){var s=this._data.values(r!==null&&r!==void 0?r:i),u=[];for(var l=0,v=s;l<v.length;l++){var c=v[l];for(var d=0,g=c;d<g.length;d++){var f=g[d];if(t._accept(f,e)){var p=u.push(f);if(o>0&&p===o)return u}}}return u}{var s=[];for(var w=0,m=this._data.values();w<m.length;w++){var u=m[w];for(var b=0,y=u;b<y.length;b++){var c=y[b];if(t._accept(c,e)){var f=s.push(c);if(o>0&&f===o)return s}}}return s}};t._accept=function(t,n){return n===void 0||(n&t.severity)===t.severity};t._merge=function(t){var n=new od;for(var i=0,r=t;i<r.length;i++){var e=r[i];for(var o=0,s=e;o<s.length;o++){var u=s[o];n.set(u,!0)}}return Array.from(n.keys())};return t}();var vG=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._configurationModel=new fB;return n}Object.defineProperty(n.prototype,"configurationModel",{get:function(){return this._configurationModel},enumerable:false,configurable:true});n.prototype.reload=function(){return this.resetConfigurationModel(),this.configurationModel};n.prototype.getConfigurationDefaultOverrides=function(){return{}};n.prototype.resetConfigurationModel=function(){this._configurationModel=new fB;var t=of.as(ev).getConfigurationProperties();this.updateConfigurationModel(Object.keys(t),t)};n.prototype.updateConfigurationModel=function(t,n){var i=this.getConfigurationDefaultOverrides();for(var r=0,e=t;r<e.length;r++){var o=e[r];var s=i[o],u=n[o];s!==void 0?this._configurationModel.addValue(o,s):u?this._configurationModel.addValue(o,u.default):this._configurationModel.removeValue(o)}};return n}(ci);var dG=Zh("accessibilitySignalService");var gG=function(){function t(t){this.fileName=t}t.register=function(n){return new t(n.fileName)};return t}();gG.error=gG.register({fileName:"error.mp3"}),gG.warning=gG.register({fileName:"warning.mp3"}),gG.foldedArea=gG.register({fileName:"foldedAreas.mp3"}),gG.break=gG.register({fileName:"break.mp3"}),gG.quickFixes=gG.register({fileName:"quickFixes.mp3"}),gG.taskCompleted=gG.register({fileName:"taskCompleted.mp3"}),gG.taskFailed=gG.register({fileName:"taskFailed.mp3"}),gG.terminalBell=gG.register({fileName:"terminalBell.mp3"}),gG.diffLineInserted=gG.register({fileName:"diffLineInserted.mp3"}),gG.diffLineDeleted=gG.register({fileName:"diffLineDeleted.mp3"}),gG.diffLineModified=gG.register({fileName:"diffLineModified.mp3"}),gG.chatRequestSent=gG.register({fileName:"chatRequestSent.mp3"}),gG.chatResponsePending=gG.register({fileName:"chatResponsePending.mp3"}),gG.chatResponseReceived1=gG.register({fileName:"chatResponseReceived1.mp3"}),gG.chatResponseReceived2=gG.register({fileName:"chatResponseReceived2.mp3"}),gG.chatResponseReceived3=gG.register({fileName:"chatResponseReceived3.mp3"}),gG.chatResponseReceived4=gG.register({fileName:"chatResponseReceived4.mp3"}),gG.clear=gG.register({fileName:"clear.mp3"}),gG.save=gG.register({fileName:"save.mp3"}),gG.format=gG.register({fileName:"format.mp3"}),gG.voiceRecordingStarted=gG.register({fileName:"voiceRecordingStarted.mp3"}),gG.voiceRecordingStopped=gG.register({fileName:"voiceRecordingStopped.mp3"});var pG=function(){function t(t){this.randomOneOf=t}return t}();var wG=function(){function t(t,n,i,r,e,o){this.sound=t,this.name=n,this.legacySoundSettingsKey=i,this.settingsKey=r,this.legacyAnnouncementSettingsKey=e,this.announcementMessage=o}t.register=function(n){var i=new pG("randomOneOf"in n.sound?n.sound.randomOneOf:[n.sound]),r=new t(i,n.name,n.legacySoundSettingsKey,n.settingsKey,n.legacyAnnouncementSettingsKey,n.announcementMessage);return t._signals.add(r),r};return t}();wG._signals=new Set,wG.error=wG.register({name:ht(0,"Error on Line"),sound:gG.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:ht(0,"Error"),settingsKey:"accessibility.signals.lineHasError"}),wG.warning=wG.register({name:ht(0,"Warning on Line"),sound:gG.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:ht(0,"Warning"),settingsKey:"accessibility.signals.lineHasWarning"}),wG.foldedArea=wG.register({name:ht(0,"Folded Area on Line"),sound:gG.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:ht(0,"Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),wG.break=wG.register({name:ht(0,"Breakpoint on Line"),sound:gG.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:ht(0,"Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),wG.inlineSuggestion=wG.register({name:ht(0,"Inline Suggestion on Line"),sound:gG.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),wG.terminalQuickFix=wG.register({name:ht(0,"Terminal Quick Fix"),sound:gG.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:ht(0,"Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),wG.onDebugBreak=wG.register({name:ht(0,"Debugger Stopped on Breakpoint"),sound:gG.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:ht(0,"Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),wG.noInlayHints=wG.register({name:ht(0,"No Inlay Hints on Line"),sound:gG.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:ht(0,"No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),wG.taskCompleted=wG.register({name:ht(0,"Task Completed"),sound:gG.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:ht(0,"Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),wG.taskFailed=wG.register({name:ht(0,"Task Failed"),sound:gG.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:ht(0,"Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),wG.terminalCommandFailed=wG.register({name:ht(0,"Terminal Command Failed"),sound:gG.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:ht(0,"Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),wG.terminalBell=wG.register({name:ht(0,"Terminal Bell"),sound:gG.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:ht(0,"Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),wG.notebookCellCompleted=wG.register({name:ht(0,"Notebook Cell Completed"),sound:gG.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:ht(0,"Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),wG.notebookCellFailed=wG.register({name:ht(0,"Notebook Cell Failed"),sound:gG.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:ht(0,"Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),wG.diffLineInserted=wG.register({name:ht(0,"Diff Line Inserted"),sound:gG.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),wG.diffLineDeleted=wG.register({name:ht(0,"Diff Line Deleted"),sound:gG.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),wG.diffLineModified=wG.register({name:ht(0,"Diff Line Modified"),sound:gG.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),wG.chatRequestSent=wG.register({name:ht(0,"Chat Request Sent"),sound:gG.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:ht(0,"Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),wG.chatResponseReceived=wG.register({name:ht(0,"Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[gG.chatResponseReceived1,gG.chatResponseReceived2,gG.chatResponseReceived3,gG.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),wG.chatResponsePending=wG.register({name:ht(0,"Chat Response Pending"),sound:gG.chatResponsePending,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.chatResponsePending",announcementMessage:ht(0,"Chat Response Pending"),settingsKey:"accessibility.signals.chatResponsePending"}),wG.clear=wG.register({name:ht(0,"Clear"),sound:gG.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:ht(0,"Clear"),settingsKey:"accessibility.signals.clear"}),wG.save=wG.register({name:ht(0,"Save"),sound:gG.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:ht(0,"Save"),settingsKey:"accessibility.signals.save"}),wG.format=wG.register({name:ht(0,"Format"),sound:gG.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:ht(0,"Format"),settingsKey:"accessibility.signals.format"}),wG.voiceRecordingStarted=wG.register({name:ht(0,"Voice Recording Started"),sound:gG.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),wG.voiceRecordingStopped=wG.register({name:ht(0,"Voice Recording Stopped"),sound:gG.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});var mG=function(t){__extends(n,t);function n(n,i){if(i===void 0){i=[]}var r=this;r=t.call(this)||this,r.logger=new Af(__spreadArray([n],i,true)),r._register(n.onDidChangeLogLevel((function(t){return r.setLevel(t)})));return r}Object.defineProperty(n.prototype,"onDidChangeLogLevel",{get:function(){return this.logger.onDidChangeLogLevel},enumerable:false,configurable:true});n.prototype.setLevel=function(t){this.logger.setLevel(t)};n.prototype.getLevel=function(){return this.logger.getLevel()};n.prototype.trace=function(t){var n;var i=[];for(var r=1;r<arguments.length;r++){i[r-1]=arguments[r]}(n=this.logger).trace.apply(n,__spreadArray([t],i,false))};n.prototype.debug=function(t){var n;var i=[];for(var r=1;r<arguments.length;r++){i[r-1]=arguments[r]}(n=this.logger).debug.apply(n,__spreadArray([t],i,false))};n.prototype.info=function(t){var n;var i=[];for(var r=1;r<arguments.length;r++){i[r-1]=arguments[r]}(n=this.logger).info.apply(n,__spreadArray([t],i,false))};n.prototype.warn=function(t){var n;var i=[];for(var r=1;r<arguments.length;r++){i[r-1]=arguments[r]}(n=this.logger).warn.apply(n,__spreadArray([t],i,false))};n.prototype.error=function(t){var n;var i=[];for(var r=1;r<arguments.length;r++){i[r-1]=arguments[r]}(n=this.logger).error.apply(n,__spreadArray([t],i,false))};return n}(ci);var bG=[];function yG(t){bG.push(t)}function _G(){return bG.slice(0)}var kG=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},xG=function(t,n){return function(i,r){n(i,r,t)}};var CG=function(){function t(t){this.disposed=!1,this.model=t,this._onWillDispose=new ki}Object.defineProperty(t.prototype,"textEditorModel",{get:function(){return this.model},enumerable:false,configurable:true});t.prototype.dispose=function(){this.disposed=!0,this._onWillDispose.fire()};return t}();var SG=function(){function t(t){this.modelService=t}t.prototype.createModelReference=function(t){var n=this.modelService.getModel(t);return n?Promise.resolve(new vi(new CG(n))):Promise.reject(new Error("Model not found"))};return t}();SG=kG([xG(0,Yh)],SG);var DG=function(){function t(){}t.prototype.show=function(){return t.NULL_PROGRESS_RUNNER};t.prototype.showWhile=function(t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,t];case 1:n.sent();return[2]}}))}))};return t}();DG.NULL_PROGRESS_RUNNER={done:function(){},total:function(){},worked:function(){}};var AG=function(){function t(){}t.prototype.info=function(t){return this.notify({severity:AL.Info,message:t})};t.prototype.warn=function(t){return this.notify({severity:AL.Warning,message:t})};t.prototype.error=function(t){return this.notify({severity:AL.Error,message:t})};t.prototype.notify=function(n){switch(n.severity){case AL.Error:console.error(n.message);break;case AL.Warning:console.warn(n.message);break;default:console.log(n.message)}return t.NO_OP};t.prototype.prompt=function(n,i,r,e){return t.NO_OP};t.prototype.status=function(t,n){return ci.None};return t}();AG.NO_OP=new(function(){function t(){}return t}());var OG=function(){function t(t){this._onWillExecuteCommand=new ki,this._onDidExecuteCommand=new ki,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=t}t.prototype.executeCommand=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r=hc.getCommand(t);if(!r)return Promise.reject(new Error("command '".concat(t,"' not found")));try{this._onWillExecuteCommand.fire({commandId:t,args:n});var e=this._instantiationService.invokeFunction.apply(this._instantiationService,__spreadArray([r.handler],n,true));return this._onDidExecuteCommand.fire({commandId:t,args:n}),Promise.resolve(e)}catch(e){return Promise.reject(e)}};return t}();OG=kG([xG(0,Jh)],OG);var EG=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this,n,i,r,e,o)||this,u._cachedResolver=null,u._dynamicKeybindings=[],u._domNodeListeners=[];var a=function(t){var n=new hi;n.add(ma(t,ah.KEY_DOWN,(function(t){var n=new ws(t);u._dispatch(n,n.target)&&(n.preventDefault(),n.stopPropagation())}))),n.add(ma(t,ah.KEY_UP,(function(t){var n=new ws(t);u._singleModifierDispatch(n,n.target)&&n.preventDefault()}))),u._domNodeListeners.push(new MG(t,n))},h=function(t){for(var n=0;n<u._domNodeListeners.length;n++){var i=u._domNodeListeners[n];i.domNode===t&&(u._domNodeListeners.splice(n,1),i.dispose())}},c=function(t){t.getOption(61)||a(t.getContainerDomNode())};u._register(s.onCodeEditorAdd(c)),u._register(s.onCodeEditorRemove((function(t){t.getOption(61)||h(t.getContainerDomNode())}))),s.listCodeEditors().forEach(c);var f=function(t){a(t.getContainerDomNode())};u._register(s.onDiffEditorAdd(f)),u._register(s.onDiffEditorRemove((function(t){h(t.getContainerDomNode())}))),s.listDiffEditors().forEach(f);return u}n.prototype.addDynamicKeybinding=function(t,n,i,r){return ui(hc.registerCommand(t,i),this.addDynamicKeybindings([{keybinding:n,command:t,when:r}]))};n.prototype.addDynamicKeybindings=function(t){var n=this;var i=t.map((function(t){var n;return{keybinding:hs(t.keybinding,zt),command:(n=t.command)!==null&&n!==void 0?n:null,commandArgs:t.commandArgs,when:t.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(i),this.updateResolver(),ai((function(){for(var t=0;t<n._dynamicKeybindings.length;t++)if(n._dynamicKeybindings[t]===i[0])return n._dynamicKeybindings.splice(t,i.length),void n.updateResolver()}))};n.prototype.updateResolver=function(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()};n.prototype._getResolver=function(){var t=this;if(!this._cachedResolver){var n=this._toNormalizedKeybindingItems(uf.getDefaultKeybindings(),!0),i=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new mB(n,i,(function(n){return t._log(n)}))}return this._cachedResolver};n.prototype._documentHasFocus=function(){return Xe.document.hasFocus()};n.prototype._toNormalizedKeybindingItems=function(t,n){var i=[];var r=0;for(var e=0,o=t;e<o.length;e++){var s=o[e];var u=s.when||void 0,a=s.keybinding;if(a){var h=jB.resolveKeybinding(a,zt);for(var c=0,f=h;c<f.length;c++){var l=f[c];i[r++]=new CB(l,s.command,s.commandArgs,u,n,null,!1)}}else i[r++]=new CB(void 0,s.command,s.commandArgs,u,n,null,!1)}return i};n.prototype.resolveKeyboardEvent=function(t){var n=new fs(t.ctrlKey,t.shiftKey,t.altKey,t.metaKey,t.keyCode);return new jB([n],zt)};return n}(kB);EG=kG([xG(0,Gc),xG(1,ac),xG(2,_f),xG(3,EL),xG(4,kf),xG(5,Qh)],EG);var MG=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.domNode=n,r._register(i);return r}return n}(ci);function FG(t){return t&&typeof t=="object"&&(!t.overrideIdentifier||typeof t.overrideIdentifier=="string")&&(!t.resource||t.resource instanceof Cr)}var LG=function(){function t(){this._onDidChangeConfiguration=new ki,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;var t=new vG;this._configuration=new dB(t.reload(),new fB,new fB,new fB),t.dispose()}t.prototype.getValue=function(t,n){var i=typeof t=="string"?t:void 0,r=FG(t)?t:FG(n)?n:{};return this._configuration.getValue(i,r,void 0)};t.prototype.updateValues=function(t){var n={data:this._configuration.toData()},i=[];for(var r=0,e=t;r<e.length;r++){var o=e[r];var s=o[0],u=o[1];this.getValue(s)!==u&&(this._configuration.updateValue(s,u),i.push(s))}if(i.length>0){var o=new gB({keys:i,overrides:[]},n,this._configuration);o.source=8,this._onDidChangeConfiguration.fire(o)}return Promise.resolve()};t.prototype.updateValue=function(t,n,i,r){return this.updateValues([[t,n]])};t.prototype.inspect=function(t,n){if(n===void 0){n={}}return this._configuration.inspect(t,n,void 0)};return t}();var jG=function(){function t(t,n,i){var r=this;this.configurationService=t,this.modelService=n,this.languageService=i,this._onDidChangeConfiguration=new ki,this.configurationService.onDidChangeConfiguration((function(t){r._onDidChangeConfiguration.fire({affectedKeys:t.affectedKeys,affectsConfiguration:function(n,i){return t.affectsConfiguration(i)}})}))}t.prototype.getValue=function(t,n,i){var r=Tr.isIPosition(n)?n:null,e=r?typeof i=="string"?i:void 0:typeof n=="string"?n:void 0,o=t?this.getLanguage(t,r):void 0;return e===void 0?this.configurationService.getValue({resource:t,overrideIdentifier:o}):this.configurationService.getValue(e,{resource:t,overrideIdentifier:o})};t.prototype.getLanguage=function(t,n){var i=this.modelService.getModel(t);return i?n?i.getLanguageIdAtPosition(n.lineNumber,n.column):i.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(t)};return t}();jG=kG([xG(0,Kl),xG(1,Yh),xG(2,Zl)],jG);var RG=function(){function t(t){this.configurationService=t}t.prototype.getEOL=function(t,n){var i=this.configurationService.getValue("files.eol",{overrideIdentifier:n,resource:t});return i&&typeof i=="string"&&i!=="auto"?i:Lt||Ft?"\n":"\r\n"};return t}();RG=kG([xG(0,Kl)],RG);var TG=function(){function t(){var n=Cr.from({scheme:t.SCHEME,authority:"model",path:"/"});this.workspace={id:ZB,folders:[new $B({uri:n,name:"",index:0})]}}t.prototype.getWorkspace=function(){return this.workspace};t.prototype.getWorkspaceFolder=function(n){return n&&n.scheme===t.SCHEME?this.workspace.folders[0]:null};return t}();function IG(t,n,i){if(!n||!(t instanceof LG))return;var r=[];Object.keys(n).forEach((function(t){(function(t){return aB()["editor.".concat(t)]||!1})(t)&&r.push(["editor.".concat(t),n[t]]),i&&function(t){return aB()["diffEditor.".concat(t)]||!1}(t)&&r.push(["diffEditor.".concat(t),n[t]])})),r.length>0&&t.updateValues(r)}TG.SCHEME="inmemory";var BG=function(){function t(t){this._modelService=t}t.prototype.hasPreviewHandler=function(){return!1};t.prototype.apply=function(t,n){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o,s,u,a,h,c,f,l,o,s;return __generator(this,(function(v){n=Array.isArray(t)?t:YI.convert(t),i=new Map;for(r=0,e=n;r<e.length;r++){o=e[r];if(!(o instanceof XI))throw new Error("bad edit - only text edits are supported");s=this._modelService.getModel(o.resource);if(!s)throw new Error("bad edit - model not found");if(typeof o.versionId=="number"&&s.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");u=i.get(s);u||(u=[],i.set(s,u)),u.push(hB.replaceMove(Ir.lift(o.textEdit.range),o.textEdit.text))}a=0,h=0;for(c=0,f=i;c<f.length;c++){l=f[c],o=l[0],s=l[1];o.pushStackElement(),o.pushEditOperations([],s,(function(){return[]})),o.pushStackElement(),h+=1,a+=s.length}return[2,{ariaSummary:oo(eN.bulkEditServiceSummary,a,h),isApplied:a>0}]}))}))};return t}();BG=kG([xG(0,Yh)],BG);var NG=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n)||this,r._codeEditorService=i;return r}n.prototype.showContextView=function(n,i,r){if(!i){var e=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();e&&(i=e.getContainerDomNode())}return t.prototype.showContextView.call(this,n,i,r)};return n}(VI);NG=kG([xG(0,XL),xG(1,Qh)],NG);var PG=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this,n,i,r,e,o,s)||this,u.configure({blockMouse:!1});return u}return n}(oH);PG=kG([xG(0,_f),xG(1,EL),xG(2,yR),xG(3,Yx),xG(4,df),xG(5,Gc)],PG);var WG;Xl(Kl,LG,0),Xl(Yg,jG,0),Xl(Xg,RG,0),Xl(KB,TG,0),Xl(RB,function(){function t(){}t.prototype.getUriLabel=function(t,n){return t.scheme==="file"?t.fsPath:t.path};t.prototype.getUriBasenameLabel=function(t){return NO(t)};return t}(),0),Xl(_f,function(){function t(){}t.prototype.publicLog2=function(){};return t}(),0),Xl(ej,function(){function t(){}t.prototype.confirm=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){return[2,{confirmed:this.doConfirm(t.message,t.detail),checkboxChecked:!1}]}))}))};t.prototype.doConfirm=function(t,n){var i=t;return n&&(i=i+"\n\n"+n),Xe.confirm(i)};t.prototype.prompt=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e;return __generator(this,(function(o){switch(o.label){case 0:if(!this.doConfirm(t.message,t.detail))return[3,2];e=__spreadArray([],(n=t.buttons)!==null&&n!==void 0?n:[],true);t.cancelButton&&typeof t.cancelButton!="string"&&typeof t.cancelButton!="boolean"&&e.push(t.cancelButton);return[4,(i=e[0])===null||i===void 0?void 0:i.run({checkboxChecked:!1})];case 1:r=o.sent();o.label=2;case 2:return[2,{result:r}]}}))}))};t.prototype.error=function(t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,this.prompt({type:AL.Error,message:t,detail:n})];case 1:i.sent();return[2]}}))}))};return t}(),0),Xl(_j,function(){function t(){this.isExtensionDevelopment=!1,this.isBuilt=!1}return t}(),0),Xl(EL,AG,0),Xl(pH,lG,0),Xl(Zl,function(t){__extends(n,t);function n(){return t.call(this)||this}return n}(pN),0),Xl(Aq,function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n._onColorThemeChange=n._register(new ki),n.onDidColorThemeChange=n._onColorThemeChange.event,n._onProductIconThemeChange=n._register(new ki),n.onDidProductIconThemeChange=n._onProductIconThemeChange.event,n._environment=Object.create(null),n._builtInProductIconTheme=new pq,n._autoDetectHighContrast=!0,n._knownThemes=new Map,n._knownThemes.set(wq,Dq(wq)),n._knownThemes.set(mq,Dq(mq)),n._knownThemes.set(bq,Dq(bq)),n._knownThemes.set(yq,Dq(yq));var i=n._register(function(t){var n=new hi,i=n.add(new ki),r=fq();return n.add(r.onDidChange((function(){return i.fire()}))),t&&n.add(t.onDidProductIconThemeChange((function(){return i.fire()}))),{dispose:function(){return n.dispose()},onDidChange:i.event,getCSS:function(){var n=t?t.getProductIconTheme():new pq,i={},e=function(t){var r=n.getIcon(t);if(!r)return;var e=r.font;return e?(i[e.id]=e.definition,".codicon-".concat(t.id,":before { content: '").concat(r.fontCharacter,"'; font-family: ").concat(Sh(e.id),"; }")):".codicon-".concat(t.id,":before { content: '").concat(r.fontCharacter,"'; }")},o=[];for(var s=0,u=r.getIcons();s<u.length;s++){var a=u[s];var h=e(a);h&&o.push(h)}for(var a in i){var h=i[a],c=h.weight?"font-weight: ".concat(h.weight,";"):"",f=h.style?"font-style: ".concat(h.style,";"):"",l=h.src.map((function(t){return"".concat(Ch(t.location)," format('").concat(t.format,"')")})).join(", ");o.push("@font-face { src: ".concat(l,"; font-family: ").concat(Sh(a),";").concat(c).concat(f," font-display: block; }"))}return o.join("\n")}}}(n));n._codiconCSS=i.getCSS(),n._themeCSS="",n._allCSS="".concat(n._codiconCSS,"\n").concat(n._themeCSS),n._globalStyleElement=null,n._styleElements=[],n._colorMapOverride=null,n.setTheme(wq),n._onOSSchemeChanged(),n._register(i.onDidChange((function(){n._codiconCSS=i.getCSS(),n._updateCSS()}))),ts(Xe,"(forced-colors: active)",(function(){n._onOSSchemeChanged()}));return n}n.prototype.registerEditorContainer=function(t){return za(t)?this._registerShadowDomContainer(t):this._registerRegularEditorContainer()};n.prototype._registerRegularEditorContainer=function(){var t=this;return this._globalStyleElement||(this._globalStyleElement=Qa(void 0,(function(n){n.className="monaco-colors",n.textContent=t._allCSS})),this._styleElements.push(this._globalStyleElement)),ci.None};n.prototype._registerShadowDomContainer=function(t){var n=this;var i=Qa(t,(function(t){t.className="monaco-colors",t.textContent=n._allCSS}));return this._styleElements.push(i),{dispose:function(){for(var t=0;t<n._styleElements.length;t++)if(n._styleElements[t]===i)return void n._styleElements.splice(t,1)}}};n.prototype.defineTheme=function(t,n){if(!/^[a-z0-9\-]+$/i.test(t))throw new Error("Illegal theme name!");if(!Cq(n.base)&&!Cq(t))throw new Error("Illegal theme base!");this._knownThemes.set(t,new xq(t,n)),Cq(t)&&this._knownThemes.forEach((function(n){n.base===t&&n.notifyBaseUpdated()})),this._theme.themeName===t&&this.setTheme(t)};n.prototype.getColorTheme=function(){return this._theme};n.prototype.setColorMapOverride=function(t){this._colorMapOverride=t,this._updateThemeOrColorMap()};n.prototype.setTheme=function(t){var n;n=this._knownThemes.has(t)?this._knownThemes.get(t):this._knownThemes.get(wq),this._updateActualTheme(n)};n.prototype._updateActualTheme=function(t){t&&this._theme!==t&&(this._theme=t,this._updateThemeOrColorMap())};n.prototype._onOSSchemeChanged=function(){if(this._autoDetectHighContrast){var t=Xe.matchMedia("(forced-colors: active)").matches;if(t!==C_(this._theme.type)){var n=void 0;n=S_(this._theme.type)?t?bq:mq:t?yq:wq,this._updateActualTheme(this._knownThemes.get(n))}}};n.prototype.setAutoDetectHighContrast=function(t){this._autoDetectHighContrast=t,this._onOSSchemeChanged()};n.prototype._updateThemeOrColorMap=function(){var t=this;var n=[],i={},r={addRule:function(t){i[t]||(n.push(t),i[t]=!0)}};kq.getThemingParticipants().forEach((function(n){return n(t._theme,r,t._environment)}));var e=[];for(var o=0,s=_q.getColors();o<s.length;o++){var u=s[o];var a=this._theme.getColor(u.id,!0);a&&e.push("".concat(Vw(u.id),": ").concat(a.toString(),";"))}r.addRule(".monaco-editor, .monaco-diff-editor, .monaco-component { ".concat(e.join("\n")," }"));var h=this._colorMapOverride||this._theme.tokenTheme.getColorMap();r.addRule(function(t){var n=[];for(var i=1,r=t.length;i<r;i++){var e=t[i];n[i]=".mtk".concat(i," { color: ").concat(e,"; }")}return n.push(".mtki { font-style: italic; }"),n.push(".mtkb { font-weight: bold; }"),n.push(".mtku { text-decoration: underline; text-underline-position: under; }"),n.push(".mtks { text-decoration: line-through; }"),n.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),n.join("\n")}(h)),this._themeCSS=n.join("\n"),this._updateCSS(),oe.setColorMap(h),this._onColorThemeChange.fire(this._theme)};n.prototype._updateCSS=function(){var t=this;this._allCSS="".concat(this._codiconCSS,"\n").concat(this._themeCSS),this._styleElements.forEach((function(n){return n.textContent=t._allCSS}))};n.prototype.getFileIconTheme=function(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}};n.prototype.getProductIconTheme=function(){return this._builtInProductIconTheme};return n}(ci),0),Xl(kf,function(t){__extends(n,t);function n(){return t.call(this,new Df)||this}return n}(mG),0),Xl(Yh,OH,0),Xl(xw,bH,0),Xl(Gc,iG,0),Xl(TB,function(){function t(){}t.prototype.withProgress=function(t,n,i){return n({report:function(){}})};return t}(),0),Xl(BB,DG,0),Xl(_W,function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n.applicationStorage=n._register(new mW(new bW,{hint:pW.STORAGE_IN_MEMORY})),n.profileStorage=n._register(new mW(new bW,{hint:pW.STORAGE_IN_MEMORY})),n.workspaceStorage=n._register(new mW(new bW,{hint:pW.STORAGE_IN_MEMORY})),n._register(n.workspaceStorage.onDidChangeStorage((function(t){return n.emitDidChangeValue(1,t)}))),n._register(n.profileStorage.onDidChangeStorage((function(t){return n.emitDidChangeValue(0,t)}))),n._register(n.applicationStorage.onDidChangeStorage((function(t){return n.emitDidChangeValue(-1,t)})));return n}n.prototype.getStorage=function(t){switch(t){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}};return n}(xW),0),Xl(vH,op,0),Xl(QI,BG,0),Xl(oN,function(){function t(){this._neverEmitter=new ki,this.onDidChangeTrust=this._neverEmitter.event}t.prototype.isWorkspaceTrusted=function(){return!0};return t}(),0),Xl(Xh,SG,0),Xl(jw,Mq,0),Xl(VU,function(){function t(){this.disposables=new hi,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}Object.defineProperty(t.prototype,"lastFocusedList",{get:function(){return this._lastFocusedWidget},enumerable:false,configurable:true});t.prototype.setLastFocusedList=function(t){var n,i;t!==this._lastFocusedWidget&&((n=this._lastFocusedWidget)===null||n===void 0||n.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=t,(i=this._lastFocusedWidget)===null||i===void 0||i.getHTMLElement().classList.add("last-focused"))};t.prototype.register=function(t,n){var i=this;if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new JP(Qa(),"").style(FW)),this.lists.some((function(n){return n.widget===t})))throw new Error("Cannot register the same widget multiple times");var r={widget:t,extraContextKeys:n};return this.lists.push(r),Va(t.getHTMLElement())&&this.setLastFocusedList(t),ui(t.onDidFocus((function(){return i.setLastFocusedList(t)})),ai((function(){return i.lists.splice(i.lists.indexOf(r),1)})),t.onDidDispose((function(){i.lists=i.lists.filter((function(t){return t!==r})),i._lastFocusedWidget===t&&i.setLastFocusedList(void 0)})))};t.prototype.dispose=function(){this.disposables.dispose()};return t}(),0),Xl(ac,OG,0),Xl(Yx,EG,0),Xl(TH,GV,0),Xl(yR,NG,0),Xl(DR,lH,0),Xl(Kq,Uq,0),Xl(_R,PG,0),Xl(df,Tq,0),Xl(dG,function(){function t(){}t.prototype.playSignal=function(t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2]}))}))};return t}(),0),function(t){var n=new SL;for(var i=0,r=tv();i<r.length;i++){var e=r[i],o=e[0],s=e[1];n.set(o,s)}var u=new uG(n,!0);n.set(Jh,u),t.get=function(t){a||c({});var i=n.get(t);if(!i)throw new Error("Missing service "+t);return i instanceof Ql?u.invokeFunction((function(n){return n.get(t)})):i};var a=!1;var h=new ki;function c(t){if(a)return u;a=!0;for(var i=0,r=tv();i<r.length;i++){var e=r[i],o=e[0],s=e[1];n.get(o)||n.set(o,s)}for(var o in t)if(t.hasOwnProperty(o)){var s=Zh(o);n.get(s)instanceof Ql&&n.set(s,t[o])}var c=_G();for(var f=0,l=c;f<l.length;f++){var o=l[f];try{u.createInstance(o)}catch(s){Gn(s)}}return h.fire(),u}t.initialize=c,t.withServices=function(t){if(a)return t();var n=new hi,i=n.add(h.event((function(){i.dispose(),n.add(t())})));return n}}(WG||(WG={}));var HG=function(){function t(t,n,i,r,e){this._initialScrollTop=t,this._initialContentHeight=n,this._visiblePosition=i,this._visiblePositionScrollDelta=r,this._cursorPosition=e}t.capture=function(n){if(n.getScrollTop()===0||n.hasPendingScrollAnimation())return new t(n.getScrollTop(),n.getContentHeight(),null,0,null);var i=null,r=0;var e=n.getVisibleRanges();if(e.length>0){i=e[0].getStartPosition();var o=n.getTopForPosition(i.lineNumber,i.column);r=n.getScrollTop()-o}return new t(n.getScrollTop(),n.getContentHeight(),i,r,n.getPosition())};t.prototype.restore=function(t){if((this._initialContentHeight!==t.getContentHeight()||this._initialScrollTop!==t.getScrollTop())&&this._visiblePosition){var n=t.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);t.setScrollTop(n+this._visiblePositionScrollDelta)}};t.prototype.restoreRelativeVerticalPositionOfCursor=function(t){if(this._initialContentHeight===t.getContentHeight()&&this._initialScrollTop===t.getScrollTop())return;var n=t.getPosition();if(!this._cursorPosition||!n)return;var i=t.getTopForLineNumber(n.lineNumber)-t.getTopForLineNumber(this._cursorPosition.lineNumber);t.setScrollTop(t.getScrollTop()+i)};return t}();function zG(){return $i&&!!$i.VSCODE_DEV}function UG(t){if(zG()){var n=function(){KG||(KG=new Set);var t=globalThis;return t.$hotReload_applyNewExports||(t.$hotReload_applyNewExports=function(t){var n=__assign({config:{mode:void 0}},t);for(var i=0,r=KG;i<r.length;i++){var e=r[i];var o=e(n);if(o)return o}}),KG}();return n.add(t),{dispose:function(){n.delete(t)}}}return{dispose:function(){}}}var KG;function VG(t,n){var i=new hi,r=t.createDecorationsCollection();return i.add(vP({debugName:function(){return"Apply decorations from ".concat(n.debugName)}},(function(t){var i=n.read(t);r.set(i)}))),i.add({dispose:function(){r.clear()}}),i}function qG(t,n){return t.appendChild(n),ai((function(){t.removeChild(n)}))}zG()&&UG((function(t){var n=t.oldExports,i=t.newSrc,r=t.config;if(r.mode==="patch-prototype")return function(t){var i,r;for(var e in t){var o=t[e];if(console.log("[hot-reload] Patching prototype methods of '".concat(e,"'"),{exportedItem:o}),typeof o=="function"&&o.prototype){var s=n[e];if(s){for(var u=0,a=Object.getOwnPropertyNames(o.prototype);u<a.length;u++){var h=a[u];var c=Object.getOwnPropertyDescriptor(o.prototype,h),f=Object.getOwnPropertyDescriptor(s.prototype,h);((i=c==null?void 0:c.value)===null||i===void 0?void 0:i.toString())!==((r=f==null?void 0:f.value)===null||r===void 0?void 0:r.toString())&&console.log("[hot-reload] Patching prototype method '".concat(e,".").concat(h,"'")),Object.defineProperty(s.prototype,h,c)}t[e]=s}}}return!0}}));var GG=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.elementSizeObserver=r._register(new Aw(n,i)),r._width=iP(r,r.elementSizeObserver.getWidth()),r._height=iP(r,r.elementSizeObserver.getHeight()),r._register(r.elementSizeObserver.onDidChange((function(t){return YN((function(t){r._width.set(r.elementSizeObserver.getWidth(),t),r._height.set(r.elementSizeObserver.getHeight(),t)}))})));return r}Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:false,configurable:true});n.prototype.observe=function(t){this.elementSizeObserver.observe(t)};n.prototype.setAutomaticLayout=function(t){t?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()};return n}(ci);function $G(t,n,i){var r=n.get(),e=r,o=r;var s=iP("animatedValue",r);var u=-1,a;function h(){var n=Date.now()-u;var i,c,f,l;o=Math.floor((c=e,f=r-e,(i=n)===(l=300)?c+f:f*(1-Math.pow(2,-10*i/l))+c)),n<300?a=t.requestAnimationFrame(h):o=r,s.set(o,void 0)}return i.add(dP({createEmptyChangeSummary:function(){return{animate:!1}},handleChange:function(t,i){return t.didChange(n)&&(i.animate=i.animate||t.change),!0}},(function(i,s){a!==void 0&&(t.cancelAnimationFrame(a),a=void 0),e=o,r=n.read(i),u=Date.now()-(s.animate?0:300),h()}))),s}var JG=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._register(new QG(n,r)),e._register(YG(r,{height:i.actualHeight,top:i.actualTop}));return e}return n}(ci);var ZG=function(){function t(t,n){var i=this;this._afterLineNumber=t,this.heightInPx=n,this.domNode=document.createElement("div"),this._actualTop=iP(this,void 0),this._actualHeight=iP(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=function(t){i._actualTop.set(t,void 0)},this.onComputedHeight=function(t){i._actualHeight.set(t,void 0)}}Object.defineProperty(t.prototype,"afterLineNumber",{get:function(){return this._afterLineNumber.get()},enumerable:false,configurable:true});return t}();var QG=function(){function t(n,i){var r=this;this._editor=n,this._domElement=i,this._overlayWidgetId="managedOverlayWidget-"+t._counter++,this._overlayWidget={getId:function(){return r._overlayWidgetId},getDomNode:function(){return r._domElement},getPosition:function(){return null}},this._editor.addOverlayWidget(this._overlayWidget)}t.prototype.dispose=function(){this._editor.removeOverlayWidget(this._overlayWidget)};return t}();function YG(t,n){return lP((function(i){for(var r=0,e=Object.entries(n);r<e.length;r++){var o=e[r],s=o[0],u=o[1];u&&typeof u=="object"&&"read"in u&&(u=u.read(i)),typeof u=="number"&&(u="".concat(u,"px")),s=s.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),t.style[s]=u}}))}function XG(t,n){return function(t,n){zG()&&_P("reload",(function(n){return UG((function(i){var r=i.oldExports;if(__spreadArray([],Object.values(r),true).some((function(n){return t.includes(n)})))return function(t){return n(void 0),!0}}))})).read(n)}([t],n),t}function t$(t,n,i,r){var e=new hi,o=[];return e.add(gP((function(e,s){var u=n.read(e),a=new Map,h=new Map;i&&i(!0),t.changeViewZones((function(t){for(var n=0,i=o;n<i.length;n++){var e=i[n];t.removeZone(e),r==null||r.delete(e)}o.length=0;for(var s=0,h=u;s<h.length;s++){var e=h[s];var c=t.addZone(e);e.setZoneId&&e.setZoneId(c),o.push(c),r==null||r.add(c),a.set(e,c)}})),i&&i(!1),s.add(dP({createEmptyChangeSummary:function(){return{zoneIds:[]}},handleChange:function(t,n){var i=h.get(t.changedObservable);return i!==void 0&&n.zoneIds.push(i),!0}},(function(n,r){for(var e=0,o=u;e<o.length;e++){var s=o[e];s.onChange&&(h.set(s.onChange,a.get(s)),s.onChange.read(n))}i&&i(!0),t.changeViewZones((function(t){for(var n=0,i=r.zoneIds;n<i.length;n++){var e=i[n];t.layoutZone(e)}})),i&&i(!1)})))}))),e.add({dispose:function(){i&&i(!0),t.changeViewZones((function(t){for(var n=0,i=o;n<i.length;n++){var r=i[n];t.removeZone(r)}})),r==null||r.clear(),i&&i(!1)}}),e}QG._counter=0;var n$=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.dispose=function(){t.prototype.dispose.call(this,!0)};return n}(ji);function i$(t,n){var i=Td(n,(function(n){return n.original.startLineNumber<=t.lineNumber}));if(!i)return Ir.fromPositions(t);if(i.original.endLineNumberExclusive<=t.lineNumber){var r=t.lineNumber-i.original.endLineNumberExclusive+i.modified.endLineNumberExclusive;return Ir.fromPositions(new Tr(r,t.column))}if(!i.innerChanges)return Ir.fromPositions(new Tr(i.modified.startLineNumber,1));var e=Td(i.innerChanges,(function(n){return n.originalRange.getStartPosition().isBeforeOrEqual(t)}));if(!e){var r=t.lineNumber-i.original.startLineNumber+i.modified.startLineNumber;return Ir.fromPositions(new Tr(r,t.column))}if(e.originalRange.containsPosition(t))return e.modifiedRange;{var r=(o=e.originalRange.getEndPosition(),s=t,o.lineNumber===s.lineNumber?new wA(0,s.column-o.column):new wA(s.lineNumber-o.lineNumber,s.column-1));return Ir.fromPositions(r.addToPosition(e.modifiedRange.getEndPosition()))}var o,s}function r$(t,n,i){var r=t.bindTo(n);return vP({debugName:function(){return'Set Context Key "'.concat(t.key,'"')}},(function(t){r.set(i(t))}))}var e$=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},o$=function(t,n){return function(i,r){n(i,r,t)}};var s$=cq("diff-review-insert",Hr.add,ht(0,"Icon for 'Insert' in accessible diff viewer.")),u$=cq("diff-review-remove",Hr.remove,ht(0,"Icon for 'Remove' in accessible diff viewer.")),a$=cq("diff-review-close",Hr.close,ht(0,"Icon for 'Close' in accessible diff viewer."));var h$=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;c=t.call(this)||this,c._parentNode=n,c._visible=i,c._setVisible=r,c._canClose=e,c._width=o,c._height=s,c._diffs=u,c._models=a,c._instantiationService=h,c._state=hP(c,(function(t,n){var i=c._visible.read(t);if(c._parentNode.style.visibility=i?"visible":"hidden",!i)return null;var r=n.add(c._instantiationService.createInstance(c$,c._diffs,c._models,c._setVisible,c._canClose));return{model:r,view:n.add(c._instantiationService.createInstance(m$,c._parentNode,r,c._width,c._height,c._models))}})).recomputeInitiallyAndOnChange(c._store);return c}n.prototype.next=function(){var t=this;YN((function(n){var i=t._visible.get();t._setVisible(!0,n),i&&t._state.get().model.nextGroup(n)}))};n.prototype.prev=function(){var t=this;YN((function(n){t._setVisible(!0,n),t._state.get().model.previousGroup(n)}))};n.prototype.close=function(){var t=this;YN((function(n){t._setVisible(!1,n)}))};return n}(ci);h$._ttPolicy=rl("diffReview",{createHTML:function(t){return t}}),h$=e$([o$(8,Jh)],h$);var c$=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s._diffs=n,s._models=i,s._setVisible=r,s.canClose=e,s._accessibilitySignalService=o,s._groups=iP(s,[]),s._currentGroupIdx=iP(s,0),s._currentElementIdx=iP(s,0),s.groups=s._groups,s.currentGroup=s._currentGroupIdx.map((function(t,n){return s._groups.read(n)[t]})),s.currentGroupIndex=s._currentGroupIdx,s.currentElement=s._currentElementIdx.map((function(t,n){var i;return(i=s.currentGroup.read(n))===null||i===void 0?void 0:i.lines[t]})),s._register(lP((function(t){var n=s._diffs.read(t);if(!n)return void s._groups.set([],void 0);var i=function(t,n,i){var r=[];var e=function(t){var e=[];e.push(new d$);var o=new zd(Math.max(1,t[0].original.startLineNumber-f$),Math.min(t[t.length-1].original.endLineNumberExclusive+f$,n+1)),s=new zd(Math.max(1,t[0].modified.startLineNumber-f$),Math.min(t[t.length-1].modified.endLineNumberExclusive+f$,i+1));m(t,(function(t,n){var i=new zd(t?t.original.endLineNumberExclusive:o.startLineNumber,n?n.original.startLineNumber:o.endLineNumberExclusive),r=new zd(t?t.modified.endLineNumberExclusive:s.startLineNumber,n?n.modified.startLineNumber:s.endLineNumberExclusive);i.forEach((function(t){e.push(new w$(t,r.startLineNumber+(t-i.startLineNumber)))})),n&&(n.original.forEach((function(t){e.push(new g$(n,t))})),n.modified.forEach((function(t){e.push(new p$(n,t))})))}));var u=t[0].modified.join(t[t.length-1].modified),a=t[0].original.join(t[t.length-1].original);r.push(new v$(new Kd(u,a),e))};for(var o=0,s=w(t,(function(t,n){return n.modified.startLineNumber-t.modified.endLineNumberExclusive<2*f$}));o<s.length;o++){var u=s[o];e(u)}return r}(n,s._models.getOriginalModel().getLineCount(),s._models.getModifiedModel().getLineCount());YN((function(t){var n=s._models.getModifiedPosition();if(n){var r=i.findIndex((function(t){return(n==null?void 0:n.lineNumber)<t.range.modified.endLineNumberExclusive}));r!==-1&&s._currentGroupIdx.set(r,t)}s._groups.set(i,t)}))}))),s._register(lP((function(t){var n=s.currentElement.read(t);(n==null?void 0:n.type)===l$.Deleted?s._accessibilitySignalService.playSignal(wG.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(n==null?void 0:n.type)===l$.Added&&s._accessibilitySignalService.playSignal(wG.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})}))),s._register(lP((function(t){var n;var i=s.currentElement.read(t);if(i&&i.type!==l$.Header){var r=(n=i.modifiedLineNumber)!==null&&n!==void 0?n:i.diff.modified.startLineNumber;s._models.modifiedSetSelection(Ir.fromPositions(new Tr(r,1)))}})));return s}n.prototype._goToGroupDelta=function(t,n){var i=this;var r=this.groups.get();!r||r.length<=1||tP(n,(function(n){i._currentGroupIdx.set(jd.ofLength(r.length).clipCyclic(i._currentGroupIdx.get()+t),n),i._currentElementIdx.set(0,n)}))};n.prototype.nextGroup=function(t){this._goToGroupDelta(1,t)};n.prototype.previousGroup=function(t){this._goToGroupDelta(-1,t)};n.prototype._goToLineDelta=function(t){var n=this;var i=this.currentGroup.get();!i||i.lines.length<=1||YN((function(r){n._currentElementIdx.set(jd.ofLength(i.lines.length).clip(n._currentElementIdx.get()+t),r)}))};n.prototype.goToNextLine=function(){this._goToLineDelta(1)};n.prototype.goToPreviousLine=function(){this._goToLineDelta(-1)};n.prototype.goToLine=function(t){var n=this;var i=this.currentGroup.get();if(!i)return;var r=i.lines.indexOf(t);r!==-1&&YN((function(t){n._currentElementIdx.set(r,t)}))};n.prototype.revealCurrentElementInEditor=function(){if(!this.canClose.get())return;this._setVisible(!1,void 0);var t=this.currentElement.get();t&&(t.type===l$.Deleted?this._models.originalReveal(Ir.fromPositions(new Tr(t.originalLineNumber,1))):this._models.modifiedReveal(t.type!==l$.Header?Ir.fromPositions(new Tr(t.modifiedLineNumber,1)):void 0))};n.prototype.close=function(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())};return n}(ci);c$=e$([o$(4,dG)],c$);var f$=3;var l$;(function(t){t[t.Header=0]="Header",t[t.Unchanged=1]="Unchanged",t[t.Deleted=2]="Deleted",t[t.Added=3]="Added"})(l$||(l$={}));var v$=function(){function t(t,n){this.range=t,this.lines=n}return t}();var d$=function(){function t(){this.type=l$.Header}return t}();var g$=function(){function t(t,n){this.diff=t,this.originalLineNumber=n,this.type=l$.Deleted,this.modifiedLineNumber=void 0}return t}();var p$=function(){function t(t,n){this.diff=t,this.modifiedLineNumber=n,this.type=l$.Added,this.originalLineNumber=void 0}return t}();var w$=function(){function t(t,n){this.originalLineNumber=t,this.modifiedLineNumber=n,this.type=l$.Unchanged}return t}();var m$=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._element=n,u._model=i,u._width=r,u._height=e,u._models=o,u._languageService=s,u.domNode=u._element,u.domNode.className="monaco-component diff-review monaco-editor-background";var a=document.createElement("div");a.className="diff-review-actions",u._actionBar=u._register(new qW(a)),u._register(lP((function(t){u._actionBar.clear(),u._model.canClose.read(t)&&u._actionBar.push(new tc("diffreview.close",ht(0,"Close"),"close-diff-review "+uc.asClassName(a$),!0,(function(){return __awaiter(u,void 0,void 0,(function(){return __generator(this,(function(t){return[2,i.close()]}))}))})),{label:!1,icon:!0})}))),u._content=document.createElement("div"),u._content.className="diff-review-content",u._content.setAttribute("role","code"),u._scrollbar=u._register(new yk(u._content,{})),gh(u.domNode,u._scrollbar.getDomNode(),a),u._register(lP((function(t){u._height.read(t),u._width.read(t),u._scrollbar.scanDomNode()}))),u._register(ai((function(){gh(u.domNode)}))),u._register(YG(u.domNode,{width:u._width,height:u._height})),u._register(YG(u._content,{width:u._width,height:u._height})),u._register(gP((function(t,n){u._model.currentGroup.read(t),u._render(n)}))),u._register(ya(u.domNode,"keydown",(function(t){(t.equals(18)||t.equals(2066)||t.equals(530))&&(t.preventDefault(),u._model.goToNextLine()),(t.equals(16)||t.equals(2064)||t.equals(528))&&(t.preventDefault(),u._model.goToPreviousLine()),(t.equals(9)||t.equals(2057)||t.equals(521)||t.equals(1033))&&(t.preventDefault(),u._model.close()),(t.equals(10)||t.equals(3))&&(t.preventDefault(),u._model.revealCurrentElementInEditor())})));return u}n.prototype._render=function(t){var n=this;var i=this._models.getOriginalOptions(),r=this._models.getModifiedOptions(),e=document.createElement("div");e.className="diff-review-table",e.setAttribute("role","list"),e.setAttribute("aria-label",ht(0,"Accessible Diff Viewer. Use arrow up and down to navigate.")),Ph(e,r.get(50)),gh(this._content,e);var o=this._models.getOriginalModel(),s=this._models.getModifiedModel();if(!o||!s)return;var u=o.getOptions(),a=s.getOptions(),h=r.get(67),c=this._model.currentGroup.get();var f=function(f){if(!c)return"break";var v;if(f.type===l$.Header){var d=document.createElement("div");d.className="diff-review-row",d.setAttribute("role","listitem");var g=c.range,p=l._model.currentGroupIndex.get(),w=l._model.groups.get().length,m=function(t){return t===0?ht(0,"no lines changed"):t===1?ht(0,"1 line changed"):ht(0,"{0} lines changed",t)},b=m(g.original.length),y=m(g.modified.length);d.setAttribute("aria-label",ht(0,"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",p+1,w,g.original.startLineNumber,b,g.modified.startLineNumber,y));var _=document.createElement("div");_.className="diff-review-cell diff-review-summary",_.appendChild(document.createTextNode("".concat(p+1,"/").concat(w,": @@ -").concat(g.original.startLineNumber,",").concat(g.original.length," +").concat(g.modified.startLineNumber,",").concat(g.modified.length," @@"))),d.appendChild(_),v=d}else v=l._createRow(f,h,l._width.get(),i,o,u,r,s,a);e.appendChild(v);var k=uP((function(t){return n._model.currentElement.read(t)===f}));t.add(lP((function(t){var n=k.read(t);v.tabIndex=n?0:-1,n&&v.focus()}))),t.add(ma(v,"focus",(function(){n._model.goToLine(f)})))};var l=this;for(var v=0,d=(c==null?void 0:c.lines)||[];v<d.length;v++){var g=d[v];var p=f(g);if(p==="break")break}this._scrollbar.scanDomNode()};n.prototype._createRow=function(t,n,i,r,e,o,s,u,a){var h=r.get(145),c=h.glyphMarginWidth+h.lineNumbersWidth,f=s.get(145),l=10+f.glyphMarginWidth+f.lineNumbersWidth;var v="diff-review-row",d="",g=null;switch(t.type){case l$.Added:v="diff-review-row line-insert",d=" char-insert",g=s$;break;case l$.Deleted:v="diff-review-row line-delete",d=" char-delete",g=u$}var p=document.createElement("div");p.style.minWidth=i+"px",p.className=v,p.setAttribute("role","listitem"),p.ariaLevel="";var w=document.createElement("div");w.className="diff-review-cell",w.style.height="".concat(n,"px"),p.appendChild(w);var m=document.createElement("span");m.style.width=c+"px",m.style.minWidth=c+"px",m.className="diff-review-line-number"+d,t.originalLineNumber!==void 0?m.appendChild(document.createTextNode(String(t.originalLineNumber))):m.innerText=" ",w.appendChild(m);var b=document.createElement("span");b.style.width=l+"px",b.style.minWidth=l+"px",b.style.paddingRight="10px",b.className="diff-review-line-number"+d,t.modifiedLineNumber!==void 0?b.appendChild(document.createTextNode(String(t.modifiedLineNumber))):b.innerText=" ",w.appendChild(b);var y=document.createElement("span");if(y.className="diff-review-spacer",g){var _=document.createElement("span");_.className=uc.asClassName(g),_.innerText="  ",y.appendChild(_)}else y.innerText="  ";var k;if(w.appendChild(y),t.modifiedLineNumber!==void 0){var _=this._getLineHtml(u,s,a.tabSize,t.modifiedLineNumber,this._languageService.languageIdCodec);h$._ttPolicy&&(_=h$._ttPolicy.createHTML(_)),w.insertAdjacentHTML("beforeend",_),k=u.getLineContent(t.modifiedLineNumber)}else{var _=this._getLineHtml(e,r,o.tabSize,t.originalLineNumber,this._languageService.languageIdCodec);h$._ttPolicy&&(_=h$._ttPolicy.createHTML(_)),w.insertAdjacentHTML("beforeend",_),k=e.getLineContent(t.originalLineNumber)}k.length===0&&(k=ht(0,"blank"));var x="";switch(t.type){case l$.Unchanged:x=t.originalLineNumber===t.modifiedLineNumber?ht(0,"{0} unchanged line {1}",k,t.originalLineNumber):ht(0,"{0} original line {1} modified line {2}",k,t.originalLineNumber,t.modifiedLineNumber);break;case l$.Added:x=ht(0,"+ {0} modified line {1}",k,t.modifiedLineNumber);break;case l$.Deleted:x=ht(0,"- {0} original line {1}",k,t.originalLineNumber)}return p.setAttribute("aria-label",x),p};n.prototype._getLineHtml=function(t,n,i,r,e){var o=t.getLineContent(r),s=n.get(50),u=mp.createEmpty(o,e),a=Pp.isBasicASCII(o,t.mightContainNonBasicASCII()),h=Pp.containsRTL(o,a,t.mightContainRTL());return Lp(new Dp(s.isMonospace&&!n.get(33),s.canUseHalfwidthRightwardsArrow,o,!1,a,h,0,u,[],i,0,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,n.get(117),n.get(99),n.get(94),n.get(51)!==An.OFF,null)).html};return n}(ci);m$=e$([o$(5,Zl)],m$);var b$=function(){function t(t){this.editors=t}t.prototype.getOriginalModel=function(){return this.editors.original.getModel()};t.prototype.getOriginalOptions=function(){return this.editors.original.getOptions()};t.prototype.originalReveal=function(t){this.editors.original.revealRange(t),this.editors.original.setSelection(t),this.editors.original.focus()};t.prototype.getModifiedModel=function(){return this.editors.modified.getModel()};t.prototype.getModifiedOptions=function(){return this.editors.modified.getOptions()};t.prototype.modifiedReveal=function(t){t&&(this.editors.modified.revealRange(t),this.editors.modified.setSelection(t)),this.editors.modified.focus()};t.prototype.modifiedSetSelection=function(t){this.editors.modified.setSelection(t)};t.prototype.modifiedFocus=function(){this.editors.modified.focus()};t.prototype.getModifiedPosition=function(){var t;return(t=this.editors.modified.getPosition())!==null&&t!==void 0?t:void 0};return t}();var y$=function(t){__extends(n,t);function n(i,r,e,o,s){var u=this;u=t.call(this)||this,u._rootElement=i,u._diffModel=r,u._originalEditorLayoutInfo=e,u._modifiedEditorLayoutInfo=o,u._editors=s,u._originalScrollTop=bP(u._editors.original.onDidScrollChange,(function(){return u._editors.original.getScrollTop()})),u._modifiedScrollTop=bP(u._editors.modified.onDidScrollChange,(function(){return u._editors.modified.getScrollTop()})),u._viewZonesChanged=_P("onDidChangeViewZones",u._editors.modified.onDidChangeViewZones),u.width=iP(u,0),u._modifiedViewZonesChangedSignal=_P("modified.onDidChangeViewZones",u._editors.modified.onDidChangeViewZones),u._originalViewZonesChangedSignal=_P("original.onDidChangeViewZones",u._editors.original.onDidChangeViewZones),u._state=hP(u,(function(t,i){var r;u._element.replaceChildren();var e=u._diffModel.read(t),o=(r=e==null?void 0:e.diff.read(t))===null||r===void 0?void 0:r.movedTexts;if(!o||o.length===0)return void u.width.set(0,void 0);u._viewZonesChanged.read(t);var s=u._originalEditorLayoutInfo.read(t),a=u._modifiedEditorLayoutInfo.read(t);if(!s||!a)return void u.width.set(0,void 0);u._modifiedViewZonesChangedSignal.read(t),u._originalViewZonesChangedSignal.read(t);var h=o.map((function(n){function i(t,n){return(n.getTopForLineNumber(t.startLineNumber,!0)+n.getTopForLineNumber(t.endLineNumberExclusive,!0))/2}var r=i(n.lineRangeMapping.original,u._editors.original),e=u._originalScrollTop.read(t),o=i(n.lineRangeMapping.modified,u._editors.modified),s=r-e,a=o-u._modifiedScrollTop.read(t),h=Math.min(r,o),c=Math.max(r,o);return{range:new jd(h,c),from:s,to:a,fromWithoutScroll:r,toWithoutScroll:o,move:n}}));h.sort(function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return function(n,i){for(var r=0,e=t;r<e.length;r++){var o=e[r];var s=o(n,i);if(!j.isNeitherLessOrGreaterThan(s))return s}return j.neitherLessOrGreaterThan}}(R((function(t){return t.fromWithoutScroll>t.toWithoutScroll}),I),R((function(t){return t.fromWithoutScroll>t.toWithoutScroll?t.fromWithoutScroll:-t.toWithoutScroll}),T)));var c=_$.compute(h.map((function(t){return t.range}))),f=s.verticalScrollbarWidth,l=10*(c.getTrackCount()-1)+20,v=f+l+(a.contentLeft-n.movedCodeBlockPadding);var d=0;var g=function(t){var n=f+10+10*c.getTrack(d),r=15,o=15,s=v,h=a.glyphMarginWidth+a.lineNumbersWidth,l=18,g=document.createElementNS("http://www.w3.org/2000/svg","rect");g.classList.add("arrow-rectangle"),g.setAttribute("x",""+(s-h)),g.setAttribute("y",""+(t.to-l/2)),g.setAttribute("width","".concat(h)),g.setAttribute("height","".concat(l)),u._element.appendChild(g);var p=document.createElementNS("http://www.w3.org/2000/svg","g"),w=document.createElementNS("http://www.w3.org/2000/svg","path");w.setAttribute("d","M 0 ".concat(t.from," L ").concat(n," ").concat(t.from," L ").concat(n," ").concat(t.to," L ").concat(s-o," ").concat(t.to)),w.setAttribute("fill","none"),p.appendChild(w);var m=document.createElementNS("http://www.w3.org/2000/svg","polygon");m.classList.add("arrow"),i.add(lP((function(n){w.classList.toggle("currentMove",t.move===e.activeMovedText.read(n)),m.classList.toggle("currentMove",t.move===e.activeMovedText.read(n))}))),m.setAttribute("points","".concat(s-o,",").concat(t.to-r/2," ").concat(s,",").concat(t.to," ").concat(s-o,",").concat(t.to+r/2)),p.appendChild(m),u._element.appendChild(p),d++};for(var p=0,w=h;p<w.length;p++){var m=w[p];g(m)}u.width.set(l,void 0)})),u._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),u._element.setAttribute("class","moved-blocks-lines"),u._rootElement.appendChild(u._element),u._register(ai((function(){return u._element.remove()}))),u._register(lP((function(t){var i=u._originalEditorLayoutInfo.read(t),r=u._modifiedEditorLayoutInfo.read(t);i&&r&&(u._element.style.left=i.width-i.verticalScrollbarWidth+"px",u._element.style.height="".concat(i.height,"px"),u._element.style.width="".concat(i.verticalScrollbarWidth+i.contentLeft-n.movedCodeBlockPadding+u.width.read(t),"px"))}))),u._register(SP(u._state));var a=uP((function(t){var n=u._diffModel.read(t),i=n==null?void 0:n.diff.read(t);return i?i.movedTexts.map((function(t){return{move:t,original:new ZG(wP(t.lineRangeMapping.original.startLineNumber-1),18),modified:new ZG(wP(t.lineRangeMapping.modified.startLineNumber-1),18)}})):[]}));u._register(t$(u._editors.original,a.map((function(t){return t.map((function(t){return t.original}))})))),u._register(t$(u._editors.modified,a.map((function(t){return t.map((function(t){return t.modified}))})))),u._register(gP((function(t,n){var i=a.read(t);for(var r=0,e=i;r<e.length;r++){var o=e[r];n.add(new k$(u._editors.original,o.original,o.move,"original",u._diffModel.get())),n.add(new k$(u._editors.modified,o.modified,o.move,"modified",u._diffModel.get()))}})));var h=_P("original.onDidFocusEditorWidget",(function(t){return u._editors.original.onDidFocusEditorWidget((function(){return setTimeout((function(){return t(void 0)}),0)}))})),c=_P("modified.onDidFocusEditorWidget",(function(t){return u._editors.modified.onDidFocusEditorWidget((function(){return setTimeout((function(){return t(void 0)}),0)}))}));var f="modified";u._register(dP({createEmptyChangeSummary:function(){},handleChange:function(t,n){return t.didChange(h)&&(f="original"),t.didChange(c)&&(f="modified"),!0}},(function(t){h.read(t),c.read(t);var n=u._diffModel.read(t);if(!n)return;var i=n.diff.read(t);var r;if(i&&f==="original"){var e=u._editors.originalCursor.read(t);e&&(r=i.movedTexts.find((function(t){return t.lineRangeMapping.original.contains(e.lineNumber)})))}if(i&&f==="modified"){var o=u._editors.modifiedCursor.read(t);o&&(r=i.movedTexts.find((function(t){return t.lineRangeMapping.modified.contains(o.lineNumber)})))}r!==n.movedTextToCompare.get()&&n.movedTextToCompare.set(void 0,void 0),n.setActiveMovedText(r)})));return u}return n}(ci);y$.movedCodeBlockPadding=4;var _$=function(){function t(t,n){this._trackCount=t,this.trackPerLineIdx=n}t.compute=function(n){var i=[],r=[];var e=function(t){var n=i.findIndex((function(n){return!n.intersectsStrict(t)}));n===-1&&(i.length>=6?n=Hd(i,R((function(n){return n.intersectWithRangeLength(t)}),T)):(n=i.length,i.push(new Rd))),i[n].addRange(t),r.push(n)};for(var o=0,s=n;o<s.length;o++){var u=s[o];e(u)}return new t(i.length,r)};t.prototype.getTrack=function(t){return this.trackPerLineIdx[t]};t.prototype.getTrackCount=function(){return this._trackCount};return t}();var k$=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;var u=Fh("div.diff-hidden-lines-widget");s=t.call(this,n,i,u.root)||this,s._editor=n,s._move=r,s._kind=e,s._diffModel=o,s._nodes=Fh("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Fh("div.text-content@textContent"),Fh("div.action-bar@actionBar")]),u.root.appendChild(s._nodes.root);var a=bP(s._editor.onDidLayoutChange,(function(){return s._editor.getLayoutInfo()}));var h;s._register(YG(s._nodes.root,{paddingRight:a.map((function(t){return t.verticalScrollbarWidth}))})),h=r.changes.length>0?s._kind==="original"?ht(0,"Code moved with changes to line {0}-{1}",s._move.lineRangeMapping.modified.startLineNumber,s._move.lineRangeMapping.modified.endLineNumberExclusive-1):ht(0,"Code moved with changes from line {0}-{1}",s._move.lineRangeMapping.original.startLineNumber,s._move.lineRangeMapping.original.endLineNumberExclusive-1):s._kind==="original"?ht(0,"Code moved to line {0}-{1}",s._move.lineRangeMapping.modified.startLineNumber,s._move.lineRangeMapping.modified.endLineNumberExclusive-1):ht(0,"Code moved from line {0}-{1}",s._move.lineRangeMapping.original.startLineNumber,s._move.lineRangeMapping.original.endLineNumberExclusive-1);var c=s._register(new qW(s._nodes.actionBar,{highlightToggledItems:!0})),f=new tc("",h,"",!1);c.push(f,{icon:!1,label:!0});var l=new tc("","Compare",uc.asClassName(Hr.compareChanges),!0,(function(){s._editor.focus(),s._diffModel.movedTextToCompare.set(s._diffModel.movedTextToCompare.get()===r?void 0:s._move,void 0)}));s._register(lP((function(t){var n=s._diffModel.movedTextToCompare.read(t)===r;l.checked=n}))),c.push(l,{icon:!1,label:!0});return s}return n}(JG);Jw("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},ht(0,"The border color for text that got moved in the diff editor.")),Jw("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},ht(0,"The active border color for text that got moved in the diff editor.")),Jw("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},ht(0,"The color of the shadow around unchanged region widgets."));var x$=cq("diff-insert",Hr.add,ht(0,"Line decoration for inserts in the diff editor.")),C$=cq("diff-remove",Hr.remove,ht(0,"Line decoration for removals in the diff editor.")),S$=PM.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+uc.asClassName(x$),marginClassName:"gutter-insert"}),D$=PM.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+uc.asClassName(C$),marginClassName:"gutter-delete"}),A$=PM.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),O$=PM.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),E$=PM.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),M$=PM.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),F$=PM.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),L$=PM.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),j$=PM.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),R$=PM.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var T$=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._editors=n,o._diffModel=i,o._options=r,o._decorations=uP(o,(function(t){var n;var i=(n=o._diffModel.read(t))===null||n===void 0?void 0:n.diff.read(t);if(!i)return null;var r=o._diffModel.read(t).movedTextToCompare.read(t),e=o._options.renderIndicators.read(t),s=o._options.showEmptyDecorations.read(t),u=[],a=[];if(!r)for(var h=0,c=i.mappings;h<c.length;h++){var f=c[h];if(f.lineRangeMapping.original.isEmpty||u.push({range:f.lineRangeMapping.original.toInclusiveRange(),options:e?D$:O$}),f.lineRangeMapping.modified.isEmpty||a.push({range:f.lineRangeMapping.modified.toInclusiveRange(),options:e?S$:A$}),f.lineRangeMapping.modified.isEmpty||f.lineRangeMapping.original.isEmpty)f.lineRangeMapping.original.isEmpty||u.push({range:f.lineRangeMapping.original.toInclusiveRange(),options:j$}),f.lineRangeMapping.modified.isEmpty||a.push({range:f.lineRangeMapping.modified.toInclusiveRange(),options:M$});else for(var l=0,v=f.lineRangeMapping.innerChanges||[];l<v.length;l++){var d=v[l];f.lineRangeMapping.original.contains(d.originalRange.startLineNumber)&&u.push({range:d.originalRange,options:d.originalRange.isEmpty()&&s?R$:L$}),f.lineRangeMapping.modified.contains(d.modifiedRange.startLineNumber)&&a.push({range:d.modifiedRange,options:d.modifiedRange.isEmpty()&&s?F$:E$})}}if(r)for(var g=0,p=r.changes;g<p.length;g++){var f=p[g];var d=f.original.toInclusiveRange();d&&u.push({range:d,options:e?D$:O$});var w=f.modified.toInclusiveRange();w&&a.push({range:w,options:e?S$:A$});for(var m=0,b=f.innerChanges||[];m<b.length;m++){var y=b[m];u.push({range:y.originalRange,options:L$}),a.push({range:y.modifiedRange,options:E$})}}var _=o._diffModel.read(t).activeMovedText.read(t);for(var k=0,x=i.movedTexts;k<x.length;k++){var f=x[k];u.push({range:f.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(f===_?" currentMove":""),blockPadding:[y$.movedCodeBlockPadding,0,y$.movedCodeBlockPadding,y$.movedCodeBlockPadding]}}),a.push({range:f.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(f===_?" currentMove":""),blockPadding:[4,0,4,4]}})}return{originalDecorations:u,modifiedDecorations:a}})),o._register(VG(o._editors.original,o._decorations.map((function(t){return(t==null?void 0:t.originalDecorations)||[]})))),o._register(VG(o._editors.modified,o._decorations.map((function(t){return(t==null?void 0:t.modifiedDecorations)||[]}))));return o}return n}(ci);var I$=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._options=n,o._domNode=i,o._dimensions=r,o._sashes=e,o._sashRatio=iP(o,void 0),o.sashLeft=uP(o,(function(t){var n;var i=(n=o._sashRatio.read(t))!==null&&n!==void 0?n:o._options.splitViewDefaultRatio.read(t);return o._computeSashLeft(i,t)})),o._sash=o._register(new ez(o._domNode,{getVerticalSashTop:function(t){return 0},getVerticalSashLeft:function(t){return o.sashLeft.get()},getVerticalSashHeight:function(t){return o._dimensions.height.get()}},{orientation:0})),o._startSashPosition=void 0,o._register(o._sash.onDidStart((function(){o._startSashPosition=o.sashLeft.get()}))),o._register(o._sash.onDidChange((function(t){var n=o._dimensions.width.get(),i=o._computeSashLeft((o._startSashPosition+(t.currentX-t.startX))/n,void 0);o._sashRatio.set(i/n,void 0)}))),o._register(o._sash.onDidEnd((function(){return o._sash.layout()}))),o._register(o._sash.onDidReset((function(){return o._sashRatio.set(void 0,void 0)}))),o._register(lP((function(t){var n=o._sashes.read(t);n&&(o._sash.orthogonalEndSash=n.bottom)}))),o._register(lP((function(t){var n=o._options.enableSplitViewResizing.read(t);o._sash.state=n?3:0,o.sashLeft.read(t),o._dimensions.height.read(t),o._sash.layout()})));return o}n.prototype._computeSashLeft=function(t,n){var i=this._dimensions.width.read(n),r=Math.floor(this._options.splitViewDefaultRatio.read(n)*i),e=this._options.enableSplitViewResizing.read(n)?Math.floor(t*i):r,o=100;return i<=200?r:e<o?o:e>i-o?i-o:e};return n}(ci);var B$,N$=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},P$=function(t,n){return function(i,r){n(i,r,t)}};var W$=Zh("diffProviderFactoryService");var H$=function(){function t(t){this.instantiationService=t}t.prototype.createDiffProvider=function(t){return this.instantiationService.createInstance(z$,t)};return t}();H$=N$([P$(0,Jh)],H$),Xl(W$,H$,1);var z$=B$=function(){function t(t,n,i){this.editorWorkerService=n,this.telemetryService=i,this.onDidChangeEventEmitter=new ki,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(t)}t.prototype.dispose=function(){var t;(t=this.diffAlgorithmOnDidChangeSubscription)===null||t===void 0||t.dispose()};t.prototype.computeDiff=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a,h,c,f;return __generator(this,(function(l){switch(l.label){case 0:if(typeof this.diffAlgorithm!="string")return[2,this.diffAlgorithm.computeDiff(t,n,i,r)];if(t.getLineCount()===1&&t.getLineMaxColumn(1)===1)return[2,n.getLineCount()===1&&n.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new Vd(new zd(1,2),new zd(1,n.getLineCount()+1),[new qd(t.getFullModelRange(),n.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]}];s=JSON.stringify([t.uri.toString(),n.uri.toString()]),u=JSON.stringify([t.id,n.id,t.getAlternativeVersionId(),n.getAlternativeVersionId(),JSON.stringify(i)]),a=B$.diffCache.get(s);if(a&&a.context===u)return[2,a.result];h=pi.create();return[4,this.editorWorkerService.computeDiff(t.uri,n.uri,i,this.diffAlgorithm)];case 1:c=l.sent(),f=h.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:f,timedOut:(e=c==null?void 0:c.quitEarly)===null||e===void 0||e,detectedMoves:i.computeMoves?(o=c==null?void 0:c.moves.length)!==null&&o!==void 0?o:0:-1}),r.isCancellationRequested)return[2,{changes:[],identical:!1,quitEarly:!0,moves:[]}];if(!c)throw new Error("no diff result available");return[2,(B$.diffCache.size>10&&B$.diffCache.delete(B$.diffCache.keys().next().value),B$.diffCache.set(s,{result:c,context:u}),c)]}}))}))};t.prototype.setOptions=function(t){var n=this;var i;var r=!1;t.diffAlgorithm&&this.diffAlgorithm!==t.diffAlgorithm&&((i=this.diffAlgorithmOnDidChangeSubscription)===null||i===void 0||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=t.diffAlgorithm,typeof t.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=t.diffAlgorithm.onDidChange((function(){return n.onDidChangeEventEmitter.fire()}))),r=!0),r&&this.onDidChangeEventEmitter.fire()};return t}();z$.diffCache=new Map,z$=B$=N$([P$(1,vH),P$(2,_f)],z$);var U$=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},K$=function(t,n){return function(i,r){n(i,r,t)}};var V$=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.model=n,e._options=i,e._diffProviderFactoryService=r,e._isDiffUpToDate=iP(e,!1),e.isDiffUpToDate=e._isDiffUpToDate,e._diff=iP(e,void 0),e.diff=e._diff,e._unchangedRegions=iP(e,void 0),e.unchangedRegions=uP(e,(function(t){var n,i;return e._options.hideUnchangedRegions.read(t)?(i=(n=e._unchangedRegions.read(t))===null||n===void 0?void 0:n.regions)!==null&&i!==void 0?i:[]:(YN((function(t){var n;for(var i=0,r=((n=e._unchangedRegions.get())===null||n===void 0?void 0:n.regions)||[];i<r.length;i++){var o=r[i];o.collapseAll(t)}})),[])})),e.movedTextToCompare=iP(e,void 0),e._activeMovedText=iP(e,void 0),e._hoveredMovedText=iP(e,void 0),e.activeMovedText=uP(e,(function(t){var n,i;return(i=(n=e.movedTextToCompare.read(t))!==null&&n!==void 0?n:e._hoveredMovedText.read(t))!==null&&i!==void 0?i:e._activeMovedText.read(t)})),e._cancellationTokenSource=new ji,e._diffProvider=uP(e,(function(t){var n=e._diffProviderFactoryService.createDiffProvider({diffAlgorithm:e._options.diffAlgorithm.read(t)});return{diffProvider:n,onChangeSignal:_P("onDidChange",n.onDidChange)}})),e._register(ai((function(){return e._cancellationTokenSource.cancel()})));var o=xP("contentChangedSignal"),s=e._register(new Ts((function(){return o.trigger(void 0)}),200));e._register(lP((function(t){var i=e._unchangedRegions.read(t);if(!i||i.regions.some((function(n){return n.isDragged.read(t)})))return;var r=i.originalDecorationIds.map((function(t){return n.original.getDecorationRange(t)})).map((function(t){return t?zd.fromRangeInclusive(t):void 0})),o=i.modifiedDecorationIds.map((function(t){return n.modified.getDecorationRange(t)})).map((function(t){return t?zd.fromRangeInclusive(t):void 0})),s=i.regions.map((function(n,i){return r[i]&&o[i]?new $$(r[i].startLineNumber,o[i].startLineNumber,r[i].length,n.visibleLineCountTop.read(t),n.visibleLineCountBottom.read(t)):void 0})).filter($),u=[];var a=!1;for(var h=0,c=w(s,(function(n,i){return n.getHiddenModifiedRange(t).endLineNumberExclusive===i.getHiddenModifiedRange(t).startLineNumber}));h<c.length;h++){var f=c[h];if(f.length>1){a=!0;var l=f.reduce((function(t,n){return t+n.lineCount}),0),v=new $$(f[0].originalLineNumber,f[0].modifiedLineNumber,l,f[0].visibleLineCountTop.get(),f[f.length-1].visibleLineCountBottom.get());u.push(v)}else u.push(f[0])}if(a){var d=n.original.deltaDecorations(i.originalDecorationIds,u.map((function(t){return{range:t.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}}))),g=n.modified.deltaDecorations(i.modifiedDecorationIds,u.map((function(t){return{range:t.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}})));YN((function(t){e._unchangedRegions.set({regions:u,originalDecorationIds:d,modifiedDecorationIds:g},t)}))}})));var u=function(t,i,r){var o=$$.fromDiffs(t.changes,n.original.getLineCount(),n.modified.getLineCount(),e._options.hideUnchangedRegionsMinimumLineCount.read(r),e._options.hideUnchangedRegionsContextLineCount.read(r));var s;var u=e._unchangedRegions.get();if(u){var a=u.originalDecorationIds.map((function(t){return n.original.getDecorationRange(t)})).map((function(t){return t?zd.fromRangeInclusive(t):void 0})),h=u.modifiedDecorationIds.map((function(t){return n.modified.getDecorationRange(t)})).map((function(t){return t?zd.fromRangeInclusive(t):void 0}));var c=function(t,n){var i;return t.filter((function(t){var r=n(t,i);return i=t,r}))}(u.regions.map((function(t,n){if(!a[n]||!h[n])return;var i=a[n].length;return new $$(a[n].startLineNumber,h[n].startLineNumber,i,Math.min(t.visibleLineCountTop.get(),i),Math.min(t.visibleLineCountBottom.get(),i-t.visibleLineCountTop.get()))})).filter($),(function(t,n){return!n||t.modifiedLineNumber>=n.modifiedLineNumber+n.lineCount&&t.originalLineNumber>=n.originalLineNumber+n.lineCount})).map((function(t){return new Kd(t.getHiddenOriginalRange(r),t.getHiddenModifiedRange(r))}));c=Kd.clip(c,zd.ofLength(1,n.original.getLineCount()),zd.ofLength(1,n.modified.getLineCount())),s=Kd.inverse(c,n.original.getLineCount(),n.modified.getLineCount())}var f=[];if(s){var l=function(t){var n=s.filter((function(n){return n.original.intersectsStrict(t.originalUnchangedRange)&&n.modified.intersectsStrict(t.modifiedUnchangedRange)}));f.push.apply(f,t.setVisibleRanges(n,i))};for(var h=0,v=o;h<v.length;h++){var d=v[h];l(d)}}else f.push.apply(f,o);var g=n.original.deltaDecorations((u==null?void 0:u.originalDecorationIds)||[],f.map((function(t){return{range:t.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}}))),p=n.modified.deltaDecorations((u==null?void 0:u.modifiedDecorationIds)||[],f.map((function(t){return{range:t.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}})));e._unchangedRegions.set({regions:f,originalDecorationIds:g,modifiedDecorationIds:p},i)};e._register(n.modified.onDidChangeContent((function(t){if(e._diff.get()){LA.fromModelContentChanges(t.changes)}e._isDiffUpToDate.set(!1,void 0),s.schedule()}))),e._register(n.original.onDidChangeContent((function(t){if(e._diff.get()){LA.fromModelContentChanges(t.changes)}e._isDiffUpToDate.set(!1,void 0),s.schedule()}))),e._register(gP((function(t,i){return __awaiter(e,void 0,void 0,(function(){var r,e,a,h,c,f,l,v,d;var g=this;return __generator(this,(function(p){switch(p.label){case 0:this._options.hideUnchangedRegionsMinimumLineCount.read(t),this._options.hideUnchangedRegionsContextLineCount.read(t),s.cancel(),o.read(t);a=this._diffProvider.read(t);a.onChangeSignal.read(t),XG(Og,t),XG(xg,t),this._isDiffUpToDate.set(!1,void 0);h=[];i.add(n.original.onDidChangeContent((function(t){var n=LA.fromModelContentChanges(t.changes);h=fO(h,n)})));c=[];i.add(n.modified.onDidChangeContent((function(t){var n=LA.fromModelContentChanges(t.changes);c=fO(c,n)})));return[4,a.diffProvider.computeDiff(n.original,n.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(t),maxComputationTimeMs:this._options.maxComputationTimeMs.read(t),computeMoves:this._options.showMoves.read(t)},this._cancellationTokenSource.token)];case 1:f=p.sent();this._cancellationTokenSource.token.isCancellationRequested||(l=f,v=n.original,d=n.modified,f={changes:l.changes.map((function(t){return new Vd(t.original,t.modified,t.innerChanges?t.innerChanges.map((function(t){return function(t,n,i){var r=t.originalRange,e=t.modifiedRange;return(r.endColumn!==1||e.endColumn!==1)&&r.endColumn===n.getLineMaxColumn(r.endLineNumber)&&e.endColumn===i.getLineMaxColumn(e.endLineNumber)&&r.endLineNumber<n.getLineCount()&&e.endLineNumber<i.getLineCount()&&(r=r.setEndPosition(r.endLineNumber+1,1),e=e.setEndPosition(e.endLineNumber+1,1)),new qd(r,e)}(t,v,d)})):void 0)})),moves:l.moves,identical:l.identical,quitEarly:l.quitEarly},f=(r=void 0)!==null&&r!==void 0?r:f,f=(e=void 0)!==null&&e!==void 0?e:f,YN((function(t){u(f,t),g._lastDiff=f;var n=q$.fromDiffResult(f);g._diff.set(n,t),g._isDiffUpToDate.set(!0,t);var i=g.movedTextToCompare.get();g.movedTextToCompare.set(i?g._lastDiff.moves.find((function(t){return t.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified)})):void 0,t)})));return[2]}}))}))})));return e}n.prototype.setActiveMovedText=function(t){this._activeMovedText.set(t,void 0)};n.prototype.ensureModifiedLineIsVisible=function(t,n,i){var r,e;if(((r=this.diff.get())===null||r===void 0?void 0:r.mappings.length)===0)return;var o=((e=this._unchangedRegions.get())===null||e===void 0?void 0:e.regions)||[];for(var s=0,u=o;s<u.length;s++){var a=u[s];if(a.getHiddenModifiedRange(void 0).contains(t))return void a.showModifiedLine(t,n,i)}};n.prototype.ensureOriginalLineIsVisible=function(t,n,i){var r,e;if(((r=this.diff.get())===null||r===void 0?void 0:r.mappings.length)===0)return;var o=((e=this._unchangedRegions.get())===null||e===void 0?void 0:e.regions)||[];for(var s=0,u=o;s<u.length;s++){var a=u[s];if(a.getHiddenOriginalRange(void 0).contains(t))return void a.showOriginalLine(t,n,i)}};n.prototype.waitForDiff=function(){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,(t=this.isDiffUpToDate,n=function(t){return t},new Promise((function(i,r){var e=!0,o=!1;var s=t.map((function(t){return{isFinished:n(t),error:!1,state:t}})),u=lP((function(t){var n=s.read(t),a=n.isFinished,h=n.error,c=n.state;(a||h)&&(e?o=!0:u.dispose(),h?r(h===!0?c:h):i(c))}));e=!1,o&&u.dispose()})))];case 1:i.sent();return[2]}}))}))};n.prototype.serializeState=function(){var t=this._unchangedRegions.get();return{collapsedRegions:t==null?void 0:t.regions.map((function(t){return{range:t.getHiddenModifiedRange(void 0).serialize()}}))}};n.prototype.restoreSerializedState=function(t){var n;var i=(n=t.collapsedRegions)===null||n===void 0?void 0:n.map((function(t){return zd.deserialize(t.range)})),r=this._unchangedRegions.get();r&&i&&YN((function(t){for(var n=0,e=r.regions;n<e.length;n++){var o=e[n];for(var s=0,u=i;s<u.length;s++){var a=u[s];if(o.modifiedUnchangedRange.intersect(a)){o.setHiddenModifiedRange(a,t);break}}}}))};return n}(ci);V$=U$([K$(2,W$)],V$);var q$=function(){function t(t,n,i,r){this.mappings=t,this.movedTexts=n,this.identical=i,this.quitEarly=r}t.fromDiffResult=function(n){return new t(n.changes.map((function(t){return new G$(t)})),n.moves||[],n.identical,n.quitEarly)};return t}();var G$=function(){function t(t){this.lineRangeMapping=t}return t}();var $$=function(){function t(t,n,i,r,e){var o=this;this.originalLineNumber=t,this.modifiedLineNumber=n,this.lineCount=i,this._visibleLineCountTop=iP(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=iP(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=uP(this,(function(t){return o.visibleLineCountTop.read(t)+o.visibleLineCountBottom.read(t)===o.lineCount&&!o.isDragged.read(t)})),this.isDragged=iP(this,void 0);var s=Math.max(Math.min(r,this.lineCount),0),u=Math.max(Math.min(e,this.lineCount-r),0);nf(r===s),nf(e===u),this._visibleLineCountTop.set(s,void 0),this._visibleLineCountBottom.set(u,void 0)}t.fromDiffs=function(n,i,r,e,o){var s=Vd.inverse(n,i,r),u=[];for(var a=0,h=s;a<h.length;a++){var c=h[a];var f=c.original.startLineNumber,l=c.modified.startLineNumber,v=c.original.length;var d=f===1&&l===1,g=f+v===i+1&&l+v===r+1;(d||g)&&v>=o+e?(d&&!g&&(v-=o),g&&!d&&(f+=o,l+=o,v-=o),u.push(new t(f,l,v,0,0))):v>=2*o+e&&(f+=o,l+=o,v-=2*o,u.push(new t(f,l,v,0,0)))}return u};Object.defineProperty(t.prototype,"originalUnchangedRange",{get:function(){return zd.ofLength(this.originalLineNumber,this.lineCount)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"modifiedUnchangedRange",{get:function(){return zd.ofLength(this.modifiedLineNumber,this.lineCount)},enumerable:false,configurable:true});t.prototype.setVisibleRanges=function(n,i){var r=[],e=new Ud(n.map((function(t){return t.modified}))).subtractFrom(this.modifiedUnchangedRange);var o=this.originalLineNumber,s=this.modifiedLineNumber;var u=this.modifiedLineNumber+this.lineCount;if(e.ranges.length===0)this.showAll(i),r.push(this);else{var a=0;for(var h=0,c=e.ranges;h<c.length;h++){var f=c[h];var l=a===e.ranges.length-1;a++;var v=(l?u:f.endLineNumberExclusive)-s,d=new t(o,s,v,0,0);d.setHiddenModifiedRange(f,i),r.push(d),o=d.originalUnchangedRange.endLineNumberExclusive,s=d.modifiedUnchangedRange.endLineNumberExclusive}}return r};t.prototype.shouldHideControls=function(t){return this._shouldHideControls.read(t)};t.prototype.getHiddenOriginalRange=function(t){return zd.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(t),this.lineCount-this._visibleLineCountTop.read(t)-this._visibleLineCountBottom.read(t))};t.prototype.getHiddenModifiedRange=function(t){return zd.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(t),this.lineCount-this._visibleLineCountTop.read(t)-this._visibleLineCountBottom.read(t))};t.prototype.setHiddenModifiedRange=function(t,n){var i=t.startLineNumber-this.modifiedLineNumber,r=this.modifiedLineNumber+this.lineCount-t.endLineNumberExclusive;this.setState(i,r,n)};t.prototype.getMaxVisibleLineCountTop=function(){return this.lineCount-this._visibleLineCountBottom.get()};t.prototype.getMaxVisibleLineCountBottom=function(){return this.lineCount-this._visibleLineCountTop.get()};t.prototype.showMoreAbove=function(t,n){if(t===void 0){t=10}var i=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+t,i),n)};t.prototype.showMoreBelow=function(t,n){if(t===void 0){t=10}var i=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+t,i),n)};t.prototype.showAll=function(t){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),t)};t.prototype.showModifiedLine=function(t,n,i){var r=t+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),e=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-t;n===0&&r<e||n===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+r,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+e,i)};t.prototype.showOriginalLine=function(t,n,i){var r=t-this.originalLineNumber,e=this.originalLineNumber+this.lineCount-t;n===0&&r<e||n===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e-r,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+r-e,this.getMaxVisibleLineCountBottom()),i)};t.prototype.collapseAll=function(t){this._visibleLineCountTop.set(0,t),this._visibleLineCountBottom.set(0,t)};t.prototype.setState=function(t,n,i){t=Math.max(Math.min(t,this.lineCount),0),n=Math.max(Math.min(n,this.lineCount-t),0),this._visibleLineCountTop.set(t,i),this._visibleLineCountBottom.set(n,i)};return t}();var J$=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;c=t.call(this)||this,c._getViewZoneId=n,c._marginDomNode=i,c._modifiedEditor=r,c._diff=e,c._editor=o,c._viewLineCounts=s,c._originalTextModel=u,c._contextMenuService=a,c._clipboardService=h,c._visibility=!1,c._marginDomNode.style.zIndex="10",c._diffActions=document.createElement("div"),c._diffActions.className=uc.asClassName(Hr.lightBulb)+" lightbulb-glyph",c._diffActions.style.position="absolute";var f=c._modifiedEditor.getOption(67);c._diffActions.style.right="0px",c._diffActions.style.visibility="hidden",c._diffActions.style.height="".concat(f,"px"),c._diffActions.style.lineHeight="".concat(f,"px"),c._marginDomNode.appendChild(c._diffActions);var l=0;var v=r.getOption(127)&&!It,d=function(t,n){var i;c._contextMenuService.showContextMenu({domForShadowRoot:v&&(i=r.getDomNode())!==null&&i!==void 0?i:void 0,getAnchor:function(){return{x:t,y:n}},getActions:function(){var t=[],n=e.modified.isEmpty;return t.push(new tc("diff.clipboard.copyDeletedContent",n?e.original.length>1?ht(0,"Copy deleted lines"):ht(0,"Copy deleted line"):e.original.length>1?ht(0,"Copy changed lines"):ht(0,"Copy changed line"),void 0,!0,(function(){return __awaiter(c,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t=this._originalTextModel.getValueInRange(e.original.toExclusiveRange());return[4,this._clipboardService.writeText(t)];case 1:n.sent();return[2]}}))}))}))),e.original.length>1&&t.push(new tc("diff.clipboard.copyDeletedLineContent",ht(0,n?"Copy deleted line ({0})":"Copy changed line ({0})",e.original.startLineNumber+l),void 0,!0,(function(){return __awaiter(c,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t=this._originalTextModel.getLineContent(e.original.startLineNumber+l);t===""&&(t=this._originalTextModel.getEndOfLineSequence()===0?"\n":"\r\n");return[4,this._clipboardService.writeText(t)];case 1:n.sent();return[2]}}))}))}))),r.getOption(91)||t.push(new tc("diff.inline.revertChange",ht(0,"Revert this change"),void 0,!0,(function(){return __awaiter(c,void 0,void 0,(function(){return __generator(this,(function(t){this._editor.revert(this._diff);return[2]}))}))}))),t},autoSelectFirstItem:!0})};c._register(ya(c._diffActions,"mousedown",(function(t){if(!t.leftButton)return;var n=ja(c._diffActions),i=n.top,r=n.height,e=Math.floor(f/3);t.preventDefault(),d(t.posx,i+r+e)}))),c._register(r.onMouseMove((function(t){t.target.type!==8&&t.target.type!==5||t.target.detail.viewZoneId!==c._getViewZoneId()?c.visibility=!1:(l=c._updateLightBulbPosition(c._marginDomNode,t.event.browserEvent.y,f),c.visibility=!0)}))),c._register(r.onMouseDown((function(t){t.event.leftButton&&(t.target.type===8||t.target.type===5)&&t.target.detail.viewZoneId===c._getViewZoneId()&&(t.event.preventDefault(),l=c._updateLightBulbPosition(c._marginDomNode,t.event.browserEvent.y,f),d(t.event.posx,t.event.posy+f))})));return c}Object.defineProperty(n.prototype,"visibility",{get:function(){return this._visibility},set:function(t){this._visibility!==t&&(this._visibility=t,this._diffActions.style.visibility=t?"visible":"hidden")},enumerable:false,configurable:true});n.prototype._updateLightBulbPosition=function(t,n,i){var r=ja(t).top,e=n-r,o=Math.floor(e/i),s=o*i;if(this._diffActions.style.top="".concat(s,"px"),this._viewLineCounts){var u=0;for(var a=0;a<this._viewLineCounts.length;a++)if(u+=this._viewLineCounts[a],o<u)return a}return o};return n}(ci);var Z$=rl("diffEditorWidget",{createHTML:function(t){return t}});function Q$(t,n,i,r){Ph(r,n.fontInfo);var e=i.length>0,o=new Ml(1e4);var s=0,u=0;var a=[];for(var h=0;h<t.lineTokens.length;h++){var c=h+1,f=t.lineTokens[h],l=t.lineBreakData[h],v=yp.filter(i,c,1,Number.MAX_SAFE_INTEGER);if(l){var d=0;for(var g=0,p=l.breakOffsets;g<p.length;g++){var w=p[g];var m=f.sliceAndInflate(d,w,0);s=Math.max(s,tJ(u,m,yp.extractWrapped(v,d,w),e,t.mightContainNonBasicASCII,t.mightContainRTL,n,o)),u++,d=w}a.push(l.breakOffsets.length)}else a.push(1),s=Math.max(s,tJ(u,f,v,e,t.mightContainNonBasicASCII,t.mightContainRTL,n,o)),u++}s+=n.scrollBeyondLastColumn;var b=o.build(),y=Z$?Z$.createHTML(b):b;return r.innerHTML=y,{heightInLines:u,minWidthInPx:s*n.typicalHalfwidthCharacterWidth,viewLineCounts:a}}var Y$=function(){function t(t,n,i,r){this.lineTokens=t,this.lineBreakData=n,this.mightContainNonBasicASCII=i,this.mightContainRTL=r}return t}();var X$=function(){function t(t,n,i,r,e,o,s,u,a,h,c){this.tabSize=t,this.fontInfo=n,this.disableMonospaceOptimizations=i,this.typicalHalfwidthCharacterWidth=r,this.scrollBeyondLastColumn=e,this.lineHeight=o,this.lineDecorationsWidth=s,this.stopRenderingLineAfter=u,this.renderWhitespace=a,this.renderControlCharacters=h,this.fontLigatures=c}t.fromEditor=function(n){var i;var r=n.getOptions(),e=r.get(50),o=r.get(145);return new t(((i=n.getModel())===null||i===void 0?void 0:i.getOptions().tabSize)||0,e,r.get(33),e.typicalHalfwidthCharacterWidth,r.get(104),r.get(67),o.decorationsWidth,r.get(117),r.get(99),r.get(94),r.get(51))};return t}();function tJ(t,n,i,r,e,o,s,u){u.appendString('<div class="view-line'),r||u.appendString(" char-delete"),u.appendString('" style="top:'),u.appendString(String(t*s.lineHeight)),u.appendString('px;width:1000000px;">');var a=n.getLineContent(),h=Pp.isBasicASCII(a,e),c=Pp.containsRTL(a,h,o),f=Mp(new Dp(s.fontInfo.isMonospace&&!s.disableMonospaceOptimizations,s.fontInfo.canUseHalfwidthRightwardsArrow,a,!1,h,c,0,n,i,s.tabSize,0,s.fontInfo.spaceWidth,s.fontInfo.middotWidth,s.fontInfo.wsmiddotWidth,s.stopRenderingLineAfter,s.renderWhitespace,s.renderControlCharacters,s.fontLigatures!==An.OFF,null),u);return u.appendString("</div>"),f.characterMapping.getHorizontalOffset(f.characterMapping.length)}var nJ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},iJ=function(t,n){return function(i,r){n(i,r,t)}};var rJ=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c){var f=this;f=t.call(this)||this,f._targetWindow=n,f._editors=i,f._diffModel=r,f._options=e,f._diffEditorWidget=o,f._canIgnoreViewZoneUpdateEvent=s,f._origViewZonesToIgnore=u,f._modViewZonesToIgnore=a,f._clipboardService=h,f._contextMenuService=c,f._originalTopPadding=iP(f,0),f._originalScrollOffset=iP(f,0),f._originalScrollOffsetAnimated=$G(f._targetWindow,f._originalScrollOffset,f._store),f._modifiedTopPadding=iP(f,0),f._modifiedScrollOffset=iP(f,0),f._modifiedScrollOffsetAnimated=$G(f._targetWindow,f._modifiedScrollOffset,f._store);var l=iP("invalidateAlignmentsState",0),v=f._register(new Ts((function(){l.set(l.get()+1,void 0)}),0));f._register(f._editors.original.onDidChangeViewZones((function(t){f._canIgnoreViewZoneUpdateEvent()||v.schedule()}))),f._register(f._editors.modified.onDidChangeViewZones((function(t){f._canIgnoreViewZoneUpdateEvent()||v.schedule()}))),f._register(f._editors.original.onDidChangeConfiguration((function(t){(t.hasChanged(146)||t.hasChanged(67))&&v.schedule()}))),f._register(f._editors.modified.onDidChangeConfiguration((function(t){(t.hasChanged(146)||t.hasChanged(67))&&v.schedule()})));var d=f._diffModel.map((function(t){return t?bP(t.model.original.onDidChangeTokens,(function(){return t.model.original.tokenization.backgroundTokenizationState===2})):void 0})).map((function(t,n){return t==null?void 0:t.read(n)})),g=uP((function(t){var n=f._diffModel.read(t),i=n==null?void 0:n.diff.read(t);if(!n||!i)return null;l.read(t);var r=f._options.renderSideBySide.read(t);return eJ(f._editors.original,f._editors.modified,i.mappings,f._origViewZonesToIgnore,f._modViewZonesToIgnore,r)})),p=uP((function(t){var n;var i=(n=f._diffModel.read(t))===null||n===void 0?void 0:n.movedTextToCompare.read(t);if(!i)return null;l.read(t);var r=i.changes.map((function(t){return new G$(t)}));return eJ(f._editors.original,f._editors.modified,r,f._origViewZonesToIgnore,f._modViewZonesToIgnore,!0)}));function w(){var t=document.createElement("div");return t.className="diagonal-fill",t}var m=f._register(new hi);f.viewZones=hP(f,(function(t,n){var i,r,e,s,u,a,h,c;m.clear();var l=g.read(t)||[],v=[],b=[],y=f._modifiedTopPadding.read(t);y>0&&b.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:y,showInHiddenAreas:!0,suppressMouseDown:!0});var _=f._originalTopPadding.read(t);_>0&&v.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:_,showInHiddenAreas:!0,suppressMouseDown:!0});var k=f._options.renderSideBySide.read(t),x=k||(i=f._editors.modified._getViewModel())===null||i===void 0?void 0:i.createLineBreaksComputer();if(x){var C=f._editors.original.getModel();for(var S=0,D=l;S<D.length;S++){var A=D[S];if(A.diff)for(var O=A.originalRange.startLineNumber;O<A.originalRange.endLineNumberExclusive;O++){if(O>C.getLineCount())return{orig:v,mod:b};x==null||x.addRequest(C.getLineContent(O),null,null)}}}var E=(r=x==null?void 0:x.finalize())!==null&&r!==void 0?r:[];var M=0;var F=f._editors.modified.getOption(67),L=(e=f._diffModel.read(t))===null||e===void 0?void 0:e.movedTextToCompare.read(t),j=(u=(s=f._editors.original.getModel())===null||s===void 0?void 0:s.mightContainNonBasicASCII())!==null&&u!==void 0&&u,R=(h=(a=f._editors.original.getModel())===null||a===void 0?void 0:a.mightContainRTL())!==null&&h!==void 0&&h,T=X$.fromEditor(f._editors.modified);var I=function(i){if(i.diff&&!k){if(!i.originalRange.isEmpty){d.read(t);var r=document.createElement("div");r.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");var e=f._editors.original.getModel();if(i.originalRange.endLineNumberExclusive-1>e.getLineCount())return{value:{orig:v,mod:b}};var s=new Y$(i.originalRange.mapToLineArray((function(t){return e.tokenization.getLineTokens(t)})),i.originalRange.mapToLineArray((function(t){return E[M++]})),j,R),u=[];for(var a=0,h=i.diff.innerChanges||[];a<h.length;a++){var c=h[a];u.push(new Wp(c.originalRange.delta(-(i.diff.original.startLineNumber-1)),L$.className,0))}var l=Q$(s,T,u,r),g=document.createElement("div");if(g.className="inline-deleted-margin-view-zone",Ph(g,T.fontInfo),f._options.renderIndicators.read(t))for(var c=0;c<l.heightInLines;c++){var p=document.createElement("div");p.className="delete-sign ".concat(uc.asClassName(C$)),p.setAttribute("style","position:absolute;top:".concat(c*F,"px;width:").concat(T.lineDecorationsWidth,"px;height:").concat(F,"px;right:0;")),g.appendChild(p)}var y;m.add(new J$((function(){return Q(y)}),g,f._editors.modified,i.diff,f._diffEditorWidget,l.viewLineCounts,f._editors.original.getModel(),f._contextMenuService,f._clipboardService));for(var c=0;c<l.viewLineCounts.length;c++){var p=l.viewLineCounts[c];p>1&&v.push({afterLineNumber:i.originalRange.startLineNumber+c,domNode:w(),heightInPx:(p-1)*F,showInHiddenAreas:!0,suppressMouseDown:!0})}b.push({afterLineNumber:i.modifiedRange.startLineNumber-1,domNode:r,heightInPx:l.heightInLines*F,minWidthInPx:l.minWidthInPx,marginDomNode:g,setZoneId:function(t){y=t},showInHiddenAreas:!0,suppressMouseDown:!0})}var _=document.createElement("div");_.className="gutter-delete",v.push({afterLineNumber:i.originalRange.endLineNumberExclusive-1,domNode:w(),heightInPx:i.modifiedHeightInPx,marginDomNode:_,showInHiddenAreas:!0,suppressMouseDown:!0})}else{var _=i.modifiedHeightInPx-i.originalHeightInPx;if(_>0){if(L!=null&&L.lineRangeMapping.original.delta(-1).deltaLength(2).contains(i.originalRange.endLineNumberExclusive-1))return"continue";v.push({afterLineNumber:i.originalRange.endLineNumberExclusive-1,domNode:w(),heightInPx:_,showInHiddenAreas:!0,suppressMouseDown:!0})}else{var r=function(){var t=document.createElement("div");return t.className="arrow-revert-change "+uc.asClassName(Hr.arrowRight),n.add(ma(t,"mousedown",(function(t){return t.stopPropagation()}))),n.add(ma(t,"click",(function(t){t.stopPropagation(),o.revert(i.diff)}))),bh("div",{},t)};if(L!=null&&L.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(i.modifiedRange.endLineNumberExclusive-1))return"continue";var x=void 0;i.diff&&i.diff.modified.isEmpty&&f._options.shouldRenderOldRevertArrows.read(t)&&(x=r()),b.push({afterLineNumber:i.modifiedRange.endLineNumberExclusive-1,domNode:w(),heightInPx:-_,marginDomNode:x,showInHiddenAreas:!0,suppressMouseDown:!0})}}};for(var B=0,N=l;B<N.length;B++){var C=N[B];var P=I(C);if(typeof P==="object")return P.value}for(var W=0,H=(c=p.read(t))!==null&&c!==void 0?c:[];W<H.length;W++){var C=H[W];if(!(L!=null&&L.lineRangeMapping.original.intersect(C.originalRange))||!(L!=null&&L.lineRangeMapping.modified.intersect(C.modifiedRange)))continue;var A=C.modifiedHeightInPx-C.originalHeightInPx;A>0?v.push({afterLineNumber:C.originalRange.endLineNumberExclusive-1,domNode:w(),heightInPx:A,showInHiddenAreas:!0,suppressMouseDown:!0}):b.push({afterLineNumber:C.modifiedRange.endLineNumberExclusive-1,domNode:w(),heightInPx:-A,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:v,mod:b}}));var b=!1;f._register(f._editors.original.onDidScrollChange((function(t){t.scrollLeftChanged&&!b&&(b=!0,f._editors.modified.setScrollLeft(t.scrollLeft),b=!1)}))),f._register(f._editors.modified.onDidScrollChange((function(t){t.scrollLeftChanged&&!b&&(b=!0,f._editors.original.setScrollLeft(t.scrollLeft),b=!1)}))),f._originalScrollTop=bP(f._editors.original.onDidScrollChange,(function(){return f._editors.original.getScrollTop()})),f._modifiedScrollTop=bP(f._editors.modified.onDidScrollChange,(function(){return f._editors.modified.getScrollTop()})),f._register(lP((function(t){var n=f._originalScrollTop.read(t)-(f._originalScrollOffsetAnimated.get()-f._modifiedScrollOffsetAnimated.read(t))-(f._originalTopPadding.get()-f._modifiedTopPadding.read(t));n!==f._editors.modified.getScrollTop()&&f._editors.modified.setScrollTop(n,1)}))),f._register(lP((function(t){var n=f._modifiedScrollTop.read(t)-(f._modifiedScrollOffsetAnimated.get()-f._originalScrollOffsetAnimated.read(t))-(f._modifiedTopPadding.get()-f._originalTopPadding.read(t));n!==f._editors.original.getScrollTop()&&f._editors.original.setScrollTop(n,1)}))),f._register(lP((function(t){var n;var i=(n=f._diffModel.read(t))===null||n===void 0?void 0:n.movedTextToCompare.read(t);var r=0;if(i){var e=f._editors.original.getTopForLineNumber(i.lineRangeMapping.original.startLineNumber,!0)-f._originalTopPadding.get();r=f._editors.modified.getTopForLineNumber(i.lineRangeMapping.modified.startLineNumber,!0)-f._modifiedTopPadding.get()-e}r>0?(f._modifiedTopPadding.set(0,void 0),f._originalTopPadding.set(r,void 0)):r<0?(f._modifiedTopPadding.set(-r,void 0),f._originalTopPadding.set(0,void 0)):setTimeout((function(){f._modifiedTopPadding.set(0,void 0),f._originalTopPadding.set(0,void 0)}),400),f._editors.modified.hasTextFocus()?f._originalScrollOffset.set(f._modifiedScrollOffset.get()-r,void 0,!0):f._modifiedScrollOffset.set(f._originalScrollOffset.get()+r,void 0,!0)})));return f}return n}(ci);function eJ(t,n,i,r,e,o){var s=new N(oJ(t,r)),u=new N(oJ(n,e)),a=t.getOption(67),h=n.getOption(67),c=[];var f=0,l=0;function v(t,n){for(;;){var i=s.peek(),r=u.peek();if(i&&i.lineNumber>=t&&(i=void 0),r&&r.lineNumber>=n&&(r=void 0),!i&&!r)break;var e=i?i.lineNumber-f:Number.MAX_VALUE,o=r?r.lineNumber-l:Number.MAX_VALUE;e<o?(s.dequeue(),r={lineNumber:i.lineNumber-f+l,heightInPx:0}):e>o?(u.dequeue(),i={lineNumber:r.lineNumber-l+f,heightInPx:0}):(s.dequeue(),u.dequeue()),c.push({originalRange:zd.ofLength(i.lineNumber,1),modifiedRange:zd.ofLength(r.lineNumber,1),originalHeightInPx:a+i.heightInPx,modifiedHeightInPx:h+r.heightInPx,diff:void 0})}}var d=function(n){var i=function(t,i){var r,o,f,l;if(t<g||i<d)return;if(e)e=!1;else if(t===g||i===d)return;var v=new zd(g,t),p=new zd(d,i);if(v.isEmpty&&p.isEmpty)return;var w=(o=(r=s.takeWhile((function(n){return n.lineNumber<t})))===null||r===void 0?void 0:r.reduce((function(t,n){return t+n.heightInPx}),0))!==null&&o!==void 0?o:0,m=(l=(f=u.takeWhile((function(t){return t.lineNumber<i})))===null||f===void 0?void 0:f.reduce((function(t,n){return t+n.heightInPx}),0))!==null&&l!==void 0?l:0;c.push({originalRange:v,modifiedRange:p,originalHeightInPx:v.length*a+w,modifiedHeightInPx:p.length*h+m,diff:n.lineRangeMapping}),g=t,d=i};var r=n.lineRangeMapping;v(r.original.startLineNumber,r.modified.startLineNumber);var e=!0,d=r.modified.startLineNumber,g=r.original.startLineNumber;if(o)for(var p=0,w=r.innerChanges||[];p<w.length;p++){var m=w[p];m.originalRange.startColumn>1&&m.modifiedRange.startColumn>1&&i(m.originalRange.startLineNumber,m.modifiedRange.startLineNumber);var b=t.getModel(),y=m.originalRange.endLineNumber<=b.getLineCount()?b.getLineMaxColumn(m.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;m.originalRange.endColumn<y&&i(m.originalRange.endLineNumber,m.modifiedRange.endLineNumber)}i(r.original.endLineNumberExclusive,r.modified.endLineNumberExclusive),f=r.original.endLineNumberExclusive,l=r.modified.endLineNumberExclusive};for(var g=0,p=i;g<p.length;g++){var w=p[g];d(w)}return v(Number.MAX_VALUE,Number.MAX_VALUE),c}function oJ(t,n){var i=[],r=[],e=t.getOption(146).wrappingColumn!==-1,o=t._getViewModel().coordinatesConverter,s=t.getOption(67);if(e)for(var u=1;u<=t.getModel().getLineCount();u++){var a=o.getModelLineViewLineCount(u);a>1&&r.push({lineNumber:u,heightInPx:s*(a-1)})}for(var h=0,c=t.getWhitespaces();h<c.length;h++){var u=c[h];if(n.has(u.id))continue;var a=u.afterLineNumber===0?0:o.convertViewPositionToModelPosition(new Tr(u.afterLineNumber,1)).lineNumber;i.push({lineNumber:a,heightInPx:u.height})}return function(t,n,i,r){if(t.length===0)return n;if(n.length===0)return t;var e=[];var o=0,s=0;for(;o<t.length&&s<n.length;){var u=t[o],a=n[s],h=i(u),c=i(a);h<c?(e.push(u),o++):h>c?(e.push(a),s++):(e.push(r(u,a)),o++,s++)}for(;o<t.length;)e.push(t[o]),o++;for(;s<n.length;)e.push(n[s]),s++;return e}(i,r,(function(t){return t.lineNumber}),(function(t,n){return{lineNumber:t.lineNumber,heightInPx:t.heightInPx+n.heightInPx}}))}rJ=nJ([iJ(8,Kq),iJ(9,_R)],rJ);var sJ,uJ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},aJ=function(t,n){return function(i,r){n(i,r,t)}};var hJ=sJ=function(t){__extends(n,t);function n(i,r,e,o){var s=this;s=t.call(this)||this,s._editors=i,s._diffModel=r,s._options=e,s._instantiationService=o,s._modifiedOutlineSource=cP(s,(function(t){var i=s._editors.modifiedModel.read(t),r=n._breadcrumbsSourceFactory.read(t);return i&&r?r(i,s._instantiationService):void 0})),s._isUpdatingHiddenAreas=!1,s._register(s._editors.original.onDidChangeCursorPosition((function(t){if(t.reason===1)return;var n=s._diffModel.get();YN((function(t){for(var i=0,r=s._editors.original.getSelections()||[];i<r.length;i++){var e=r[i];n==null||n.ensureOriginalLineIsVisible(e.getStartPosition().lineNumber,0,t),n==null||n.ensureOriginalLineIsVisible(e.getEndPosition().lineNumber,0,t)}}))}))),s._register(s._editors.modified.onDidChangeCursorPosition((function(t){if(t.reason===1)return;var n=s._diffModel.get();YN((function(t){for(var i=0,r=s._editors.modified.getSelections()||[];i<r.length;i++){var e=r[i];n==null||n.ensureModifiedLineIsVisible(e.getStartPosition().lineNumber,0,t),n==null||n.ensureModifiedLineIsVisible(e.getEndPosition().lineNumber,0,t)}}))})));var u=s._diffModel.map((function(t,n){var i,r;var e=(i=t==null?void 0:t.unchangedRegions.read(n))!==null&&i!==void 0?i:[];return e.length===1&&e[0].modifiedLineNumber===1&&e[0].lineCount===((r=s._editors.modifiedModel.read(n))===null||r===void 0?void 0:r.getLineCount())?[]:e}));s.viewZones=hP(s,(function(t,n){var i=s._modifiedOutlineSource.read(t);if(!i)return{origViewZones:[],modViewZones:[]};var r=[],e=[],o=s._options.renderSideBySide.read(t),a=u.read(t);var h=function(u){if(!u.shouldHideControls(t)){{var a=uP(s,(function(t){return u.getHiddenOriginalRange(t).startLineNumber-1})),h=new ZG(a,24);r.push(h),n.add(new cJ(s._editors.original,h,u,u.originalUnchangedRange,!o,i,(function(t){return s._diffModel.get().ensureModifiedLineIsVisible(t,2,void 0)}),s._options))}{var a=uP(s,(function(t){return u.getHiddenModifiedRange(t).startLineNumber-1})),h=new ZG(a,24);e.push(h),n.add(new cJ(s._editors.modified,h,u,u.modifiedUnchangedRange,!1,i,(function(t){return s._diffModel.get().ensureModifiedLineIsVisible(t,2,void 0)}),s._options))}}};for(var c=0,f=a;c<f.length;c++){var l=f[c];h(l)}return{origViewZones:r,modViewZones:e}}));var a={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},h={description:"Fold Unchanged",glyphMarginHoverMessage:new VT(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(ht(0,"Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+uc.asClassName(Hr.fold),zIndex:10001};s._register(VG(s._editors.original,uP(s,(function(t){var n=u.read(t),i=n.map((function(t){return{range:t.originalUnchangedRange.toInclusiveRange(),options:a}}));for(var r=0,e=n;r<e.length;r++){var o=e[r];o.shouldHideControls(t)&&i.push({range:Ir.fromPositions(new Tr(o.originalLineNumber,1)),options:h})}return i})))),s._register(VG(s._editors.modified,uP(s,(function(t){var n=u.read(t),i=n.map((function(t){return{range:t.modifiedUnchangedRange.toInclusiveRange(),options:a}}));for(var r=0,e=n;r<e.length;r++){var o=e[r];o.shouldHideControls(t)&&i.push({range:zd.ofLength(o.modifiedLineNumber,1).toInclusiveRange(),options:h})}return i})))),s._register(lP((function(t){var n=u.read(t);s._isUpdatingHiddenAreas=!0;try{s._editors.original.setHiddenAreas(n.map((function(n){return n.getHiddenOriginalRange(t).toInclusiveRange()})).filter($)),s._editors.modified.setHiddenAreas(n.map((function(n){return n.getHiddenModifiedRange(t).toInclusiveRange()})).filter($))}finally{s._isUpdatingHiddenAreas=!1}}))),s._register(s._editors.modified.onMouseUp((function(t){var n;if(!t.event.rightButton&&t.target.position&&(!((n=t.target.element)===null||n===void 0)&&n.className.includes("fold-unchanged"))){var i=t.target.position.lineNumber,r=s._diffModel.get();if(!r)return;var e=r.unchangedRegions.get().find((function(t){return t.modifiedUnchangedRange.includes(i)}));if(!e)return;e.collapseAll(void 0),t.event.stopPropagation(),t.event.preventDefault()}}))),s._register(s._editors.original.onMouseUp((function(t){var n;if(!t.event.rightButton&&t.target.position&&(!((n=t.target.element)===null||n===void 0)&&n.className.includes("fold-unchanged"))){var i=t.target.position.lineNumber,r=s._diffModel.get();if(!r)return;var e=r.unchangedRegions.get().find((function(t){return t.originalUnchangedRange.includes(i)}));if(!e)return;e.collapseAll(void 0),t.event.stopPropagation(),t.event.preventDefault()}})));return s}n.setBreadcrumbsSourceFactory=function(t){this._breadcrumbsSourceFactory.set(t,void 0)};Object.defineProperty(n.prototype,"isUpdatingHiddenAreas",{get:function(){return this._isUpdatingHiddenAreas},enumerable:false,configurable:true});return n}(ci);hJ._breadcrumbsSourceFactory=iP("breadcrumbsSourceFactory",void 0),hJ=sJ=uJ([aJ(3,Jh)],hJ);var cJ=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a){var h=this;var c=Fh("div.diff-hidden-lines-widget");h=t.call(this,n,i,c.root)||this,h._editor=n,h._unchangedRegion=r,h._unchangedRegionRange=e,h._hide=o,h._modifiedOutlineSource=s,h._revealModifiedHiddenLine=u,h._options=a,h._nodes=Fh("div.diff-hidden-lines",[Fh("div.top@top",{title:ht(0,"Click or drag to show more above")}),Fh("div.center@content",{style:{display:"flex"}},[Fh("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[bh.apply(void 0,__spreadArray(["a",{title:ht(0,"Show Unchanged Region"),role:"button",onclick:function(){h._unchangedRegion.showAll(void 0)}}],RR("$(unfold)"),false))]),Fh("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Fh("div.bottom@bottom",{title:ht(0,"Click or drag to show more below"),role:"button"})]),c.root.appendChild(h._nodes.root);var f=bP(h._editor.onDidLayoutChange,(function(){return h._editor.getLayoutInfo()}));h._hide?gh(h._nodes.first):h._register(YG(h._nodes.first,{width:f.map((function(t){return t.contentLeft}))})),h._register(lP((function(t){var n=h._unchangedRegion.visibleLineCountTop.read(t)+h._unchangedRegion.visibleLineCountBottom.read(t)===h._unchangedRegion.lineCount;h._nodes.bottom.classList.toggle("canMoveTop",!n),h._nodes.bottom.classList.toggle("canMoveBottom",h._unchangedRegion.visibleLineCountBottom.read(t)>0),h._nodes.top.classList.toggle("canMoveTop",h._unchangedRegion.visibleLineCountTop.read(t)>0),h._nodes.top.classList.toggle("canMoveBottom",!n);var i=h._unchangedRegion.isDragged.read(t),r=h._editor.getDomNode();r&&(r.classList.toggle("draggingUnchangedRegion",!!i),i==="top"?(r.classList.toggle("canMoveTop",h._unchangedRegion.visibleLineCountTop.read(t)>0),r.classList.toggle("canMoveBottom",!n)):i==="bottom"?(r.classList.toggle("canMoveTop",!n),r.classList.toggle("canMoveBottom",h._unchangedRegion.visibleLineCountBottom.read(t)>0)):(r.classList.toggle("canMoveTop",!1),r.classList.toggle("canMoveBottom",!1)))})));var l=h._editor;h._register(ma(h._nodes.top,"mousedown",(function(t){if(t.button!==0)return;h._nodes.top.classList.toggle("dragging",!0),h._nodes.root.classList.toggle("dragging",!0),t.preventDefault();var n=t.clientY;var i=!1;var r=h._unchangedRegion.visibleLineCountTop.get();h._unchangedRegion.isDragged.set("top",void 0);var e=sa(h._nodes.top),o=ma(e,"mousemove",(function(t){var e=t.clientY-n;i=i||Math.abs(e)>2;var o=Math.round(e/l.getOption(67)),s=Math.max(0,Math.min(r+o,h._unchangedRegion.getMaxVisibleLineCountTop()));h._unchangedRegion.visibleLineCountTop.set(s,void 0)})),s=ma(e,"mouseup",(function(t){i||h._unchangedRegion.showMoreAbove(h._options.hideUnchangedRegionsRevealLineCount.get(),void 0),h._nodes.top.classList.toggle("dragging",!1),h._nodes.root.classList.toggle("dragging",!1),h._unchangedRegion.isDragged.set(void 0,void 0),o.dispose(),s.dispose()}))}))),h._register(ma(h._nodes.bottom,"mousedown",(function(t){if(t.button!==0)return;h._nodes.bottom.classList.toggle("dragging",!0),h._nodes.root.classList.toggle("dragging",!0),t.preventDefault();var n=t.clientY;var i=!1;var r=h._unchangedRegion.visibleLineCountBottom.get();h._unchangedRegion.isDragged.set("bottom",void 0);var e=sa(h._nodes.bottom),o=ma(e,"mousemove",(function(t){var e=t.clientY-n;i=i||Math.abs(e)>2;var o=Math.round(e/l.getOption(67)),s=Math.max(0,Math.min(r-o,h._unchangedRegion.getMaxVisibleLineCountBottom())),u=h._unchangedRegionRange.endLineNumberExclusive>l.getModel().getLineCount()?l.getContentHeight():l.getTopForLineNumber(h._unchangedRegionRange.endLineNumberExclusive);h._unchangedRegion.visibleLineCountBottom.set(s,void 0);var a=h._unchangedRegionRange.endLineNumberExclusive>l.getModel().getLineCount()?l.getContentHeight():l.getTopForLineNumber(h._unchangedRegionRange.endLineNumberExclusive);l.setScrollTop(l.getScrollTop()+(a-u))})),s=ma(e,"mouseup",(function(t){if(h._unchangedRegion.isDragged.set(void 0,void 0),!i){var n=l.getTopForLineNumber(h._unchangedRegionRange.endLineNumberExclusive);h._unchangedRegion.showMoreBelow(h._options.hideUnchangedRegionsRevealLineCount.get(),void 0);var r=l.getTopForLineNumber(h._unchangedRegionRange.endLineNumberExclusive);l.setScrollTop(l.getScrollTop()+(r-n))}h._nodes.bottom.classList.toggle("dragging",!1),h._nodes.root.classList.toggle("dragging",!1),o.dispose(),s.dispose()}))}))),h._register(lP((function(t){var n=[];if(!h._hide){var i=ht(0,"{0} hidden lines",r.getHiddenModifiedRange(t).length),e=bh("span",{title:ht(0,"Double click to unfold")},i);e.addEventListener("dblclick",(function(t){t.button===0&&(t.preventDefault(),h._unchangedRegion.showAll(void 0))})),n.push(e);var o=h._unchangedRegion.getHiddenModifiedRange(t),s=h._modifiedOutlineSource.getBreadcrumbItems(o,t);if(s.length>0){n.push(bh("span",void 0,"  |  "));var u=function(t){var i=s[t],r=Fh("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},__spreadArray([TR(Xr.toIcon(i.kind))," ",i.name],t===s.length-1?[]:[TR(Hr.chevronRight)],true)).root;n.push(r),r.onclick=function(){h._revealModifiedHiddenLine(i.startLineNumber)}};for(var a=0;a<s.length;a++){u(a)}}}gh.apply(void 0,__spreadArray([h._nodes.others],n,false))})));return h}return n}(JG);var fJ,lJ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},vJ=function(t,n){return function(i,r){n(i,r,t)}};var dJ=fJ=function(t){__extends(n,t);function n(i,r,e,o,s,u,a){var h=this;h=t.call(this)||this,h._editors=i,h._rootElement=r,h._diffModel=e,h._rootWidth=o,h._rootHeight=s,h._modifiedEditorLayoutInfo=u,h._themeService=a,h.width=n.ENTIRE_DIFF_OVERVIEW_WIDTH;var c=bP(h._themeService.onDidColorThemeChange,(function(){return h._themeService.getColorTheme()})),f=uP((function(t){var n=c.read(t);return{insertColor:n.getColor(Ym)||(n.getColor(Zm)||$m).transparent(2),removeColor:n.getColor(Xm)||(n.getColor(Qm)||Jm).transparent(2)}})),l=Nh(document.createElement("div"));l.setClassName("diffViewport"),l.setPosition("absolute");var v=Fh("div.diffOverview",{style:{position:"absolute",top:"0px",width:n.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;h._register(qG(v,l.domNode)),h._register(ya(v,ah.POINTER_DOWN,(function(t){h._editors.modified.delegateVerticalScrollbarPointerDown(t)}))),h._register(ma(v,ah.MOUSE_WHEEL,(function(t){h._editors.modified.delegateScrollFromMouseWheelEvent(t)}),{passive:!1})),h._register(qG(h._rootElement,v)),h._register(gP((function(t,i){var r=h._diffModel.read(t),e=h._editors.original.createOverviewRuler("original diffOverviewRuler");e&&(i.add(e),i.add(qG(v,e.getDomNode())));var o=h._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(o&&(i.add(o),i.add(qG(v,o.getDomNode()))),!e||!o)return;var s=_P("viewZoneChanged",h._editors.original.onDidChangeViewZones),u=_P("viewZoneChanged",h._editors.modified.onDidChangeViewZones),a=_P("hiddenRangesChanged",h._editors.original.onDidChangeHiddenAreas),c=_P("hiddenRangesChanged",h._editors.modified.onDidChangeHiddenAreas);i.add(lP((function(t){var n;s.read(t),u.read(t),a.read(t),c.read(t);var i=f.read(t),l=(n=r==null?void 0:r.diff.read(t))===null||n===void 0?void 0:n.mappings;function v(t,n,i){var r=i._getViewModel();return r?t.filter((function(t){return t.length>0})).map((function(t){var i=r.coordinatesConverter.convertModelPositionToViewPosition(new Tr(t.startLineNumber,1)),e=r.coordinatesConverter.convertModelPositionToViewPosition(new Tr(t.endLineNumberExclusive,1)),o=e.lineNumber-i.lineNumber;return new bD(i.lineNumber,e.lineNumber,o,n.toString())})):[]}var d=v((l||[]).map((function(t){return t.lineRangeMapping.original})),i.removeColor,h._editors.original),g=v((l||[]).map((function(t){return t.lineRangeMapping.modified})),i.insertColor,h._editors.modified);e==null||e.setZones(d),o==null||o.setZones(g)}))),i.add(lP((function(t){var i=h._rootHeight.read(t),r=h._rootWidth.read(t),s=h._modifiedEditorLayoutInfo.read(t);if(s){var u=n.ENTIRE_DIFF_OVERVIEW_WIDTH-2*n.ONE_OVERVIEW_WIDTH;e.setLayout({top:0,height:i,right:u+n.ONE_OVERVIEW_WIDTH,width:n.ONE_OVERVIEW_WIDTH}),o.setLayout({top:0,height:i,right:0,width:n.ONE_OVERVIEW_WIDTH});var a=h._editors.modifiedScrollTop.read(t),c=h._editors.modifiedScrollHeight.read(t),f=h._editors.modified.getOption(103),d=new uk(f.verticalHasArrows?f.arrowSize:0,f.verticalScrollbarSize,0,s.height,c,a);l.setTop(d.getSliderPosition()),l.setHeight(d.getSliderSize())}else l.setTop(0),l.setHeight(0);v.style.height=i+"px",v.style.left=r-n.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",l.setWidth(n.ENTIRE_DIFF_OVERVIEW_WIDTH)})))})));return h}return n}(ci);dJ.ONE_OVERVIEW_WIDTH=15,dJ.ENTIRE_DIFF_OVERVIEW_WIDTH=2*fJ.ONE_OVERVIEW_WIDTH,dJ=fJ=lJ([vJ(6,zk)],dJ);var gJ=[];var pJ=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._editors=n,o._diffModel=i,o._options=r,o._widget=e,o._selectedDiffs=uP(o,(function(t){var n=o._diffModel.read(t),i=n==null?void 0:n.diff.read(t);if(!i)return gJ;var r=o._editors.modifiedSelections.read(t);if(r.every((function(t){return t.isEmpty()})))return gJ;var e=new Ud(r.map((function(t){return zd.fromRangeInclusive(t)}))),s=i.mappings.filter((function(t){return t.lineRangeMapping.innerChanges&&e.intersects(t.lineRangeMapping.modified)})).map((function(t){return{mapping:t,rangeMappings:t.lineRangeMapping.innerChanges.filter((function(t){return r.some((function(n){return Ir.areIntersecting(t.modifiedRange,n)}))}))}}));return s.length===0||s.every((function(t){return t.rangeMappings.length===0}))?gJ:s})),o._register(gP((function(t,n){if(!o._options.shouldRenderOldRevertArrows.read(t))return;var i=o._diffModel.read(t),r=i==null?void 0:i.diff.read(t);if(!i||!r||i.movedTextToCompare.read(t))return;var e=[],s=o._selectedDiffs.read(t),u=new Set(s.map((function(t){return t.mapping})));if(s.length>0){var a=o._editors.modifiedSelections.read(t),h=n.add(new wJ(a[a.length-1].positionLineNumber,o._widget,s.flatMap((function(t){return t.rangeMappings})),!0));o._editors.modified.addGlyphMarginWidget(h),e.push(h)}for(var c=0,f=r.mappings;c<f.length;c++){var a=f[c];if(!u.has(a)&&!a.lineRangeMapping.modified.isEmpty&&a.lineRangeMapping.innerChanges){var h=n.add(new wJ(a.lineRangeMapping.modified.startLineNumber,o._widget,a.lineRangeMapping,!1));o._editors.modified.addGlyphMarginWidget(h),e.push(h)}}n.add(ai((function(){for(var t=0,n=e;t<n.length;t++){var i=n[t];o._editors.modified.removeGlyphMarginWidget(i)}})))})));return o}return n}(ci);var wJ=function(t){__extends(n,t);function n(i,r,e,o){var s=this;s=t.call(this)||this,s._lineNumber=i,s._widget=r,s._diffs=e,s._revertSelection=o,s._id="revertButton"+n.counter++,s._domNode=Fh("div.revertButton",{title:s._revertSelection?ht(0,"Revert Selected Changes"):ht(0,"Revert Change")},[TR(Hr.arrowRight)]).root,s._register(ma(s._domNode,ah.MOUSE_DOWN,(function(t){t.button!==2&&(t.stopPropagation(),t.preventDefault())}))),s._register(ma(s._domNode,ah.MOUSE_UP,(function(t){t.stopPropagation(),t.preventDefault()}))),s._register(ma(s._domNode,ah.CLICK,(function(t){s._diffs instanceof Kd?s._widget.revert(s._diffs):s._widget.revertRangeMappings(s._diffs),t.stopPropagation(),t.preventDefault()})));return s}n.prototype.getId=function(){return this._id};n.prototype.getDomNode=function(){return this._domNode};n.prototype.getPosition=function(){return{lane:dd.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}};return n}(ci);wJ.counter=0;var mJ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},bJ=function(t,n){return function(i,r){n(i,r,t)}};var yJ=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this)||this,a.originalEditorElement=n,a.modifiedEditorElement=i,a._options=r,a._argCodeEditorWidgetOptions=e,a._createInnerEditor=o,a._instantiationService=s,a._keybindingService=u,a.original=a._register(a._createLeftHandSideEditor(a._options.editorOptions.get(),a._argCodeEditorWidgetOptions.originalEditor||{})),a.modified=a._register(a._createRightHandSideEditor(a._options.editorOptions.get(),a._argCodeEditorWidgetOptions.modifiedEditor||{})),a._onDidContentSizeChange=a._register(new ki),a.modifiedScrollTop=bP(a.modified.onDidScrollChange,(function(){return a.modified.getScrollTop()})),a.modifiedScrollHeight=bP(a.modified.onDidScrollChange,(function(){return a.modified.getScrollHeight()})),a.modifiedModel=bP(a.modified.onDidChangeModel,(function(){return a.modified.getModel()})),a.modifiedSelections=bP(a.modified.onDidChangeCursorSelection,(function(){var t;return(t=a.modified.getSelections())!==null&&t!==void 0?t:[]})),a.modifiedCursor=aP({owner:a,equalityComparer:Tr.equals},(function(t){var n,i;return(i=(n=a.modifiedSelections.read(t)[0])===null||n===void 0?void 0:n.getPosition())!==null&&i!==void 0?i:new Tr(1,1)})),a.originalCursor=bP(a.original.onDidChangeCursorPosition,(function(){var t;return(t=a.original.getPosition())!==null&&t!==void 0?t:new Tr(1,1)})),a._argCodeEditorWidgetOptions=null,a._register(dP({createEmptyChangeSummary:function(){return{}},handleChange:function(t,n){return t.didChange(r.editorOptions)&&Object.assign(n,t.change.changedOptions),!0}},(function(t,n){r.editorOptions.read(t),a._options.renderSideBySide.read(t),a.modified.updateOptions(a._adjustOptionsForRightHandSide(t,n)),a.original.updateOptions(a._adjustOptionsForLeftHandSide(t,n))})));return a}Object.defineProperty(n.prototype,"onDidContentSizeChange",{get:function(){return this._onDidContentSizeChange.event},enumerable:false,configurable:true});n.prototype._createLeftHandSideEditor=function(t,n){var i=this._adjustOptionsForLeftHandSide(void 0,t),r=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,i,n);return r.setContextValue("isInDiffLeftEditor",!0),r};n.prototype._createRightHandSideEditor=function(t,n){var i=this._adjustOptionsForRightHandSide(void 0,t),r=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,i,n);return r.setContextValue("isInDiffRightEditor",!0),r};n.prototype._constructInnerEditor=function(t,n,i,r){var e=this;var o=this._createInnerEditor(t,n,i,r);return this._register(o.onDidContentSizeChange((function(t){var n=e.original.getContentWidth()+e.modified.getContentWidth()+dJ.ENTIRE_DIFF_OVERVIEW_WIDTH,i=Math.max(e.modified.getContentHeight(),e.original.getContentHeight());e._onDidContentSizeChange.fire({contentHeight:i,contentWidth:n,contentHeightChanged:t.contentHeightChanged,contentWidthChanged:t.contentWidthChanged})}))),o};n.prototype._adjustOptionsForLeftHandSide=function(t,n){var i=this._adjustOptionsForSubEditor(n);return this._options.renderSideBySide.get()?(i.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},i.wordWrapOverride1=this._options.diffWordWrap.get()):(i.wordWrapOverride1="off",i.wordWrapOverride2="off",i.stickyScroll={enabled:!1},i.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.glyphMargin=this._options.renderSideBySide.get(),n.originalAriaLabel&&(i.ariaLabel=n.originalAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.readOnly=!this._options.originalEditable.get(),i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",i};n.prototype._adjustOptionsForRightHandSide=function(t,n){var i=this._adjustOptionsForSubEditor(n);return n.modifiedAriaLabel&&(i.ariaLabel=n.modifiedAriaLabel),i.ariaLabel=this._updateAriaLabel(i.ariaLabel),i.wordWrapOverride1=this._options.diffWordWrap.get(),i.revealHorizontalRightPadding=Vn.revealHorizontalRightPadding.defaultValue+dJ.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",i};n.prototype._adjustOptionsForSubEditor=function(t){var n=__assign(__assign({},t),{dimension:{height:0,width:0}});return n.inDiffEditor=!0,n.automaticLayout=!1,n.scrollbar=__assign({},n.scrollbar||{}),n.folding=!1,n.codeLens=this._options.diffCodeLens.get(),n.fixedOverflowWidgets=!0,n.minimap=__assign({},n.minimap||{}),n.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?n.stickyScroll={enabled:!1}:n.stickyScroll=this._options.editorOptions.get().stickyScroll,n};n.prototype._updateAriaLabel=function(t){var n;t||(t="");var i=ht(0," use {0} to open the accessibility help.",(n=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))===null||n===void 0?void 0:n.getAriaLabel());return this._options.accessibilityVerbose.get()?t+i:t?t.replaceAll(i,""):""};return n}(ci);yJ=mJ([bJ(5,Jh),bJ(6,Yx)],yJ);var _J=function(t){__extends(n,t);function n(){var i=this;i=t.apply(this,arguments)||this,i._id=++n.idCounter,i._onDidDispose=i._register(new ki),i.onDidDispose=i._onDidDispose.event;return i}n.prototype.getId=function(){return this.getEditorType()+":v2:"+this._id};n.prototype.getVisibleColumnFromPosition=function(t){return this._targetEditor.getVisibleColumnFromPosition(t)};n.prototype.getPosition=function(){return this._targetEditor.getPosition()};n.prototype.setPosition=function(t,n){if(n===void 0){n="api"}this._targetEditor.setPosition(t,n)};n.prototype.revealLine=function(t,n){if(n===void 0){n=0}this._targetEditor.revealLine(t,n)};n.prototype.revealLineInCenter=function(t,n){if(n===void 0){n=0}this._targetEditor.revealLineInCenter(t,n)};n.prototype.revealLineInCenterIfOutsideViewport=function(t,n){if(n===void 0){n=0}this._targetEditor.revealLineInCenterIfOutsideViewport(t,n)};n.prototype.revealLineNearTop=function(t,n){if(n===void 0){n=0}this._targetEditor.revealLineNearTop(t,n)};n.prototype.revealPosition=function(t,n){if(n===void 0){n=0}this._targetEditor.revealPosition(t,n)};n.prototype.revealPositionInCenter=function(t,n){if(n===void 0){n=0}this._targetEditor.revealPositionInCenter(t,n)};n.prototype.revealPositionInCenterIfOutsideViewport=function(t,n){if(n===void 0){n=0}this._targetEditor.revealPositionInCenterIfOutsideViewport(t,n)};n.prototype.revealPositionNearTop=function(t,n){if(n===void 0){n=0}this._targetEditor.revealPositionNearTop(t,n)};n.prototype.getSelection=function(){return this._targetEditor.getSelection()};n.prototype.getSelections=function(){return this._targetEditor.getSelections()};n.prototype.setSelection=function(t,n){if(n===void 0){n="api"}this._targetEditor.setSelection(t,n)};n.prototype.setSelections=function(t,n){if(n===void 0){n="api"}this._targetEditor.setSelections(t,n)};n.prototype.revealLines=function(t,n,i){if(i===void 0){i=0}this._targetEditor.revealLines(t,n,i)};n.prototype.revealLinesInCenter=function(t,n,i){if(i===void 0){i=0}this._targetEditor.revealLinesInCenter(t,n,i)};n.prototype.revealLinesInCenterIfOutsideViewport=function(t,n,i){if(i===void 0){i=0}this._targetEditor.revealLinesInCenterIfOutsideViewport(t,n,i)};n.prototype.revealLinesNearTop=function(t,n,i){if(i===void 0){i=0}this._targetEditor.revealLinesNearTop(t,n,i)};n.prototype.revealRange=function(t,n,i,r){if(n===void 0){n=0}if(i===void 0){i=!1}if(r===void 0){r=!0}this._targetEditor.revealRange(t,n,i,r)};n.prototype.revealRangeInCenter=function(t,n){if(n===void 0){n=0}this._targetEditor.revealRangeInCenter(t,n)};n.prototype.revealRangeInCenterIfOutsideViewport=function(t,n){if(n===void 0){n=0}this._targetEditor.revealRangeInCenterIfOutsideViewport(t,n)};n.prototype.revealRangeNearTop=function(t,n){if(n===void 0){n=0}this._targetEditor.revealRangeNearTop(t,n)};n.prototype.revealRangeNearTopIfOutsideViewport=function(t,n){if(n===void 0){n=0}this._targetEditor.revealRangeNearTopIfOutsideViewport(t,n)};n.prototype.revealRangeAtTop=function(t,n){if(n===void 0){n=0}this._targetEditor.revealRangeAtTop(t,n)};n.prototype.getSupportedActions=function(){return this._targetEditor.getSupportedActions()};n.prototype.focus=function(){this._targetEditor.focus()};n.prototype.trigger=function(t,n,i){this._targetEditor.trigger(t,n,i)};n.prototype.createDecorationsCollection=function(t){return this._targetEditor.createDecorationsCollection(t)};n.prototype.changeDecorations=function(t){return this._targetEditor.changeDecorations(t)};return n}(ci);_J.idCounter=0;var kJ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},xJ=function(t,n){return function(i,r){n(i,r,t)}};var CJ=function(){function t(t,n){var i=this;this._accessibilityService=n,this._diffEditorWidth=iP(this,0),this._screenReaderMode=bP(this._accessibilityService.onDidChangeScreenReaderOptimized,(function(){return i._accessibilityService.isScreenReaderOptimized()})),this.couldShowInlineViewBecauseOfSize=uP(this,(function(t){return i._options.read(t).renderSideBySide&&i._diffEditorWidth.read(t)<=i._options.read(t).renderSideBySideInlineBreakpoint})),this.renderOverviewRuler=uP(this,(function(t){return i._options.read(t).renderOverviewRuler})),this.renderSideBySide=uP(this,(function(t){return i._options.read(t).renderSideBySide&&!(i._options.read(t).useInlineViewWhenSpaceIsLimited&&i.couldShowInlineViewBecauseOfSize.read(t)&&!i._screenReaderMode.read(t))})),this.readOnly=uP(this,(function(t){return i._options.read(t).readOnly})),this.shouldRenderOldRevertArrows=uP(this,(function(t){return!!i._options.read(t).renderMarginRevertIcon&&!!i.renderSideBySide.read(t)&&!i.readOnly.read(t)&&!i.shouldRenderGutterMenu.read(t)})),this.shouldRenderGutterMenu=uP(this,(function(t){return i._options.read(t).renderGutterMenu})),this.renderIndicators=uP(this,(function(t){return i._options.read(t).renderIndicators})),this.enableSplitViewResizing=uP(this,(function(t){return i._options.read(t).enableSplitViewResizing})),this.splitViewDefaultRatio=uP(this,(function(t){return i._options.read(t).splitViewDefaultRatio})),this.ignoreTrimWhitespace=uP(this,(function(t){return i._options.read(t).ignoreTrimWhitespace})),this.maxComputationTimeMs=uP(this,(function(t){return i._options.read(t).maxComputationTime})),this.showMoves=uP(this,(function(t){return i._options.read(t).experimental.showMoves&&i.renderSideBySide.read(t)})),this.isInEmbeddedEditor=uP(this,(function(t){return i._options.read(t).isInEmbeddedEditor})),this.diffWordWrap=uP(this,(function(t){return i._options.read(t).diffWordWrap})),this.originalEditable=uP(this,(function(t){return i._options.read(t).originalEditable})),this.diffCodeLens=uP(this,(function(t){return i._options.read(t).diffCodeLens})),this.accessibilityVerbose=uP(this,(function(t){return i._options.read(t).accessibilityVerbose})),this.diffAlgorithm=uP(this,(function(t){return i._options.read(t).diffAlgorithm})),this.showEmptyDecorations=uP(this,(function(t){return i._options.read(t).experimental.showEmptyDecorations})),this.onlyShowAccessibleDiffViewer=uP(this,(function(t){return i._options.read(t).onlyShowAccessibleDiffViewer})),this.hideUnchangedRegions=uP(this,(function(t){return i._options.read(t).hideUnchangedRegions.enabled})),this.hideUnchangedRegionsRevealLineCount=uP(this,(function(t){return i._options.read(t).hideUnchangedRegions.revealLineCount})),this.hideUnchangedRegionsContextLineCount=uP(this,(function(t){return i._options.read(t).hideUnchangedRegions.contextLineCount})),this.hideUnchangedRegionsMinimumLineCount=uP(this,(function(t){return i._options.read(t).hideUnchangedRegions.minimumLineCount}));var r=__assign(__assign({},t),SJ(t,nB));this._options=iP(this,r)}Object.defineProperty(t.prototype,"editorOptions",{get:function(){return this._options},enumerable:false,configurable:true});t.prototype.updateOptions=function(t){var n=SJ(t,this._options.get()),i=__assign(__assign(__assign({},this._options.get()),t),n);this._options.set(i,void 0,{changedOptions:t})};t.prototype.setWidth=function(t){this._diffEditorWidth.set(t,void 0)};return t}();function SJ(t,n){var i,r,e,o,s,u,a,h;return{enableSplitViewResizing:gn(t.enableSplitViewResizing,n.enableSplitViewResizing),splitViewDefaultRatio:bn(t.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:gn(t.renderSideBySide,n.renderSideBySide),renderMarginRevertIcon:gn(t.renderMarginRevertIcon,n.renderMarginRevertIcon),maxComputationTime:wn(t.maxComputationTime,n.maxComputationTime,0,1073741824),maxFileSize:wn(t.maxFileSize,n.maxFileSize,0,1073741824),ignoreTrimWhitespace:gn(t.ignoreTrimWhitespace,n.ignoreTrimWhitespace),renderIndicators:gn(t.renderIndicators,n.renderIndicators),originalEditable:gn(t.originalEditable,n.originalEditable),diffCodeLens:gn(t.diffCodeLens,n.diffCodeLens),renderOverviewRuler:gn(t.renderOverviewRuler,n.renderOverviewRuler),diffWordWrap:kn(t.diffWordWrap,n.diffWordWrap,["off","on","inherit"]),diffAlgorithm:kn(t.diffAlgorithm,n.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:gn(t.accessibilityVerbose,n.accessibilityVerbose),experimental:{showMoves:gn((i=t.experimental)===null||i===void 0?void 0:i.showMoves,n.experimental.showMoves),showEmptyDecorations:gn((r=t.experimental)===null||r===void 0?void 0:r.showEmptyDecorations,n.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:gn((o=(e=t.hideUnchangedRegions)===null||e===void 0?void 0:e.enabled)!==null&&o!==void 0?o:(s=t.experimental)===null||s===void 0?void 0:s.collapseUnchangedRegions,n.hideUnchangedRegions.enabled),contextLineCount:wn((u=t.hideUnchangedRegions)===null||u===void 0?void 0:u.contextLineCount,n.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:wn((a=t.hideUnchangedRegions)===null||a===void 0?void 0:a.minimumLineCount,n.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:wn((h=t.hideUnchangedRegions)===null||h===void 0?void 0:h.revealLineCount,n.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:gn(t.isInEmbeddedEditor,n.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:gn(t.onlyShowAccessibleDiffViewer,n.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:wn(t.renderSideBySideInlineBreakpoint,n.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:gn(t.useInlineViewWhenSpaceIsLimited,n.useInlineViewWhenSpaceIsLimited),renderGutterMenu:gn(t.renderGutterMenu,n.renderGutterMenu)}}CJ=kJ([xJ(1,jw)],CJ);var DJ=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._editor=n,e._domNode=i,e.itemProvider=r,e.scrollTop=bP(e._editor.onDidScrollChange,(function(t){return e._editor.getScrollTop()})),e.isScrollTopZero=e.scrollTop.map((function(t){return t===0})),e.modelAttached=bP(e._editor.onDidChangeModel,(function(t){return e._editor.hasModel()})),e.editorOnDidChangeViewZones=_P("onDidChangeViewZones",e._editor.onDidChangeViewZones),e.editorOnDidContentSizeChange=_P("onDidContentSizeChange",e._editor.onDidContentSizeChange),e.domNodeSizeChanged=xP("domNodeSizeChanged"),e.views=new Map,e._domNode.className="gutter monaco-editor";var o=e._domNode.appendChild(Fh("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),s=new ResizeObserver((function(){YN((function(t){e.domNodeSizeChanged.trigger(t)}))}));s.observe(e._domNode),e._register(ai((function(){return s.disconnect()}))),e._register(lP((function(t){o.className=e.isScrollTopZero.read(t)?"":"scroll-decoration"}))),e._register(lP((function(t){return e.render(t)})));return e}n.prototype.dispose=function(){t.prototype.dispose.call(this),gh(this._domNode)};n.prototype.render=function(t){var n=this;if(!this.modelAttached.read(t))return;this.domNodeSizeChanged.read(t),this.editorOnDidChangeViewZones.read(t),this.editorOnDidContentSizeChange.read(t);var i=this.scrollTop.read(t),r=this._editor.getVisibleRanges(),e=new Set(this.views.keys()),o=jd.ofStartAndLength(0,this._domNode.clientHeight);if(!o.isEmpty){var s=function(r){var s=new zd(r.startLineNumber,r.endLineNumber+1),a=u.itemProvider.getIntersectingGutterItems(s,t);YN((function(t){for(var r=0,u=a;r<u.length;r++){var h=u[r];if(!h.range.intersect(s))continue;e.delete(h.id);var c=n.views.get(h.id);if(c)c.item.set(h,t);else{var f=document.createElement("div");n._domNode.appendChild(f);var l=iP("item",h),v=n.itemProvider.createView(l,f);c=new AJ(l,v,f),n.views.set(h.id,c)}var d=h.range.startLineNumber<=n._editor.getModel().getLineCount()?n._editor.getTopForLineNumber(h.range.startLineNumber,!0)-i:n._editor.getBottomForLineNumber(h.range.startLineNumber-1,!1)-i,g=(h.range.isEmpty?d:n._editor.getBottomForLineNumber(h.range.endLineNumberExclusive-1,!0)-i)-d;c.domNode.style.top="".concat(d,"px"),c.domNode.style.height="".concat(g,"px"),c.gutterItemView.layout(jd.ofStartAndLength(d,g),o)}}))};var u=this;for(var a=0,h=r;a<h.length;a++){var c=h[a];s(c)}}for(var f=0,l=e;f<l.length;f++){var c=l[f];var v=this.views.get(c);v.gutterItemView.dispose(),this._domNode.removeChild(v.domNode),this.views.delete(c)}};return n}(ci);var AJ=function(){function t(t,n,i){this.item=t,this.gutterItemView=n,this.domNode=i}return t}();var OJ=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._getContext=n;return i}n.prototype.runAction=function(n,i){var r=this._getContext();return t.prototype.runAction.call(this,n,r)};return n}(nc);var EJ=function(){function t(t){this.text=t,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(var n=0;n<t.length;n++)t.charAt(n)==="\n"&&this.lineStartOffsetByLineIdx.push(n+1)}t.prototype.getOffset=function(t){return this.lineStartOffsetByLineIdx[t.lineNumber-1]+t.column-1};t.prototype.getOffsetRange=function(t){return new jd(this.getOffset(t.getStartPosition()),this.getOffset(t.getEndPosition()))};Object.defineProperty(t.prototype,"textLength",{get:function(){var t=this.lineStartOffsetByLineIdx.length-1;return new wA(t,this.text.length-this.lineStartOffsetByLineIdx[t])},enumerable:false,configurable:true});return t}();var MJ=function(){function t(t){this.edits=t,rf((function(){return ef(t,(function(t,n){return t.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())}))}))}t.prototype.apply=function(t){var n="",i=new Tr(1,1);for(var r=0,e=this.edits;r<e.length;r++){var o=e[r];var s=o.range,u=s.getStartPosition(),a=s.getEndPosition(),h=LJ(i,u);h.isEmpty()||(n+=t.getValueOfRange(h)),n+=o.text,i=a}var c=LJ(i,t.endPositionExclusive);return c.isEmpty()||(n+=t.getValueOfRange(c)),n};t.prototype.applyToString=function(t){var n=new RJ(t);return this.apply(n)};t.prototype.getNewRanges=function(){var t=[];var n=0,i=0,r=0;for(var e=0,o=this.edits;e<o.length;e++){var s=o[e];var u=wA.ofText(s.text),a=Tr.lift({lineNumber:s.range.startLineNumber+i,column:s.range.startColumn+(s.range.startLineNumber===n?r:0)}),h=u.createRange(a);t.push(h),i=h.endLineNumber-s.range.endLineNumber,r=h.endColumn-s.range.endColumn,n=s.range.endLineNumber}return t};return t}();var FJ=function(){function t(t,n){this.range=t,this.text=n}return t}();function LJ(t,n){if(!t.isBeforeOrEqual(n))throw new ri("start must be before end");return new Ir(t.lineNumber,t.column,n.lineNumber,n.column)}var jJ=function(){function t(){}Object.defineProperty(t.prototype,"endPositionExclusive",{get:function(){return this.length.addToPosition(new Tr(1,1))},enumerable:false,configurable:true});return t}();var RJ=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.value=n,i._t=new EJ(i.value);return i}n.prototype.getValueOfRange=function(t){return this._t.getOffsetRange(t).substring(this.value)};Object.defineProperty(n.prototype,"length",{get:function(){return this._t.textLength},enumerable:false,configurable:true});return n}(jJ);var TJ=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._textModel=n;return i}n.prototype.getValueOfRange=function(t){return this._textModel.getValueInRange(t)};Object.defineProperty(n.prototype,"length",{get:function(){var t=this._textModel.getLineCount(),n=this._textModel.getLineLength(t);return new wA(t-1,n)},enumerable:false,configurable:true});return n}(jJ);var IJ=function(t){__extends(n,t);function n(n,i,r){if(r===void 0){r={orientation:0}}var e=this;var o;e=t.call(this)||this,e.submenuActionViewItems=[],e.hasSecondaryActions=!1,e._onDidChangeDropdownVisibility=e._register(new Ai),e.onDidChangeDropdownVisibility=e._onDidChangeDropdownVisibility.event,e.disposables=e._register(new hi),r.hoverDelegate=(o=r.hoverDelegate)!==null&&o!==void 0?o:e._register(xN()),e.options=r,e.lookupKeybindings=typeof e.options.getKeyBinding=="function",e.toggleMenuAction=e._register(new BJ((function(){var t;return(t=e.toggleMenuActionViewItem)===null||t===void 0?void 0:t.show()}),r.toggleMenuTitle)),e.element=document.createElement("div"),e.element.className="monaco-toolbar",n.appendChild(e.element),e.actionBar=e._register(new qW(e.element,{orientation:r.orientation,ariaLabel:r.ariaLabel,actionRunner:r.actionRunner,allowContextMenu:r.allowContextMenu,highlightToggledItems:r.highlightToggledItems,hoverDelegate:r.hoverDelegate,actionViewItemProvider:function(t,n){var o;if(t.id===BJ.ID)return e.toggleMenuActionViewItem=new gW(t,t.menuActions,i,{actionViewItemProvider:e.options.actionViewItemProvider,actionRunner:e.actionRunner,keybindingProvider:e.options.getKeyBinding,classNames:uc.asClassNameArray((o=r.moreIcon)!==null&&o!==void 0?o:Hr.toolBarMore),anchorAlignmentProvider:e.options.anchorAlignmentProvider,menuAsChild:!!e.options.renderDropdownAsChildElement,skipTelemetry:e.options.skipTelemetry,isMenu:!0,hoverDelegate:e.options.hoverDelegate}),e.toggleMenuActionViewItem.setActionContext(e.actionBar.context),e.disposables.add(e._onDidChangeDropdownVisibility.add(e.toggleMenuActionViewItem.onDidChangeVisibility)),e.toggleMenuActionViewItem;if(r.actionViewItemProvider){var s=r.actionViewItemProvider(t,n);if(s)return s}if(t instanceof rc){var s=new gW(t,t.actions,i,{actionViewItemProvider:e.options.actionViewItemProvider,actionRunner:e.actionRunner,keybindingProvider:e.options.getKeyBinding,classNames:t.class,anchorAlignmentProvider:e.options.anchorAlignmentProvider,menuAsChild:!!e.options.renderDropdownAsChildElement,skipTelemetry:e.options.skipTelemetry,hoverDelegate:e.options.hoverDelegate});return s.setActionContext(e.actionBar.context),e.submenuActionViewItems.push(s),e.disposables.add(e._onDidChangeDropdownVisibility.add(s.onDidChangeVisibility)),s}}}));return e}Object.defineProperty(n.prototype,"actionRunner",{get:function(){return this.actionBar.actionRunner},set:function(t){this.actionBar.actionRunner=t},enumerable:false,configurable:true});n.prototype.getElement=function(){return this.element};n.prototype.getItemAction=function(t){return this.actionBar.getAction(t)};n.prototype.setActions=function(t,n){var i=this;this.clear();var r=t?t.slice(0):[];this.hasSecondaryActions=!!(n&&n.length>0),this.hasSecondaryActions&&n&&(this.toggleMenuAction.menuActions=n.slice(0),r.push(this.toggleMenuAction)),r.forEach((function(t){i.actionBar.push(t,{icon:!0,label:!1,keybinding:i.getKeybindingLabel(t)})}))};n.prototype.getKeybindingLabel=function(t){var n,i,r;var e=this.lookupKeybindings?(i=(n=this.options).getKeyBinding)===null||i===void 0?void 0:i.call(n,t):void 0;return(r=e==null?void 0:e.getLabel())!==null&&r!==void 0?r:void 0};n.prototype.clear=function(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()};n.prototype.dispose=function(){this.clear(),this.disposables.dispose(),t.prototype.dispose.call(this)};return n}(ci);var BJ=function(t){__extends(n,t);function n(i,r){var e=this;r=r||ht(0,"More Actions..."),e=t.call(this,n.ID,r,void 0,!0)||this,e._menuActions=[],e.toggleDropdownMenu=i;return e}n.prototype.run=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.toggleDropdownMenu();return[2]}))}))};Object.defineProperty(n.prototype,"menuActions",{get:function(){return this._menuActions},set:function(t){this._menuActions=t},enumerable:false,configurable:true});return n}(tc);BJ.ID="toolbar.toggle.more";var NJ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},PJ=function(t,n){return function(i,r){n(i,r,t)}};var WJ=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this,n,o,__assign(__assign({getKeyBinding:function(t){var n;return(n=s.lookupKeybinding(t.id))!==null&&n!==void 0?n:void 0}},i),{allowContextMenu:!0,skipTelemetry:typeof(i==null?void 0:i.telemetrySource)=="string"}))||this,a._options=i,a._menuService=r,a._contextKeyService=e,a._contextMenuService=o,a._sessionDisposables=a._store.add(new hi);var h=i==null?void 0:i.telemetrySource;h&&a._store.add(a.actionBar.onDidRun((function(t){return u.publicLog2("workbenchActionExecuted",{id:t.action.id,from:h})})));return a}n.prototype.setActions=function(n,i,r){var e=this;if(i===void 0){i=[]}var o,s,u;this._sessionDisposables.clear();var a=n.slice(),h=i.slice(),c=[];var f=0;var l=[];var v=!1;if(((o=this._options)===null||o===void 0?void 0:o.hiddenItemStrategy)!==-1)for(var d=0;d<a.length;d++){var g=a[d];(g instanceof mf||g instanceof wf)&&g.hideActions&&(c.push(g.hideActions.toggle),g.hideActions.toggle.checked&&f++,g.hideActions.isHidden&&(v=!0,a[d]=void 0,((s=this._options)===null||s===void 0?void 0:s.hiddenItemStrategy)!==0&&(l[d]=g)))}if(((u=this._options)===null||u===void 0?void 0:u.overflowBehavior)!==void 0){var d=function(t,n){var i=new Set;for(var r=0,r=n;r<r.length;r++){var e=r[r];t.has(e)&&i.add(e)}return i}(new Set(this._options.overflowBehavior.exempted),Yt.map(a,(function(t){return t==null?void 0:t.id}))),g=this._options.overflowBehavior.maxItems-d.size;var p=0;for(var w=0;w<a.length;w++){var m=a[w];m&&(p++,d.has(m.id)||p>=g&&(a[w]=void 0,l[w]=m))}}y(a),y(l),t.prototype.setActions.call(this,a,ic.join(l,h)),c.length>0&&this._sessionDisposables.add(ma(this.getElement(),"contextmenu",(function(t){var n,i,o,s,u;var a=new _s(sa(e.getElement()),t),h=e.getItemAction(a.target);if(!h)return;a.preventDefault(),a.stopPropagation();var l,d=!1;if(f===1&&((n=e._options)===null||n===void 0?void 0:n.hiddenItemStrategy)===0){d=!0;for(var g=0;g<c.length;g++)if(c[g].checked){c[g]=oc({id:h.id,label:h.label,checked:!0,enabled:!1,run:function(){}});break}}if(!d&&(h instanceof mf||h instanceof wf)){if(!h.hideActions)return;l=h.hideActions.hide}else l=oc({id:"label",label:ht(0,"Hide"),enabled:!1,run:function(){}});var p=ic.join([l],c);!((i=e._options)===null||i===void 0)&&i.resetMenu&&!r&&(r=[e._options.resetMenu]),v&&r&&(p.push(new ic),p.push(oc({id:"resetThisMenu",label:ht(0,"Reset Menu"),run:function(){return e._menuService.resetHiddenStates(r)}}))),e._contextMenuService.showContextMenu({getAnchor:function(){return a},getActions:function(){return p},menuId:(o=e._options)===null||o===void 0?void 0:o.contextMenu,menuActionOptions:__assign({renderShortTitle:!0},(s=e._options)===null||s===void 0?void 0:s.menuOptions),skipTelemetry:typeof((u=e._options)===null||u===void 0?void 0:u.telemetrySource)=="string",contextKeyService:e._contextKeyService})})))};return n}(IJ);WJ=NJ([PJ(2,df),PJ(3,Gc),PJ(4,_R),PJ(5,Yx),PJ(6,_f)],WJ);var HJ=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a){var h=this;h=t.call(this,n,__assign({resetMenu:i},r),e,o,s,u,a)||this,h._onDidChangeMenuItems=h._store.add(new ki),h.onDidChangeMenuItems=h._onDidChangeMenuItems.event;var c=h._store.add(e.createMenu(i,o,{emitEventsForSubmenuChanges:!0})),f=function(){var i,e,o;var s=[],u=[];PW(c,r==null?void 0:r.menuOptions,{primary:s,secondary:u},(i=r==null?void 0:r.toolbarOptions)===null||i===void 0?void 0:i.primaryGroup,(e=r==null?void 0:r.toolbarOptions)===null||e===void 0?void 0:e.shouldInlineSubmenu,(o=r==null?void 0:r.toolbarOptions)===null||o===void 0?void 0:o.useSeparatorsInPrimaryActions),n.classList.toggle("has-no-actions",s.length===0&&u.length===0),t.prototype.setActions.call(h,s,u)};h._store.add(c.onDidChange((function(){f(),h._onDidChangeMenuItems.fire(h)}))),f();return h}n.prototype.setActions=function(){throw new ri("This toolbar is populated from a menu.")};return n}(WJ);HJ=NJ([PJ(3,df),PJ(4,Gc),PJ(5,_R),PJ(6,Yx),PJ(7,_f)],HJ);var zJ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},UJ=function(t,n){return function(i,r){n(i,r,t)}};var KJ=[];var VJ=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;var a,h;u=t.call(this)||this,u._diffModel=i,u._editors=r,u._instantiationService=e,u._contextKeyService=o,u._menuService=s,u._menu=u._register(u._menuService.createMenu(vf.DiffEditorHunkToolbar,u._contextKeyService)),u._actions=bP(u._menu.onDidChange,(function(){return u._menu.getActions()})),u._hasActions=u._actions.map((function(t){return t.length>0})),u.width=uP(u,(function(t){return u._hasActions.read(t)?35:0})),u.elements=Fh("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:"35px"}},[]),u._currentDiff=uP(u,(function(t){var n;var i=u._diffModel.read(t);if(!i)return;var r=(n=i.diff.read(t))===null||n===void 0?void 0:n.mappings,e=u._editors.modifiedCursor.read(t);return e?r==null?void 0:r.find((function(t){return t.lineRangeMapping.modified.contains(e.lineNumber)})):void 0})),u._selectedDiffs=uP(u,(function(t){var n=u._diffModel.read(t),i=n==null?void 0:n.diff.read(t);if(!i)return KJ;var r=u._editors.modifiedSelections.read(t);if(r.every((function(t){return t.isEmpty()})))return KJ;var e=new Ud(r.map((function(t){return zd.fromRangeInclusive(t)}))),o=i.mappings.filter((function(t){return t.lineRangeMapping.innerChanges&&e.intersects(t.lineRangeMapping.modified)})).map((function(t){return{mapping:t,rangeMappings:t.lineRangeMapping.innerChanges.filter((function(t){return r.some((function(n){return Ir.areIntersecting(t.modifiedRange,n)}))}))}}));return o.length===0||o.every((function(t){return t.rangeMappings.length===0}))?KJ:o})),u._register((a=n,h=u.elements.root,a.prepend(h),ai((function(){a.removeChild(h)})))),u._register(ma(u.elements.root,"click",(function(){u._editors.modified.focus()}))),u._register(YG(u.elements.root,{display:u._hasActions.map((function(t){return t?"block":"none"}))})),u._register(new DJ(u._editors.modified,u.elements.root,{getIntersectingGutterItems:function(t,n){var i=u._diffModel.read(n);if(!i)return[];var r=i.diff.read(n);if(!r)return[];var e=u._selectedDiffs.read(n);if(e.length>0){var o=Vd.fromRangeMappings(e.flatMap((function(t){return t.rangeMappings})));return[new qJ(o,!0,vf.DiffEditorSelectionToolbar,void 0,i.model.original.uri,i.model.modified.uri)]}var s=u._currentDiff.read(n);return r.mappings.map((function(t){return new qJ(t.lineRangeMapping.withInnerChangesFromLineRanges(),t.lineRangeMapping===(s==null?void 0:s.lineRangeMapping),vf.DiffEditorHunkToolbar,void 0,i.model.original.uri,i.model.modified.uri)}))},createView:function(t,n){return u._instantiationService.createInstance(GJ,t,n,u)}})),u._register(ma(u.elements.gutter,ah.MOUSE_WHEEL,(function(t){u._editors.modified.getOption(103).handleMouseWheel&&u._editors.modified.delegateScrollFromMouseWheelEvent(t)}),{passive:!1}));return u}n.prototype.computeStagedValue=function(t){var n=this;var i;var r=(i=t.innerChanges)!==null&&i!==void 0?i:[];return new MJ(r.map((function(t){return new FJ(t.originalRange,n._editors.modifiedModel.get().getValueInRange(t.modifiedRange))}))).apply(new TJ(this._editors.original.getModel()))};n.prototype.layout=function(t){this.elements.gutter.style.left=t+"px"};return n}(ci);VJ=zJ([UJ(3,Jh),UJ(4,Gc),UJ(5,df)],VJ);var qJ=function(){function t(t,n,i,r,e,o){this.mapping=t,this.showAlways=n,this.menuId=i,this.rangeOverride=r,this.originalUri=e,this.modifiedUri=o}Object.defineProperty(t.prototype,"id",{get:function(){return this.mapping.modified.toString()},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"range",{get:function(){var t;return(t=this.rangeOverride)!==null&&t!==void 0?t:this.mapping.modified},enumerable:false,configurable:true});return t}();var GJ=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._item=n,o._elements=Fh("div.gutterItem",{style:{height:"20px",width:"34px"}},[Fh("div.background@background",{},[]),Fh("div.buttons@buttons",{},[])]),o._showAlways=o._item.map(o,(function(t){return t.showAlways})),o._menuId=o._item.map(o,(function(t){return t.menuId})),o._isSmall=iP(o,!1),o._lastItemRange=void 0,o._lastViewRange=void 0;var s=o._register(e.createInstance(bR,"element",!0,{position:{hoverPosition:1}}));o._register(qG(i,o._elements.root)),o._register(lP((function(t){var n=o._showAlways.read(t);o._elements.root.classList.toggle("noTransition",!0),o._elements.root.classList.toggle("showAlways",n),setTimeout((function(){o._elements.root.classList.toggle("noTransition",!1)}),0)}))),o._register(gP((function(t,n){o._elements.buttons.replaceChildren();var i=n.add(e.createInstance(HJ,o._elements.buttons,o._menuId.read(t),{orientation:1,hoverDelegate:s,toolbarOptions:{primaryGroup:function(t){return t.startsWith("primary")}},overflowBehavior:{maxItems:o._isSmall.read(t)?1:3},hiddenItemStrategy:0,actionRunner:new OJ((function(){var t=o._item.get(),n=t.mapping;return{mapping:n,originalWithModifiedChanges:r.computeStagedValue(n),originalUri:t.originalUri,modifiedUri:t.modifiedUri}})),menuOptions:{shouldForwardArgs:!0}}));n.add(i.onDidChangeMenuItems((function(){o._lastItemRange&&o.layout(o._lastItemRange,o._lastViewRange)})))})));return o}n.prototype.layout=function(t,n){this._lastItemRange=t,this._lastViewRange=n;var i=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&t.length<30,void 0),i=this._elements.buttons.clientHeight,this._elements.root.style.top=t.start+"px",this._elements.root.style.height=t.length+"px";var r=t.length/2-i/2,e=i;var o=t.start+r;var s=jd.tryCreate(e,n.endExclusive-e-i),u=jd.tryCreate(t.start+e,t.endExclusive-i-e);u&&s&&u.start<u.endExclusive&&(o=s.clip(o),o=u.clip(o)),this._elements.buttons.style.top=o-t.start+"px"};return n}(ci);GJ=zJ([UJ(3,Jh)],GJ);var $J=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},JJ=function(t,n){return function(i,r){n(i,r,t)}};var ZJ=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a){var h=this;var c;h=t.call(this)||this,h._domElement=n,h._parentContextKeyService=e,h._parentInstantiationService=o,h._accessibilitySignalService=u,h._editorProgressService=a,h.elements=Fh("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Fh("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[bh("span",{},"No Changes")]),Fh("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Fh("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Fh("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),h._diffModel=iP(h,void 0),h._shouldDisposeDiffModel=!1,h.onDidChangeModel=wi.fromObservableLight(h._diffModel),h._contextKeyService=h._register(h._parentContextKeyService.createScoped(h._domElement)),h._instantiationService=h._parentInstantiationService.createChild(new SL([Gc,h._contextKeyService])),h._boundarySashes=iP(h,void 0),h._accessibleDiffViewerShouldBeVisible=iP(h,!1),h._accessibleDiffViewerVisible=uP(h,(function(t){return!!h._options.onlyShowAccessibleDiffViewer.read(t)||h._accessibleDiffViewerShouldBeVisible.read(t)})),h._movedBlocksLinesPart=iP(h,void 0),h._layoutInfo=uP(h,(function(t){var n,i,r,e,o;var s=h._rootSizeObserver.width.read(t),u=h._rootSizeObserver.height.read(t),a=h._sash.read(t),c=h._gutter.read(t),f=(n=c==null?void 0:c.width.read(t))!==null&&n!==void 0?n:0,l=(r=(i=h._overviewRulerPart.read(t))===null||i===void 0?void 0:i.width)!==null&&r!==void 0?r:0;var v,d,g,p,w;if(a){var m=a.sashLeft.read(t);v=0,d=m-f-((o=(e=h._movedBlocksLinesPart.read(t))===null||e===void 0?void 0:e.width.read(t))!==null&&o!==void 0?o:0),w=m-f,g=m,p=s-g-l}else w=0,v=f,d=Math.max(5,h._editors.original.getLayoutInfo().decorationsLeft),g=f+d,p=s-g-l;return h.elements.original.style.left=v+"px",h.elements.original.style.width=d+"px",h._editors.original.layout({width:d,height:u},!0),c==null||c.layout(w),h.elements.modified.style.left=g+"px",h.elements.modified.style.width=p+"px",h._editors.modified.layout({width:p,height:u},!0),{modifiedEditor:h._editors.modified.getLayoutInfo(),originalEditor:h._editors.original.getLayoutInfo()}})),h._diffValue=h._diffModel.map((function(t,n){return t==null?void 0:t.diff.read(n)})),h.onDidUpdateDiff=wi.fromObservableLight(h._diffValue),s.willCreateDiffEditor(),h._contextKeyService.createKey("isInDiffEditor",!0),h._domElement.appendChild(h.elements.root),h._register(ai((function(){return h._domElement.removeChild(h.elements.root)}))),h._rootSizeObserver=h._register(new GG(h.elements.root,i.dimension)),h._rootSizeObserver.setAutomaticLayout((c=i.automaticLayout)!==null&&c!==void 0&&c),h._options=h._instantiationService.createInstance(CJ,i),h._register(lP((function(t){h._options.setWidth(h._rootSizeObserver.width.read(t))}))),h._contextKeyService.createKey($C.isEmbeddedDiffEditor.key,!1),h._register(r$($C.isEmbeddedDiffEditor,h._contextKeyService,(function(t){return h._options.isInEmbeddedEditor.read(t)}))),h._register(r$($C.comparingMovedCode,h._contextKeyService,(function(t){var n;return!!(!((n=h._diffModel.read(t))===null||n===void 0)&&n.movedTextToCompare.read(t))}))),h._register(r$($C.diffEditorRenderSideBySideInlineBreakpointReached,h._contextKeyService,(function(t){return h._options.couldShowInlineViewBecauseOfSize.read(t)}))),h._register(r$($C.diffEditorInlineMode,h._contextKeyService,(function(t){return!h._options.renderSideBySide.read(t)}))),h._register(r$($C.hasChanges,h._contextKeyService,(function(t){var n,i,r;return((r=(i=(n=h._diffModel.read(t))===null||n===void 0?void 0:n.diff.read(t))===null||i===void 0?void 0:i.mappings.length)!==null&&r!==void 0?r:0)>0}))),h._editors=h._register(h._instantiationService.createInstance(yJ,h.elements.original,h.elements.modified,h._options,r,(function(t,n,i,r){return h._createInnerEditor(t,n,i,r)}))),h._register(r$($C.diffEditorOriginalWritable,h._contextKeyService,(function(t){return h._options.originalEditable.read(t)}))),h._register(r$($C.diffEditorModifiedWritable,h._contextKeyService,(function(t){return!h._options.readOnly.read(t)}))),h._register(r$($C.diffEditorOriginalUri,h._contextKeyService,(function(t){var n,i;return(i=(n=h._diffModel.read(t))===null||n===void 0?void 0:n.model.original.uri.toString())!==null&&i!==void 0?i:""}))),h._register(r$($C.diffEditorModifiedUri,h._contextKeyService,(function(t){var n,i;return(i=(n=h._diffModel.read(t))===null||n===void 0?void 0:n.model.modified.uri.toString())!==null&&i!==void 0?i:""}))),h._overviewRulerPart=cP(h,(function(t){return h._options.renderOverviewRuler.read(t)?h._instantiationService.createInstance(XG(dJ,t),h._editors,h.elements.root,h._diffModel,h._rootSizeObserver.width,h._rootSizeObserver.height,h._layoutInfo.map((function(t){return t.modifiedEditor}))):void 0})).recomputeInitiallyAndOnChange(h._store),h._sash=cP(h,(function(t){var n=h._options.renderSideBySide.read(t);return h.elements.root.classList.toggle("side-by-side",n),n?new I$(h._options,h.elements.root,{height:h._rootSizeObserver.height,width:h._rootSizeObserver.width.map((function(t,n){var i,r;return t-((r=(i=h._overviewRulerPart.read(n))===null||i===void 0?void 0:i.width)!==null&&r!==void 0?r:0)}))},h._boundarySashes):void 0})).recomputeInitiallyAndOnChange(h._store);var f=cP(h,(function(t){return h._instantiationService.createInstance(XG(hJ,t),h._editors,h._diffModel,h._options)})).recomputeInitiallyAndOnChange(h._store);cP(h,(function(t){return h._instantiationService.createInstance(XG(T$,t),h._editors,h._diffModel,h._options,h)})).recomputeInitiallyAndOnChange(h._store);var l=new Set,v=new Set;var d=!1;var g=cP(h,(function(t){return h._instantiationService.createInstance(XG(rJ,t),sa(h._domElement),h._editors,h._diffModel,h._options,h,(function(){return d||f.get().isUpdatingHiddenAreas}),l,v)})).recomputeInitiallyAndOnChange(h._store),p=uP(h,(function(t){var n=g.read(t).viewZones.read(t).orig,i=f.read(t).viewZones.read(t).origViewZones;return n.concat(i)})),w=uP(h,(function(t){var n=g.read(t).viewZones.read(t).mod,i=f.read(t).viewZones.read(t).modViewZones;return n.concat(i)}));var m;h._register(t$(h._editors.original,p,(function(t){d=t}),l)),h._register(t$(h._editors.modified,w,(function(t){d=t,d?m=HG.capture(h._editors.modified):(m==null||m.restore(h._editors.modified),m=void 0)}),v)),h._accessibleDiffViewer=cP(h,(function(t){return h._instantiationService.createInstance(XG(h$,t),h.elements.accessibleDiffViewer,h._accessibleDiffViewerVisible,(function(t,n){return h._accessibleDiffViewerShouldBeVisible.set(t,n)}),h._options.onlyShowAccessibleDiffViewer.map((function(t){return!t})),h._rootSizeObserver.width,h._rootSizeObserver.height,h._diffModel.map((function(t,n){var i;return(i=t==null?void 0:t.diff.read(n))===null||i===void 0?void 0:i.mappings.map((function(t){return t.lineRangeMapping}))})),new b$(h._editors))})).recomputeInitiallyAndOnChange(h._store);var b=h._accessibleDiffViewerVisible.map((function(t){return t?"hidden":"visible"}));h._register(YG(h.elements.modified,{visibility:b})),h._register(YG(h.elements.original,{visibility:b})),h._createDiffEditorContributions(),s.addDiffEditor(h),h._gutter=cP(h,(function(t){return h._options.shouldRenderGutterMenu.read(t)?h._instantiationService.createInstance(XG(VJ,t),h.elements.root,h._diffModel,h._editors):void 0})),h._register(SP(h._layoutInfo)),cP(h,(function(t){return new(XG(y$,t))(h.elements.root,h._diffModel,h._layoutInfo.map((function(t){return t.originalEditor})),h._layoutInfo.map((function(t){return t.modifiedEditor})),h._editors)})).recomputeInitiallyAndOnChange(h._store,(function(t){h._movedBlocksLinesPart.set(t,void 0)})),h._register(YG(h.elements.overlay,{width:h._layoutInfo.map((function(t,n){return t.originalEditor.width+(h._options.renderSideBySide.read(n)?0:t.modifiedEditor.width)})),visibility:uP((function(t){var n,i;return h._options.hideUnchangedRegions.read(t)&&((i=(n=h._diffModel.read(t))===null||n===void 0?void 0:n.diff.read(t))===null||i===void 0?void 0:i.mappings.length)===0?"visible":"hidden"}))})),h._register(wi.runAndSubscribe(h._editors.modified.onDidChangeCursorPosition,(function(t){return h._handleCursorPositionChange(t,!0)}))),h._register(wi.runAndSubscribe(h._editors.original.onDidChangeCursorPosition,(function(t){return h._handleCursorPositionChange(t,!1)})));var y=h._diffModel.map(h,(function(t,n){if(t)return t.diff.read(n)===void 0&&!t.isDiffUpToDate.read(n)}));h._register(gP((function(t,n){if(y.read(t)===!0){var i=h._editorProgressService.show(!0,1e3);n.add(ai((function(){return i.done()})))}}))),h._register(ai((function(){var t;h._shouldDisposeDiffModel&&((t=h._diffModel.get())===null||t===void 0||t.dispose())}))),h._register(gP((function(t,n){n.add(new(XG(pJ,t))(h._editors,h._diffModel,h._options,h))})));return h}Object.defineProperty(n.prototype,"onDidContentSizeChange",{get:function(){return this._editors.onDidContentSizeChange},enumerable:false,configurable:true});n.prototype._createInnerEditor=function(t,n,i,r){return t.createInstance(jL,n,i,r)};n.prototype._createDiffEditorContributions=function(){var t=Wf.getDiffEditorContributions();for(var n=0,i=t;n<i.length;n++){var r=i[n];try{this._register(this._instantiationService.createInstance(r.ctor,this))}catch(t){Gn(t)}}};Object.defineProperty(n.prototype,"_targetEditor",{get:function(){return this._editors.modified},enumerable:false,configurable:true});n.prototype.getEditorType=function(){return vp.IDiffEditor};n.prototype.layout=function(t){this._rootSizeObserver.observe(t)};n.prototype.hasTextFocus=function(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()};n.prototype.saveViewState=function(){var t;return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:(t=this._diffModel.get())===null||t===void 0?void 0:t.serializeState()}};n.prototype.restoreViewState=function(t){var n;if(t&&t.original&&t.modified){var i=t;this._editors.original.restoreViewState(i.original),this._editors.modified.restoreViewState(i.modified),i.modelState&&((n=this._diffModel.get())===null||n===void 0||n.restoreSerializedState(i.modelState))}};n.prototype.handleInitialized=function(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()};n.prototype.createViewModel=function(t){return this._instantiationService.createInstance(V$,t,this._options)};n.prototype.getModel=function(){var t,n;return(n=(t=this._diffModel.get())===null||t===void 0?void 0:t.model)!==null&&n!==void 0?n:null};n.prototype.setModel=function(t,n){var i=this;!t&&this._diffModel.get()&&this._accessibleDiffViewer.get().close();var r=t?"model"in t?{model:t,shouldDispose:!1}:{model:this.createViewModel(t),shouldDispose:!0}:void 0;this._diffModel.get()!==(r==null?void 0:r.model)&&tP(n,(function(t){var n;bP.batchEventsGlobally(t,(function(){i._editors.original.setModel(r?r.model.model.original:null),i._editors.modified.setModel(r?r.model.model.modified:null)}));var e=i._diffModel.get(),o=i._shouldDisposeDiffModel;i._shouldDisposeDiffModel=(n=r==null?void 0:r.shouldDispose)!==null&&n!==void 0&&n,i._diffModel.set(r==null?void 0:r.model,t),o&&(e==null||e.dispose())}))};n.prototype.updateOptions=function(t){this._options.updateOptions(t)};n.prototype.getContainerDomNode=function(){return this._domElement};n.prototype.getOriginalEditor=function(){return this._editors.original};n.prototype.getModifiedEditor=function(){return this._editors.modified};n.prototype.getLineChanges=function(){var t;var n=(t=this._diffModel.get())===null||t===void 0?void 0:t.diff.get();return n?n.mappings.map((function(t){var n=t.lineRangeMapping;var i,r,e,o,s=n.innerChanges;return n.original.isEmpty?(i=n.original.startLineNumber-1,r=0,s=void 0):(i=n.original.startLineNumber,r=n.original.endLineNumberExclusive-1),n.modified.isEmpty?(e=n.modified.startLineNumber-1,o=0,s=void 0):(e=n.modified.startLineNumber,o=n.modified.endLineNumberExclusive-1),{originalStartLineNumber:i,originalEndLineNumber:r,modifiedStartLineNumber:e,modifiedEndLineNumber:o,charChanges:s==null?void 0:s.map((function(t){return{originalStartLineNumber:t.originalRange.startLineNumber,originalStartColumn:t.originalRange.startColumn,originalEndLineNumber:t.originalRange.endLineNumber,originalEndColumn:t.originalRange.endColumn,modifiedStartLineNumber:t.modifiedRange.startLineNumber,modifiedStartColumn:t.modifiedRange.startColumn,modifiedEndLineNumber:t.modifiedRange.endLineNumber,modifiedEndColumn:t.modifiedRange.endColumn}}))}})):null};n.prototype.revert=function(t){var n=this._diffModel.get();n&&n.isDiffUpToDate.get()&&this._editors.modified.executeEdits("diffEditor",[{range:t.modified.toExclusiveRange(),text:n.model.original.getValueInRange(t.original.toExclusiveRange())}])};n.prototype.revertRangeMappings=function(t){var n=this._diffModel.get();if(!n||!n.isDiffUpToDate.get())return;var i=t.map((function(t){return{range:t.modifiedRange,text:n.model.original.getValueInRange(t.originalRange)}}));this._editors.modified.executeEdits("diffEditor",i)};n.prototype._goTo=function(t){this._editors.modified.setPosition(new Tr(t.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(t.lineRangeMapping.modified.toExclusiveRange())};n.prototype.goToDiff=function(t){var n,i,r,e;var o=(i=(n=this._diffModel.get())===null||n===void 0?void 0:n.diff.get())===null||i===void 0?void 0:i.mappings;if(!o||o.length===0)return;var s=this._editors.modified.getPosition().lineNumber;var u;u=t==="next"?(r=o.find((function(t){return t.lineRangeMapping.modified.startLineNumber>s})))!==null&&r!==void 0?r:o[0]:(e=Td(o,(function(t){return t.lineRangeMapping.modified.startLineNumber<s})))!==null&&e!==void 0?e:o[o.length-1],this._goTo(u),u.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(wG.diffLineDeleted,{source:"diffEditor.goToDiff"}):u.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(wG.diffLineInserted,{source:"diffEditor.goToDiff"}):u&&this._accessibilitySignalService.playSignal(wG.diffLineModified,{source:"diffEditor.goToDiff"})};n.prototype.revealFirstDiff=function(){var t=this;var n=this._diffModel.get();n&&this.waitForDiff().then((function(){var i;var r=(i=n.diff.get())===null||i===void 0?void 0:i.mappings;r&&r.length!==0&&t._goTo(r[0])}))};n.prototype.accessibleDiffViewerNext=function(){this._accessibleDiffViewer.get().next()};n.prototype.accessibleDiffViewerPrev=function(){this._accessibleDiffViewer.get().prev()};n.prototype.waitForDiff=function(){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:t=this._diffModel.get();n=t;if(!n)return[3,2];return[4,t.waitForDiff()];case 1:n=i.sent();i.label=2;case 2:n;return[2]}}))}))};n.prototype.mapToOtherSide=function(){var t,n;var i=this._editors.modified.hasWidgetFocus(),r=i?this._editors.modified:this._editors.original,e=i?this._editors.original:this._editors.modified;var o;var s=r.getSelection();if(s){var u=(n=(t=this._diffModel.get())===null||t===void 0?void 0:t.diff.get())===null||n===void 0?void 0:n.mappings.map((function(t){return i?t.lineRangeMapping.flip():t.lineRangeMapping}));if(u){var a=i$(s.getStartPosition(),u),h=i$(s.getEndPosition(),u);o=Ir.plusRange(a,h)}}return{destination:e,destinationSelection:o}};n.prototype.switchSide=function(){var t=this.mapToOtherSide(),n=t.destination,i=t.destinationSelection;n.focus(),i&&n.setSelection(i)};n.prototype.exitCompareMove=function(){var t=this._diffModel.get();t&&t.movedTextToCompare.set(void 0,void 0)};n.prototype.collapseAllUnchangedRegions=function(){var t;var n=(t=this._diffModel.get())===null||t===void 0?void 0:t.unchangedRegions.get();n&&YN((function(t){for(var i=0,r=n;i<r.length;i++){var e=r[i];e.collapseAll(t)}}))};n.prototype.showAllUnchangedRegions=function(){var t;var n=(t=this._diffModel.get())===null||t===void 0?void 0:t.unchangedRegions.get();n&&YN((function(t){for(var i=0,r=n;i<r.length;i++){var e=r[i];e.showAll(t)}}))};n.prototype._handleCursorPositionChange=function(t,n){var i,r;if((t==null?void 0:t.reason)===3){var e=(r=(i=this._diffModel.get())===null||i===void 0?void 0:i.diff.get())===null||r===void 0?void 0:r.mappings.find((function(i){return n?i.lineRangeMapping.modified.contains(t.position.lineNumber):i.lineRangeMapping.original.contains(t.position.lineNumber)}));e!=null&&e.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(wG.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):e!=null&&e.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(wG.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):e&&this._accessibilitySignalService.playSignal(wG.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}};return n}(_J);ZJ=$J([JJ(3,Gc),JJ(4,Jh),JJ(5,Qh),JJ(6,dG),JJ(7,BB)],ZJ);var QJ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},YJ=function(t,n){return function(i,r){n(i,r,t)}};var XJ=0,tZ=!1;function nZ(t){if(!t){if(tZ)return;tZ=!0}(function(t){gw=document.createElement("div"),gw.className="monaco-aria-container";var n=function(){var t=document.createElement("div");return t.className="monaco-alert",t.setAttribute("role","alert"),t.setAttribute("aria-atomic","true"),gw.appendChild(t),t};pw=n(),ww=n();var i=function(){var t=document.createElement("div");return t.className="monaco-status",t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),gw.appendChild(t),t};mw=i(),bw=i(),t.appendChild(gw)})(t||Xe.document.body)}var iZ=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c,f,l){var v=this;var d=__assign({},i);d.ariaLabel=d.ariaLabel||iN.editorViewAccessibleLabel,d.ariaLabel=d.ariaLabel+";"+iN.accessibilityHelpMessage,v=t.call(this,n,d,{},r,e,o,s,a,h,c,f,l)||this,v._standaloneKeybindingService=u instanceof EG?u:null,nZ(d.ariaContainerElement),bN=function(t,n){return r.createInstance(bR,t,n,{})};return v}n.prototype.addCommand=function(t,n,i){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;var r="DYNAMIC_"+ ++XJ,e=Dc.deserialize(i);return this._standaloneKeybindingService.addDynamicKeybinding(r,t,n,e),r};n.prototype.createContextKey=function(t,n){return this._contextKeyService.createKey(t,n)};n.prototype.addAction=function(t){var n=this;if(typeof t.id!="string"||typeof t.label!="string"||typeof t.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ci.None;var i=t.id,r=t.label,e=Dc.and(Dc.equals("editorId",this.getId()),Dc.deserialize(t.precondition)),o=t.keybindings,s=Dc.and(e,Dc.deserialize(t.keybindingContext)),u=t.contextMenuGroupId||null,a=t.contextMenuOrder||0,h=function(i){var r=[];for(var e=1;e<arguments.length;e++){r[e-1]=arguments[e]}return Promise.resolve(t.run.apply(t,__spreadArray([n],r,false)))},c=new hi,f=this.getId()+":"+i;if(c.add(hc.registerCommand(f,h)),u){var l={command:{id:f,title:r},when:e,group:u,order:a};c.add(pf.appendMenuItem(vf.EditorContext,l))}if(Array.isArray(o))for(var v=0,d=o;v<d.length;v++){var l=d[v];c.add(this._standaloneKeybindingService.addDynamicKeybinding(f,l,h,s))}var g=new lA(f,r,r,void 0,e,(function(){var i=[];for(var r=0;r<arguments.length;r++){i[r]=arguments[r]}return Promise.resolve(t.run.apply(t,__spreadArray([n],i,false)))}),this._contextKeyService);return this._actions.set(i,g),c.add(ai((function(){n._actions.delete(i)}))),c};n.prototype._triggerCommand=function(n,i){if(this._codeEditorService instanceof YL)try{this._codeEditorService.setActiveCodeEditor(this),t.prototype._triggerCommand.call(this,n,i)}finally{this._codeEditorService.setActiveCodeEditor(null)}else t.prototype._triggerCommand.call(this,n,i)};return n}(jL);iZ=QJ([YJ(2,Jh),YJ(3,Qh),YJ(4,ac),YJ(5,Gc),YJ(6,Yx),YJ(7,zk),YJ(8,EL),YJ(9,jw),YJ(10,xv),YJ(11,tp)],iZ);var rZ=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c,f,l,v,d,g){var p=this;var w=__assign({},i);IG(c,w,!1);var m=a.registerEditorContainer(n);typeof w.theme=="string"&&a.setTheme(w.theme),w.autoDetectHighContrast!==void 0&&a.setAutoDetectHighContrast(!!w.autoDetectHighContrast);var b=w.model;var y;if(delete w.model,p=t.call(this,n,w,r,e,o,s,u,a,h,f,d,g)||this,p._configurationService=c,p._standaloneThemeService=a,p._register(m),b===void 0){var _=v.getLanguageIdByMimeType(w.language)||w.language||dv;y=oZ(l,v,w.value||"",_,void 0),p._ownsModel=!0}else y=b,p._ownsModel=!1;if(p._attachModel(y),y){var _={oldModelUrl:null,newModelUrl:y.uri};p._onDidChangeModel.fire(_)}return p}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.updateOptions=function(n){IG(this._configurationService,n,!1),typeof n.theme=="string"&&this._standaloneThemeService.setTheme(n.theme),n.autoDetectHighContrast!==void 0&&this._standaloneThemeService.setAutoDetectHighContrast(!!n.autoDetectHighContrast),t.prototype.updateOptions.call(this,n)};n.prototype._postDetachModelCleanup=function(n){t.prototype._postDetachModelCleanup.call(this,n),n&&this._ownsModel&&(n.dispose(),this._ownsModel=!1)};return n}(iZ);rZ=QJ([YJ(2,Jh),YJ(3,Qh),YJ(4,ac),YJ(5,Gc),YJ(6,Yx),YJ(7,Aq),YJ(8,EL),YJ(9,Kl),YJ(10,jw),YJ(11,Yh),YJ(12,Zl),YJ(13,xv),YJ(14,tp)],rZ);var eZ=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c,f,l){var v=this;var d=__assign({},i);IG(a,d,!0);var g=s.registerEditorContainer(n);typeof d.theme=="string"&&s.setTheme(d.theme),d.autoDetectHighContrast!==void 0&&s.setAutoDetectHighContrast(!!d.autoDetectHighContrast),v=t.call(this,n,d,{},e,r,o,l,c)||this,v._configurationService=a,v._standaloneThemeService=s,v._register(g);return v}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.updateOptions=function(n){IG(this._configurationService,n,!0),typeof n.theme=="string"&&this._standaloneThemeService.setTheme(n.theme),n.autoDetectHighContrast!==void 0&&this._standaloneThemeService.setAutoDetectHighContrast(!!n.autoDetectHighContrast),t.prototype.updateOptions.call(this,n)};n.prototype._createInnerEditor=function(t,n,i){return t.createInstance(iZ,n,i)};n.prototype.getOriginalEditor=function(){return t.prototype.getOriginalEditor.call(this)};n.prototype.getModifiedEditor=function(){return t.prototype.getModifiedEditor.call(this)};n.prototype.addCommand=function(t,n,i){return this.getModifiedEditor().addCommand(t,n,i)};n.prototype.createContextKey=function(t,n){return this.getModifiedEditor().createContextKey(t,n)};n.prototype.addAction=function(t){return this.getModifiedEditor().addAction(t)};return n}(ZJ);function oZ(t,n,i,r,e){if(i=i||"",!r){var o=i.indexOf("\n");var s=i;return o!==-1&&(s=i.substring(0,o)),sZ(t,i,n.createByFilepathOrFirstLine(e||null,s),e)}return sZ(t,i,n.createById(r),e)}function sZ(t,n,i,r){return t.createModel(n,i,r)}eZ=QJ([YJ(2,Jh),YJ(3,Gc),YJ(4,Qh),YJ(5,Aq),YJ(6,EL),YJ(7,Kl),YJ(8,_R),YJ(9,BB),YJ(10,Kq),YJ(11,dG)],eZ);var uZ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},aZ=function(t,n){return function(i,r){n(i,r,t)}};var hZ=function(){function t(t,n){this.viewModel=t,this.deltaScrollVertical=n}t.prototype.getId=function(){return this.viewModel};return t}();var cZ=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._container=n,o._overflowWidgetsDomNode=i,o._workbenchUIElementFactory=r,o._instantiationService=e,o._viewModel=iP(o,void 0),o._collapsed=uP(o,(function(t){var n;return(n=o._viewModel.read(t))===null||n===void 0?void 0:n.collapsed.read(t)})),o._editorContentHeight=iP(o,500),o.contentHeight=uP(o,(function(t){return(o._collapsed.read(t)?0:o._editorContentHeight.read(t))+o._outerEditorHeight})),o._modifiedContentWidth=iP(o,0),o._modifiedWidth=iP(o,0),o._originalContentWidth=iP(o,0),o._originalWidth=iP(o,0),o.maxScroll=uP(o,(function(t){var n=o._modifiedContentWidth.read(t)-o._modifiedWidth.read(t),i=o._originalContentWidth.read(t)-o._originalWidth.read(t);return n>i?{maxScroll:n,width:o._modifiedWidth.read(t)}:{maxScroll:i,width:o._originalWidth.read(t)}})),o._elements=Fh("div.multiDiffEntry",[Fh("div.header@header",[Fh("div.header-content",[Fh("div.collapse-button@collapseButton"),Fh("div.file-path",[Fh("div.title.modified.show-file-icons@primaryPath",[]),Fh("div.status.deleted@status",["R"]),Fh("div.title.original.show-file-icons@secondaryPath",[])]),Fh("div.actions@actions")])]),Fh("div.editorParent",[Fh("div.editorContainer@editor")])]),o.editor=o._register(o._instantiationService.createInstance(ZJ,o._elements.editor,{overflowWidgetsDomNode:o._overflowWidgetsDomNode},{})),o.isModifedFocused=fZ(o.editor.getModifiedEditor()),o.isOriginalFocused=fZ(o.editor.getOriginalEditor()),o.isFocused=uP(o,(function(t){return o.isModifedFocused.read(t)||o.isOriginalFocused.read(t)})),o._resourceLabel=o._workbenchUIElementFactory.createResourceLabel?o._register(o._workbenchUIElementFactory.createResourceLabel(o._elements.primaryPath)):void 0,o._resourceLabel2=o._workbenchUIElementFactory.createResourceLabel?o._register(o._workbenchUIElementFactory.createResourceLabel(o._elements.secondaryPath)):void 0,o._dataStore=new hi,o._headerHeight=40,o._lastScrollTop=-1,o._isSettingScrollTop=!1;var s=new DV(o._elements.collapseButton,{});o._register(lP((function(t){s.element.className="",s.icon=o._collapsed.read(t)?Hr.chevronRight:Hr.chevronDown}))),o._register(s.onDidClick((function(){var t;(t=o._viewModel.get())===null||t===void 0||t.collapsed.set(!o._collapsed.get(),void 0)}))),o._register(lP((function(t){o._elements.editor.style.display=o._collapsed.read(t)?"none":"block"}))),o._register(o.editor.getModifiedEditor().onDidLayoutChange((function(t){var n=o.editor.getModifiedEditor().getLayoutInfo().contentWidth;o._modifiedWidth.set(n,void 0)}))),o._register(o.editor.getOriginalEditor().onDidLayoutChange((function(t){var n=o.editor.getOriginalEditor().getLayoutInfo().contentWidth;o._originalWidth.set(n,void 0)}))),o._register(o.editor.onDidContentSizeChange((function(t){XN((function(n){o._editorContentHeight.set(t.contentHeight,n),o._modifiedContentWidth.set(o.editor.getModifiedEditor().getContentWidth(),n),o._originalContentWidth.set(o.editor.getOriginalEditor().getContentWidth(),n)}))}))),o._register(o.editor.getOriginalEditor().onDidScrollChange((function(t){if(o._isSettingScrollTop||!t.scrollTopChanged||!o._data)return;var n=t.scrollTop-o._lastScrollTop;o._data.deltaScrollVertical(n)}))),o._register(lP((function(t){var n=o.isFocused.read(t);o._elements.root.classList.toggle("focused",n)}))),o._container.appendChild(o._elements.root),o._outerEditorHeight=o._headerHeight,o._register(o._instantiationService.createInstance(HJ,o._elements.actions,vf.MultiDiffEditorFileToolbar,{actionRunner:o._register(new OJ((function(){var t;return(t=o._viewModel.get())===null||t===void 0?void 0:t.modifiedUri}))),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:function(t){return t.startsWith("navigation")}},actionViewItemProvider:function(t,n){return VW(e,t,n)}}));return o}n.prototype.setScrollLeft=function(t){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(t):this.editor.getOriginalEditor().setScrollLeft(t)};n.prototype.setData=function(t){var n=this;function i(t){return __assign(__assign({},t),{scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1})}this._data=t;var r=t.viewModel.entry.value;r.onOptionsDidChange&&this._dataStore.add(r.onOptionsDidChange((function(){var t;n.editor.updateOptions(i((t=r.options)!==null&&t!==void 0?t:{}))}))),XN((function(e){var o,s,u,a;(o=n._resourceLabel)===null||o===void 0||o.setUri((s=t.viewModel.modifiedUri)!==null&&s!==void 0?s:t.viewModel.originalUri,{strikethrough:t.viewModel.modifiedUri===void 0});var h=!1,c=!1,f=!1,l="";t.viewModel.modifiedUri&&t.viewModel.originalUri&&t.viewModel.modifiedUri.path!==t.viewModel.originalUri.path?(l="R",h=!0):t.viewModel.modifiedUri?t.viewModel.originalUri||(l="A",f=!0):(l="D",c=!0),n._elements.status.classList.toggle("renamed",h),n._elements.status.classList.toggle("deleted",c),n._elements.status.classList.toggle("added",f),n._elements.status.innerText=l,(u=n._resourceLabel2)===null||u===void 0||u.setUri(h?t.viewModel.originalUri:void 0,{strikethrough:!0}),n._dataStore.clear(),n._viewModel.set(t.viewModel,e),n.editor.setModel(t.viewModel.diffEditorViewModel,e),n.editor.updateOptions(i((a=r.options)!==null&&a!==void 0?a:{}))}))};n.prototype.render=function(t,n,i,r){var e=this;this._elements.root.style.visibility="visible",this._elements.root.style.top="".concat(t.start,"px"),this._elements.root.style.height="".concat(t.length,"px"),this._elements.root.style.width="".concat(n,"px"),this._elements.root.style.position="absolute";var o=t.length-this._headerHeight,s=Math.max(0,Math.min(r.start-t.start,o));this._elements.header.style.transform="translateY(".concat(s,"px)"),XN((function(i){e.editor.layout({width:n-16-2,height:t.length-e._outerEditorHeight})}));try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",s>0||i>0),this._elements.header.classList.toggle("collapsed",s===o)};n.prototype.hide=function(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"};return n}(ci);function fZ(t){return bP((function(n){var i=new hi;return i.add(t.onDidFocusEditorWidget((function(){return n(!0)}))),i.add(t.onDidBlurEditorWidget((function(){return n(!1)}))),i}),(function(){return t.hasTextFocus()}))}cZ=uZ([aZ(3,Jh)],cZ);var lZ=function(){function t(t){this._create=t,this._unused=new Set,this._used=new Set,this._itemData=new Map}t.prototype.getUnusedObj=function(t){var n=this;var i;var r;if(this._unused.size===0)r=this._create(t),this._itemData.set(r,t);else{var e=__spreadArray([],this._unused.values(),true);r=(i=e.find((function(i){return n._itemData.get(i).getId()===t.getId()})))!==null&&i!==void 0?i:e[0],this._unused.delete(r),this._itemData.set(r,t),r.setData(t)}return this._used.add(r),{object:r,dispose:function(){n._used.delete(r),n._unused.size>5?r.dispose():n._unused.add(r)}}};t.prototype.dispose=function(){for(var t=0,n=this._used;t<n.length;t++){var i=n[t];i.dispose()}for(var r=0,e=this._unused;r<e.length;r++){var i=e[r];i.dispose()}this._used.clear(),this._unused.clear()};return t}();var vZ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},dZ=function(t,n){return function(i,r){n(i,r,t)}};var gZ=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._element=n,u._dimension=i,u._viewModel=r,u._workbenchUIElementFactory=e,u._parentContextKeyService=o,u._parentInstantiationService=s,u._elements=Fh("div.monaco-component.multiDiffEditor",[Fh("div@content",{style:{overflow:"hidden"}}),Fh("div.monaco-editor@overflowWidgetsDomNode",{})]),u._sizeObserver=u._register(new GG(u._element,void 0)),u._objectPool=u._register(new lZ((function(t){var n=u._instantiationService.createInstance(cZ,u._elements.content,u._elements.overflowWidgetsDomNode,u._workbenchUIElementFactory);return n.setData(t),n}))),u._scrollable=u._register(new fk({forceIntegerValues:!1,scheduleAtNextAnimationFrame:function(t){return Sa(sa(u._element),t)},smoothScrollDuration:100})),u._scrollableElement=u._register(new bk(u._elements.root,{vertical:1,horizontal:1,useShadows:!1},u._scrollable)),u.scrollTop=bP(u._scrollableElement.onScroll,(function(){return u._scrollableElement.getScrollPosition().scrollTop})),u.scrollLeft=bP(u._scrollableElement.onScroll,(function(){return u._scrollableElement.getScrollPosition().scrollLeft})),u._viewItems=hP(u,(function(t,n){var i=u._viewModel.read(t);return i?i.items.read(t).map((function(t){var i;var r=n.add(new pZ(t,u._objectPool,u.scrollLeft,(function(t){u._scrollableElement.setScrollPosition({scrollTop:u._scrollableElement.getScrollPosition().scrollTop+t})}))),e=(i=u._lastDocStates)===null||i===void 0?void 0:i[r.getKey()];return e&&YN((function(t){r.setViewState(e,t)})),r})):[]})),u._spaceBetweenPx=0,u._totalHeight=u._viewItems.map(u,(function(t,n){return t.reduce((function(t,i){return t+i.contentHeight.read(n)+u._spaceBetweenPx}),0)})),u.activeDiffItem=uP(u,(function(t){return u._viewItems.read(t).find((function(n){var i;return(i=n.template.read(t))===null||i===void 0?void 0:i.isFocused.read(t)}))})),u.lastActiveDiffItem=function(t){var n;return uP((function(i){return n=t(i,n),n}))}((function(t,n){var i;return(i=u.activeDiffItem.read(t))!==null&&i!==void 0?i:n})),u._contextKeyService=u._register(u._parentContextKeyService.createScoped(u._element)),u._instantiationService=u._parentInstantiationService.createChild(new SL([Gc,u._contextKeyService])),u._lastDocStates={},u._contextKeyService.createKey($C.inMultiDiffEditor.key,!0),u._register(gP((function(t,n){var i=u._viewModel.read(t);if(i&&i.contextKeys){var r=function(t,i){var r=u._contextKeyService.createKey(t,void 0);r.set(i),n.add(ai((function(){return r.reset()})))};for(var e=0,o=Object.entries(i.contextKeys);e<o.length;e++){var s=o[e],a=s[0],h=s[1];r(a,h)}}})));var a=u._parentContextKeyService.createKey($C.multiDiffEditorAllCollapsed.key,!1);u._register(lP((function(t){var n=u._viewModel.read(t);if(n){var i=n.items.read(t).every((function(n){return n.collapsed.read(t)}));a.set(i)}}))),u._register(lP((function(t){var n=u.lastActiveDiffItem.read(t);YN((function(i){var r;(r=u._viewModel.read(t))===null||r===void 0||r.activeDiffItem.set(n==null?void 0:n.viewModel,i)}))}))),u._register(lP((function(t){var n=u._dimension.read(t);u._sizeObserver.observe(n)}))),u._elements.content.style.position="relative",u._register(lP((function(t){var n=u._sizeObserver.height.read(t);u._elements.root.style.height="".concat(n,"px");var i=u._totalHeight.read(t);u._elements.content.style.height="".concat(i,"px");var r=u._sizeObserver.width.read(t);var e=r;var o=Wd(u._viewItems.read(t),(function(n){return n.maxScroll.read(t).maxScroll}));o&&(e=r+o.maxScroll.read(t).maxScroll),u._scrollableElement.setScrollDimensions({width:r,height:n,scrollHeight:i,scrollWidth:e})}))),n.replaceChildren(u._scrollableElement.getDomNode()),u._register(ai((function(){n.replaceChildren()}))),u._register(u._register(lP((function(t){XN((function(n){u.render(t)}))}))));return u}n.prototype.render=function(t){var n=this.scrollTop.read(t);var i=0,r=0,e=0;var o=this._sizeObserver.height.read(t),s=jd.ofStartAndLength(n,o),u=this._sizeObserver.width.read(t);for(var a=0,h=this._viewItems.read(t);a<h.length;a++){var c=h[a];var f=c.contentHeight.read(t),l=Math.min(f,o),v=jd.ofStartAndLength(r,l),d=jd.ofStartAndLength(e,f);if(d.isBefore(s))i-=f-l,c.hide();else if(d.isAfter(s))c.hide();else{var g=Math.max(0,Math.min(s.start-d.start,f-l));i-=g;var p=jd.ofStartAndLength(n+i,o);c.render(v,g,u,p)}r+=l+this._spaceBetweenPx,e+=f+this._spaceBetweenPx}this._elements.content.style.transform="translateY(".concat(-(n+i),"px)")};return n}(ci);gZ=vZ([dZ(4,Gc),dZ(5,Jh)],gZ);var pZ=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o.viewModel=n,o._objectPool=i,o._scrollLeft=r,o._deltaScrollVertical=e,o._templateRef=o._register(eP(o,void 0)),o.contentHeight=uP(o,(function(t){var n,i,r;return(r=(i=(n=o._templateRef.read(t))===null||n===void 0?void 0:n.object.contentHeight)===null||i===void 0?void 0:i.read(t))!==null&&r!==void 0?r:o.viewModel.lastTemplateData.read(t).contentHeight})),o.maxScroll=uP(o,(function(t){var n,i;return(i=(n=o._templateRef.read(t))===null||n===void 0?void 0:n.object.maxScroll.read(t))!==null&&i!==void 0?i:{maxScroll:0,scrollWidth:0}})),o.template=uP(o,(function(t){var n;return(n=o._templateRef.read(t))===null||n===void 0?void 0:n.object})),o._isHidden=iP(o,!1),o._register(lP((function(t){var n;var i=o._scrollLeft.read(t);(n=o._templateRef.read(t))===null||n===void 0||n.object.setScrollLeft(i)}))),o._register(lP((function(t){var n=o._templateRef.read(t);n&&o._isHidden.read(t)&&(n.object.isFocused.read(t)||o._clear())})));return o}n.prototype.dispose=function(){this._clear(),t.prototype.dispose.call(this)};n.prototype.toString=function(){var t;return"VirtualViewItem(".concat((t=this.viewModel.entry.value.modified)===null||t===void 0?void 0:t.uri.toString(),")")};n.prototype.getKey=function(){return this.viewModel.getKey()};n.prototype.setViewState=function(t,n){var i;this.viewModel.collapsed.set(t.collapsed,n),this._updateTemplateData(n);var r=this.viewModel.lastTemplateData.get(),e=(i=t.selections)===null||i===void 0?void 0:i.map(Br.liftSelection);this.viewModel.lastTemplateData.set(__assign(__assign({},r),{selections:e}),n);var o=this._templateRef.get();o&&e&&o.object.editor.setSelections(e)};n.prototype._updateTemplateData=function(t){var n;var i=this._templateRef.get();i&&this.viewModel.lastTemplateData.set({contentHeight:i.object.contentHeight.get(),selections:(n=i.object.editor.getSelections())!==null&&n!==void 0?n:void 0},t)};n.prototype._clear=function(){var t=this;var n=this._templateRef.get();n&&YN((function(i){t._updateTemplateData(i),n.object.hide(),t._templateRef.set(void 0,i)}))};n.prototype.hide=function(){this._isHidden.set(!0,void 0)};n.prototype.render=function(t,n,i,r){this._isHidden.set(!1,void 0);var e=this._templateRef.get();if(!e){e=this._objectPool.getUnusedObj(new hZ(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(e,void 0);var o=this.viewModel.lastTemplateData.get().selections;o&&e.object.editor.setSelections(o)}e.object.render(t,i,n,r)};return n}(ci);Jw("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},ht(0,"The background color of the diff editor's header")),Jw("multiDiffEditor.background",{dark:"editorBackground",light:"editorBackground",hcDark:"editorBackground",hcLight:"editorBackground"},ht(0,"The background color of the multi file diff editor")),Jw("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},ht(0,"The border color of the multi file diff editor"));var wZ=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},mZ=function(t,n){return function(i,r){n(i,r,t)}};var bZ=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._element=n,e._workbenchUIElementFactory=i,e._instantiationService=r,e._dimension=iP(e,void 0),e._viewModel=iP(e,void 0),e._widgetImpl=hP(e,(function(t,n){return XG(cZ,t),n.add(e._instantiationService.createInstance(XG(gZ,t),e._element,e._dimension,e._viewModel,e._workbenchUIElementFactory))})),e._register(SP(e._widgetImpl));return e}return n}(ci);function yZ(t,n,i){return WG.initialize(i||{}).createInstance(rZ,t,n)}function _Z(t){return WG.get(Qh).onCodeEditorAdd((function(n){t(n)}))}function kZ(t){return WG.get(Qh).onDiffEditorAdd((function(n){t(n)}))}function xZ(){return WG.get(Qh).listCodeEditors()}function CZ(){return WG.get(Qh).listDiffEditors()}function SZ(t,n,i){return WG.initialize(i||{}).createInstance(eZ,t,n)}function DZ(t,n){var i=WG.initialize(n||{});return new bZ(t,{},i)}function AZ(t){if(typeof t.id!="string"||typeof t.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return hc.registerCommand(t.id,t.run)}function OZ(t){if(typeof t.id!="string"||typeof t.label!="string"||typeof t.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");var n=Dc.deserialize(t.precondition),i=new hi;if(i.add(hc.registerCommand(t.id,(function(i){var r=[];for(var e=1;e<arguments.length;e++){r[e-1]=arguments[e]}return Ff.runEditorCommand(i,r,n,(function(n,i,r){return Promise.resolve(t.run.apply(t,__spreadArray([i],r,false)))}))}))),t.contextMenuGroupId){var r={command:{id:t.id,title:t.label},when:n,group:t.contextMenuGroupId,order:t.contextMenuOrder||0};i.add(pf.appendMenuItem(vf.EditorContext,r))}if(Array.isArray(t.keybindings)){var r=WG.get(Yx);if(r instanceof EG){var e=Dc.and(n,Dc.deserialize(t.keybindingContext));i.add(r.addDynamicKeybindings(t.keybindings.map((function(n){return{keybinding:n,command:t.id,when:e}}))))}else console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService")}return i}function EZ(t){return MZ([t])}function MZ(t){var n=WG.get(Yx);return n instanceof EG?n.addDynamicKeybindings(t.map((function(t){return{keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:Dc.deserialize(t.when)}}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),ci.None)}function FZ(t,n,i){var r=WG.get(Zl),e=r.getLanguageIdByMimeType(n)||n;return oZ(WG.get(Yh),r,t,e,i)}function LZ(t,n){var i=WG.get(Zl),r=i.getLanguageIdByMimeType(n)||n||dv;t.setLanguage(i.createById(r))}function jZ(t,n,i){t&&WG.get(pH).changeOne(n,t.uri,i)}function RZ(t){WG.get(pH).changeAll(t,[])}function TZ(t){return WG.get(pH).read(t)}function IZ(t){return WG.get(pH).onMarkerChanged(t)}function BZ(t){return WG.get(Yh).getModel(t)}function NZ(){return WG.get(Yh).getModels()}function PZ(t){return WG.get(Yh).onModelAdded(t)}function WZ(t){return WG.get(Yh).onModelRemoved(t)}function HZ(t){return WG.get(Yh).onModelLanguageChanged((function(n){t({model:n.model,oldLanguage:n.oldLanguageId})}))}function zZ(t){return function(t,n,i){return new lp(t,n,i)}(WG.get(Yh),WG.get(xv),t)}function UZ(t,n){var i=WG.get(Zl),r=WG.get(Aq);return lw.colorizeElement(r,i,t,n).then((function(){r.registerEditorContainer(t)}))}function KZ(t,n,i){var r=WG.get(Zl);return WG.get(Aq).registerEditorContainer(Xe.document.body),lw.colorize(r,t,n,i)}function VZ(t,n,i){if(i===void 0){i=4}return WG.get(Aq).registerEditorContainer(Xe.document.body),lw.colorizeModelLine(t,n,i)}function qZ(t,n){oe.getOrCreate(n);var i=function(t){return oe.get(t)||{getInitialState:function(){return dp},tokenize:function(n,i,r){return gp(t,r)}}}(n),r=lo(t),e=[];var o=i.getInitialState();for(var s=0,u=r.length;s<u;s++){var a=r[s],h=i.tokenize(a,!0,o);e[s]=h.tokens,o=h.endState}return e}function GZ(t,n){WG.get(Aq).defineTheme(t,n)}function $Z(t){WG.get(Aq).setTheme(t)}function JZ(){Gh.clearAllFontInfos()}function ZZ(t,n){return hc.registerCommand({id:t,handler:n})}function QZ(t){var n=this;return WG.get(DR).registerOpener({open:function(i){return __awaiter(n,void 0,void 0,(function(){return __generator(this,(function(n){return[2,(typeof i=="string"&&(i=Cr.parse(i)),t.open(i))]}))}))}})}function YZ(t){var n=this;return WG.get(Qh).registerCodeEditorOpenHandler((function(i,r,e){return __awaiter(n,void 0,void 0,(function(){var n,e,o;return __generator(this,(function(s){switch(s.label){case 0:if(!r)return[2,null];e=(n=i.options)===null||n===void 0?void 0:n.selection;e&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"?o=e:e&&(o={lineNumber:e.startLineNumber,column:e.startColumn});return[4,t.openCodeEditor(r,i.resource,o)];case 1:return[2,s.sent()?r:null]}}))}))}))}function XZ(t,n){return typeof t=="boolean"?t:n}function tQ(t,n){return typeof t=="string"?t:n}function nQ(t,n){if(n===void 0){n=!1}n&&(t=t.map((function(t){return t.toLowerCase()})));var i=function(t){var n={};for(var i=0,r=t;i<r.length;i++){var e=r[i];n[e]=!0}return n}(t);return n?function(t){return i[t.toLowerCase()]!==void 0&&i.hasOwnProperty(t.toLowerCase())}:function(t){return i[t]!==void 0&&i.hasOwnProperty(t)}}function iQ(t,n,i){n=n.replace(/@@/g,"");var r,e=0;do{r=!1,n=n.replace(/@(\w+)/g,(function(i,e){r=!0;var o="";if(typeof t[e]=="string")o=t[e];else{if(!(t[e]&&t[e]instanceof RegExp))throw t[e]===void 0?Zp(t,"language definition does not contain attribute '"+e+"', used at: "+n):Zp(t,"attribute reference '"+e+"' must be a string, used at: "+n);o=t[e].source}return Gp(o)?"":"(?:"+o+")"})),e++}while(r&&e<5);n=n.replace(/\x01/g,"@");var o=(t.ignoreCase?"i":"")+(t.unicode?"u":"");if(i&&n.match(/\$[sS](\d\d?)/g)){var s=null,u=null;return function(i){return u&&s===i||(s=i,u=new RegExp(function(t,n,i){var r=null;return n.replace(/\$[sS](\d\d?)/g,(function(n,e){return r===null&&(r=i.split("."),r.unshift(i)),!Gp(e)&&e<r.length?$p(t,r[e]):""}))}(t,n,i),o)),u}}return new RegExp(n,o)}function rQ(t,n,i,r){var e=-1,o=i,s=i.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);s&&(s[3]&&(e=parseInt(s[3]),s[2]&&(e+=100)),o=s[4]);var u,a="~",h=o;if(o&&o.length!==0?/^\w*$/.test(h)?a="==":(s=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),s&&(a=s[1],h=s[2])):(a="!=",h=""),a!=="~"&&a!=="!~"||!/^(\w|\|)*$/.test(h))if(a==="@"||a==="!@"){var c=t[h];if(!c)throw Zp(t,"the @ match target '"+h+"' is not defined, in rule: "+n);if(!function(t,n){if(!n||!Array.isArray(n))return!1;for(var i=0,r=n;i<r.length;i++){var e=r[i];if(!t(e))return!1}return!0}((function(t){return typeof t=="string"}),c))throw Zp(t,"the @ match target '"+h+"' must be an array of strings, in rule: "+n);var f=nQ(c,t.ignoreCase);u=function(t){return a==="@"?f(t):!f(t)}}else if(a==="~"||a==="!~")if(h.indexOf("$")<0){var l=iQ(t,"^"+h+"$",!1);u=function(t){return a==="~"?l.test(t):!l.test(t)}}else u=function(n,i,r,e){return iQ(t,"^"+Qp(t,h,i,r,e)+"$",!1).test(n)};else if(h.indexOf("$")<0){var v=$p(t,h);u=function(t){return a==="=="?t===v:t!==v}}else{var d=$p(t,h);u=function(n,i,r,e,o){var s=Qp(t,d,i,r,e);return a==="=="?n===s:n!==s}}else{var g=nQ(h.split("|"),t.ignoreCase);u=function(t){return a==="~"?g(t):!g(t)}}return e===-1?{name:i,value:r,test:function(t,n,i,r){return u(t,t,n,i,r)}}:{name:i,value:r,test:function(t,n,i,r){var o=function(t,n,i,r){if(r<0)return t;if(r<n.length)return n[r];if(r>=100){r-=100;var e=i.split(".");if(e.unshift(i),r<e.length)return e[r]}return null}(t,n,i,e);return u(o||"",t,n,i,r)}}}function eQ(t,n,i){if(i){if(typeof i=="string")return i;if(i.token||i.token===""){if(typeof i.token!="string")throw Zp(t,"a 'token' attribute must be of type string, in rule: "+n);{var r={token:i.token};if(i.token.indexOf("$")>=0&&(r.tokenSubst=!0),typeof i.bracket=="string")if(i.bracket==="@open")r.bracket=1;else{if(i.bracket!=="@close")throw Zp(t,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+n);r.bracket=-1}if(i.next){if(typeof i.next!="string")throw Zp(t,"the next state must be a string value in rule: "+n);{var e=i.next;if(!/^(@pop|@push|@popall)$/.test(e)&&(e[0]==="@"&&(e=e.substr(1)),e.indexOf("$")<0&&!function(t,n){var i=n;for(;i&&i.length>0;){if(t.stateNames[i])return!0;var r=i.lastIndexOf(".");i=r<0?null:i.substr(0,r)}return!1}(t,Qp(t,e,"",[],""))))throw Zp(t,"the next state '"+i.next+"' is not defined in rule: "+n);r.next=e}}return typeof i.goBack=="number"&&(r.goBack=i.goBack),typeof i.switchTo=="string"&&(r.switchTo=i.switchTo),typeof i.log=="string"&&(r.log=i.log),typeof i.nextEmbedded=="string"&&(r.nextEmbedded=i.nextEmbedded,t.usesEmbedded=!0),r}}if(Array.isArray(i)){var r=[];for(var e=0,o=i.length;e<o;e++)r[e]=eQ(t,n,i[e]);return{group:r}}if(i.cases){var s=[];for(var o in i.cases)if(i.cases.hasOwnProperty(o)){var u=eQ(t,n,i.cases[o]);o==="@default"||o==="@"||o===""?s.push({test:void 0,value:u,name:o}):o==="@eos"?s.push({test:function(t,n,i,r){return r},value:u,name:o}):s.push(rQ(t,n,o,u))}var a=t.defaultToken;return{test:function(t,n,i,r){for(var e=0,o=s;e<o.length;e++){var u=o[e];if(!u.test||u.test(t,n,i,r))return u.value}return a}}}throw Zp(t,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+n)}return{token:""}}bZ=wZ([mZ(2,Jh)],bZ);var oQ=function(){function t(t){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=t}t.prototype.setRegex=function(t,n){var i;if(typeof n=="string")i=n;else{if(!(n instanceof RegExp))throw Zp(t,"rules must start with a match string or regular expression: "+this.name);i=n.source}this.matchOnlyAtLineStart=i.length>0&&i[0]==="^",this.name=this.name+": "+i,this.regex=iQ(t,"^(?:"+(this.matchOnlyAtLineStart?i.substr(1):i)+")",!0)};t.prototype.setAction=function(t,n){this.action=eQ(t,this.name,n)};t.prototype.resolveRegex=function(t){return this.regex instanceof RegExp?this.regex:this.regex(t)};return t}();function sQ(t,n){if(!n||typeof n!="object")throw new Error("Monarch: expecting a language definition object");var i={};i.languageId=t,i.includeLF=XZ(n.includeLF,!1),i.noThrow=!1,i.maxStack=100,i.start=typeof n.start=="string"?n.start:null,i.ignoreCase=XZ(n.ignoreCase,!1),i.unicode=XZ(n.unicode,!1),i.tokenPostfix=tQ(n.tokenPostfix,"."+i.languageId),i.defaultToken=tQ(n.defaultToken,"source"),i.usesEmbedded=!1;var r=n;function e(t,o,s){for(var u=0,a=s;u<a.length;u++){var h=a[u];var c=h.include;if(c){if(typeof c!="string")throw Zp(i,"an 'include' attribute must be a string at: "+t);if(c[0]==="@"&&(c=c.substr(1)),!n.tokenizer[c])throw Zp(i,"include target '"+c+"' is not defined at: "+t);e(t+"."+c,o,n.tokenizer[c])}else{var f=new oQ(t);if(Array.isArray(h)&&h.length>=1&&h.length<=3)if(f.setRegex(r,h[0]),h.length>=3)if(typeof h[1]=="string")f.setAction(r,{token:h[1],next:h[2]});else{if(typeof h[1]!="object")throw Zp(i,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+t);{var l=h[1];l.next=h[2],f.setAction(r,l)}}else f.setAction(r,h[1]);else{if(!h.regex)throw Zp(i,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+t);h.name&&typeof h.name=="string"&&(f.name=h.name),h.matchOnlyAtStart&&(f.matchOnlyAtLineStart=XZ(h.matchOnlyAtLineStart,!1)),f.setRegex(r,h.regex),f.setAction(r,h.action)}o.push(f)}}}if(r.languageId=t,r.includeLF=i.includeLF,r.ignoreCase=i.ignoreCase,r.unicode=i.unicode,r.noThrow=i.noThrow,r.usesEmbedded=i.usesEmbedded,r.stateNames=n.tokenizer,r.defaultToken=i.defaultToken,!n.tokenizer||typeof n.tokenizer!="object")throw Zp(i,"a language definition must define the 'tokenizer' attribute as an object");i.tokenizer=[];for(var o in n.tokenizer)if(n.tokenizer.hasOwnProperty(o)){i.start||(i.start=o);var s=n.tokenizer[o];i.tokenizer[o]=new Array,e("tokenizer."+o,i.tokenizer[o],s)}if(i.usesEmbedded=r.usesEmbedded,n.brackets){if(!Array.isArray(n.brackets))throw Zp(i,"the 'brackets' attribute must be defined as an array")}else n.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];var u=[];for(var a=0,h=n.brackets;a<h.length;a++){var o=h[a];var s=o;if(s&&Array.isArray(s)&&s.length===3&&(s={token:s[2],open:s[0],close:s[1]}),s.open===s.close)throw Zp(i,"open and close brackets in a 'brackets' attribute must be different: "+s.open+"\n hint: use the 'bracket' attribute if matching on equal brackets is required.");if(typeof s.open!="string"||typeof s.token!="string"||typeof s.close!="string")throw Zp(i,"every element in the 'brackets' array must be a '{open,close,token}' object or array");u.push({token:s.token+i.tokenPostfix,open:$p(i,s.open),close:$p(i,s.close)})}return i.brackets=u,i.noThrow=!0,i}function uQ(t){vv.registerLanguage(t)}function aQ(){var t=[];return t=t.concat(vv.getLanguages()),t}function hQ(t){return WG.get(Zl).languageIdCodec.encodeLanguageId(t)}function cQ(t,n){return WG.withServices((function(){var i=WG.get(Zl).onDidRequestRichLanguageFeatures((function(r){r===t&&(i.dispose(),n())}));return i}))}function fQ(t,n){return WG.withServices((function(){var i=WG.get(Zl).onDidRequestBasicLanguageFeatures((function(r){r===t&&(i.dispose(),n())}));return i}))}function lQ(t,n){if(!WG.get(Zl).isRegisteredLanguageId(t))throw new Error("Cannot set configuration for unknown language ".concat(t));return WG.get(xv).register(t,n,100)}var vQ=function(){function t(t,n){this._languageId=t,this._actual=n}t.prototype.dispose=function(){};t.prototype.getInitialState=function(){return this._actual.getInitialState()};t.prototype.tokenize=function(t,n,i){if(typeof this._actual.tokenize=="function")return dQ.adaptTokenize(this._languageId,this._actual,t,i);throw new Error("Not supported!")};t.prototype.tokenizeEncoded=function(t,n,i){var r=this._actual.tokenizeEncoded(t,i);return new Vr(r.tokens,r.endState)};return t}();var dQ=function(){function t(t,n,i,r){this._languageId=t,this._actual=n,this._languageService=i,this._standaloneThemeService=r}t.prototype.dispose=function(){};t.prototype.getInitialState=function(){return this._actual.getInitialState()};t._toClassicTokens=function(t,n){var i=[];var r=0;for(var e=0,o=t.length;e<o;e++){var s=t[e];var u=s.startIndex;e===0?u=0:u<r&&(u=r),i[e]=new Ur(u,s.scopes,n),r=u}return i};t.adaptTokenize=function(n,i,r,e){var o=i.tokenize(r,e),s=t._toClassicTokens(o.tokens,n);var u;return u=o.endState.equals(e)?e:o.endState,new Kr(s,u)};t.prototype.tokenize=function(n,i,r){return t.adaptTokenize(this._languageId,this._actual,n,r)};t.prototype._toBinaryTokens=function(t,n){var i=t.encodeLanguageId(this._languageId),r=this._standaloneThemeService.getColorTheme().tokenTheme,e=[];var o=0,s=0;for(var u=0,a=n.length;u<a;u++){var h=n[u],c=1024|r.match(i,h.scopes);if(o>0&&e[o-1]===c)continue;var f=h.startIndex;u===0?f=0:f<s&&(f=s),e[o++]=f,e[o++]=c,s=f}var l=new Uint32Array(o);for(var u=0;u<o;u++)l[u]=e[u];return l};t.prototype.tokenizeEncoded=function(t,n,i){var r=this._actual.tokenize(t,i),e=this._toBinaryTokens(this._languageService.languageIdCodec,r.tokens);var o;return o=r.endState.equals(i)?i:r.endState,new Vr(e,o)};return t}();function gQ(t){return t&&typeof t.then=="function"}function pQ(t){var n=WG.get(Aq);if(t){var i=[null];for(var r=1,e=t.length;r<e;r++)i[r]=Ig.fromHex(t[r]);n.setColorMapOverride(i)}else n.setColorMapOverride(null)}function wQ(t,n){return function(t){return"tokenizeEncoded"in t}(n)?new vQ(t,n):new dQ(t,n,WG.get(Zl),WG.get(Aq))}function mQ(t,n){var i=this;var r=new ee((function(){return __awaiter(i,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:return[4,Promise.resolve(n.create())];case 1:i=r.sent();return[2,i?typeof i.getInitialState=="function"?wQ(t,i):new hw(WG.get(Zl),WG.get(Aq),t,sQ(t,i),WG.get(Kl)):null]}}))}))}));return oe.registerFactory(t,r)}function bQ(t,n){if(!WG.get(Zl).isRegisteredLanguageId(t))throw new Error("Cannot set tokens provider for unknown language ".concat(t));return gQ(n)?mQ(t,{create:function(){return n}}):oe.register(t,wQ(t,n))}function yQ(t,n){return gQ(n)?mQ(t,{create:function(){return n}}):oe.register(t,function(n){return new hw(WG.get(Zl),WG.get(Aq),t,sQ(t,n),WG.get(Kl))}(n))}function _Q(t,n){return WG.get(tp).referenceProvider.register(t,n)}function kQ(t,n){return WG.get(tp).renameProvider.register(t,n)}function xQ(t,n){return WG.get(tp).newSymbolNamesProvider.register(t,n)}function CQ(t,n){return WG.get(tp).signatureHelpProvider.register(t,n)}function SQ(t,n){return WG.get(tp).hoverProvider.register(t,{provideHover:function(t,i,r){var e=t.getWordAtPosition(i);return Promise.resolve(n.provideHover(t,i,r)).then((function(t){if(t)return!t.range&&e&&(t.range=new Ir(i.lineNumber,e.startColumn,i.lineNumber,e.endColumn)),t.range||(t.range=new Ir(i.lineNumber,i.column,i.lineNumber,i.column)),t}))}})}function DQ(t,n){return WG.get(tp).documentSymbolProvider.register(t,n)}function AQ(t,n){return WG.get(tp).documentHighlightProvider.register(t,n)}function OQ(t,n){return WG.get(tp).linkedEditingRangeProvider.register(t,n)}function EQ(t,n){return WG.get(tp).definitionProvider.register(t,n)}function MQ(t,n){return WG.get(tp).implementationProvider.register(t,n)}function FQ(t,n){return WG.get(tp).typeDefinitionProvider.register(t,n)}function LQ(t,n){return WG.get(tp).codeLensProvider.register(t,n)}function jQ(t,n,i){return WG.get(tp).codeActionProvider.register(t,{providedCodeActionKinds:i==null?void 0:i.providedCodeActionKinds,documentation:i==null?void 0:i.documentation,provideCodeActions:function(t,i,r,e){var o=WG.get(pH).read({resource:t.uri}).filter((function(t){return Ir.areIntersectingOrTouching(t,i)}));return n.provideCodeActions(t,i,{markers:o,only:r.only,trigger:r.trigger},e)},resolveCodeAction:n.resolveCodeAction})}function RQ(t,n){return WG.get(tp).documentFormattingEditProvider.register(t,n)}function TQ(t,n){return WG.get(tp).documentRangeFormattingEditProvider.register(t,n)}function IQ(t,n){return WG.get(tp).onTypeFormattingEditProvider.register(t,n)}function BQ(t,n){return WG.get(tp).linkProvider.register(t,n)}function NQ(t,n){return WG.get(tp).completionProvider.register(t,n)}function PQ(t,n){return WG.get(tp).colorProvider.register(t,n)}function WQ(t,n){return WG.get(tp).foldingRangeProvider.register(t,n)}function HQ(t,n){return WG.get(tp).declarationProvider.register(t,n)}function zQ(t,n){return WG.get(tp).selectionRangeProvider.register(t,n)}function UQ(t,n){return WG.get(tp).documentSemanticTokensProvider.register(t,n)}function KQ(t,n){return WG.get(tp).documentRangeSemanticTokensProvider.register(t,n)}function VQ(t,n){return WG.get(tp).inlineCompletionsProvider.register(t,n)}function qQ(t,n){return WG.get(tp).inlineEditProvider.register(t,n)}function GQ(t,n){return WG.get(tp).inlayHintsProvider.register(t,n)}var $Q=Zh("IEditorCancelService"),JQ=new qc("cancellableOperation",!1,ht(0,"Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Xl($Q,function(){function t(){this._tokens=new WeakMap}t.prototype.add=function(t,n){var i,r=this._tokens.get(t);return r||(r=t.invokeWithinContext((function(t){return{key:JQ.bindTo(t.get(Gc)),tokens:new tn}})),this._tokens.set(t,r)),r.key.set(!0),i=r.tokens.push(n),function(){i&&(i(),r.key.set(!r.tokens.isEmpty()),i=void 0)}};t.prototype.cancel=function(t){var n=this._tokens.get(t);if(!n)return;var i=n.tokens.pop();i&&(i.cancel(),n.key.set(!n.tokens.isEmpty()))};return t}(),1);var ZQ=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r.editor=n,r._unregister=n.invokeWithinContext((function(t){return t.get($Q).add(n,r)}));return r}n.prototype.dispose=function(){this._unregister(),t.prototype.dispose.call(this)};return n}(ji);If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:JQ})||this}n.prototype.runEditorCommand=function(t,n){t.get($Q).cancel(n)};return n}(Ff)));var QQ=function(){function t(t,n){if(this.flags=n,1&this.flags){var i=t.getModel();this.modelVersionId=i?oo("{0}#{1}",i.uri.toString(),i.getVersionId()):null}else this.modelVersionId=null;4&this.flags?this.position=t.getPosition():this.position=null,2&this.flags?this.selection=t.getSelection():this.selection=null,8&this.flags?(this.scrollLeft=t.getScrollLeft(),this.scrollTop=t.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}t.prototype._equals=function(n){if(!(n instanceof t))return!1;var i=n;return this.modelVersionId===i.modelVersionId&&this.scrollLeft===i.scrollLeft&&this.scrollTop===i.scrollTop&&!(!this.position&&i.position||this.position&&!i.position||this.position&&i.position&&!this.position.equals(i.position))&&!(!this.selection&&i.selection||this.selection&&!i.selection||this.selection&&i.selection&&!this.selection.equalsRange(i.selection))};t.prototype.validate=function(n){return this._equals(new t(n,this.flags))};return t}();var YQ=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,n,e)||this,o._listener=new hi,4&i&&o._listener.add(n.onDidChangeCursorPosition((function(t){r&&Ir.containsPosition(r,t.position)||o.cancel()}))),2&i&&o._listener.add(n.onDidChangeCursorSelection((function(t){r&&Ir.containsRange(r,t.selection)||o.cancel()}))),8&i&&o._listener.add(n.onDidScrollChange((function(t){return o.cancel()}))),1&i&&(o._listener.add(n.onDidChangeModel((function(t){return o.cancel()}))),o._listener.add(n.onDidChangeModelContent((function(t){return o.cancel()}))));return o}n.prototype.dispose=function(){this._listener.dispose(),t.prototype.dispose.call(this)};return n}(ZQ);var XQ=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r._listener=n.onDidChangeContent((function(){return r.cancel()}));return r}n.prototype.dispose=function(){this._listener.dispose(),t.prototype.dispose.call(this)};return n}(ji);function tY(t){return!(!t||typeof t.getEditorType!="function")&&t.getEditorType()===vp.ICodeEditor}function nY(t){return!(!t||typeof t.getEditorType!="function")&&t.getEditorType()===vp.IDiffEditor}function iY(t){return tY(t)?t:nY(t)?t.getModifiedEditor():function(t){return!!t&&typeof t=="object"&&typeof t.onDidChangeActiveEditor=="function"}(t)&&tY(t.activeCodeEditor)?t.activeCodeEditor:null}var rY=function(){function t(){}t._handleEolEdits=function(t,n){var i;var r=[];for(var e=0,o=n;e<o.length;e++){var s=o[e];typeof s.eol=="number"&&(i=s.eol),s.range&&typeof s.text=="string"&&r.push(s)}return typeof i=="number"&&t.hasModel()&&t.getModel().pushEOL(i),r};t._isFullModelReplaceEdit=function(t,n){if(!t.hasModel())return!1;var i=t.getModel(),r=i.validateRange(n.range);return i.getFullModelRange().equalsRange(r)};t.execute=function(n,i,r){r&&n.pushUndoStop();var e=HG.capture(n),o=t._handleEolEdits(n,i);o.length===1&&t._isFullModelReplaceEdit(n,o[0])?n.executeEdits("formatEditsCommand",o.map((function(t){return hB.replace(Ir.lift(t.range),t.text)}))):n.executeEdits("formatEditsCommand",o.map((function(t){return hB.replaceMove(Ir.lift(t.range),t.text)}))),r&&n.pushUndoStop(),e.restoreRelativeVerticalPositionOfCursor(n)};return t}();var eY=function(){function t(t){this.value=t,this._lower=t.toLowerCase()}t.toKey=function(t){return typeof t=="string"?t.toLowerCase():t._lower};return t}();var oY=function(){function t(t){if(this._set=new Set,t)for(var n=0,i=t;n<i.length;n++){var r=i[n];this.add(r)}}t.prototype.add=function(t){this._set.add(eY.toKey(t))};t.prototype.has=function(t){return this._set.has(eY.toKey(t))};return t}();function sY(t,n,i){var r=[],e=new oY,o=t.ordered(i);for(var s=0,u=o;s<u.length;s++){var a=u[s];r.push(a),a.extensionId&&e.add(a.extensionId)}var h=n.ordered(i);var c=function(t){if(t.extensionId){if(e.has(t.extensionId))return"continue";e.add(t.extensionId)}r.push({displayName:t.displayName,extensionId:t.extensionId,provideDocumentFormattingEdits:function(n,i,r){return t.provideDocumentRangeFormattingEdits(n,n.getFullModelRange(),i,r)}})};for(var f=0,l=h;f<l.length;f++){var a=l[f];c(a)}return r}var uY=function(){function t(){}t.setFormatterSelector=function(n){return{dispose:t._selectors.unshift(n)}};t.select=function(n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s;return __generator(this,(function(u){switch(u.label){case 0:if(n.length===0)return[2];o=Yt.first(t._selectors);if(!o)return[3,2];return[4,o(n,i,r,e)];case 1:s=u.sent();return[3,3];case 2:s=void 0;u.label=3;case 3:return[2,s]}}))}))};return t}();function aY(t,n,i,r,e,o,s){return __awaiter(this,void 0,void 0,(function(){var u,a,h,c,f,l;return __generator(this,(function(v){switch(v.label){case 0:u=t.get(Jh),a=t.get(tp).documentRangeFormattingEditProvider,h=tY(n)?n.getModel():n,c=a.ordered(h);return[4,uY.select(c,h,r,2)];case 1:f=v.sent();l=f;if(!l)return[3,3];e.report(f);return[4,u.invokeFunction(hY,f,n,i,o,s)];case 2:l=v.sent();v.label=3;case 3:l;return[2]}}))}))}function hY(t,n,i,r,e,o){return __awaiter(this,void 0,void 0,(function(){var s,u,a,h,c,f,l,v,d,g,p,w,m,b,y,_,w,k,x,w,C,S,w,D,A,O,E,F,w,D,w,L;var j=this;return __generator(this,(function(R){switch(R.label){case 0:a=t.get(vH),h=t.get(kf),c=t.get(dG);tY(i)?(f=i.getModel(),l=new YQ(i,5,void 0,e)):(f=i,l=new XQ(i,e));v=[];d=0;for(g=0,p=M(r).sort(Ir.compareRangesUsingStarts);g<p.length;g++){w=p[g];d>0&&Ir.areIntersectingOrTouching(v[d-1],w)?v[d-1]=Ir.fromPositions(v[d-1].getStartPosition(),w.getEndPosition()):d=v.push(w)}m=function(t){return __awaiter(j,void 0,void 0,(function(){var i,r,e;return __generator(this,(function(o){switch(o.label){case 0:h.trace("[format][provideDocumentRangeFormattingEdits] (request)",(i=n.extensionId)===null||i===void 0?void 0:i.value,t);return[4,n.provideDocumentRangeFormattingEdits(f,t,f.getFormattingOptions(),l.token)];case 1:e=o.sent()||[];return[2,(h.trace("[format][provideDocumentRangeFormattingEdits] (response)",(r=n.extensionId)===null||r===void 0?void 0:r.value,e),e)]}}))}))},b=function(t,n){if(!t.length||!n.length)return!1;var i=t.reduce((function(t,n){return Ir.plusRange(t,n.range)}),t[0].range);if(!n.some((function(t){return Ir.intersectRanges(i,t.range)})))return!1;for(var r=0,e=t;r<e.length;r++){var o=e[r];for(var s=0,u=n;s<u.length;s++){var a=u[s];if(Ir.intersectRanges(o.range,a.range))return!0}}return!1},y=[],_=[];R.label=1;case 1:R.trys.push([1,,18,19]);if(!(typeof n.provideDocumentRangesFormattingEdits=="function"))return[3,3];h.trace("[format][provideDocumentRangeFormattingEdits] (request)",(s=n.extensionId)===null||s===void 0?void 0:s.value,v);return[4,n.provideDocumentRangesFormattingEdits(f,v,f.getFormattingOptions(),l.token)];case 2:w=R.sent()||[];h.trace("[format][provideDocumentRangeFormattingEdits] (response)",(u=n.extensionId)===null||u===void 0?void 0:u.value,w),_.push(w);return[3,13];case 3:k=0,x=v;R.label=4;case 4:if(!(k<x.length))return[3,7];w=x[k];if(l.token.isCancellationRequested)return[2,!0];S=(C=_).push;return[4,m(w)];case 5:S.apply(C,[R.sent()]);R.label=6;case 6:k++;return[3,4];case 7:w=0;R.label=8;case 8:if(!(w<v.length))return[3,13];D=w+1;R.label=9;case 9:if(!(D<v.length))return[3,12];if(l.token.isCancellationRequested)return[2,!0];if(!b(_[w],_[D]))return[3,11];A=Ir.plusRange(v[w],v[D]);return[4,m(A)];case 10:O=R.sent();v.splice(D,1),v.splice(w,1),v.push(A),_.splice(D,1),_.splice(w,1),_.push(O),w=0,D=0;R.label=11;case 11:++D;return[3,9];case 12:++w;return[3,8];case 13:E=0,F=_;R.label=14;case 14:if(!(E<F.length))return[3,17];w=F[E];if(l.token.isCancellationRequested)return[2,!0];return[4,a.computeMoreMinimalEdits(f.uri,w)];case 15:D=R.sent();D&&y.push.apply(y,D);R.label=16;case 16:E++;return[3,14];case 17:return[3,19];case 18:l.dispose();return[7];case 19:if(y.length===0)return[2,!1];if(tY(i))rY.execute(i,y,!0),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{w=y[0].range,L=new Br(w.startLineNumber,w.startColumn,w.endLineNumber,w.endColumn);f.pushEditOperations([L],y.map((function(t){return{text:t.text,range:Ir.lift(t.range),forceMoveMarkers:!0}})),(function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n].range;if(Ir.areIntersectingOrTouching(r,L))return[new Br(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn)]}return null}))}return[2,(c.playSignal(wG.format,{userGesture:o}),!0)]}}))}))}function cY(t,n,i,r,e,o){return __awaiter(this,void 0,void 0,(function(){var s,u,a,h,c,f;return __generator(this,(function(l){switch(l.label){case 0:s=t.get(Jh),u=t.get(tp),a=tY(n)?n.getModel():n,h=sY(u.documentFormattingEditProvider,u.documentRangeFormattingEditProvider,a);return[4,uY.select(h,a,i,1)];case 1:c=l.sent();f=c;if(!f)return[3,3];r.report(c);return[4,s.invokeFunction(fY,c,n,i,e,o)];case 2:f=l.sent();l.label=3;case 3:f;return[2]}}))}))}function fY(t,n,i,r,e,o){return __awaiter(this,void 0,void 0,(function(){var s,u,a,h,c,f,f,l;return __generator(this,(function(v){switch(v.label){case 0:s=t.get(vH),u=t.get(dG);tY(i)?(a=i.getModel(),h=new YQ(i,5,void 0,e)):(a=i,h=new XQ(i,e));v.label=1;case 1:v.trys.push([1,,4,5]);return[4,n.provideDocumentFormattingEdits(a,a.getFormattingOptions(),h.token)];case 2:f=v.sent();return[4,s.computeMoreMinimalEdits(a.uri,f)];case 3:if(c=v.sent(),h.token.isCancellationRequested)return[2,!0];return[3,5];case 4:h.dispose();return[7];case 5:if(!c||c.length===0)return[2,!1];if(tY(i))rY.execute(i,c,r!==2),r!==2&&i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{f=c[0].range,l=new Br(f.startLineNumber,f.startColumn,f.endLineNumber,f.endColumn);a.pushEditOperations([l],c.map((function(t){return{text:t.text,range:Ir.lift(t.range),forceMoveMarkers:!0}})),(function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n].range;if(Ir.areIntersectingOrTouching(r,l))return[new Br(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn)]}return null}))}return[2,(u.playSignal(wG.format,{userGesture:o}),!0)]}}))}))}function lY(t,n,i,r,e,o,s){var u=n.onTypeFormattingEditProvider.ordered(i);return u.length===0||u[0].autoFormatTriggerCharacters.indexOf(e)<0?Promise.resolve(void 0):Promise.resolve(u[0].provideOnTypeFormattingEdits(i,r,e,o,s)).catch($n).then((function(n){return t.computeMoreMinimalEdits(i.uri,n)}))}uY._selectors=new tn,hc.registerCommand("_executeFormatRangeProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u,a;return __generator(this,(function(h){switch(h.label){case 0:i=n[0],r=n[1],e=n[2];Z(Cr.isUri(i)),Z(Ir.isIRange(r));o=t.get(Xh),s=t.get(vH),u=t.get(tp);return[4,o.createModelReference(i)];case 1:a=h.sent();try{return[2,function(t,n,i,r,e,o){return __awaiter(this,void 0,void 0,(function(){var s,u,a,h,c;return __generator(this,(function(f){switch(f.label){case 0:s=n.documentRangeFormattingEditProvider.ordered(i);u=0,a=s;f.label=1;case 1:if(!(u<a.length))return[3,5];h=a[u];return[4,Promise.resolve(h.provideDocumentRangeFormattingEdits(i,r,e,o)).catch($n)];case 2:c=f.sent();if(!k(c))return[3,4];return[4,t.computeMoreMinimalEdits(i.uri,c)];case 3:return[2,f.sent()];case 4:u++;return[3,1];case 5:return[2]}}))}))}(s,u,a.object.textEditorModel,Ir.lift(r),e,Fi.None)]}finally{a.dispose()}return[2]}}))}))})),hc.registerCommand("_executeFormatDocumentProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:i=n[0],r=n[1];Z(Cr.isUri(i));e=t.get(Xh),o=t.get(vH),s=t.get(tp);return[4,e.createModelReference(i)];case 1:u=a.sent();try{return[2,function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h;return __generator(this,(function(c){switch(c.label){case 0:o=sY(n.documentFormattingEditProvider,n.documentRangeFormattingEditProvider,i);s=0,u=o;c.label=1;case 1:if(!(s<u.length))return[3,5];a=u[s];return[4,Promise.resolve(a.provideDocumentFormattingEdits(i,r,e)).catch($n)];case 2:h=c.sent();if(!k(h))return[3,4];return[4,t.computeMoreMinimalEdits(i.uri,h)];case 3:return[2,c.sent()];case 4:s++;return[3,1];case 5:return[2]}}))}))}(o,s,u.object.textEditorModel,r,Fi.None)]}finally{u.dispose()}return[2]}}))}))})),hc.registerCommand("_executeFormatOnTypeProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u,a,h;return __generator(this,(function(c){switch(c.label){case 0:i=n[0],r=n[1],e=n[2],o=n[3];Z(Cr.isUri(i)),Z(Tr.isIPosition(r)),Z(typeof e=="string");s=t.get(Xh),u=t.get(vH),a=t.get(tp);return[4,s.createModelReference(i)];case 1:h=c.sent();try{return[2,lY(u,a,h.object.textEditorModel,Tr.lift(r),e,o,Fi.None)]}finally{h.dispose()}return[2]}}))}))})),Vn.wrappingIndent.defaultValue=0,Vn.glyphMargin.defaultValue=!1,Vn.autoIndent.defaultValue=3,Vn.overviewRulerLanes.defaultValue=2,uY.setFormatterSelector((function(t,n,i){return Promise.resolve(t[0])}));var vY=Ye();vY.editor={create:yZ,getEditors:xZ,getDiffEditors:CZ,onDidCreateEditor:_Z,onDidCreateDiffEditor:kZ,createDiffEditor:SZ,addCommand:AZ,addEditorAction:OZ,addKeybindingRule:EZ,addKeybindingRules:MZ,createModel:FZ,setModelLanguage:LZ,setModelMarkers:jZ,getModelMarkers:TZ,removeAllMarkers:RZ,onDidChangeMarkers:IZ,getModels:NZ,getModel:BZ,onDidCreateModel:PZ,onWillDisposeModel:WZ,onDidChangeModelLanguage:HZ,createWebWorker:zZ,colorizeElement:UZ,colorize:KZ,colorizeModelLine:VZ,tokenize:qZ,defineTheme:GZ,setTheme:$Z,remeasureFonts:JZ,registerCommand:ZZ,registerLinkOpener:QZ,registerEditorOpener:YZ,AccessibilitySupport:ue,ContentWidgetPositionPreference:ve,CursorChangeReason:de,DefaultEndOfLine:ge,EditorAutoIndentStrategy:we,EditorOption:me,EndOfLinePreference:be,EndOfLineSequence:ye,MinimapPosition:Me,MinimapSectionHeaderStyle:Fe,MouseTargetType:Le,OverlayWidgetPositionPreference:Re,OverviewRulerLane:Te,GlyphMarginLane:_e,RenderLineNumbersType:Ne,RenderMinimap:Pe,ScrollbarVisibility:He,ScrollType:We,TextEditorCursorBlinkingStyle:Ge,TextEditorCursorStyle:$e,TrackedRangeStickiness:Je,WrappingIndent:Ze,InjectedTextCursorStops:xe,PositionAffinity:Be,ShowLightbulbIconMode:Ue,ConfigurationChangedEvent:an,BareFontInfo:Kh,FontInfo:Vh,TextModelResolvedOptions:pd,FindMatch:wd,ApplyUpdateResult:fn,EditorZoom:zh,createMultiFileDiffEditor:DZ,EditorType:vp,EditorOptions:Vn},vY.languages={register:uQ,getLanguages:aQ,onLanguage:cQ,onLanguageEncountered:fQ,getEncodedLanguageId:hQ,setLanguageConfiguration:lQ,setColorMap:pQ,registerTokensProviderFactory:mQ,setTokensProvider:bQ,setMonarchTokensProvider:yQ,registerReferenceProvider:_Q,registerRenameProvider:kQ,registerNewSymbolNameProvider:xQ,registerCompletionItemProvider:NQ,registerSignatureHelpProvider:CQ,registerHoverProvider:SQ,registerDocumentSymbolProvider:DQ,registerDocumentHighlightProvider:AQ,registerLinkedEditingRangeProvider:OQ,registerDefinitionProvider:EQ,registerImplementationProvider:MQ,registerTypeDefinitionProvider:FQ,registerCodeLensProvider:LQ,registerCodeActionProvider:jQ,registerDocumentFormattingEditProvider:RQ,registerDocumentRangeFormattingEditProvider:TQ,registerOnTypeFormattingEditProvider:IQ,registerLinkProvider:BQ,registerColorProvider:PQ,registerFoldingRangeProvider:WQ,registerDeclarationProvider:HQ,registerSelectionRangeProvider:zQ,registerDocumentSemanticTokensProvider:UQ,registerDocumentRangeSemanticTokensProvider:KQ,registerInlineCompletionsProvider:VQ,registerInlineEditProvider:qQ,registerInlayHintsProvider:GQ,DocumentHighlightKind:pe,CompletionItemKind:ce,CompletionItemTag:fe,CompletionItemInsertTextRule:he,SymbolKind:Ve,SymbolTag:qe,IndentAction:ke,CompletionTriggerKind:le,SignatureHelpTriggerKind:Ke,InlayHintKind:Ce,InlineCompletionTriggerKind:Se,InlineEditTriggerKind:De,CodeActionTriggerType:ae,NewSymbolNameTag:je,PartialAcceptTriggerKind:Ie,FoldingRangeKind:re,SelectedSuggestionInfo:Qr};var dY=vY.CancellationTokenSource,gY=vY.Emitter,pY=vY.KeyCode,wY=vY.KeyMod,mY=vY.Position,bY=vY.Range,yY=vY.Selection,_Y=vY.SelectionDirection,kY=vY.MarkerSeverity,xY=vY.MarkerTag,CY=vY.Uri,SY=vY.Token,DY=vY.editor,AY=vY.languages,OY=globalThis.MonacoEnvironment;(OY!=null&&OY.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=vY),globalThis.require!==void 0&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var EY=t("j",Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:dY,Emitter:gY,KeyCode:pY,KeyMod:wY,MarkerSeverity:kY,MarkerTag:xY,Position:mY,Range:bY,Selection:yY,SelectionDirection:_Y,Token:SY,Uri:CY,editor:DY,languages:AY},Symbol.toStringTag,{value:"Module"})));var MY=Object.defineProperty,FY=Object.getOwnPropertyDescriptor,LY=Object.getOwnPropertyNames,jY=Object.prototype.hasOwnProperty,RY={};(function(t,n,i,r){if(n&&typeof n=="object"||typeof n=="function"){var e=function(e){jY.call(t,e)||e===i||MY(t,e,{get:function(){return n[e]},enumerable:!(r=FY(n,e))||r.enumerable})};for(var o=0,s=LY(n);o<s.length;o++){var u=s[o];e(u)}}})(RY,EY,"default");var TY={},IY={},BY=function(){function t(t){var n=this;this._languageId=t,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((function(t,i){n._lazyLoadPromiseResolve=t,n._lazyLoadPromiseReject=i}))}t.getOrCreate=function(n){return IY[n]||(IY[n]=new t(n)),IY[n]};t.prototype.load=function(){var t=this;return this._loadingTriggered||(this._loadingTriggered=!0,TY[this._languageId].loader().then((function(n){return t._lazyLoadPromiseResolve(n)}),(function(n){return t._lazyLoadPromiseReject(n)}))),this._lazyLoadPromise};return t}();function NY(t){var n=this;var i=t.id;TY[i]=t,RY.languages.register(t);var r=BY.getOrCreate(i);RY.languages.registerTokensProviderFactory(i,{create:function(){return __awaiter(n,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,r.load()];case 1:return[2,t.sent().language]}}))}))}}),RY.languages.onLanguageEncountered(i,(function(){return __awaiter(n,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,r.load()];case 1:t=n.sent();RY.languages.setLanguageConfiguration(i,t.conf);return[2]}}))}))}))}NY({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:function(){return n.import("./p-23fb52cd.system.js")}}),NY({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:function(){return n.import("./p-76dda0d2.system.js")}}),NY({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:function(){return n.import("./p-eb8b36ef.system.js")}}),NY({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:function(){return n.import("./p-54bfb785.system.js")}}),NY({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:function(){return n.import("./p-9f50d657.system.js")}}),NY({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:function(){return n.import("./p-9989d8d4.system.js")}}),NY({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:function(){return n.import("./p-3edf5b54.system.js")}}),NY({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:function(){return n.import("./p-e1e224db.system.js")}}),NY({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:function(){return n.import("./p-543c2b50.system.js")}}),NY({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:function(){return n.import("./p-543c2b50.system.js")}}),NY({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:function(){return n.import("./p-306240ce.system.js")}}),NY({id:"csp",extensions:[],aliases:["CSP","csp"],loader:function(){return n.import("./p-e37b738a.system.js")}}),NY({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:function(){return n.import("./p-98da8097.system.js")}}),NY({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:function(){return n.import("./p-ec9adfb8.system.js")}}),NY({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:function(){return n.import("./p-98922439.system.js")}}),NY({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:function(){return n.import("./p-74c9186f.system.js")}}),NY({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:function(){return n.import("./p-804cc852.system.js")}}),NY({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:function(){return n.import("./p-b5b381ff.system.js")}}),NY({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:function(){return n.import("./p-d278b771.system.js")}}),NY({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:function(){return n.import("./p-0ee25981.system.js")}}),NY({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:function(){return n.import("./p-666ddf3f.system.js").then((function(t){return t.TagAutoInterpolationDollar}))}}),NY({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:function(){return n.import("./p-666ddf3f.system.js").then((function(t){return t.TagAngleInterpolationDollar}))}}),NY({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:function(){return n.import("./p-666ddf3f.system.js").then((function(t){return t.TagBracketInterpolationDollar}))}}),NY({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:function(){return n.import("./p-666ddf3f.system.js").then((function(t){return t.TagAngleInterpolationBracket}))}}),NY({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:function(){return n.import("./p-666ddf3f.system.js").then((function(t){return t.TagBracketInterpolationBracket}))}}),NY({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:function(){return n.import("./p-666ddf3f.system.js").then((function(t){return t.TagAutoInterpolationDollar}))}}),NY({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:function(){return n.import("./p-666ddf3f.system.js").then((function(t){return t.TagAutoInterpolationBracket}))}}),NY({id:"go",extensions:[".go"],aliases:["Go"],loader:function(){return n.import("./p-3befca0d.system.js")}}),NY({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:function(){return n.import("./p-09f0ca5c.system.js")}}),NY({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:function(){return n.import("./p-5ede2bc2.system.js")}}),NY({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:function(){return n.import("./p-1536fb82.system.js")}}),NY({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:function(){return n.import("./p-6c5717c7.system.js")}}),NY({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:function(){return n.import("./p-60fbc39a.system.js")}}),NY({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:function(){return n.import("./p-38b2e31a.system.js")}}),NY({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:function(){return n.import("./p-e55785d8.system.js")}}),NY({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:function(){return n.import("./p-a423f971.system.js")}}),NY({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:function(){return n.import("./p-c63cd7ac.system.js")}}),NY({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:function(){return n.import("./p-b7494c3d.system.js")}}),NY({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:function(){return n.import("./p-3ca08a8a.system.js")}}),NY({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:function(){return n.import("./p-bc9d9186.system.js")}}),NY({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:function(){return n.import("./p-d15aa4c0.system.js")}}),NY({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:function(){return n.import("./p-848c1f32.system.js")}}),NY({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:function(){return n.import("./p-744472b0.system.js")}}),NY({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:function(){return n.import("./p-c40fb984.system.js")}}),NY({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:function(){return n.import("./p-40b15410.system.js")}}),NY({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:function(){return n.import("./p-a8b0c203.system.js")}}),NY({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:function(){return n.import("./p-6950a80c.system.js")}}),NY({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:function(){return n.import("./p-a9230587.system.js")}}),NY({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:function(){return n.import("./p-508fa302.system.js")}}),NY({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:function(){return n.import("./p-7d188465.system.js")}}),NY({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:function(){return n.import("./p-849a8a89.system.js")}}),NY({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:function(){return n.import("./p-042fe3a7.system.js")}}),NY({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:function(){return n.import("./p-5760dca4.system.js")}}),NY({id:"pla",extensions:[".pla"],loader:function(){return n.import("./p-21b928d2.system.js")}}),NY({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:function(){return n.import("./p-078fd04a.system.js")}}),NY({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:function(){return n.import("./p-70f2de8c.system.js")}}),NY({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:function(){return n.import("./p-dff1a840.system.js")}}),NY({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:function(){return n.import("./p-58de6036.system.js")}}),NY({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:function(){return n.import("./p-4ab7f04d.system.js")}}),NY({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:function(){return n.import("./p-7a7907c5.system.js")}}),NY({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:function(){return n.import("./p-9ac6c736.system.js")}}),NY({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:function(){return n.import("./p-e1acc3e0.system.js")}}),NY({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:function(){return n.import("./p-175e3fef.system.js")}}),NY({id:"redis",extensions:[".redis"],aliases:["redis"],loader:function(){return n.import("./p-3e0dcdd8.system.js")}}),NY({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:function(){return n.import("./p-7dbe0924.system.js")}}),NY({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:function(){return n.import("./p-9b63c052.system.js")}}),NY({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:function(){return n.import("./p-3f45425e.system.js")}}),NY({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:function(){return n.import("./p-c13c7fe4.system.js")}}),NY({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:function(){return n.import("./p-bc7ac034.system.js")}}),NY({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:function(){return n.import("./p-83ea3be0.system.js")}}),NY({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:function(){return n.import("./p-28925258.system.js")}}),NY({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:function(){return n.import("./p-3541ba51.system.js")}}),NY({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:function(){return n.import("./p-76aa8b79.system.js")}}),NY({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:function(){return n.import("./p-282ed205.system.js")}}),NY({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:function(){return n.import("./p-b976f035.system.js")}}),NY({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:function(){return n.import("./p-62899a8b.system.js")}}),NY({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:function(){return n.import("./p-aaca01e4.system.js")}}),NY({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:function(){return n.import("./p-392d01b9.system.js")}}),NY({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:function(){return n.import("./p-fea96bf4.system.js")}}),NY({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:function(){return n.import("./p-e8c7a7eb.system.js")}}),NY({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:function(){return n.import("./p-e8c7a7eb.system.js")}}),NY({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:function(){return n.import("./p-4471222c.system.js")}}),NY({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:function(){return n.import("./p-79040ca1.system.js")}}),NY({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:function(){return n.import("./p-53a439ff.system.js")}}),NY({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:function(){return n.import("./p-3e404d72.system.js")}}),NY({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:function(){return n.import("./p-b3d736b8.system.js")}}),NY({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:function(){return n.import("./p-1e662007.system.js")}}),NY({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:function(){return n.import("./p-d90d5d50.system.js")}});var PY=Object.defineProperty,WY=Object.getOwnPropertyDescriptor,HY=Object.getOwnPropertyNames,zY=Object.prototype.hasOwnProperty,UY={};(function(t,n,i){(function(t,n,i,r){if(n&&typeof n=="object"||typeof n=="function"){var e=function(e){zY.call(t,e)||e===i||PY(t,e,{get:function(){return n[e]},enumerable:!(r=WY(n,e))||r.enumerable})};for(var o=0,s=HY(n);o<s.length;o++){var u=s[o];e(u)}}})(t,n,"default")})(UY,EY);var KY=function(){function t(t,n,i){this._onDidChange=new UY.Emitter,this._languageId=t,this.setOptions(n),this.setModeConfiguration(i)}Object.defineProperty(t.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"diagnosticsOptions",{get:function(){return this.options},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:false,configurable:true});t.prototype.setOptions=function(t){this._options=t||Object.create(null),this._onDidChange.fire(this)};t.prototype.setDiagnosticsOptions=function(t){this.setOptions(t)};t.prototype.setModeConfiguration=function(t){this._modeConfiguration=t||Object.create(null),this._onDidChange.fire(this)};return t}(),VY={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},qY={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},GY=new KY("css",VY,qY),$Y=new KY("scss",VY,qY),JY=new KY("less",VY,qY);function ZY(){return n.import("./p-4b2e305f.system.js")}UY.languages.css={cssDefaults:GY,lessDefaults:JY,scssDefaults:$Y},UY.languages.onLanguage("less",(function(){ZY().then((function(t){return t.setupMode(JY)}))})),UY.languages.onLanguage("scss",(function(){ZY().then((function(t){return t.setupMode($Y)}))})),UY.languages.onLanguage("css",(function(){ZY().then((function(t){return t.setupMode(GY)}))}));var QY=Object.defineProperty,YY=Object.getOwnPropertyDescriptor,XY=Object.getOwnPropertyNames,tX=Object.prototype.hasOwnProperty,nX={};(function(t,n,i){(function(t,n,i,r){if(n&&typeof n=="object"||typeof n=="function"){var e=function(e){tX.call(t,e)||e===i||QY(t,e,{get:function(){return n[e]},enumerable:!(r=YY(n,e))||r.enumerable})};for(var o=0,s=XY(n);o<s.length;o++){var u=s[o];e(u)}}})(t,n,"default")})(nX,EY);var iX=function(){function t(t,n,i){this._onDidChange=new nX.Emitter,this._languageId=t,this.setOptions(n),this.setModeConfiguration(i)}Object.defineProperty(t.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:false,configurable:true});t.prototype.setOptions=function(t){this._options=t||Object.create(null),this._onDidChange.fire(this)};t.prototype.setModeConfiguration=function(t){this._modeConfiguration=t||Object.create(null),this._onDidChange.fire(this)};return t}(),rX={format:{tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},suggest:{},data:{useDefaultDataProvider:!0}};function eX(t){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:t===oX,documentFormattingEdits:t===oX,documentRangeFormattingEdits:t===oX}}var oX="html",sX="handlebars",uX="razor",aX=dX(oX,rX,eX(oX)),hX=aX.defaults,cX=dX(sX,rX,eX(sX)),fX=cX.defaults,lX=dX(uX,rX,eX(uX)),vX=lX.defaults;function dX(t,i,r){var e=this;if(i===void 0){i=rX}if(r===void 0){r=eX(t)}var o=new iX(t,i,r);var s;var u=nX.languages.onLanguage(t,(function(){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,n.import("./p-009bfa6b.system.js")];case 1:s=t.sent().setupMode(o);return[2]}}))}))}));return{defaults:o,dispose:function(){u.dispose(),s==null||s.dispose(),s=void 0}}}nX.languages.html={htmlDefaults:hX,razorDefaults:vX,handlebarDefaults:fX,htmlLanguageService:aX,handlebarLanguageService:cX,razorLanguageService:lX,registerHTMLLanguageService:dX};var gX=new(function(){function t(t,n,i){this._onDidChange=new gY,this._languageId=t,this.setDiagnosticsOptions(n),this.setModeConfiguration(i)}Object.defineProperty(t.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:false,configurable:true});t.prototype.setDiagnosticsOptions=function(t){this._diagnosticsOptions=t||Object.create(null),this._onDidChange.fire(this)};t.prototype.setModeConfiguration=function(t){this._modeConfiguration=t||Object.create(null),this._onDidChange.fire(this)};return t}())("json",{validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},{documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0});function pX(){return n.import("./p-78c0340c.system.js")}AY.json={jsonDefaults:gX,getWorker:function(){return pX().then((function(t){return t.getWorker()}))}},AY.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]}),AY.onLanguage("json",(function(){pX().then((function(t){return t.setupMode(gX)}))}));var wX=Object.defineProperty,mX=Object.getOwnPropertyDescriptor,bX=Object.getOwnPropertyNames,yX=Object.prototype.hasOwnProperty,_X={};(function(t,n,i){(function(t,n,i,r){if(n&&typeof n=="object"||typeof n=="function"){var e=function(e){yX.call(t,e)||e===i||wX(t,e,{get:function(){return n[e]},enumerable:!(r=mX(n,e))||r.enumerable})};for(var o=0,s=bX(n);o<s.length;o++){var u=s[o];e(u)}}})(t,n,"default")})(_X,EY);var kX=function(t){return t[t.None=0]="None",t[t.CommonJS=1]="CommonJS",t[t.AMD=2]="AMD",t[t.UMD=3]="UMD",t[t.System=4]="System",t[t.ES2015=5]="ES2015",t[t.ESNext=99]="ESNext",t}(kX||{}),xX=function(t){return t[t.None=0]="None",t[t.Preserve=1]="Preserve",t[t.React=2]="React",t[t.ReactNative=3]="ReactNative",t[t.ReactJSX=4]="ReactJSX",t[t.ReactJSXDev=5]="ReactJSXDev",t}(xX||{}),CX=function(t){return t[t.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",t[t.LineFeed=1]="LineFeed",t}(CX||{}),SX=function(t){return t[t.ES3=0]="ES3",t[t.ES5=1]="ES5",t[t.ES2015=2]="ES2015",t[t.ES2016=3]="ES2016",t[t.ES2017=4]="ES2017",t[t.ES2018=5]="ES2018",t[t.ES2019=6]="ES2019",t[t.ES2020=7]="ES2020",t[t.ESNext=99]="ESNext",t[t.JSON=100]="JSON",t[t.Latest=99]="Latest",t}(SX||{}),DX=function(t){return t[t.Classic=1]="Classic",t[t.NodeJs=2]="NodeJs",t}(DX||{}),AX=function(){function t(t,n,i,r,e){this._onDidChange=new _X.Emitter,this._onDidExtraLibsChange=new _X.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(t),this.setDiagnosticsOptions(n),this.setWorkerOptions(i),this.setInlayHintsOptions(r),this.setModeConfiguration(e),this._onDidExtraLibsChangeTimeout=-1}Object.defineProperty(t.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"onDidExtraLibsChange",{get:function(){return this._onDidExtraLibsChange.event},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"workerOptions",{get:function(){return this._workerOptions},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"inlayHintsOptions",{get:function(){return this._inlayHintsOptions},enumerable:false,configurable:true});t.prototype.getExtraLibs=function(){return this._extraLibs};t.prototype.addExtraLib=function(t,n){var i=this;var r;if(r=n===void 0?"ts:extralib-".concat(Math.random().toString(36).substring(2,15)):n,this._extraLibs[r]&&this._extraLibs[r].content===t)return{dispose:function(){}};var e=1;return this._removedExtraLibs[r]&&(e=this._removedExtraLibs[r]+1),this._extraLibs[r]&&(e=this._extraLibs[r].version+1),this._extraLibs[r]={content:t,version:e},this._fireOnDidExtraLibsChangeSoon(),{dispose:function(){var t=i._extraLibs[r];t&&t.version===e&&(delete i._extraLibs[r],i._removedExtraLibs[r]=e,i._fireOnDidExtraLibsChangeSoon())}}};t.prototype.setExtraLibs=function(t){for(var n in this._extraLibs)this._removedExtraLibs[n]=this._extraLibs[n].version;if(this._extraLibs=Object.create(null),t&&t.length>0)for(var i=0,r=t;i<r.length;i++){var n=r[i];var e=n.filePath||"ts:extralib-".concat(Math.random().toString(36).substring(2,15)),o=n.content;var s=1;this._removedExtraLibs[e]&&(s=this._removedExtraLibs[e]+1),this._extraLibs[e]={content:o,version:s}}this._fireOnDidExtraLibsChangeSoon()};t.prototype._fireOnDidExtraLibsChangeSoon=function(){var t=this;this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout((function(){t._onDidExtraLibsChangeTimeout=-1,t._onDidExtraLibsChange.fire(void 0)}),0))};t.prototype.getCompilerOptions=function(){return this._compilerOptions};t.prototype.setCompilerOptions=function(t){this._compilerOptions=t||Object.create(null),this._onDidChange.fire(void 0)};t.prototype.getDiagnosticsOptions=function(){return this._diagnosticsOptions};t.prototype.setDiagnosticsOptions=function(t){this._diagnosticsOptions=t||Object.create(null),this._onDidChange.fire(void 0)};t.prototype.setWorkerOptions=function(t){this._workerOptions=t||Object.create(null),this._onDidChange.fire(void 0)};t.prototype.setInlayHintsOptions=function(t){this._inlayHintsOptions=t||Object.create(null),this._onDidChange.fire(void 0)};t.prototype.setMaximumWorkerIdleTime=function(t){};t.prototype.setEagerModelSync=function(t){this._eagerModelSync=t};t.prototype.getEagerModelSync=function(){return this._eagerModelSync};t.prototype.setModeConfiguration=function(t){this._modeConfiguration=t||Object.create(null),this._onDidChange.fire(void 0)};return t}(),OX={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},EX=t("s",new AX({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},OX)),MX=new AX({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},OX);function FX(){return n.import("./p-a0e05eea.system.js")}_X.languages.typescript={ModuleKind:kX,JsxEmit:xX,NewLineKind:CX,ScriptTarget:SX,ModuleResolutionKind:DX,typescriptVersion:"5.0.2",typescriptDefaults:EX,javascriptDefaults:MX,getTypeScriptWorker:function(){return FX().then((function(t){return t.getTypeScriptWorker()}))},getJavaScriptWorker:function(){return FX().then((function(t){return t.getJavaScriptWorker()}))}},_X.languages.onLanguage("typescript",(function(){return FX().then((function(t){return t.setupTypeScript(EX)}))})),_X.languages.onLanguage("javascript",(function(){return FX().then((function(t){return t.setupJavaScript(MX)}))}));var LX=function(t){__extends(n,t);function n(){return t.call(this,{id:"diffEditor.toggleShowMovedCodeBlocks",title:ct(0,"Toggle Show Moved Code Blocks"),precondition:Dc.has("isInDiffEditor")})||this}n.prototype.run=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r=t.get(Kl),e=!r.getValue("diffEditor.experimental.showMoves");r.updateValue("diffEditor.experimental.showMoves",e)};return n}(bf);var jX=function(t){__extends(n,t);function n(){return t.call(this,{id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:ct(0,"Toggle Use Inline View When Space Is Limited"),precondition:Dc.has("isInDiffEditor")})||this}n.prototype.run=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r=t.get(Kl),e=!r.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");r.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",e)};return n}(bf);var RX=ct(0,"Diff Editor");var TX=function(t){__extends(n,t);function n(){return t.call(this,{id:"diffEditor.revert",title:ct(0,"Revert"),f1:!1,category:RX})||this}n.prototype.run=function(t,n){var i;var r=function(t,n,i){return t.get(Qh).listDiffEditors().find((function(t){var r,e;var o=t.getModifiedEditor(),s=t.getOriginalEditor();return o&&((r=o.getModel())===null||r===void 0?void 0:r.uri.toString())===i.toString()&&s&&((e=s.getModel())===null||e===void 0?void 0:e.uri.toString())===n.toString()}))||null}(t,n.originalUri,n.modifiedUri);r instanceof ZJ&&r.revertRangeMappings((i=n.mapping.innerChanges)!==null&&i!==void 0?i:[])};return n}(bf);var IX=ct(0,"Accessible Diff Viewer");var BX=function(t){__extends(n,t);function n(){return t.call(this,{id:n.id,title:ct(0,"Go to Next Difference"),category:IX,precondition:Dc.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})||this}n.prototype.run=function(t){var n=PX(t);n==null||n.accessibleDiffViewerNext()};return n}(bf);BX.id="editor.action.accessibleDiffViewer.next";var NX=function(t){__extends(n,t);function n(){return t.call(this,{id:n.id,title:ct(0,"Go to Previous Difference"),category:IX,precondition:Dc.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})||this}n.prototype.run=function(t){var n=PX(t);n==null||n.accessibleDiffViewerPrev()};return n}(bf);function PX(t){var n=t.get(Qh).listDiffEditors(),i=Ka();if(i){for(var r=0,e=n;r<e.length;r++){var o=e[r];if(WX(o.getContainerDomNode(),i))return o}}return null}function WX(t,n){var i=n;for(;i;){if(i===t)return!0;i=i.parentElement}return!1}NX.id="editor.action.accessibleDiffViewer.prev",yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"diffEditor.toggleCollapseUnchangedRegions",title:ct(0,"Toggle Collapse Unchanged Regions"),icon:Hr.map,toggled:Dc.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:Dc.has("isInDiffEditor"),menu:{when:Dc.has("isInDiffEditor"),id:vf.EditorTitle,order:22,group:"navigation"}})||this}n.prototype.run=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r=t.get(Kl),e=!r.getValue("diffEditor.hideUnchangedRegions.enabled");r.updateValue("diffEditor.hideUnchangedRegions.enabled",e)};return n}(bf)),yf(LX),yf(jX),pf.appendMenuItem(vf.EditorTitle,{command:{id:(new jX).desc.id,title:ht(0,"Use Inline View When Space Is Limited"),toggled:Dc.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:Dc.has("isInDiffEditor")},order:11,group:"1_diff",when:Dc.and($C.diffEditorRenderSideBySideInlineBreakpointReached,Dc.has("isInDiffEditor"))}),pf.appendMenuItem(vf.EditorTitle,{command:{id:(new LX).desc.id,title:ht(0,"Show Moved Code Blocks"),icon:Hr.move,toggled:Fc.create("config.diffEditor.experimental.showMoves",!0),precondition:Dc.has("isInDiffEditor")},order:10,group:"1_diff",when:Dc.has("isInDiffEditor")}),yf(TX);for(var HX=0,zX=[{icon:Hr.arrowRight,key:$C.diffEditorInlineMode.toNegated()},{icon:Hr.discard,key:$C.diffEditorInlineMode}];HX<zX.length;HX++){var At=zX[HX];pf.appendMenuItem(vf.DiffEditorHunkToolbar,{command:{id:(new TX).desc.id,title:ht(0,"Revert Block"),icon:At.icon},when:Dc.and($C.diffEditorModifiedWritable,At.key),order:5,group:"primary"}),pf.appendMenuItem(vf.DiffEditorSelectionToolbar,{command:{id:(new TX).desc.id,title:ht(0,"Revert Selection"),icon:At.icon},when:Dc.and($C.diffEditorModifiedWritable,At.key),order:5,group:"primary"})}yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"diffEditor.switchSide",title:ct(0,"Switch Side"),icon:Hr.arrowSwap,precondition:Dc.has("isInDiffEditor"),f1:!0,category:RX})||this}n.prototype.runEditorCommand=function(t,n,i){var r=PX(t);if(r instanceof ZJ){if(i&&i.dryRun)return{destinationSelection:r.mapToOtherSide().destinationSelection};r.switchSide()}};return n}(Rf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"diffEditor.exitCompareMove",title:ct(0,"Exit Compare Move"),icon:Hr.close,precondition:$C.comparingMovedCode,f1:!1,category:RX,keybinding:{weight:1e4,primary:9}})||this}n.prototype.runEditorCommand=function(t,n){var i=[];for(var r=2;r<arguments.length;r++){i[r-2]=arguments[r]}var e=PX(t);e instanceof ZJ&&e.exitCompareMove()};return n}(Rf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"diffEditor.collapseAllUnchangedRegions",title:ct(0,"Collapse All Unchanged Regions"),icon:Hr.fold,precondition:Dc.has("isInDiffEditor"),f1:!0,category:RX})||this}n.prototype.runEditorCommand=function(t,n){var i=[];for(var r=2;r<arguments.length;r++){i[r-2]=arguments[r]}var e=PX(t);e instanceof ZJ&&e.collapseAllUnchangedRegions()};return n}(Rf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"diffEditor.showAllUnchangedRegions",title:ct(0,"Show All Unchanged Regions"),icon:Hr.unfold,precondition:Dc.has("isInDiffEditor"),f1:!0,category:RX})||this}n.prototype.runEditorCommand=function(t,n){var i=[];for(var r=2;r<arguments.length;r++){i[r-2]=arguments[r]}var e=PX(t);e instanceof ZJ&&e.showAllUnchangedRegions()};return n}(Rf)),pf.appendMenuItem(vf.EditorTitle,{command:{id:BX.id,title:ht(0,"Open Accessible Diff Viewer"),precondition:Dc.has("isInDiffEditor")},order:10,group:"2_diff",when:Dc.and($C.accessibleDiffViewerVisible.negate(),Dc.has("isInDiffEditor"))}),hc.registerCommandAlias("editor.action.diffReview.next",BX.id),yf(BX),hc.registerCommandAlias("editor.action.diffReview.prev",NX.id),yf(NX);var UX,KX=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},VX=function(t,n){return function(i,r){n(i,r,t)}};var qX=new qc("selectionAnchorSet",!1);var GX=UX=function(){function t(t,n){var i=this;this.editor=t,this.selectionAnchorSetContextKey=qX.bindTo(n),this.modelChangeListener=t.onDidChangeModel((function(){return i.selectionAnchorSetContextKey.reset()}))}t.get=function(n){return n.getContribution(t.ID)};t.prototype.setSelectionAnchor=function(){var t=this;if(this.editor.hasModel()){var n=this.editor.getPosition();this.editor.changeDecorations((function(i){t.decorationId&&i.removeDecoration(t.decorationId),t.decorationId=i.addDecoration(Br.fromPositions(n,n),{description:"selection-anchor",stickiness:1,hoverMessage:(new VT).appendText(ht(0,"Selection Anchor")),className:"selection-anchor"})})),this.selectionAnchorSetContextKey.set(!!this.decorationId),yw(ht(0,"Anchor set at {0}:{1}",n.lineNumber,n.column))}};t.prototype.goToSelectionAnchor=function(){if(this.editor.hasModel()&&this.decorationId){var t=this.editor.getModel().getDecorationRange(this.decorationId);t&&this.editor.setPosition(t.getStartPosition())}};t.prototype.selectFromAnchorToCursor=function(){if(this.editor.hasModel()&&this.decorationId){var t=this.editor.getModel().getDecorationRange(this.decorationId);if(t){var n=this.editor.getPosition();this.editor.setSelection(Br.fromPositions(t.getStartPosition(),n)),this.cancelSelectionAnchor()}}};t.prototype.cancelSelectionAnchor=function(){var t=this;if(this.decorationId){var n=this.decorationId;this.editor.changeDecorations((function(i){i.removeDecoration(n),t.decorationId=void 0})),this.selectionAnchorSetContextKey.set(!1)}};t.prototype.dispose=function(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()};return t}();GX.ID="editor.contrib.selectionAnchorController",GX=UX=KX([VX(1,Gc)],GX);Pf(GX.ID,GX,4),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.setSelectionAnchor",label:ht(0,"Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2080),weight:100}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){(t=GX.get(n))===null||t===void 0||t.setSelectionAnchor();return[2]}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.goToSelectionAnchor",label:ht(0,"Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:qX})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){(t=GX.get(n))===null||t===void 0||t.goToSelectionAnchor();return[2]}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.selectFromAnchorToCursor",label:ht(0,"Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:qX,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2089),weight:100}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){(t=GX.get(n))===null||t===void 0||t.selectFromAnchorToCursor();return[2]}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.cancelSelectionAnchor",label:ht(0,"Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:qX,kbOpts:{kbExpr:$C.editorTextFocus,primary:9,weight:100}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){(t=GX.get(n))===null||t===void 0||t.cancelSelectionAnchor();return[2]}))}))};return n}(Lf));var $X=Jw("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},ht(0,"Overview ruler marker color for matching brackets."));var JX=function(){function t(t,n,i){this.position=t,this.brackets=n,this.options=i}return t}();var ZX=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._editor=n,i._lastBracketsData=[],i._lastVersionId=0,i._decorations=i._editor.createDecorationsCollection(),i._updateBracketsSoon=i._register(new Ts((function(){return i._updateBrackets()}),50)),i._matchBrackets=i._editor.getOption(72),i._updateBracketsSoon.schedule(),i._register(n.onDidChangeCursorPosition((function(t){i._matchBrackets!=="never"&&i._updateBracketsSoon.schedule()}))),i._register(n.onDidChangeModelContent((function(t){i._updateBracketsSoon.schedule()}))),i._register(n.onDidChangeModel((function(t){i._lastBracketsData=[],i._updateBracketsSoon.schedule()}))),i._register(n.onDidChangeModelLanguageConfiguration((function(t){i._lastBracketsData=[],i._updateBracketsSoon.schedule()}))),i._register(n.onDidChangeConfiguration((function(t){t.hasChanged(72)&&(i._matchBrackets=i._editor.getOption(72),i._decorations.clear(),i._lastBracketsData=[],i._lastVersionId=0,i._updateBracketsSoon.schedule())}))),i._register(n.onDidBlurEditorWidget((function(){i._updateBracketsSoon.schedule()}))),i._register(n.onDidFocusEditorWidget((function(){i._updateBracketsSoon.schedule()})));return i}n.get=function(t){return t.getContribution(n.ID)};n.prototype.jumpToBracket=function(){if(!this._editor.hasModel())return;var t=this._editor.getModel(),n=this._editor.getSelections().map((function(n){var i=n.getStartPosition(),r=t.bracketPairs.matchBracket(i);var e=null;if(r)r[0].containsPosition(i)&&!r[1].containsPosition(i)?e=r[1].getStartPosition():r[1].containsPosition(i)&&(e=r[0].getStartPosition());else{var o=t.bracketPairs.findEnclosingBrackets(i);if(o)e=o[1].getStartPosition();else{var s=t.bracketPairs.findNextBracket(i);s&&s.range&&(e=s.range.getStartPosition())}}return e?new Br(e.lineNumber,e.column,e.lineNumber,e.column):new Br(i.lineNumber,i.column,i.lineNumber,i.column)}));this._editor.setSelections(n),this._editor.revealRange(n[0])};n.prototype.selectToBracket=function(t){if(!this._editor.hasModel())return;var n=this._editor.getModel(),i=[];this._editor.getSelections().forEach((function(r){var e=r.getStartPosition();var o=n.bracketPairs.matchBracket(e);if(!o&&(o=n.bracketPairs.findEnclosingBrackets(e),!o)){var s=n.bracketPairs.findNextBracket(e);s&&s.range&&(o=n.bracketPairs.matchBracket(s.range.getStartPosition()))}var u=null,a=null;if(o){o.sort(Ir.compareRangesUsingStarts);var s=o[0],h=o[1];if(u=t?s.getStartPosition():s.getEndPosition(),a=t?h.getEndPosition():h.getStartPosition(),h.containsPosition(e)){var c=u;u=a,a=c}}u&&a&&i.push(new Br(u.lineNumber,u.column,a.lineNumber,a.column))})),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))};n.prototype.removeBrackets=function(t){var n=this;if(!this._editor.hasModel())return;var i=this._editor.getModel();this._editor.getSelections().forEach((function(r){var e=r.getPosition();var o=i.bracketPairs.matchBracket(e);o||(o=i.bracketPairs.findEnclosingBrackets(e)),o&&(n._editor.pushUndoStop(),n._editor.executeEdits(t,[{range:o[0],text:""},{range:o[1],text:""}]),n._editor.pushUndoStop())}))};n.prototype._updateBrackets=function(){if(this._matchBrackets==="never")return;this._recomputeBrackets();var t=[];var n=0;for(var i=0,r=this._lastBracketsData;i<r.length;i++){var e=r[i];var o=e.brackets;o&&(t[n++]={range:o[0],options:e.options},t[n++]={range:o[1],options:e.options})}this._decorations.set(t)};n.prototype._recomputeBrackets=function(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);var t=this._editor.getSelections();if(t.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);var i=this._editor.getModel(),r=i.getVersionId();var e=[];this._lastVersionId===r&&(e=this._lastBracketsData);var o=[];var s=0;for(var u=0,a=t.length;u<a;u++){var h=t[u];h.isEmpty()&&(o[s++]=h.getStartPosition())}o.length>1&&o.sort(Tr.compare);var c=[];var f=0,l=0;var v=e.length;for(var u=0,a=o.length;u<a;u++){var h=o[u];for(;l<v&&e[l].position.isBefore(h);)l++;if(l<v&&e[l].position.equals(h))c[f++]=e[l];else{var d=i.bracketPairs.matchBracket(h,20),g=n._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;d||this._matchBrackets!=="always"||(d=i.bracketPairs.findEnclosingBrackets(h,20),g=n._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),c[f++]=new JX(h,d,g)}}this._lastBracketsData=c,this._lastVersionId=r};return n}(ci);ZX.ID="editor.contrib.bracketMatchingController",ZX._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=PM.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:Uk($X),position:vd.Center}}),ZX._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=PM.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),Pf(ZX.ID,ZX,1),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.selectToBracket",label:ht(0,"Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:ct(0,"Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})||this}n.prototype.run=function(t,n,i){var r;var e=!0;i&&i.selectBrackets===!1&&(e=!1),(r=ZX.get(n))===null||r===void 0||r.selectToBracket(e)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.jumpToBracket",label:ht(0,"Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:$C.editorTextFocus,primary:3165,weight:100}})||this}n.prototype.run=function(t,n){var i;(i=ZX.get(n))===null||i===void 0||i.jumpToBracket()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.removeBrackets",label:ht(0,"Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:$C.editorTextFocus,primary:2561,weight:100}})||this}n.prototype.run=function(t,n){var i;(i=ZX.get(n))===null||i===void 0||i.removeBrackets(this.id)};return n}(Lf)),pf.appendMenuItem(vf.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:ht(0,"Go to &&Bracket")},order:2});var QX=function(){function t(t,n){this._selection=t,this._isMovingLeft=n}t.prototype.getEditOperations=function(t,n){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;var i=this._selection.startLineNumber,r=this._selection.startColumn,e=this._selection.endColumn;if((!this._isMovingLeft||r!==1)&&(this._isMovingLeft||e!==t.getLineMaxColumn(i)))if(this._isMovingLeft){var o=new Ir(i,r-1,i,r),s=t.getValueInRange(o);n.addEditOperation(o,null),n.addEditOperation(new Ir(i,e,i,e),s)}else{var o=new Ir(i,e,i,e+1),s=t.getValueInRange(o);n.addEditOperation(o,null),n.addEditOperation(new Ir(i,r,i,r),s)}};t.prototype.computeCursorState=function(t,n){return this._isMovingLeft?new Br(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new Br(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)};return t}();var YX=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r.left=n;return r}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=[],r=n.getSelections();for(var e=0,o=r;e<o.length;e++){var s=o[e];i.push(new QX(s,this.left))}n.pushUndoStop(),n.executeCommands(this.id,i),n.pushUndoStop()};return n}(Lf);Bf(function(t){__extends(n,t);function n(){return t.call(this,!0,{id:"editor.action.moveCarretLeftAction",label:ht(0,"Move Selected Text Left"),alias:"Move Selected Text Left",precondition:$C.writable})||this}return n}(YX)),Bf(function(t){__extends(n,t);function n(){return t.call(this,!1,{id:"editor.action.moveCarretRightAction",label:ht(0,"Move Selected Text Right"),alias:"Move Selected Text Right",precondition:$C.writable})||this}return n}(YX));Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.transposeLetters",label:ht(0,"Transpose Letters"),alias:"Transpose Letters",precondition:$C.writable,kbOpts:{kbExpr:$C.textInputFocus,primary:0,mac:{primary:306},weight:100}})||this}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=n.getModel(),r=[],e=n.getSelections();for(var o=0,s=e;o<s.length;o++){var u=s[o];if(!u.isEmpty())continue;var a=u.startLineNumber,h=u.startColumn,c=i.getLineMaxColumn(a);if(a===1&&(h===1||h===2&&c===2))continue;var f=h===c?u.getPosition():kC.rightPosition(i,u.getPosition().lineNumber,u.getPosition().column),l=kC.leftPosition(i,f),v=kC.leftPosition(i,l),d=i.getValueInRange(Ir.fromPositions(v,l)),g=i.getValueInRange(Ir.fromPositions(l,f)),p=Ir.fromPositions(v,f);r.push(new pC(p,g+d))}r.length>0&&(n.pushUndoStop(),n.executeCommands(this.id,r),n.pushUndoStop())};return n}(Lf));var XX=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);var t;t=typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?crypto.getRandomValues.bind(crypto):function(t){for(var n=0;n<t.length;n++)t[n]=Math.floor(256*Math.random());return t};var n=new Uint8Array(16),i=[];for(var r=0;r<256;r++)i.push(r.toString(16).padStart(2,"0"));return function(){t(n),n[6]=15&n[6]|64,n[8]=63&n[8]|128;var r=0,e="";return e+=i[n[r++]],e+=i[n[r++]],e+=i[n[r++]],e+=i[n[r++]],e+="-",e+=i[n[r++]],e+=i[n[r++]],e+="-",e+=i[n[r++]],e+=i[n[r++]],e+="-",e+=i[n[r++]],e+=i[n[r++]],e+="-",e+=i[n[r++]],e+=i[n[r++]],e+=i[n[r++]],e+=i[n[r++]],e+=i[n[r++]],e+=i[n[r++]],e}}();function t0(t){var n=this;return{asString:function(){return __awaiter(n,void 0,void 0,(function(){return __generator(this,(function(n){return[2,t]}))}))},asFile:function(){},value:typeof t=="string"?t:void 0}}var n0=function(){function t(){this._entries=new Map}Object.defineProperty(t.prototype,"size",{get:function(){var t=0;for(var n=0,i=this._entries;n<i.length;n++){var r=i[n];t++}return t},enumerable:false,configurable:true});t.prototype.has=function(t){return this._entries.has(this.toKey(t))};t.prototype.matches=function(t){var n=__spreadArray([],this._entries.keys(),true);return Yt.some(this,(function(t){var n=t[0],i=t[1];return i.asFile()}))&&n.push("files"),e0(i0(t),n)};t.prototype.get=function(t){var n;return(n=this._entries.get(this.toKey(t)))===null||n===void 0?void 0:n[0]};t.prototype.append=function(t,n){var i=this._entries.get(t);i?i.push(n):this._entries.set(this.toKey(t),[n])};t.prototype.replace=function(t,n){this._entries.set(this.toKey(t),[n])};t.prototype.delete=function(t){this._entries.delete(this.toKey(t))};t.prototype[Symbol.iterator]=function(){var t,n,i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:t=0,n=this._entries;a.label=1;case 1:if(!(t<n.length))return[3,6];i=n[t],r=i[0],e=i[1];o=0,s=e;a.label=2;case 2:if(!(o<s.length))return[3,5];u=s[o];return[4,[r,u]];case 3:a.sent();a.label=4;case 4:o++;return[3,2];case 5:t++;return[3,1];case 6:return[2]}}))};t.prototype.toKey=function(t){return i0(t)};return t}();function i0(t){return t.toLowerCase()}function r0(t,n){return e0(i0(t),n.map(i0))}function e0(t,n){if(t==="*/*")return n.length>0;if(n.includes(t))return!0;var i=t.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!i)return!1;var r=i[0],e=i[1],o=i[2];return o==="*"&&n.some((function(t){return t.startsWith(e+"/")}))}var o0=Object.freeze({create:function(t){return x(t.map((function(t){return t.toString()}))).join("\r\n")},split:function(t){return t.split("\r\n")},parse:function(t){return o0.split(t).filter((function(t){return!t.startsWith("#")}))}});var s0=function(){function t(t){this.value=t}t.prototype.equals=function(t){return this.value===t.value};t.prototype.contains=function(n){return this.equals(n)||this.value===""||n.value.startsWith(this.value+t.sep)};t.prototype.intersects=function(t){return this.contains(t)||t.contains(this)};t.prototype.append=function(){var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}return new t((this.value?__spreadArray([this.value],n,true):n).join(t.sep))};return t}();s0.sep=".",s0.None=new s0("@@none@@"),s0.Empty=new s0("");var u0="CodeEditors",a0="CodeFiles";of.add("workbench.contributions.dragAndDrop",new(function(){function t(){}return t}()));var h0=function(){function t(){}t.getInstance=function(){return t.INSTANCE};t.prototype.hasData=function(t){return t&&t===this.proto};t.prototype.getData=function(t){if(this.hasData(t))return this.data};return t}();function c0(t){var n=new n0;var i=function(t){var i=t.type;if(t.kind==="string"){var r=new Promise((function(n){return t.getAsString(n)}));n.append(i,t0(r))}else if(t.kind==="file"){var r=t.getAsFile();r&&n.append(i,f0(r))}};for(var r=0,e=t.items;r<e.length;r++){var o=e[r];i(o)}return n}function f0(t){var n=this;var i=t.path?Cr.parse(t.path):void 0;return function(t,n,i){var r=this;var e={id:XX(),name:t,uri:n,data:i};return{asString:function(){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(t){return[2,""]}))}))},asFile:function(){return e},value:void 0}}(t.name,i,(function(){return __awaiter(n,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:n=Uint8Array.bind;return[4,t.arrayBuffer()];case 1:return[2,new(n.apply(Uint8Array,[void 0,i.sent()]))]}}))}))}))}h0.INSTANCE=new h0;var l0=Object.freeze([u0,a0,mN.RESOURCES,mN.INTERNAL_URI_LIST]);function v0(t,n){if(n===void 0){n=!1}var i=c0(t),r=i.get(mN.INTERNAL_URI_LIST);if(r)i.replace(nv.uriList,r);else if(n||!i.has(nv.uriList)){var e=[];for(var o=0,s=t.items;o<s.length;o++){var u=s[o];var a=u.getAsFile();if(a){var h=a.path;try{h?e.push(Cr.file(h).toString()):e.push(Cr.parse(a.name,!0).toString())}catch(t){}}}e.length&&i.replace(nv.uriList,t0(o0.create(e)))}for(var c=0,f=l0;c<f.length;c++){var e=f[c];i.delete(e)}return i}var d0=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},g0=function(t,n){return function(i,r){n(i,r,t)}};var p0=function(){function t(){}t.prototype.provideDocumentPasteEdits=function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getEdit(i,e)];case 1:t=n.sent();if(t)return[2,{dispose:function(){},edits:[{insertText:t.insertText,title:t.title,kind:t.kind,handledMimeType:t.handledMimeType,yieldTo:t.yieldTo}]}];return[2]}}))}))};t.prototype.provideDocumentOnDropEdits=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getEdit(i,r)];case 1:t=n.sent();return[2,t?[{insertText:t.insertText,title:t.title,kind:t.kind,handledMimeType:t.handledMimeType,yieldTo:t.yieldTo}]:void 0]}}))}))};return t}();var w0=function(t){__extends(n,t);function n(){var i=this;i=t.apply(this,arguments)||this,i.kind=n.kind,i.dropMimeTypes=[nv.text],i.pasteMimeTypes=[nv.text];return i}n.prototype.getEdit=function(t,n){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(r){switch(r.label){case 0:n=t.get(nv.text);if(!n||t.has(nv.uriList))return[2];return[4,n.asString()];case 1:i=r.sent();return[2,{handledMimeType:nv.text,title:ht(0,"Insert Plain Text"),insertText:i,kind:this.kind}]}}))}))};return n}(p0);w0.id="text",w0.kind=new s0("text.plain");var m0=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n.kind=new s0("uri.absolute"),n.dropMimeTypes=[nv.uriList],n.pasteMimeTypes=[nv.uriList];return n}n.prototype.getEdit=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:return[4,_0(t)];case 1:i=s.sent();if(!i.length||n.isCancellationRequested)return[2];r=0;e=i.map((function(t){var n=t.uri,i=t.originalText;return n.scheme===Uu.file?n.fsPath:(r++,i)})).join(" ");return[2,(o=r>0?i.length>1?ht(0,"Insert Uris"):ht(0,"Insert Uri"):i.length>1?ht(0,"Insert Paths"):ht(0,"Insert Path"),{handledMimeType:nv.uriList,insertText:e,title:o,kind:this.kind})]}}))}))};return n}(p0);var b0=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._workspaceContextService=n,i.kind=new s0("uri.relative"),i.dropMimeTypes=[nv.uriList],i.pasteMimeTypes=[nv.uriList];return i}n.prototype.getEdit=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r;var e=this;return __generator(this,(function(o){switch(o.label){case 0:return[4,_0(t)];case 1:i=o.sent();if(!i.length||n.isCancellationRequested)return[2];r=b(i.map((function(t){var n=t.uri;var i=e._workspaceContextService.getWorkspaceFolder(n);return i?UO(i.uri,n):void 0})));return[2,r.length?{handledMimeType:nv.uriList,insertText:r.join(" "),title:i.length>1?ht(0,"Insert Relative Paths"):ht(0,"Insert Relative Path"),kind:this.kind}:void 0]}}))}))};return n}(p0);b0=d0([g0(0,KB)],b0);var y0=function(){function t(){this.kind=new s0("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:nv.text}]}t.prototype.provideDocumentPasteEdits=function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var t,n,o;return __generator(this,(function(s){switch(s.label){case 0:if(r.triggerKind!==$r.PasteAs&&!(!((t=r.only)===null||t===void 0)&&t.contains(this.kind)))return[2];n=i.get("text/html");return[4,n==null?void 0:n.asString()];case 1:o=s.sent();return[2,o&&!e.isCancellationRequested?{dispose:function(){},edits:[{insertText:o,yieldTo:this._yieldTo,title:ht(0,"Insert HTML"),kind:this.kind}]}:void 0]}}))}))};return t}();function _0(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o,s;return __generator(this,(function(u){switch(u.label){case 0:n=t.get(nv.uriList);if(!n)return[2,[]];return[4,n.asString()];case 1:i=u.sent(),r=[];for(e=0,o=o0.parse(i);e<o.length;e++){s=o[e];try{r.push({uri:Cr.parse(s),originalText:s})}catch(t){}}return[2,r]}}))}))}var k0=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._register(n.documentOnDropEditProvider.register("*",new w0)),r._register(n.documentOnDropEditProvider.register("*",new m0)),r._register(n.documentOnDropEditProvider.register("*",new b0(i)));return r}return n}(ci);k0=d0([g0(0,tp),g0(1,KB)],k0);var x0=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._register(n.documentPasteEditProvider.register("*",new w0)),r._register(n.documentPasteEditProvider.register("*",new m0)),r._register(n.documentPasteEditProvider.register("*",new b0(i))),r._register(n.documentPasteEditProvider.register("*",new y0));return r}return n}(ci);x0=d0([g0(0,tp),g0(1,KB)],x0);var C0=function(){function t(){this.value="",this.pos=0}t.isDigitCharacter=function(t){return t>=48&&t<=57};t.isVariableCharacter=function(t){return t===95||t>=97&&t<=122||t>=65&&t<=90};t.prototype.text=function(t){this.value=t,this.pos=0};t.prototype.tokenText=function(t){return this.value.substr(t.pos,t.len)};t.prototype.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var n=this.pos;var i,r=0,e=this.value.charCodeAt(n);if(i=t._table[e],typeof i=="number")return this.pos+=1,{type:i,pos:n,len:1};if(t.isDigitCharacter(e)){i=8;do{r+=1,e=this.value.charCodeAt(n+r)}while(t.isDigitCharacter(e));return this.pos+=r,{type:i,pos:n,len:r}}if(t.isVariableCharacter(e)){i=9;do{e=this.value.charCodeAt(n+ ++r)}while(t.isVariableCharacter(e)||t.isDigitCharacter(e));return this.pos+=r,{type:i,pos:n,len:r}}i=10;do{r+=1,e=this.value.charCodeAt(n+r)}while(!isNaN(e)&&t._table[e]===void 0&&!t.isDigitCharacter(e)&&!t.isVariableCharacter(e));return this.pos+=r,{type:i,pos:n,len:r}};return t}();C0._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};var S0=function(){function t(){this._children=[]}t.prototype.appendChild=function(t){return t instanceof D0&&this._children[this._children.length-1]instanceof D0?this._children[this._children.length-1].value+=t.value:(t.parent=this,this._children.push(t)),this};t.prototype.replace=function(t,n){var i=t.parent,r=i.children.indexOf(t),e=i.children.slice(0);e.splice.apply(e,__spreadArray([r,1],n,false)),i._children=e,function t(n,i){for(var r=0,e=n;r<e.length;r++){var o=e[r];o.parent=i,t(o.children,o)}}(n,i)};Object.defineProperty(t.prototype,"children",{get:function(){return this._children},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"rightMostDescendant",{get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"snippet",{get:function(){var t=this;for(;;){if(!t)return;if(t instanceof R0)return t;t=t.parent}},enumerable:false,configurable:true});t.prototype.toString=function(){return this.children.reduce((function(t,n){return t+n.toString()}),"")};t.prototype.len=function(){return 0};return t}();var D0=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.value=n;return i}n.prototype.toString=function(){return this.value};n.prototype.len=function(){return this.value.length};n.prototype.clone=function(){return new n(this.value)};return n}(S0);var A0=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(S0);var O0=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.index=n;return i}n.compareByIndex=function(t,n){return t.index===n.index?0:t.isFinalTabstop?1:n.isFinalTabstop||t.index<n.index?-1:t.index>n.index?1:0};Object.defineProperty(n.prototype,"isFinalTabstop",{get:function(){return this.index===0},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"choice",{get:function(){return this._children.length===1&&this._children[0]instanceof E0?this._children[0]:void 0},enumerable:false,configurable:true});n.prototype.clone=function(){var t=new n(this.index);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map((function(t){return t.clone()})),t};return n}(A0);var E0=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n.options=[];return n}n.prototype.appendChild=function(t){return t instanceof D0&&(t.parent=this,this.options.push(t)),this};n.prototype.toString=function(){return this.options[0].value};n.prototype.len=function(){return this.options[0].len()};n.prototype.clone=function(){var t=new n;return this.options.forEach(t.appendChild,t),t};return n}(S0);var M0=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n.regexp=new RegExp("");return n}n.prototype.resolve=function(t){var n=this;var i=!1,r=t.replace(this.regexp,(function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))}));return!i&&this._children.some((function(t){return t instanceof F0&&!!t.elseValue}))&&(r=this._replace([])),r};n.prototype._replace=function(t){var n="";for(var i=0,r=this._children;i<r.length;i++){var e=r[i];if(e instanceof F0){var o=t[e.index]||"";o=e.resolve(o),n+=o}else n+=e.toString()}return n};n.prototype.toString=function(){return""};n.prototype.clone=function(){var t=new n;return t.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),t._children=this.children.map((function(t){return t.clone()})),t};return n}(S0);var F0=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o.index=n,o.shorthandName=i,o.ifValue=r,o.elseValue=e;return o}n.prototype.resolve=function(t){return this.shorthandName==="upcase"?t?t.toLocaleUpperCase():"":this.shorthandName==="downcase"?t?t.toLocaleLowerCase():"":this.shorthandName==="capitalize"?t?t[0].toLocaleUpperCase()+t.substr(1):"":this.shorthandName==="pascalcase"?t?this._toPascalCase(t):"":this.shorthandName==="camelcase"?t?this._toCamelCase(t):"":t&&typeof this.ifValue=="string"?this.ifValue:t||typeof this.elseValue!="string"?t||"":this.elseValue};n.prototype._toPascalCase=function(t){var n=t.match(/[a-z0-9]+/gi);return n?n.map((function(t){return t.charAt(0).toUpperCase()+t.substr(1)})).join(""):t};n.prototype._toCamelCase=function(t){var n=t.match(/[a-z0-9]+/gi);return n?n.map((function(t,n){return n===0?t.charAt(0).toLowerCase()+t.substr(1):t.charAt(0).toUpperCase()+t.substr(1)})).join(""):t};n.prototype.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)};return n}(S0);var L0=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.name=n;return i}n.prototype.resolve=function(t){var n=t.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0&&(this._children=[new D0(n)],!0)};n.prototype.clone=function(){var t=new n(this.name);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map((function(t){return t.clone()})),t};return n}(A0);function j0(t,n){var i=__spreadArray([],t,true);for(;i.length>0;){var r=i.shift();if(!n(r))break;i.unshift.apply(i,r.children)}}var R0=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}Object.defineProperty(n.prototype,"placeholderInfo",{get:function(){if(!this._placeholders){var t=[];var n;this.walk((function(i){return i instanceof O0&&(t.push(i),n=!n||n.index<i.index?i:n),!0})),this._placeholders={all:t,last:n}}return this._placeholders},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"placeholders",{get:function(){var t=this.placeholderInfo.all;return t},enumerable:false,configurable:true});n.prototype.offset=function(t){var n=0,i=!1;return this.walk((function(r){return r===t?(i=!0,!1):(n+=r.len(),!0)})),i?n:-1};n.prototype.fullLen=function(t){var n=0;return j0([t],(function(t){return n+=t.len(),!0})),n};n.prototype.enclosingPlaceholders=function(t){var n=[];var i=t.parent;for(;i;)i instanceof O0&&n.push(i),i=i.parent;return n};n.prototype.resolveVariables=function(t){var n=this;return this.walk((function(i){return i instanceof L0&&i.resolve(t)&&(n._placeholders=void 0),!0})),this};n.prototype.appendChild=function(n){return this._placeholders=void 0,t.prototype.appendChild.call(this,n)};n.prototype.replace=function(n,i){return this._placeholders=void 0,t.prototype.replace.call(this,n,i)};n.prototype.clone=function(){var t=new n;return this._children=this.children.map((function(t){return t.clone()})),t};n.prototype.walk=function(t){j0(this.children,t)};return n}(S0);var T0=function(){function t(){this._scanner=new C0,this._token={type:14,pos:0,len:0}}t.escape=function(t){return t.replace(/\$|}|\\/g,"\\$&")};t.guessNeedsClipboard=function(t){return/\${?CLIPBOARD/.test(t)};t.prototype.parse=function(t,n,i){var r=new R0;return this.parseFragment(t,r),this.ensureFinalTabstop(r,i!=null&&i,n!=null&&n),r};t.prototype.parseFragment=function(t,n){var i=n.children.length;for(this._scanner.text(t),this._token=this._scanner.next();this._parse(n););var r=new Map,e=[];n.walk((function(t){return t instanceof O0&&(t.isFinalTabstop?r.set(0,void 0):!r.has(t.index)&&t.children.length>0?r.set(t.index,t.children):e.push(t)),!0}));var o=function(t,i){var e=r.get(t.index);if(!e)return;var s=new O0(t.index);s.transform=t.transform;for(var u=0,a=e;u<a.length;u++){var h=a[u];var c=h.clone();s.appendChild(c),c instanceof O0&&r.has(c.index)&&!i.has(c.index)&&(i.add(c.index),o(c,i),i.delete(c.index))}n.replace(t,[s])},s=new Set;for(var u=0,a=e;u<a.length;u++){var h=a[u];o(h,s)}return n.children.slice(i)};t.prototype.ensureFinalTabstop=function(t,n,i){(n||i&&t.placeholders.length>0)&&(t.placeholders.find((function(t){return t.index===0}))||t.appendChild(new O0(0)))};t.prototype._accept=function(t,n){if(t===void 0||this._token.type===t){var i=!n||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),i}return!1};t.prototype._backTo=function(t){return this._scanner.pos=t.pos+t.len,this._token=t,!1};t.prototype._until=function(t){var n=this._token;for(;this._token.type!==t;){if(this._token.type===14)return!1;if(this._token.type===5){var i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(n.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r};t.prototype._parse=function(t){return this._parseEscaped(t)||this._parseTabstopOrVariableName(t)||this._parseComplexPlaceholder(t)||this._parseComplexVariable(t)||this._parseAnything(t)};t.prototype._parseEscaped=function(t){var n;return!!(n=this._accept(5,!0))&&(n=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||n,t.appendChild(new D0(n)),!0)};t.prototype._parseTabstopOrVariableName=function(t){var n;var i=this._token;return this._accept(0)&&(n=this._accept(9,!0)||this._accept(8,!0))?(t.appendChild(/^\d+$/.test(n)?new O0(Number(n)):new L0(n)),!0):this._backTo(i)};t.prototype._parseComplexPlaceholder=function(t){var n;var i=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(8,!0))))return this._backTo(i);var r=new O0(Number(n));if(this._accept(1))for(;;){if(this._accept(4))return t.appendChild(r),!0;if(!this._parse(r))return t.appendChild(new D0("${"+n+":")),r.children.forEach(t.appendChild,t),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(t.appendChild(r),!0):(this._backTo(i),!1):this._accept(4)?(t.appendChild(r),!0):this._backTo(i);{var e=new E0;for(;;){if(this._parseChoiceElement(e)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(e),this._accept(4)))return t.appendChild(r),!0}return this._backTo(i),!1}}}};t.prototype._parseChoiceElement=function(t){var n=this._token,i=[];for(;this._token.type!==2&&this._token.type!==7;){var r=void 0;if(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0),!r)return this._backTo(n),!1;i.push(r)}return i.length===0?(this._backTo(n),!1):(t.appendChild(new D0(i.join(""))),!0)};t.prototype._parseComplexVariable=function(t){var n;var i=this._token;if(!(this._accept(0)&&this._accept(3)&&(n=this._accept(9,!0))))return this._backTo(i);var r=new L0(n);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(t.appendChild(r),!0):(this._backTo(i),!1):this._accept(4)?(t.appendChild(r),!0):this._backTo(i);for(;;){if(this._accept(4))return t.appendChild(r),!0;if(!this._parse(r))return t.appendChild(new D0("${"+n+":")),r.children.forEach(t.appendChild,t),!0}};t.prototype._parseTransform=function(t){var n=new M0;var i="",r="";for(;!this._accept(6);){var e=void 0;if(e=this._accept(5,!0))e=this._accept(6,!0)||e,i+=e;else{if(this._token.type===14)return!1;i+=this._accept(void 0,!0)}}for(;!this._accept(6);){var e=void 0;if(e=this._accept(5,!0))e=this._accept(5,!0)||this._accept(6,!0)||e,n.appendChild(new D0(e));else if(!this._parseFormatString(n)&&!this._parseAnything(n))return!1}for(;!this._accept(4);){if(this._token.type===14)return!1;r+=this._accept(void 0,!0)}try{n.regexp=new RegExp(i,r)}catch(t){return!1}return t.transform=n,!0};t.prototype._parseFormatString=function(t){var n=this._token;if(!this._accept(0))return!1;var i=!1;this._accept(3)&&(i=!0);var r=this._accept(8,!0);if(!r)return this._backTo(n),!1;if(!i)return t.appendChild(new F0(Number(r))),!0;if(this._accept(4))return t.appendChild(new F0(Number(r))),!0;if(!this._accept(1))return this._backTo(n),!1;if(this._accept(6)){var e=this._accept(9,!0);return e&&this._accept(4)?(t.appendChild(new F0(Number(r),e)),!0):(this._backTo(n),!1)}if(this._accept(11)){var e=this._until(4);if(e)return t.appendChild(new F0(Number(r),void 0,e,void 0)),!0}else if(this._accept(12)){var e=this._until(4);if(e)return t.appendChild(new F0(Number(r),void 0,void 0,e)),!0}else if(this._accept(13)){var e=this._until(1);if(e){var o=this._until(4);if(o)return t.appendChild(new F0(Number(r),void 0,e,o)),!0}}else{var e=this._until(4);if(e)return t.appendChild(new F0(Number(r),void 0,void 0,e)),!0}return this._backTo(n),!1};t.prototype._parseAnything=function(t){return this._token.type!==14&&(t.appendChild(new D0(this._scanner.tokenText(this._token))),this._accept(void 0),!0)};return t}();function I0(t,n,i){var r,e,o,s;return(typeof i.insertText=="string"?i.insertText==="":i.insertText.snippet==="")?{edits:(e=(r=i.additionalEdit)===null||r===void 0?void 0:r.edits)!==null&&e!==void 0?e:[]}:{edits:__spreadArray(__spreadArray([],n.map((function(n){return new XI(t,{range:n,text:typeof i.insertText=="string"?T0.escape(i.insertText)+"$0":i.insertText.snippet,insertAsSnippet:!0})})),true),(s=(o=i.additionalEdit)===null||o===void 0?void 0:o.edits)!==null&&s!==void 0?s:[],true)}}function B0(t){var n;function i(t,n){return"mimeType"in t?t.mimeType===n.handledMimeType:!!n.kind&&t.kind.contains(n.kind)}var r=new Map;for(var e=0,o=t;e<o.length;e++){var s=o[e];for(var u=0,a=(n=s.yieldTo)!==null&&n!==void 0?n:[];u<a.length;u++){var h=a[u];for(var c=0,f=t;c<f.length;c++){var l=f[c];if(l!==s&&i(h,l)){var v=r.get(s);v||(v=[],r.set(s,v)),v.push(l)}}}}if(!r.size)return Array.from(t);var d=new Set,g=[];return function t(n){if(!n.length)return[];var i=n[0];if(g.includes(i))return console.warn("Yield to cycle detected",i),n;if(d.has(i))return t(n.slice(1));var e=[];var o=r.get(i);return o&&(g.push(i),e=t(o),g.pop()),d.add(i),__spreadArray(__spreadArray(__spreadArray([],e,true),[i],false),t(n.slice(1)),true)}(Array.from(t))}var N0=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},P0=function(t,n){return function(i,r){n(i,r,t)}};var W0=PM.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:" ",inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});var H0=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s.typeId=n,s.editor=i,s.range=r,s.delegate=o,s.allowEditorOverflow=!1,s.suppressMouseDown=!0,s.create(e),s.editor.addContentWidget(s),s.editor.layoutContentWidget(s);return s}n.prototype.create=function(t){var n;var i=this;this.domNode=bh(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=t;var r=bh("span.icon");this.domNode.append(r),(n=r.classList).add.apply(n,__spreadArray(__spreadArray([],uc.asClassNameArray(Hr.loading),false),["codicon-modifier-spin"],false));var e=function(){var t=i.editor.getOption(67);i.domNode.style.height="".concat(t,"px"),i.domNode.style.width="".concat(Math.ceil(.8*t),"px")};e(),this._register(this.editor.onDidChangeConfiguration((function(t){(t.hasChanged(52)||t.hasChanged(67))&&e()}))),this._register(ma(this.domNode,ah.CLICK,(function(t){i.delegate.cancel()})))};n.prototype.getId=function(){return n.baseId+"."+this.typeId};n.prototype.getDomNode=function(){return this.domNode};n.prototype.getPosition=function(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}};n.prototype.dispose=function(){t.prototype.dispose.call(this),this.editor.removeContentWidget(this)};return n}(ci);H0.baseId="editor.widget.inlineProgressWidget";var z0=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.id=n,e._editor=i,e._instantiationService=r,e._showDelay=500,e._showPromise=e._register(new fi),e._currentWidget=new fi,e._operationIdPool=0,e._currentDecorations=i.createDecorationsCollection();return e}n.prototype.showWhile=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r;var e=this;return __generator(this,(function(o){switch(o.label){case 0:r=this._operationIdPool++;this._currentOperation=r,this.clear(),this._showPromise.value=Fs((function(){var r=Ir.fromPositions(t);e._currentDecorations.set([{range:r,options:W0}]).length>0&&(e._currentWidget.value=e._instantiationService.createInstance(H0,e.id,e._editor,r,n,i))}),this._showDelay);o.label=1;case 1:o.trys.push([1,,3,4]);return[4,i];case 2:return[2,o.sent()];case 3:this._currentOperation===r&&(this.clear(),this._currentOperation=void 0);return[7];case 4:return[2]}}))}))};n.prototype.clear=function(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()};return n}(ci);z0=N0([P0(2,Jh)],z0);var U0,K0=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},V0=function(t,n){return function(i,r){n(i,r,t)}};var q0=U0=function(){function t(n,i,r){this._openerService=r,this._messageWidget=new fi,this._messageListeners=new hi,this._mouseOverMessage=!1,this._editor=n,this._visible=t.MESSAGE_VISIBLE.bindTo(i)}t.get=function(n){return n.getContribution(t.ID)};t.prototype.dispose=function(){var t;(t=this._message)===null||t===void 0||t.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()};t.prototype.showMessage=function(t,n){var i=this;var r;yw(GT(t)?t.value:t),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=GT(t)?eI(t,{actionHandler:{callback:function(n){i.closeMessage(),EI(i._openerService,n,GT(t)?t.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new G0(this._editor,n,typeof t=="string"?t:this._message.element),this._messageListeners.add(wi.debounce(this._editor.onDidBlurEditorText,(function(t,n){return n}),0)((function(){i._mouseOverMessage||i._messageWidget.value&&Pa(Ka(),i._messageWidget.value.getDomNode())||i.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((function(){return i.closeMessage()}))),this._messageListeners.add(this._editor.onDidDispose((function(){return i.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeModel((function(){return i.closeMessage()}))),this._messageListeners.add(ma(this._messageWidget.value.getDomNode(),ah.MOUSE_ENTER,(function(){return i._mouseOverMessage=!0}),!0)),this._messageListeners.add(ma(this._messageWidget.value.getDomNode(),ah.MOUSE_LEAVE,(function(){return i._mouseOverMessage=!1}),!0)),this._messageListeners.add(this._editor.onMouseMove((function(t){t.target.position&&(r?r.containsPosition(t.target.position)||i.closeMessage():r=new Ir(n.lineNumber-3,1,t.target.position.lineNumber+3,1))})))};t.prototype.closeMessage=function(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(G0.fadeOut(this._messageWidget.value))};return t}();q0.ID="editor.contrib.messageController",q0.MESSAGE_VISIBLE=new qc("messageVisible",!1,ht(0,"Whether the editor is currently showing an inline message")),q0=U0=K0([V0(1,Gc),V0(2,DR)],q0);If(new(Ff.bindToContribution(q0.get))({id:"leaveEditorMessage",precondition:q0.MESSAGE_VISIBLE,handler:function(t){return t.closeMessage()},kbOpts:{weight:130,primary:9}}));var G0=function(){function t(t,n,i){var r=n.lineNumber,e=n.column;this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=t,this._editor.revealLinesInCenterIfOutsideViewport(r,r,0),this._position={lineNumber:r,column:e},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";var o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);var s=document.createElement("div");typeof i=="string"?(s.classList.add("message"),s.textContent=i):(i.classList.add("message"),s.appendChild(i)),this._domNode.appendChild(s);var u=document.createElement("div");u.classList.add("anchor","below"),this._domNode.appendChild(u),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}t.fadeOut=function(t){var n=function(){t.dispose(),clearTimeout(i),t.getDomNode().removeEventListener("animationend",n)},i=setTimeout(n,110);return t.getDomNode().addEventListener("animationend",n),t.getDomNode().classList.add("fadeOut"),{dispose:n}};t.prototype.dispose=function(){this._editor.removeContentWidget(this)};t.prototype.getId=function(){return"messageoverlay"};t.prototype.getDomNode=function(){return this._domNode};t.prototype.getPosition=function(){return{position:this._position,preference:[1,2],positionAffinity:1}};t.prototype.afterRender=function(t){this._domNode.classList.toggle("below",t===2)};return t}();Pf(q0.ID,q0,4);var $0,J0=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Z0=function(t,n){return function(i,r){n(i,r,t)}};var Q0=$0=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c){var f=this;f=t.call(this)||this,f.typeId=n,f.editor=i,f.showCommand=e,f.range=o,f.edits=s,f.onSelectNewEdit=u,f._contextMenuService=a,f._keybindingService=c,f.allowEditorOverflow=!0,f.suppressMouseDown=!0,f.create(),f.visibleContext=r.bindTo(h),f.visibleContext.set(!0),f._register(ai((function(){return f.visibleContext.reset()}))),f.editor.addContentWidget(f),f.editor.layoutContentWidget(f),f._register(ai((function(){return f.editor.removeContentWidget(f)}))),f._register(f.editor.onDidChangeCursorPosition((function(t){o.containsPosition(t.position)||f.dispose()}))),f._register(wi.runAndSubscribe(c.onDidUpdateKeybindings,(function(){f._updateButtonTitle()})));return f}n.prototype._updateButtonTitle=function(){var t;var n=(t=this._keybindingService.lookupKeybinding(this.showCommand.id))===null||t===void 0?void 0:t.getLabel();this.button.element.title=this.showCommand.label+(n?" (".concat(n,")"):"")};n.prototype.create=function(){var t=this;this.domNode=bh(".post-edit-widget"),this.button=this._register(new DV(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(ma(this.domNode,ah.CLICK,(function(){return t.showSelector()})))};n.prototype.getId=function(){return n.baseId+"."+this.typeId};n.prototype.getDomNode=function(){return this.domNode};n.prototype.getPosition=function(){return{position:this.range.getEndPosition(),preference:[2]}};n.prototype.showSelector=function(){var t=this;this._contextMenuService.showContextMenu({getAnchor:function(){var n=ja(t.button.element);return{x:n.left+n.width,y:n.top+n.height}},getActions:function(){return t.edits.allEdits.map((function(n,i){return oc({id:"",label:n.title,checked:i===t.edits.activeEditIndex,run:function(){if(i!==t.edits.activeEditIndex)return t.onSelectNewEdit(i)}})}))}})};return n}(ci);Q0.baseId="editor.widget.postEditWidget",Q0=$0=J0([Z0(7,_R),Z0(8,Gc),Z0(9,Yx)],Q0);var Y0=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._id=n,u._editor=i,u._visibleContext=r,u._showCommand=e,u._instantiationService=o,u._bulkEditService=s,u._currentWidget=u._register(new fi),u._register(wi.any(i.onDidChangeModel,i.onDidChangeModelContent)((function(){return u.clear()})));return u}n.prototype.applyEditAndShowIfNeeded=function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h,c,f,l;var v=this;return __generator(this,(function(d){switch(d.label){case 0:o=this._editor.getModel();if(!o||!t.length)return[2];s=n.allEdits.at(n.activeEditIndex);if(!s)return[2];return[4,r(s,e)];case 1:u=d.sent(),a=I0(o.uri,t,u),h=t[0],c=o.deltaDecorations([],[{range:h,options:{description:"paste-line-suffix",stickiness:0}}]);d.label=2;case 2:d.trys.push([2,,4,5]);return[4,this._bulkEditService.apply(a,{editor:this._editor,token:e})];case 3:f=d.sent(),l=o.getDecorationRange(c[0]);return[3,5];case 4:o.deltaDecorations(c,[]);return[7];case 5:i&&f.isApplied&&n.allEdits.length>1&&this.show(l!==null&&l!==void 0?l:h,n,(function(o){return __awaiter(v,void 0,void 0,(function(){var s,u;return __generator(this,(function(a){switch(a.label){case 0:s=this._editor.getModel();u=s;if(!u)return[3,2];return[4,s.undo()];case 1:u=(a.sent(),this.applyEditAndShowIfNeeded(t,{activeEditIndex:o,allEdits:n.allEdits},i,r,e));a.label=2;case 2:u;return[2]}}))}))}));return[2]}}))}))};n.prototype.show=function(t,n,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(Q0,this._id,this._editor,this._visibleContext,this._showCommand,t,n,i))};n.prototype.clear=function(){this._currentWidget.clear()};n.prototype.tryShowSelector=function(){var t;(t=this._currentWidget.value)===null||t===void 0||t.showSelector()};return n}(ci);Y0=J0([Z0(4,Jh),Z0(5,QI)],Y0);var X0,t1=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},n1=function(t,n){return function(i,r){n(i,r,t)}};var i1="editor.changePasteType",r1=new qc("pasteWidgetVisible",!1,ht(0,"Whether the paste widget is showing")),e1="application/vnd.code.copyMetadata";var o1=X0=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this)||this,a._bulkEditService=r,a._clipboardService=e,a._languageFeaturesService=o,a._quickInputService=s,a._progressService=u,a._editor=n;var h=n.getContainerDomNode();a._register(ma(h,"copy",(function(t){return a.handleCopy(t)}))),a._register(ma(h,"cut",(function(t){return a.handleCopy(t)}))),a._register(ma(h,"paste",(function(t){return a.handlePaste(t)}),!0)),a._pasteProgressManager=a._register(new z0("pasteIntoEditor",n,i)),a._postPasteWidgetManager=a._register(i.createInstance(Y0,"pasteIntoEditor",n,r1,{id:i1,label:ht(0,"Show paste options...")}));return a}n.get=function(t){return t.getContribution(X0.ID)};n.prototype.changePasteType=function(){this._postPasteWidgetManager.tryShowSelector()};n.prototype.pasteAs=function(t){this._editor.focus();try{this._pasteAsActionContext={preferred:t},Ga().execCommand("paste")}finally{this._pasteAsActionContext=void 0}};n.prototype.clearWidgets=function(){this._postPasteWidgetManager.clear()};n.prototype.isPasteAsEnabled=function(){return this._editor.getOption(85).enabled&&!this._editor.getOption(91)};n.prototype.finishedPaste=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this._currentPasteOperation];case 1:t.sent();return[2]}}))}))};n.prototype.handleCopy=function(t){var n=this;var i,r;if(!this._editor.hasTextFocus()||(Rt&&this._clipboardService.writeResources([]),!t.clipboardData||!this.isPasteAsEnabled()))return;var e=this._editor.getModel(),o=this._editor.getSelections();if(!e||!(o!=null&&o.length))return;var s=this._editor.getOption(37);var u=o;var a=o.length===1&&o[0].isEmpty();if(a){if(!s)return;u=[new Ir(u[0].startLineNumber,1,u[0].startLineNumber,1+e.getLineLength(u[0].startLineNumber))]}var h=(i=this._editor._getViewModel())===null||i===void 0?void 0:i.getPlainTextToCopy(o,s,Mt),c={multicursorText:Array.isArray(h)?h:null,pasteOnNewLine:a,mode:null},f=this._languageFeaturesService.documentPasteEditProvider.ordered(e).filter((function(t){return!!t.prepareDocumentPaste}));if(!f.length)return void this.setCopyMetadata(t.clipboardData,{defaultPastePayload:c});var l=c0(t.clipboardData),v=f.flatMap((function(t){var n;return(n=t.copyMimeTypes)!==null&&n!==void 0?n:[]})),d=XX();this.setCopyMetadata(t.clipboardData,{id:d,providerCopyMimeTypes:v,defaultPastePayload:c});var g=Ss((function(t){return __awaiter(n,void 0,void 0,(function(){var n,i,r,i,o,s,a,h,c,v;var d=this;return __generator(this,(function(g){switch(g.label){case 0:i=b;return[4,Promise.all(f.map((function(n){return __awaiter(d,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);return[4,n.prepareDocumentPaste(e,u,l,t)];case 1:return[2,r.sent()];case 2:i=r.sent();return[2,void console.error(i)];case 3:return[2]}}))}))})))];case 1:n=i.apply(void 0,[g.sent()]);n.reverse();for(r=0,i=n;r<i.length;r++){o=i[r];for(s=0,a=o;s<a.length;s++){h=a[s],c=h[0],v=h[1];l.replace(c,v)}}return[2,l]}}))}))}));(r=X0._currentCopyOperation)===null||r===void 0||r.dataTransferPromise.cancel(),X0._currentCopyOperation={handle:d,dataTransferPromise:g}};n.prototype.handlePaste=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o,s,u,a,h,c;var f=this;return __generator(this,(function(l){if(!t.clipboardData||!this._editor.hasTextFocus())return[2];(n=q0.get(this._editor))===null||n===void 0||n.closeMessage(),(i=this._currentPasteOperation)===null||i===void 0||i.cancel(),this._currentPasteOperation=void 0;o=this._editor.getModel(),s=this._editor.getSelections();if(!(s!=null&&s.length)||!o||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return[2];u=this.fetchCopyMetadata(t),a=v0(t.clipboardData);a.delete(e1);h=__spreadArray(__spreadArray(__spreadArray([],t.clipboardData.types,true),(r=u==null?void 0:u.providerCopyMimeTypes)!==null&&r!==void 0?r:[],true),[nv.uriList],false),c=this._languageFeaturesService.documentPasteEditProvider.ordered(o).filter((function(t){var n,i;var r=(n=f._pasteAsActionContext)===null||n===void 0?void 0:n.preferred;return!(r&&t.providedPasteEditKinds&&!f.providerMatchesPreference(t,r))&&((i=t.pasteMimeTypes)===null||i===void 0?void 0:i.some((function(t){return r0(t,h)})))}));c.length?(t.preventDefault(),t.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,c,s,a,u):this.doPasteInline(c,s,a,u,t)):!((e=this._pasteAsActionContext)===null||e===void 0)&&e.preferred&&this.showPasteAsNoEditMessage(s,this._pasteAsActionContext.preferred);return[2]}))}))};n.prototype.showPasteAsNoEditMessage=function(t,n){var i;(i=q0.get(this._editor))===null||i===void 0||i.showMessage(ht(0,"No paste edits for '{0}' found",n instanceof s0?n.value:n.providerId),t[0].getStartPosition())};n.prototype.doPasteInline=function(t,n,i,r,e){var o=this;var s=Ss((function(u){return __awaiter(o,void 0,void 0,(function(){var o,a,h,c,f,l,v;var d=this;return __generator(this,(function(g){switch(g.label){case 0:o=this._editor;if(!o.hasModel())return[2];a=o.getModel(),h=new YQ(o,3,void 0,u);g.label=1;case 1:g.trys.push([1,,5,6]);return[4,this.mergeInDataFromCopy(i,r,h.token)];case 2:if(g.sent(),h.token.isCancellationRequested)return[2];c=t.filter((function(t){return d.isSupportedPasteProvider(t,i)}));if(!c.length||c.length===1&&c[0]instanceof w0)return[2,this.applyDefaultPasteHandler(i,r,h.token,e)];f={triggerKind:$r.Automatic};return[4,this.getPasteEdits(c,i,a,n,f,h.token)];case 3:l=g.sent();if(h.token.isCancellationRequested)return[2];if(l.length===1&&l[0].provider instanceof w0)return[2,this.applyDefaultPasteHandler(i,r,h.token,e)];if(l.length){v=o.getOption(85).showPasteSelector==="afterPaste";return[2,this._postPasteWidgetManager.applyEditAndShowIfNeeded(n,{activeEditIndex:0,allEdits:l},v,(function(t,n){return __awaiter(d,void 0,void 0,(function(){var i,r,e;return __generator(this,(function(o){switch(o.label){case 0:return[4,(r=(i=t.provider).resolveDocumentPasteEdit)===null||r===void 0?void 0:r.call(i,t,n)];case 1:e=o.sent();return[2,(e&&(t.additionalEdit=e.additionalEdit),t)]}}))}))}),h.token)]}return[4,this.applyDefaultPasteHandler(i,r,h.token,e)];case 4:g.sent();return[3,6];case 5:h.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0);return[7];case 6:return[2]}}))}))}));this._pasteProgressManager.showWhile(n[0].getEndPosition(),ht(0,"Running paste handlers. Click to cancel"),s),this._currentPasteOperation=s};n.prototype.showPasteAsPick=function(t,n,i,r,e){var o=this;var s=Ss((function(u){return __awaiter(o,void 0,void 0,(function(){var o,a,h,c,f,l,v,d,g;var p=this;return __generator(this,(function(w){switch(w.label){case 0:o=this._editor;if(!o.hasModel())return[2];a=o.getModel(),h=new YQ(o,3,void 0,u);w.label=1;case 1:w.trys.push([1,,8,9]);return[4,this.mergeInDataFromCopy(r,e,h.token)];case 2:if(w.sent(),h.token.isCancellationRequested)return[2];c=n.filter((function(n){return p.isSupportedPasteProvider(n,r,t)}));t&&(c=c.filter((function(n){return p.providerMatchesPreference(n,t)})));f={triggerKind:$r.PasteAs,only:t&&t instanceof s0?t:void 0};l=void 0;return[4,this.getPasteEdits(c,r,a,i,f,h.token)];case 3:v=w.sent();if(h.token.isCancellationRequested)return[2];if(t&&(v=v.filter((function(n){return t instanceof s0?t.contains(n.kind):t.providerId===n.provider.id}))),!v.length)return[2,void(f.only&&this.showPasteAsNoEditMessage(i,f.only))];if(!t)return[3,4];l=v.at(0);return[3,6];case 4:return[4,this._quickInputService.pick(v.map((function(t){var n;return{label:t.title,description:(n=t.kind)===null||n===void 0?void 0:n.value,edit:t}})),{placeHolder:ht(0,"Select Paste Action")})];case 5:d=w.sent();l=d==null?void 0:d.edit;w.label=6;case 6:if(!l)return[2];g=I0(a.uri,i,l);return[4,this._bulkEditService.apply(g,{editor:this._editor})];case 7:w.sent();return[3,9];case 8:h.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0);return[7];case 9:return[2]}}))}))}));this._progressService.withProgress({location:10,title:ht(0,"Running paste handlers")},(function(){return s}))};n.prototype.setCopyMetadata=function(t,n){t.setData(e1,JSON.stringify(n))};n.prototype.fetchCopyMetadata=function(t){var n;if(!t.clipboardData)return;var i=t.clipboardData.getData(e1);if(i)try{return JSON.parse(i)}catch(t){return}var r=Ik.getTextData(t.clipboardData),e=r[0],o=r[1];return o?{defaultPastePayload:{mode:o.mode,multicursorText:(n=o.multicursorText)!==null&&n!==void 0?n:null,pasteOnNewLine:!!o.isFromEmptySelection}}:void 0};n.prototype.mergeInDataFromCopy=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u,a,h,e;return __generator(this,(function(c){switch(c.label){case 0:if(!(n!=null&&n.id&&((r=X0._currentCopyOperation)===null||r===void 0?void 0:r.handle)===n.id))return[3,2];return[4,X0._currentCopyOperation.dataTransferPromise];case 1:e=c.sent();if(i.isCancellationRequested)return[2];for(o=0,s=e;o<s.length;o++){u=s[o],a=u[0],h=u[1];t.replace(a,h)}c.label=2;case 2:if(!!t.has(nv.uriList))return[3,4];return[4,this._clipboardService.readResources()];case 3:e=c.sent();if(i.isCancellationRequested)return[2];e.length&&t.append(nv.uriList,t0(o0.create(e)));c.label=4;case 4:return[2]}}))}))};n.prototype.getPasteEdits=function(t,n,i,r,e,o){return __awaiter(this,void 0,void 0,(function(){var s;var u=this;return __generator(this,(function(a){switch(a.label){case 0:return[4,Ds(Promise.all(t.map((function(t){return __awaiter(u,void 0,void 0,(function(){var s,u,a,h;return __generator(this,(function(c){switch(c.label){case 0:c.trys.push([0,2,,3]);return[4,(s=t.provideDocumentPasteEdits)===null||s===void 0?void 0:s.call(t,i,r,n,e,o)];case 1:a=c.sent();return[2,(u=a==null?void 0:a.edits)===null||u===void 0?void 0:u.map((function(n){return __assign(__assign({},n),{provider:t})}))];case 2:h=c.sent();console.error(h);return[3,3];case 3:return[2]}}))}))}))),o)];case 1:s=a.sent();return[2,B0(b(s!==null&&s!==void 0?s:[]).flat().filter((function(t){return!e.only||e.only.contains(t.kind)})))]}}))}))};n.prototype.applyDefaultPasteHandler=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a,h,c;return __generator(this,(function(f){switch(f.label){case 0:a=(e=t.get(nv.text))!==null&&e!==void 0?e:t.get("text");return[4,a==null?void 0:a.asString()];case 1:h=(o=f.sent())!==null&&o!==void 0?o:"";if(i.isCancellationRequested)return[2];c={clipboardEvent:r,text:h,pasteOnNewLine:(s=n==null?void 0:n.defaultPastePayload.pasteOnNewLine)!==null&&s!==void 0&&s,multicursorText:(u=n==null?void 0:n.defaultPastePayload.multicursorText)!==null&&u!==void 0?u:null,mode:null};this._editor.trigger("keyboard","paste",c);return[2]}}))}))};n.prototype.isSupportedPasteProvider=function(t,n,i){var r;return!!(!((r=t.pasteMimeTypes)===null||r===void 0)&&r.some((function(t){return n.matches(t)})))&&(!i||this.providerMatchesPreference(t,i))};n.prototype.providerMatchesPreference=function(t,n){return n instanceof s0?!t.providedPasteEditKinds||t.providedPasteEditKinds.some((function(t){return n.contains(t)})):t.id===n.providerId};return n}(ci);o1.ID="editor.contrib.copyPasteActionController",o1=X0=t1([n1(1,Jh),n1(2,QI),n1(3,Kq),n1(4,tp),n1(5,TH),n1(6,TB)],o1);var s1="9_cutcopypaste",u1=jt||document.queryCommandSupported("cut"),a1=jt||document.queryCommandSupported("copy"),h1=navigator.clipboard!==void 0&&!is||document.queryCommandSupported("paste");function c1(t){return t.register(),t}var f1=u1?c1(new Ef({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:jt?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:vf.MenubarEditMenu,group:"2_ccp",title:ht(0,"Cu&&t"),order:1},{menuId:vf.EditorContext,group:s1,title:ht(0,"Cut"),when:$C.writable,order:1},{menuId:vf.CommandPalette,group:"",title:ht(0,"Cut"),order:1},{menuId:vf.SimpleEditorContext,group:s1,title:ht(0,"Cut"),when:$C.writable,order:1}]})):void 0,l1=a1?c1(new Ef({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:jt?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:vf.MenubarEditMenu,group:"2_ccp",title:ht(0,"&&Copy"),order:2},{menuId:vf.EditorContext,group:s1,title:ht(0,"Copy"),order:2},{menuId:vf.CommandPalette,group:"",title:ht(0,"Copy"),order:1},{menuId:vf.SimpleEditorContext,group:s1,title:ht(0,"Copy"),order:2}]})):void 0;pf.appendMenuItem(vf.MenubarEditMenu,{submenu:vf.MenubarCopy,title:ct(0,"Copy As"),group:"2_ccp",order:3}),pf.appendMenuItem(vf.EditorContext,{submenu:vf.EditorContextCopy,title:ct(0,"Copy As"),group:s1,order:3}),pf.appendMenuItem(vf.EditorContext,{submenu:vf.EditorContextShare,title:ct(0,"Share"),group:"11_share",order:-1,when:Dc.and(Dc.notEquals("resourceScheme","output"),$C.editorTextFocus)}),pf.appendMenuItem(vf.EditorTitleContext,{submenu:vf.EditorTitleContextShare,title:ct(0,"Share"),group:"11_share",order:-1}),pf.appendMenuItem(vf.ExplorerContext,{submenu:vf.ExplorerContextShare,title:ct(0,"Share"),group:"11_share",order:-1});var v1=h1?c1(new Ef({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:jt?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:vf.MenubarEditMenu,group:"2_ccp",title:ht(0,"&&Paste"),order:4},{menuId:vf.EditorContext,group:s1,title:ht(0,"Paste"),when:$C.writable,order:4},{menuId:vf.CommandPalette,group:"",title:ht(0,"Paste"),order:1},{menuId:vf.SimpleEditorContext,group:s1,title:ht(0,"Paste"),when:$C.writable,order:4}]})):void 0;var d1=function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:ht(0,"Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:$C.textInputFocus,primary:0,weight:100}})||this}n.prototype.run=function(t,n){n.hasModel()&&(!n.getOption(37)&&n.getSelection().isEmpty()||(Lk.forceCopyWithSyntaxHighlighting=!0,n.focus(),n.getContainerDomNode().ownerDocument.execCommand("copy"),Lk.forceCopyWithSyntaxHighlighting=!1))};return n}(Lf);function g1(t,n){t&&(t.addImplementation(1e4,"code-editor",(function(t,i){var r=t.get(Qh).getFocusedCodeEditor();if(r&&r.hasTextFocus()){var e=r.getOption(37),o=r.getSelection();return o&&o.isEmpty()&&!e||r.getContainerDomNode().ownerDocument.execCommand(n),!0}return!1})),t.addImplementation(0,"generic-dom",(function(t,i){return Ga().execCommand(n),!0})))}g1(f1,"cut"),g1(l1,"copy"),v1&&(v1.addImplementation(1e4,"code-editor",(function(t,n){var i,r;var e=t.get(Qh),o=t.get(Kq),s=e.getFocusedCodeEditor();return s&&s.hasTextFocus()?s.getContainerDomNode().ownerDocument.execCommand("paste")?(r=(i=o1.get(s))===null||i===void 0?void 0:i.finishedPaste())!==null&&r!==void 0?r:Promise.resolve():!Rt||function(){return __awaiter(a,void 0,void 0,(function(){var t,n,i,r,e;return __generator(this,(function(u){switch(u.label){case 0:return[4,o.readText()];case 1:t=u.sent();if(t!==""){n=jk.INSTANCE.get(t);i=!1,r=null,e=null;n&&(i=s.getOption(37)&&!!n.isFromEmptySelection,r=n.multicursorText!==void 0?n.multicursorText:null,e=n.mode),s.trigger("keyboard","paste",{text:t,pasteOnNewLine:i,multicursorText:r,mode:e})}return[2]}}))}))}():!1})),v1.addImplementation(0,"generic-dom",(function(t,n){return Ga().execCommand("paste"),!0}))),a1&&Bf(d1);var p1=new(function(){function t(){this.QuickFix=new s0("quickfix"),this.Refactor=new s0("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new s0("notebook"),this.Source=new s0("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}return t}());var w1;function m1(t,n,i){return!!n.contains(t)&&(!i||!n.contains(i))}(function(t){t.Refactor="refactor",t.RefactorPreview="refactor preview",t.Lightbulb="lightbulb",t.Default="other (default)",t.SourceAction="source action",t.QuickFix="quick fix action",t.FixAll="fix all",t.OrganizeImports="organize imports",t.AutoFix="auto fix",t.QuickFixHover="quick fix hover window",t.OnSave="save participants",t.ProblemsView="problems view"})(w1||(w1={}));var b1=function(){function t(t,n,i){this.kind=t,this.apply=n,this.preferred=i}t.fromUser=function(n,i){return n&&typeof n=="object"?new t(t.getKindFromUser(n,i.kind),t.getApplyFromUser(n,i.apply),t.getPreferredUser(n)):new t(i.kind,i.apply,!1)};t.getApplyFromUser=function(t,n){switch(typeof t.apply=="string"?t.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return n}};t.getKindFromUser=function(t,n){return typeof t.kind=="string"?new s0(t.kind):n};t.getPreferredUser=function(t){return typeof t.preferred=="boolean"&&t.preferred};return t}();var y1=function(){function t(t,n,i){this.action=t,this.provider=n,this.highlightRange=i}t.prototype.resolve=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r;return __generator(this,(function(e){switch(e.label){case 0:if(!(!((n=this.provider)===null||n===void 0)&&n.resolveCodeAction&&!this.action.edit))return[3,5];i=void 0;e.label=1;case 1:e.trys.push([1,3,,4]);return[4,this.provider.resolveCodeAction(this.action,t)];case 2:i=e.sent();return[3,4];case 3:r=e.sent();$n(r);return[3,4];case 4:i&&(this.action.edit=i.edit);e.label=5;case 5:return[2,this]}}))}))};return t}();var _1="editor.action.codeAction",k1="editor.action.quickFix",x1="editor.action.autoFix",C1="editor.action.refactor",S1="editor.action.sourceAction",D1="editor.action.organizeImports",A1="editor.action.fixAll";var O1=function(t){__extends(n,t);function n(i,r,e){var o=this;o=t.call(this)||this,o.documentation=r,o._register(e),o.allActions=__spreadArray([],i,true).sort(n.codeActionsComparator),o.validActions=o.allActions.filter((function(t){var n=t.action;return!n.disabled}));return o}n.codeActionsPreferredComparator=function(t,n){return t.isPreferred&&!n.isPreferred?-1:!t.isPreferred&&n.isPreferred?1:0};n.codeActionsComparator=function(t,i){var r=t.action;var e=i.action;return r.isAI&&!e.isAI?1:!r.isAI&&e.isAI?-1:k(r.diagnostics)?k(e.diagnostics)?n.codeActionsPreferredComparator(r,e):-1:k(e.diagnostics)?1:n.codeActionsPreferredComparator(r,e)};Object.defineProperty(n.prototype,"hasAutoFix",{get:function(){return this.validActions.some((function(t){var n=t.action;return!!n.kind&&p1.QuickFix.contains(new s0(n.kind))&&!!n.isPreferred}))},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"hasAIFix",{get:function(){return this.validActions.some((function(t){var n=t.action;return!!n.isAI}))},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"allAIFixes",{get:function(){return this.validActions.every((function(t){var n=t.action;return!!n.isAI}))},enumerable:false,configurable:true});return n}(ci);var E1={actions:[],documentation:void 0};function M1(t,n,i,r,e,o){return __awaiter(this,void 0,void 0,(function(){var s,u,a,h,c,f,l,d,g,p,w,m,y;var _=this;return __generator(this,(function(k){switch(k.label){case 0:u=r.filter||{},a=__assign(__assign({},u),{excludes:__spreadArray(__spreadArray([],u.excludes||[],true),[p1.Notebook],false)}),h={only:(s=u.include)===null||s===void 0?void 0:s.value,trigger:r.type},c=new XQ(n,o),f=r.type===2,l=function(t,n,i){return t.all(n).filter((function(t){return!t.providedCodeActionKinds||t.providedCodeActionKinds.some((function(t){return function(t,n){return!(t.include&&!t.include.intersects(n)||t.excludes&&t.excludes.some((function(i){return m1(n,i,t.include)}))||!t.includeSourceActions&&p1.Source.contains(n))}(i,new s0(t))}))}))}(t,n,f?a:u),d=new hi,g=l.map((function(t){return __awaiter(_,void 0,void 0,(function(){var r,o,s,a;return __generator(this,(function(f){switch(f.label){case 0:f.trys.push([0,2,,3]);e.report(t);return[4,t.provideCodeActions(n,i,h,c.token)];case 1:r=f.sent();if(r&&d.add(r),c.token.isCancellationRequested)return[2,E1];o=((r==null?void 0:r.actions)||[]).filter((function(t){return t&&function(t,n){var i=n.kind?new s0(n.kind):void 0;return!(!(!t.include||i&&t.include.contains(i))||t.excludes&&i&&t.excludes.some((function(n){return m1(i,n,t.include)}))||!t.includeSourceActions&&i&&p1.Source.contains(i)||t.onlyIncludePreferredActions&&!n.isPreferred)}(u,t)})),s=function(t,n,i){if(!t.documentation)return;var r=t.documentation.map((function(t){return{kind:new s0(t.kind),command:t.command}}));if(i){var e=void 0;for(var o=0,s=r;o<s.length;o++){var u=s[o];u.kind.contains(i)&&(e?e.kind.contains(u.kind)&&(e=u):e=u)}if(e)return e==null?void 0:e.command}for(var a=0,h=n;a<h.length;a++){var e=h[a];if(e.kind){for(var c=0,f=r;c<f.length;c++){var u=f[c];if(u.kind.contains(new s0(e.kind)))return u.command}}}}(t,o,u.include);return[2,{actions:o.map((function(n){return new y1(n,t)})),documentation:s}];case 2:a=f.sent();if(Qn(a))throw a;return[2,($n(a),E1)];case 3:return[2]}}))}))})),p=t.onDidChange((function(){v(t.all(n),l)||c.cancel()}));k.label=1;case 1:k.trys.push([1,,3,4]);return[4,Promise.all(g)];case 2:w=k.sent(),m=w.map((function(t){return t.actions})).flat(),y=__spreadArray(__spreadArray([],b(w.map((function(t){return t.documentation}))),true),F1(t,n,r,m),true);return[2,new O1(m,y,d)];case 3:p.dispose(),c.dispose();return[7];case 4:return[2]}}))}))}function F1(t,n,i,r){var e,o,s,u,a,h,c;return __generator(this,(function(f){switch(f.label){case 0:if(!(n&&r.length))return[3,5];u=0,a=t.all(n);f.label=1;case 1:if(!(u<a.length))return[3,5];h=a[u];c=h._getAdditionalMenuItems;if(!c)return[3,3];return[5,__values((e=h._getAdditionalMenuItems)===null||e===void 0?void 0:e.call(h,{trigger:i.type,only:(s=(o=i.filter)===null||o===void 0?void 0:o.include)===null||s===void 0?void 0:s.value},r.map((function(t){return t.action}))))];case 2:c=f.sent();f.label=3;case 3:c;f.label=4;case 4:u++;return[3,1];case 5:return[2]}}))}var L1;function j1(t,n,i,r){return __awaiter(this,arguments,void 0,(function(t,n,i,r,e){var o,s,u,a,h,c,f,l;if(e===void 0){e=Fi.None}return __generator(this,(function(v){switch(v.label){case 0:s=t.get(QI),u=t.get(ac),a=t.get(_f),h=t.get(EL);a.publicLog2("codeAction.applyCodeAction",{codeActionTitle:n.action.title,codeActionKind:n.action.kind,codeActionIsPreferred:!!n.action.isPreferred,reason:i});return[4,n.resolve(e)];case 1:if(!(v.sent(),!e.isCancellationRequested))return[3,7];c=!((o=n.action.edit)===null||o===void 0)&&o.edits.length;if(!c)return[3,3];return[4,s.apply(n.action.edit,{editor:r==null?void 0:r.editor,label:n.action.title,quotableLabel:n.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:i!==L1.OnSave,showPreview:r==null?void 0:r.preview})];case 2:c=!v.sent().isApplied;v.label=3;case 3:if(c)return[2];if(!n.action.command)return[3,7];v.label=4;case 4:v.trys.push([4,6,,7]);return[4,u.executeCommand.apply(u,__spreadArray([n.action.command.id],n.action.command.arguments||[],false))];case 5:v.sent();return[3,7];case 6:f=v.sent();l=function(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}(f);h.error(typeof l=="string"?l:ht(0,"An unknown error occurred while applying the code action"));return[3,7];case 7:return[2]}}))}))}(function(t){t.OnSave="onSave",t.FromProblemsView="fromProblemsView",t.FromCodeActions="fromCodeActions",t.FromAILightbulb="fromAILightbulb"})(L1||(L1={})),hc.registerCommand("_executeCodeActionProvider",(function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h,c,f,l;return __generator(this,(function(v){switch(v.label){case 0:if(!(n instanceof Cr))throw Xn();o=t.get(tp).codeActionProvider,s=t.get(Yh).getModel(n);if(!s)throw Xn();u=Br.isISelection(i)?Br.liftSelection(i):Ir.isIRange(i)?s.validateRange(i):void 0;if(!u)throw Xn();a=typeof r=="string"?new s0(r):void 0;return[4,M1(o,s,u,{type:1,triggerAction:w1.Default,filter:{includeSourceActions:!0,include:a}},IB.None,Fi.None)];case 1:h=v.sent(),c=[],f=Math.min(h.validActions.length,typeof e=="number"?e:0);for(l=0;l<f;l++)c.push(h.validActions[l].resolve(Fi.None));v.label=2;case 2:v.trys.push([2,,4,5]);return[4,Promise.all(c)];case 3:return[2,(v.sent(),h.validActions.map((function(t){return t.action})))];case 4:setTimeout((function(){return h.dispose()}),100);return[7];case 5:return[2]}}))}))}));var R1,T1=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},I1=function(t,n){return function(i,r){n(i,r,t)}};var B1=R1=function(){function t(t){this.keybindingService=t}t.prototype.getResolver=function(){var t=this;var n=new no((function(){return t.keybindingService.getKeybindings().filter((function(t){return R1.codeActionCommands.indexOf(t.command)>=0})).filter((function(t){return t.resolvedKeybinding})).map((function(t){var n=t.commandArgs;return t.command===D1?n={kind:p1.SourceOrganizeImports.value}:t.command===A1&&(n={kind:p1.SourceFixAll.value}),__assign({resolvedKeybinding:t.resolvedKeybinding},b1.fromUser(n,{kind:s0.None,apply:"never"}))}))}));return function(i){if(i.kind){var r=t.bestKeybindingForCodeAction(i,n.value);return r==null?void 0:r.resolvedKeybinding}}};t.prototype.bestKeybindingForCodeAction=function(t,n){if(!t.kind)return;var i=new s0(t.kind);return n.filter((function(t){return t.kind.contains(i)})).filter((function(n){return!n.preferred||t.isPreferred})).reduceRight((function(t,n){return t?t.kind.contains(n.kind)?n:t:n}),void 0)};return t}();B1.codeActionCommands=[C1,_1,S1,D1,A1],B1=R1=T1([I1(0,Yx)],B1),Jw("symbolIcon.arrayForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.booleanForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},ht(0,"The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.colorForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.constantForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},ht(0,"The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},ht(0,"The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},ht(0,"The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},ht(0,"The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},ht(0,"The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.fileForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.folderForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},ht(0,"The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},ht(0,"The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.keyForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.keywordForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},ht(0,"The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.moduleForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.namespaceForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.nullForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.numberForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.objectForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.operatorForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.packageForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.propertyForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.referenceForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.snippetForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.stringForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.structForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.textForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.typeParameterForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.unitForeground",{dark:om,light:om,hcDark:om,hcLight:om},ht(0,"The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jw("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},ht(0,"The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));var N1=Object.freeze({kind:s0.Empty,title:ht(0,"More Actions...")}),P1=Object.freeze([{kind:p1.QuickFix,title:ht(0,"Quick Fix")},{kind:p1.RefactorExtract,title:ht(0,"Extract"),icon:Hr.wrench},{kind:p1.RefactorInline,title:ht(0,"Inline"),icon:Hr.wrench},{kind:p1.RefactorRewrite,title:ht(0,"Rewrite"),icon:Hr.wrench},{kind:p1.RefactorMove,title:ht(0,"Move"),icon:Hr.wrench},{kind:p1.SurroundWith,title:ht(0,"Surround With"),icon:Hr.surroundWith},{kind:p1.Source,title:ht(0,"Source Action"),icon:Hr.symbolFile},N1]);var W1,H1,z1=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},U1=function(t,n){return function(i,r){n(i,r,t)}};(function(t){t.Hidden={type:0},t.Showing=function(){function t(t,n,i,r){this.actions=t,this.trigger=n,this.editorPosition=i,this.widgetPosition=r,this.type=1}return t}()})(H1||(H1={}));var K1=W1=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._editor=n,e._keybindingService=i,e._onClick=e._register(new ki),e.onClick=e._onClick.event,e._state=H1.Hidden,e._iconClasses=[],e._domNode=bh("div.lightBulbWidget"),e._register(nk.ignoreTarget(e._domNode)),e._editor.addContentWidget(e),e._register(e._editor.onDidChangeModelContent((function(t){var n=e._editor.getModel();(e.state.type!==1||!n||e.state.editorPosition.lineNumber>=n.getLineCount())&&e.hide()}))),e._register(_a(e._domNode,(function(t){if(e.state.type!==1)return;e._editor.focus(),t.preventDefault();var n=ja(e._domNode),i=n.top,r=n.height,o=e._editor.getOption(67);var s=Math.floor(o/3);e.state.widgetPosition.position!==null&&e.state.widgetPosition.position.lineNumber<e.state.editorPosition.lineNumber&&(s+=o),e._onClick.fire({x:t.posx,y:i+r+s,actions:e.state.actions,trigger:e.state.trigger})}))),e._register(ma(e._domNode,"mouseenter",(function(t){1&~t.buttons||e.hide()}))),e._register(wi.runAndSubscribe(e._keybindingService.onDidUpdateKeybindings,(function(){var t,n,i,r;e._preferredKbLabel=(n=(t=e._keybindingService.lookupKeybinding(x1))===null||t===void 0?void 0:t.getLabel())!==null&&n!==void 0?n:void 0,e._quickFixKbLabel=(r=(i=e._keybindingService.lookupKeybinding(k1))===null||i===void 0?void 0:i.getLabel())!==null&&r!==void 0?r:void 0,e._updateLightBulbTitleAndIcon()})));return e}n.prototype.dispose=function(){t.prototype.dispose.call(this),this._editor.removeContentWidget(this)};n.prototype.getId=function(){return"LightBulbWidget"};n.prototype.getDomNode=function(){return this._domNode};n.prototype.getPosition=function(){return this._state.type===1?this._state.widgetPosition:null};n.prototype.update=function(t,i,r){var e=this;if(t.validActions.length<=0)return this.hide();if(!this._editor.getOptions().get(65).enabled)return this.hide();var o=this._editor.getModel();if(!o)return this.hide();var s=o.validatePosition(r),u=s.lineNumber,a=s.column,h=o.getOptions().tabSize,c=this._editor.getOptions().get(50),f=BS(o.getLineContent(u),h),l=function(t){return t>2&&e._editor.getTopForLineNumber(t)===e._editor.getTopForLineNumber(t-1)};var v=u,d=1;if(!(c.spaceWidth*f>22)){if(u>1&&!l(u-1))v-=1;else if(u<o.getLineCount()&&!l(u+1))v+=1;else if(a*c.spaceWidth<22)return this.hide();d=/^\S\s*$/.test(o.getLineContent(v))?2:1}this.state=new H1.Showing(t,i,r,{position:{lineNumber:v,column:d},preference:n._posPref}),this._editor.layoutContentWidget(this)};n.prototype.hide=function(){this.state!==H1.Hidden&&(this.state=H1.Hidden,this._editor.layoutContentWidget(this))};Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t,this._updateLightBulbTitleAndIcon()},enumerable:false,configurable:true});n.prototype._updateLightBulbTitleAndIcon=function(){var t,n;if((t=this._domNode.classList).remove.apply(t,this._iconClasses),this._iconClasses=[],this.state.type!==1)return;var i,r=!1;this.state.actions.allAIFixes?(i=Hr.sparkleFilled,this.state.actions.validActions.length===1&&(r=!0)):i=this.state.actions.hasAutoFix?this.state.actions.hasAIFix?Hr.lightbulbSparkleAutofix:Hr.lightbulbAutofix:this.state.actions.hasAIFix?Hr.lightbulbSparkle:Hr.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,r),this._iconClasses=uc.asClassNameArray(i),(n=this._domNode.classList).add.apply(n,this._iconClasses)};n.prototype._updateLightbulbTitle=function(t,n){this.state.type===1&&(n?this.title=ht(0,"Run: {0}",this.state.actions.validActions[0].action.title):t&&this._preferredKbLabel?this.title=ht(0,"Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!t&&this._quickFixKbLabel?this.title=ht(0,"Show Code Actions ({0})",this._quickFixKbLabel):t||(this.title=ht(0,"Show Code Actions")))};Object.defineProperty(n.prototype,"title",{set:function(t){this._domNode.title=t},enumerable:false,configurable:true});return n}(ci);K1.ID="editor.contrib.lightbulbWidget",K1._posPref=[0],K1=W1=z1([U1(1,Yx),U1(2,ac)],K1);var V1=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},q1=function(t,n){return function(i,r){n(i,r,t)}};var G1="acceptSelectedCodeAction",$1="previewSelectedCodeAction";var J1=function(){function t(){}Object.defineProperty(t.prototype,"templateId",{get:function(){return"header"},enumerable:false,configurable:true});t.prototype.renderTemplate=function(t){t.classList.add("group-header");var n=document.createElement("span");return t.append(n),{container:t,text:n}};t.prototype.renderElement=function(t,n,i){var r,e;i.text.textContent=(e=(r=t.group)===null||r===void 0?void 0:r.title)!==null&&e!==void 0?e:""};t.prototype.disposeTemplate=function(t){};return t}();var Z1=function(){function t(t,n){this._supportsPreview=t,this._keybindingService=n}Object.defineProperty(t.prototype,"templateId",{get:function(){return"action"},enumerable:false,configurable:true});t.prototype.renderTemplate=function(t){t.classList.add(this.templateId);var n=document.createElement("div");n.className="icon",t.append(n);var i=document.createElement("span");return i.className="title",t.append(i),{container:t,icon:n,text:i,keybinding:new tV(t,zt)}};t.prototype.renderElement=function(t,n,i){var r,e,o;if(!((r=t.group)===null||r===void 0)&&r.icon?(i.icon.className=uc.asClassName(t.group.icon),t.group.icon.color&&(i.icon.style.color=qw(t.group.icon.color.id))):(i.icon.className=uc.asClassName(Hr.lightBulb),i.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!t.item||!t.label)return;i.text.textContent=n2(t.label),i.keybinding.set(t.keybinding),function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}t?yh.apply(void 0,n):_h.apply(void 0,n)}(!!t.keybinding,i.keybinding.element);var s=(e=this._keybindingService.lookupKeybinding(G1))===null||e===void 0?void 0:e.getLabel(),u=(o=this._keybindingService.lookupKeybinding($1))===null||o===void 0?void 0:o.getLabel();i.container.classList.toggle("option-disabled",t.disabled),t.disabled?i.container.title=t.label:s&&u?this._supportsPreview&&t.canPreview?i.container.title=ht(0,"{0} to Apply, {1} to Preview",s,u):i.container.title=ht(0,"{0} to Apply",s):i.container.title=""};t.prototype.disposeTemplate=function(t){t.keybinding.dispose()};return t}();Z1=V1([q1(1,Yx)],Z1);var Q1=function(t){__extends(n,t);function n(){return t.call(this,"acceptSelectedAction")||this}return n}(UIEvent);var Y1=function(t){__extends(n,t);function n(){return t.call(this,"previewSelectedAction")||this}return n}(UIEvent);function X1(t){if(t.kind==="action")return t.label}var t2=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._delegate=e,u._contextViewService=o,u._keybindingService=s,u._actionLineHeight=24,u._headerLineHeight=26,u.cts=u._register(new ji),u.domNode=document.createElement("div"),u.domNode.classList.add("actionList");var a={getHeight:function(t){return t.kind==="header"?u._headerLineHeight:u._actionLineHeight},getTemplateId:function(t){return t.kind}};u._list=u._register(new rW(n,u.domNode,a,[new Z1(i,u._keybindingService),new J1],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:X1},accessibilityProvider:{getAriaLabel:function(t){if(t.kind==="action"){var n=t.label?n2(t==null?void 0:t.label):"";return t.disabled&&(n=ht(0,"{0}, Disabled Reason: {1}",n,t.disabled)),n}return null},getWidgetAriaLabel:function(){return ht(0,"Action Widget")},getRole:function(t){return t.kind==="action"?"option":"separator"},getWidgetRole:function(){return"listbox"}}})),u._list.style(FW),u._register(u._list.onMouseClick((function(t){return u.onListClick(t)}))),u._register(u._list.onMouseOver((function(t){return u.onListHover(t)}))),u._register(u._list.onDidChangeFocus((function(){return u.onFocus()}))),u._register(u._list.onDidChangeSelection((function(t){return u.onListSelection(t)}))),u._allMenuItems=r,u._list.splice(0,u._list.length,u._allMenuItems),u._list.length&&u.focusNext();return u}n.prototype.focusCondition=function(t){return!t.disabled&&t.kind==="action"};n.prototype.hide=function(t){this._delegate.onHide(t),this.cts.cancel(),this._contextViewService.hideContextView()};n.prototype.layout=function(t){var n=this;var i=this._allMenuItems.filter((function(t){return t.kind==="header"})).length,r=this._allMenuItems.length*this._actionLineHeight+i*this._headerLineHeight-i*this._actionLineHeight;this._list.layout(r);var e=t;if(this._allMenuItems.length>=50)e=380;else{var o=this._allMenuItems.map((function(t,i){var r=n.domNode.ownerDocument.getElementById(n._list.getElementID(i));if(r){r.style.width="auto";var e=r.getBoundingClientRect().width;return r.style.width="",e}return 0}));e=Math.max.apply(Math,__spreadArray(__spreadArray([],o,false),[t],false))}var s=Math.min(r,.7*this.domNode.ownerDocument.body.clientHeight);return this._list.layout(s,e),this.domNode.style.height="".concat(s,"px"),this._list.domFocus(),e};n.prototype.focusPrevious=function(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)};n.prototype.focusNext=function(){this._list.focusNext(1,!0,void 0,this.focusCondition)};n.prototype.acceptSelected=function(t){var n=this._list.getFocus();if(n.length===0)return;var i=n[0],r=this._list.element(i);if(!this.focusCondition(r))return;var e=t?new Y1:new Q1;this._list.setSelection([i],e)};n.prototype.onListSelection=function(t){if(!t.elements.length)return;var n=t.elements[0];n.item&&this.focusCondition(n)?this._delegate.onSelect(n.item,t.browserEvent instanceof Y1):this._list.setSelection([])};n.prototype.onFocus=function(){var t,n;var i=this._list.getFocus();if(i.length===0)return;var r=i[0],e=this._list.element(r);(n=(t=this._delegate).onFocus)===null||n===void 0||n.call(t,e.item)};n.prototype.onListHover=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(r){switch(r.label){case 0:n=t.element;if(!(n&&n.item&&this.focusCondition(n)))return[3,3];if(!(this._delegate.onHover&&!n.disabled&&n.kind==="action"))return[3,2];return[4,this._delegate.onHover(n.item,this.cts.token)];case 1:i=r.sent();n.canPreview=i?i.canPreview:void 0;r.label=2;case 2:t.index&&this._list.splice(t.index,1,[n]);r.label=3;case 3:this._list.setFocus(typeof t.index=="number"?[t.index]:[]);return[2]}}))}))};n.prototype.onListClick=function(t){t.element&&this.focusCondition(t.element)&&this._list.setFocus([])};return n}(ci);function n2(t){return t.replace(/\r\n|\r|\n/g," ")}t2=V1([q1(4,yR),q1(5,Yx)],t2);var i2=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},r2=function(t,n){return function(i,r){n(i,r,t)}};Jw("actionBar.toggledBackground",{dark:Lb,light:Lb,hcDark:Lb,hcLight:Lb},ht(0,"Background color for toggled action items in action bar."));var e2={Visible:new qc("codeActionMenuVisible",!1,ht(0,"Whether the action widget list is visible"))},o2=Zh("actionWidgetService");var s2=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._contextViewService=n,e._contextKeyService=i,e._instantiationService=r,e._list=e._register(new fi);return e}Object.defineProperty(n.prototype,"isVisible",{get:function(){return e2.Visible.getValue(this._contextKeyService)||!1},enumerable:false,configurable:true});n.prototype.show=function(t,n,i,r,e,o,s){var u=this;var a=e2.Visible.bindTo(this._contextKeyService),h=this._instantiationService.createInstance(t2,t,n,i,r);this._contextViewService.showContextView({getAnchor:function(){return e},render:function(t){return a.set(!0),u._renderWidget(t,h,s!==null&&s!==void 0?s:[])},onHide:function(t){a.reset(),u._onWidgetClosed(t)}},o,!1)};n.prototype.acceptSelected=function(t){var n;(n=this._list.value)===null||n===void 0||n.acceptSelected(t)};n.prototype.focusPrevious=function(){var t,n;(n=(t=this._list)===null||t===void 0?void 0:t.value)===null||n===void 0||n.focusPrevious()};n.prototype.focusNext=function(){var t,n;(n=(t=this._list)===null||t===void 0?void 0:t.value)===null||n===void 0||n.focusNext()};n.prototype.hide=function(){var t;(t=this._list.value)===null||t===void 0||t.hide(),this._list.clear()};n.prototype._renderWidget=function(t,n,i){var r=this;var e;var o=document.createElement("div");if(o.classList.add("action-widget"),t.appendChild(o),this._list.value=n,!this._list.value)throw new Error("List has no value");o.appendChild(this._list.value.domNode);var s=new hi,u=document.createElement("div"),a=t.appendChild(u);a.classList.add("context-view-block"),s.add(ma(a,ah.MOUSE_DOWN,(function(t){return t.stopPropagation()})));var h=document.createElement("div"),c=t.appendChild(h);c.classList.add("context-view-pointerBlock"),s.add(ma(c,ah.POINTER_MOVE,(function(){return c.remove()}))),s.add(ma(c,ah.MOUSE_DOWN,(function(){return c.remove()})));var f=0;if(i.length){var l=this._createActionBar(".action-widget-action-bar",i);l&&(o.appendChild(l.getContainer().parentElement),s.add(l),f=l.getContainer().offsetWidth)}var v=(e=this._list.value)===null||e===void 0?void 0:e.layout(f);o.style.width="".concat(v,"px");var d=s.add(lh(t));return s.add(d.onDidBlur((function(){return r.hide()}))),s};n.prototype._createActionBar=function(t,n){if(!n.length)return;var i=bh(t),r=new qW(i);return r.push(n,{icon:!1,label:!0}),r};n.prototype._onWidgetClosed=function(t){var n;(n=this._list.value)===null||n===void 0||n.hide(t)};return n}(ci);s2=i2([r2(0,yR),r2(1,Gc),r2(2,Jh)],s2),Xl(o2,s2,1);var u2=1100;yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"hideCodeActionWidget",title:ct(0,"Hide action widget"),precondition:e2.Visible,keybinding:{weight:u2,primary:9,secondary:[1033]}})||this}n.prototype.run=function(t){t.get(o2).hide()};return n}(bf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"selectPrevCodeAction",title:ct(0,"Select previous action"),precondition:e2.Visible,keybinding:{weight:u2,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})||this}n.prototype.run=function(t){var n=t.get(o2);n instanceof s2&&n.focusPrevious()};return n}(bf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"selectNextCodeAction",title:ct(0,"Select next action"),precondition:e2.Visible,keybinding:{weight:u2,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})||this}n.prototype.run=function(t){var n=t.get(o2);n instanceof s2&&n.focusNext()};return n}(bf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:G1,title:ct(0,"Accept selected action"),precondition:e2.Visible,keybinding:{weight:u2,primary:3,secondary:[2137]}})||this}n.prototype.run=function(t){var n=t.get(o2);n instanceof s2&&n.acceptSelected()};return n}(bf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:$1,title:ct(0,"Preview selected action"),precondition:e2.Visible,keybinding:{weight:u2,primary:2051}})||this}n.prototype.run=function(t){var n=t.get(o2);n instanceof s2&&n.acceptSelected(!0)};return n}(bf));var a2=new qc("supportedCodeAction",""),h2="_typescript.applyFixAllCodeAction";var c2=function(t){__extends(n,t);function n(n,i,r,e){if(e===void 0){e=250}var o=this;o=t.call(this)||this,o._editor=n,o._markerService=i,o._signalChange=r,o._delay=e,o._autoTriggerTimer=o._register(new js),o._register(o._markerService.onMarkerChanged((function(t){return o._onMarkerChanges(t)}))),o._register(o._editor.onDidChangeCursorPosition((function(){return o._tryAutoTrigger()})));return o}n.prototype.trigger=function(t){var n=this._getRangeOfSelectionUnlessWhitespaceEnclosed(t);this._signalChange(n?{trigger:t,selection:n}:void 0)};n.prototype._onMarkerChanges=function(t){var n=this._editor.getModel();n&&t.some((function(t){return IO(t,n.uri)}))&&this._tryAutoTrigger()};n.prototype._tryAutoTrigger=function(){var t=this;this._autoTriggerTimer.cancelAndSet((function(){t.trigger({type:2,triggerAction:w1.Default})}),this._delay)};n.prototype._getRangeOfSelectionUnlessWhitespaceEnclosed=function(t){if(!this._editor.hasModel())return;var n=this._editor.getSelection();if(t.type===1)return n;var i=this._editor.getOption(65).enabled;if(i!==Dn.Off){if(i===Dn.On)return n;if(i===Dn.OnCode){if(!n.isEmpty())return n;var r=this._editor.getModel(),e=n.getPosition(),o=e.lineNumber,s=e.column,u=r.getLineContent(o);if(u.length===0)return;if(s===1){if(/\s/.test(u[0]))return}else if(s===r.getLineMaxColumn(o)){if(/\s/.test(u[u.length-1]))return}else if(/\s/.test(u[s-2])&&/\s/.test(u[s-1]))return}return n}};return n}(ci);var f2;(function(t){t.Empty={type:0},t.Triggered=function(){function t(t,n,i){this.trigger=t,this.position=n,this._cancellablePromise=i,this.type=1,this.actions=i.catch((function(t){if(Qn(t))return l2;throw t}))}t.prototype.cancel=function(){this._cancellablePromise.cancel()};return t}()})(f2||(f2={}));var l2=Object.freeze({allActions:[],validActions:[],dispose:function(){},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});var v2=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._editor=n,u._registry=i,u._markerService=r,u._progressService=o,u._configurationService=s,u._codeActionOracle=u._register(new fi),u._state=f2.Empty,u._onDidChangeState=u._register(new ki),u.onDidChangeState=u._onDidChangeState.event,u._disposed=!1,u._supportedCodeActions=a2.bindTo(e),u._register(u._editor.onDidChangeModel((function(){return u._update()}))),u._register(u._editor.onDidChangeModelLanguage((function(){return u._update()}))),u._register(u._registry.onDidChange((function(){return u._update()}))),u._register(u._editor.onDidChangeConfiguration((function(t){t.hasChanged(65)&&u._update()}))),u._update();return u}n.prototype.dispose=function(){this._disposed||(this._disposed=!0,t.prototype.dispose.call(this),this.setState(f2.Empty,!0))};n.prototype._settingEnabledNearbyQuickfixes=function(){var t;var n=(t=this._editor)===null||t===void 0?void 0:t.getModel();return!!this._configurationService&&this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:n==null?void 0:n.uri})};n.prototype._update=function(){var t=this;if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(f2.Empty);var n=this._editor.getModel();if(n&&this._registry.has(n)&&!this._editor.getOption(91)){var i=this._registry.all(n).flatMap((function(t){var n;return(n=t.providedCodeActionKinds)!==null&&n!==void 0?n:[]}));this._supportedCodeActions.set(i.join(" ")),this._codeActionOracle.value=new c2(this._editor,this._markerService,(function(i){var r;if(!i)return void t.setState(f2.Empty);var e=i.selection.getStartPosition(),o=Ss((function(r){return __awaiter(t,void 0,void 0,(function(){var t,e,o,s,u,a,h,c,f,l,v,d,g,p,w,m,b,b,y,_,k,x,C,S,D,A,O,E,M,F,L,j,R,T;return __generator(this,(function(I){switch(I.label){case 0:if(!(this._settingEnabledNearbyQuickfixes()&&i.trigger.type===1&&(i.trigger.triggerAction===w1.QuickFix||!((e=(t=i.trigger.filter)===null||t===void 0?void 0:t.include)===null||e===void 0)&&e.contains(p1.QuickFix))))return[3,6];return[4,M1(this._registry,n,i.selection,i.trigger,IB.None,r)];case 1:v=I.sent(),d=__spreadArray([],v.allActions,true);if(r.isCancellationRequested)return[2,l2];g=(o=v.validActions)===null||o===void 0?void 0:o.some((function(t){return!!t.action.kind&&p1.QuickFix.contains(new s0(t.action.kind))})),p=this._markerService.read({resource:n.uri});if(g){for(w=0,m=v.validActions;w<m.length;w++){b=m[w];!((u=(s=b.action.command)===null||s===void 0?void 0:s.arguments)===null||u===void 0)&&u.some((function(t){return typeof t=="string"&&t.includes(h2)}))&&(b.action.diagnostics=__spreadArray([],p.filter((function(t){return t.relatedInformation})),true))}return[2,{validActions:v.validActions,allActions:d,documentation:v.documentation,hasAutoFix:v.hasAutoFix,hasAIFix:v.hasAIFix,allAIFixes:v.allAIFixes,dispose:function(){v.dispose()}}]}if(!(!g&&p.length>0))return[3,6];b=i.selection.getPosition();y=b,_=Number.MAX_VALUE;k=__spreadArray([],v.validActions,true);x=0,C=p;I.label=2;case 2:if(!(x<C.length))return[3,5];S=C[x];D=S.endColumn,A=S.endLineNumber,O=S.startLineNumber;if(!(A===b.lineNumber||O===b.lineNumber))return[3,4];y=new Tr(A,D);E={type:i.trigger.type,triggerAction:i.trigger.triggerAction,filter:{include:!((a=i.trigger.filter)===null||a===void 0)&&a.include?(h=i.trigger.filter)===null||h===void 0?void 0:h.include:p1.QuickFix},autoApply:i.trigger.autoApply,context:{notAvailableMessage:((c=i.trigger.context)===null||c===void 0?void 0:c.notAvailableMessage)||"",position:y}},M=new Br(y.lineNumber,y.column,y.lineNumber,y.column);return[4,M1(this._registry,n,M,E,IB.None,r)];case 3:F=I.sent();if(F.validActions.length!==0){for(L=0,j=F.validActions;L<j.length;L++){R=j[L];!((l=(f=R.action.command)===null||f===void 0?void 0:f.arguments)===null||l===void 0)&&l.some((function(t){return typeof t=="string"&&t.includes(h2)}))&&(R.action.diagnostics=__spreadArray([],p.filter((function(t){return t.relatedInformation})),true))}v.allActions.length===0&&d.push.apply(d,F.allActions),Math.abs(b.column-D)<_?k.unshift.apply(k,F.validActions):k.push.apply(k,F.validActions)}_=Math.abs(b.column-D);I.label=4;case 4:x++;return[3,2];case 5:T=k.filter((function(t,n,i){return i.findIndex((function(n){return n.action.title===t.action.title}))===n}));return[2,(T.sort((function(t,n){return t.action.isPreferred&&!n.action.isPreferred?-1:!t.action.isPreferred&&n.action.isPreferred||t.action.isAI&&!n.action.isAI?1:!t.action.isAI&&n.action.isAI?-1:0})),{validActions:T,allActions:d,documentation:v.documentation,hasAutoFix:v.hasAutoFix,hasAIFix:v.hasAIFix,allAIFixes:v.allAIFixes,dispose:function(){v.dispose()}})];case 6:return[2,M1(this._registry,n,i.selection,i.trigger,IB.None,r)]}}))}))}));i.trigger.type===1&&((r=t._progressService)===null||r===void 0||r.showWhile(o,250));var s=new f2.Triggered(i.trigger,e,o);var u=!1;t._state.type===1&&(u=t._state.trigger.type===1&&s.type===1&&s.trigger.type===2&&t._state.position!==s.position),u||t.setState(s)}),void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:w1.Default})}else this._supportedCodeActions.reset()};n.prototype.trigger=function(t){var n;(n=this._codeActionOracle.value)===null||n===void 0||n.trigger(t)};n.prototype.setState=function(t,n){t!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=t,n||this._disposed||this._onDidChangeState.fire(t))};return n}(ci);var d2,g2=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},p2=function(t,n){return function(i,r){n(i,r,t)}};var w2=d2=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c){var f=this;f=t.call(this)||this,f._commandService=u,f._configurationService=a,f._actionWidgetService=h,f._instantiationService=c,f._activeCodeActions=f._register(new fi),f._showDisabled=!1,f._disposed=!1,f._editor=n,f._model=f._register(new v2(f._editor,o.codeActionProvider,i,r,s,a)),f._register(f._model.onDidChangeState((function(t){return f.update(t)}))),f._lightBulbWidget=new no((function(){var t=f._editor.getContribution(K1.ID);return t&&f._register(t.onClick((function(t){return f.showCodeActionsFromLightbulb(t.actions,t)}))),t})),f._resolver=e.createInstance(B1),f._register(f._editor.onDidLayoutChange((function(){return f._actionWidgetService.hide()})));return f}n.get=function(t){return t.getContribution(d2.ID)};n.prototype.dispose=function(){this._disposed=!0,t.prototype.dispose.call(this)};n.prototype.showCodeActionsFromLightbulb=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r;return __generator(this,(function(e){switch(e.label){case 0:if(!(t.allAIFixes&&t.validActions.length===1))return[3,2];i=t.validActions[0],r=i.action.command;r&&r.id==="inlineChat.start"&&r.arguments&&r.arguments.length>=1&&(r.arguments[0]=__assign(__assign({},r.arguments[0]),{autoSend:!1}));return[4,this._applyCodeAction(i,!1,!1,L1.FromAILightbulb)];case 1:return[2,void e.sent()];case 2:return[4,this.showCodeActionList(t,n,{includeDisabledActions:!1,fromLightbulb:!0})];case 3:e.sent();return[2]}}))}))};n.prototype.showCodeActions=function(t,n,i){return this.showCodeActionList(n,i,{includeDisabledActions:!1,fromLightbulb:!1})};n.prototype.manualTriggerAtCurrentPosition=function(t,n,i,r){var e;if(!this._editor.hasModel())return;(e=q0.get(this._editor))===null||e===void 0||e.closeMessage();var o=this._editor.getPosition();this._trigger({type:1,triggerAction:n,filter:i,autoApply:r,context:{notAvailableMessage:t,position:o}})};n.prototype._trigger=function(t){return this._model.trigger(t)};n.prototype._applyCodeAction=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:e.trys.push([0,,2,3]);return[4,this._instantiationService.invokeFunction(j1,t,r,{preview:i,editor:this._editor})];case 1:e.sent();return[3,3];case 2:n&&this._trigger({type:2,triggerAction:w1.QuickFix,filter:{}});return[7];case 3:return[2]}}))}))};n.prototype.update=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o,s,u,a,h,c,f,l;return __generator(this,(function(v){switch(v.label){case 0:if(t.type!==1)return[2,void((n=this._lightBulbWidget.rawValue)===null||n===void 0||n.hide())];v.label=1;case 1:v.trys.push([1,3,,4]);return[4,t.actions];case 2:a=v.sent();return[3,4];case 3:h=v.sent();return[2,void Gn(h)];case 4:if(!!this._disposed)return[3,12];if(!((i=this._lightBulbWidget.value)===null||i===void 0||i.update(a,t.trigger,t.position),t.trigger.type===1))return[3,11];if(!(!((r=t.trigger.filter)===null||r===void 0)&&r.include))return[3,10];c=this.tryGetValidActionToApply(t.trigger,a);if(!c)return[3,9];v.label=5;case 5:v.trys.push([5,,7,8]);(e=this._lightBulbWidget.value)===null||e===void 0||e.hide();return[4,this._applyCodeAction(c,!1,!1,L1.FromCodeActions)];case 6:v.sent();return[3,8];case 7:a.dispose();return[7];case 8:return[2];case 9:if(t.trigger.context){f=this.getInvalidActionThatWouldHaveBeenApplied(t.trigger,a);if(f&&f.action.disabled)return[2,((o=q0.get(this._editor))===null||o===void 0||o.showMessage(f.action.disabled,t.trigger.context.position),void a.dispose())]}v.label=10;case 10:l=!!(!((s=t.trigger.filter)===null||s===void 0)&&s.include);if(t.trigger.context&&(!a.allActions.length||!l&&!a.validActions.length))return[2,((u=q0.get(this._editor))===null||u===void 0||u.showMessage(t.trigger.context.notAvailableMessage,t.trigger.context.position),this._activeCodeActions.value=a,void a.dispose())];this._activeCodeActions.value=a,this.showCodeActionList(a,this.toCoords(t.position),{includeDisabledActions:l,fromLightbulb:!1});return[3,12];case 11:this._actionWidgetService.isVisible?a.dispose():this._activeCodeActions.value=a;v.label=12;case 12:return[2]}}))}))};n.prototype.getInvalidActionThatWouldHaveBeenApplied=function(t,n){if(n.allActions.length)return t.autoApply==="first"&&n.validActions.length===0||t.autoApply==="ifSingle"&&n.allActions.length===1?n.allActions.find((function(t){var n=t.action;return n.disabled})):void 0};n.prototype.tryGetValidActionToApply=function(t,n){if(n.validActions.length)return t.autoApply==="first"&&n.validActions.length>0||t.autoApply==="ifSingle"&&n.validActions.length===1?n.validActions[0]:void 0};n.prototype.showCodeActionList=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u;var a=this;return __generator(this,(function(h){r=this._editor.createDecorationsCollection(),e=this._editor.getDomNode();if(!e)return[2];o=i.includeDisabledActions&&(this._showDisabled||t.validActions.length===0)?t.allActions:t.validActions;if(!o.length)return[2];s=Tr.isIPosition(n)?this.toCoords(n):n,u={onSelect:function(t,n){return __awaiter(a,void 0,void 0,(function(){return __generator(this,(function(i){this._applyCodeAction(t,!0,!!n,L1.FromCodeActions),this._actionWidgetService.hide(),r.clear();return[2]}))}))},onHide:function(){var t;(t=a._editor)===null||t===void 0||t.focus(),r.clear()},onHover:function(t,n){return __awaiter(a,void 0,void 0,(function(){var i,r,e,o;return __generator(this,(function(s){if(n.isCancellationRequested)return[2];r=!1;e=t.action.kind;if(e){o=new s0(e);r=[p1.RefactorExtract,p1.RefactorInline,p1.RefactorRewrite].some((function(t){return t.contains(o)}))}return[2,{canPreview:r||!!(!((i=t.action.edit)===null||i===void 0)&&i.edits.length)}]}))}))},onFocus:function(t){var n,i;if(t&&t.action){var e=t.action.ranges,o=t.action.diagnostics;if(r.clear(),e&&e.length>0){var s=o&&(o==null?void 0:o.length)>1?o.map((function(t){return{range:t,options:d2.DECORATION}})):e.map((function(t){return{range:t,options:d2.DECORATION}}));r.set(s)}else if(o&&o.length>0){var s=o.map((function(t){return{range:t,options:d2.DECORATION}}));r.set(s);var u=o[0];u.startLineNumber&&u.startColumn&&_w(ht(0,"Context: {0} at line {1} and column {2}.",(i=(n=a._editor.getModel())===null||n===void 0?void 0:n.getWordAtPosition({lineNumber:u.startLineNumber,column:u.startColumn}))===null||i===void 0?void 0:i.word,u.startLineNumber,u.startColumn))}}else r.clear()}};this._actionWidgetService.show("codeActionWidget",!0,function(t,n,i){if(!n)return t.map((function(t){var n;return{kind:"action",item:t,group:N1,disabled:!!t.action.disabled,label:t.action.disabled||t.action.title,canPreview:!!(!((n=t.action.edit)===null||n===void 0)&&n.edits.length)}}));var r=P1.map((function(t){return{group:t,actions:[]}}));for(var e=0,o=t;e<o.length;e++){var s=o[e];var u=s.action.kind?new s0(s.action.kind):s0.None;for(var a=0,h=r;a<h.length;a++){var c=h[a];if(c.group.kind.contains(u)){c.actions.push(s);break}}}var f=[];for(var l=0,v=r;l<v.length;l++){var s=v[l];if(s.actions.length){f.push({kind:"header",group:s.group});for(var d=0,g=s.actions;d<g.length;d++){var u=g[d];var c=s.group;f.push({kind:"action",item:u,group:u.action.isAI?{title:c.title,kind:c.kind,icon:Hr.sparkle}:c,label:u.action.title,disabled:!!u.action.disabled,keybinding:i(u.action)})}}}return f}(o,this._shouldShowHeaders(),this._resolver.getResolver()),u,s,e,this._getActionBarActions(t,n,i));return[2]}))}))};n.prototype.toCoords=function(t){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(t,1),this._editor.render();var n=this._editor.getScrolledVisiblePosition(t),i=ja(this._editor.getDomNode());return{x:i.left+n.left,y:i.top+n.top+n.height}};n.prototype._shouldShowHeaders=function(){var t;var n=(t=this._editor)===null||t===void 0?void 0:t.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:n==null?void 0:n.uri})};n.prototype._getActionBarActions=function(t,n,i){var r=this;if(i.fromLightbulb)return[];var e=t.documentation.map((function(t){var n;return{id:t.id,label:t.title,tooltip:(n=t.tooltip)!==null&&n!==void 0?n:"",class:void 0,enabled:!0,run:function(){var n;var i;return(n=r._commandService).executeCommand.apply(n,__spreadArray([t.id],(i=t.arguments)!==null&&i!==void 0?i:[],false))}}}));return i.includeDisabledActions&&t.validActions.length>0&&t.allActions.length!==t.validActions.length&&e.push(this._showDisabled?{id:"hideMoreActions",label:ht(0,"Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:function(){return r._showDisabled=!1,r.showCodeActionList(t,n,i)}}:{id:"showMoreActions",label:ht(0,"Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:function(){return r._showDisabled=!0,r.showCodeActionList(t,n,i)}}),e};return n}(ci);function m2(t){return Dc.regex(a2.keys()[0],new RegExp("(\\s|^)"+uo(t.value)+"\\b"))}w2.ID="editor.contrib.codeActionController",w2.DECORATION=PM.register({description:"quickfix-highlight",className:"quickfix-edit-highlight"}),w2=d2=g2([p2(1,pH),p2(2,Gc),p2(3,Jh),p2(4,tp),p2(5,BB),p2(6,ac),p2(7,Kl),p2(8,o2),p2(9,Jh)],w2),Gk((function(t,n){(function(t,i){i&&n.addRule(".monaco-editor ".concat(t," { background-color: ").concat(i,"; }"))})(".quickfix-edit-highlight",t.getColor(Im));var i=t.getColor(Bm);i&&n.addRule(".monaco-editor .quickfix-edit-highlight { border: 1px ".concat(C_(t.type)?"dotted":"solid"," ").concat(i,"; box-sizing: border-box; }"))}));var b2={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:ht(0,"Kind of the code action to run.")},apply:{type:"string",description:ht(0,"Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[ht(0,"Always apply the first returned code action."),ht(0,"Apply the first returned code action if it is the only one."),ht(0,"Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:ht(0,"Controls if only preferred code actions should be returned.")}}};function y2(t,n,i,r,e){if(e===void 0){e=w1.Default}if(t.hasModel()){var o=w2.get(t);o==null||o.manualTriggerAtCurrentPosition(n,e,i,r)}}Pf(w2.ID,w2,3),Pf(K1.ID,K1,4),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:k1,label:ht(0,"Quick Fix..."),alias:"Quick Fix...",precondition:Dc.and($C.writable,$C.hasCodeActionsProvider),kbOpts:{kbExpr:$C.textInputFocus,primary:2137,weight:100}})||this}n.prototype.run=function(t,n){return y2(n,ht(0,"No code actions available"),void 0,void 0,w1.QuickFix)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:C1,label:ht(0,"Refactor..."),alias:"Refactor...",precondition:Dc.and($C.writable,$C.hasCodeActionsProvider),kbOpts:{kbExpr:$C.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:Dc.and($C.writable,m2(p1.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:b2}]}})||this}n.prototype.run=function(t,n,i){var r=b1.fromUser(i,{kind:p1.Refactor,apply:"never"});return y2(n,typeof(i==null?void 0:i.kind)=="string"?r.preferred?ht(0,"No preferred refactorings for '{0}' available",i.kind):ht(0,"No refactorings for '{0}' available",i.kind):r.preferred?ht(0,"No preferred refactorings available"):ht(0,"No refactorings available"),{include:p1.Refactor.contains(r.kind)?r.kind:s0.None,onlyIncludePreferredActions:r.preferred},r.apply,w1.Refactor)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:S1,label:ht(0,"Source Action..."),alias:"Source Action...",precondition:Dc.and($C.writable,$C.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:Dc.and($C.writable,m2(p1.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:b2}]}})||this}n.prototype.run=function(t,n,i){var r=b1.fromUser(i,{kind:p1.Source,apply:"never"});return y2(n,typeof(i==null?void 0:i.kind)=="string"?r.preferred?ht(0,"No preferred source actions for '{0}' available",i.kind):ht(0,"No source actions for '{0}' available",i.kind):r.preferred?ht(0,"No preferred source actions available"):ht(0,"No source actions available"),{include:p1.Source.contains(r.kind)?r.kind:s0.None,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply,w1.SourceAction)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:D1,label:ht(0,"Organize Imports"),alias:"Organize Imports",precondition:Dc.and($C.writable,m2(p1.SourceOrganizeImports)),kbOpts:{kbExpr:$C.textInputFocus,primary:1581,weight:100}})||this}n.prototype.run=function(t,n){return y2(n,ht(0,"No organize imports action available"),{include:p1.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",w1.OrganizeImports)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:x1,label:ht(0,"Auto Fix..."),alias:"Auto Fix...",precondition:Dc.and($C.writable,m2(p1.QuickFix)),kbOpts:{kbExpr:$C.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})||this}n.prototype.run=function(t,n){return y2(n,ht(0,"No auto fixes available"),{include:p1.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",w1.AutoFix)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:A1,label:ht(0,"Fix All"),alias:"Fix All",precondition:Dc.and($C.writable,m2(p1.SourceFixAll))})||this}n.prototype.run=function(t,n){return y2(n,ht(0,"No fix all action available"),{include:p1.SourceFixAll,includeSourceActions:!0},"ifSingle",w1.FixAll)};return n}(Lf)),If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:_1,precondition:Dc.and($C.writable,$C.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:b2}]}})||this}n.prototype.runEditorCommand=function(t,n,i){var r=b1.fromUser(i,{kind:s0.Empty,apply:"ifSingle"});return y2(n,typeof(i==null?void 0:i.kind)=="string"?r.preferred?ht(0,"No preferred code actions for '{0}' available",i.kind):ht(0,"No code actions for '{0}' available",i.kind):r.preferred?ht(0,"No preferred code actions available"):ht(0,"No code actions available"),{include:r.kind,includeSourceActions:!0,onlyIncludePreferredActions:r.preferred},r.apply)};return n}(Ff))),of.as(ev).registerConfiguration(__assign(__assign({},iB),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:ht(0,"Enable/disable showing group headers in the Code Action menu."),default:!0}}})),of.as(ev).registerConfiguration(__assign(__assign({},iB),{properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:ht(0,"Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}}));var _2=function(){function t(){this.lenses=[],this._disposables=new hi}t.prototype.dispose=function(){this._disposables.dispose()};Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._disposables.isDisposed},enumerable:false,configurable:true});t.prototype.add=function(t,n){this._disposables.add(t);for(var i=0,r=t.lenses;i<r.length;i++){var e=r[i];this.lenses.push({symbol:e,provider:n})}};return t}();function k2(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s;var u=this;return __generator(this,(function(a){switch(a.label){case 0:r=t.ordered(n),e=new Map,o=new _2,s=r.map((function(t,r){return __awaiter(u,void 0,void 0,(function(){var s,u;return __generator(this,(function(a){switch(a.label){case 0:e.set(t,r);a.label=1;case 1:a.trys.push([1,3,,4]);return[4,Promise.resolve(t.provideCodeLenses(n,i))];case 2:s=a.sent();s&&o.add(s,t);return[3,4];case 3:u=a.sent();$n(u);return[3,4];case 4:return[2]}}))}))}));return[4,Promise.all(s)];case 1:return[2,(a.sent(),o.lenses=o.lenses.sort((function(t,n){return t.symbol.range.startLineNumber<n.symbol.range.startLineNumber?-1:t.symbol.range.startLineNumber>n.symbol.range.startLineNumber?1:e.get(t.provider)<e.get(n.provider)?-1:e.get(t.provider)>e.get(n.provider)?1:t.symbol.range.startColumn<n.symbol.range.startColumn?-1:t.symbol.range.startColumn>n.symbol.range.startColumn?1:0})),o)]}}))}))}hc.registerCommand("_executeCodeLensProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r=n[0],e=n[1];Z(Cr.isUri(r)),Z(typeof e=="number"||!e);var o=t.get(tp).codeLensProvider,s=t.get(Yh).getModel(r);if(!s)throw Xn();var u=[],a=new hi;return k2(o,s,Fi.None).then((function(t){a.add(t);var n=[];var i=function(t){e==null||t.symbol.command?u.push(t.symbol):e-- >0&&t.provider.resolveCodeLens&&n.push(Promise.resolve(t.provider.resolveCodeLens(s,t.symbol,Fi.None)).then((function(n){return u.push(n||t.symbol)})))};for(var r=0,o=t.lenses;r<o.length;r++){var h=o[r];i(h)}return Promise.all(n)})).then((function(){return u})).finally((function(){setTimeout((function(){return a.dispose()}),100)}))}));var x2=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},C2=function(t,n){return function(i,r){n(i,r,t)}};var S2=Zh("ICodeLensCache");var D2=function(){function t(t,n){this.lineCount=t,this.data=n}return t}();var A2=function(){function t(t){var n=this;this._fakeProvider=new(function(){function t(){}t.prototype.provideCodeLenses=function(){throw new Error("not supported")};return t}()),this._cache=new ud(20,.75),ka(Xe,(function(){return t.remove("codelens/cache",1)}));var i="codelens/cache2",r=t.get(i,1,"{}");this._deserialize(r),wi.once(t.onWillSaveState)((function(r){r.reason===kW.SHUTDOWN&&t.store(i,n._serialize(),1,1)}))}t.prototype.put=function(t,n){var i=n.lenses.map((function(t){var n;return{range:t.symbol.range,command:t.symbol.command&&{id:"",title:(n=t.symbol.command)===null||n===void 0?void 0:n.title}}})),r=new _2;r.add({lenses:i,dispose:function(){}},this._fakeProvider);var e=new D2(t.getLineCount(),r);this._cache.set(t.uri.toString(),e)};t.prototype.get=function(t){var n=this._cache.get(t.uri.toString());return n&&n.lineCount===t.getLineCount()?n.data:void 0};t.prototype.delete=function(t){this._cache.delete(t.uri.toString())};t.prototype._serialize=function(){var t=Object.create(null);for(var n=0,i=this._cache;n<i.length;n++){var r=i[n],e=r[0],o=r[1];var s=new Set;for(var u=0,a=o.data.lenses;u<a.length;u++){var h=a[u];s.add(h.symbol.range.startLineNumber)}t[e]={lineCount:o.lineCount,lines:__spreadArray([],s.values(),true)}}return JSON.stringify(t)};t.prototype._deserialize=function(t){try{var n=JSON.parse(t);for(var i in n){var r=n[i],e=[];for(var o=0,s=r.lines;o<s.length;o++){var u=s[o];e.push({range:new Ir(u,1,u,11)})}var a=new _2;a.add({lenses:e,dispose:function(){}},this._fakeProvider),this._cache.set(i,new D2(r.lineCount,a))}}catch(t){}};return t}();A2=x2([C2(0,_W)],A2),Xl(S2,A2,1);var O2=function(){function t(t,n,i){this.afterColumn=1073741824,this.afterLineNumber=t,this.heightInPx=n,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}t.prototype.onComputedHeight=function(t){this._lastHeight===void 0?this._lastHeight=t:this._lastHeight!==t&&(this._lastHeight=t,this._onHeight())};t.prototype.isVisible=function(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")};return t}();var E2=function(){function t(n,i){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=n,this._id="codelens.widget-"+t._idPool++,this.updatePosition(i),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}t.prototype.withCommands=function(n,i){this._commands.clear();var r=[];var e=!1;for(var o=0;o<n.length;o++){var s=n[o];if(s&&(e=!0,s.command)){var u=RR(s.command.title.trim());if(s.command.id){var a="c"+t._idPool++;r.push(bh.apply(void 0,__spreadArray(["a",{id:a,title:s.command.tooltip,role:"button"}],u,false))),this._commands.set(a,s.command)}else r.push(bh.apply(void 0,__spreadArray(["span",{title:s.command.tooltip}],u,false)));o+1<n.length&&r.push(bh("span",void 0," | "))}}e?(gh.apply(void 0,__spreadArray([this._domNode],r,false)),this._isEmpty&&i&&this._domNode.classList.add("fadein"),this._isEmpty=!1):gh(this._domNode,bh("span",void 0,"no commands"))};t.prototype.getCommand=function(t){return t.parentElement===this._domNode?this._commands.get(t.id):void 0};t.prototype.getId=function(){return this._id};t.prototype.getDomNode=function(){return this._domNode};t.prototype.updatePosition=function(t){var n=this._editor.getModel().getLineFirstNonWhitespaceColumn(t);this._widgetPosition={position:{lineNumber:t,column:n},preference:[1]}};t.prototype.getPosition=function(){return this._widgetPosition||null};return t}();E2._idPool=0;var M2=function(){function t(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}t.prototype.addDecoration=function(t,n){this._addDecorations.push(t),this._addDecorationsCallbacks.push(n)};t.prototype.removeDecoration=function(t){this._removeDecorations.push(t)};t.prototype.commit=function(t){var n=t.deltaDecorations(this._removeDecorations,this._addDecorations);for(var i=0,r=n.length;i<r;i++)this._addDecorationsCallbacks[i](n[i])};return t}();var F2=PM.register({collapseOnReplaceEdit:!0,description:"codelens"});var L2=function(){function t(t,n,i,r,e,o){var s=this;var u;this._isDisposed=!1,this._editor=n,this._data=t,this._decorationIds=[];var a=[];this._data.forEach((function(t,n){t.symbol.command&&a.push(t.symbol),i.addDecoration({range:t.symbol.range,options:F2},(function(t){return s._decorationIds[n]=t})),u=u?Ir.plusRange(u,t.symbol.range):Ir.lift(t.symbol.range)})),this._viewZone=new O2(u.startLineNumber-1,e,o),this._viewZoneId=r.addZone(this._viewZone),a.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(a,!1))}t.prototype._createContentWidgetIfNecessary=function(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new E2(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))};t.prototype.dispose=function(t,n){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],n==null||n.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0};t.prototype.isDisposed=function(){return this._isDisposed};t.prototype.isValid=function(){var t=this;return this._decorationIds.some((function(n,i){var r=t._editor.getModel().getDecorationRange(n),e=t._data[i].symbol;return!(!r||Ir.isEmpty(e.range)!==r.isEmpty())}))};t.prototype.updateCodeLensSymbols=function(t,n){var i=this;this._decorationIds.forEach(n.removeDecoration,n),this._decorationIds=[],this._data=t,this._data.forEach((function(t,r){n.addDecoration({range:t.symbol.range,options:F2},(function(t){return i._decorationIds[r]=t}))}))};t.prototype.updateHeight=function(t,n){this._viewZone.heightInPx=t,n.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)};t.prototype.computeIfNecessary=function(t){if(!this._viewZone.isVisible())return null;for(var n=0;n<this._decorationIds.length;n++){var i=t.getDecorationRange(this._decorationIds[n]);i&&(this._data[n].symbol.range=i)}return this._data};t.prototype.updateCommands=function(t){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(t,!0);for(var n=0;n<this._data.length;n++){var i=t[n];if(i){var r=this._data[n].symbol;r.command=i.command||r.command}}};t.prototype.getCommand=function(t){var n;return(n=this._contentWidget)===null||n===void 0?void 0:n.getCommand(t)};t.prototype.getLineNumber=function(){var t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return t?t.startLineNumber:-1};t.prototype.update=function(t){if(this.isValid()){var n=this._editor.getModel().getDecorationRange(this._decorationIds[0]);n&&(this._viewZone.afterLineNumber=n.startLineNumber-1,t.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(n.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}};return t}();var j2=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},R2=function(t,n){return function(i,r){n(i,r,t)}};var T2=function(){function t(t,n,i,r,e,o){var s=this;this._editor=t,this._languageFeaturesService=n,this._commandService=r,this._notificationService=e,this._codeLensCache=o,this._disposables=new hi,this._localToDispose=new hi,this._lenses=[],this._oldCodeLensModels=new hi,this._provideCodeLensDebounce=i.for(n.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(n.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new Ts((function(){return s._resolveCodeLensesInViewport()}),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((function(){return s._onModelChange()}))),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){return s._onModelChange()}))),this._disposables.add(this._editor.onDidChangeConfiguration((function(t){(t.hasChanged(50)||t.hasChanged(19)||t.hasChanged(18))&&s._updateLensStyle(),t.hasChanged(17)&&s._onModelChange()}))),this._disposables.add(n.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}t.prototype.dispose=function(){var t;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(t=this._currentCodeLensModel)===null||t===void 0||t.dispose()};t.prototype._getLayoutInfo=function(){var t=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));var n=this._editor.getOption(19);return(!n||n<5)&&(n=.9*this._editor.getOption(52)|0),{fontSize:n,codeLensHeight:n*t|0}};t.prototype._updateLensStyle=function(){var t=this;var n=this._getLayoutInfo(),i=n.codeLensHeight,r=n.fontSize,e=this._editor.getOption(18),o=this._editor.getOption(50),s=this._editor.getContainerDomNode().style;s.setProperty("--vscode-editorCodeLens-lineHeight","".concat(i,"px")),s.setProperty("--vscode-editorCodeLens-fontSize","".concat(r,"px")),s.setProperty("--vscode-editorCodeLens-fontFeatureSettings",o.fontFeatureSettings),e&&(s.setProperty("--vscode-editorCodeLens-fontFamily",e),s.setProperty("--vscode-editorCodeLens-fontFamilyDefault",zn.fontFamily)),this._editor.changeViewZones((function(n){for(var r=0,e=t._lenses;r<e.length;r++){var o=e[r];o.updateHeight(i,n)}}))};t.prototype._localDispose=function(){var t,n,i;(t=this._getCodeLensModelPromise)===null||t===void 0||t.cancel(),this._getCodeLensModelPromise=void 0,(n=this._resolveCodeLensesPromise)===null||n===void 0||n.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(i=this._currentCodeLensModel)===null||i===void 0||i.dispose()};t.prototype._onModelChange=function(){var t=this;this._localDispose();var n=this._editor.getModel();if(!n||!this._editor.getOption(17)||n.isTooLargeForTokenization())return;var i=this._codeLensCache.get(n);if(i&&this._renderCodeLensSymbols(i),!this._languageFeaturesService.codeLensProvider.has(n))return void(i&&Fs((function(){var r=t._codeLensCache.get(n);i===r&&(t._codeLensCache.delete(n),t._onModelChange())}),3e4,this._localToDispose));for(var r=0,e=this._languageFeaturesService.codeLensProvider.all(n);r<e.length;r++){var o=e[r];if(typeof o.onDidChange=="function"){var s=o.onDidChange((function(){return u.schedule()}));this._localToDispose.add(s)}}var u=new Ts((function(){var i;var r=Date.now();(i=t._getCodeLensModelPromise)===null||i===void 0||i.cancel(),t._getCodeLensModelPromise=Ss((function(i){return k2(t._languageFeaturesService.codeLensProvider,n,i)})),t._getCodeLensModelPromise.then((function(i){t._currentCodeLensModel&&t._oldCodeLensModels.add(t._currentCodeLensModel),t._currentCodeLensModel=i,t._codeLensCache.put(n,i);var e=t._provideCodeLensDebounce.update(n,Date.now()-r);u.delay=e,t._renderCodeLensSymbols(i),t._resolveCodeLensesInViewportSoon()}),Gn)}),this._provideCodeLensDebounce.get(n));this._localToDispose.add(u),this._localToDispose.add(ai((function(){return t._resolveCodeLensesScheduler.cancel()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((function(){var n;t._editor.changeDecorations((function(n){t._editor.changeViewZones((function(i){var r=[];var e=-1;t._lenses.forEach((function(t){t.isValid()&&e!==t.getLineNumber()?(t.update(i),e=t.getLineNumber()):r.push(t)}));var o=new M2;r.forEach((function(n){n.dispose(o,i),t._lenses.splice(t._lenses.indexOf(n),1)})),o.commit(n)}))})),u.schedule(),t._resolveCodeLensesScheduler.cancel(),(n=t._resolveCodeLensesPromise)===null||n===void 0||n.cancel(),t._resolveCodeLensesPromise=void 0}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((function(){u.schedule()}))),this._localToDispose.add(this._editor.onDidBlurEditorText((function(){u.cancel()}))),this._localToDispose.add(this._editor.onDidScrollChange((function(n){n.scrollTopChanged&&t._lenses.length>0&&t._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((function(){t._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(ai((function(){if(t._editor.getModel()){var n=HG.capture(t._editor);t._editor.changeDecorations((function(n){t._editor.changeViewZones((function(i){t._disposeAllLenses(n,i)}))})),n.restore(t._editor)}else t._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((function(n){var i;if(n.target.type!==9)return;var r=n.target.element;if((r==null?void 0:r.tagName)==="SPAN"&&(r=r.parentElement),(r==null?void 0:r.tagName)==="A")for(var e=0,o=t._lenses;e<o.length;e++){var s=o[e];var u=s.getCommand(r);if(u){(i=t._commandService).executeCommand.apply(i,__spreadArray([u.id],u.arguments||[],false)).catch((function(n){return t._notificationService.error(n)}));break}}}))),u.schedule()};t.prototype._disposeAllLenses=function(t,n){var i=new M2;for(var r=0,e=this._lenses;r<e.length;r++){var o=e[r];o.dispose(i,n)}t&&i.commit(t),this._lenses.length=0};t.prototype._renderCodeLensSymbols=function(t){var n=this;if(!this._editor.hasModel())return;var i=this._editor.getModel().getLineCount(),r=[];var e;for(var o=0,s=t.lenses;o<s.length;o++){var u=s[o];var a=u.symbol.range.startLineNumber;a<1||a>i||(e&&e[e.length-1].symbol.range.startLineNumber===a?e.push(u):(e=[u],r.push(e)))}if(!r.length&&!this._lenses.length)return;var h=HG.capture(this._editor),c=this._getLayoutInfo();this._editor.changeDecorations((function(t){n._editor.changeViewZones((function(i){var e=new M2;var o=0,s=0;for(;s<r.length&&o<n._lenses.length;){var u=r[s][0].symbol.range.startLineNumber,a=n._lenses[o].getLineNumber();a<u?(n._lenses[o].dispose(e,i),n._lenses.splice(o,1)):a===u?(n._lenses[o].updateCodeLensSymbols(r[s],e),s++,o++):(n._lenses.splice(o,0,new L2(r[s],n._editor,e,i,c.codeLensHeight,(function(){return n._resolveCodeLensesInViewportSoon()}))),o++,s++)}for(;o<n._lenses.length;)n._lenses[o].dispose(e,i),n._lenses.splice(o,1);for(;s<r.length;)n._lenses.push(new L2(r[s],n._editor,e,i,c.codeLensHeight,(function(){return n._resolveCodeLensesInViewportSoon()}))),s++;e.commit(t)}))})),h.restore(this._editor)};t.prototype._resolveCodeLensesInViewportSoon=function(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()};t.prototype._resolveCodeLensesInViewport=function(){var t=this;var n;(n=this._resolveCodeLensesPromise)===null||n===void 0||n.cancel(),this._resolveCodeLensesPromise=void 0;var i=this._editor.getModel();if(!i)return;var r=[],e=[];if(this._lenses.forEach((function(t){var n=t.computeIfNecessary(i);n&&(r.push(n),e.push(t))})),r.length===0)return;var o=Date.now(),s=Ss((function(t){var n=r.map((function(n,r){var o=new Array(n.length),s=n.map((function(n,r){return n.symbol.command||typeof n.provider.resolveCodeLens!="function"?(o[r]=n.symbol,Promise.resolve(void 0)):Promise.resolve(n.provider.resolveCodeLens(i,n.symbol,t)).then((function(t){o[r]=t}),$n)}));return Promise.all(s).then((function(){t.isCancellationRequested||e[r].isDisposed()||e[r].updateCommands(o)}))}));return Promise.all(n)}));this._resolveCodeLensesPromise=s,this._resolveCodeLensesPromise.then((function(){var n=t._resolveCodeLensesDebounce.update(i,Date.now()-o);t._resolveCodeLensesScheduler.delay=n,t._currentCodeLensModel&&t._codeLensCache.put(i,t._currentCodeLensModel),t._oldCodeLensModels.clear(),s===t._resolveCodeLensesPromise&&(t._resolveCodeLensesPromise=void 0)}),(function(n){Gn(n),s===t._resolveCodeLensesPromise&&(t._resolveCodeLensesPromise=void 0)}))};t.prototype.getModel=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this._getCodeLensModelPromise];case 1:n.sent();return[4,this._resolveCodeLensesPromise];case 2:return[2,(n.sent(),!((t=this._currentCodeLensModel)===null||t===void 0)&&t.isDisposed?void 0:this._currentCodeLensModel)]}}))}))};return t}();T2.ID="css.editor.codeLens",T2=j2([R2(1,tp),R2(2,Cj),R2(3,ac),R2(4,EL),R2(5,S2)],T2),Pf(T2.ID,T2,1),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"codelens.showLensesInCurrentLine",precondition:$C.hasCodeLensProvider,label:ht(0,"Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u,a,h,c,f,l,v,f,d,g;return __generator(this,(function(p){switch(p.label){case 0:if(!n.hasModel())return[2];i=t.get(TH),r=t.get(ac),e=t.get(EL),o=n.getSelection().positionLineNumber,s=n.getContribution(T2.ID);if(!s)return[2];return[4,s.getModel()];case 1:u=p.sent();if(!u)return[2];a=[];for(h=0,c=u.lenses;h<c.length;h++){f=c[h];f.symbol.command&&f.symbol.range.startLineNumber===o&&a.push({label:f.symbol.command.title,command:f.symbol.command})}if(a.length===0)return[2];return[4,i.pick(a,{canPickMany:!1,placeHolder:ht(0,"Select a command")})];case 2:l=p.sent();if(!l)return[2];v=l.command;if(!u.isDisposed)return[3,4];return[4,s.getModel()];case 3:f=p.sent(),d=f==null?void 0:f.lenses.find((function(t){var n;return t.symbol.range.startLineNumber===o&&((n=t.symbol.command)===null||n===void 0?void 0:n.title)===v.title}));if(!d||!d.symbol.command)return[2];v=d.symbol.command;p.label=4;case 4:p.trys.push([4,6,,7]);return[4,r.executeCommand.apply(r,__spreadArray([v.id],v.arguments||[],false))];case 5:p.sent();return[3,7];case 6:g=p.sent();e.error(g);return[3,7];case 7:return[2]}}))}))};return n}(Lf));var I2=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},B2=function(t,n){return function(i,r){n(i,r,t)}};var N2=function(){function t(t,n){this._editorWorkerClient=new fp(t,!1,"editorWorkerService",n)}t.prototype.provideDocumentColors=function(t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){return[2,this._editorWorkerClient.computeDefaultDocumentColors(t.uri)]}))}))};t.prototype.provideColorPresentations=function(t,n,i){var r=n.range,e=n.color,o=e.alpha,s=new Ig(new jg(Math.round(255*e.red),Math.round(255*e.green),Math.round(255*e.blue),o)),u=o?Ig.Format.CSS.formatRGB(s):Ig.Format.CSS.formatRGBA(s),a=o?Ig.Format.CSS.formatHSL(s):Ig.Format.CSS.formatHSLA(s),h=o?Ig.Format.CSS.formatHex(s):Ig.Format.CSS.formatHexA(s),c=[];return c.push({label:u,textEdit:{range:r,text:u}}),c.push({label:a,textEdit:{range:r,text:a}}),c.push({label:h,textEdit:{range:r,text:h}}),c};return t}();var P2=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._register(r.colorProvider.register("*",new N2(n,i)));return e}return n}(ci);function W2(t,n,i){return __awaiter(this,arguments,void 0,(function(t,n,i,r){if(r===void 0){r=!0}return __generator(this,(function(e){return[2,V2(new z2,t,n,i,r)]}))}))}function H2(t,n,i,r){return Promise.resolve(i.provideColorPresentations(t,n,r))}P2=I2([B2(0,Yh),B2(1,xv),B2(2,tp)],P2),yG(P2);var z2=function(){function t(){}t.prototype.compute=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:return[4,t.provideDocumentColors(n,i)];case 1:e=a.sent();if(Array.isArray(e))for(o=0,s=e;o<s.length;o++){u=s[o];r.push({colorInfo:u,provider:t})}return[2,Array.isArray(e)]}}))}))};return t}();var U2=function(){function t(){}t.prototype.compute=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:return[4,t.provideDocumentColors(n,i)];case 1:e=a.sent();if(Array.isArray(e))for(o=0,s=e;o<s.length;o++){u=s[o];r.push({range:u.range,color:[u.color.red,u.color.green,u.color.blue,u.color.alpha]})}return[2,Array.isArray(e)]}}))}))};return t}();var K2=function(){function t(t){this.colorInfo=t}t.prototype.compute=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(e){switch(e.label){case 0:return[4,t.provideColorPresentations(n,this.colorInfo,Fi.None)];case 1:i=e.sent();return[2,(Array.isArray(i)&&r.push.apply(r,i),Array.isArray(i))]}}))}))};return t}();function V2(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h,c,f,l,v;return __generator(this,(function(d){switch(d.label){case 0:s=!1;u=[],a=n.ordered(i);h=a.length-1;d.label=1;case 1:if(!(h>=0))return[3,6];c=a[h];if(!(c instanceof N2))return[3,2];o=c;return[3,5];case 2:d.trys.push([2,4,,5]);return[4,t.compute(c,i,r,u)];case 3:d.sent()&&(s=!0);return[3,5];case 4:f=d.sent();$n(f);return[3,5];case 5:h--;return[3,1];case 6:if(!s)return[3,7];l=u;return[3,11];case 7:if(!(o&&e))return[3,9];return[4,t.compute(o,i,r,u)];case 8:v=(d.sent(),u);return[3,10];case 9:v=[];d.label=10;case 10:l=v;d.label=11;case 11:return[2,l]}}))}))}function q2(t,n){var i=t.get(tp).colorProvider,r=t.get(Yh).getModel(n);if(!r)throw Xn();return{model:r,colorProviderRegistry:i,isDefaultColorDecoratorsEnabled:t.get(Kl).getValue("editor.defaultColorDecorators",{resource:n})}}hc.registerCommand("_executeDocumentColorProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r=n[0];if(!(r instanceof Cr))throw Xn();var e=q2(t,r),o=e.model,s=e.colorProviderRegistry,u=e.isDefaultColorDecoratorsEnabled;return V2(new U2,s,o,Fi.None,u)})),hc.registerCommand("_executeColorPresentationProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r=n[0],e=n[1],o=e.uri,s=e.range;if(!(o instanceof Cr&&Array.isArray(r)&&r.length===4&&Ir.isIRange(s)))throw Xn();var u=q2(t,o),a=u.model,h=u.colorProviderRegistry,c=u.isDefaultColorDecoratorsEnabled,f=r[0],l=r[1],v=r[2],d=r[3];return V2(new K2({range:s,color:{red:f,green:l,blue:v,alpha:d}}),h,a,Fi.None,c)}));var G2,$2=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},J2=function(t,n){return function(i,r){n(i,r,t)}};var Z2=Object.create({});var Q2=G2=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._editor=n,o._configurationService=i,o._languageFeaturesService=r,o._localToDispose=o._register(new hi),o._decorationsIds=[],o._colorDatas=new Map,o._colorDecoratorIds=o._editor.createDecorationsCollection(),o._ruleFactory=new h_(o._editor),o._decoratorLimitReporter=new Y2,o._colorDecorationClassRefs=o._register(new hi),o._debounceInformation=e.for(r.colorProvider,"Document Colors",{min:G2.RECOMPUTE_TIME}),o._register(n.onDidChangeModel((function(){o._isColorDecoratorsEnabled=o.isEnabled(),o.updateColors()}))),o._register(n.onDidChangeModelLanguage((function(){return o.updateColors()}))),o._register(r.colorProvider.onDidChange((function(){return o.updateColors()}))),o._register(n.onDidChangeConfiguration((function(t){var n=o._isColorDecoratorsEnabled;o._isColorDecoratorsEnabled=o.isEnabled(),o._isDefaultColorDecoratorsEnabled=o._editor.getOption(147);var i=n!==o._isColorDecoratorsEnabled||t.hasChanged(21),r=t.hasChanged(147);(i||r)&&(o._isColorDecoratorsEnabled?o.updateColors():o.removeAllDecorations())}))),o._timeoutTimer=null,o._computePromise=null,o._isColorDecoratorsEnabled=o.isEnabled(),o._isDefaultColorDecoratorsEnabled=o._editor.getOption(147),o.updateColors();return o}n.prototype.isEnabled=function(){var t=this._editor.getModel();if(!t)return!1;var n=t.getLanguageId(),i=this._configurationService.getValue(n);if(i&&typeof i=="object"){var r=i.colorDecorators;if(r&&r.enable!==void 0&&!r.enable)return r.enable}return this._editor.getOption(20)};n.get=function(t){return t.getContribution(this.ID)};n.prototype.dispose=function(){this.stop(),this.removeAllDecorations(),t.prototype.dispose.call(this)};n.prototype.updateColors=function(){var t=this;if(this.stop(),!this._isColorDecoratorsEnabled)return;var n=this._editor.getModel();n&&this._languageFeaturesService.colorProvider.has(n)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((function(){t._timeoutTimer||(t._timeoutTimer=new js,t._timeoutTimer.cancelAndSet((function(){t._timeoutTimer=null,t.beginCompute()}),t._debounceInformation.get(n)))}))),this.beginCompute())};n.prototype.beginCompute=function(){return __awaiter(this,void 0,void 0,(function(){var t,n;var i=this;return __generator(this,(function(r){switch(r.label){case 0:this._computePromise=Ss((function(t){return __awaiter(i,void 0,void 0,(function(){var n,i,r;return __generator(this,(function(e){switch(e.label){case 0:n=this._editor.getModel();if(!n)return[2,[]];i=new pi(!1);return[4,W2(this._languageFeaturesService.colorProvider,n,t,this._isDefaultColorDecoratorsEnabled)];case 1:r=e.sent();return[2,(this._debounceInformation.update(n,i.elapsed()),r)]}}))}))}));r.label=1;case 1:r.trys.push([1,3,,4]);return[4,this._computePromise];case 2:t=r.sent();this.updateDecorations(t),this.updateColorDecorators(t),this._computePromise=null;return[3,4];case 3:n=r.sent();Gn(n);return[3,4];case 4:return[2]}}))}))};n.prototype.stop=function(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()};n.prototype.updateDecorations=function(t){var n=this;var i=t.map((function(t){return{range:{startLineNumber:t.colorInfo.range.startLineNumber,startColumn:t.colorInfo.range.startColumn,endLineNumber:t.colorInfo.range.endLineNumber,endColumn:t.colorInfo.range.endColumn},options:PM.EMPTY}}));this._editor.changeDecorations((function(r){n._decorationsIds=r.deltaDecorations(n._decorationsIds,i),n._colorDatas=new Map,n._decorationsIds.forEach((function(i,r){return n._colorDatas.set(i,t[r])}))}))};n.prototype.updateColorDecorators=function(t){this._colorDecorationClassRefs.clear();var n=[],i=this._editor.getOption(21);for(var r=0;r<t.length&&n.length<i;r++){var e=t[r].colorInfo.color,o=e.red,s=e.green,u=e.blue,a=e.alpha,h=new jg(Math.round(255*o),Math.round(255*s),Math.round(255*u),a),c="rgba(".concat(h.r,", ").concat(h.g,", ").concat(h.b,", ").concat(h.a,")"),f=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:c}));n.push({range:{startLineNumber:t[r].colorInfo.range.startLineNumber,startColumn:t[r].colorInfo.range.startColumn,endLineNumber:t[r].colorInfo.range.endLineNumber,endColumn:t[r].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:" ",inlineClassName:"".concat(f.className," colorpicker-color-decoration"),inlineClassNameAffectsLetterSpacing:!0,attachedData:Z2}}})}var l=i<t.length&&i;this._decoratorLimitReporter.update(t.length,l),this._colorDecoratorIds.set(n)};n.prototype.removeAllDecorations=function(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()};n.prototype.getColorData=function(t){var n=this;var i=this._editor.getModel();if(!i)return null;var r=i.getDecorationsInRange(Ir.fromPositions(t,t)).filter((function(t){return n._colorDatas.has(t.id)}));return r.length===0?null:this._colorDatas.get(r[0].id)};n.prototype.isColorDecoration=function(t){return this._colorDecoratorIds.has(t)};return n}(ci);Q2.ID="editor.contrib.colorDetector",Q2.RECOMPUTE_TIME=1e3,Q2=G2=$2([J2(1,Kl),J2(2,tp),J2(3,Cj)],Q2);var Y2=function(){function t(){this._onDidChange=new ki,this._computed=0,this._limited=!1}t.prototype.update=function(t,n){t===this._computed&&n===this._limited||(this._computed=t,this._limited=n,this._onDidChange.fire())};return t}();Pf(Q2.ID,Q2,1);var X2=function(){function t(t,n,i){this.presentationIndex=i,this._onColorFlushed=new ki,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new ki,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new ki,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=t,this._color=t,this._colorPresentations=n}Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color.equals(t)||(this._color=t,this._onDidChangeColor.fire(t))},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"presentation",{get:function(){return this.colorPresentations[this.presentationIndex]},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"colorPresentations",{get:function(){return this._colorPresentations},set:function(t){this._colorPresentations=t,this.presentationIndex>t.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)},enumerable:false,configurable:true});t.prototype.selectNextColorPresentation=function(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)};t.prototype.guessColorPresentation=function(t,n){var i=-1;for(var r=0;r<this.colorPresentations.length;r++)if(n.toLowerCase()===this.colorPresentations[r].label){i=r;break}if(i===-1){var r=n.split("(")[0].toLowerCase();for(var e=0;e<this.colorPresentations.length;e++)if(this.colorPresentations[e].label.toLowerCase().startsWith(r)){i=e;break}}i!==-1&&i!==this.presentationIndex&&(this.presentationIndex=i,this._onDidChangePresentation.fire(this.presentation))};t.prototype.flushColor=function(){this._onColorFlushed.fire(this._color)};return t}();var t4=bh;var n4=function(t){__extends(n,t);function n(n,i,r,e){if(e===void 0){e=!1}var o=this;o=t.call(this)||this,o.model=i,o.showingStandaloneColorPicker=e,o._closeButton=null,o._domNode=t4(".colorpicker-header"),vh(n,o._domNode),o._pickedColorNode=vh(o._domNode,t4(".picked-color")),vh(o._pickedColorNode,t4("span.codicon.codicon-color-mode")),o._pickedColorPresentation=vh(o._pickedColorNode,document.createElement("span")),o._pickedColorPresentation.classList.add("picked-color-presentation");var s=ht(0,"Click to toggle color options (rgb/hsl/hex)");o._pickedColorNode.setAttribute("title",s),o._originalColorNode=vh(o._domNode,t4(".original-color")),o._originalColorNode.style.backgroundColor=Ig.Format.CSS.format(o.model.originalColor)||"",o.backgroundColor=r.getColorTheme().getColor(Pm)||Ig.white,o._register(r.onDidColorThemeChange((function(t){o.backgroundColor=t.getColor(Pm)||Ig.white}))),o._register(ma(o._pickedColorNode,ah.CLICK,(function(){return o.model.selectNextColorPresentation()}))),o._register(ma(o._originalColorNode,ah.CLICK,(function(){o.model.color=o.model.originalColor,o.model.flushColor()}))),o._register(i.onDidChangeColor(o.onDidChangeColor,o)),o._register(i.onDidChangePresentation(o.onDidChangePresentation,o)),o._pickedColorNode.style.backgroundColor=Ig.Format.CSS.format(i.color)||"",o._pickedColorNode.classList.toggle("light",i.color.rgba.a<.5?o.backgroundColor.isLighter():i.color.isLighter()),o.onDidChangeColor(o.model.color),o.showingStandaloneColorPicker&&(o._domNode.classList.add("standalone-colorpicker"),o._closeButton=o._register(new i4(o._domNode)));return o}Object.defineProperty(n.prototype,"closeButton",{get:function(){return this._closeButton},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"pickedColorNode",{get:function(){return this._pickedColorNode},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"originalColorNode",{get:function(){return this._originalColorNode},enumerable:false,configurable:true});n.prototype.onDidChangeColor=function(t){this._pickedColorNode.style.backgroundColor=Ig.Format.CSS.format(t)||"",this._pickedColorNode.classList.toggle("light",t.rgba.a<.5?this.backgroundColor.isLighter():t.isLighter()),this.onDidChangePresentation()};n.prototype.onDidChangePresentation=function(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""};return n}(ci);var i4=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._onClicked=i._register(new ki),i.onClicked=i._onClicked.event,i._button=document.createElement("div"),i._button.classList.add("close-button"),vh(n,i._button);var r=document.createElement("div");r.classList.add("close-button-inner-div"),vh(i._button,r),vh(r,t4(".button"+uc.asCSSSelector(cq("color-picker-close",Hr.close,ht(0,"Icon to close the color picker"))))).classList.add("close-icon"),i._register(ma(i._button,ah.CLICK,(function(){i._onClicked.fire()})));return i}return n}(ci);var r4=function(t){__extends(n,t);function n(n,i,r,e){if(e===void 0){e=!1}var o=this;o=t.call(this)||this,o.model=i,o.pixelRatio=r,o._insertButton=null,o._domNode=t4(".colorpicker-body"),vh(n,o._domNode),o._saturationBox=new e4(o._domNode,o.model,o.pixelRatio),o._register(o._saturationBox),o._register(o._saturationBox.onDidChange(o.onDidSaturationValueChange,o)),o._register(o._saturationBox.onColorFlushed(o.flushColor,o)),o._opacityStrip=new s4(o._domNode,o.model,e),o._register(o._opacityStrip),o._register(o._opacityStrip.onDidChange(o.onDidOpacityChange,o)),o._register(o._opacityStrip.onColorFlushed(o.flushColor,o)),o._hueStrip=new u4(o._domNode,o.model,e),o._register(o._hueStrip),o._register(o._hueStrip.onDidChange(o.onDidHueChange,o)),o._register(o._hueStrip.onColorFlushed(o.flushColor,o)),e&&(o._insertButton=o._register(new a4(o._domNode)),o._domNode.classList.add("standalone-colorpicker"));return o}n.prototype.flushColor=function(){this.model.flushColor()};n.prototype.onDidSaturationValueChange=function(t){var n=t.s,i=t.v;var r=this.model.color.hsva;this.model.color=new Ig(new Tg(r.h,n,i,r.a))};n.prototype.onDidOpacityChange=function(t){var n=this.model.color.hsva;this.model.color=new Ig(new Tg(n.h,n.s,n.v,t))};n.prototype.onDidHueChange=function(t){var n=this.model.color.hsva,i=360*(1-t);this.model.color=new Ig(new Tg(i===360?0:i,n.s,n.v,n.a))};Object.defineProperty(n.prototype,"domNode",{get:function(){return this._domNode},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"saturationBox",{get:function(){return this._saturationBox},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"enterButton",{get:function(){return this._insertButton},enumerable:false,configurable:true});n.prototype.layout=function(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()};return n}(ci);var e4=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.model=i,e.pixelRatio=r,e._onDidChange=new ki,e.onDidChange=e._onDidChange.event,e._onColorFlushed=new ki,e.onColorFlushed=e._onColorFlushed.event,e._domNode=t4(".saturation-wrap"),vh(n,e._domNode),e._canvas=document.createElement("canvas"),e._canvas.className="saturation-box",vh(e._domNode,e._canvas),e.selection=t4(".saturation-selection"),vh(e._domNode,e.selection),e.layout(),e._register(ma(e._domNode,ah.POINTER_DOWN,(function(t){return e.onPointerDown(t)}))),e._register(e.model.onDidChangeColor(e.onDidChangeColor,e)),e.monitor=null;return e}Object.defineProperty(n.prototype,"domNode",{get:function(){return this._domNode},enumerable:false,configurable:true});n.prototype.onPointerDown=function(t){var n=this;if(!(t.target&&t.target instanceof Element))return;this.monitor=this._register(new Kw);var i=ja(this._domNode);t.target!==this.selection&&this.onDidChangePosition(t.offsetX,t.offsetY),this.monitor.startMonitoring(t.target,t.pointerId,t.buttons,(function(t){return n.onDidChangePosition(t.pageX-i.left,t.pageY-i.top)}),(function(){return null}));var r=ma(t.target.ownerDocument,ah.POINTER_UP,(function(){n._onColorFlushed.fire(),r.dispose(),n.monitor&&(n.monitor.stopMonitoring(!0),n.monitor=null)}),!0)};n.prototype.onDidChangePosition=function(t,n){var i=Math.max(0,Math.min(1,t/this.width)),r=Math.max(0,Math.min(1,1-n/this.height));this.paintSelection(i,r),this._onDidChange.fire({s:i,v:r})};n.prototype.layout=function(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();var t=this.model.color.hsva;this.paintSelection(t.s,t.v)};n.prototype.paint=function(){var t=this.model.color.hsva,n=new Ig(new Tg(t.h,1,1,1)),i=this._canvas.getContext("2d"),r=i.createLinearGradient(0,0,this._canvas.width,0);r.addColorStop(0,"rgba(255, 255, 255, 1)"),r.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),r.addColorStop(1,"rgba(255, 255, 255, 0)");var e=i.createLinearGradient(0,0,0,this._canvas.height);e.addColorStop(0,"rgba(0, 0, 0, 0)"),e.addColorStop(1,"rgba(0, 0, 0, 1)"),i.rect(0,0,this._canvas.width,this._canvas.height),i.fillStyle=Ig.Format.CSS.format(n),i.fill(),i.fillStyle=r,i.fill(),i.fillStyle=e,i.fill()};n.prototype.paintSelection=function(t,n){this.selection.style.left=t*this.width+"px",this.selection.style.top=this.height-n*this.height+"px"};n.prototype.onDidChangeColor=function(t){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();var n=t.hsva;this.paintSelection(n.s,n.v)};return n}(ci);var o4=function(t){__extends(n,t);function n(n,i,r){if(r===void 0){r=!1}var e=this;e=t.call(this)||this,e.model=i,e._onDidChange=new ki,e.onDidChange=e._onDidChange.event,e._onColorFlushed=new ki,e.onColorFlushed=e._onColorFlushed.event,r?(e.domNode=vh(n,t4(".standalone-strip")),e.overlay=vh(e.domNode,t4(".standalone-overlay"))):(e.domNode=vh(n,t4(".strip")),e.overlay=vh(e.domNode,t4(".overlay"))),e.slider=vh(e.domNode,t4(".slider")),e.slider.style.top="0px",e._register(ma(e.domNode,ah.POINTER_DOWN,(function(t){return e.onPointerDown(t)}))),e._register(i.onDidChangeColor(e.onDidChangeColor,e)),e.layout();return e}n.prototype.layout=function(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;var t=this.getValue(this.model.color);this.updateSliderPosition(t)};n.prototype.onDidChangeColor=function(t){var n=this.getValue(t);this.updateSliderPosition(n)};n.prototype.onPointerDown=function(t){var n=this;if(!(t.target&&t.target instanceof Element))return;var i=this._register(new Kw),r=ja(this.domNode);this.domNode.classList.add("grabbing"),t.target!==this.slider&&this.onDidChangeTop(t.offsetY),i.startMonitoring(t.target,t.pointerId,t.buttons,(function(t){return n.onDidChangeTop(t.pageY-r.top)}),(function(){return null}));var e=ma(t.target.ownerDocument,ah.POINTER_UP,(function(){n._onColorFlushed.fire(),e.dispose(),i.stopMonitoring(!0),n.domNode.classList.remove("grabbing")}),!0)};n.prototype.onDidChangeTop=function(t){var n=Math.max(0,Math.min(1,1-t/this.height));this.updateSliderPosition(n),this._onDidChange.fire(n)};n.prototype.updateSliderPosition=function(t){this.slider.style.top=(1-t)*this.height+"px"};return n}(ci);var s4=function(t){__extends(n,t);function n(n,i,r){if(r===void 0){r=!1}var e=this;e=t.call(this,n,i,r)||this,e.domNode.classList.add("opacity-strip"),e.onDidChangeColor(e.model.color);return e}n.prototype.onDidChangeColor=function(n){t.prototype.onDidChangeColor.call(this,n);var i=n.rgba,r=i.r,e=i.g,o=i.b,s=new Ig(new jg(r,e,o,1)),u=new Ig(new jg(r,e,o,0));this.overlay.style.background="linear-gradient(to bottom, ".concat(s," 0%, ").concat(u," 100%)")};n.prototype.getValue=function(t){return t.hsva.a};return n}(o4);var u4=function(t){__extends(n,t);function n(n,i,r){if(r===void 0){r=!1}var e=this;e=t.call(this,n,i,r)||this,e.domNode.classList.add("hue-strip");return e}n.prototype.getValue=function(t){return 1-t.hsva.h/360};return n}(o4);var a4=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._onClicked=i._register(new ki),i.onClicked=i._onClicked.event,i._button=vh(n,document.createElement("button")),i._button.classList.add("insert-button"),i._button.textContent="Insert",i._register(ma(i._button,ah.CLICK,(function(){i._onClicked.fire()})));return i}Object.defineProperty(n.prototype,"button",{get:function(){return this._button},enumerable:false,configurable:true});return n}(ci);var h4=function(t){__extends(n,t);function n(n,i,r,e,o){if(o===void 0){o=!1}var s=this;s=t.call(this)||this,s.model=i,s.pixelRatio=r,s._register(Th.getInstance(sa(n)).onDidChange((function(){return s.layout()})));var u=t4(".colorpicker-widget");n.appendChild(u),s.header=s._register(new n4(u,s.model,e,o)),s.body=s._register(new r4(u,s.model,s.pixelRatio,o));return s}n.prototype.layout=function(){this.body.layout()};return n}(ik);var c4=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},f4=function(t,n){return function(i,r){n(i,r,t)}};var l4=function(){function t(t,n,i,r){this.owner=t,this.range=n,this.model=i,this.provider=r,this.forceShowAtRange=!0}t.prototype.isValidForHoverAnchor=function(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn};return t}();var v4=function(){function t(t,n){this._editor=t,this._themeService=n,this.hoverOrdinal=2}t.prototype.computeSync=function(t,n){return[]};t.prototype.computeAsync=function(t,n,i){return zs.fromPromise(this._computeAsync(t,n,i))};t.prototype._computeAsync=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var t,i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:if(!this._editor.hasModel())return[2,[]];t=Q2.get(this._editor);if(!t)return[2,[]];i=0,r=n;s.label=1;case 1:if(!(i<r.length))return[3,4];e=r[i];if(!t.isColorDecoration(e))return[3,3];o=t.getColorData(e.range.getStartPosition());if(!o)return[3,3];return[4,p4(this,this._editor.getModel(),o.colorInfo,o.provider)];case 2:return[2,[s.sent()]];case 3:i++;return[3,1];case 4:return[2,[]]}}))}))};t.prototype.renderHoverParts=function(t,n){return w4(this,this._editor,this._themeService,n,t)};return t}();v4=c4([f4(1,zk)],v4);var d4=function(){function t(t,n,i,r){this.owner=t,this.range=n,this.model=i,this.provider=r}return t}();var g4=function(){function t(t,n){this._editor=t,this._themeService=n,this._color=null}t.prototype.createColorHover=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u,a,h,c,f,l;var v;return __generator(this,(function(d){switch(d.label){case 0:if(!this._editor.hasModel()||!Q2.get(this._editor))return[2,null];return[4,W2(i,this._editor.getModel(),Fi.None)];case 1:r=d.sent();e=null,o=null;for(s=0,u=r;s<u.length;s++){a=u[s];h=a.colorInfo;Ir.containsRange(h.range,t.range)&&(e=h,o=a.provider)}c=e!==null&&e!==void 0?e:t,f=o!==null&&o!==void 0?o:n,l=!!e;v={};return[4,p4(this,this._editor.getModel(),c,f)];case 2:return[2,(v.colorHover=d.sent(),v.foundInEditor=l,v)]}}))}))};t.prototype.updateEditorModel=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r;return __generator(this,(function(e){switch(e.label){case 0:if(!this._editor.hasModel())return[2];n=t.model;i=new Ir(t.range.startLineNumber,t.range.startColumn,t.range.endLineNumber,t.range.endColumn);r=this._color;if(!r)return[3,2];return[4,b4(this._editor.getModel(),n,this._color,i,t)];case 1:r=(e.sent(),i=m4(this._editor,i,n));e.label=2;case 2:r;return[2]}}))}))};t.prototype.renderHoverParts=function(t,n){return w4(this,this._editor,this._themeService,n,t)};Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t},enumerable:false,configurable:true});return t}();function p4(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a,h,c,f,l,v;return __generator(this,(function(d){switch(d.label){case 0:e=n.getValueInRange(i.range),o=i.color,s=o.red,u=o.green,a=o.blue,h=o.alpha,c=new jg(Math.round(255*s),Math.round(255*u),Math.round(255*a),h),f=new Ig(c);return[4,H2(n,i,r,Fi.None)];case 1:l=d.sent(),v=new X2(f,[],0);return[2,(v.colorPresentations=l||[],v.guessColorPresentation(f,e),t instanceof v4?new l4(t,Ir.lift(i.range),v,r):new d4(t,Ir.lift(i.range),v,r))]}}))}))}function w4(t,n,i,r,e){var o=this;if(r.length===0||!n.hasModel())return ci.None;if(e.setMinimumDimensions){var s=n.getOption(67)+8;e.setMinimumDimensions(new Fa(302,s))}var u=new hi,a=r[0],h=n.getModel(),c=a.model,f=u.add(new h4(e.fragment,c,n.getOption(143),i,t instanceof g4));e.setColorPicker(f);var l=!1,v=new Ir(a.range.startLineNumber,a.range.startColumn,a.range.endLineNumber,a.range.endColumn);if(t instanceof g4){var s=r[0].model.color;t.color=s,b4(h,c,s,v,a),u.add(c.onColorFlushed((function(n){t.color=n})))}else u.add(c.onColorFlushed((function(t){return __awaiter(o,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,b4(h,c,t,v,a)];case 1:i.sent(),l=!0,v=m4(n,v,c);return[2]}}))}))})));return u.add(c.onDidChangeColor((function(t){b4(h,c,t,v,a)}))),u.add(n.onDidChangeModelContent((function(t){l?l=!1:(e.hide(),n.focus())}))),u}function m4(t,n,i){var r,e;var o=[],s=(r=i.presentation.textEdit)!==null&&r!==void 0?r:{range:n,text:i.presentation.label,forceMoveMarkers:!1};o.push(s),i.presentation.additionalTextEdits&&o.push.apply(o,i.presentation.additionalTextEdits);var u=Ir.lift(s.range),a=t.getModel()._setTrackedRange(null,u,3);return t.executeEdits("colorpicker",o),t.pushUndoStop(),(e=t.getModel()._getTrackedRange(a))!==null&&e!==void 0?e:u}function b4(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o;return __generator(this,(function(s){switch(s.label){case 0:return[4,H2(t,{range:r,color:{red:i.rgba.r/255,green:i.rgba.g/255,blue:i.rgba.b/255,alpha:i.rgba.a}},e.provider,Fi.None)];case 1:o=s.sent();n.colorPresentations=o||[];return[2]}}))}))}function y4(t,n){return!!t[n]}g4=c4([f4(1,zk)],g4);var _4=function(){function t(t,n){this.target=t.target,this.isLeftClick=t.event.leftButton,this.isMiddleClick=t.event.middleButton,this.isRightClick=t.event.rightButton,this.hasTriggerModifier=y4(t.event,n.triggerModifier),this.hasSideBySideModifier=y4(t.event,n.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=t.event.detail<=1}return t}();var k4=function(){function t(t,n){this.keyCodeIsTriggerKey=t.keyCode===n.triggerKey,this.keyCodeIsSideBySideKey=t.keyCode===n.triggerSideBySideKey,this.hasTriggerModifier=y4(t,n.triggerModifier)}return t}();var x4=function(){function t(t,n,i,r){this.triggerKey=t,this.triggerModifier=n,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=r}t.prototype.equals=function(t){return this.triggerKey===t.triggerKey&&this.triggerModifier===t.triggerModifier&&this.triggerSideBySideKey===t.triggerSideBySideKey&&this.triggerSideBySideModifier===t.triggerSideBySideModifier};return t}();function C4(t){return t==="altKey"?Ft?new x4(57,"metaKey",6,"altKey"):new x4(5,"ctrlKey",6,"altKey"):Ft?new x4(6,"altKey",57,"metaKey"):new x4(6,"altKey",5,"ctrlKey")}var S4=function(t){__extends(n,t);function n(n,i){var r=this;var e;r=t.call(this)||this,r._onMouseMoveOrRelevantKeyDown=r._register(new ki),r.onMouseMoveOrRelevantKeyDown=r._onMouseMoveOrRelevantKeyDown.event,r._onExecute=r._register(new ki),r.onExecute=r._onExecute.event,r._onCancel=r._register(new ki),r.onCancel=r._onCancel.event,r._editor=n,r._extractLineNumberFromMouseEvent=(e=i==null?void 0:i.extractLineNumberFromMouseEvent)!==null&&e!==void 0?e:function(t){return t.target.position?t.target.position.lineNumber:0},r._opts=C4(r._editor.getOption(78)),r._lastMouseMoveEvent=null,r._hasTriggerKeyOnMouseDown=!1,r._lineNumberOnMouseDown=0,r._register(r._editor.onDidChangeConfiguration((function(t){if(t.hasChanged(78)){var n=C4(r._editor.getOption(78));if(r._opts.equals(n))return;r._opts=n,r._lastMouseMoveEvent=null,r._hasTriggerKeyOnMouseDown=!1,r._lineNumberOnMouseDown=0,r._onCancel.fire()}}))),r._register(r._editor.onMouseMove((function(t){return r._onEditorMouseMove(new _4(t,r._opts))}))),r._register(r._editor.onMouseDown((function(t){return r._onEditorMouseDown(new _4(t,r._opts))}))),r._register(r._editor.onMouseUp((function(t){return r._onEditorMouseUp(new _4(t,r._opts))}))),r._register(r._editor.onKeyDown((function(t){return r._onEditorKeyDown(new k4(t,r._opts))}))),r._register(r._editor.onKeyUp((function(t){return r._onEditorKeyUp(new k4(t,r._opts))}))),r._register(r._editor.onMouseDrag((function(){return r._resetHandler()}))),r._register(r._editor.onDidChangeCursorSelection((function(t){return r._onDidChangeCursorSelection(t)}))),r._register(r._editor.onDidChangeModel((function(t){return r._resetHandler()}))),r._register(r._editor.onDidChangeModelContent((function(){return r._resetHandler()}))),r._register(r._editor.onDidScrollChange((function(t){(t.scrollTopChanged||t.scrollLeftChanged)&&r._resetHandler()})));return r}n.prototype._onDidChangeCursorSelection=function(t){t.selection&&t.selection.startColumn!==t.selection.endColumn&&this._resetHandler()};n.prototype._onEditorMouseMove=function(t){this._lastMouseMoveEvent=t,this._onMouseMoveOrRelevantKeyDown.fire([t,null])};n.prototype._onEditorMouseDown=function(t){this._hasTriggerKeyOnMouseDown=t.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(t)};n.prototype._onEditorMouseUp=function(t){var n=this._extractLineNumberFromMouseEvent(t);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===n&&this._onExecute.fire(t)};n.prototype._onEditorKeyDown=function(t){this._lastMouseMoveEvent&&(t.keyCodeIsTriggerKey||t.keyCodeIsSideBySideKey&&t.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,t]):t.hasTriggerModifier&&this._onCancel.fire()};n.prototype._onEditorKeyUp=function(t){t.keyCodeIsTriggerKey&&this._onCancel.fire()};n.prototype._resetHandler=function(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()};return n}(ci);var D4=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},A4=function(t,n){return function(i,r){n(i,r,t)}};var O4=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c,f,l,v){var d=this;d=t.call(this,n,__assign(__assign({},e.getRawOptions()),{overflowWidgetsDomNode:e.getOverflowWidgetsDomNode()}),r,o,s,u,a,h,c,f,l,v)||this,d._parentEditor=e,d._overwriteOptions=i,t.prototype.updateOptions.call(d,d._overwriteOptions),d._register(e.onDidChangeConfiguration((function(t){return d._onParentConfigurationChanged(t)})));return d}n.prototype.getParentEditor=function(){return this._parentEditor};n.prototype._onParentConfigurationChanged=function(n){t.prototype.updateOptions.call(this,this._parentEditor.getRawOptions()),t.prototype.updateOptions.call(this,this._overwriteOptions)};n.prototype.updateOptions=function(n){et(this._overwriteOptions,n,!0),t.prototype.updateOptions.call(this,this._overwriteOptions)};return n}(jL);O4=D4([A4(4,Jh),A4(5,Qh),A4(6,ac),A4(7,Gc),A4(8,zk),A4(9,EL),A4(10,jw),A4(11,xv),A4(12,tp)],O4);var E4=new Ig(new jg(0,122,204)),M4={showArrow:!0,showFrame:!0,className:"",frameColor:E4,arrowColor:E4,keepEditorSelection:!1};var F4=function(){function t(t,n,i,r,e,o,s,u){this.id="",this.domNode=t,this.afterLineNumber=n,this.afterColumn=i,this.heightInLines=r,this.showInHiddenAreas=s,this.ordinal=u,this._onDomNodeTop=e,this._onComputedHeight=o}t.prototype.onDomNodeTop=function(t){this._onDomNodeTop(t)};t.prototype.onComputedHeight=function(t){this._onComputedHeight(t)};return t}();var L4=function(){function t(t,n){this._id=t,this._domNode=n}t.prototype.getId=function(){return this._id};t.prototype.getDomNode=function(){return this._domNode};t.prototype.getPosition=function(){return null};return t}();var j4=function(){function t(n){this._editor=n,this._ruleName=t._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}t.prototype.dispose=function(){this.hide(),eh(this._ruleName)};Object.defineProperty(t.prototype,"color",{set:function(t){this._color!==t&&(this._color=t,this._updateStyle())},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"height",{set:function(t){this._height!==t&&(this._height=t,this._updateStyle())},enumerable:false,configurable:true});t.prototype._updateStyle=function(){eh(this._ruleName),rh(".monaco-editor ".concat(this._ruleName),"border-style: solid; border-color: transparent; border-bottom-color: ".concat(this._color,"; border-width: ").concat(this._height,"px; bottom: -").concat(this._height,"px !important; margin-left: -").concat(this._height,"px; "))};t.prototype.show=function(t){t.column===1&&(t={lineNumber:t.lineNumber,column:2}),this._decorations.set([{range:Ir.fromPositions(t),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])};t.prototype.hide=function(){this._decorations.clear()};return t}();j4._IdGenerator=new ZT(".arrow-decoration-");var R4=function(){function t(t,n){if(n===void 0){n={}}var i=this;this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new hi,this.container=null,this._isShowing=!1,this.editor=t,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=tt(n),et(this.options,M4,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange((function(t){var n=i._getWidth(t);i.domNode.style.width=n+"px",i.domNode.style.left=i._getLeft(t)+"px",i._onWidth(n)})))}t.prototype.dispose=function(){var t=this;this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones((function(n){t._viewZone&&n.removeZone(t._viewZone.id),t._viewZone=null})),this._positionMarkerId.clear(),this._disposables.dispose()};t.prototype.create=function(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new j4(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()};t.prototype.style=function(t){t.frameColor&&(this.options.frameColor=t.frameColor),t.arrowColor&&(this.options.arrowColor=t.arrowColor),this._applyStyles()};t.prototype._applyStyles=function(){if(this.container&&this.options.frameColor){var t=this.options.frameColor.toString();this.container.style.borderTopColor=t,this.container.style.borderBottomColor=t}if(this._arrow&&this.options.arrowColor){var t=this.options.arrowColor.toString();this._arrow.color=t}};t.prototype._getWidth=function(t){return t.width-t.minimap.minimapWidth-t.verticalScrollbarWidth};t.prototype._getLeft=function(t){return t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?t.minimap.minimapWidth:0};t.prototype._onViewZoneTop=function(t){this.domNode.style.top=t+"px"};t.prototype._onViewZoneHeight=function(t){var n;if(this.domNode.style.height="".concat(t,"px"),this.container){var i=t-this._decoratingElementsHeight();this.container.style.height="".concat(i,"px");var r=this.editor.getLayoutInfo();this._doLayout(i,this._getWidth(r))}(n=this._resizeSash)===null||n===void 0||n.layout()};Object.defineProperty(t.prototype,"position",{get:function(){var t=this._positionMarkerId.getRange(0);if(t)return t.getStartPosition()},enumerable:false,configurable:true});t.prototype.show=function(t,n){var i=Ir.isIRange(t)?Ir.lift(t):Ir.fromPositions(t);this._isShowing=!0,this._showImpl(i,n),this._isShowing=!1,this._positionMarkerId.set([{range:i,options:PM.EMPTY}])};t.prototype.hide=function(){var t=this;var n;this._viewZone&&(this.editor.changeViewZones((function(n){t._viewZone&&n.removeZone(t._viewZone.id)})),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(n=this._arrow)===null||n===void 0||n.hide(),this._positionMarkerId.clear()};t.prototype._decoratingElementsHeight=function(){var t=this.editor.getOption(67);var n=0;return this.options.showArrow&&(n+=2*Math.round(t/3)),this.options.showFrame&&(n+=2*Math.round(t/9)),n};t.prototype._showImpl=function(t,n){var i=this;var r=t.getStartPosition(),e=this.editor.getLayoutInfo(),o=this._getWidth(e);this.domNode.style.width="".concat(o,"px"),this.domNode.style.left=this._getLeft(e)+"px";var s=document.createElement("div");s.style.overflow="hidden";var u=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){var a=Math.max(12,this.editor.getLayoutInfo().height/u*.8);n=Math.min(n,a)}var h=0,c=0;if(this._arrow&&this.options.showArrow&&(h=Math.round(u/3),this._arrow.height=h,this._arrow.show(r)),this.options.showFrame&&(c=Math.round(u/9)),this.editor.changeViewZones((function(t){i._viewZone&&t.removeZone(i._viewZone.id),i._overlayWidget&&(i.editor.removeOverlayWidget(i._overlayWidget),i._overlayWidget=null),i.domNode.style.top="-1000px",i._viewZone=new F4(s,r.lineNumber,r.column,n,(function(t){return i._onViewZoneTop(t)}),(function(t){return i._onViewZoneHeight(t)}),i.options.showInHiddenAreas,i.options.ordinal),i._viewZone.id=t.addZone(i._viewZone),i._overlayWidget=new L4("vs.editor.contrib.zoneWidget"+i._viewZone.id,i.domNode),i.editor.addOverlayWidget(i._overlayWidget)})),this.container&&this.options.showFrame){var a=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=a+"px",this.container.style.borderBottomWidth=a+"px"}var f=n*u-this._decoratingElementsHeight();this.container&&(this.container.style.top=h+"px",this.container.style.height=f+"px",this.container.style.overflow="hidden"),this._doLayout(f,o),this.options.keepEditorSelection||this.editor.setSelection(t);var l=this.editor.getModel();if(l){var a=l.validateRange(new Ir(t.startLineNumber,1,t.endLineNumber+1,1));this.revealRange(a,a.startLineNumber===l.getLineCount())}};t.prototype.revealRange=function(t,n){n?this.editor.revealLineNearTop(t.endLineNumber,0):this.editor.revealRange(t,0)};t.prototype.setCssClass=function(t,n){this.container&&(n&&this.container.classList.remove(n),this.container.classList.add(t))};t.prototype._onWidth=function(t){};t.prototype._doLayout=function(t,n){};t.prototype._relayout=function(t){var n=this;this._viewZone&&this._viewZone.heightInLines!==t&&this.editor.changeViewZones((function(i){n._viewZone&&(n._viewZone.heightInLines=t,i.layoutZone(n._viewZone.id))}))};t.prototype._initSash=function(){var t=this;if(this._resizeSash)return;var n;this._resizeSash=this._disposables.add(new ez(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0),this._disposables.add(this._resizeSash.onDidStart((function(i){t._viewZone&&(n={startY:i.startY,heightInLines:t._viewZone.heightInLines})}))),this._disposables.add(this._resizeSash.onDidEnd((function(){n=void 0}))),this._disposables.add(this._resizeSash.onDidChange((function(i){if(n){var r=(i.currentY-n.startY)/t.editor.getOption(67),e=r<0?Math.ceil(r):Math.floor(r),o=n.heightInLines+e;o>5&&o<35&&t._relayout(o)}})))};t.prototype.getHorizontalSashLeft=function(){return 0};t.prototype.getHorizontalSashTop=function(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2};t.prototype.getHorizontalSashWidth=function(){var t=this.editor.getLayoutInfo();return t.width-t.minimap.minimapWidth};return t}();var T4=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},I4=function(t,n){return function(i,r){n(i,r,t)}};var B4=Zh("IPeekViewService");var N4;Xl(B4,function(){function t(){this._widgets=new Map}t.prototype.addExclusiveWidget=function(t,n){var i=this;var r=this._widgets.get(t);r&&(r.listener.dispose(),r.widget.dispose()),this._widgets.set(t,{widget:n,listener:n.onDidClose((function(){var r=i._widgets.get(t);r&&r.widget===n&&(r.listener.dispose(),i._widgets.delete(t))}))})};return t}(),1),function(t){t.inPeekEditor=new qc("inReferenceSearchEditor",!0,ht(0,"Whether the current code editor is embedded inside peek")),t.notInPeekEditor=t.inPeekEditor.toNegated()}(N4||(N4={}));var P4=function(){function t(t,n){t instanceof O4&&N4.inPeekEditor.bindTo(n)}t.prototype.dispose=function(){};return t}();P4.ID="editor.contrib.referenceController",P4=T4([I4(1,Gc)],P4),Pf(P4.ID,P4,0);var W4={headerBackgroundColor:Ig.white,primaryHeadingColor:Ig.fromHex("#333333"),secondaryHeadingColor:Ig.fromHex("#6c6c6cb3")};var H4=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,i)||this,e.instantiationService=r,e._onDidClose=new ki,e.onDidClose=e._onDidClose.event,et(e.options,W4,!1);return e}n.prototype.dispose=function(){this.disposed||(this.disposed=!0,t.prototype.dispose.call(this),this._onDidClose.fire(this))};n.prototype.style=function(n){var i=this.options;n.headerBackgroundColor&&(i.headerBackgroundColor=n.headerBackgroundColor),n.primaryHeadingColor&&(i.primaryHeadingColor=n.primaryHeadingColor),n.secondaryHeadingColor&&(i.secondaryHeadingColor=n.secondaryHeadingColor),t.prototype.style.call(this,n)};n.prototype._applyStyles=function(){t.prototype._applyStyles.call(this);var n=this.options;this._headElement&&n.headerBackgroundColor&&(this._headElement.style.backgroundColor=n.headerBackgroundColor.toString()),this._primaryHeading&&n.primaryHeadingColor&&(this._primaryHeading.style.color=n.primaryHeadingColor.toString()),this._secondaryHeading&&n.secondaryHeadingColor&&(this._secondaryHeading.style.color=n.secondaryHeadingColor.toString()),this._bodyElement&&n.frameColor&&(this._bodyElement.style.borderColor=n.frameColor.toString())};n.prototype._fillContainer=function(t){this.setCssClass("peekview-widget"),this._headElement=bh(".head"),this._bodyElement=bh(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),t.appendChild(this._headElement),t.appendChild(this._bodyElement)};n.prototype._fillHead=function(t,n){var i=this;this._titleElement=bh(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),ya(this._titleElement,"click",(function(t){return i._onTitleClick(t)}))),vh(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=bh("span.filename"),this._secondaryHeading=bh("span.dirname"),this._metaHeading=bh("span.meta"),vh(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);var r=bh(".peekview-actions");vh(this._headElement,r);var e=this._getActionBarOptions();this._actionbarWidget=new qW(r,e),this._disposables.add(this._actionbarWidget),n||this._actionbarWidget.push(new tc("peekview.close",ht(0,"Close"),uc.asClassName(Hr.close),!0,(function(){return i.dispose(),Promise.resolve()})),{label:!1,icon:!0})};n.prototype._fillTitleIcon=function(t){};n.prototype._getActionBarOptions=function(){return{actionViewItemProvider:VW.bind(void 0,this.instantiationService),orientation:0}};n.prototype._onTitleClick=function(t){};n.prototype.setTitle=function(t,n){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=t,this._primaryHeading.setAttribute("title",t),n?this._secondaryHeading.innerText=n:pa(this._secondaryHeading))};n.prototype.setMetaTitle=function(t){this._metaHeading&&(t?(this._metaHeading.innerText=t,yh(this._metaHeading)):_h(this._metaHeading))};n.prototype._doLayout=function(t,n){if(!this._isShowing&&t<0)return void this.dispose();var i=Math.ceil(1.2*this.editor.getOption(67)),r=Math.round(t-(i+2));this._doLayoutHead(i,n),this._doLayoutBody(r,n)};n.prototype._doLayoutHead=function(t,n){this._headElement&&(this._headElement.style.height="".concat(t,"px"),this._headElement.style.lineHeight=this._headElement.style.height)};n.prototype._doLayoutBody=function(t,n){this._bodyElement&&(this._bodyElement.style.height="".concat(t,"px"))};return n}(R4);H4=T4([I4(2,Jh)],H4);var z4=Jw("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:Ig.black,hcLight:Ig.white},ht(0,"Background color of the peek view title area.")),U4=Jw("peekViewTitleLabel.foreground",{dark:Ig.white,light:Ig.black,hcDark:Ig.white,hcLight:bm},ht(0,"Color of the peek view title.")),K4=Jw("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},ht(0,"Color of the peek view title info.")),V4=Jw("peekView.border",{dark:Om,light:Om,hcDark:am,hcLight:am},ht(0,"Color of the peek view borders and arrow.")),q4=Jw("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:Ig.black,hcLight:Ig.white},ht(0,"Background color of the peek view result list."));Jw("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:Ig.white,hcLight:bm},ht(0,"Foreground color for line nodes in the peek view result list.")),Jw("peekViewResult.fileForeground",{dark:Ig.white,light:"#1E1E1E",hcDark:Ig.white,hcLight:bm},ht(0,"Foreground color for file nodes in the peek view result list.")),Jw("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},ht(0,"Background color of the selected entry in the peek view result list.")),Jw("peekViewResult.selectionForeground",{dark:Ig.white,light:"#6C6C6C",hcDark:Ig.white,hcLight:bm},ht(0,"Foreground color of the selected entry in the peek view result list."));var G4=Jw("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:Ig.black,hcLight:Ig.white},ht(0,"Background color of the peek view editor."));Jw("peekViewEditorGutter.background",{dark:G4,light:G4,hcDark:G4,hcLight:G4},ht(0,"Background color of the gutter in the peek view editor.")),Jw("peekViewEditorStickyScroll.background",{dark:G4,light:G4,hcDark:G4,hcLight:G4},ht(0,"Background color of sticky scroll in the peek view editor.")),Jw("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},ht(0,"Match highlight color in the peek view result list.")),Jw("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},ht(0,"Match highlight color in the peek view editor.")),Jw("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:hm,hcLight:hm},ht(0,"Match highlight border in the peek view editor."));var $4=function(){function t(t,n,i,r){this.isProviderFirst=t,this.parent=n,this.link=i,this._rangeCallback=r,this.id=QT.nextId()}Object.defineProperty(t.prototype,"uri",{get:function(){return this.link.uri},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"range",{get:function(){var t,n;return(n=(t=this._range)!==null&&t!==void 0?t:this.link.targetSelectionRange)!==null&&n!==void 0?n:this.link.range},set:function(t){this._range=t,this._rangeCallback(this)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"ariaMessage",{get:function(){var t;var n=(t=this.parent.getPreview(this))===null||t===void 0?void 0:t.preview(this.range);return n?ht(0,"{0} in {1} on line {2} at column {3}",n.value,NO(this.uri),this.range.startLineNumber,this.range.startColumn):ht(0,"in {0} on line {1} at column {2}",NO(this.uri),this.range.startLineNumber,this.range.startColumn)},enumerable:false,configurable:true});return t}();var J4=function(){function t(t){this._modelReference=t}t.prototype.dispose=function(){this._modelReference.dispose()};t.prototype.preview=function(t,n){if(n===void 0){n=8}var i=this._modelReference.object.textEditorModel;if(!i)return;var r=t.startLineNumber,e=t.startColumn,o=t.endLineNumber,s=t.endColumn,u=i.getWordUntilPosition({lineNumber:r,column:e-n}),a=new Ir(r,u.startColumn,r,e),h=new Ir(o,s,o,1073741824),c=i.getValueInRange(a).replace(/^\s+/,""),f=i.getValueInRange(t);return{value:c+f+i.getValueInRange(h).replace(/\s+$/,""),highlight:{start:c.length,end:c.length+f.length}}};return t}();var Z4=function(){function t(t,n){this.parent=t,this.uri=n,this.children=[],this._previews=new od}t.prototype.dispose=function(){si(this._previews.values()),this._previews.clear()};t.prototype.getPreview=function(t){return this._previews.get(t.uri)};Object.defineProperty(t.prototype,"ariaMessage",{get:function(){var t=this.children.length;return t===1?ht(0,"1 symbol in {0}, full path {1}",NO(this.uri),this.uri.fsPath):ht(0,"{0} symbols in {1}, full path {2}",t,NO(this.uri),this.uri.fsPath)},enumerable:false,configurable:true});t.prototype.resolve=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:if(this._previews.size!==0)return[2,this];n=0,i=this.children;s.label=1;case 1:if(!(n<i.length))return[3,6];r=i[n];if(!!this._previews.has(r.uri))return[3,5];s.label=2;case 2:s.trys.push([2,4,,5]);return[4,t.createModelReference(r.uri)];case 3:e=s.sent();this._previews.set(r.uri,new J4(e));return[3,5];case 4:o=s.sent();Gn(o);return[3,5];case 5:n++;return[3,1];case 6:return[2,this]}}))}))};return t}();var Q4=function(){function t(n,i){var r=this;this.groups=[],this.references=[],this._onDidChangeReferenceRange=new ki,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=n,this._title=i;var e=n[0];var o;n.sort(t._compareReferences);for(var s=0,u=n;s<u.length;s++){var a=u[s];if(o&&TO.isEqual(o.uri,a.uri,!0)||(o=new Z4(this,a.uri),this.groups.push(o)),o.children.length===0||t._compareReferences(a,o.children[o.children.length-1])!==0){var h=new $4(e===a,o,a,(function(t){return r._onDidChangeReferenceRange.fire(t)}));this.references.push(h),o.children.push(h)}}}t.prototype.dispose=function(){si(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0};t.prototype.clone=function(){return new t(this._links,this._title)};Object.defineProperty(t.prototype,"title",{get:function(){return this._title},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.groups.length===0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"ariaMessage",{get:function(){return this.isEmpty?ht(0,"No results found"):this.references.length===1?ht(0,"Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?ht(0,"Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):ht(0,"Found {0} symbols in {1} files",this.references.length,this.groups.length)},enumerable:false,configurable:true});t.prototype.nextOrPreviousReference=function(t,n){var i=t.parent;var r=i.children.indexOf(t);var e=i.children.length,o=i.parent.groups.length;return o===1||n&&r+1<e||!n&&r>0?(r=n?(r+1)%e:(r+e-1)%e,i.children[r]):(r=i.parent.groups.indexOf(i),n?(r=(r+1)%o,i.parent.groups[r].children[0]):(r=(r+o-1)%o,i.parent.groups[r].children[i.parent.groups[r].children.length-1]))};t.prototype.nearestReference=function(t,n){var i=this.references.map((function(i,r){return{idx:r,prefixLen:Do(i.uri.toString(),t.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-n.lineNumber)+Math.abs(i.range.startColumn-n.column)}})).sort((function(t,n){return t.prefixLen>n.prefixLen?-1:t.prefixLen<n.prefixLen?1:t.offsetDist<n.offsetDist?-1:t.offsetDist>n.offsetDist?1:0}))[0];if(i)return this.references[i.idx]};t.prototype.referenceAt=function(t,n){for(var i=0,r=this.references;i<r.length;i++){var e=r[i];if(e.uri.toString()===t.toString()&&Ir.containsPosition(e.range,n))return e}};t.prototype.firstReference=function(){for(var t=0,n=this.references;t<n.length;t++){var i=n[t];if(i.isProviderFirst)return i}return this.references[0]};t._compareReferences=function(t,n){return TO.compare(t.uri,n.uri)||Ir.compareRangesUsingStarts(t.range,n.range)};return t}();var Y4,X4=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},t3=function(t,n){return function(i,r){n(i,r,t)}};var n3=function(){function t(t){this._resolverService=t}t.prototype.hasChildren=function(t){return t instanceof Q4||t instanceof Z4};t.prototype.getChildren=function(t){if(t instanceof Q4)return t.groups;if(t instanceof Z4)return t.resolve(this._resolverService).then((function(t){return t.children}));throw new Error("bad tree")};return t}();n3=X4([t3(0,Xh)],n3);var i3=function(){function t(){}t.prototype.getHeight=function(){return 23};t.prototype.getTemplateId=function(t){return t instanceof Z4?s3.id:a3.id};return t}();var r3=function(){function t(t){this._keybindingService=t}t.prototype.getKeyboardNavigationLabel=function(t){var n;if(t instanceof $4){var i=(n=t.parent.getPreview(t))===null||n===void 0?void 0:n.preview(t.range);if(i)return i.value}return NO(t.uri)};return t}();r3=X4([t3(0,Yx)],r3);var e3=function(){function t(){}t.prototype.getId=function(t){return t instanceof $4?t.id:t.uri};return t}();var o3=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._labelService=i;var e=document.createElement("div");e.classList.add("reference-file"),r.file=r._register(new JK(e,{supportHighlights:!0})),r.badge=new AV(vh(e,bh(".count")),{},MW),n.appendChild(e);return r}n.prototype.set=function(t,n){var i=WO(t.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(t.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(t.uri),matches:n});var r=t.children.length;this.badge.setCount(r),r>1?this.badge.setTitleFormat(ht(0,"{0} references",r)):this.badge.setTitleFormat(ht(0,"{0} reference",r))};return n}(ci);o3=X4([t3(1,RB)],o3);var s3=Y4=function(){function t(n){this._instantiationService=n,this.templateId=t.id}t.prototype.renderTemplate=function(t){return this._instantiationService.createInstance(o3,t)};t.prototype.renderElement=function(t,n,i){i.set(t.element,mT(t.filterData))};t.prototype.disposeTemplate=function(t){t.dispose()};return t}();s3.id="FileReferencesRenderer",s3=Y4=X4([t3(0,Jh)],s3);var u3=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.label=i._register(new GK(n));return i}n.prototype.set=function(t,n){var i;var r=(i=t.parent.getPreview(t))===null||i===void 0?void 0:i.preview(t.range);if(r&&r.value){var e=r.value,o=r.highlight;n&&!MT.isDefault(n)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,mT(n))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[o]))}else this.label.set("".concat(NO(t.uri),":").concat(t.range.startLineNumber+1,":").concat(t.range.startColumn+1))};return n}(ci);var a3=function(){function t(){this.templateId=t.id}t.prototype.renderTemplate=function(t){return new u3(t)};t.prototype.renderElement=function(t,n,i){i.set(t.element,t.filterData)};t.prototype.disposeTemplate=function(t){t.dispose()};return t}();a3.id="OneReferenceRenderer";var h3=function(){function t(){}t.prototype.getWidgetAriaLabel=function(){return ht(0,"References")};t.prototype.getAriaLabel=function(t){return t.ariaMessage};return t}();var c3=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},f3=function(t,n){return function(i,r){n(i,r,t)}};var l3=function(){function t(t,n){var i=this;this._editor=t,this._model=n,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new hi,this._callOnModelChange=new hi,this._callOnDispose.add(this._editor.onDidChangeModel((function(){return i._onModelChanged()}))),this._onModelChanged()}t.prototype.dispose=function(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()};t.prototype._onModelChanged=function(){this._callOnModelChange.clear();var t=this._editor.getModel();if(t){for(var n=0,i=this._model.references;n<i.length;n++){var r=i[n];if(r.uri.toString()===t.uri.toString())return void this._addDecorations(r.parent)}}};t.prototype._addDecorations=function(n){var i=this;if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((function(){return i._onDecorationChanged()})));var r=[],e=[];for(var o=0,s=n.children.length;o<s;o++){var u=n.children[o];this._decorationIgnoreSet.has(u.id)||u.uri.toString()===this._editor.getModel().uri.toString()&&(r.push({range:u.range,options:t.DecorationOptions}),e.push(o))}this._editor.changeDecorations((function(t){var o=t.deltaDecorations([],r);for(var s=0;s<o.length;s++)i._decorations.set(o[s],n.children[e[s]])}))};t.prototype._onDecorationChanged=function(){var t=[],n=this._editor.getModel();if(n){for(var i=0,r=this._decorations;i<r.length;i++){var e=r[i],o=e[0],s=e[1];var u=n.getDecorationRange(o);if(!u)continue;var a=!1;Ir.equalsRange(u,s.range)||((Ir.spansMultipleLines(u)||s.range.endColumn-s.range.startColumn!==u.endColumn-u.startColumn)&&(a=!0),a?(this._decorationIgnoreSet.add(s.id),t.push(o)):s.range=u)}for(var o=0,s=t.length;o<s;o++)this._decorations.delete(t[o]);this._editor.removeDecorations(t)}};t.prototype.removeDecorations=function(){this._editor.removeDecorations(__spreadArray([],this._decorations.keys(),true)),this._decorations.clear()};return t}();l3.DecorationOptions=PM.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});var v3=function(){function t(){this.ratio=.7,this.heightInLines=18}t.fromJSON=function(t){var n,i;try{var r=JSON.parse(t);n=r.ratio,i=r.heightInLines}catch(t){}return{ratio:n||.7,heightInLines:i||18}};return t}();var d3=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}return n}(HK);var g3=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c,f,l){var v=this;v=t.call(this,n,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},s)||this,v._defaultTreeKeyboardSupport=i,v.layoutData=r,v._textModelResolverService=o,v._instantiationService=s,v._peekViewService=u,v._uriLabel=a,v._undoRedoService=h,v._keybindingService=c,v._languageService=f,v._languageConfigurationService=l,v._disposeOnNewModel=new hi,v._callOnDispose=new hi,v._onDidSelectReference=new ki,v.onDidSelectReference=v._onDidSelectReference.event,v._dim=new Fa(0,0),v._applyTheme(e.getColorTheme()),v._callOnDispose.add(e.onDidColorThemeChange(v._applyTheme.bind(v))),v._peekViewService.addExclusiveWidget(n,v),v.create();return v}n.prototype.dispose=function(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),si(this._preview),si(this._previewNotAvailableMessage),si(this._tree),si(this._previewModelReference),this._splitView.dispose(),t.prototype.dispose.call(this)};n.prototype._applyTheme=function(t){var n=t.getColor(V4)||Ig.transparent;this.style({arrowColor:n,frameColor:n,headerBackgroundColor:t.getColor(z4)||Ig.transparent,primaryHeadingColor:t.getColor(U4),secondaryHeadingColor:t.getColor(K4)})};n.prototype.show=function(n){t.prototype.show.call(this,n,this.layoutData.heightInLines||18)};n.prototype.focusOnReferenceTree=function(){this._tree.domFocus()};n.prototype.focusOnPreviewEditor=function(){this._preview.focus()};n.prototype.isPreviewEditorFocused=function(){return this._preview.hasTextFocus()};n.prototype._onTitleClick=function(t){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"title"})};n.prototype._fillBody=function(t){var n=this;this.setCssClass("reference-zone-widget"),this._messageContainer=vh(t,bh("div.messages")),_h(this._messageContainer),this._splitView=new fz(t,{orientation:1}),this._previewContainer=vh(t,bh("div.preview.inline")),this._preview=this._instantiationService.createInstance(O4,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor),_h(this._previewContainer),this._previewNotAvailableMessage=new EM(ht(0,"no preview available"),dv,EM.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=vh(t,bh("div.ref-tree.inline"));var i={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new h3,keyboardNavigationLabelProvider:this._instantiationService.createInstance(r3),identityProvider:new e3,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:q4}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(ya(this._treeContainer,"keydown",(function(t){t.equals(9)&&(n._keybindingService.dispatchEvent(t,t.target),t.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(d3,"ReferencesWidget",this._treeContainer,new i3,[this._instantiationService.createInstance(s3),this._instantiationService.createInstance(a3)],this._instantiationService.createInstance(n3),i),this._splitView.addView({onDidChange:wi.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:function(t){n._preview.layout({height:n._dim.height,width:t})}},cz.Distribute),this._splitView.addView({onDidChange:wi.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:function(t){n._treeContainer.style.height="".concat(n._dim.height,"px"),n._treeContainer.style.width="".concat(t,"px"),n._tree.layout(n._dim.height,t)}},cz.Distribute),this._disposables.add(this._splitView.onDidSashChange((function(){n._dim.width&&(n.layoutData.ratio=n._splitView.getViewSize(0)/n._dim.width)}),void 0));var r=function(t,i){t instanceof $4&&(i==="show"&&n._revealReference(t,!1),n._onDidSelectReference.fire({element:t,kind:i,source:"tree"}))};this._tree.onDidOpen((function(t){t.sideBySide?r(t.element,"side"):t.editorOptions.pinned?r(t.element,"goto"):r(t.element,"show")})),_h(this._treeContainer)};n.prototype._onWidth=function(t){this._dim&&this._doLayoutBody(this._dim.height,t)};n.prototype._doLayoutBody=function(n,i){t.prototype._doLayoutBody.call(this,n,i),this._dim=new Fa(i,n),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(i),this._splitView.resizeView(0,i*this.layoutData.ratio)};n.prototype.setSelection=function(t){var n=this;return this._revealReference(t,!0).then((function(){n._model&&(n._tree.setSelection([t]),n._tree.setFocus([t]))}))};n.prototype.setModel=function(t){return this._disposeOnNewModel.clear(),this._model=t,this._model?this._onNewModel():Promise.resolve()};n.prototype._onNewModel=function(){var t=this;return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=ht(0,"No results"),yh(this._messageContainer),Promise.resolve(void 0)):(_h(this._messageContainer),this._decorationsManager=new l3(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((function(n){return t._tree.rerender(n)}))),this._disposeOnNewModel.add(this._preview.onMouseDown((function(n){var i=n.event,r=n.target;if(i.detail!==2)return;var e=t._getFocusedReference();e&&t._onDidSelectReference.fire({element:{uri:e.uri,range:r.range},kind:i.ctrlKey||i.metaKey||i.altKey?"side":"open",source:"editor"})}))),this.container.classList.add("results-loaded"),yh(this._treeContainer),yh(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)};n.prototype._getFocusedReference=function(){var t=this._tree.getFocus()[0];return t instanceof $4?t:t instanceof Z4&&t.children.length>0?t.children[0]:void 0};n.prototype.revealReference=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,this._revealReference(t,!1)];case 1:n.sent(),this._onDidSelectReference.fire({element:t,kind:"goto",source:"tree"});return[2]}}))}))};n.prototype._revealReference=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:if(this._revealedReference===t)return[2];this._revealedReference=t,t.uri.scheme!==Uu.inMemory?this.setTitle(BO(t.uri),this._uriLabel.getUriLabel(WO(t.uri))):this.setTitle(ht(0,"References"));i=this._textModelResolverService.createModelReference(t.uri);r=this._tree.getInput()===t.parent;if(r)return[3,2];n&&this._tree.reveal(t.parent);return[4,this._tree.expand(t.parent)];case 1:r=a.sent();a.label=2;case 2:r,this._tree.reveal(t);return[4,i];case 3:e=a.sent();if(!this._model)return[2,void e.dispose()];si(this._previewModelReference);o=e.object;if(o){s=this._preview.getModel()===o.textEditorModel?0:1,u=Ir.lift(t.range).collapseToStart();this._previewModelReference=e,this._preview.setModel(o.textEditorModel),this._preview.setSelection(u),this._preview.revealRangeInCenter(u,s)}else this._preview.setModel(this._previewNotAvailableMessage),e.dispose();return[2]}}))}))};return n}(H4);g3=c3([f3(3,zk),f3(4,Xh),f3(5,Jh),f3(6,B4),f3(7,RB),f3(8,mM),f3(9,Yx),f3(10,Zl),f3(11,xv)],g3);var p3,w3=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},m3=function(t,n){return function(i,r){n(i,r,t)}};var b3=new qc("referenceSearchVisible",!1,ht(0,"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));var y3=p3=function(){function t(t,n,i,r,e,o,s,u){this._defaultTreeKeyboardSupport=t,this._editor=n,this._editorService=r,this._notificationService=e,this._instantiationService=o,this._storageService=s,this._configurationService=u,this._disposables=new hi,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=b3.bindTo(i)}t.get=function(t){return t.getContribution(p3.ID)};t.prototype.dispose=function(){var t,n;this._referenceSearchVisible.reset(),this._disposables.dispose(),(t=this._widget)===null||t===void 0||t.dispose(),(n=this._model)===null||n===void 0||n.dispose(),this._widget=void 0,this._model=void 0};t.prototype.toggleWidget=function(t,n,i){var r=this;var e;if(this._widget&&(e=this._widget.position),this.closeWidget(),e&&t.containsPosition(e))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){r.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((function(){r._ignoreModelChangeEvent||r.closeWidget()})));var o="peekViewLayout",s=v3.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(g3,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(ht(0,"Loading...")),this._widget.show(t),this._disposables.add(this._widget.onDidClose((function(){n.cancel(),r._widget&&(r._storageService.store(o,JSON.stringify(r._widget.layoutData),0,1),r._widget=void 0),r.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((function(t){var n=t.element,e=t.kind;if(n)switch(e){case"open":t.source==="editor"&&r._configurationService.getValue("editor.stablePeek")||r.openReference(n,!1,!1);break;case"side":r.openReference(n,!0,!1);break;case"goto":i?r._gotoReference(n,!0):r.openReference(n,!1,!0)}})));var u=++this._requestIdPool;n.then((function(n){var i;if(u===r._requestIdPool&&r._widget)return(i=r._model)===null||i===void 0||i.dispose(),r._model=n,r._widget.setModel(r._model).then((function(){if(r._widget&&r._model&&r._editor.hasModel()){r._model.isEmpty?r._widget.setMetaTitle(""):r._widget.setMetaTitle(ht(0,"{0} ({1})",r._model.title,r._model.references.length));var n=r._editor.getModel().uri,i=new Tr(t.startLineNumber,t.startColumn),e=r._model.nearestReference(n,i);if(e)return r._widget.setSelection(e).then((function(){r._widget&&r._editor.getOption(87)==="editor"&&r._widget.focusOnPreviewEditor()}))}}));n.dispose()}),(function(t){r._notificationService.error(t)}))};t.prototype.changeFocusBetweenPreviewAndReferences=function(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())};t.prototype.goToNextOrPreviousReference=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:if(!this._editor.hasModel()||!this._model||!this._widget)return[2];n=this._widget.position;if(!n)return[2];i=this._model.nearestReference(this._editor.getModel().uri,n);if(!i)return[2];r=this._model.nextOrPreviousReference(i,t),e=this._editor.hasTextFocus(),o=this._widget.isPreviewEditorFocused();return[4,this._widget.setSelection(r)];case 1:s.sent();return[4,this._gotoReference(r,!1)];case 2:s.sent(),e?this._editor.focus():this._widget&&o&&this._widget.focusOnPreviewEditor();return[2]}}))}))};t.prototype.revealReference=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:n=this._editor.hasModel()&&this._model&&this._widget;if(!n)return[3,2];return[4,this._widget.revealReference(t)];case 1:n=i.sent();i.label=2;case 2:n;return[2]}}))}))};t.prototype.closeWidget=function(t){if(t===void 0){t=!0}var n,i;(n=this._widget)===null||n===void 0||n.dispose(),(i=this._model)===null||i===void 0||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,t&&this._editor.focus(),this._requestIdPool+=1};t.prototype._gotoReference=function(t,n){var i=this;var r;(r=this._widget)===null||r===void 0||r.hide(),this._ignoreModelChangeEvent=!0;var e=Ir.lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:e,selectionSource:"code.jump",pinned:n}},this._editor).then((function(t){var n;if(i._ignoreModelChangeEvent=!1,t&&i._widget)if(i._editor===t)i._widget.show(e),i._widget.focusOnReferenceTree();else{var r=p3.get(t),o=i._model.clone();i.closeWidget(),t.focus(),r==null||r.toggleWidget(e,Ss((function(t){return Promise.resolve(o)})),(n=i._peekMode)!==null&&n!==void 0&&n)}else i.closeWidget()}),(function(t){i._ignoreModelChangeEvent=!1,Gn(t)}))};t.prototype.openReference=function(t,n,i){n||this.closeWidget();var r=t.uri,e=t.range;this._editorService.openCodeEditor({resource:r,options:{selection:e,selectionSource:"code.jump",pinned:i}},this._editor,n)};return t}();function _3(t,n){var i=function(t){var n=t.get(Qh).getFocusedCodeEditor();return n instanceof O4?n.getParentEditor():n}(t);if(!i)return;var r=y3.get(i);r&&n(r)}y3.ID="editor.contrib.referencesController",y3=p3=w3([m3(2,Gc),m3(3,Qh),m3(4,EL),m3(5,Jh),m3(6,_W),m3(7,Kl)],y3),uf.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:Ui(2089,60),when:Dc.or(b3,N4.inPeekEditor),handler:function(t){_3(t,(function(t){t.changeFocusBetweenPreviewAndReferences()}))}}),uf.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:Dc.or(b3,N4.inPeekEditor),handler:function(t){_3(t,(function(t){t.goToNextOrPreviousReference(!0)}))}}),uf.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:Dc.or(b3,N4.inPeekEditor),handler:function(t){_3(t,(function(t){t.goToNextOrPreviousReference(!1)}))}}),hc.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),hc.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),hc.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),hc.registerCommand("closeReferenceSearch",(function(t){return _3(t,(function(t){return t.closeWidget()}))})),uf.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:Dc.and(N4.inPeekEditor,Dc.not("config.editor.stablePeek"))}),uf.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:Dc.and(b3,Dc.not("config.editor.stablePeek"),Dc.or($C.editorTextFocus,zU.negate()))}),uf.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:Dc.and(b3,ZU,iK.negate(),eK.negate()),handler:function(t){var n;var i=(n=t.get(VU).lastFocusedList)===null||n===void 0?void 0:n.getFocus();Array.isArray(i)&&i[0]instanceof $4&&_3(t,(function(t){return t.revealReference(i[0])}))}}),uf.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:Dc.and(b3,ZU,iK.negate(),eK.negate()),handler:function(t){var n;var i=(n=t.get(VU).lastFocusedList)===null||n===void 0?void 0:n.getFocus();Array.isArray(i)&&i[0]instanceof $4&&_3(t,(function(t){return t.openReference(i[0],!0,!0)}))}}),hc.registerCommand("openReference",(function(t){var n;var i=(n=t.get(VU).lastFocusedList)===null||n===void 0?void 0:n.getFocus();Array.isArray(i)&&i[0]instanceof $4&&_3(t,(function(t){return t.openReference(i[0],!1,!0)}))}));var k3=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},x3=function(t,n){return function(i,r){n(i,r,t)}};var C3=new qc("hasSymbols",!1,ht(0,"Whether there are symbol locations that can be navigated via keyboard-only.")),S3=Zh("ISymbolNavigationService");var D3=function(){function t(t,n,i,r){this._editorService=n,this._notificationService=i,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=C3.bindTo(t)}t.prototype.reset=function(){var t,n;this._ctxHasSymbols.reset(),(t=this._currentState)===null||t===void 0||t.dispose(),(n=this._currentMessage)===null||n===void 0||n.dispose(),this._currentModel=void 0,this._currentIdx=-1};t.prototype.put=function(t){var n=this;var i=t.parent.parent;if(i.references.length<=1)return void this.reset();this._currentModel=i,this._currentIdx=i.references.indexOf(t),this._ctxHasSymbols.set(!0),this._showMessage();var r=new A3(this._editorService),e=r.onDidChange((function(t){if(n._ignoreEditorChange)return;var r=n._editorService.getActiveCodeEditor();if(!r)return;var e=r.getModel(),o=r.getPosition();if(!e||!o)return;var s=!1,u=!1;for(var a=0,h=i.references;a<h.length;a++){var c=h[a];if(IO(c.uri,e.uri))s=!0,u=u||Ir.containsPosition(c.range,o);else if(s)break}s&&u||n.reset()}));this._currentState=ui(r,e)};t.prototype.revealNext=function(t){var n=this;if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;var i=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:i.uri,options:{selection:Ir.collapseToStart(i.range),selectionRevealType:3}},t).finally((function(){n._ignoreEditorChange=!1}))};t.prototype._showMessage=function(){var t;(t=this._currentMessage)===null||t===void 0||t.dispose();var n=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=n?ht(0,"Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,n.getLabel()):ht(0,"Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)};return t}();D3=k3([x3(0,Gc),x3(1,Qh),x3(2,EL),x3(3,Yx)],D3),Xl(S3,D3,1),If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.gotoNextSymbolFromResult",precondition:C3,kbOpts:{weight:100,primary:70}})||this}n.prototype.runEditorCommand=function(t,n){return t.get(S3).revealNext(n)};return n}(Ff))),uf.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:C3,primary:9,handler:function(t){t.get(S3).reset()}});var A3=function(){function t(t){this._listener=new Map,this._disposables=new hi,this._onDidChange=new ki,this.onDidChange=this._onDidChange.event,this._disposables.add(t.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(t.onCodeEditorAdd(this._onDidAddEditor,this)),t.listCodeEditors().forEach(this._onDidAddEditor,this)}t.prototype.dispose=function(){this._disposables.dispose(),this._onDidChange.dispose(),si(this._listener.values())};t.prototype._onDidAddEditor=function(t){var n=this;this._listener.set(t,ui(t.onDidChangeCursorPosition((function(i){return n._onDidChange.fire({editor:t})})),t.onDidChangeModelContent((function(i){return n._onDidChange.fire({editor:t})}))))};t.prototype._onDidRemoveEditor=function(t){var n;(n=this._listener.get(t))===null||n===void 0||n.dispose(),this._listener.delete(t)};return t}();function O3(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o;return __generator(this,(function(s){switch(s.label){case 0:e=i.ordered(t).map((function(i){return Promise.resolve(r(i,t,n)).then(void 0,(function(t){$n(t)}))}));o=b;return[4,Promise.all(e)];case 1:return[2,o.apply(void 0,[s.sent().flat()])]}}))}))}function E3(t,n,i,r){return O3(n,i,t,(function(t,n,i){return t.provideDefinition(n,i,r)}))}function M3(t,n,i,r){return O3(n,i,t,(function(t,n,i){return t.provideDeclaration(n,i,r)}))}function F3(t,n,i,r){return O3(n,i,t,(function(t,n,i){return t.provideImplementation(n,i,r)}))}function L3(t,n,i,r){return O3(n,i,t,(function(t,n,i){return t.provideTypeDefinition(n,i,r)}))}function j3(t,n,i,r,e){var o=this;return O3(n,i,t,(function(t,n,i){return __awaiter(o,void 0,void 0,(function(){var o,s;return __generator(this,(function(u){switch(u.label){case 0:return[4,t.provideReferences(n,i,{includeDeclaration:!0},e)];case 1:o=u.sent();if(!r||!o||o.length!==2)return[2,o];return[4,t.provideReferences(n,i,{includeDeclaration:!1},e)];case 2:s=u.sent();return[2,s&&s.length===1?s:o]}}))}))}))}function R3(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r;return __generator(this,(function(e){switch(e.label){case 0:return[4,t()];case 1:n=e.sent(),i=new Q4(n,""),r=i.references.map((function(t){return t.link}));return[2,(i.dispose(),r)]}}))}))}var T3,I3,B3,N3,P3,W3,H3,z3;A3=k3([x3(0,Qh)],A3),Tf("_executeDefinitionProvider",(function(t,n,i){var r=E3(t.get(tp).definitionProvider,n,i,Fi.None);return R3((function(){return r}))})),Tf("_executeTypeDefinitionProvider",(function(t,n,i){var r=L3(t.get(tp).typeDefinitionProvider,n,i,Fi.None);return R3((function(){return r}))})),Tf("_executeDeclarationProvider",(function(t,n,i){var r=M3(t.get(tp).declarationProvider,n,i,Fi.None);return R3((function(){return r}))})),Tf("_executeReferenceProvider",(function(t,n,i){var r=j3(t.get(tp).referenceProvider,n,i,!1,Fi.None);return R3((function(){return r}))})),Tf("_executeImplementationProvider",(function(t,n,i){var r=F3(t.get(tp).implementationProvider,n,i,Fi.None);return R3((function(){return r}))})),pf.appendMenuItem(vf.EditorContext,{submenu:vf.EditorContextPeek,title:ht(0,"Peek"),group:"navigation",order:100});var U3=function(){function t(t,n){this.model=t,this.position=n}t.is=function(n){return!(!n||typeof n!="object")&&(n instanceof t||!(!Tr.isIPosition(n.position)||!n.model))};return t}();var K3=function(t){__extends(n,t);function n(i,r){var e=this;e=t.call(this,n._patchConfig(r))||this,e.configuration=i,n._allSymbolNavigationCommands.set(r.id,e);return e}n.all=function(){return n._allSymbolNavigationCommands.values()};n._patchConfig=function(t){var n=__assign(__assign({},t),{f1:!0});if(n.menu)for(var i=0,r=Yt.wrap(n.menu);i<r.length;i++){var e=r[i];e.id!==vf.EditorContext&&e.id!==vf.EditorContextPeek||(e.when=Dc.and(t.precondition,e.when))}return n};n.prototype.runEditorCommand=function(t,i,r,e){var o=this;if(!i.hasModel())return Promise.resolve(void 0);var s=t.get(EL),u=t.get(Qh),a=t.get(BB),h=t.get(S3),c=t.get(tp),f=t.get(Jh),l=i.getModel(),v=i.getPosition(),d=U3.is(r)?r:new U3(l,v),g=new YQ(i,5),p=Ds(this._getLocationModel(c,d.model,d.position,g.token),g.token).then((function(t){return __awaiter(o,void 0,void 0,(function(){var o,s,a,c,a;var d=this;return __generator(this,(function(p){if(!t||g.token.isCancellationRequested)return[2];if(yw(t.ariaMessage),t.referenceAt(l.uri,v)){a=this._getAlternativeCommand(i);!n._activeAlternativeCommands.has(a)&&n._allSymbolNavigationCommands.has(a)&&(s=n._allSymbolNavigationCommands.get(a))}c=t.references.length;if(c===0){if(!this.configuration.muteMessage){a=l.getWordAtPosition(v);(o=q0.get(i))===null||o===void 0||o.showMessage(this._getNoResultFoundMessage(a),v)}}else{if(c!==1||!s)return[2,this._onResult(u,h,i,t,e)];n._activeAlternativeCommands.add(this.desc.id),f.invokeFunction((function(t){return s.runEditorCommand(t,i,r,e).finally((function(){n._activeAlternativeCommands.delete(d.desc.id)}))}))}return[2]}))}))}),(function(t){s.error(t)})).finally((function(){g.dispose()}));return a.showWhile(p,250),p};n.prototype._onResult=function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a;return __generator(this,(function(h){switch(h.label){case 0:o=this._getGoToPreference(i);if(!(i instanceof O4||!(this.configuration.openInPeek||o==="peek"&&r.references.length>1)))return[3,2];s=r.firstReference(),u=r.references.length>1&&o==="gotoAndPeek";return[4,this._openReference(i,t,s,this.configuration.openToSide,!u)];case 1:a=h.sent();u&&a?this._openInPeek(a,r,e):r.dispose(),o==="goto"&&n.put(s);return[3,3];case 2:this._openInPeek(i,r,e);h.label=3;case 3:return[2]}}))}))};n.prototype._openReference=function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h;return __generator(this,(function(c){switch(c.label){case 0:if((s=i)&&Cr.isUri(s.uri)&&Ir.isIRange(s.range)&&(Ir.isIRange(s.originSelectionRange)||Ir.isIRange(s.targetSelectionRange))&&(o=i.targetSelectionRange),o||(o=i.range),!o)return[2];return[4,n.openCodeEditor({resource:i.uri,options:{selection:Ir.collapseToStart(o),selectionRevealType:3,selectionSource:"code.jump"}},t,r)];case 1:u=c.sent();if(u){if(e){a=u.getModel(),h=u.createDecorationsCollection([{range:o,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout((function(){u.getModel()===a&&h.clear()}),350)}return[2,u]}return[2]}}))}))};n.prototype._openInPeek=function(t,n,i){var r=y3.get(t);r&&t.hasModel()?r.toggleWidget(i!==null&&i!==void 0?i:t.getSelection(),Ss((function(t){return Promise.resolve(n)})),this.configuration.openInPeek):n.dispose()};return n}(Rf);K3._allSymbolNavigationCommands=new Map,K3._activeAlternativeCommands=new Set;var V3=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._getLocationModel=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(o){switch(o.label){case 0:e=Q4.bind;return[4,E3(t.definitionProvider,n,i,r)];case 1:return[2,new(e.apply(Q4,[void 0,o.sent(),ht(0,"Definitions")]))]}}))}))};n.prototype._getNoResultFoundMessage=function(t){return t&&t.word?ht(0,"No definition found for '{0}'",t.word):ht(0,"No definition found")};n.prototype._getAlternativeCommand=function(t){return t.getOption(58).alternativeDefinitionCommand};n.prototype._getGoToPreference=function(t){return t.getOption(58).multipleDefinitions};return n}(K3);yf(((T3=function(t){__extends(n,t);function n(){var n=this;n=t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:T3.id,title:__assign(__assign({},ct(0,"Go to Definition")),{mnemonicTitle:ht(0,"Go to &&Definition")}),precondition:$C.hasDefinitionProvider,keybinding:[{when:$C.editorTextFocus,primary:70,weight:100},{when:Dc.and($C.editorTextFocus,WU),primary:2118,weight:100}],menu:[{id:vf.EditorContext,group:"navigation",order:1.1},{id:vf.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]})||this,hc.registerCommandAlias("editor.action.goToDeclaration",T3.id);return n}return n}(V3)).id="editor.action.revealDefinition",T3)),yf(((I3=function(t){__extends(n,t);function n(){var i=this;i=t.call(this,{openToSide:!0,openInPeek:!1,muteMessage:!1},{id:n.id,title:ct(0,"Open Definition to the Side"),precondition:Dc.and($C.hasDefinitionProvider,$C.isInEmbeddedEditor.toNegated()),keybinding:[{when:$C.editorTextFocus,primary:Ui(2089,70),weight:100},{when:Dc.and($C.editorTextFocus,WU),primary:Ui(2089,2118),weight:100}]})||this,hc.registerCommandAlias("editor.action.openDeclarationToTheSide",n.id);return i}return n}(V3)).id="editor.action.revealDefinitionAside",I3)),yf(((B3=function(t){__extends(n,t);function n(){var i=this;i=t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.id,title:ct(0,"Peek Definition"),precondition:Dc.and($C.hasDefinitionProvider,N4.notInPeekEditor,$C.isInEmbeddedEditor.toNegated()),keybinding:{when:$C.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:vf.EditorContextPeek,group:"peek",order:2}})||this,hc.registerCommandAlias("editor.action.previewDeclaration",n.id);return i}return n}(V3)).id="editor.action.peekDefinition",B3));var q3=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._getLocationModel=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(o){switch(o.label){case 0:e=Q4.bind;return[4,M3(t.declarationProvider,n,i,r)];case 1:return[2,new(e.apply(Q4,[void 0,o.sent(),ht(0,"Declarations")]))]}}))}))};n.prototype._getNoResultFoundMessage=function(t){return t&&t.word?ht(0,"No declaration found for '{0}'",t.word):ht(0,"No declaration found")};n.prototype._getAlternativeCommand=function(t){return t.getOption(58).alternativeDeclarationCommand};n.prototype._getGoToPreference=function(t){return t.getOption(58).multipleDeclarations};return n}(K3);yf(((N3=function(t){__extends(n,t);function n(){return t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:N3.id,title:__assign(__assign({},ct(0,"Go to Declaration")),{mnemonicTitle:ht(0,"Go to &&Declaration")}),precondition:Dc.and($C.hasDeclarationProvider,$C.isInEmbeddedEditor.toNegated()),menu:[{id:vf.EditorContext,group:"navigation",order:1.3},{id:vf.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})||this}n.prototype._getNoResultFoundMessage=function(t){return t&&t.word?ht(0,"No declaration found for '{0}'",t.word):ht(0,"No declaration found")};return n}(q3)).id="editor.action.revealDeclaration",N3)),yf(function(t){__extends(n,t);function n(){return t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:ct(0,"Peek Declaration"),precondition:Dc.and($C.hasDeclarationProvider,N4.notInPeekEditor,$C.isInEmbeddedEditor.toNegated()),menu:{id:vf.EditorContextPeek,group:"peek",order:3}})||this}return n}(q3));var G3=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._getLocationModel=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(o){switch(o.label){case 0:e=Q4.bind;return[4,L3(t.typeDefinitionProvider,n,i,r)];case 1:return[2,new(e.apply(Q4,[void 0,o.sent(),ht(0,"Type Definitions")]))]}}))}))};n.prototype._getNoResultFoundMessage=function(t){return t&&t.word?ht(0,"No type definition found for '{0}'",t.word):ht(0,"No type definition found")};n.prototype._getAlternativeCommand=function(t){return t.getOption(58).alternativeTypeDefinitionCommand};n.prototype._getGoToPreference=function(t){return t.getOption(58).multipleTypeDefinitions};return n}(K3);yf(((P3=function(t){__extends(n,t);function n(){return t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:P3.ID,title:__assign(__assign({},ct(0,"Go to Type Definition")),{mnemonicTitle:ht(0,"Go to &&Type Definition")}),precondition:$C.hasTypeDefinitionProvider,keybinding:{when:$C.editorTextFocus,primary:0,weight:100},menu:[{id:vf.EditorContext,group:"navigation",order:1.4},{id:vf.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})||this}return n}(G3)).ID="editor.action.goToTypeDefinition",P3)),yf(((W3=function(t){__extends(n,t);function n(){return t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,title:ct(0,"Peek Type Definition"),precondition:Dc.and($C.hasTypeDefinitionProvider,N4.notInPeekEditor,$C.isInEmbeddedEditor.toNegated()),menu:{id:vf.EditorContextPeek,group:"peek",order:4}})||this}return n}(G3)).ID="editor.action.peekTypeDefinition",W3));var $3=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._getLocationModel=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(o){switch(o.label){case 0:e=Q4.bind;return[4,F3(t.implementationProvider,n,i,r)];case 1:return[2,new(e.apply(Q4,[void 0,o.sent(),ht(0,"Implementations")]))]}}))}))};n.prototype._getNoResultFoundMessage=function(t){return t&&t.word?ht(0,"No implementation found for '{0}'",t.word):ht(0,"No implementation found")};n.prototype._getAlternativeCommand=function(t){return t.getOption(58).alternativeImplementationCommand};n.prototype._getGoToPreference=function(t){return t.getOption(58).multipleImplementations};return n}(K3);yf(((H3=function(t){__extends(n,t);function n(){return t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:H3.ID,title:__assign(__assign({},ct(0,"Go to Implementations")),{mnemonicTitle:ht(0,"Go to &&Implementations")}),precondition:$C.hasImplementationProvider,keybinding:{when:$C.editorTextFocus,primary:2118,weight:100},menu:[{id:vf.EditorContext,group:"navigation",order:1.45},{id:vf.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})||this}return n}($3)).ID="editor.action.goToImplementation",H3)),yf(((z3=function(t){__extends(n,t);function n(){return t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,title:ct(0,"Peek Implementations"),precondition:Dc.and($C.hasImplementationProvider,N4.notInPeekEditor,$C.isInEmbeddedEditor.toNegated()),keybinding:{when:$C.editorTextFocus,primary:3142,weight:100},menu:{id:vf.EditorContextPeek,group:"peek",order:5}})||this}return n}($3)).ID="editor.action.peekImplementation",z3));var J3=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._getNoResultFoundMessage=function(t){return t?ht(0,"No references found for '{0}'",t.word):ht(0,"No references found")};n.prototype._getAlternativeCommand=function(t){return t.getOption(58).alternativeReferenceCommand};n.prototype._getGoToPreference=function(t){return t.getOption(58).multipleReferences};return n}(K3);yf(function(t){__extends(n,t);function n(){return t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:__assign(__assign({},ct(0,"Go to References")),{mnemonicTitle:ht(0,"Go to &&References")}),precondition:Dc.and($C.hasReferenceProvider,N4.notInPeekEditor,$C.isInEmbeddedEditor.toNegated()),keybinding:{when:$C.editorTextFocus,primary:1094,weight:100},menu:[{id:vf.EditorContext,group:"navigation",order:1.45},{id:vf.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})||this}n.prototype._getLocationModel=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(o){switch(o.label){case 0:e=Q4.bind;return[4,j3(t.referenceProvider,n,i,!0,r)];case 1:return[2,new(e.apply(Q4,[void 0,o.sent(),ht(0,"References")]))]}}))}))};return n}(J3)),yf(function(t){__extends(n,t);function n(){return t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:ct(0,"Peek References"),precondition:Dc.and($C.hasReferenceProvider,N4.notInPeekEditor,$C.isInEmbeddedEditor.toNegated()),menu:{id:vf.EditorContextPeek,group:"peek",order:6}})||this}n.prototype._getLocationModel=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(o){switch(o.label){case 0:e=Q4.bind;return[4,j3(t.referenceProvider,n,i,!1,r)];case 1:return[2,new(e.apply(Q4,[void 0,o.sent(),ht(0,"References")]))]}}))}))};return n}(J3));var Z3=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n,{id:"editor.action.goToLocation",title:ct(0,"Go to Any Symbol"),precondition:Dc.and(N4.notInPeekEditor,$C.isInEmbeddedEditor.toNegated())})||this,e._references=i,e._gotoMultipleBehaviour=r;return e}n.prototype._getLocationModel=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,new Q4(this._references,ht(0,"Locations"))]}))}))};n.prototype._getNoResultFoundMessage=function(t){return t&&ht(0,"No results for '{0}'",t.word)||""};n.prototype._getGoToPreference=function(t){var n;return(n=this._gotoMultipleBehaviour)!==null&&n!==void 0?n:t.getOption(58).multipleReferences};n.prototype._getAlternativeCommand=function(){return""};return n}(K3);hc.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Cr},{name:"position",description:"The position at which to start",constraint:Tr.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:function(t,n,i,r,e,o,s){return __awaiter(a,void 0,void 0,(function(){var u,a;return __generator(this,(function(h){switch(h.label){case 0:Z(Cr.isUri(n)),Z(Tr.isIPosition(i)),Z(Array.isArray(r)),Z(e===void 0||typeof e=="string"),Z(s===void 0||typeof s=="boolean");u=t.get(Qh);return[4,u.openCodeEditor({resource:n},u.getFocusedCodeEditor())];case 1:a=h.sent();if(tY(a))return[2,(a.setPosition(i),a.revealPositionInCenterIfOutsideViewport(i,0),a.invokeWithinContext((function(t){var n=new(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._getNoResultFoundMessage=function(n){return o||t.prototype._getNoResultFoundMessage.call(this,n)};return n}(Z3))({muteMessage:!o,openInPeek:!!s,openToSide:!1},r,e);t.get(Jh).invokeFunction(n.run.bind(n),a)})))];return[2]}}))}))}}),hc.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Cr},{name:"position",description:"The position at which to start",constraint:Tr.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:function(t,n,i,r,e){return __awaiter(a,void 0,void 0,(function(){return __generator(this,(function(o){t.get(ac).executeCommand("editor.action.goToLocations",n,i,r,e,void 0,!0);return[2]}))}))}}),hc.registerCommand({id:"editor.action.findReferences",handler:function(t,n,i){Z(Cr.isUri(n)),Z(Tr.isIPosition(i));var r=t.get(tp),e=t.get(Qh);return e.openCodeEditor({resource:n},e.getFocusedCodeEditor()).then((function(t){if(!tY(t)||!t.hasModel())return;var n=y3.get(t);if(!n)return;var e=Ss((function(n){return j3(r.referenceProvider,t.getModel(),Tr.lift(i),!1,n).then((function(t){return new Q4(t,ht(0,"References"))}))})),o=new Ir(i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(n.toggleWidget(o,e,!1))}))}}),hc.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");var Q3,Y3=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},X3=function(t,n){return function(i,r){n(i,r,t)}};var t5=Q3=function(){function t(t,n,i,r){var e=this;this.textModelResolverService=n,this.languageService=i,this.languageFeaturesService=r,this.toUnhook=new hi,this.toUnhookForKeyboard=new hi,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=t,this.linkDecorations=this.editor.createDecorationsCollection();var o=new S4(t);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown((function(t){var n=t[0],i=t[1];e.startFindDefinitionFromMouse(n,i!==null&&i!==void 0?i:void 0)}))),this.toUnhook.add(o.onExecute((function(t){e.isEnabled(t)&&e.gotoDefinition(t.target.position,t.hasSideBySideModifier).catch((function(t){Gn(t)})).finally((function(){e.removeLinkDecorations()}))}))),this.toUnhook.add(o.onCancel((function(){e.removeLinkDecorations(),e.currentWordAtPosition=null})))}t.get=function(t){return t.getContribution(Q3.ID)};t.prototype.startFindDefinitionFromCursor=function(t){return __awaiter(this,void 0,void 0,(function(){var n=this;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.startFindDefinition(t)];case 1:i.sent(),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((function(){n.currentWordAtPosition=null,n.removeLinkDecorations(),n.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((function(t){t&&(n.currentWordAtPosition=null,n.removeLinkDecorations(),n.toUnhookForKeyboard.clear())})));return[2]}}))}))};t.prototype.startFindDefinitionFromMouse=function(t,n){if(t.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(t,n))return this.currentWordAtPosition=null,void this.removeLinkDecorations();var i=t.target.position;this.startFindDefinition(i)};t.prototype.startFindDefinition=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o,s,u,a,h,c,f;var l=this;return __generator(this,(function(v){switch(v.label){case 0:this.toUnhookForKeyboard.clear();i=t?(n=this.editor.getModel())===null||n===void 0?void 0:n.getWordAtPosition(t):null;if(!i)return[2,(this.currentWordAtPosition=null,void this.removeLinkDecorations())];if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return[2];this.currentWordAtPosition=i;r=new QQ(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=Ss((function(n){return l.findDefinition(t,n)}));v.label=1;case 1:v.trys.push([1,3,,4]);return[4,this.previousPromise];case 2:e=v.sent();return[3,4];case 3:o=v.sent();return[2,void Gn(o)];case 4:if(!e||!e.length||!r.validate(this.editor))return[2,void this.removeLinkDecorations()];s=e[0].originSelectionRange?Ir.lift(e[0].originSelectionRange):new Ir(t.lineNumber,i.startColumn,t.lineNumber,i.endColumn);if(e.length>1){u=s;for(a=0,h=e;a<h.length;a++){c=h[a].originSelectionRange;c&&(u=Ir.plusRange(u,c))}this.addDecoration(u,(new VT).appendText(ht(0,"Click to show {0} definitions.",e.length)))}else{f=e[0];if(!f.uri)return[2];this.textModelResolverService.createModelReference(f.uri).then((function(t){if(!t.object||!t.object.textEditorModel)return void t.dispose();var n=t.object.textEditorModel,i=f.range.startLineNumber;if(i<1||i>n.getLineCount())return void t.dispose();var r=l.getPreviewValue(n,i,f),e=l.languageService.guessLanguageIdByFilepathOrFirstLine(n.uri);l.addDecoration(s,r?(new VT).appendCodeblock(e||"",r):void 0),t.dispose()}))}return[2]}}))}))};t.prototype.getPreviewValue=function(t,n,i){var r=i.range;return r.endLineNumber-r.startLineNumber>=Q3.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(t,n)),this.stripIndentationFromPreviewRange(t,n,r)};t.prototype.stripIndentationFromPreviewRange=function(t,n,i){var r=t.getLineFirstNonWhitespaceColumn(n);for(var e=n+1;e<i.endLineNumber;e++){var o=t.getLineFirstNonWhitespaceColumn(e);r=Math.min(r,o)}return t.getValueInRange(i).replace(new RegExp("^\\s{".concat(r-1,"}"),"gm"),"").trim()};t.prototype.getPreviewRangeBasedOnIndentation=function(t,n){var i=t.getLineFirstNonWhitespaceColumn(n),r=Math.min(t.getLineCount(),n+Q3.MAX_SOURCE_PREVIEW_LINES);var e=n+1;for(;e<r&&i!==t.getLineFirstNonWhitespaceColumn(e);e++);return new Ir(n,1,e+1,1)};t.prototype.addDecoration=function(t,n){var i={range:t,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:n}};this.linkDecorations.set([i])};t.prototype.removeLinkDecorations=function(){this.linkDecorations.clear()};t.prototype.isEnabled=function(t,n){var i;return this.editor.hasModel()&&t.isLeftClick&&t.isNoneOrSingleMouseDown&&t.target.type===6&&!(((i=t.target.detail.injectedText)===null||i===void 0?void 0:i.options)instanceof NM)&&(t.hasTriggerModifier||!!n&&n.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())};t.prototype.findDefinition=function(t,n){var i=this.editor.getModel();return i?E3(this.languageFeaturesService.definitionProvider,i,t,n):Promise.resolve(null)};t.prototype.gotoDefinition=function(t,n){var i=this;return this.editor.setPosition(t),this.editor.invokeWithinContext((function(t){var r=!n&&i.editor.getOption(88)&&!i.isInPeekEditor(t);return new V3({openToSide:n,openInPeek:r,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(t)}))};t.prototype.isInPeekEditor=function(t){var n=t.get(Gc);return N4.inPeekEditor.getValue(n)};t.prototype.dispose=function(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()};return t}();t5.ID="editor.contrib.gotodefinitionatposition",t5.MAX_SOURCE_PREVIEW_LINES=8,t5=Q3=Y3([X3(1,Xh),X3(2,Zl),X3(3,tp)],t5),Pf(t5.ID,t5,2);var n5=function(){function t(t,n,i){this.value=t,this.isComplete=n,this.hasLoadingMessage=i}return t}();var i5=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._editor=n,r._computer=i,r._onResult=r._register(new ki),r.onResult=r._onResult.event,r._firstWaitScheduler=r._register(new Ts((function(){return r._triggerAsyncComputation()}),0)),r._secondWaitScheduler=r._register(new Ts((function(){return r._triggerSyncComputation()}),0)),r._loadingMessageScheduler=r._register(new Ts((function(){return r._triggerLoadingMessage()}),0)),r._state=0,r._asyncIterable=null,r._asyncIterableDone=!1,r._result=[];return r}n.prototype.dispose=function(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),t.prototype.dispose.call(this)};Object.defineProperty(n.prototype,"_hoverTime",{get:function(){return this._editor.getOption(60).delay},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"_firstWaitTime",{get:function(){return this._hoverTime/2},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"_secondWaitTime",{get:function(){return this._hoverTime-this._firstWaitTime},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"_loadingMessageTime",{get:function(){return 3*this._hoverTime},enumerable:false,configurable:true});n.prototype._setState=function(t,n){if(n===void 0){n=!0}this._state=t,n&&this._fireResult()};n.prototype._triggerAsyncComputation=function(){var t=this;this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=function(t){var n=this;var i=new ji,r=t(i.token);return new Us(i,(function(t){return __awaiter(n,void 0,void 0,(function(){var n,e,o,s,u,a,h;var c,f,l,v;return __generator(this,(function(d){switch(d.label){case 0:n=i.token.onCancellationRequested((function(){n.dispose(),i.dispose(),t.reject(new Yn)}));d.label=1;case 1:d.trys.push([1,14,,15]);d.label=2;case 2:d.trys.push([2,7,8,13]);e=true,o=__asyncValues(r);d.label=3;case 3:return[4,o.next()];case 4:if(!(s=d.sent(),c=s.done,!c))return[3,6];v=s.value;e=false;u=v;if(i.token.isCancellationRequested)return[2];t.emitOne(u);d.label=5;case 5:e=true;return[3,3];case 6:return[3,13];case 7:a=d.sent();f={error:a};return[3,13];case 8:d.trys.push([8,,11,12]);if(!(!e&&!c&&(l=o.return)))return[3,10];return[4,l.call(o)];case 9:d.sent();d.label=10;case 10:return[3,12];case 11:if(f)throw f.error;return[7];case 12:return[7];case 13:n.dispose(),i.dispose();return[3,15];case 14:h=d.sent();n.dispose(),i.dispose(),t.reject(h);return[3,15];case 15:return[2]}}))}))}))}((function(n){return t._computer.computeAsync(n)})),function(){return __awaiter(t,void 0,void 0,(function(){var t,n,i,r,e,o;var s,u,a,h;return __generator(this,(function(c){switch(c.label){case 0:c.trys.push([0,13,,14]);c.label=1;case 1:c.trys.push([1,6,7,12]);t=true,n=__asyncValues(this._asyncIterable);c.label=2;case 2:return[4,n.next()];case 3:if(!(i=c.sent(),s=i.done,!s))return[3,5];h=i.value;t=false;r=h;r&&(this._result.push(r),this._fireResult());c.label=4;case 4:t=true;return[3,2];case 5:return[3,12];case 6:e=c.sent();u={error:e};return[3,12];case 7:c.trys.push([7,,10,11]);if(!(!t&&!s&&(a=n.return)))return[3,9];return[4,a.call(n)];case 8:c.sent();c.label=9;case 9:return[3,11];case 10:if(u)throw u.error;return[7];case 11:return[7];case 12:this._asyncIterableDone=!0,this._state!==3&&this._state!==4||this._setState(0);return[3,14];case 13:o=c.sent();Gn(o);return[3,14];case 14:return[2]}}))}))}()):this._asyncIterableDone=!0};n.prototype._triggerSyncComputation=function(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)};n.prototype._triggerLoadingMessage=function(){this._state===3&&this._setState(4)};n.prototype._fireResult=function(){if(this._state===1||this._state===2)return;var t=this._state===0,n=this._state===4;this._onResult.fire(new n5(this._result.slice(0),t,n))};n.prototype.start=function(t){if(t===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}};n.prototype.cancel=function(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)};return n}(ci);var r5=function(){function t(t,n,i,r){this.priority=t,this.range=n,this.initialMousePosX=i,this.initialMousePosY=r,this.type=1}t.prototype.equals=function(t){return t.type===1&&this.range.equalsRange(t.range)};t.prototype.canAdoptVisibleHover=function(t,n){return t.type===1&&n.lineNumber===this.range.startLineNumber};return t}();var e5=function(){function t(t,n,i,r,e,o){this.priority=t,this.owner=n,this.range=i,this.initialMousePosX=r,this.initialMousePosY=e,this.supportsMarkerHover=o,this.type=2}t.prototype.equals=function(t){return t.type===2&&this.owner===t.owner};t.prototype.canAdoptVisibleHover=function(t,n){return t.type===2&&this.owner===t.owner};return t}();var o5=new(function(){function t(){this._participants=[]}t.prototype.register=function(t){this._participants.push(t)};t.prototype.getAll=function(){return this._participants};return t}());var s5=function(){function t(){var t=this;var n;this._onDidWillResize=new ki,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new ki,this.onDidResize=this._onDidResize.event,this._sashListener=new hi,this._size=new Fa(0,0),this._minSize=new Fa(0,0),this._maxSize=new Fa(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new ez(this.domNode,{getVerticalSashLeft:function(){return t._size.width}},{orientation:0}),this._westSash=new ez(this.domNode,{getVerticalSashLeft:function(){return 0}},{orientation:0}),this._northSash=new ez(this.domNode,{getHorizontalSashTop:function(){return 0}},{orientation:1,orthogonalEdge:QH.North}),this._southSash=new ez(this.domNode,{getHorizontalSashTop:function(){return t._size.height}},{orientation:1,orthogonalEdge:QH.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;var i=0,r=0;this._sashListener.add(wi.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)((function(){n===void 0&&(t._onDidWillResize.fire(),n=t._size,i=0,r=0)}))),this._sashListener.add(wi.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)((function(){n!==void 0&&(n=void 0,i=0,r=0,t._onDidResize.fire({dimension:t._size,done:!0}))}))),this._sashListener.add(this._eastSash.onDidChange((function(e){n&&(r=e.currentX-e.startX,t.layout(n.height+i,n.width+r),t._onDidResize.fire({dimension:t._size,done:!1,east:!0}))}))),this._sashListener.add(this._westSash.onDidChange((function(e){n&&(r=-(e.currentX-e.startX),t.layout(n.height+i,n.width+r),t._onDidResize.fire({dimension:t._size,done:!1,west:!0}))}))),this._sashListener.add(this._northSash.onDidChange((function(e){n&&(i=-(e.currentY-e.startY),t.layout(n.height+i,n.width+r),t._onDidResize.fire({dimension:t._size,done:!1,north:!0}))}))),this._sashListener.add(this._southSash.onDidChange((function(e){n&&(i=e.currentY-e.startY,t.layout(n.height+i,n.width+r),t._onDidResize.fire({dimension:t._size,done:!1,south:!0}))}))),this._sashListener.add(wi.any(this._eastSash.onDidReset,this._westSash.onDidReset)((function(n){t._preferredSize&&(t.layout(t._size.height,t._preferredSize.width),t._onDidResize.fire({dimension:t._size,done:!0}))}))),this._sashListener.add(wi.any(this._northSash.onDidReset,this._southSash.onDidReset)((function(n){t._preferredSize&&(t.layout(t._preferredSize.height,t._size.width),t._onDidResize.fire({dimension:t._size,done:!0}))})))}t.prototype.dispose=function(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()};t.prototype.enableSashes=function(t,n,i,r){this._northSash.state=t?3:0,this._eastSash.state=n?3:0,this._southSash.state=i?3:0,this._westSash.state=r?3:0};t.prototype.layout=function(t,n){if(t===void 0){t=this.size.height}if(n===void 0){n=this.size.width}var i=this._minSize,r=i.height,e=i.width,o=this._maxSize,s=o.height,u=o.width;t=Math.max(r,Math.min(s,t)),n=Math.max(e,Math.min(u,n));var a=new Fa(n,t);Fa.equals(a,this._size)||(this.domNode.style.height=t+"px",this.domNode.style.width=n+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())};t.prototype.clearSashHoverState=function(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()};Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"maxSize",{get:function(){return this._maxSize},set:function(t){this._maxSize=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"minSize",{get:function(){return this._minSize},set:function(t){this._minSize=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"preferredSize",{get:function(){return this._preferredSize},set:function(t){this._preferredSize=t},enumerable:false,configurable:true});return t}();var u5=function(t){__extends(n,t);function n(n,i){if(i===void 0){i=new Fa(10,10)}var r=this;r=t.call(this)||this,r._editor=n,r.allowEditorOverflow=!0,r.suppressMouseDown=!1,r._resizableNode=r._register(new s5),r._contentPosition=null,r._isResizing=!1,r._resizableNode.domNode.style.position="absolute",r._resizableNode.minSize=Fa.lift(i),r._resizableNode.layout(i.height,i.width),r._resizableNode.enableSashes(!0,!0,!0,!0),r._register(r._resizableNode.onDidResize((function(t){r._resize(new Fa(t.dimension.width,t.dimension.height)),t.done&&(r._isResizing=!1)}))),r._register(r._resizableNode.onDidWillResize((function(){r._isResizing=!0})));return r}Object.defineProperty(n.prototype,"isResizing",{get:function(){return this._isResizing},enumerable:false,configurable:true});n.prototype.getDomNode=function(){return this._resizableNode.domNode};n.prototype.getPosition=function(){return this._contentPosition};Object.defineProperty(n.prototype,"position",{get:function(){var t;return!((t=this._contentPosition)===null||t===void 0)&&t.position?Tr.lift(this._contentPosition.position):void 0},enumerable:false,configurable:true});n.prototype._availableVerticalSpaceAbove=function(t){var n=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(t);if(!(!n||!i))return ja(n).top+i.top-30};n.prototype._availableVerticalSpaceBelow=function(t){var n=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(t);if(!n||!i)return;var r=ja(n),e=Ea(n.ownerDocument.body),o=r.top+i.top+i.height;return e.height-o-24};n.prototype._findPositionPreference=function(t,n){var i,r;var e=Math.min((i=this._availableVerticalSpaceBelow(n))!==null&&i!==void 0?i:1/0,t),o=Math.min((r=this._availableVerticalSpaceAbove(n))!==null&&r!==void 0?r:1/0,t),s=Math.min(Math.max(o,e),t),u=Math.min(t,s);var a;return a=this._editor.getOption(60).above?u<=o?1:2:u<=e?2:1,a===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),a};n.prototype._resize=function(t){this._resizableNode.layout(t.height,t.width)};return n}(ci);var a5,h5,c5=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},f5=function(t,n){return function(i,r){n(i,r,t)}};var l5=bh;var v5=a5=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._editor=n,e._instantiationService=i,e._keybindingService=r,e._currentResult=null,e._widget=e._register(e._instantiationService.createInstance(w5,e._editor)),e._participants=[];for(var o=0,s=o5.getAll();o<s.length;o++){var u=s[o];e._participants.push(e._instantiationService.createInstance(u,e._editor))}e._participants.sort((function(t,n){return t.hoverOrdinal-n.hoverOrdinal})),e._computer=new b5(e._editor,e._participants),e._hoverOperation=e._register(new i5(e._editor,e._computer)),e._register(e._hoverOperation.onResult((function(t){if(!e._computer.anchor)return;var n=t.hasLoadingMessage?e._addLoadingMessage(t.value):t.value;e._withResult(new d5(e._computer.anchor,n,t.isComplete))}))),e._register(ya(e._widget.getDomNode(),"keydown",(function(t){t.equals(9)&&e.hide()}))),e._register(oe.onDidChange((function(){e._widget.position&&e._currentResult&&e._setCurrentResult(e._currentResult)})));return e}n.prototype._startShowingOrUpdateHover=function(t,n,i,r,e){return!this._widget.position||!this._currentResult?!!t&&(this._startHoverOperationIfNecessary(t,n,i,r,!1),!0):this._editor.getOption(60).sticky&&e&&this._widget.isMouseGettingCloser(e.event.posx,e.event.posy)?(t&&this._startHoverOperationIfNecessary(t,n,i,r,!0),!0):t?!(!t||!this._currentResult.anchor.equals(t))||(t.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(t)),this._startHoverOperationIfNecessary(t,n,i,r,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(t,n,i,r,!1),!0)):(this._setCurrentResult(null),!1)};n.prototype._startHoverOperationIfNecessary=function(t,n,i,r,e){this._computer.anchor&&this._computer.anchor.equals(t)||(this._hoverOperation.cancel(),this._computer.anchor=t,this._computer.shouldFocus=r,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=e,this._hoverOperation.start(n))};n.prototype._setCurrentResult=function(t){this._currentResult!==t&&(t&&t.messages.length===0&&(t=null),this._currentResult=t,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())};n.prototype._addLoadingMessage=function(t){if(this._computer.anchor){for(var n=0,i=this._participants;n<i.length;n++){var r=i[n];if(r.createLoadingMessage){var e=r.createLoadingMessage(this._computer.anchor);if(e)return t.slice(0).concat([e])}}}return t};n.prototype._withResult=function(t){this._widget.position&&this._currentResult&&this._currentResult.isComplete&&(!t.isComplete||this._computer.insistOnKeepingHoverVisible&&t.messages.length===0)||this._setCurrentResult(t)};n.prototype._renderMessages=function(t,i){var r=this;var e=n.computeHoverRanges(this._editor,t.range,i),o=e.showAtPosition,s=e.showAtSecondaryPosition,u=e.highlightRange,a=new hi,h=a.add(new m5(this._keybindingService)),c=document.createDocumentFragment();var f=null;var l={fragment:c,statusBar:h,setColorPicker:function(t){return f=t},onContentsChanged:function(){return r._widget.onContentsChanged()},setMinimumDimensions:function(t){return r._widget.setMinimumDimensions(t)},hide:function(){return r.hide()}};var v=function(t){var n=i.filter((function(n){return n.owner===t}));n.length>0&&a.add(t.renderHoverParts(l,n))};for(var d=0,g=this._participants;d<g.length;d++){var p=g[d];v(p)}var w=i.some((function(t){return t.isBeforeContent}));if(h.hasContent&&c.appendChild(h.hoverElement),c.hasChildNodes()){if(u){var m=this._editor.createDecorationsCollection();m.set([{range:u,options:n._DECORATION_OPTIONS}]),a.add(ai((function(){m.clear()})))}this._widget.showAt(c,new p5(t.initialMousePosX,t.initialMousePosY,f,o,s,this._editor.getOption(60).above,this._computer.shouldFocus,this._computer.source,w,a))}else a.dispose()};n.computeHoverRanges=function(t,n,i){var r=1;if(t.hasModel()){var e=t._getViewModel(),o=e.coordinatesConverter,s=o.convertModelRangeToViewRange(n),u=new Tr(s.startLineNumber,e.getLineMinColumn(s.startLineNumber));r=o.convertViewPositionToModelPosition(u).column}var a=n.startLineNumber;var h=n.startColumn,c=i[0].range,f=null;for(var l=0,v=i;l<v.length;l++){var e=v[l];c=Ir.plusRange(c,e.range),e.range.startLineNumber===a&&e.range.endLineNumber===a&&(h=Math.max(Math.min(h,e.range.startColumn),r)),e.forceShowAtRange&&(f=e.range)}return{showAtPosition:f?f.getStartPosition():new Tr(a,n.startColumn),showAtSecondaryPosition:f?f.getStartPosition():new Tr(a,h),highlightRange:c}};n.prototype.showsOrWillShow=function(t){if(this._widget.isResizing)return!0;var n=[];for(var i=0,r=this._participants;i<r.length;i++){var e=r[i];if(e.suggestHoverAnchor){var o=e.suggestHoverAnchor(t);o&&n.push(o)}}var s=t.target;if(s.type===6&&n.push(new r5(0,s.range,t.event.posx,t.event.posy)),s.type===7){var e=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;!s.detail.isAfterLines&&typeof s.detail.horizontalDistanceToText=="number"&&s.detail.horizontalDistanceToText<e&&n.push(new r5(0,s.range,t.event.posx,t.event.posy))}return n.length===0?this._startShowingOrUpdateHover(null,0,0,!1,t):(n.sort((function(t,n){return n.priority-t.priority})),this._startShowingOrUpdateHover(n[0],0,0,!1,t))};n.prototype.startShowingAtRange=function(t,n,i,r){this._startShowingOrUpdateHover(new r5(0,t,void 0,void 0),n,i,r,null)};n.prototype.containsNode=function(t){return!!t&&this._widget.getDomNode().contains(t)};n.prototype.focus=function(){this._widget.focus()};n.prototype.scrollUp=function(){this._widget.scrollUp()};n.prototype.scrollDown=function(){this._widget.scrollDown()};n.prototype.scrollLeft=function(){this._widget.scrollLeft()};n.prototype.scrollRight=function(){this._widget.scrollRight()};n.prototype.pageUp=function(){this._widget.pageUp()};n.prototype.pageDown=function(){this._widget.pageDown()};n.prototype.goToTop=function(){this._widget.goToTop()};n.prototype.goToBottom=function(){this._widget.goToBottom()};n.prototype.hide=function(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)};Object.defineProperty(n.prototype,"isColorPickerVisible",{get:function(){return this._widget.isColorPickerVisible},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isVisibleFromKeyboard",{get:function(){return this._widget.isVisibleFromKeyboard},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isVisible",{get:function(){return this._widget.isVisible},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isFocused",{get:function(){return this._widget.isFocused},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isResizing",{get:function(){return this._widget.isResizing},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"widget",{get:function(){return this._widget},enumerable:false,configurable:true});return n}(ci);v5._DECORATION_OPTIONS=PM.register({description:"content-hover-highlight",className:"hoverHighlight"}),v5=a5=c5([f5(1,Jh),f5(2,Yx)],v5);var d5=function(){function t(t,n,i){this.anchor=t,this.messages=n,this.isComplete=i}t.prototype.filter=function(t){var n=this.messages.filter((function(n){return n.isValidForHoverAnchor(t)}));return n.length===this.messages.length?this:new g5(this,this.anchor,n,this.isComplete)};return t}();var g5=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,i,r,e)||this,o.original=n;return o}n.prototype.filter=function(t){return this.original.filter(t)};return n}(d5);var p5=function(){function t(t,n,i,r,e,o,s,u,a,h){this.initialMousePosX=t,this.initialMousePosY=n,this.colorPicker=i,this.showAtPosition=r,this.showAtSecondaryPosition=e,this.preferAbove=o,this.stoleFocus=s,this.source=u,this.isBeforeContent=a,this.disposables=h,this.closestMouseDistance=void 0}return t}();var w5=h5=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;var u=n.getOption(67)+8,a=new Fa(150,u);s=t.call(this,n,a)||this,s._configurationService=r,s._accessibilityService=e,s._keybindingService=o,s._hover=s._register(new xR),s._minimumSize=a,s._hoverVisibleKey=$C.hoverVisible.bindTo(i),s._hoverFocusedKey=$C.hoverFocused.bindTo(i),vh(s._resizableNode.domNode,s._hover.containerDomNode),s._resizableNode.domNode.style.zIndex="50",s._register(s._editor.onDidLayoutChange((function(){s.isVisible&&s._updateMaxDimensions()}))),s._register(s._editor.onDidChangeConfiguration((function(t){t.hasChanged(50)&&s._updateFont()})));var h=s._register(lh(s._resizableNode.domNode));s._register(h.onDidFocus((function(){s._hoverFocusedKey.set(!0)}))),s._register(h.onDidBlur((function(){s._hoverFocusedKey.set(!1)}))),s._setHoverData(void 0),s._editor.addContentWidget(s);return s}Object.defineProperty(n.prototype,"isColorPickerVisible",{get:function(){var t;return!!(!((t=this._visibleData)===null||t===void 0)&&t.colorPicker)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isVisibleFromKeyboard",{get:function(){var t;return((t=this._visibleData)===null||t===void 0?void 0:t.source)===1},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isVisible",{get:function(){var t;return(t=this._hoverVisibleKey.get())!==null&&t!==void 0&&t},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isFocused",{get:function(){var t;return(t=this._hoverFocusedKey.get())!==null&&t!==void 0&&t},enumerable:false,configurable:true});n.prototype.dispose=function(){var n;t.prototype.dispose.call(this),(n=this._visibleData)===null||n===void 0||n.disposables.dispose(),this._editor.removeContentWidget(this)};n.prototype.getId=function(){return n.ID};n._applyDimensions=function(t,n,i){var r=typeof n=="number"?"".concat(n,"px"):n,e=typeof i=="number"?"".concat(i,"px"):i;t.style.width=r,t.style.height=e};n.prototype._setContentsDomNodeDimensions=function(t,i){var r=this._hover.contentsDomNode;return n._applyDimensions(r,t,i)};n.prototype._setContainerDomNodeDimensions=function(t,i){var r=this._hover.containerDomNode;return n._applyDimensions(r,t,i)};n.prototype._setHoverWidgetDimensions=function(t,n){this._setContentsDomNodeDimensions(t,n),this._setContainerDomNodeDimensions(t,n),this._layoutContentWidget()};n._applyMaxDimensions=function(t,n,i){var r=typeof n=="number"?"".concat(n,"px"):n,e=typeof i=="number"?"".concat(i,"px"):i;t.style.maxWidth=r,t.style.maxHeight=e};n.prototype._setHoverWidgetMaxDimensions=function(t,i){n._applyMaxDimensions(this._hover.contentsDomNode,t,i),n._applyMaxDimensions(this._hover.containerDomNode,t,i),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof t=="number"?"".concat(t,"px"):t),this._layoutContentWidget()};n.prototype._hasHorizontalScrollbar=function(){var t=this._hover.scrollbar.getScrollDimensions();return t.scrollWidth>t.width};n.prototype._adjustContentsBottomPadding=function(){var t=this._hover.contentsDomNode,n="".concat(this._hover.scrollbar.options.horizontalScrollbarSize,"px");t.style.paddingBottom!==n&&(t.style.paddingBottom=n)};n.prototype._setAdjustedHoverWidgetDimensions=function(t){this._setHoverWidgetMaxDimensions("none","none");var n=t.width,i=t.height;this._setHoverWidgetDimensions(n,i),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._setContentsDomNodeDimensions(n,i-10))};n.prototype._updateResizableNodeMaxDimensions=function(){var t,n;var i=(t=this._findMaximumRenderingWidth())!==null&&t!==void 0?t:1/0,r=(n=this._findMaximumRenderingHeight())!==null&&n!==void 0?n:1/0;this._resizableNode.maxSize=new Fa(i,r),this._setHoverWidgetMaxDimensions(i,r)};n.prototype._resize=function(t){var i,r;n._lastDimensions=new Fa(t.width,t.height),this._setAdjustedHoverWidgetDimensions(t),this._resizableNode.layout(t.height,t.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),(r=(i=this._visibleData)===null||i===void 0?void 0:i.colorPicker)===null||r===void 0||r.layout()};n.prototype._findAvailableSpaceVertically=function(){var t;var n=(t=this._visibleData)===null||t===void 0?void 0:t.showAtPosition;if(n)return this._positionPreference===1?this._availableVerticalSpaceAbove(n):this._availableVerticalSpaceBelow(n)};n.prototype._findMaximumRenderingHeight=function(){var t=this._findAvailableSpaceVertically();if(!t)return;var n=6;return Array.from(this._hover.contentsDomNode.children).forEach((function(t){n+=t.clientHeight})),this._hasHorizontalScrollbar()&&(n+=10),Math.min(t,n)};n.prototype._isHoverTextOverflowing=function(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");var t=Array.from(this._hover.contentsDomNode.children).some((function(t){return t.scrollWidth>t.clientWidth}));return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),t};n.prototype._findMaximumRenderingWidth=function(){if(!this._editor||!this._editor.hasModel())return;var t=this._isHoverTextOverflowing(),n=this._contentWidth===void 0?0:this._contentWidth-2;return t||this._hover.containerDomNode.clientWidth<n?Ea(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2};n.prototype.isMouseGettingCloser=function(t,n){if(!this._visibleData)return!1;if(this._visibleData.initialMousePosX===void 0||this._visibleData.initialMousePosY===void 0)return this._visibleData.initialMousePosX=t,this._visibleData.initialMousePosY=n,!1;var i=ja(this.getDomNode());this._visibleData.closestMouseDistance===void 0&&(this._visibleData.closestMouseDistance=y5(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,i.left,i.top,i.width,i.height));var r=y5(t,n,i.left,i.top,i.width,i.height);return!(r>this._visibleData.closestMouseDistance+4)&&(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,r),!0)};n.prototype._setHoverData=function(t){var n;(n=this._visibleData)===null||n===void 0||n.disposables.dispose(),this._visibleData=t,this._hoverVisibleKey.set(!!t),this._hover.containerDomNode.classList.toggle("hidden",!t)};n.prototype._updateFont=function(){var t=this;var n=this._editor.getOption(50),i=n.fontSize,r=n.lineHeight,e=this._hover.contentsDomNode;e.style.fontSize="".concat(i,"px"),e.style.lineHeight=""+r/i,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((function(n){return t._editor.applyFontInfo(n)}))};n.prototype._updateContent=function(t){var n=this._hover.contentsDomNode;n.style.paddingBottom="",n.textContent="",n.appendChild(t)};n.prototype._layoutContentWidget=function(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()};n.prototype._updateMaxDimensions=function(){var t=Math.max(this._editor.getLayoutInfo().height/4,250,n._lastDimensions.height),i=Math.max(.66*this._editor.getLayoutInfo().width,500,n._lastDimensions.width);this._setHoverWidgetMaxDimensions(i,t)};n.prototype._render=function(t,n){this._setHoverData(n),this._updateFont(),this._updateContent(t),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()};n.prototype.getPosition=function(){var t;return this._visibleData?{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,positionAffinity:this._visibleData.isBeforeContent?3:void 0,preference:[(t=this._positionPreference)!==null&&t!==void 0?t:1]}:null};n.prototype.showAt=function(t,n){var i,r,e,o;if(!this._editor||!this._editor.hasModel())return;this._render(t,n);var s=Na(this._hover.containerDomNode),u=n.showAtPosition;this._positionPreference=(i=this._findPositionPreference(s,u))!==null&&i!==void 0?i:1,this.onContentsChanged(),n.stoleFocus&&this._hover.containerDomNode.focus(),(r=n.colorPicker)===null||r===void 0||r.layout();var a=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&SR(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(o=(e=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))===null||e===void 0?void 0:e.getAriaLabel())!==null&&o!==void 0?o:"");a&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+a)};n.prototype.hide=function(){if(!this._visibleData)return;var t=this._visibleData.stoleFocus||this._hoverFocusedKey.get();this._setHoverData(void 0),this._resizableNode.maxSize=new Fa(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),t&&this._editor.focus()};n.prototype._removeConstraintsRenderNormally=function(){var t=this._editor.getLayoutInfo();this._resizableNode.layout(t.height,t.width),this._setHoverWidgetDimensions("auto","auto")};n.prototype._adjustHoverHeightForScrollbar=function(t){var n;var i=this._hover.containerDomNode,r=this._hover.contentsDomNode,e=(n=this._findMaximumRenderingHeight())!==null&&n!==void 0?n:1/0;this._setContainerDomNodeDimensions(Ta(i),Math.min(e,t)),this._setContentsDomNodeDimensions(Ta(r),Math.min(e,t-10))};n.prototype.setMinimumDimensions=function(t){this._minimumSize=new Fa(Math.max(this._minimumSize.width,t.width),Math.max(this._minimumSize.height,t.height)),this._updateMinimumWidth()};n.prototype._updateMinimumWidth=function(){var t=this._contentWidth===void 0?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new Fa(t,this._minimumSize.height)};n.prototype.onContentsChanged=function(){var t;this._removeConstraintsRenderNormally();var n=this._hover.containerDomNode;var i=Na(n),r=Ta(n);if(this._resizableNode.layout(i,r),this._setHoverWidgetDimensions(r,i),i=Na(n),r=Ta(n),this._contentWidth=r,this._updateMinimumWidth(),this._resizableNode.layout(i,r),this._hasHorizontalScrollbar()&&(this._adjustContentsBottomPadding(),this._adjustHoverHeightForScrollbar(i)),(t=this._visibleData)===null||t===void 0?void 0:t.showAtPosition){var e=Na(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(e,this._visibleData.showAtPosition)}this._layoutContentWidget()};n.prototype.focus=function(){this._hover.containerDomNode.focus()};n.prototype.scrollUp=function(){var t=this._hover.scrollbar.getScrollPosition().scrollTop,n=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:t-n.lineHeight})};n.prototype.scrollDown=function(){var t=this._hover.scrollbar.getScrollPosition().scrollTop,n=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:t+n.lineHeight})};n.prototype.scrollLeft=function(){var t=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:t-30})};n.prototype.scrollRight=function(){var t=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:t+30})};n.prototype.pageUp=function(){var t=this._hover.scrollbar.getScrollPosition().scrollTop,n=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:t-n})};n.prototype.pageDown=function(){var t=this._hover.scrollbar.getScrollPosition().scrollTop,n=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:t+n})};n.prototype.goToTop=function(){this._hover.scrollbar.setScrollPosition({scrollTop:0})};n.prototype.goToBottom=function(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})};return n}(u5);w5.ID="editor.contrib.resizableContentHoverWidget",w5._lastDimensions=new Fa(0,0),w5=h5=c5([f5(1,Gc),f5(2,Kl),f5(3,jw),f5(4,Yx)],w5);var m5=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._keybindingService=n,i._hasContent=!1,i.hoverElement=l5("div.hover-row.status-bar"),i.actionsElement=vh(i.hoverElement,l5("div.actions"));return i}Object.defineProperty(n.prototype,"hasContent",{get:function(){return this._hasContent},enumerable:false,configurable:true});n.prototype.addAction=function(t){var n=this._keybindingService.lookupKeybinding(t.commandId),i=n?n.getLabel():null;return this._hasContent=!0,this._register(CR.render(this.actionsElement,t,i))};n.prototype.append=function(t){var n=vh(this.actionsElement,t);return this._hasContent=!0,n};return n}(ci);m5=c5([f5(0,Yx)],m5);var b5=function(){function t(t,n){this._editor=t,this._participants=n,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}Object.defineProperty(t.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"shouldFocus",{get:function(){return this._shouldFocus},set:function(t){this._shouldFocus=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){this._source=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"insistOnKeepingHoverVisible",{get:function(){return this._insistOnKeepingHoverVisible},set:function(t){this._insistOnKeepingHoverVisible=t},enumerable:false,configurable:true});t._getLineDecorations=function(t,n){if(n.type!==1&&!n.supportsMarkerHover)return[];var i=t.getModel(),r=n.range.startLineNumber;if(r>i.getLineCount())return[];var e=i.getLineMaxColumn(r);return t.getLineDecorations(r).filter((function(t){if(t.options.isWholeLine)return!0;var i=t.range.startLineNumber===r?t.range.startColumn:1,o=t.range.endLineNumber===r?t.range.endColumn:e;if(t.options.showIfCollapsed){if(i>n.range.startColumn+1||n.range.endColumn-1>o)return!1}else if(i>n.range.startColumn||n.range.endColumn>o)return!1;return!0}))};t.prototype.computeAsync=function(n){var i=this._anchor;if(!this._editor.hasModel()||!i)return zs.EMPTY;var r=t._getLineDecorations(this._editor,i);return zs.merge(this._participants.map((function(t){return t.computeAsync?t.computeAsync(i,r,n):zs.EMPTY})))};t.prototype.computeSync=function(){if(!this._editor.hasModel()||!this._anchor)return[];var n=t._getLineDecorations(this._editor,this._anchor);var i=[];for(var r=0,e=this._participants;r<e.length;r++){var o=e[r];i=i.concat(o.computeSync(this._anchor,n))}return b(i)};return t}();function y5(t,n,i,r,e,o){var s=i+e/2,u=r+o/2,a=Math.max(Math.abs(t-s)-e/2,0),h=Math.max(Math.abs(n-u)-o/2,0);return Math.sqrt(a*a+h*h)}var _5=bh;var k5=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._renderDisposeables=e._register(new hi),e._editor=n,e._isVisible=!1,e._messages=[],e._hover=e._register(new xR),e._hover.containerDomNode.classList.toggle("hidden",!e._isVisible),e._markdownRenderer=e._register(new OI({editor:e._editor},i,r)),e._computer=new x5(e._editor),e._hoverOperation=e._register(new i5(e._editor,e._computer)),e._register(e._hoverOperation.onResult((function(t){e._withResult(t.value)}))),e._register(e._editor.onDidChangeModelDecorations((function(){return e._onModelDecorationsChanged()}))),e._register(e._editor.onDidChangeConfiguration((function(t){t.hasChanged(50)&&e._updateFont()}))),e._editor.addOverlayWidget(e);return e}n.prototype.dispose=function(){this._editor.removeOverlayWidget(this),t.prototype.dispose.call(this)};n.prototype.getId=function(){return n.ID};n.prototype.getDomNode=function(){return this._hover.containerDomNode};n.prototype.getPosition=function(){return null};n.prototype._updateFont=function(){var t=this;Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((function(n){return t._editor.applyFontInfo(n)}))};n.prototype._onModelDecorationsChanged=function(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))};n.prototype.startShowingAt=function(t,n){this._computer.lineNumber===t&&this._computer.lane===n||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=t,this._computer.lane=n,this._hoverOperation.start(0))};n.prototype.hide=function(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))};n.prototype._withResult=function(t){this._messages=t,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()};n.prototype._renderMessages=function(t,n){this._renderDisposeables.clear();var i=document.createDocumentFragment();for(var r=0,e=n;r<e.length;r++){var o=e[r];var s=_5("div.hover-row.markdown-hover"),u=vh(s,_5("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(o.value));u.appendChild(a.element),i.appendChild(s)}this._updateContents(i),this._showAt(t)};n.prototype._updateContents=function(t){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(t),this._updateFont()};n.prototype._showAt=function(t){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));var n=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(t),r=this._editor.getScrollTop(),e=this._editor.getOption(67),o=i-r-(this._hover.containerDomNode.clientHeight-e)/2,s=n.glyphMarginLeft+n.glyphMarginWidth+(this._computer.lane==="lineNo"?n.lineNumbersWidth:0);this._hover.containerDomNode.style.left="".concat(s,"px"),this._hover.containerDomNode.style.top="".concat(Math.max(Math.round(o),0),"px")};return n}(ci);k5.ID="editor.contrib.modesGlyphHoverWidget";var x5=function(){function t(t){this._editor=t,this._lineNumber=-1,this._laneOrLine=dd.Center}Object.defineProperty(t.prototype,"lineNumber",{get:function(){return this._lineNumber},set:function(t){this._lineNumber=t},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"lane",{get:function(){return this._laneOrLine},set:function(t){this._laneOrLine=t},enumerable:false,configurable:true});t.prototype.computeSync=function(){var t,n;var i=function(t){return{value:t}},r=this._editor.getLineDecorations(this._lineNumber),e=[],o=this._laneOrLine==="lineNo";if(!r)return e;for(var s=0,u=r;s<u.length;s++){var a=u[s];var h=(n=(t=a.options.glyphMargin)===null||t===void 0?void 0:t.position)!==null&&n!==void 0?n:dd.Center;if(!o&&h!==this._laneOrLine)continue;var c=o?a.options.lineNumberHoverMessage:a.options.glyphMarginHoverMessage;c&&!qT(c)&&e.push.apply(e,M(c).map(i))}return e};return t}();var C5=function(){function t(t,n,i){this.provider=t,this.hover=n,this.ordinal=i}return t}();function S5(t,n,i,r){var e=t.ordered(n).map((function(t,e){return function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s;return __generator(this,(function(u){switch(u.label){case 0:u.trys.push([0,2,,3]);return[4,Promise.resolve(t.provideHover(i,r,e))];case 1:o=u.sent();if(o&&function(t){var n=t.range!==void 0,i=t.contents!==void 0&&t.contents&&t.contents.length>0;return n&&i}(o))return[2,new C5(t,o,n)];return[3,3];case 2:s=u.sent();$n(s);return[3,3];case 3:return[2]}}))}))}(t,e,n,i,r)}));return zs.fromPromises(e).coalesce()}Tf("_executeHoverProvider",(function(t,n,i){return function(t,n,i,r){return S5(t,n,i,r).map((function(t){return t.hover})).toPromise()}(t.get(tp).hoverProvider,n,i,Fi.None)}));var D5=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},A5=function(t,n){return function(i,r){n(i,r,t)}};var O5=bh;var E5=function(){function t(t,n,i,r,e){this.owner=t,this.range=n,this.contents=i,this.isBeforeContent=r,this.ordinal=e}t.prototype.isValidForHoverAnchor=function(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn};return t}();var M5=function(){function t(t,n,i,r,e){this._editor=t,this._languageService=n,this._openerService=i,this._configurationService=r,this._languageFeaturesService=e,this.hoverOrdinal=3}t.prototype.createLoadingMessage=function(t){return new E5(this,t.range,[(new VT).appendText(ht(0,"Loading..."))],!1,2e3)};t.prototype.computeSync=function(t,n){if(!this._editor.hasModel()||t.type!==1)return[];var i=this._editor.getModel(),r=t.range.startLineNumber,e=i.getLineMaxColumn(r),o=[];var s=1e3;var u=i.getLineLength(r),a=i.getLanguageIdAtPosition(t.range.startLineNumber,t.range.startColumn),h=this._editor.getOption(117),c=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:a});var f=!1;h>=0&&u>h&&t.range.startColumn>=h&&(f=!0,o.push(new E5(this,t.range,[{value:ht(0,"Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,s++))),!f&&typeof c=="number"&&u>=c&&o.push(new E5(this,t.range,[{value:ht(0,"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,s++));var l=!1;for(var v=0,d=n;v<d.length;v++){var g=d[v];var p=g.range.startLineNumber===r?g.range.startColumn:1,w=g.range.endLineNumber===r?g.range.endColumn:e,m=g.options.hoverMessage;if(!m||qT(m))continue;g.options.beforeContentClassName&&(l=!0);var b=new Ir(t.range.startLineNumber,p,t.range.startLineNumber,w);o.push(new E5(this,b,M(m),l,s++))}return o};t.prototype.computeAsync=function(t,n,i){var r=this;if(!this._editor.hasModel()||t.type!==1)return zs.EMPTY;var e=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(e))return zs.EMPTY;var o=new Tr(t.range.startLineNumber,t.range.startColumn);return S5(this._languageFeaturesService.hoverProvider,e,o,i).filter((function(t){return!qT(t.hover.contents)})).map((function(n){var i=n.hover.range?Ir.lift(n.hover.range):t.range;return new E5(r,i,n.hover.contents,!1,n.ordinal)}))};t.prototype.renderHoverParts=function(t,n){return F5(t,n,this._editor,this._languageService,this._openerService)};return t}();function F5(t,n,i,r,e){n.sort((function(t,n){return t.ordinal-n.ordinal}));var o=new hi;for(var s=0,u=n;s<u.length;s++){var a=u[s];var h=function(n){if(qT(n))return"continue";var s=O5("div.hover-row.markdown-hover"),u=vh(s,O5("div.hover-contents")),a=o.add(new OI({editor:i},r,e));o.add(a.onDidRenderAsync((function(){u.className="hover-contents code-hover-contents",t.onContentsChanged()})));var h=o.add(a.render(n));u.appendChild(h.element),t.fragment.appendChild(s)};for(var c=0,f=a.contents;c<f.length;c++){var l=f[c];h(l)}}return o}M5=D5([A5(1,Zl),A5(2,DR),A5(3,Kl),A5(4,tp)],M5);var L5=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},j5=function(t,n){return function(i,r){n(i,r,t)}};var R5=function(){function t(t,n,i){this.marker=t,this.index=n,this.total=i}return t}();var T5=function(){function t(t,n,i){var r=this;this._markerService=n,this._configService=i,this._onDidChange=new ki,this.onDidChange=this._onDidChange.event,this._dispoables=new hi,this._markers=[],this._nextIdx=-1,Cr.isUri(t)?this._resourceFilter=function(n){return n.toString()===t.toString()}:t&&(this._resourceFilter=t);var e=this._configService.getValue("problems.sortOrder"),o=function(t,n){var i=wo(t.resource.toString(),n.resource.toString());return i===0&&(i=e==="position"?Ir.compareRangesUsingStarts(t,n)||dH.compare(t.severity,n.severity):dH.compare(t.severity,n.severity)||Ir.compareRangesUsingStarts(t,n)),i},s=function(){r._markers=r._markerService.read({resource:Cr.isUri(t)?t:void 0,severities:dH.Error|dH.Warning|dH.Info}),typeof t=="function"&&(r._markers=r._markers.filter((function(t){return r._resourceFilter(t.resource)}))),r._markers.sort(o)};s(),this._dispoables.add(n.onMarkerChanged((function(t){r._resourceFilter&&!t.some((function(t){return r._resourceFilter(t)}))||(s(),r._nextIdx=-1,r._onDidChange.fire())})))}t.prototype.dispose=function(){this._dispoables.dispose(),this._onDidChange.dispose()};t.prototype.matches=function(t){return!this._resourceFilter&&!t||!(!this._resourceFilter||!t)&&this._resourceFilter(t)};Object.defineProperty(t.prototype,"selected",{get:function(){var t=this._markers[this._nextIdx];return t&&new R5(t,this._nextIdx+1,this._markers.length)},enumerable:false,configurable:true});t.prototype._initIdx=function(t,n,i){var r=!1,e=this._markers.findIndex((function(n){return n.resource.toString()===t.uri.toString()}));e<0&&(e=d(this._markers,{resource:t.uri},(function(t,n){return wo(t.resource.toString(),n.resource.toString())})),e<0&&(e=~e));for(var o=e;o<this._markers.length;o++){var s=Ir.lift(this._markers[o]);if(s.isEmpty()){var u=t.getWordAtPosition(s.getStartPosition());u&&(s=new Ir(s.startLineNumber,u.startColumn,s.startLineNumber,u.endColumn))}if(n&&(s.containsPosition(n)||n.isBeforeOrEqual(s.getStartPosition()))){this._nextIdx=o,r=!0;break}if(this._markers[o].resource.toString()!==t.uri.toString())break}r||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)};t.prototype.resetIndex=function(){this._nextIdx=-1};t.prototype.move=function(t,n,i){if(this._markers.length===0)return!1;var r=this._nextIdx;return this._nextIdx===-1?this._initIdx(n,i,t):t?this._nextIdx=(this._nextIdx+1)%this._markers.length:t||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),r!==this._nextIdx};t.prototype.find=function(t,n){var i=this._markers.findIndex((function(n){return n.resource.toString()===t.toString()}));if(!(i<0)){for(;i<this._markers.length;i++)if(Ir.containsPosition(this._markers[i],n))return new R5(this._markers[i],i+1,this._markers.length)}};return t}();T5=L5([j5(1,pH),j5(2,Kl)],T5);var I5=Zh("IMarkerNavigationService");var B5=function(){function t(t,n){this._markerService=t,this._configService=n,this._provider=new tn}t.prototype.getMarkerList=function(t){for(var n=0,i=this._provider;n<i.length;n++){var r=i[n];var e=r.getMarkerList(t);if(e)return e}return new T5(t,this._markerService,this._configService)};return t}();var N5;B5=L5([j5(0,pH),j5(1,Kl)],B5),Xl(I5,B5,1),function(t){t.className=function(t){switch(t){case AL.Ignore:return"severity-ignore "+uc.asClassName(Hr.info);case AL.Info:return uc.asClassName(Hr.info);case AL.Warning:return uc.asClassName(Hr.warning);case AL.Error:return uc.asClassName(Hr.error);default:return""}}}(N5||(N5={}));var P5,W5=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},H5=function(t,n){return function(i,r){n(i,r,t)}};var z5=function(){function t(t,n,i,r,e){var o=this;this._openerService=r,this._labelService=e,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new hi,this._editor=n;var s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(ya(this._relatedBlock,"click",(function(t){t.preventDefault();var n=o._relatedDiagnostics.get(t.target);n&&i(n)}))),this._scrollable=new mk(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),t.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((function(t){s.style.left="-".concat(t.scrollLeft,"px"),s.style.top="-".concat(t.scrollTop,"px")}))),this._disposables.add(this._scrollable)}t.prototype.dispose=function(){si(this._disposables)};t.prototype.update=function(t){var n=this;var i=t.source,r=t.message,e=t.relatedInformation,o=t.code;var s=((i==null?void 0:i.length)||0)+2;o&&(s+=typeof o=="string"?o.length:o.value.length);var u=lo(r);this._lines=u.length,this._longestLineLength=0;for(var a=0,h=u;a<h.length;a++){var c=h[a];this._longestLineLength=Math.max(c.length+s,this._longestLineLength)}pa(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(t)),this._editor.applyFontInfo(this._messageBlock);var f=this._messageBlock;for(var l=0,v=u;l<v.length;l++){var c=v[l];f=document.createElement("div"),f.innerText=c,c===""&&(f.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(f)}if(i||o){var c=document.createElement("span");if(c.classList.add("details"),f.appendChild(c),i){var d=document.createElement("span");d.innerText=i,d.classList.add("source"),c.appendChild(d)}if(o)if(typeof o=="string"){var d=document.createElement("span");d.innerText="(".concat(o,")"),d.classList.add("code"),c.appendChild(d)}else this._codeLink=bh("a.code-link"),this._codeLink.setAttribute("href","".concat(o.target.toString())),this._codeLink.onclick=function(t){n._openerService.open(o.target,{allowCommands:!0}),t.preventDefault(),t.stopPropagation()},vh(this._codeLink,bh("span")).innerText=o.value,c.appendChild(this._codeLink)}if(pa(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),k(e)){var c=this._relatedBlock.appendChild(document.createElement("div"));c.style.paddingTop="".concat(Math.floor(.66*this._editor.getOption(67)),"px"),this._lines+=1;for(var g=0,p=e;g<p.length;g++){var d=p[g];var w=document.createElement("div"),m=document.createElement("a");m.classList.add("filename"),m.innerText="".concat(this._labelService.getUriBasenameLabel(d.resource),"(").concat(d.startLineNumber,", ").concat(d.startColumn,"): "),m.title=this._labelService.getUriLabel(d.resource),this._relatedDiagnostics.set(m,d);var b=document.createElement("span");b.innerText=d.message,w.appendChild(m),w.appendChild(b),this._lines+=1,c.appendChild(w)}}var y=this._editor.getOption(50),_=Math.ceil(y.typicalFullwidthCharacterWidth*this._longestLineLength*.75),x=y.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:_,scrollHeight:x})};t.prototype.layout=function(t,n){this._scrollable.getDomNode().style.height="".concat(t,"px"),this._scrollable.getDomNode().style.width="".concat(n,"px"),this._scrollable.setScrollDimensions({width:n,height:t})};t.prototype.getHeightInLines=function(){return Math.min(17,this._lines)};t.prototype.getAriaLabel=function(t){var n="";switch(t.severity){case dH.Error:n=ht(0,"Error");break;case dH.Warning:n=ht(0,"Warning");break;case dH.Info:n=ht(0,"Info");break;case dH.Hint:n=ht(0,"Hint")}var i=ht(0,"{0} at {1}. ",n,t.startLineNumber+":"+t.startColumn);var r=this._editor.getModel();return r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1&&(i="".concat(r.getLineContent(t.startLineNumber),", ").concat(i)),i};return t}();var U5=P5=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this,n,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o)||this,a._themeService=i,a._openerService=r,a._menuService=e,a._contextKeyService=s,a._labelService=u,a._callOnDispose=new hi,a._onDidSelectRelatedInformation=new ki,a.onDidSelectRelatedInformation=a._onDidSelectRelatedInformation.event,a._severity=dH.Warning,a._backgroundColor=Ig.white,a._applyTheme(i.getColorTheme()),a._callOnDispose.add(i.onDidColorThemeChange(a._applyTheme.bind(a))),a.create();return a}n.prototype._applyTheme=function(t){this._backgroundColor=t.getColor(X5);var n=G5,i=$5;this._severity===dH.Warning?(n=J5,i=Z5):this._severity===dH.Info&&(n=Q5,i=Y5);var r=t.getColor(n),e=t.getColor(i);this.style({arrowColor:r,frameColor:r,headerBackgroundColor:e,primaryHeadingColor:t.getColor(U4),secondaryHeadingColor:t.getColor(K4)})};n.prototype._applyStyles=function(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),t.prototype._applyStyles.call(this)};n.prototype.dispose=function(){this._callOnDispose.dispose(),t.prototype.dispose.call(this)};n.prototype._fillHead=function(i){var r=this;t.prototype._fillHead.call(this,i),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun((function(t){return r.editor.focus()})));var e=[],o=this._menuService.createMenu(n.TitleMenu,this._contextKeyService);PW(o,void 0,e),this._actionbarWidget.push(e,{label:!1,icon:!0,index:0}),o.dispose()};n.prototype._fillTitleIcon=function(t){this._icon=vh(t,bh(""))};n.prototype._fillBody=function(t){var n=this;this._parentContainer=t,t.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),t.appendChild(this._container),this._message=new z5(this._container,this.editor,(function(t){return n._onDidSelectRelatedInformation.fire(t)}),this._openerService,this._labelService),this._disposables.add(this._message)};n.prototype.show=function(){throw new Error("call showAtMarker")};n.prototype.showAtMarker=function(n,i,r){this._container.classList.remove("stale"),this._message.update(n),this._severity=n.severity,this._applyTheme(this._themeService.getColorTheme());var e=Ir.lift(n),o=this.editor.getPosition(),s=o&&e.containsPosition(o)?o:e.getStartPosition();t.prototype.show.call(this,s,this.computeRequiredHeight());var u=this.editor.getModel();if(u){var a=ht(0,r>1?"{0} of {1} problems":"{0} of {1} problem",i,r);this.setTitle(NO(u.uri),a)}this._icon.className="codicon ".concat(N5.className(dH.toSeverity(this._severity))),this.editor.revealPositionNearTop(s,0),this.editor.focus()};n.prototype.updateMarker=function(t){this._container.classList.remove("stale"),this._message.update(t)};n.prototype.showStale=function(){this._container.classList.add("stale"),this._relayout()};n.prototype._doLayoutBody=function(n,i){t.prototype._doLayoutBody.call(this,n,i),this._heightInPixel=n,this._message.layout(n,i),this._container.style.height="".concat(n,"px")};n.prototype._onWidth=function(t){this._message.layout(this._heightInPixel,t)};n.prototype._relayout=function(){t.prototype._relayout.call(this,this.computeRequiredHeight())};n.prototype.computeRequiredHeight=function(){return 3+this._message.getHeightInLines()};return n}(H4);U5.TitleMenu=new vf("gotoErrorTitleMenu"),U5=P5=W5([H5(1,zk),H5(2,DR),H5(3,df),H5(4,Jh),H5(5,Gc),H5(6,RB)],U5);var K5=Xw(xm,Cm),V5=Xw(Dm,Am),q5=Xw(Om,Em),G5=Jw("editorMarkerNavigationError.background",{dark:K5,light:K5,hcDark:am,hcLight:am},ht(0,"Editor marker navigation widget error color.")),$5=Jw("editorMarkerNavigationError.headerBackground",{dark:Yw(G5,.1),light:Yw(G5,.1),hcDark:null,hcLight:null},ht(0,"Editor marker navigation widget error heading background.")),J5=Jw("editorMarkerNavigationWarning.background",{dark:V5,light:V5,hcDark:am,hcLight:am},ht(0,"Editor marker navigation widget warning color.")),Z5=Jw("editorMarkerNavigationWarning.headerBackground",{dark:Yw(J5,.1),light:Yw(J5,.1),hcDark:"#0C141F",hcLight:Yw(J5,.2)},ht(0,"Editor marker navigation widget warning heading background.")),Q5=Jw("editorMarkerNavigationInfo.background",{dark:q5,light:q5,hcDark:am,hcLight:am},ht(0,"Editor marker navigation widget info color.")),Y5=Jw("editorMarkerNavigationInfo.headerBackground",{dark:Yw(Q5,.1),light:Yw(Q5,.1),hcDark:null,hcLight:null},ht(0,"Editor marker navigation widget info heading background.")),X5=Jw("editorMarkerNavigation.background",{dark:mm,light:mm,hcDark:mm,hcLight:mm},ht(0,"Editor marker navigation widget background."));var t6,n6=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},i6=function(t,n){return function(i,r){n(i,r,t)}};var r6=t6=function(){function t(t,n,i,r,e){this._markerNavigationService=n,this._contextKeyService=i,this._editorService=r,this._instantiationService=e,this._sessionDispoables=new hi,this._editor=t,this._widgetVisible=u6.bindTo(this._contextKeyService)}t.get=function(t){return t.getContribution(t6.ID)};t.prototype.dispose=function(){this._cleanUp(),this._sessionDispoables.dispose()};t.prototype._cleanUp=function(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0};t.prototype._getOrCreateModel=function(t){var n=this;if(this._model&&this._model.matches(t))return this._model;var i=!1;return this._model&&(i=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(t),i&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(U5,this._editor),this._widget.onDidClose((function(){return n.close()}),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((function(t){var i,r,e;!((i=n._model)===null||i===void 0)&&i.selected&&Ir.containsPosition((r=n._model)===null||r===void 0?void 0:r.selected.marker,t.position)||(e=n._model)===null||e===void 0||e.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((function(){if(!n._widget||!n._widget.position||!n._model)return;var t=n._model.find(n._editor.getModel().uri,n._widget.position);t?n._widget.updateMarker(t.marker):n._widget.showStale()}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((function(t){n._editorService.openCodeEditor({resource:t.resource,options:{pinned:!0,revealIfOpened:!0,selection:Ir.lift(t).collapseToStart()}},n._editor),n.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((function(){return n._cleanUp()}))),this._model};t.prototype.close=function(t){if(t===void 0){t=!0}this._cleanUp(),t&&this._editor.focus()};t.prototype.showAtMarker=function(t){if(this._editor.hasModel()){var n=this._getOrCreateModel(this._editor.getModel().uri);n.resetIndex(),n.move(!0,this._editor.getModel(),new Tr(t.startLineNumber,t.startColumn)),n.selected&&this._widget.showAtMarker(n.selected.marker,n.selected.index,n.selected.total)}};t.prototype.nagivate=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:if(!this._editor.hasModel())return[3,3];e=this._getOrCreateModel(n?void 0:this._editor.getModel().uri);if(e.move(t,this._editor.getModel(),this._editor.getPosition()),!e.selected)return[2];if(!(e.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()))return[3,2];this._cleanUp();return[4,this._editorService.openCodeEditor({resource:e.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:e.selected.marker}},this._editor)];case 1:o=s.sent();o&&((i=t6.get(o))===null||i===void 0||i.close(),(r=t6.get(o))===null||r===void 0||r.nagivate(t,n));return[3,3];case 2:this._widget.showAtMarker(e.selected.marker,e.selected.index,e.selected.total);s.label=3;case 3:return[2]}}))}))};return t}();r6.ID="editor.contrib.markerController",r6=t6=n6([i6(1,I5),i6(2,Gc),i6(3,Qh),i6(4,Jh)],r6);var e6=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,r)||this,e._next=n,e._multiFile=i;return e}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){n.hasModel()&&((t=r6.get(n))===null||t===void 0||t.nagivate(this._next,this._multiFile));return[2]}))}))};return n}(Lf);var o6=function(t){__extends(n,t);function n(){return t.call(this,!0,!1,{id:n.ID,label:n.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:578,weight:100},menuOpts:{menuId:U5.TitleMenu,title:n.LABEL,icon:cq("marker-navigation-next",Hr.arrowDown,ht(0,"Icon for goto next marker.")),group:"navigation",order:1}})||this}return n}(e6);o6.ID="editor.action.marker.next",o6.LABEL=ht(0,"Go to Next Problem (Error, Warning, Info)");var s6=function(t){__extends(n,t);function n(){return t.call(this,!1,!1,{id:n.ID,label:n.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:1602,weight:100},menuOpts:{menuId:U5.TitleMenu,title:n.LABEL,icon:cq("marker-navigation-previous",Hr.arrowUp,ht(0,"Icon for goto previous marker.")),group:"navigation",order:2}})||this}return n}(e6);s6.ID="editor.action.marker.prev",s6.LABEL=ht(0,"Go to Previous Problem (Error, Warning, Info)");Pf(r6.ID,r6,4),Bf(o6),Bf(s6),Bf(function(t){__extends(n,t);function n(){return t.call(this,!0,!0,{id:"editor.action.marker.nextInFiles",label:ht(0,"Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:66,weight:100},menuOpts:{menuId:vf.MenubarGoMenu,title:ht(0,"Next &&Problem"),group:"6_problem_nav",order:1}})||this}return n}(e6)),Bf(function(t){__extends(n,t);function n(){return t.call(this,!1,!0,{id:"editor.action.marker.prevInFiles",label:ht(0,"Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:1090,weight:100},menuOpts:{menuId:vf.MenubarGoMenu,title:ht(0,"Previous &&Problem"),group:"6_problem_nav",order:2}})||this}return n}(e6));var u6=new qc("markersNavigationVisible",!1);If(new(Ff.bindToContribution(r6.get))({id:"closeMarkersNavigation",precondition:u6,handler:function(t){return t.close()},kbOpts:{weight:150,kbExpr:$C.focus,primary:9,secondary:[1033]}}));var a6=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},h6=function(t,n){return function(i,r){n(i,r,t)}};var c6=bh;var f6=function(){function t(t,n,i){this.owner=t,this.range=n,this.marker=i}t.prototype.isValidForHoverAnchor=function(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn};return t}();var l6={type:1,filter:{include:p1.QuickFix},triggerAction:w1.QuickFixHover};var v6=function(){function t(t,n,i,r){this._editor=t,this._markerDecorationsService=n,this._openerService=i,this._languageFeaturesService=r,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}t.prototype.computeSync=function(t,n){if(!this._editor.hasModel()||t.type!==1&&!t.supportsMarkerHover)return[];var i=this._editor.getModel(),r=t.range.startLineNumber,e=i.getLineMaxColumn(r),o=[];for(var s=0,u=n;s<u.length;s++){var a=u[s];var h=a.range.startLineNumber===r?a.range.startColumn:1,c=a.range.endLineNumber===r?a.range.endColumn:e,f=this._markerDecorationsService.getMarker(i.uri,a);if(!f)continue;var l=new Ir(t.range.startLineNumber,h,t.range.startLineNumber,c);o.push(new f6(this,l,f))}return o};t.prototype.renderHoverParts=function(t,n){var i=this;if(!n.length)return ci.None;var r=new hi;n.forEach((function(n){return t.fragment.appendChild(i.renderMarkerHover(n,r))}));var e=n.length===1?n[0]:n.sort((function(t,n){return dH.compare(t.marker.severity,n.marker.severity)}))[0];return this.renderMarkerStatusbar(t,e,r),r};t.prototype.renderMarkerHover=function(t,n){var i=this;var r=c6("div.hover-row"),e=vh(r,c6("div.marker.hover-contents")),o=t.marker,s=o.source,u=o.message,a=o.code,h=o.relatedInformation;this._editor.applyFontInfo(e);var c=vh(e,c6("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=u,s||a)if(a&&typeof a!="string"){var f=c6("span");s&&(vh(f,c6("span")).innerText=s);var l=vh(f,c6("a.code-link"));l.setAttribute("href",a.target.toString()),n.add(ma(l,"click",(function(t){i._openerService.open(a.target,{allowCommands:!0}),t.preventDefault(),t.stopPropagation()}))),vh(l,c6("span")).innerText=a.value;var v=vh(e,f);v.style.opacity="0.6",v.style.paddingLeft="6px"}else{var f=vh(e,c6("span"));f.style.opacity="0.6",f.style.paddingLeft="6px",f.innerText=s&&a?"".concat(s,"(").concat(a,")"):s||"(".concat(a,")")}if(k(h)){var d=function(t,r,o,s){var u=vh(e,c6("div"));u.style.marginTop="8px";var a=vh(u,c6("a"));a.innerText="".concat(NO(r),"(").concat(o,", ").concat(s,"): "),a.style.cursor="pointer",n.add(ma(a,"click",(function(t){t.stopPropagation(),t.preventDefault(),i._openerService&&i._openerService.open(r,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:o,startColumn:s}}}).catch(Gn)})));var h=vh(u,c6("span"));h.innerText=t,g._editor.applyFontInfo(h)};var g=this;for(var p=0,w=h;p<w.length;p++){var m=w[p],f=m.message,l=m.resource,v=m.startLineNumber,b=m.startColumn;d(f,l,v,b)}}return r};t.prototype.renderMarkerStatusbar=function(t,n,i){var r=this;if(n.marker.severity===dH.Error||n.marker.severity===dH.Warning||n.marker.severity===dH.Info){var e=r6.get(this._editor);e&&t.statusBar.addAction({label:ht(0,"View Problem"),commandId:o6.ID,run:function(){t.hide(),e.showAtMarker(n.marker),r._editor.focus()}})}if(!this._editor.getOption(91)){var o=t.statusBar.append(c6("div"));this.recentMarkerCodeActionsInfo&&(gH.makeKey(this.recentMarkerCodeActionsInfo.marker)===gH.makeKey(n.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(o.textContent=ht(0,"No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);var s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?ci.None:Fs((function(){return o.textContent=ht(0,"Checking for quick fixes...")}),200,i);o.textContent||(o.textContent=" ");var u=this.getCodeActions(n.marker);i.add(ai((function(){return u.cancel()}))),u.then((function(e){if(s.dispose(),r.recentMarkerCodeActionsInfo={marker:n.marker,hasCodeActions:e.validActions.length>0},!r.recentMarkerCodeActionsInfo.hasCodeActions)return e.dispose(),void(o.textContent=ht(0,"No quick fixes available"));o.style.display="none";var u=!1;i.add(ai((function(){u||e.dispose()}))),t.statusBar.addAction({label:ht(0,"Quick Fix..."),commandId:k1,run:function(n){u=!0;var i=w2.get(r._editor),o=ja(n);t.hide(),i==null||i.showCodeActions(l6,e,{x:o.left,y:o.top,width:o.width,height:o.height})}})}),Gn)}};t.prototype.getCodeActions=function(t){var n=this;return Ss((function(i){return M1(n._languageFeaturesService.codeActionProvider,n._editor.getModel(),new Ir(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn),l6,IB.None,i)}))};return t}();v6=a6([h6(1,xw),h6(2,DR),h6(3,tp)],v6);var d6="editor.action.inlineSuggest.commit",g6="editor.action.inlineSuggest.showPrevious",p6="editor.action.inlineSuggest.showNext";var w6,m6=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},b6=function(t,n){return function(i,r){n(i,r,t)}};var y6=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.editor=n,e.model=i,e.instantiationService=r,e.alwaysShowToolbar=bP(e.editor.onDidChangeConfiguration,(function(){return e.editor.getOption(62).showToolbar==="always"})),e.sessionPosition=void 0,e.position=uP(e,(function(t){var n,i,r;var o=(n=e.model.read(t))===null||n===void 0?void 0:n.primaryGhostText.read(t);if(!e.alwaysShowToolbar.read(t)||!o||o.parts.length===0)return e.sessionPosition=void 0,null;var s=o.parts[0].column;e.sessionPosition&&e.sessionPosition.lineNumber!==o.lineNumber&&(e.sessionPosition=void 0);var u=new Tr(o.lineNumber,Math.min(s,(r=(i=e.sessionPosition)===null||i===void 0?void 0:i.column)!==null&&r!==void 0?r:Number.MAX_SAFE_INTEGER));return e.sessionPosition=u,u})),e._register(gP((function(t,i){var r=e.model.read(t);if(!r||!e.alwaysShowToolbar.read(t))return;var o=i.add(e.instantiationService.createInstance(x6,e.editor,!0,e.position,r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.selectedInlineCompletion.map((function(t){var n;return(n=t==null?void 0:t.inlineCompletion.source.inlineCompletions.commands)!==null&&n!==void 0?n:[]}))));n.addContentWidget(o),i.add(ai((function(){return n.removeContentWidget(o)}))),i.add(lP((function(t){e.position.read(t)&&r.lastTriggerKind.read(t)!==Gr.Explicit&&r.triggerExplicitly()})))})));return e}return n}(ci);y6=m6([b6(2,Jh)],y6);var _6=cq("inline-suggestion-hints-next",Hr.chevronRight,ht(0,"Icon for show next parameter hint.")),k6=cq("inline-suggestion-hints-previous",Hr.chevronLeft,ht(0,"Icon for show previous parameter hint."));var x6=w6=function(t){__extends(n,t);function n(i,r,e,o,s,u,a,h,c,f,l){var d=this;d=t.call(this)||this,d.editor=i,d.withBorder=r,d._position=e,d._currentSuggestionIdx=o,d._suggestionCount=s,d._extraCommands=u,d._commandService=a,d.keybindingService=c,d._contextKeyService=f,d._menuService=l,d.id="InlineSuggestionHintsContentWidget"+n.id++,d.allowEditorOverflow=!0,d.suppressMouseDown=!1,d.nodes=Fh("div.inlineSuggestionsHints",{className:d.withBorder?".withBorder":""},[Fh("div@toolBar")]),d.previousAction=d.createCommandAction(g6,ht(0,"Previous"),uc.asClassName(k6)),d.availableSuggestionCountAction=new tc("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),d.nextAction=d.createCommandAction(p6,ht(0,"Next"),uc.asClassName(_6)),d.inlineCompletionsActionsMenus=d._register(d._menuService.createMenu(vf.InlineCompletionsActions,d._contextKeyService)),d.clearAvailableSuggestionCountLabelDebounced=d._register(new Ts((function(){d.availableSuggestionCountAction.label=""}),100)),d.disableButtonsDebounced=d._register(new Ts((function(){d.previousAction.enabled=d.nextAction.enabled=!1}),100)),d.lastCommands=[],d.toolBar=d._register(h.createInstance(D6,d.nodes.toolBar,vf.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:function(t){return t.startsWith("primary")}},actionViewItemProvider:function(t,n){if(t instanceof mf)return h.createInstance(S6,t,void 0);if(t===d.availableSuggestionCountAction){var i=new C6(void 0,t,{label:!0,icon:!1});return i.setClass("availableSuggestionCount"),i}},telemetrySource:"InlineSuggestionToolbar"})),d.toolBar.setPrependedPrimaryActions([d.previousAction,d.availableSuggestionCountAction,d.nextAction]),d._register(d.toolBar.onDidChangeDropdownVisibility((function(t){n._dropDownVisible=t}))),d._register(lP((function(t){d._position.read(t),d.editor.layoutContentWidget(d)}))),d._register(lP((function(t){var n=d._suggestionCount.read(t),i=d._currentSuggestionIdx.read(t);n!==void 0?(d.clearAvailableSuggestionCountLabelDebounced.cancel(),d.availableSuggestionCountAction.label="".concat(i+1,"/").concat(n)):d.clearAvailableSuggestionCountLabelDebounced.schedule(),n!==void 0&&n>1?(d.disableButtonsDebounced.cancel(),d.previousAction.enabled=d.nextAction.enabled=!0):d.disableButtonsDebounced.schedule()}))),d._register(lP((function(t){var n=d._extraCommands.read(t);if(v(d.lastCommands,n))return;d.lastCommands=n;var i=n.map((function(t){return{class:void 0,id:t.id,enabled:!0,tooltip:t.tooltip||"",label:t.title,run:function(n){return d._commandService.executeCommand(t.id)}}}));for(var r=0,e=d.inlineCompletionsActionsMenus.getActions();r<e.length;r++){var o=e[r],s=o[0],u=o[1];for(var a=0,h=u;a<h.length;a++){var c=h[a];c instanceof mf&&i.push(c)}}i.length>0&&i.unshift(new ic),d.toolBar.setAdditionalSecondaryActions(i)})));return d}Object.defineProperty(n,"dropDownVisible",{get:function(){return this._dropDownVisible},enumerable:false,configurable:true});n.prototype.createCommandAction=function(t,n,i){var r=this;var e=new tc(t,n,i,!0,(function(){return r._commandService.executeCommand(t)})),o=this.keybindingService.lookupKeybinding(t,this._contextKeyService);var s=n;return o&&(s=ht(0,"{0} ({1})",n,o.getLabel())),e.tooltip=s,e};n.prototype.getId=function(){return this.id};n.prototype.getDomNode=function(){return this.nodes.root};n.prototype.getPosition=function(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}};return n}(ci);x6._dropDownVisible=!1,x6.id=0,x6=w6=m6([b6(6,ac),b6(7,Jh),b6(8,Yx),b6(9,Gc),b6(10,df)],x6);var C6=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n._className=void 0;return n}n.prototype.setClass=function(t){this._className=t};n.prototype.render=function(n){t.prototype.render.call(this,n),this._className&&n.classList.add(this._className)};n.prototype.updateTooltip=function(){};return n}(fW);var S6=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.updateLabel=function(){var n=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!n)return t.prototype.updateLabel.call(this);if(this.label){var i=Fh("div.keybinding").root;this._register(new tV(i,zt,__assign({disableTitle:!0},XK))).set(n),this.label.textContent=this._action.label,this.label.appendChild(i),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}};n.prototype.updateTooltip=function(){};return n}(HW),D6=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a){var h=this;h=t.call(this,n,__assign({resetMenu:i},r),e,o,s,u,a)||this,h.menuId=i,h.options2=r,h.menuService=e,h.contextKeyService=o,h.menu=h._store.add(h.menuService.createMenu(h.menuId,h.contextKeyService,{emitEventsForSubmenuChanges:!0})),h.additionalActions=[],h.prependedPrimaryActions=[],h._store.add(h.menu.onDidChange((function(){return h.updateToolbar()}))),h.updateToolbar();return h}n.prototype.updateToolbar=function(){var t,n,i,r,e,o,s;var u=[],a=[];PW(this.menu,(t=this.options2)===null||t===void 0?void 0:t.menuOptions,{primary:u,secondary:a},(i=(n=this.options2)===null||n===void 0?void 0:n.toolbarOptions)===null||i===void 0?void 0:i.primaryGroup,(e=(r=this.options2)===null||r===void 0?void 0:r.toolbarOptions)===null||e===void 0?void 0:e.shouldInlineSubmenu,(s=(o=this.options2)===null||o===void 0?void 0:o.toolbarOptions)===null||s===void 0?void 0:s.useSeparatorsInPrimaryActions),a.push.apply(a,this.additionalActions),u.unshift.apply(u,this.prependedPrimaryActions),this.setActions(u,a)};n.prototype.setPrependedPrimaryActions=function(t){v(this.prependedPrimaryActions,t,(function(t,n){return t===n}))||(this.prependedPrimaryActions=t,this.updateToolbar())};n.prototype.setAdditionalSecondaryActions=function(t){v(this.additionalActions,t,(function(t,n){return t===n}))||(this.additionalActions=t,this.updateToolbar())};return n}(WJ);D6=m6([b6(3,df),b6(4,Gc),b6(5,_R),b6(6,Yx),b6(7,_f)],D6);var A6,O6=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},E6=function(t,n){return function(i,r){n(i,r,t)}};var M6=A6=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s._editor=n,s._instantiationService=i,s._openerService=r,s._languageService=e,s._keybindingService=o,s._listenersStore=new hi,s._hoverState={mouseDown:!1,contentHoverFocused:!1,activatedByDecoratorClick:!1},s._reactToEditorMouseMoveRunner=s._register(new Ts((function(){return s._reactToEditorMouseMove(s._mouseMoveEvent)}),0)),s._hookListeners(),s._register(s._editor.onDidChangeConfiguration((function(t){t.hasChanged(60)&&(s._unhookListeners(),s._hookListeners())})));return s}n.get=function(t){return t.getContribution(n.ID)};n.prototype._hookListeners=function(){var t=this;var n=this._editor.getOption(60);this._hoverSettings={enabled:n.enabled,sticky:n.sticky,hidingDelay:n.delay},n.enabled?(this._listenersStore.add(this._editor.onMouseDown((function(n){return t._onEditorMouseDown(n)}))),this._listenersStore.add(this._editor.onMouseUp((function(){return t._onEditorMouseUp()}))),this._listenersStore.add(this._editor.onMouseMove((function(n){return t._onEditorMouseMove(n)}))),this._listenersStore.add(this._editor.onKeyDown((function(n){return t._onKeyDown(n)})))):(this._listenersStore.add(this._editor.onMouseMove((function(n){return t._onEditorMouseMove(n)}))),this._listenersStore.add(this._editor.onKeyDown((function(n){return t._onKeyDown(n)})))),this._listenersStore.add(this._editor.onMouseLeave((function(n){return t._onEditorMouseLeave(n)}))),this._listenersStore.add(this._editor.onDidChangeModel((function(){t._cancelScheduler(),t._hideWidgets()}))),this._listenersStore.add(this._editor.onDidChangeModelContent((function(){return t._cancelScheduler()}))),this._listenersStore.add(this._editor.onDidScrollChange((function(n){return t._onEditorScrollChanged(n)})))};n.prototype._unhookListeners=function(){this._listenersStore.clear()};n.prototype._cancelScheduler=function(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()};n.prototype._onEditorScrollChanged=function(t){(t.scrollTopChanged||t.scrollLeftChanged)&&this._hideWidgets()};n.prototype._onEditorMouseDown=function(t){var n;this._hoverState.mouseDown=!0;var i=t.target;i.type!==9||i.detail!==w5.ID?i.type===12&&i.detail===k5.ID||(i.type!==12&&(this._hoverState.contentHoverFocused=!1),!((n=this._contentWidget)===null||n===void 0)&&n.widget.isResizing||this._hideWidgets()):this._hoverState.contentHoverFocused=!0};n.prototype._onEditorMouseUp=function(){this._hoverState.mouseDown=!1};n.prototype._onEditorMouseLeave=function(t){var n,i;this._cancelScheduler();var r=t.event.browserEvent.relatedTarget;!((n=this._contentWidget)===null||n===void 0)&&n.widget.isResizing||!((i=this._contentWidget)===null||i===void 0)&&i.containsNode(r)||this._hideWidgets()};n.prototype._isMouseOverWidget=function(t){var n,i,r,e,o;var s=t.target,u=this._hoverSettings.sticky;return!(!u||s.type!==9||s.detail!==w5.ID)||!(!u||!(!((n=this._contentWidget)===null||n===void 0)&&n.containsNode((i=t.event.browserEvent.view)===null||i===void 0?void 0:i.document.activeElement))||!((e=(r=t.event.browserEvent.view)===null||r===void 0?void 0:r.getSelection())===null||e===void 0)&&e.isCollapsed)||!(u||s.type!==9||s.detail!==w5.ID||!(!((o=this._contentWidget)===null||o===void 0)&&o.isColorPickerVisible))||!(!u||s.type!==12||s.detail!==k5.ID)};n.prototype._onEditorMouseMove=function(t){var n,i,r,e;if(this._mouseMoveEvent=t,((n=this._contentWidget)===null||n===void 0?void 0:n.isFocused)||((i=this._contentWidget)===null||i===void 0?void 0:i.isResizing)||this._hoverState.mouseDown&&this._hoverState.contentHoverFocused)return;var o=this._hoverSettings.sticky;if(o&&(!((r=this._contentWidget)===null||r===void 0)&&r.isVisibleFromKeyboard))return;if(this._isMouseOverWidget(t))return void this._reactToEditorMouseMoveRunner.cancel();var s=this._hoverSettings.hidingDelay;!((e=this._contentWidget)===null||e===void 0)&&e.isVisible&&o&&s>0?this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(s):this._reactToEditorMouseMove(t)};n.prototype._reactToEditorMouseMove=function(t){var n,i,r,e;if(!t)return;var o=t.target,s=(n=o.element)===null||n===void 0?void 0:n.classList.contains("colorpicker-color-decoration"),u=this._editor.getOption(148),a=this._hoverSettings.enabled,h=this._hoverState.activatedByDecoratorClick;if(s&&(u==="click"&&!h||u==="hover"&&!a||u==="clickAndHover"&&!a&&!h)||!s&&!a&&!h)return void this._hideWidgets();this._getOrCreateContentWidget().showsOrWillShow(t)?(i=this._glyphWidget)===null||i===void 0||i.hide():o.type===2&&o.position&&o.detail.glyphMarginLane?((r=this._contentWidget)===null||r===void 0||r.hide(),this._getOrCreateGlyphWidget().startShowingAt(o.position.lineNumber,o.detail.glyphMarginLane)):o.type===3&&o.position?((e=this._contentWidget)===null||e===void 0||e.hide(),this._getOrCreateGlyphWidget().startShowingAt(o.position.lineNumber,"lineNo")):this._hideWidgets()};n.prototype._onKeyDown=function(t){var n;if(!this._editor.hasModel())return;var i=this._keybindingService.softDispatch(t,this._editor.getDomNode()),r=i.kind===1||i.kind===2&&i.commandId==="editor.action.showHover"&&((n=this._contentWidget)===null||n===void 0?void 0:n.isVisible);t.keyCode===5||t.keyCode===6||t.keyCode===57||t.keyCode===4||r||this._hideWidgets()};n.prototype._hideWidgets=function(){var t,n,i;this._hoverState.mouseDown&&this._hoverState.contentHoverFocused&&(!((t=this._contentWidget)===null||t===void 0)&&t.isColorPickerVisible)||x6.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,this._hoverState.contentHoverFocused=!1,(n=this._glyphWidget)===null||n===void 0||n.hide(),(i=this._contentWidget)===null||i===void 0||i.hide())};n.prototype._getOrCreateContentWidget=function(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(v5,this._editor)),this._contentWidget};n.prototype._getOrCreateGlyphWidget=function(){return this._glyphWidget||(this._glyphWidget=new k5(this._editor,this._languageService,this._openerService)),this._glyphWidget};n.prototype.showContentHover=function(t,n,i,r,e){if(e===void 0){e=!1}this._hoverState.activatedByDecoratorClick=e,this._getOrCreateContentWidget().startShowingAtRange(t,n,i,r)};n.prototype.focus=function(){var t;(t=this._contentWidget)===null||t===void 0||t.focus()};n.prototype.scrollUp=function(){var t;(t=this._contentWidget)===null||t===void 0||t.scrollUp()};n.prototype.scrollDown=function(){var t;(t=this._contentWidget)===null||t===void 0||t.scrollDown()};n.prototype.scrollLeft=function(){var t;(t=this._contentWidget)===null||t===void 0||t.scrollLeft()};n.prototype.scrollRight=function(){var t;(t=this._contentWidget)===null||t===void 0||t.scrollRight()};n.prototype.pageUp=function(){var t;(t=this._contentWidget)===null||t===void 0||t.pageUp()};n.prototype.pageDown=function(){var t;(t=this._contentWidget)===null||t===void 0||t.pageDown()};n.prototype.goToTop=function(){var t;(t=this._contentWidget)===null||t===void 0||t.goToTop()};n.prototype.goToBottom=function(){var t;(t=this._contentWidget)===null||t===void 0||t.goToBottom()};Object.defineProperty(n.prototype,"isColorPickerVisible",{get:function(){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.isColorPickerVisible},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isHoverVisible",{get:function(){var t;return(t=this._contentWidget)===null||t===void 0?void 0:t.isVisible},enumerable:false,configurable:true});n.prototype.dispose=function(){var n,i;t.prototype.dispose.call(this),this._unhookListeners(),this._listenersStore.dispose(),(n=this._glyphWidget)===null||n===void 0||n.dispose(),(i=this._contentWidget)===null||i===void 0||i.dispose()};return n}(ci);var F6;M6.ID="editor.contrib.hover",M6=A6=O6([E6(1,Jh),E6(2,DR),E6(3,Zl),E6(4,Yx)],M6),function(t){t.NoAutoFocus="noAutoFocus",t.FocusIfVisible="focusIfVisible",t.AutoFocusImmediately="autoFocusImmediately"}(F6||(F6={}));Pf(M6.ID,M6,2),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.showHover",label:ht(0,"Show or Focus Hover"),metadata:{description:"Show or Focus Hover",args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[F6.NoAutoFocus,F6.FocusIfVisible,F6.AutoFocusImmediately],enumDescriptions:[ht(0,"The hover will not automatically take focus."),ht(0,"The hover will take focus only if it is already visible."),ht(0,"The hover will automatically take focus when it appears.")],default:F6.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2087),weight:100}})||this}n.prototype.run=function(t,n,i){if(!n.hasModel())return;var r=M6.get(n);if(!r)return;var e=i==null?void 0:i.focus;var o=F6.FocusIfVisible;Object.values(F6).includes(e)?o=e:typeof e=="boolean"&&e&&(o=F6.AutoFocusImmediately);var s=function(t){var i=n.getPosition(),e=new Ir(i.lineNumber,i.column,i.lineNumber,i.column);r.showContentHover(e,1,1,t)},u=n.getOption(2)===2;r.isHoverVisible?o!==F6.NoAutoFocus?r.focus():s(u):s(u||o===F6.AutoFocusImmediately)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.showDefinitionPreviewHover",label:ht(0,"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})||this}n.prototype.run=function(t,n){var i=M6.get(n);if(!i)return;var r=n.getPosition();if(!r)return;var e=new Ir(r.lineNumber,r.column,r.lineNumber,r.column),o=t5.get(n);o&&o.startFindDefinitionFromCursor(r).then((function(){i.showContentHover(e,1,1,!0)}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.scrollUpHover",label:ht(0,"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:$C.hoverFocused,kbOpts:{kbExpr:$C.hoverFocused,primary:16,weight:100}})||this}n.prototype.run=function(t,n){var i=M6.get(n);i&&i.scrollUp()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.scrollDownHover",label:ht(0,"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:$C.hoverFocused,kbOpts:{kbExpr:$C.hoverFocused,primary:18,weight:100}})||this}n.prototype.run=function(t,n){var i=M6.get(n);i&&i.scrollDown()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.scrollLeftHover",label:ht(0,"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:$C.hoverFocused,kbOpts:{kbExpr:$C.hoverFocused,primary:15,weight:100}})||this}n.prototype.run=function(t,n){var i=M6.get(n);i&&i.scrollLeft()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.scrollRightHover",label:ht(0,"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:$C.hoverFocused,kbOpts:{kbExpr:$C.hoverFocused,primary:17,weight:100}})||this}n.prototype.run=function(t,n){var i=M6.get(n);i&&i.scrollRight()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.pageUpHover",label:ht(0,"Page Up Hover"),alias:"Page Up Hover",precondition:$C.hoverFocused,kbOpts:{kbExpr:$C.hoverFocused,primary:11,secondary:[528],weight:100}})||this}n.prototype.run=function(t,n){var i=M6.get(n);i&&i.pageUp()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.pageDownHover",label:ht(0,"Page Down Hover"),alias:"Page Down Hover",precondition:$C.hoverFocused,kbOpts:{kbExpr:$C.hoverFocused,primary:12,secondary:[530],weight:100}})||this}n.prototype.run=function(t,n){var i=M6.get(n);i&&i.pageDown()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.goToTopHover",label:ht(0,"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:$C.hoverFocused,kbOpts:{kbExpr:$C.hoverFocused,primary:14,secondary:[2064],weight:100}})||this}n.prototype.run=function(t,n){var i=M6.get(n);i&&i.goToTop()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.goToBottomHover",label:ht(0,"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:$C.hoverFocused,kbOpts:{kbExpr:$C.hoverFocused,primary:13,secondary:[2066],weight:100}})||this}n.prototype.run=function(t,n){var i=M6.get(n);i&&i.goToBottom()};return n}(Lf)),o5.register(M5),o5.register(v6),Gk((function(t,n){var i=t.getColor(Wm);i&&(n.addRule(".monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(i.transparent(.5),"; }")),n.addRule(".monaco-editor .monaco-hover hr { border-top: 1px solid ".concat(i.transparent(.5),"; }")),n.addRule(".monaco-editor .monaco-hover hr { border-bottom: 0px solid ".concat(i.transparent(.5),"; }")))}));var L6=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._editor=n,i._register(n.onMouseDown((function(t){return i.onMouseDown(t)})));return i}n.prototype.dispose=function(){t.prototype.dispose.call(this)};n.prototype.onMouseDown=function(t){var n=this._editor.getOption(148);if(n!=="click"&&n!=="clickAndHover")return;var i=t.target;if(i.type!==6||!i.detail.injectedText||i.detail.injectedText.options.attachedData!==Z2||!i.range)return;var r=this._editor.getContribution(M6.ID);if(r&&!r.isColorPickerVisible){var e=new Ir(i.range.startLineNumber,i.range.startColumn+1,i.range.endLineNumber,i.range.endColumn+1);r.showContentHover(e,1,0,!1,!0)}};return n}(ci);L6.ID="editor.contrib.colorContribution",Pf(L6.ID,L6,2),o5.register(v4);var j6,R6,T6=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},I6=function(t,n){return function(i,r){n(i,r,t)}};var B6=j6=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this)||this,a._editor=n,a._modelService=r,a._keybindingService=e,a._instantiationService=o,a._languageFeatureService=s,a._languageConfigurationService=u,a._standaloneColorPickerWidget=null,a._standaloneColorPickerVisible=$C.standaloneColorPickerVisible.bindTo(i),a._standaloneColorPickerFocused=$C.standaloneColorPickerFocused.bindTo(i);return a}n.prototype.showOrFocus=function(){var t;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(t=this._standaloneColorPickerWidget)===null||t===void 0||t.focus():this._standaloneColorPickerWidget=new N6(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))};n.prototype.hide=function(){var t;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(t=this._standaloneColorPickerWidget)===null||t===void 0||t.hide(),this._editor.focus()};n.prototype.insertColor=function(){var t;(t=this._standaloneColorPickerWidget)===null||t===void 0||t.updateEditor(),this.hide()};n.get=function(t){return t.getContribution(n.ID)};return n}(ci);B6.ID="editor.contrib.standaloneColorPickerController",B6=j6=T6([I6(1,Gc),I6(2,Yh),I6(3,Yx),I6(4,Jh),I6(5,tp),I6(6,xv)],B6),Pf(B6.ID,B6,1);var N6=R6=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a){var h=this;var c;h=t.call(this)||this,h._editor=n,h._standaloneColorPickerVisible=i,h._standaloneColorPickerFocused=r,h._modelService=o,h._keybindingService=s,h._languageFeaturesService=u,h._languageConfigurationService=a,h.allowEditorOverflow=!0,h._position=void 0,h._body=document.createElement("div"),h._colorHover=null,h._selectionSetInEditor=!1,h._onResult=h._register(new ki),h.onResult=h._onResult.event,h._standaloneColorPickerVisible.set(!0),h._standaloneColorPickerParticipant=e.createInstance(g4,h._editor),h._position=(c=h._editor._getViewModel())===null||c===void 0?void 0:c.getPrimaryCursorState().modelState.position;var f=h._editor.getSelection(),l=f?{startLineNumber:f.startLineNumber,startColumn:f.startColumn,endLineNumber:f.endLineNumber,endColumn:f.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},v=h._register(lh(h._body));h._register(v.onDidBlur((function(t){h.hide()}))),h._register(v.onDidFocus((function(t){h.focus()}))),h._register(h._editor.onDidChangeCursorPosition((function(){h._selectionSetInEditor?h._selectionSetInEditor=!1:h.hide()}))),h._register(h._editor.onMouseMove((function(t){var n;var i=(n=t.target.element)===null||n===void 0?void 0:n.classList;i&&i.contains("colorpicker-color-decoration")&&h.hide()}))),h._register(h.onResult((function(t){h._render(t.value,t.foundInEditor)}))),h._start(l),h._body.style.zIndex="50",h._editor.addContentWidget(h);return h}n.prototype.updateEditor=function(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)};n.prototype.getId=function(){return R6.ID};n.prototype.getDomNode=function(){return this._body};n.prototype.getPosition=function(){if(!this._position)return null;var t=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:t?[1,2]:[2,1],positionAffinity:2}};n.prototype.hide=function(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()};n.prototype.focus=function(){this._standaloneColorPickerFocused.set(!0),this._body.focus()};n.prototype._start=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this._computeAsync(t)];case 1:n=i.sent();n&&this._onResult.fire(new P6(n.result,n.foundInEditor));return[2]}}))}))};n.prototype._computeAsync=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(r){switch(r.label){case 0:if(!this._editor.hasModel())return[2,null];n={range:t,color:{red:0,green:0,blue:0,alpha:1}};return[4,this._standaloneColorPickerParticipant.createColorHover(n,new N2(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider)];case 1:i=r.sent();return[2,i?{result:i.colorHover,foundInEditor:i.foundInEditor}:null]}}))}))};n.prototype._render=function(t,n){var i=this;var r=document.createDocumentFragment();var e;var o={fragment:r,statusBar:this._register(new m5(this._keybindingService)),setColorPicker:function(t){return e=t},onContentsChanged:function(){},hide:function(){return i.hide()}};if(this._colorHover=t,this._register(this._standaloneColorPickerParticipant.renderHoverParts(o,[t])),e===void 0)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this._body.tabIndex=0,this._body.appendChild(r),e.layout();var s=e.body,u=s.saturationBox.domNode.clientWidth,a=s.domNode.clientWidth-u-22-8,h=e.body.enterButton;h==null||h.onClicked((function(){i.updateEditor(),i.hide()}));var c=e.header;c.pickedColorNode.style.width=u+8+"px",c.originalColorNode.style.width=a+"px";var f=e.header.closeButton;f==null||f.onClicked((function(){i.hide()})),n&&(h&&(h.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(t.range)),this._editor.layoutContentWidget(this)};return n}(ci);N6.ID="editor.contrib.standaloneColorPickerWidget",N6=R6=T6([I6(3,Jh),I6(4,Yh),I6(5,Yx),I6(6,tp),I6(7,xv)],N6);var P6=function(){function t(t,n){this.value=t,this.foundInEditor=n}return t}();Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.hideColorPicker",label:ht(0,"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:$C.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})||this}n.prototype.run=function(t,n){var i;(i=B6.get(n))===null||i===void 0||i.hide()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.insertColorWithStandaloneColorPicker",label:ht(0,"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:$C.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})||this}n.prototype.run=function(t,n){var i;(i=B6.get(n))===null||i===void 0||i.insertColor()};return n}(Lf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.showOrFocusStandaloneColorPicker",title:__assign(__assign({},ct(0,"Show or Focus Standalone Color Picker")),{mnemonicTitle:ht(0,"&&Show or Focus Standalone Color Picker")}),precondition:void 0,menu:[{id:vf.CommandPalette}]})||this}n.prototype.runEditorCommand=function(t,n){var i;(i=B6.get(n))===null||i===void 0||i.showOrFocus()};return n}(Rf));var W6=function(){function t(t,n,i){this.languageConfigurationService=i,this._selection=t,this._insertSpace=n,this._usedEndToken=null}t._haystackHasNeedleAtOffset=function(t,n,i){if(i<0)return!1;var r=n.length;if(i+r>t.length)return!1;for(var e=0;e<r;e++){var o=t.charCodeAt(i+e),s=n.charCodeAt(e);if(o!==s&&!(o>=65&&o<=90&&o+32===s||s>=65&&s<=90&&s+32===o))return!1}return!0};t.prototype._createOperationsForBlockComment=function(n,i,r,e,o,s){var u=n.startLineNumber,a=n.startColumn,h=n.endLineNumber,c=n.endColumn,f=o.getLineContent(u),l=o.getLineContent(h);var v,d=f.lastIndexOf(i,a-1+i.length),g=l.indexOf(r,c-1-r.length);if(d!==-1&&g!==-1)if(u===h)f.substring(d+i.length,g).indexOf(r)>=0&&(d=-1,g=-1);else{var p=f.substring(d+i.length),w=l.substring(0,g);(p.indexOf(r)>=0||w.indexOf(r)>=0)&&(d=-1,g=-1)}d!==-1&&g!==-1?(e&&d+i.length<f.length&&f.charCodeAt(d+i.length)===32&&(i+=" "),e&&g>0&&l.charCodeAt(g-1)===32&&(r=" "+r,g-=1),v=t._createRemoveBlockCommentOperations(new Ir(u,d+i.length+1,h,g+1),i,r)):(v=t._createAddBlockCommentOperations(n,i,r,this._insertSpace),this._usedEndToken=v.length===1?r:null);for(var m=0,b=v;m<b.length;m++){var p=b[m];s.addTrackedEditOperation(p.range,p.text)}};t._createRemoveBlockCommentOperations=function(t,n,i){var r=[];return Ir.isEmpty(t)?r.push(hB.delete(new Ir(t.startLineNumber,t.startColumn-n.length,t.endLineNumber,t.endColumn+i.length))):(r.push(hB.delete(new Ir(t.startLineNumber,t.startColumn-n.length,t.startLineNumber,t.startColumn))),r.push(hB.delete(new Ir(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn+i.length)))),r};t._createAddBlockCommentOperations=function(t,n,i,r){var e=[];return Ir.isEmpty(t)?e.push(hB.replace(new Ir(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn),n+"  "+i)):(e.push(hB.insert(new Tr(t.startLineNumber,t.startColumn),n+(r?" ":""))),e.push(hB.insert(new Tr(t.endLineNumber,t.endColumn),(r?" ":"")+i))),e};t.prototype.getEditOperations=function(t,n){var i=this._selection.startLineNumber,r=this._selection.startColumn;t.tokenization.tokenizeIfCheap(i);var e=t.getLanguageIdAtPosition(i,r),o=this.languageConfigurationService.getLanguageConfiguration(e).comments;o&&o.blockCommentStartToken&&o.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,o.blockCommentStartToken,o.blockCommentEndToken,this._insertSpace,t,n)};t.prototype.computeCursorState=function(t,n){var i=n.getInverseEditOperations();if(i.length===2){var r=i[0],e=i[1];return new Br(r.range.endLineNumber,r.range.endColumn,e.range.startLineNumber,e.range.startColumn)}{var r=i[0].range,e=this._usedEndToken?-this._usedEndToken.length-1:0;return new Br(r.endLineNumber,r.endColumn+e,r.endLineNumber,r.endColumn+e)}};return t}();var H6=function(){function t(t,n,i,r,e,o,s){this.languageConfigurationService=t,this._selection=n,this._indentSize=i,this._type=r,this._insertSpace=e,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=s||!1}t._gatherPreflightCommentStrings=function(t,n,i,r){t.tokenization.tokenizeIfCheap(n);var e=t.getLanguageIdAtPosition(n,1),o=r.getLanguageConfiguration(e).comments,s=o?o.lineCommentToken:null;if(!s)return null;var u=[];for(var a=0,h=i-n+1;a<h;a++)u[a]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return u};t._analyzeLines=function(t,n,i,r,e,o,s,u){var a,h=!0;a=t===0||t!==1;for(var c=0,f=r.length;c<f;c++){var l=r[c],v=e+c;if(v===e&&s){l.ignore=!0;continue}var d=i.getLineContent(v),g=vo(d);if(g!==-1){if(h=!1,l.ignore=!1,l.commentStrOffset=g,a&&!W6._haystackHasNeedleAtOffset(d,l.commentStr,g)&&(t===0?a=!1:t===1||(l.ignore=!0)),a&&n){var p=g+l.commentStrLength;p<d.length&&d.charCodeAt(p)===32&&(l.commentStrLength+=1)}}else l.ignore=o,l.commentStrOffset=d.length}if(t===0&&h){a=!1;for(var c=0,f=r.length;c<f;c++)r[c].ignore=!1}return{supported:!0,shouldRemoveComments:a,lines:r}};t._gatherPreflightData=function(n,i,r,e,o,s,u,a){var h=t._gatherPreflightCommentStrings(r,e,o,a);return h===null?{supported:!1}:t._analyzeLines(n,i,r,h,e,s,u,a)};t.prototype._executeLineComments=function(n,i,r,e){var o;r.shouldRemoveComments?o=t._createRemoveLineCommentsOperations(r.lines,e.startLineNumber):(t._normalizeInsertionPoint(n,r.lines,e.startLineNumber,this._indentSize),o=this._createAddLineCommentsOperations(r.lines,e.startLineNumber));var s=new Tr(e.positionLineNumber,e.positionColumn);for(var u=0,a=o.length;u<a;u++)i.addEditOperation(o[u].range,o[u].text),Ir.isEmpty(o[u].range)&&Ir.getStartPosition(o[u].range).equals(s)&&n.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(o[u].text||"").length);this._selectionId=i.trackSelection(e)};t.prototype._attemptRemoveBlockComment=function(t,n,i,r){var e=n.startLineNumber,o=n.endLineNumber;var s=r.length+Math.max(t.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.startColumn);var u=t.getLineContent(e).lastIndexOf(i,s-1),a=t.getLineContent(o).indexOf(r,n.endColumn-1-i.length);return u!==-1&&a===-1&&(a=t.getLineContent(e).indexOf(r,u+i.length),o=e),u===-1&&a!==-1&&(u=t.getLineContent(o).lastIndexOf(i,a),e=o),!n.isEmpty()||u!==-1&&a!==-1||(u=t.getLineContent(e).indexOf(i),u!==-1&&(a=t.getLineContent(e).indexOf(r,u+i.length))),u!==-1&&t.getLineContent(e).charCodeAt(u+i.length)===32&&(i+=" "),a!==-1&&t.getLineContent(o).charCodeAt(a-1)===32&&(r=" "+r,a-=1),u!==-1&&a!==-1?W6._createRemoveBlockCommentOperations(new Ir(e,u+i.length+1,o,a+1),i,r):null};t.prototype._executeBlockComment=function(t,n,i){t.tokenization.tokenizeIfCheap(i.startLineNumber);var r=t.getLanguageIdAtPosition(i.startLineNumber,1),e=this.languageConfigurationService.getLanguageConfiguration(r).comments;if(!e||!e.blockCommentStartToken||!e.blockCommentEndToken)return;var o=e.blockCommentStartToken,s=e.blockCommentEndToken;var u=this._attemptRemoveBlockComment(t,i,o,s);if(!u){if(i.isEmpty()){var a=t.getLineContent(i.startLineNumber);var h=vo(a);h===-1&&(h=a.length),u=W6._createAddBlockCommentOperations(new Ir(i.startLineNumber,h+1,i.startLineNumber,a.length+1),o,s,this._insertSpace)}else u=W6._createAddBlockCommentOperations(new Ir(i.startLineNumber,t.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),o,s,this._insertSpace);u.length===1&&(this._deltaColumn=o.length+1)}this._selectionId=n.trackSelection(i);for(var c=0,f=u;c<f.length;c++){var a=f[c];n.addEditOperation(a.range,a.text)}};t.prototype.getEditOperations=function(n,i){var r=this._selection;if(this._moveEndPositionDown=!1,r.startLineNumber===r.endLineNumber&&this._ignoreFirstLine)return i.addEditOperation(new Ir(r.startLineNumber,n.getLineMaxColumn(r.startLineNumber),r.startLineNumber+1,1),r.startLineNumber===n.getLineCount()?"":"\n"),void(this._selectionId=i.trackSelection(r));r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,n.getLineMaxColumn(r.endLineNumber-1)));var e=t._gatherPreflightData(this._type,this._insertSpace,n,r.startLineNumber,r.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return e.supported?this._executeLineComments(n,i,e,r):this._executeBlockComment(n,i,r)};t.prototype.computeCursorState=function(t,n){var i=n.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new Br(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)};t._createRemoveLineCommentsOperations=function(t,n){var i=[];for(var r=0,e=t.length;r<e;r++){var o=t[r];o.ignore||i.push(hB.delete(new Ir(n+r,o.commentStrOffset+1,n+r,o.commentStrOffset+o.commentStrLength+1)))}return i};t.prototype._createAddLineCommentsOperations=function(t,n){var i=[],r=this._insertSpace?" ":"";for(var e=0,o=t.length;e<o;e++){var s=t[e];s.ignore||i.push(hB.insert(new Tr(n+e,s.commentStrOffset+1),s.commentStr+r))}return i};t.nextVisibleColumn=function(t,n,i,r){return i?t+(n-t%n):t+r};t._normalizeInsertionPoint=function(n,i,r,e){var o,s,u=1073741824;for(var a=0,h=i.length;a<h;a++){if(i[a].ignore)continue;var c=n.getLineContent(r+a);var f=0;for(var l=0,v=i[a].commentStrOffset;f<u&&l<v;l++)f=t.nextVisibleColumn(f,e,c.charCodeAt(l)===9,1);f<u&&(u=f)}u=Math.floor(u/e)*e;for(var a=0,h=i.length;a<h;a++){if(i[a].ignore)continue;var c=n.getLineContent(r+a);var f=0;for(o=0,s=i[a].commentStrOffset;f<u&&o<s;o++)f=t.nextVisibleColumn(f,e,c.charCodeAt(o)===9,1);i[a].commentStrOffset=f>u?o-1:o}};return t}();var z6=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r._type=n;return r}n.prototype.run=function(t,n){var i=t.get(xv);if(!n.hasModel())return;var r=[],e=n.getModel().getOptions(),o=n.getOption(23),s=n.getSelections().map((function(t,n){return{selection:t,index:n,ignoreFirstLine:!1}}));s.sort((function(t,n){return Ir.compareRangesUsingStarts(t.selection,n.selection)}));var u=s[0];for(var a=1;a<s.length;a++){var h=s[a];u.selection.endLineNumber===h.selection.startLineNumber&&(u.index<h.index?h.ignoreFirstLine=!0:(u.ignoreFirstLine=!0,u=h))}for(var c=0,f=s;c<f.length;c++){var a=f[c];r.push(new H6(i,a.selection,e.indentSize,this._type,o.insertSpace,o.ignoreEmptyLines,a.ignoreFirstLine))}n.pushUndoStop(),n.executeCommands(this.id,r),n.pushUndoStop()};return n}(Lf);Bf(function(t){__extends(n,t);function n(){return t.call(this,0,{id:"editor.action.commentLine",label:ht(0,"Toggle Line Comment"),alias:"Toggle Line Comment",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:vf.MenubarEditMenu,group:"5_insert",title:ht(0,"&&Toggle Line Comment"),order:1}})||this}return n}(z6)),Bf(function(t){__extends(n,t);function n(){return t.call(this,1,{id:"editor.action.addCommentLine",label:ht(0,"Add Line Comment"),alias:"Add Line Comment",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2081),weight:100}})||this}return n}(z6)),Bf(function(t){__extends(n,t);function n(){return t.call(this,2,{id:"editor.action.removeCommentLine",label:ht(0,"Remove Line Comment"),alias:"Remove Line Comment",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2099),weight:100}})||this}return n}(z6)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.blockComment",label:ht(0,"Toggle Block Comment"),alias:"Toggle Block Comment",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:vf.MenubarEditMenu,group:"5_insert",title:ht(0,"Toggle &&Block Comment"),order:2}})||this}n.prototype.run=function(t,n){var i=t.get(xv);if(!n.hasModel())return;var r=n.getOption(23),e=[],o=n.getSelections();for(var s=0,u=o;s<u.length;s++){var a=u[s];e.push(new W6(a,r.insertSpace,i))}n.pushUndoStop(),n.executeCommands(this.id,e),n.pushUndoStop()};return n}(Lf));var U6,K6=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},V6=function(t,n){return function(i,r){n(i,r,t)}};var q6=U6=function(){function t(t,n,i,r,e,o,s,u){var a=this;this._contextMenuService=n,this._contextViewService=i,this._contextKeyService=r,this._keybindingService=e,this._menuService=o,this._configurationService=s,this._workspaceContextService=u,this._toDispose=new hi,this._contextMenuIsBeingShownCount=0,this._editor=t,this._toDispose.add(this._editor.onContextMenu((function(t){return a._onContextMenu(t)}))),this._toDispose.add(this._editor.onMouseWheel((function(t){if(a._contextMenuIsBeingShownCount>0){var n=a._contextViewService.getContextViewElement(),i=t.srcElement;i.shadowRoot&&Ua(n)===i.shadowRoot||a._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((function(t){a._editor.getOption(24)&&t.keyCode===58&&(t.preventDefault(),t.stopPropagation(),a.showContextMenu())})))}t.get=function(n){return n.getContribution(t.ID)};t.prototype._onContextMenu=function(t){if(!this._editor.hasModel())return;if(!this._editor.getOption(24))return this._editor.focus(),void(t.target.position&&!this._editor.getSelection().containsPosition(t.target.position)&&this._editor.setPosition(t.target.position));if(t.target.type===12||t.target.type===6&&t.target.detail.injectedText)return;if(t.event.preventDefault(),t.event.stopPropagation(),t.target.type===11)return this._showScrollbarContextMenu(t.event);if(t.target.type!==6&&t.target.type!==7&&t.target.type!==1)return;if(this._editor.focus(),t.target.position){var n=!1;for(var i=0,r=this._editor.getSelections();i<r.length;i++){var e=r[i];if(e.containsPosition(t.target.position)){n=!0;break}}n||this._editor.setPosition(t.target.position)}var o=null;t.target.type!==1&&(o=t.event),this.showContextMenu(o)};t.prototype.showContextMenu=function(t){if(!this._editor.getOption(24)||!this._editor.hasModel())return;var n=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?vf.SimpleEditorContext:vf.EditorContext);n.length>0&&this._doShowContextMenu(n,t)};t.prototype._getMenuActions=function(t,n){var i=[],r=this._menuService.createMenu(n,this._contextKeyService),e=r.getActions({arg:t.uri});r.dispose();for(var o=0,s=e;o<s.length;o++){var u=s[o];var a=u[1];var h=0;for(var c=0,f=a;c<f.length;c++){var l=f[c];if(l instanceof wf){var v=this._getMenuActions(t,l.item.submenu);v.length>0&&(i.push(new rc(l.id,l.label,v)),h++)}else i.push(l),h++}h&&i.push(new ic)}return i.length&&i.pop(),i};t.prototype._doShowContextMenu=function(t,n){var i=this;if(n===void 0){n=null}if(!this._editor.hasModel())return;var r=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});var e=n;if(!e){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();var o=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),s=ja(this._editor.getDomNode()),u=s.left+o.left,a=s.top+o.top+o.height;e={x:u,y:a}}var h=this._editor.getOption(127)&&!It;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:h?this._editor.getDomNode():void 0,getAnchor:function(){return e},getActions:function(){return t},getActionViewItem:function(t){var n=i._keybindingFor(t);if(n)return new fW(t,t,{label:!0,keybinding:n.getLabel(),isMenu:!0});var r=t;return typeof r.getActionViewItem=="function"?r.getActionViewItem():new fW(t,t,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:function(t){return i._keybindingFor(t)},onHide:function(t){i._contextMenuIsBeingShownCount--,i._editor.updateOptions({hover:r})}})};t.prototype._showScrollbarContextMenu=function(t){var n=this;if(!this._editor.hasModel()||this._workspaceContextService.getWorkspace().id===ZB)return;var i=this._editor.getOption(73);var r=0;var e=function(t){return{id:"menu-action-"+ ++r,label:t.label,tooltip:"",class:void 0,enabled:t.enabled===void 0||t.enabled,checked:t.checked,run:t.run}},o=function(t,i,o,s,u){if(!i)return e({label:t,enabled:i,run:function(){}});var a=function(t){return function(){n._configurationService.updateValue(o,t)}},h=[];for(var c=0,f=u;c<f.length;c++){var l=f[c];h.push(e({label:l.label,checked:s===l.value,run:a(l.value)}))}return function(t,n){return new rc("menu-action-"+ ++r,t,n,void 0)}(t,h)},s=[];s.push(e({label:ht(0,"Minimap"),checked:i.enabled,run:function(){n._configurationService.updateValue("editor.minimap.enabled",!i.enabled)}})),s.push(new ic),s.push(e({label:ht(0,"Render Characters"),enabled:i.enabled,checked:i.renderCharacters,run:function(){n._configurationService.updateValue("editor.minimap.renderCharacters",!i.renderCharacters)}})),s.push(o(ht(0,"Vertical size"),i.enabled,"editor.minimap.size",i.size,[{label:ht(0,"Proportional"),value:"proportional"},{label:ht(0,"Fill"),value:"fill"},{label:ht(0,"Fit"),value:"fit"}])),s.push(o(ht(0,"Slider"),i.enabled,"editor.minimap.showSlider",i.showSlider,[{label:ht(0,"Mouse Over"),value:"mouseover"},{label:ht(0,"Always"),value:"always"}]));var u=this._editor.getOption(127)&&!It;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:u?this._editor.getDomNode():void 0,getAnchor:function(){return t},getActions:function(){return s},onHide:function(t){n._contextMenuIsBeingShownCount--,n._editor.focus()}})};t.prototype._keybindingFor=function(t){return this._keybindingService.lookupKeybinding(t.id)};t.prototype.dispose=function(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()};return t}();q6.ID="editor.contrib.contextmenu",q6=U6=K6([V6(1,_R),V6(2,yR),V6(3,Gc),V6(4,Yx),V6(5,df),V6(6,Kl),V6(7,KB)],q6);Pf(q6.ID,q6,2),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.showContextMenu",label:ht(0,"Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:$C.textInputFocus,primary:1092,weight:100}})||this}n.prototype.run=function(t,n){var i;(i=q6.get(n))===null||i===void 0||i.showContextMenu()};return n}(Lf));var G6=function(){function t(t){this.selections=t}t.prototype.equals=function(t){var n=this.selections.length;if(n!==t.selections.length)return!1;for(var i=0;i<n;i++)if(!this.selections[i].equalsSelection(t.selections[i]))return!1;return!0};return t}();var $6=function(){function t(t,n,i){this.cursorState=t,this.scrollTop=n,this.scrollLeft=i}return t}();var J6=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._editor=n,i._isCursorUndoRedo=!1,i._undoStack=[],i._redoStack=[],i._register(n.onDidChangeModel((function(t){i._undoStack=[],i._redoStack=[]}))),i._register(n.onDidChangeModelContent((function(t){i._undoStack=[],i._redoStack=[]}))),i._register(n.onDidChangeCursorSelection((function(t){if(i._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;var r=new G6(t.oldSelections);i._undoStack.length>0&&i._undoStack[i._undoStack.length-1].cursorState.equals(r)||(i._undoStack.push(new $6(r,n.getScrollTop(),n.getScrollLeft())),i._redoStack=[],i._undoStack.length>50&&i._undoStack.shift())})));return i}n.get=function(t){return t.getContribution(n.ID)};n.prototype.cursorUndo=function(){this._editor.hasModel()&&this._undoStack.length!==0&&(this._redoStack.push(new $6(new G6(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))};n.prototype.cursorRedo=function(){this._editor.hasModel()&&this._redoStack.length!==0&&(this._undoStack.push(new $6(new G6(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))};n.prototype._applyState=function(t){this._isCursorUndoRedo=!0,this._editor.setSelections(t.cursorState.selections),this._editor.setScrollPosition({scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),this._isCursorUndoRedo=!1};return n}(ci);J6.ID="editor.contrib.cursorUndoRedoController";Pf(J6.ID,J6,0),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"cursorUndo",label:ht(0,"Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:$C.textInputFocus,primary:2099,weight:100}})||this}n.prototype.run=function(t,n,i){var r;(r=J6.get(n))===null||r===void 0||r.cursorUndo()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"cursorRedo",label:ht(0,"Cursor Redo"),alias:"Cursor Redo",precondition:void 0})||this}n.prototype.run=function(t,n,i){var r;(r=J6.get(n))===null||r===void 0||r.cursorRedo()};return n}(Lf));var Z6=function(){function t(t,n,i){this.selection=t,this.targetPosition=n,this.copy=i,this.targetSelection=null}t.prototype.getEditOperations=function(t,n){var i=t.getValueInRange(this.selection);this.copy||n.addEditOperation(this.selection,null),n.addEditOperation(new Ir(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new Br(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new Br(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new Br(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new Br(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new Br(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection};t.prototype.computeCursorState=function(t,n){return this.targetSelection};return t}();function Q6(t){return Ft?t.altKey:t.ctrlKey}var Y6=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._editor=n,i._dndDecorationIds=i._editor.createDecorationsCollection(),i._register(i._editor.onMouseDown((function(t){return i._onEditorMouseDown(t)}))),i._register(i._editor.onMouseUp((function(t){return i._onEditorMouseUp(t)}))),i._register(i._editor.onMouseDrag((function(t){return i._onEditorMouseDrag(t)}))),i._register(i._editor.onMouseDrop((function(t){return i._onEditorMouseDrop(t)}))),i._register(i._editor.onMouseDropCanceled((function(){return i._onEditorMouseDropCanceled()}))),i._register(i._editor.onKeyDown((function(t){return i.onEditorKeyDown(t)}))),i._register(i._editor.onKeyUp((function(t){return i.onEditorKeyUp(t)}))),i._register(i._editor.onDidBlurEditorWidget((function(){return i.onEditorBlur()}))),i._register(i._editor.onDidBlurEditorText((function(){return i.onEditorBlur()}))),i._mouseDown=!1,i._modifierPressed=!1,i._dragSelection=null;return i}n.prototype.onEditorBlur=function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1};n.prototype.onEditorKeyDown=function(t){this._editor.getOption(35)&&!this._editor.getOption(22)&&(Q6(t)&&(this._modifierPressed=!0),this._mouseDown&&Q6(t)&&this._editor.updateOptions({mouseStyle:"copy"}))};n.prototype.onEditorKeyUp=function(t){this._editor.getOption(35)&&!this._editor.getOption(22)&&(Q6(t)&&(this._modifierPressed=!1),this._mouseDown&&t.keyCode===n.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))};n.prototype._onEditorMouseDown=function(t){this._mouseDown=!0};n.prototype._onEditorMouseUp=function(t){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})};n.prototype._onEditorMouseDrag=function(t){var n=t.target;if(this._dragSelection===null){var i=(this._editor.getSelections()||[]).filter((function(t){return n.position&&t.containsPosition(n.position)}));if(i.length!==1)return;this._dragSelection=i[0]}Q6(t.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),n.position&&(this._dragSelection.containsPosition(n.position)?this._removeDecoration():this.showAt(n.position))};n.prototype._onEditorMouseDropCanceled=function(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1};n.prototype._onEditorMouseDrop=function(t){if(t.target&&(this._hitContent(t.target)||this._hitMargin(t.target))&&t.target.position){var i=new Tr(t.target.position.lineNumber,t.target.position.column);if(this._dragSelection===null){var r=null;if(t.event.shiftKey){var e=this._editor.getSelection();if(e){var o=e.selectionStartLineNumber,s=e.selectionStartColumn;r=[new Br(o,s,i.lineNumber,i.column)]}}else r=(this._editor.getSelections()||[]).map((function(t){return t.containsPosition(i)?new Br(i.lineNumber,i.column,i.lineNumber,i.column):t}));this._editor.setSelections(r||[],"mouse",3)}else(!this._dragSelection.containsPosition(i)||(Q6(t.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(i)||this._dragSelection.getStartPosition().equals(i)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(n.ID,new Z6(this._dragSelection,i,Q6(t.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1};n.prototype.showAt=function(t){this._dndDecorationIds.set([{range:new Ir(t.lineNumber,t.column,t.lineNumber,t.column),options:n._DECORATION_OPTIONS}]),this._editor.revealPosition(t,1)};n.prototype._removeDecoration=function(){this._dndDecorationIds.clear()};n.prototype._hitContent=function(t){return t.type===6||t.type===7};n.prototype._hitMargin=function(t){return t.type===2||t.type===3||t.type===4};n.prototype.dispose=function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,t.prototype.dispose.call(this)};return n}(ci);var X6;Y6.ID="editor.contrib.dragAndDrop",Y6.TRIGGER_KEY_VALUE=Ft?6:5,Y6._DECORATION_OPTIONS=PM.register({description:"dnd-target",className:"dnd-target"}),Pf(Y6.ID,Y6,2),Pf(o1.ID,o1,0),yG(x0),If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:i1,precondition:r1,kbOpts:{weight:100,primary:2137}})||this}n.prototype.runEditorCommand=function(t,n){var i;return(i=o1.get(n))===null||i===void 0?void 0:i.changePasteType()};return n}(Ff))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.hidePasteWidget",precondition:r1,kbOpts:{weight:100,primary:9}})||this}n.prototype.runEditorCommand=function(t,n){var i;(i=o1.get(n))===null||i===void 0||i.clearWidgets()};return n}(Ff))),Bf((X6=function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.pasteAs",label:ht(0,"Paste As..."),alias:"Paste As...",precondition:$C.writable,metadata:{description:"Paste as",args:[{name:"args",schema:n.argsSchema}]}})||this}n.prototype.run=function(t,n,i){var r;var e=typeof(i==null?void 0:i.kind)=="string"?i.kind:void 0;return!e&&i&&(e=typeof i.id=="string"?i.id:void 0),(r=o1.get(n))===null||r===void 0?void 0:r.pasteAs(e?new s0(e):void 0)};return n}(Lf),X6.argsSchema={type:"object",properties:{kind:{type:"string",description:ht(0,"The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},X6)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.pasteAsText",label:ht(0,"Paste as Text"),alias:"Paste as Text",precondition:$C.writable})||this}n.prototype.run=function(t,n){var i;return(i=o1.get(n))===null||i===void 0?void 0:i.pasteAs({providerId:w0.id})};return n}(Lf));var t7=function(){function t(t){this.identifier=t}return t}();var n7=Zh("treeViewsDndService");Xl(n7,function(){function t(){this._dragOperations=new Map}t.prototype.removeDragOperationTransfer=function(t){if(t&&this._dragOperations.has(t)){var n=this._dragOperations.get(t);return this._dragOperations.delete(t),n}};return t}(),1);var i7,r7=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},e7=function(t,n){return function(i,r){n(i,r,t)}};var o7="editor.experimental.dropIntoEditor.defaultProvider",s7="editor.changeDropType",u7=new qc("dropWidgetVisible",!1,ht(0,"Whether the drop widget is showing"));var a7=i7=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s._configService=r,s._languageFeaturesService=e,s._treeViewsDragAndDropService=o,s.treeItemsTransfer=h0.getInstance(),s._dropProgressManager=s._register(i.createInstance(z0,"dropIntoEditor",n)),s._postDropWidgetManager=s._register(i.createInstance(Y0,"dropIntoEditor",n,u7,{id:s7,label:ht(0,"Show drop options...")})),s._register(n.onDropIntoEditor((function(t){return s.onDropIntoEditor(n,t.position,t.event)})));return s}n.get=function(t){return t.getContribution(i7.ID)};n.prototype.clearWidgets=function(){this._postDropWidgetManager.clear()};n.prototype.changeDropType=function(){this._postDropWidgetManager.tryShowSelector()};n.prototype.onDropIntoEditor=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e;var o=this;return __generator(this,(function(s){if(!i.dataTransfer||!t.hasModel())return[2];(r=this._currentOperation)===null||r===void 0||r.cancel(),t.focus(),t.setPosition(n);e=Ss((function(r){return __awaiter(o,void 0,void 0,(function(){var o,s,u,a,h,c,f;var l=this;return __generator(this,(function(v){switch(v.label){case 0:o=new YQ(t,1,void 0,r);v.label=1;case 1:v.trys.push([1,,6,7]);return[4,this.extractDataTransferData(i)];case 2:s=v.sent();if(s.size===0||o.token.isCancellationRequested)return[2];u=t.getModel();if(!u)return[2];a=this._languageFeaturesService.documentOnDropEditProvider.ordered(u).filter((function(t){return!t.dropMimeTypes||t.dropMimeTypes.some((function(t){return s.matches(t)}))}));return[4,this.getDropEdits(a,u,n,s,o)];case 3:h=v.sent();if(o.token.isCancellationRequested)return[2];if(!h.length)return[3,5];c=this.getInitialActiveEditIndex(u,h),f=t.getOption(36).showDropSelector==="afterDrop";return[4,this._postDropWidgetManager.applyEditAndShowIfNeeded([Ir.fromPositions(n)],{activeEditIndex:c,allEdits:h},f,(function(t){return __awaiter(l,void 0,void 0,(function(){return __generator(this,(function(n){return[2,t]}))}))}),r)];case 4:v.sent();v.label=5;case 5:return[3,7];case 6:o.dispose(),this._currentOperation===e&&(this._currentOperation=void 0);return[7];case 7:return[2]}}))}))}));this._dropProgressManager.showWhile(n,ht(0,"Running drop handlers. Click to cancel"),e),this._currentOperation=e;return[2]}))}))};n.prototype.getDropEdits=function(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o;var s=this;return __generator(this,(function(u){switch(u.label){case 0:return[4,Ds(Promise.all(t.map((function(t){return __awaiter(s,void 0,void 0,(function(){var o,s;return __generator(this,(function(u){switch(u.label){case 0:u.trys.push([0,2,,3]);return[4,t.provideDocumentOnDropEdits(n,i,r,e.token)];case 1:o=u.sent();return[2,o==null?void 0:o.map((function(n){return __assign(__assign({},n),{providerId:t.id})}))];case 2:s=u.sent();console.error(s);return[3,3];case 3:return[2]}}))}))}))),e.token)];case 1:o=u.sent();return[2,B0(b(o!==null&&o!==void 0?o:[]).flat())]}}))}))};n.prototype.getInitialActiveEditIndex=function(t,n){var i=this._configService.getValue(o7,{resource:t.uri});var r=function(t,i){var r=new s0(i),e=n.findIndex((function(n){return r.value===n.providerId&&n.handledMimeType&&r0(t,[n.handledMimeType])}));if(e>=0)return{value:e}};for(var e=0,o=Object.entries(i);e<o.length;e++){var s=o[e],u=s[0],a=s[1];var h=r(u,a);if(typeof h==="object")return h.value}return 0};n.prototype.extractDataTransferData=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o,s,u,a,h,c,f;return __generator(this,(function(l){switch(l.label){case 0:if(!t.dataTransfer)return[2,new n0];n=v0(t.dataTransfer);if(!this.treeItemsTransfer.hasData(t7.prototype))return[3,4];i=this.treeItemsTransfer.getData(t7.prototype);if(!Array.isArray(i))return[3,4];r=0,e=i;l.label=1;case 1:if(!(r<e.length))return[3,4];o=e[r];return[4,this._treeViewsDragAndDropService.removeDragOperationTransfer(o.identifier)];case 2:s=l.sent();if(s)for(u=0,a=s;u<a.length;u++){h=a[u],c=h[0],f=h[1];n.replace(c,f)}l.label=3;case 3:r++;return[3,1];case 4:return[2,n]}}))}))};return n}(ci);a7.ID="editor.contrib.dropIntoEditorController",a7=i7=r7([e7(1,Jh),e7(2,Kl),e7(3,tp),e7(4,n7)],a7),Pf(a7.ID,a7,2),yG(k0),If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:s7,precondition:u7,kbOpts:{weight:100,primary:2137}})||this}n.prototype.runEditorCommand=function(t,n,i){var r;(r=a7.get(n))===null||r===void 0||r.changeDropType()};return n}(Ff))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.hideDropWidget",precondition:u7,kbOpts:{weight:100,primary:9}})||this}n.prototype.runEditorCommand=function(t,n,i){var r;(r=a7.get(n))===null||r===void 0||r.clearWidgets()};return n}(Ff))),of.as(ev).registerConfiguration(__assign(__assign({},iB),{properties:(u={},u[o7]={type:"object",scope:5,description:ht(0,"Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}},u)}));var h7=function(){function t(t){this._editor=t,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}t.prototype.dispose=function(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null};t.prototype.reset=function(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null};t.prototype.getCount=function(){return this._decorations.length};t.prototype.getFindScope=function(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null};t.prototype.getFindScopes=function(){var t=this;if(this._findScopeDecorationIds.length){var n=this._findScopeDecorationIds.map((function(n){return t._editor.getModel().getDecorationRange(n)})).filter((function(t){return!!t}));if(n.length)return n}return null};t.prototype.getStartPosition=function(){return this._startPosition};t.prototype.setStartPosition=function(t){this._startPosition=t,this.setCurrentFindMatch(null)};t.prototype._getDecorationIndex=function(t){var n=this._decorations.indexOf(t);return n>=0?n+1:1};t.prototype.getDecorationRangeAt=function(t){var n=t<this._decorations.length?this._decorations[t]:null;return n?this._editor.getModel().getDecorationRange(n):null};t.prototype.getCurrentMatchesPosition=function(n){var i=this._editor.getModel().getDecorationsInRange(n);for(var r=0,e=i;r<e.length;r++){var o=e[r];var s=o.options;if(s===t._FIND_MATCH_DECORATION||s===t._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(o.id)}return 0};t.prototype.setCurrentFindMatch=function(n){var i=this;var r=null,e=0;if(n)for(var o=0,s=this._decorations.length;o<s;o++){var u=this._editor.getModel().getDecorationRange(this._decorations[o]);if(n.equalsRange(u)){r=this._decorations[o],e=o+1;break}}return this._highlightedDecorationId===null&&r===null||this._editor.changeDecorations((function(n){if(i._highlightedDecorationId!==null&&(n.changeDecorationOptions(i._highlightedDecorationId,t._FIND_MATCH_DECORATION),i._highlightedDecorationId=null),r!==null&&(i._highlightedDecorationId=r,n.changeDecorationOptions(i._highlightedDecorationId,t._CURRENT_FIND_MATCH_DECORATION)),i._rangeHighlightDecorationId!==null&&(n.removeDecoration(i._rangeHighlightDecorationId),i._rangeHighlightDecorationId=null),r!==null){var e=i._editor.getModel().getDecorationRange(r);if(e.startLineNumber!==e.endLineNumber&&e.endColumn===1){var o=e.endLineNumber-1,s=i._editor.getModel().getLineMaxColumn(o);e=new Ir(e.startLineNumber,e.startColumn,o,s)}i._rangeHighlightDecorationId=n.addDecoration(e,t._RANGE_HIGHLIGHT_DECORATION)}})),e};t.prototype.set=function(n,i){var r=this;this._editor.changeDecorations((function(e){var o=t._FIND_MATCH_DECORATION;var s=[];if(n.length>1e3){o=t._FIND_MATCH_NO_OVERVIEW_DECORATION;var u=r._editor.getModel().getLineCount(),a=r._editor.getLayoutInfo().height/u,h=Math.max(2,Math.ceil(3/a));var c=n[0].range.startLineNumber,f=n[0].range.endLineNumber;for(var l=1,v=n.length;l<v;l++){var d=n[l].range;f+h>=d.startLineNumber?d.endLineNumber>f&&(f=d.endLineNumber):(s.push({range:new Ir(c,1,f,1),options:t._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),c=d.startLineNumber,f=d.endLineNumber)}s.push({range:new Ir(c,1,f,1),options:t._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}var g=new Array(n.length);for(var u=0,a=n.length;u<a;u++)g[u]={range:n[u].range,options:o};r._decorations=e.deltaDecorations(r._decorations,g),r._overviewRulerApproximateDecorations=e.deltaDecorations(r._overviewRulerApproximateDecorations,s),r._rangeHighlightDecorationId&&(e.removeDecoration(r._rangeHighlightDecorationId),r._rangeHighlightDecorationId=null),r._findScopeDecorationIds.length&&(r._findScopeDecorationIds.forEach((function(t){return e.removeDecoration(t)})),r._findScopeDecorationIds=[]),i!=null&&i.length&&(r._findScopeDecorationIds=i.map((function(n){return e.addDecoration(n,t._FIND_SCOPE_DECORATION)})))}))};t.prototype.matchBeforePosition=function(t){if(this._decorations.length===0)return null;for(var n=this._decorations.length-1;n>=0;n--){var i=this._decorations[n],r=this._editor.getModel().getDecorationRange(i);if(r&&!(r.endLineNumber>t.lineNumber)&&(r.endLineNumber<t.lineNumber||!(r.endColumn>t.column)))return r}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])};t.prototype.matchAfterPosition=function(t){if(this._decorations.length===0)return null;for(var n=0,i=this._decorations.length;n<i;n++){var r=this._decorations[n],e=this._editor.getModel().getDecorationRange(r);if(e&&!(e.startLineNumber<t.lineNumber)&&(e.startLineNumber>t.lineNumber||!(e.startColumn<t.column)))return e}return this._editor.getModel().getDecorationRange(this._decorations[0])};t.prototype._allDecorations=function(){var t=[];return t=t.concat(this._decorations),t=t.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&t.push.apply(t,this._findScopeDecorationIds),this._rangeHighlightDecorationId&&t.push(this._rangeHighlightDecorationId),t};return t}();h7._CURRENT_FIND_MATCH_DECORATION=PM.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:Uk(gb),position:vd.Center},minimap:{color:Uk(yb),position:1}}),h7._FIND_MATCH_DECORATION=PM.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:Uk(gb),position:vd.Center},minimap:{color:Uk(yb),position:1}}),h7._FIND_MATCH_NO_OVERVIEW_DECORATION=PM.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),h7._FIND_MATCH_ONLY_OVERVIEW_DECORATION=PM.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:Uk(gb),position:vd.Center}}),h7._RANGE_HIGHLIGHT_DECORATION=PM.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),h7._FIND_SCOPE_DECORATION=PM.register({description:"find-scope",className:"findScope",isWholeLine:!0});var c7=function(){function t(t,n,i){this._editorSelection=t,this._ranges=n,this._replaceStrings=i,this._trackedEditorSelectionId=null}t.prototype.getEditOperations=function(t,n){if(this._ranges.length>0){var i=[];for(var r=0;r<this._ranges.length;r++)i.push({range:this._ranges[r],text:this._replaceStrings[r]});i.sort((function(t,n){return Ir.compareRangesUsingStarts(t.range,n.range)}));var e=[];var o=i[0];for(var r=1;r<i.length;r++)o.range.endLineNumber===i[r].range.startLineNumber&&o.range.endColumn===i[r].range.startColumn?(o.range=o.range.plusRange(i[r].range),o.text=o.text+i[r].text):(e.push(o),o=i[r]);e.push(o);for(var s=0,u=e;s<u.length;s++){var r=u[s];n.addEditOperation(r.range,r.text)}}this._trackedEditorSelectionId=n.trackSelection(this._editorSelection)};t.prototype.computeCursorState=function(t,n){return n.getTrackedSelection(this._trackedEditorSelectionId)};return t}();function f7(t,n){if(t&&t[0]!==""){var i=l7(t,n,"-"),r=l7(t,n,"_");return i&&!r?v7(t,n,"-"):!i&&r?v7(t,n,"_"):t[0].toUpperCase()===t[0]?n.toUpperCase():t[0].toLowerCase()===t[0]?n.toLowerCase():function(t,n){if(n===void 0){n=!1}return!!t&&(n&&(t=t.replace(/\\./g,"")),t.toLowerCase()!==t)}(t[0][0])&&n.length>0?n[0].toUpperCase()+n.substr(1):t[0][0].toUpperCase()!==t[0][0]&&n.length>0?n[0].toLowerCase()+n.substr(1):n}return n}function l7(t,n,i){return t[0].indexOf(i)!==-1&&n.indexOf(i)!==-1&&t[0].split(i).length===n.split(i).length}function v7(t,n,i){var r=n.split(i),e=t[0].split(i);var o="";return r.forEach((function(t,n){o+=f7([e[n]],t)+i})),o.slice(0,-1)}var d7=function(){function t(t){this.staticValue=t,this.kind=0}return t}();var g7=function(){function t(t){this.pieces=t,this.kind=1}return t}();var p7=function(){function t(t){t&&t.length!==0?t.length===1&&t[0].staticValue!==null?this._state=new d7(t[0].staticValue):this._state=new g7(t):this._state=new d7("")}t.fromStaticValue=function(n){return new t([w7.staticValue(n)])};Object.defineProperty(t.prototype,"hasReplacementPatterns",{get:function(){return this._state.kind===1},enumerable:false,configurable:true});t.prototype.buildReplaceString=function(n,i){if(this._state.kind===0)return i?f7(n,this._state.staticValue):this._state.staticValue;var r="";for(var e=0,o=this._state.pieces.length;e<o;e++){var s=this._state.pieces[e];if(s.staticValue!==null){r+=s.staticValue;continue}var u=t._substitute(s.matchIndex,n);if(s.caseOps!==null&&s.caseOps.length>0){var a=[],h=s.caseOps.length;var c=0;for(var f=0,l=u.length;f<l;f++){if(c>=h){a.push(u.slice(f));break}switch(s.caseOps[c]){case"U":a.push(u[f].toUpperCase());break;case"u":a.push(u[f].toUpperCase()),c++;break;case"L":a.push(u[f].toLowerCase());break;case"l":a.push(u[f].toLowerCase()),c++;break;default:a.push(u[f])}}u=a.join("")}r+=u}return r};t._substitute=function(t,n){if(n===null)return"";if(t===0)return n[0];var i="";for(;t>0;){if(t<n.length)return(n[t]||"")+i;i=String(t%10)+i,t=Math.floor(t/10)}return"$"+i};return t}();var w7=function(){function t(t,n,i){this.staticValue=t,this.matchIndex=n,i&&i.length!==0?this.caseOps=i.slice(0):this.caseOps=null}t.staticValue=function(n){return new t(n,-1,null)};t.caseOps=function(n,i){return new t(null,n,i)};return t}();var m7=function(){function t(t){this._source=t,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}t.prototype.emitUnchanged=function(t){this._emitStatic(this._source.substring(this._lastCharIndex,t)),this._lastCharIndex=t};t.prototype.emitStatic=function(t,n){this._emitStatic(t),this._lastCharIndex=n};t.prototype._emitStatic=function(t){t.length!==0&&(this._currentStaticPiece+=t)};t.prototype.emitMatchIndex=function(t,n,i){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=w7.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=w7.caseOps(t,i),this._lastCharIndex=n};t.prototype.finalize=function(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=w7.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new p7(this._result)};return t}();var b7=new qc("findWidgetVisible",!1);b7.toNegated();var y7=new qc("findInputFocussed",!1),_7=new qc("replaceInputFocussed",!1),k7={primary:545,mac:{primary:2593}},x7={primary:565,mac:{primary:2613}},C7={primary:560,mac:{primary:2608}},S7={primary:554,mac:{primary:2602}},D7={primary:558,mac:{primary:2606}},A7="actions.find",O7="actions.findWithSelection",E7="editor.actions.findWithArgs",M7="editor.action.nextMatchFindAction",F7="editor.action.previousMatchFindAction",L7="editor.action.goToMatchFindAction",j7="editor.action.nextSelectionMatchFindAction",R7="editor.action.previousSelectionMatchFindAction",T7="editor.action.startFindReplaceAction",I7="closeFindWidget",B7="toggleFindCaseSensitive",N7="toggleFindWholeWord",P7="toggleFindRegex",W7="toggleFindInSelection",H7="togglePreserveCase",z7="editor.action.replaceOne",U7="editor.action.replaceAll",K7="editor.action.selectAllMatches",V7=19999;var q7=function(){function t(t,n){var i=this;this._toDispose=new hi,this._editor=t,this._state=n,this._isDisposed=!1,this._startSearchingTimer=new js,this._decorations=new h7(t),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new Ts((function(){return i.research(!1)}),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((function(t){t.reason!==3&&t.reason!==5&&t.reason!==6||i._decorations.setStartPosition(i._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((function(t){i._ignoreModelContentChanged||(t.isFlush&&i._decorations.reset(),i._decorations.setStartPosition(i._editor.getPosition()),i._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((function(t){return i._onStateChanged(t)}))),this.research(!1,this._state.searchScope)}t.prototype.dispose=function(){this._isDisposed=!0,si(this._startSearchingTimer),this._toDispose.dispose()};t.prototype._onStateChanged=function(t){var n=this;!this._isDisposed&&this._editor.hasModel()&&(t.searchString||t.isReplaceRevealed||t.isRegex||t.wholeWord||t.matchCase||t.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((function(){t.searchScope?n.research(t.moveCursor,n._state.searchScope):n.research(t.moveCursor)}),240)):t.searchScope?this.research(t.moveCursor,this._state.searchScope):this.research(t.moveCursor))};t._getSearchRange=function(t,n){return n||t.getFullModelRange()};t.prototype.research=function(t,n){var i=this;var r=null;n!==void 0?n!==null&&(r=Array.isArray(n)?n:[n]):r=this._decorations.getFindScopes(),r!==null&&(r=r.map((function(t){if(t.startLineNumber!==t.endLineNumber){var n=t.endLineNumber;return t.endColumn===1&&(n-=1),new Ir(t.startLineNumber,1,n,i._editor.getModel().getLineMaxColumn(n))}return t})));var e=this._findMatches(r,!1,V7);this._decorations.set(e,r);var o=this._editor.getSelection();var s=this._decorations.getCurrentMatchesPosition(o);if(s===0&&e.length>0){var u=Nd(e.map((function(t){return t.range})),(function(t){return Ir.compareRangesUsingStarts(t,o)>=0}));s=u>0?u-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),t&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())};t.prototype._hasMatches=function(){return this._state.matchesCount>0};t.prototype._cannotFind=function(){if(!this._hasMatches()){var t=this._decorations.getFindScope();return t&&this._editor.revealRangeInCenterIfOutsideViewport(t,0),!0}return!1};t.prototype._setCurrentFindMatch=function(t){var n=this._decorations.setCurrentFindMatch(t);this._state.changeMatchInfo(n,this._decorations.getCount(),t),this._editor.setSelection(t),this._editor.revealRangeInCenterIfOutsideViewport(t,0)};t.prototype._prevSearchPosition=function(t){var n=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);var i=t.lineNumber,r=t.column;var e=this._editor.getModel();return n||r===1?(i===1?i=e.getLineCount():i--,r=e.getLineMaxColumn(i)):r--,new Tr(i,r)};t.prototype._moveToPrevMatch=function(n,i){if(i===void 0){i=!1}if(!this._state.canNavigateBack()){var r=this._decorations.matchAfterPosition(n);return void(r&&this._setCurrentFindMatch(r))}if(this._decorations.getCount()<V7){var r=this._decorations.matchBeforePosition(n);return r&&r.isEmpty()&&r.getStartPosition().equals(n)&&(n=this._prevSearchPosition(n),r=this._decorations.matchBeforePosition(n)),void(r&&this._setCurrentFindMatch(r))}if(this._cannotFind())return;var e=this._decorations.getFindScope(),o=t._getSearchRange(this._editor.getModel(),e);o.getEndPosition().isBefore(n)&&(n=o.getEndPosition()),n.isBefore(o.getStartPosition())&&(n=o.getEndPosition());var s=n.lineNumber,u=n.column,a=this._editor.getModel();var h=new Tr(s,u),c=a.findPreviousMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1);return c&&c.range.isEmpty()&&c.range.getStartPosition().equals(h)&&(h=this._prevSearchPosition(h),c=a.findPreviousMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,!1)),c?i||o.containsRange(c.range)?void this._setCurrentFindMatch(c.range):this._moveToPrevMatch(c.range.getStartPosition(),!0):void 0};t.prototype.moveToPrevMatch=function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())};t.prototype._nextSearchPosition=function(t){var n=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);var i=t.lineNumber,r=t.column;var e=this._editor.getModel();return n||r===e.getLineMaxColumn(i)?(i===e.getLineCount()?i=1:i++,r=1):r++,new Tr(i,r)};t.prototype._moveToNextMatch=function(t){if(!this._state.canNavigateForward()){var n=this._decorations.matchBeforePosition(t);return void(n&&this._setCurrentFindMatch(n))}if(this._decorations.getCount()<V7){var n=this._decorations.matchAfterPosition(t);return n&&n.isEmpty()&&n.getStartPosition().equals(t)&&(t=this._nextSearchPosition(t),n=this._decorations.matchAfterPosition(t)),void(n&&this._setCurrentFindMatch(n))}var i=this._getNextMatch(t,!1,!0);i&&this._setCurrentFindMatch(i.range)};t.prototype._getNextMatch=function(n,i,r,e){if(e===void 0){e=!1}if(this._cannotFind())return null;var o=this._decorations.getFindScope(),s=t._getSearchRange(this._editor.getModel(),o);s.getEndPosition().isBefore(n)&&(n=s.getStartPosition()),n.isBefore(s.getStartPosition())&&(n=s.getStartPosition());var u=n.lineNumber,a=n.column,h=this._editor.getModel();var c=new Tr(u,a),f=h.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,i);return r&&f&&f.range.isEmpty()&&f.range.getStartPosition().equals(c)&&(c=this._nextSearchPosition(c),f=h.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,i)),f?e||s.containsRange(f.range)?f:this._getNextMatch(f.range.getEndPosition(),i,r,!0):null};t.prototype.moveToNextMatch=function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())};t.prototype._moveToMatch=function(t){var n=this._decorations.getDecorationRangeAt(t);n&&this._setCurrentFindMatch(n)};t.prototype.moveToMatch=function(t){this._moveToMatch(t)};t.prototype._getReplacePattern=function(){return this._state.isRegex?function(t){if(!t||t.length===0)return new p7(null);var n=[],i=new m7(t);for(var r=0,e=t.length;r<e;r++){var o=t.charCodeAt(r);if(o!==92){if(o===36){if(r++,r>=e)break;var s=t.charCodeAt(r);if(s===36){i.emitUnchanged(r-1),i.emitStatic("$",r+1);continue}if(s===48||s===38){i.emitUnchanged(r-1),i.emitMatchIndex(0,r+1,n),n.length=0;continue}if(49<=s&&s<=57){var u=s-48;if(r+1<e){var a=t.charCodeAt(r+1);if(48<=a&&a<=57){r++,u=10*u+(a-48),i.emitUnchanged(r-2),i.emitMatchIndex(u,r+1,n),n.length=0;continue}}i.emitUnchanged(r-1),i.emitMatchIndex(u,r+1,n),n.length=0;continue}}}else{if(r++,r>=e)break;var s=t.charCodeAt(r);switch(s){case 92:i.emitUnchanged(r-1),i.emitStatic("\\",r+1);break;case 110:i.emitUnchanged(r-1),i.emitStatic("\n",r+1);break;case 116:i.emitUnchanged(r-1),i.emitStatic("\t",r+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(r-1),i.emitStatic("",r+1),n.push(String.fromCharCode(s))}}}return i.finalize()}(this._state.replaceString):p7.fromStaticValue(this._state.replaceString)};t.prototype.replace=function(){if(!this._hasMatches())return;var t=this._getReplacePattern(),n=this._editor.getSelection(),i=this._getNextMatch(n.getStartPosition(),!0,!1);if(i)if(n.equalsRange(i.range)){var r=t.buildReplaceString(i.matches,this._state.preserveCase),e=new pC(n,r);this._executeEditorCommand("replace",e),this._decorations.setStartPosition(new Tr(n.startLineNumber,n.startColumn+r.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)};t.prototype._findMatches=function(n,i,r){var e=this;var o=(n||[null]).map((function(n){return t._getSearchRange(e._editor.getModel(),n)}));return this._editor.getModel().findMatches(this._state.searchString,o,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null,i,r)};t.prototype.replaceAll=function(){if(!this._hasMatches())return;var t=this._decorations.getFindScopes();t===null&&this._state.matchesCount>=V7?this._largeReplaceAll():this._regularReplaceAll(t),this.research(!1)};t.prototype._largeReplaceAll=function(){var t=new kd(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(131):null).parseSearchRequest();if(!t)return;var n=t.regex;if(!n.multiline){var i="mu";n.ignoreCase&&(i+="i"),n.global&&(i+="g"),n=new RegExp(n.source,i)}var r=this._editor.getModel(),e=r.getValue(1),o=r.getFullModelRange(),s=this._getReplacePattern();var u;var a=this._state.preserveCase;u=s.hasReplacementPatterns||a?e.replace(n,(function(){return s.buildReplaceString(arguments,a)})):e.replace(n,s.buildReplaceString(null,a));var h=new yC(o,u,this._editor.getSelection());this._executeEditorCommand("replaceAll",h)};t.prototype._regularReplaceAll=function(t){var n=this._getReplacePattern(),i=this._findMatches(t,n.hasReplacementPatterns||this._state.preserveCase,1073741824),r=[];for(var e=0,o=i.length;e<o;e++)r[e]=n.buildReplaceString(i[e].matches,this._state.preserveCase);var s=new c7(this._editor.getSelection(),i.map((function(t){return t.range})),r);this._executeEditorCommand("replaceAll",s)};t.prototype.selectAllMatches=function(){if(!this._hasMatches())return;var t=this._decorations.getFindScopes();var n=this._findMatches(t,!1,1073741824).map((function(t){return new Br(t.range.startLineNumber,t.range.startColumn,t.range.endLineNumber,t.range.endColumn)}));var i=this._editor.getSelection();for(var r=0,e=n.length;r<e;r++)if(n[r].equalsRange(i)){n=[i].concat(n.slice(0,r)).concat(n.slice(r+1));break}this._editor.setSelections(n)};t.prototype._executeEditorCommand=function(t,n){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(t,n),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}};return t}();var G7=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._hideSoon=e._register(new Ts((function(){return e._hide()}),2e3)),e._isVisible=!1,e._editor=n,e._state=i,e._keybindingService=r,e._domNode=document.createElement("div"),e._domNode.className="findOptionsWidget",e._domNode.style.display="none",e._domNode.style.top="10px",e._domNode.style.zIndex="12",e._domNode.setAttribute("role","presentation"),e._domNode.setAttribute("aria-hidden","true");var o={inputActiveOptionBorder:qw(Fb),inputActiveOptionForeground:qw(jb),inputActiveOptionBackground:qw(Lb)},s=e._register(xN());e.caseSensitive=e._register(new mz(__assign({appendTitle:e._keybindingLabelFor(B7),isChecked:e._state.matchCase,hoverDelegate:s},o))),e._domNode.appendChild(e.caseSensitive.domNode),e._register(e.caseSensitive.onChange((function(){e._state.change({matchCase:e.caseSensitive.checked},!1)}))),e.wholeWords=e._register(new bz(__assign({appendTitle:e._keybindingLabelFor(N7),isChecked:e._state.wholeWord,hoverDelegate:s},o))),e._domNode.appendChild(e.wholeWords.domNode),e._register(e.wholeWords.onChange((function(){e._state.change({wholeWord:e.wholeWords.checked},!1)}))),e.regex=e._register(new yz(__assign({appendTitle:e._keybindingLabelFor(P7),isChecked:e._state.isRegex,hoverDelegate:s},o))),e._domNode.appendChild(e.regex.domNode),e._register(e.regex.onChange((function(){e._state.change({isRegex:e.regex.checked},!1)}))),e._editor.addOverlayWidget(e),e._register(e._state.onFindReplaceStateChange((function(t){var n=!1;t.isRegex&&(e.regex.checked=e._state.isRegex,n=!0),t.wholeWord&&(e.wholeWords.checked=e._state.wholeWord,n=!0),t.matchCase&&(e.caseSensitive.checked=e._state.matchCase,n=!0),!e._state.isRevealed&&n&&e._revealTemporarily()}))),e._register(ma(e._domNode,ah.MOUSE_LEAVE,(function(t){return e._onMouseLeave()}))),e._register(ma(e._domNode,"mouseover",(function(t){return e._onMouseOver()})));return e}n.prototype._keybindingLabelFor=function(t){var n=this._keybindingService.lookupKeybinding(t);return n?" (".concat(n.getLabel(),")"):""};n.prototype.dispose=function(){this._editor.removeOverlayWidget(this),t.prototype.dispose.call(this)};n.prototype.getId=function(){return n.ID};n.prototype.getDomNode=function(){return this._domNode};n.prototype.getPosition=function(){return{preference:0}};n.prototype.highlightFindOptions=function(){this._revealTemporarily()};n.prototype._revealTemporarily=function(){this._show(),this._hideSoon.schedule()};n.prototype._onMouseLeave=function(){this._hideSoon.schedule()};n.prototype._onMouseOver=function(){this._hideSoon.cancel()};n.prototype._show=function(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")};n.prototype._hide=function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")};return n}(ik);function $7(t,n){return t===1||t!==2&&n}G7.ID="editor.contrib.findOptionsWidget";var J7=function(t){__extends(n,t);function n(){var n=this;n=t.call(this)||this,n._onFindReplaceStateChange=n._register(new ki),n.onFindReplaceStateChange=n._onFindReplaceStateChange.event,n._searchString="",n._replaceString="",n._isRevealed=!1,n._isReplaceRevealed=!1,n._isRegex=!1,n._isRegexOverride=0,n._wholeWord=!1,n._wholeWordOverride=0,n._matchCase=!1,n._matchCaseOverride=0,n._preserveCase=!1,n._preserveCaseOverride=0,n._searchScope=null,n._matchesPosition=0,n._matchesCount=0,n._currentMatch=null,n._loop=!0,n._isSearching=!1,n._filters=null;return n}Object.defineProperty(n.prototype,"searchString",{get:function(){return this._searchString},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"replaceString",{get:function(){return this._replaceString},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isRevealed",{get:function(){return this._isRevealed},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isReplaceRevealed",{get:function(){return this._isReplaceRevealed},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"isRegex",{get:function(){return $7(this._isRegexOverride,this._isRegex)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"wholeWord",{get:function(){return $7(this._wholeWordOverride,this._wholeWord)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchCase",{get:function(){return $7(this._matchCaseOverride,this._matchCase)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"preserveCase",{get:function(){return $7(this._preserveCaseOverride,this._preserveCase)},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"actualIsRegex",{get:function(){return this._isRegex},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"actualWholeWord",{get:function(){return this._wholeWord},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"actualMatchCase",{get:function(){return this._matchCase},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"actualPreserveCase",{get:function(){return this._preserveCase},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"searchScope",{get:function(){return this._searchScope},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchesPosition",{get:function(){return this._matchesPosition},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"matchesCount",{get:function(){return this._matchesCount},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"currentMatch",{get:function(){return this._currentMatch},enumerable:false,configurable:true});n.prototype.changeMatchInfo=function(t,n,i){var r={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};var e=!1;n===0&&(t=0),t>n&&(t=n),this._matchesPosition!==t&&(this._matchesPosition=t,r.matchesPosition=!0,e=!0),this._matchesCount!==n&&(this._matchesCount=n,r.matchesCount=!0,e=!0),i!==void 0&&(Ir.equalsRange(this._currentMatch,i)||(this._currentMatch=i,r.currentMatch=!0,e=!0)),e&&this._onFindReplaceStateChange.fire(r)};n.prototype.change=function(t,n,i){var r=this;if(i===void 0){i=!0}var e;var o={moveCursor:n,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};var s=!1;var u=this.isRegex,a=this.wholeWord,h=this.matchCase,c=this.preserveCase;t.searchString!==void 0&&this._searchString!==t.searchString&&(this._searchString=t.searchString,o.searchString=!0,s=!0),t.replaceString!==void 0&&this._replaceString!==t.replaceString&&(this._replaceString=t.replaceString,o.replaceString=!0,s=!0),t.isRevealed!==void 0&&this._isRevealed!==t.isRevealed&&(this._isRevealed=t.isRevealed,o.isRevealed=!0,s=!0),t.isReplaceRevealed!==void 0&&this._isReplaceRevealed!==t.isReplaceRevealed&&(this._isReplaceRevealed=t.isReplaceRevealed,o.isReplaceRevealed=!0,s=!0),t.isRegex!==void 0&&(this._isRegex=t.isRegex),t.wholeWord!==void 0&&(this._wholeWord=t.wholeWord),t.matchCase!==void 0&&(this._matchCase=t.matchCase),t.preserveCase!==void 0&&(this._preserveCase=t.preserveCase),t.searchScope!==void 0&&(!((e=t.searchScope)===null||e===void 0)&&e.every((function(t){var n;return(n=r._searchScope)===null||n===void 0?void 0:n.some((function(n){return!Ir.equalsRange(n,t)}))}))||(this._searchScope=t.searchScope,o.searchScope=!0,s=!0)),t.loop!==void 0&&this._loop!==t.loop&&(this._loop=t.loop,o.loop=!0,s=!0),t.isSearching!==void 0&&this._isSearching!==t.isSearching&&(this._isSearching=t.isSearching,o.isSearching=!0,s=!0),t.filters!==void 0&&(this._filters?this._filters.update(t.filters):this._filters=t.filters,o.filters=!0,s=!0),this._isRegexOverride=t.isRegexOverride!==void 0?t.isRegexOverride:0,this._wholeWordOverride=t.wholeWordOverride!==void 0?t.wholeWordOverride:0,this._matchCaseOverride=t.matchCaseOverride!==void 0?t.matchCaseOverride:0,this._preserveCaseOverride=t.preserveCaseOverride!==void 0?t.preserveCaseOverride:0,u!==this.isRegex&&(s=!0,o.isRegex=!0),a!==this.wholeWord&&(s=!0,o.wholeWord=!0),h!==this.matchCase&&(s=!0,o.matchCase=!0),c!==this.preserveCase&&(s=!0,o.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(o)};n.prototype.canNavigateBack=function(){return this.canNavigateInLoop()||this.matchesPosition!==1};n.prototype.canNavigateForward=function(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount};n.prototype.canNavigateInLoop=function(){return this._loop||this.matchesCount>=V7};return n}(ci);var Z7=ht(0,"input"),Q7=ht(0,"Preserve Case");var Y7=function(t){__extends(n,t);function n(n){var i;return t.call(this,{icon:Hr.preserveCase,title:Q7+n.appendTitle,isChecked:n.isChecked,hoverDelegate:(i=n.hoverDelegate)!==null&&i!==void 0?i:kN("element"),inputActiveOptionBorder:n.inputActiveOptionBorder,inputActiveOptionForeground:n.inputActiveOptionForeground,inputActiveOptionBackground:n.inputActiveOptionBackground})||this}return n}(PH);var X7=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._showOptionButtons=r,o.fixFocusOnOptionClickEnabled=!0,o.cachedOptionsWidth=0,o._onDidOptionChange=o._register(new ki),o.onDidOptionChange=o._onDidOptionChange.event,o._onKeyDown=o._register(new ki),o.onKeyDown=o._onKeyDown.event,o._onMouseDown=o._register(new ki),o._onInput=o._register(new ki),o._onKeyUp=o._register(new ki),o._onPreserveCaseKeyDown=o._register(new ki),o.onPreserveCaseKeyDown=o._onPreserveCaseKeyDown.event,o.contextViewProvider=i,o.placeholder=e.placeholder||"",o.validation=e.validation,o.label=e.label||Z7;var s=e.appendPreserveCaseLabel||"",u=e.history||[],a=!!e.flexibleHeight,h=!!e.flexibleWidth,c=e.flexibleMaxHeight;o.domNode=document.createElement("div"),o.domNode.classList.add("monaco-findInput"),o.inputBox=o._register(new Sz(o.domNode,o.contextViewProvider,{ariaLabel:o.label||"",placeholder:o.placeholder||"",validationOptions:{validation:o.validation},history:u,showHistoryHint:e.showHistoryHint,flexibleHeight:a,flexibleWidth:h,flexibleMaxHeight:c,inputBoxStyles:e.inputBoxStyles})),o.preserveCase=o._register(new Y7(__assign({appendTitle:s,isChecked:!1},e.toggleStyles))),o._register(o.preserveCase.onChange((function(t){o._onDidOptionChange.fire(t),!t&&o.fixFocusOnOptionClickEnabled&&o.inputBox.focus(),o.validate()}))),o._register(o.preserveCase.onKeyDown((function(t){o._onPreserveCaseKeyDown.fire(t)}))),o._showOptionButtons?o.cachedOptionsWidth=o.preserveCase.width():o.cachedOptionsWidth=0;var f=[o.preserveCase.domNode];o.onkeydown(o.domNode,(function(t){if(t.equals(15)||t.equals(17)||t.equals(9)){var n=f.indexOf(o.domNode.ownerDocument.activeElement);if(n>=0){var i=-1;t.equals(17)?i=(n+1)%f.length:t.equals(15)&&(i=n===0?f.length-1:n-1),t.equals(9)?(f[n].blur(),o.inputBox.focus()):i>=0&&f[i].focus(),ch(t,!0)}}}));var l=document.createElement("div");l.className="controls",l.style.display=o._showOptionButtons?"block":"none",l.appendChild(o.preserveCase.domNode),o.domNode.appendChild(l),n==null||n.appendChild(o.domNode),o.onkeydown(o.inputBox.inputElement,(function(t){return o._onKeyDown.fire(t)})),o.onkeyup(o.inputBox.inputElement,(function(t){return o._onKeyUp.fire(t)})),o.oninput(o.inputBox.inputElement,(function(t){return o._onInput.fire()})),o.onmousedown(o.inputBox.inputElement,(function(t){return o._onMouseDown.fire(t)}));return o}n.prototype.enable=function(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()};n.prototype.disable=function(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()};n.prototype.setEnabled=function(t){t?this.enable():this.disable()};n.prototype.select=function(){this.inputBox.select()};n.prototype.focus=function(){this.inputBox.focus()};n.prototype.getPreserveCase=function(){return this.preserveCase.checked};n.prototype.setPreserveCase=function(t){this.preserveCase.checked=t};n.prototype.focusOnPreserve=function(){this.preserveCase.focus()};n.prototype.validate=function(){var t;(t=this.inputBox)===null||t===void 0||t.validate()};Object.defineProperty(n.prototype,"width",{set:function(t){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=t+"px"},enumerable:false,configurable:true});n.prototype.dispose=function(){t.prototype.dispose.call(this)};return n}(ik);var t9=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},n9=function(t,n){return function(i,r){n(i,r,t)}};var i9=new qc("suggestWidgetVisible",!1,ht(0,"Whether suggestion are visible")),r9="historyNavigationWidgetFocus",e9="historyNavigationForwardsEnabled",o9="historyNavigationBackwardsEnabled";var s9;var u9=[];function a9(t,n){if(u9.includes(n))throw new Error("Cannot register the same widget multiple times");u9.push(n);var i=new hi,r=new qc(r9,!1).bindTo(t),e=new qc(e9,!0).bindTo(t),o=new qc(o9,!0).bindTo(t),s=function(){r.set(!0),s9=n},u=function(){r.set(!1),s9===n&&(s9=void 0)};return Va(n.element)&&s(),i.add(n.onDidFocus((function(){return s()}))),i.add(n.onDidBlur((function(){return u()}))),i.add(ai((function(){u9.splice(u9.indexOf(n),1),u()}))),{historyNavigationForwardsEnablement:e,historyNavigationBackwardsEnablement:o,dispose:function(){i.dispose()}}}var h9=function(t){__extends(n,t);function n(n,i,r,e){var o=t.call(this,n,i,r)||this;var s=o._register(e.createScoped(o.inputBox.element));o._register(a9(s,o.inputBox));return o}return n}(Az);h9=t9([n9(3,Gc)],h9);var c9=function(t){__extends(n,t);function n(n,i,r,e,o){if(o===void 0){o=!1}var s=t.call(this,n,i,o,r)||this;var u=s._register(e.createScoped(s.inputBox.element));s._register(a9(u,s.inputBox));return s}return n}(X7);function f9(t){var n,i;return((n=t.lookupKeybinding("history.showPrevious"))===null||n===void 0?void 0:n.getElectronAccelerator())==="Up"&&((i=t.lookupKeybinding("history.showNext"))===null||i===void 0?void 0:i.getElectronAccelerator())==="Down"}c9=t9([n9(3,Gc)],c9),uf.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:Dc.and(Dc.has(r9),Dc.equals(o9,!0),Dc.not("isComposing"),i9.isEqualTo(!1)),primary:16,secondary:[528],handler:function(t){s9==null||s9.showPreviousValue()}}),uf.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:Dc.and(Dc.has(r9),Dc.equals(e9,!0),Dc.not("isComposing"),i9.isEqualTo(!1)),primary:18,secondary:[530],handler:function(t){s9==null||s9.showNextValue()}});var l9=cq("find-selection",Hr.selection,ht(0,"Icon for 'Find in Selection' in the editor find widget.")),v9=cq("find-collapsed",Hr.chevronRight,ht(0,"Icon to indicate that the editor find widget is collapsed.")),d9=cq("find-expanded",Hr.chevronDown,ht(0,"Icon to indicate that the editor find widget is expanded.")),g9=cq("find-replace",Hr.replace,ht(0,"Icon for 'Replace' in the editor find widget.")),p9=cq("find-replace-all",Hr.replaceAll,ht(0,"Icon for 'Replace All' in the editor find widget.")),w9=cq("find-previous-match",Hr.arrowUp,ht(0,"Icon for 'Find Previous' in the editor find widget.")),m9=cq("find-next-match",Hr.arrowDown,ht(0,"Icon for 'Find Next' in the editor find widget.")),b9=ht(0,"Find / Replace"),y9=ht(0,"Find"),_9=ht(0,"Find"),k9=ht(0,"Previous Match"),x9=ht(0,"Next Match"),C9=ht(0,"Find in Selection"),S9=ht(0,"Close"),D9=ht(0,"Replace"),A9=ht(0,"Replace"),O9=ht(0,"Replace"),E9=ht(0,"Replace All"),M9=ht(0,"Toggle Replace"),F9=ht(0,"Only the first {0} results are highlighted, but all find operations work on the entire text.",V7),L9=ht(0,"{0} of {1}"),j9=ht(0,"No results"),R9=419;var T9=69;var I9="ctrlEnterReplaceAll.windows.donotask",B9=Ft?256:2048;var N9=function(){function t(t){this.afterLineNumber=t,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}return t}();function P9(t,n,i){var r=!!n.match(/\n/);i&&r&&i.selectionStart>0&&t.stopPropagation()}function W9(t,n,i){var r=!!n.match(/\n/);i&&r&&i.selectionEnd<i.value.length&&t.stopPropagation()}var H9=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;c=t.call(this)||this,c._cachedHeight=null,c._revealTimeouts=[],c._codeEditor=n,c._controller=i,c._state=r,c._contextViewProvider=e,c._keybindingService=o,c._contextKeyService=s,c._storageService=a,c._notificationService=h,c._ctrlEnterReplaceAllWarningPrompted=!!a.getBoolean(I9,0),c._isVisible=!1,c._isReplaceVisible=!1,c._ignoreChangeEvent=!1,c._updateHistoryDelayer=new Os(500),c._register(ai((function(){return c._updateHistoryDelayer.cancel()}))),c._register(c._state.onFindReplaceStateChange((function(t){return c._onStateChanged(t)}))),c._buildDomNode(),c._updateButtons(),c._tryUpdateWidgetWidth(),c._findInput.inputBox.layout(),c._register(c._codeEditor.onDidChangeConfiguration((function(t){if(t.hasChanged(91)&&(c._codeEditor.getOption(91)&&c._state.change({isReplaceRevealed:!1},!1),c._updateButtons()),t.hasChanged(145)&&c._tryUpdateWidgetWidth(),t.hasChanged(2)&&c.updateAccessibilitySupport(),t.hasChanged(41)){var n=c._codeEditor.getOption(41).loop;c._state.change({loop:n},!1);var i=c._codeEditor.getOption(41).addExtraSpaceOnTop;i&&!c._viewZone&&(c._viewZone=new N9(0),c._showViewZone()),!i&&c._viewZone&&c._removeViewZone()}}))),c.updateAccessibilitySupport(),c._register(c._codeEditor.onDidChangeCursorSelection((function(){c._isVisible&&c._updateToggleSelectionFindButton()}))),c._register(c._codeEditor.onDidFocusEditorWidget((function(){return __awaiter(c,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(!this._isVisible)return[3,2];return[4,this._controller.getGlobalBufferTerm()];case 1:t=n.sent();t&&t!==this._state.searchString&&(this._state.change({searchString:t},!1),this._findInput.select());n.label=2;case 2:return[2]}}))}))}))),c._findInputFocused=y7.bindTo(s),c._findFocusTracker=c._register(lh(c._findInput.inputBox.inputElement)),c._register(c._findFocusTracker.onDidFocus((function(){c._findInputFocused.set(!0),c._updateSearchScope()}))),c._register(c._findFocusTracker.onDidBlur((function(){c._findInputFocused.set(!1)}))),c._replaceInputFocused=_7.bindTo(s),c._replaceFocusTracker=c._register(lh(c._replaceInput.inputBox.inputElement)),c._register(c._replaceFocusTracker.onDidFocus((function(){c._replaceInputFocused.set(!0),c._updateSearchScope()}))),c._register(c._replaceFocusTracker.onDidBlur((function(){c._replaceInputFocused.set(!1)}))),c._codeEditor.addOverlayWidget(c),c._codeEditor.getOption(41).addExtraSpaceOnTop&&(c._viewZone=new N9(0)),c._register(c._codeEditor.onDidChangeModel((function(){c._isVisible&&(c._viewZoneId=void 0)}))),c._register(c._codeEditor.onDidScrollChange((function(t){t.scrollTopChanged?c._layoutViewZone():setTimeout((function(){c._layoutViewZone()}),0)})));return c}n.prototype.getId=function(){return n.ID};n.prototype.getDomNode=function(){return this._domNode};n.prototype.getPosition=function(){return this._isVisible?{preference:0}:null};n.prototype._onStateChanged=function(t){if(t.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(t.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),t.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),t.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(91)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=Ta(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(t.isRevealed||t.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),t.isRegex&&this._findInput.setRegex(this._state.isRegex),t.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),t.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),t.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),t.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),t.searchString||t.matchesCount||t.matchesPosition){var n=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",n),this._updateMatchesCount(),this._updateButtons()}(t.searchString||t.currentMatch)&&this._layoutViewZone(),t.updateHistory&&this._delayedUpdateHistory(),t.loop&&this._updateButtons()};n.prototype._delayedUpdateHistory=function(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Gn)};n.prototype._updateHistory=function(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()};n.prototype._updateMatchesCount=function(){var t;if(this._matchesCount.style.minWidth=T9+"px",this._state.matchesCount>=V7?this._matchesCount.title=F9:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){var n=String(this._state.matchesCount);this._state.matchesCount>=V7&&(n+="+");var i=String(this._state.matchesPosition);i==="0"&&(i="?"),t=oo(L9,i,n)}else t=j9;this._matchesCount.appendChild(document.createTextNode(t)),yw(this._getAriaLabel(t,this._state.currentMatch,this._state.searchString)),T9=Math.max(T9,this._matchesCount.clientWidth)};n.prototype._getAriaLabel=function(t,n,i){if(t===j9)return i===""?ht(0,"{0} found",t):ht(0,"{0} found for '{1}'",t,i);if(n){var r=ht(0,"{0} found for '{1}', at {2}",t,i,n.startLineNumber+":"+n.startColumn),e=this._codeEditor.getModel();return e&&n.startLineNumber<=e.getLineCount()&&n.startLineNumber>=1?"".concat(e.getLineContent(n.startLineNumber),", ").concat(r):r}return ht(0,"{0} found for '{1}'",t,i)};n.prototype._updateToggleSelectionFindButton=function(){var t=this._codeEditor.getSelection(),n=!!t&&(t.startLineNumber!==t.endLineNumber||t.startColumn!==t.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||n)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()};n.prototype._updateButtons=function(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var t=this._state.searchString.length>0,n=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&t&&n&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&t&&n&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&t),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&t),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var i=!this._codeEditor.getOption(91);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)};n.prototype._reveal=function(){var t=this;if(this._revealTimeouts.forEach((function(t){clearTimeout(t)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;var n=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{var i=!!n&&n.startLineNumber!==n.endLineNumber;this._toggleSelectionFind.checked=i;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((function(){t._domNode.classList.add("visible"),t._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((function(){t._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);var r=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&n){var i=this._codeEditor.getDomNode();if(i){var e=ja(i),o=this._codeEditor.getScrolledVisiblePosition(n.getStartPosition()),s=e.left+(o?o.left:0),u=o?o.top:0;if(this._viewZone&&u<this._viewZone.heightInPx){n.endLineNumber>n.startLineNumber&&(r=!1);var a=La(this._domNode).left;s>a&&(r=!1);var h=this._codeEditor.getScrolledVisiblePosition(n.getEndPosition());e.left+(h?h.left:0)>a&&(r=!1)}}}this._showViewZone(r)}};n.prototype._hide=function(t){this._revealTimeouts.forEach((function(t){clearTimeout(t)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),t&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())};n.prototype._layoutViewZone=function(t){var n=this;if(!this._codeEditor.getOption(41).addExtraSpaceOnTop)return void this._removeViewZone();if(!this._isVisible)return;var i=this._viewZone;this._viewZoneId===void 0&&i&&this._codeEditor.changeViewZones((function(r){i.heightInPx=n._getHeight(),n._viewZoneId=r.addZone(i),n._codeEditor.setScrollTop(t||n._codeEditor.getScrollTop()+i.heightInPx)}))};n.prototype._showViewZone=function(t){var n=this;if(t===void 0){t=!0}if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new N9(0));var i=this._viewZone;this._codeEditor.changeViewZones((function(r){if(n._viewZoneId!==void 0){var e=n._getHeight();if(e===i.heightInPx)return;var o=e-i.heightInPx;return i.heightInPx=e,r.layoutZone(n._viewZoneId),void(t&&n._codeEditor.setScrollTop(n._codeEditor.getScrollTop()+o))}{var e=n._getHeight();if(e-=n._codeEditor.getOption(84).top,e<=0)return;i.heightInPx=e,n._viewZoneId=r.addZone(i),t&&n._codeEditor.setScrollTop(n._codeEditor.getScrollTop()+e)}}))};n.prototype._removeViewZone=function(){var t=this;this._codeEditor.changeViewZones((function(n){t._viewZoneId!==void 0&&(n.removeZone(t._viewZoneId),t._viewZoneId=void 0,t._viewZone&&(t._codeEditor.setScrollTop(t._codeEditor.getScrollTop()-t._viewZone.heightInPx),t._viewZone=void 0))}))};n.prototype._tryUpdateWidgetWidth=function(){if(!this._isVisible||!this._domNode.isConnected)return;var t=this._codeEditor.getLayoutInfo();if(t.contentWidth<=0)return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");var n=t.width,i=t.minimap.minimapWidth;var r=!1,e=!1,o=!1;if(this._resized&&Ta(this._domNode)>R9)return this._domNode.style.maxWidth=n-28-i-15+"px",void(this._replaceInput.width=Ta(this._findInput.domNode));if(447+i>=n&&(e=!0),447+i-T9>=n&&(o=!0),447+i-T9>=n+50&&(r=!0),this._domNode.classList.toggle("collapsed-find-widget",r),this._domNode.classList.toggle("narrow-find-widget",o),this._domNode.classList.toggle("reduced-find-widget",e),o||r||(this._domNode.style.maxWidth=n-28-i-15+"px"),this._findInput.layout({collapsedFindWidget:r,narrowFindWidget:o,reducedFindWidget:e}),this._resized){var s=this._findInput.inputBox.element.clientWidth;s>0&&(this._replaceInput.width=s)}else this._isReplaceVisible&&(this._replaceInput.width=Ta(this._findInput.domNode))};n.prototype._getHeight=function(){var t=0;return t+=4,t+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(t+=4,t+=this._replaceInput.inputBox.height+2),t+=4,t};n.prototype._tryUpdateHeight=function(){var t=this._getHeight();return(this._cachedHeight===null||this._cachedHeight!==t)&&(this._cachedHeight=t,this._domNode.style.height="".concat(t,"px"),!0)};n.prototype.focusFindInput=function(){this._findInput.select(),this._findInput.focus()};n.prototype.focusReplaceInput=function(){this._replaceInput.select(),this._replaceInput.focus()};n.prototype.highlightFindOptions=function(){this._findInput.highlightFindOptions()};n.prototype._updateSearchScope=function(){var t=this;if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){var n=this._codeEditor.getSelections();n.map((function(n){n.endColumn===1&&n.endLineNumber>n.startLineNumber&&(n=n.setEndPosition(n.endLineNumber-1,t._codeEditor.getModel().getLineMaxColumn(n.endLineNumber-1)));var i=t._state.currentMatch;return n.startLineNumber===n.endLineNumber||Ir.equalsRange(n,i)?null:n})).filter((function(t){return!!t})),n.length&&this._state.change({searchScope:n},!0)}};n.prototype._onFindInputMouseDown=function(t){t.middleButton&&t.stopPropagation()};n.prototype._onFindInputKeyDown=function(t){return t.equals(3|B9)?(this._keybindingService.dispatchEvent(t,t.target)||this._findInput.inputBox.insertAtCursor("\n"),void t.preventDefault()):t.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void t.preventDefault()):t.equals(2066)?(this._codeEditor.focus(),void t.preventDefault()):t.equals(16)?P9(t,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):t.equals(18)?W9(t,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0};n.prototype._onReplaceInputKeyDown=function(t){return t.equals(3|B9)?(this._keybindingService.dispatchEvent(t,t.target)||(Mt&&jt&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(ht(0,"Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(I9,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void t.preventDefault()):t.equals(2)?(this._findInput.focusOnCaseSensitive(),void t.preventDefault()):t.equals(1026)?(this._findInput.focus(),void t.preventDefault()):t.equals(2066)?(this._codeEditor.focus(),void t.preventDefault()):t.equals(16)?P9(t,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):t.equals(18)?W9(t,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0};n.prototype.getVerticalSashLeft=function(t){return 0};n.prototype._keybindingLabelFor=function(t){var n=this._keybindingService.lookupKeybinding(t);return n?" (".concat(n.getLabel(),")"):""};n.prototype._buildDomNode=function(){var t=this;this._findInput=this._register(new h9(null,this._contextViewProvider,{width:221,label:y9,placeholder:_9,appendCaseSensitiveLabel:this._keybindingLabelFor(B7),appendWholeWordsLabel:this._keybindingLabelFor(N7),appendRegexLabel:this._keybindingLabelFor(P7),validation:function(n){if(n.length===0||!t._findInput.getRegex())return null;try{return null}catch(t){return{content:t.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:function(){return f9(t._keybindingService)},inputBoxStyles:OW,toggleStyles:AW},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((function(n){return t._onFindInputKeyDown(n)}))),this._register(this._findInput.inputBox.onDidChange((function(){t._ignoreChangeEvent||t._state.change({searchString:t._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((function(){t._state.change({isRegex:t._findInput.getRegex(),wholeWord:t._findInput.getWholeWords(),matchCase:t._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((function(n){n.equals(1026)&&t._isReplaceVisible&&(t._replaceInput.focus(),n.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((function(n){n.equals(2)&&t._isReplaceVisible&&(t._replaceInput.focusOnPreserve(),n.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((function(n){t._tryUpdateHeight()&&t._showViewZone()}))),Lt&&this._register(this._findInput.onMouseDown((function(n){return t._onFindInputMouseDown(n)}))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();var n=this._register(xN());this._prevBtn=this._register(new z9({label:k9+this._keybindingLabelFor(F7),icon:w9,hoverDelegate:n,onTrigger:function(){Q(t._codeEditor.getAction(F7)).run().then(void 0,Gn)}})),this._nextBtn=this._register(new z9({label:x9+this._keybindingLabelFor(M7),icon:m9,hoverDelegate:n,onTrigger:function(){Q(t._codeEditor.getAction(M7)).run().then(void 0,Gn)}}));var i=document.createElement("div");i.className="find-part",i.appendChild(this._findInput.domNode);var r=document.createElement("div");r.className="find-actions",i.appendChild(r),r.appendChild(this._matchesCount),r.appendChild(this._prevBtn.domNode),r.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new PH({icon:l9,title:C9+this._keybindingLabelFor(W7),isChecked:!1,hoverDelegate:n,inputActiveOptionBackground:qw(Lb),inputActiveOptionBorder:qw(Fb),inputActiveOptionForeground:qw(jb)})),this._register(this._toggleSelectionFind.onChange((function(){if(t._toggleSelectionFind.checked){if(t._codeEditor.hasModel()){var n=t._codeEditor.getSelections();n=n.map((function(n){return n.endColumn===1&&n.endLineNumber>n.startLineNumber&&(n=n.setEndPosition(n.endLineNumber-1,t._codeEditor.getModel().getLineMaxColumn(n.endLineNumber-1))),n.isEmpty()?null:n})).filter((function(t){return!!t})),n.length&&t._state.change({searchScope:n},!0)}}else t._state.change({searchScope:null},!0)}))),r.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new z9({label:S9+this._keybindingLabelFor(I7),icon:gq,hoverDelegate:n,onTrigger:function(){t._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:function(n){n.equals(2)&&t._isReplaceVisible&&(t._replaceBtn.isEnabled()?t._replaceBtn.focus():t._codeEditor.focus(),n.preventDefault())}})),this._replaceInput=this._register(new c9(null,void 0,{label:D9,placeholder:A9,appendPreserveCaseLabel:this._keybindingLabelFor(H7),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:function(){return f9(t._keybindingService)},inputBoxStyles:OW,toggleStyles:AW},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((function(n){return t._onReplaceInputKeyDown(n)}))),this._register(this._replaceInput.inputBox.onDidChange((function(){t._state.change({replaceString:t._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((function(n){t._isReplaceVisible&&t._tryUpdateHeight()&&t._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((function(){t._state.change({preserveCase:t._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((function(n){n.equals(2)&&(t._prevBtn.isEnabled()?t._prevBtn.focus():t._nextBtn.isEnabled()?t._nextBtn.focus():t._toggleSelectionFind.enabled?t._toggleSelectionFind.focus():t._closeBtn.isEnabled()&&t._closeBtn.focus(),n.preventDefault())})));var e=this._register(xN());this._replaceBtn=this._register(new z9({label:O9+this._keybindingLabelFor(z7),icon:g9,hoverDelegate:e,onTrigger:function(){t._controller.replace()},onKeyDown:function(n){n.equals(1026)&&(t._closeBtn.focus(),n.preventDefault())}})),this._replaceAllBtn=this._register(new z9({label:E9+this._keybindingLabelFor(U7),icon:p9,hoverDelegate:e,onTrigger:function(){t._controller.replaceAll()}}));var o=document.createElement("div");o.className="replace-part",o.appendChild(this._replaceInput.domNode);var s=document.createElement("div");s.className="replace-actions",o.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new z9({label:M9,className:"codicon toggle left",onTrigger:function(){t._state.change({isReplaceRevealed:!t._isReplaceVisible},!1),t._isReplaceVisible&&(t._replaceInput.width=Ta(t._findInput.domNode),t._replaceInput.inputBox.layout()),t._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=b9,this._domNode.role="dialog",this._domNode.style.width="419px",this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(i),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(o),this._resizeSash=this._register(new ez(this._domNode,this,{orientation:0,size:2})),this._resized=!1;var u=R9;this._register(this._resizeSash.onDidStart((function(){u=Ta(t._domNode)}))),this._register(this._resizeSash.onDidChange((function(n){t._resized=!0;var i=u+n.startX-n.currentX;i<R9||i>(parseFloat(Oa(t._domNode).maxWidth)||0)||(t._domNode.style.width="".concat(i,"px"),t._isReplaceVisible&&(t._replaceInput.width=Ta(t._findInput.domNode)),t._findInput.inputBox.layout(),t._tryUpdateHeight())}))),this._register(this._resizeSash.onDidReset((function(){var n=Ta(t._domNode);if(n<R9)return;var i=R9;if(!t._resized||n===R9){var r=t._codeEditor.getLayoutInfo();i=r.width-28-r.minimap.minimapWidth-15,t._resized=!0}t._domNode.style.width="".concat(i,"px"),t._isReplaceVisible&&(t._replaceInput.width=Ta(t._findInput.domNode)),t._findInput.inputBox.layout()})))};n.prototype.updateAccessibilitySupport=function(){var t=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(t!==2)};return n}(ik);H9.ID="editor.contrib.findWidget";var z9=function(t){__extends(n,t);function n(n){var i=this;var r;i=t.call(this)||this,i._opts=n;var e="button";i._opts.className&&(e=e+" "+i._opts.className),i._opts.icon&&(e=e+" "+uc.asClassName(i._opts.icon)),i._domNode=document.createElement("div"),i._domNode.tabIndex=0,i._domNode.className=e,i._domNode.setAttribute("role","button"),i._domNode.setAttribute("aria-label",i._opts.label),i._register(DN((r=n.hoverDelegate)!==null&&r!==void 0?r:kN("element"),i._domNode,i._opts.label)),i.onclick(i._domNode,(function(t){i._opts.onTrigger(),t.preventDefault()})),i.onkeydown(i._domNode,(function(t){var n,r;if(t.equals(10)||t.equals(3))return i._opts.onTrigger(),void t.preventDefault();(r=(n=i._opts).onKeyDown)===null||r===void 0||r.call(n,t)}));return i}Object.defineProperty(n.prototype,"domNode",{get:function(){return this._domNode},enumerable:false,configurable:true});n.prototype.isEnabled=function(){return this._domNode.tabIndex>=0};n.prototype.focus=function(){this._domNode.focus()};n.prototype.setEnabled=function(t){this._domNode.classList.toggle("disabled",!t),this._domNode.setAttribute("aria-disabled",String(!t)),this._domNode.tabIndex=t?0:-1};n.prototype.setExpanded=function(t){var n,i,r,e;this._domNode.setAttribute("aria-expanded",String(!!t)),t?((n=this._domNode.classList).remove.apply(n,uc.asClassNameArray(v9)),(i=this._domNode.classList).add.apply(i,uc.asClassNameArray(d9))):((r=this._domNode.classList).remove.apply(r,uc.asClassNameArray(d9)),(e=this._domNode.classList).add.apply(e,uc.asClassNameArray(v9)))};return n}(ik);Gk((function(t,n){var i=t.getColor(Bm);i&&n.addRule(".monaco-editor .findMatch { border: 1px ".concat(C_(t.type)?"dotted":"solid"," ").concat(i,"; box-sizing: border-box; }"));var r=t.getColor(Nm);r&&n.addRule(".monaco-editor .findScope { border: 1px ".concat(C_(t.type)?"dashed":"solid"," ").concat(r,"; }"));var e=t.getColor(am);e&&n.addRule(".monaco-editor .find-widget { border: 1px solid ".concat(e,"; }"))}));var U9,K9=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},V9=function(t,n){return function(i,r){n(i,r,t)}};function q9(t,n,i){if(n===void 0){n="single"}if(i===void 0){i=!1}if(!t.hasModel())return null;var r=t.getSelection();if(n==="single"&&r.startLineNumber===r.endLineNumber||n==="multiple"){if(r.isEmpty()){var e=t.getConfiguredWordAtPosition(r.getStartPosition());if(e&&i===!1)return e.word}else if(t.getModel().getValueLengthInRange(r)<524288)return t.getModel().getValueInRange(r)}return null}var G9=U9=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s._editor=n,s._findWidgetVisible=b7.bindTo(i),s._contextKeyService=i,s._storageService=r,s._clipboardService=e,s._notificationService=o,s._updateHistoryDelayer=new Os(500),s._state=s._register(new J7),s.loadQueryState(),s._register(s._state.onFindReplaceStateChange((function(t){return s._onStateChanged(t)}))),s._model=null,s._register(s._editor.onDidChangeModel((function(){var t=s._editor.getModel()&&s._state.isRevealed;s.disposeModel(),s._state.change({searchScope:null,matchCase:s._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:s._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:s._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:s._storageService.getBoolean("editor.preserveCase",1,!1)},!1),t&&s._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:s._editor.getOption(41).loop})})));return s}Object.defineProperty(n.prototype,"editor",{get:function(){return this._editor},enumerable:false,configurable:true});n.get=function(t){return t.getContribution(U9.ID)};n.prototype.dispose=function(){this.disposeModel(),t.prototype.dispose.call(this)};n.prototype.disposeModel=function(){this._model&&(this._model.dispose(),this._model=null)};n.prototype._onStateChanged=function(t){this.saveQueryState(t),t.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),t.searchString&&this.setGlobalBufferTerm(this._state.searchString)};n.prototype.saveQueryState=function(t){t.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),t.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),t.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),t.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)};n.prototype.loadQueryState=function(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)};n.prototype.isFindInputFocused=function(){return!!y7.getValue(this._contextKeyService)};n.prototype.getState=function(){return this._state};n.prototype.closeFindWidget=function(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()};n.prototype.toggleCaseSensitive=function(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()};n.prototype.toggleWholeWords=function(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()};n.prototype.toggleRegex=function(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()};n.prototype.togglePreserveCase=function(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()};n.prototype.toggleSearchScope=function(){var t=this;if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){var n=this._editor.getSelections();n=n.map((function(n){return n.endColumn===1&&n.endLineNumber>n.startLineNumber&&(n=n.setEndPosition(n.endLineNumber-1,t._editor.getModel().getLineMaxColumn(n.endLineNumber-1))),n.isEmpty()?null:n})).filter((function(t){return!!t})),n.length&&this._state.change({searchScope:n},!0)}};n.prototype.setSearchString=function(t){this._state.isRegex&&(t=uo(t)),this._state.change({searchString:t},!1)};n.prototype.highlightFindOptions=function(t){if(t===void 0){t=!1}};n.prototype._start=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,r,r,r;return __generator(this,(function(e){switch(e.label){case 0:if(this.disposeModel(),!this._editor.hasModel())return[2];i=__assign(__assign({},n),{isRevealed:!0});if(t.seedSearchStringFromSelection==="single"){r=q9(this._editor,t.seedSearchStringFromSelection,t.seedSearchStringFromNonEmptySelection);r&&(this._state.isRegex?i.searchString=uo(r):i.searchString=r)}else if(t.seedSearchStringFromSelection==="multiple"&&!t.updateSearchScope){r=q9(this._editor,t.seedSearchStringFromSelection);r&&(i.searchString=r)}if(!(!i.searchString&&t.seedSearchStringFromGlobalClipboard))return[3,2];return[4,this.getGlobalBufferTerm()];case 1:r=e.sent();if(!this._editor.hasModel())return[2];r&&(i.searchString=r);e.label=2;case 2:if(t.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),t.updateSearchScope){r=this._editor.getSelections();r.some((function(t){return!t.isEmpty()}))&&(i.searchScope=r)}i.loop=t.loop,this._state.change(i,!1),this._model||(this._model=new q7(this._editor,this._state));return[2]}}))}))};n.prototype.start=function(t,n){return this._start(t,n)};n.prototype.moveToNextMatch=function(){return!!this._model&&(this._model.moveToNextMatch(),!0)};n.prototype.moveToPrevMatch=function(){return!!this._model&&(this._model.moveToPrevMatch(),!0)};n.prototype.goToMatch=function(t){return!!this._model&&(this._model.moveToMatch(t),!0)};n.prototype.replace=function(){return!!this._model&&(this._model.replace(),!0)};n.prototype.replaceAll=function(){var t;return!!this._model&&(!((t=this._editor.getModel())===null||t===void 0)&&t.isTooLargeForHeapOperation()?(this._notificationService.warn(ht(0,"The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0))};n.prototype.selectAllMatches=function(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)};n.prototype.getGlobalBufferTerm=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""]}))}))};n.prototype.setGlobalBufferTerm=function(t){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(t)};return n}(ci);G9.ID="editor.contrib.findController",G9=U9=K9([V9(1,Gc),V9(2,_W),V9(3,Kq),V9(4,EL)],G9);var $9=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a){var h=this;h=t.call(this,n,r,u,a,s)||this,h._contextViewService=i,h._keybindingService=e,h._themeService=o,h._widget=null,h._findOptionsWidget=null;return h}n.prototype._start=function(n,i){return __awaiter(this,void 0,void 0,(function(){var r,e;return __generator(this,(function(o){switch(o.label){case 0:this._widget||this._createFindWidget();r=this._editor.getSelection();e=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":e=!0;break;case"never":e=!1;break;case"multiline":e=!!r&&r.startLineNumber!==r.endLineNumber;break}n.updateSearchScope=n.updateSearchScope||e;return[4,t.prototype._start.call(this,n,i)];case 1:o.sent(),this._widget&&(n.shouldFocus===2?this._widget.focusReplaceInput():n.shouldFocus===1&&this._widget.focusFindInput());return[2]}}))}))};n.prototype.highlightFindOptions=function(t){if(t===void 0){t=!1}this._widget||this._createFindWidget(),this._state.isRevealed&&!t?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()};n.prototype._createFindWidget=function(){this._widget=this._register(new H9(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new G7(this._editor,this._state,this._keybindingService))};return n}(G9);$9=K9([V9(1,yR),V9(2,Gc),V9(3,Yx),V9(4,zk),V9(5,EL),V9(6,_W),V9(7,Kq)],$9);Nf(new jf({id:A7,label:ht(0,"Find"),alias:"Find",precondition:Dc.or($C.focus,Dc.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:vf.MenubarEditMenu,group:"3_find",title:ht(0,"&&Find"),order:1}})).addImplementation(0,(function(t,n,i){var r=G9.get(n);return!!r&&r.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:n.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:n.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:n.getOption(41).loop})}));var J9={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};var Z9=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t,i;return __generator(this,(function(r){switch(r.label){case 0:t=G9.get(n);i=t&&!this._run(t);if(!i)return[3,2];return[4,t.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getState().searchString.length===0&&n.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:n.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:n.getOption(41).loop})];case 1:i=(r.sent(),this._run(t));r.label=2;case 2:i;return[2]}}))}))};return n}(Lf);var Q9=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t,i,r;return __generator(this,(function(e){switch(e.label){case 0:t=G9.get(n);if(!t)return[2];i=q9(n,"single",!1);i&&t.setSearchString(i);r=this._run(t);if(r)return[3,2];return[4,t.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:n.getOption(41).loop})];case 1:r=(e.sent(),this._run(t));e.label=2;case 2:r;return[2]}}))}))};return n}(Lf);Nf(new jf({id:T7,label:ht(0,"Replace"),alias:"Replace",precondition:Dc.or($C.focus,Dc.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:vf.MenubarEditMenu,group:"3_find",title:ht(0,"&&Replace"),order:2}})).addImplementation(0,(function(t,n,i){if(!n.hasModel()||n.getOption(91))return!1;var r=G9.get(n);if(!r)return!1;var e=n.getSelection(),o=r.isFindInputFocused(),s=!e.isEmpty()&&e.startLineNumber===e.endLineNumber&&n.getOption(41).seedSearchStringFromSelection!=="never"&&!o,u=o||s?2:1;return r.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:n.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:n.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:u,shouldAnimate:!0,updateSearchScope:!1,loop:n.getOption(41).loop})})),Pf(G9.ID,$9,0),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:E7,label:ht(0,"Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:J9})||this}n.prototype.run=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var t,r;return __generator(this,(function(e){switch(e.label){case 0:t=G9.get(n);if(!t)return[3,2];r=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:i.replaceString!==void 0,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};return[4,t.start({forceRevealReplace:!1,seedSearchStringFromSelection:t.getState().searchString.length===0&&n.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:n.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(i==null?void 0:i.findInSelection)||!1,loop:n.getOption(41).loop},r)];case 1:e.sent(),t.setGlobalBufferTerm(t.getState().searchString);e.label=2;case 2:return[2]}}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:O7,label:ht(0,"Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t,i;return __generator(this,(function(r){switch(r.label){case 0:t=G9.get(n);i=t;if(!i)return[3,2];return[4,t.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:n.getOption(41).loop})];case 1:i=(r.sent(),t.setGlobalBufferTerm(t.getState().searchString));r.label=2;case 2:i;return[2]}}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:M7,label:ht(0,"Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:$C.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:Dc.and($C.focus,y7),primary:3,weight:100}]})||this}n.prototype._run=function(t){return!!t.moveToNextMatch()&&(t.editor.pushUndoStop(),!0)};return n}(Z9)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:F7,label:ht(0,"Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:$C.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:Dc.and($C.focus,y7),primary:1027,weight:100}]})||this}n.prototype._run=function(t){return t.moveToPrevMatch()};return n}(Z9)),Bf(function(t){__extends(n,t);function n(){var n=this;n=t.call(this,{id:L7,label:ht(0,"Go to Match..."),alias:"Go to Match...",precondition:b7})||this,n._highlightDecorations=[];return n}n.prototype.run=function(t,n,i){var r=this;var e=G9.get(n);if(!e)return;var o=e.getState().matchesCount;if(o<1)return void t.get(EL).notify({severity:OL.Warning,message:ht(0,"No matches. Try searching for something else.")});var s=t.get(TH).createInputBox();s.placeholder=ht(0,"Type a number to go to a specific match (between 1 and {0})",o);var u=function(t){var n=parseInt(t);if(isNaN(n))return;var i=e.getState().matchesCount;return n>0&&n<=i?n-1:n<0&&n>=-i?i+n:void 0},a=function(t){var i=u(t);if(typeof i=="number"){s.validationMessage=void 0,e.goToMatch(i);var o=e.getState().currentMatch;o&&r.addDecorations(n,o)}else s.validationMessage=ht(0,"Please type a number between 1 and {0}",e.getState().matchesCount),r.clearDecorations(n)};s.onDidChangeValue((function(t){a(t)})),s.onDidAccept((function(){var t=u(s.value);typeof t=="number"?(e.goToMatch(t),s.hide()):s.validationMessage=ht(0,"Please type a number between 1 and {0}",e.getState().matchesCount)})),s.onDidHide((function(){r.clearDecorations(n),s.dispose()})),s.show()};n.prototype.clearDecorations=function(t){var n=this;t.changeDecorations((function(t){n._highlightDecorations=t.deltaDecorations(n._highlightDecorations,[])}))};n.prototype.addDecorations=function(t,n){var i=this;t.changeDecorations((function(t){i._highlightDecorations=t.deltaDecorations(i._highlightDecorations,[{range:n,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:n,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:Uk(Sx),position:vd.Full}}}])}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:j7,label:ht(0,"Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:2109,weight:100}})||this}n.prototype._run=function(t){return t.moveToNextMatch()};return n}(Q9)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:R7,label:ht(0,"Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:3133,weight:100}})||this}n.prototype._run=function(t){return t.moveToPrevMatch()};return n}(Q9));var Y9=Ff.bindToContribution(G9.get);If(new Y9({id:I7,precondition:b7,handler:function(t){return t.closeFindWidget()},kbOpts:{weight:105,kbExpr:Dc.and($C.focus,Dc.not("isComposing")),primary:9,secondary:[1033]}})),If(new Y9({id:B7,precondition:void 0,handler:function(t){return t.toggleCaseSensitive()},kbOpts:{weight:105,kbExpr:$C.focus,primary:k7.primary,mac:k7.mac,win:k7.win,linux:k7.linux}})),If(new Y9({id:N7,precondition:void 0,handler:function(t){return t.toggleWholeWords()},kbOpts:{weight:105,kbExpr:$C.focus,primary:x7.primary,mac:x7.mac,win:x7.win,linux:x7.linux}})),If(new Y9({id:P7,precondition:void 0,handler:function(t){return t.toggleRegex()},kbOpts:{weight:105,kbExpr:$C.focus,primary:C7.primary,mac:C7.mac,win:C7.win,linux:C7.linux}})),If(new Y9({id:W7,precondition:void 0,handler:function(t){return t.toggleSearchScope()},kbOpts:{weight:105,kbExpr:$C.focus,primary:S7.primary,mac:S7.mac,win:S7.win,linux:S7.linux}})),If(new Y9({id:H7,precondition:void 0,handler:function(t){return t.togglePreserveCase()},kbOpts:{weight:105,kbExpr:$C.focus,primary:D7.primary,mac:D7.mac,win:D7.win,linux:D7.linux}})),If(new Y9({id:z7,precondition:b7,handler:function(t){return t.replace()},kbOpts:{weight:105,kbExpr:$C.focus,primary:3094}})),If(new Y9({id:z7,precondition:b7,handler:function(t){return t.replace()},kbOpts:{weight:105,kbExpr:Dc.and($C.focus,_7),primary:3}})),If(new Y9({id:U7,precondition:b7,handler:function(t){return t.replaceAll()},kbOpts:{weight:105,kbExpr:$C.focus,primary:2563}})),If(new Y9({id:U7,precondition:b7,handler:function(t){return t.replaceAll()},kbOpts:{weight:105,kbExpr:Dc.and($C.focus,_7),primary:void 0,mac:{primary:2051}}})),If(new Y9({id:K7,precondition:b7,handler:function(t){return t.selectAllMatches()},kbOpts:{weight:105,kbExpr:$C.focus,primary:515}}));var X9={0:" ",1:"u",2:"r"},t8=16777215,n8=4278190080;var i8=function(){function t(t){var n=Math.ceil(t/32);this._states=new Uint32Array(n)}t.prototype.get=function(t){var n=t/32|0,i=t%32;return!!(this._states[n]&1<<i)};t.prototype.set=function(t,n){var i=t/32|0,r=t%32,e=this._states[i];this._states[i]=n?e|1<<r:e&~(1<<r)};return t}();var r8=function(){function t(t,n,i){if(t.length!==n.length||t.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=t,this._endIndexes=n,this._collapseStates=new i8(t.length),this._userDefinedStates=new i8(t.length),this._recoveredStates=new i8(t.length),this._types=i,this._parentsComputed=!1}t.prototype.ensureParentIndices=function(){var t=this;if(!this._parentsComputed){this._parentsComputed=!0;var n=[],i=function(i,r){var e=n[n.length-1];return t.getStartLineNumber(e)<=i&&t.getEndLineNumber(e)>=r};for(var r=0,e=this._startIndexes.length;r<e;r++){var o=this._startIndexes[r],s=this._endIndexes[r];if(o>t8||s>t8)throw new Error("startLineNumber or endLineNumber must not exceed "+t8);for(;n.length>0&&!i(o,s);)n.pop();var u=n.length>0?n[n.length-1]:-1;n.push(r),this._startIndexes[r]=o+((255&u)<<24),this._endIndexes[r]=s+((65280&u)<<16)}}};Object.defineProperty(t.prototype,"length",{get:function(){return this._startIndexes.length},enumerable:false,configurable:true});t.prototype.getStartLineNumber=function(t){return this._startIndexes[t]&t8};t.prototype.getEndLineNumber=function(t){return this._endIndexes[t]&t8};t.prototype.getType=function(t){return this._types?this._types[t]:void 0};t.prototype.hasTypes=function(){return!!this._types};t.prototype.isCollapsed=function(t){return this._collapseStates.get(t)};t.prototype.setCollapsed=function(t,n){this._collapseStates.set(t,n)};t.prototype.isUserDefined=function(t){return this._userDefinedStates.get(t)};t.prototype.setUserDefined=function(t,n){return this._userDefinedStates.set(t,n)};t.prototype.isRecovered=function(t){return this._recoveredStates.get(t)};t.prototype.setRecovered=function(t,n){return this._recoveredStates.set(t,n)};t.prototype.getSource=function(t){return this.isUserDefined(t)?1:this.isRecovered(t)?2:0};t.prototype.setSource=function(t,n){n===1?(this.setUserDefined(t,!0),this.setRecovered(t,!1)):n===2?(this.setUserDefined(t,!1),this.setRecovered(t,!0)):(this.setUserDefined(t,!1),this.setRecovered(t,!1))};t.prototype.setCollapsedAllOfType=function(t,n){var i=!1;if(this._types)for(var r=0;r<this._types.length;r++)this._types[r]===t&&(this.setCollapsed(r,n),i=!0);return i};t.prototype.toRegion=function(t){return new e8(this,t)};t.prototype.getParentIndex=function(t){this.ensureParentIndices();var n=((this._startIndexes[t]&n8)>>>24)+((this._endIndexes[t]&n8)>>>16);return n===65535?-1:n};t.prototype.contains=function(t,n){return this.getStartLineNumber(t)<=n&&this.getEndLineNumber(t)>=n};t.prototype.findIndex=function(t){var n=0,i=this._startIndexes.length;if(i===0)return-1;for(;n<i;){var r=Math.floor((n+i)/2);t<this.getStartLineNumber(r)?i=r:n=r+1}return n-1};t.prototype.findRange=function(t){var n=this.findIndex(t);if(n>=0){if(this.getEndLineNumber(n)>=t)return n;for(n=this.getParentIndex(n);n!==-1;){if(this.contains(n,t))return n;n=this.getParentIndex(n)}}return-1};t.prototype.toString=function(){var t=[];for(var n=0;n<this.length;n++)t[n]="[".concat(X9[this.getSource(n)]).concat(this.isCollapsed(n)?"+":"-","] ").concat(this.getStartLineNumber(n),"/").concat(this.getEndLineNumber(n));return t.join(", ")};t.prototype.toFoldRange=function(t){return{startLineNumber:this._startIndexes[t]&t8,endLineNumber:this._endIndexes[t]&t8,type:this._types?this._types[t]:void 0,isCollapsed:this.isCollapsed(t),source:this.getSource(t)}};t.fromFoldRanges=function(n){var i=n.length,r=new Uint32Array(i),e=new Uint32Array(i);var o=[],s=!1;for(var u=0;u<i;u++){var a=n[u];r[u]=a.startLineNumber,e[u]=a.endLineNumber,o.push(a.type),a.type&&(s=!0)}s||(o=void 0);var h=new t(r,e,o);for(var u=0;u<i;u++)n[u].isCollapsed&&h.setCollapsed(u,!0),h.setSource(u,n[u].source);return h};t.sanitizeAndMerge=function(t,n,i){i=i!==null&&i!==void 0?i:Number.MAX_VALUE;var r=function(t,n){return Array.isArray(t)?function(i){return i<n?t[i]:void 0}:function(i){return i<n?t.toFoldRange(i):void 0}},e=r(t,t.length),o=r(n,n.length);var s=0,u=0,a=e(0),h=o(0);var c=[];var f,l=0;var v=[];for(;a||h;){var d=void 0;if(h&&(!a||a.startLineNumber>=h.startLineNumber))a&&a.startLineNumber===h.startLineNumber?(h.source===1?d=h:(d=a,d.isCollapsed=h.isCollapsed&&a.endLineNumber===h.endLineNumber,d.source=0),a=e(++s)):(d=h,h.isCollapsed&&h.source===0&&(d.source=2)),h=o(++u);else{var g=u,p=h;for(;;){if(!p||p.startLineNumber>a.endLineNumber){d=a;break}if(p.source===1&&p.endLineNumber>a.endLineNumber)break;p=o(++g)}a=e(++s)}if(d){for(;f&&f.endLineNumber<d.startLineNumber;)f=c.pop();d.endLineNumber>d.startLineNumber&&d.startLineNumber>l&&d.endLineNumber<=i&&(!f||f.endLineNumber>=d.endLineNumber)&&(v.push(d),l=d.startLineNumber,f&&c.push(f),f=d)}}return v};return t}();var e8=function(){function t(t,n){this.ranges=t,this.index=n}Object.defineProperty(t.prototype,"startLineNumber",{get:function(){return this.ranges.getStartLineNumber(this.index)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"endLineNumber",{get:function(){return this.ranges.getEndLineNumber(this.index)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"regionIndex",{get:function(){return this.index},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"parentIndex",{get:function(){return this.ranges.getParentIndex(this.index)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this.ranges.isCollapsed(this.index)},enumerable:false,configurable:true});t.prototype.containedBy=function(t){return t.startLineNumber<=this.startLineNumber&&t.endLineNumber>=this.endLineNumber};t.prototype.containsLine=function(t){return this.startLineNumber<=t&&t<=this.endLineNumber};return t}();var o8=function(){function t(t,n){this._updateEventEmitter=new ki,this.onDidChange=this._updateEventEmitter.event,this._textModel=t,this._decorationProvider=n,this._regions=new r8(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}Object.defineProperty(t.prototype,"regions",{get:function(){return this._regions},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"textModel",{get:function(){return this._textModel},enumerable:false,configurable:true});t.prototype.toggleCollapseState=function(t){var n=this;if(!t.length)return;t=t.sort((function(t,n){return t.regionIndex-n.regionIndex}));var i={};this._decorationProvider.changeDecorations((function(r){var e=0,o=-1,s=-1;var u=function(t){for(;e<t;){var i=n._regions.getEndLineNumber(e),u=n._regions.isCollapsed(e);if(i<=o){var a=n.regions.getSource(e)!==0;r.changeDecorationOptions(n._editorDecorationIds[e],n._decorationProvider.getDecorationOption(u,i<=s,a))}u&&i>s&&(s=i),e++}};for(var a=0,h=t;a<h.length;a++){var c=h[a];var f=c.regionIndex,l=n._editorDecorationIds[f];if(l&&!i[l]){i[l]=!0,u(f);var v=!n._regions.isCollapsed(f);n._regions.setCollapsed(f,v),o=Math.max(o,n._regions.getEndLineNumber(f))}}u(n._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:t})};t.prototype.removeManualRanges=function(t){var n=new Array,i=function(n){for(var i=0,r=t;i<r.length;i++){var e=r[i];if(!(e.startLineNumber>n.endLineNumber||n.startLineNumber>e.endLineNumber))return!0}return!1};for(var r=0;r<this._regions.length;r++){var e=this._regions.toFoldRange(r);e.source!==0&&i(e)||n.push(e)}this.updatePost(r8.fromFoldRanges(n))};t.prototype.update=function(t,n){if(n===void 0){n=[]}var i=this._currentFoldedOrManualRanges(n),r=r8.sanitizeAndMerge(t,i,this._textModel.getLineCount());this.updatePost(r8.fromFoldRanges(r))};t.prototype.updatePost=function(t){var n=this;var i=[];var r=-1;for(var e=0,o=t.length;e<o;e++){var s=t.getStartLineNumber(e),u=t.getEndLineNumber(e),a=t.isCollapsed(e),h=t.getSource(e)!==0,c={startLineNumber:s,startColumn:this._textModel.getLineMaxColumn(s),endLineNumber:u,endColumn:this._textModel.getLineMaxColumn(u)+1};i.push({range:c,options:this._decorationProvider.getDecorationOption(a,u<=r,h)}),a&&u>r&&(r=u)}this._decorationProvider.changeDecorations((function(t){return n._editorDecorationIds=t.deltaDecorations(n._editorDecorationIds,i)})),this._regions=t,this._updateEventEmitter.fire({model:this})};t.prototype._currentFoldedOrManualRanges=function(t){if(t===void 0){t=[]}var n=function(n,i){for(var r=0,e=t;r<e.length;r++){var o=e[r];if(n<o&&o<=i)return!0}return!1},i=[];for(var r=0,e=this._regions.length;r<e;r++){var o=this.regions.isCollapsed(r);var s=this.regions.getSource(r);if(o||s!==0){var u=this._regions.toFoldRange(r),a=this._textModel.getDecorationRange(this._editorDecorationIds[r]);a&&(o&&n(a.startLineNumber,a.endLineNumber)&&(o=!1),i.push({startLineNumber:a.startLineNumber,endLineNumber:a.endLineNumber,type:u.type,isCollapsed:o,source:s}))}}return i};t.prototype.getMemento=function(){var t=this._currentFoldedOrManualRanges(),n=[],i=this._textModel.getLineCount();for(var r=0,e=t.length;r<e;r++){var o=t[r];if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>i)continue;var s=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);n.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,isCollapsed:o.isCollapsed,source:o.source,checksum:s})}return n.length>0?n:void 0};t.prototype.applyMemento=function(t){var n,i;if(!Array.isArray(t))return;var r=[],e=this._textModel.getLineCount();for(var o=0,s=t;o<s.length;o++){var u=s[o];if(u.startLineNumber>=u.endLineNumber||u.startLineNumber<1||u.endLineNumber>e)continue;var a=this._getLinesChecksum(u.startLineNumber+1,u.endLineNumber);u.checksum&&a!==u.checksum||r.push({startLineNumber:u.startLineNumber,endLineNumber:u.endLineNumber,type:void 0,isCollapsed:(n=u.isCollapsed)===null||n===void 0||n,source:(i=u.source)!==null&&i!==void 0?i:0})}var h=r8.sanitizeAndMerge(this._regions,r,e);this.updatePost(r8.fromFoldRanges(h))};t.prototype._getLinesChecksum=function(t,n){return Zu(this._textModel.getLineContent(t)+this._textModel.getLineContent(n))%1e6};t.prototype.dispose=function(){this._decorationProvider.removeDecorations(this._editorDecorationIds)};t.prototype.getAllRegionsAtLine=function(t,n){var i=[];if(this._regions){var r=this._regions.findRange(t),e=1;for(;r>=0;){var o=this._regions.toRegion(r);n&&!n(o,e)||i.push(o),e++,r=o.parentIndex}}return i};t.prototype.getRegionAtLine=function(t){if(this._regions){var n=this._regions.findRange(t);if(n>=0)return this._regions.toRegion(n)}return null};t.prototype.getRegionsInside=function(t,n){var i=[],r=t?t.regionIndex+1:0,e=t?t.endLineNumber:Number.MAX_VALUE;if(n&&n.length===2){var o=[];for(var s=r,u=this._regions.length;s<u;s++){var a=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<e))break;for(;o.length>0&&!a.containedBy(o[o.length-1]);)o.pop();o.push(a),n(a,o.length)&&i.push(a)}}else for(var o=r,s=this._regions.length;o<s;o++){var u=this._regions.toRegion(o);if(!(this._regions.getStartLineNumber(o)<e))break;n&&!n(u)||i.push(u)}return i};return t}();function s8(t,n,i){var r=[];var e=function(i){var e=t.getRegionAtLine(i);if(e){var o=!e.isCollapsed;if(r.push(e),n>1){var s=t.getRegionsInside(e,(function(t,i){return t.isCollapsed!==o&&i<n}));r.push.apply(r,s)}}};for(var o=0,s=i;o<s.length;o++){var u=s[o];e(u)}t.toggleCollapseState(r)}function u8(t,n,i,r){if(i===void 0){i=Number.MAX_VALUE}var e=[];if(r&&r.length>0)for(var o=0,s=r;o<s.length;o++){var u=s[o];var a=t.getRegionAtLine(u);if(a&&(a.isCollapsed!==n&&e.push(a),i>1)){var h=t.getRegionsInside(a,(function(t,r){return t.isCollapsed!==n&&r<i}));e.push.apply(e,h)}}else{var u=t.getRegionsInside(null,(function(t,r){return t.isCollapsed!==n&&r<i}));e.push.apply(e,u)}t.toggleCollapseState(e)}function a8(t,n,i,r){var e=[];for(var o=0,s=r;o<s.length;o++){var u=s[o];var a=t.getAllRegionsAtLine(u,(function(t,r){return t.isCollapsed!==n&&r<=i}));e.push.apply(e,a)}t.toggleCollapseState(e)}function h8(t,n,i){var r=[];for(var e=0,o=i;e<o.length;e++){var s=o[e];var u=t.getAllRegionsAtLine(s,void 0);u.length>0&&r.push(u[0])}var a=t.getRegionsInside(null,(function(t){return r.every((function(n){return!n.containedBy(t)&&!t.containedBy(n)}))&&t.isCollapsed!==n}));t.toggleCollapseState(a)}function c8(t,n,i){var r=t.textModel,e=t.regions,o=[];for(var s=e.length-1;s>=0;s--)if(i!==e.isCollapsed(s)){var u=e.getStartLineNumber(s);n.test(r.getLineContent(u))&&o.push(e.toRegion(s))}t.toggleCollapseState(o)}function f8(t,n,i){var r=t.regions,e=[];for(var o=r.length-1;o>=0;o--)i!==r.isCollapsed(o)&&n===r.getType(o)&&e.push(r.toRegion(o));t.toggleCollapseState(e)}var l8=function(){function t(t){var n=this;this._updateEventEmitter=new ki,this._hasLineChanges=!1,this._foldingModel=t,this._foldingModelListener=t.onDidChange((function(t){return n.updateHiddenRanges()})),this._hiddenRanges=[],t.regions.length&&this.updateHiddenRanges()}Object.defineProperty(t.prototype,"onDidChange",{get:function(){return this._updateEventEmitter.event},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"hiddenRanges",{get:function(){return this._hiddenRanges},enumerable:false,configurable:true});t.prototype.notifyChangeModelContent=function(t){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=t.changes.some((function(t){return t.range.endLineNumber!==t.range.startLineNumber||vA(t.text)[0]!==0})))};t.prototype.updateHiddenRanges=function(){var t=!1;var n=[];var i=0,r=0,e=Number.MAX_VALUE,o=-1;var s=this._foldingModel.regions;for(;i<s.length;i++){if(!s.isCollapsed(i))continue;var u=s.getStartLineNumber(i)+1,a=s.getEndLineNumber(i);e<=u&&a<=o||(!t&&r<this._hiddenRanges.length&&this._hiddenRanges[r].startLineNumber===u&&this._hiddenRanges[r].endLineNumber===a?(n.push(this._hiddenRanges[r]),r++):(t=!0,n.push(new Ir(u,1,a,1))),e=u,o=a)}(this._hasLineChanges||t||r<this._hiddenRanges.length)&&this.applyHiddenRanges(n)};t.prototype.applyHiddenRanges=function(t){this._hiddenRanges=t,this._hasLineChanges=!1,this._updateEventEmitter.fire(t)};t.prototype.hasRanges=function(){return this._hiddenRanges.length>0};t.prototype.isHidden=function(t){return v8(this._hiddenRanges,t)!==null};t.prototype.adjustSelections=function(t){var n=this;var i=!1;var r=this._foldingModel.textModel;var e=null;var o=function(t){return e&&function(t,n){return t>=n.startLineNumber&&t<=n.endLineNumber}(t,e)||(e=v8(n._hiddenRanges,t)),e?e.startLineNumber-1:null};for(var s=0,u=t.length;s<u;s++){var a=t[s];var h=o(a.startLineNumber);h&&(a=a.setStartPosition(h,r.getLineMaxColumn(h)),i=!0);var c=o(a.endLineNumber);c&&(a=a.setEndPosition(c,r.getLineMaxColumn(c)),i=!0),t[s]=a}return i};t.prototype.dispose=function(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)};return t}();function v8(t,n){var i=Nd(t,(function(t){return n<t.startLineNumber}))-1;return i>=0&&t[i].endLineNumber>=n?t[i]:null}var d8=function(){function t(t,n,i){this.editorModel=t,this.languageConfigurationService=n,this.foldingRangesLimit=i,this.id="indent"}t.prototype.dispose=function(){};t.prototype.compute=function(t){var n=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,i=n&&!!n.offSide,r=n&&n.markers;return Promise.resolve(function(t,n,i,r){if(r===void 0){r=p8}var e=t.getOptions().tabSize,o=new g8(r);var s;i&&(s=new RegExp("(".concat(i.start.source,")|(?:").concat(i.end.source,")")));var u=[],a=t.getLineCount()+1;u.push({indent:-1,endAbove:a,line:a});for(var h=t.getLineCount();h>0;h--){var c=t.getLineContent(h),f=BS(c,e);var l=void 0,v=u[u.length-1];if(f!==-1){if(s&&(l=c.match(s))){if(!l[1]){u.push({indent:-2,endAbove:h,line:h});continue}{var d=u.length-1;for(;d>0&&u[d].indent!==-2;)d--;if(d>0){u.length=d+1,v=u[d],o.insertFirst(h,v.line,f),v.line=h,v.indent=f,v.endAbove=h;continue}}}if(v.indent>f){do{u.pop(),v=u[u.length-1]}while(v.indent>f);var d=v.endAbove-1;d-h>=1&&o.insertFirst(h,d,f)}v.indent===f?v.endAbove=h:u.push({indent:f,endAbove:h,line:h})}else n&&(v.endAbove=h)}return o.toIndentRanges(t)}(this.editorModel,i,r,this.foldingRangesLimit))};return t}();var g8=function(){function t(t){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=t}t.prototype.insertFirst=function(t,n,i){if(t>t8||n>t8)return;var r=this._length;this._startIndexes[r]=t,this._endIndexes[r]=n,this._length++,i<1e3&&(this._indentOccurrences[i]=(this._indentOccurrences[i]||0)+1)};t.prototype.toIndentRanges=function(t){var n=this._foldingRangesLimit.limit;if(this._length<=n){this._foldingRangesLimit.update(this._length,!1);var i=new Uint32Array(this._length),r=new Uint32Array(this._length);for(var e=this._length-1,o=0;e>=0;e--,o++)i[o]=this._startIndexes[e],r[o]=this._endIndexes[e];return new r8(i,r)}{this._foldingRangesLimit.update(this._length,n);var i=0,r=this._indentOccurrences.length;for(var s=0;s<this._indentOccurrences.length;s++){var u=this._indentOccurrences[s];if(u){if(u+i>n){r=s;break}i+=u}}var e=t.getOptions().tabSize,o=new Uint32Array(n),a=new Uint32Array(n);for(var s=this._length-1,u=0;s>=0;s--){var h=this._startIndexes[s],c=BS(t.getLineContent(h),e);(c<r||c===r&&i++<n)&&(o[u]=h,a[u]=this._endIndexes[s],u++)}return new r8(o,a)}};return t}();var p8={limit:5e3,update:function(){}},w8=Jw("editor.foldBackground",{light:Yw(Lm,.3),dark:Yw(Lm,.3),hcDark:null,hcLight:null},ht(0,"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);Jw("editorGutter.foldingControlForeground",{dark:sm,light:sm,hcDark:sm,hcLight:sm},ht(0,"Color of the folding control in the editor gutter."));var m8=cq("folding-expanded",Hr.chevronDown,ht(0,"Icon for expanded ranges in the editor glyph margin.")),b8=cq("folding-collapsed",Hr.chevronRight,ht(0,"Icon for collapsed ranges in the editor glyph margin.")),y8=cq("folding-manual-collapsed",b8,ht(0,"Icon for manually collapsed ranges in the editor glyph margin.")),_8=cq("folding-manual-expanded",m8,ht(0,"Icon for manually expanded ranges in the editor glyph margin.")),k8={color:Uk(w8),position:1},x8=ht(0,"Click to expand the range."),C8=ht(0,"Click to collapse the range.");var S8=function(){function t(t){this.editor=t,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}t.prototype.getDecorationOption=function(n,i,r){return i?t.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?n?this.showFoldingHighlights?t.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:t.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:t.NO_CONTROLS_EXPANDED_RANGE_DECORATION:n?r?this.showFoldingHighlights?t.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:t.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?t.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:t.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?r?t.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:t.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:r?t.MANUALLY_EXPANDED_VISUAL_DECORATION:t.EXPANDED_VISUAL_DECORATION};t.prototype.changeDecorations=function(t){return this.editor.changeDecorations(t)};t.prototype.removeDecorations=function(t){this.editor.removeDecorations(t)};return t}();S8.COLLAPSED_VISUAL_DECORATION=PM.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:x8,firstLineDecorationClassName:uc.asClassName(b8)}),S8.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=PM.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:k8,isWholeLine:!0,linesDecorationsTooltip:x8,firstLineDecorationClassName:uc.asClassName(b8)}),S8.MANUALLY_COLLAPSED_VISUAL_DECORATION=PM.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:x8,firstLineDecorationClassName:uc.asClassName(y8)}),S8.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=PM.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:k8,isWholeLine:!0,linesDecorationsTooltip:x8,firstLineDecorationClassName:uc.asClassName(y8)}),S8.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=PM.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:x8}),S8.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=PM.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:k8,isWholeLine:!0,linesDecorationsTooltip:x8}),S8.EXPANDED_VISUAL_DECORATION=PM.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+uc.asClassName(m8),linesDecorationsTooltip:C8}),S8.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=PM.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:uc.asClassName(m8),linesDecorationsTooltip:C8}),S8.MANUALLY_EXPANDED_VISUAL_DECORATION=PM.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+uc.asClassName(_8),linesDecorationsTooltip:C8}),S8.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=PM.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:uc.asClassName(_8),linesDecorationsTooltip:C8}),S8.NO_CONTROLS_EXPANDED_RANGE_DECORATION=PM.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),S8.HIDDEN_RANGE_DECORATION=PM.register({description:"folding-hidden-range-decoration",stickiness:1});var D8={};var A8=function(){function t(t,n,i,r,e){this.editorModel=t,this.providers=n,this.handleFoldingRangesChange=i,this.foldingRangesLimit=r,this.fallbackRangeProvider=e,this.id="syntax",this.disposables=new hi,e&&this.disposables.add(e);for(var o=0,s=n;o<s.length;o++){var u=s[o];typeof u.onDidChange=="function"&&this.disposables.add(u.onDidChange(i))}}t.prototype.compute=function(t){var n=this;return function(t,n,i){var r=null;var e=t.map((function(t,e){return Promise.resolve(t.provideFoldingRanges(n,D8,i)).then((function(t){if(!i.isCancellationRequested&&Array.isArray(t)){Array.isArray(r)||(r=[]);var o=n.getLineCount();for(var s=0,u=t;s<u.length;s++){var a=u[s];a.start>0&&a.end>a.start&&a.end<=o&&r.push({start:a.start,end:a.end,rank:e,kind:a.kind})}}}),$n)}));return Promise.all(e).then((function(t){return r}))}(this.providers,this.editorModel,t).then((function(i){var r,e;return i?function(t,n){var i=t.sort((function(t,n){var i=t.start-n.start;return i===0&&(i=t.rank-n.rank),i})),r=new O8(n);var e;var o=[];for(var s=0,u=i;s<u.length;s++){var a=u[s];if(e){if(a.start>e.start)if(a.end<=e.end)o.push(e),e=a,r.add(a.start,a.end,a.kind&&a.kind.value,o.length);else{if(a.start>e.end){do{e=o.pop()}while(e&&a.start>e.end);e&&o.push(e),e=a}r.add(a.start,a.end,a.kind&&a.kind.value,o.length)}}else e=a,r.add(a.start,a.end,a.kind&&a.kind.value,o.length)}return r.toIndentRanges()}(i,n.foldingRangesLimit):(e=(r=n.fallbackRangeProvider)===null||r===void 0?void 0:r.compute(t))!==null&&e!==void 0?e:null}))};t.prototype.dispose=function(){this.disposables.dispose()};return t}();var O8=function(){function t(t){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=t}t.prototype.add=function(t,n,i,r){if(t>t8||n>t8)return;var e=this._length;this._startIndexes[e]=t,this._endIndexes[e]=n,this._nestingLevels[e]=r,this._types[e]=i,this._length++,r<30&&(this._nestingLevelCounts[r]=(this._nestingLevelCounts[r]||0)+1)};t.prototype.toIndentRanges=function(){var t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);var n=new Uint32Array(this._length),i=new Uint32Array(this._length);for(var r=0;r<this._length;r++)n[r]=this._startIndexes[r],i[r]=this._endIndexes[r];return new r8(n,i,this._types)}{this._foldingRangesLimit.update(this._length,t);var n=0,i=this._nestingLevelCounts.length;for(var e=0;e<this._nestingLevelCounts.length;e++){var o=this._nestingLevelCounts[e];if(o){if(o+n>t){i=e;break}n+=o}}var r=new Uint32Array(t),s=new Uint32Array(t),u=[];for(var e=0,o=0;e<this._length;e++){var a=this._nestingLevels[e];(a<i||a===i&&n++<t)&&(r[o]=this._startIndexes[e],s[o]=this._endIndexes[e],u[o]=this._types[e],o++)}return new r8(r,s,u)}};return t}();var E8,M8=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},F8=function(t,n){return function(i,r){n(i,r,t)}};var L8=new qc("foldingEnabled",!1);var j8=E8=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u.contextKeyService=i,u.languageConfigurationService=r,u.languageFeaturesService=s,u.localToDispose=u._register(new hi),u.editor=n,u._foldingLimitReporter=new R8(n);var a=u.editor.getOptions();u._isEnabled=a.get(43),u._useFoldingProviders=a.get(44)!=="indentation",u._unfoldOnClickAfterEndOfLine=a.get(48),u._restoringViewState=!1,u._currentModelHasFoldedImports=!1,u._foldingImportsByDefault=a.get(46),u.updateDebounceInfo=o.for(s.foldingRangeProvider,"Folding",{min:200}),u.foldingModel=null,u.hiddenRangeModel=null,u.rangeProvider=null,u.foldingRegionPromise=null,u.foldingModelPromise=null,u.updateScheduler=null,u.cursorChangedScheduler=null,u.mouseDownInfo=null,u.foldingDecorationProvider=new S8(n),u.foldingDecorationProvider.showFoldingControls=a.get(110),u.foldingDecorationProvider.showFoldingHighlights=a.get(45),u.foldingEnabled=L8.bindTo(u.contextKeyService),u.foldingEnabled.set(u._isEnabled),u._register(u.editor.onDidChangeModel((function(){return u.onModelChanged()}))),u._register(u.editor.onDidChangeConfiguration((function(t){if(t.hasChanged(43)&&(u._isEnabled=u.editor.getOptions().get(43),u.foldingEnabled.set(u._isEnabled),u.onModelChanged()),t.hasChanged(47)&&u.onModelChanged(),t.hasChanged(110)||t.hasChanged(45)){var n=u.editor.getOptions();u.foldingDecorationProvider.showFoldingControls=n.get(110),u.foldingDecorationProvider.showFoldingHighlights=n.get(45),u.triggerFoldingModelChanged()}t.hasChanged(44)&&(u._useFoldingProviders=u.editor.getOptions().get(44)!=="indentation",u.onFoldingStrategyChanged()),t.hasChanged(48)&&(u._unfoldOnClickAfterEndOfLine=u.editor.getOptions().get(48)),t.hasChanged(46)&&(u._foldingImportsByDefault=u.editor.getOptions().get(46))}))),u.onModelChanged();return u}n.get=function(t){return t.getContribution(n.ID)};n.getFoldingRangeProviders=function(t,i){var r,e;var o=t.foldingRangeProvider.ordered(i);return(e=(r=n._foldingRangeSelector)===null||r===void 0?void 0:r.call(n,o,i))!==null&&e!==void 0?e:o};n.prototype.saveViewState=function(){var t=this.editor.getModel();if(!t||!this._isEnabled||t.isTooLargeForTokenization())return{};if(this.foldingModel){var n=this.foldingModel.getMemento(),i=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:n,lineCount:t.getLineCount(),provider:i,foldedImports:this._currentModelHasFoldedImports}}};n.prototype.restoreViewState=function(t){var n=this.editor.getModel();if(n&&this._isEnabled&&!n.isTooLargeForTokenization()&&this.hiddenRangeModel&&t&&(this._currentModelHasFoldedImports=!!t.foldedImports,t.collapsedRegions&&t.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(t.collapsedRegions)}finally{this._restoringViewState=!1}}};n.prototype.onModelChanged=function(){var t=this;this.localToDispose.clear();var n=this.editor.getModel();this._isEnabled&&n&&!n.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new o8(n,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new l8(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((function(n){return t.onHiddenRangesChanges(n)}))),this.updateScheduler=new Os(this.updateDebounceInfo.get(n)),this.cursorChangedScheduler=new Ts((function(){return t.revealCursor()}),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange((function(){return t.onFoldingStrategyChanged()}))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((function(){return t.onFoldingStrategyChanged()}))),this.localToDispose.add(this.editor.onDidChangeModelContent((function(n){return t.onDidChangeModelContent(n)}))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((function(){return t.onCursorPositionChanged()}))),this.localToDispose.add(this.editor.onMouseDown((function(n){return t.onEditorMouseDown(n)}))),this.localToDispose.add(this.editor.onMouseUp((function(n){return t.onEditorMouseUp(n)}))),this.localToDispose.add({dispose:function(){var n,i;t.foldingRegionPromise&&(t.foldingRegionPromise.cancel(),t.foldingRegionPromise=null),(n=t.updateScheduler)===null||n===void 0||n.cancel(),t.updateScheduler=null,t.foldingModel=null,t.foldingModelPromise=null,t.hiddenRangeModel=null,t.cursorChangedScheduler=null,(i=t.rangeProvider)===null||i===void 0||i.dispose(),t.rangeProvider=null}}),this.triggerFoldingModelChanged())};n.prototype.onFoldingStrategyChanged=function(){var t;(t=this.rangeProvider)===null||t===void 0||t.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()};n.prototype.getRangeProvider=function(t){var i=this;if(this.rangeProvider)return this.rangeProvider;var r=new d8(t,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=r,this._useFoldingProviders&&this.foldingModel){var e=n.getFoldingRangeProviders(this.languageFeaturesService,t);e.length>0&&(this.rangeProvider=new A8(t,e,(function(){return i.triggerFoldingModelChanged()}),this._foldingLimitReporter,r))}return this.rangeProvider};n.prototype.getFoldingModel=function(){return this.foldingModelPromise};n.prototype.onDidChangeModelContent=function(t){var n;(n=this.hiddenRangeModel)===null||n===void 0||n.notifyChangeModelContent(t),this.triggerFoldingModelChanged()};n.prototype.triggerFoldingModelChanged=function(){var t=this;this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((function(){var n=t.foldingModel;if(!n)return null;var i=new pi,r=t.getRangeProvider(n.textModel),e=t.foldingRegionPromise=Ss((function(t){return r.compute(t)}));return e.then((function(r){if(r&&e===t.foldingRegionPromise){var o=void 0;if(t._foldingImportsByDefault&&!t._currentModelHasFoldedImports){var s=r.setCollapsedAllOfType(re.Imports.value,!0);s&&(o=HG.capture(t.editor),t._currentModelHasFoldedImports=s)}var u=t.editor.getSelections(),a=u?u.map((function(t){return t.startLineNumber})):[];n.update(r,a),o==null||o.restore(t.editor);var h=t.updateDebounceInfo.update(n.textModel,i.elapsed());t.updateScheduler&&(t.updateScheduler.defaultDelay=h)}return n}))})).then(void 0,(function(t){return Gn(t),null})))};n.prototype.onHiddenRangesChanges=function(t){if(this.hiddenRangeModel&&t.length&&!this._restoringViewState){var n=this.editor.getSelections();n&&this.hiddenRangeModel.adjustSelections(n)&&this.editor.setSelections(n)}this.editor.setHiddenAreas(t,this)};n.prototype.onCursorPositionChanged=function(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()};n.prototype.revealCursor=function(){var t=this;var n=this.getFoldingModel();n&&n.then((function(n){if(n){var i=t.editor.getSelections();if(i&&i.length>0){var r=[];var e=function(i){var e=i.selectionStartLineNumber;t.hiddenRangeModel&&t.hiddenRangeModel.isHidden(e)&&r.push.apply(r,n.getAllRegionsAtLine(e,(function(t){return t.isCollapsed&&e>t.startLineNumber})))};for(var o=0,s=i;o<s.length;o++){var u=s[o];e(u)}r.length&&(n.toggleCollapseState(r),t.reveal(i[0].getPosition()))}}})).then(void 0,Gn)};n.prototype.onEditorMouseDown=function(t){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!t.target||!t.target.range||!t.event.leftButton&&!t.event.middleButton)return;var n=t.target.range;var i=!1;switch(t.target.type){case 4:{var r=t.target.detail,e=t.target.element.offsetLeft;if(r.offsetX-e<4)return;i=!0;break}case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!t.target.detail.isAfterLines)break;return;case 6:if(this.hiddenRangeModel.hasRanges()){var r=this.editor.getModel();if(r&&n.startColumn===r.getLineMaxColumn(n.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:n.startLineNumber,iconClicked:i}};n.prototype.onEditorMouseUp=function(t){var n=this.foldingModel;if(!n||!this.mouseDownInfo||!t.target)return;var i=this.mouseDownInfo.lineNumber,r=this.mouseDownInfo.iconClicked,e=t.target.range;if(!e||e.startLineNumber!==i)return;if(r){if(t.target.type!==4)return}else{var o=this.editor.getModel();if(!o||e.startColumn!==o.getLineMaxColumn(i))return}var s=n.getRegionAtLine(i);if(s&&s.startLineNumber===i){var o=s.isCollapsed;if(r||o){var u=[];if(t.event.altKey){var a=function(t){return!t.containedBy(s)&&!s.containedBy(t)},h=n.getRegionsInside(null,a);for(var c=0,f=h;c<f.length;c++){var l=f[c];l.isCollapsed&&u.push(l)}u.length===0&&(u=h)}else{var a=t.event.middleButton||t.event.shiftKey;if(a)for(var v=0,d=n.getRegionsInside(s);v<d.length;v++){var h=d[v];h.isCollapsed===o&&u.push(h)}!o&&a&&u.length!==0||u.push(s)}n.toggleCollapseState(u),this.reveal({lineNumber:i,column:1})}}};n.prototype.reveal=function(t){this.editor.revealPositionInCenterIfOutsideViewport(t,0)};return n}(ci);j8.ID="editor.contrib.folding",j8=E8=M8([F8(1,Gc),F8(2,xv),F8(3,EL),F8(4,Cj),F8(5,tp)],j8);var R8=function(){function t(t){this.editor=t,this._onDidChange=new ki,this._computed=0,this._limited=!1}Object.defineProperty(t.prototype,"limit",{get:function(){return this.editor.getOptions().get(47)},enumerable:false,configurable:true});t.prototype.update=function(t,n){t===this._computed&&n===this._limited||(this._computed=t,this._limited=n,this._onDidChange.fire())};return t}();var T8=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.runEditorCommand=function(t,n,i){var r=this;var e=t.get(xv),o=j8.get(n);if(!o)return;var s=o.getFoldingModel();return s?(this.reportTelemetry(t,n),s.then((function(t){if(t){r.invoke(o,t,n,i,e);var s=n.getSelection();s&&o.reveal(s.getStartPosition())}}))):void 0};n.prototype.getSelectedLines=function(t){var n=t.getSelections();return n?n.map((function(t){return t.startLineNumber})):[]};n.prototype.getLineNumbers=function(t,n){return t&&t.selectionLines?t.selectionLines.map((function(t){return t+1})):this.getSelectedLines(n)};n.prototype.run=function(t,n){};return n}(Lf);function I8(t){if(!G(t)){if(!z(t))return!1;var n=t;if(!G(n.levels)&&!K(n.levels)||!G(n.direction)&&!H(n.direction)||!(G(n.selectionLines)||Array.isArray(n.selectionLines)&&n.selectionLines.every(K)))return!1}return!0}var B8=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.getFoldingLevel=function(){return parseInt(this.id.substr(n.ID_PREFIX.length))};n.prototype.invoke=function(t,n,i){(function(t,n,i,r){var e=t.getRegionsInside(null,(function(t,e){return e===n&&t.isCollapsed!==i&&!r.some((function(n){return t.containsLine(n)}))}));t.toggleCollapseState(e)})(n,this.getFoldingLevel(),!0,this.getSelectedLines(i))};return n}(T8);B8.ID_PREFIX="editor.foldLevel",B8.ID=function(t){return B8.ID_PREFIX+t};Pf(j8.ID,j8,0),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.unfold",label:ht(0,"Unfold"),alias:"Unfold",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:I8,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})||this}n.prototype.invoke=function(t,n,i,r){var e=r&&r.levels||1,o=this.getLineNumbers(r,i);r&&r.direction==="up"?a8(n,!1,e,o):u8(n,!1,e,o)};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.unfoldRecursively",label:ht(0,"Unfold Recursively"),alias:"Unfold Recursively",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2142),weight:100}})||this}n.prototype.invoke=function(t,n,i,r){u8(n,!1,Number.MAX_VALUE,this.getSelectedLines(i))};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.fold",label:ht(0,"Fold"),alias:"Fold",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:I8,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})||this}n.prototype.invoke=function(t,n,i,r){var e=this.getLineNumbers(r,i),o=r&&r.levels,s=r&&r.direction;typeof o!="number"&&typeof s!="string"?function(t,n,i){var r=[];for(var e=0,o=i;e<o.length;e++){var s=o[e];var u=t.getAllRegionsAtLine(s,(function(t){return t.isCollapsed!==n}));u.length>0&&r.push(u[0])}t.toggleCollapseState(r)}(n,!0,e):s==="up"?a8(n,!0,o||1,e):u8(n,!0,o||1,e)};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.foldRecursively",label:ht(0,"Fold Recursively"),alias:"Fold Recursively",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2140),weight:100}})||this}n.prototype.invoke=function(t,n,i){var r=this.getSelectedLines(i);u8(n,!0,Number.MAX_VALUE,r)};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.foldAll",label:ht(0,"Fold All"),alias:"Fold All",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2069),weight:100}})||this}n.prototype.invoke=function(t,n,i){u8(n,!0)};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.unfoldAll",label:ht(0,"Unfold All"),alias:"Unfold All",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2088),weight:100}})||this}n.prototype.invoke=function(t,n,i){u8(n,!1)};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.foldAllBlockComments",label:ht(0,"Fold All Block Comments"),alias:"Fold All Block Comments",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2138),weight:100}})||this}n.prototype.invoke=function(t,n,i,r,e){if(n.regions.hasTypes())f8(n,re.Comment.value,!0);else{var o=i.getModel();if(!o)return;var s=e.getLanguageConfiguration(o.getLanguageId()).comments;s&&s.blockCommentStartToken&&c8(n,new RegExp("^\\s*"+uo(s.blockCommentStartToken)),!0)}};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.foldAllMarkerRegions",label:ht(0,"Fold All Regions"),alias:"Fold All Regions",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2077),weight:100}})||this}n.prototype.invoke=function(t,n,i,r,e){if(n.regions.hasTypes())f8(n,re.Region.value,!0);else{var o=i.getModel();if(!o)return;var s=e.getLanguageConfiguration(o.getLanguageId()).foldingRules;s&&s.markers&&s.markers.start&&c8(n,new RegExp(s.markers.start),!0)}};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.unfoldAllMarkerRegions",label:ht(0,"Unfold All Regions"),alias:"Unfold All Regions",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2078),weight:100}})||this}n.prototype.invoke=function(t,n,i,r,e){if(n.regions.hasTypes())f8(n,re.Region.value,!1);else{var o=i.getModel();if(!o)return;var s=e.getLanguageConfiguration(o.getLanguageId()).foldingRules;s&&s.markers&&s.markers.start&&c8(n,new RegExp(s.markers.start),!1)}};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.foldAllExcept",label:ht(0,"Fold All Except Selected"),alias:"Fold All Except Selected",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2136),weight:100}})||this}n.prototype.invoke=function(t,n,i){h8(n,!0,this.getSelectedLines(i))};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.unfoldAllExcept",label:ht(0,"Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2134),weight:100}})||this}n.prototype.invoke=function(t,n,i){h8(n,!1,this.getSelectedLines(i))};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.toggleFold",label:ht(0,"Toggle Fold"),alias:"Toggle Fold",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2090),weight:100}})||this}n.prototype.invoke=function(t,n,i){s8(n,1,this.getSelectedLines(i))};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.gotoParentFold",label:ht(0,"Go to Parent Fold"),alias:"Go to Parent Fold",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,weight:100}})||this}n.prototype.invoke=function(t,n,i){var r=this.getSelectedLines(i);if(r.length>0){var e=function(t,n){var i=null;var r=n.getRegionAtLine(t);if(r!==null&&(i=r.startLineNumber,t===i)){var e=r.parentIndex;i=e!==-1?n.regions.getStartLineNumber(e):null}return i}(r[0],n);e!==null&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.gotoPreviousFold",label:ht(0,"Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,weight:100}})||this}n.prototype.invoke=function(t,n,i){var r=this.getSelectedLines(i);if(r.length>0){var e=function(t,n){var i=n.getRegionAtLine(t);if(i!==null&&i.startLineNumber===t){if(t!==i.startLineNumber)return i.startLineNumber;{var r=i.parentIndex;var e=0;for(r!==-1&&(e=n.regions.getStartLineNumber(i.parentIndex));i!==null;){if(!(i.regionIndex>0)||(i=n.regions.toRegion(i.regionIndex-1),i.startLineNumber<=e))return null;if(i.parentIndex===r)return i.startLineNumber}}}else if(n.regions.length>0)for(i=n.regions.toRegion(n.regions.length-1);i!==null;){if(i.startLineNumber<t)return i.startLineNumber;i=i.regionIndex>0?n.regions.toRegion(i.regionIndex-1):null}return null}(r[0],n);e!==null&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.gotoNextFold",label:ht(0,"Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,weight:100}})||this}n.prototype.invoke=function(t,n,i){var r=this.getSelectedLines(i);if(r.length>0){var e=function(t,n){var i=n.getRegionAtLine(t);if(i!==null&&i.startLineNumber===t){var r=i.parentIndex;var e=0;if(r!==-1)e=n.regions.getEndLineNumber(i.parentIndex);else{if(n.regions.length===0)return null;e=n.regions.getEndLineNumber(n.regions.length-1)}for(;i!==null;){if(!(i.regionIndex<n.regions.length)||(i=n.regions.toRegion(i.regionIndex+1),i.startLineNumber>=e))return null;if(i.parentIndex===r)return i.startLineNumber}}else if(n.regions.length>0)for(i=n.regions.toRegion(0);i!==null;){if(i.startLineNumber>t)return i.startLineNumber;i=i.regionIndex<n.regions.length?n.regions.toRegion(i.regionIndex+1):null}return null}(r[0],n);e!==null&&i.setSelection({startLineNumber:e,startColumn:1,endLineNumber:e,endColumn:1})}};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.createFoldingRangeFromSelection",label:ht(0,"Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2135),weight:100}})||this}n.prototype.invoke=function(t,n,i){var r;var e=[],o=i.getSelections();if(o){for(var s=0,u=o;s<u.length;s++){var a=u[s];var h=a.endLineNumber;a.endColumn===1&&--h,h>a.startLineNumber&&(e.push({startLineNumber:a.startLineNumber,endLineNumber:h,type:void 0,isCollapsed:!0,source:1}),i.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(e.length>0){e.sort((function(t,n){return t.startLineNumber-n.startLineNumber}));var a=r8.sanitizeAndMerge(n.regions,e,(r=i.getModel())===null||r===void 0?void 0:r.getLineCount());n.updatePost(r8.fromFoldRanges(a))}}};return n}(T8)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.removeManualFoldingRanges",label:ht(0,"Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2137),weight:100}})||this}n.prototype.invoke=function(t,n,i){var r=i.getSelections();if(r){var e=[];for(var o=0,s=r;o<s.length;o++){var u=s[o];var a=u.startLineNumber,h=u.endLineNumber;e.push(h>=a?{startLineNumber:a,endLineNumber:h}:{endLineNumber:h,startLineNumber:a})}n.removeManualRanges(e),t.triggerFoldingModelChanged()}};return n}(T8));for(var At=1;At<=7;At++)N8=new B8({id:B8.ID(At),label:ht(0,"Fold Level {0}",At),alias:"Fold Level ".concat(At),precondition:L8,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2048|21+At),weight:100}}),Hf.INSTANCE.registerEditorAction(N8);var N8;hc.registerCommand("_executeFoldingRangeProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u,a,h,c,f,l,v,f,d;return __generator(this,(function(g){switch(g.label){case 0:i=n[0];if(!(i instanceof Cr))throw Xn();r=t.get(tp),e=t.get(Yh).getModel(i);if(!e)throw Xn();o=t.get(Kl);if(!o.getValue("editor.folding",{resource:i}))return[2,[]];s=t.get(xv),u=o.getValue("editor.foldingStrategy",{resource:i}),a={get limit(){return o.getValue("editor.foldingMaximumRegions",{resource:i})},update:function(t,n){}},h=new d8(e,s,a);c=h;if(u!=="indentation"){f=j8.getFoldingRangeProviders(r,e);f.length&&(c=new A8(e,f,(function(){}),a,h))}return[4,c.compute(Fi.None)];case 1:l=g.sent(),v=[];try{if(l)for(f=0;f<l.length;f++){d=l.getType(f);v.push({start:l.getStartLineNumber(f),end:l.getEndLineNumber(f),kind:d?re.fromValue(d):void 0})}return[2,v]}finally{c.dispose()}return[2]}}))}))}));Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.fontZoomIn",label:ht(0,"Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})||this}n.prototype.run=function(t,n){zh.setZoomLevel(zh.getZoomLevel()+1)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.fontZoomOut",label:ht(0,"Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})||this}n.prototype.run=function(t,n){zh.setZoomLevel(zh.getZoomLevel()-1)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.fontZoomReset",label:ht(0,"Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})||this}n.prototype.run=function(t,n){zh.setZoomLevel(0)};return n}(Lf));var P8=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},W8=function(t,n){return function(i,r){n(i,r,t)}};var H8=function(){function t(t,n,i,r){var e=this;this._editor=t,this._languageFeaturesService=n,this._workerService=i,this._accessibilitySignalService=r,this._disposables=new hi,this._sessionDisposables=new hi,this._disposables.add(n.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(t.onDidChangeModel((function(){return e._update()}))),this._disposables.add(t.onDidChangeModelLanguage((function(){return e._update()}))),this._disposables.add(t.onDidChangeConfiguration((function(t){t.hasChanged(56)&&e._update()}))),this._update()}t.prototype.dispose=function(){this._disposables.dispose(),this._sessionDisposables.dispose()};t.prototype._update=function(){var t=this;if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;var n=this._editor.getModel(),i=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(n)[0];if(!i||!i.autoFormatTriggerCharacters)return;var r=new Jv;for(var e=0,o=i.autoFormatTriggerCharacters;e<o.length;e++){var s=o[e];r.add(s.charCodeAt(0))}this._sessionDisposables.add(this._editor.onDidType((function(n){var i=n.charCodeAt(n.length-1);r.has(i)&&t._trigger(String.fromCharCode(i))})))};t.prototype._trigger=function(t){var n=this;if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;var i=this._editor.getModel(),r=this._editor.getPosition(),e=new ji,o=this._editor.onDidChangeModelContent((function(t){if(t.isFlush)return e.cancel(),void o.dispose();for(var n=0,i=t.changes.length;n<i;n++)if(t.changes[n].range.endLineNumber<=r.lineNumber)return e.cancel(),void o.dispose()}));lY(this._workerService,this._languageFeaturesService,i,r,t,i.getFormattingOptions(),e.token).then((function(t){e.token.isCancellationRequested||k(t)&&(n._accessibilitySignalService.playSignal(wG.format,{userGesture:!1}),rY.execute(n._editor,t,!0))})).finally((function(){o.dispose()}))};return t}();H8.ID="editor.contrib.autoFormat",H8=P8([W8(1,tp),W8(2,vH),W8(3,dG)],H8);var z8=function(){function t(t,n,i){var r=this;this.editor=t,this._languageFeaturesService=n,this._instantiationService=i,this._callOnDispose=new hi,this._callOnModel=new hi,this._callOnDispose.add(t.onDidChangeConfiguration((function(){return r._update()}))),this._callOnDispose.add(t.onDidChangeModel((function(){return r._update()}))),this._callOnDispose.add(t.onDidChangeModelLanguage((function(){return r._update()}))),this._callOnDispose.add(n.documentRangeFormattingEditProvider.onDidChange(this._update,this))}t.prototype.dispose=function(){this._callOnDispose.dispose(),this._callOnModel.dispose()};t.prototype._update=function(){var t=this;this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((function(n){var i=n.range;return t._trigger(i)})))};t.prototype._trigger=function(t){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(aY,this.editor,t,2,IB.None,Fi.None,!1).catch(Gn))};return t}();z8.ID="editor.contrib.formatOnPaste",z8=P8([W8(1,tp),W8(2,Jh)],z8);Pf(H8.ID,H8,2),Pf(z8.ID,z8,2),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.formatDocument",label:ht(0,"Format Document"),alias:"Format Document",precondition:Dc.and($C.notInCompositeEditor,$C.writable,$C.hasDocumentFormattingProvider),kbOpts:{kbExpr:$C.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:if(!n.hasModel())return[3,2];i=t.get(Jh);return[4,t.get(BB).showWhile(i.invokeFunction(cY,n,1,IB.None,Fi.None,!0),250)];case 1:r.sent();r.label=2;case 2:return[2]}}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.formatSelection",label:ht(0,"Format Selection"),alias:"Format Selection",precondition:Dc.and($C.writable,$C.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2084),weight:100},contextMenuOpts:{when:$C.hasNonEmptySelection,group:"1_modification",order:1.31}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e;return __generator(this,(function(o){switch(o.label){case 0:if(!n.hasModel())return[2];i=t.get(Jh),r=n.getModel(),e=n.getSelections().map((function(t){return t.isEmpty()?new Ir(t.startLineNumber,1,t.startLineNumber,r.getLineMaxColumn(t.startLineNumber)):t}));return[4,t.get(BB).showWhile(i.invokeFunction(aY,n,e,1,IB.None,Fi.None,!0),250)];case 1:o.sent();return[2]}}))}))};return n}(Lf)),hc.registerCommand("editor.action.format",(function(t){return __awaiter(a,void 0,void 0,(function(){var n,i,r;return __generator(this,(function(e){switch(e.label){case 0:n=t.get(Qh).getFocusedCodeEditor();if(!n||!n.hasModel())return[2];i=t.get(ac);if(!n.getSelection().isEmpty())return[3,2];return[4,i.executeCommand("editor.action.formatDocument")];case 1:r=e.sent();return[3,4];case 2:return[4,i.executeCommand("editor.action.formatSelection")];case 3:r=e.sent();e.label=4;case 4:r;return[2]}}))}))}));var U8=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},K8=function(t,n){return function(i,r){n(i,r,t)}};var V8=function(){function t(){}t.prototype.remove=function(){var t;(t=this.parent)===null||t===void 0||t.children.delete(this.id)};t.findId=function(t,n){var i;typeof t=="string"?i="".concat(n.id,"/").concat(t):(i="".concat(n.id,"/").concat(t.name),n.children.get(i)!==void 0&&(i="".concat(n.id,"/").concat(t.name,"_").concat(t.range.startLineNumber,"_").concat(t.range.startColumn)));var r=i;for(var e=0;n.children.get(r)!==void 0;e++)r="".concat(i,"_").concat(e);return r};t.empty=function(t){return t.children.size===0};return t}();var q8=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.id=n,e.parent=i,e.symbol=r,e.children=new Map;return e}return n}(V8);var G8=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o.id=n,o.parent=i,o.label=r,o.order=e,o.children=new Map;return o}return n}(V8);var $8=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.uri=n,i.id="root",i.parent=void 0,i._groups=new Map,i.children=new Map,i.id="root",i.parent=void 0;return i}n.create=function(t,i,r){var e=new ji(r),o=new n(i.uri),s=t.ordered(i),u=s.map((function(t,r){var s;var u=V8.findId("provider_".concat(r),o),a=new G8(u,o,(s=t.displayName)!==null&&s!==void 0?s:"Unknown Outline Provider",r);return Promise.resolve(t.provideDocumentSymbols(i,e.token)).then((function(t){for(var i=0,r=t||[];i<r.length;i++){var e=r[i];n._makeOutlineElement(e,a)}return a}),(function(t){return $n(t),a})).then((function(t){V8.empty(t)?t.remove():o._groups.set(u,t)}))})),a=t.onDidChange((function(){v(t.ordered(i),s)||e.cancel()}));return Promise.all(u).then((function(){return e.token.isCancellationRequested&&!r.isCancellationRequested?n.create(t,i,r):o._compact()})).finally((function(){e.dispose(),a.dispose(),e.dispose()}))};n._makeOutlineElement=function(t,i){var r=V8.findId(t,i),e=new q8(r,i,t);if(t.children)for(var o=0,s=t.children;o<s.length;o++){var u=s[o];n._makeOutlineElement(u,e)}i.children.set(e.id,e)};n.prototype._compact=function(){var t=0;for(var n=0,i=this._groups;n<i.length;n++){var r=i[n],e=r[0],o=r[1];o.children.size===0?this._groups.delete(e):t+=1}if(t!==1)this.children=this._groups;else{var e=Yt.first(this._groups.values());for(var s=0,u=e.children;s<u.length;s++){var a=u[s],o=a[1];o.parent=this,this.children.set(o.id,o)}}return this};n.prototype.getTopLevelSymbols=function(){var t=[];for(var n=0,i=this.children.values();n<i.length;n++){var r=i[n];r instanceof q8?t.push(r.symbol):t.push.apply(t,Yt.map(r.children.values(),(function(t){return t.symbol})))}return t.sort((function(t,n){return Ir.compareRangesUsingStarts(t.range,n.range)}))};n.prototype.asListOfDocumentSymbols=function(){var t=this.getTopLevelSymbols(),i=[];return n._flattenDocumentSymbols(i,t,""),i.sort((function(t,n){return Tr.compare(Ir.getStartPosition(t.range),Ir.getStartPosition(n.range))||Tr.compare(Ir.getEndPosition(n.range),Ir.getEndPosition(t.range))}))};n._flattenDocumentSymbols=function(t,i,r){for(var e=0,o=i;e<o.length;e++){var s=o[e];t.push({kind:s.kind,tags:s.tags,name:s.name,detail:s.detail,containerName:s.containerName||r,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&n._flattenDocumentSymbols(t,s.children,s.name)}};return n}(V8);var J8=Zh("IOutlineModelService");var Z8=function(){function t(t,n,i){var r=this;this._languageFeaturesService=t,this._disposables=new hi,this._cache=new ud(10,.7),this._debounceInformation=n.for(t.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved((function(t){r._cache.delete(t.id)})))}t.prototype.dispose=function(){this._disposables.dispose()};t.prototype.getOrCreate=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u;var a=this;return __generator(this,(function(h){switch(h.label){case 0:i=this._languageFeaturesService.documentSymbolProvider,r=i.ordered(t);e=this._cache.get(t.id);if(!e||e.versionId!==t.getVersionId()||!v(e.provider,r)){o=new ji;e={versionId:t.getVersionId(),provider:r,promiseCnt:0,source:o,promise:$8.create(i,t,o.token),model:void 0},this._cache.set(t.id,e);s=Date.now();e.promise.then((function(n){e.model=n,a._debounceInformation.update(t,Date.now()-s)})).catch((function(n){a._cache.delete(t.id)}))}if(e.model)return[2,e.model];e.promiseCnt+=1;u=n.onCancellationRequested((function(){--e.promiseCnt==0&&(e.source.cancel(),a._cache.delete(t.id))}));h.label=1;case 1:h.trys.push([1,,3,4]);return[4,e.promise];case 2:return[2,h.sent()];case 3:u.dispose();return[7];case 4:return[2]}}))}))};return t}();Z8=U8([K8(0,tp),K8(1,Cj),K8(2,Yh)],Z8),Xl(J8,Z8,1),hc.registerCommand("_executeDocumentSymbolProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(this,void 0,void 0,(function(){var i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:i=n[0];Z(Cr.isUri(i));r=t.get(J8),e=t.get(Xh);return[4,e.createModelReference(i)];case 1:o=s.sent();s.label=2;case 2:s.trys.push([2,,4,5]);return[4,r.getOrCreate(o.object.textEditorModel,Fi.None)];case 3:return[2,s.sent().getTopLevelSymbols()];case 4:o.dispose();return[7];case 5:return[2]}}))}))}));var Q8=function(t){__extends(n,t);function n(i,r){var e=this;e=t.call(this)||this,e.contextKeyService=i,e.model=r,e.inlineCompletionVisible=n.inlineSuggestionVisible.bindTo(e.contextKeyService),e.inlineCompletionSuggestsIndentation=n.inlineSuggestionHasIndentation.bindTo(e.contextKeyService),e.inlineCompletionSuggestsIndentationLessThanTabSize=n.inlineSuggestionHasIndentationLessThanTabSize.bindTo(e.contextKeyService),e.suppressSuggestions=n.suppressSuggestions.bindTo(e.contextKeyService),e._register(lP((function(t){var n=e.model.read(t),i=n==null?void 0:n.state.read(t),r=!!(i!=null&&i.inlineCompletion)&&(i==null?void 0:i.primaryGhostText)!==void 0&&!(i!=null&&i.primaryGhostText.isEmpty());e.inlineCompletionVisible.set(r),i!=null&&i.primaryGhostText&&(i!=null&&i.inlineCompletion)&&e.suppressSuggestions.set(i.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)}))),e._register(lP((function(t){var n=e.model.read(t);var i=!1,r=!0;var o=n==null?void 0:n.primaryGhostText.read(t);if(n!=null&&n.selectedSuggestItem&&o&&o.parts.length>0){var s=o.parts[0],u=s.column,a=s.lines,h=a[0];if(u<=n.textModel.getLineIndentColumn(o.lineNumber)){var c=vo(h);c===-1&&(c=h.length-1),i=c>0;var f=n.textModel.getOptions().tabSize;r=B_.visibleColumnFromColumn(h,c+1,f)<f}}e.inlineCompletionSuggestsIndentation.set(i),e.inlineCompletionSuggestsIndentationLessThanTabSize.set(r)})));return e}return n}(ci);Q8.inlineSuggestionVisible=new qc("inlineSuggestionVisible",!1,ht(0,"Whether an inline suggestion is visible")),Q8.inlineSuggestionHasIndentation=new qc("inlineSuggestionHasIndentation",!1,ht(0,"Whether the inline suggestion starts with whitespace")),Q8.inlineSuggestionHasIndentationLessThanTabSize=new qc("inlineSuggestionHasIndentationLessThanTabSize",!0,ht(0,"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),Q8.suppressSuggestions=new qc("inlineSuggestionSuppressSuggestions",void 0,ht(0,"Whether suggestions should be suppressed for the current suggestion"));var Y8=function(){function t(t,n){this.lineNumber=t,this.parts=n}t.prototype.equals=function(t){return this.lineNumber===t.lineNumber&&this.parts.length===t.parts.length&&this.parts.every((function(n,i){return n.equals(t.parts[i])}))};t.prototype.renderForScreenReader=function(t){if(this.parts.length===0)return"";var n=this.parts[this.parts.length-1],i=t.substr(0,n.column-1);return new MJ(__spreadArray([],this.parts.map((function(t){return new FJ(Ir.fromPositions(new Tr(1,t.column)),t.lines.join("\n"))})),true)).applyToString(i).substring(this.parts[0].column-1)};t.prototype.isEmpty=function(){return this.parts.every((function(t){return t.lines.length===0}))};Object.defineProperty(t.prototype,"lineCount",{get:function(){return 1+this.parts.reduce((function(t,n){return t+n.lines.length-1}),0)},enumerable:false,configurable:true});return t}();var X8=function(){function t(t,n,i){this.column=t,this.text=n,this.preview=i,this.lines=lo(this.text)}t.prototype.equals=function(t){return this.column===t.column&&this.lines.length===t.lines.length&&this.lines.every((function(n,i){return n===t.lines[i]}))};return t}();var ttt=function(){function t(t,n,i,r){if(r===void 0){r=0}this.lineNumber=t,this.columnRange=n,this.text=i,this.additionalReservedLineCount=r,this.parts=[new X8(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=lo(this.text)}t.prototype.renderForScreenReader=function(t){return this.newLines.join("\n")};Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.newLines.length},enumerable:false,configurable:true});t.prototype.isEmpty=function(){return this.parts.every((function(t){return t.lines.length===0}))};t.prototype.equals=function(t){return this.lineNumber===t.lineNumber&&this.columnRange.equals(t.columnRange)&&this.newLines.length===t.newLines.length&&this.newLines.every((function(n,i){return n===t.newLines[i]}))&&this.additionalReservedLineCount===t.additionalReservedLineCount};return t}();function ntt(t,n){return v(t,n,itt)}function itt(t,n){return t===n||!(!t||!n)&&(t instanceof Y8&&n instanceof Y8||t instanceof ttt&&n instanceof ttt)&&t.equals(n)}var rtt=[];var ett=function(){function t(t,n){if(this.startColumn=t,this.endColumnExclusive=n,t>n)throw new ri("startColumn ".concat(t," cannot be after endColumnExclusive ").concat(n))}t.prototype.toRange=function(t){return new Ir(t,this.startColumn,t,this.endColumnExclusive)};t.prototype.equals=function(t){return this.startColumn===t.startColumn&&this.endColumnExclusive===t.endColumnExclusive};return t}();function ott(t,n){var i=new hi,r=t.createDecorationsCollection();return i.add(vP({debugName:function(){return"Apply decorations from ".concat(n.debugName)}},(function(t){var i=n.read(t);r.set(i)}))),i.add({dispose:function(){r.clear()}}),i}function stt(t,n){return new Tr(t.lineNumber-n.lineNumber+1,t.lineNumber-n.lineNumber==0?t.column-n.column+1:t.column)}var utt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},att=function(t,n){return function(i,r){n(i,r,t)}};var htt="ghost-text";var ctt=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.editor=n,e.model=i,e.languageService=r,e.isDisposed=iP(e,!1),e.currentTextModel=bP(e.editor.onDidChangeModel,(function(){return e.editor.getModel()})),e.uiState=uP(e,(function(t){if(e.isDisposed.read(t))return;var n=e.currentTextModel.read(t);if(n!==e.model.targetTextModel.read(t))return;var i=e.model.ghostText.read(t);if(!i)return;var r=i instanceof ttt?i.columnRange:void 0,o=[],s=[];function u(t,n){if(s.length>0){var i=s[s.length-1];n&&i.decorations.push(new yp(i.content.length+1,i.content.length+1+t[0].length,n,0)),i.content+=t[0],t=t.slice(1)}for(var r=0,e=t;r<e.length;r++){var i=e[r];s.push({content:i,decorations:n?[new yp(1,i.length+1,n,0)]:[]})}}var a=n.getLineContent(i.lineNumber);var h,c=0;for(var f=0,l=i.parts;f<l.length;f++){var v=l[f];var d=v.lines;h===void 0?(o.push({column:v.column,text:d[0],preview:v.preview}),d=d.slice(1)):u([a.substring(c,v.column-1)],void 0),d.length>0&&(u(d,htt),h===void 0&&v.column<=a.length&&(h=v.column)),c=v.column-1}h!==void 0&&u([a.substring(c)],void 0);var g=h!==void 0?new ett(h,a.length+1):void 0;return{replacedRange:r,inlineTexts:o,additionalLines:s,hiddenRange:g,lineNumber:i.lineNumber,additionalReservedLineCount:e.model.minReservedLineCount.read(t),targetTextModel:n}})),e.decorations=uP(e,(function(t){var n=e.uiState.read(t);if(!n)return[];var i=[];n.replacedRange&&i.push({range:n.replacedRange.toRange(n.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),n.hiddenRange&&i.push({range:n.hiddenRange.toRange(n.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(var r=0,o=n.inlineTexts;r<o.length;r++){var s=o[r];i.push({range:Ir.fromPositions(new Tr(n.lineNumber,s.column)),options:{description:htt,after:{content:s.text,inlineClassName:s.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:gd.Left},showIfCollapsed:!0}})}return i})),e.additionalLinesWidget=e._register(new ftt(e.editor,e.languageService.languageIdCodec,uP((function(t){var n=e.uiState.read(t);return n?{lineNumber:n.lineNumber,additionalLines:n.additionalLines,minReservedLineCount:n.additionalReservedLineCount,targetTextModel:n.targetTextModel}:void 0})))),e._register(ai((function(){e.isDisposed.set(!0,void 0)}))),e._register(ott(e.editor,e.decorations));return e}n.prototype.ownsViewZone=function(t){return this.additionalLinesWidget.viewZoneId===t};return n}(ci);ctt=utt([att(2,Zl)],ctt);var ftt=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.editor=n,e.languageIdCodec=i,e.lines=r,e._viewZoneId=void 0,e.editorOptionsChanged=_P("editorOptionChanged",wi.filter(e.editor.onDidChangeConfiguration,(function(t){return t.hasChanged(33)||t.hasChanged(117)||t.hasChanged(99)||t.hasChanged(94)||t.hasChanged(51)||t.hasChanged(50)||t.hasChanged(67)}))),e._register(lP((function(t){var n=e.lines.read(t);e.editorOptionsChanged.read(t),n?e.updateLines(n.lineNumber,n.additionalLines,n.minReservedLineCount):e.clear()})));return e}Object.defineProperty(n.prototype,"viewZoneId",{get:function(){return this._viewZoneId},enumerable:false,configurable:true});n.prototype.dispose=function(){t.prototype.dispose.call(this),this.clear()};n.prototype.clear=function(){var t=this;this.editor.changeViewZones((function(n){t._viewZoneId&&(n.removeZone(t._viewZoneId),t._viewZoneId=void 0)}))};n.prototype.updateLines=function(t,n,i){var r=this;var e=this.editor.getModel();if(!e)return;var o=e.getOptions().tabSize;this.editor.changeViewZones((function(e){r._viewZoneId&&(e.removeZone(r._viewZoneId),r._viewZoneId=void 0);var s=Math.max(n.length,i);if(s>0){var u=document.createElement("div");(function(t,n,i,r,e){var o=r.get(33),s=r.get(117),u="none",a=r.get(94),h=r.get(51),c=r.get(50),f=r.get(67),l=new Ml(1e4);l.appendString('<div class="suggest-preview-text">');for(var v=0,d=i.length;v<d;v++){var g=i[v],p=g.content;l.appendString('<div class="view-line'),l.appendString('" style="top:'),l.appendString(String(v*f)),l.appendString('px;width:1000000px;">');var w=Po(p),m=Bo(p),b=mp.createEmpty(p,e);Mp(new Dp(c.isMonospace&&!o,c.canUseHalfwidthRightwardsArrow,p,!1,w,m,0,b,g.decorations,n,0,c.spaceWidth,c.middotWidth,c.wsmiddotWidth,s,u,a,h!==An.OFF,null),l),l.appendString("</div>")}l.appendString("</div>"),Ph(t,c);var y=l.build(),_=ltt?ltt.createHTML(y):y;t.innerHTML=_})(u,o,n,r.editor.getOptions(),r.languageIdCodec),r._viewZoneId=e.addZone({afterLineNumber:t,heightInLines:s,domNode:u,afterColumnAffinity:1})}}))};return n}(ci);var ltt=rl("editorGhostText",{createHTML:function(t){return t}});var vtt=function(){function t(t){var n=this;this.lines=t,this.tokenization={getLineTokens:function(t){return n.lines[t-1]}}}t.prototype.getLineCount=function(){return this.lines.length};t.prototype.getLineLength=function(t){return this.lines[t-1].getLineContent().length};return t}();function dtt(t,n,i,r){return __awaiter(this,arguments,void 0,(function(t,n,i,r,e,o){function s(t){if(!t.yieldsToGroupIds)return[];var n=[];for(var i=0,r=t.yieldsToGroupIds||[];i<r.length;i++){var e=r[i];var o=f.get(e);for(var s=0,u=o;s<u.length;s++){var a=u[s];n.push(a)}}return n}function u(t,n){if(n=__spreadArray(__spreadArray([],n,true),[t],false),p.has(t))return n;p.add(t);try{var i=s(t);for(var r=0,e=i;r<e.length;r++){var o=e[r];var a=u(o,n);if(a)return a}}finally{p.delete(t)}}function a(t){var o=this;var h=g.get(t);if(h)return h;var c=u(t,[]);c&&$n(new Error("Inline completions: cyclic yield-to dependency detected. Path: ".concat(c.map((function(t){return t.toString?t.toString():""+t})).join(" -> "))));var f=new Ws;return g.set(t,f.p),function(){return __awaiter(o,void 0,void 0,(function(){var o,u,h,f,l,v;return __generator(this,(function(d){switch(d.label){case 0:if(!!c)return[3,4];o=s(t);u=0,h=o;d.label=1;case 1:if(!(u<h.length))return[3,4];f=h[u];return[4,a(f)];case 2:l=d.sent();if(l&&l.items.length>0)return[2];d.label=3;case 3:u++;return[3,1];case 4:d.trys.push([4,6,,7]);return[4,t.provideInlineCompletions(i,n,r,e)];case 5:return[2,d.sent()];case 6:v=d.sent();return[2,void $n(v)];case 7:return[2]}}))}))}().then((function(t){return f.complete(t)}),(function(t){return f.error(t)})),f.p}var h,c,f,l,v,d,g,p,w,m,b,y,_,d,k,x,C,S,D,A;var O=this;if(e===void 0){e=Fi.None}return __generator(this,(function(r){switch(r.label){case 0:h=function(t,n){var i=n.getWordAtPosition(t),r=n.getLineMaxColumn(t.lineNumber);return i?new Ir(t.lineNumber,i.startColumn,t.lineNumber,r):Ir.fromPositions(t,t.with(void 0,r))}(n,i),c=t.all(i),f=new hd;for(l=0,v=c;l<v.length;l++){d=v[l];d.groupId&&f.add(d.groupId,d)}g=new Map,p=new Set;return[4,Promise.all(c.map((function(t){return __awaiter(O,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:n={provider:t};return[4,a(t)];case 1:return[2,(n.completions=i.sent(),n)]}}))}))})))];case 1:w=r.sent(),m=new Map,b=[];for(y=0,_=w;y<_.length;y++){d=_[y];k=d.completions;if(!k)continue;x=new ptt(k,d.provider);b.push(x);for(C=0,S=k.items;C<S.length;C++){D=S[C];A=wtt.from(D,x,h,i,o);m.set(A.hash(),A)}}return[2,new gtt(Array.from(m.values()),new Set(m.keys()),b)]}}))}))}var gtt=function(){function t(t,n,i){this.completions=t,this.hashs=n,this.providerResults=i}t.prototype.has=function(t){return this.hashs.has(t.hash())};t.prototype.dispose=function(){for(var t=0,n=this.providerResults;t<n.length;t++){var i=n[t];i.removeRef()}};return t}();var ptt=function(){function t(t,n){this.inlineCompletions=t,this.provider=n,this.refCount=1}t.prototype.addRef=function(){this.refCount++};t.prototype.removeRef=function(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)};return t}();var wtt=function(){function t(t,n,i,r,e,o,s,u){this.filterText=t,this.command=n,this.range=i,this.insertText=r,this.snippetInfo=e,this.additionalTextEdits=o,this.sourceInlineCompletion=s,this.source=u,r=(t=t.replace(/\r\n|\r/g,"\n")).replace(/\r\n|\r/g,"\n")}t.from=function(n,i,r,e,o){var s,u,a=n.range?Ir.lift(n.range):r;if(typeof n.insertText=="string"){if(s=n.insertText,o&&n.completeBracketPairs){s=mtt(s,a.getStartPosition(),e,o);var h=s.length-n.insertText.length;h!==0&&(a=new Ir(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+h))}u=void 0}else if("snippet"in n.insertText){var h=n.insertText.snippet.length;if(o&&n.completeBracketPairs){n.insertText.snippet=mtt(n.insertText.snippet,a.getStartPosition(),e,o);var c=n.insertText.snippet.length-h;c!==0&&(a=new Ir(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+c))}var f=(new T0).parse(n.insertText.snippet);f.children.length===1&&f.children[0]instanceof D0?(s=f.children[0].value,u=void 0):(s=f.toString(),u={snippet:n.insertText.snippet,range:a})}else tf();return new t(s,n.command,a,s,u,n.additionalTextEdits||rtt,n,i)};t.prototype.withRange=function(n){return new t(this.filterText,this.command,n,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)};t.prototype.hash=function(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})};return t}();function mtt(t,n,i,r){var e=i.getLineContent(n.lineNumber).substring(0,n.column-1)+t,o=i.tokenization.tokenizeLineWithEdit(n,e.length-(n.column-1),t),s=o==null?void 0:o.sliceAndInflate(n.column-1,e.length,0);return s?function(t,n){var i=new NA,r=new iO(i,(function(t){return n.getLanguageConfiguration(t)})),e=hO(new YA(new vtt([t]),r),[],void 0,!0);var o="";var s=t.getLineContent();return function t(n,i){if(n.kind===2)if(t(n.openingBracket,i),i=xA(i,n.openingBracket.length),n.child&&(t(n.child,i),i=xA(i,n.child.length)),n.closingBracket)t(n.closingBracket,i),i=xA(i,n.closingBracket.length);else{var e=r.getSingleLanguageBracketTokens(n.openingBracket.languageId).findClosingTokenText(n.openingBracket.bracketIds);o+=e}else if(n.kind!==3){if(n.kind===0||n.kind===1)o+=s.substring(i,xA(i,n.length));else if(n.kind===4)for(var u=0,a=n.children;u<a.length;u++){var e=a[u];t(e,i),i=xA(i,e.length)}}}(e,mA),o}(s,r):t}function btt(t,n,i){var r=i?t.range.intersectRanges(i):t.range;if(!r)return t;var e=n.getValueInRange(r,1),o=Do(e,t.text),s=wA.ofText(e.substring(0,o)).addToPosition(t.range.getStartPosition()),u=t.text.substring(o),a=Ir.fromPositions(s,t.range.getEndPosition());return new FJ(a,u)}function ytt(t,n){return t.text.startsWith(n.text)&&(i=t.range,(r=n.range).getStartPosition().equals(i.getStartPosition())&&r.getEndPosition().isBeforeOrEqual(i.getEndPosition()));var i,r}function _tt(t,n,i,r,e){if(e===void 0){e=0}var o=btt(t,n);if(o.range.endLineNumber!==o.range.startLineNumber)return;var s=n.getLineContent(o.range.startLineNumber),u=go(s).length;if(o.range.startColumn-1<=u){var a=go(o.text).length,h=s.substring(o.range.startColumn-1,u),c=[o.range.getStartPosition(),o.range.getEndPosition()],f=c[0],l=c[1],v=f.column+h.length<=l.column?f.delta(0,h.length):l,d=Ir.fromPositions(v,l),g=o.text.startsWith(h)?o.text.substring(h.length):o.text.substring(a);o=new FJ(d,g)}var p=n.getValueInRange(o.range),w=function(t,n){if((ktt==null?void 0:ktt.originalValue)===t&&(ktt==null?void 0:ktt.newValue)===n)return ktt==null?void 0:ktt.changes;{var i=Ctt(t,n,!0);if(i){var r=xtt(i);if(r>0){var e=Ctt(t,n,!1);e&&xtt(e)<r&&(i=e)}}return ktt={originalValue:t,newValue:n,changes:i},i}}(p,o.text);if(!w)return;var m=o.range.startLineNumber,b=new Array;if(i==="prefix"){var a=w.filter((function(t){return t.originalLength===0}));if(a.length>1||a.length===1&&a[0].originalStart!==p.length)return}var y=o.text.length-e;for(var _=0,k=w;_<k.length;_++){var a=k[_];var h=o.range.startColumn+a.originalStart+a.originalLength;if(i==="subwordSmart"&&r&&r.lineNumber===o.range.startLineNumber&&h<r.column||a.originalLength>0)return;if(a.modifiedLength===0)continue;var f=a.modifiedStart+a.modifiedLength,l=Math.max(a.modifiedStart,Math.min(f,y)),v=o.text.substring(a.modifiedStart,l),d=o.text.substring(l,Math.max(a.modifiedStart,f));v.length>0&&b.push(new X8(h,v,!1)),d.length>0&&b.push(new X8(h,d,!0))}return new Y8(m,b)}var ktt;function xtt(t){var n=0;for(var i=0,r=t;i<r.length;i++){var e=r[i];n+=e.originalLength}return n}function Ctt(t,n,i){if(t.length>5e3||n.length>5e3)return;function r(t){var n=0;for(var i=0,r=t.length;i<r;i++){var e=t.charCodeAt(i);e>n&&(n=e)}return n}var e=Math.max(r(t),r(n));function o(t){if(t<0)throw new Error("unexpected");return e+t+1}function s(t){var n=0,r=0;var e=new Int32Array(t.length);for(var s=0,u=t.length;s<u;s++)if(i&&t[s]==="("){var a=100*r+n;e[s]=o(2*a),n++}else if(i&&t[s]===")"){n=Math.max(n-1,0);var a=100*r+n;e[s]=o(2*a+1),n===0&&r++}else e[s]=t.charCodeAt(s);return e}var u=s(t),a=s(n);return new Hv({getElements:function(){return u}},{getElements:function(){return a}}).ComputeDiff(!1).changes}var Stt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Dtt=function(t,n){return function(i,r){n(i,r,t)}};var Att=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s.textModel=n,s.versionId=i,s._debounceValue=r,s.languageFeaturesService=e,s.languageConfigurationService=o,s._updateOperation=s._register(new fi),s.inlineCompletions=eP("inlineCompletions",void 0),s.suggestWidgetInlineCompletions=eP("suggestWidgetInlineCompletions",void 0),s._register(s.textModel.onDidChangeContent((function(){s._updateOperation.clear()})));return s}n.prototype.fetch=function(t,n,i){var r=this;var e,o;var s=new Ott(t,n,this.textModel.getVersionId()),u=n.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(!((e=this._updateOperation.value)===null||e===void 0)&&e.request.satisfies(s))return this._updateOperation.value.promise;if(!((o=u.get())===null||o===void 0)&&o.request.satisfies(s))return Promise.resolve(!0);var a=!!this._updateOperation.value;this._updateOperation.clear();var h=new ji,c=function(){return __awaiter(r,void 0,void 0,(function(){var r,e,o,c,f,l,v,d;return __generator(this,(function(g){switch(g.label){case 0:o=a||n.triggerKind===Gr.Automatic;if(!o)return[3,2];return[4,(r=this._debounceValue.get(this.textModel),e=h.token,new Promise((function(t){var n;var i=setTimeout((function(){n&&n.dispose(),t()}),r);e&&(n=e.onCancellationRequested((function(){clearTimeout(i),n&&n.dispose(),t()})))})))];case 1:o=g.sent();g.label=2;case 2:if(o,h.token.isCancellationRequested||this.textModel.getVersionId()!==s.versionId)return[2,!1];c=new Date;return[4,dtt(this.languageFeaturesService.inlineCompletionsProvider,t,this.textModel,n,h.token,this.languageConfigurationService)];case 3:f=g.sent();if(h.token.isCancellationRequested||this.textModel.getVersionId()!==s.versionId)return[2,!1];l=new Date;this._debounceValue.update(this.textModel,l.getTime()-c.getTime());v=new Mtt(f,s,this.textModel,this.versionId);if(i){d=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,t)&&!f.has(d)&&v.prepend(i.inlineCompletion,d.range,!0)}return[2,(this._updateOperation.clear(),YN((function(t){u.set(v,t)})),!0)]}}))}))}(),f=new Ett(s,h,c);return this._updateOperation.value=f,c};n.prototype.clear=function(t){this._updateOperation.clear(),this.inlineCompletions.set(void 0,t),this.suggestWidgetInlineCompletions.set(void 0,t)};n.prototype.clearSuggestWidgetInlineCompletions=function(t){var n;!((n=this._updateOperation.value)===null||n===void 0)&&n.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,t)};n.prototype.cancelUpdate=function(){this._updateOperation.clear()};return n}(ci);Att=Stt([Dtt(3,tp),Dtt(4,xv)],Att);var Ott=function(){function t(t,n,i){this.position=t,this.context=n,this.versionId=i}t.prototype.satisfies=function(t){return this.position.equals(t.position)&&function(t,n,i){return!t||!n?t===n:i(t,n)}(this.context.selectedSuggestionInfo,t.context.selectedSuggestionInfo,(function(t,n){return t.equals(n)}))&&(t.context.triggerKind===Gr.Automatic||this.context.triggerKind===Gr.Explicit)&&this.versionId===t.versionId};return t}();var Ett=function(){function t(t,n,i){this.request=t,this.cancellationTokenSource=n,this.promise=i}t.prototype.dispose=function(){this.cancellationTokenSource.cancel()};return t}();var Mtt=function(){function t(t,n,i,r){var e=this;this.inlineCompletionProviderResult=t,this.request=n,this.textModel=i,this.versionId=r,this._refCount=1,this._prependedInlineCompletionItems=[],this._rangeVersionIdValue=0,this._rangeVersionId=uP(this,(function(t){e.versionId.read(t);var n=!1;for(var i=0,r=e._inlineCompletions;i<r.length;i++){var o=r[i];n=n||o._updateRange(e.textModel)}return n&&e._rangeVersionIdValue++,e._rangeVersionIdValue}));var o=i.deltaDecorations([],t.completions.map((function(t){return{range:t.range,options:{description:"inline-completion-tracking-range"}}})));this._inlineCompletions=t.completions.map((function(t,n){return new Ftt(t,o[n],e._rangeVersionId)}))}Object.defineProperty(t.prototype,"inlineCompletions",{get:function(){return this._inlineCompletions},enumerable:false,configurable:true});t.prototype.clone=function(){return this._refCount++,this};t.prototype.dispose=function(){var t=this;if(this._refCount--,this._refCount===0){setTimeout((function(){t.textModel.isDisposed()||t.textModel.deltaDecorations(t._inlineCompletions.map((function(t){return t.decorationId})),[])}),0),this.inlineCompletionProviderResult.dispose();for(var n=0,i=this._prependedInlineCompletionItems;n<i.length;n++){var r=i[n];r.source.removeRef()}}};t.prototype.prepend=function(t,n,i){i&&t.source.addRef();var r=this.textModel.deltaDecorations([],[{range:n,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new Ftt(t,r,this._rangeVersionId,n)),this._prependedInlineCompletionItems.push(t)};return t}();var Ftt=function(){function t(t,n,i,r){this.inlineCompletion=t,this.decorationId=n,this.rangeVersion=i,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._isValid=!0,this._updatedRange=r!==null&&r!==void 0?r:t.range}Object.defineProperty(t.prototype,"forwardStable",{get:function(){var t;return(t=this.inlineCompletion.source.inlineCompletions.enableForwardStability)!==null&&t!==void 0&&t},enumerable:false,configurable:true});t.prototype.toInlineCompletion=function(t){return this.inlineCompletion.withRange(this._getUpdatedRange(t))};t.prototype.toSingleTextEdit=function(t){return new FJ(this._getUpdatedRange(t),this.inlineCompletion.insertText)};t.prototype.isVisible=function(t,n,i){var r=btt(this._toFilterTextReplacement(i),t);if(!this._isValid||!this.inlineCompletion.range.getStartPosition().equals(this._getUpdatedRange(i).getStartPosition())||n.lineNumber!==r.range.startLineNumber)return!1;var e=t.getValueInRange(r.range,1),o=r.text,s=Math.max(0,n.column-r.range.startColumn);var u=o.substring(0,s),a=o.substring(s),h=e.substring(0,s),c=e.substring(s);var f=t.getLineIndentColumn(r.range.startLineNumber);return r.range.startColumn<=f&&(h=h.trimStart(),h.length===0&&(c=c.trimStart()),u=u.trimStart(),u.length===0&&(a=a.trimStart())),u.startsWith(h)&&!!$R(c,a)};t.prototype.canBeReused=function(t,n){return this._isValid&&this._getUpdatedRange(void 0).containsPosition(n)&&this.isVisible(t,n,void 0)&&!this._isSmallerThanOriginal(void 0)};t.prototype._toFilterTextReplacement=function(t){return new FJ(this._getUpdatedRange(t),this.inlineCompletion.filterText)};t.prototype._isSmallerThanOriginal=function(t){return Ltt(this._getUpdatedRange(t)).isBefore(Ltt(this.inlineCompletion.range))};t.prototype._getUpdatedRange=function(t){return this.rangeVersion.read(t),this._updatedRange};t.prototype._updateRange=function(t){var n=t.getDecorationRange(this.decorationId);return n?!this._updatedRange.equalsRange(n)&&(this._updatedRange=n,!0):(this._isValid=!1,!0)};return t}();function Ltt(t){return t.startLineNumber===t.endLineNumber?new Tr(1,1+t.endColumn-t.startColumn):new Tr(1+t.endLineNumber-t.startLineNumber,t.endColumn)}var jtt={Visible:i9,HasFocusedSuggestion:new qc("suggestWidgetHasFocusedSuggestion",!1,ht(0,"Whether any suggestion is focused")),DetailsVisible:new qc("suggestWidgetDetailsVisible",!1,ht(0,"Whether suggestion details are visible")),MultipleSuggestions:new qc("suggestWidgetMultipleSuggestions",!1,ht(0,"Whether there are multiple suggestions to pick from")),MakesTextEdit:new qc("suggestionMakesTextEdit",!0,ht(0,"Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new qc("acceptSuggestionOnEnter",!0,ht(0,"Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new qc("suggestionHasInsertAndReplaceRange",!1,ht(0,"Whether the current suggestion has insert and replace behaviour")),InsertMode:new qc("suggestionInsertMode",void 0,{type:"string",description:ht(0,"Whether the default behaviour is to insert or replace")}),CanResolve:new qc("suggestionCanResolve",!1,ht(0,"Whether the current suggestion supports to resolve further details"))},Rtt=new vf("suggestWidgetStatusBar");var Ttt=function(){function t(t,n,i,r){var e;this.position=t,this.completion=n,this.container=i,this.provider=r,this.isInvalid=!1,this.score=MT.Default,this.distance=0,this.textLabel=typeof n.label=="string"?n.label:(e=n.label)===null||e===void 0?void 0:e.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=n.sortText&&n.sortText.toLowerCase(),this.filterTextLow=n.filterText&&n.filterText.toLowerCase(),this.extensionId=n.extensionId,Ir.isIRange(n.range)?(this.editStart=new Tr(n.range.startLineNumber,n.range.startColumn),this.editInsertEnd=new Tr(n.range.endLineNumber,n.range.endColumn),this.editReplaceEnd=new Tr(n.range.endLineNumber,n.range.endColumn),this.isInvalid=this.isInvalid||Ir.spansMultipleLines(n.range)||n.range.startLineNumber!==t.lineNumber):(this.editStart=new Tr(n.range.insert.startLineNumber,n.range.insert.startColumn),this.editInsertEnd=new Tr(n.range.insert.endLineNumber,n.range.insert.endColumn),this.editReplaceEnd=new Tr(n.range.replace.endLineNumber,n.range.replace.endColumn),this.isInvalid=this.isInvalid||Ir.spansMultipleLines(n.range.insert)||Ir.spansMultipleLines(n.range.replace)||n.range.insert.startLineNumber!==t.lineNumber||n.range.replace.startLineNumber!==t.lineNumber||n.range.insert.startColumn!==n.range.replace.startColumn),typeof r.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}Object.defineProperty(t.prototype,"isResolved",{get:function(){return this._resolveDuration!==void 0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"resolveDuration",{get:function(){return this._resolveDuration!==void 0?this._resolveDuration:-1},enumerable:false,configurable:true});t.prototype.resolve=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;var r=this;return __generator(this,(function(e){if(!this._resolveCache){n=t.onCancellationRequested((function(){r._resolveCache=void 0,r._resolveDuration=void 0})),i=new pi(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,t)).then((function(t){Object.assign(r.completion,t),r._resolveDuration=i.elapsed()}),(function(t){Qn(t)&&(r._resolveCache=void 0,r._resolveDuration=void 0)})).finally((function(){n.dispose()}))}return[2,this._resolveCache]}))}))};return t}();var Itt=function(){function t(t,n,i,r,e){if(t===void 0){t=2}if(n===void 0){n=new Set}if(i===void 0){i=new Set}if(r===void 0){r=new Map}if(e===void 0){e=!0}this.snippetSortOrder=t,this.kindFilter=n,this.providerFilter=i,this.providerItemsToReuse=r,this.showDeprecated=e}return t}();Itt.default=new Itt;var Btt=function(){function t(t,n,i,r){this.items=t,this.needsClipboard=n,this.durations=i,this.disposable=r}return t}();function Ntt(t,n,i){return __awaiter(this,arguments,void 0,(function(t,n,i,r,e,o){var s,u,a,h,c,f,l,v,d,g,p,w,m,b,y,_;var k=this;if(r===void 0){r=Itt.default}if(e===void 0){e={triggerKind:0}}if(o===void 0){o=Fi.None}return __generator(this,(function(x){switch(x.label){case 0:s=new pi;i=i.clone();u=n.getWordAtPosition(i),a=u?new Ir(i.lineNumber,u.startColumn,i.lineNumber,u.endColumn):Ir.fromPositions(i),h={replace:a,insert:a.setEndPosition(i.lineNumber,i.column)},c=[],f=new hi,l=[];v=!1;d=function(t,n,e){var o,s,u;var a=!1;if(!n)return a;for(var d=0,g=n.suggestions;d<g.length;d++){var p=g[d];if(!r.kindFilter.has(p.kind)){if(!r.showDeprecated&&(!((o=p==null?void 0:p.tags)===null||o===void 0)&&o.includes(1)))continue;p.range||(p.range=h),p.sortText||(p.sortText=typeof p.label=="string"?p.label:p.label.label),!v&&p.insertTextRules&&4&p.insertTextRules&&(v=T0.guessNeedsClipboard(p.insertText)),c.push(new Ttt(i,p,n,t)),a=!0}}return oi(n)&&f.add(n),l.push({providerName:(s=t._debugDisplayName)!==null&&s!==void 0?s:"unknown_provider",elapsedProvider:(u=n.duration)!==null&&u!==void 0?u:-1,elapsedOverall:e.elapsed()}),a},g=function(){return __awaiter(k,void 0,void 0,(function(){return __generator(this,(function(t){return[2]}))}))}();p=function(t){var s;return __generator(this,(function(u){switch(u.label){case 0:s=!1;return[4,Promise.all(t.map((function(t){return __awaiter(k,void 0,void 0,(function(){var u,u,a,h;return __generator(this,(function(f){switch(f.label){case 0:if(r.providerItemsToReuse.has(t)){u=r.providerItemsToReuse.get(t);return[2,(u.forEach((function(t){return c.push(t)})),void(s=s||u.length>0))]}if(!(!(r.providerFilter.size>0)||r.providerFilter.has(t)))return[3,4];f.label=1;case 1:f.trys.push([1,3,,4]);u=new pi;return[4,t.provideCompletionItems(n,i,e,o)];case 2:a=f.sent();s=d(t,a,u)||s;return[3,4];case 3:h=f.sent();$n(h);return[3,4];case 4:return[2]}}))}))})))];case 1:if(u.sent(),s||o.isCancellationRequested)return[2,"break"];return[2]}}))};w=0,m=t.orderedGroups(n);x.label=1;case 1:if(!(w<m.length))return[3,4];b=m[w];return[5,p(b)];case 2:y=x.sent();if(y==="break")return[3,4];x.label=3;case 3:w++;return[3,1];case 4:return[4,g];case 5:return[2,(x.sent(),o.isCancellationRequested?(f.dispose(),Promise.reject(new Yn)):new Btt(c.sort((_=r.snippetSortOrder,Wtt.get(_))),v,{entries:l,elapsed:s.elapsed()},f))]}}))}))}function Ptt(t,n){if(t.sortTextLow&&n.sortTextLow){if(t.sortTextLow<n.sortTextLow)return-1;if(t.sortTextLow>n.sortTextLow)return 1}return t.textLabel<n.textLabel?-1:t.textLabel>n.textLabel?1:t.completion.kind-n.completion.kind}var Wtt=new Map;Wtt.set(0,(function(t,n){if(t.completion.kind!==n.completion.kind){if(t.completion.kind===27)return-1;if(n.completion.kind===27)return 1}return Ptt(t,n)})),Wtt.set(2,(function(t,n){if(t.completion.kind!==n.completion.kind){if(t.completion.kind===27)return 1;if(n.completion.kind===27)return-1}return Ptt(t,n)})),Wtt.set(1,Ptt),hc.registerCommand("_executeCompletionItemProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(a,void 0,void 0,(function(){var i,r,e,o,s,u,a,h,c,f,l,v,d;return __generator(this,(function(g){switch(g.label){case 0:i=n[0],r=n[1],e=n[2],o=n[3];Z(Cr.isUri(i)),Z(Tr.isIPosition(r)),Z(typeof e=="string"||!e),Z(typeof o=="number"||!o);s=t.get(tp).completionProvider;return[4,t.get(Xh).createModelReference(i)];case 1:u=g.sent();g.label=2;case 2:g.trys.push([2,,8,9]);a={incomplete:!1,suggestions:[]},h=[],c=u.object.textEditorModel.validatePosition(r);return[4,Ntt(s,u.object.textEditorModel,c,void 0,{triggerCharacter:e!==null&&e!==void 0?e:void 0,triggerKind:e?1:0})];case 3:f=g.sent();for(l=0,v=f.items;l<v.length;l++){d=v[l];h.length<(o!==null&&o!==void 0?o:0)&&h.push(d.resolve(Fi.None)),a.incomplete=a.incomplete||d.container.incomplete,a.suggestions.push(d.completion)}g.label=4;case 4:g.trys.push([4,,6,7]);return[4,Promise.all(h)];case 5:return[2,(g.sent(),a)];case 6:setTimeout((function(){return f.disposable.dispose()}),100);return[7];case 7:return[3,9];case 8:u.dispose();return[7];case 9:return[2]}}))}))}));var Htt=function(){function t(){}t.isAllOff=function(t){return t.other==="off"&&t.comments==="off"&&t.strings==="off"};t.isAllOn=function(t){return t.other==="on"&&t.comments==="on"&&t.strings==="on"};t.valueFor=function(t,n){switch(n){case 1:return t.comments;case 2:return t.strings;default:return t.other}};return t}();function ztt(t,n){if(n===void 0){n=Mt}return function(t,n){if(n===void 0){n=Mt}return!!n&&jO(t.charCodeAt(0))&&t.charCodeAt(1)===58}(t,n)?t.charAt(0).toUpperCase()+t.slice(1):t}var Utt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Ktt=function(t,n){return function(i,r){n(i,r,t)}};var Vtt=function(){function t(t){this._delegates=t}t.prototype.resolve=function(t){for(var n=0,i=this._delegates;n<i.length;n++){var r=i[n];var e=r.resolve(t);if(e!==void 0)return e}};return t}();var qtt=function(){function t(t,n,i,r){this._model=t,this._selection=n,this._selectionIdx=i,this._overtypingCapturer=r}t.prototype.resolve=function(t){var n=t.name;if(n==="SELECTION"||n==="TM_SELECTED_TEXT"){var i=this._model.getValueInRange(this._selection)||void 0,r=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){var e=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);e&&(i=e.value,r=e.multiline)}if(i&&r&&t.snippet){var e=go(this._model.getLineContent(this._selection.startLineNumber),0,this._selection.startColumn-1);var o=e;t.snippet.walk((function(n){return n!==t&&(n instanceof D0&&(o=go(lo(n.value).pop())),!0)}));var s=Do(o,e);i=i.replace(/(\r\n|\r|\n)(.*)/g,(function(t,n,i){return"".concat(n).concat(o.substr(s)).concat(i)}))}return i}if(n==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(n==="TM_CURRENT_WORD"){var i=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return i&&i.word||void 0}return n==="TM_LINE_INDEX"?String(this._selection.positionLineNumber-1):n==="TM_LINE_NUMBER"?String(this._selection.positionLineNumber):n==="CURSOR_INDEX"?String(this._selectionIdx):n==="CURSOR_NUMBER"?String(this._selectionIdx+1):void 0};return t}();var Gtt=function(){function t(t,n){this._labelService=t,this._model=n}t.prototype.resolve=function(t){var n=t.name;if(n==="TM_FILENAME")return gr(this._model.uri.fsPath);if(n==="TM_FILENAME_BASE"){var i=gr(this._model.uri.fsPath),r=i.lastIndexOf(".");return r<=0?i:i.slice(0,r)}return n==="TM_DIRECTORY"?dr(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(WO(this._model.uri)):n==="TM_FILEPATH"?this._labelService.getUriLabel(this._model.uri):n==="RELATIVE_FILEPATH"?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0};return t}();var $tt=function(){function t(t,n,i,r){this._readClipboardText=t,this._selectionIdx=n,this._selectionCount=i,this._spread=r}t.prototype.resolve=function(t){if(t.name!=="CLIPBOARD")return;var n=this._readClipboardText();if(n){if(this._spread){var i=n.split(/\r\n|\n|\r/).filter((function(t){return!ro(t)}));if(i.length===this._selectionCount)return i[this._selectionIdx]}return n}};return t}();var Jtt=function(){function t(t,n,i){this._model=t,this._selection=n,this._languageConfigurationService=i}t.prototype.resolve=function(t){var n=t.name,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),r=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(r)return n==="LINE_COMMENT"?r.lineCommentToken||void 0:n==="BLOCK_COMMENT_START"?r.blockCommentStartToken||void 0:n==="BLOCK_COMMENT_END"&&r.blockCommentEndToken||void 0};return t}();Jtt=Utt([Ktt(2,xv)],Jtt);var Ztt=function(){function t(){this._date=new Date}t.prototype.resolve=function(n){var i=n.name;if(i==="CURRENT_YEAR")return String(this._date.getFullYear());if(i==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(i==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(i==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(i==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(i==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(i==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(i==="CURRENT_DAY_NAME")return t.dayNames[this._date.getDay()];if(i==="CURRENT_DAY_NAME_SHORT")return t.dayNamesShort[this._date.getDay()];if(i==="CURRENT_MONTH_NAME")return t.monthNames[this._date.getMonth()];if(i==="CURRENT_MONTH_NAME_SHORT")return t.monthNamesShort[this._date.getMonth()];if(i==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(i==="CURRENT_TIMEZONE_OFFSET"){var r=this._date.getTimezoneOffset(),e=r>0?"-":"+",o=Math.trunc(Math.abs(r/60)),s=o<10?"0"+o:o,u=Math.abs(r)-60*o;return e+s+":"+(u<10?"0"+u:u)}};return t}();Ztt.dayNames=[ht(0,"Sunday"),ht(0,"Monday"),ht(0,"Tuesday"),ht(0,"Wednesday"),ht(0,"Thursday"),ht(0,"Friday"),ht(0,"Saturday")],Ztt.dayNamesShort=[ht(0,"Sun"),ht(0,"Mon"),ht(0,"Tue"),ht(0,"Wed"),ht(0,"Thu"),ht(0,"Fri"),ht(0,"Sat")],Ztt.monthNames=[ht(0,"January"),ht(0,"February"),ht(0,"March"),ht(0,"April"),ht(0,"May"),ht(0,"June"),ht(0,"July"),ht(0,"August"),ht(0,"September"),ht(0,"October"),ht(0,"November"),ht(0,"December")],Ztt.monthNamesShort=[ht(0,"Jan"),ht(0,"Feb"),ht(0,"Mar"),ht(0,"Apr"),ht(0,"May"),ht(0,"Jun"),ht(0,"Jul"),ht(0,"Aug"),ht(0,"Sep"),ht(0,"Oct"),ht(0,"Nov"),ht(0,"Dec")];var Qtt=function(){function t(t){this._workspaceService=t}t.prototype.resolve=function(t){if(!this._workspaceService)return;var n=function(t,n){if(typeof t=="string"||t===void 0)return typeof t=="string"?{id:gr(t)}:GB;var i=t;return i.configuration?{id:i.id,configPath:i.configuration}:i.folders.length===1?{id:i.id,uri:i.folders[0].uri}:{id:i.id}}(this._workspaceService.getWorkspace());return qB(n)?void 0:t.name==="WORKSPACE_NAME"?this._resolveWorkspaceName(n):t.name==="WORKSPACE_FOLDER"?this._resoveWorkspacePath(n):void 0};t.prototype._resolveWorkspaceName=function(t){if(VB(t))return gr(t.uri.path);var n=gr(t.configPath.path);return n.endsWith(JB)&&(n=n.substr(0,n.length-14-1)),n};t.prototype._resoveWorkspacePath=function(t){if(VB(t))return ztt(t.uri.fsPath);var n=gr(t.configPath.path);var i=t.configPath.fsPath;return i.endsWith(n)&&(i=i.substr(0,i.length-n.length-1)),i?ztt(i):"/"};return t}();var Ytt=function(){function t(){}t.prototype.resolve=function(t){var n=t.name;return n==="RANDOM"?Math.random().toString().slice(-6):n==="RANDOM_HEX"?Math.random().toString(16).slice(-6):n==="UUID"?XX():void 0};return t}();var Xtt,tnt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},nnt=function(t,n){return function(i,r){n(i,r,t)}};var int=function(){function t(t,n,i){this._editor=t,this._snippet=n,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=p(n.placeholders,O0.compareByIndex),this._placeholderGroupsIdx=-1}t.prototype.initialize=function(t){this._offset=t.newPosition};t.prototype.dispose=function(){this._placeholderDecorations&&this._editor.removeDecorations(__spreadArray([],this._placeholderDecorations.values(),true)),this._placeholderGroups.length=0};t.prototype._initDecorations=function(){var n=this;if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;var i=this._editor.getModel();this._editor.changeDecorations((function(r){for(var e=0,o=n._snippet.placeholders;e<o.length;e++){var s=o[e];var u=n._snippet.offset(s),a=n._snippet.fullLen(s),h=Ir.fromPositions(i.getPositionAt(n._offset+u),i.getPositionAt(n._offset+u+a)),c=s.isFinalTabstop?t._decor.inactiveFinal:t._decor.inactive,f=r.addDecoration(h,c);n._placeholderDecorations.set(s,f)}}))};t.prototype.move=function(n){var i=this;if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){var r=[];for(var e=0,o=this._placeholderGroups[this._placeholderGroupsIdx];e<o.length;e++){var s=o[e];if(s.transform){var u=this._placeholderDecorations.get(s),a=this._editor.getModel().getDecorationRange(u),h=this._editor.getModel().getValueInRange(a),c=s.transform.resolve(h).split(/\r\n|\r|\n/);for(var f=1;f<c.length;f++)c[f]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[f]);r.push(hB.replace(a,c.join(this._editor.getModel().getEOL())))}}r.length>0&&this._editor.executeEdits("snippet.placeholderTransform",r)}var l=!1;n===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,l=!0):n===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,l=!0);var v=this._editor.getModel().changeDecorations((function(n){var r=new Set,e=[];for(var o=0,s=i._placeholderGroups[i._placeholderGroupsIdx];o<s.length;o++){var u=s[o];var a=i._placeholderDecorations.get(u),h=i._editor.getModel().getDecorationRange(a);e.push(new Br(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn)),l=l&&i._hasPlaceholderBeenCollapsed(u),n.changeDecorationOptions(a,u.isFinalTabstop?t._decor.activeFinal:t._decor.active),r.add(u);for(var c=0,f=i._snippet.enclosingPlaceholders(u);c<f.length;c++){var v=f[c];var d=i._placeholderDecorations.get(v);n.changeDecorationOptions(d,v.isFinalTabstop?t._decor.activeFinal:t._decor.active),r.add(v)}}for(var g=0,p=i._placeholderDecorations;g<p.length;g++){var w=p[g],u=w[0],a=w[1];r.has(u)||n.changeDecorationOptions(a,u.isFinalTabstop?t._decor.inactiveFinal:t._decor.inactive)}return e}));return l?this.move(n):v!==null&&v!==void 0?v:[]};t.prototype._hasPlaceholderBeenCollapsed=function(t){var n=t;for(;n;){if(n instanceof O0){var i=this._placeholderDecorations.get(n);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&n.toString().length>0)return!0}n=n.parent}return!1};Object.defineProperty(t.prototype,"isAtFirstPlaceholder",{get:function(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isAtLastPlaceholder",{get:function(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"hasPlaceholder",{get:function(){return this._snippet.placeholders.length>0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isTrivialSnippet",{get:function(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){var t=this._snippet.placeholders[0];if(t.isFinalTabstop&&this._snippet.rightMostDescendant===t)return!0}return!1},enumerable:false,configurable:true});t.prototype.computePossibleSelections=function(){var t=new Map;for(var n=0,i=this._placeholderGroups;n<i.length;n++){var r=i[n];var e=void 0;for(var o=0,s=r;o<s.length;o++){var u=s[o];if(u.isFinalTabstop)break;e||(e=[],t.set(u.index,e));var a=this._placeholderDecorations.get(u),h=this._editor.getModel().getDecorationRange(a);if(!h){t.delete(u.index);break}e.push(h)}}return t};Object.defineProperty(t.prototype,"activeChoice",{get:function(){if(!this._placeholderDecorations)return;var t=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(t!=null&&t.choice))return;var n=this._placeholderDecorations.get(t);if(!n)return;var i=this._editor.getModel().getDecorationRange(n);return i?{range:i,choice:t.choice}:void 0},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"hasChoice",{get:function(){var t=!1;return this._snippet.walk((function(n){return t=n instanceof E0,!t})),t},enumerable:false,configurable:true});t.prototype.merge=function(n){var i=this;var r=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((function(e){for(var o=0,s=i._placeholderGroups[i._placeholderGroupsIdx];o<s.length;o++){var u=s[o];var a=n.shift();console.assert(a._offset!==-1),console.assert(!a._placeholderDecorations);var h=a._snippet.placeholderInfo.last.index;for(var c=0,f=a._snippet.placeholderInfo.all;c<f.length;c++){var l=f[c];l.isFinalTabstop?l.index=u.index+(h+1)/i._nestingLevel:l.index=u.index+l.index/i._nestingLevel}i._snippet.replace(u,a._snippet.children);var v=i._placeholderDecorations.get(u);e.removeDecoration(v),i._placeholderDecorations.delete(u);for(var d=0,g=a._snippet.placeholders;d<g.length;d++){var l=g[d];var w=a._snippet.offset(l),m=a._snippet.fullLen(l),b=Ir.fromPositions(r.getPositionAt(a._offset+w),r.getPositionAt(a._offset+w+m)),y=e.addDecoration(b,t._decor.inactive);i._placeholderDecorations.set(l,y)}}i._placeholderGroups=p(i._snippet.placeholders,O0.compareByIndex)}))};return t}();int._decor={active:PM.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:PM.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:PM.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:PM.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};var rnt={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};var ent=Xtt=function(){function t(t,n,i,r){if(i===void 0){i=rnt}this._editor=t,this._template=n,this._options=i,this._languageConfigurationService=r,this._templateMerges=[],this._snippets=[]}t.adjustWhitespace=function(t,n,i,r,e){var o=go(t.getLineContent(n.lineNumber),0,n.column-1);var s;return r.walk((function(n){if(!(n instanceof D0)||n.parent instanceof E0||e&&!e.has(n))return!0;var u=n.value.split(/\r\n|\r|\n/);if(i){var a=r.offset(n);if(a===0)u[0]=t.normalizeIndentation(u[0]);else{s=s!==null&&s!==void 0?s:r.toString();var h=s.charCodeAt(a-1);h!==10&&h!==13||(u[0]=t.normalizeIndentation(o+u[0]))}for(var h=1;h<u.length;h++)u[h]=t.normalizeIndentation(o+u[h])}var c=u.join(t.getEOL());return c!==n.value&&(n.parent.replace(n,[new D0(c)]),s=void 0),!0})),o};t.adjustSelection=function(t,n,i,r){if(i!==0||r!==0){var e=n.positionLineNumber,o=n.positionColumn,s=o-i,u=o+r,a=t.validateRange({startLineNumber:e,startColumn:s,endLineNumber:e,endColumn:u});n=Br.createWithDirection(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn,n.getDirection())}return n};t.createEditsAndSnippetsFromSelections=function(t,n,i,r,e,o,s,u,a){var h=[],c=[];if(!t.hasModel())return{edits:h,snippets:c};var f=t.getModel(),l=t.invokeWithinContext((function(t){return t.get(KB)})),v=t.invokeWithinContext((function(t){return new Gtt(t.get(RB),f)})),d=function(){return s},g=f.getValueInRange(Xtt.adjustSelection(f,t.getSelection(),i,0)),p=f.getValueInRange(Xtt.adjustSelection(f,t.getSelection(),0,r)),w=f.getLineFirstNonWhitespaceColumn(t.getSelection().positionLineNumber),m=t.getSelections().map((function(t,n){return{selection:t,idx:n}})).sort((function(t,n){return Ir.compareRangesUsingStarts(t.selection,n.selection)}));for(var b=0,y=m;b<y.length;b++){var _=y[b],k=_.selection,x=_.idx;var C=Xtt.adjustSelection(f,k,i,0),S=Xtt.adjustSelection(f,k,0,r);g!==f.getValueInRange(C)&&(C=k),p!==f.getValueInRange(S)&&(S=k);var D=k.setStartPosition(C.startLineNumber,C.startColumn).setEndPosition(S.endLineNumber,S.endColumn),A=(new T0).parse(n,!0,e),O=D.getStartPosition(),E=Xtt.adjustWhitespace(f,O,o||x>0&&w!==f.getLineFirstNonWhitespaceColumn(k.positionLineNumber),A);A.resolveVariables(new Vtt([v,new $tt(d,x,m.length,t.getOption(79)==="spread"),new qtt(f,k,x,u),new Jtt(f,k,a),new Ztt,new Qtt(l),new Ytt])),h[x]=hB.replace(D,A.toString()),h[x].identifier={major:x,minor:0},h[x]._isTracked=!0,c[x]=new int(t,A,E)}return{edits:h,snippets:c}};t.createEditsAndSnippetsFromEdits=function(t,n,i,r,e,o,s){if(!t.hasModel()||n.length===0)return{edits:[],snippets:[]};var u=[],a=t.getModel(),h=new T0,c=new R0,f=new Vtt([t.invokeWithinContext((function(t){return new Gtt(t.get(RB),a)})),new $tt((function(){return e}),0,t.getSelections().length,t.getOption(79)==="spread"),new qtt(a,t.getSelection(),0,o),new Jtt(a,t.getSelection(),s),new Ztt,new Qtt(t.invokeWithinContext((function(t){return t.get(KB)}))),new Ytt]);n=n.sort((function(t,n){return Ir.compareRangesUsingStarts(t.range,n.range)}));var l=0;for(var v=0;v<n.length;v++){var d=n[v],g=d.range,p=d.template;if(v>0){var w=n[v-1].range,m=Ir.fromPositions(w.getEndPosition(),g.getStartPosition()),b=new D0(a.getValueInRange(m));c.appendChild(b),l+=b.value.length}var y=h.parseFragment(p,c);Xtt.adjustWhitespace(a,g.getStartPosition(),!0,c,new Set(y)),c.resolveVariables(f);var _=c.toString(),k=_.slice(l);l=_.length;var x=hB.replace(g,k);x.identifier={major:v,minor:0},x._isTracked=!0,u.push(x)}return h.ensureFinalTabstop(c,i,!0),{edits:u,snippets:[new int(t,c,"")]}};t.prototype.dispose=function(){si(this._snippets)};t.prototype._logInfo=function(){return'template="'.concat(this._template,'", merged_templates="').concat(this._templateMerges.join(" -> "),'"')};t.prototype.insert=function(){var t=this;if(!this._editor.hasModel())return;var n=typeof this._template=="string"?Xtt.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):Xtt.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService),i=n.edits,r=n.snippets;this._snippets=r,this._editor.executeEdits("snippet",i,(function(n){var i=n.filter((function(t){return!!t.identifier}));for(var e=0;e<r.length;e++)r[e].initialize(i[e].textChange);return t._snippets[0].hasPlaceholder?t._move(!0):i.map((function(t){return Br.fromPositions(t.range.getEndPosition())}))})),this._editor.revealRange(this._editor.getSelections()[0])};t.prototype.merge=function(t,n){var i=this;if(n===void 0){n=rnt}if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,t]);var r=Xtt.createEditsAndSnippetsFromSelections(this._editor,t,n.overwriteBefore,n.overwriteAfter,!0,n.adjustWhitespace,n.clipboardText,n.overtypingCapturer,this._languageConfigurationService),e=r.edits,o=r.snippets;this._editor.executeEdits("snippet",e,(function(t){var n=t.filter((function(t){return!!t.identifier}));for(var r=0;r<o.length;r++)o[r].initialize(n[r].textChange);var e=o[0].isTrivialSnippet;if(!e){for(var s=0,u=i._snippets;s<u.length;s++){var r=u[s];r.merge(o)}console.assert(o.length===0)}return i._snippets[0].hasPlaceholder&&!e?i._move(void 0):n.map((function(t){return Br.fromPositions(t.range.getEndPosition())}))}))};t.prototype.next=function(){var t=this._move(!0);this._editor.setSelections(t),this._editor.revealPositionInCenterIfOutsideViewport(t[0].getPosition())};t.prototype.prev=function(){var t=this._move(!1);this._editor.setSelections(t),this._editor.revealPositionInCenterIfOutsideViewport(t[0].getPosition())};t.prototype._move=function(t){var n=[];for(var i=0,r=this._snippets;i<r.length;i++){var e=r[i];var o=e.move(t);n.push.apply(n,o)}return n};Object.defineProperty(t.prototype,"isAtFirstPlaceholder",{get:function(){return this._snippets[0].isAtFirstPlaceholder},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"isAtLastPlaceholder",{get:function(){return this._snippets[0].isAtLastPlaceholder},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"hasPlaceholder",{get:function(){return this._snippets[0].hasPlaceholder},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"hasChoice",{get:function(){return this._snippets[0].hasChoice},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"activeChoice",{get:function(){return this._snippets[0].activeChoice},enumerable:false,configurable:true});t.prototype.isSelectionWithinPlaceholders=function(){if(!this.hasPlaceholder)return!1;var t=this._editor.getSelections();if(t.length<this._snippets.length)return!1;var n=new Map;var i=function(i){var r=i.computePossibleSelections();if(n.size===0)for(var e=0,o=r;e<o.length;e++){var s=o[e],u=s[0],a=s[1];a.sort(Ir.compareRangesUsingStarts);for(var h=0,c=t;h<c.length;h++){var f=c[h];if(a[0].containsRange(f)){n.set(u,[]);break}}}if(n.size===0)return{value:!1};n.forEach((function(t,n){t.push.apply(t,r.get(n))}))};for(var r=0,e=this._snippets;r<e.length;r++){var o=e[r];var s=i(o);if(typeof s==="object")return s.value}t.sort(Ir.compareRangesUsingStarts);for(var u=0,a=n;u<a.length;u++){var h=a[u],o=h[0],c=h[1];if(c.length===t.length){c.sort(Ir.compareRangesUsingStarts);for(var f=0;f<c.length;f++)c[f].containsRange(t[f])||n.delete(o)}else n.delete(o)}return n.size>0};return t}();ent=Xtt=tnt([nnt(3,xv)],ent);var ont,snt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},unt=function(t,n){return function(i,r){n(i,r,t)}};var ant={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};var hnt=ont=function(){function t(t,n,i,r,e){this._editor=t,this._logService=n,this._languageFeaturesService=i,this._languageConfigurationService=e,this._snippetListener=new hi,this._modelVersionId=-1,this._inSnippet=ont.InSnippetMode.bindTo(r),this._hasNextTabstop=ont.HasNextTabstop.bindTo(r),this._hasPrevTabstop=ont.HasPrevTabstop.bindTo(r)}t.get=function(t){return t.getContribution(ont.ID)};t.prototype.dispose=function(){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(t=this._session)===null||t===void 0||t.dispose(),this._snippetListener.dispose()};t.prototype.insert=function(t,n){try{this._doInsert(t,n===void 0?ant:__assign(__assign({},ant),n))}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",t),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}};t.prototype._doInsert=function(t,n){var i=this;var r;if(this._editor.hasModel()){if(this._snippetListener.clear(),n.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof t!="string"&&this.cancel(),this._session?(Z(typeof t=="string"),this._session.merge(t,n)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new ent(this._editor,t,n,this._languageConfigurationService),this._session.insert()),n.undoStopAfter&&this._editor.getModel().pushStackElement(),(r=this._session)===null||r===void 0?void 0:r.hasChoice){var e={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:function(t,n){if(!i._session||t!==i._editor.getModel()||!Tr.equals(i._editor.getPosition(),n))return;var r=i._session.activeChoice;if(!r||r.choice.options.length===0)return;var e=t.getValueInRange(r.range),o=!!r.choice.options.find((function(t){return t.value===e})),s=[];for(var u=0;u<r.choice.options.length;u++){var a=r.choice.options[u];s.push({kind:13,label:a.value,insertText:a.value,sortText:"a".repeat(u+1),range:r.range,filterText:o?"".concat(e,"_").concat(a.value):void 0,command:{id:"jumpToNextSnippetPlaceholder",title:ht(0,"Go to next placeholder...")}})}return{suggestions:s}}},o=this._editor.getModel();var s,u=!1;var a=function(){s==null||s.dispose(),u=!1},h=function(){u||(s=i._languageFeaturesService.completionProvider.register({language:o.getLanguageId(),pattern:o.uri.fsPath,scheme:o.uri.scheme,exclusive:!0},e),i._snippetListener.add(s),u=!0)};this._choiceCompletions={provider:e,enable:h,disable:a}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((function(t){return t.isFlush&&i.cancel()}))),this._snippetListener.add(this._editor.onDidChangeModel((function(){return i.cancel()}))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((function(){return i._updateState()})))}};t.prototype._updateState=function(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}};t.prototype._handleChoice=function(){var t=this;var n;if(!this._session||!this._editor.hasModel())return void(this._currentChoice=void 0);var i=this._session.activeChoice;if(!i||!this._choiceCompletions)return(n=this._choiceCompletions)===null||n===void 0||n.disable(),void(this._currentChoice=void 0);this._currentChoice!==i.choice&&(this._currentChoice=i.choice,this._choiceCompletions.enable(),queueMicrotask((function(){(function(t,n){var i;(i=t.getContribution("editor.contrib.suggestController"))===null||i===void 0||i.triggerSuggest((new Set).add(n),void 0,!0)})(t._editor,t._choiceCompletions.provider)})))};t.prototype.finish=function(){for(;this._inSnippet.get();)this.next()};t.prototype.cancel=function(t){if(t===void 0){t=!1}var n;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(n=this._session)===null||n===void 0||n.dispose(),this._session=void 0,this._modelVersionId=-1,t&&this._editor.setSelections([this._editor.getSelection()])};t.prototype.prev=function(){var t;(t=this._session)===null||t===void 0||t.prev(),this._updateState()};t.prototype.next=function(){var t;(t=this._session)===null||t===void 0||t.next(),this._updateState()};t.prototype.isInSnippet=function(){return!!this._inSnippet.get()};return t}();hnt.ID="snippetController2",hnt.InSnippetMode=new qc("inSnippetMode",!1,ht(0,"Whether the editor in current in snippet mode")),hnt.HasNextTabstop=new qc("hasNextTabstop",!1,ht(0,"Whether there is a next tab stop when in snippet mode")),hnt.HasPrevTabstop=new qc("hasPrevTabstop",!1,ht(0,"Whether there is a previous tab stop when in snippet mode")),hnt=ont=snt([unt(1,kf),unt(2,tp),unt(3,Gc),unt(4,xv)],hnt),Pf(hnt.ID,hnt,4);var cnt=Ff.bindToContribution(hnt.get);If(new cnt({id:"jumpToNextSnippetPlaceholder",precondition:Dc.and(hnt.InSnippetMode,hnt.HasNextTabstop),handler:function(t){return t.next()},kbOpts:{weight:130,kbExpr:$C.editorTextFocus,primary:2}})),If(new cnt({id:"jumpToPrevSnippetPlaceholder",precondition:Dc.and(hnt.InSnippetMode,hnt.HasPrevTabstop),handler:function(t){return t.prev()},kbOpts:{weight:130,kbExpr:$C.editorTextFocus,primary:1026}})),If(new cnt({id:"leaveSnippet",precondition:hnt.InSnippetMode,handler:function(t){return t.cancel(!0)},kbOpts:{weight:130,kbExpr:$C.editorTextFocus,primary:9,secondary:[1033]}})),If(new cnt({id:"acceptSnippet",precondition:hnt.InSnippetMode,handler:function(t){return t.finish()}}));var fnt,lnt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},vnt=function(t,n){return function(i,r){n(i,r,t)}};(function(t){t[t.Undo=0]="Undo",t[t.Redo=1]="Redo",t[t.AcceptWord=2]="AcceptWord",t[t.Other=3]="Other"})(fnt||(fnt={}));var dnt=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h,c,f,l){var v=this;var d;v=t.call(this)||this,v.textModel=n,v.selectedSuggestItem=i,v.textModelVersionId=r,v._positions=e,v._debounceValue=o,v._suggestPreviewEnabled=s,v._suggestPreviewMode=u,v._inlineSuggestMode=a,v._enabled=h,v._instantiationService=c,v._commandService=f,v._languageConfigurationService=l,v._source=v._register(v._instantiationService.createInstance(Att,v.textModel,v.textModelVersionId,v._debounceValue)),v._isActive=iP(v,!1),v._forceUpdateSignal=xP("forceUpdate"),v._selectedInlineCompletionId=iP(v,void 0),v._primaryPosition=uP(v,(function(t){var n;return(n=v._positions.read(t)[0])!==null&&n!==void 0?n:new Tr(1,1)})),v._isAcceptingPartially=!1,v._preserveCurrentCompletionReasons=new Set([fnt.Redo,fnt.Undo,fnt.AcceptWord]),v._fetchInlineCompletions=function(t,n){var i;return new fP(new HN(t.owner,t.debugName,void 0),n,t.createEmptyChangeSummary,t.handleChange,void 0,(i=t.equalityComparer)!==null&&i!==void 0?i:sP)}({owner:v,createEmptyChangeSummary:function(){return{preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Gr.Automatic}},handleChange:function(t,n){return t.didChange(v.textModelVersionId)&&v._preserveCurrentCompletionReasons.has(t.change)?n.preserveCurrentCompletion=!0:t.didChange(v._forceUpdateSignal)&&(n.inlineCompletionTriggerKind=t.change),!0}},(function(t,n){if(v._forceUpdateSignal.read(t),!(v._enabled.read(t)&&v.selectedSuggestItem.read(t)||v._isActive.read(t)))return void v._source.cancelUpdate();v.textModelVersionId.read(t);var i=v.selectedInlineCompletion.get(),r=n.preserveCurrentCompletion||i!=null&&i.forwardStable?i:void 0,e=v._source.suggestWidgetInlineCompletions.get(),o=v.selectedSuggestItem.read(t);if(e&&!o){var s=v._source.inlineCompletions.get();YN((function(t){(!s||e.request.versionId>s.request.versionId)&&v._source.inlineCompletions.set(e.clone(),t),v._source.clearSuggestWidgetInlineCompletions(t)}))}var u=v._primaryPosition.read(t),a={triggerKind:n.inlineCompletionTriggerKind,selectedSuggestionInfo:o==null?void 0:o.toSelectedSuggestionInfo()};return v._source.fetch(u,a,r)})),v._filteredInlineCompletionItems=uP(v,(function(t){var n=v._source.inlineCompletions.read(t);if(!n)return[];var i=v._primaryPosition.read(t);return n.inlineCompletions.filter((function(n){return n.isVisible(v.textModel,i,t)}))})),v.selectedInlineCompletionIndex=uP(v,(function(t){var n=v._selectedInlineCompletionId.read(t),i=v._filteredInlineCompletionItems.read(t),r=v._selectedInlineCompletionId===void 0?-1:i.findIndex((function(t){return t.semanticId===n}));return r===-1?(v._selectedInlineCompletionId.set(void 0,void 0),0):r})),v.selectedInlineCompletion=uP(v,(function(t){return v._filteredInlineCompletionItems.read(t)[v.selectedInlineCompletionIndex.read(t)]})),v.lastTriggerKind=v._source.inlineCompletions.map(v,(function(t){return t==null?void 0:t.request.context.triggerKind})),v.inlineCompletionsCount=uP(v,(function(t){return v.lastTriggerKind.read(t)===Gr.Explicit?v._filteredInlineCompletionItems.read(t).length:void 0})),v.state=aP({owner:v,equalityComparer:function(t,n){return t&&n?ntt(t.ghostTexts,n.ghostTexts)&&t.inlineCompletion===n.inlineCompletion&&t.suggestItem===n.suggestItem:t===n}},(function(t){var n,i;var r=v.textModel,e=v.selectedSuggestItem.read(t);if(e){var o=btt(e.toSingleTextEdit(),r),s=v._computeAugmentation(o,t);if(!v._suggestPreviewEnabled.read(t)&&!s)return;var u=(n=s==null?void 0:s.edit)!==null&&n!==void 0?n:o,a=s?s.edit.text.length-o.text.length:0,h=v._suggestPreviewMode.read(t),c=v._positions.read(t),f=__spreadArray([u],gnt(v.textModel,c,u),true),l=f.map((function(t,n){return _tt(t,r,h,c[n],a)})).filter($);return{edits:f,primaryGhostText:(i=l[0])!==null&&i!==void 0?i:new Y8(u.range.endLineNumber,[]),ghostTexts:l,inlineCompletion:s==null?void 0:s.completion,suggestItem:e}}{if(!v._isActive.read(t))return;var o=v.selectedInlineCompletion.read(t);if(!o)return;var s=o.toSingleTextEdit(t),d=v._inlineSuggestMode.read(t),g=v._positions.read(t),p=__spreadArray([s],gnt(v.textModel,g,s),true),w=p.map((function(t,n){return _tt(t,r,d,g[n],0)})).filter($);return w[0]?{edits:p,primaryGhostText:w[0],ghostTexts:w,inlineCompletion:o,suggestItem:void 0}:void 0}})),v.ghostTexts=aP({owner:v,equalityComparer:ntt},(function(t){var n=v.state.read(t);if(n)return n.ghostTexts})),v.primaryGhostText=aP({owner:v,equalityComparer:itt},(function(t){var n=v.state.read(t);if(n)return n==null?void 0:n.primaryGhostText})),v._register(SP(v._fetchInlineCompletions)),v._register(lP((function(t){var n,i;var r=v.state.read(t),e=r==null?void 0:r.inlineCompletion;if((e==null?void 0:e.semanticId)!==(d==null?void 0:d.semanticId)&&(d=e,e)){var o=e.inlineCompletion,s=o.source;(i=(n=s.provider).handleItemDidShow)===null||i===void 0||i.call(n,s.inlineCompletions,o.sourceInlineCompletion,o.insertText)}})));return v}Object.defineProperty(n.prototype,"isAcceptingPartially",{get:function(){return this._isAcceptingPartially},enumerable:false,configurable:true});n.prototype.trigger=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:this._isActive.set(!0,t);return[4,this._fetchInlineCompletions.get()];case 1:n.sent();return[2]}}))}))};n.prototype.triggerExplicitly=function(t){return __awaiter(this,void 0,void 0,(function(){var n=this;return __generator(this,(function(i){switch(i.label){case 0:tP(t,(function(t){n._isActive.set(!0,t),n._forceUpdateSignal.trigger(t,Gr.Explicit)}));return[4,this._fetchInlineCompletions.get()];case 1:i.sent();return[2]}}))}))};n.prototype.stop=function(t){var n=this;tP(t,(function(t){n._isActive.set(!1,t),n._source.clear(t)}))};n.prototype._computeAugmentation=function(t,n){var i=this.textModel,r=this._source.suggestWidgetInlineCompletions.read(n);return function(t,n){for(var i=0,r=t;i<r.length;i++){var e=r[i];var o=n(e);if(o!==void 0)return o}}(r?r.inlineCompletions:[this.selectedInlineCompletion.read(n)].filter($),(function(r){var e=r.toSingleTextEdit(n);return e=btt(e,i,Ir.fromPositions(e.range.getStartPosition(),t.range.getEndPosition())),ytt(e,t)?{completion:r,edit:e}:void 0}))};n.prototype._deltaSelectedInlineCompletionIndex=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(r){switch(r.label){case 0:return[4,this.triggerExplicitly()];case 1:r.sent();n=this._filteredInlineCompletionItems.get()||[];if(n.length>0){i=(this.selectedInlineCompletionIndex.get()+t+n.length)%n.length;this._selectedInlineCompletionId.set(n[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0);return[2]}}))}))};n.prototype.next=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this._deltaSelectedInlineCompletionIndex(1)];case 1:t.sent();return[2]}}))}))};n.prototype.previous=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this._deltaSelectedInlineCompletionIndex(-1)];case 1:t.sent();return[2]}}))}))};n.prototype.accept=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o,s;var u;var a=this;return __generator(this,(function(h){switch(h.label){case 0:if(t.getModel()!==this.textModel)throw new ri;i=this.state.get();if(!i||i.primaryGhostText.isEmpty()||!i.inlineCompletion)return[2];r=i.inlineCompletion.toInlineCompletion(void 0);if(t.pushUndoStop(),r.snippetInfo)t.executeEdits("inlineSuggestion.accept",__spreadArray([hB.replaceMove(r.range,"")],r.additionalTextEdits,true)),t.setPosition(r.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),(n=hnt.get(t))===null||n===void 0||n.insert(r.snippetInfo.snippet,{undoStopBefore:!1});else{e=i.edits,o=pnt(e).map((function(t){return Br.fromPositions(t)}));t.executeEdits("inlineSuggestion.accept",__spreadArray(__spreadArray([],e.map((function(t){return hB.replaceMove(t.range,t.text)})),true),r.additionalTextEdits,true)),t.setSelections(o,"inlineCompletionAccept")}r.command&&r.source.addRef(),YN((function(t){a._source.clear(t),a._isActive.set(!1,t)}));s=r.command;if(!s)return[3,2];return[4,(u=this._commandService).executeCommand.apply(u,__spreadArray([r.command.id],r.command.arguments||[],false)).then(void 0,$n)];case 1:s=(h.sent(),r.source.removeRef());h.label=2;case 2:s;return[2]}}))}))};n.prototype.acceptNextWord=function(t){return __awaiter(this,void 0,void 0,(function(){var n=this;return __generator(this,(function(i){switch(i.label){case 0:return[4,this._acceptNext(t,(function(t,i){var r=n.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),e=n._languageConfigurationService.getLanguageConfiguration(r),o=new RegExp(e.wordDefinition.source,e.wordDefinition.flags.replace("g","")),s=i.match(o);var u=0;u=s&&s.index!==void 0?s.index===0?s[0].length:s.index:i.length;var a=/\s+/g.exec(i);return a&&a.index!==void 0&&a.index+a[0].length<u&&(u=a.index+a[0].length),u}),0)];case 1:i.sent();return[2]}}))}))};n.prototype.acceptNextLine=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,this._acceptNext(t,(function(t,n){var i=n.match(/\n/);return i&&i.index!==void 0?i.index+1:n.length}),1)];case 1:n.sent();return[2]}}))}))};n.prototype._acceptNext=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u,a,h,c,f,l,v,d,g,p,w,v,d;return __generator(this,(function(m){switch(m.label){case 0:if(t.getModel()!==this.textModel)throw new ri;r=this.state.get();if(!r||r.primaryGhostText.isEmpty()||!r.inlineCompletion)return[2];e=r.primaryGhostText,o=r.inlineCompletion.toInlineCompletion(void 0);if(!(o.snippetInfo||o.filterText!==o.insertText))return[3,2];return[4,this.accept(t)];case 1:return[2,void m.sent()];case 2:s=e.parts[0],u=new Tr(e.lineNumber,s.column),a=s.text,h=n(u,a);if(h===a.length&&e.parts.length===1)return[2,void this.accept(t)];c=a.substring(0,h),f=this._positions.get(),l=f[0];o.source.addRef();try{this._isAcceptingPartially=!0;try{t.pushUndoStop();v=Ir.fromPositions(l,u),d=t.getModel().getValueInRange(v)+c,g=new FJ(v,d),p=__spreadArray([g],gnt(this.textModel,f,g),true),w=pnt(p).map((function(t){return Br.fromPositions(t)}));t.executeEdits("inlineSuggestion.accept",p.map((function(t){return hB.replaceMove(t.range,t.text)}))),t.setSelections(w,"inlineCompletionPartialAccept")}finally{this._isAcceptingPartially=!1}if(o.source.provider.handlePartialAccept){v=Ir.fromPositions(o.range.getStartPosition(),wA.ofText(c).addToPosition(u)),d=t.getModel().getValueInRange(v,1);o.source.provider.handlePartialAccept(o.source.inlineCompletions,o.sourceInlineCompletion,d.length,{kind:i})}}finally{o.source.removeRef()}return[2]}}))}))};n.prototype.handleSuggestAccepted=function(t){var n,i;var r=btt(t.toSingleTextEdit(),this.textModel),e=this._computeAugmentation(r,void 0);if(!e)return;var o=e.completion.inlineCompletion;(i=(n=o.source.provider).handlePartialAccept)===null||i===void 0||i.call(n,o.source.inlineCompletions,o.sourceInlineCompletion,r.text.length,{kind:2})};return n}(ci);function gnt(t,n,i){if(n.length===1)return[];var r=n[0],e=n.slice(1),o=i.range.getStartPosition(),s=i.range.getEndPosition(),u=t.getValueInRange(Ir.fromPositions(r,s)),a=stt(r,o);if(a.lineNumber<1)return Gn(new ri("positionWithinTextEdit line number should be bigger than 0.\n\t\t\tInvalid subtraction between ".concat(r.toString()," and ").concat(o.toString()))),[];var h=function(t,n){var i="";var r=function(t){var n;var i=[],r=t.split(/(\r\n|\r|\n)/);for(var e=0;e<Math.ceil(r.length/2);e++)i.push(r[2*e]+((n=r[2*e+1])!==null&&n!==void 0?n:""));return i}(t);for(var e=n.lineNumber-1;e<r.length;e++)i+=r[e].substring(e===n.lineNumber-1?n.column-1:0);return i}(i.text,a);return e.map((function(n){var i=(r=stt(n,o),e=s,new Tr(r.lineNumber+e.lineNumber-1,e.lineNumber===1?r.column+e.column-1:e.column));var r,e;var a=t.getValueInRange(Ir.fromPositions(n,i)),c=Do(u,a),f=Ir.fromPositions(n,n.delta(0,c));return new FJ(f,h)}))}function pnt(t){var n=W.createSortPermutation(t,(function(t,n){return Ir.compareRangesUsingStarts(t.range,n.range)})),i=new MJ(n.apply(t)).getNewRanges();return n.inverse().apply(i).map((function(t){return t.getEndPosition()}))}dnt=lnt([vnt(9,Jh),vnt(10,ac),vnt(11,xv)],dnt);var wnt,mnt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},bnt=function(t,n){return function(i,r){n(i,r,t)}};var ynt=function(){function t(t){this.name=t}t.prototype.select=function(t,n,i){if(i.length===0)return 0;var r=i[0].score[0];for(var e=0;e<i.length;e++){var o=i[e],s=o.score,u=o.completion;if(s[0]!==r)break;if(u.preselect)return e}return 0};return t}();var _nt=function(t){__extends(n,t);function n(){return t.call(this,"first")||this}n.prototype.memorize=function(t,n,i){};n.prototype.toJSON=function(){};n.prototype.fromJSON=function(){};return n}(ynt);var knt=wnt=function(){function t(t,n){var i=this;this._storageService=t,this._configService=n,this._disposables=new hi,this._persistSoon=new Ts((function(){return i._saveState()}),500),this._disposables.add(t.onWillSaveState((function(t){t.reason===kW.SHUTDOWN&&i._saveState()})))}t.prototype.dispose=function(){this._disposables.dispose(),this._persistSoon.dispose()};t.prototype.memorize=function(t,n,i){this._withStrategy(t,n).memorize(t,n,i),this._persistSoon.schedule()};t.prototype.select=function(t,n,i){return this._withStrategy(t,n).select(t,n,i)};t.prototype._withStrategy=function(t,n){var i;var r=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:t.getLanguageIdAtPosition(n.lineNumber,n.column),resource:t.uri});if(((i=this._strategy)===null||i===void 0?void 0:i.name)!==r){this._saveState();var e=wnt._strategyCtors.get(r)||_nt;this._strategy=new e;try{var o=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,s=this._storageService.get("".concat(wnt._storagePrefix,"/").concat(r),o);s&&this._strategy.fromJSON(JSON.parse(s))}catch(t){}}return this._strategy};t.prototype._saveState=function(){if(this._strategy){var t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store("".concat(wnt._storagePrefix,"/").concat(this._strategy.name),n,t,1)}};return t}();knt._strategyCtors=new Map([["recentlyUsedByPrefix",function(t){__extends(n,t);function n(){var n=this;n=t.call(this,"recentlyUsedByPrefix")||this,n._trie=UB.forStrings(),n._seq=0;return n}n.prototype.memorize=function(t,n,i){var r=t.getWordUntilPosition(n).word,e="".concat(t.getLanguageId(),"/").concat(r);this._trie.set(e,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})};n.prototype.select=function(n,i,r){var e=n.getWordUntilPosition(i).word;if(!e)return t.prototype.select.call(this,n,i,r);var o="".concat(n.getLanguageId(),"/").concat(e);var s=this._trie.get(o);if(s||(s=this._trie.findSubstr(o)),s)for(var u=0;u<r.length;u++){var a=r[u].completion,h=a.kind,c=a.insertText;if(h===s.type&&c===s.insertText)return u}return t.prototype.select.call(this,n,i,r)};n.prototype.toJSON=function(){var t=[];return this._trie.forEach((function(n,i){return t.push([i,n])})),t.sort((function(t,n){return-(t[1].touch-n[1].touch)})).forEach((function(t,n){return t[1].touch=n})),t.slice(0,200)};n.prototype.fromJSON=function(t){if(this._trie.clear(),t.length>0){this._seq=t[0][1].touch+1;for(var n=0,i=t;n<i.length;n++){var r=i[n],e=r[0],o=r[1];o.type=typeof o.type=="number"?o.type:qr.fromString(o.type),this._trie.set(e,o)}}};return n}(ynt)],["recentlyUsed",function(t){__extends(n,t);function n(){var n=this;n=t.call(this,"recentlyUsed")||this,n._cache=new ud(300,.66),n._seq=0;return n}n.prototype.memorize=function(t,n,i){var r="".concat(t.getLanguageId(),"/").concat(i.textLabel);this._cache.set(r,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})};n.prototype.select=function(n,i,r){if(r.length===0)return 0;var e=n.getLineContent(i.lineNumber).substr(i.column-10,i.column-1);if(/\s$/.test(e))return t.prototype.select.call(this,n,i,r);var o=r[0].score[0];var s=-1,u=-1,a=-1;for(var h=0;h<r.length&&r[h].score[0]===o;h++){var c="".concat(n.getLanguageId(),"/").concat(r[h].textLabel),f=this._cache.peek(c);if(f&&f.touch>a&&f.type===r[h].completion.kind&&f.insertText===r[h].completion.insertText&&(a=f.touch,u=h),r[h].completion.preselect&&s===-1)return h}return u!==-1?u:s!==-1?s:0};n.prototype.toJSON=function(){return this._cache.toJSON()};n.prototype.fromJSON=function(t){this._cache.clear();for(var n=0,i=t;n<i.length;n++){var r=i[n],e=r[0],o=r[1];o.touch=0,o.type=typeof o.type=="number"?o.type:qr.fromString(o.type),this._cache.set(e,o)}this._seq=this._cache.size};return n}(ynt)],["first",_nt]]),knt._storagePrefix="suggest/memories",knt=wnt=mnt([bnt(0,_W),bnt(1,Kl)],knt);var xnt=Zh("ISuggestMemories");Xl(xnt,knt,1);var Cnt,Snt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Dnt=function(t,n){return function(i,r){n(i,r,t)}};var Ant=Cnt=function(){function t(n,i){var r=this;this._editor=n,this._enabled=!1,this._ckAtEnd=t.AtEnd.bindTo(i),this._configListener=this._editor.onDidChangeConfiguration((function(t){return t.hasChanged(123)&&r._update()})),this._update()}t.prototype.dispose=function(){var t;this._configListener.dispose(),(t=this._selectionListener)===null||t===void 0||t.dispose(),this._ckAtEnd.reset()};t.prototype._update=function(){var t=this;var n=this._editor.getOption(123)==="on";if(this._enabled!==n)if(this._enabled=n,this._enabled){var i=function(){if(!t._editor.hasModel())return void t._ckAtEnd.set(!1);var n=t._editor.getModel(),i=t._editor.getSelection(),r=n.getWordAtPosition(i.getStartPosition());r?t._ckAtEnd.set(r.endColumn===i.getStartPosition().column):t._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(i),i()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)};return t}();Ant.AtEnd=new qc("atEndOfWord",!1),Ant=Cnt=Snt([Dnt(1,Gc)],Ant);var Ont,Ent=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Mnt=function(t,n){return function(i,r){n(i,r,t)}};var Fnt=Ont=function(){function t(n,i){this._editor=n,this._index=0,this._ckOtherSuggestions=t.OtherSuggestions.bindTo(i)}t.prototype.dispose=function(){this.reset()};t.prototype.reset=function(){var t;this._ckOtherSuggestions.reset(),(t=this._listener)===null||t===void 0||t.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1};t.prototype.set=function(n,i){var r=this;var e=n.model,o=n.index;if(e.items.length===0)return void this.reset();t._moveIndex(!0,e,o)!==o?(this._acceptNext=i,this._model=e,this._index=o,this._listener=this._editor.onDidChangeCursorPosition((function(){r._ignore||r.reset()})),this._ckOtherSuggestions.set(!0)):this.reset()};t._moveIndex=function(t,n,i){var r=i;for(var e=n.items.length;e>0&&(r=(r+n.items.length+(t?1:-1))%n.items.length,r!==i)&&n.items[r].completion.additionalTextEdits;e--);return r};t.prototype.next=function(){this._move(!0)};t.prototype.prev=function(){this._move(!1)};t.prototype._move=function(n){if(this._model)try{this._ignore=!0,this._index=t._moveIndex(n,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}};return t}();Fnt.OtherSuggestions=new qc("hasOtherSuggestions",!1),Fnt=Ont=Ent([Mnt(1,Gc)],Fnt);var Lnt=function(){function t(t,n,i,r){var e=this;this._disposables=new hi,this._disposables.add(i.onDidSuggest((function(t){t.completionModel.items.length===0&&e.reset()}))),this._disposables.add(i.onDidCancel((function(t){e.reset()}))),this._disposables.add(n.onDidShow((function(){return e._onItem(n.getFocusedItem())}))),this._disposables.add(n.onDidFocus(this._onItem,this)),this._disposables.add(n.onDidHide(this.reset,this)),this._disposables.add(t.onWillType((function(o){if(e._active&&!n.isFrozen()&&i.state!==0){var s=o.charCodeAt(o.length-1);e._active.acceptCharacters.has(s)&&t.getOption(0)&&r(e._active.item)}})))}t.prototype._onItem=function(t){if(!t||!k(t.item.completion.commitCharacters))return void this.reset();if(this._active&&this._active.item.item===t.item)return;var n=new Jv;for(var i=0,r=t.item.completion.commitCharacters;i<r.length;i++){var e=r[i];e.length>0&&n.add(e.charCodeAt(0))}this._active={acceptCharacters:n,item:t}};t.prototype.reset=function(){this._active=void 0};t.prototype.dispose=function(){this._disposables.dispose()};return t}();var jnt=function(){function t(){}t.prototype.provideSelectionRanges=function(n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:r=[];e=function(i){var e,o;return __generator(this,(function(s){switch(s.label){case 0:e=[];r.push(e);o=new Map;return[4,new Promise((function(r){return t._bracketsRightYield(r,0,n,i,o)}))];case 1:s.sent();return[4,new Promise((function(r){return t._bracketsLeftYield(r,0,n,i,o,e)}))];case 2:s.sent();return[2]}}))};o=0,s=i;a.label=1;case 1:if(!(o<s.length))return[3,4];u=s[o];return[5,e(u)];case 2:a.sent();a.label=3;case 3:o++;return[3,1];case 4:return[2,r]}}))}))};t._bracketsRightYield=function(n,i,r,e,o){var s=new Map,u=Date.now();for(;;){if(i>=t._maxRounds){n();break}if(!e){n();break}var a=r.bracketPairs.findNextBracket(e);if(!a){n();break}if(Date.now()-u>t._maxDuration){setTimeout((function(){return t._bracketsRightYield(n,i+1,r,e,o)}));break}if(a.bracketInfo.isOpeningBracket){var h=a.bracketInfo.bracketText,c=s.has(h)?s.get(h):0;s.set(h,c+1)}else{var h=a.bracketInfo.getOpeningBrackets()[0].bracketText;var c=s.has(h)?s.get(h):0;if(c-=1,s.set(h,Math.max(0,c)),c<0){var f=o.get(h);f||(f=new tn,o.set(h,f)),f.push(a.range)}}e=a.range.getEndPosition()}};t._bracketsLeftYield=function(n,i,r,e,o,s){var u=new Map,a=Date.now();for(;;){if(i>=t._maxRounds&&o.size===0){n();break}if(!e){n();break}var h=r.bracketPairs.findPrevBracket(e);if(!h){n();break}if(Date.now()-a>t._maxDuration){setTimeout((function(){return t._bracketsLeftYield(n,i+1,r,e,o,s)}));break}if(h.bracketInfo.isOpeningBracket){var c=h.bracketInfo.bracketText;var f=u.has(c)?u.get(c):0;if(f-=1,u.set(c,Math.max(0,f)),f<0){var l=o.get(c);if(l){var v=l.shift();l.size===0&&o.delete(c);var d=Ir.fromPositions(h.range.getEndPosition(),v.getStartPosition()),g=Ir.fromPositions(h.range.getStartPosition(),v.getEndPosition());s.push({range:d}),s.push({range:g}),t._addBracketLeading(r,g,s)}}}else{var c=h.bracketInfo.getOpeningBrackets()[0].bracketText,f=u.has(c)?u.get(c):0;u.set(c,f+1)}e=h.range.getStartPosition()}};t._addBracketLeading=function(t,n,i){if(n.startLineNumber===n.endLineNumber)return;var r=n.startLineNumber,e=t.getLineFirstNonWhitespaceColumn(r);e!==0&&e!==n.startColumn&&(i.push({range:Ir.fromPositions(new Tr(r,e),n.getEndPosition())}),i.push({range:Ir.fromPositions(new Tr(r,1),n.getEndPosition())}));var o=r-1;if(o>0){var s=t.getLineFirstNonWhitespaceColumn(o);s===n.startColumn&&s!==t.getLineLastNonWhitespaceColumn(o)&&(i.push({range:Ir.fromPositions(new Tr(o,s),n.getEndPosition())}),i.push({range:Ir.fromPositions(new Tr(o,1),n.getEndPosition())}))}};return t}();jnt._maxDuration=30,jnt._maxRounds=2;var Rnt=function(){function t(){}t.create=function(n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:if(!i.getOption(118).localityBonus||!i.hasModel())return[2,t.None];r=i.getModel(),e=i.getPosition();if(!n.canComputeWordRanges(r.uri))return[2,t.None];return[4,(new jnt).provideSelectionRanges(r,[e])];case 1:o=a.sent()[0];if(o.length===0)return[2,t.None];return[4,n.computeWordRanges(r.uri,o[0].range)];case 2:s=a.sent();if(!s)return[2,t.None];u=r.getWordUntilPosition(e);return[2,(delete s[u.word],new(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.distance=function(t,n){if(!e.equals(i.getPosition()))return 0;if(n.kind===17)return 2<<20;var r=typeof n.label=="string"?n.label:n.label.label,u=s[r];if(_(u))return 2<<20;var a=d(u,Ir.fromPositions(t),Ir.compareRangesUsingStarts),h=a>=0?u[a]:u[Math.max(0,~a-1)];var c=o.length;for(var f=0,l=o;f<l.length;f++){var v=l[f];if(!Ir.containsRange(v.range,h))break;c-=1}return c};return n}(t)))]}}))}))};return t}();Rnt.None=new(function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.distance=function(){return 0};return n}(Rnt));var Tnt=function(){function t(t,n){this.leadingLineContent=t,this.characterCountDelta=n}return t}();var Int=function(){function t(n,i,r,e,o,s,u,a){if(u===void 0){u=FT.default}if(a===void 0){a=void 0}this.clipboardText=a,this._snippetCompareFn=t._compareCompletionItems,this._items=n,this._column=i,this._wordDistance=e,this._options=o,this._refilterKind=1,this._lineContext=r,this._fuzzyScoreOptions=u,s==="top"?this._snippetCompareFn=t._compareCompletionItemsSnippetsUp:s==="bottom"&&(this._snippetCompareFn=t._compareCompletionItemsSnippetsDown)}Object.defineProperty(t.prototype,"lineContext",{get:function(){return this._lineContext},set:function(t){this._lineContext.leadingLineContent===t.leadingLineContent&&this._lineContext.characterCountDelta===t.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<t.characterCountDelta&&this._filteredItems?2:1,this._lineContext=t)},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"items",{get:function(){return this._ensureCachedState(),this._filteredItems},enumerable:false,configurable:true});t.prototype.getItemsByProvider=function(){return this._ensureCachedState(),this._itemsByProvider};t.prototype.getIncompleteProvider=function(){this._ensureCachedState();var t=new Set;for(var n=0,i=this.getItemsByProvider();n<i.length;n++){var r=i[n],e=r[0],o=r[1];o.length>0&&o[0].container.incomplete&&t.add(e)}return t};Object.defineProperty(t.prototype,"stats",{get:function(){return this._ensureCachedState(),this._stats},enumerable:false,configurable:true});t.prototype._ensureCachedState=function(){this._refilterKind!==0&&this._createCachedState()};t.prototype._createCachedState=function(){this._itemsByProvider=new Map;var t=[],n=this._lineContext,i=n.leadingLineContent,r=n.characterCountDelta;var e="",o="";var s=this._refilterKind===1?this._items:this._filteredItems,u=[],a=!this._options.filterGraceful||s.length>2e3?LT:RT;for(var h=0;h<s.length;h++){var c=s[h];if(c.isInvalid)continue;var f=this._itemsByProvider.get(c.provider);f?f.push(c):this._itemsByProvider.set(c.provider,[c]);var l=c.position.column-c.editStart.column,v=l+r-(c.position.column-this._column);if(e.length!==v&&(e=v===0?"":i.slice(-v),o=e.toLowerCase()),c.word=e,v===0)c.score=MT.Default;else{var d=0;for(;d<l;){var p=e.charCodeAt(d);if(p!==32&&p!==9)break;d+=1}if(d>=v)c.score=MT.Default;else if(typeof c.completion.filterText=="string"){var p=a(e,o,d,c.completion.filterText,c.filterTextLow,0,this._fuzzyScoreOptions);if(!p)continue;bo(c.completion.filterText,c.textLabel)===0?c.score=p:(c.score=wT(e,o,d,c.textLabel,c.labelLow,0),c.score[0]=p[0])}else{var p=a(e,o,d,c.textLabel,c.labelLow,0,this._fuzzyScoreOptions);if(!p)continue;c.score=p}}c.idx=h,c.distance=this._wordDistance.distance(c.position,c.completion),u.push(c),t.push(c.textLabel.length)}this._filteredItems=u.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:t.length?g(t.length-.85,t,(function(t,n){return t-n})):0}};t._compareCompletionItems=function(t,n){return t.score[0]>n.score[0]?-1:t.score[0]<n.score[0]?1:t.distance<n.distance?-1:t.distance>n.distance?1:t.idx<n.idx?-1:t.idx>n.idx?1:0};t._compareCompletionItemsSnippetsDown=function(n,i){if(n.completion.kind!==i.completion.kind){if(n.completion.kind===27)return 1;if(i.completion.kind===27)return-1}return t._compareCompletionItems(n,i)};t._compareCompletionItemsSnippetsUp=function(n,i){if(n.completion.kind!==i.completion.kind){if(n.completion.kind===27)return-1;if(i.completion.kind===27)return 1}return t._compareCompletionItems(n,i)};return t}();var Bnt,Nnt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Pnt=function(t,n){return function(i,r){n(i,r,t)}};var Wnt=function(){function t(t,n,i){this.leadingLineContent=t.getLineContent(n.lineNumber).substr(0,n.column-1),this.leadingWord=t.getWordUntilPosition(n),this.lineNumber=n.lineNumber,this.column=n.column,this.triggerOptions=i}t.shouldAutoTrigger=function(t){if(!t.hasModel())return!1;var n=t.getModel(),i=t.getPosition();n.tokenization.tokenizeIfCheap(i.lineNumber);var r=n.getWordAtPosition(i);return!!r&&(r.endColumn===i.column||r.startColumn+1===i.column)&&!!isNaN(Number(r.word))};return t}();var Hnt=Bnt=function(){function t(t,n,i,r,e,o,s,u,a){var h=this;this._editor=t,this._editorWorkerService=n,this._clipboardService=i,this._telemetryService=r,this._logService=e,this._contextKeyService=o,this._configurationService=s,this._languageFeaturesService=u,this._envService=a,this._toDispose=new hi,this._triggerCharacterListener=new hi,this._triggerQuickSuggest=new js,this._triggerState=void 0,this._completionDisposables=new hi,this._onDidCancel=new ki,this._onDidTrigger=new ki,this._onDidSuggest=new ki,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new Br(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((function(){h._updateTriggerCharacters(),h.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((function(){h._updateTriggerCharacters(),h.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((function(){h._updateTriggerCharacters()}))),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange((function(){h._updateTriggerCharacters(),h._updateActiveSuggestSession()})));var c=!1;this._toDispose.add(this._editor.onDidCompositionStart((function(){c=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((function(){c=!1,h._onCompositionEnd()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((function(t){c||h._onCursorChange(t)}))),this._toDispose.add(this._editor.onDidChangeModelContent((function(){c||h._triggerState===void 0||h._refilterCompletionItems()}))),this._updateTriggerCharacters()}t.prototype.dispose=function(){si(this._triggerCharacterListener),si([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()};t.prototype._updateTriggerCharacters=function(){var t=this;if(this._triggerCharacterListener.clear(),this._editor.getOption(91)||!this._editor.hasModel()||!this._editor.getOption(121))return;var n=new Map;for(var i=0,r=this._languageFeaturesService.completionProvider.all(this._editor.getModel());i<r.length;i++){var e=r[i];for(var o=0,s=e.triggerCharacters||[];o<s.length;o++){var u=s[o];var a=n.get(u);a||(a=new Set,a.add(void 0),n.set(u,a)),a.add(e)}}var h=function(i){var r;if(!function(t,n,i){if(!n.getContextKeyValue("inlineSuggestionVisible"))return!0;var r=n.getContextKeyValue(Q8.suppressSuggestions.key);return r!==void 0?!r:!t.getOption(62).suppressSuggestions}(t._editor,t._contextKeyService)||Wnt.shouldAutoTrigger(t._editor))return;if(!i){var e=t._editor.getPosition();i=t._editor.getModel().getLineContent(e.lineNumber).substr(0,e.column-1)}var o="";Eo(i.charCodeAt(i.length-1))?Oo(i.charCodeAt(i.length-2))&&(o=i.substr(i.length-2)):o=i.charAt(i.length-1);var s=n.get(o);if(s){var e=new Map;if(t._completionModel)for(var u=0,a=t._completionModel.getItemsByProvider();u<a.length;u++){var h=a[u],c=h[0],f=h[1];s.has(c)||e.set(c,f)}t.trigger({auto:!0,triggerKind:1,triggerCharacter:o,retrigger:!!t._completionModel,clipboardText:(r=t._completionModel)===null||r===void 0?void 0:r.clipboardText,completionOptions:{providerFilter:s,providerItemsToReuse:e}})}};this._triggerCharacterListener.add(this._editor.onDidType(h)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd((function(){return h()})))};Object.defineProperty(t.prototype,"state",{get:function(){return this._triggerState?this._triggerState.auto?2:1:0},enumerable:false,configurable:true});t.prototype.cancel=function(t){if(t===void 0){t=!1}var n;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(n=this._requestToken)===null||n===void 0||n.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:t}))};t.prototype.clear=function(){this._completionDisposables.clear()};t.prototype._updateActiveSuggestSession=function(){this._triggerState!==void 0&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:this._triggerState.auto,retrigger:!0}):this.cancel())};t.prototype._onCursorChange=function(t){if(!this._editor.hasModel())return;var n=this._currentSelection;this._currentSelection=this._editor.getSelection(),!t.selection.isEmpty()||t.reason!==0&&t.reason!==3||t.source!=="keyboard"&&t.source!=="deleteLeft"?this.cancel():this._triggerState===void 0&&t.reason===0?(n.containsRange(this._currentSelection)||n.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&t.reason===3&&this._refilterCompletionItems()};t.prototype._onCompositionEnd=function(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()};t.prototype._doTriggerQuickSuggest=function(){var t=this;var n;Htt.isAllOff(this._editor.getOption(89))||this._editor.getOption(118).snippetsPreventQuickSuggestions&&(!((n=hnt.get(this._editor))===null||n===void 0)&&n.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet((function(){if(t._triggerState!==void 0||!Wnt.shouldAutoTrigger(t._editor)||!t._editor.hasModel()||!t._editor.hasWidgetFocus())return;var n=t._editor.getModel(),i=t._editor.getPosition(),r=t._editor.getOption(89);if(!Htt.isAllOff(r)){if(!Htt.isAllOn(r)){n.tokenization.tokenizeIfCheap(i.lineNumber);var e=n.tokenization.getLineTokens(i.lineNumber),o=e.getStandardTokenType(e.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if(Htt.valueFor(r,o)!=="on")return}(function(t,n,i){if(!n.getContextKeyValue(Q8.inlineSuggestionVisible.key))return!0;var r=n.getContextKeyValue(Q8.suppressSuggestions.key);return r!==void 0?!r:!t.getOption(62).suppressSuggestions})(t._editor,t._contextKeyService)&&t._languageFeaturesService.completionProvider.has(n)&&t.trigger({auto:!0})}}),this._editor.getOption(90)))};t.prototype._refilterCompletionItems=function(){Z(this._editor.hasModel()),Z(this._triggerState!==void 0);var t=this._editor.getModel(),n=this._editor.getPosition(),i=new Wnt(t,n,__assign(__assign({},this._triggerState),{refilter:!0}));this._onNewContext(i)};t.prototype.trigger=function(t){var n=this;var i,r,e,o,s,u;if(!this._editor.hasModel())return;var a=this._editor.getModel(),h=new Wnt(a,this._editor.getPosition(),t);this.cancel(t.retrigger),this._triggerState=t,this._onDidTrigger.fire({auto:t.auto,shy:(i=t.shy)!==null&&i!==void 0&&i,position:this._editor.getPosition()}),this._context=h;var c={triggerKind:(r=t.triggerKind)!==null&&r!==void 0?r:0};t.triggerCharacter&&(c={triggerKind:1,triggerCharacter:t.triggerCharacter}),this._requestToken=new ji;var f=1;switch(this._editor.getOption(112)){case"top":f=0;break;case"bottom":f=2}var l=Bnt.createSuggestFilter(this._editor),v=l.itemKind,d=l.showDeprecated,g=new Itt(f,(o=(e=t.completionOptions)===null||e===void 0?void 0:e.kindFilter)!==null&&o!==void 0?o:v,(s=t.completionOptions)===null||s===void 0?void 0:s.providerFilter,(u=t.completionOptions)===null||u===void 0?void 0:u.providerItemsToReuse,d),p=Rnt.create(this._editorWorkerService,this._editor),w=Ntt(this._languageFeaturesService.completionProvider,a,this._editor.getPosition(),g,c,this._requestToken.token);Promise.all([w,p]).then((function(i){return __awaiter(n,[i],void 0,(function(n){var i,r,e,o,s,u,a,h,c;var f=n[0],l=n[1];return __generator(this,(function(n){switch(n.label){case 0:if((i=this._requestToken)===null||i===void 0||i.dispose(),!this._editor.hasModel())return[2];r=t==null?void 0:t.clipboardText;e=!r&&f.needsClipboard;if(!e)return[3,2];return[4,this._clipboardService.readText()];case 1:e=r=n.sent();n.label=2;case 2:if(e,this._triggerState===void 0)return[2];o=this._editor.getModel(),s=new Wnt(o,this._editor.getPosition(),t),u=__assign(__assign({},FT.default),{firstMatchCanBeWeak:!this._editor.getOption(118).matchOnWordStartOnly});if(this._completionModel=new Int(f.items,this._context.column,{leadingLineContent:s.leadingLineContent,characterCountDelta:s.column-this._context.column},l,this._editor.getOption(118),this._editor.getOption(112),u,r),this._completionDisposables.add(f.disposable),this._onNewContext(s),this._reportDurationsTelemetry(f.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(a=0,h=f.items;a<h.length;a++){c=h[a];c.isInvalid&&this._logService.warn("[suggest] did IGNORE invalid completion item from ".concat(c.provider._debugDisplayName),c.completion)}return[2]}}))}))})).catch(Gn)};t.prototype._reportDurationsTelemetry=function(t){var n=this;this._telemetryGate++%230==0&&setTimeout((function(){n._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(t)}),n._logService.debug("suggest.durations.json",t)}))};t.createSuggestFilter=function(t){var n=new Set;t.getOption(112)==="none"&&n.add(27);var i=t.getOption(118);return i.showMethods||n.add(0),i.showFunctions||n.add(1),i.showConstructors||n.add(2),i.showFields||n.add(3),i.showVariables||n.add(4),i.showClasses||n.add(5),i.showStructs||n.add(6),i.showInterfaces||n.add(7),i.showModules||n.add(8),i.showProperties||n.add(9),i.showEvents||n.add(10),i.showOperators||n.add(11),i.showUnits||n.add(12),i.showValues||n.add(13),i.showConstants||n.add(14),i.showEnums||n.add(15),i.showEnumMembers||n.add(16),i.showKeywords||n.add(17),i.showWords||n.add(18),i.showColors||n.add(19),i.showFiles||n.add(20),i.showReferences||n.add(21),i.showColors||n.add(22),i.showFolders||n.add(23),i.showTypeParameters||n.add(24),i.showSnippets||n.add(27),i.showUsers||n.add(25),i.showIssues||n.add(26),{itemKind:n,showDeprecated:i.showDeprecated}};t.prototype._onNewContext=function(t){if(this._context)if(t.lineNumber===this._context.lineNumber)if(go(t.leadingLineContent)===go(this._context.leadingLineContent)){if(t.column<this._context.column)t.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();else if(this._completionModel)if(t.leadingWord.word.length!==0&&t.leadingWord.startColumn>this._context.leadingWord.startColumn){if(Wnt.shouldAutoTrigger(this._editor)&&this._context){var n=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:n}})}}else if(t.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&t.leadingWord.word.length!==0){var n=new Map,i=new Set;for(var r=0,e=this._completionModel.getItemsByProvider();r<e.length;r++){var o=e[r],s=o[0],u=o[1];u.length>0&&u[0].container.incomplete?i.add(s):n.set(s,u)}this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:i,providerItemsToReuse:n}})}else{var n=this._completionModel.lineContext;var i=!1;if(this._completionModel.lineContext={leadingLineContent:t.leadingLineContent,characterCountDelta:t.column-this._context.column},this._completionModel.items.length===0){var s=Wnt.shouldAutoTrigger(this._editor);if(!this._context)return void this.cancel();if(s&&this._context.leadingWord.endColumn<t.leadingWord.startColumn)return void this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});if(this._context.triggerOptions.auto)return void this.cancel();if(this._completionModel.lineContext=n,i=this._completionModel.items.length>0,i&&t.leadingWord.word.length===0)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:t.triggerOptions,isFrozen:i})}}else this.cancel();else this.cancel()};return t}();Hnt=Bnt=Nnt([Pnt(1,vH),Pnt(2,Kq),Pnt(3,_f),Pnt(4,kf),Pnt(5,Gc),Pnt(6,Kl),Pnt(7,tp),Pnt(8,_j)],Hnt);var znt=function(){function t(n,i){var r=this;this._disposables=new hi,this._lastOvertyped=[],this._locked=!1,this._disposables.add(n.onWillType((function(){if(r._locked||!n.hasModel())return;var i=n.getSelections(),e=i.length;var o=!1;for(var s=0;s<e;s++)if(!i[s].isEmpty()){o=!0;break}if(!o)return void(r._lastOvertyped.length!==0&&(r._lastOvertyped.length=0));r._lastOvertyped=[];var u=n.getModel();for(var s=0;s<e;s++){var a=i[s];if(u.getValueLengthInRange(a)>t._maxSelectionLength)return;r._lastOvertyped[s]={value:u.getValueInRange(a),multiline:a.startLineNumber!==a.endLineNumber}}}))),this._disposables.add(i.onDidTrigger((function(t){r._locked=!0}))),this._disposables.add(i.onDidCancel((function(t){r._locked=!1})))}t.prototype.getLastOvertypedInfo=function(t){if(t>=0&&t<this._lastOvertyped.length)return this._lastOvertyped[t]};t.prototype.dispose=function(){this._disposables.dispose()};return t}();znt._maxSelectionLength=51200;var Unt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Knt=function(t,n){return function(i,r){n(i,r,t)}};var Vnt=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.updateLabel=function(){var i=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!i)return t.prototype.updateLabel.call(this);this.label&&(this.label.textContent=ht(0,"{0} ({1})",this._action.label,n.symbolPrintEnter(i)))};n.symbolPrintEnter=function(t){var n;return(n=t.getLabel())===null||n===void 0?void 0:n.replace(/\benter\b/gi,"⏎")};return n}(HW),qnt=function(){function t(t,n,i,r,e){this._menuId=n,this._menuService=r,this._contextKeyService=e,this._menuDisposables=new hi,this.element=vh(t,bh(".suggest-status-bar"));var o=function(t){return t instanceof mf?i.createInstance(Vnt,t,void 0):void 0};this._leftActions=new qW(this.element,{actionViewItemProvider:o}),this._rightActions=new qW(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}t.prototype.dispose=function(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()};t.prototype.show=function(){var t=this;var n=this._menuService.createMenu(this._menuId,this._contextKeyService),i=function(){var i=[],r=[];for(var e=0,o=n.getActions();e<o.length;e++){var s=o[e],u=s[0],a=s[1];u==="left"?i.push.apply(i,a):r.push.apply(r,a)}t._leftActions.clear(),t._leftActions.push(i),t._rightActions.clear(),t._rightActions.push(r)};this._menuDisposables.add(n.onDidChange((function(){return i()}))),this._menuDisposables.add(n)};t.prototype.hide=function(){this._menuDisposables.clear()};return t}();qnt=Unt([Knt(2,Jh),Knt(3,df),Knt(4,Gc)],qnt);var Gnt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},$nt=function(t,n){return function(i,r){n(i,r,t)}};function Jnt(t){return!!t&&!!(t.completion.documentation||t.completion.detail&&t.completion.detail!==t.completion.label)}var Znt=function(){function t(t,n){var i=this;this._editor=t,this._onDidClose=new ki,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new ki,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new hi,this._renderDisposeable=new hi,this._borderWidth=1,this._size=new Fa(330,0),this.domNode=bh(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=n.createInstance(OI,{editor:t}),this._body=bh(".body"),this._scrollbar=new yk(this._body,{alwaysConsumeMouseWheel:!0}),vh(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=vh(this._body,bh(".header")),this._close=vh(this._header,bh("span"+uc.asCSSSelector(Hr.close))),this._close.title=ht(0,"Close"),this._type=vh(this._header,bh("p.type")),this._docs=vh(this._body,bh("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((function(t){t.hasChanged(50)&&i._configureFont()})))}t.prototype.dispose=function(){this._disposables.dispose(),this._renderDisposeable.dispose()};t.prototype._configureFont=function(){var t=this._editor.getOptions(),n=t.get(50),i=n.getMassagedFontFamily(),r=t.get(119)||n.fontSize,e=t.get(120)||n.lineHeight,o=n.fontWeight,s="".concat(r,"px"),u="".concat(e,"px");this.domNode.style.fontSize=s,this.domNode.style.lineHeight=""+e/r,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=n.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=u,this._close.style.width=u};t.prototype.getLayoutInfo=function(){var t=this._editor.getOption(120)||this._editor.getOption(50).lineHeight,n=this._borderWidth;return{lineHeight:t,borderWidth:n,borderHeight:2*n,verticalPadding:22,horizontalPadding:14}};t.prototype.renderLoading=function(){this._type.textContent=ht(0,"Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)};t.prototype.renderItem=function(t,n){var i=this;var r,e;this._renderDisposeable.clear();var o=t.completion,s=o.detail,u=o.documentation;if(n){var a="";a+="score: ".concat(t.score[0],"\n"),a+="prefix: ".concat((r=t.word)!==null&&r!==void 0?r:"(no prefix)","\n"),a+="word: ".concat(t.completion.filterText?t.completion.filterText+" (filterText)":t.textLabel,"\n"),a+="distance: ".concat(t.distance," (localityBonus-setting)\n"),a+="index: ".concat(t.idx,", based on ").concat(t.completion.sortText&&'sortText: "'.concat(t.completion.sortText,'"')||"label","\n"),a+="commit_chars: ".concat((e=t.completion.commitCharacters)===null||e===void 0?void 0:e.join(""),"\n"),u=(new VT).appendCodeblock("empty",a),s="Provider: ".concat(t.provider._debugDisplayName)}if(n||Jnt(t)){if(this.domNode.classList.remove("no-docs","no-type"),s){var a=s.length>1e5?"".concat(s.substr(0,1e5),"…"):s;this._type.textContent=a,this._type.title=a,yh(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(a))}else pa(this._type),this._type.title="",_h(this._type),this.domNode.classList.add("no-type");if(pa(this._docs),typeof u=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=u;else if(u){this._docs.classList.add("markdown-docs"),pa(this._docs);var a=this._markdownRenderer.render(u);this._docs.appendChild(a.element),this._renderDisposeable.add(a),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((function(){i.layout(i._size.width,i._type.clientHeight+i._docs.clientHeight),i._onDidChangeContents.fire(i)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=function(t){t.preventDefault(),t.stopPropagation()},this._close.onclick=function(t){t.preventDefault(),t.stopPropagation(),i._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()};t.prototype.clearContents=function(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""};Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.domNode.classList.contains("no-docs")},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:false,configurable:true});t.prototype.layout=function(t,n){var i=new Fa(t,n);Fa.equals(i,this._size)||(this._size=i,function(t,n,i){typeof n=="number"&&(t.style.width="".concat(n,"px")),typeof i=="number"&&(t.style.height="".concat(i,"px"))}(this.domNode,t,n)),this._scrollbar.scanDomNode()};t.prototype.scrollDown=function(t){if(t===void 0){t=8}this._body.scrollTop+=t};t.prototype.scrollUp=function(t){if(t===void 0){t=8}this._body.scrollTop-=t};t.prototype.scrollTop=function(){this._body.scrollTop=0};t.prototype.scrollBottom=function(){this._body.scrollTop=this._body.scrollHeight};t.prototype.pageDown=function(){this.scrollDown(80)};t.prototype.pageUp=function(){this.scrollUp(80)};Object.defineProperty(t.prototype,"borderWidth",{get:function(){return this._borderWidth},set:function(t){this._borderWidth=t},enumerable:false,configurable:true});return t}();Znt=Gnt([$nt(1,Jh)],Znt);var Qnt=function(){function t(t,n){var i=this;var r,e;this.widget=t,this._editor=n,this.allowEditorOverflow=!0,this._disposables=new hi,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new s5,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(t.domNode),this._resizable.enableSashes(!1,!0,!0,!1);var o=0,s=0;this._disposables.add(this._resizable.onDidWillResize((function(){r=i._topLeft,e=i._resizable.size}))),this._disposables.add(this._resizable.onDidResize((function(t){if(r&&e){i.widget.layout(t.dimension.width,t.dimension.height);var n=!1;t.west&&(s=e.width-t.dimension.width,n=!0),t.north&&(o=e.height-t.dimension.height,n=!0),n&&i._applyTopLeft({top:r.top+o,left:r.left+s})}t.done&&(r=void 0,e=void 0,o=0,s=0,i._userSize=t.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((function(){var t;i._anchorBox&&i._placeAtAnchor(i._anchorBox,(t=i._userSize)!==null&&t!==void 0?t:i.widget.size,i._preferAlignAtTop)})))}t.prototype.dispose=function(){this._resizable.dispose(),this._disposables.dispose(),this.hide()};t.prototype.getId=function(){return"suggest.details"};t.prototype.getDomNode=function(){return this._resizable.domNode};t.prototype.getPosition=function(){return this._topLeft?{preference:this._topLeft}:null};t.prototype.show=function(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)};t.prototype.hide=function(t){if(t===void 0){t=!1}this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),t&&(this._userSize=void 0,this.widget.clearContents())};t.prototype.placeAtAnchor=function(t,n){var i;var r=t.getBoundingClientRect();this._anchorBox=r,this._preferAlignAtTop=n,this._placeAtAnchor(this._anchorBox,(i=this._userSize)!==null&&i!==void 0?i:this.widget.size,n)};t.prototype._placeAtAnchor=function(t,n,i){var r;var e=Ea(this.getDomNode().ownerDocument.body),o=this.widget.getLayoutInfo(),s=new Fa(220,2*o.lineHeight),u=t.top,a=function(){var i=e.width-(t.left+t.width+o.borderWidth+o.horizontalPadding),r=-o.borderWidth+t.left+t.width,a=new Fa(i,e.height-t.top-o.borderHeight-o.verticalPadding),h=a.with(void 0,t.top+t.height-o.borderHeight-o.verticalPadding);return{top:u,left:r,fit:i-n.width,maxSizeTop:a,maxSizeBottom:h,minSize:s.with(Math.min(i,s.width))}}(),h=function(){var i=t.left-o.borderWidth-o.horizontalPadding,r=Math.max(o.horizontalPadding,t.left-n.width-o.borderWidth),a=new Fa(i,e.height-t.top-o.borderHeight-o.verticalPadding),h=a.with(void 0,t.top+t.height-o.borderHeight-o.verticalPadding);return{top:u,left:r,fit:i-n.width,maxSizeTop:a,maxSizeBottom:h,minSize:s.with(Math.min(i,s.width))}}(),c=function(){var i=t.left,r=-o.borderWidth+t.top+t.height,u=new Fa(t.width-o.borderHeight,e.height-t.top-t.height-o.verticalPadding);return{top:r,left:i,fit:u.height-n.height,maxSizeBottom:u,maxSizeTop:u,minSize:s.with(u.width)}}(),f=[a,h,c],l=(r=f.find((function(t){return t.fit>=0})))!==null&&r!==void 0?r:f.sort((function(t,n){return n.fit-t.fit}))[0],v=t.top+t.height-o.borderHeight;var d,g=n.height;var p=Math.max(l.maxSizeTop.height,l.maxSizeBottom.height);var w;g>p&&(g=p),i?g<=l.maxSizeTop.height?(d=!0,w=l.maxSizeTop):(d=!1,w=l.maxSizeBottom):g<=l.maxSizeBottom.height?(d=!1,w=l.maxSizeBottom):(d=!0,w=l.maxSizeTop);var m=l.top,b=l.left;!d&&g>t.height&&(m=v-g);var y=this._editor.getDomNode();if(y){var _=y.getBoundingClientRect();m-=_.top,b-=_.left}this._applyTopLeft({left:b,top:m}),this._resizable.enableSashes(!d,l===a,d,l!==a),this._resizable.minSize=l.minSize,this._resizable.maxSize=w,this._resizable.layout(g,Math.min(w.width,n.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)};t.prototype._applyTopLeft=function(t){this._topLeft=t,this._editor.layoutOverlayWidget(this)};return t}();var Ynt;(function(t){t[t.FILE=0]="FILE",t[t.FOLDER=1]="FOLDER",t[t.ROOT_FOLDER=2]="ROOT_FOLDER"})(Ynt||(Ynt={}));var Xnt=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function tit(t,n,i,r,e){var o=r===Ynt.ROOT_FOLDER?["rootfolder-icon"]:r===Ynt.FOLDER?["folder-icon"]:["file-icon"];if(i){var s=void 0;if(i.scheme===Uu.data)s=GO.parseMetaData(i).get(GO.META_DATA_LABEL);else{var u=i.path.match(Xnt);u?(s=nit(u[2].toLowerCase()),u[1]&&o.push("".concat(nit(u[1].toLowerCase()),"-name-dir-icon"))):s=nit(i.authority.toLowerCase())}if(r===Ynt.ROOT_FOLDER)o.push("".concat(s,"-root-name-folder-icon"));else if(r===Ynt.FOLDER)o.push("".concat(s,"-name-folder-icon"));else{if(s){if(o.push("".concat(s,"-name-file-icon")),o.push("name-file-icon"),s.length<=255){var a=s.split(".");for(var h=1;h<a.length;h++)o.push("".concat(a.slice(h).join("."),"-ext-file-icon"))}o.push("ext-file-icon")}var u=function(t,n,i){if(!i)return null;var r=null;if(i.scheme===Uu.data){var e=GO.parseMetaData(i).get(GO.META_DATA_MIME);e&&(r=n.getLanguageIdByMimeType(e))}else{var e=t.getModel(i);e&&(r=e.getLanguageId())}return r&&r!==dv?r:n.guessLanguageIdByFilepathOrFirstLine(i)}(t,n,i);u&&o.push("".concat(nit(u),"-lang-file-icon"))}}return o}function nit(t){return t.replace(/[\11\12\14\15\40]/g,"/")}var iit,rit=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},eit=function(t,n){return function(i,r){n(i,r,t)}};function oit(t){return"suggest-aria-id:".concat(t)}var sit=cq("suggest-more-info",Hr.chevronRight,ht(0,"Icon for more information in the suggest widget.")),uit=new(iit=function(){function t(){}t.prototype.extract=function(n,i){if(n.textLabel.match(t._regexStrict))return i[0]=n.textLabel,!0;if(n.completion.detail&&n.completion.detail.match(t._regexStrict))return i[0]=n.completion.detail,!0;if(n.completion.documentation){var r=typeof n.completion.documentation=="string"?n.completion.documentation:n.completion.documentation.value,e=t._regexRelaxed.exec(r);if(e&&(e.index===0||e.index+e[0].length===r.length))return i[0]=e[0],!0}return!1};return t}(),iit._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,iit._regexStrict=new RegExp("^".concat(iit._regexRelaxed.source,"$"),"i"),iit);var ait=function(){function t(t,n,i,r){this._editor=t,this._modelService=n,this._languageService=i,this._themeService=r,this._onDidToggleDetails=new ki,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}t.prototype.dispose=function(){this._onDidToggleDetails.dispose()};t.prototype.renderTemplate=function(t){var n=this;var i=new hi,r=t;r.classList.add("show-file-icons");var e=vh(t,bh(".icon")),o=vh(e,bh("span.colorspan")),s=vh(t,bh(".contents")),u=vh(s,bh(".main")),a=vh(u,bh(".icon-label.codicon")),h=vh(u,bh("span.left")),c=vh(u,bh("span.right")),f=new JK(h,{supportHighlights:!0,supportIcons:!0});i.add(f);var l=vh(h,bh("span.signature-label")),v=vh(h,bh("span.qualifier-label")),d=vh(c,bh("span.details-label")),g=vh(c,bh("span.readMore"+uc.asCSSSelector(sit)));return g.title=ht(0,"Read More"),{root:r,left:h,right:c,icon:e,colorspan:o,iconLabel:f,iconContainer:a,parametersLabel:l,qualifierLabel:v,detailsLabel:d,readMore:g,disposables:i,configureFont:function(){var t=n._editor.getOptions(),i=t.get(50),o=i.getMassagedFontFamily(),s=i.fontFeatureSettings,a=t.get(119)||i.fontSize,h=t.get(120)||i.lineHeight,c=i.fontWeight,f="".concat(a,"px"),l="".concat(h,"px"),v="".concat(i.letterSpacing,"px");r.style.fontSize=f,r.style.fontWeight=c,r.style.letterSpacing=v,u.style.fontFamily=o,u.style.fontFeatureSettings=s,u.style.lineHeight=l,e.style.height=l,e.style.width=l,g.style.height=l,g.style.width=l}}};t.prototype.renderElement=function(t,n,i){var r;var e=this;i.configureFont();var o=t.completion;i.root.id=oit(n),i.colorspan.style.backgroundColor="";var s={labelEscapeNewLines:!0,matches:mT(t.score)},u=[];if(o.kind===19&&uit.extract(t,u))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=u[0];else if(o.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";var a=tit(this._modelService,this._languageService,Cr.from({scheme:"fake",path:t.textLabel}),Ynt.FILE),h=tit(this._modelService,this._languageService,Cr.from({scheme:"fake",path:o.detail}),Ynt.FILE);s.extraClasses=a.length>h.length?a:h}else o.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",s.extraClasses=[tit(this._modelService,this._languageService,Cr.from({scheme:"fake",path:t.textLabel}),Ynt.FOLDER),tit(this._modelService,this._languageService,Cr.from({scheme:"fake",path:o.detail}),Ynt.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",(r=i.iconContainer.classList).add.apply(r,__spreadArray(["suggest-icon"],uc.asClassNameArray(qr.toIcon(o.kind)),false)));o.tags&&o.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),i.iconLabel.setLabel(t.textLabel,void 0,s),typeof o.label=="string"?(i.parametersLabel.textContent="",i.detailsLabel.textContent=hit(o.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=hit(o.label.detail||""),i.detailsLabel.textContent=hit(o.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(118).showInlineDetails?yh(i.detailsLabel):_h(i.detailsLabel),Jnt(t)?(i.right.classList.add("can-expand-details"),yh(i.readMore),i.readMore.onmousedown=function(t){t.stopPropagation(),t.preventDefault()},i.readMore.onclick=function(t){t.stopPropagation(),t.preventDefault(),e._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),_h(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)};t.prototype.disposeTemplate=function(t){t.disposables.dispose()};return t}();function hit(t){return t.replace(/\r\n|\r|\n/g,"")}ait=rit([eit(1,Yh),eit(2,Zl),eit(3,zk)],ait);var cit,fit=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},lit=function(t,n){return function(i,r){n(i,r,t)}};Jw("editorSuggestWidget.background",{dark:ym,light:ym,hcDark:ym,hcLight:ym},ht(0,"Background color of the suggest widget.")),Jw("editorSuggestWidget.border",{dark:km,light:km,hcDark:km,hcLight:km},ht(0,"Border color of the suggest widget."));var vit=Jw("editorSuggestWidget.foreground",{dark:bm,light:bm,hcDark:bm,hcLight:bm},ht(0,"Foreground color of the suggest widget."));Jw("editorSuggestWidget.selectedForeground",{dark:Zy,light:Zy,hcDark:Zy,hcLight:Zy},ht(0,"Foreground color of the selected entry in the suggest widget.")),Jw("editorSuggestWidget.selectedIconForeground",{dark:Qy,light:Qy,hcDark:Qy,hcLight:Qy},ht(0,"Icon foreground color of the selected entry in the suggest widget."));var dit=Jw("editorSuggestWidget.selectedBackground",{dark:Yy,light:Yy,hcDark:Yy,hcLight:Yy},ht(0,"Background color of the selected entry in the suggest widget."));Jw("editorSuggestWidget.highlightForeground",{dark:Cy,light:Cy,hcDark:Cy,hcLight:Cy},ht(0,"Color of the match highlights in the suggest widget.")),Jw("editorSuggestWidget.focusHighlightForeground",{dark:Sy,light:Sy,hcDark:Sy,hcLight:Sy},ht(0,"Color of the match highlights in the suggest widget when an item is focused.")),Jw("editorSuggestWidgetStatus.foreground",{dark:Yw(vit,.5),light:Yw(vit,.5),hcDark:Yw(vit,.5),hcLight:Yw(vit,.5)},ht(0,"Foreground color of the suggest widget status."));var git=function(){function t(t,n){this._service=t,this._key="suggestWidget.size/".concat(n.getEditorType(),"/").concat(n instanceof O4)}t.prototype.restore=function(){var t;var n=(t=this._service.get(this._key,0))!==null&&t!==void 0?t:"";try{var i=JSON.parse(n);if(Fa.is(i))return Fa.lift(i)}catch(t){}};t.prototype.store=function(t){this._service.store(this._key,JSON.stringify(t),0,1)};t.prototype.reset=function(){this._service.remove(this._key,0)};return t}();var pit=cit=function(){function t(t,n,i,r,e){var o=this;this.editor=t,this._storageService=n,this._state=0,this._isAuto=!1,this._pendingLayout=new fi,this._pendingShowDetails=new fi,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new js,this._disposables=new hi,this._onDidSelect=new Ci,this._onDidFocus=new Ci,this._onDidHide=new ki,this._onDidShow=new ki,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new ki,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new s5,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new wit(this,t),this._persistedSize=new git(n,t);var s=function(){function t(t,n,i,r){if(i===void 0){i=!1}if(r===void 0){r=!1}this.persistedSize=t,this.currentSize=n,this.persistHeight=i,this.persistWidth=r}return t}();var u;this._disposables.add(this.element.onDidWillResize((function(){o._contentWidget.lockPreference(),u=new s(o._persistedSize.restore(),o.element.size)}))),this._disposables.add(this.element.onDidResize((function(t){var n,i,r,e;if(o._resize(t.dimension.width,t.dimension.height),u&&(u.persistHeight=u.persistHeight||!!t.north||!!t.south,u.persistWidth=u.persistWidth||!!t.east||!!t.west),t.done){if(u){var s=o.getLayoutInfo(),a=s.itemHeight,h=s.defaultSize,c=Math.round(a/2);var f=o.element.size,l=f.width,v=f.height;(!u.persistHeight||Math.abs(u.currentSize.height-v)<=c)&&(v=(i=(n=u.persistedSize)===null||n===void 0?void 0:n.height)!==null&&i!==void 0?i:h.height),(!u.persistWidth||Math.abs(u.currentSize.width-l)<=c)&&(l=(e=(r=u.persistedSize)===null||r===void 0?void 0:r.width)!==null&&e!==void 0?e:h.width),o._persistedSize.store(new Fa(l,v))}o._contentWidget.unlockPreference(),u=void 0}}))),this._messageElement=vh(this.element.domNode,bh(".message")),this._listElement=vh(this.element.domNode,bh(".tree"));var a=this._disposables.add(e.createInstance(Znt,this.editor));a.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Qnt(a,this.editor);var h=function(){return o.element.domNode.classList.toggle("no-icons",!o.editor.getOption(118).showIcons)};h();var c=e.createInstance(ait,this.editor);this._disposables.add(c),this._disposables.add(c.onDidToggleDetails((function(){return o.toggleDetails()}))),this._list=new rW("SuggestWidget",this._listElement,{getHeight:function(t){return o.getLayoutInfo().itemHeight},getTemplateId:function(t){return"suggestion"}},[c],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:function(){return"option"},getWidgetAriaLabel:function(){return ht(0,"Suggest")},getWidgetRole:function(){return"listbox"},getAriaLabel:function(t){var n=t.textLabel;if(typeof t.completion.label!="string"){var i=t.completion.label,r=i.detail,e=i.description;r&&e?n=ht(0,"{0} {1}, {2}",n,r,e):r?n=ht(0,"{0} {1}",n,r):e&&(n=ht(0,"{0}, {1}",n,e))}if(!t.isResolved||!o._isDetailsVisible())return n;var s=t.completion,u=s.documentation,a=s.detail;return ht(0,"{0}, docs: {1}",n,oo("{0}{1}",a||"",u?typeof u=="string"?u:u.value:""))}}}),this._list.style(LW({listInactiveFocusBackground:dit,listInactiveFocusOutline:hm})),this._status=e.createInstance(qnt,this.element.domNode,Rtt);var f=function(){return o.element.domNode.classList.toggle("with-status-bar",o.editor.getOption(118).showStatusBar)};f(),this._disposables.add(r.onDidColorThemeChange((function(t){return o._onThemeChange(t)}))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown((function(t){return o._onListMouseDownOrTap(t)}))),this._disposables.add(this._list.onTap((function(t){return o._onListMouseDownOrTap(t)}))),this._disposables.add(this._list.onDidChangeSelection((function(t){return o._onListSelection(t)}))),this._disposables.add(this._list.onDidChangeFocus((function(t){return o._onListFocus(t)}))),this._disposables.add(this.editor.onDidChangeCursorSelection((function(){return o._onCursorSelectionChanged()}))),this._disposables.add(this.editor.onDidChangeConfiguration((function(t){t.hasChanged(118)&&(f(),h()),o._completionModel&&(t.hasChanged(50)||t.hasChanged(119)||t.hasChanged(120))&&o._list.splice(0,o._list.length,o._completionModel.items)}))),this._ctxSuggestWidgetVisible=jtt.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=jtt.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=jtt.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=jtt.HasFocusedSuggestion.bindTo(i),this._disposables.add(ya(this._details.widget.domNode,"keydown",(function(t){o._onDetailsKeydown.fire(t)}))),this._disposables.add(this.editor.onMouseDown((function(t){return o._onEditorMouseDown(t)})))}t.prototype.dispose=function(){var t;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(t=this._loadingTimeout)===null||t===void 0||t.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()};t.prototype._onEditorMouseDown=function(t){this._details.widget.domNode.contains(t.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(t.target.element)&&this.editor.focus()};t.prototype._onCursorSelectionChanged=function(){this._state!==0&&this._contentWidget.layout()};t.prototype._onListMouseDownOrTap=function(t){t.element!==void 0&&t.index!==void 0&&(t.browserEvent.preventDefault(),t.browserEvent.stopPropagation(),this._select(t.element,t.index))};t.prototype._onListSelection=function(t){t.elements.length&&this._select(t.elements[0],t.indexes[0])};t.prototype._select=function(t,n){var i=this._completionModel;i&&(this._onDidSelect.fire({item:t,index:n,model:i}),this.editor.focus())};t.prototype._onThemeChange=function(t){this._details.widget.borderWidth=C_(t.type)?2:1};t.prototype._onListFocus=function(t){var n=this;var i;if(this._ignoreFocusEvents)return;if(!t.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),void this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);var r=t.elements[0],e=t.indexes[0];r!==this._focusedItem&&((i=this._currentSuggestionDetails)===null||i===void 0||i.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=r,this._list.reveal(e),this._currentSuggestionDetails=Ss((function(t){return __awaiter(n,void 0,void 0,(function(){var n,i;var e=this;return __generator(this,(function(o){switch(o.label){case 0:n=Fs((function(){e._isDetailsVisible()&&e.showDetails(!0)}),250),i=t.onCancellationRequested((function(){return n.dispose()}));o.label=1;case 1:o.trys.push([1,,3,4]);return[4,r.resolve(t)];case 2:return[2,o.sent()];case 3:n.dispose(),i.dispose();return[7];case 4:return[2]}}))}))})),this._currentSuggestionDetails.then((function(){e>=n._list.length||r!==n._list.element(e)||(n._ignoreFocusEvents=!0,n._list.splice(e,1,[r]),n._list.setFocus([e]),n._ignoreFocusEvents=!1,n._isDetailsVisible()?n.showDetails(!1):n.element.domNode.classList.remove("docs-side"),n.editor.setAriaOptions({activeDescendant:oit(e)}))})).catch(Gn)),this._onDidFocus.fire({item:r,index:e,model:this._completionModel})};t.prototype._setState=function(t){if(this._state!==t)switch(this._state=t,this.element.domNode.classList.toggle("frozen",t===4),this.element.domNode.classList.remove("message"),t){case 0:_h(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=cit.LOADING_MESSAGE,_h(this._listElement,this._status.element),yh(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,_w(cit.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=cit.NO_SUGGESTIONS_MESSAGE,_h(this._listElement,this._status.element),yh(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,_w(cit.NO_SUGGESTIONS_MESSAGE);break;case 3:case 4:_h(this._messageElement),yh(this._listElement,this._status.element),this._show();break;case 5:_h(this._messageElement),yh(this._listElement,this._status.element),this._details.show(),this._show()}};t.prototype._show=function(){var t=this;this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((function(){t.element.domNode.classList.add("visible"),t._onDidShow.fire(t)}),100)};t.prototype.showTriggered=function(t,n){var i=this;this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!t,this._isAuto||(this._loadingTimeout=Fs((function(){return i._setState(1)}),n)))};t.prototype.showSuggestions=function(t,n,i,r,e){var o=this;var s,u;if(this._contentWidget.setPosition(this.editor.getPosition()),(s=this._loadingTimeout)===null||s===void 0||s.dispose(),(u=this._currentSuggestionDetails)===null||u===void 0||u.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==t&&(this._completionModel=t),i&&this._state!==2&&this._state!==0)return void this._setState(4);var a=this._completionModel.items.length,h=a===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),h)return this._setState(r?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(n,0),this._list.setFocus(e?[]:[n])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=Ca(sa(this.element.domNode),(function(){o._pendingLayout.clear(),o._layout(o.element.size),o._details.widget.domNode.classList.remove("focused")}))};t.prototype.focusSelected=function(){this._list.length>0&&this._list.setFocus([0])};t.prototype.selectNextPage=function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}};t.prototype.selectNext=function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}};t.prototype.selectLast=function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}};t.prototype.selectPreviousPage=function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}};t.prototype.selectPrevious=function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}};t.prototype.selectFirst=function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}};t.prototype.getFocusedItem=function(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}};t.prototype.toggleDetailsFocus=function(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))};t.prototype.toggleDetails=function(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!Jnt(this._list.getFocusedElements()[0])&&!this._explainMode||this._state!==3&&this._state!==5&&this._state!==4||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))};t.prototype.showDetails=function(t){var n=this;this._pendingShowDetails.value=Ca(sa(this.element.domNode),(function(){n._pendingShowDetails.clear(),n._details.show(),t?n._details.widget.renderLoading():n._details.widget.renderItem(n._list.getFocusedElements()[0],n._explainMode),n._details.widget.isEmpty?n._details.hide():(n._positionDetails(),n.element.domNode.classList.add("shows-details")),n.editor.focus()}))};t.prototype.toggleExplainMode=function(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())};t.prototype.resetPersistedSize=function(){this._persistedSize.reset()};t.prototype.hideWidget=function(){var t;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(t=this._loadingTimeout)===null||t===void 0||t.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();var n=this._persistedSize.restore(),i=Math.ceil(4.3*this.getLayoutInfo().itemHeight);n&&n.height<i&&this._persistedSize.store(n.with(void 0,i))};t.prototype.isFrozen=function(){return this._state===4};t.prototype._afterRender=function(t){t!==null?this._state!==2&&this._state!==1&&(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()};t.prototype._layout=function(t){var n,i,r;if(!this.editor.hasModel()||!this.editor.getDomNode())return;var e=Ea(this.element.domNode.ownerDocument.body),o=this.getLayoutInfo();t||(t=o.defaultSize);var s=t.height,u=t.width;if(this._status.element.style.height="".concat(o.itemHeight,"px"),this._state===2||this._state===1)s=o.itemHeight+o.borderHeight,u=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Fa(u,s),this._contentWidget.setPreference(2);else{var a=e.width-o.borderHeight-2*o.horizontalPadding;u>a&&(u=a);var h=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:u,c=o.statusBarHeight+this._list.contentHeight+o.borderHeight,f=o.itemHeight+o.statusBarHeight,l=ja(this.editor.getDomNode()),v=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),d=l.top+v.top+v.height,g=Math.min(e.height-d-o.verticalPadding,c),p=l.top+v.top-o.verticalPadding,w=Math.min(p,c);var m=Math.min(Math.max(w,g)+o.borderHeight,c);s===((n=this._cappedHeight)===null||n===void 0?void 0:n.capped)&&(s=this._cappedHeight.wanted),s<f&&(s=f),s>m&&(s=m),s>g||this._forceRenderingAbove&&p>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),m=w):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),m=g),this.element.preferredSize=new Fa(h,o.defaultSize.height),this.element.maxSize=new Fa(a,m),this.element.minSize=new Fa(220,f),this._cappedHeight=s===c?{wanted:(r=(i=this._cappedHeight)===null||i===void 0?void 0:i.wanted)!==null&&r!==void 0?r:t.height,capped:s}:void 0}this._resize(u,s)};t.prototype._resize=function(t,n){var i=this.element.maxSize,r=i.width,e=i.height;t=Math.min(r,t),n=Math.min(e,n);var o=this.getLayoutInfo().statusBarHeight;this._list.layout(n-o,t),this._listElement.style.height=n-o+"px",this.element.layout(n,t),this._contentWidget.layout(),this._positionDetails()};t.prototype._positionDetails=function(){var t;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((t=this._contentWidget.getPosition())===null||t===void 0?void 0:t.preference[0])===2)};t.prototype.getLayoutInfo=function(){var t=this.editor.getOption(50),n=mj(this.editor.getOption(120)||t.lineHeight,8,1e3),i=this.editor.getOption(118).showStatusBar&&this._state!==2&&this._state!==1?n:0,r=this._details.widget.borderWidth,e=2*r;return{itemHeight:n,statusBarHeight:i,borderWidth:r,borderHeight:e,typicalHalfwidthCharacterWidth:t.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Fa(430,i+12*n+e)}};t.prototype._isDetailsVisible=function(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)};t.prototype._setDetailsVisible=function(t){this._storageService.store("expandSuggestionDocs",t,0,0)};t.prototype.forceRenderingAbove=function(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))};t.prototype.stopForceRenderingAbove=function(){this._forceRenderingAbove=!1};return t}();pit.LOADING_MESSAGE=ht(0,"Loading..."),pit.NO_SUGGESTIONS_MESSAGE=ht(0,"No suggestions."),pit=cit=fit([lit(1,_W),lit(2,Gc),lit(3,zk),lit(4,Jh)],pit);var wit=function(){function t(t,n){this._widget=t,this._editor=n,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}t.prototype.dispose=function(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))};t.prototype.getId=function(){return"editor.widget.suggestWidget"};t.prototype.getDomNode=function(){return this._widget.element.domNode};t.prototype.show=function(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))};t.prototype.hide=function(){this._hidden||(this._hidden=!0,this.layout())};t.prototype.layout=function(){this._editor.layoutContentWidget(this)};t.prototype.getPosition=function(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null};t.prototype.beforeRender=function(){var t=this._widget.element.size,n=t.height,i=t.width,r=this._widget.getLayoutInfo(),e=r.borderWidth,o=r.horizontalPadding;return new Fa(i+2*e+o,n+2*e)};t.prototype.afterRender=function(t){this._widget._afterRender(t)};t.prototype.setPreference=function(t){this._preferenceLocked||(this._preference=t)};t.prototype.lockPreference=function(){this._preferenceLocked=!0};t.prototype.unlockPreference=function(){this._preferenceLocked=!1};t.prototype.setPosition=function(t){this._position=t};return t}();var mit,bit=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},yit=function(t,n){return function(i,r){n(i,r,t)}};var _it=function(){function t(t,n){var i=this;if(this._model=t,this._position=n,this._decorationOptions=PM.register({description:"suggest-line-suffix",stickiness:1}),t.getLineMaxColumn(n.lineNumber)!==n.column){var r=t.getOffsetAt(n),e=t.getPositionAt(r+1);t.changeDecorations((function(t){i._marker&&t.removeDecoration(i._marker),i._marker=t.addDecoration(Ir.fromPositions(n,e),i._decorationOptions)}))}}t.prototype.dispose=function(){var t=this;this._marker&&!this._model.isDisposed()&&this._model.changeDecorations((function(n){n.removeDecoration(t._marker),t._marker=void 0}))};t.prototype.delta=function(t){if(this._model.isDisposed()||this._position.lineNumber!==t.lineNumber)return 0;if(this._marker){var n=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(n.getStartPosition())-this._model.getOffsetAt(t)}return this._model.getLineMaxColumn(t.lineNumber)-t.column};return t}();var kit=mit=function(){function t(t,n,i,r,e,o,s){var u=this;this._memoryService=n,this._commandService=i,this._contextKeyService=r,this._instantiationService=e,this._logService=o,this._telemetryService=s,this._lineSuffix=new fi,this._toDispose=new hi,this._selectors=new xit((function(t){return t.priority})),this._onWillInsertSuggestItem=new ki,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=t,this.model=e.createInstance(Hnt,this.editor),this._selectors.register({priority:0,select:function(t,n,i){return u._memoryService.select(t,n,i)}});var a=jtt.InsertMode.bindTo(r);a.set(t.getOption(118).insertMode),this._toDispose.add(this.model.onDidTrigger((function(){return a.set(t.getOption(118).insertMode)}))),this.widget=this._toDispose.add(new xa(sa(t.getDomNode()),(function(){var t=u._instantiationService.createInstance(pit,u.editor);u._toDispose.add(t),u._toDispose.add(t.onDidSelect((function(t){return u._insertSuggestion(t,0)}),u));var n=new Lnt(u.editor,t,u.model,(function(t){return u._insertSuggestion(t,2)}));u._toDispose.add(n);var i=jtt.MakesTextEdit.bindTo(u._contextKeyService),r=jtt.HasInsertAndReplaceRange.bindTo(u._contextKeyService),e=jtt.CanResolve.bindTo(u._contextKeyService);return u._toDispose.add(ai((function(){i.reset(),r.reset(),e.reset()}))),u._toDispose.add(t.onDidFocus((function(t){var n=t.item;var o=u.editor.getPosition(),s=n.editStart.column,a=o.column;var h=!0;u.editor.getOption(1)!=="smart"||u.model.state!==2||n.completion.additionalTextEdits||4&n.completion.insertTextRules||a-s!==n.completion.insertText.length||(h=u.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:s,endLineNumber:o.lineNumber,endColumn:a})!==n.completion.insertText),i.set(h),r.set(!Tr.equals(n.editInsertEnd,n.editReplaceEnd)),e.set(!!n.provider.resolveCompletionItem||!!n.completion.documentation||n.completion.detail!==n.completion.label)}))),u._toDispose.add(t.onDetailsKeyDown((function(t){t.toKeyCodeChord().equals(new fs(!0,!1,!1,!1,33))||Ft&&t.toKeyCodeChord().equals(new fs(!1,!1,!1,!0,33))?t.stopPropagation():t.toKeyCodeChord().isModifierKey()||u.editor.focus()}))),t}))),this._overtypingCapturer=this._toDispose.add(new xa(sa(t.getDomNode()),(function(){return u._toDispose.add(new znt(u.editor,u.model))}))),this._alternatives=this._toDispose.add(new xa(sa(t.getDomNode()),(function(){return u._toDispose.add(new Fnt(u.editor,u._contextKeyService))}))),this._toDispose.add(e.createInstance(Ant,t)),this._toDispose.add(this.model.onDidTrigger((function(t){u.widget.value.showTriggered(t.auto,t.shy?250:50),u._lineSuffix.value=new _it(u.editor.getModel(),t.position)}))),this._toDispose.add(this.model.onDidSuggest((function(t){if(t.triggerOptions.shy)return;var n=-1;for(var i=0,r=u._selectors.itemsOrderedByPriorityDesc;i<r.length;i++){var e=r[i];if(n=e.select(u.editor.getModel(),u.editor.getPosition(),t.completionModel.items),n!==-1)break}if(n===-1&&(n=0),u.model.state===0)return;var o=!1;if(t.triggerOptions.auto){var e=u.editor.getOption(118);e.selectionMode==="never"||e.selectionMode==="always"?o=e.selectionMode==="never":e.selectionMode==="whenTriggerCharacter"?o=t.triggerOptions.triggerKind!==1:e.selectionMode==="whenQuickSuggestion"&&(o=t.triggerOptions.triggerKind===1&&!t.triggerOptions.refilter)}u.widget.value.showSuggestions(t.completionModel,n,t.isFrozen,t.triggerOptions.auto,o)}))),this._toDispose.add(this.model.onDidCancel((function(t){t.retrigger||u.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((function(){u.model.cancel(),u.model.clear()})));var h=jtt.AcceptSuggestionsOnEnter.bindTo(r),c=function(){var t=u.editor.getOption(1);h.set(t==="on"||t==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration((function(){return c()}))),c()}t.get=function(n){return n.getContribution(t.ID)};t.prototype.dispose=function(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()};t.prototype._insertSuggestion=function(t,n){var i;var r=this;if(!t||!t.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;var e=hnt.get(this.editor);if(!e)return;this._onWillInsertSuggestItem.fire({item:t.item});var o=this.editor.getModel(),s=o.getAlternativeVersionId(),u=t.item,a=[],h=new ji;1&n||this.editor.pushUndoStop();var c=this.getOverwriteInfo(u,!!(8&n));this._memoryService.memorize(o,this.editor.getPosition(),u);var f=u.isResolved;var l=-1,v=-1;if(Array.isArray(u.completion.additionalTextEdits)){this.model.cancel();var d=HG.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",u.completion.additionalTextEdits.map((function(t){var n=Ir.lift(t.range);if(n.startLineNumber===u.position.lineNumber&&n.startColumn>u.position.column){var i=r.editor.getPosition().column-u.position.column,e=i,o=Ir.spansMultipleLines(n)?0:i;n=new Ir(n.startLineNumber,n.startColumn+e,n.endLineNumber,n.endColumn+o)}return hB.replaceMove(n,t.text)}))),d.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!f){var g=new pi;var p;var w=o.onDidChangeContent((function(t){if(t.isFlush)return h.cancel(),void w.dispose();for(var n=0,i=t.changes;n<i.length;n++){var r=i[n];var e=Ir.getEndPosition(r.range);p&&!Tr.isBefore(e,p)||(p=e)}})),i=n;n|=2;var m=!1;var b=this.editor.onWillType((function(){b.dispose(),m=!0,2&i||r.editor.pushUndoStop()}));a.push(u.resolve(h.token).then((function(){if(!u.completion.additionalTextEdits||h.token.isCancellationRequested)return;if(p&&u.completion.additionalTextEdits.some((function(t){return Tr.isBefore(p,Ir.getStartPosition(t.range))})))return!1;m&&r.editor.pushUndoStop();var t=HG.capture(r.editor);return r.editor.executeEdits("suggestController.additionalTextEdits.async",u.completion.additionalTextEdits.map((function(t){return hB.replaceMove(Ir.lift(t.range),t.text)}))),t.restoreRelativeVerticalPositionOfCursor(r.editor),!m&&2&i||r.editor.pushUndoStop(),!0})).then((function(t){r._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",g.elapsed(),t),v=t===!0?1:t===!1?0:-2})).finally((function(){w.dispose(),b.dispose()})))}var y=u.completion.insertText;if(4&u.completion.insertTextRules||(y=T0.escape(y)),this.model.cancel(),e.insert(y,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&u.completion.insertTextRules),clipboardText:t.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&n||this.editor.pushUndoStop(),u.completion.command)if(u.completion.command.id===Cit.id)this.model.trigger({auto:!0,retrigger:!0});else{var _=new pi;a.push((i=this._commandService).executeCommand.apply(i,__spreadArray([u.completion.command.id],u.completion.command.arguments?__spreadArray([],u.completion.command.arguments,true):[],false)).catch((function(t){u.completion.extensionId?$n(t):Gn(t)})).finally((function(){l=_.elapsed()})))}4&n&&this._alternatives.value.set(t,(function(t){for(h.cancel();o.canUndo();){s!==o.getAlternativeVersionId()&&o.undo(),r._insertSuggestion(t,3|(8&n?8:0));break}})),this._alertCompletionItem(u),Promise.all(a).finally((function(){r._reportSuggestionAcceptedTelemetry(u,o,f,l,v),r.model.clear(),h.dispose()}))};t.prototype._reportSuggestionAcceptedTelemetry=function(t,n,i,r,e){var o,s,u;Math.floor(100*Math.random())!==0&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:(s=(o=t.extensionId)===null||o===void 0?void 0:o.value)!==null&&s!==void 0?s:"unknown",providerId:(u=t.provider._debugDisplayName)!==null&&u!==void 0?u:"unknown",kind:t.completion.kind,basenameHash:Zu(NO(n.uri)).toString(16),languageId:n.getLanguageId(),fileExtension:PO(n.uri),resolveInfo:t.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:t.resolveDuration,commandDuration:r,additionalEditsAsync:e})};t.prototype.getOverwriteInfo=function(t,n){Z(this.editor.hasModel());var i=this.editor.getOption(118).insertMode==="replace";n&&(i=!i);var r=t.position.column-t.editStart.column,e=(i?t.editReplaceEnd.column:t.editInsertEnd.column)-t.position.column;return{overwriteBefore:r+(this.editor.getPosition().column-t.position.column),overwriteAfter:e+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}};t.prototype._alertCompletionItem=function(t){k(t.completion.additionalTextEdits)&&yw(ht(0,"Accepting '{0}' made {1} additional edits",t.textLabel,t.completion.additionalTextEdits.length))};t.prototype.triggerSuggest=function(t,n,i){this.editor.hasModel()&&(this.model.trigger({auto:n!=null&&n,completionOptions:{providerFilter:t,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())};t.prototype.triggerSuggestAndAcceptBest=function(t){var n=this;if(!this.editor.hasModel())return;var i=this.editor.getPosition(),r=function(){i.equals(n.editor.getPosition())&&n._commandService.executeCommand(t.fallback)},e=function(t){if(4&t.completion.insertTextRules||t.completion.additionalTextEdits)return!0;var i=n.editor.getPosition(),r=t.editStart.column,e=i.column;return e-r!==t.completion.insertText.length?!0:n.editor.getModel().getValueInRange({startLineNumber:i.lineNumber,startColumn:r,endLineNumber:i.lineNumber,endColumn:e})!==t.completion.insertText};wi.once(this.model.onDidTrigger)((function(t){var i=[];wi.any(n.model.onDidTrigger,n.model.onDidCancel)((function(){si(i),r()}),void 0,i),n.model.onDidSuggest((function(t){var o=t.completionModel;if(si(i),o.items.length===0)return void r();var s=n._memoryService.select(n.editor.getModel(),n.editor.getPosition(),o.items),u=o.items[s];e(u)?(n.editor.pushUndoStop(),n._insertSuggestion({index:s,item:u,model:o},7)):r()}),void 0,i)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(i,0),this.editor.focus()};t.prototype.acceptSelectedSuggestion=function(t,n){var i=this.widget.value.getFocusedItem();var r=0;t&&(r|=4),n&&(r|=8),this._insertSuggestion(i,r)};t.prototype.acceptNextSuggestion=function(){this._alternatives.value.next()};t.prototype.acceptPrevSuggestion=function(){this._alternatives.value.prev()};t.prototype.cancelSuggestWidget=function(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()};t.prototype.focusSuggestion=function(){this.widget.value.focusSelected()};t.prototype.selectNextSuggestion=function(){this.widget.value.selectNext()};t.prototype.selectNextPageSuggestion=function(){this.widget.value.selectNextPage()};t.prototype.selectLastSuggestion=function(){this.widget.value.selectLast()};t.prototype.selectPrevSuggestion=function(){this.widget.value.selectPrevious()};t.prototype.selectPrevPageSuggestion=function(){this.widget.value.selectPreviousPage()};t.prototype.selectFirstSuggestion=function(){this.widget.value.selectFirst()};t.prototype.toggleSuggestionDetails=function(){this.widget.value.toggleDetails()};t.prototype.toggleExplainMode=function(){this.widget.value.toggleExplainMode()};t.prototype.toggleSuggestionFocus=function(){this.widget.value.toggleDetailsFocus()};t.prototype.resetWidgetSize=function(){this.widget.value.resetPersistedSize()};t.prototype.forceRenderingAbove=function(){this.widget.value.forceRenderingAbove()};t.prototype.stopForceRenderingAbove=function(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()};t.prototype.registerSelector=function(t){return this._selectors.register(t)};return t}();kit.ID="editor.contrib.suggestController",kit=mit=bit([yit(1,xnt),yit(2,ac),yit(3,Gc),yit(4,Jh),yit(5,kf),yit(6,_f)],kit);var xit=function(){function t(t){this.prioritySelector=t,this._items=new Array}t.prototype.register=function(t){var n=this;if(this._items.indexOf(t)!==-1)throw new Error("Value is already registered");return this._items.push(t),this._items.sort((function(t,i){return n.prioritySelector(i)-n.prioritySelector(t)})),{dispose:function(){var i=n._items.indexOf(t);i>=0&&n._items.splice(i,1)}}};Object.defineProperty(t.prototype,"itemsOrderedByPriorityDesc",{get:function(){return this._items},enumerable:false,configurable:true});return t}();var Cit=function(t){__extends(n,t);function n(){return t.call(this,{id:n.id,label:ht(0,"Trigger Suggest"),alias:"Trigger Suggest",precondition:Dc.and($C.writable,$C.hasCompletionItemProvider,jtt.Visible.toNegated()),kbOpts:{kbExpr:$C.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})||this}n.prototype.run=function(t,n,i){var r=kit.get(n);if(!r)return;var e;i&&typeof i=="object"&&i.auto===!0&&(e=!0),r.triggerSuggest(void 0,e,void 0)};return n}(Lf);Cit.id="editor.action.triggerSuggest",Pf(kit.ID,kit,2),Bf(Cit);var Sit=190,Dit=Ff.bindToContribution(kit.get);If(new Dit({id:"acceptSelectedSuggestion",precondition:Dc.and(jtt.Visible,jtt.HasFocusedSuggestion),handler:function(t){t.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:Dc.and(jtt.Visible,$C.textInputFocus),weight:Sit},{primary:3,kbExpr:Dc.and(jtt.Visible,$C.textInputFocus,jtt.AcceptSuggestionsOnEnter,jtt.MakesTextEdit),weight:Sit}],menuOpts:[{menuId:Rtt,title:ht(0,"Insert"),group:"left",order:1,when:jtt.HasInsertAndReplaceRange.toNegated()},{menuId:Rtt,title:ht(0,"Insert"),group:"left",order:1,when:Dc.and(jtt.HasInsertAndReplaceRange,jtt.InsertMode.isEqualTo("insert"))},{menuId:Rtt,title:ht(0,"Replace"),group:"left",order:1,when:Dc.and(jtt.HasInsertAndReplaceRange,jtt.InsertMode.isEqualTo("replace"))}]})),If(new Dit({id:"acceptAlternativeSelectedSuggestion",precondition:Dc.and(jtt.Visible,$C.textInputFocus,jtt.HasFocusedSuggestion),kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:1027,secondary:[1026]},handler:function(t){t.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Rtt,group:"left",order:2,when:Dc.and(jtt.HasInsertAndReplaceRange,jtt.InsertMode.isEqualTo("insert")),title:ht(0,"Replace")},{menuId:Rtt,group:"left",order:2,when:Dc.and(jtt.HasInsertAndReplaceRange,jtt.InsertMode.isEqualTo("replace")),title:ht(0,"Insert")}]})),hc.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),If(new Dit({id:"hideSuggestWidget",precondition:jtt.Visible,handler:function(t){return t.cancelSuggestWidget()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:9,secondary:[1033]}})),If(new Dit({id:"selectNextSuggestion",precondition:Dc.and(jtt.Visible,Dc.or(jtt.MultipleSuggestions,jtt.HasFocusedSuggestion.negate())),handler:function(t){return t.selectNextSuggestion()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),If(new Dit({id:"selectNextPageSuggestion",precondition:Dc.and(jtt.Visible,Dc.or(jtt.MultipleSuggestions,jtt.HasFocusedSuggestion.negate())),handler:function(t){return t.selectNextPageSuggestion()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:12,secondary:[2060]}})),If(new Dit({id:"selectLastSuggestion",precondition:Dc.and(jtt.Visible,Dc.or(jtt.MultipleSuggestions,jtt.HasFocusedSuggestion.negate())),handler:function(t){return t.selectLastSuggestion()}})),If(new Dit({id:"selectPrevSuggestion",precondition:Dc.and(jtt.Visible,Dc.or(jtt.MultipleSuggestions,jtt.HasFocusedSuggestion.negate())),handler:function(t){return t.selectPrevSuggestion()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),If(new Dit({id:"selectPrevPageSuggestion",precondition:Dc.and(jtt.Visible,Dc.or(jtt.MultipleSuggestions,jtt.HasFocusedSuggestion.negate())),handler:function(t){return t.selectPrevPageSuggestion()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:11,secondary:[2059]}})),If(new Dit({id:"selectFirstSuggestion",precondition:Dc.and(jtt.Visible,Dc.or(jtt.MultipleSuggestions,jtt.HasFocusedSuggestion.negate())),handler:function(t){return t.selectFirstSuggestion()}})),If(new Dit({id:"focusSuggestion",precondition:Dc.and(jtt.Visible,jtt.HasFocusedSuggestion.negate()),handler:function(t){return t.focusSuggestion()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),If(new Dit({id:"focusAndAcceptSuggestion",precondition:Dc.and(jtt.Visible,jtt.HasFocusedSuggestion.negate()),handler:function(t){t.focusSuggestion(),t.acceptSelectedSuggestion(!0,!1)}})),If(new Dit({id:"toggleSuggestionDetails",precondition:Dc.and(jtt.Visible,jtt.HasFocusedSuggestion),handler:function(t){return t.toggleSuggestionDetails()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Rtt,group:"right",order:1,when:Dc.and(jtt.DetailsVisible,jtt.CanResolve),title:ht(0,"show less")},{menuId:Rtt,group:"right",order:1,when:Dc.and(jtt.DetailsVisible.toNegated(),jtt.CanResolve),title:ht(0,"show more")}]})),If(new Dit({id:"toggleExplainMode",precondition:jtt.Visible,handler:function(t){return t.toggleExplainMode()},kbOpts:{weight:100,primary:2138}})),If(new Dit({id:"toggleSuggestionFocus",precondition:jtt.Visible,handler:function(t){return t.toggleSuggestionFocus()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:2570,mac:{primary:778}}})),If(new Dit({id:"insertBestCompletion",precondition:Dc.and($C.textInputFocus,Dc.equals("config.editor.tabCompletion","on"),Ant.AtEnd,jtt.Visible.toNegated(),Fnt.OtherSuggestions.toNegated(),hnt.InSnippetMode.toNegated()),handler:function(t,n){t.triggerSuggestAndAcceptBest(z(n)?__assign({fallback:"tab"},n):{fallback:"tab"})},kbOpts:{weight:Sit,primary:2}})),If(new Dit({id:"insertNextSuggestion",precondition:Dc.and($C.textInputFocus,Dc.equals("config.editor.tabCompletion","on"),Fnt.OtherSuggestions,jtt.Visible.toNegated(),hnt.InSnippetMode.toNegated()),handler:function(t){return t.acceptNextSuggestion()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:2}})),If(new Dit({id:"insertPrevSuggestion",precondition:Dc.and($C.textInputFocus,Dc.equals("config.editor.tabCompletion","on"),Fnt.OtherSuggestions,jtt.Visible.toNegated(),hnt.InSnippetMode.toNegated()),handler:function(t){return t.acceptPrevSuggestion()},kbOpts:{weight:Sit,kbExpr:$C.textInputFocus,primary:1026}})),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.resetSuggestSize",label:ht(0,"Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})||this}n.prototype.run=function(t,n){var i;(i=kit.get(n))===null||i===void 0||i.resetWidgetSize()};return n}(Lf));var Ait=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o.editor=n,o.suggestControllerPreselector=i,o.checkModelVersion=r,o.onWillAccept=e,o.isSuggestWidgetVisible=!1,o.isShiftKeyPressed=!1,o._isActive=!1,o._currentSuggestItemInfo=void 0,o._selectedItem=iP(o,void 0),o._register(n.onKeyDown((function(t){t.shiftKey&&!o.isShiftKeyPressed&&(o.isShiftKeyPressed=!0,o.update(o._isActive))}))),o._register(n.onKeyUp((function(t){t.shiftKey&&o.isShiftKeyPressed&&(o.isShiftKeyPressed=!1,o.update(o._isActive))})));var s=kit.get(o.editor);if(s){o._register(s.registerSelector({priority:100,select:function(t,n,i){YN((function(t){return o.checkModelVersion(t)}));var r=o.editor.getModel();if(!r)return-1;var e=o.suggestControllerPreselector(),u=e?btt(e,r):void 0;if(!u)return-1;var a=Tr.lift(n),h=Wd(i.map((function(t,n){var i=btt(Oit.fromSuggestion(s,r,a,t,o.isShiftKeyPressed).toSingleTextEdit(),r);return{index:n,valid:ytt(u,i),prefixLength:i.text.length,suggestItem:t}})).filter((function(t){return t&&t.valid&&t.prefixLength>0})),R((function(t){return t.prefixLength}),T));return h?h.index:-1}}));var u=!1;var a=function(){u||(u=!0,o._register(s.widget.value.onDidShow((function(){o.isSuggestWidgetVisible=!0,o.update(!0)}))),o._register(s.widget.value.onDidHide((function(){o.isSuggestWidgetVisible=!1,o.update(!1)}))),o._register(s.widget.value.onDidFocus((function(){o.isSuggestWidgetVisible=!0,o.update(!0)}))))};o._register(wi.once(s.model.onDidTrigger)((function(t){a()}))),o._register(s.onWillInsertSuggestItem((function(t){var n=o.editor.getPosition(),i=o.editor.getModel();if(!n||!i)return;var r=Oit.fromSuggestion(s,i,n,t.item,o.isShiftKeyPressed);o.onWillAccept(r)})))}o.update(o._isActive);return o}Object.defineProperty(n.prototype,"selectedItem",{get:function(){return this._selectedItem},enumerable:false,configurable:true});n.prototype.update=function(t){var n=this;var i=this.getSuggestItemInfo();this._isActive===t&&function(t,n){return t===n?!0:!t||!n?!1:t.equals(n)}(this._currentSuggestItemInfo,i)||(this._isActive=t,this._currentSuggestItemInfo=i,YN((function(t){n.checkModelVersion(t),n._selectedItem.set(n._isActive?n._currentSuggestItemInfo:void 0,t)})))};n.prototype.getSuggestItemInfo=function(){var t=kit.get(this.editor);if(!t||!this.isSuggestWidgetVisible)return;var n=t.widget.value.getFocusedItem(),i=this.editor.getPosition(),r=this.editor.getModel();return n&&i&&r?Oit.fromSuggestion(t,r,i,n.item,this.isShiftKeyPressed):void 0};n.prototype.stopForceRenderingAbove=function(){var t=kit.get(this.editor);t==null||t.stopForceRenderingAbove()};n.prototype.forceRenderingAbove=function(){var t=kit.get(this.editor);t==null||t.forceRenderingAbove()};return n}(ci);var Oit=function(){function t(t,n,i,r){this.range=t,this.insertText=n,this.completionItemKind=i,this.isSnippetText=r}t.fromSuggestion=function(n,i,r,e,o){var s=e.completion.insertText,u=!1;if(4&e.completion.insertTextRules){var a=(new T0).parse(s);a.children.length<100&&ent.adjustWhitespace(i,r,!0,a),s=a.toString(),u=!0}var h=n.getOverwriteInfo(e,o);return new t(Ir.fromPositions(r.delta(0,-h.overwriteBefore),r.delta(0,Math.max(h.overwriteAfter,0))),s,e.completion.kind,u)};t.prototype.equals=function(t){return this.range.equalsRange(t.range)&&this.insertText===t.insertText&&this.completionItemKind===t.completionItemKind&&this.isSnippetText===t.isSnippetText};t.prototype.toSelectedSuggestionInfo=function(){return new Qr(this.range,this.insertText,this.completionItemKind,this.isSnippetText)};t.prototype.toSingleTextEdit=function(){return new FJ(this.range,this.insertText)};return t}();var Eit,Mit=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Fit=function(t,n){return function(i,r){n(i,r,t)}};var Lit=Eit=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;c=t.call(this)||this,c.editor=n,c._instantiationService=i,c._contextKeyService=r,c._configurationService=e,c._commandService=o,c._debounceService=s,c._languageFeaturesService=u,c._accessibilitySignalService=a,c._keybindingService=h,c.model=c._register(eP("inlineCompletionModel",void 0)),c._textModelVersionId=iP(c,-1),c._positions=iP(c,[new Tr(1,1)]),c._suggestWidgetAdaptor=c._register(new Ait(c.editor,(function(){var t,n;return(n=(t=c.model.get())===null||t===void 0?void 0:t.selectedInlineCompletion.get())===null||n===void 0?void 0:n.toSingleTextEdit(void 0)}),(function(t){return c.updateObservables(t,fnt.Other)}),(function(t){YN((function(n){var i;c.updateObservables(n,fnt.Other),(i=c.model.get())===null||i===void 0||i.handleSuggestAccepted(t)}))}))),c._enabled=bP(c.editor.onDidChangeConfiguration,(function(){return c.editor.getOption(62).enabled})),c._fontFamily=bP(c.editor.onDidChangeConfiguration,(function(){return c.editor.getOption(62).fontFamily})),c._ghostTexts=uP(c,(function(t){var n;var i=c.model.read(t);return(n=i==null?void 0:i.ghostTexts.read(t))!==null&&n!==void 0?n:[]})),c._stablizedGhostTexts=function(t,n){var i=iP("result",[]),r=[];return n.add(lP((function(n){var e=t.read(n);YN((function(t){if(e.length!==r.length){r.length=e.length;for(var n=0;n<r.length;n++)r[n]||(r[n]=iP("item",e[n]));i.set(__spreadArray([],r,true),t)}r.forEach((function(n,i){return n.set(e[i],t)}))}))}))),i}(c._ghostTexts,c._store),c._ghostTextWidgets=function(t,n,i,r){var e=new AP(i,r);return aP({debugReferenceFn:i,owner:t,onLastObserverRemoved:function(){e.dispose(),e=new AP(i)}},(function(t){return e.setItems(n.read(t)),e.getItems()}))}(c,c._stablizedGhostTexts,(function(t,n){return n.add(c._instantiationService.createInstance(ctt,c.editor,{ghostText:t,minReservedLineCount:wP(0),targetTextModel:c.model.map((function(t){return t==null?void 0:t.textModel}))}))})).recomputeInitiallyAndOnChange(c._store),c._debounceValue=c._debounceService.for(c._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),c._playAccessibilitySignal=xP(c),c._isReadonly=bP(c.editor.onDidChangeConfiguration,(function(){return c.editor.getOption(91)})),c._textModel=bP(c.editor.onDidChangeModel,(function(){return c.editor.getModel()})),c._textModelIfWritable=uP((function(t){return c._isReadonly.read(t)?void 0:c._textModel.read(t)})),c._register(new Q8(c._contextKeyService,c.model)),c._register(lP((function(t){var r=c._textModelIfWritable.read(t);YN((function(t){if(c.model.set(void 0,t),c.updateObservables(t,fnt.Other),r){var e=i.createInstance(dnt,r,c._suggestWidgetAdaptor.selectedItem,c._textModelVersionId,c._positions,c._debounceValue,bP(n.onDidChangeConfiguration,(function(){return n.getOption(118).preview})),bP(n.onDidChangeConfiguration,(function(){return n.getOption(118).previewMode})),bP(n.onDidChangeConfiguration,(function(){return n.getOption(62).mode})),c._enabled);c.model.set(e,t)}}))})));var f=c._register(Ja());c._register(lP((function(t){var n=c._fontFamily.read(t);f.setStyle(n===""||n==="default"?"":"\n.monaco-editor .ghost-text-decoration,\n.monaco-editor .ghost-text-decoration-preview,\n.monaco-editor .ghost-text {\n\tfont-family: ".concat(n,";\n}"))})));var l=function(t){var n;return t.isUndoing?fnt.Undo:t.isRedoing?fnt.Redo:!((n=c.model.get())===null||n===void 0)&&n.isAcceptingPartially?fnt.AcceptWord:fnt.Other};var v;c._register(n.onDidChangeModelContent((function(t){return YN((function(n){return c.updateObservables(n,l(t))}))}))),c._register(n.onDidChangeCursorPosition((function(t){return YN((function(n){var i;c.updateObservables(n,fnt.Other),t.reason!==3&&t.source!=="api"||(i=c.model.get())===null||i===void 0||i.stop(n)}))}))),c._register(n.onDidType((function(){return YN((function(t){var n;c.updateObservables(t,fnt.Other),c._enabled.get()&&((n=c.model.get())===null||n===void 0||n.trigger(t))}))}))),c._register(c._commandService.onDidExecuteCommand((function(t){new Set([rS.Tab.id,rS.DeleteLeft.id,rS.DeleteRight.id,d6,"acceptSelectedSuggestion"]).has(t.commandId)&&n.hasTextFocus()&&c._enabled.get()&&YN((function(t){var n;(n=c.model.get())===null||n===void 0||n.trigger(t)}))}))),c._register(c.editor.onDidBlurEditorWidget((function(){c._contextKeyService.getContextKeyValue("accessibleViewIsShown")||c._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||n.getOption(62).keepOnBlur||x6.dropDownVisible||YN((function(t){var n;(n=c.model.get())===null||n===void 0||n.stop(t)}))}))),c._register(lP((function(t){var n;var i=(n=c.model.read(t))===null||n===void 0?void 0:n.state.read(t);i!=null&&i.suggestItem?i.primaryGhostText.lineCount>=2&&c._suggestWidgetAdaptor.forceRenderingAbove():c._suggestWidgetAdaptor.stopForceRenderingAbove()}))),c._register(ai((function(){c._suggestWidgetAdaptor.stopForceRenderingAbove()}))),c._register(dP({handleChange:function(t,n){return t.didChange(c._playAccessibilitySignal)&&(v=void 0),!0}},(function(t){return __awaiter(c,void 0,void 0,(function(){var n,i,r;var e=this;return __generator(this,(function(o){this._playAccessibilitySignal.read(t);n=this.model.read(t),i=n==null?void 0:n.state.read(t);if(n&&i&&i.inlineCompletion){if(i.inlineCompletion.semanticId!==v){v=i.inlineCompletion.semanticId;r=n.textModel.getLineContent(i.primaryGhostText.lineNumber);this._accessibilitySignalService.playSignal(wG.inlineSuggestion).then((function(){e.editor.getOption(8)&&e.provideScreenReaderUpdate(i.primaryGhostText.renderForScreenReader(r))}))}}else v=void 0;return[2]}))}))}))),c._register(new y6(c.editor,c.model,c._instantiationService)),c._register(c._configurationService.onDidChangeConfiguration((function(t){t.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&c.editor.updateOptions({inlineCompletionsAccessibilityVerbose:c._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}))),c.editor.updateOptions({inlineCompletionsAccessibilityVerbose:c._configurationService.getValue("accessibility.verbosity.inlineCompletions")});return c}n.get=function(t){return t.getContribution(Eit.ID)};n.prototype.playAccessibilitySignal=function(t){this._playAccessibilitySignal.trigger(t)};n.prototype.provideScreenReaderUpdate=function(t){var n=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");var r;!n&&i&&this.editor.getOption(149)&&(r=ht(0,"Inspect this in the accessible view ({0})",i.getAriaLabel())),yw(r?t+", "+r:t)};n.prototype.updateObservables=function(t,n){var i,r,e;var o=this.editor.getModel();this._textModelVersionId.set((i=o==null?void 0:o.getVersionId())!==null&&i!==void 0?i:-1,t,n),this._positions.set((e=(r=this.editor.getSelections())===null||r===void 0?void 0:r.map((function(t){return t.getPosition()})))!==null&&e!==void 0?e:[new Tr(1,1)],t)};n.prototype.shouldShowHoverAt=function(t){var n;var i=(n=this.model.get())===null||n===void 0?void 0:n.primaryGhostText.get();return!!i&&i.parts.some((function(n){return t.containsPosition(new Tr(i.lineNumber,n.column))}))};n.prototype.shouldShowHoverAtViewZone=function(t){var n,i;return(i=(n=this._ghostTextWidgets.get()[0])===null||n===void 0?void 0:n.ownsViewZone(t))!==null&&i!==void 0&&i};return n}(ci);Lit.ID="editor.contrib.inlineCompletionsController",Lit=Eit=Mit([Fit(1,Jh),Fit(2,Gc),Fit(3,Kl),Fit(4,ac),Fit(5,Cj),Fit(6,tp),Fit(7,dG),Fit(8,Yx)],Lit);var jit=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:ht(0,"Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Dc.and($C.writable,Q8.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t,i;return __generator(this,(function(r){i=Lit.get(n);(t=i==null?void 0:i.model.get())===null||t===void 0||t.next();return[2]}))}))};return n}(Lf);jit.ID=p6;var Rit=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:ht(0,"Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Dc.and($C.writable,Q8.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t,i;return __generator(this,(function(r){i=Lit.get(n);(t=i==null?void 0:i.model.get())===null||t===void 0||t.previous();return[2]}))}))};return n}(Lf);Rit.ID=g6;var Tit=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:ht(0,"Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:Q8.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){t=Lit.get(n);YN((function(n){var i;(i=t==null?void 0:t.model.get())===null||i===void 0||i.stop(n)}));return[2]}))}))};return n}(Lf);Tit.ID="editor.action.inlineSuggest.hide";var Iit=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,title:ht(0,"Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:vf.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:Dc.equals("config.editor.inlineSuggest.showToolbar","always")})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(r){n=t.get(Kl),i=n.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";n.updateValue("editor.inlineSuggest.showToolbar",i);return[2]}))}))};return n}(bf);Iit.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var Bit=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Nit=function(t,n){return function(i,r){n(i,r,t)}};var Pit=function(){function t(t,n,i){this.owner=t,this.range=n,this.controller=i}t.prototype.isValidForHoverAnchor=function(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn};return t}();var Wit=function(){function t(t,n,i,r,e,o){this._editor=t,this._languageService=n,this._openerService=i,this.accessibilityService=r,this._instantiationService=e,this._telemetryService=o,this.hoverOrdinal=4}t.prototype.suggestHoverAnchor=function(t){var n=Lit.get(this._editor);if(!n)return null;var i=t.target;if(i.type===8){var r=i.detail;if(n.shouldShowHoverAtViewZone(r.viewZoneId))return new e5(1e3,this,Ir.fromPositions(this._editor.getModel().validatePosition(r.positionBefore||r.position)),t.event.posx,t.event.posy,!1)}return i.type===7&&n.shouldShowHoverAt(i.range)?new e5(1e3,this,i.range,t.event.posx,t.event.posy,!1):i.type===6&&i.detail.mightBeForeignElement&&n.shouldShowHoverAt(i.range)?new e5(1e3,this,i.range,t.event.posx,t.event.posy,!1):null};t.prototype.computeSync=function(t,n){if(this._editor.getOption(62).showToolbar!=="onHover")return[];var i=Lit.get(this._editor);return i&&i.shouldShowHoverAt(t.range)?[new Pit(this,t.range,i)]:[]};t.prototype.renderHoverParts=function(t,n){var i=new hi,r=n[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&this.renderScreenReaderText(t,r,i);var e=r.controller.model.get(),o=this._instantiationService.createInstance(x6,this._editor,!1,wP(null),e.selectedInlineCompletionIndex,e.inlineCompletionsCount,e.selectedInlineCompletion.map((function(t){var n;return(n=t==null?void 0:t.inlineCompletion.source.inlineCompletions.commands)!==null&&n!==void 0?n:[]})));return t.fragment.appendChild(o.getDomNode()),e.triggerExplicitly(),i.add(o),i};t.prototype.renderScreenReaderText=function(t,n,i){var r=this;var e=bh,o=e("div.hover-row.markdown-hover"),s=vh(o,e("div.hover-contents",{"aria-live":"assertive"})),u=i.add(new OI({editor:this._editor},this._languageService,this._openerService));i.add(lP((function(e){var o;var a=(o=n.controller.model.read(e))===null||o===void 0?void 0:o.primaryGhostText.read(e);if(a){var h=r._editor.getModel().getLineContent(a.lineNumber);(function(n){i.add(u.onDidRenderAsync((function(){s.className="hover-contents code-hover-contents",t.onContentsChanged()})));var r=ht(0,"Suggestion:"),e=i.add(u.render((new VT).appendText(r).appendCodeblock("text",n)));s.replaceChildren(e.element)})(a.renderForScreenReader(h))}else gh(s)}))),t.fragment.appendChild(o)};return t}();function Hit(t,n){var i=0;for(var r=0;r<t.length;r++)t.charAt(r)==="\t"?i+=n:i++;return i}function zit(t,n,i){t=t<0?0:t;var r="";if(!i){var e=Math.floor(t/n);t%=n;for(var o=0;o<e;o++)r+="\t"}for(var e=0;e<t;e++)r+=" ";return r}function Uit(t,n,i,r,e){if(t.getLineCount()===1&&t.getLineMaxColumn(1)===1)return[];var o=n.getLanguageConfiguration(t.getLanguageId()).indentationRules;if(!o)return[];for(r=Math.min(r,t.getLineCount());i<=r&&o.unIndentedLinePattern;){var s=t.getLineContent(i);if(!o.unIndentedLinePattern.test(s))break;i++}if(i>r-1)return[];var u=t.getOptions(),a=u.tabSize,h=u.indentSize,c=u.insertSpaces,f=function(t,n){return n=n||1,TC.shiftIndent(t,t.length+n,a,h,c)},l=function(t,n){return n=n||1,TC.unshiftIndent(t,t.length+n,a,h,c)},v=[];var d;var g=t.getLineContent(i);var p=g;d=go(g);var w=d;o.increaseIndentPattern&&o.increaseIndentPattern.test(p)?(w=f(w),d=f(d)):o.indentNextLinePattern&&o.indentNextLinePattern.test(p)&&(w=f(w));for(var s=++i;s<=r;s++){var m=t.getLineContent(s),b=go(m),y=w+m.substring(b.length);o.decreaseIndentPattern&&o.decreaseIndentPattern.test(y)&&(w=l(w),d=l(d)),b!==w&&v.push(hB.replaceMove(new Br(s,1,s,b.length+1),eC(w,h,c))),o.unIndentedLinePattern&&o.unIndentedLinePattern.test(m)||(o.increaseIndentPattern&&o.increaseIndentPattern.test(y)?(d=f(d),w=d):w=o.indentNextLinePattern&&o.indentNextLinePattern.test(y)?f(w):d)}return v}Wit=Bit([Nit(1,Zl),Nit(2,DR),Nit(3,jw),Nit(4,Jh),Nit(5,_f)],Wit),Pf(Lit.ID,Lit,3),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.inlineSuggest.trigger",label:ht(0,"Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:$C.writable})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;var i=this;return __generator(this,(function(r){switch(r.label){case 0:t=Lit.get(n);return[4,function(t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:i=new nP(t,n);r.label=1;case 1:r.trys.push([1,,3,4]);return[4,t(i)];case 2:r.sent();return[3,4];case 3:i.finish();return[7];case 4:return[2]}}))}))}((function(n){return __awaiter(i,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:return[4,(i=t==null?void 0:t.model.get())===null||i===void 0?void 0:i.triggerExplicitly(n)];case 1:r.sent(),t==null||t.playAccessibilitySignal(n);return[2]}}))}))}))];case 1:r.sent();return[2]}}))}))};return n}(Lf)),Bf(jit),Bf(Rit),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.inlineSuggest.acceptNextWord",label:ht(0,"Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:Dc.and($C.writable,Q8.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:Dc.and($C.writable,Q8.inlineSuggestionVisible)},menuOpts:[{menuId:vf.InlineSuggestionToolbar,title:ht(0,"Accept Word"),group:"primary",order:2}]})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t,i;return __generator(this,(function(r){switch(r.label){case 0:i=Lit.get(n);return[4,(t=i==null?void 0:i.model.get())===null||t===void 0?void 0:t.acceptNextWord(i.editor)];case 1:r.sent();return[2]}}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.inlineSuggest.acceptNextLine",label:ht(0,"Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:Dc.and($C.writable,Q8.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:vf.InlineSuggestionToolbar,title:ht(0,"Accept Line"),group:"secondary",order:2}]})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t,i;return __generator(this,(function(r){switch(r.label){case 0:i=Lit.get(n);return[4,(t=i==null?void 0:i.model.get())===null||t===void 0?void 0:t.acceptNextLine(i.editor)];case 1:r.sent();return[2]}}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:d6,label:ht(0,"Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:Q8.inlineSuggestionVisible,menuOpts:[{menuId:vf.InlineSuggestionToolbar,title:ht(0,"Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:Dc.and(Q8.inlineSuggestionVisible,$C.tabMovesFocus.toNegated(),Q8.inlineSuggestionHasIndentationLessThanTabSize,jtt.Visible.toNegated(),$C.hoverFocused.toNegated())}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t,i;return __generator(this,(function(r){i=Lit.get(n);i&&((t=i.model.get())===null||t===void 0||t.accept(i.editor),i.editor.focus());return[2]}))}))};return n}(Lf)),Bf(Tit),yf(Iit),o5.register(Wit);var Kit=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Vit=function(t,n){return function(i,r){n(i,r,t)}};var qit=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:ht(0,"Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:$C.writable})||this}n.prototype.run=function(t,n){var i=n.getModel();if(!i)return;var r=i.getOptions(),e=n.getSelection();if(!e)return;var o=new irt(e,r.tabSize);n.pushUndoStop(),n.executeCommands(this.id,[o]),n.pushUndoStop(),i.updateOptions({insertSpaces:!0})};return n}(Lf);qit.ID="editor.action.indentationToSpaces";var Git=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:ht(0,"Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:$C.writable})||this}n.prototype.run=function(t,n){var i=n.getModel();if(!i)return;var r=i.getOptions(),e=n.getSelection();if(!e)return;var o=new rrt(e,r.tabSize);n.pushUndoStop(),n.executeCommands(this.id,[o]),n.pushUndoStop(),i.updateOptions({insertSpaces:!1})};return n}(Lf);Git.ID="editor.action.indentationToTabs";var $it=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,r)||this,e.insertSpaces=n,e.displaySizeOnly=i;return e}n.prototype.run=function(t,n){var i=this;var r=t.get(TH),e=t.get(Yh),o=n.getModel();if(!o)return;var s=e.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),u=o.getOptions(),a=[1,2,3,4,5,6,7,8].map((function(t){return{id:t.toString(),label:t.toString(),description:t===s.tabSize&&t===u.tabSize?ht(0,"Configured Tab Size"):t===s.tabSize?ht(0,"Default Tab Size"):t===u.tabSize?ht(0,"Current Tab Size"):void 0}})),h=Math.min(o.getOptions().tabSize-1,7);setTimeout((function(){r.pick(a,{placeHolder:ht(0,"Select Tab Size for Current File"),activeItem:a[h]}).then((function(t){if(t&&o&&!o.isDisposed()){var n=parseInt(t.label,10);i.displaySizeOnly?o.updateOptions({tabSize:n}):o.updateOptions({tabSize:n,indentSize:n,insertSpaces:i.insertSpaces})}}))}),50)};return n}(Lf);var Jit=function(t){__extends(n,t);function n(){return t.call(this,!1,!1,{id:n.ID,label:ht(0,"Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})||this}return n}($it);Jit.ID="editor.action.indentUsingTabs";var Zit=function(t){__extends(n,t);function n(){return t.call(this,!0,!1,{id:n.ID,label:ht(0,"Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})||this}return n}($it);Zit.ID="editor.action.indentUsingSpaces";var Qit=function(t){__extends(n,t);function n(){return t.call(this,!0,!0,{id:n.ID,label:ht(0,"Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0})||this}return n}($it);Qit.ID="editor.action.changeTabDisplaySize";var Yit=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:ht(0,"Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})||this}n.prototype.run=function(t,n){var i=t.get(Yh),r=n.getModel();if(!r)return;var e=i.getCreationOptions(r.getLanguageId(),r.uri,r.isForSimpleWidget);r.detectIndentation(e.insertSpaces,e.tabSize)};return n}(Lf);Yit.ID="editor.action.detectIndentation";var Xit=function(){function t(t,n){this._initialSelection=n,this._edits=[],this._selectionId=null;for(var i=0,r=t;i<r.length;i++){var e=r[i];e.range&&typeof e.text=="string"&&this._edits.push(e)}}t.prototype.getEditOperations=function(t,n){for(var i=0,r=this._edits;i<r.length;i++){var e=r[i];n.addEditOperation(Ir.lift(e.range),e.text)}var o=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(o=!0,this._selectionId=n.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(o=!0,this._selectionId=n.trackSelection(this._initialSelection,!1))),o||(this._selectionId=n.trackSelection(this._initialSelection))};t.prototype.computeCursorState=function(t,n){return n.getTrackedSelection(this._selectionId)};return t}();var trt=function(){function t(t,n){var i=this;this.editor=t,this._languageConfigurationService=n,this.callOnDispose=new hi,this.callOnModel=new hi,this.callOnDispose.add(t.onDidChangeConfiguration((function(){return i.update()}))),this.callOnDispose.add(t.onDidChangeModel((function(){return i.update()}))),this.callOnDispose.add(t.onDidChangeModelLanguage((function(){return i.update()})))}t.prototype.update=function(){var t=this;this.callOnModel.clear(),this.editor.getOption(12)<4||this.editor.getOption(55)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((function(n){var i=n.range;t.trigger(i)})))};t.prototype.trigger=function(t){var n=this.editor.getSelections();if(n===null||n.length>1)return;var i=this.editor.getModel();if(!i||!i.tokenization.isCheapToTokenize(t.getStartPosition().lineNumber))return;var r=this.editor.getOption(12),e=i.getOptions(),o=e.tabSize,s=e.indentSize,u=e.insertSpaces,a=[],h={shiftIndent:function(t){return TC.shiftIndent(t,t.length+1,o,s,u)},unshiftIndent:function(t){return TC.unshiftIndent(t,t.length+1,o,s,u)}};var c=t.startLineNumber;for(;c<=t.endLineNumber&&this.shouldIgnoreLine(i,c);)c++;if(c>t.endLineNumber)return;var f=i.getLineContent(c);if(!/\S/.test(f.substring(0,t.startColumn-1))){var l=PC(r,i,i.getLanguageId(),c,h,this._languageConfigurationService);if(l!==null){var v=go(f),d=Hit(l,o);if(d!==Hit(v,o)){var g=zit(d,o,u);a.push({range:new Ir(c,1,c,v.length+1),text:g}),f=g+f.substr(v.length)}else{var g=WC(i,c,this._languageConfigurationService);if(g===0||g===8)return}}}var p=c;for(;c<t.endLineNumber&&!/\S/.test(i.getLineContent(c+1));)c++;if(c!==t.endLineNumber){var l=PC(r,{tokenization:{getLineTokens:function(t){return i.tokenization.getLineTokens(t)},getLanguageId:function(){return i.getLanguageId()},getLanguageIdAtPosition:function(t,n){return i.getLanguageIdAtPosition(t,n)}},getLineContent:function(t){return t===p?f:i.getLineContent(t)}},i.getLanguageId(),c+1,h,this._languageConfigurationService);if(l!==null){var v=Hit(l,o),d=Hit(go(i.getLineContent(c+1)),o);if(v!==d){var g=v-d;for(var w=c+1;w<=t.endLineNumber;w++){var m=go(i.getLineContent(w)),b=zit(Hit(m,o)+g,o,u);b!==m&&a.push({range:new Ir(w,1,w,m.length+1),text:b})}}}}if(a.length>0){this.editor.pushUndoStop();var l=new Xit(a,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",l),this.editor.pushUndoStop()}};t.prototype.shouldIgnoreLine=function(t,n){t.tokenization.forceTokenization(n);var i=t.getLineFirstNonWhitespaceColumn(n);if(i===0)return!0;var r=t.tokenization.getLineTokens(n);if(r.getCount()>0){var e=r.findTokenIndexAtOffset(i);if(e>=0&&r.getStandardTokenType(e)===1)return!0}return!1};t.prototype.dispose=function(){this.callOnDispose.dispose(),this.callOnModel.dispose()};return t}();function nrt(t,n,i,r){if(t.getLineCount()===1&&t.getLineMaxColumn(1)===1)return;var e="";for(var o=0;o<i;o++)e+=" ";var s=new RegExp(e,"gi");for(var o=1,u=t.getLineCount();o<=u;o++){var a=t.getLineFirstNonWhitespaceColumn(o);if(a===0&&(a=t.getLineMaxColumn(o)),a===1)continue;var h=new Ir(o,1,o,a),c=t.getValueInRange(h),f=r?c.replace(/\t/gi,e):c.replace(s,"\t");n.addEditOperation(h,f)}}trt.ID="editor.contrib.autoIndentOnPaste",trt=Kit([Vit(1,xv)],trt);var irt=function(){function t(t,n){this.selection=t,this.tabSize=n,this.selectionId=null}t.prototype.getEditOperations=function(t,n){this.selectionId=n.trackSelection(this.selection),nrt(t,n,this.tabSize,!0)};t.prototype.computeCursorState=function(t,n){return n.getTrackedSelection(this.selectionId)};return t}();var rrt=function(){function t(t,n){this.selection=t,this.tabSize=n,this.selectionId=null}t.prototype.getEditOperations=function(t,n){this.selectionId=n.trackSelection(this.selection),nrt(t,n,this.tabSize,!1)};t.prototype.computeCursorState=function(t,n){return n.getTrackedSelection(this.selectionId)};return t}();Pf(trt.ID,trt,2),Bf(qit),Bf(Git),Bf(Jit),Bf(Zit),Bf(Qit),Bf(Yit),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.reindentlines",label:ht(0,"Reindent Lines"),alias:"Reindent Lines",precondition:$C.writable})||this}n.prototype.run=function(t,n){var i=t.get(xv),r=n.getModel();if(!r)return;var e=Uit(r,i,1,r.getLineCount());e.length>0&&(n.pushUndoStop(),n.executeEdits(this.id,e),n.pushUndoStop())};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.reindentselectedlines",label:ht(0,"Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:$C.writable})||this}n.prototype.run=function(t,n){var i=t.get(xv),r=n.getModel();if(!r)return;var e=n.getSelections();if(e===null)return;var o=[];for(var s=0,u=e;s<u.length;s++){var a=u[s];var h=a.startLineNumber,c=a.endLineNumber;if(h!==c&&a.endColumn===1&&c--,h===1){if(h===c)continue}else h--;var f=Uit(r,i,h,c);o.push.apply(o,f)}o.length>0&&(n.pushUndoStop(),n.executeEdits(this.id,o),n.pushUndoStop())};return n}(Lf));var ert=function(){function t(t,n){this.range=t,this.direction=n}return t}();var ort=function(){function t(t,n,i){this.hint=t,this.anchor=n,this.provider=i,this._isResolved=!1}t.prototype.with=function(n){var i=new t(this.hint,n.anchor,this.provider);return i._isResolved=this._isResolved,i._currentResolve=this._currentResolve,i};t.prototype.resolve=function(t){return __awaiter(this,void 0,void 0,(function(){var n=this;return __generator(this,(function(i){switch(i.label){case 0:if(!(typeof this.provider.resolveInlayHint=="function"))return[3,4];if(!this._currentResolve)return[3,2];return[4,this._currentResolve];case 1:return[2,(i.sent(),t.isCancellationRequested?void 0:this.resolve(t))];case 2:this._isResolved||(this._currentResolve=this._doResolve(t).finally((function(){return n._currentResolve=void 0})));return[4,this._currentResolve];case 3:i.sent();i.label=4;case 4:return[2]}}))}))};t.prototype._doResolve=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:s.trys.push([0,2,,3]);return[4,Promise.resolve(this.provider.resolveInlayHint(this.hint,t))];case 1:e=s.sent();this.hint.tooltip=(n=e==null?void 0:e.tooltip)!==null&&n!==void 0?n:this.hint.tooltip,this.hint.label=(i=e==null?void 0:e.label)!==null&&i!==void 0?i:this.hint.label,this.hint.textEdits=(r=e==null?void 0:e.textEdits)!==null&&r!==void 0?r:this.hint.textEdits,this._isResolved=!0;return[3,3];case 2:o=s.sent();$n(o),this._isResolved=!1;return[3,3];case 3:return[2]}}))}))};return t}();var srt=function(){function t(n,i,r){this._disposables=new hi,this.ranges=n,this.provider=new Set;var e=[];for(var o=0,s=i;o<s.length;o++){var u=s[o],a=u[0],h=u[1];this._disposables.add(a),this.provider.add(h);for(var c=0,f=a.hints;c<f.length;c++){var l=f[c];var v=r.validatePosition(l.position);var d="before";var g=t._getRangeAtPosition(r,v);var p=void 0;g.getStartPosition().isBefore(v)?(p=Ir.fromPositions(g.getStartPosition(),v),d="after"):(p=Ir.fromPositions(v,g.getEndPosition()),d="before"),e.push(new ort(l,new ert(p,d),h))}}this.items=e.sort((function(t,n){return Tr.compare(t.hint.position,n.hint.position)}))}t.create=function(n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s;var u=this;return __generator(this,(function(a){switch(a.label){case 0:o=[],s=n.ordered(i).reverse().map((function(n){return r.map((function(r){return __awaiter(u,void 0,void 0,(function(){var s,u;return __generator(this,(function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,n.provideInlayHints(i,r,e)];case 1:s=a.sent();(s!=null&&s.hints.length||n.onDidChangeInlayHints)&&o.push([s!==null&&s!==void 0?s:t._emptyInlayHintList,n]);return[3,3];case 2:u=a.sent();$n(u);return[3,3];case 3:return[2]}}))}))}))}));return[4,Promise.all(s.flat())];case 1:if(a.sent(),e.isCancellationRequested||i.isDisposed())throw new Yn;return[2,new t(r,o,i)]}}))}))};t.prototype.dispose=function(){this._disposables.dispose()};t._getRangeAtPosition=function(t,n){var i=n.lineNumber,r=t.getWordAtPosition(n);if(r)return new Ir(i,r.startColumn,i,r.endColumn);t.tokenization.tokenizeIfCheap(i);var e=t.tokenization.getLineTokens(i),o=n.column-1,s=e.findTokenIndexAtOffset(o);var u=e.getStartOffset(s),a=e.getEndOffset(s);return a-u==1&&(u===o&&s>1?(u=e.getStartOffset(s-1),a=e.getEndOffset(s-1)):a===o&&s<e.getCount()-1&&(u=e.getStartOffset(s+1),a=e.getEndOffset(s+1))),new Ir(i,u+1,i,a+1)};return t}();function urt(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a,h,c,f,l,v,d,g,p,w,m;var b=this;return __generator(this,(function(y){switch(y.label){case 0:o=t.get(Xh),s=t.get(_R),u=t.get(ac),a=t.get(Jh),h=t.get(EL);return[4,r.item.resolve(Fi.None)];case 1:if(y.sent(),!r.part.location)return[2];c=r.part.location,f=[],l=new Set(pf.getMenuItems(vf.EditorContext).map((function(t){return lf(t)?t.command.id:XX()})));v=function(t){l.has(t.desc.id)&&f.push(new tc(t.desc.id,mf.label(t.desc,{renderShortTitle:!0}),void 0,!0,(function(){return __awaiter(b,void 0,void 0,(function(){var i,e,s;return __generator(this,(function(u){switch(u.label){case 0:return[4,o.createModelReference(c.uri)];case 1:i=u.sent();u.label=2;case 2:u.trys.push([2,,4,5]);e=new U3(i.object.textEditorModel,Ir.getStartPosition(c.range)),s=r.item.anchor.range;return[4,a.invokeFunction(t.runEditorCommand.bind(t),n,e,s)];case 3:u.sent();return[3,5];case 4:i.dispose();return[7];case 5:return[2]}}))}))})))};for(d=0,g=K3.all();d<g.length;d++){p=g[d];v(p)}if(r.part.command){w=r.part.command;f.push(new ic),f.push(new tc(w.id,w.title,void 0,!0,(function(){return __awaiter(b,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,u.executeCommand.apply(u,__spreadArray([w.id],(t=w.arguments)!==null&&t!==void 0?t:[],false))];case 1:i.sent();return[3,3];case 2:n=i.sent();h.notify({severity:OL.Error,source:r.item.provider.displayName,message:n});return[3,3];case 3:return[2]}}))}))})))}m=n.getOption(127);s.showContextMenu({domForShadowRoot:m&&(e=n.getDomNode())!==null&&e!==void 0?e:void 0,getAnchor:function(){var t=ja(i);return{x:t.left,y:t.top+t.height+8}},getActions:function(){return f},onHide:function(){n.focus()},autoSelectFirstItem:!0});return[2]}}))}))}function art(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o;var s=this;return __generator(this,(function(u){switch(u.label){case 0:e=t.get(Xh);return[4,e.createModelReference(r.uri)];case 1:o=u.sent();return[4,i.invokeWithinContext((function(t){return __awaiter(s,void 0,void 0,(function(){var e,s,u,a;return __generator(this,(function(h){e=n.hasSideBySideModifier,s=t.get(Gc),u=N4.inPeekEditor.getValue(s),a=!e&&i.getOption(88)&&!u;return[2,new V3({openToSide:e,openInPeek:a,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(t,new U3(o.object.textEditorModel,Ir.getStartPosition(r.range)),Ir.lift(r.range))]}))}))}))];case 2:u.sent(),o.dispose();return[2]}}))}))}srt._emptyInlayHintList=Object.freeze({dispose:function(){},hints:[]});var hrt,crt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},frt=function(t,n){return function(i,r){n(i,r,t)}};var lrt=function(){function t(){this._entries=new ud(50)}t.prototype.get=function(n){var i=t._key(n);return this._entries.get(i)};t.prototype.set=function(n,i){var r=t._key(n);this._entries.set(r,i)};t._key=function(t){return"".concat(t.uri.toString(),"/").concat(t.getVersionId())};return t}();var vrt=Zh("IInlayHintsCache");Xl(vrt,lrt,1);var drt=function(){function t(t,n){this.item=t,this.index=n}Object.defineProperty(t.prototype,"part",{get:function(){var t=this.item.hint.label;return typeof t=="string"?{label:t}:t[this.index]},enumerable:false,configurable:true});return t}();var grt=function(){function t(t,n){this.part=t,this.hasTriggerModifier=n}return t}();var prt=hrt=function(){function t(t,n,i,r,e,o,s){var u=this;this._editor=t,this._languageFeaturesService=n,this._inlayHintsCache=r,this._commandService=e,this._notificationService=o,this._instaService=s,this._disposables=new hi,this._sessionDisposables=new hi,this._decorationsMetadata=new Map,this._ruleFactory=new h_(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(n.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(n.inlayHintsProvider.onDidChange((function(){return u._update()}))),this._disposables.add(t.onDidChangeModel((function(){return u._update()}))),this._disposables.add(t.onDidChangeModelLanguage((function(){return u._update()}))),this._disposables.add(t.onDidChangeConfiguration((function(t){t.hasChanged(141)&&u._update()}))),this._update()}t.get=function(t){var n;return(n=t.getContribution(hrt.ID))!==null&&n!==void 0?n:void 0};t.prototype.dispose=function(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()};t.prototype._update=function(){var t=this;this._sessionDisposables.clear(),this._removeAllDecorations();var n=this._editor.getOption(141);if(n.enabled==="off")return;var i=this._editor.getModel();if(!i||!this._languageFeaturesService.inlayHintsProvider.has(i))return;if(n.enabled==="on")this._activeRenderMode=0;else{var r,e;n.enabled==="onUnlessPressed"?(r=0,e=1):(r=1,e=0),this._activeRenderMode=r,this._sessionDisposables.add(Oh.getInstance().event((function(n){if(!t._editor.hasModel())return;var i=n.altKey&&n.ctrlKey&&!n.shiftKey&&!n.metaKey?e:r;if(i!==t._activeRenderMode){t._activeRenderMode=i;var o=t._editor.getModel(),s=t._copyInlayHintsWithCurrentAnchor(o);t._updateHintsDecorators([o.getFullModelRange()],s),a.schedule(0)}})))}var o=this._inlayHintsCache.get(i);var s;o&&this._updateHintsDecorators([i.getFullModelRange()],o),this._sessionDisposables.add(ai((function(){i.isDisposed()||t._cacheHintsForFastRestore(i)})));var u=new Set,a=new Ts((function(){return __awaiter(t,void 0,void 0,(function(){var t,n,r,e,o,h,c,f;return __generator(this,(function(l){switch(l.label){case 0:t=Date.now();s==null||s.dispose(!0),s=new ji;n=i.onWillDispose((function(){return s==null?void 0:s.cancel()}));l.label=1;case 1:l.trys.push([1,3,4,5]);r=s.token;return[4,srt.create(this._languageFeaturesService.inlayHintsProvider,i,this._getHintsRanges(),r)];case 2:e=l.sent();if(a.delay=this._debounceInfo.update(i,Date.now()-t),r.isCancellationRequested)return[2,void e.dispose()];for(o=0,h=e.provider;o<h.length;o++){c=h[o];typeof c.onDidChangeInlayHints!="function"||u.has(c)||(u.add(c),this._sessionDisposables.add(c.onDidChangeInlayHints((function(){a.isScheduled()||a.schedule()}))))}this._sessionDisposables.add(e),this._updateHintsDecorators(e.ranges,e.items),this._cacheHintsForFastRestore(i);return[3,5];case 3:f=l.sent();Gn(f);return[3,5];case 4:s.dispose(),n.dispose();return[7];case 5:return[2]}}))}))}),this._debounceInfo.get(i));this._sessionDisposables.add(a),this._sessionDisposables.add(ai((function(){return s==null?void 0:s.dispose(!0)}))),a.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((function(t){!t.scrollTopChanged&&a.isScheduled()||a.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((function(t){s==null||s.cancel();var n=Math.max(a.delay,1250);a.schedule(n)}))),this._sessionDisposables.add(this._installDblClickGesture((function(){return a.schedule(0)}))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())};t.prototype._installLinkGesture=function(){var t=this;var n=new hi,i=n.add(new S4(this._editor)),r=new hi;return n.add(r),n.add(i.onMouseMoveOrRelevantKeyDown((function(n){var i=n[0],e=t._getInlayHintLabelPart(i),o=t._editor.getModel();if(!e||!o)return void r.clear();var s=new ji;r.add(ai((function(){return s.dispose(!0)}))),e.item.resolve(s.token),t._activeInlayHintPart=e.part.command||e.part.location?new grt(e,i.hasTriggerModifier):void 0;var u=o.validatePosition(e.item.hint.position).lineNumber,a=new Ir(u,1,u,o.getLineMaxColumn(u)),h=t._getInlineHintsForRange(a);t._updateHintsDecorators([a],h),r.add(ai((function(){t._activeInlayHintPart=void 0,t._updateHintsDecorators([a],h)})))}))),n.add(i.onCancel((function(){return r.clear()}))),n.add(i.onExecute((function(n){return __awaiter(t,void 0,void 0,(function(){var t,i,r,e;return __generator(this,(function(o){switch(o.label){case 0:t=this._getInlayHintLabelPart(n);if(!t)return[3,5];i=t.part;if(!i.location)return[3,1];r=this._instaService.invokeFunction(art,n,this._editor,i.location);return[3,4];case 1:e=ne.is(i.command);if(!e)return[3,3];return[4,this._invokeCommand(i.command,t.item)];case 2:e=o.sent();o.label=3;case 3:r=e;o.label=4;case 4:r;o.label=5;case 5:return[2]}}))}))}))),n};t.prototype._getInlineHintsForRange=function(t){var n=new Set;for(var i=0,r=this._decorationsMetadata.values();i<r.length;i++){var e=r[i];t.containsRange(e.item.anchor.range)&&n.add(e.item)}return Array.from(n)};t.prototype._installDblClickGesture=function(t){var n=this;return this._editor.onMouseUp((function(i){return __awaiter(n,void 0,void 0,(function(){var n,r,e;return __generator(this,(function(o){switch(o.label){case 0:if(i.event.detail!==2)return[2];n=this._getInlayHintLabelPart(i);r=n;if(!r)return[3,2];i.event.preventDefault();return[4,n.item.resolve(Fi.None)];case 1:r=(o.sent(),k(n.item.hint.textEdits));o.label=2;case 2:if(r){e=n.item.hint.textEdits.map((function(t){return hB.replace(Ir.lift(t.range),t.text)}));this._editor.executeEdits("inlayHint.default",e),t()}return[2]}}))}))}))};t.prototype._installContextMenu=function(){var t=this;return this._editor.onContextMenu((function(n){return __awaiter(t,void 0,void 0,(function(){var t,i;return __generator(this,(function(r){switch(r.label){case 0:if(!(n.event.target instanceof HTMLElement))return[2];t=this._getInlayHintLabelPart(n);i=t;if(!i)return[3,2];return[4,this._instaService.invokeFunction(urt,this._editor,n.event.target,t)];case 1:i=r.sent();r.label=2;case 2:i;return[2]}}))}))}))};t.prototype._getInlayHintLabelPart=function(t){var n;if(t.target.type!==6)return;var i=(n=t.target.detail.injectedText)===null||n===void 0?void 0:n.options;return i instanceof NM&&(i==null?void 0:i.attachedData)instanceof drt?i.attachedData:void 0};t.prototype._invokeCommand=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r;var e;return __generator(this,(function(o){switch(o.label){case 0:o.trys.push([0,2,,3]);return[4,(e=this._commandService).executeCommand.apply(e,__spreadArray([t.id],(i=t.arguments)!==null&&i!==void 0?i:[],false))];case 1:o.sent();return[3,3];case 2:r=o.sent();this._notificationService.notify({severity:OL.Error,source:n.provider.displayName,message:r});return[3,3];case 3:return[2]}}))}))};t.prototype._cacheHintsForFastRestore=function(t){var n=this._copyInlayHintsWithCurrentAnchor(t);this._inlayHintsCache.set(t,n)};t.prototype._copyInlayHintsWithCurrentAnchor=function(t){var n=new Map;for(var i=0,r=this._decorationsMetadata;i<r.length;i++){var e=r[i],o=e[0],s=e[1];if(n.has(s.item))continue;var u=t.getDecorationRange(o);if(u){var a=new ert(u,s.item.anchor.direction),h=s.item.with({anchor:a});n.set(s.item,h)}}return Array.from(n.values())};t.prototype._getHintsRanges=function(){var t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(var r=0,e=n.sort(Ir.compareRangesUsingStarts);r<e.length;r++){var o=e[r];var s=t.validateRange(new Ir(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));i.length!==0&&Ir.areIntersectingOrTouching(i[i.length-1],s)?i[i.length-1]=Ir.plusRange(i[i.length-1],s):i.push(s)}return i};t.prototype._updateHintsDecorators=function(t,n){var i=this;var r,e;var o=[],s=function(t,n,r,e,s){var u;var a={content:r,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:n.className,cursorStops:e,attachedData:s};o.push({item:t,classNameRef:n,decoration:{range:t.anchor.range,options:(u={description:"InlayHint",showIfCollapsed:t.anchor.range.isEmpty(),collapseOnReplaceEdit:!t.anchor.range.isEmpty(),stickiness:0},u[t.anchor.direction]=i._activeRenderMode===0?a:void 0,u)}})},u=function(t,n){var r=i._ruleFactory.createClassNameRef({width:(h/3|0)+"px",display:"inline-block"});s(t,r," ",n?gd.Right:gd.None)},a=this._getLayoutInfo(),h=a.fontSize,c=a.fontFamily,f=a.padding,l=a.isUniform,v="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(v,c);var d={line:0,totalLen:0};for(var g=0,p=n;g<p.length;g++){var w=p[g];if(d.line!==w.anchor.range.startLineNumber&&(d={line:w.anchor.range.startLineNumber,totalLen:0}),d.totalLen>hrt._MAX_LABEL_LEN)continue;w.hint.paddingLeft&&u(w,!1);var m=typeof w.hint.label=="string"?[{label:w.hint.label}]:w.hint.label;for(var b=0;b<m.length;b++){var y=m[b],_=b===0,x=b===m.length-1,C={fontSize:"".concat(h,"px"),fontFamily:"var(".concat(v,"), ").concat(zn.fontFamily),verticalAlign:l?"baseline":"middle",unicodeBidi:"isolate"};k(w.hint.textEdits)&&(C.cursor="default"),this._fillInColors(C,w.hint),(y.command||y.location)&&((r=this._activeInlayHintPart)===null||r===void 0?void 0:r.part.item)===w&&this._activeInlayHintPart.part.index===b&&(C.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(C.color=Uk(Fm),C.cursor="pointer")),f&&(_&&x?(C.padding="1px ".concat(0|Math.max(1,h/4),"px"),C.borderRadius=(h/4|0)+"px"):_?(C.padding="1px 0 1px ".concat(0|Math.max(1,h/4),"px"),C.borderRadius="".concat(h/4|0,"px 0 0 ").concat(h/4|0,"px")):x?(C.padding="1px ".concat(0|Math.max(1,h/4),"px 1px 0"),C.borderRadius="0 ".concat(h/4|0,"px ").concat(h/4|0,"px 0")):C.padding="1px 0 1px 0");var S=y.label;d.totalLen+=S.length;var D=!1;var A=d.totalLen-hrt._MAX_LABEL_LEN;if(A>0&&(S=S.slice(0,-A)+"…",D=!0),s(w,this._ruleFactory.createClassNameRef(C),wrt(S),x&&!w.hint.paddingRight?gd.Right:gd.None,new drt(w,b)),D)break}if(w.hint.paddingRight&&u(w,!0),o.length>hrt._MAX_DECORATORS)break}var O=[];var E=function(n,i){var r=(e=M._editor.getModel())===null||e===void 0?void 0:e.getDecorationRange(n);r&&t.some((function(t){return t.containsRange(r)}))&&(O.push(n),i.classNameRef.dispose(),M._decorationsMetadata.delete(n))};var M=this;for(var F=0,L=this._decorationsMetadata;F<L.length;F++){var j=L[F],w=j[0],m=j[1];E(w,m)}var R=HG.capture(this._editor);this._editor.changeDecorations((function(t){var n=t.deltaDecorations(O,o.map((function(t){return t.decoration})));for(var r=0;r<n.length;r++){var e=o[r];i._decorationsMetadata.set(n[r],e)}})),R.restore(this._editor)};t.prototype._fillInColors=function(t,n){n.kind===ie.Parameter?(t.backgroundColor=Uk(qm),t.color=Uk(Vm)):n.kind===ie.Type?(t.backgroundColor=Uk(Km),t.color=Uk(Um)):(t.backgroundColor=Uk(zm),t.color=Uk(Hm))};t.prototype._getLayoutInfo=function(){var t=this._editor.getOption(141),n=t.padding,i=this._editor.getOption(52),r=this._editor.getOption(49);var e=t.fontSize;(!e||e<5||e>i)&&(e=i);var o=t.fontFamily||r;return{fontSize:e,fontFamily:o,padding:n,isUniform:!n&&o===r&&e===i}};t.prototype._removeAllDecorations=function(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(var t=0,n=this._decorationsMetadata.values();t<n.length;t++){var i=n[t];i.classNameRef.dispose()}this._decorationsMetadata.clear()};return t}();function wrt(t){return t.replace(/[ \t]/g," ")}prt.ID="editor.contrib.InlayHints",prt._MAX_DECORATORS=1500,prt._MAX_LABEL_LEN=43,prt=hrt=crt([frt(1,tp),frt(2,Cj),frt(3,vrt),frt(4,ac),frt(5,EL),frt(6,Jh)],prt),hc.registerCommand("_executeInlayHintProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(a,void 0,void 0,(function(){var i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:i=n[0],r=n[1];Z(Cr.isUri(i)),Z(Ir.isIRange(r));e=t.get(tp).inlayHintsProvider;return[4,t.get(Xh).createModelReference(i)];case 1:o=a.sent();a.label=2;case 2:a.trys.push([2,,4,5]);return[4,srt.create(e,o.object.textEditorModel,[Ir.lift(r)],Fi.None)];case 3:s=a.sent(),u=s.items.map((function(t){return t.hint}));return[2,(setTimeout((function(){return s.dispose()}),0),u)];case 4:o.dispose();return[7];case 5:return[2]}}))}))}));var mrt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},brt=function(t,n){return function(i,r){n(i,r,t)}};var yrt=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,10,i,n.item.anchor.range,r,e,!0)||this,o.part=n;return o}return n}(e5);var _rt=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this,n,i,r,e,s)||this,u._resolverService=o,u.hoverOrdinal=6;return u}n.prototype.suggestHoverAnchor=function(t){var n;if(!prt.get(this._editor)||t.target.type!==6)return null;var i=(n=t.target.detail.injectedText)===null||n===void 0?void 0:n.options;return i instanceof NM&&i.attachedData instanceof drt?new yrt(i.attachedData,this,t.event.posx,t.event.posy):null};n.prototype.computeSync=function(){return[]};n.prototype.computeAsync=function(t,n,i){var r=this;return t instanceof yrt?new zs((function(n){return __awaiter(r,void 0,void 0,(function(){var r,e,o,s,u,a,h,c,f,l,s,v;var d,g,p,w;return __generator(this,(function(m){switch(m.label){case 0:r=t.part;return[4,r.item.resolve(i)];case 1:if(m.sent(),i.isCancellationRequested)return[2];if(typeof r.item.hint.tooltip=="string"?e=(new VT).appendText(r.item.hint.tooltip):r.item.hint.tooltip&&(e=r.item.hint.tooltip),e&&n.emitOne(new E5(this,t.range,[e],!1,0)),k(r.item.hint.textEdits)&&n.emitOne(new E5(this,t.range,[(new VT).appendText(ht(0,"Double-click to insert"))],!1,10001)),typeof r.part.tooltip=="string"?o=(new VT).appendText(r.part.tooltip):r.part.tooltip&&(o=r.part.tooltip),o&&n.emitOne(new E5(this,t.range,[o],!1,1)),r.part.location||r.part.command){s=void 0;u=ht(0,this._editor.getOption(78)==="altKey"?Ft?"cmd + click":"ctrl + click":Ft?"option + click":"alt + click");r.part.location&&r.part.command?s=(new VT).appendText(ht(0,"Go to Definition ({0}), right click for more",u)):r.part.location?s=(new VT).appendText(ht(0,"Go to Definition ({0})",u)):r.part.command&&(s=new VT("[".concat(ht(0,"Execute Command"),"](").concat((a=r.part.command,Cr.from({scheme:Uu.command,path:a.id,query:a.arguments&&encodeURIComponent(JSON.stringify(a.arguments))}).toString()),' "').concat(r.part.command.title,'") (').concat(u,")"),{isTrusted:!0})),s&&n.emitOne(new E5(this,t.range,[s],!1,1e4))}return[4,this._resolveInlayHintLabelPartHover(r,i)];case 2:h=m.sent();m.label=3;case 3:m.trys.push([3,8,9,14]);c=true,f=__asyncValues(h);m.label=4;case 4:return[4,f.next()];case 5:if(!(l=m.sent(),d=l.done,!d))return[3,7];w=l.value;c=false;s=w;n.emitOne(s);m.label=6;case 6:c=true;return[3,4];case 7:return[3,14];case 8:v=m.sent();g={error:v};return[3,14];case 9:m.trys.push([9,,12,13]);if(!(!c&&!d&&(p=f.return)))return[3,11];return[4,p.call(f)];case 10:m.sent();m.label=11;case 11:return[3,13];case 12:if(g)throw g.error;return[7];case 13:return[7];case 14:return[2]}}))}))})):zs.EMPTY};n.prototype._resolveInlayHintLabelPartHover=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s;var u=this;return __generator(this,(function(a){switch(a.label){case 0:if(!t.part.location)return[2,zs.EMPTY];i=t.part.location,r=i.uri,e=i.range;return[4,this._resolverService.createModelReference(r)];case 1:o=a.sent();try{s=o.object.textEditorModel;return[2,this._languageFeaturesService.hoverProvider.has(s)?S5(this._languageFeaturesService.hoverProvider,s,new Tr(e.startLineNumber,e.startColumn),n).filter((function(t){return!qT(t.hover.contents)})).map((function(n){return new E5(u,t.item.anchor.range,n.hover.contents,!1,2+n.ordinal)})):zs.EMPTY]}finally{o.dispose()}return[2]}}))}))};return n}(M5);_rt=mrt([brt(1,Zl),brt(2,DR),brt(3,Kl),brt(4,Xh),brt(5,tp)],_rt),Pf(prt.ID,prt,1),o5.register(_rt);var krt=function(){function t(t,n,i){this._editRange=t,this._originalSelection=n,this._text=i}t.prototype.getEditOperations=function(t,n){n.addTrackedEditOperation(this._editRange,this._text)};t.prototype.computeCursorState=function(t,n){var i=n.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new Br(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new Br(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)};return t}();var xrt,Crt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Srt=function(t,n){return function(i,r){n(i,r,t)}};var Drt=xrt=function(){function t(t,n){this.editor=t,this.editorWorkerService=n,this.decorations=this.editor.createDecorationsCollection()}t.get=function(n){return n.getContribution(t.ID)};t.prototype.dispose=function(){};t.prototype.run=function(n,i){var r=this;var e;(e=this.currentRequest)===null||e===void 0||e.cancel();var o=this.editor.getSelection(),s=this.editor.getModel();if(!s||!o)return;var u=o;if(u.startLineNumber!==u.endLineNumber)return;var a=new QQ(this.editor,5),h=s.uri;return this.editorWorkerService.canNavigateValueSet(h)?(this.currentRequest=Ss((function(t){return r.editorWorkerService.navigateValueSet(h,u,i)})),this.currentRequest.then((function(i){var e;if(!i||!i.range||!i.value||!a.validate(r.editor))return;var o=Ir.lift(i.range);var s=i.range;var h=i.value.length-(u.endColumn-u.startColumn);s={startLineNumber:s.startLineNumber,startColumn:s.startColumn,endLineNumber:s.endLineNumber,endColumn:s.startColumn+i.value.length},h>1&&(u=new Br(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn+h-1));var c=new krt(o,u,i.value);r.editor.pushUndoStop(),r.editor.executeCommand(n,c),r.editor.pushUndoStop(),r.decorations.set([{range:s,options:t.DECORATION}]),(e=r.decorationRemover)===null||e===void 0||e.cancel(),r.decorationRemover=Ms(350),r.decorationRemover.then((function(){return r.decorations.clear()})).catch(Gn)})).catch(Gn)):Promise.resolve(void 0)};return t}();Drt.ID="editor.contrib.inPlaceReplaceController",Drt.DECORATION=PM.register({description:"in-place-replace",className:"valueSetReplacement"}),Drt=xrt=Crt([Srt(1,vH)],Drt);Pf(Drt.ID,Drt,4),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.inPlaceReplace.up",label:ht(0,"Replace with Previous Value"),alias:"Replace with Previous Value",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:3159,weight:100}})||this}n.prototype.run=function(t,n){var i=Drt.get(n);return i?i.run(this.id,!1):Promise.resolve(void 0)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.inPlaceReplace.down",label:ht(0,"Replace with Next Value"),alias:"Replace with Next Value",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:3161,weight:100}})||this}n.prototype.run=function(t,n){var i=Drt.get(n);return i?i.run(this.id,!0):Promise.resolve(void 0)};return n}(Lf));Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"expandLineSelection",label:ht(0,"Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:$C.textInputFocus,primary:2090}})||this}n.prototype.run=function(t,n,i){if(i=i||{},!n.hasModel())return;var r=n._getViewModel();r.model.pushStackElement(),r.setCursorStates(i.source,3,AC.expandLineSelection(r,r.getCursorStates())),r.revealAllCursors(i.source,!0)};return n}(Lf));var Art=function(){function t(t,n,i){this._selection=t,this._cursors=n,this._selectionId=null,this._trimInRegexesAndStrings=i}t.prototype.getEditOperations=function(t,n){var i=function(t,n,i){n.sort((function(t,n){return t.lineNumber===n.lineNumber?t.column-n.column:t.lineNumber-n.lineNumber}));for(var r=n.length-2;r>=0;r--)n[r].lineNumber===n[r+1].lineNumber&&n.splice(r,1);var e=[];var o=0,s=0;var u=n.length;for(var r=1,a=t.getLineCount();r<=a;r++){var h=t.getLineContent(r),c=h.length+1;var f=0;if(s<u&&n[s].lineNumber===r&&(f=n[s].column,s++,f===c)||h.length===0)continue;var l=po(h);var v=0;if(l===-1)v=1;else{if(l===h.length-1)continue;v=l+2}if(!i){if(!t.tokenization.hasAccurateTokensForLine(r))continue;var d=t.tokenization.getLineTokens(r),g=d.getStandardTokenType(d.findTokenIndexAtOffset(v));if(g===2||g===3)continue}v=Math.max(f,v),e[o++]=hB.delete(new Ir(r,v,r,c))}return e}(t,this._cursors,this._trimInRegexesAndStrings);for(var r=0,e=i.length;r<e;r++){var o=i[r];n.addEditOperation(o.range,o.text)}this._selectionId=n.trackSelection(this._selection)};t.prototype.computeCursorState=function(t,n){return n.getTrackedSelection(this._selectionId)};return t}();var Ort=function(){function t(t,n,i){this._selection=t,this._isCopyingDown=n,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}t.prototype.getEditOperations=function(t,n){var i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&i.endColumn===1&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,t.getLineMaxColumn(i.endLineNumber-1)));var r=[];for(var e=i.startLineNumber;e<=i.endLineNumber;e++)r.push(t.getLineContent(e));var o=r.join("\n");o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?n.addEditOperation(new Ir(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===t.getLineCount()?"":"\n"):this._isCopyingDown?n.addEditOperation(new Ir(i.startLineNumber,1,i.startLineNumber,1),o+"\n"):n.addEditOperation(new Ir(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber),i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),"\n"+o),this._selectionId=n.trackSelection(i),this._selectionDirection=this._selection.getDirection()};t.prototype.computeCursorState=function(t,n){var i=n.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){var r=i.startLineNumber,e=i.startColumn,o=i.endLineNumber,s=i.endColumn;this._startLineNumberDelta!==0&&(r+=this._startLineNumberDelta,e=1),this._endLineNumberDelta!==0&&(o+=this._endLineNumberDelta,s=1),i=Br.createWithDirection(r,e,o,s,this._selectionDirection)}return i};return t}();var Ert=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Mrt=function(t,n){return function(i,r){n(i,r,t)}};var Frt=function(){function t(t,n,i,r){this._languageConfigurationService=r,this._selection=t,this._isMovingDown=n,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}t.prototype.getEditOperations=function(t,n){var i=t.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i)return void(this._selectionId=n.trackSelection(this._selection));if(!this._isMovingDown&&this._selection.startLineNumber===1)return void(this._selectionId=n.trackSelection(this._selection));this._moveEndPositionDown=!1;var r=this._selection;r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,t.getLineMaxColumn(r.endLineNumber-1)));var e=t.getOptions(),o=e.tabSize,s=e.indentSize,u=e.insertSpaces,a=this.buildIndentConverter(o,s,u),h={tokenization:{getLineTokens:function(n){return t.tokenization.getLineTokens(n)},getLanguageId:function(){return t.getLanguageId()},getLanguageIdAtPosition:function(n,i){return t.getLanguageIdAtPosition(n,i)}},getLineContent:null};if(r.startLineNumber===r.endLineNumber&&t.getLineMaxColumn(r.startLineNumber)===1){var c=r.startLineNumber,f=this._isMovingDown?c+1:c-1;t.getLineMaxColumn(f)===1?n.addEditOperation(new Ir(1,1,1,1),null):(n.addEditOperation(new Ir(c,1,c,1),t.getLineContent(f)),n.addEditOperation(new Ir(f,1,f,t.getLineMaxColumn(f)),null)),r=new Br(f,1,f,1)}else{var l,f=void 0;if(this._isMovingDown){l=r.endLineNumber+1,f=t.getLineContent(l),n.addEditOperation(new Ir(l-1,t.getLineMaxColumn(l-1),l,t.getLineMaxColumn(l)),null);var v=f;if(this.shouldAutoIndent(t,r)){var d=this.matchEnterRule(t,a,o,l,r.startLineNumber-1);if(d!==null)v=zit(d+Hit(go(t.getLineContent(l)),o),o,u)+this.trimStart(f);else{h.getLineContent=function(n){return n===r.startLineNumber?t.getLineContent(l):t.getLineContent(n)};var g=PC(this._autoIndent,h,t.getLanguageIdAtPosition(l,1),r.startLineNumber,a,this._languageConfigurationService);if(g!==null){var p=go(t.getLineContent(l)),w=Hit(g,o);w!==Hit(p,o)&&(v=zit(w,o,u)+this.trimStart(f))}}n.addEditOperation(new Ir(r.startLineNumber,1,r.startLineNumber,1),v+"\n");var m=this.matchEnterRuleMovingDown(t,a,o,r.startLineNumber,l,v);if(m!==null)m!==0&&this.getIndentEditsOfMovingBlock(t,n,r,o,u,m);else{h.getLineContent=function(n){return n===r.startLineNumber?v:n>=r.startLineNumber+1&&n<=r.endLineNumber+1?t.getLineContent(n-1):t.getLineContent(n)};var g=PC(this._autoIndent,h,t.getLanguageIdAtPosition(l,1),r.startLineNumber+1,a,this._languageConfigurationService);if(g!==null){var p=go(t.getLineContent(r.startLineNumber)),w=Hit(g,o),b=Hit(p,o);if(w!==b){var y=w-b;this.getIndentEditsOfMovingBlock(t,n,r,o,u,y)}}}}else n.addEditOperation(new Ir(r.startLineNumber,1,r.startLineNumber,1),v+"\n")}else if(l=r.startLineNumber-1,f=t.getLineContent(l),n.addEditOperation(new Ir(l,1,l+1,1),null),n.addEditOperation(new Ir(r.endLineNumber,t.getLineMaxColumn(r.endLineNumber),r.endLineNumber,t.getLineMaxColumn(r.endLineNumber)),"\n"+f),this.shouldAutoIndent(t,r)){h.getLineContent=function(n){return n===l?t.getLineContent(r.startLineNumber):t.getLineContent(n)};var _=this.matchEnterRule(t,a,o,r.startLineNumber,r.startLineNumber-2);if(_!==null)_!==0&&this.getIndentEditsOfMovingBlock(t,n,r,o,u,_);else{var d=PC(this._autoIndent,h,t.getLanguageIdAtPosition(r.startLineNumber,1),l,a,this._languageConfigurationService);if(d!==null){var m=go(t.getLineContent(r.startLineNumber)),g=Hit(d,o),p=Hit(m,o);if(g!==p){var w=g-p;this.getIndentEditsOfMovingBlock(t,n,r,o,u,w)}}}}}this._selectionId=n.trackSelection(r)};t.prototype.buildIndentConverter=function(t,n,i){return{shiftIndent:function(r){return TC.shiftIndent(r,r.length+1,t,n,i)},unshiftIndent:function(r){return TC.unshiftIndent(r,r.length+1,t,n,i)}}};t.prototype.parseEnterResult=function(t,n,i,r,e){if(e){var o=e.indentation;e.indentAction===ul.None||e.indentAction===ul.Indent?o=e.indentation+e.appendText:e.indentAction===ul.IndentOutdent?o=e.indentation:e.indentAction===ul.Outdent&&(o=n.unshiftIndent(e.indentation)+e.appendText);var s=t.getLineContent(r);if(this.trimStart(s).indexOf(this.trimStart(o))>=0){var u=go(t.getLineContent(r));var a=go(o);var h=WC(t,r,this._languageConfigurationService);return h!==null&&2&h&&(a=n.unshiftIndent(a)),Hit(a,i)-Hit(u,i)}}return null};t.prototype.matchEnterRuleMovingDown=function(t,n,i,r,e,o){if(po(o)>=0){var s=t.getLineMaxColumn(e),u=EC(this._autoIndent,t,new Ir(e,s,e,s),this._languageConfigurationService);return this.parseEnterResult(t,n,i,r,u)}{var s=r-1;for(;s>=1&&!(po(t.getLineContent(s))>=0);)s--;if(s<1||r>t.getLineCount())return null;var u=t.getLineMaxColumn(s),a=EC(this._autoIndent,t,new Ir(s,u,s,u),this._languageConfigurationService);return this.parseEnterResult(t,n,i,r,a)}};t.prototype.matchEnterRule=function(t,n,i,r,e,o){var s=e;for(;s>=1;){var u=void 0;if(u=s===e&&o!==void 0?o:t.getLineContent(s),po(u)>=0)break;s--}if(s<1||r>t.getLineCount())return null;var a=t.getLineMaxColumn(s),h=EC(this._autoIndent,t,new Ir(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(t,n,i,r,h)};t.prototype.trimStart=function(t){return t.replace(/^\s+/,"")};t.prototype.shouldAutoIndent=function(t,n){if(this._autoIndent<4||!t.tokenization.isCheapToTokenize(n.startLineNumber))return!1;var i=t.getLanguageIdAtPosition(n.startLineNumber,1);return i===t.getLanguageIdAtPosition(n.endLineNumber,1)&&this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport!==null};t.prototype.getIndentEditsOfMovingBlock=function(t,n,i,r,e,o){for(var s=i.startLineNumber;s<=i.endLineNumber;s++){var u=go(t.getLineContent(s)),a=zit(Hit(u,r)+o,r,e);a!==u&&(n.addEditOperation(new Ir(s,1,s,u.length+1),a),s===i.endLineNumber&&i.endColumn<=u.length+1&&a===""&&(this._moveEndLineSelectionShrink=!0))}};t.prototype.computeCursorState=function(t,n){var i=n.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i};return t}();Frt=Ert([Mrt(3,xv)],Frt);var Lrt=function(){function t(t,n){this.selection=t,this.descending=n,this.selectionId=null}t.getCollator=function(){return t._COLLATOR||(t._COLLATOR=new Intl.Collator),t._COLLATOR};t.prototype.getEditOperations=function(t,n){var i=function(t,n,i){var r=jrt(t,n,i);return r?hB.replace(new Ir(r.startLineNumber,1,r.endLineNumber,t.getLineMaxColumn(r.endLineNumber)),r.after.join("\n")):null}(t,this.selection,this.descending);i&&n.addEditOperation(i.range,i.text),this.selectionId=n.trackSelection(this.selection)};t.prototype.computeCursorState=function(t,n){return n.getTrackedSelection(this.selectionId)};t.canRun=function(t,n,i){if(t===null)return!1;var r=jrt(t,n,i);if(!r)return!1;for(var e=0,o=r.before.length;e<o;e++)if(r.before[e]!==r.after[e])return!0;return!1};return t}();function jrt(t,n,i){var r=n.startLineNumber;var e=n.endLineNumber;if(n.endColumn===1&&e--,r>=e)return null;var o=[];for(var s=r;s<=e;s++)o.push(t.getLineContent(s));var u=o.slice(0);return u.sort(Lrt.getCollator().compare),i===!0&&(u=u.reverse()),{startLineNumber:r,endLineNumber:e,before:o,after:u}}Lrt._COLLATOR=null;var Rrt=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r.down=n;return r}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=n.getSelections().map((function(t,n){return{selection:t,index:n,ignore:!1}}));i.sort((function(t,n){return Ir.compareRangesUsingStarts(t.selection,n.selection)}));var r=i[0];for(var e=1;e<i.length;e++){var o=i[e];r.selection.endLineNumber===o.selection.startLineNumber&&(r.index<o.index?o.ignore=!0:(r.ignore=!0,r=o))}var s=[];for(var u=0,a=i;u<a.length;u++){var e=a[u];s.push(new Ort(e.selection,this.down,e.ignore))}n.pushUndoStop(),n.executeCommands(this.id,s),n.pushUndoStop()};return n}(Lf);var Trt=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r.down=n;return r}n.prototype.run=function(t,n){var i=t.get(xv),r=[],e=n.getSelections()||[],o=n.getOption(12);for(var s=0,u=e;s<u.length;s++){var a=u[s];r.push(new Frt(a,this.down,o,i))}n.pushUndoStop(),n.executeCommands(this.id,r),n.pushUndoStop()};return n}(Lf);var Irt=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r.descending=n;return r}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=n.getModel();var r=n.getSelections();r.length===1&&r[0].isEmpty()&&(r=[new Br(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))]);for(var e=0,o=r;e<o.length;e++){var s=o[e];if(!Lrt.canRun(n.getModel(),s,this.descending))return}var u=[];for(var s=0,a=r.length;s<a;s++)u[s]=new Lrt(r[s],this.descending);n.pushUndoStop(),n.executeCommands(this.id,u),n.pushUndoStop()};return n}(Lf);var Brt=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:ht(0,"Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:Ui(2089,2102),weight:100}})||this}n.prototype.run=function(t,n,i){var r=[];i.reason==="auto-save"&&(r=(n.getSelections()||[]).map((function(t){return new Tr(t.positionLineNumber,t.positionColumn)})));var e=n.getSelection();if(e===null)return;var o=t.get(Kl),s=n.getModel(),u=o.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:s==null?void 0:s.getLanguageId(),resource:s==null?void 0:s.uri}),a=new Art(e,r,u);n.pushUndoStop(),n.executeCommands(this.id,[a]),n.pushUndoStop()};return n}(Lf);Brt.ID="editor.action.trimTrailingWhitespace";var Nrt=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=n.getSelection(),r=this._getRangesToDelete(n),e=[];for(var o=0,s=r.length-1;o<s;o++){var u=r[o],a=r[o+1];Ir.intersectRanges(u,a)===null?e.push(u):r[o+1]=Ir.plusRange(u,a)}e.push(r[r.length-1]);var h=this._getEndCursorState(i,e),c=e.map((function(t){return hB.replace(t,"")}));n.pushUndoStop(),n.executeEdits(this.id,c,h),n.pushUndoStop()};return n}(Lf);var Prt=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.run=function(t,n){var i=n.getSelections();if(i===null)return;var r=n.getModel();if(r===null)return;var e=n.getOption(131),o=[];for(var s=0,u=i;s<u.length;s++){var a=u[s];if(a.isEmpty()){var h=a.getStartPosition(),c=n.getConfiguredWordAtPosition(h);if(!c)continue;var f=new Ir(h.lineNumber,c.startColumn,h.lineNumber,c.endColumn),l=r.getValueInRange(f);o.push(hB.replace(f,this._modifyText(l,e)))}else{var h=r.getValueInRange(a);o.push(hB.replace(a,this._modifyText(h,e)))}}n.pushUndoStop(),n.executeEdits(this.id,o),n.pushUndoStop()};return n}(Lf);var Wrt=function(){function t(t,n){this._pattern=t,this._flags=n,this._actual=null,this._evaluated=!1}t.prototype.get=function(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(t){}}return this._actual};t.prototype.isSupported=function(){return this.get()!==null};return t}();var Hrt=function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.transformToTitlecase",label:ht(0,"Transform to Title Case"),alias:"Transform to Title Case",precondition:$C.writable})||this}n.prototype._modifyText=function(t,i){var r=n.titleBoundary.get();return r?t.toLocaleLowerCase().replace(r,(function(t){return t.toLocaleUpperCase()})):t};return n}(Prt);Hrt.titleBoundary=new Wrt("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");var zrt=function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.transformToSnakecase",label:ht(0,"Transform to Snake Case"),alias:"Transform to Snake Case",precondition:$C.writable})||this}n.prototype._modifyText=function(t,i){var r=n.caseBoundary.get(),e=n.singleLetters.get();return r&&e?t.replace(r,"$1_$2").replace(e,"$1_$2$3").toLocaleLowerCase():t};return n}(Prt);zrt.caseBoundary=new Wrt("(\\p{Ll})(\\p{Lu})","gmu"),zrt.singleLetters=new Wrt("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");var Urt=function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.transformToCamelcase",label:ht(0,"Transform to Camel Case"),alias:"Transform to Camel Case",precondition:$C.writable})||this}n.prototype._modifyText=function(t,i){var r=n.wordBoundary.get();if(!r)return t;var e=t.split(r);return e.shift()+e.map((function(t){return t.substring(0,1).toLocaleUpperCase()+t.substring(1)})).join("")};return n}(Prt);Urt.wordBoundary=new Wrt("[_\\s-]","gm");var Krt=function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.transformToPascalcase",label:ht(0,"Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:$C.writable})||this}n.prototype._modifyText=function(t,i){var r=n.wordBoundary.get(),e=n.wordBoundaryToMaintain.get();return!r||!e?t:t.split(e).map((function(t){return t.split(r)})).flat().map((function(t){return t.substring(0,1).toLocaleUpperCase()+t.substring(1)})).join("")};return n}(Prt);Krt.wordBoundary=new Wrt("[_\\s-]","gm"),Krt.wordBoundaryToMaintain=new Wrt("(?<=\\.)","gm");var Vrt=function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.transformToKebabcase",label:ht(0,"Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:$C.writable})||this}n.isSupported=function(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every((function(t){return t.isSupported()}))};n.prototype._modifyText=function(t,i){var r=n.caseBoundary.get(),e=n.singleLetters.get(),o=n.underscoreBoundary.get();return r&&e&&o?t.replace(o,"$1-$3").replace(r,"$1-$2").replace(e,"$1-$2").toLocaleLowerCase():t};return n}(Prt);Vrt.caseBoundary=new Wrt("(\\p{Ll})(\\p{Lu})","gmu"),Vrt.singleLetters=new Wrt("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),Vrt.underscoreBoundary=new Wrt("(\\S)(_)(\\S)","gm"),Bf(function(t){__extends(n,t);function n(){return t.call(this,!1,{id:"editor.action.copyLinesUpAction",label:ht(0,"Copy Line Up"),alias:"Copy Line Up",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"2_line",title:ht(0,"&&Copy Line Up"),order:1}})||this}return n}(Rrt)),Bf(function(t){__extends(n,t);function n(){return t.call(this,!0,{id:"editor.action.copyLinesDownAction",label:ht(0,"Copy Line Down"),alias:"Copy Line Down",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"2_line",title:ht(0,"Co&&py Line Down"),order:2}})||this}return n}(Rrt)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.duplicateSelection",label:ht(0,"Duplicate Selection"),alias:"Duplicate Selection",precondition:$C.writable,menuOpts:{menuId:vf.MenubarSelectionMenu,group:"2_line",title:ht(0,"&&Duplicate Selection"),order:5}})||this}n.prototype.run=function(t,n,i){if(!n.hasModel())return;var r=[],e=n.getSelections(),o=n.getModel();for(var s=0,u=e;s<u.length;s++){var a=u[s];if(a.isEmpty())r.push(new Ort(a,!0));else{var h=new Br(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);r.push(new wC(h,o.getValueInRange(a)))}}n.pushUndoStop(),n.executeCommands(this.id,r),n.pushUndoStop()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,!1,{id:"editor.action.moveLinesUpAction",label:ht(0,"Move Line Up"),alias:"Move Line Up",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"2_line",title:ht(0,"Mo&&ve Line Up"),order:3}})||this}return n}(Trt)),Bf(function(t){__extends(n,t);function n(){return t.call(this,!0,{id:"editor.action.moveLinesDownAction",label:ht(0,"Move Line Down"),alias:"Move Line Down",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"2_line",title:ht(0,"Move &&Line Down"),order:4}})||this}return n}(Trt)),Bf(function(t){__extends(n,t);function n(){return t.call(this,!1,{id:"editor.action.sortLinesAscending",label:ht(0,"Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:$C.writable})||this}return n}(Irt)),Bf(function(t){__extends(n,t);function n(){return t.call(this,!0,{id:"editor.action.sortLinesDescending",label:ht(0,"Sort Lines Descending"),alias:"Sort Lines Descending",precondition:$C.writable})||this}return n}(Irt)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.removeDuplicateLines",label:ht(0,"Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:$C.writable})||this}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=n.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;var r=[],e=[];var o=0,s=!0,u=n.getSelections();u.length===1&&u[0].isEmpty()&&(u=[new Br(1,1,i.getLineCount(),i.getLineMaxColumn(i.getLineCount()))],s=!1);for(var a=0,h=u;a<h.length;a++){var c=h[a];var f=new Set,l=[];for(var v=c.startLineNumber;v<=c.endLineNumber;v++){var d=i.getLineContent(v);f.has(d)||(l.push(d),f.add(d))}var g=new Br(c.startLineNumber,1,c.endLineNumber,i.getLineMaxColumn(c.endLineNumber)),p=c.startLineNumber-o,w=new Br(p,1,p+l.length-1,l[l.length-1].length);r.push(hB.replace(g,l.join("\n"))),e.push(w),o+=c.endLineNumber-c.startLineNumber+1-l.length}n.pushUndoStop(),n.executeEdits(this.id,r,s?e:void 0),n.pushUndoStop()};return n}(Lf)),Bf(Brt),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.deleteLines",label:ht(0,"Delete Line"),alias:"Delete Line",precondition:$C.writable,kbOpts:{kbExpr:$C.textInputFocus,primary:3113,weight:100}})||this}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=this._getLinesToRemove(n),r=n.getModel();if(r.getLineCount()===1&&r.getLineMaxColumn(1)===1)return;var e=0;var o=[],s=[];for(var u=0,a=i.length;u<a;u++){var h=i[u];var c=h.startLineNumber,f=h.endLineNumber,l=1,v=r.getLineMaxColumn(f);f<r.getLineCount()?(f+=1,v=1):c>1&&(c-=1,l=r.getLineMaxColumn(c)),o.push(hB.replace(new Br(c,l,f,v),"")),s.push(new Br(c-e,h.positionColumn,c-e,h.positionColumn)),e+=h.endLineNumber-h.startLineNumber+1}n.pushUndoStop(),n.executeEdits(this.id,o,s),n.pushUndoStop()};n.prototype._getLinesToRemove=function(t){var n=t.getSelections().map((function(t){var n=t.endLineNumber;return t.startLineNumber<t.endLineNumber&&t.endColumn===1&&(n-=1),{startLineNumber:t.startLineNumber,selectionStartColumn:t.selectionStartColumn,endLineNumber:n,positionColumn:t.positionColumn}}));n.sort((function(t,n){return t.startLineNumber===n.startLineNumber?t.endLineNumber-n.endLineNumber:t.startLineNumber-n.startLineNumber}));var i=[];var r=n[0];for(var e=1;e<n.length;e++)r.endLineNumber+1>=n[e].startLineNumber?r.endLineNumber=n[e].endLineNumber:(i.push(r),r=n[e]);return i.push(r),i};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.indentLines",label:ht(0,"Indent Line"),alias:"Indent Line",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:2142,weight:100}})||this}n.prototype.run=function(t,n){var i=n._getViewModel();i&&(n.pushUndoStop(),n.executeCommands(this.id,HC.indent(i.cursorConfig,n.getModel(),n.getSelections())),n.pushUndoStop())};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.outdentLines",label:ht(0,"Outdent Line"),alias:"Outdent Line",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:2140,weight:100}})||this}n.prototype.run=function(t,n){rS.Outdent.runEditorCommand(t,n,null)};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.insertLineBefore",label:ht(0,"Insert Line Above"),alias:"Insert Line Above",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:3075,weight:100}})||this}n.prototype.run=function(t,n){var i=n._getViewModel();i&&(n.pushUndoStop(),n.executeCommands(this.id,HC.lineInsertBefore(i.cursorConfig,n.getModel(),n.getSelections())))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.insertLineAfter",label:ht(0,"Insert Line Below"),alias:"Insert Line Below",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:2051,weight:100}})||this}n.prototype.run=function(t,n){var i=n._getViewModel();i&&(n.pushUndoStop(),n.executeCommands(this.id,HC.lineInsertAfter(i.cursorConfig,n.getModel(),n.getSelections())))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"deleteAllLeft",label:ht(0,"Delete All Left"),alias:"Delete All Left",precondition:$C.writable,kbOpts:{kbExpr:$C.textInputFocus,primary:0,mac:{primary:2049},weight:100}})||this}n.prototype._getEndCursorState=function(t,n){var i=null;var r=[];var e=0;return n.forEach((function(n){var o;if(n.endColumn===1&&e>0){var s=n.startLineNumber-e;o=new Br(s,n.startColumn,s,n.startColumn)}else o=new Br(n.startLineNumber,n.startColumn,n.startLineNumber,n.startColumn);e+=n.endLineNumber-n.startLineNumber,n.intersectRanges(t)?i=o:r.push(o)})),i&&r.unshift(i),r};n.prototype._getRangesToDelete=function(t){var n=t.getSelections();if(n===null)return[];var i=n;var r=t.getModel();return r===null?[]:(i.sort(Ir.compareRangesUsingStarts),i=i.map((function(t){if(t.isEmpty()){if(t.startColumn===1){var n=Math.max(1,t.startLineNumber-1),i=t.startLineNumber===1?1:r.getLineLength(n)+1;return new Ir(n,i,t.startLineNumber,1)}return new Ir(t.startLineNumber,1,t.startLineNumber,t.startColumn)}return new Ir(t.startLineNumber,1,t.endLineNumber,t.endColumn)})),i)};return n}(Nrt)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"deleteAllRight",label:ht(0,"Delete All Right"),alias:"Delete All Right",precondition:$C.writable,kbOpts:{kbExpr:$C.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})||this}n.prototype._getEndCursorState=function(t,n){var i=null;var r=[];for(var e=0,o=n.length,s=0;e<o;e++){var u=n[e],a=new Br(u.startLineNumber-s,u.startColumn,u.startLineNumber-s,u.startColumn);u.intersectRanges(t)?i=a:r.push(a)}return i&&r.unshift(i),r};n.prototype._getRangesToDelete=function(t){var n=t.getModel();if(n===null)return[];var i=t.getSelections();if(i===null)return[];var r=i.map((function(t){if(t.isEmpty()){var i=n.getLineMaxColumn(t.startLineNumber);return t.startColumn===i?new Ir(t.startLineNumber,t.startColumn,t.startLineNumber+1,1):new Ir(t.startLineNumber,t.startColumn,t.startLineNumber,i)}return t}));return r.sort(Ir.compareRangesUsingStarts),r};return n}(Nrt)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.joinLines",label:ht(0,"Join Lines"),alias:"Join Lines",precondition:$C.writable,kbOpts:{kbExpr:$C.editorTextFocus,primary:0,mac:{primary:296},weight:100}})||this}n.prototype.run=function(t,n){var i=n.getSelections();if(i===null)return;var r=n.getSelection();if(r===null)return;i.sort(Ir.compareRangesUsingStarts);var e=[],o=i.reduce((function(t,n){return t.isEmpty()?t.endLineNumber===n.startLineNumber?(r.equalsSelection(t)&&(r=n),n):n.startLineNumber>t.endLineNumber+1?(e.push(t),n):new Br(t.startLineNumber,t.startColumn,n.endLineNumber,n.endColumn):n.startLineNumber>t.endLineNumber?(e.push(t),n):new Br(t.startLineNumber,t.startColumn,n.endLineNumber,n.endColumn)}));e.push(o);var s=n.getModel();if(s===null)return;var u=[],a=[];var h=r,c=0;for(var f=0,l=e.length;f<l;f++){var v=e[f],d=v.startLineNumber,g=1;var p=void 0,w=void 0,m=0;var b=s.getLineLength(v.endLineNumber)-v.endColumn;if(v.isEmpty()||v.startLineNumber===v.endLineNumber){var y=v.getStartPosition();y.lineNumber<s.getLineCount()?(p=d+1,w=s.getLineMaxColumn(p)):(p=y.lineNumber,w=s.getLineMaxColumn(y.lineNumber))}else p=v.endLineNumber,w=s.getLineMaxColumn(p);var _=s.getLineContent(d);for(var y=d+1;y<=p;y++){var k=s.getLineContent(y),x=s.getLineFirstNonWhitespaceColumn(y);if(x>=1){var C=!0;_===""&&(C=!1),!C||_.charAt(_.length-1)!==" "&&_.charAt(_.length-1)!=="\t"||(C=!1,_=_.replace(/[\s\uFEFF\xA0]+$/g," "));var S=k.substr(x-1);_+=(C?" ":"")+S,m=C?S.length+1:S.length}else m=0}var D=new Ir(d,g,p,w);if(!D.isEmpty()){var y=void 0;v.isEmpty()?(u.push(hB.replace(D,_)),y=new Br(D.startLineNumber-c,_.length-m+1,d-c,_.length-m+1)):v.startLineNumber===v.endLineNumber?(u.push(hB.replace(D,_)),y=new Br(v.startLineNumber-c,v.startColumn,v.endLineNumber-c,v.endColumn)):(u.push(hB.replace(D,_)),y=new Br(v.startLineNumber-c,v.startColumn,v.startLineNumber-c,_.length-b)),Ir.intersectRanges(D,r)!==null?h=y:a.push(y)}c+=D.endLineNumber-D.startLineNumber}a.unshift(h),n.pushUndoStop(),n.executeEdits(this.id,u,a),n.pushUndoStop()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.transpose",label:ht(0,"Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:$C.writable})||this}n.prototype.run=function(t,n){var i=n.getSelections();if(i===null)return;var r=n.getModel();if(r===null)return;var e=[];for(var o=0,s=i.length;o<s;o++){var u=i[o];if(!u.isEmpty())continue;var a=u.getStartPosition(),h=r.getLineMaxColumn(a.lineNumber);if(a.column>=h){if(a.lineNumber===r.getLineCount())continue;var c=new Ir(a.lineNumber,Math.max(1,a.column-1),a.lineNumber+1,1),f=r.getValueInRange(c).split("").reverse().join("");e.push(new pC(new Br(a.lineNumber,Math.max(1,a.column-1),a.lineNumber+1,1),f))}else{var c=new Ir(a.lineNumber,Math.max(1,a.column-1),a.lineNumber,a.column+1),f=r.getValueInRange(c).split("").reverse().join("");e.push(new yC(c,f,new Br(a.lineNumber,a.column+1,a.lineNumber,a.column+1)))}}n.pushUndoStop(),n.executeCommands(this.id,e),n.pushUndoStop()};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.transformToUppercase",label:ht(0,"Transform to Uppercase"),alias:"Transform to Uppercase",precondition:$C.writable})||this}n.prototype._modifyText=function(t,n){return t.toLocaleUpperCase()};return n}(Prt)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.transformToLowercase",label:ht(0,"Transform to Lowercase"),alias:"Transform to Lowercase",precondition:$C.writable})||this}n.prototype._modifyText=function(t,n){return t.toLocaleLowerCase()};return n}(Prt)),zrt.caseBoundary.isSupported()&&zrt.singleLetters.isSupported()&&Bf(zrt),Urt.wordBoundary.isSupported()&&Bf(Urt),Krt.wordBoundary.isSupported()&&Bf(Krt),Hrt.titleBoundary.isSupported()&&Bf(Hrt),Vrt.isSupported()&&Bf(Vrt);var qrt,Grt=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},$rt=function(t,n){return function(i,r){n(i,r,t)}};var Jrt=new qc("LinkedEditingInputVisible",!1);var Zrt=qrt=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s.languageConfigurationService=e,s._syncRangesToken=0,s._localToDispose=s._register(new hi),s._editor=n,s._providers=r.linkedEditingRangeProvider,s._enabled=!1,s._visibleContextKey=Jrt.bindTo(i),s._debounceInformation=o.for(s._providers,"Linked Editing",{max:200}),s._currentDecorations=s._editor.createDecorationsCollection(),s._languageWordPattern=null,s._currentWordPattern=null,s._ignoreChangeEvent=!1,s._localToDispose=s._register(new hi),s._rangeUpdateTriggerPromise=null,s._rangeSyncTriggerPromise=null,s._currentRequestCts=null,s._currentRequestPosition=null,s._currentRequestModelVersion=null,s._register(s._editor.onDidChangeModel((function(){return s.reinitialize(!0)}))),s._register(s._editor.onDidChangeConfiguration((function(t){(t.hasChanged(70)||t.hasChanged(93))&&s.reinitialize(!1)}))),s._register(s._providers.onDidChange((function(){return s.reinitialize(!1)}))),s._register(s._editor.onDidChangeModelLanguage((function(){return s.reinitialize(!0)}))),s.reinitialize(!0);return s}n.get=function(t){return t.getContribution(qrt.ID)};n.prototype.reinitialize=function(t){var n=this;var i=this._editor.getModel(),r=i!==null&&(this._editor.getOption(70)||this._editor.getOption(93))&&this._providers.has(i);if(r===this._enabled&&!t||(this._enabled=r,this.clearRanges(),this._localToDispose.clear(),!r||i===null))return;this._localToDispose.add(wi.runAndSubscribe(i.onDidChangeLanguageConfiguration,(function(){n._languageWordPattern=n.languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition()})));var e=new Os(this._debounceInformation.get(i)),o=function(){var t;n._rangeUpdateTriggerPromise=e.trigger((function(){return n.updateRanges()}),(t=n._debounceDuration)!==null&&t!==void 0?t:n._debounceInformation.get(i))},s=new Os(0),u=function(t){n._rangeSyncTriggerPromise=s.trigger((function(){return n._syncRanges(t)}))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((function(){o()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((function(t){if(!n._ignoreChangeEvent&&n._currentDecorations.length>0){var i=n._currentDecorations.getRange(0);if(i&&t.changes.every((function(t){return i.intersectRanges(t.range)})))return void u(n._syncRangesToken)}o()}))),this._localToDispose.add({dispose:function(){e.dispose(),s.dispose()}}),this.updateRanges()};n.prototype._syncRanges=function(t){if(!this._editor.hasModel()||t!==this._syncRangesToken||this._currentDecorations.length===0)return;var n=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();var r=n.getValueInRange(i);if(this._currentWordPattern){var e=r.match(this._currentWordPattern);if((e?e[0].length:0)!==r.length)return this.clearRanges()}var o=[];for(var e=1,s=this._currentDecorations.length;e<s;e++){var u=this._currentDecorations.getRange(e);if(u)if(u.startLineNumber!==u.endLineNumber)o.push({range:u,text:r});else{var a=n.getValueInRange(u),h=r,c=u.startColumn,f=u.endColumn;var l=Do(a,h);c+=l,a=a.substr(l),h=h.substr(l);var v=Ao(a,h);f-=v,a=a.substr(0,a.length-v),h=h.substr(0,h.length-v),c===f&&h.length===0||o.push({range:new Ir(u.startLineNumber,c,u.endLineNumber,f),text:h})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;var e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}};n.prototype.dispose=function(){this.clearRanges(),t.prototype.dispose.call(this)};n.prototype.clearRanges=function(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)};n.prototype.updateRanges=function(){return __awaiter(this,arguments,void 0,(function(t){var n,i,r,e,o,e,s,u,a,h,c,f,l,v;if(t===void 0){t=!1}return __generator(this,(function(d){switch(d.label){case 0:if(!this._editor.hasModel())return[2,void this.clearRanges()];n=this._editor.getPosition();if(!this._enabled&&!t||this._editor.getSelections().length>1)return[2,void this.clearRanges()];i=this._editor.getModel(),r=i.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===r){if(n.equals(this._currentRequestPosition))return[2];if(this._currentDecorations.length>0){e=this._currentDecorations.getRange(0);if(e&&e.containsPosition(n))return[2]}}this.clearRanges(),this._currentRequestPosition=n,this._currentRequestModelVersion=r;o=this._currentRequestCts=new ji;d.label=1;case 1:d.trys.push([1,3,,4]);e=new pi(!1);return[4,Qrt(this._providers,i,n,o.token)];case 2:s=d.sent();if(this._debounceInformation.update(i,e.elapsed()),o!==this._currentRequestCts||(this._currentRequestCts=null,r!==i.getVersionId()))return[2];u=[];s!=null&&s.ranges&&(u=s.ranges),this._currentWordPattern=(s==null?void 0:s.wordPattern)||this._languageWordPattern;a=!1;for(h=0,c=u.length;h<c;h++)if(Ir.containsPosition(u[h],n)){if(a=!0,h!==0){f=u[h];u.splice(h,1),u.unshift(f)}break}if(!a)return[2,void this.clearRanges()];l=u.map((function(t){return{range:t,options:qrt.DECORATION}}));this._visibleContextKey.set(!0),this._currentDecorations.set(l),this._syncRangesToken++;return[3,4];case 3:v=d.sent();Qn(v)||Gn(v),this._currentRequestCts!==o&&this._currentRequestCts||this.clearRanges();return[3,4];case 4:return[2]}}))}))};return n}(ci);Zrt.ID="editor.contrib.linkedEditing",Zrt.DECORATION=PM.register({description:"linked-editing",stickiness:0,className:"linked-editing-decoration"}),Zrt=qrt=Grt([$rt(1,Gc),$rt(2,tp),$rt(3,xv),$rt(4,Cj)],Zrt);function Qrt(t,n,i,r){var e=this;return Ls(t.ordered(n).map((function(t){return function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(o){switch(o.label){case 0:o.trys.push([0,2,,3]);return[4,t.provideLinkedEditingRanges(n,i,r)];case 1:return[2,o.sent()];case 2:e=o.sent();return[2,void $n(e)];case 3:return[2]}}))}))}})),(function(t){return!!t&&k(t==null?void 0:t.ranges)}))}If(new(Ff.bindToContribution(Zrt.get))({id:"cancelLinkedEditingInput",precondition:Jrt,handler:function(t){return t.clearRanges()},kbOpts:{kbExpr:$C.editorTextFocus,weight:199,primary:9,secondary:[1033]}})),Jw("editor.linkedEditingBackground",{dark:Ig.fromHex("#f00").transparent(.3),light:Ig.fromHex("#f00").transparent(.3),hcDark:Ig.fromHex("#f00").transparent(.3),hcLight:Ig.white},ht(0,"Background color when the editor auto renames on type.")),Tf("_executeLinkedEditingProvider",(function(t,n,i){var r=t.get(tp).linkedEditingRangeProvider;return Qrt(r,n,i,Fi.None)})),Pf(Zrt.ID,Zrt,1),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.linkedEditing",label:ht(0,"Start Linked Editing"),alias:"Start Linked Editing",precondition:Dc.and($C.writable,$C.hasRenameProvider),kbOpts:{kbExpr:$C.editorTextFocus,primary:3132,weight:100}})||this}n.prototype.runCommand=function(n,i){var r=this;var e=n.get(Qh),o=Array.isArray(i)&&i||[void 0,void 0],s=o[0],u=o[1];return Cr.isUri(s)&&Tr.isIPosition(u)?e.openCodeEditor({resource:s},e.getActiveCodeEditor()).then((function(t){t&&(t.setPosition(u),t.invokeWithinContext((function(n){return r.reportTelemetry(n,t),r.run(n,t)})))}),Gn):t.prototype.runCommand.call(this,n,i)};n.prototype.run=function(t,n){var i=Zrt.get(n);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()};return n}(Lf));var Yrt=function(){function t(t,n){this._link=t,this._provider=n}t.prototype.toJSON=function(){return{range:this.range,url:this.url,tooltip:this.tooltip}};Object.defineProperty(t.prototype,"range",{get:function(){return this._link.range},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"url",{get:function(){return this._link.url},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"tooltip",{get:function(){return this._link.tooltip},enumerable:false,configurable:true});t.prototype.resolve=function(t){return __awaiter(this,void 0,void 0,(function(){var n=this;return __generator(this,(function(i){return[2,this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,t)).then((function(i){return n._link=i||n._link,n._link.url?n.resolve(t):Promise.reject(new Error("missing"))})):Promise.reject(new Error("missing"))]}))}))};return t}();var Xrt=function(){function t(n){this._disposables=new hi;var i=[];var r=function(n,r){var o=n.links.map((function(t){return new Yrt(t,r)}));i=t._union(i,o),oi(n)&&e._disposables.add(n)};var e=this;for(var o=0,s=n;o<s.length;o++){var u=s[o],a=u[0],h=u[1];r(a,h)}this.links=i}t.prototype.dispose=function(){this._disposables.dispose(),this.links.length=0};t._union=function(t,n){var i=[];var r,e,o,s;for(r=0,o=0,e=t.length,s=n.length;r<e&&o<s;){var u=t[r],a=n[o];if(Ir.areIntersectingOrTouching(u.range,a.range)){r++;continue}Ir.compareRangesUsingStarts(u.range,a.range)<0?(i.push(u),r++):(i.push(a),o++)}for(;r<e;r++)i.push(t[r]);for(;o<s;o++)i.push(n[o]);return i};return t}();function tet(t,n,i){var r=[],e=t.ordered(n).reverse().map((function(t,e){return Promise.resolve(t.provideLinks(n,i)).then((function(n){n&&(r[e]=[n,t])}),$n)}));return Promise.all(e).then((function(){var t=new Xrt(b(r));return i.isCancellationRequested?(t.dispose(),new Xrt([])):t}))}hc.registerCommand("_executeLinkProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(a,void 0,void 0,(function(){var i,r,e,o,s,u,a;return __generator(this,(function(h){switch(h.label){case 0:i=n[0],r=n[1];Z(i instanceof Cr),typeof r!="number"&&(r=0);e=t.get(tp).linkProvider,o=t.get(Yh).getModel(i);if(!o)return[2,[]];return[4,tet(e,o,Fi.None)];case 1:s=h.sent();if(!s)return[2,[]];u=0;h.label=2;case 2:if(!(u<Math.min(r,s.links.length)))return[3,5];return[4,s.links[u].resolve(Fi.None)];case 3:h.sent();h.label=4;case 4:u++;return[3,2];case 5:a=s.links.slice(0);return[2,(s.dispose(),a)]}}))}))}));var net,iet=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},ret=function(t,n){return function(i,r){n(i,r,t)}};var eet=net=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s.editor=n,s.openerService=i,s.notificationService=r,s.languageFeaturesService=e,s.providers=s.languageFeaturesService.linkProvider,s.debounceInformation=o.for(s.providers,"Links",{min:1e3,max:4e3}),s.computeLinks=s._register(new Ts((function(){return s.computeLinksNow()}),1e3)),s.computePromise=null,s.activeLinksList=null,s.currentOccurrences={},s.activeLinkDecorationId=null;var u=s._register(new S4(n));s._register(u.onMouseMoveOrRelevantKeyDown((function(t){var n=t[0],i=t[1];s._onEditorMouseMove(n,i)}))),s._register(u.onExecute((function(t){s.onEditorMouseUp(t)}))),s._register(u.onCancel((function(t){s.cleanUpActiveLinkDecoration()}))),s._register(n.onDidChangeConfiguration((function(t){t.hasChanged(71)&&(s.updateDecorations([]),s.stop(),s.computeLinks.schedule(0))}))),s._register(n.onDidChangeModelContent((function(t){s.editor.hasModel()&&s.computeLinks.schedule(s.debounceInformation.get(s.editor.getModel()))}))),s._register(n.onDidChangeModel((function(t){s.currentOccurrences={},s.activeLinkDecorationId=null,s.stop(),s.computeLinks.schedule(0)}))),s._register(n.onDidChangeModelLanguage((function(t){s.stop(),s.computeLinks.schedule(0)}))),s._register(s.providers.onDidChange((function(t){s.stop(),s.computeLinks.schedule(0)}))),s.computeLinks.schedule(0);return s}n.get=function(t){return t.getContribution(net.ID)};n.prototype.computeLinksNow=function(){return __awaiter(this,void 0,void 0,(function(){var t,n,i,r;var e=this;return __generator(this,(function(o){switch(o.label){case 0:if(!this.editor.hasModel()||!this.editor.getOption(71))return[2];t=this.editor.getModel();if(!(!t.isTooLargeForSyncing()&&this.providers.has(t)))return[3,5];this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=Ss((function(n){return tet(e.providers,t,n)}));o.label=1;case 1:o.trys.push([1,3,4,5]);n=new pi(!1);i=this;return[4,this.computePromise];case 2:if(i.activeLinksList=o.sent(),this.debounceInformation.update(t,n.elapsed()),t.isDisposed())return[2];this.updateDecorations(this.activeLinksList.links);return[3,5];case 3:r=o.sent();Gn(r);return[3,5];case 4:this.computePromise=null;return[7];case 5:return[2]}}))}))};n.prototype.updateDecorations=function(t){var n=this;var i=this.editor.getOption(78)==="altKey",r=[],e=Object.keys(this.currentOccurrences);for(var o=0,s=e;o<s.length;o++){var u=s[o];var a=this.currentOccurrences[u];r.push(a.decorationId)}var h=[];if(t)for(var c=0,f=t;c<f.length;c++){var u=f[c];h.push(uet.decoration(u,i))}this.editor.changeDecorations((function(i){var e=i.deltaDecorations(r,h);n.currentOccurrences={},n.activeLinkDecorationId=null;for(var o=0,s=e.length;o<s;o++){var u=new uet(t[o],e[o]);n.currentOccurrences[u.decorationId]=u}}))};n.prototype._onEditorMouseMove=function(t,n){var i=this;var r=this.editor.getOption(78)==="altKey";if(this.isEnabled(t,n)){this.cleanUpActiveLinkDecoration();var e=this.getLinkOccurrence(t.target.position);e&&this.editor.changeDecorations((function(t){e.activate(t,r),i.activeLinkDecorationId=e.decorationId}))}else this.cleanUpActiveLinkDecoration()};n.prototype.cleanUpActiveLinkDecoration=function(){var t=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){var n=this.currentOccurrences[this.activeLinkDecorationId];n&&this.editor.changeDecorations((function(i){n.deactivate(i,t)})),this.activeLinkDecorationId=null}};n.prototype.onEditorMouseUp=function(t){if(!this.isEnabled(t))return;var n=this.getLinkOccurrence(t.target.position);n&&this.openLinkOccurrence(n,t.hasSideBySideModifier,!0)};n.prototype.openLinkOccurrence=function(t,n,i){var r=this;if(i===void 0){i=!1}if(!this.openerService)return;var e=t.link;e.resolve(Fi.None).then((function(t){if(typeof t=="string"&&r.editor.hasModel()){var e=r.editor.getModel().uri;if(e.scheme===Uu.file&&t.startsWith("".concat(Uu.file,":"))){var o=Cr.parse(t);if(o.scheme===Uu.file){var s=RO(o);var u=null;s.startsWith("/./")||s.startsWith("\\.\\")?u=".".concat(s.substr(1)):(s.startsWith("//./")||s.startsWith("\\\\.\\"))&&(u=".".concat(s.substr(2))),u&&(t=HO(e,u))}}}return r.openerService.open(t,{openToSide:n,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})}),(function(t){var n=t instanceof Error?t.message:t;n==="invalid"?r.notificationService.warn(ht(0,"Failed to open this link because it is not well-formed: {0}",e.url.toString())):n==="missing"?r.notificationService.warn(ht(0,"Failed to open this link because its target is missing.")):Gn(t)}))};n.prototype.getLinkOccurrence=function(t){if(!this.editor.hasModel()||!t)return null;var n=this.editor.getModel().getDecorationsInRange({startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:t.lineNumber,endColumn:t.column},0,!0);for(var i=0,r=n;i<r.length;i++){var e=r[i];var o=this.currentOccurrences[e.id];if(o)return o}return null};n.prototype.isEnabled=function(t,n){return!!(t.target.type===6&&(t.hasTriggerModifier||n&&n.keyCodeIsTriggerKey))};n.prototype.stop=function(){var t;this.computeLinks.cancel(),this.activeLinksList&&((t=this.activeLinksList)===null||t===void 0||t.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)};n.prototype.dispose=function(){t.prototype.dispose.call(this),this.stop()};return n}(ci);eet.ID="editor.linkDetector",eet=net=iet([ret(1,DR),ret(2,EL),ret(3,tp),ret(4,Cj)],eet);var oet=PM.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),set=PM.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"});var uet=function(){function t(t,n){this.link=t,this.decorationId=n}t.decoration=function(n,i){return{range:n.range,options:t._getOptions(n,i,!1)}};t._getOptions=function(t,n,i){var r=__assign({},i?set:oet);return r.hoverMessage=function(t,n){var i=t.url&&/^command:/i.test(t.url.toString()),r=t.tooltip?t.tooltip:ht(0,i?"Execute command":"Follow link"),e=ht(0,n?Ft?"cmd + click":"ctrl + click":Ft?"option + click":"alt + click");if(t.url){var o="";if(/^command:/i.test(t.url.toString())){var s=t.url.toString().match(/^command:([^?#]+)/);s&&(o=ht(0,"Execute command {0}",s[1]))}return new VT("",!0).appendLink(t.url.toString(!0).replace(/ /g,"%20"),r,o).appendMarkdown(" (".concat(e,")"))}return(new VT).appendText("".concat(r," (").concat(e,")"))}(t,n),r};t.prototype.activate=function(n,i){n.changeDecorationOptions(this.decorationId,t._getOptions(this.link,i,!0))};t.prototype.deactivate=function(n,i){n.changeDecorationOptions(this.decorationId,t._getOptions(this.link,i,!1))};return t}();Pf(eet.ID,eet,1),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.openLink",label:ht(0,"Open Link"),alias:"Open Link",precondition:void 0})||this}n.prototype.run=function(t,n){var i=eet.get(n);if(!i||!n.hasModel())return;var r=n.getSelections();for(var e=0,o=r;e<o.length;e++){var s=o[e];var u=i.getLinkOccurrence(s.getEndPosition());u&&i.openLinkOccurrence(u,!1)}};return n}(Lf));var aet=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._editor=n,i._register(i._editor.onMouseDown((function(t){var n=i._editor.getOption(117);n>=0&&t.target.type===6&&t.target.position.column>=n&&i._editor.updateOptions({stopRenderingLineAfter:-1})})));return i}return n}(ci);aet.ID="editor.contrib.longLinesHelper",Pf(aet.ID,aet,2);var het=Jw("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},ht(0,"Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);Jw("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},ht(0,"Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),Jw("editor.wordHighlightTextBackground",{light:het,dark:het,hcDark:het,hcLight:het},ht(0,"Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);var cet=Jw("editor.wordHighlightBorder",{light:null,dark:null,hcDark:hm,hcLight:hm},ht(0,"Border color of a symbol during read-access, like reading a variable."));Jw("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:hm,hcLight:hm},ht(0,"Border color of a symbol during write-access, like writing to a variable.")),Jw("editor.wordHighlightTextBorder",{light:cet,dark:cet,hcDark:cet,hcLight:cet},ht(0,"Border color of a textual occurrence for a symbol."));var fet=Jw("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},ht(0,"Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),vet=Jw("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hcDark:"#C0A0C0CC",hcLight:"#C0A0C0CC"},ht(0,"Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),det=Jw("editorOverviewRuler.wordHighlightTextForeground",{dark:pb,light:pb,hcDark:pb,hcLight:pb},ht(0,"Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),get=PM.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:Uk(vet),position:vd.Center},minimap:{color:Uk(_b),position:1}}),pet=PM.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:Uk(det),position:vd.Center},minimap:{color:Uk(_b),position:1}}),wet=PM.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:Uk(pb),position:vd.Center},minimap:{color:Uk(_b),position:1}}),met=PM.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),bet=PM.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:Uk(fet),position:vd.Center},minimap:{color:Uk(_b),position:1}});function yet(t){return t?met:wet}Gk((function(t,n){var i=t.getColor(Tm);i&&n.addRule(".monaco-editor .selectionHighlight { background-color: ".concat(i.transparent(.5),"; }"))}));var _et,ket=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},xet=function(t,n){return function(i,r){n(i,r,t)}};function Cet(t,n){var i=n.filter((function(n){return!t.find((function(t){return t.equals(n)}))}));if(i.length>=1){var r=i.map((function(t){return"line ".concat(t.viewState.position.lineNumber," column ").concat(t.viewState.position.column)})).join(", ");_w(i.length===1?ht(0,"Cursor added: {0}",r):ht(0,"Cursors added: {0}",r))}}var Det=function(){function t(t,n,i){this.selections=t,this.revealRange=n,this.revealScrollType=i}return t}();var Aet=function(){function t(t,n,i,r,e,o,s){this._editor=t,this.findController=n,this.isDisconnectedFromFindController=i,this.searchText=r,this.wholeWord=e,this.matchCase=o,this.currentMatch=s}t.create=function(n,i){if(!n.hasModel())return null;var r=i.getState();if(!n.hasTextFocus()&&r.isRevealed&&r.searchString.length>0)return new t(n,i,!1,r.searchString,r.wholeWord,r.matchCase,null);var e,o,s=!1;var u=n.getSelections();u.length===1&&u[0].isEmpty()?(s=!0,e=!0,o=!0):(e=r.wholeWord,o=r.matchCase);var a=n.getSelection();var h,c=null;if(a.isEmpty()){var f=n.getConfiguredWordAtPosition(a.getStartPosition());if(!f)return null;h=f.word,c=new Br(a.startLineNumber,f.startColumn,a.startLineNumber,f.endColumn)}else h=n.getModel().getValueInRange(a).replace(/\r\n/g,"\n");return new t(n,i,s,h,e,o,c)};t.prototype.addSelectionToNextFindMatch=function(){if(!this._editor.hasModel())return null;var t=this._getNextMatch();if(!t)return null;var n=this._editor.getSelections();return new Det(n.concat(t),t,0)};t.prototype.moveSelectionToNextFindMatch=function(){if(!this._editor.hasModel())return null;var t=this._getNextMatch();if(!t)return null;var n=this._editor.getSelections();return new Det(n.slice(0,n.length-1).concat(t),t,0)};t.prototype._getNextMatch=function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var t=this.currentMatch;return this.currentMatch=null,t}this.findController.highlightFindOptions();var n=this._editor.getSelections(),i=n[n.length-1],r=this._editor.getModel().findNextMatch(this.searchText,i.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return r?new Br(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn):null};t.prototype.addSelectionToPreviousFindMatch=function(){if(!this._editor.hasModel())return null;var t=this._getPreviousMatch();if(!t)return null;var n=this._editor.getSelections();return new Det(n.concat(t),t,0)};t.prototype.moveSelectionToPreviousFindMatch=function(){if(!this._editor.hasModel())return null;var t=this._getPreviousMatch();if(!t)return null;var n=this._editor.getSelections();return new Det(n.slice(0,n.length-1).concat(t),t,0)};t.prototype._getPreviousMatch=function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var t=this.currentMatch;return this.currentMatch=null,t}this.findController.highlightFindOptions();var n=this._editor.getSelections(),i=n[n.length-1],r=this._editor.getModel().findPreviousMatch(this.searchText,i.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return r?new Br(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn):null};t.prototype.selectAll=function(t){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();var n=this._editor.getModel();return t?n.findMatches(this.searchText,t,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824):n.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824)};return t}();var Oet=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._sessionDispose=i._register(new hi),i._editor=n,i._ignoreSelectionChange=!1,i._session=null;return i}n.get=function(t){return t.getContribution(n.ID)};n.prototype.dispose=function(){this._endSession(),t.prototype.dispose.call(this)};n.prototype._beginSessionIfNeeded=function(t){var n=this;if(!this._session){var i=Aet.create(this._editor,t);if(!i)return;this._session=i;var r={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(r.wholeWordOverride=1,r.matchCaseOverride=1,r.isRegexOverride=2),t.getState().change(r,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((function(t){n._ignoreSelectionChange||n._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((function(){n._endSession()}))),this._sessionDispose.add(t.getState().onFindReplaceStateChange((function(t){(t.matchCase||t.wholeWord)&&n._endSession()})))}};n.prototype._endSession=function(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){var t={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(t,!1)}this._session=null};n.prototype._setSelections=function(t){this._ignoreSelectionChange=!0,this._editor.setSelections(t),this._ignoreSelectionChange=!1};n.prototype._expandEmptyToWord=function(t,n){if(!n.isEmpty())return n;var i=this._editor.getConfiguredWordAtPosition(n.getStartPosition());return i?new Br(n.startLineNumber,i.startColumn,n.startLineNumber,i.endColumn):n};n.prototype._applySessionResult=function(t){t&&(this._setSelections(t.selections),t.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(t.revealRange,t.revealScrollType))};n.prototype.getSession=function(t){return this._session};n.prototype.addSelectionToNextFindMatch=function(t){if(this._editor.hasModel()){if(!this._session){var n=this._editor.getSelections();if(n.length>1){var i=t.getState().matchCase;if(!Let(this._editor.getModel(),n,i)){var r=this._editor.getModel(),e=[];for(var o=0,s=n.length;o<s;o++)e[o]=this._expandEmptyToWord(r,n[o]);return void this._editor.setSelections(e)}}}this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}};n.prototype.addSelectionToPreviousFindMatch=function(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())};n.prototype.moveSelectionToNextFindMatch=function(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())};n.prototype.moveSelectionToPreviousFindMatch=function(t){this._beginSessionIfNeeded(t),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())};n.prototype.selectAll=function(t){if(!this._editor.hasModel())return;var n=null;var i=t.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){var r=this._editor.getModel();n=i.searchScope?r.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(131):null,!1,1073741824):r.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(131):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(t),!this._session)return;n=this._session.selectAll(i.searchScope)}if(n.length>0){var r=this._editor.getSelection();for(var e=0,o=n.length;e<o;e++){var s=n[e];if(s.range.intersectRanges(r)){n[e]=n[0],n[0]=s;break}}this._setSelections(n.map((function(t){return new Br(t.range.startLineNumber,t.range.startColumn,t.range.endLineNumber,t.range.endColumn)})))}};return n}(ci);Oet.ID="editor.contrib.multiCursorController";var Eet=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.run=function(t,n){var i=Oet.get(n);if(!i)return;var r=n._getViewModel();if(r){var e=r.getCursorStates(),o=G9.get(n);if(o)this._run(i,o);else{var s=t.get(Jh).createInstance(G9,n);this._run(i,s),s.dispose()}Cet(e,r.getCursorStates())}};return n}(Lf);var Met=function(){function t(t,n,i,r,e){this._model=t,this._searchText=n,this._matchCase=i,this._wordSeparators=r,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,e&&this._model===e._model&&this._searchText===e._searchText&&this._matchCase===e._matchCase&&this._wordSeparators===e._wordSeparators&&this._modelVersionId===e._modelVersionId&&(this._cachedFindMatches=e._cachedFindMatches)}t.prototype.findMatches=function(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((function(t){return t.range})),this._cachedFindMatches.sort(Ir.compareRangesUsingStarts)),this._cachedFindMatches};return t}();var Fet=_et=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._languageFeaturesService=i,r.editor=n,r._isEnabled=n.getOption(108),r._decorations=n.createDecorationsCollection(),r.updateSoon=r._register(new Ts((function(){return r._update()}),300)),r.state=null,r._register(n.onDidChangeConfiguration((function(t){r._isEnabled=n.getOption(108)}))),r._register(n.onDidChangeCursorSelection((function(t){r._isEnabled&&(t.selection.isEmpty()?t.reason===3?(r.state&&r._setState(null),r.updateSoon.schedule()):r._setState(null):r._update())}))),r._register(n.onDidChangeModel((function(t){r._setState(null)}))),r._register(n.onDidChangeModelContent((function(t){r._isEnabled&&r.updateSoon.schedule()})));var e=G9.get(n);e&&r._register(e.getState().onFindReplaceStateChange((function(t){r._update()}))),r.updateSoon.schedule();return r}n.prototype._update=function(){this._setState(n._createState(this.state,this._isEnabled,this.editor))};n._createState=function(t,n,i){if(!n||!i.hasModel())return null;var r=i.getSelection();if(r.startLineNumber!==r.endLineNumber)return null;var e=Oet.get(i);if(!e)return null;var o=G9.get(i);if(!o)return null;var s=e.getSession(o);if(!s){var u=i.getSelections();if(u.length>1){var a=o.getState().matchCase;if(!Let(i.getModel(),u,a))return null}s=Aet.create(i,o)}if(!s||s.currentMatch||/^[ \t]+$/.test(s.searchText)||s.searchText.length>200)return null;var h=o.getState(),c=h.matchCase;if(h.isRevealed){var u=h.searchString;c||(u=u.toLowerCase());var a=s.searchText;if(c||(a=a.toLowerCase()),u===a&&s.matchCase===h.matchCase&&s.wholeWord===h.wholeWord&&!h.isRegex)return null}return new Met(i.getModel(),s.searchText,s.matchCase,s.wholeWord?i.getOption(131):null,t)};n.prototype._setState=function(t){if(this.state=t,!this.state)return void this._decorations.clear();if(!this.editor.hasModel())return;var n=this.editor.getModel();if(n.isTooLargeForTokenization())return;var i=this.state.findMatches(),r=this.editor.getSelections();r.sort(Ir.compareRangesUsingStarts);var e=[];for(var o=0,s=0,u=i.length,a=r.length;o<u;){var h=i[o];if(s>=a)e.push(h),o++;else{var c=Ir.compareRangesUsingStarts(h,r[s]);c<0?(!r[s].isEmpty()&&Ir.areIntersecting(h,r[s])||e.push(h),o++):(c>0||o++,s++)}}var f=this.editor.getOption(81)!=="off",l=this._languageFeaturesService.documentHighlightProvider.has(n)&&f,v=e.map((function(t){return{range:t,options:yet(l)}}));this._decorations.set(v)};n.prototype.dispose=function(){this._setState(null),t.prototype.dispose.call(this)};return n}(ci);function Let(t,n,i){var r=jet(t,n[0],!i);for(var e=1,o=n.length;e<o;e++){var s=n[e];if(s.isEmpty()||r!==jet(t,s,!i))return!1}return!0}function jet(t,n,i){var r=t.getValueInRange(n);return i?r.toLowerCase():r}Fet.ID="editor.contrib.selectionHighlighter",Fet=_et=ket([xet(1,tp)],Fet);Pf(Oet.ID,Oet,4),Pf(Fet.ID,Fet,1),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.insertCursorAbove",label:ht(0,"Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:$C.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"3_multi",title:ht(0,"&&Add Cursor Above"),order:2}})||this}n.prototype.run=function(t,n,i){if(!n.hasModel())return;var r=!0;i&&i.logicalLine===!1&&(r=!1);var e=n._getViewModel();if(e.cursorConfig.readOnly)return;e.model.pushStackElement();var o=e.getCursorStates();e.setCursorStates(i.source,3,AC.addCursorUp(e,o,r)),e.revealTopMostCursor(i.source),Cet(o,e.getCursorStates())};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.insertCursorBelow",label:ht(0,"Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:$C.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"3_multi",title:ht(0,"A&&dd Cursor Below"),order:3}})||this}n.prototype.run=function(t,n,i){if(!n.hasModel())return;var r=!0;i&&i.logicalLine===!1&&(r=!1);var e=n._getViewModel();if(e.cursorConfig.readOnly)return;e.model.pushStackElement();var o=e.getCursorStates();e.setCursorStates(i.source,3,AC.addCursorDown(e,o,r)),e.revealBottomMostCursor(i.source),Cet(o,e.getCursorStates())};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.insertCursorAtEndOfEachLineSelected",label:ht(0,"Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:$C.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"3_multi",title:ht(0,"Add C&&ursors to Line Ends"),order:4}})||this}n.prototype.getCursorsForSelection=function(t,n,i){if(!t.isEmpty()){for(var r=t.startLineNumber;r<t.endLineNumber;r++){var e=n.getLineMaxColumn(r);i.push(new Br(r,e,r,e))}t.endColumn>1&&i.push(new Br(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn))}};n.prototype.run=function(t,n){var i=this;if(!n.hasModel())return;var r=n.getModel(),e=n.getSelections(),o=n._getViewModel(),s=o.getCursorStates(),u=[];e.forEach((function(t){return i.getCursorsForSelection(t,r,u)})),u.length>0&&n.setSelections(u),Cet(s,o.getCursorStates())};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.addSelectionToNextFindMatch",label:ht(0,"Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:2082,weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"3_multi",title:ht(0,"Add &&Next Occurrence"),order:5}})||this}n.prototype._run=function(t,n){t.addSelectionToNextFindMatch(n)};return n}(Eet)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.addSelectionToPreviousFindMatch",label:ht(0,"Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:vf.MenubarSelectionMenu,group:"3_multi",title:ht(0,"Add P&&revious Occurrence"),order:6}})||this}n.prototype._run=function(t,n){t.addSelectionToPreviousFindMatch(n)};return n}(Eet)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.moveSelectionToNextFindMatch",label:ht(0,"Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:Ui(2089,2082),weight:100}})||this}n.prototype._run=function(t,n){t.moveSelectionToNextFindMatch(n)};return n}(Eet)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.moveSelectionToPreviousFindMatch",label:ht(0,"Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})||this}n.prototype._run=function(t,n){t.moveSelectionToPreviousFindMatch(n)};return n}(Eet)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.selectHighlights",label:ht(0,"Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:3114,weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"3_multi",title:ht(0,"Select All &&Occurrences"),order:7}})||this}n.prototype._run=function(t,n){t.selectAll(n)};return n}(Eet)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.changeAll",label:ht(0,"Change All Occurrences"),alias:"Change All Occurrences",precondition:Dc.and($C.writable,$C.editorTextFocus),kbOpts:{kbExpr:$C.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})||this}n.prototype._run=function(t,n){t.selectAll(n)};return n}(Eet)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.addCursorsToBottom",label:ht(0,"Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})||this}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=n.getSelections(),r=n.getModel().getLineCount(),e=[];for(var o=i[0].startLineNumber;o<=r;o++)e.push(new Br(o,i[0].startColumn,o,i[0].endColumn));var s=n._getViewModel(),u=s.getCursorStates();e.length>0&&n.setSelections(e),Cet(u,s.getCursorStates())};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.addCursorsToTop",label:ht(0,"Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})||this}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=n.getSelections(),r=[];for(var e=i[0].startLineNumber;e>=1;e--)r.push(new Br(e,i[0].startColumn,e,i[0].endColumn));var o=n._getViewModel(),s=o.getCursorStates();r.length>0&&n.setSelections(r),Cet(s,o.getCursorStates())};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.focusNextCursor",label:ht(0,"Focus Next Cursor"),metadata:{description:ht(0,"Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})||this}n.prototype.run=function(t,n,i){if(!n.hasModel())return;var r=n._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();var e=Array.from(r.getCursorStates()),o=e.shift();o&&(e.push(o),r.setCursorStates(i.source,3,e),r.revealPrimaryCursor(i.source,!0),Cet(e,r.getCursorStates()))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.focusPreviousCursor",label:ht(0,"Focus Previous Cursor"),metadata:{description:ht(0,"Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})||this}n.prototype.run=function(t,n,i){if(!n.hasModel())return;var r=n._getViewModel();if(r.cursorConfig.readOnly)return;r.model.pushStackElement();var e=Array.from(r.getCursorStates()),o=e.pop();o&&(e.unshift(o),r.setCursorStates(i.source,3,e),r.revealPrimaryCursor(i.source,!0),Cet(e,r.getCursorStates()))};return n}(Lf));var Ret=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Tet=function(t,n){return function(i,r){n(i,r,t)}};var Iet="inline-edit";var Bet=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.editor=n,e.model=i,e.languageService=r,e.isDisposed=iP(e,!1),e.currentTextModel=bP(e.editor.onDidChangeModel,(function(){return e.editor.getModel()})),e.uiState=uP(e,(function(t){var n;if(e.isDisposed.read(t))return;var i=e.currentTextModel.read(t);if(i!==e.model.targetTextModel.read(t))return;var r=e.model.ghostText.read(t);if(!r)return;var o=(n=e.model.range)===null||n===void 0?void 0:n.read(t);o&&o.startLineNumber===o.endLineNumber&&o.startColumn===o.endColumn&&(o=void 0);var s=(!o||o.startLineNumber===o.endLineNumber)&&r.parts.length===1&&r.parts[0].lines.length===1,u=r.parts.length===1&&r.parts[0].lines.every((function(t){return t.length===0})),a=[],h=[];function c(t,n){if(h.length>0){var i=h[h.length-1];n&&i.decorations.push(new yp(i.content.length+1,i.content.length+1+t[0].length,n,0)),i.content+=t[0],t=t.slice(1)}for(var r=0,e=t;r<e.length;r++){var i=e[r];h.push({content:i,decorations:n?[new yp(1,i.length+1,n,0)]:[]})}}var f=i.getLineContent(r.lineNumber);var l,v=0;if(!u){for(var d=0,g=r.parts;d<g.length;d++){var p=g[d];var w=p.lines;o&&!s&&(c(w,Iet),w=[]),l===void 0?(a.push({column:p.column,text:w[0],preview:p.preview}),w=w.slice(1)):c([f.substring(v,p.column-1)],void 0),w.length>0&&(c(w,Iet),l===void 0&&p.column<=f.length&&(l=p.column)),v=p.column-1}l!==void 0&&c([f.substring(v)],void 0)}var m=l!==void 0?new ett(l,f.length+1):void 0,b=s||!o?r.lineNumber:o.endLineNumber-1;return{inlineTexts:a,additionalLines:h,hiddenRange:m,lineNumber:b,additionalReservedLineCount:e.model.minReservedLineCount.read(t),targetTextModel:i,range:o,isSingleLine:s,isPureRemove:u,backgroundColoring:e.model.backgroundColoring.read(t)}})),e.decorations=uP(e,(function(t){var n=e.uiState.read(t);if(!n)return[];var i=[];if(n.hiddenRange&&i.push({range:n.hiddenRange.toRange(n.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),n.range){var r=[];if(n.isSingleLine)r.push(n.range);else if(n.isPureRemove){var o=n.range.endLineNumber-n.range.startLineNumber;for(var s=0;s<o;s++){var u=n.range.startLineNumber+s,a=n.targetTextModel.getLineFirstNonWhitespaceColumn(u),h=n.targetTextModel.getLineLastNonWhitespaceColumn(u),c=new Ir(u,a,u,h);r.push(c)}}else{var o=n.range.endLineNumber-n.range.startLineNumber;for(var s=0;s<o;s++){var u=n.range.startLineNumber+s,a=n.targetTextModel.getLineFirstNonWhitespaceColumn(u),h=n.targetTextModel.getLineLastNonWhitespaceColumn(u),c=new Ir(u,a,u,h);r.push(c)}}var f=n.backgroundColoring?"inline-edit-remove backgroundColoring":"inline-edit-remove";for(var l=0,v=r;l<v.length;l++){var o=v[l];i.push({range:o,options:{inlineClassName:f,description:"inline-edit-remove"}})}}for(var d=0,g=n.inlineTexts;d<g.length;d++){var r=g[d];i.push({range:Ir.fromPositions(new Tr(n.lineNumber,r.column)),options:{description:Iet,after:{content:r.text,inlineClassName:r.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:gd.Left},showIfCollapsed:!0}})}return i})),e.additionalLinesWidget=e._register(new ftt(e.editor,e.languageService.languageIdCodec,uP((function(t){var n=e.uiState.read(t);return n&&!n.isPureRemove?{lineNumber:n.lineNumber,additionalLines:n.additionalLines,minReservedLineCount:n.additionalReservedLineCount,targetTextModel:n.targetTextModel}:void 0})))),e._register(ai((function(){e.isDisposed.set(!0,void 0)}))),e._register(ott(e.editor,e.decorations));return e}n.prototype.ownsViewZone=function(t){return this.additionalLinesWidget.viewZoneId===t};return n}(ci);Bet=Ret([Tet(2,Zl)],Bet);var Net,Pet=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Wet=function(t,n){return function(i,r){n(i,r,t)}};var Het=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.editor=n,e.model=i,e.instantiationService=r,e.alwaysShowToolbar=bP(e.editor.onDidChangeConfiguration,(function(){return e.editor.getOption(63).showToolbar==="always"})),e.sessionPosition=void 0,e.position=uP(e,(function(t){var n,i,r;var o=(n=e.model.read(t))===null||n===void 0?void 0:n.widget.model.ghostText.read(t);if(!e.alwaysShowToolbar.read(t)||!o||o.parts.length===0)return e.sessionPosition=void 0,null;var s=o.parts[0].column;e.sessionPosition&&e.sessionPosition.lineNumber!==o.lineNumber&&(e.sessionPosition=void 0);var u=new Tr(o.lineNumber,Math.min(s,(r=(i=e.sessionPosition)===null||i===void 0?void 0:i.column)!==null&&r!==void 0?r:Number.MAX_SAFE_INTEGER));return e.sessionPosition=u,u})),e._register(gP((function(t,i){if(!e.model.read(t)||!e.alwaysShowToolbar.read(t))return;var r=i.add(e.instantiationService.createInstance(zet,e.editor,!0,e.position));n.addContentWidget(r),i.add(ai((function(){return n.removeContentWidget(r)})))})));return e}return n}(ci);Het=Pet([Wet(2,Jh)],Het);var zet=Net=function(t){__extends(n,t);function n(i,r,e,o,s,u){var a=this;a=t.call(this)||this,a.editor=i,a.withBorder=r,a._position=e,a._contextKeyService=s,a._menuService=u,a.id="InlineEditHintsContentWidget"+n.id++,a.allowEditorOverflow=!0,a.suppressMouseDown=!1,a.nodes=Fh("div.inlineEditHints",{className:a.withBorder?".withBorder":""},[Fh("div@toolBar")]),a.inlineCompletionsActionsMenus=a._register(a._menuService.createMenu(vf.InlineEditActions,a._contextKeyService)),a.toolBar=a._register(o.createInstance(Ket,a.nodes.toolBar,a.editor,vf.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:function(t){return t.startsWith("primary")}},actionViewItemProvider:function(t,n){if(t instanceof mf)return o.createInstance(Uet,t,void 0)},telemetrySource:"InlineEditToolbar"})),a._register(a.toolBar.onDidChangeDropdownVisibility((function(t){n._dropDownVisible=t}))),a._register(lP((function(t){a._position.read(t),a.editor.layoutContentWidget(a)}))),a._register(lP((function(t){var n=[];for(var i=0,r=a.inlineCompletionsActionsMenus.getActions();i<r.length;i++){var e=r[i],o=e[0],s=e[1];for(var u=0,h=s;u<h.length;u++){var c=h[u];c instanceof mf&&n.push(c)}}n.length>0&&n.unshift(new ic),a.toolBar.setAdditionalSecondaryActions(n)})));return a}n.prototype.getId=function(){return this.id};n.prototype.getDomNode=function(){return this.nodes.root};n.prototype.getPosition=function(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}};return n}(ci);zet._dropDownVisible=!1,zet.id=0,zet=Net=Pet([Wet(3,Jh),Wet(4,Gc),Wet(5,df)],zet);var Uet=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.updateLabel=function(){var n=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!n)return t.prototype.updateLabel.call(this);if(this.label){var i=Fh("div.keybinding").root;this._register(new tV(i,zt,__assign({disableTitle:!0},XK))).set(n),this.label.textContent=this._action.label,this.label.appendChild(i),this.label.classList.add("inlineEditStatusBarItemLabel")}};n.prototype.updateTooltip=function(){};return n}(HW);var Ket=function(t){__extends(n,t);function n(n,i,r,e,o,s,u,a,h){var c=this;c=t.call(this,n,__assign({resetMenu:r},e),o,s,u,a,h)||this,c.editor=i,c.menuId=r,c.options2=e,c.menuService=o,c.contextKeyService=s,c.menu=c._store.add(c.menuService.createMenu(c.menuId,c.contextKeyService,{emitEventsForSubmenuChanges:!0})),c.additionalActions=[],c.prependedPrimaryActions=[],c._store.add(c.menu.onDidChange((function(){return c.updateToolbar()}))),c._store.add(c.editor.onDidChangeCursorPosition((function(){return c.updateToolbar()}))),c.updateToolbar();return c}n.prototype.updateToolbar=function(){var t,n,i,r,e,o,s;var u=[],a=[];PW(this.menu,(t=this.options2)===null||t===void 0?void 0:t.menuOptions,{primary:u,secondary:a},(i=(n=this.options2)===null||n===void 0?void 0:n.toolbarOptions)===null||i===void 0?void 0:i.primaryGroup,(e=(r=this.options2)===null||r===void 0?void 0:r.toolbarOptions)===null||e===void 0?void 0:e.shouldInlineSubmenu,(s=(o=this.options2)===null||o===void 0?void 0:o.toolbarOptions)===null||s===void 0?void 0:s.useSeparatorsInPrimaryActions),a.push.apply(a,this.additionalActions),u.unshift.apply(u,this.prependedPrimaryActions),this.setActions(u,a)};n.prototype.setAdditionalSecondaryActions=function(t){v(this.additionalActions,t,(function(t,n){return t===n}))||(this.additionalActions=t,this.updateToolbar())};return n}(WJ);Ket=Pet([Wet(4,df),Wet(5,Gc),Wet(6,_R),Wet(7,Yx),Wet(8,_f)],Ket);var Vet,qet=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Get=function(t,n){return function(i,r){n(i,r,t)}};var $et=function(){function t(t,n){this.widget=t,this.edit=n}t.prototype.dispose=function(){this.widget.dispose()};return t}();var Jet=Vet=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u.editor=n,u.instantiationService=i,u.contextKeyService=r,u.languageFeaturesService=e,u._commandService=o,u._configurationService=s,u._isVisibleContext=Vet.inlineEditVisibleContext.bindTo(u.contextKeyService),u._isCursorAtInlineEditContext=Vet.cursorAtInlineEditContext.bindTo(u.contextKeyService),u._currentEdit=u._register(eP(u,void 0)),u._isAccepting=iP(u,!1),u._enabled=bP(u.editor.onDidChangeConfiguration,(function(){return u.editor.getOption(63).enabled})),u._fontFamily=bP(u.editor.onDidChangeConfiguration,(function(){return u.editor.getOption(63).fontFamily})),u._backgroundColoring=bP(u.editor.onDidChangeConfiguration,(function(){return u.editor.getOption(63).backgroundColoring}));var a=_P("InlineEditController.modelContentChangedSignal",n.onDidChangeModelContent);u._register(lP((function(t){u._enabled.read(t)&&(a.read(t),u._isAccepting.read(t)||u.getInlineEdit(n,!0))})));var h=bP(n.onDidChangeCursorPosition,(function(){return n.getPosition()}));u._register(lP((function(t){if(!u._enabled.read(t))return;var n=h.read(t);n&&u.checkCursorPosition(n)}))),u._register(lP((function(t){var i=u._currentEdit.read(t);if(u._isCursorAtInlineEditContext.set(!1),!i)return void u._isVisibleContext.set(!1);u._isVisibleContext.set(!0);var r=n.getPosition();r&&u.checkCursorPosition(r)})));var c=_P("InlineEditController.editorBlurSignal",n.onDidBlurEditorWidget);u._register(lP((function(t){return __awaiter(u,void 0,void 0,(function(){var i,r,e;return __generator(this,(function(o){switch(o.label){case 0:r=this._enabled.read(t);if(!r)return[3,3];c.read(t);e=this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||n.getOption(63).keepOnBlur;if(e)return[3,2];(i=this._currentRequestCts)===null||i===void 0||i.dispose(!0),this._currentRequestCts=void 0;return[4,this.clear(!1)];case 1:e=o.sent();o.label=2;case 2:r=e;o.label=3;case 3:r;return[2]}}))}))})));var f=_P("InlineEditController.editorFocusSignal",n.onDidFocusEditorText);u._register(lP((function(t){u._enabled.read(t)&&(f.read(t),u.getInlineEdit(n,!0))})));var l=u._register(Ja());u._register(lP((function(t){var n=u._fontFamily.read(t);l.setStyle(n===""||n==="default"?"":"\n.monaco-editor .inline-edit-decoration,\n.monaco-editor .inline-edit-decoration-preview,\n.monaco-editor .inline-edit {\n\tfont-family: ".concat(n,";\n}"))}))),u._register(new Het(u.editor,u._currentEdit,u.instantiationService));return u}n.get=function(t){return t.getContribution(Vet.ID)};n.prototype.checkCursorPosition=function(t){var n;if(!this._currentEdit)return void this._isCursorAtInlineEditContext.set(!1);var i=(n=this._currentEdit.get())===null||n===void 0?void 0:n.edit;i?this._isCursorAtInlineEditContext.set(Ir.containsPosition(i.range,t)):this._isCursorAtInlineEditContext.set(!1)};n.prototype.validateInlineEdit=function(t,n){var i,r;if(n.text.includes("\n")&&n.range.startLineNumber!==n.range.endLineNumber&&n.range.startColumn!==n.range.endColumn){if(n.range.startColumn!==1)return!1;var e=n.range.endLineNumber;if(n.range.endColumn!==((r=(i=t.getModel())===null||i===void 0?void 0:i.getLineLength(e))!==null&&r!==void 0?r:0)+1)return!1}return!0};n.prototype.fetchInlineEdit=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u,a,h,c,f;return __generator(this,(function(l){switch(l.label){case 0:this._currentRequestCts&&this._currentRequestCts.dispose(!0);i=t.getModel();if(!i)return[2];r=i.getVersionId(),e=this.languageFeaturesService.inlineEditProvider.all(i);if(e.length===0)return[2];o=e[0];this._currentRequestCts=new ji;s=this._currentRequestCts.token,u=n?se.Automatic:se.Invoke;c=n;if(!c)return[3,2];return[4,(a=50,h=s,new Promise((function(t){var n;var i=setTimeout((function(){n&&n.dispose(),t()}),a);h&&(n=h.onCancellationRequested((function(){clearTimeout(i),n&&n.dispose(),t()})))})))];case 1:c=l.sent();l.label=2;case 2:if(c,s.isCancellationRequested||i.isDisposed()||i.getVersionId()!==r)return[2];return[4,o.provideInlineEdit(i,{triggerKind:u},s)];case 3:f=l.sent();return[2,f&&!s.isCancellationRequested&&!i.isDisposed()&&i.getVersionId()===r&&this.validateInlineEdit(t,f)?f:void 0]}}))}))};n.prototype.getInlineEdit=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:this._isCursorAtInlineEditContext.set(!1);return[4,this.clear()];case 1:a.sent();return[4,this.fetchInlineEdit(t,n)];case 2:r=a.sent();if(!r)return[2];e=r.range.endLineNumber,o=r.range.endColumn,s=new Y8(e,[new X8(o,r.text,!1)]),u=this.instantiationService.createInstance(Bet,this.editor,{ghostText:wP(s),minReservedLineCount:wP(0),targetTextModel:wP((i=this.editor.getModel())!==null&&i!==void 0?i:void 0),range:wP(r.range),backgroundColoring:this._backgroundColoring});this._currentEdit.set(new $et(u,r),void 0);return[2]}}))}))};n.prototype.trigger=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getInlineEdit(this.editor,!1)];case 1:t.sent();return[2]}}))}))};n.prototype.jumpBack=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition));return[2]}))}))};n.prototype.accept=function(){return __awaiter(this,void 0,void 0,(function(){var t,n,i,r;var e;var o=this;return __generator(this,(function(s){switch(s.label){case 0:this._isAccepting.set(!0,void 0);n=(t=this._currentEdit.get())===null||t===void 0?void 0:t.edit;if(!n)return[2];i=n.text;n.text.startsWith("\n")&&(i=n.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[hB.replace(Ir.lift(n.range),i)]);r=n.accepted;if(!r)return[3,2];return[4,(e=this._commandService).executeCommand.apply(e,__spreadArray([n.accepted.id],n.accepted.arguments||[],false)).then(void 0,$n)];case 1:r=s.sent();s.label=2;case 2:r,this.freeEdit(n),YN((function(t){o._currentEdit.set(void 0,t),o._isAccepting.set(!1,t)}));return[2]}}))}))};n.prototype.jumpToCurrent=function(){var t,n;this._jumpBackPosition=(t=this.editor.getSelection())===null||t===void 0?void 0:t.getStartPosition();var i=(n=this._currentEdit.get())===null||n===void 0?void 0:n.edit;if(!i)return;var r=Tr.lift({lineNumber:i.range.startLineNumber,column:i.range.startColumn});this.editor.setPosition(r),this.editor.revealPositionInCenterIfOutsideViewport(r)};n.prototype.clear=function(){return __awaiter(this,arguments,void 0,(function(t){var n,i,r;var e;if(t===void 0){t=!0}return __generator(this,(function(o){switch(o.label){case 0:i=(n=this._currentEdit.get())===null||n===void 0?void 0:n.edit;r=i&&(i!=null&&i.rejected)&&t;if(!r)return[3,2];return[4,(e=this._commandService).executeCommand.apply(e,__spreadArray([i.rejected.id],i.rejected.arguments||[],false)).then(void 0,$n)];case 1:r=o.sent();o.label=2;case 2:r,i&&this.freeEdit(i),this._currentEdit.set(void 0,void 0);return[2]}}))}))};n.prototype.freeEdit=function(t){var n=this.editor.getModel();if(!n)return;var i=this.languageFeaturesService.inlineEditProvider.all(n);i.length!==0&&i[0].freeInlineEdit(t)};n.prototype.shouldShowHoverAt=function(t){var n=this._currentEdit.get();if(!n)return!1;var i=n.edit,r=n.widget.model;if(Ir.containsPosition(i.range,t.getStartPosition())||Ir.containsPosition(i.range,t.getEndPosition()))return!0;var e=r.ghostText.get();return!!e&&e.parts.some((function(n){return t.containsPosition(new Tr(e.lineNumber,n.column))}))};n.prototype.shouldShowHoverAtViewZone=function(t){var n,i;return(i=(n=this._currentEdit.get())===null||n===void 0?void 0:n.widget.ownsViewZone(t))!==null&&i!==void 0&&i};return n}(ci);Jet.ID="editor.contrib.inlineEditController",Jet.inlineEditVisibleKey="inlineEditVisible",Jet.inlineEditVisibleContext=new qc(Vet.inlineEditVisibleKey,!1),Jet.cursorAtInlineEditKey="cursorAtInlineEdit",Jet.cursorAtInlineEditContext=new qc(Vet.cursorAtInlineEditKey,!1),Jet=Vet=qet([Get(1,Jh),Get(2,Gc),Get(3,tp),Get(4,ac),Get(5,Kl)],Jet);var Zet=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Qet=function(t,n){return function(i,r){n(i,r,t)}};var Yet=function(){function t(t,n,i){this.owner=t,this.range=n,this.controller=i}t.prototype.isValidForHoverAnchor=function(t){return t.type===1&&this.range.startColumn<=t.range.startColumn&&this.range.endColumn>=t.range.endColumn};return t}();var Xet=function(){function t(t,n,i){this._editor=t,this._instantiationService=n,this._telemetryService=i,this.hoverOrdinal=5}t.prototype.suggestHoverAnchor=function(t){var n=Jet.get(this._editor);if(!n)return null;var i=t.target;if(i.type===8){var r=i.detail;if(n.shouldShowHoverAtViewZone(r.viewZoneId)){var e=i.range;return new e5(1e3,this,e,t.event.posx,t.event.posy,!1)}}return i.type===7&&n.shouldShowHoverAt(i.range)?new e5(1e3,this,i.range,t.event.posx,t.event.posy,!1):i.type===6&&i.detail.mightBeForeignElement&&n.shouldShowHoverAt(i.range)?new e5(1e3,this,i.range,t.event.posx,t.event.posy,!1):null};t.prototype.computeSync=function(t,n){if(this._editor.getOption(63).showToolbar!=="onHover")return[];var i=Jet.get(this._editor);return i&&i.shouldShowHoverAt(t.range)?[new Yet(this,t.range,i)]:[]};t.prototype.renderHoverParts=function(t,n){var i=new hi;this._telemetryService.publicLog2("inlineEditHover.shown");var r=this._instantiationService.createInstance(zet,this._editor,!1,wP(null));return t.fragment.appendChild(r.getDomNode()),i.add(r),i};return t}();Xet=Zet([Qet(1,Jh),Qet(2,_f)],Xet),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.inlineEdit.accept",label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:Dc.and($C.writable,Jet.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:Dc.and($C.writable,Jet.inlineEditVisibleContext,Jet.cursorAtInlineEditContext)}],menuOpts:[{menuId:vf.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){switch(i.label){case 0:t=Jet.get(n);return[4,t==null?void 0:t.accept()];case 1:i.sent();return[2]}}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){var n=Dc.and($C.writable,Jet.inlineEditVisibleContext);return t.call(this,{id:"editor.action.inlineEdit.reject",label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:n,kbOpts:{weight:100,primary:9,kbExpr:n},menuOpts:[{menuId:vf.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){switch(i.label){case 0:t=Jet.get(n);return[4,t==null?void 0:t.clear()];case 1:i.sent();return[2]}}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){var n=Dc.and($C.writable,Jet.inlineEditVisibleContext,Dc.not(Jet.cursorAtInlineEditKey));return t.call(this,{id:"editor.action.inlineEdit.jumpTo",label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:n,kbOpts:{weight:101,primary:2646,kbExpr:n},menuOpts:[{menuId:vf.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:n}]})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){t=Jet.get(n);t==null||t.jumpToCurrent();return[2]}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){var n=Dc.and($C.writable,Jet.cursorAtInlineEditContext);return t.call(this,{id:"editor.action.inlineEdit.jumpBack",label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:n,kbOpts:{weight:110,primary:2646,kbExpr:n},menuOpts:[{menuId:vf.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:n}]})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){t=Jet.get(n);t==null||t.jumpBack();return[2]}))}))};return n}(Lf)),Bf(function(t){__extends(n,t);function n(){var n=Dc.and($C.writable,Dc.not(Jet.inlineEditVisibleKey));return t.call(this,{id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:n,kbOpts:{weight:101,primary:2646,kbExpr:n}})||this}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){t=Jet.get(n);t==null||t.trigger();return[2]}))}))};return n}(Lf)),Pf(Jet.ID,Jet,3),o5.register(Xet);var tot={Visible:new qc("parameterHintsVisible",!1),MultipleSignatures:new qc("parameterHintsMultipleSignatures",!1)};function not(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h,c;return __generator(this,(function(f){switch(f.label){case 0:o=t.ordered(n);s=0,u=o;f.label=1;case 1:if(!(s<u.length))return[3,6];a=u[s];f.label=2;case 2:f.trys.push([2,4,,5]);return[4,a.provideSignatureHelp(n,i,e,r)];case 3:h=f.sent();if(h)return[2,h];return[3,5];case 4:c=f.sent();$n(c);return[3,5];case 5:s++;return[3,1];case 6:return[2]}}))}))}var iot;hc.registerCommand("_executeSignatureHelpProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(a,void 0,void 0,(function(){var i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:i=n[0],r=n[1],e=n[2];Z(Cr.isUri(i)),Z(Tr.isIPosition(r)),Z(typeof e=="string"||!e);o=t.get(tp);return[4,t.get(Xh).createModelReference(i)];case 1:s=a.sent();a.label=2;case 2:a.trys.push([2,,4,5]);return[4,not(o.signatureHelpProvider,s.object.textEditorModel,Tr.lift(r),{triggerKind:Jr.Invoke,isRetrigger:!1,triggerCharacter:e},Fi.None)];case 3:u=a.sent();return[2,u?(setTimeout((function(){return u.dispose()}),0),u.value):void 0];case 4:s.dispose();return[7];case 5:return[2]}}))}))})),function(t){t.Default={type:0},t.Pending=function(){function t(t,n){this.request=t,this.previouslyActiveHints=n,this.type=2}return t}(),t.Active=function(){function t(t){this.hints=t,this.type=1}return t}()}(iot||(iot={}));var rot=function(t){__extends(n,t);function n(i,r,e){if(e===void 0){e=n.DEFAULT_DELAY}var o=this;o=t.call(this)||this,o._onChangedHints=o._register(new ki),o.onChangedHints=o._onChangedHints.event,o.triggerOnType=!1,o._state=iot.Default,o._pendingTriggers=[],o._lastSignatureHelpResult=o._register(new fi),o.triggerChars=new Jv,o.retriggerChars=new Jv,o.triggerId=0,o.editor=i,o.providers=r,o.throttledDelayer=new Os(e),o._register(o.editor.onDidBlurEditorWidget((function(){return o.cancel()}))),o._register(o.editor.onDidChangeConfiguration((function(){return o.onEditorConfigurationChange()}))),o._register(o.editor.onDidChangeModel((function(t){return o.onModelChanged()}))),o._register(o.editor.onDidChangeModelLanguage((function(t){return o.onModelChanged()}))),o._register(o.editor.onDidChangeCursorSelection((function(t){return o.onCursorChange(t)}))),o._register(o.editor.onDidChangeModelContent((function(t){return o.onModelContentChange()}))),o._register(o.providers.onDidChange(o.onModelChanged,o)),o._register(o.editor.onDidType((function(t){return o.onDidType(t)}))),o.onEditorConfigurationChange(),o.onModelChanged();return o}Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(t){this._state.type===2&&this._state.request.cancel(),this._state=t},enumerable:false,configurable:true});n.prototype.cancel=function(t){if(t===void 0){t=!1}this.state=iot.Default,this.throttledDelayer.cancel(),t||this._onChangedHints.fire(void 0)};n.prototype.trigger=function(t,n){var i=this;var r=this.editor.getModel();if(!r||!this.providers.has(r))return;var e=++this.triggerId;this._pendingTriggers.push(t),this.throttledDelayer.trigger((function(){return i.doTrigger(e)}),n).catch(Gn)};n.prototype.next=function(){if(this.state.type!==1)return;var t=this.state.hints.signatures.length,n=this.state.hints.activeSignature,i=n%t==t-1,r=this.editor.getOption(86).cycle;!(t<2||i)||r?this.updateActiveSignature(i&&r?0:n+1):this.cancel()};n.prototype.previous=function(){if(this.state.type!==1)return;var t=this.state.hints.signatures.length,n=this.state.hints.activeSignature,i=n===0,r=this.editor.getOption(86).cycle;!(t<2||i)||r?this.updateActiveSignature(i&&r?t-1:n-1):this.cancel()};n.prototype.updateActiveSignature=function(t){this.state.type===1&&(this.state=new iot.Active(__assign(__assign({},this.state.hints),{activeSignature:t})),this._onChangedHints.fire(this.state.hints))};n.prototype.doTrigger=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o,s,u,a;var h=this;return __generator(this,(function(c){switch(c.label){case 0:n=this.state.type===1||this.state.type===2,i=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return[2,!1];r=this._pendingTriggers.reduce(eot);this._pendingTriggers=[];e={triggerKind:r.triggerKind,triggerCharacter:r.triggerCharacter,isRetrigger:n,activeSignatureHelp:i};if(!this.editor.hasModel())return[2,!1];o=this.editor.getModel(),s=this.editor.getPosition();this.state=new iot.Pending(Ss((function(t){return not(h.providers,o,s,e,t)})),i);c.label=1;case 1:c.trys.push([1,3,,4]);return[4,this.state.request];case 2:u=c.sent();return[2,t!==this.triggerId?(u==null||u.dispose(),!1):u&&u.value.signatures&&u.value.signatures.length!==0?(this.state=new iot.Active(u.value),this._lastSignatureHelpResult.value=u,this._onChangedHints.fire(this.state.hints),!0):(u==null||u.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)];case 3:a=c.sent();return[2,(t===this.triggerId&&(this.state=iot.Default),Gn(a),!1)];case 4:return[2]}}))}))};n.prototype.getLastActiveHints=function(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}};Object.defineProperty(n.prototype,"isTriggered",{get:function(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()},enumerable:false,configurable:true});n.prototype.onModelChanged=function(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();var t=this.editor.getModel();if(t)for(var n=0,i=this.providers.ordered(t);n<i.length;n++){var r=i[n];for(var e=0,o=r.signatureHelpTriggerCharacters||[];e<o.length;e++){var s=o[e];if(s.length){var u=s.charCodeAt(0);this.triggerChars.add(u),this.retriggerChars.add(u)}}for(var a=0,h=r.signatureHelpRetriggerCharacters||[];a<h.length;a++){var s=h[a];s.length&&this.retriggerChars.add(s.charCodeAt(0))}}};n.prototype.onDidType=function(t){if(!this.triggerOnType)return;var n=t.length-1,i=t.charCodeAt(n);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:Jr.TriggerCharacter,triggerCharacter:t.charAt(n)})};n.prototype.onCursorChange=function(t){t.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:Jr.ContentChange})};n.prototype.onModelContentChange=function(){this.isTriggered&&this.trigger({triggerKind:Jr.ContentChange})};n.prototype.onEditorConfigurationChange=function(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()};n.prototype.dispose=function(){this.cancel(!0),t.prototype.dispose.call(this)};return n}(ci);function eot(t,n){switch(n.triggerKind){case Jr.Invoke:return n;case Jr.ContentChange:return t;case Jr.TriggerCharacter:default:return n}}rot.DEFAULT_DELAY=120;var oot,sot=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},uot=function(t,n){return function(i,r){n(i,r,t)}};var aot=bh,hot=cq("parameter-hints-next",Hr.chevronDown,ht(0,"Icon for show next parameter hint.")),cot=cq("parameter-hints-previous",Hr.chevronUp,ht(0,"Icon for show previous parameter hint."));var fot=oot=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this)||this,s.editor=n,s.model=i,s.renderDisposeables=s._register(new hi),s.visible=!1,s.announcedLabel=null,s.allowEditorOverflow=!0,s.markdownRenderer=s._register(new OI({editor:n},o,e)),s.keyVisible=tot.Visible.bindTo(r),s.keyMultipleSignatures=tot.MultipleSignatures.bindTo(r);return s}n.prototype.createParameterHintDOMNodes=function(){var t=this;var n=aot(".editor-widget.parameter-hints-widget"),i=vh(n,aot(".phwrapper"));i.tabIndex=-1;var r=vh(i,aot(".controls")),e=vh(r,aot(".button"+uc.asCSSSelector(cot))),o=vh(r,aot(".overloads")),s=vh(r,aot(".button"+uc.asCSSSelector(hot)));this._register(ma(e,"click",(function(n){ch(n),t.previous()}))),this._register(ma(s,"click",(function(n){ch(n),t.next()})));var u=aot(".body"),a=new yk(u,{alwaysConsumeMouseWheel:!0});this._register(a),i.appendChild(a.getDomNode());var h=vh(u,aot(".signature")),c=vh(u,aot(".docs"));n.style.userSelect="text",this.domNodes={element:n,signature:h,overloads:o,docs:c,scrollbar:a},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((function(n){t.visible&&t.editor.layoutContentWidget(t)})));var f=function(){if(!t.domNodes)return;var n=t.editor.getOption(50);t.domNodes.element.style.fontSize="".concat(n.fontSize,"px"),t.domNodes.element.style.lineHeight=""+n.lineHeight/n.fontSize};f(),this._register(wi.chain(this.editor.onDidChangeConfiguration.bind(this.editor),(function(t){return t.filter((function(t){return t.hasChanged(50)}))}))(f)),this._register(this.editor.onDidLayoutChange((function(n){return t.updateMaxHeight()}))),this.updateMaxHeight()};n.prototype.show=function(){var t=this;this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((function(){var n;(n=t.domNodes)===null||n===void 0||n.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))};n.prototype.hide=function(){var t;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(t=this.domNodes)===null||t===void 0||t.element.classList.remove("visible"),this.editor.layoutContentWidget(this))};n.prototype.getPosition=function(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null};n.prototype.render=function(t){var n;if(this.renderDisposeables.clear(),!this.domNodes)return;var i=t.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";var r=t.signatures[t.activeSignature];if(!r)return;var e=vh(this.domNodes.signature,aot(".code")),o=this.editor.getOption(50);e.style.fontSize="".concat(o.fontSize,"px"),e.style.fontFamily=o.fontFamily;var s=r.parameters.length>0,u=(n=r.activeParameter)!==null&&n!==void 0?n:t.activeParameter;s?this.renderParameters(e,r,u):vh(e,aot("span")).textContent=r.label;var a=r.parameters[u];if(a!=null&&a.documentation){var h=aot("span.documentation");if(typeof a.documentation=="string")h.textContent=a.documentation;else{var c=this.renderMarkdownDocs(a.documentation);h.appendChild(c.element)}vh(this.domNodes.docs,aot("p",{},h))}if(r.documentation!==void 0)if(typeof r.documentation=="string")vh(this.domNodes.docs,aot("p",{},r.documentation));else{var h=this.renderMarkdownDocs(r.documentation);vh(this.domNodes.docs,h.element)}var f=this.hasDocs(r,a);if(this.domNodes.signature.classList.toggle("has-docs",f),this.domNodes.docs.classList.toggle("empty",!f),this.domNodes.overloads.textContent=String(t.activeSignature+1).padStart(t.signatures.length.toString().length,"0")+"/"+t.signatures.length,a){var h="";var c=r.parameters[u];h=Array.isArray(c.label)?r.label.substring(c.label[0],c.label[1]):c.label,c.documentation&&(h+=typeof c.documentation=="string"?", ".concat(c.documentation):", ".concat(c.documentation.value)),r.documentation&&(h+=typeof r.documentation=="string"?", ".concat(r.documentation):", ".concat(r.documentation.value)),this.announcedLabel!==h&&(yw(ht(0,"{0}, hint",h)),this.announcedLabel=h)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()};n.prototype.renderMarkdownDocs=function(t){var n=this;var i=this.renderDisposeables.add(this.markdownRenderer.render(t,{asyncRenderCallback:function(){var t;(t=n.domNodes)===null||t===void 0||t.scrollbar.scanDomNode()}}));return i.element.classList.add("markdown-docs"),i};n.prototype.hasDocs=function(t,n){return!!(n&&typeof n.documentation=="string"&&Q(n.documentation).length>0)||!!(n&&typeof n.documentation=="object"&&Q(n.documentation).value.length>0)||!!(t.documentation&&typeof t.documentation=="string"&&Q(t.documentation).length>0)||!!(t.documentation&&typeof t.documentation=="object"&&Q(t.documentation.value).length>0)};n.prototype.renderParameters=function(t,n,i){var r=this.getParameterLabelOffsets(n,i),e=r[0],o=r[1],s=document.createElement("span");s.textContent=n.label.substring(0,e);var u=document.createElement("span");u.textContent=n.label.substring(e,o),u.className="parameter active";var a=document.createElement("span");a.textContent=n.label.substring(o),vh(t,s,u,a)};n.prototype.getParameterLabelOffsets=function(t,n){var i=t.parameters[n];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){var r=new RegExp("(\\W|^)".concat(uo(i.label),"(?=\\W|$)"),"g");r.test(t.label);var e=r.lastIndex-i.label.length;return e>=0?[e,r.lastIndex]:[0,0]}return[0,0]}return[0,0]};n.prototype.next=function(){this.editor.focus(),this.model.next()};n.prototype.previous=function(){this.editor.focus(),this.model.previous()};n.prototype.getDomNode=function(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element};n.prototype.getId=function(){return n.ID};n.prototype.updateMaxHeight=function(){if(!this.domNodes)return;var t="".concat(Math.max(this.editor.getLayoutInfo().height/4,250),"px");this.domNodes.element.style.maxHeight=t;var n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)};return n}(ci);fot.ID="editor.widget.parameterHintsWidget",fot=oot=sot([uot(2,Gc),uot(3,DR),uot(4,Zl)],fot),Jw("editorHoverWidget.highlightForeground",{dark:Cy,light:Cy,hcDark:Cy,hcLight:Cy},ht(0,"Foreground color of the active item in the parameter hint."));var lot,vot=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},dot=function(t,n){return function(i,r){n(i,r,t)}};var got=lot=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.editor=n,e.model=e._register(new rot(n,r.signatureHelpProvider)),e._register(e.model.onChangedHints((function(t){var n;t?(e.widget.value.show(),e.widget.value.render(t)):(n=e.widget.rawValue)===null||n===void 0||n.hide()}))),e.widget=new no((function(){return e._register(i.createInstance(fot,e.editor,e.model))}));return e}n.get=function(t){return t.getContribution(n.ID)};n.prototype.cancel=function(){this.model.cancel()};n.prototype.previous=function(){var t;(t=this.widget.rawValue)===null||t===void 0||t.previous()};n.prototype.next=function(){var t;(t=this.widget.rawValue)===null||t===void 0||t.next()};n.prototype.trigger=function(t){this.model.trigger(t,0)};return n}(ci);got.ID="editor.controller.parameterHints",got=lot=vot([dot(1,Jh),dot(2,tp)],got);Pf(got.ID,got,2),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.triggerParameterHints",label:ht(0,"Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:$C.hasSignatureHelpProvider,kbOpts:{kbExpr:$C.editorTextFocus,primary:3082,weight:100}})||this}n.prototype.run=function(t,n){var i=got.get(n);i==null||i.trigger({triggerKind:Jr.Invoke})};return n}(Lf));var pot=Ff.bindToContribution(got.get);If(new pot({id:"closeParameterHints",precondition:tot.Visible,handler:function(t){return t.cancel()},kbOpts:{weight:175,kbExpr:$C.focus,primary:9,secondary:[1033]}})),If(new pot({id:"showPrevParameterHint",precondition:Dc.and(tot.Visible,tot.MultipleSignatures),handler:function(t){return t.previous()},kbOpts:{weight:175,kbExpr:$C.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),If(new pot({id:"showNextParameterHint",precondition:Dc.and(tot.Visible,tot.MultipleSignatures),handler:function(t){return t.next()},kbOpts:{weight:175,kbExpr:$C.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var wot=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},mot=function(t,n){return function(i,r){n(i,r,t)}};var bot=new qc("renameInputVisible",!1,ht(0,"Whether the rename input widget is visible"));new qc("renameInputFocused",!1,ht(0,"Whether the rename input widget is focused"));var yot=function(){function t(t,n,i,r,e,o){var s=this;this._editor=t,this._acceptKeybindings=n,this._themeService=i,this._keybindingService=r,this._logService=o,this.allowEditorOverflow=!0,this._disposables=new hi,this._visibleContextKey=bot.bindTo(e),this._isEditingRenameCandidate=!1,this._beforeFirstInputFieldEditSW=new pi,this._input=new kot,this._disposables.add(this._input),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((function(t){t.hasChanged(50)&&s._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}t.prototype.dispose=function(){this._disposables.dispose(),this._editor.removeContentWidget(this)};t.prototype.getId=function(){return"__renameInputWidget"};t.prototype.getDomNode=function(){var t=this;return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._input.domNode),this._renameCandidateListView=this._disposables.add(new _ot(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:function(n){t._input.domNode.value=n,t._isEditingRenameCandidate=!1},onSelectionChange:function(){t._isEditingRenameCandidate=!1,t.acceptInput(!1)}})),this._disposables.add(this._input.onDidChange((function(){var n,i,r,e;((n=t._renameCandidateListView)===null||n===void 0?void 0:n.focusedCandidate)!==void 0&&(t._isEditingRenameCandidate=!0),(i=t._timeBeforeFirstInputFieldEdit)!==null&&i!==void 0||(t._timeBeforeFirstInputFieldEdit=t._beforeFirstInputFieldEditSW.elapsed()),((r=t._renameCandidateProvidersCts)===null||r===void 0?void 0:r.token.isCancellationRequested)===!1&&t._renameCandidateProvidersCts.cancel(),(e=t._renameCandidateListView)===null||e===void 0||e.clearFocus()}))),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode};t.prototype._updateStyles=function(t){var n,i,r,e;if(!this._domNode)return;var o=t.getColor(tb),s=t.getColor(nb);this._domNode.style.backgroundColor=String((n=t.getColor(ym))!==null&&n!==void 0?n:""),this._domNode.style.boxShadow=o?" 0 0 8px 2px ".concat(o):"",this._domNode.style.border=s?"1px solid ".concat(s):"",this._domNode.style.color=String((i=t.getColor(Eb))!==null&&i!==void 0?i:""),this._input.domNode.style.backgroundColor=String((r=t.getColor(Ob))!==null&&r!==void 0?r:"");var u=t.getColor(Mb);this._input.domNode.style.borderWidth=u?"1px":"0px",this._input.domNode.style.borderStyle=u?"solid":"none",this._input.domNode.style.borderColor=(e=u==null?void 0:u.toString())!==null&&e!==void 0?e:"none"};t.prototype._updateFont=function(){if(this._domNode===void 0)return;Z(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._input.domNode);var t=this._editor.getOption(50);this._label.style.fontSize="".concat(this._computeLabelFontSize(t.fontSize),"px")};t.prototype._computeLabelFontSize=function(t){return.8*t};t.prototype.getPosition=function(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;var t=Ea(this.getDomNode().ownerDocument.body),n=ja(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+n.top,this._nPxAvailableBelow=t.height-this._nPxAvailableAbove;var r=this._editor.getOption(67),e=xot.getLayoutInfo({lineHeight:r}).totalHeight,o=this._nPxAvailableBelow>6*e?[2,1]:[1,2];return{position:this._position,preference:o}};t.prototype.beforeRender=function(){var t,n;var i=this._acceptKeybindings,r=i[0],e=i[1];return this._label.innerText=ht(0,"{0} to Rename, {1} to Preview",(t=this._keybindingService.lookupKeybinding(r))===null||t===void 0?void 0:t.getLabel(),(n=this._keybindingService.lookupKeybinding(e))===null||n===void 0?void 0:n.getLabel()),this._domNode.style.minWidth="200px",null};t.prototype.afterRender=function(t){if(this._trace("invoking afterRender, position: ",t?"not null":"null"),t===null)return void this.cancelInput(!0,"afterRender (because position is null)");if(!this._editor.hasModel()||!this._editor.getDomNode())return;Z(this._renameCandidateListView),Z(this._nPxAvailableAbove!==void 0),Z(this._nPxAvailableBelow!==void 0);var n=Na(this._input.domNode),i=Na(this._label);var r;r=t===2?this._nPxAvailableBelow:this._nPxAvailableAbove,this._renameCandidateListView.layout({height:r-i-n,width:Ta(this._input.domNode)})};t.prototype.acceptInput=function(t){var n;this._trace("invoking acceptInput"),(n=this._currentAcceptInput)===null||n===void 0||n.call(this,t)};t.prototype.cancelInput=function(t,n){var i;this._trace("invoking cancelInput, caller: ".concat(n,", _currentCancelInput: ").concat(this._currentAcceptInput?"not undefined":"undefined")),(i=this._currentCancelInput)===null||i===void 0||i.call(this,t)};t.prototype.focusNextRenameSuggestion=function(){var t;!((t=this._renameCandidateListView)===null||t===void 0)&&t.focusNext()||(this._input.domNode.value=this._currentName)};t.prototype.focusPreviousRenameSuggestion=function(){var t;!((t=this._renameCandidateListView)===null||t===void 0)&&t.focusPrevious()||(this._input.domNode.value=this._currentName)};t.prototype.getInput=function(t,n,i,r,e){var o=this;var s=this._getSelection(t,n),u=s.start,a=s.end;this._renameCandidateProvidersCts=new ji;var h=r(this._renameCandidateProvidersCts.token);this._updateRenameCandidates(h,n,e.token),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",i),this._position=new Tr(t.startLineNumber,t.startColumn),this._currentName=n,this._input.domNode.value=n,this._input.domNode.setAttribute("selectionStart",u.toString()),this._input.domNode.setAttribute("selectionEnd",a.toString()),this._input.domNode.size=Math.max(1.1*(t.endColumn-t.startColumn),20),this._beforeFirstInputFieldEditSW.reset();var c=new hi;c.add(ai((function(){return e.dispose(!0)}))),c.add(ai((function(){o._renameCandidateProvidersCts!==void 0&&(o._renameCandidateProvidersCts.dispose(!0),o._renameCandidateProvidersCts=void 0)})));var f=new Ws;return f.p.finally((function(){c.dispose(),o._hide()})),this._currentCancelInput=function(t){var n;return o._trace("invoking _currentCancelInput"),o._currentAcceptInput=void 0,o._currentCancelInput=void 0,(n=o._renameCandidateListView)===null||n===void 0||n.clearCandidates(),f.complete(t),!0},this._currentAcceptInput=function(t){o._trace("invoking _currentAcceptInput"),Z(o._renameCandidateListView!==void 0);var r=o._renameCandidateListView.nCandidates;var e,s;var u=o._renameCandidateListView.focusedCandidate;u!==void 0?(o._trace("using new name from renameSuggestion"),e=u,s={k:"renameSuggestion"}):(o._trace("using new name from inputField"),e=o._input.domNode.value,s=o._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),e!==n&&e.trim().length!==0?(o._currentAcceptInput=void 0,o._currentCancelInput=void 0,o._renameCandidateListView.clearCandidates(),f.complete({newName:e,wantsPreview:i&&t,stats:{source:s,nRenameSuggestions:r,timeBeforeFirstInputFieldEdit:o._timeBeforeFirstInputFieldEdit}})):o.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)")},c.add(e.token.onCancellationRequested((function(){return o.cancelInput(!0,"cts.token.onCancellationRequested")}))),c.add(this._editor.onDidBlurEditorWidget((function(){var t;return o.cancelInput(!(!((t=o._domNode)===null||t===void 0)&&t.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")}))),this._show(),f.p};t.prototype._getSelection=function(t,n){Z(this._editor.hasModel());var i=this._editor.getSelection();var r=0,e=n.length;return Ir.isEmpty(i)||Ir.spansMultipleLines(i)||!Ir.containsRange(t,i)||(r=Math.max(0,i.startColumn-t.startColumn),e=Math.min(t.endColumn,i.endColumn)-t.startColumn),{start:r,end:e}};t.prototype._show=function(){var t=this;this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((function(){t._input.domNode.focus(),t._input.domNode.setSelectionRange(parseInt(t._input.domNode.getAttribute("selectionStart")),parseInt(t._input.domNode.getAttribute("selectionEnd")))}),100)};t.prototype._updateRenameCandidates=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u;var a=this;return __generator(this,(function(h){switch(h.label){case 0:r=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return a._trace.apply(a,__spreadArray(["_updateRenameCandidates"],t,false))};r("start");return[4,Ds(Promise.allSettled(t),i)];case 1:e=h.sent();if(e===void 0)return[2,void r("returning early - received updateRenameCandidates results - undefined")];o=e.flatMap((function(t){return t.status==="fulfilled"&&$(t.value)?t.value:[]}));r("received updateRenameCandidates results - total (unfiltered) ".concat(o.length," candidates."));s=x(o,(function(t){return t.newSymbolName}));r("distinct candidates - ".concat(s.length," candidates."));u=s.filter((function(t){var i=t.newSymbolName;return i.trim().length>0&&i!==a._input.domNode.value&&i!==n}));r("valid distinct candidates - ".concat(o.length," candidates.")),u.length<1?r("returning early - no valid distinct candidates"):(r("setting candidates"),this._renameCandidateListView.setCandidates(u),r("asking editor to re-layout"),this._editor.layoutContentWidget(this));return[2]}}))}))};t.prototype._hide=function(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)};t.prototype._getTopForPosition=function(){var t=this._editor.getVisibleRanges();var n;return t.length>0?n=t[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),n=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(n)};t.prototype._trace=function(){var t;var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}(t=this._logService).trace.apply(t,__spreadArray(["RenameWidget"],n,false))};return t}();yot=wot([mot(2,zk),mot(3,Yx),mot(4,Gc),mot(5,kf)],yot);var _ot=function(){function t(n,i){var r=this;this._disposables=new hi,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=i.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=i.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),n.appendChild(this._listContainer),this._listWidget=t._createListWidget(this._listContainer,this._candidateViewHeight,i.fontInfo),this._listWidget.onDidChangeFocus((function(t){t.elements.length===1&&i.onFocusChange(t.elements[0].newSymbolName)}),this._disposables),this._listWidget.onDidChangeSelection((function(t){t.elements.length===1&&i.onSelectionChange()}),this._disposables),this._disposables.add(this._listWidget.onDidBlur((function(t){r._listWidget.setFocus([])}))),this._listWidget.style(LW({listInactiveFocusForeground:Zy,listInactiveFocusBackground:Yy}))}t.prototype.dispose=function(){this._listWidget.dispose(),this._disposables.dispose()};t.prototype.layout=function(t){var n=t.height,i=t.width;this._availableHeight=n,this._minimumWidth=i};t.prototype.setCandidates=function(t){this._listWidget.splice(0,0,t);var n=this._pickListHeight(t.length),i=this._pickListWidth(t);this._listWidget.layout(n,i),this._listContainer.style.height="".concat(n,"px"),this._listContainer.style.width="".concat(i,"px"),_w(ht(0,"Received {0} rename suggestions",t.length))};t.prototype.clearCandidates=function(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])};Object.defineProperty(t.prototype,"nCandidates",{get:function(){return this._listWidget.length},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"focusedCandidate",{get:function(){if(this._listWidget.length===0)return;var t=this._listWidget.getSelectedElements()[0];if(t!==void 0)return t.newSymbolName;var n=this._listWidget.getFocusedElements()[0];return n!==void 0?n.newSymbolName:void 0},enumerable:false,configurable:true});t.prototype.focusNext=function(){if(this._listWidget.length===0)return!1;var t=this._listWidget.getFocus();return t.length===0?(this._listWidget.focusFirst(),!0):t[0]===this._listWidget.length-1?(this._listWidget.setFocus([]),!1):(this._listWidget.focusNext(),!0)};t.prototype.focusPrevious=function(){if(this._listWidget.length===0)return!1;var t=this._listWidget.getFocus();return t.length===0?(this._listWidget.focusLast(),!0):t[0]===0?(this._listWidget.setFocus([]),!1):(this._listWidget.focusPrevious(),!0)};t.prototype.clearFocus=function(){this._listWidget.setFocus([])};Object.defineProperty(t.prototype,"_candidateViewHeight",{get:function(){var t=xot.getLayoutInfo({lineHeight:this._lineHeight}).totalHeight;return t},enumerable:false,configurable:true});t.prototype._pickListHeight=function(t){var n=this._candidateViewHeight*t;return Math.min(n,this._availableHeight,7*this._candidateViewHeight)};t.prototype._pickListWidth=function(t){var n=Math.ceil(Math.max.apply(Math,t.map((function(t){return t.newSymbolName.length})))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+n+10)};t._createListWidget=function(t,n,i){var r=new(function(){function t(){}t.prototype.getTemplateId=function(t){return"candidate"};t.prototype.getHeight=function(t){return n};return t}()),e=new(function(){function t(){this.templateId="candidate"}t.prototype.renderTemplate=function(t){return new xot(t,i)};t.prototype.renderElement=function(t,n,i){i.populate(t)};t.prototype.disposeTemplate=function(t){t.dispose()};return t}());return new rW("NewSymbolNameCandidates",t,r,[e],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})};return t}();var kot=function(){function t(){this._onDidChange=new ki,this.onDidChange=this._onDidChange.event,this._disposables=new hi}Object.defineProperty(t.prototype,"domNode",{get:function(){var t=this;return this._domNode||(this._domNode=document.createElement("input"),this._domNode.className="rename-input",this._domNode.type="text",this._domNode.setAttribute("aria-label",ht(0,"Rename input. Type new name and press Enter to commit.")),this._disposables.add(ma(this._domNode,"input",(function(){return t._onDidChange.fire()})))),this._domNode},enumerable:false,configurable:true});t.prototype.dispose=function(){this._onDidChange.dispose(),this._disposables.dispose()};return t}();var xot=function(){function t(n,i){this._domNode=document.createElement("div"),this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height="".concat(i.lineHeight,"px"),this._domNode.style.padding="".concat(t._PADDING,"px");var r=document.createElement("div");r.style.display="flex",r.style.alignItems="center",r.style.width=r.style.height=.8*i.lineHeight+"px",this._domNode.appendChild(r),this._icon=TR(Hr.sparkle),this._icon.style.display="none",r.appendChild(this._icon),this._label=document.createElement("div"),Ph(this._label,i),this._domNode.appendChild(this._label),n.appendChild(this._domNode)}t.prototype.populate=function(t){this._updateIcon(t),this._updateLabel(t)};t.prototype._updateIcon=function(t){var n;var i=!!(!((n=t.tags)===null||n===void 0)&&n.includes(te.AIGenerated));this._icon.style.display=i?"inherit":"none"};t.prototype._updateLabel=function(t){this._label.innerText=t.newSymbolName};t.getLayoutInfo=function(n){var i=n.lineHeight;return{totalHeight:i+2*t._PADDING}};t.prototype.dispose=function(){};return t}();xot._PADDING=2;var Cot,Sot=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Dot=function(t,n){return function(i,r){n(i,r,t)}};var Aot=function(){function t(t,n,i){this.model=t,this.position=n,this._providerRenameIdx=0,this._providers=i.ordered(t)}t.prototype.hasProvider=function(){return this._providers.length>0};t.prototype.resolveRenameLocation=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e;return __generator(this,(function(o){switch(o.label){case 0:n=[];this._providerRenameIdx=0;o.label=1;case 1:if(!(this._providerRenameIdx<this._providers.length))return[3,4];i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)return[3,4];return[4,i.resolveRenameLocation(this.model,this.position,t)];case 2:r=o.sent();if(r){if(!r.rejectReason)return[2,r];n.push(r.rejectReason)}o.label=3;case 3:this._providerRenameIdx++;return[3,1];case 4:this._providerRenameIdx=0;e=this.model.getWordAtPosition(this.position);return[2,e?{range:new Ir(this.position.lineNumber,e.startColumn,this.position.lineNumber,e.endColumn),text:e.word,rejectReason:n.length>0?n.join("\n"):void 0}:{range:Ir.fromPositions(this.position),text:"",rejectReason:n.length>0?n.join("\n"):void 0}]}}))}))};t.prototype.provideRenameEdits=function(t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){return[2,this._provideRenameEdits(t,this._providerRenameIdx,[],n)]}))}))};t.prototype._provideRenameEdits=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o;return __generator(this,(function(s){switch(s.label){case 0:e=this._providers[n];if(!e)return[2,{edits:[],rejectReason:i.join("\n")}];return[4,e.provideRenameEdits(this.model,this.position,t,r)];case 1:o=s.sent();return[2,o?o.rejectReason?this._provideRenameEdits(t,n+1,i.concat(o.rejectReason),r):o:this._provideRenameEdits(t,n+1,i.concat(ht(0,"No result.")),r)]}}))}))};return t}();var Oot=Cot=function(){function t(t,n,i,r,e,o,s,u,a){this.editor=t,this._instaService=n,this._notificationService=i,this._bulkEditService=r,this._progressService=e,this._logService=o,this._configService=s,this._languageFeaturesService=u,this._telemetryService=a,this._disposableStore=new hi,this._cts=new ji,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(yot,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}t.get=function(t){return t.getContribution(Cot.ID)};t.prototype.dispose=function(){this._disposableStore.dispose(),this._cts.dispose(!0)};t.prototype.run=function(){return __awaiter(this,void 0,void 0,(function(){var t,n,i,r,e,o,s,u,a,h,c,f,l,v,d;var g=this;return __generator(this,(function(p){switch(p.label){case 0:i=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new ji,!this.editor.hasModel())return[2,void i("editor has no model")];r=this.editor.getPosition(),e=new Aot(this.editor.getModel(),r,this._languageFeaturesService.renameProvider);if(!e.hasProvider())return[2,void i("skeleton has no provider")];o=new YQ(this.editor,5,void 0,this._cts.token);p.label=1;case 1:p.trys.push([1,3,4,5]);i("resolving rename location");u=e.resolveRenameLocation(o.token);this._progressService.showWhile(u,250);return[4,u];case 2:s=p.sent(),i("resolved rename location");return[3,5];case 3:a=p.sent();return[2,void(a instanceof Yn?i("resolve rename location cancelled",JSON.stringify(a,null,"\t")):(i("resolve rename location failed",a instanceof Error?a:JSON.stringify(a,null,"\t")),(typeof a=="string"||GT(a))&&((t=q0.get(this.editor))===null||t===void 0||t.showMessage(a||ht(0,"An unknown error occurred while resolving rename location"),r))))];case 4:o.dispose();return[7];case 5:if(!s)return[2,void i("returning early - no loc")];if(s.rejectReason)return[2,(i("returning early - rejected with reason: ".concat(s.rejectReason),s.rejectReason),void((n=q0.get(this.editor))===null||n===void 0||n.showMessage(s.rejectReason,r)))];if(o.token.isCancellationRequested)return[2,void i("returning early - cts1 cancelled")];h=new YQ(this.editor,5,s.range,this._cts.token),c=this.editor.getModel(),f=this._languageFeaturesService.newSymbolNamesProvider.all(c);i("creating rename input field and awaiting its result");l=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview");return[4,this._renameWidget.getInput(s.range,s.text,l,(function(t){return f.map((function(n){return n.provideNewSymbolNames(c,s.range,t)}))}),h)];case 6:v=p.sent();if(i("received response from rename input field"),f.length>0&&this._reportTelemetry(f.length,c.getLanguageId(),v),typeof v=="boolean")return[2,(i("returning early - rename input field response - ".concat(v)),v&&this.editor.focus(),void h.dispose())];this.editor.focus(),i("requesting rename edits");d=Ds(e.provideRenameEdits(v.newName,h.token),h.token).then((function(t){return __awaiter(g,void 0,void 0,(function(){var n=this;return __generator(this,(function(r){if(t)if(this.editor.hasModel()){if(t.rejectReason)return[2,(i("returning early - rejected with reason: ".concat(t.rejectReason)),void this._notificationService.info(t.rejectReason))];this.editor.setSelection(Ir.fromPositions(this.editor.getSelection().getPosition())),i("applying edits"),this._bulkEditService.apply(t,{editor:this.editor,showPreview:v.wantsPreview,label:ht(0,"Renaming '{0}' to '{1}'",s==null?void 0:s.text,v.newName),code:"undoredo.rename",quotableLabel:ht(0,"Renaming {0} to {1}",s==null?void 0:s.text,v.newName),respectAutoSaveConfig:!0}).then((function(t){i("edits applied"),t.ariaSummary&&yw(ht(0,"Successfully renamed '{0}' to '{1}'. Summary: {2}",s.text,v.newName,t.ariaSummary))})).catch((function(t){i("error when applying edits ".concat(JSON.stringify(t,null,"\t"))),n._notificationService.error(ht(0,"Rename failed to apply edits")),n._logService.error(t)}))}else i("returning early - no model after rename edits are provided");else i("returning early - no rename edits result");return[2]}))}))}),(function(t){i("error when providing rename edits",JSON.stringify(t,null,"\t")),g._notificationService.error(ht(0,"Rename failed to compute edits")),g._logService.error(t)})).finally((function(){h.dispose()}));return[2,(i("returning rename operation"),this._progressService.showWhile(d,250),d)]}}))}))};t.prototype.acceptRenameInput=function(t){this._renameWidget.acceptInput(t)};t.prototype.cancelRenameInput=function(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")};t.prototype.focusNextRenameSuggestion=function(){this._renameWidget.focusNextRenameSuggestion()};t.prototype.focusPreviousRenameSuggestion=function(){this._renameWidget.focusPreviousRenameSuggestion()};t.prototype._reportTelemetry=function(t,n,i){var r=typeof i=="boolean"?{kind:"cancelled",languageId:n,nRenameSuggestionProviders:t}:{kind:"accepted",languageId:n,nRenameSuggestionProviders:t,source:i.stats.source.k,nRenameSuggestions:i.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:i.stats.timeBeforeFirstInputFieldEdit,wantsPreview:i.wantsPreview};this._telemetryService.publicLog2("renameInvokedEvent",r)};return t}();Oot.ID="editor.contrib.renameController",Oot=Cot=Sot([Dot(1,Jh),Dot(2,EL),Dot(3,QI),Dot(4,BB),Dot(5,kf),Dot(6,Yg),Dot(7,tp),Dot(8,_f)],Oot);Pf(Oot.ID,Oot,4),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.rename",label:ht(0,"Rename Symbol"),alias:"Rename Symbol",precondition:Dc.and($C.writable,$C.hasRenameProvider),kbOpts:{kbExpr:$C.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})||this}n.prototype.runCommand=function(n,i){var r=this;var e=n.get(Qh),o=Array.isArray(i)&&i||[void 0,void 0],s=o[0],u=o[1];return Cr.isUri(s)&&Tr.isIPosition(u)?e.openCodeEditor({resource:s},e.getActiveCodeEditor()).then((function(t){t&&(t.setPosition(u),t.invokeWithinContext((function(n){return r.reportTelemetry(n,t),r.run(n,t)})))}),Gn):t.prototype.runCommand.call(this,n,i)};n.prototype.run=function(t,n){var i=t.get(kf),r=Oot.get(n);return r?(i.trace("[RenameAction] got controller, running..."),r.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())};return n}(Lf));var Eot=Ff.bindToContribution(Oot.get);If(new Eot({id:"acceptRenameInput",precondition:bot,handler:function(t){return t.acceptRenameInput(!1)},kbOpts:{weight:199,kbExpr:Dc.and($C.focus,Dc.not("isComposing")),primary:3}})),If(new Eot({id:"acceptRenameInputWithPreview",precondition:Dc.and(bot,Dc.has("config.editor.rename.enablePreview")),handler:function(t){return t.acceptRenameInput(!0)},kbOpts:{weight:199,kbExpr:Dc.and($C.focus,Dc.not("isComposing")),primary:2051}})),If(new Eot({id:"cancelRenameInput",precondition:bot,handler:function(t){return t.cancelRenameInput()},kbOpts:{weight:199,kbExpr:$C.focus,primary:9,secondary:[1033]}})),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"focusNextRenameSuggestion",title:__assign({},ct(0,"Focus Next Rename Suggestion")),precondition:bot,keybinding:[{primary:2,secondary:[18],weight:199}]})||this}n.prototype.run=function(t){var n=t.get(Qh).getFocusedCodeEditor();if(!n)return;var i=Oot.get(n);i&&i.focusNextRenameSuggestion()};return n}(bf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"focusPreviousRenameSuggestion",title:__assign({},ct(0,"Focus Previous Rename Suggestion")),precondition:bot,keybinding:[{primary:1026,secondary:[16],weight:199}]})||this}n.prototype.run=function(t){var n=t.get(Qh).getFocusedCodeEditor();if(!n)return;var i=Oot.get(n);i&&i.focusPreviousRenameSuggestion()};return n}(bf)),Tf("_executeDocumentRenameProvider",(function(t,n,i){var r=[];for(var e=3;e<arguments.length;e++){r[e-3]=arguments[e]}var o=r[0];Z(typeof o=="string");var s=t.get(tp).renameProvider;return function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o;return __generator(this,(function(s){switch(s.label){case 0:e=new Aot(n,i,t);return[4,e.resolveRenameLocation(Fi.None)];case 1:o=s.sent();return[2,o!=null&&o.rejectReason?{edits:[],rejectReason:o.rejectReason}:e.provideRenameEdits(r,Fi.None)]}}))}))}(s,n,i,o)})),Tf("_executePrepareRename",(function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o;return __generator(this,(function(s){switch(s.label){case 0:r=t.get(tp).renameProvider,e=new Aot(n,i,r);return[4,e.resolveRenameLocation(Fi.None)];case 1:o=s.sent();if(o!=null&&o.rejectReason)throw new Error(o.rejectReason);return[2,o]}}))}))})),of.as(ev).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:ht(0,"Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var Mot=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Fot=function(t,n){return function(i,r){n(i,r,t)}};var Lot=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.editor=n,e.languageConfigurationService=i,e.editorWorkerService=r,e.decorations=e.editor.createDecorationsCollection(),e.options=e.createOptions(n.getOption(73)),e.computePromise=null,e.currentOccurrences={},e._register(n.onDidChangeModel((function(t){e.currentOccurrences={},e.options=e.createOptions(n.getOption(73)),e.stop(),e.computeSectionHeaders.schedule(0)}))),e._register(n.onDidChangeModelLanguage((function(t){e.currentOccurrences={},e.options=e.createOptions(n.getOption(73)),e.stop(),e.computeSectionHeaders.schedule(0)}))),e._register(i.onDidChange((function(t){var i;var r=(i=e.editor.getModel())===null||i===void 0?void 0:i.getLanguageId();r&&t.affects(r)&&(e.currentOccurrences={},e.options=e.createOptions(n.getOption(73)),e.stop(),e.computeSectionHeaders.schedule(0))}))),e._register(n.onDidChangeConfiguration((function(t){e.options&&!t.hasChanged(73)||(e.options=e.createOptions(n.getOption(73)),e.updateDecorations([]),e.stop(),e.computeSectionHeaders.schedule(0))}))),e._register(e.editor.onDidChangeModelContent((function(t){e.computeSectionHeaders.schedule()}))),e.computeSectionHeaders=e._register(new Ts((function(){e.findSectionHeaders()}),250)),e.computeSectionHeaders.schedule(0);return e}n.prototype.createOptions=function(t){if(!t||!this.editor.hasModel())return;var n=this.editor.getModel().getLanguageId();if(!n)return;var i=this.languageConfigurationService.getLanguageConfiguration(n).comments,r=this.languageConfigurationService.getLanguageConfiguration(n).foldingRules;return i||r!=null&&r.markers?{foldingRules:r,findMarkSectionHeaders:t.showMarkSectionHeaders,findRegionSectionHeaders:t.showRegionSectionHeaders}:void 0};n.prototype.findSectionHeaders=function(){var t=this;var n,i;if(!this.editor.hasModel()||!(!((n=this.options)===null||n===void 0)&&n.findMarkSectionHeaders)&&!(!((i=this.options)===null||i===void 0)&&i.findRegionSectionHeaders))return;var r=this.editor.getModel();if(r.isDisposed()||r.isTooLargeForSyncing())return;var e=r.getVersionId();this.editorWorkerService.findSectionHeaders(r.uri,this.options).then((function(n){r.isDisposed()||r.getVersionId()!==e||t.updateDecorations(n)}))};n.prototype.updateDecorations=function(t){var n=this;var i=this.editor.getModel();i&&(t=t.filter((function(t){if(!t.shouldBeInComments)return!0;var n=i.validateRange(t.range),r=i.tokenization.getLineTokens(n.startLineNumber),e=r.findTokenIndexAtOffset(n.startColumn-1),o=r.getStandardTokenType(e);return r.getLanguageId(e)===i.getLanguageId()&&o===1})));var r=Object.values(this.currentOccurrences).map((function(t){return t.decorationId})),e=t.map((function(t){return function(t){return{range:t.range,options:PM.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:t.hasSeparatorLine?2:1,sectionHeaderText:t.text}})}}(t)}));this.editor.changeDecorations((function(i){var o=i.deltaDecorations(r,e);n.currentOccurrences={};for(var s=0,u=o.length;s<u;s++){var a={sectionHeader:t[s],decorationId:o[s]};n.currentOccurrences[a.decorationId]=a}}))};n.prototype.stop=function(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)};n.prototype.dispose=function(){t.prototype.dispose.call(this),this.stop(),this.decorations.clear()};return n}(ci);function jot(t){var n=new Uint32Array(function(t){var n=0;if(n+=2,t.type==="full")n+=1+t.data.length;else{n+=1,n+=3*t.deltas.length;for(var i=0,r=t.deltas;i<r.length;i++){var e=r[i];e.data&&(n+=e.data.length)}}return n}(t));var i=0;if(n[i++]=t.id,t.type==="full")n[i++]=1,n[i++]=t.data.length,n.set(t.data,i),i+=t.data.length;else{n[i++]=2,n[i++]=t.deltas.length;for(var r=0,e=t.deltas;r<e.length;r++){var o=e[r];n[i++]=o.start,n[i++]=o.deleteCount,o.data?(n[i++]=o.data.length,n.set(o.data,i),i+=o.data.length):n[i++]=0}}return function(t){var n=new Uint8Array(t.buffer,t.byteOffset,4*t.length);return Vt()||function(t){for(var n=0,i=t.length;n<i;n+=4){var r=t[n+0],e=t[n+1],o=t[n+2],s=t[n+3];t[n+0]=s,t[n+1]=o,t[n+2]=e,t[n+3]=r}}(n),yl.wrap(n)}(n)}function Rot(t){return t&&!!t.data}function Tot(t){return t&&Array.isArray(t.edits)}Lot.ID="editor.sectionHeaderDetector",Lot=Mot([Fot(1,xv),Fot(2,vH)],Lot),Pf(Lot.ID,Lot,1);var Iot=function(){function t(t,n,i){this.provider=t,this.tokens=n,this.error=i}return t}();function Bot(t,n){return t.has(n)}function Not(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h;var c=this;return __generator(this,(function(f){switch(f.label){case 0:o=function(t,n){var i=t.orderedGroups(n);return i.length>0?i[0]:[]}(t,n);return[4,Promise.all(o.map((function(t){return __awaiter(c,void 0,void 0,(function(){var o,s,u;return __generator(this,(function(a){switch(a.label){case 0:s=null;a.label=1;case 1:a.trys.push([1,3,,4]);return[4,t.provideDocumentSemanticTokens(n,t===i?r:null,e)];case 2:o=a.sent();return[3,4];case 3:u=a.sent();s=u,o=null;return[3,4];case 4:return[2,(o&&(Rot(o)||Tot(o))||(o=null),new Iot(t,o,s))]}}))}))})))];case 1:s=f.sent();for(u=0,a=s;u<a.length;u++){h=a[u];if(h.error)throw h.error;if(h.tokens)return[2,h]}return[2,s.length>0?s[0]:null]}}))}))}var Pot=function(){function t(t,n){this.provider=t,this.tokens=n}return t}();function Wot(t,n){var i=t.orderedGroups(n);return i.length>0?i[0]:[]}function Hot(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a;var h=this;return __generator(this,(function(c){switch(c.label){case 0:e=Wot(t,n);return[4,Promise.all(e.map((function(t){return __awaiter(h,void 0,void 0,(function(){var e,o;return __generator(this,(function(s){switch(s.label){case 0:s.trys.push([0,2,,3]);return[4,t.provideDocumentRangeSemanticTokens(n,i,r)];case 1:e=s.sent();return[3,3];case 2:o=s.sent();$n(o),e=null;return[3,3];case 3:return[2,(e&&Rot(e)||(e=null),new Pot(t,e))]}}))}))})))];case 1:o=c.sent();for(s=0,u=o;s<u.length;s++){a=u[s];if(a.tokens)return[2,a]}return[2,o.length>0?o[0]:null]}}))}))}hc.registerCommand("_provideDocumentSemanticTokensLegend",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(a,void 0,void 0,(function(){var i,r,e,o;return __generator(this,(function(s){i=n[0];Z(i instanceof Cr);r=t.get(Yh).getModel(i);if(!r)return[2];e=t.get(tp).documentSemanticTokensProvider,o=function(t,n){var i=t.orderedGroups(n);return i.length>0?i[0]:null}(e,r);return[2,o?o[0].getLegend():t.get(ac).executeCommand("_provideDocumentRangeSemanticTokensLegend",i)]}))}))})),hc.registerCommand("_provideDocumentSemanticTokens",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(a,void 0,void 0,(function(){var i,r,e,o,s,u,a;return __generator(this,(function(h){switch(h.label){case 0:i=n[0];Z(i instanceof Cr);r=t.get(Yh).getModel(i);if(!r)return[2];e=t.get(tp).documentSemanticTokensProvider;if(!Bot(e,r))return[2,t.get(ac).executeCommand("_provideDocumentRangeSemanticTokens",i,r.getFullModelRange())];return[4,Not(e,r,null,null,Fi.None)];case 1:o=h.sent();if(!o)return[2];s=o.provider,u=o.tokens;if(!u||!Rot(u))return[2];a=jot({id:0,type:"full",data:u.data});return[2,(u.resultId&&s.releaseDocumentSemanticTokens(u.resultId),a)]}}))}))})),hc.registerCommand("_provideDocumentRangeSemanticTokensLegend",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(a,void 0,void 0,(function(){var i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:i=n[0],r=n[1];Z(i instanceof Cr);e=t.get(Yh).getModel(i);if(!e)return[2];o=t.get(tp).documentRangeSemanticTokensProvider,s=Wot(o,e);if(s.length===0)return[2];if(s.length===1)return[2,s[0].getLegend()];if(!r||!Ir.isIRange(r))return[2,(console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),s[0].getLegend())];return[4,Hot(o,e,Ir.lift(r),Fi.None)];case 1:u=a.sent();return[2,u?u.provider.getLegend():void 0]}}))}))})),hc.registerCommand("_provideDocumentRangeSemanticTokens",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(a,void 0,void 0,(function(){var i,r,e,o,s;return __generator(this,(function(u){switch(u.label){case 0:i=n[0],r=n[1];Z(i instanceof Cr),Z(Ir.isIRange(r));e=t.get(Yh).getModel(i);if(!e)return[2];o=t.get(tp).documentRangeSemanticTokensProvider;return[4,Hot(o,e,Ir.lift(r),Fi.None)];case 1:s=u.sent();return[2,s&&s.tokens?jot({id:0,type:"full",data:s.tokens.data}):void 0]}}))}))}));var zot="editor.semanticHighlighting";function Uot(t,n,i){var r;var e=(r=i.getValue(zot,{overrideIdentifier:t.getLanguageId(),resource:t.uri}))===null||r===void 0?void 0:r.enabled;return typeof e=="boolean"?e:n.getColorTheme().semanticHighlighting}var Kot,Vot=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},qot=function(t,n){return function(i,r){n(i,r,t)}};var Got=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._watchers=Object.create(null);var a=function(t){u._watchers[t.uri.toString()]=new $ot(t,n,r,o,s)},h=function(t,n){n.dispose(),delete u._watchers[t.uri.toString()]},c=function(){for(var t=0,n=i.getModels();t<n.length;t++){var o=n[t];var s=u._watchers[o.uri.toString()];Uot(o,r,e)?s||a(o):s&&h(o,s)}};i.getModels().forEach((function(t){Uot(t,r,e)&&a(t)})),u._register(i.onModelAdded((function(t){Uot(t,r,e)&&a(t)}))),u._register(i.onModelRemoved((function(t){var n=u._watchers[t.uri.toString()];n&&h(t,n)}))),u._register(e.onDidChangeConfiguration((function(t){t.affectsConfiguration(zot)&&c()}))),u._register(r.onDidColorThemeChange(c));return u}n.prototype.dispose=function(){for(var n=0,i=Object.values(this._watchers);n<i.length;n++){var r=i[n];r.dispose()}t.prototype.dispose.call(this)};return n}(ci);Got=Vot([qot(0,Nj),qot(1,Yh),qot(2,zk),qot(3,Kl),qot(4,Cj),qot(5,tp)],Got);var $ot=Kot=function(t){__extends(n,t);function n(i,r,e,o,s){var u=this;u=t.call(this)||this,u._semanticTokensStylingService=r,u._isDisposed=!1,u._model=i,u._provider=s.documentSemanticTokensProvider,u._debounceInformation=o.for(u._provider,"DocumentSemanticTokens",{min:n.REQUEST_MIN_DELAY,max:n.REQUEST_MAX_DELAY}),u._fetchDocumentSemanticTokens=u._register(new Ts((function(){return u._fetchDocumentSemanticTokensNow()}),n.REQUEST_MIN_DELAY)),u._currentDocumentResponse=null,u._currentDocumentRequestCancellationTokenSource=null,u._documentProvidersChangeListeners=[],u._providersChangedDuringRequest=!1,u._register(u._model.onDidChangeContent((function(){u._fetchDocumentSemanticTokens.isScheduled()||u._fetchDocumentSemanticTokens.schedule(u._debounceInformation.get(u._model))}))),u._register(u._model.onDidChangeAttached((function(){u._fetchDocumentSemanticTokens.isScheduled()||u._fetchDocumentSemanticTokens.schedule(u._debounceInformation.get(u._model))}))),u._register(u._model.onDidChangeLanguage((function(){u._currentDocumentResponse&&(u._currentDocumentResponse.dispose(),u._currentDocumentResponse=null),u._currentDocumentRequestCancellationTokenSource&&(u._currentDocumentRequestCancellationTokenSource.cancel(),u._currentDocumentRequestCancellationTokenSource=null),u._setDocumentSemanticTokens(null,null,null,[]),u._fetchDocumentSemanticTokens.schedule(0)})));var a=function(){si(u._documentProvidersChangeListeners),u._documentProvidersChangeListeners=[];for(var t=0,n=u._provider.all(i);t<n.length;t++){var r=n[t];typeof r.onDidChange=="function"&&u._documentProvidersChangeListeners.push(r.onDidChange((function(){u._currentDocumentRequestCancellationTokenSource?u._providersChangedDuringRequest=!0:u._fetchDocumentSemanticTokens.schedule(0)})))}};a(),u._register(u._provider.onDidChange((function(){a(),u._fetchDocumentSemanticTokens.schedule(u._debounceInformation.get(u._model))}))),u._register(e.onDidColorThemeChange((function(t){u._setDocumentSemanticTokens(null,null,null,[]),u._fetchDocumentSemanticTokens.schedule(u._debounceInformation.get(u._model))}))),u._fetchDocumentSemanticTokens.schedule(0);return u}n.prototype.dispose=function(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),si(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,t.prototype.dispose.call(this)};n.prototype._fetchDocumentSemanticTokensNow=function(){var t=this;if(this._currentDocumentRequestCancellationTokenSource)return;if(!Bot(this._provider,this._model))return void(this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1));if(!this._model.isAttachedToEditor())return;var n=new ji,i=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,r=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,e=Not(this._provider,this._model,i,r,n.token);this._currentDocumentRequestCancellationTokenSource=n,this._providersChangedDuringRequest=!1;var o=[],s=this._model.onDidChangeContent((function(t){o.push(t)})),u=new pi(!1);e.then((function(n){if(t._debounceInformation.update(t._model,u.elapsed()),t._currentDocumentRequestCancellationTokenSource=null,s.dispose(),n){var i=n.provider,r=n.tokens,e=t._semanticTokensStylingService.getStyling(i);t._setDocumentSemanticTokens(i,r||null,e,o)}else t._setDocumentSemanticTokens(null,null,null,o)}),(function(n){n&&(Qn(n)||typeof n.message=="string"&&n.message.indexOf("busy")!==-1)||Gn(n),t._currentDocumentRequestCancellationTokenSource=null,s.dispose(),(o.length>0||t._providersChangedDuringRequest)&&(t._fetchDocumentSemanticTokens.isScheduled()||t._fetchDocumentSemanticTokens.schedule(t._debounceInformation.get(t._model)))}))};n._copy=function(t,n,i,r,e){e=Math.min(e,i.length-r,t.length-n);for(var o=0;o<e;o++)i[r+o]=t[n+o]};n.prototype._setDocumentSemanticTokens=function(t,i,r,e){var o=this;var s=this._currentDocumentResponse,u=function(){(e.length>0||o._providersChangedDuringRequest)&&!o._fetchDocumentSemanticTokens.isScheduled()&&o._fetchDocumentSemanticTokens.schedule(o._debounceInformation.get(o._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed)t&&i&&t.releaseDocumentSemanticTokens(i.resultId);else if(t&&r){if(!i)return this._model.tokenization.setSemanticTokens(null,!0),void u();if(Tot(i)){if(!s)return void this._model.tokenization.setSemanticTokens(null,!0);if(i.edits.length===0)i={resultId:i.resultId,data:s.data};else{var a=0;for(var h=0,c=i.edits;h<c.length;h++){var f=c[h];a+=(f.data?f.data.length:0)-f.deleteCount}var l=s.data,v=new Uint32Array(l.length+a);var d=l.length,g=v.length;for(var f=i.edits.length-1;f>=0;f--){var p=i.edits[f];if(p.start>l.length)return r.warnInvalidEditStart(s.resultId,i.resultId,f,p.start,l.length),void this._model.tokenization.setSemanticTokens(null,!0);var w=d-(p.start+p.deleteCount);w>0&&(n._copy(l,d-w,v,g-w,w),g-=w),p.data&&(n._copy(p.data,0,v,g-p.data.length,p.data.length),g-=p.data.length),d=p.start}d>0&&n._copy(l,0,v,0,d),i={resultId:i.resultId,data:v}}}if(Rot(i)){this._currentDocumentResponse=new Jot(t,i.resultId,i.data);var a=Tj(i,r,this._model.getLanguageId());if(e.length>0)for(var m=0,b=e;m<b.length;m++){var l=b[m];for(var y=0,_=a;y<_.length;y++){var v=_[y];for(var k=0,x=l.changes;k<x.length;k++){var d=x[k];v.applyEdit(d.range,d.text)}}}this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);u()}else this._model.tokenization.setSemanticTokens(null,!1)};return n}(ci);$ot.REQUEST_MIN_DELAY=300,$ot.REQUEST_MAX_DELAY=2e3,$ot=Kot=Vot([qot(1,Nj),qot(2,zk),qot(3,Cj),qot(4,tp)],$ot);var Jot=function(){function t(t,n,i){this.provider=t,this.resultId=n,this.data=i}t.prototype.dispose=function(){this.provider.releaseDocumentSemanticTokens(this.resultId)};return t}();yG(Got);var Zot=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Qot=function(t,n){return function(i,r){n(i,r,t)}};var Yot=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this)||this,u._semanticTokensStylingService=i,u._themeService=r,u._configurationService=e,u._editor=n,u._provider=s.documentRangeSemanticTokensProvider,u._debounceInformation=o.for(u._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),u._tokenizeViewport=u._register(new Ts((function(){return u._tokenizeViewportNow()}),100)),u._outstandingRequests=[];var a=function(){u._editor.hasModel()&&u._tokenizeViewport.schedule(u._debounceInformation.get(u._editor.getModel()))};u._register(u._editor.onDidScrollChange((function(){a()}))),u._register(u._editor.onDidChangeModel((function(){u._cancelAll(),a()}))),u._register(u._editor.onDidChangeModelContent((function(t){u._cancelAll(),a()}))),u._register(u._provider.onDidChange((function(){u._cancelAll(),a()}))),u._register(u._configurationService.onDidChangeConfiguration((function(t){t.affectsConfiguration(zot)&&(u._cancelAll(),a())}))),u._register(u._themeService.onDidColorThemeChange((function(){u._cancelAll(),a()}))),a();return u}n.prototype._cancelAll=function(){for(var t=0,n=this._outstandingRequests;t<n.length;t++){var i=n[t];i.cancel()}this._outstandingRequests=[]};n.prototype._removeOutstandingRequest=function(t){for(var n=0,i=this._outstandingRequests.length;n<i;n++)if(this._outstandingRequests[n]===t)return void this._outstandingRequests.splice(n,1)};n.prototype._tokenizeViewportNow=function(){var t=this;if(!this._editor.hasModel())return;var n=this._editor.getModel();if(n.tokenization.hasCompleteSemanticTokens())return;if(!Uot(n,this._themeService,this._configurationService)||!function(t,n){return t.has(n)}(this._provider,n))return void(n.tokenization.hasSomeSemanticTokens()&&n.tokenization.setSemanticTokens(null,!1));var i=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(i.map((function(i){return t._requestRange(n,i)})))};n.prototype._requestRange=function(t,n){var i=this;var r=t.getVersionId(),e=Ss((function(r){return Promise.resolve(Hot(i._provider,t,n,r))})),o=new pi(!1);return e.then((function(e){if(i._debounceInformation.update(t,o.elapsed()),!e||!e.tokens||t.isDisposed()||t.getVersionId()!==r)return;var s=e.provider,u=e.tokens,a=i._semanticTokensStylingService.getStyling(s);t.tokenization.setPartialSemanticTokens(n,Tj(u,a,t.getLanguageId()))})).then((function(){return i._removeOutstandingRequest(e)}),(function(){return i._removeOutstandingRequest(e)})),e};return n}(ci);Yot.ID="editor.contrib.viewportSemanticTokens",Yot=Zot([Qot(1,Nj),Qot(2,zk),Qot(3,Kl),Qot(4,Cj),Qot(5,tp)],Yot),Pf(Yot.ID,Yot,1);var Xot=function(){function t(t){if(t===void 0){t=!0}this.selectSubwords=t}t.prototype.provideSelectionRanges=function(t,n){var i=[];for(var r=0,e=n;r<e.length;r++){var o=e[r];var s=[];i.push(s),this.selectSubwords&&this._addInWordRanges(s,t,o),this._addWordRanges(s,t,o),this._addWhitespaceLine(s,t,o),s.push({range:t.getFullModelRange()})}return i};t.prototype._addInWordRanges=function(t,n,i){var r=n.getWordAtPosition(i);if(!r)return;var e=r.word,o=r.startColumn,s=i.column-o;var u=s,a=s,h=0;for(;u>=0;u--){var c=e.charCodeAt(u);if(u!==s&&(c===95||c===45)||ko(c)&&xo(h))break;h=c}for(u+=1;a<e.length;a++){var c=e.charCodeAt(a);if(xo(c)&&ko(h)||c===95||c===45)break;h=c}u<a&&t.push({range:new Ir(i.lineNumber,o+u,i.lineNumber,o+a)})};t.prototype._addWordRanges=function(t,n,i){var r=n.getWordAtPosition(i);r&&t.push({range:new Ir(i.lineNumber,r.startColumn,i.lineNumber,r.endColumn)})};t.prototype._addWhitespaceLine=function(t,n,i){n.getLineLength(i.lineNumber)>0&&n.getLineFirstNonWhitespaceColumn(i.lineNumber)===0&&n.getLineLastNonWhitespaceColumn(i.lineNumber)===0&&t.push({range:new Ir(i.lineNumber,1,i.lineNumber,n.getLineMaxColumn(i.lineNumber))})};return t}();var tst,nst=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},ist=function(t,n){return function(i,r){n(i,r,t)}};var rst=function(){function t(t,n){this.index=t,this.ranges=n}t.prototype.mov=function(n){var i=this.index+(n?1:-1);if(i<0||i>=this.ranges.length)return this;var r=new t(i,this.ranges);return r.ranges[i].equalsRange(this.ranges[this.index])?r.mov(n):r};return t}();var est=tst=function(){function t(t,n){this._editor=t,this._languageFeaturesService=n,this._ignoreSelection=!1}t.get=function(t){return t.getContribution(tst.ID)};t.prototype.dispose=function(){var t;(t=this._selectionListener)===null||t===void 0||t.dispose()};t.prototype.run=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e;var o=this;return __generator(this,(function(s){switch(s.label){case 0:if(!this._editor.hasModel())return[2];n=this._editor.getSelections(),i=this._editor.getModel();r=this._state;if(r)return[3,2];return[4,sst(this._languageFeaturesService.selectionRangeProvider,i,n.map((function(t){return t.getPosition()})),this._editor.getOption(113),Fi.None).then((function(t){var i;if(k(t)&&t.length===n.length&&o._editor.hasModel()&&v(o._editor.getSelections(),n,(function(t,n){return t.equalsSelection(n)}))){var r=function(i){t[i]=t[i].filter((function(t){return t.containsPosition(n[i].getStartPosition())&&t.containsPosition(n[i].getEndPosition())})),t[i].unshift(n[i])};for(var e=0;e<t.length;e++){r(e)}o._state=t.map((function(t){return new rst(0,t)})),(i=o._selectionListener)===null||i===void 0||i.dispose(),o._selectionListener=o._editor.onDidChangeCursorPosition((function(){var t;o._ignoreSelection||((t=o._selectionListener)===null||t===void 0||t.dispose(),o._state=void 0)}))}}))];case 1:r=s.sent();s.label=2;case 2:if(r,!this._state)return[2];this._state=this._state.map((function(n){return n.mov(t)}));e=this._state.map((function(t){return Br.fromPositions(t.ranges[t.index].getStartPosition(),t.ranges[t.index].getEndPosition())}));this._ignoreSelection=!0;try{this._editor.setSelections(e)}finally{this._ignoreSelection=!1}return[2]}}))}))};return t}();est.ID="editor.contrib.smartSelectController",est=tst=nst([ist(1,tp)],est);var ost=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r._forward=n;return r}n.prototype.run=function(t,n){return __awaiter(this,void 0,void 0,(function(){var t,i;return __generator(this,(function(r){switch(r.label){case 0:t=est.get(n);i=t;if(!i)return[3,2];return[4,t.run(this._forward)];case 1:i=r.sent();r.label=2;case 2:i;return[2]}}))}))};return n}(Lf);hc.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");function sst(t,n,i,r,e){return __awaiter(this,void 0,void 0,(function(){var o,s,u,a,h,c;return __generator(this,(function(f){switch(f.label){case 0:o=t.all(n).concat(new Xot(r.selectSubwords));o.length===1&&o.unshift(new jnt);s=[],u=[];for(a=0,h=o;a<h.length;a++){c=h[a];s.push(Promise.resolve(c.provideSelectionRanges(n,i,e)).then((function(t){if(k(t)&&t.length===i.length)for(var n=0;n<i.length;n++){u[n]||(u[n]=[]);for(var r=0,e=t[n];r<e.length;r++){var o=e[r];Ir.isIRange(o.range)&&Ir.containsPosition(o.range,i[n])&&u[n].push(Ir.lift(o.range))}}}),$n))}return[4,Promise.all(s)];case 1:return[2,(f.sent(),u.map((function(t){if(t.length===0)return[];t.sort((function(t,n){return Tr.isBefore(t.getStartPosition(),n.getStartPosition())?1:Tr.isBefore(n.getStartPosition(),t.getStartPosition())||Tr.isBefore(t.getEndPosition(),n.getEndPosition())?-1:Tr.isBefore(n.getEndPosition(),t.getEndPosition())?1:0}));var i=[];var e;for(var o=0,s=t;o<s.length;o++){var u=s[o];(!e||Ir.containsRange(u,e)&&!Ir.equalsRange(u,e))&&(i.push(u),e=u)}if(!r.selectLeadingAndTrailingWhitespace)return i;var a=[i[0]];for(var u=1;u<i.length;u++){var h=i[u-1],c=i[u];if(c.startLineNumber!==h.startLineNumber||c.endLineNumber!==h.endLineNumber){var f=new Ir(h.startLineNumber,n.getLineFirstNonWhitespaceColumn(h.startLineNumber),h.endLineNumber,n.getLineLastNonWhitespaceColumn(h.endLineNumber));f.containsRange(h)&&!f.equalsRange(h)&&c.containsRange(f)&&!c.equalsRange(f)&&a.push(f);var l=new Ir(h.startLineNumber,1,h.endLineNumber,n.getLineMaxColumn(h.endLineNumber));l.containsRange(h)&&!l.equalsRange(f)&&c.containsRange(l)&&!c.equalsRange(l)&&a.push(l)}a.push(c)}return a})))]}}))}))}Pf(est.ID,est,4),Bf(function(t){__extends(n,t);function n(){return t.call(this,!0,{id:"editor.action.smartSelect.expand",label:ht(0,"Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:$C.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"1_basic",title:ht(0,"&&Expand Selection"),order:2}})||this}return n}(ost)),Bf(function(t){__extends(n,t);function n(){return t.call(this,!1,{id:"editor.action.smartSelect.shrink",label:ht(0,"Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:$C.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:vf.MenubarSelectionMenu,group:"1_basic",title:ht(0,"&&Shrink Selection"),order:3}})||this}return n}(ost)),hc.registerCommand("_executeSelectionRangeProvider",(function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return __awaiter(this,void 0,void 0,(function(){var i,r,e,o;return __generator(this,(function(s){switch(s.label){case 0:i=n[0],r=n[1];Z(Cr.isUri(i));e=t.get(tp).selectionRangeProvider;return[4,t.get(Xh).createModelReference(i)];case 1:o=s.sent();try{return[2,sst(e,o.object.textEditorModel,r,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},Fi.None)]}finally{o.dispose()}return[2]}}))}))}));var ust=Object.freeze({View:ct(0,"View"),Help:ct(0,"Help"),Test:ct(0,"Test"),File:ct(0,"File"),Preferences:ct(0,"Preferences"),Developer:ct(0,"Developer")});var ast=function(){function t(t,n,i,r){if(r===void 0){r=null}this.startLineNumbers=t,this.endLineNumbers=n,this.lastLineRelativePosition=i,this.showEndForLine=r}t.prototype.equals=function(t){return!!t&&this.lastLineRelativePosition===t.lastLineRelativePosition&&this.showEndForLine===t.showEndForLine&&v(this.startLineNumbers,t.startLineNumbers)&&v(this.endLineNumbers,t.endLineNumbers)};return t}();var hst=rl("stickyScrollViewLayer",{createHTML:function(t){return t}}),cst="data-sticky-line-index",fst="data-sticky-is-line",lst="data-sticky-is-folding-icon";var vst=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._editor=n,i._foldingIconStore=new hi,i._rootDomNode=document.createElement("div"),i._lineNumbersDomNode=document.createElement("div"),i._linesDomNodeScrollable=document.createElement("div"),i._linesDomNode=document.createElement("div"),i._lineHeight=i._editor.getOption(67),i._renderedStickyLines=[],i._lineNumbers=[],i._lastLineRelativePosition=0,i._minContentWidthInPx=0,i._isOnGlyphMargin=!1,i._lineNumbersDomNode.className="sticky-widget-line-numbers",i._lineNumbersDomNode.setAttribute("role","none"),i._linesDomNode.className="sticky-widget-lines",i._linesDomNode.setAttribute("role","list"),i._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",i._linesDomNodeScrollable.appendChild(i._linesDomNode),i._rootDomNode.className="sticky-widget",i._rootDomNode.classList.toggle("peek",n instanceof O4),i._rootDomNode.appendChild(i._lineNumbersDomNode),i._rootDomNode.appendChild(i._linesDomNodeScrollable);var r=function(){i._linesDomNode.style.left=i._editor.getOption(115).scrollWithEditor?"-".concat(i._editor.getScrollLeft(),"px"):"0px"};i._register(i._editor.onDidChangeConfiguration((function(t){t.hasChanged(115)&&r(),t.hasChanged(67)&&(i._lineHeight=i._editor.getOption(67))}))),i._register(i._editor.onDidScrollChange((function(t){t.scrollLeftChanged&&r(),t.scrollWidthChanged&&i._updateWidgetWidth()}))),i._register(i._editor.onDidChangeModel((function(){r(),i._updateWidgetWidth()}))),i._register(i._foldingIconStore),r(),i._register(i._editor.onDidLayoutChange((function(t){i._updateWidgetWidth()}))),i._updateWidgetWidth();return i}Object.defineProperty(n.prototype,"lineNumbers",{get:function(){return this._lineNumbers},enumerable:false,configurable:true});Object.defineProperty(n.prototype,"lineNumberCount",{get:function(){return this._lineNumbers.length},enumerable:false,configurable:true});n.prototype.getRenderedStickyLine=function(t){return this._renderedStickyLines.find((function(n){return n.lineNumber===t}))};n.prototype.getCurrentLines=function(){return this._lineNumbers};n.prototype.setState=function(t,n,i){if(i===void 0&&(!this._previousState&&!t||this._previousState&&this._previousState.equals(t)))return;var r=this._isWidgetHeightZero(t),e=r?void 0:t,o=r?0:this._findLineToRebuildWidgetFrom(t,i);this._renderRootNode(e,n,o),this._previousState=t};n.prototype._isWidgetHeightZero=function(t){if(!t)return!0;var n=t.startLineNumbers.length*this._lineHeight+t.lastLineRelativePosition;if(n>0){this._lastLineRelativePosition=t.lastLineRelativePosition;var i=__spreadArray([],t.startLineNumbers,true);t.showEndForLine!==null&&(i[t.showEndForLine]=t.endLineNumbers[t.showEndForLine]),this._lineNumbers=i}else this._lastLineRelativePosition=0,this._lineNumbers=[];return n===0};n.prototype._findLineToRebuildWidgetFrom=function(t,n){if(!t||!this._previousState)return 0;if(n!==void 0)return n;var i=this._previousState,r=t.startLineNumbers.findIndex((function(t){return!i.startLineNumbers.includes(t)}));return r===-1?0:r};n.prototype._updateWidgetWidth=function(){var t=this._editor.getLayoutInfo(),n=t.contentLeft;this._lineNumbersDomNode.style.width="".concat(n,"px"),this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",this._editor.getScrollWidth()-t.verticalScrollbarWidth+"px"),this._rootDomNode.style.width=t.width-t.verticalScrollbarWidth+"px"};n.prototype._clearStickyLinesFromLine=function(t){this._foldingIconStore.clear();for(var n=t;n<this._renderedStickyLines.length;n++){var i=this._renderedStickyLines[n];i.lineNumberDomNode.remove(),i.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,t),this._rootDomNode.style.display="none"};n.prototype._useFoldingOpacityTransition=function(t){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition","opacity ".concat(t?.5:0,"s"))};n.prototype._setFoldingIconsVisibility=function(t){for(var n=0,i=this._renderedStickyLines;n<i.length;n++){var r=i[n];var e=r.foldingIcon;e&&e.setVisible(!!t||e.isCollapsed)}};n.prototype._renderRootNode=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u,a,h,c,o,f,l,v;return __generator(this,(function(d){if(this._clearStickyLinesFromLine(i),!t)return[2];for(r=0,e=this._renderedStickyLines;r<e.length;r++){o=e[r];this._updateTopAndZIndexOfStickyLine(o)}s=this._editor.getLayoutInfo(),u=this._lineNumbers.slice(i);for(a=0,h=u.entries();a<h.length;a++){c=h[a],o=c[0],f=c[1];l=this._renderChildNode(o+i,f,n,s);l&&(this._linesDomNode.appendChild(l.lineDomNode),this._lineNumbersDomNode.appendChild(l.lineNumberDomNode),this._renderedStickyLines.push(l))}n&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));v=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height="".concat(v,"px"),this._linesDomNodeScrollable.style.height="".concat(v,"px"),this._rootDomNode.style.height="".concat(v,"px"),this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max.apply(Math,this._renderedStickyLines.map((function(t){return t.scrollWidth})))+s.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this);return[2]}))}))};n.prototype._setFoldingHoverListeners=function(){var t=this;this._editor.getOption(110)==="mouseover"&&(this._foldingIconStore.add(ma(this._lineNumbersDomNode,ah.MOUSE_ENTER,(function(){t._isOnGlyphMargin=!0,t._setFoldingIconsVisibility(!0)}))),this._foldingIconStore.add(ma(this._lineNumbersDomNode,ah.MOUSE_LEAVE,(function(){t._isOnGlyphMargin=!1,t._useFoldingOpacityTransition(!0),t._setFoldingIconsVisibility(!1)}))))};n.prototype._renderChildNode=function(t,n,i,r){var e=this._editor._getViewModel();if(!e)return;var o=e.coordinatesConverter.convertModelPositionToViewPosition(new Tr(n,1)).lineNumber,s=e.getViewLineRenderingData(o),u=this._editor.getOption(68);var a;try{a=yp.filter(s.inlineDecorations,o,s.minColumn,s.maxColumn)}catch(t){a=[]}var h=new Dp(!0,!0,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,0,s.tokens,a,s.tabSize,s.startVisibleColumn,1,1,1,500,"none",!0,!0,null),c=new Ml(2e3),f=Mp(h,c);var l;l=hst?hst.createHTML(c.build()):c.build();var v=document.createElement("span");v.setAttribute(cst,String(t)),v.setAttribute(fst,""),v.setAttribute("role","listitem"),v.tabIndex=0,v.className="sticky-line-content",v.classList.add("stickyLine".concat(n)),v.style.lineHeight="".concat(this._lineHeight,"px"),v.innerHTML=l;var d=document.createElement("span");d.setAttribute(cst,String(t)),d.setAttribute("data-sticky-is-line-number",""),d.className="sticky-line-number",d.style.lineHeight="".concat(this._lineHeight,"px");var g=r.contentLeft;d.style.width="".concat(g,"px");var p=document.createElement("span");u.renderType===1||u.renderType===3&&n%10==0?p.innerText=n.toString():u.renderType===2&&(p.innerText=Math.abs(n-this._editor.getPosition().lineNumber).toString()),p.className="sticky-line-number-inner",p.style.lineHeight="".concat(this._lineHeight,"px"),p.style.width="".concat(r.lineNumbersWidth,"px"),p.style.paddingLeft="".concat(r.lineNumbersLeft,"px"),d.appendChild(p);var w=this._renderFoldingIconForLine(i,n);w&&d.appendChild(w.domNode),this._editor.applyFontInfo(v),this._editor.applyFontInfo(p),d.style.lineHeight="".concat(this._lineHeight,"px"),v.style.lineHeight="".concat(this._lineHeight,"px"),d.style.height="".concat(this._lineHeight,"px"),v.style.height="".concat(this._lineHeight,"px");var m=new dst(t,n,v,d,w,f.characterMapping,v.scrollWidth);return this._updateTopAndZIndexOfStickyLine(m)};n.prototype._updateTopAndZIndexOfStickyLine=function(t){var n;var i=t.index,r=t.lineDomNode,e=t.lineNumberDomNode,o=i===this._lineNumbers.length-1;r.style.zIndex=o?"0":"1",e.style.zIndex=o?"0":"1";var s="".concat(i*this._lineHeight+this._lastLineRelativePosition+(!((n=t.foldingIcon)===null||n===void 0)&&n.isCollapsed?1:0),"px"),u=i*this._lineHeight+"px";return r.style.top=o?s:u,e.style.top=o?s:u,t};n.prototype._renderFoldingIconForLine=function(t,n){var i=this._editor.getOption(110);if(!t||i==="never")return;var r=t.regions,e=r.findRange(n),o=r.getStartLineNumber(e);if(n!==o)return;var s=r.isCollapsed(e),u=new gst(s,o,r.getEndLineNumber(e),this._lineHeight);return u.setVisible(!!this._isOnGlyphMargin||s||i==="always"),u.domNode.setAttribute(lst,""),u};n.prototype.getId=function(){return"editor.contrib.stickyScrollWidget"};n.prototype.getDomNode=function(){return this._rootDomNode};n.prototype.getPosition=function(){return{preference:null}};n.prototype.getMinContentWidthInPx=function(){return this._minContentWidthInPx};n.prototype.focusLineWithIndex=function(t){0<=t&&t<this._renderedStickyLines.length&&this._renderedStickyLines[t].lineDomNode.focus()};n.prototype.getEditorPositionFromNode=function(t){if(!t||t.children.length>0)return null;var n=this._getRenderedStickyLineFromChildDomNode(t);if(!n)return null;var i=I_(n.characterMapping,t,0);return new Tr(n.lineNumber,i)};n.prototype.getLineNumberFromChildDomNode=function(t){var n,i;return(i=(n=this._getRenderedStickyLineFromChildDomNode(t))===null||n===void 0?void 0:n.lineNumber)!==null&&i!==void 0?i:null};n.prototype._getRenderedStickyLineFromChildDomNode=function(t){var n=this.getLineIndexFromChildDomNode(t);return n===null||n<0||n>=this._renderedStickyLines.length?null:this._renderedStickyLines[n]};n.prototype.getLineIndexFromChildDomNode=function(t){var n=this._getAttributeValue(t,cst);return n?parseInt(n,10):null};n.prototype.isInStickyLine=function(t){return this._getAttributeValue(t,fst)!==void 0};n.prototype.isInFoldingIconDomNode=function(t){return this._getAttributeValue(t,lst)!==void 0};n.prototype._getAttributeValue=function(t,n){for(;t&&t!==this._rootDomNode;){var i=t.getAttribute(n);if(i!==null)return i;t=t.parentElement}};return n}(ci);var dst=function(){function t(t,n,i,r,e,o,s){this.index=t,this.lineNumber=n,this.lineDomNode=i,this.lineNumberDomNode=r,this.foldingIcon=e,this.characterMapping=o,this.scrollWidth=s}return t}();var gst=function(){function t(t,n,i,r){this.isCollapsed=t,this.foldingStartLine=n,this.foldingEndLine=i,this.dimension=r,this.domNode=document.createElement("div"),this.domNode.style.width="".concat(r,"px"),this.domNode.style.height="".concat(r,"px"),this.domNode.className=uc.asClassName(t?b8:m8)}t.prototype.setVisible=function(t){this.domNode.style.cursor=t?"pointer":"default",this.domNode.style.opacity=t?"1":"0"};return t}();var pst=function(){function t(t,n){this.startLineNumber=t,this.endLineNumber=n}return t}();var wst=function(){function t(t,n,i){this.range=t,this.children=n,this.parent=i}return t}();var mst=function(){function t(t,n,i,r){this.uri=t,this.version=n,this.element=i,this.outlineProviderId=r}return t}();var bst,yst,_st=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},kst=function(t,n){return function(i,r){n(i,r,t)}};(function(t){t.OUTLINE_MODEL="outlineModel",t.FOLDING_PROVIDER_MODEL="foldingProviderModel",t.INDENTATION_MODEL="indentationModel"})(bst||(bst={})),function(t){t[t.VALID=0]="VALID",t[t.INVALID=1]="INVALID",t[t.CANCELED=2]="CANCELED"}(yst||(yst={}));var xst=function(t){__extends(n,t);function n(n,i,r,e){var o=this;switch(o=t.call(this)||this,o._editor=n,o._languageConfigurationService=r,o._languageFeaturesService=e,o._modelProviders=[],o._modelPromise=null,o._updateScheduler=o._register(new Os(300)),o._updateOperation=o._register(new hi),o._editor.getOption(115).defaultModel){case bst.OUTLINE_MODEL:o._modelProviders.push(new Sst(o._editor,e));case bst.FOLDING_PROVIDER_MODEL:o._modelProviders.push(new Ost(o._editor,i,e));case bst.INDENTATION_MODEL:o._modelProviders.push(new Ast(o._editor,r))}return o}n.prototype.dispose=function(){this._modelProviders.forEach((function(t){return t.dispose()})),this._updateOperation.clear(),this._cancelModelPromise(),t.prototype.dispose.call(this)};n.prototype._cancelModelPromise=function(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)};n.prototype.update=function(t){return __awaiter(this,void 0,void 0,(function(){var n=this;return __generator(this,(function(i){switch(i.label){case 0:this._updateOperation.clear(),this._updateOperation.add({dispose:function(){n._cancelModelPromise(),n._updateScheduler.cancel()}}),this._cancelModelPromise();return[4,this._updateScheduler.trigger((function(){return __awaiter(n,void 0,void 0,(function(){var n,i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:n=0,i=this._modelProviders;a.label=1;case 1:if(!(n<i.length))return[3,4];r=i[n];e=r.computeStickyModel(t),o=e.statusPromise,s=e.modelPromise;this._modelPromise=s;return[4,o];case 2:u=a.sent();if(this._modelPromise!==s)return[2,null];switch(u){case yst.CANCELED:return[2,(this._updateOperation.clear(),null)];case yst.VALID:return[2,r.stickyModel]}a.label=3;case 3:n++;return[3,1];case 4:return[2,null]}}))}))})).catch((function(t){return Gn(t),null}))];case 1:return[2,i.sent()]}}))}))};return n}(ci);xst=_st([kst(2,Jh),kst(3,tp)],xst);var Cst=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i._editor=n,i._stickyModel=null;return i}Object.defineProperty(n.prototype,"stickyModel",{get:function(){return this._stickyModel},enumerable:false,configurable:true});n.prototype._invalid=function(){return this._stickyModel=null,yst.INVALID};n.prototype.computeStickyModel=function(t){var n=this;if(t.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};var i=Ss((function(t){return n.createModelFromProvider(t)}));return{statusPromise:i.then((function(i){return n.isModelValid(i)?t.isCancellationRequested?yst.CANCELED:(n._stickyModel=n.createStickyModel(t,i),yst.VALID):n._invalid()})).then(void 0,(function(t){return Gn(t),yst.CANCELED})),modelPromise:i}};n.prototype.isModelValid=function(t){return!0};n.prototype.isProviderValid=function(){return!0};return n}(ci);var Sst=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n)||this,r._languageFeaturesService=i;return r}n.prototype.createModelFromProvider=function(t){return $8.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),t)};n.prototype.createStickyModel=function(t,n){var i;var r=this._stickyModelFromOutlineModel(n,(i=this._stickyModel)===null||i===void 0?void 0:i.outlineProviderId),e=r.stickyOutlineElement,o=r.providerID,s=this._editor.getModel();return new mst(s.uri,s.getVersionId(),e,o)};n.prototype.isModelValid=function(t){return t&&t.children.size>0};n.prototype._stickyModelFromOutlineModel=function(t,n){var i=this;var r;if(Yt.first(t.children.values())instanceof G8){var e=Yt.find(t.children.values(),(function(t){return t.id===n}));if(e)r=e.children;else{var o=void 0,s="",u=-1;for(var a=0,h=t.children.entries();a<h.length;a++){var c=h[a],f=c[0],l=c[1];var v=this._findSumOfRangesOfGroup(l);v>u&&(o=l,u=v,s=l.id)}n=s,r=o.children}}else r=t.children;var d=[],g=Array.from(r.values()).sort((function(t,n){var r=new pst(t.symbol.range.startLineNumber,t.symbol.range.endLineNumber),e=new pst(n.symbol.range.startLineNumber,n.symbol.range.endLineNumber);return i._comparator(r,e)}));for(var p=0,w=g;p<w.length;p++){var e=w[p];d.push(this._stickyModelFromOutlineElement(e,e.symbol.selectionRange.startLineNumber))}return{stickyOutlineElement:new wst(void 0,d,void 0),providerID:n}};n.prototype._stickyModelFromOutlineElement=function(t,n){var i=this;var r=[];for(var e=0,o=t.children.values();e<o.length;e++){var s=o[e];if(s.symbol.selectionRange.startLineNumber!==s.symbol.range.endLineNumber)if(s.symbol.selectionRange.startLineNumber!==n)r.push(this._stickyModelFromOutlineElement(s,s.symbol.selectionRange.startLineNumber));else for(var u=0,a=s.children.values();u<a.length;u++){var h=a[u];r.push(this._stickyModelFromOutlineElement(h,s.symbol.selectionRange.startLineNumber))}}r.sort((function(t,n){return i._comparator(t.range,n.range)}));var c=new pst(t.symbol.selectionRange.startLineNumber,t.symbol.range.endLineNumber);return new wst(c,r,void 0)};n.prototype._comparator=function(t,n){return t.startLineNumber!==n.startLineNumber?t.startLineNumber-n.startLineNumber:n.endLineNumber-t.endLineNumber};n.prototype._findSumOfRangesOfGroup=function(t){var n=0;for(var i=0,r=t.children.values();i<r.length;i++){var e=r[i];n+=this._findSumOfRangesOfGroup(e)}return t instanceof q8?n+t.symbol.range.endLineNumber-t.symbol.selectionRange.startLineNumber:n};return n}(Cst);Sst=_st([kst(1,tp)],Sst);var Dst=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._foldingLimitReporter=new R8(n);return i}n.prototype.createStickyModel=function(t,n){var i=this._fromFoldingRegions(n),r=this._editor.getModel();return new mst(r.uri,r.getVersionId(),i,void 0)};n.prototype.isModelValid=function(t){return t!==null};n.prototype._fromFoldingRegions=function(t){var n=t.length,i=[],r=new wst(void 0,[],void 0);for(var e=0;e<n;e++){var o=t.getParentIndex(e);var s=void 0;s=o!==-1?i[o]:r;var u=new wst(new pst(t.getStartLineNumber(e),t.getEndLineNumber(e)+1),[],s);s.children.push(u),i.push(u)}return r};return n}(Cst);var Ast=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,n)||this,r._languageConfigurationService=i,r.provider=r._register(new d8(n.getModel(),r._languageConfigurationService,r._foldingLimitReporter));return r}n.prototype.createModelFromProvider=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){return[2,this.provider.compute(t)]}))}))};return n}(Dst);Ast=_st([kst(1,xv)],Ast);var Ost=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,n)||this,e._languageFeaturesService=r;var o=j8.getFoldingRangeProviders(e._languageFeaturesService,n.getModel());o.length>0&&(e.provider=e._register(new A8(n.getModel(),o,i,e._foldingLimitReporter,void 0)));return e}n.prototype.isProviderValid=function(){return this.provider!==void 0};n.prototype.createModelFromProvider=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(r){return[2,(i=(n=this.provider)===null||n===void 0?void 0:n.compute(t))!==null&&i!==void 0?i:null]}))}))};return n}(Dst);Ost=_st([kst(2,tp)],Ost);var Est=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Mst=function(t,n){return function(i,r){n(i,r,t)}};var Fst=function(){function t(t,n,i){this.startLineNumber=t,this.endLineNumber=n,this.nestingDepth=i}return t}();var Lst=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._languageFeaturesService=i,e._languageConfigurationService=r,e._onDidChangeStickyScroll=e._register(new ki),e.onDidChangeStickyScroll=e._onDidChangeStickyScroll.event,e._model=null,e._cts=null,e._stickyModelProvider=null,e._editor=n,e._sessionStore=e._register(new hi),e._updateSoon=e._register(new Ts((function(){return e.update()}),50)),e._register(e._editor.onDidChangeConfiguration((function(t){t.hasChanged(115)&&e.readConfiguration()}))),e.readConfiguration();return e}n.prototype.readConfiguration=function(){var t=this;this._sessionStore.clear(),this._editor.getOption(115).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel((function(){t._model=null,t.updateStickyModelProvider(),t._onDidChangeStickyScroll.fire(),t.update()}))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas((function(){return t.update()}))),this._sessionStore.add(this._editor.onDidChangeModelContent((function(){return t._updateSoon.schedule()}))),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((function(){return t.update()}))),this._sessionStore.add(ai((function(){var n;(n=t._stickyModelProvider)===null||n===void 0||n.dispose(),t._stickyModelProvider=null}))),this.updateStickyModelProvider(),this.update())};n.prototype.getVersionId=function(){var t;return(t=this._model)===null||t===void 0?void 0:t.version};n.prototype.updateStickyModelProvider=function(){var t=this;var n;(n=this._stickyModelProvider)===null||n===void 0||n.dispose(),this._stickyModelProvider=null;var i=this._editor;i.hasModel()&&(this._stickyModelProvider=new xst(i,(function(){return t._updateSoon.schedule()}),this._languageConfigurationService,this._languageFeaturesService))};n.prototype.update=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:(t=this._cts)===null||t===void 0||t.dispose(!0),this._cts=new ji;return[4,this.updateStickyModel(this._cts.token)];case 1:n.sent(),this._onDidChangeStickyScroll.fire();return[2]}}))}))};n.prototype.updateStickyModel=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization())return[2,void(this._model=null)];return[4,this._stickyModelProvider.update(t)];case 1:n=i.sent();t.isCancellationRequested||(this._model=n);return[2]}}))}))};n.prototype.updateIndex=function(t){return t===-1?t=0:t<0&&(t=-t-2),t};n.prototype.getCandidateStickyLinesIntersectingFromStickyModel=function(t,n,i,r,e){if(n.children.length===0)return;var o=e;var s=[];for(var u=0;u<n.children.length;u++){var a=n.children[u];a.range&&s.push(a.range.startLineNumber)}var h=this.updateIndex(d(s,t.startLineNumber,(function(t,n){return t-n}))),c=this.updateIndex(d(s,t.startLineNumber+r,(function(t,n){return t-n})));for(var u=h;u<=c;u++){var a=n.children[u];if(!a)return;if(a.range){var f=a.range.startLineNumber,l=a.range.endLineNumber;t.startLineNumber<=l+1&&f-1<=t.endLineNumber&&f!==o&&(o=f,i.push(new Fst(f,l-1,r+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(t,a,i,r+1,f))}else this.getCandidateStickyLinesIntersectingFromStickyModel(t,a,i,r,e)}};n.prototype.getCandidateStickyLinesIntersecting=function(t){var n,i;if(!(!((n=this._model)===null||n===void 0)&&n.element))return[];var r=[];this.getCandidateStickyLinesIntersectingFromStickyModel(t,this._model.element,r,0,-1);var e=(i=this._editor._getViewModel())===null||i===void 0?void 0:i.getHiddenAreas();if(e){var o=function(t){r=r.filter((function(n){return!(n.startLineNumber>=t.startLineNumber&&n.endLineNumber<=t.endLineNumber+1)}))};for(var s=0,u=e;s<u.length;s++){var a=u[s];o(a)}}return r};return n}(ci);Lst=Est([Mst(1,tp),Mst(2,xv)],Lst);var jst,Rst=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Tst=function(t,n){return function(i,r){n(i,r,t)}};var Ist=jst=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){var a=this;a=t.call(this)||this,a._editor=n,a._contextMenuService=i,a._languageFeaturesService=r,a._instaService=e,a._contextKeyService=u,a._sessionStore=new hi,a._foldingModel=null,a._maxStickyLines=Number.MAX_SAFE_INTEGER,a._candidateDefinitionsLength=-1,a._focusedStickyElementIndex=-1,a._enabled=!1,a._focused=!1,a._positionRevealed=!1,a._onMouseDown=!1,a._endLineNumbers=[],a._showEndForLine=null,a._stickyScrollWidget=new vst(a._editor),a._stickyLineCandidateProvider=new Lst(a._editor,r,o),a._register(a._stickyScrollWidget),a._register(a._stickyLineCandidateProvider),a._widgetState=new ast([],[],0),a._onDidResize(),a._readConfiguration();var h=a._stickyScrollWidget.getDomNode();a._register(a._editor.onDidChangeConfiguration((function(t){(t.hasChanged(115)||t.hasChanged(73)||t.hasChanged(67)||t.hasChanged(110))&&a._readConfiguration()}))),a._register(ma(h,ah.CONTEXT_MENU,(function(t){return __awaiter(a,void 0,void 0,(function(){return __generator(this,(function(n){this._onContextMenu(sa(h),t);return[2]}))}))}))),a._stickyScrollFocusedContextKey=$C.stickyScrollFocused.bindTo(a._contextKeyService),a._stickyScrollVisibleContextKey=$C.stickyScrollVisible.bindTo(a._contextKeyService);var c=a._register(lh(h));a._register(c.onDidBlur((function(t){a._positionRevealed===!1&&h.clientHeight===0?(a._focusedStickyElementIndex=-1,a.focus()):a._disposeFocusStickyScrollStore()}))),a._register(c.onDidFocus((function(t){a.focus()}))),a._registerMouseListeners(),a._register(ma(h,ah.MOUSE_DOWN,(function(t){a._onMouseDown=!0})));return a}n.get=function(t){return t.getContribution(jst.ID)};n.prototype._disposeFocusStickyScrollStore=function(){var t;this._stickyScrollFocusedContextKey.set(!1),(t=this._focusDisposableStore)===null||t===void 0||t.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1};n.prototype.focus=function(){if(this._onMouseDown)return this._onMouseDown=!1,void this._editor.focus();this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new hi,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))};n.prototype.focusNext=function(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)};n.prototype.focusPrevious=function(){this._focusedStickyElementIndex>0&&this._focusNav(!1)};n.prototype.selectEditor=function(){this._editor.focus()};n.prototype._focusNav=function(t){this._focusedStickyElementIndex=t?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)};n.prototype.goToFocused=function(){var t=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:t[this._focusedStickyElementIndex],column:1})};n.prototype._revealPosition=function(t){var n=this;this._reveaInEditor(t,(function(){return n._editor.revealPosition(t)}))};n.prototype._revealLineInCenterIfOutsideViewport=function(t){var n=this;this._reveaInEditor(t,(function(){return n._editor.revealLineInCenterIfOutsideViewport(t.lineNumber,0)}))};n.prototype._reveaInEditor=function(t,n){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,n(),this._editor.setSelection(Ir.fromPositions(t)),this._editor.focus()};n.prototype._registerMouseListeners=function(){var t=this;var n=this._register(new hi),i=this._register(new S4(this._editor,{extractLineNumberFromMouseEvent:function(n){var i=t._stickyScrollWidget.getEditorPositionFromNode(n.target.element);return i?i.lineNumber:0}})),r=function(n){if(!t._editor.hasModel()||n.target.type!==12||n.target.detail!==t._stickyScrollWidget.getId())return null;var i=n.target.element;if(!i||i.innerText!==i.innerHTML)return null;var r=t._stickyScrollWidget.getEditorPositionFromNode(i);return r?{range:new Ir(r.lineNumber,r.column,r.lineNumber,r.column+i.innerText.length),textElement:i}:null},e=this._stickyScrollWidget.getDomNode();this._register(ya(e,ah.CLICK,(function(n){if(n.ctrlKey||n.altKey||n.metaKey||!n.leftButton)return;if(n.shiftKey){var i=t._stickyScrollWidget.getLineIndexFromChildDomNode(n.target);if(i===null)return;var r=new Tr(t._endLineNumbers[i],1);return void t._revealLineInCenterIfOutsideViewport(r)}if(t._stickyScrollWidget.isInFoldingIconDomNode(n.target)){var i=t._stickyScrollWidget.getLineNumberFromChildDomNode(n.target);return void t._toggleFoldingRegionForLine(i)}if(!t._stickyScrollWidget.isInStickyLine(n.target))return;var e=t._stickyScrollWidget.getEditorPositionFromNode(n.target);if(!e){var i=t._stickyScrollWidget.getLineNumberFromChildDomNode(n.target);if(i===null)return;e=new Tr(i,1)}t._revealPosition(e)}))),this._register(ya(e,ah.MOUSE_MOVE,(function(n){if(n.shiftKey){var i=t._stickyScrollWidget.getLineIndexFromChildDomNode(n.target);return i===null||t._showEndForLine!==null&&t._showEndForLine===i?void 0:(t._showEndForLine=i,void t._renderStickyScroll())}t._showEndForLine!==null&&(t._showEndForLine=null,t._renderStickyScroll())}))),this._register(ma(e,ah.MOUSE_LEAVE,(function(n){t._showEndForLine!==null&&(t._showEndForLine=null,t._renderStickyScroll())}))),this._register(i.onMouseMoveOrRelevantKeyDown((function(i){var e=i[0],o=i[1];var s=r(e);if(!s||!e.hasTriggerModifier||!t._editor.hasModel())return void n.clear();var u=s.range,a=s.textElement;if(u.equalsRange(t._stickyRangeProjectedOnEditor)){if(a.style.textDecoration==="underline")return}else t._stickyRangeProjectedOnEditor=u,n.clear();var h=new ji;var c;n.add(ai((function(){return h.dispose(!0)}))),E3(t._languageFeaturesService.definitionProvider,t._editor.getModel(),new Tr(u.startLineNumber,u.startColumn+1),h.token).then((function(i){if(!h.token.isCancellationRequested)if(i.length!==0){t._candidateDefinitionsLength=i.length;var r=a;c!==r?(n.clear(),c=r,c.style.textDecoration="underline",n.add(ai((function(){c.style.textDecoration="none"})))):c||(c=r,c.style.textDecoration="underline",n.add(ai((function(){c.style.textDecoration="none"}))))}else n.clear()}))}))),this._register(i.onCancel((function(){n.clear()}))),this._register(i.onExecute((function(n){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(i){if(n.target.type!==12||n.target.detail!==this._stickyScrollWidget.getId())return[2];t=this._stickyScrollWidget.getEditorPositionFromNode(n.target.element);t&&this._editor.hasModel()&&this._stickyRangeProjectedOnEditor&&(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:t.lineNumber,column:1})),this._instaService.invokeFunction(art,n,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor}));return[2]}))}))})))};n.prototype._onContextMenu=function(t,n){var i=new _s(t,n);this._contextMenuService.showContextMenu({menuId:vf.StickyScrollContext,getAnchor:function(){return i}})};n.prototype._toggleFoldingRegionForLine=function(t){if(!this._foldingModel||t===null)return;var n=this._stickyScrollWidget.getRenderedStickyLine(t),i=n==null?void 0:n.foldingIcon;if(!i)return;s8(this._foldingModel,Number.MAX_VALUE,[t]),i.isCollapsed=!i.isCollapsed;var r=(i.isCollapsed?this._editor.getTopForLineNumber(i.foldingEndLine):this._editor.getTopForLineNumber(i.foldingStartLine))-this._editor.getOption(67)*n.index+1;this._editor.setScrollTop(r),this._renderStickyScroll(t)};n.prototype._readConfiguration=function(){var t=this;var n=this._editor.getOption(115);if(n.enabled===!1)return this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),void(this._enabled=!1);n.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange((function(n){n.scrollTopChanged&&(t._showEndForLine=null,t._renderStickyScroll())}))),this._sessionStore.add(this._editor.onDidLayoutChange((function(){return t._onDidResize()}))),this._sessionStore.add(this._editor.onDidChangeModelTokens((function(n){return t._onTokensChange(n)}))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll((function(){t._showEndForLine=null,t._renderStickyScroll()}))),this._enabled=!0),this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition((function(){t._showEndForLine=null,t._renderStickyScroll(0)})))};n.prototype._needsUpdate=function(t){var n=this._stickyScrollWidget.getCurrentLines();for(var i=0,r=n;i<r.length;i++){var e=r[i];for(var o=0,s=t.ranges;o<s.length;o++){var u=s[o];if(e>=u.fromLineNumber&&e<=u.toLineNumber)return!0}}return!1};n.prototype._onTokensChange=function(t){this._needsUpdate(t)&&this._renderStickyScroll(0)};n.prototype._onDidResize=function(){var t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(.25*t)};n.prototype._renderStickyScroll=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,e,o,s;return __generator(this,(function(u){switch(u.label){case 0:r=this._editor.getModel();if(!r||r.isTooLargeForTokenization())return[2,(this._foldingModel=null,void this._stickyScrollWidget.setState(void 0,null))];e=this._stickyLineCandidateProvider.getVersionId();if(!(e===void 0||e===r.getVersionId()))return[3,2];o=this;return[4,(n=j8.get(this._editor))===null||n===void 0?void 0:n.getFoldingModel()];case 1:if(o._foldingModel=(i=u.sent())!==null&&i!==void 0?i:null,this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(this._widgetState.startLineNumbers.length!==0),this._focused)if(this._focusedStickyElementIndex===-1)this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,t),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{s=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,t),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(s)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}else this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,t);u.label=2;case 2:return[2]}}))}))};n.prototype.findScrollWidgetState=function(){var t=this._editor.getOption(67),n=Math.min(this._maxStickyLines,this._editor.getOption(115).maxLineCount),i=this._editor.getScrollTop();var r=0;var e=[],o=[],s=this._editor.getVisibleRanges();if(s.length!==0){var u=new pst(s[0].startLineNumber,s[s.length-1].endLineNumber),a=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(u);for(var h=0,c=a;h<c.length;h++){var f=c[h];var l=f.startLineNumber,v=f.endLineNumber,d=f.nestingDepth;if(v-l>0){var g=(d-1)*t,p=d*t,w=this._editor.getBottomForLineNumber(l)-i,m=this._editor.getTopForLineNumber(v)-i,b=this._editor.getBottomForLineNumber(v)-i;if(g>m&&g<=b){e.push(l),o.push(v+1),r=b-p;break}if(p>w&&p<=b&&(e.push(l),o.push(v+1)),e.length===n)break}}}return this._endLineNumbers=o,new ast(e,o,r,this._showEndForLine)};n.prototype.dispose=function(){t.prototype.dispose.call(this),this._sessionStore.dispose()};return n}(ci);Ist.ID="store.contrib.stickyScrollController",Ist=jst=Rst([Tst(1,_R),Tst(2,tp),Tst(3,Jh),Tst(4,xv),Tst(5,Cj),Tst(6,Gc)],Ist);var Bst=100;Pf(Ist.ID,Ist,1),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.toggleStickyScroll",title:__assign(__assign({},ct(0,"Toggle Editor Sticky Scroll")),{mnemonicTitle:ht(0,"&&Toggle Editor Sticky Scroll")}),category:ust.View,toggled:{condition:Dc.equals("config.editor.stickyScroll.enabled",!0),title:ht(0,"Sticky Scroll"),mnemonicTitle:ht(0,"&&Sticky Scroll")},menu:[{id:vf.CommandPalette},{id:vf.MenubarAppearanceMenu,group:"4_editor",order:3},{id:vf.StickyScrollContext}]})||this}n.prototype.run=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(r){n=t.get(Kl),i=!n.getValue("editor.stickyScroll.enabled");return[2,n.updateValue("editor.stickyScroll.enabled",i)]}))}))};return n}(bf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.focusStickyScroll",title:__assign(__assign({},ct(0,"Focus Sticky Scroll")),{mnemonicTitle:ht(0,"&&Focus Sticky Scroll")}),precondition:Dc.and(Dc.has("config.editor.stickyScroll.enabled"),$C.stickyScrollVisible),menu:[{id:vf.CommandPalette}]})||this}n.prototype.runEditorCommand=function(t,n){var i;(i=Ist.get(n))===null||i===void 0||i.focus()};return n}(Rf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.selectPreviousStickyScrollLine",title:ct(0,"Select previous sticky scroll line"),precondition:$C.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Bst,primary:16}})||this}n.prototype.runEditorCommand=function(t,n){var i;(i=Ist.get(n))===null||i===void 0||i.focusPrevious()};return n}(Rf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.selectNextStickyScrollLine",title:ct(0,"Select next sticky scroll line"),precondition:$C.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Bst,primary:18}})||this}n.prototype.runEditorCommand=function(t,n){var i;(i=Ist.get(n))===null||i===void 0||i.focusNext()};return n}(Rf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.goToFocusedStickyScrollLine",title:ct(0,"Go to focused sticky scroll line"),precondition:$C.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Bst,primary:3}})||this}n.prototype.runEditorCommand=function(t,n){var i;(i=Ist.get(n))===null||i===void 0||i.goToFocused()};return n}(Rf)),yf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.selectEditor",title:ct(0,"Select Editor"),precondition:$C.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:Bst,primary:9}})||this}n.prototype.runEditorCommand=function(t,n){var i;(i=Ist.get(n))===null||i===void 0||i.selectEditor()};return n}(Rf));var Nst=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Pst=function(t,n){return function(i,r){n(i,r,t)}};var Wst=function(){function t(t,n,i,r,e,o){this.range=t,this.insertText=n,this.filterText=i,this.additionalTextEdits=r,this.command=e,this.completion=o}return t}();var Hst=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this,o.disposable)||this,u.model=n,u.line=i,u.word=r,u.completionModel=e,u._suggestMemoryService=s;return u}n.prototype.canBeReused=function(t,n,i){return this.model===t&&this.line===n&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&this.completionModel.getIncompleteProvider().size===0};Object.defineProperty(n.prototype,"items",{get:function(){var t;var n=[],i=this.completionModel.items,r=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},i),e=Yt.slice(i,r),o=Yt.slice(i,0,r);var s=5;for(var u=0,a=Yt.concat(e,o);u<a.length;u++){var h=a[u];if(h.score===MT.Default)continue;var c=new Ir(h.editStart.lineNumber,h.editStart.column,h.editInsertEnd.lineNumber,h.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),f=h.completion.insertTextRules&&4&h.completion.insertTextRules?{snippet:h.completion.insertText}:h.completion.insertText;n.push(new Wst(c,f,(t=h.filterTextLow)!==null&&t!==void 0?t:h.labelLow,h.completion.additionalTextEdits,h.completion.command,h)),s-- >=0&&h.resolve(Fi.None)}return n},enumerable:false,configurable:true});return n}(li);Hst=Nst([Pst(5,xnt)],Hst);var zst=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._languageFeatureService=n,o._clipboardService=i,o._suggestMemoryService=r,o._editorService=e,o._store.add(n.inlineCompletionsProvider.register("*",o));return o}n.prototype.provideInlineCompletions=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a,h,c,f,l,v,d,g,a,a,p,w,m;return __generator(this,(function(b){switch(b.label){case 0:if(i.selectedSuggestionInfo)return[2];for(s=0,u=this._editorService.listCodeEditors();s<u.length;s++){a=u[s];if(a.getModel()===t){o=a;break}}if(!o)return[2];h=o.getOption(89);if(Htt.isAllOff(h))return[2];t.tokenization.tokenizeIfCheap(n.lineNumber);c=t.tokenization.getLineTokens(n.lineNumber),f=c.getStandardTokenType(c.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(Htt.valueFor(h,f)!=="inline")return[2];d=t.getWordAtPosition(n);if(d!=null&&d.word||(l=this._getTriggerCharacterInfo(t,n)),!(d!=null&&d.word)&&!l||(d||(d=t.getWordUntilPosition(n)),d.endColumn!==n.column))return[2];g=t.getValueInRange(new Ir(n.lineNumber,1,n.lineNumber,n.column));if(!(!l&&(!((e=this._lastResult)===null||e===void 0)&&e.canBeReused(t,n.lineNumber,d))))return[3,1];a=new Tnt(g,n.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=a,this._lastResult.acquire(),v=this._lastResult;return[3,5];case 1:return[4,Ntt(this._languageFeatureService.completionProvider,t,n,new Itt(void 0,Hnt.createSuggestFilter(o).itemKind,l==null?void 0:l.providers),l&&{triggerKind:1,triggerCharacter:l.ch},r)];case 2:a=b.sent();p=void 0;w=a.needsClipboard;if(!w)return[3,4];return[4,this._clipboardService.readText()];case 3:w=p=b.sent();b.label=4;case 4:w;m=new Int(a.items,n.column,new Tnt(g,0),Rnt.None,o.getOption(118),o.getOption(112),{boostFullMatch:!1,firstMatchCanBeWeak:!1},p);v=new Hst(t,n.lineNumber,d,m,a,this._suggestMemoryService);b.label=5;case 5:return[2,(this._lastResult=v,v)]}}))}))};n.prototype.handleItemDidShow=function(t,n){n.completion.resolve(Fi.None)};n.prototype.freeInlineCompletions=function(t){t.release()};n.prototype._getTriggerCharacterInfo=function(t,n){var i;var r=t.getValueInRange(Ir.fromPositions({lineNumber:n.lineNumber,column:n.column-1},n)),e=new Set;for(var o=0,s=this._languageFeatureService.completionProvider.all(t);o<s.length;o++){var u=s[o];!((i=u.triggerCharacters)===null||i===void 0)&&i.includes(r)&&e.add(u)}if(e.size!==0)return{providers:e,ch:r}};return n}(ci);zst=Nst([Pst(0,tp),Pst(1,Kq),Pst(2,xnt),Pst(3,Qh)],zst),yG(zst);Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.forceRetokenize",label:ht(0,"Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})||this}n.prototype.run=function(t,n){if(!n.hasModel())return;var i=n.getModel();i.tokenization.resetTokenization();var r=new pi;i.tokenization.forceTokenization(i.getLineCount()),r.stop(),console.log("tokenization took ".concat(r.elapsed()))};return n}(Lf));var Ust=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,title:ct(0,"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},f1:!0})||this}n.prototype.run=function(){var t=!Lw.getTabFocusMode();Lw.setTabFocusMode(t),yw(ht(0,t?"Pressing Tab will now move focus to the next focusable element":"Pressing Tab will now insert the tab character"))};return n}(bf);Ust.ID="editor.action.toggleTabFocusMode",yf(Ust);var Kst=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Vst=function(t,n){return function(i,r){n(i,r,t)}};var qst=function(t){__extends(n,t);function n(n,i,r,e){if(r===void 0){r={}}var o=this;var s,u;o=t.call(this)||this,o._link=i,o._enabled=!0,o.el=vh(n,bh("a.monaco-link",{tabIndex:(s=i.tabIndex)!==null&&s!==void 0?s:0,href:i.href},i.label)),o.hoverDelegate=(u=r.hoverDelegate)!==null&&u!==void 0?u:kN("mouse"),o.setTooltip(i.title),o.el.setAttribute("role","button");var a=o._register(new Dk(o.el,"click")),h=o._register(new Dk(o.el,"keypress")),c=wi.chain(h.event,(function(t){return t.map((function(t){return new ws(t)})).filter((function(t){return t.keyCode===3}))})),f=o._register(new Dk(o.el,X_.Tap)).event;o._register(nk.addTarget(o.el));var l=wi.any(a.event,c,f);o._register(l((function(t){o.enabled&&(ch(t,!0),r!=null&&r.opener?r.opener(o._link.href):e.open(o._link.href,{allowCommands:!0}))}))),o.enabled=!0;return o}Object.defineProperty(n.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=t},enumerable:false,configurable:true});n.prototype.setTooltip=function(t){this.hoverDelegate.showNativeHover?this.el.title=t!==null&&t!==void 0?t:"":!this.hover&&t?this.hover=this._register(DN(this.hoverDelegate,this.el,t)):this.hover&&this.hover.update(t)};return n}(ci);qst=Kst([Vst(3,DR)],qst);var Gst=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},$st=function(t,n){return function(i,r){n(i,r,t)}};var Jst=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r._editor=n,r.instantiationService=i,r.banner=r._register(r.instantiationService.createInstance(Zst));return r}n.prototype.hide=function(){this._editor.setBanner(null,0),this.banner.clear()};n.prototype.show=function(t){var n=this;this.banner.show(__assign(__assign({},t),{onClose:function(){var i;n.hide(),(i=t.onClose)===null||i===void 0||i.call(t)}})),this._editor.setBanner(this.banner.element,26)};return n}(ci);Jst=Gst([$st(1,Jh)],Jst);var Zst=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.instantiationService=n,i.markdownRenderer=i.instantiationService.createInstance(OI,{}),i.element=bh("div.editor-banner"),i.element.tabIndex=0;return i}n.prototype.getAriaLabel=function(t){return t.ariaLabel?t.ariaLabel:typeof t.message=="string"?t.message:void 0};n.prototype.getBannerMessage=function(t){if(typeof t=="string"){var n=bh("span");return n.innerText=t,n}return this.markdownRenderer.render(t).element};n.prototype.clear=function(){pa(this.element)};n.prototype.show=function(t){pa(this.element);var n=this.getAriaLabel(t);n&&this.element.setAttribute("aria-label",n);var i=vh(this.element,bh("div.icon-container"));i.setAttribute("aria-hidden","true"),t.icon&&i.appendChild(bh("div".concat(uc.asCSSSelector(t.icon))));var r=vh(this.element,bh("div.message-container"));if(r.setAttribute("aria-hidden","true"),r.appendChild(this.getBannerMessage(t.message)),this.messageActionsContainer=vh(this.element,bh("div.message-actions-container")),t.actions)for(var e=0,o=t.actions;e<o.length;e++){var s=o[e];this._register(this.instantiationService.createInstance(qst,this.messageActionsContainer,__assign(__assign({},s),{tabIndex:-1}),{}))}var u=vh(this.element,bh("div.action-container"));this.actionBar=this._register(new qW(u)),this.actionBar.push(this._register(new tc("banner.close","Close Banner",uc.asClassName(gq),!0,(function(){typeof t.onClose=="function"&&t.onClose()}))),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)};return n}(ci);Zst=Gst([$st(0,Jh)],Zst);var Qst=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Yst=function(t,n){return function(i,r){n(i,r,t)}};var Xst=cq("extensions-warning-message",Hr.warning,ht(0,"Icon shown with a warning message in the extensions editor."));var tut=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._editor=n,o._editorWorkerService=i,o._workspaceTrustService=r,o._highlighter=null,o._bannerClosed=!1,o._updateState=function(t){if(t&&t.hasMore){if(o._bannerClosed)return;var n=Math.max(t.ambiguousCharacterCount,t.nonBasicAsciiCharacterCount,t.invisibleCharacterCount);var i=void 0;if(t.nonBasicAsciiCharacterCount>=n)i={message:ht(0,"This document contains many non-basic ASCII unicode characters"),command:new vut};else if(t.ambiguousCharacterCount>=n)i={message:ht(0,"This document contains many ambiguous unicode characters"),command:new fut};else{if(!(t.invisibleCharacterCount>=n))throw new Error("Unreachable");i={message:ht(0,"This document contains many invisible unicode characters"),command:new lut}}o._bannerController.show({id:"unicodeHighlightBanner",message:i.message,icon:Xst,actions:[{label:i.command.shortLabel,href:"command:".concat(i.command.id)}],onClose:function(){o._bannerClosed=!0}})}else o._bannerController.hide()},o._bannerController=o._register(e.createInstance(Jst,n)),o._register(o._editor.onDidChangeModel((function(){o._bannerClosed=!1,o._updateHighlighter()}))),o._options=n.getOption(125),o._register(r.onDidChangeTrust((function(t){o._updateHighlighter()}))),o._register(n.onDidChangeConfiguration((function(t){t.hasChanged(125)&&(o._options=n.getOption(125),o._updateHighlighter())}))),o._updateHighlighter();return o}n.prototype.dispose=function(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),t.prototype.dispose.call(this)};n.prototype._updateHighlighter=function(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;var t=function(t,n){return{nonBasicASCII:n.nonBasicASCII===jn?!t:n.nonBasicASCII,ambiguousCharacters:n.ambiguousCharacters,invisibleCharacters:n.invisibleCharacters,includeComments:n.includeComments===jn?!t:n.includeComments,includeStrings:n.includeStrings===jn?!t:n.includeStrings,allowedCharacters:n.allowedCharacters,allowedLocales:n.allowedLocales}}(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([t.nonBasicASCII,t.ambiguousCharacters,t.invisibleCharacters].every((function(t){return t===!1})))return;var n={nonBasicASCII:t.nonBasicASCII,ambiguousCharacters:t.ambiguousCharacters,invisibleCharacters:t.invisibleCharacters,includeComments:t.includeComments,includeStrings:t.includeStrings,allowedCodePoints:Object.keys(t.allowedCharacters).map((function(t){return t.codePointAt(0)})),allowedLocales:Object.keys(t.allowedLocales).map((function(t){return t==="_os"?(new Intl.NumberFormat).resolvedOptions().locale:t==="_vscode"?Pt:t}))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new nut(this._editor,n,this._updateState,this._editorWorkerService):this._highlighter=new iut(this._editor,n,this._updateState)};n.prototype.getDecorationInfo=function(t){return this._highlighter?this._highlighter.getDecorationInfo(t):null};return n}(ci);tut.ID="editor.contrib.unicodeHighlighter",tut=Qst([Yst(1,vH),Yst(2,oN),Yst(3,Jh)],tut);var nut=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._editor=n,o._options=i,o._updateState=r,o._editorWorkerService=e,o._model=o._editor.getModel(),o._decorations=o._editor.createDecorationsCollection(),o._updateSoon=o._register(new Ts((function(){return o._update()}),250)),o._register(o._editor.onDidChangeModelContent((function(){o._updateSoon.schedule()}))),o._updateSoon.schedule();return o}n.prototype.dispose=function(){this._decorations.clear(),t.prototype.dispose.call(this)};n.prototype._update=function(){var t=this;if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII())return void this._decorations.clear();var n=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then((function(i){if(t._model.isDisposed()||t._model.getVersionId()!==n)return;t._updateState(i);var r=[];if(!i.hasMore)for(var e=0,o=i.ranges;e<o.length;e++){var s=o[e];r.push({range:s,options:aut.instance.getDecorationFromOptions(t._options)})}t._decorations.set(r)}))};n.prototype.getDecorationInfo=function(t){if(!this._decorations.has(t))return null;var n=this._editor.getModel();return tL(n,t)?{reason:uut(n.getValueInRange(t.range),this._options),inComment:nL(n,t),inString:iL(n,t)}:null};return n}(ci);nut=Qst([Yst(3,vH)],nut);var iut=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._editor=n,e._options=i,e._updateState=r,e._model=e._editor.getModel(),e._decorations=e._editor.createDecorationsCollection(),e._updateSoon=e._register(new Ts((function(){return e._update()}),250)),e._register(e._editor.onDidLayoutChange((function(){e._updateSoon.schedule()}))),e._register(e._editor.onDidScrollChange((function(){e._updateSoon.schedule()}))),e._register(e._editor.onDidChangeHiddenAreas((function(){e._updateSoon.schedule()}))),e._register(e._editor.onDidChangeModelContent((function(){e._updateSoon.schedule()}))),e._updateSoon.schedule();return e}n.prototype.dispose=function(){this._decorations.clear(),t.prototype.dispose.call(this)};n.prototype._update=function(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII())return void this._decorations.clear();var t=this._editor.getVisibleRanges(),n=[],i={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(var r=0,e=t;r<e.length;r++){var o=e[r];var s=Od.computeUnicodeHighlights(this._model,this._options,o);for(var u=0,a=s.ranges;u<a.length;u++){var h=a[u];i.ranges.push(h)}i.ambiguousCharacterCount+=i.ambiguousCharacterCount,i.invisibleCharacterCount+=i.invisibleCharacterCount,i.nonBasicAsciiCharacterCount+=i.nonBasicAsciiCharacterCount,i.hasMore=i.hasMore||s.hasMore}if(!i.hasMore)for(var c=0,f=i.ranges;c<f.length;c++){var o=f[c];n.push({range:o,options:aut.instance.getDecorationFromOptions(this._options)})}this._updateState(i),this._decorations.set(n)};n.prototype.getDecorationInfo=function(t){if(!this._decorations.has(t))return null;var n=this._editor.getModel(),i=n.getValueInRange(t.range);return tL(n,t)?{reason:uut(i,this._options),inComment:nL(n,t),inString:iL(n,t)}:null};return n}(ci);var rut=ht(0,"Configure Unicode Highlight Options");var eut=function(){function t(t,n,i){this._editor=t,this._languageService=n,this._openerService=i,this.hoverOrdinal=5}t.prototype.computeSync=function(t,n){if(!this._editor.hasModel()||t.type!==1)return[];var i=this._editor.getModel(),r=this._editor.getContribution(tut.ID);if(!r)return[];var e=[],o=new Set;var s=300;for(var u=0,a=n;u<a.length;u++){var h=a[u];var c=r.getDecorationInfo(h);if(!c)continue;var f=i.getValueInRange(h.range).codePointAt(0),l=sut(f);var v=void 0;switch(c.reason.kind){case 0:v=Po(c.reason.confusableWith)?ht(0,"The character {0} could be confused with the ASCII character {1}, which is more common in source code.",l,sut(c.reason.confusableWith.codePointAt(0))):ht(0,"The character {0} could be confused with the character {1}, which is more common in source code.",l,sut(c.reason.confusableWith.codePointAt(0)));break;case 1:v=ht(0,"The character {0} is invisible.",l);break;case 2:v=ht(0,"The character {0} is not a basic ASCII character.",l)}if(o.has(v))continue;o.add(v);var d={codePoint:f,reason:c.reason,inComment:c.inComment,inString:c.inString},g=ht(0,"Adjust settings"),p="command:".concat(dut.ID,"?").concat(encodeURIComponent(JSON.stringify(d))),w=new VT("",!0).appendMarkdown(v).appendText(" ").appendLink(p,g,rut);e.push(new E5(this,h.range,[w],!1,s++))}return e};t.prototype.renderHoverParts=function(t,n){return F5(t,n,this._editor,this._languageService,this._openerService)};return t}();function out(t){return"U+".concat(t.toString(16).padStart(4,"0"))}function sut(t){var n="`".concat(out(t),"`");return Yo.isInvisibleCharacter(t)||(n+=' "'.concat(function(t){return t===96?"`` ` ``":"`"+String.fromCodePoint(t)+"`"}(t),'"')),n}function uut(t,n){return Od.computeUnicodeHighlightReason(t,n)}eut=Qst([Yst(1,Zl),Yst(2,DR)],eut);var aut=function(){function t(){this.map=new Map}t.prototype.getDecorationFromOptions=function(t){return this.getDecoration(!t.includeComments,!t.includeStrings)};t.prototype.getDecoration=function(t,n){var i="".concat(t).concat(n);var r=this.map.get(i);return r||(r=PM.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:t,hideInStringTokens:n}),this.map.set(i,r)),r};return t}();aut.instance=new aut;var hut=function(t){__extends(n,t);function n(){var n=this;n=t.call(this,{id:fut.ID,label:ht(0,"Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0})||this,n.shortLabel=ht(0,"Disable Highlight In Comments");return n}n.prototype.run=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){n=t==null?void 0:t.get(Kl);n&&this.runAction(n);return[2]}))}))};n.prototype.runAction=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,t.updateValue(Nn,!1,2)];case 1:n.sent();return[2]}}))}))};return n}(Lf);var cut=function(t){__extends(n,t);function n(){var n=this;n=t.call(this,{id:fut.ID,label:ht(0,"Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0})||this,n.shortLabel=ht(0,"Disable Highlight In Strings");return n}n.prototype.run=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){n=t==null?void 0:t.get(Kl);n&&this.runAction(n);return[2]}))}))};n.prototype.runAction=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,t.updateValue(Pn,!1,2)];case 1:n.sent();return[2]}}))}))};return n}(Lf);var fut=function(t){__extends(n,t);function n(){var i=this;i=t.call(this,{id:n.ID,label:ht(0,"Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0})||this,i.shortLabel=ht(0,"Disable Ambiguous Highlight");return i}n.prototype.run=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){n=t==null?void 0:t.get(Kl);n&&this.runAction(n);return[2]}))}))};n.prototype.runAction=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,t.updateValue(Bn,!1,2)];case 1:n.sent();return[2]}}))}))};return n}(Lf);fut.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";var lut=function(t){__extends(n,t);function n(){var i=this;i=t.call(this,{id:n.ID,label:ht(0,"Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0})||this,i.shortLabel=ht(0,"Disable Invisible Highlight");return i}n.prototype.run=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){n=t==null?void 0:t.get(Kl);n&&this.runAction(n);return[2]}))}))};n.prototype.runAction=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,t.updateValue(Tn,!1,2)];case 1:n.sent();return[2]}}))}))};return n}(Lf);lut.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";var vut=function(t){__extends(n,t);function n(){var i=this;i=t.call(this,{id:n.ID,label:ht(0,"Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0})||this,i.shortLabel=ht(0,"Disable Non ASCII Highlight");return i}n.prototype.run=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){n=t==null?void 0:t.get(Kl);n&&this.runAction(n);return[2]}))}))};n.prototype.runAction=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,t.updateValue(In,!1,2)];case 1:n.sent();return[2]}}))}))};return n}(Lf);vut.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";var dut=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:ht(0,"Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})||this}n.prototype.run=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var n,r,e,o,s,u,a,h,c,f,l,v,d,g,p,w,m,b,y;var _=this;return __generator(this,(function(k){switch(k.label){case 0:n=i.codePoint,r=i.reason,e=i.inString,o=i.inComment,s=String.fromCodePoint(n),u=t.get(TH),a=t.get(Kl),h=[];if(r.kind===0){c=function(t){h.push({label:ht(0,'Allow unicode characters that are more common in the language "{0}".',t),run:function(){return __awaiter(_,void 0,void 0,(function(){return __generator(this,(function(n){gut(a,[t]);return[2]}))}))}})};for(f=0,l=r.notAmbiguousInLocales;f<l.length;f++){v=l[f];c(v)}}if(h.push({label:function(t){return Yo.isInvisibleCharacter(t)?ht(0,"Exclude {0} (invisible character) from being highlighted",out(t)):ht(0,"Exclude {0} from being highlighted","".concat(out(t),' "').concat(s,'"'))}(n),run:function(){return function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s;return __generator(this,(function(u){switch(u.label){case 0:i=t.getValue(Rn);r=typeof i=="object"&&i?i:{};for(e=0,o=n;e<o.length;e++){s=o[e];r[String.fromCodePoint(s)]=!0}return[4,t.updateValue(Rn,r,2)];case 1:u.sent();return[2]}}))}))}(a,[n])}}),o){d=new hut;h.push({label:d.label,run:function(){return __awaiter(_,void 0,void 0,(function(){return __generator(this,(function(t){return[2,d.runAction(a)]}))}))}})}else if(e){g=new cut;h.push({label:g.label,run:function(){return __awaiter(_,void 0,void 0,(function(){return __generator(this,(function(t){return[2,g.runAction(a)]}))}))}})}if(r.kind===0){p=new fut;h.push({label:p.label,run:function(){return __awaiter(_,void 0,void 0,(function(){return __generator(this,(function(t){return[2,p.runAction(a)]}))}))}})}else if(r.kind===1){w=new lut;h.push({label:w.label,run:function(){return __awaiter(_,void 0,void 0,(function(){return __generator(this,(function(t){return[2,w.runAction(a)]}))}))}})}else if(r.kind===2){m=new vut;h.push({label:m.label,run:function(){return __awaiter(_,void 0,void 0,(function(){return __generator(this,(function(t){return[2,m.runAction(a)]}))}))}})}else(function(t){throw new Error("Unexpected value: ".concat(t))})(r);return[4,u.pick(h,{title:rut})];case 1:b=k.sent();y=b;if(!y)return[3,3];return[4,b.run()];case 2:y=k.sent();k.label=3;case 3:y;return[2]}}))}))};return n}(Lf);function gut(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,e,o,s,u;return __generator(this,(function(a){switch(a.label){case 0:r=(i=t.inspect(Wn).user)===null||i===void 0?void 0:i.value;e=typeof r=="object"&&r?Object.assign({},r):{};for(o=0,s=n;o<s.length;o++){u=s[o];e[u]=!0}return[4,t.updateValue(Wn,e,2)];case 1:a.sent();return[2]}}))}))}dut.ID="editor.action.unicodeHighlight.showExcludeOptions",Bf(fut),Bf(lut),Bf(vut),Bf(dut),Pf(tut.ID,tut,1),o5.register(eut);var put=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},wut=function(t,n){return function(i,r){n(i,r,t)}};var mut="ignoreUnusualLineTerminators";var but=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._editor=n,e._dialogService=i,e._codeEditorService=r,e._isPresentingDialog=!1,e._config=e._editor.getOption(126),e._register(e._editor.onDidChangeConfiguration((function(t){t.hasChanged(126)&&(e._config=e._editor.getOption(126),e._checkForUnusualLineTerminators())}))),e._register(e._editor.onDidChangeModel((function(){e._checkForUnusualLineTerminators()}))),e._register(e._editor.onDidChangeModelContent((function(t){t.isUndoing||e._checkForUnusualLineTerminators()}))),e._checkForUnusualLineTerminators();return e}n.prototype._checkForUnusualLineTerminators=function(){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:if(this._config==="off"||!this._editor.hasModel())return[2];t=this._editor.getModel();if(!t.mightContainUnusualLineTerminators()||function(t,n){return t.getModelProperty(n.uri,mut)}(this._codeEditorService,t)===!0||this._editor.getOption(91))return[2];if(this._config==="auto")return[2,void t.removeUnusualLineTerminators(this._editor.getSelections())];if(this._isPresentingDialog)return[2];i.label=1;case 1:i.trys.push([1,,3,4]);this._isPresentingDialog=!0;return[4,this._dialogService.confirm({title:ht(0,"Unusual Line Terminators"),message:ht(0,"Detected unusual line terminators"),detail:ht(0,"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",NO(t.uri)),primaryButton:ht(0,"&&Remove Unusual Line Terminators"),cancelButton:ht(0,"Ignore")})];case 2:n=i.sent();return[3,4];case 3:this._isPresentingDialog=!1;return[7];case 4:n.confirmed?t.removeUnusualLineTerminators(this._editor.getSelections()):function(t,n,i){t.setModelProperty(n.uri,mut,i)}(this._codeEditorService,t,!0);return[2]}}))}))};return n}(ci);but.ID="editor.contrib.unusualLineTerminatorsDetector",but=put([wut(1,ej),wut(2,Qh)],but),Pf(but.ID,but,1);var yut,_ut,kut=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},xut=function(t,n){return function(i,r){n(i,r,t)}};var Cut=new qc("hasWordHighlights",!1);function Sut(t,n,i,r){return Ls(t.ordered(n).map((function(t){return function(){return Promise.resolve(t.provideDocumentHighlights(n,i,r)).then(void 0,$n)}})),k).then((function(t){if(t){var i=new od;return i.set(n.uri,t),i}return new od}))}var Dut=function(){function t(t,n,i){this._model=t,this._selection=n,this._wordSeparators=i,this._wordRange=this._getCurrentWordRange(t,n),this._result=null}Object.defineProperty(t.prototype,"result",{get:function(){var t=this;return this._result||(this._result=Ss((function(n){return t._compute(t._model,t._selection,t._wordSeparators,n)}))),this._result},enumerable:false,configurable:true});t.prototype._getCurrentWordRange=function(t,n){var i=t.getWordAtPosition(n.getPosition());return i?new Ir(n.startLineNumber,i.startColumn,n.startLineNumber,i.endColumn):null};t.prototype.isValid=function(t,n,i){var r=n.startLineNumber,e=n.startColumn,o=n.endColumn,s=this._getCurrentWordRange(t,n);var u=!!(this._wordRange&&this._wordRange.equalsRange(s));for(var a=0,h=i.length;!u&&a<h;a++){var c=i.getRange(a);c&&c.startLineNumber===r&&c.startColumn<=e&&c.endColumn>=o&&(u=!0)}return u};t.prototype.cancel=function(){this.result.cancel()};return t}();var Aut=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this,n,i,r)||this,o._providers=e;return o}n.prototype._compute=function(t,n,i,r){return Sut(this._providers,t,n.getPosition(),r).then((function(t){return t||new od}))};return n}(Dut);var Out=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this,n,i,r)||this,s._providers=e,s._otherModels=o;return s}n.prototype._compute=function(t,n,i,r){return function(t,n,i,r,e,o){return Ls(t.ordered(n).map((function(t){return function(){var r=o.filter((function(t){return _d(t)})).filter((function(n){return fR(t.selector,n.uri,n.getLanguageId(),!0,void 0,void 0)>0}));return Promise.resolve(t.provideMultiDocumentHighlights(n,i,r,e)).then(void 0,$n)}})),(function(t){return t instanceof od&&t.size>0}))}(this._providers,t,n.getPosition(),0,r,this._otherModels).then((function(t){return t||new od}))};return n}(Dut);var Eut=function(t){__extends(n,t);function n(n,i,r,e,o){var s=this;s=t.call(this,n,i,e)||this,s._otherModels=o,s._selectionIsEmpty=i.isEmpty(),s._word=r;return s}n.prototype._compute=function(t,n,i,r){var e=this;return Ms(250,r).then((function(){var r=new od;var o;if(o=e._word?e._word:t.getWordAtPosition(n.getPosition()),!o)return new od;var s=__spreadArray([t],e._otherModels,true);for(var u=0,a=s;u<a.length;u++){var h=a[u];if(h.isDisposed())continue;var c=h.findMatches(o.word,!0,!1,!0,i,!1).map((function(t){return{range:t.range,kind:Zr.Text}}));c&&r.set(h.uri,c)}return r}))};n.prototype.isValid=function(n,i,r){var e=i.isEmpty();return this._selectionIsEmpty===e&&t.prototype.isValid.call(this,n,i,r)};return n}(Dut);Tf("_executeDocumentHighlights",(function(t,n,i){return __awaiter(a,void 0,void 0,(function(){var r,e;return __generator(this,(function(o){switch(o.label){case 0:r=t.get(tp);return[4,Sut(r.documentHighlightProvider,n,i,Fi.None)];case 1:e=o.sent();return[2,e==null?void 0:e.get(n.uri)]}}))}))}));var Mut=yut=function(){function t(t,n,i,r,e){var o=this;this.toUnhook=new hi,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new od,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=t,this.providers=n,this.multiDocumentProviders=i,this.codeEditorService=e,this._hasWordHighlights=Cut.bindTo(r),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(t.onDidChangeCursorPosition((function(t){o._ignorePositionChangeEvent||o.occurrencesHighlight!=="off"&&o._onPositionChanged(t)}))),this.toUnhook.add(t.onDidFocusEditorText((function(t){o.occurrencesHighlight!=="off"&&(o.workerRequest||o._run())}))),this.toUnhook.add(t.onDidChangeModelContent((function(t){o._stopAll()}))),this.toUnhook.add(t.onDidChangeModel((function(t){!t.newModelUrl&&t.oldModelUrl?o._stopSingular():yut.query&&o._run()}))),this.toUnhook.add(t.onDidChangeConfiguration((function(t){var n=o.editor.getOption(81);o.occurrencesHighlight!==n&&(o.occurrencesHighlight=n,o._stopAll())}))),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,yut.query&&this._run()}t.prototype.hasDecorations=function(){return this.decorations.length>0};t.prototype.restore=function(){this.occurrencesHighlight!=="off"&&this._run()};t.prototype._getSortedHighlights=function(){return this.decorations.getRanges().sort(Ir.compareRangesUsingStarts)};t.prototype.moveNext=function(){var t=this;var n=this._getSortedHighlights(),i=n.findIndex((function(n){return n.containsPosition(t.editor.getPosition())})),r=(i+1)%n.length,e=n[r];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(e.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(e);var o=this._getWord();o&&yw("".concat(this.editor.getModel().getLineContent(e.startLineNumber),", ").concat(r+1," of ").concat(n.length," for '").concat(o.word,"'"))}finally{this._ignorePositionChangeEvent=!1}};t.prototype.moveBack=function(){var t=this;var n=this._getSortedHighlights(),i=n.findIndex((function(n){return n.containsPosition(t.editor.getPosition())})),r=(i-1+n.length)%n.length,e=n[r];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(e.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(e);var o=this._getWord();o&&yw("".concat(this.editor.getModel().getLineContent(e.startLineNumber),", ").concat(r+1," of ").concat(n.length," for '").concat(o.word,"'"))}finally{this._ignorePositionChangeEvent=!1}};t.prototype._removeSingleDecorations=function(){if(!this.editor.hasModel())return;var t=yut.storedDecorations.get(this.editor.getModel().uri);t&&(this.editor.removeDecorations(t),yut.storedDecorations.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))};t.prototype._removeAllDecorations=function(){var t=this.codeEditorService.listCodeEditors(),n=[];for(var i=0,r=t;i<r.length;i++){var e=r[i];if(!e.hasModel())continue;var o=yut.storedDecorations.get(e.getModel().uri);if(!o)continue;e.removeDecorations(o),n.push(e.getModel().uri);var s=Fut.get(e);s!=null&&s.wordHighlighter&&s.wordHighlighter.decorations.length>0&&(s.wordHighlighter.decorations.clear(),s.wordHighlighter.workerRequest=null,s.wordHighlighter._hasWordHighlights.set(!1))}for(var u=0,a=n;u<a.length;u++){var e=a[u];yut.storedDecorations.delete(e)}};t.prototype._stopSingular=function(){var t,n,i,r;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((t=this.editor.getModel())===null||t===void 0?void 0:t.uri.scheme)!==Uu.vscodeNotebookCell&&((i=(n=yut.query)===null||n===void 0?void 0:n.modelInfo)===null||i===void 0?void 0:i.model.uri.scheme)!==Uu.vscodeNotebookCell?(yut.query=null,this._run()):!((r=yut.query)===null||r===void 0)&&r.modelInfo&&(yut.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)};t.prototype._stopAll=function(){this._removeAllDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)};t.prototype._onPositionChanged=function(t){var n;this.occurrencesHighlight!=="off"&&(t.reason===3||((n=this.editor.getModel())===null||n===void 0?void 0:n.uri.scheme)===Uu.vscodeNotebookCell)?this._run():this._stopAll()};t.prototype._getWord=function(){var t=this.editor.getSelection(),n=t.startLineNumber,i=t.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:n,column:i})};t.prototype.getOtherModelsToHighlight=function(t){if(!t)return[];if(t.uri.scheme===Uu.vscodeNotebookCell){var n=[],i=this.codeEditorService.listCodeEditors();for(var r=0,e=i;r<e.length;r++){var o=e[r];var s=o.getModel();s&&s!==t&&s.uri.scheme===Uu.vscodeNotebookCell&&n.push(s)}return n}var u=[],a=this.codeEditorService.listCodeEditors();for(var h=0,c=a;h<c.length;h++){var n=c[h];if(!nY(n))continue;var i=n.getModel();i&&t===i.modified&&u.push(i.modified)}if(u.length)return u;if(this.occurrencesHighlight==="singleFile")return[];for(var f=0,l=a;f<l.length;f++){var n=l[f];var i=n.getModel();i&&i!==t&&u.push(i)}return u};t.prototype._run=function(){var t=this;var n;var i;if(this.editor.hasTextFocus()){var r=this.editor.getSelection();if(!r||r.startLineNumber!==r.endLineNumber)return yut.query=null,void this._stopAll();var e=r.startColumn,o=r.endColumn,s=this._getWord();if(!s||s.startColumn>e||s.endColumn<o)return yut.query=null,void this._stopAll();i=this.workerRequest&&this.workerRequest.isValid(this.model,r,this.decorations),yut.query={modelInfo:{model:this.model,selection:r},word:s}}else if(!yut.query)return;if(this.lastCursorPositionChangeTime=(new Date).getTime(),i)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();var u=++this.workerRequestTokenId;this.workerRequestCompleted=!1;var e=this.getOtherModelsToHighlight(this.editor.getModel());if(!yut.query.modelInfo||yut.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(yut.query.modelInfo.model,yut.query.modelInfo.selection,yut.query.word,e),(n=this.workerRequest)===null||n===void 0||n.result.then((function(n){u===t.workerRequestTokenId&&(t.workerRequestCompleted=!0,t.workerRequestValue=n||[],t._beginRenderDecorations())}),Gn)}};t.prototype.computeWithModel=function(t,n,i,r){return r.length?function(t,n,i,r,e,o){return t.has(n)?new Out(n,i,e,t,o):new Eut(n,i,r,e,o)}(this.multiDocumentProviders,t,n,i,this.editor.getOption(131),r):function(t,n,i,r,e){return t.has(n)?new Aut(n,i,e,t):new Eut(n,i,r,e,[])}(this.providers,t,n,i,this.editor.getOption(131))};t.prototype._beginRenderDecorations=function(){var t=this;var n=(new Date).getTime(),i=this.lastCursorPositionChangeTime+250;n>=i?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout((function(){t.renderDecorations()}),i-n)};t.prototype.renderDecorations=function(){var t,n,i;this.renderDecorationsTimer=-1;var r=this.codeEditorService.listCodeEditors();var e=function(r){var e=Fut.get(r);if(!e)return"continue";var s=[],u=(t=r.getModel())===null||t===void 0?void 0:t.uri;if(u&&o.workerRequestValue.has(u)){var a=yut.storedDecorations.get(u),c=o.workerRequestValue.get(u);if(c)for(var f=0,l=c;f<l.length;f++){var v=l[f];v.range&&s.push({range:v.range,options:(h=v.kind,h===Zr.Write?get:h===Zr.Text?pet:bet)})}var d=[];r.changeDecorations((function(t){d=t.deltaDecorations(a!==null&&a!==void 0?a:[],s)})),yut.storedDecorations=yut.storedDecorations.set(u,d),s.length>0&&((n=e.wordHighlighter)===null||n===void 0||n.decorations.set(s),(i=e.wordHighlighter)===null||i===void 0||i._hasWordHighlights.set(!0))}};var o=this;for(var s=0,u=r;s<u.length;s++){var a=u[s];e(a)}var h};t.prototype.dispose=function(){this._stopSingular(),this.toUnhook.dispose()};return t}();Mut.storedDecorations=new od,Mut.query=null,Mut=yut=kut([xut(4,Qh)],Mut);var Fut=_ut=function(t){__extends(n,t);function n(n,i,r,e){var o=this;o=t.call(this)||this,o._wordHighlighter=null;var s=function(){n.hasModel()&&!n.getModel().isTooLargeForTokenization()&&(o._wordHighlighter=new Mut(n,r.documentHighlightProvider,r.multiDocumentHighlightProvider,i,e))};o._register(n.onDidChangeModel((function(t){o._wordHighlighter&&(o._wordHighlighter.dispose(),o._wordHighlighter=null),s()}))),s();return o}n.get=function(t){return t.getContribution(n.ID)};Object.defineProperty(n.prototype,"wordHighlighter",{get:function(){return this._wordHighlighter},enumerable:false,configurable:true});n.prototype.saveViewState=function(){return!(!this._wordHighlighter||!this._wordHighlighter.hasDecorations())};n.prototype.moveNext=function(){var t;(t=this._wordHighlighter)===null||t===void 0||t.moveNext()};n.prototype.moveBack=function(){var t;(t=this._wordHighlighter)===null||t===void 0||t.moveBack()};n.prototype.restoreViewState=function(t){this._wordHighlighter&&t&&this._wordHighlighter.restore()};n.prototype.dispose=function(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),t.prototype.dispose.call(this)};return n}(ci);Fut.ID="editor.contrib.wordHighlighter",Fut=_ut=kut([xut(1,Gc),xut(2,tp),xut(3,Qh)],Fut);var Lut=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this,i)||this,r._isNext=n;return r}n.prototype.run=function(t,n){var i=Fut.get(n);i&&(this._isNext?i.moveNext():i.moveBack())};return n}(Lf);Pf(Fut.ID,Fut,0),Bf(function(t){__extends(n,t);function n(){return t.call(this,!0,{id:"editor.action.wordHighlight.next",label:ht(0,"Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:Cut,kbOpts:{kbExpr:$C.editorTextFocus,primary:65,weight:100}})||this}return n}(Lut)),Bf(function(t){__extends(n,t);function n(){return t.call(this,!1,{id:"editor.action.wordHighlight.prev",label:ht(0,"Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:Cut,kbOpts:{kbExpr:$C.editorTextFocus,primary:1089,weight:100}})||this}return n}(Lut)),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.wordHighlight.trigger",label:ht(0,"Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:Cut.toNegated(),kbOpts:{kbExpr:$C.editorTextFocus,primary:0,weight:100}})||this}n.prototype.run=function(t,n,i){var r=Fut.get(n);r&&r.restoreViewState(!0)};return n}(Lf));var jut=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._inSelectionMode=n.inSelectionMode,i._wordNavigationType=n.wordNavigationType;return i}n.prototype.runEditorCommand=function(t,n,i){var r=this;if(!n.hasModel())return;var e=ld(n.getOption(131),n.getOption(130)),o=n.getModel(),s=n.getSelections().map((function(t){var n=new Tr(t.positionLineNumber,t.positionColumn),i=r._move(e,o,n,r._wordNavigationType);return r._moveTo(t,i,r._inSelectionMode)}));if(o.pushStackElement(),n._getViewModel().setCursorStates("moveWordCommand",3,s.map((function(t){return hC.fromModelSelection(t)}))),s.length===1){var u=new Tr(s[0].positionLineNumber,s[0].positionColumn);n.revealPosition(u,0)}};n.prototype._moveTo=function(t,n,i){return i?new Br(t.selectionStartLineNumber,t.selectionStartColumn,n.lineNumber,n.column):new Br(n.lineNumber,n.column,n.lineNumber,n.column)};return n}(Ff);var Rut=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._move=function(t,n,i,r){return CC.moveWordLeft(t,n,i,r)};return n}(jut);var Tut=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._move=function(t,n,i,r){return CC.moveWordRight(t,n,i,r)};return n}(jut);var Iut=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this,n)||this,i._whitespaceHeuristics=n.whitespaceHeuristics,i._wordNavigationType=n.wordNavigationType;return i}n.prototype.runEditorCommand=function(t,n,i){var r=this;var e=t.get(xv);if(!n.hasModel())return;var o=ld(n.getOption(131),n.getOption(130)),s=n.getModel(),u=n.getSelections(),a=n.getOption(6),h=n.getOption(11),c=e.getLanguageConfiguration(s.getLanguageId()).getAutoClosingPairs(),f=n._getViewModel(),l=u.map((function(t){var i=r._delete({wordSeparators:o,model:s,selection:t,whitespaceHeuristics:r._whitespaceHeuristics,autoClosingDelete:n.getOption(9),autoClosingBrackets:a,autoClosingQuotes:h,autoClosingPairs:c,autoClosedCharacters:f.getCursorAutoClosedCharacters()},r._wordNavigationType);return new pC(i,"")}));n.pushUndoStop(),n.executeCommands(this.id,l),n.pushUndoStop()};return n}(Ff);var But=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._delete=function(t,n){return CC.deleteWordLeft(t,n)||new Ir(1,1,1,1)};return n}(Iut);var Nut=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._delete=function(t,n){var i=CC.deleteWordRight(t,n);if(i)return i;var r=t.model.getLineCount(),e=t.model.getLineMaxColumn(r);return new Ir(r,e,r,e)};return n}(Iut);If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})||this}return n}(Rut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})||this}return n}(Rut))),If(new(function(t){__extends(n,t);function n(){var n;return t.call(this,{inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:Dc.and($C.textInputFocus,(n=Dc.and(Rw,PU))===null||n===void 0?void 0:n.negate()),primary:2063,mac:{primary:527},weight:100}})||this}return n}(Rut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})||this}return n}(Rut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})||this}return n}(Rut))),If(new(function(t){__extends(n,t);function n(){var n;return t.call(this,{inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:Dc.and($C.textInputFocus,(n=Dc.and(Rw,PU))===null||n===void 0?void 0:n.negate()),primary:3087,mac:{primary:1551},weight:100}})||this}return n}(Rut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})||this}return n}(Tut))),If(new(function(t){__extends(n,t);function n(){var n;return t.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:Dc.and($C.textInputFocus,(n=Dc.and(Rw,PU))===null||n===void 0?void 0:n.negate()),primary:2065,mac:{primary:529},weight:100}})||this}return n}(Tut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})||this}return n}(Tut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})||this}return n}(Tut))),If(new(function(t){__extends(n,t);function n(){var n;return t.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:Dc.and($C.textInputFocus,(n=Dc.and(Rw,PU))===null||n===void 0?void 0:n.negate()),primary:3089,mac:{primary:1553},weight:100}})||this}return n}(Tut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})||this}return n}(Tut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})||this}n.prototype._move=function(n,i,r,e){return t.prototype._move.call(this,ld(Vn.wordSeparators.defaultValue,n.intlSegmenterLocales),i,r,e)};return n}(Rut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})||this}n.prototype._move=function(n,i,r,e){return t.prototype._move.call(this,ld(Vn.wordSeparators.defaultValue,n.intlSegmenterLocales),i,r,e)};return n}(Rut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})||this}n.prototype._move=function(n,i,r,e){return t.prototype._move.call(this,ld(Vn.wordSeparators.defaultValue,n.intlSegmenterLocales),i,r,e)};return n}(Tut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})||this}n.prototype._move=function(n,i,r,e){return t.prototype._move.call(this,ld(Vn.wordSeparators.defaultValue,n.intlSegmenterLocales),i,r,e)};return n}(Tut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:$C.writable})||this}return n}(But))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:$C.writable})||this}return n}(But))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:$C.writable,kbOpts:{kbExpr:$C.textInputFocus,primary:2049,mac:{primary:513},weight:100}})||this}return n}(But))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:$C.writable})||this}return n}(Nut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:$C.writable})||this}return n}(Nut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:$C.writable,kbOpts:{kbExpr:$C.textInputFocus,primary:2068,mac:{primary:532},weight:100}})||this}return n}(Nut))),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"deleteInsideWord",precondition:$C.writable,label:ht(0,"Delete Word"),alias:"Delete Word"})||this}n.prototype.run=function(t,n,i){if(!n.hasModel())return;var r=ld(n.getOption(131),n.getOption(130)),e=n.getModel(),o=n.getSelections().map((function(t){var n=CC.deleteInsideWord(r,e,t);return new pC(n,"")}));n.pushUndoStop(),n.executeCommands(this.id,o),n.pushUndoStop()};return n}(Lf));var Put=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._move=function(t,n,i,r){return SC.moveWordPartLeft(t,n,i)};return n}(jut);hc.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");hc.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");var Wut=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype._move=function(t,n,i,r){return SC.moveWordPartRight(t,n,i)};return n}(jut);If(new(function(t){__extends(n,t);function n(){return t.call(this,{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:$C.writable,kbOpts:{kbExpr:$C.textInputFocus,primary:0,mac:{primary:769},weight:100}})||this}n.prototype._delete=function(t,n){return SC.deleteWordPartLeft(t)||new Ir(1,1,1,1)};return n}(Iut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:$C.writable,kbOpts:{kbExpr:$C.textInputFocus,primary:0,mac:{primary:788},weight:100}})||this}n.prototype._delete=function(t,n){var i=SC.deleteWordPartRight(t);if(i)return i;var r=t.model.getLineCount(),e=t.model.getLineMaxColumn(r);return new Ir(r,e,r,e)};return n}(Iut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:$C.textInputFocus,primary:0,mac:{primary:783},weight:100}})||this}return n}(Put))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:$C.textInputFocus,primary:0,mac:{primary:1807},weight:100}})||this}return n}(Put))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:$C.textInputFocus,primary:0,mac:{primary:785},weight:100}})||this}return n}(Wut))),If(new(function(t){__extends(n,t);function n(){return t.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:$C.textInputFocus,primary:0,mac:{primary:1809},weight:100}})||this}return n}(Wut)));var Hut=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.editor=n,i._register(i.editor.onDidAttemptReadOnlyEdit((function(){return i._onDidAttemptReadOnlyEdit()})));return i}n.prototype._onDidAttemptReadOnlyEdit=function(){var t=q0.get(this.editor);if(t&&this.editor.hasModel()){var n=this.editor.getOptions().get(92);n||(n=this.editor.isSimpleWidget?new VT(ht(0,"Cannot edit in read-only input")):new VT(ht(0,"Cannot edit in read-only editor"))),t.showMessage(n,this.editor.getPosition())}};return n}(ci);Hut.ID="editor.contrib.readOnlyMessageController",Pf(Hut.ID,Hut,2);var zut=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Uut=function(t,n){return function(i,r){n(i,r,t)}};var Kut=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._textModel=n,e._languageFeaturesService=i,e._outlineModelService=r,e._currentModel=iP(e,void 0);var o=_P("documentSymbolProvider.onDidChange",e._languageFeaturesService.documentSymbolProvider.onDidChange),s=_P("_textModel.onDidChangeContent",wi.debounce((function(t){return e._textModel.onDidChangeContent(t)}),(function(){}),100));e._register(gP((function(t,n){return __awaiter(e,void 0,void 0,(function(){var i,r;return __generator(this,(function(e){switch(e.label){case 0:o.read(t),s.read(t);i=n.add(new n$);return[4,this._outlineModelService.getOrCreate(this._textModel,i.token)];case 1:r=e.sent();n.isDisposed||this._currentModel.set(r,void 0);return[2]}}))}))})));return e}n.prototype.getBreadcrumbItems=function(t,n){var i=this._currentModel.read(n);if(!i)return[];var r=i.asListOfDocumentSymbols().filter((function(n){return t.contains(n.range.startLineNumber)&&!t.contains(n.range.endLineNumber)}));return r.sort(B(R((function(t){return t.range.endLineNumber-t.range.startLineNumber}),T))),r.map((function(t){return{name:t.name,kind:t.kind,startLineNumber:t.range.startLineNumber}}))};return n}(ci);Kut=zut([Uut(1,tp),Uut(2,J8)],Kut),hJ.setBreadcrumbsSourceFactory((function(t,n){return n.createInstance(Kut,t)}));var Vut=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.editor=n,i.widget=null,It&&(i._register(n.onDidChangeConfiguration((function(){return i.update()}))),i.update());return i}n.prototype.update=function(){var t=!this.editor.getOption(91);!this.widget&&t?this.widget=new qut(this.editor):this.widget&&!t&&(this.widget.dispose(),this.widget=null)};n.prototype.dispose=function(){t.prototype.dispose.call(this),this.widget&&(this.widget.dispose(),this.widget=null)};return n}(ci);Vut.ID="editor.contrib.iPadShowKeyboard";var qut=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.editor=n,i._domNode=document.createElement("textarea"),i._domNode.className="iPadShowKeyboard",i._register(ma(i._domNode,"touchstart",(function(t){i.editor.focus()}))),i._register(ma(i._domNode,"focus",(function(t){i.editor.focus()}))),i.editor.addOverlayWidget(i);return i}n.prototype.dispose=function(){this.editor.removeOverlayWidget(this),t.prototype.dispose.call(this)};n.prototype.getId=function(){return n.ID};n.prototype.getDomNode=function(){return this._domNode};n.prototype.getPosition=function(){return{preference:1}};return n}(ci);qut.ID="editor.contrib.ShowKeyboardWidget",Pf(Vut.ID,Vut,3);var Gut,$ut=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Jut=function(t,n){return function(i,r){n(i,r,t)}};var Zut=Gut=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e._editor=n,e._languageService=r,e._widget=null,e._register(e._editor.onDidChangeModel((function(t){return e.stop()}))),e._register(e._editor.onDidChangeModelLanguage((function(t){return e.stop()}))),e._register(oe.onDidChange((function(t){return e.stop()}))),e._register(e._editor.onKeyUp((function(t){return t.keyCode===9&&e.stop()})));return e}n.get=function(t){return t.getContribution(n.ID)};n.prototype.dispose=function(){this.stop(),t.prototype.dispose.call(this)};n.prototype.launch=function(){this._widget||this._editor.hasModel()&&(this._widget=new Qut(this._editor,this._languageService))};n.prototype.stop=function(){this._widget&&(this._widget.dispose(),this._widget=null)};return n}(ci);Zut.ID="editor.contrib.inspectTokens",Zut=Gut=$ut([Jut(1,Aq),Jut(2,Zl)],Zut);var Qut=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.allowEditorOverflow=!0,r._editor=n,r._languageService=i,r._model=r._editor.getModel(),r._domNode=document.createElement("div"),r._domNode.className="tokens-inspect-widget",r._tokenizationSupport=function(t,n){var i=oe.get(n);if(i)return i;var r=t.encodeLanguageId(n);return{getInitialState:function(){return dp},tokenize:function(t,i,r){return gp(n,r)},tokenizeEncoded:function(t,n,i){return pp(r,i)}}}(r._languageService.languageIdCodec,r._model.getLanguageId()),r._compute(r._editor.getPosition()),r._register(r._editor.onDidChangeCursorPosition((function(t){return r._compute(r._editor.getPosition())}))),r._editor.addContentWidget(r);return r}n.prototype.dispose=function(){this._editor.removeContentWidget(this),t.prototype.dispose.call(this)};n.prototype.getId=function(){return n._ID};n.prototype._compute=function(t){var n=this._getTokensAtLine(t.lineNumber);var i=0;for(var r=n.tokens1.length-1;r>=0;r--){var e=n.tokens1[r];if(t.column-1>=e.offset){i=r;break}}var o=0;for(var r=n.tokens2.length>>>1;r>=0;r--)if(t.column-1>=n.tokens2[r<<1]){o=r;break}var s=this._model.getLineContent(t.lineNumber);var u="";if(i<n.tokens1.length){var r=n.tokens1[i].offset,e=i+1<n.tokens1.length?n.tokens1[i+1].offset:s.length;u=s.substring(r,e)}gh(this._domNode,bh("h2.tm-token",void 0,function(t){var n="";for(var i=0,r=t.length;i<r;i++){var e=t.charCodeAt(i);switch(e){case 9:n+="→";break;case 32:n+="·";break;default:n+=String.fromCharCode(e)}}return n}(u),bh("span.tm-token-length",void 0,"".concat(u.length," ").concat(u.length===1?"char":"chars")))),vh(this._domNode,bh("hr.tokens-inspect-separator",{style:"clear:both"}));var a=1+(o<<1)<n.tokens2.length?this._decodeMetadata(n.tokens2[1+(o<<1)]):null;vh(this._domNode,bh("table.tm-metadata-table",void 0,bh("tbody",void 0,bh("tr",void 0,bh("td.tm-metadata-key",void 0,"language"),bh("td.tm-metadata-value",void 0,"".concat(a?a.languageId:"-?-"))),bh("tr",void 0,bh("td.tm-metadata-key",void 0,"token type"),bh("td.tm-metadata-value",void 0,"".concat(a?this._tokenTypeToString(a.tokenType):"-?-"))),bh("tr",void 0,bh("td.tm-metadata-key",void 0,"font style"),bh("td.tm-metadata-value",void 0,"".concat(a?this._fontStyleToString(a.fontStyle):"-?-"))),bh("tr",void 0,bh("td.tm-metadata-key",void 0,"foreground"),bh("td.tm-metadata-value",void 0,"".concat(a?Ig.Format.CSS.formatHex(a.foreground):"-?-"))),bh("tr",void 0,bh("td.tm-metadata-key",void 0,"background"),bh("td.tm-metadata-value",void 0,"".concat(a?Ig.Format.CSS.formatHex(a.background):"-?-")))))),vh(this._domNode,bh("hr.tokens-inspect-separator")),i<n.tokens1.length&&vh(this._domNode,bh("span.tm-token-type",void 0,n.tokens1[i].type)),this._editor.layoutContentWidget(this)};n.prototype._decodeMetadata=function(t){var n=oe.getColorMap(),i=wp.getLanguageId(t),r=wp.getTokenType(t),e=wp.getFontStyle(t),o=wp.getForeground(t),s=wp.getBackground(t);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(i),tokenType:r,fontStyle:e,foreground:n[o],background:n[s]}};n.prototype._tokenTypeToString=function(t){switch(t){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}};n.prototype._fontStyleToString=function(t){var n="";return 1&t&&(n+="italic "),2&t&&(n+="bold "),4&t&&(n+="underline "),8&t&&(n+="strikethrough "),n.length===0&&(n="---"),n};n.prototype._getTokensAtLine=function(t){var n=this._getStateBeforeLine(t),i=this._tokenizationSupport.tokenize(this._model.getLineContent(t),!0,n),r=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(t),!0,n);return{startState:n,tokens1:i.tokens,tokens2:r.tokens,endState:i.endState}};n.prototype._getStateBeforeLine=function(t){var n=this._tokenizationSupport.getInitialState();for(var i=1;i<t;i++)n=this._tokenizationSupport.tokenize(this._model.getLineContent(i),!0,n).endState;return n};n.prototype.getDomNode=function(){return this._domNode};n.prototype.getPosition=function(){return{position:this._editor.getPosition(),preference:[2,1]}};return n}(ci);Qut._ID="editor.contrib.inspectTokensWidget",Pf(Zut.ID,Zut,4),Bf(function(t){__extends(n,t);function n(){return t.call(this,{id:"editor.action.inspectTokens",label:QB.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})||this}n.prototype.run=function(t,n){var i=Zut.get(n);i==null||i.launch()};return n}(Lf));var Yut,Xut=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},tat=function(t,n){return function(i,r){n(i,r,t)}};var nat=Yut=function(){function t(t,n){this.quickInputService=t,this.keybindingService=n,this.registry=of.as(FH)}t.prototype.provide=function(n){var i=this;var r=new hi;return r.add(n.onDidAccept((function(){var t=n.selectedItems[0];t&&i.quickInputService.quickAccess.show(t.prefix,{preserveValue:!0})}))),r.add(n.onDidChangeValue((function(n){var r=i.registry.getQuickAccessProvider(n.substr(t.PREFIX.length));r&&r.prefix&&r.prefix!==t.PREFIX&&i.quickInputService.quickAccess.show(r.prefix,{preserveValue:!0})}))),n.items=this.getQuickAccessProviders().filter((function(n){return n.prefix!==t.PREFIX})),r};t.prototype.getQuickAccessProviders=function(){var t=this;return this.registry.getQuickAccessProviders().sort((function(t,n){return t.prefix.localeCompare(n.prefix)})).flatMap((function(n){return t.createPicks(n)}))};t.prototype.createPicks=function(t){var n=this;return t.helpEntries.map((function(i){var r=i.prefix||t.prefix,e=r||"…";return{prefix:r,label:e,keybinding:i.commandId?n.keybindingService.lookupKeybinding(i.commandId):void 0,ariaLabel:ht(0,"{0}, {1}",e,i.description),description:i.description}}))};return t}();nat.PREFIX="?",nat=Yut=Xut([tat(0,TH),tat(1,Yx)],nat),of.as(FH).registerQuickAccessProvider({ctor:nat,prefix:"",helpEntries:[{description:XB.helpQuickAccessActionLabel}]});var iat=function(){function t(t){this.options=t,this.rangeHighlightDecorationId=void 0}t.prototype.provide=function(t,n){var i=this;var r;var e=new hi;t.canAcceptInBackground=!!(!((r=this.options)===null||r===void 0)&&r.canAcceptInBackground),t.matchOnLabel=t.matchOnDescription=t.matchOnDetail=t.sortByLabel=!1;var o=e.add(new fi);return o.value=this.doProvide(t,n),e.add(this.onDidActiveTextEditorControlChange((function(){o.value=void 0,o.value=i.doProvide(t,n)}))),e};t.prototype.doProvide=function(t,n){var i=this;var r;var e=new hi,o=this.activeTextEditorControl;if(o&&this.canProvideWithTextEditor(o)){var s={editor:o},u=iY(o);if(u){var a=(r=o.saveViewState())!==null&&r!==void 0?r:void 0;e.add(u.onDidChangeCursorPosition((function(){var t;a=(t=o.saveViewState())!==null&&t!==void 0?t:void 0}))),s.restoreViewState=function(){a&&o===i.activeTextEditorControl&&o.restoreViewState(a)},e.add(ei(n.onCancellationRequested)((function(){var t;return(t=s.restoreViewState)===null||t===void 0?void 0:t.call(s)})))}e.add(ai((function(){return i.clearDecorations(o)}))),e.add(this.provideWithTextEditor(s,t,n))}else e.add(this.provideWithoutTextEditor(t,n));return e};t.prototype.canProvideWithTextEditor=function(t){return!0};t.prototype.gotoLocation=function(t,n){var i=t.editor;i.setSelection(n.range,"code.jump"),i.revealRangeInCenter(n.range,0),n.preserveFocus||i.focus();var r=i.getModel();r&&"getLineContent"in r&&_w("".concat(r.getLineContent(n.range.startLineNumber)))};t.prototype.getModel=function(t){var n;return nY(t)?(n=t.getModel())===null||n===void 0?void 0:n.modified:t.getModel()};t.prototype.addDecorations=function(t,n){var i=this;t.changeDecorations((function(t){var r=[];i.rangeHighlightDecorationId&&(r.push(i.rangeHighlightDecorationId.overviewRulerDecorationId),r.push(i.rangeHighlightDecorationId.rangeHighlightId),i.rangeHighlightDecorationId=void 0);var e=[{range:n,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:n,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:Uk(Sx),position:vd.Full}}}],o=t.deltaDecorations(r,e),s=o[0],u=o[1];i.rangeHighlightDecorationId={rangeHighlightId:s,overviewRulerDecorationId:u}}))};t.prototype.clearDecorations=function(t){var n=this.rangeHighlightDecorationId;n&&(t.changeDecorations((function(t){t.deltaDecorations([n.overviewRulerDecorationId,n.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)};return t}();var rat=function(t){__extends(n,t);function n(){return t.call(this,{canAcceptInBackground:!0})||this}n.prototype.provideWithoutTextEditor=function(t){var n=ht(0,"Open a text editor first to go to a line.");return t.items=[{label:n}],t.ariaLabel=n,ci.None};n.prototype.provideWithTextEditor=function(t,i,r){var e=this;var o=t.editor,s=new hi;s.add(i.onDidAccept((function(n){var r=i.selectedItems[0];if(r){if(!e.isValidLineNumber(o,r.lineNumber))return;e.gotoLocation(t,{range:e.toRange(r.lineNumber,r.column),keyMods:i.keyMods,preserveFocus:n.inBackground}),n.inBackground||i.hide()}})));var u=function(){var t=e.parsePosition(o,i.value.trim().substr(n.PREFIX.length)),r=e.getPickLabel(o,t.lineNumber,t.column);if(i.items=[{lineNumber:t.lineNumber,column:t.column,label:r}],i.ariaLabel=r,!e.isValidLineNumber(o,t.lineNumber))return void e.clearDecorations(o);var s=e.toRange(t.lineNumber,t.column);o.revealRangeInCenter(s,0),e.addDecorations(o,s)};u(),s.add(i.onDidChangeValue((function(){return u()})));var a=iY(o);return a&&a.getOptions().get(68).renderType===2&&(a.updateOptions({lineNumbers:"on"}),s.add(ai((function(){return a.updateOptions({lineNumbers:"relative"})})))),s};n.prototype.toRange=function(t,n){if(t===void 0){t=1}if(n===void 0){n=1}return{startLineNumber:t,startColumn:n,endLineNumber:t,endColumn:n}};n.prototype.parsePosition=function(t,n){var i=n.split(/,|:|#/).map((function(t){return parseInt(t,10)})).filter((function(t){return!isNaN(t)})),r=this.lineCount(t)+1;return{lineNumber:i[0]>0?i[0]:r+i[0],column:i[1]}};n.prototype.getPickLabel=function(t,n,i){if(this.isValidLineNumber(t,n))return this.isValidColumn(t,n,i)?ht(0,"Go to line {0} and character {1}.",n,i):ht(0,"Go to line {0}.",n);var r=t.getPosition()||{lineNumber:1,column:1},e=this.lineCount(t);return e>1?ht(0,"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",r.lineNumber,r.column,e):ht(0,"Current Line: {0}, Character: {1}. Type a line number to navigate to.",r.lineNumber,r.column)};n.prototype.isValidLineNumber=function(t,n){return!(!n||typeof n!="number")&&n>0&&n<=this.lineCount(t)};n.prototype.isValidColumn=function(t,n,i){if(!i||typeof i!="number")return!1;var r=this.getModel(t);if(!r)return!1;var e={lineNumber:n,column:i};return r.validatePosition(e).equals(e)};n.prototype.lineCount=function(t){var n,i;return(i=(n=this.getModel(t))===null||n===void 0?void 0:n.getLineCount())!==null&&i!==void 0?i:0};return n}(iat);rat.PREFIX=":";var eat=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},oat=function(t,n){return function(i,r){n(i,r,t)}};var sat=function(t){__extends(n,t);function n(n){var i=this;i=t.call(this)||this,i.editorService=n,i.onDidActiveTextEditorControlChange=wi.None;return i}Object.defineProperty(n.prototype,"activeTextEditorControl",{get:function(){var t;return(t=this.editorService.getFocusedCodeEditor())!==null&&t!==void 0?t:void 0},enumerable:false,configurable:true});return n}(rat);sat=eat([oat(0,Qh)],sat);var uat=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:YB.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:2085,mac:{primary:293},weight:100}})||this}n.prototype.run=function(t){t.get(TH).quickAccess.show(sat.PREFIX)};return n}(Lf);uat.ID="editor.action.gotoLine",Bf(uat),of.as(FH).registerQuickAccessProvider({ctor:sat,prefix:sat.PREFIX,helpEntries:[{description:YB.gotoLineActionLabel,commandId:uat.ID}]});var aat=[void 0,[]];function hat(t,n,i,r){if(i===void 0){i=0}if(r===void 0){r=0}var e=n;return e.values&&e.values.length>1?function(t,n,i,r){var e=0;var o=[];for(var s=0,u=n;s<u.length;s++){var a=u[s];var h=cat(t,a,i,r),c=h[0],f=h[1];if(typeof c!="number")return aat;e+=c,o.push.apply(o,f)}return[e,fat(o)]}(t,e.values,i,r):cat(t,n,i,r)}function cat(t,n,i,r){var e=LT(n.original,n.originalLowercase,i,t,t.toLowerCase(),r,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return e?[e[0],mT(e)]:aat}function fat(t){var n=t.sort((function(t,n){return t.start-n.start})),i=[];var r;for(var e=0,o=n;e<o.length;e++){var s=o[e];r&&lat(r,s)?(r.start=Math.min(r.start,s.start),r.end=Math.max(r.end,s.end)):(r=s,i.push(s))}return i}function lat(t,n){return!(t.end<n.start)&&!(n.end<t.start)}function vat(t){return t.startsWith('"')&&t.endsWith('"')}var dat=" ";function gat(t){typeof t!="string"&&(t="");var n=t.toLowerCase(),i=pat(t),r=i.pathNormalized,e=i.normalized,o=i.normalizedLowercase,s=r.indexOf(wr)>=0,u=vat(t);var a;var h=t.split(dat);if(h.length>1)for(var c=0,f=h;c<f.length;c++){var l=f[c];var v=vat(l),d=pat(l),g=d.pathNormalized,p=d.normalized,w=d.normalizedLowercase;p&&(a||(a=[]),a.push({original:l,originalLowercase:l.toLowerCase(),pathNormalized:g,normalized:p,normalizedLowercase:w,expectContiguousMatch:v}))}return{original:t,originalLowercase:n,pathNormalized:r,normalized:e,normalizedLowercase:o,values:a,containsPathSeparator:s,expectContiguousMatch:u}}function pat(t){var n;n=Mt?t.replace(/\//g,wr):t.replace(/\\/g,wr);var i=(r=n,r.replace(/\*/g,"")).replace(/\s|"/g,"");var r;return{pathNormalized:n,normalized:i,normalizedLowercase:i.toLowerCase()}}function wat(t){return Array.isArray(t)?gat(t.map((function(t){return t.original})).join(dat)):gat(t.original)}var mat,bat=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},yat=function(t,n){return function(i,r){n(i,r,t)}};var _at=mat=function(t){__extends(n,t);function n(n,i,r){if(r===void 0){r=Object.create(null)}var e=this;e=t.call(this,r)||this,e._languageFeaturesService=n,e._outlineModelService=i,e.options=r,e.options.canAcceptInBackground=!0;return e}n.prototype.provideWithoutTextEditor=function(t){return this.provideLabelPick(t,ht(0,"To go to a symbol, first open a text editor with symbol information.")),ci.None};n.prototype.provideWithTextEditor=function(t,n,i){var r=t.editor,e=this.getModel(r);return e?this._languageFeaturesService.documentSymbolProvider.has(e)?this.doProvideWithEditorSymbols(t,e,n,i):this.doProvideWithoutEditorSymbols(t,e,n,i):ci.None};n.prototype.doProvideWithoutEditorSymbols=function(t,n,i,r){var e=this;var o=new hi;return this.provideLabelPick(i,ht(0,"The active text editor does not provide symbol information.")),function(){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.waitForLanguageSymbolRegistry(n,o)];case 1:return[2,e.sent()&&!r.isCancellationRequested&&o.add(this.doProvideWithEditorSymbols(t,n,i,r))]}}))}))}(),o};n.prototype.provideLabelPick=function(t,n){t.items=[{label:n,index:0,kind:14}],t.ariaLabel=n};n.prototype.waitForLanguageSymbolRegistry=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,r;var e=this;return __generator(this,(function(o){if(this._languageFeaturesService.documentSymbolProvider.has(t))return[2,!0];i=new Ws,r=n.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((function(){e._languageFeaturesService.documentSymbolProvider.has(t)&&(r.dispose(),i.complete(!0))})));return[2,(n.add(ai((function(){return i.complete(!1)}))),i.p)]}))}))};n.prototype.doProvideWithEditorSymbols=function(t,n,i,r){var e=this;var o;var s=t.editor,u=new hi;u.add(i.onDidAccept((function(n){var r=i.selectedItems[0];r&&r.range&&(e.gotoLocation(t,{range:r.range.selection,keyMods:i.keyMods,preserveFocus:n.inBackground}),n.inBackground||i.hide())}))),u.add(i.onDidTriggerItemButton((function(n){var r=n.item;r&&r.range&&(e.gotoLocation(t,{range:r.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())})));var a=this.getDocumentSymbols(n,r);var h;var c=function(t){return __awaiter(e,void 0,void 0,(function(){var n,e,o;return __generator(this,(function(s){switch(s.label){case 0:h==null||h.dispose(!0),i.busy=!1,h=new ji(r),i.busy=!0;s.label=1;case 1:s.trys.push([1,,3,4]);n=gat(i.value.substr(mat.PREFIX.length).trim());return[4,this.doGetSymbolPicks(a,n,void 0,h.token)];case 2:e=s.sent();if(r.isCancellationRequested)return[2];if(e.length>0){if(i.items=e,t&&n.original.length===0){o=Td(e,(function(n){return!!(n.type!=="separator"&&n.range&&Ir.containsPosition(n.range.decoration,t))}));o&&(i.activeItems=[o])}}else n.original.length>0?this.provideLabelPick(i,ht(0,"No matching editor symbols")):this.provideLabelPick(i,ht(0,"No editor symbols"));return[3,4];case 3:r.isCancellationRequested||(i.busy=!1);return[7];case 4:return[2]}}))}))};return u.add(i.onDidChangeValue((function(){return c(void 0)}))),c((o=s.getSelection())===null||o===void 0?void 0:o.getPosition()),u.add(i.onDidChangeActive((function(){var t=i.activeItems[0];t&&t.range&&(s.revealRangeInCenter(t.range.selection,0),e.addDecorations(s,t.range.decoration))}))),u};n.prototype.doGetSymbolPicks=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s,u,a,h,c,f,l,v,d,g,p,w,m,b,y,_,k,x,C,S,D,A,O,E,w,M,F,L,j,j,m;var R,T,I;var B=this;return __generator(this,(function(N){switch(N.label){case 0:return[4,t];case 1:s=N.sent();if(r.isCancellationRequested)return[2,[]];u=n.original.indexOf(mat.SCOPE_PREFIX)===0,a=u?1:0;n.values&&n.values.length>1?(h=wat(n.values[0]),c=wat(n.values.slice(1))):h=n;l=(o=(e=this.options)===null||e===void 0?void 0:e.openSideBySideDirection)===null||o===void 0?void 0:o.call(e);l&&(f=[{iconClass:l==="right"?uc.asClassName(Hr.splitHorizontal):uc.asClassName(Hr.splitVertical),tooltip:ht(0,l==="right"?"Open to the Side":"Open to the Bottom")}]);v=[];for(d=0;d<s.length;d++){g=s[d],p=ao(g.name),w="$(".concat(Xr.toIcon(g.kind).id,") ").concat(p),m=w.length-p.length;b=void 0,y=void 0,_=void 0,k=void 0,x=g.containerName;if(i!=null&&i.extraContainerLabel&&(x=x?"".concat(i.extraContainerLabel," • ").concat(x):i.extraContainerLabel),n.original.length>a){C=!1;if(h!==n&&(R=hat(w,__assign(__assign({},n),{values:void 0}),a,m),b=R[0],y=R[1],typeof b=="number"&&(C=!0)),typeof b!="number"&&(T=hat(w,h,a,m),b=T[0],y=T[1],typeof b!="number"))continue;if(!C&&c){if(x&&c.original.length>0&&(I=hat(x,c),_=I[0],k=I[1],I),typeof _!="number")continue;typeof b=="number"&&(b+=_)}}S=g.tags&&g.tags.indexOf(1)>=0;v.push({index:d,kind:g.kind,score:b,label:w,ariaLabel:(D=g.name,A=g.kind,ht(0,"{0} ({1})",D,Yr[A])),description:x,highlights:S?void 0:{label:y,description:k},range:{selection:Ir.collapseToStart(g.selectionRange),decoration:g.range},strikethrough:S,buttons:f})}O=v.sort((function(t,n){return u?B.compareByKindAndScore(t,n):B.compareByScore(t,n)}));E=[];if(u){w=function(){F&&typeof M=="number"&&L>0&&(F.label=oo(xat[M]||kat,L))},L=0;for(j=0,j=O;j<j.length;j++){m=j[j];M!==m.kind?(w(),M=m.kind,L=1,F={type:"separator"},E.push(F)):L++,E.push(m)}w()}else O.length>0&&(E=__spreadArray([{label:ht(0,"symbols ({0})",v.length),type:"separator"}],O,true));return[2,E]}}))}))};n.prototype.compareByScore=function(t,n){if(typeof t.score!="number"&&typeof n.score=="number")return 1;if(typeof t.score=="number"&&typeof n.score!="number")return-1;if(typeof t.score=="number"&&typeof n.score=="number"){if(t.score>n.score)return-1;if(t.score<n.score)return 1}return t.index<n.index?-1:t.index>n.index?1:0};n.prototype.compareByKindAndScore=function(t,n){var i=xat[t.kind]||kat,r=xat[n.kind]||kat,e=i.localeCompare(r);return e===0?this.compareByScore(t,n):e};n.prototype.getDocumentSymbols=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(r){switch(r.label){case 0:return[4,this._outlineModelService.getOrCreate(t,n)];case 1:i=r.sent();return[2,n.isCancellationRequested?[]:i.asListOfDocumentSymbols()]}}))}))};return n}(iat);_at.PREFIX="@",_at.SCOPE_PREFIX=":",_at.PREFIX_BY_CATEGORY="".concat(mat.PREFIX).concat(mat.SCOPE_PREFIX),_at=mat=bat([yat(0,tp),yat(1,J8)],_at);var kat=ht(0,"properties ({0})"),xat={5:ht(0,"methods ({0})"),11:ht(0,"functions ({0})"),8:ht(0,"constructors ({0})"),12:ht(0,"variables ({0})"),4:ht(0,"classes ({0})"),22:ht(0,"structs ({0})"),23:ht(0,"events ({0})"),24:ht(0,"operators ({0})"),10:ht(0,"interfaces ({0})"),2:ht(0,"namespaces ({0})"),3:ht(0,"packages ({0})"),25:ht(0,"type parameters ({0})"),1:ht(0,"modules ({0})"),6:ht(0,"properties ({0})"),9:ht(0,"enumerations ({0})"),21:ht(0,"enumeration members ({0})"),14:ht(0,"strings ({0})"),0:ht(0,"files ({0})"),17:ht(0,"arrays ({0})"),15:ht(0,"numbers ({0})"),16:ht(0,"booleans ({0})"),18:ht(0,"objects ({0})"),19:ht(0,"keys ({0})"),7:ht(0,"fields ({0})"),13:ht(0,"constants ({0})")};var Cat=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Sat=function(t,n){return function(i,r){n(i,r,t)}};var Dat=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this,i,r)||this,e.editorService=n,e.onDidActiveTextEditorControlChange=wi.None;return e}Object.defineProperty(n.prototype,"activeTextEditorControl",{get:function(){var t;return(t=this.editorService.getFocusedCodeEditor())!==null&&t!==void 0?t:void 0},enumerable:false,configurable:true});return n}(_at);Dat=Cat([Sat(0,Qh),Sat(1,tp),Sat(2,J8)],Dat);var Aat=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:nN.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:$C.hasDocumentSymbolProvider,kbOpts:{kbExpr:$C.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})||this}n.prototype.run=function(t){t.get(TH).quickAccess.show(_at.PREFIX,{itemActivation:RH.NONE})};return n}(Lf);function Oat(t,n){return n&&(t.stack||t.stacktrace)?ht(0,"{0}: {1}",Mat(t),Eat(t.stack)||Eat(t.stacktrace)):Mat(t)}function Eat(t){return Array.isArray(t)?t.join("\n"):t}function Mat(t){return t.code==="ERR_UNC_HOST_NOT_ALLOWED"?"".concat(t.message,". Please update the 'security.allowedUNCHosts' setting if you want to allow this host."):typeof t.code=="string"&&typeof t.errno=="number"&&typeof t.syscall=="string"?ht(0,"A system error occurred ({0})",t.message):t.message||ht(0,"An unknown error occurred. Please consult the log for more details.")}function Fat(t,n){if(t===void 0){t=null}if(n===void 0){n=!1}if(!t)return ht(0,"An unknown error occurred. Please consult the log for more details.");if(Array.isArray(t)){var i=b(t),r=Fat(i[0],n);return i.length>1?ht(0,"{0} ({1} errors in total)",r,i.length):r}if(H(t))return t;if(t.detail){var i=t.detail;if(i.error)return Oat(i.error,n);if(i.exception)return Oat(i.exception,n)}return t.stack?Oat(t,n):t.message?t.message:ht(0,"An unknown error occurred. Please consult the log for more details.")}Aat.ID="editor.action.quickOutline",Bf(Aat),of.as(FH).registerQuickAccessProvider({ctor:Dat,prefix:_at.PREFIX,helpEntries:[{description:nN.quickOutlineActionLabel,prefix:_at.PREFIX,commandId:Aat.ID},{description:nN.quickOutlineByCategoryActionLabel,prefix:_at.PREFIX_BY_CATEGORY}]});var Lat=function(){function t(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}t.prototype.calculateScores=function(t,n){var i=this.computeEmbedding(t),r=new Map,e=[];for(var o=0,s=this.documents;o<s.length;o++){var u=s[o],a=u[0],h=u[1];if(n.isCancellationRequested)return[];for(var c=0,f=h.chunks;c<f.length;c++){var l=f[c];var v=this.computeSimilarityScore(l,i,r);v>0&&e.push({key:a,score:v})}}return e};t.termFrequencies=function(n){return function(t){var n;var i=new Map;for(var r=0,e=t;r<e.length;r++){var o=e[r];i.set(o,((n=i.get(o))!==null&&n!==void 0?n:0)+1)}return i}(t.splitTerms(n))};t.splitTerms=function(t){var n,i,r,e,o,s,u,a,h;return __generator(this,(function(c){switch(c.label){case 0:n=function(t){return t.toLowerCase()};i=0,r=t.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"));c.label=1;case 1:if(!(i<r.length))return[3,8];e=r[i][0];return[4,n(e)];case 2:c.sent();o=e.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(!(o.length>1))return[3,7];s=0,u=o;c.label=3;case 3:if(!(s<u.length))return[3,7];a=u[s];h=a.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(a);if(!h)return[3,5];return[4,n(a)];case 4:h=c.sent();c.label=5;case 5:h;c.label=6;case 6:s++;return[3,3];case 7:i++;return[3,1];case 8:return[2]}}))};t.prototype.updateDocuments=function(n){var i;for(var r=0,e=n;r<e.length;r++){var o=e[r].key;this.deleteDocument(o)}for(var s=0,u=n;s<u.length;s++){var o=u[s];var a=[];for(var h=0,c=o.textChunks;h<c.length;h++){var f=c[h];var l=t.termFrequencies(f);for(var v=0,d=l.keys();v<d.length;v++){var g=d[v];this.chunkOccurrences.set(g,((i=this.chunkOccurrences.get(g))!==null&&i!==void 0?i:0)+1)}a.push({text:f,tf:l})}this.chunkCount+=a.length,this.documents.set(o.key,{chunks:a})}return this};t.prototype.deleteDocument=function(t){var n=this.documents.get(t);if(n){this.documents.delete(t),this.chunkCount-=n.chunks.length;for(var i=0,r=n.chunks;i<r.length;i++){var e=r[i];for(var o=0,s=e.tf.keys();o<s.length;o++){var u=s[o];var a=this.chunkOccurrences.get(u);if(typeof a=="number"){var h=a-1;h<=0?this.chunkOccurrences.delete(u):this.chunkOccurrences.set(u,h)}}}}};t.prototype.computeSimilarityScore=function(t,n,i){var r=0;for(var e=0,o=Object.entries(n);e<o.length;e++){var s=o[e],u=s[0],a=s[1];var h=t.tf.get(u);if(!h)continue;var c=i.get(u);typeof c!="number"&&(c=this.computeIdf(u),i.set(u,c)),r+=h*c*a}return r};t.prototype.computeEmbedding=function(n){var i=t.termFrequencies(n);return this.computeTfidf(i)};t.prototype.computeIdf=function(t){var n;var i=(n=this.chunkOccurrences.get(t))!==null&&n!==void 0?n:0;return i>0?Math.log((this.chunkCount+1)/i):0};t.prototype.computeTfidf=function(t){var n=Object.create(null);for(var i=0,r=t;i<r.length;i++){var e=r[i],o=e[0],s=e[1];var u=this.computeIdf(o);u>0&&(n[o]=s*u)}return n};return t}();var jat;function Rat(t){var n=t;return Array.isArray(n.items)}function Tat(t){var n=t;return!!n.picks&&n.additionalPicks instanceof Promise}(function(t){t[t.NO_ACTION=0]="NO_ACTION",t[t.CLOSE_PICKER=1]="CLOSE_PICKER",t[t.REFRESH_PICKER=2]="REFRESH_PICKER",t[t.REMOVE_ITEM=3]="REMOVE_ITEM"})(jat||(jat={}));var Iat=function(t){__extends(n,t);function n(n,i){var r=this;r=t.call(this)||this,r.prefix=n,r.options=i;return r}n.prototype.provide=function(t,n,i){var r=this;var e;var o=new hi;var s;t.canAcceptInBackground=!!(!((e=this.options)===null||e===void 0)&&e.canAcceptInBackground),t.matchOnLabel=t.matchOnDescription=t.matchOnDetail=t.sortByLabel=!1;var u=o.add(new fi),a=function(){return __awaiter(r,void 0,void 0,(function(){var r,e,o,a,h,c,f,l,v;var d=this;return __generator(this,(function(g){switch(g.label){case 0:e=u.value=new hi;s==null||s.dispose(!0),t.busy=!1,s=new ji(n);o=s.token;a=t.value.substring(this.prefix.length);!((r=this.options)===null||r===void 0)&&r.shouldSkipTrimPickFilter||(a=a.trim());h=this._getPicks(a,e,o,i),c=function(n,i){var r;var e,o;if(Rat(n)?(e=n.items,o=n.active):e=n,e.length===0){if(i)return!1;(a.length>0||t.hideInput)&&(!((r=d.options)===null||r===void 0)&&r.noResultsPick)&&(e=Y(d.options.noResultsPick)?[d.options.noResultsPick(a)]:[d.options.noResultsPick])}return t.items=e,o&&(t.activeItems=[o]),!0},f=function(n){return __awaiter(d,void 0,void 0,(function(){var i,r;var e=this;return __generator(this,(function(s){switch(s.label){case 0:i=!1,r=!1;return[4,Promise.all([function(){return __awaiter(e,void 0,void 0,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:t=typeof n.mergeDelay=="number";if(!t)return[3,2];return[4,Ms(n.mergeDelay)];case 1:t=(e.sent(),o.isCancellationRequested);e.label=2;case 2:t||r||(i=c(n.picks,!0));return[2]}}))}))}(),function(){return __awaiter(e,void 0,void 0,(function(){var e,s,u,a,h,f,l;return __generator(this,(function(v){switch(v.label){case 0:t.busy=!0;v.label=1;case 1:v.trys.push([1,,3,4]);return[4,n.additionalPicks];case 2:e=v.sent();if(o.isCancellationRequested)return[2];s=void 0,u=void 0,a=void 0,h=void 0;if(Rat(n.picks)?(s=n.picks.items,u=n.picks.active):s=n.picks,Rat(e)?(a=e.items,h=e.active):a=e,a.length>0||!i){f=void 0;if(!u&&!h){l=t.activeItems[0];l&&s.indexOf(l)!==-1&&(f=l)}c({items:__spreadArray(__spreadArray([],s,true),a,true),active:u||h||f})}return[3,4];case 3:o.isCancellationRequested||(t.busy=!1),r=!0;return[7];case 4:return[2]}}))}))}()])];case 1:s.sent();return[2]}}))}))};if(!(h!==null))return[3,11];if(!Tat(h))return[3,2];return[4,f(h)];case 1:g.sent();return[3,11];case 2:if(!(h instanceof Promise))return[3,10];t.busy=!0;g.label=3;case 3:g.trys.push([3,,8,9]);return[4,h];case 4:l=g.sent();if(o.isCancellationRequested)return[2];if(!Tat(l))return[3,6];return[4,f(l)];case 5:v=g.sent();return[3,7];case 6:v=c(l);g.label=7;case 7:v;return[3,9];case 8:o.isCancellationRequested||(t.busy=!1);return[7];case 9:return[3,11];case 10:c(h);g.label=11;case 11:return[2]}}))}))};o.add(t.onDidChangeValue((function(){return a()}))),a(),o.add(t.onDidAccept((function(n){var i=t.selectedItems[0];typeof(i==null?void 0:i.accept)=="function"&&(n.inBackground||t.hide(),i.accept(t.keyMods,n))})));var h=function(i,e){return __awaiter(r,void 0,void 0,(function(){var r,o,s,u,h,c,f,l,v,d,g;return __generator(this,(function(p){switch(p.label){case 0:if(typeof e.trigger!="function")return[2];s=(o=(r=e.buttons)===null||r===void 0?void 0:r.indexOf(i))!==null&&o!==void 0?o:-1;if(!(s>=0))return[3,4];u=e.trigger(s,t.keyMods);if(!(typeof u=="number"))return[3,1];c=u;return[3,3];case 1:return[4,u];case 2:c=p.sent();p.label=3;case 3:h=c;if(n.isCancellationRequested)return[2];switch(h){case jat.NO_ACTION:break;case jat.CLOSE_PICKER:t.hide();break;case jat.REFRESH_PICKER:a();break;case jat.REMOVE_ITEM:{f=t.items.indexOf(e);if(f!==-1){l=t.items.slice(),v=l.splice(f,1),d=t.activeItems.filter((function(t){return t!==v[0]})),g=t.keepScrollPosition;t.keepScrollPosition=!0,t.items=l,d&&(t.activeItems=d),t.keepScrollPosition=g}break}}p.label=4;case 4:return[2]}}))}))};return o.add(t.onDidTriggerItemButton((function(t){var n=t.button,i=t.item;return h(n,i)}))),o.add(t.onDidTriggerSeparatorButton((function(t){var n=t.button,i=t.separator;return h(n,i)}))),o};return n}(ci);var Bat,Nat,Pat=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Wat=function(t,n){return function(i,r){n(i,r,t)}};var Hat=Bat=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this,Bat.PREFIX,n)||this,u.instantiationService=i,u.keybindingService=r,u.commandService=e,u.telemetryService=o,u.dialogService=s,u.commandsHistory=u._register(u.instantiationService.createInstance(zat)),u.options=n;return u}n.prototype._getPicks=function(t,n,i,r){return __awaiter(this,void 0,void 0,(function(){var n,e,o,s,u,a,h,c,f,l,v,d,g,p,w,m,d,b,y,_,k,x,d,b;var C=this;return __generator(this,(function(S){switch(S.label){case 0:return[4,this.getCommandPicks(i)];case 1:u=S.sent();if(i.isCancellationRequested)return[2,[]];a=ei((function(){var n=new Lat;return n.updateDocuments(u.map((function(t){return{key:t.commandId,textChunks:[C.getTfIdfChunk(t)]}}))),function(t){var n,i;var r=t.slice(0);r.sort((function(t,n){return n.score-t.score}));var e=(i=(n=r[0])===null||n===void 0?void 0:n.score)!==null&&i!==void 0?i:0;if(e>0)for(var o=0,s=r;o<s.length;o++){var u=s[o];u.score/=e}return r}(n.calculateScores(t,i)).filter((function(t){return t.score>Bat.TFIDF_THRESHOLD})).slice(0,Bat.TFIDF_MAX_RESULTS)})),h=[];c=function(r){var o=(n=Bat.WORD_FILTER(t,r.label))!==null&&n!==void 0?n:void 0,s=r.commandAlias&&(e=Bat.WORD_FILTER(t,r.commandAlias))!==null&&e!==void 0?e:void 0;if(o||s)r.highlights={label:o,detail:f.options.showAlias?s:void 0},h.push(r);else if(t===r.commandId)h.push(r);else if(t.length>=3){var u=a();if(i.isCancellationRequested)return{value:[]};var c=u.find((function(t){return t.key===r.commandId}));c&&(r.tfIdfScore=c.score,h.push(r))}};f=this;for(l=0,v=u;l<v.length;l++){d=v[l];g=c(d);if(typeof g==="object")return[2,g.value]}p=new Map;for(w=0,m=h;w<m.length;w++){d=m[w];b=p.get(d.label);b?(d.description=d.commandId,b.description=b.commandId):p.set(d.label,d)}h.sort((function(t,n){if(t.tfIdfScore&&n.tfIdfScore)return t.tfIdfScore===n.tfIdfScore?t.label.localeCompare(n.label):n.tfIdfScore-t.tfIdfScore;if(t.tfIdfScore)return 1;if(n.tfIdfScore)return-1;var i=C.commandsHistory.peek(t.commandId),r=C.commandsHistory.peek(n.commandId);if(i&&r)return i>r?-1:1;if(i)return-1;if(r)return 1;if(C.options.suggestedCommandIds){var e=C.options.suggestedCommandIds.has(t.commandId),o=C.options.suggestedCommandIds.has(n.commandId);if(e&&o)return 0;if(e)return-1;if(o)return 1}return t.label.localeCompare(n.label)}));y=[];_=!1,k=!0,x=!!this.options.suggestedCommandIds;for(d=0;d<h.length;d++){b=h[d];d===0&&this.commandsHistory.peek(b.commandId)&&(y.push({type:"separator",label:ht(0,"recently used")}),_=!0),k&&b.tfIdfScore!==void 0&&(y.push({type:"separator",label:ht(0,"similar commands")}),k=!1),x&&b.tfIdfScore===void 0&&!this.commandsHistory.peek(b.commandId)&&(!((o=this.options.suggestedCommandIds)===null||o===void 0)&&o.has(b.commandId))&&(y.push({type:"separator",label:ht(0,"commonly used")}),_=!0,x=!1),!_||b.tfIdfScore!==void 0||this.commandsHistory.peek(b.commandId)||!((s=this.options.suggestedCommandIds)===null||s===void 0)&&s.has(b.commandId)||(y.push({type:"separator",label:ht(0,"other commands")}),_=!1),y.push(this.toCommandPick(b,r))}return[2,this.hasAdditionalCommandPicks(t,i)?{picks:y,additionalPicks:function(){return __awaiter(C,void 0,void 0,(function(){var n,e,o;var s=this;return __generator(this,(function(a){switch(a.label){case 0:return[4,this.getAdditionalCommandPicks(u,h,t,i)];case 1:e=a.sent();if(i.isCancellationRequested)return[2,[]];o=e.map((function(t){return s.toCommandPick(t,r)}));return[2,(k&&((n=o[0])===null||n===void 0?void 0:n.type)!=="separator"&&o.unshift({type:"separator",label:ht(0,"similar commands")}),o)]}}))}))}()}:y]}}))}))};n.prototype.toCommandPick=function(t,n){var i=this;if(t.type==="separator")return t;var r=this.keybindingService.lookupKeybinding(t.commandId),e=r?ht(0,"{0}, {1}",t.label,r.getAriaLabel()):t.label;return __assign(__assign({},t),{ariaLabel:e,detail:this.options.showAlias&&t.commandAlias!==t.label?t.commandAlias:void 0,keybinding:r,accept:function(){return __awaiter(i,void 0,void 0,(function(){var i,r,e,o;var s;return __generator(this,(function(u){switch(u.label){case 0:this.commandsHistory.push(t.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:t.commandId,from:(i=n==null?void 0:n.from)!==null&&i!==void 0?i:"quick open"});u.label=1;case 1:u.trys.push([1,6,,7]);if(!(!((r=t.args)===null||r===void 0)&&r.length))return[3,3];return[4,(s=this.commandService).executeCommand.apply(s,__spreadArray([t.commandId],t.args,false))];case 2:e=u.sent();return[3,5];case 3:return[4,this.commandService.executeCommand(t.commandId)];case 4:e=u.sent();u.label=5;case 5:e;return[3,7];case 6:o=u.sent();Qn(o)||this.dialogService.error(ht(0,"Command '{0}' resulted in an error",t.label),Fat(o));return[3,7];case 7:return[2]}}))}))}})};n.prototype.getTfIdfChunk=function(t){var n=t.label,i=t.commandAlias,r=t.commandDescription;var e=n;return i&&i!==n&&(e+=" - ".concat(i)),r&&r.value!==n&&(e+=" - ".concat(r.value===r.original?r.value:"".concat(r.value," (").concat(r.original,")"))),e};return n}(Iat);Hat.PREFIX=">",Hat.TFIDF_THRESHOLD=.5,Hat.TFIDF_MAX_RESULTS=5,Hat.WORD_FILTER=KR(VR,(function(t,n,i){if(i===void 0){i=!1}if(!n||n.length===0)return null;var r=null,e=0;for(t=t.toLowerCase(),n=n.toLowerCase();e<n.length&&(r=cT(t,n,0,e,i),r===null);)e=fT(n,e+1);return r}),GR),Hat=Bat=Pat([Wat(1,Jh),Wat(2,Yx),Wat(3,ac),Wat(4,_f),Wat(5,ej)],Hat);var zat=Nat=function(t){__extends(n,t);function n(n,i,r){var e=this;e=t.call(this)||this,e.storageService=n,e.configurationService=i,e.logService=r,e.configuredCommandsHistoryLength=0,e.updateConfiguration(),e.load(),e.registerListeners();return e}n.prototype.registerListeners=function(){var t=this;this._register(this.configurationService.onDidChangeConfiguration((function(n){return t.updateConfiguration(n)}))),this._register(this.storageService.onWillSaveState((function(n){n.reason===kW.SHUTDOWN&&t.saveState()})))};n.prototype.updateConfiguration=function(t){t&&!t.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=n.getConfiguredCommandHistoryLength(this.configurationService),n.cache&&n.cache.limit!==this.configuredCommandsHistoryLength&&(n.cache.limit=this.configuredCommandsHistoryLength,n.hasChanges=!0))};n.prototype.load=function(){var t=this.storageService.get(n.PREF_KEY_CACHE,0);var i;if(t)try{i=JSON.parse(t)}catch(e){this.logService.error("[CommandsHistory] invalid data: ".concat(e))}var r=n.cache=new ud(this.configuredCommandsHistoryLength,1);if(i){var e=void 0;e=i.usesLRU?i.entries:i.entries.sort((function(t,n){return t.value-n.value})),e.forEach((function(t){return r.set(t.key,t.value)}))}n.counter=this.storageService.getNumber(n.PREF_KEY_COUNTER,0,n.counter)};n.prototype.push=function(t){n.cache&&(n.cache.set(t,n.counter++),n.hasChanges=!0)};n.prototype.peek=function(t){var i;return(i=n.cache)===null||i===void 0?void 0:i.peek(t)};n.prototype.saveState=function(){if(!n.cache||!n.hasChanges)return;var t={usesLRU:!0,entries:[]};n.cache.forEach((function(n,i){return t.entries.push({key:i,value:n})})),this.storageService.store(n.PREF_KEY_CACHE,JSON.stringify(t),0,0),this.storageService.store(n.PREF_KEY_COUNTER,n.counter,0,0),n.hasChanges=!1};n.getConfiguredCommandHistoryLength=function(t){var i,r;var e=(r=(i=t.getValue().workbench)===null||i===void 0?void 0:i.commandPalette)===null||r===void 0?void 0:r.history;return typeof e=="number"?e:n.DEFAULT_COMMANDS_HISTORY_LENGTH};return n}(ci);zat.DEFAULT_COMMANDS_HISTORY_LENGTH=50,zat.PREF_KEY_CACHE="commandPalette.mru.cache",zat.PREF_KEY_COUNTER="commandPalette.mru.counter",zat.counter=1,zat.hasChanges=!1,zat=Nat=Pat([Wat(0,_W),Wat(1,Kl),Wat(2,kf)],zat);var Uat=function(t){__extends(n,t);function n(n,i,r,e,o,s){return t.call(this,n,i,r,e,o,s)||this}n.prototype.getCodeEditorCommandPicks=function(){var t=this.activeTextEditorControl;if(!t)return[];var n=[];for(var i=0,r=t.getSupportedActions();i<r.length;i++){var e=r[i];n.push({commandId:e.id,commandAlias:e.alias,label:HT(e.label)||e.id})}return n};return n}(Hat);var Kat=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Vat=function(t,n){return function(i,r){n(i,r,t)}};var qat=function(t){__extends(n,t);function n(n,i,r,e,o,s){var u=this;u=t.call(this,{showAlias:!1},n,r,e,o,s)||this,u.codeEditorService=i;return u}Object.defineProperty(n.prototype,"activeTextEditorControl",{get:function(){var t;return(t=this.codeEditorService.getFocusedCodeEditor())!==null&&t!==void 0?t:void 0},enumerable:false,configurable:true});n.prototype.getCommandPicks=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.getCodeEditorCommandPicks()]}))}))};n.prototype.hasAdditionalCommandPicks=function(){return!1};n.prototype.getAdditionalCommandPicks=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,[]]}))}))};return n}(Uat);qat=Kat([Vat(0,Jh),Vat(1,Qh),Vat(2,Yx),Vat(3,ac),Vat(4,_f),Vat(5,ej)],qat);var Gat=function(t){__extends(n,t);function n(){return t.call(this,{id:n.ID,label:tN.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:$C.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})||this}n.prototype.run=function(t){t.get(TH).quickAccess.show(qat.PREFIX)};return n}(Lf);Gat.ID="editor.action.quickCommand",Bf(Gat),of.as(FH).registerQuickAccessProvider({ctor:qat,prefix:qat.PREFIX,helpEntries:[{description:tN.quickCommandHelp,commandId:Gat.ID}]});var $at=function(t,n,i,r){var e,o=arguments.length,s=o<3?n:r===null?r=Object.getOwnPropertyDescriptor(n,i):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,n,i,r);else for(var u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s},Jat=function(t,n){return function(i,r){n(i,r,t)}};var Zat=function(t){__extends(n,t);function n(n,i,r,e,o,s,u){return t.call(this,!0,n,i,r,e,o,s,u)||this}return n}(y3);Zat=$at([Jat(1,Gc),Jat(2,Qh),Jat(3,EL),Jat(4,Jh),Jat(5,_W),Jat(6,Kl)],Zat),Pf(y3.ID,Zat,4);Bf(function(t){__extends(n,t);function n(){var n=this;n=t.call(this,{id:"editor.action.toggleHighContrast",label:rN.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0})||this,n._originalThemeName=null;return n}n.prototype.run=function(t,n){var i=t.get(Aq),r=i.getColorTheme();C_(r.type)?(i.setTheme(this._originalThemeName||(S_(r.type)?mq:wq)),this._originalThemeName=null):(i.setTheme(S_(r.type)?bq:yq),this._originalThemeName=r.themeName)};return n}(Lf));var Qat=t("R",Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:dY,Emitter:gY,KeyCode:pY,KeyMod:wY,MarkerSeverity:kY,MarkerTag:xY,Position:mY,Range:bY,Selection:yY,SelectionDirection:_Y,Token:SY,Uri:CY,editor:DY,languages:AY},Symbol.toStringTag,{value:"Module"})));function Yat(t){return new Worker("/assets/editor.worker-kH-qYHP1.js",{name:t==null?void 0:t.name})}function Xat(t){return new Worker("/assets/json.worker-kXvdEO82.js",{name:t==null?void 0:t.name})}function tht(t){return new Worker("/assets/css.worker-DC5nnw6R.js",{name:t==null?void 0:t.name})}function nht(t){return new Worker("/assets/html.worker-BCaZjbWa.js",{name:t==null?void 0:t.name})}function iht(t){return new Worker("/assets/ts.worker-BtbHax8g.js",{name:t==null?void 0:t.name})}function rht(t){return new Worker("/assets/yaml.worker-tZqYN86i.js",{name:t==null?void 0:t.name})}function eht(t,n,i){var r=this;var e=new Map,o=function(t){var i=t.getLanguageId();return Array.isArray(n)?n.includes(i):n===i},s=function(n){return __awaiter(r,void 0,void 0,(function(){var r,e;return __generator(this,(function(s){switch(s.label){case 0:r=n.getVersionId();return[4,i.provideMarkerData(n)];case 1:e=s.sent();r===n.getVersionId()&&!n.isDisposed()&&o(n)&&t.editor.setModelMarkers(n,i.owner,e!==null&&e!==void 0?e:[]);return[2]}}))}))},u=function(t){if(!o(t))return;var n;e.set(t,t.onDidChangeContent((function(){clearTimeout(n),n=setTimeout((function(){s(t)}),500)}))),s(t)},a=function(n){t.editor.setModelMarkers(n,i.owner,[]);var r=e.get(n);r&&(r.dispose(),e.delete(n))},h=t.editor.onDidCreateModel(u),c=t.editor.onWillDisposeModel((function(t){var n;a(t),(n=i.doReset)==null||n.call(i,t)})),f=t.editor.onDidChangeModelLanguage((function(t){var n;a(t.model),u(t.model),(n=i.doReset)==null||n.call(i,t.model)}));for(var l=0,v=t.editor.getModels();l<v.length;l++){var d=v[l];u(d)}return{dispose:function(){for(var t=0,n=e.keys();t<n.length;t++){var i=n[t];a(i)}h.dispose(),c.dispose(),f.dispose()},revalidate:function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:return[4,Promise.all(t.editor.getModels().map(s))];case 1:n.sent();return[2]}}))}))}}}var oht;(function(){var t={470:function(t){function n(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function i(t,n){for(var i,r="",e=0,o=-1,s=0,u=0;u<=t.length;++u){if(u<t.length)i=t.charCodeAt(u);else{if(i===47)break;i=47}if(i===47){if(!(o===u-1||s===1))if(o!==u-1&&s===2){if(r.length<2||e!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var a=r.lastIndexOf("/");if(a!==r.length-1){a===-1?(r="",e=0):e=(r=r.slice(0,a)).length-1-r.lastIndexOf("/"),o=u,s=0;continue}}else if(r.length===2||r.length===1){r="",e=0,o=u,s=0;continue}}n&&(r.length>0?r+="/..":r="..",e=2)}else r.length>0?r+="/"+t.slice(o+1,u):r=t.slice(o+1,u),e=u-o-1;o=u,s=0}else i===46&&s!==-1?++s:s=-1}return r}var r={resolve:function(){for(var t,r="",e=!1,o=arguments.length-1;o>=-1&&!e;o--){var s;o>=0?s=arguments[o]:(t===void 0&&(t=process.cwd()),s=t),n(s),s.length!==0&&(r=s+"/"+r,e=s.charCodeAt(0)===47)}return r=i(r,!e),e?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(t){if(n(t),t.length===0)return".";var r=t.charCodeAt(0)===47,e=t.charCodeAt(t.length-1)===47;return(t=i(t,!r)).length!==0||r||(t="."),t.length>0&&e&&(t+="/"),r?"/"+t:t},isAbsolute:function(t){return n(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,i=0;i<arguments.length;++i){var e=arguments[i];n(e),e.length>0&&(t===void 0?t=e:t+="/"+e)}return t===void 0?".":r.normalize(t)},relative:function(t,i){if(n(t),n(i),t===i||(t=r.resolve(t))===(i=r.resolve(i)))return"";for(var e=1;e<t.length&&t.charCodeAt(e)===47;++e);for(var o=t.length,s=o-e,u=1;u<i.length&&i.charCodeAt(u)===47;++u);for(var a=i.length-u,h=s<a?s:a,c=-1,f=0;f<=h;++f){if(f===h){if(a>h){if(i.charCodeAt(u+f)===47)return i.slice(u+f+1);if(f===0)return i.slice(u+f)}else s>h&&(t.charCodeAt(e+f)===47?c=f:f===0&&(c=0));break}var l=t.charCodeAt(e+f);if(l!==i.charCodeAt(u+f))break;l===47&&(c=f)}var v="";for(f=e+c+1;f<=o;++f)f!==o&&t.charCodeAt(f)!==47||(v.length===0?v+="..":v+="/..");return v.length>0?v+i.slice(u+c):(u+=c,i.charCodeAt(u)===47&&++u,i.slice(u))},_makeLong:function(t){return t},dirname:function(t){if(n(t),t.length===0)return".";for(var i=t.charCodeAt(0),r=i===47,e=-1,o=!0,s=t.length-1;s>=1;--s)if((i=t.charCodeAt(s))===47){if(!o){e=s;break}}else o=!1;return e===-1?r?"/":".":r&&e===1?"//":t.slice(0,e)},basename:function(t,i){if(i!==void 0&&typeof i!="string")throw new TypeError('"ext" argument must be a string');n(t);var r,e=0,o=-1,s=!0;if(i!==void 0&&i.length>0&&i.length<=t.length){if(i.length===t.length&&i===t)return"";var u=i.length-1,a=-1;for(r=t.length-1;r>=0;--r){var h=t.charCodeAt(r);if(h===47){if(!s){e=r+1;break}}else a===-1&&(s=!1,a=r+1),u>=0&&(h===i.charCodeAt(u)?--u==-1&&(o=r):(u=-1,o=a))}return e===o?o=a:o===-1&&(o=t.length),t.slice(e,o)}for(r=t.length-1;r>=0;--r)if(t.charCodeAt(r)===47){if(!s){e=r+1;break}}else o===-1&&(s=!1,o=r+1);return o===-1?"":t.slice(e,o)},extname:function(t){n(t);for(var i=-1,r=0,e=-1,o=!0,s=0,u=t.length-1;u>=0;--u){var a=t.charCodeAt(u);if(a!==47)e===-1&&(o=!1,e=u+1),a===46?i===-1?i=u:s!==1&&(s=1):i!==-1&&(s=-1);else if(!o){r=u+1;break}}return i===-1||e===-1||s===0||s===1&&i===e-1&&i===r+1?"":t.slice(i,e)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return function(t,n){var i=n.dir||n.root,r=n.base||(n.name||"")+(n.ext||"");return i?i===n.root?i+r:i+"/"+r:r}(0,t)},parse:function(t){n(t);var i={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return i;var r,e=t.charCodeAt(0),o=e===47;o?(i.root="/",r=1):r=0;for(var s=-1,u=0,a=-1,h=!0,c=t.length-1,f=0;c>=r;--c)if((e=t.charCodeAt(c))!==47)a===-1&&(h=!1,a=c+1),e===46?s===-1?s=c:f!==1&&(f=1):s!==-1&&(f=-1);else if(!h){u=c+1;break}return s===-1||a===-1||f===0||f===1&&s===a-1&&s===u+1?a!==-1&&(i.base=i.name=u===0&&o?t.slice(1,a):t.slice(u,a)):(u===0&&o?(i.name=t.slice(1,s),i.base=t.slice(1,a)):(i.name=t.slice(u,s),i.base=t.slice(u,a)),i.ext=t.slice(s,a)),u>0?i.dir=t.slice(0,u-1):o&&(i.dir="/"),i},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,t.exports=r}},n={};function i(r){var e=n[r];if(e!==void 0)return e.exports;var o=n[r]={exports:{}};return t[r](o,o.exports,i),o.exports}i.d=function(t,n){for(var r in n)i.o(n,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(function(){var t;i.r(r),i.d(r,{URI:function(){return c},Utils:function(){return S}}),typeof process=="object"?t=process.platform==="win32":typeof navigator=="object"&&(t=navigator.userAgent.indexOf("Windows")>=0);var n=/^\w[\w\d+.-]*$/,e=/^\//,o=/^\/\//;function s(t,i){if(!t.scheme&&i)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(t.authority,'", path: "').concat(t.path,'", query: "').concat(t.query,'", fragment: "').concat(t.fragment,'"}'));if(t.scheme&&!n.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!e.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var u="",a="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var c=function(){function n(t,n,i,r,e,o){if(o===void 0){o=!1}f(this,"scheme");f(this,"authority");f(this,"path");f(this,"query");f(this,"fragment");typeof t=="object"?(this.scheme=t.scheme||u,this.authority=t.authority||u,this.path=t.path||u,this.query=t.query||u,this.fragment=t.fragment||u):(this.scheme=function(t,n){return t||n?t:"file"}(t,o),this.authority=n||u,this.path=function(t,n){switch(t){case"https":case"http":case"file":n?n[0]!==a&&(n=a+n):n=a}return n}(this.scheme,i||u),this.query=r||u,this.fragment=e||u,s(this,o))}n.isUri=function(t){return t instanceof n||!!t&&typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function"};Object.defineProperty(n.prototype,"fsPath",{get:function(){return w(this)},enumerable:false,configurable:true});n.prototype.with=function(t){if(!t)return this;var n=t.scheme,i=t.authority,r=t.path,e=t.query,o=t.fragment;return n===void 0?n=this.scheme:n===null&&(n=u),i===void 0?i=this.authority:i===null&&(i=u),r===void 0?r=this.path:r===null&&(r=u),e===void 0?e=this.query:e===null&&(e=u),o===void 0?o=this.fragment:o===null&&(o=u),n===this.scheme&&i===this.authority&&r===this.path&&e===this.query&&o===this.fragment?this:new v(n,i,r,e,o)};n.parse=function(t,n){if(n===void 0){n=!1}var i=h.exec(t);return i?new v(i[2]||u,_(i[4]||u),_(i[5]||u),_(i[7]||u),_(i[9]||u),n):new v(u,u,u,u,u)};n.file=function(n){var i=u;if(t&&(n=n.replace(/\\/g,a)),n[0]===a&&n[1]===a){var r=n.indexOf(a,2);r===-1?(i=n.substring(2),n=a):(i=n.substring(2,r),n=n.substring(r)||a)}return new v("file",i,n,u,u)};n.from=function(t){var n=new v(t.scheme,t.authority,t.path,t.query,t.fragment);return s(n,!0),n};n.prototype.toString=function(t){if(t===void 0){t=!1}return m(this,t)};n.prototype.toJSON=function(){return this};n.revive=function(t){if(t){if(t instanceof n)return t;{var i=new v(t);return i._formatted=t.external,i._fsPath=t._sep===l?t.fsPath:null,i}}return t};return n}();var l=t?1:void 0;var v=function(t){__extends(n,t);function n(){var n=t.apply(this,arguments)||this;f(n,"_formatted",null);f(n,"_fsPath",null);return n}Object.defineProperty(n.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=w(this)),this._fsPath},enumerable:false,configurable:true});n.prototype.toString=function(t){if(t===void 0){t=!1}return t?m(this,!0):(this._formatted||(this._formatted=m(this,!1)),this._formatted)};n.prototype.toJSON=function(){var t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=l),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t};return n}(c);var d={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function g(t,n,i){var r,e=-1;for(var o=0;o<t.length;o++){var s=t.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||n&&s===47||i&&s===91||i&&s===93||i&&s===58)e!==-1&&(r+=encodeURIComponent(t.substring(e,o)),e=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));var u=d[s];u!==void 0?(e!==-1&&(r+=encodeURIComponent(t.substring(e,o)),e=-1),r+=u):e===-1&&(e=o)}}return e!==-1&&(r+=encodeURIComponent(t.substring(e))),r!==void 0?r:t}function p(t){var n;for(var i=0;i<t.length;i++){var r=t.charCodeAt(i);r===35||r===63?(n===void 0&&(n=t.substr(0,i)),n+=d[r]):n!==void 0&&(n+=t[i])}return n!==void 0?n:t}function w(n,i){var r;return r=n.authority&&n.path.length>1&&n.scheme==="file"?"//".concat(n.authority).concat(n.path):n.path.charCodeAt(0)===47&&(n.path.charCodeAt(1)>=65&&n.path.charCodeAt(1)<=90||n.path.charCodeAt(1)>=97&&n.path.charCodeAt(1)<=122)&&n.path.charCodeAt(2)===58?n.path[1].toLowerCase()+n.path.substr(2):n.path,t&&(r=r.replace(/\//g,"\\")),r}function m(t,n){var i=n?p:g;var r="",e=t.scheme,o=t.authority,s=t.path,u=t.query,h=t.fragment;if(e&&(r+=e,r+=":"),(o||e==="file")&&(r+=a,r+=a),o){var c=o.indexOf("@");if(c!==-1){var f=o.substr(0,c);o=o.substr(c+1),c=f.lastIndexOf(":"),c===-1?r+=i(f,!1,!1):(r+=i(f.substr(0,c),!1,!1),r+=":",r+=i(f.substr(c+1),!1,!0)),r+="@"}o=o.toLowerCase(),c=o.lastIndexOf(":"),c===-1?r+=i(o,!1,!0):(r+=i(o.substr(0,c),!1,!0),r+=o.substr(c))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){var c=s.charCodeAt(1);c>=65&&c<=90&&(s="/".concat(String.fromCharCode(c+32),":").concat(s.substr(3)))}else if(s.length>=2&&s.charCodeAt(1)===58){var c=s.charCodeAt(0);c>=65&&c<=90&&(s="".concat(String.fromCharCode(c+32),":").concat(s.substr(2)))}r+=i(s,!0,!1)}return u&&(r+="?",r+=i(u,!1,!1)),h&&(r+="#",r+=n?h:g(h,!1,!1)),r}function b(t){try{return decodeURIComponent(t)}catch(n){return t.length>3?t.substr(0,3)+b(t.substr(3)):t}}var y=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function _(t){return t.match(y)?t.replace(y,(function(t){return b(t)})):t}var k=i(470);var x=k.posix||k,C="/";var S;(function(t){t.joinPath=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}return t.with({path:x.join.apply(x,__spreadArray([t.path],n,false))})},t.resolvePath=function(t){var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var r=t.path,e=!1;r[0]!==C&&(r=C+r,e=!0);var o=x.resolve.apply(x,__spreadArray([r],n,false));return e&&o[0]===C&&!t.authority&&(o=o.substring(1)),t.with({path:o})},t.dirname=function(t){if(t.path.length===0||t.path===C)return t;var n=x.dirname(t.path);return n.length===1&&n.charCodeAt(0)===46&&(n=""),t.with({path:n})},t.basename=function(t){return x.basename(t.path)},t.extname=function(t){return x.extname(t.path)}})(S||(S={}))})(),oht=r})();var sht=oht.URI,uht=oht.Utils;function aht(t){return t}function hht(t){return t}function cht(t){return{start:{line:t.startLineNumber-1,character:t.startColumn-1},end:{line:t.endLineNumber-1,character:t.endColumn-1}}}function fht(t){return{startLineNumber:t.start.line+1,startColumn:t.start.character+1,endLineNumber:t.end.line+1,endColumn:t.end.character+1}}function lht(t){return{location:{range:cht(t),uri:String(t.resource)},message:t.message}}function vht(t){return __assign(__assign({},fht(t.location.range)),{message:t.message,resource:sht.parse(t.location.uri)})}function dht(t){var n={message:t.message,range:cht(t),severity:(i=t.severity,i===8?1:i===4?2:i===2?3:4)};var i;return typeof t.code=="string"?n.code=t.code:t.code!=null&&(n.code=t.code.value,n.codeDescription={href:String(t.code.target)}),t.relatedInformation&&(n.relatedInformation=t.relatedInformation.map(lht)),t.tags&&(n.tags=t.tags.map(aht)),t.source!=null&&(n.source=t.source),n}function ght(t,n){var i=__assign(__assign({},fht(t.range)),{message:t.message,severity:t.severity?(r=t.severity,r===1?8:r===2?4:r===3?2:1):8});var r;return t.code!=null&&(i.code=t.codeDescription==null?String(t.code):{value:String(t.code),target:sht.parse(t.codeDescription.href)}),t.relatedInformation&&(i.relatedInformation=t.relatedInformation.map(vht)),t.tags&&(i.tags=t.tags.map(hht)),t.source!=null&&(i.source=t.source),i}function pht(t){return{range:fht(t.range),text:t.newText}}function wht(t){var n=t.kind==="create"?{newResource:sht.parse(t.uri)}:t.kind==="delete"?{oldResource:sht.parse(t.uri)}:{oldResource:sht.parse(t.oldUri),newResource:sht.parse(t.newUri)};return t.options&&(n.options=function(t){var n={};return t.ignoreIfExists!=null&&(n.ignoreIfExists=t.ignoreIfExists),t.ignoreIfNotExists!=null&&(n.ignoreIfNotExists=t.ignoreIfNotExists),t.overwrite!=null&&(n.overwrite=t.overwrite),t.recursive!=null&&(n.recursive=t.recursive),n}(t.options)),n}function mht(t,n,i){return{resource:sht.parse(n),versionId:i,textEdit:pht(t)}}function bht(t,n){var i={title:t.title,isPreferred:t.isPreferred};return t.diagnostics&&(i.diagnostics=t.diagnostics.map((function(t){return ght(t)}))),t.disabled&&(i.disabled=t.disabled.reason),t.edit&&(i.edit=function(t){var n;var i=[];if(t.changes)for(var r=0,e=Object.entries(t.changes);r<e.length;r++){var o=e[r],s=o[0],u=o[1];for(var a=0,h=u;a<h.length;a++){var c=h[a];i.push(mht(c,s))}}if(t.documentChanges)for(var f=0,l=t.documentChanges;f<l.length;f++){var s=l[f];if("textDocument"in s)for(var v=0,d=s.edits;v<d.length;v++){var u=d[v];i.push(mht(u,s.textDocument.uri,(n=s.textDocument.version)!==null&&n!==void 0?n:void 0))}else i.push(wht(s))}return{edits:i}}(t.edit)),t.isPreferred!=null&&(i.isPreferred=t.isPreferred),t.kind&&(i.kind=t.kind),i}function yht(t){return t}function _ht(t){return{value:t.value}}function kht(t){return{range:fht(t.range),text:t.newText}}function xht(t,n){var i,r,e,o,s;var u=(i=n.itemDefaults)!==null&&i!==void 0?i:{},a=(r=t.textEdit)!==null&&r!==void 0?r:u.editRange,h=(e=t.commitCharacters)!==null&&e!==void 0?e:u.commitCharacters,c=(o=t.insertTextFormat)!==null&&o!==void 0?o:u.insertTextFormat,f=(s=t.insertTextMode)!==null&&s!==void 0?s:u.insertTextMode;var l,v=t.insertText;var d;a?(l="range"in(d=a)?fht(d.range):"insert"in d&&"replace"in d?{insert:fht(d.insert),replace:fht(d.replace)}:fht(d),"newText"in a&&(v=a.newText)):l=__assign({},n.range);var g={insertText:v!==null&&v!==void 0?v:t.label,kind:t.kind==null?18:(p=t.kind,p===1?18:p===2?0:p===3?1:p===4?2:p===5?3:p===6?4:p===7?5:p===8?7:p===9?8:p===10?9:p===11?12:p===12?13:p===13?15:p===14?17:p===15?27:p===16?19:p===17?20:p===18?21:p===19?23:p===20?16:p===21?14:p===22?6:p===23?10:p===24?11:24),label:t.label,range:l};var p;return t.additionalTextEdits&&(g.additionalTextEdits=t.additionalTextEdits.map(kht)),t.command&&(g.command=function(t){var n={title:t.title,id:t.command};return t.arguments&&(n.arguments=t.arguments),n}(t.command)),h&&(g.commitCharacters=h),t.detail!=null&&(g.detail=t.detail),typeof t.documentation=="string"?g.documentation=t.documentation:t.documentation&&(g.documentation=_ht(t.documentation)),t.filterText!=null&&(g.filterText=t.filterText),c===2?g.insertTextRules=4:f===2&&(g.insertTextRules=1),t.preselect!=null&&(g.preselect=t.preselect),t.sortText!=null&&(g.sortText=t.sortText),t.tags&&(g.tags=t.tags.map(yht)),g}function Cht(t){return t}function Sht(t){var n,i,r;var e={detail:(n=t.detail)!==null&&n!==void 0?n:"",kind:(o=t.kind,o===1?0:o===2?1:o===3?2:o===4?3:o===5?4:o===6?5:o===7?6:o===8?7:o===9?8:o===10?9:o===11?10:o===12?11:o===13?12:o===14?13:o===15?14:o===16?15:o===17?16:o===18?17:o===19?18:o===20?19:o===21?20:o===22?21:o===23?22:o===24?23:o===25?24:25),name:t.name,range:fht(t.range),selectionRange:fht(t.selectionRange),tags:(r=(i=t.tags)===null||i===void 0?void 0:i.map(Cht))!==null&&r!==void 0?r:[]};var o;return t.children&&(e.children=t.children.map(Sht)),e}function Dht(t){var n={start:t.startLine+1,end:t.endLine+1};return t.kind!=null&&(n.kind={value:t.kind}),n}function Aht(t){return typeof t=="string"?{value:t}:{value:"```".concat(t.language,"\n").concat(t.value,"\n```")}}function Oht(t){return{character:t.column-1,line:t.lineNumber-1}}function Eht(t){var n={range:fht(t.range)};return t.tooltip!=null&&(n.tooltip=t.tooltip),t.target!=null&&(n.url=sht.parse(t.target)),n}function Mht(t){var n={range:fht(t.targetRange),targetSelectionRange:fht(t.targetSelectionRange),uri:sht.parse(t.targetUri)};return t.originSelectionRange&&(n.originSelectionRange=fht(t.originSelectionRange)),n}function Fht(t){return{owner:"yaml",provideMarkerData:function(n){return __awaiter(this,void 0,void 0,(function(){var i,r;return __generator(this,(function(e){switch(e.label){case 0:return[4,t(n.uri)];case 1:i=e.sent();return[4,i.doValidation(String(n.uri))];case 2:r=e.sent();return[2,r==null?void 0:r.map((function(t){return ght(t)}))]}}))}))},doReset:function(n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,t(n.uri)];case 1:return[4,i.sent().resetSchema(String(n.uri))];case 2:i.sent();return[2]}}))}))}}}function Lht(t){return{triggerCharacters:[" ",":"],provideCompletionItems:function(n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o,s,u,a;return __generator(this,(function(h){switch(h.label){case 0:r=n.uri,e=n.getWordUntilPosition(i);return[4,t(r)];case 1:o=h.sent();return[4,o.doComplete(String(r),Oht(i))];case 2:s=h.sent();if(s)return[2,(u=s,a={range:{startLineNumber:i.lineNumber,startColumn:e.startColumn,endLineNumber:i.lineNumber,endColumn:e.endColumn}},{incomplete:!!u.isIncomplete,suggestions:u.items.map((function(t){return xht(t,{range:a.range,itemDefaults:u.itemDefaults})}))})];return[2]}}))}))}}}function jht(t){return{provideDefinition:function(n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o;return __generator(this,(function(s){switch(s.label){case 0:r=n.uri;return[4,t(r)];case 1:e=s.sent();return[4,e.doDefinition(String(r),Oht(i))];case 2:o=s.sent();return[2,o==null?void 0:o.map(Mht)]}}))}))}}}function Rht(t){return{provideHover:function(n,i){return __awaiter(this,void 0,void 0,(function(){var r,e,o;return __generator(this,(function(s){switch(s.label){case 0:r=n.uri;return[4,t(r)];case 1:e=s.sent();return[4,e.doHover(String(r),Oht(i))];case 2:o=s.sent();if(o)return[2,function(t){var n={contents:(i=t.contents,typeof i=="string"||"language"in i?[Aht(i)]:Array.isArray(i)?i.map(Aht):[_ht(i)])};var i;return t.range&&(n.range=fht(t.range)),n}(o)];return[2]}}))}))}}}function Tht(t){return{displayName:"yaml",provideDocumentSymbols:function(n){return __awaiter(this,void 0,void 0,(function(){var i,r,e;return __generator(this,(function(o){switch(o.label){case 0:i=n.uri;return[4,t(i)];case 1:r=o.sent();return[4,r.findDocumentSymbols(String(i))];case 2:e=o.sent();return[2,e==null?void 0:e.map(Sht)]}}))}))}}}function Iht(t){return{displayName:"yaml",provideDocumentFormattingEdits:function(n){return __awaiter(this,void 0,void 0,(function(){var i,r,e;return __generator(this,(function(o){switch(o.label){case 0:i=n.uri;return[4,t(i)];case 1:r=o.sent();return[4,r.format(String(i))];case 2:e=o.sent();return[2,e==null?void 0:e.map(pht)]}}))}))}}}function Bht(t){return{provideLinks:function(n){return __awaiter(this,void 0,void 0,(function(){var i,r,e;return __generator(this,(function(o){switch(o.label){case 0:i=n.uri;return[4,t(i)];case 1:r=o.sent();return[4,r.findLinks(String(i))];case 2:e=o.sent();if(e)return[2,{links:e.map(Eht)}];return[2]}}))}))}}}function Nht(t){return{provideCodeActions:function(n,i,r){return __awaiter(this,void 0,void 0,(function(){var e,o,s;return __generator(this,(function(u){switch(u.label){case 0:e=n.uri;return[4,t(e)];case 1:o=u.sent();return[4,o.getCodeAction(String(e),cht(i),function(t){var n={diagnostics:t.markers.map(dht),triggerKind:t.trigger};return t.only!=null&&(n.only=[t.only]),n}(r))];case 2:s=u.sent();if(s)return[2,{actions:s.map((function(t){return bht(t)})),dispose:function(){}}];return[2]}}))}))}}}function Pht(t){return{provideFoldingRanges:function(n){return __awaiter(this,void 0,void 0,(function(){var i,r,e;return __generator(this,(function(o){switch(o.label){case 0:i=n.uri;return[4,t(i)];case 1:r=o.sent();return[4,r.getFoldingRanges(String(i))];case 2:e=o.sent();return[2,e==null?void 0:e.map(Dht)]}}))}))}}}function Wht(t,n){var i=__assign({completion:!0,customTags:[],enableSchemaRequest:!1,format:!0,isKubernetes:!1,hover:!0,schemas:[],validate:!0,yamlVersion:"1.2"},n);t.languages.register({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"]});var r=function(t,n){var i,r=n.createData,e=n.interval,o=e===void 0?3e4:e,s=n.label,u=n.moduleId,a=n.stopWhenIdleFor,h=a===void 0?12e4:a,c=0,f=!1;var l=function(){i&&(i.dispose(),i=void 0)},v=setInterval((function(){i&&Date.now()-c>h&&l()}),o);return{dispose:function(){f=!0,clearInterval(v),l()},getWorker:function(){var n=[];for(var e=0;e<arguments.length;e++){n[e]=arguments[e]}if(f)throw new Error("Worker manager has been disposed");return c=Date.now(),i||(i=t.editor.createWebWorker({createData:r,label:s,moduleId:u})),i.withSyncedResources(n)},updateCreateData:function(t){r=t,l()}}}(t,{label:"yaml",moduleId:"monaco-yaml/yaml.worker",createData:i});var e=eht(t,"yaml",Fht(r.getWorker));var o=[r,t.languages.registerCompletionItemProvider("yaml",Lht(r.getWorker)),t.languages.registerHoverProvider("yaml",Rht(r.getWorker)),t.languages.registerDefinitionProvider("yaml",jht(r.getWorker)),t.languages.registerDocumentSymbolProvider("yaml",Tht(r.getWorker)),t.languages.registerDocumentFormattingEditProvider("yaml",Iht(r.getWorker)),t.languages.registerLinkProvider("yaml",Bht(r.getWorker)),t.languages.registerCodeActionProvider("yaml",Nht(r.getWorker)),t.languages.registerFoldingRangeProvider("yaml",Pht(r.getWorker)),t.languages.setLanguageConfiguration("yaml",{comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:/:\s*$/,action:{indentAction:t.languages.IndentAction.Indent}}]})];return{dispose:function(){for(var t=0,n=o;t<n.length;t++){var i=n[t];i.dispose()}e.dispose()},update:function(n){r.updateCreateData(Object.assign(i,n)),e.dispose(),e=eht(t,"yaml",Fht(r.getWorker))}}}self.MonacoEnvironment={getWorker:function(t,n){return n==="json"?new Xat:n==="css"||n==="scss"||n==="less"?new tht:n==="html"||n==="handlebars"||n==="razor"?new nht:n==="typescript"||n==="javascript"?new iht:n==="yaml"?new rht:new Yat}}}}}));
//# sourceMappingURL=p-d0a7a9d6.system.js.map