var __extends=this&&this.__extends||function(){var t=function(n,r){t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r))t[r]=n[r]};return t(n,r)};return function(n,r){if(typeof r!=="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(n,r);function e(){this.constructor=n}n.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();var __assign=this&&this.__assign||function(){__assign=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++){n=arguments[r];for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i))t[i]=n[i]}return t};return __assign.apply(this,arguments)};var __awaiter=this&&this.__awaiter||function(t,n,r,e){function i(t){return t instanceof r?t:new r((function(n){n(t)}))}return new(r||(r=Promise))((function(r,u){function s(t){try{a(e.next(t))}catch(t){u(t)}}function o(t){try{a(e["throw"](t))}catch(t){u(t)}}function a(t){t.done?r(t.value):i(t.value).then(s,o)}a((e=e.apply(t,n||[])).next())}))};var __generator=this&&this.__generator||function(t,n){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},e,i,u,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(t){return function(n){return a([t,n])}}function a(o){if(e)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(r=0)),r)try{if(e=1,i&&(u=o[0]&2?i["return"]:o[0]?i["throw"]||((u=i["return"])&&u.call(i),0):i.next)&&!(u=u.call(i,o[1])).done)return u;if(i=0,u)o=[o[0]&2,u.value];switch(o[0]){case 0:case 1:u=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(u=r.trys,u=u.length>0&&u[u.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!u||o[1]>u[0]&&o[1]<u[3])){r.label=o[1];break}if(o[0]===6&&r.label<u[1]){r.label=u[1];u=o;break}if(u&&r.label<u[2]){r.label=u[2];r.ops.push(o);break}if(u[2])r.ops.pop();r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t];i=0}finally{e=u=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};System.register(["./p-d0a7a9d6.system.js"],(function(t){"use strict";var n,r;return{setters:[function(t){n=t.j;r=t.s}],execute:function(){t({flattenDiagnosticMessageText:f,getJavaScriptWorker:R,getTypeScriptWorker:D,setupJavaScript:B,setupTypeScript:P});var e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,o={};(function(t,n,r,o){if(n&&typeof n=="object"||typeof n=="function"){var a=function(u){s.call(t,u)||u===r||e(t,u,{get:function(){return n[u]},enumerable:!(o=i(n,u))||o.enumerable})};for(var c=0,f=u(n);c<f.length;c++){var h=f[c];a(h)}}})(o,n,"default");var a=t("WorkerManager",function(){function t(t,n){var r=this;this._modeId=t,this._defaults=n,this._worker=null,this._client=null,this._configChangeListener=this._defaults.onDidChange((function(){return r._stopWorker()})),this._updateExtraLibsToken=0,this._extraLibsChangeListener=this._defaults.onDidExtraLibsChange((function(){return r._updateExtraLibs()}))}t.prototype.dispose=function(){this._configChangeListener.dispose(),this._extraLibsChangeListener.dispose(),this._stopWorker()};t.prototype._stopWorker=function(){this._worker&&(this._worker.dispose(),this._worker=null),this._client=null};t.prototype._updateExtraLibs=function(){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(r){switch(r.label){case 0:if(!this._worker)return[2];t=++this._updateExtraLibsToken;return[4,this._worker.getProxy()];case 1:n=r.sent();this._updateExtraLibsToken===t&&n.updateExtraLibs(this._defaults.getExtraLibs());return[2]}}))}))};t.prototype._getClient=function(){var t=this;return this._client||(this._client=function(){return __awaiter(t,void 0,void 0,(function(){var t;var n=this;return __generator(this,(function(r){switch(r.label){case 0:this._worker=o.editor.createWebWorker({moduleId:"vs/language/typescript/tsWorker",label:this._modeId,keepIdleModels:!0,createData:{compilerOptions:this._defaults.getCompilerOptions(),extraLibs:this._defaults.getExtraLibs(),customWorkerPath:this._defaults.workerOptions.customWorkerPath,inlayHintsOptions:this._defaults.inlayHintsOptions}});if(!this._defaults.getEagerModelSync())return[3,2];return[4,this._worker.withSyncedResources(o.editor.getModels().filter((function(t){return t.getLanguageId()===n._modeId})).map((function(t){return t.uri})))];case 1:t=r.sent();return[3,4];case 2:return[4,this._worker.getProxy()];case 3:t=r.sent();r.label=4;case 4:return[2,t]}}))}))}()),this._client};t.prototype.getLanguageServiceWorker=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return __awaiter(this,void 0,void 0,(function(){var n,r;return __generator(this,(function(e){switch(e.label){case 0:return[4,this._getClient()];case 1:n=e.sent();r=this._worker;if(!r)return[3,3];return[4,this._worker.withSyncedResources(t)];case 2:r=e.sent();e.label=3;case 3:return[2,(r,n)]}}))}))};return t}()),c={};function f(t,n,r){if(r===void 0){r=0}if(typeof t=="string")return t;if(t===void 0)return"";var e="";if(r){e+=n;for(var i=0;i<r;i++)e+="  "}if(e+=t.messageText,r++,t.next)for(var u=0,s=t.next;u<s.length;u++){var i=s[u];e+=f(i,n,r)}return e}function h(t){return t?t.map((function(t){return t.text})).join(""):""}c["lib.d.ts"]=!0,c["lib.decorators.d.ts"]=!0,c["lib.decorators.legacy.d.ts"]=!0,c["lib.dom.d.ts"]=!0,c["lib.dom.iterable.d.ts"]=!0,c["lib.es2015.collection.d.ts"]=!0,c["lib.es2015.core.d.ts"]=!0,c["lib.es2015.d.ts"]=!0,c["lib.es2015.generator.d.ts"]=!0,c["lib.es2015.iterable.d.ts"]=!0,c["lib.es2015.promise.d.ts"]=!0,c["lib.es2015.proxy.d.ts"]=!0,c["lib.es2015.reflect.d.ts"]=!0,c["lib.es2015.symbol.d.ts"]=!0,c["lib.es2015.symbol.wellknown.d.ts"]=!0,c["lib.es2016.array.include.d.ts"]=!0,c["lib.es2016.d.ts"]=!0,c["lib.es2016.full.d.ts"]=!0,c["lib.es2017.d.ts"]=!0,c["lib.es2017.full.d.ts"]=!0,c["lib.es2017.intl.d.ts"]=!0,c["lib.es2017.object.d.ts"]=!0,c["lib.es2017.sharedmemory.d.ts"]=!0,c["lib.es2017.string.d.ts"]=!0,c["lib.es2017.typedarrays.d.ts"]=!0,c["lib.es2018.asyncgenerator.d.ts"]=!0,c["lib.es2018.asynciterable.d.ts"]=!0,c["lib.es2018.d.ts"]=!0,c["lib.es2018.full.d.ts"]=!0,c["lib.es2018.intl.d.ts"]=!0,c["lib.es2018.promise.d.ts"]=!0,c["lib.es2018.regexp.d.ts"]=!0,c["lib.es2019.array.d.ts"]=!0,c["lib.es2019.d.ts"]=!0,c["lib.es2019.full.d.ts"]=!0,c["lib.es2019.intl.d.ts"]=!0,c["lib.es2019.object.d.ts"]=!0,c["lib.es2019.string.d.ts"]=!0,c["lib.es2019.symbol.d.ts"]=!0,c["lib.es2020.bigint.d.ts"]=!0,c["lib.es2020.d.ts"]=!0,c["lib.es2020.date.d.ts"]=!0,c["lib.es2020.full.d.ts"]=!0,c["lib.es2020.intl.d.ts"]=!0,c["lib.es2020.number.d.ts"]=!0,c["lib.es2020.promise.d.ts"]=!0,c["lib.es2020.sharedmemory.d.ts"]=!0,c["lib.es2020.string.d.ts"]=!0,c["lib.es2020.symbol.wellknown.d.ts"]=!0,c["lib.es2021.d.ts"]=!0,c["lib.es2021.full.d.ts"]=!0,c["lib.es2021.intl.d.ts"]=!0,c["lib.es2021.promise.d.ts"]=!0,c["lib.es2021.string.d.ts"]=!0,c["lib.es2021.weakref.d.ts"]=!0,c["lib.es2022.array.d.ts"]=!0,c["lib.es2022.d.ts"]=!0,c["lib.es2022.error.d.ts"]=!0,c["lib.es2022.full.d.ts"]=!0,c["lib.es2022.intl.d.ts"]=!0,c["lib.es2022.object.d.ts"]=!0,c["lib.es2022.regexp.d.ts"]=!0,c["lib.es2022.sharedmemory.d.ts"]=!0,c["lib.es2022.string.d.ts"]=!0,c["lib.es2023.array.d.ts"]=!0,c["lib.es2023.d.ts"]=!0,c["lib.es2023.full.d.ts"]=!0,c["lib.es5.d.ts"]=!0,c["lib.es6.d.ts"]=!0,c["lib.esnext.d.ts"]=!0,c["lib.esnext.full.d.ts"]=!0,c["lib.esnext.intl.d.ts"]=!0,c["lib.scripthost.d.ts"]=!0,c["lib.webworker.d.ts"]=!0,c["lib.webworker.importscripts.d.ts"]=!0,c["lib.webworker.iterable.d.ts"]=!0;var v=function(){function t(t){this._worker=t}t.prototype._textSpanToRange=function(t,n){var r=t.getPositionAt(n.start),e=t.getPositionAt(n.start+n.length),i=r.lineNumber,u=r.column,s=e.lineNumber,o=e.column;return{startLineNumber:i,startColumn:u,endLineNumber:s,endColumn:o}};return t}(),l=function(){function t(t){this._worker=t,this._libFiles={},this._hasFetchedLibFiles=!1,this._fetchLibFilesPromise=null}t.prototype.isLibFile=function(t){return!!t&&t.path.indexOf("/lib.")===0&&!!c[t.path.slice(1)]};t.prototype.getOrCreateModel=function(t){var n=o.Uri.parse(t),e=o.editor.getModel(n);if(e)return e;if(this.isLibFile(n)&&this._hasFetchedLibFiles)return o.editor.createModel(this._libFiles[n.path.slice(1)],"typescript",n);var i=r.getExtraLibs()[t];return i?o.editor.createModel(i.content,"typescript",n):null};t.prototype._containsLibFile=function(t){for(var n=0,r=t;n<r.length;n++){var e=r[n];if(this.isLibFile(e))return!0}return!1};t.prototype.fetchLibFilesIfNecessary=function(t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(r){switch(r.label){case 0:n=this._containsLibFile(t);if(!n)return[3,2];return[4,this._fetchLibFiles()];case 1:n=r.sent();r.label=2;case 2:n;return[2]}}))}))};t.prototype._fetchLibFiles=function(){var t=this;return this._fetchLibFilesPromise||(this._fetchLibFilesPromise=this._worker().then((function(t){return t.getLibFiles()})).then((function(n){t._hasFetchedLibFiles=!0,t._libFiles=n}))),this._fetchLibFilesPromise};return t}(),d=function(t){__extends(n,t);function n(n,r,e,i){var u=this;u=t.call(this,i)||this,u._libFiles=n,u._defaults=r,u._selector=e,u._disposables=[],u._listener=Object.create(null);var s=function(t){if(t.getLanguageId()!==e)return;var n=function(){var n=u._defaults.getDiagnosticsOptions().onlyVisible;n?t.isAttachedToEditor()&&u._doValidate(t):u._doValidate(t)};var r;var i=t.onDidChangeContent((function(){clearTimeout(r),r=window.setTimeout(n,500)})),s=t.onDidChangeAttached((function(){var r=u._defaults.getDiagnosticsOptions().onlyVisible;r&&(t.isAttachedToEditor()?n():o.editor.setModelMarkers(t,u._selector,[]))}));u._listener[t.uri.toString()]={dispose:function(){i.dispose(),s.dispose(),clearTimeout(r)}},n()},a=function(t){o.editor.setModelMarkers(t,u._selector,[]);var n=t.uri.toString();u._listener[n]&&(u._listener[n].dispose(),delete u._listener[n])};u._disposables.push(o.editor.onDidCreateModel((function(t){return s(t)}))),u._disposables.push(o.editor.onWillDisposeModel(a)),u._disposables.push(o.editor.onDidChangeModelLanguage((function(t){a(t.model),s(t.model)}))),u._disposables.push({dispose:function(){for(var t=0,n=o.editor.getModels();t<n.length;t++){var r=n[t];a(r)}}});var c=function(){for(var t=0,n=o.editor.getModels();t<n.length;t++){var r=n[t];a(r),s(r)}};u._disposables.push(u._defaults.onDidChange(c)),u._disposables.push(u._defaults.onDidExtraLibsChange(c)),o.editor.getModels().forEach((function(t){return s(t)}));return u}n.prototype.dispose=function(){this._disposables.forEach((function(t){return t&&t.dispose()})),this._disposables=[]};n.prototype._doValidate=function(t){return __awaiter(this,void 0,void 0,(function(){var n,r,e,i,u,s,a,c,f;var h=this;return __generator(this,(function(v){switch(v.label){case 0:return[4,this._worker(t.uri)];case 1:n=v.sent();if(t.isDisposed())return[2];r=[],e=this._defaults.getDiagnosticsOptions(),i=e.noSyntaxValidation,u=e.noSemanticValidation,s=e.noSuggestionDiagnostics;i||r.push(n.getSyntacticDiagnostics(t.uri.toString())),u||r.push(n.getSemanticDiagnostics(t.uri.toString())),s||r.push(n.getSuggestionDiagnostics(t.uri.toString()));return[4,Promise.all(r)];case 2:a=v.sent();if(!a||t.isDisposed())return[2];c=a.reduce((function(t,n){return n.concat(t)}),[]).filter((function(t){return(h._defaults.getDiagnosticsOptions().diagnosticCodesToIgnore||[]).indexOf(t.code)===-1})),f=c.map((function(t){return t.relatedInformation||[]})).reduce((function(t,n){return n.concat(t)}),[]).map((function(t){return t.file?o.Uri.parse(t.file.fileName):null}));return[4,this._libFiles.fetchLibFilesIfNecessary(f)];case 3:v.sent(),t.isDisposed()||o.editor.setModelMarkers(t,this._selector,c.map((function(n){return h._convertDiagnostics(t,n)})));return[2]}}))}))};n.prototype._convertDiagnostics=function(t,n){var r=n.start||0,e=n.length||1,i=t.getPositionAt(r),u=i.lineNumber,s=i.column,a=t.getPositionAt(r+e),c=a.lineNumber,h=a.column,v=[];return n.reportsUnnecessary&&v.push(o.MarkerTag.Unnecessary),n.reportsDeprecated&&v.push(o.MarkerTag.Deprecated),{severity:this._tsDiagnosticCategoryToMarkerSeverity(n.category),startLineNumber:u,startColumn:s,endLineNumber:c,endColumn:h,message:f(n.messageText,"\n"),code:n.code.toString(),tags:v,relatedInformation:this._convertRelatedInformation(t,n.relatedInformation)}};n.prototype._convertRelatedInformation=function(t,n){var r=this;if(!n)return[];var e=[];return n.forEach((function(n){var i=t;if(n.file&&(i=r._libFiles.getOrCreateModel(n.file.fileName)),!i)return;var u=n.start||0,s=n.length||1,o=i.getPositionAt(u),a=o.lineNumber,c=o.column,h=i.getPositionAt(u+s),v=h.lineNumber,l=h.column;e.push({resource:i.uri,startLineNumber:a,startColumn:c,endLineNumber:v,endColumn:l,message:f(n.messageText,"\n")})})),e};n.prototype._tsDiagnosticCategoryToMarkerSeverity=function(t){switch(t){case 1:return o.MarkerSeverity.Error;case 3:return o.MarkerSeverity.Info;case 0:return o.MarkerSeverity.Warning;case 2:return o.MarkerSeverity.Hint}return o.MarkerSeverity.Info};return n}(v),_=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}Object.defineProperty(n.prototype,"triggerCharacters",{get:function(){return["."]},enumerable:false,configurable:true});n.prototype.provideCompletionItems=function(t,r,e,i){return __awaiter(this,void 0,void 0,(function(){var e,i,u,s,a,c;return __generator(this,(function(f){switch(f.label){case 0:e=t.getWordUntilPosition(r),i=new o.Range(r.lineNumber,e.startColumn,r.lineNumber,e.endColumn),u=t.uri,s=t.getOffsetAt(r);return[4,this._worker(u)];case 1:a=f.sent();if(t.isDisposed())return[2];return[4,a.getCompletionsAtPosition(u.toString(),s)];case 2:c=f.sent();if(!(!c||t.isDisposed()))return[2,{suggestions:c.entries.map((function(e){var a=i;if(e.replacementSpan){var c=t.getPositionAt(e.replacementSpan.start),f=t.getPositionAt(e.replacementSpan.start+e.replacementSpan.length);a=new o.Range(c.lineNumber,c.column,f.lineNumber,f.column)}var h=[];return e.kindModifiers!==void 0&&e.kindModifiers.indexOf("deprecated")!==-1&&h.push(o.languages.CompletionItemTag.Deprecated),{uri:u,position:r,offset:s,range:a,label:e.name,insertText:e.name,sortText:e.sortText,kind:n.convertKind(e.kind),tags:h}}))}];return[2]}}))}))};n.prototype.resolveCompletionItem=function(t,r){return __awaiter(this,void 0,void 0,(function(){var r,e,i,u,s,o;return __generator(this,(function(a){switch(a.label){case 0:r=t,e=r.uri,i=r.position,u=r.offset;return[4,this._worker(e)];case 1:s=a.sent();return[4,s.getCompletionEntryDetails(e.toString(),u,r.label)];case 2:o=a.sent();return[2,o?{uri:e,position:i,label:o.name,kind:n.convertKind(o.kind),detail:h(o.displayParts),documentation:{value:n.createDocumentationString(o)}}:r]}}))}))};n.convertKind=function(t){switch(t){case A.primitiveType:case A.keyword:return o.languages.CompletionItemKind.Keyword;case A.variable:case A.localVariable:return o.languages.CompletionItemKind.Variable;case A.memberVariable:case A.memberGetAccessor:case A.memberSetAccessor:return o.languages.CompletionItemKind.Field;case A.function:case A.memberFunction:case A.constructSignature:case A.callSignature:case A.indexSignature:return o.languages.CompletionItemKind.Function;case A.enum:return o.languages.CompletionItemKind.Enum;case A.module:return o.languages.CompletionItemKind.Module;case A.class:return o.languages.CompletionItemKind.Class;case A.interface:return o.languages.CompletionItemKind.Interface;case A.warning:return o.languages.CompletionItemKind.File}return o.languages.CompletionItemKind.Property};n.createDocumentationString=function(t){var n=h(t.documentation);if(t.tags)for(var r=0,e=t.tags;r<e.length;r++){var i=e[r];n+="\n\n".concat(p(i))}return n};return n}(v);t({Adapter:v,LibFiles:l,DiagnosticsAdapter:d,SuggestAdapter:_});function p(t){var n="*@".concat(t.name,"*");if(t.name==="param"&&t.text){var r=t.text,e=r[0],i=r.slice(1);n+="`".concat(e.text,"`"),i.length>0&&(n+=" — ".concat(i.map((function(t){return t.text})).join(" ")))}else Array.isArray(t.text)?n+=" — ".concat(t.text.map((function(t){return t.text})).join(" ")):t.text&&(n+=" — ".concat(t.text));return n}var g=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n.signatureHelpTriggerCharacters=["(",","];return n}n._toSignatureHelpTriggerReason=function(t){switch(t.triggerKind){case o.languages.SignatureHelpTriggerKind.TriggerCharacter:return t.triggerCharacter?t.isRetrigger?{kind:"retrigger",triggerCharacter:t.triggerCharacter}:{kind:"characterTyped",triggerCharacter:t.triggerCharacter}:{kind:"invoked"};case o.languages.SignatureHelpTriggerKind.ContentChange:return t.isRetrigger?{kind:"retrigger"}:{kind:"invoked"};case o.languages.SignatureHelpTriggerKind.Invoke:default:return{kind:"invoked"}}};n.prototype.provideSignatureHelp=function(t,r,e,i){return __awaiter(this,void 0,void 0,(function(){var e,u,s,o,a;return __generator(this,(function(c){switch(c.label){case 0:e=t.uri,u=t.getOffsetAt(r);return[4,this._worker(e)];case 1:s=c.sent();if(t.isDisposed())return[2];return[4,s.getSignatureHelpItems(e.toString(),u,{triggerReason:n._toSignatureHelpTriggerReason(i)})];case 2:o=c.sent();if(!o||t.isDisposed())return[2];a={activeSignature:o.selectedItemIndex,activeParameter:o.argumentIndex,signatures:[]};return[2,(o.items.forEach((function(t){var n={label:"",parameters:[]};n.documentation={value:h(t.documentation)},n.label+=h(t.prefixDisplayParts),t.parameters.forEach((function(r,e,i){var u=h(r.displayParts),s={label:u,documentation:{value:h(r.documentation)}};n.label+=u,n.parameters.push(s),e<i.length-1&&(n.label+=h(t.separatorDisplayParts))})),n.label+=h(t.suffixDisplayParts),a.signatures.push(n)})),{value:a,dispose:function(){}})]}}))}))};return n}(v),w=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.provideHover=function(t,n,r){return __awaiter(this,void 0,void 0,(function(){var r,e,i,u,s,o,a;return __generator(this,(function(c){switch(c.label){case 0:r=t.uri,e=t.getOffsetAt(n);return[4,this._worker(r)];case 1:i=c.sent();if(t.isDisposed())return[2];return[4,i.getQuickInfoAtPosition(r.toString(),e)];case 2:u=c.sent();if(!u||t.isDisposed())return[2];s=h(u.documentation),o=u.tags?u.tags.map((function(t){return p(t)})).join("  \n\n"):"",a=h(u.displayParts);return[2,{range:this._textSpanToRange(t,u.textSpan),contents:[{value:"```typescript\n"+a+"\n```\n"},{value:s+(o?"\n\n"+o:"")}]}]}}))}))};return n}(v),m=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.provideDocumentHighlights=function(t,n,r){return __awaiter(this,void 0,void 0,(function(){var r,e,i,u;var s=this;return __generator(this,(function(a){switch(a.label){case 0:r=t.uri,e=t.getOffsetAt(n);return[4,this._worker(r)];case 1:i=a.sent();if(t.isDisposed())return[2];return[4,i.getDocumentHighlights(r.toString(),e,[r.toString()])];case 2:u=a.sent();return[2,u&&!t.isDisposed()?u.flatMap((function(n){return n.highlightSpans.map((function(n){return{range:s._textSpanToRange(t,n.textSpan),kind:n.kind==="writtenReference"?o.languages.DocumentHighlightKind.Write:o.languages.DocumentHighlightKind.Text}}))})):void 0]}}))}))};return n}(v),b=function(t){__extends(n,t);function n(n,r){var e=this;e=t.call(this,r)||this,e._libFiles=n;return e}n.prototype.provideDefinition=function(t,n,r){return __awaiter(this,void 0,void 0,(function(){var r,e,i,u,s,a,c,f,h,v;return __generator(this,(function(l){switch(l.label){case 0:r=t.uri,e=t.getOffsetAt(n);return[4,this._worker(r)];case 1:i=l.sent();if(t.isDisposed())return[2];return[4,i.getDefinitionAtPosition(r.toString(),e)];case 2:u=l.sent();s=!u||t.isDisposed();if(s)return[3,4];return[4,this._libFiles.fetchLibFilesIfNecessary(u.map((function(t){return o.Uri.parse(t.fileName)})))];case 3:s=(l.sent(),t.isDisposed());l.label=4;case 4:if(s)return[2];a=[];for(c=0,f=u;c<f.length;c++){h=f[c];v=this._libFiles.getOrCreateModel(h.fileName);v&&a.push({uri:v.uri,range:this._textSpanToRange(v,h.textSpan)})}return[2,a]}}))}))};return n}(v),y=function(t){__extends(n,t);function n(n,r){var e=this;e=t.call(this,r)||this,e._libFiles=n;return e}n.prototype.provideReferences=function(t,n,r,e){return __awaiter(this,void 0,void 0,(function(){var r,e,i,u,s,a,c,f,h,v;return __generator(this,(function(l){switch(l.label){case 0:r=t.uri,e=t.getOffsetAt(n);return[4,this._worker(r)];case 1:i=l.sent();if(t.isDisposed())return[2];return[4,i.getReferencesAtPosition(r.toString(),e)];case 2:u=l.sent();s=!u||t.isDisposed();if(s)return[3,4];return[4,this._libFiles.fetchLibFilesIfNecessary(u.map((function(t){return o.Uri.parse(t.fileName)})))];case 3:s=(l.sent(),t.isDisposed());l.label=4;case 4:if(s)return[2];a=[];for(c=0,f=u;c<f.length;c++){h=f[c];v=this._libFiles.getOrCreateModel(h.fileName);v&&a.push({uri:v.uri,range:this._textSpanToRange(v,h.textSpan)})}return[2,a]}}))}))};return n}(v),k=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.provideDocumentSymbols=function(t,n){return __awaiter(this,void 0,void 0,(function(){var n,r,e,i;var u=this;return __generator(this,(function(s){switch(s.label){case 0:n=t.uri;return[4,this._worker(n)];case 1:r=s.sent();if(t.isDisposed())return[2];return[4,r.getNavigationTree(n.toString())];case 2:e=s.sent();if(!e||t.isDisposed())return[2];i=function(n,r){var e;return{name:n.text,detail:"",kind:S[n.kind]||o.languages.SymbolKind.Variable,range:u._textSpanToRange(t,n.spans[0]),selectionRange:u._textSpanToRange(t,n.spans[0]),tags:[],children:(e=n.childItems)==null?void 0:e.map((function(t){return i(t,n.text)})),containerName:r}};return[2,e.childItems?e.childItems.map((function(t){return i(t)})):[]]}}))}))};return n}(v),x,A=(x=function(){function t(){}return t}(),x.unknown="",x.keyword="keyword",x.script="script",x.module="module",x.class="class",x.interface="interface",x.type="type",x.enum="enum",x.variable="var",x.localVariable="local var",x.function="function",x.localFunction="local function",x.memberFunction="method",x.memberGetAccessor="getter",x.memberSetAccessor="setter",x.memberVariable="property",x.constructorImplementation="constructor",x.callSignature="call",x.indexSignature="index",x.constructSignature="construct",x.parameter="parameter",x.typeParameter="type parameter",x.primitiveType="primitive type",x.label="label",x.alias="alias",x.const="const",x.let="let",x.warning="warning",x),S=Object.create(null);t({SignatureHelpAdapter:g,QuickInfoAdapter:w,DocumentHighlightAdapter:m,DefinitionAdapter:b,ReferenceAdapter:y,OutlineAdapter:k,Kind:A});S[A.module]=o.languages.SymbolKind.Module,S[A.class]=o.languages.SymbolKind.Class,S[A.enum]=o.languages.SymbolKind.Enum,S[A.interface]=o.languages.SymbolKind.Interface,S[A.memberFunction]=o.languages.SymbolKind.Method,S[A.memberVariable]=o.languages.SymbolKind.Property,S[A.memberGetAccessor]=o.languages.SymbolKind.Property,S[A.memberSetAccessor]=o.languages.SymbolKind.Property,S[A.variable]=o.languages.SymbolKind.Variable,S[A.const]=o.languages.SymbolKind.Variable,S[A.localVariable]=o.languages.SymbolKind.Variable,S[A.variable]=o.languages.SymbolKind.Variable,S[A.function]=o.languages.SymbolKind.Function,S[A.localFunction]=o.languages.SymbolKind.Function;var O,C,I=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n._convertOptions=function(t){return{ConvertTabsToSpaces:t.insertSpaces,TabSize:t.tabSize,IndentSize:t.tabSize,IndentStyle:2,NewLineCharacter:"\n",InsertSpaceAfterCommaDelimiter:!0,InsertSpaceAfterSemicolonInForStatements:!0,InsertSpaceBeforeAndAfterBinaryOperators:!0,InsertSpaceAfterKeywordsInControlFlowStatements:!0,InsertSpaceAfterFunctionKeywordForAnonymousFunctions:!0,InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis:!1,InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets:!1,InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces:!1,PlaceOpenBraceOnNewLineForControlBlocks:!1,PlaceOpenBraceOnNewLineForFunctions:!1}};n.prototype._convertTextChanges=function(t,n){return{text:n.newText,range:this._textSpanToRange(t,n.span)}};return n}(v),N=function(t){__extends(n,t);function n(){var n=this;n=t.apply(this,arguments)||this,n.canFormatMultipleRanges=!1;return n}n.prototype.provideDocumentRangeFormattingEdits=function(t,n,r,e){return __awaiter(this,void 0,void 0,(function(){var e,i,u,s,o;var a=this;return __generator(this,(function(c){switch(c.label){case 0:e=t.uri,i=t.getOffsetAt({lineNumber:n.startLineNumber,column:n.startColumn}),u=t.getOffsetAt({lineNumber:n.endLineNumber,column:n.endColumn});return[4,this._worker(e)];case 1:s=c.sent();if(t.isDisposed())return[2];return[4,s.getFormattingEditsForRange(e.toString(),i,u,I._convertOptions(r))];case 2:o=c.sent();return[2,o&&!t.isDisposed()?o.map((function(n){return a._convertTextChanges(t,n)})):void 0]}}))}))};return n}(I),j=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}Object.defineProperty(n.prototype,"autoFormatTriggerCharacters",{get:function(){return[";","}","\n"]},enumerable:false,configurable:true});n.prototype.provideOnTypeFormattingEdits=function(t,n,r,e,i){return __awaiter(this,void 0,void 0,(function(){var i,u,s,o;var a=this;return __generator(this,(function(c){switch(c.label){case 0:i=t.uri,u=t.getOffsetAt(n);return[4,this._worker(i)];case 1:s=c.sent();if(t.isDisposed())return[2];return[4,s.getFormattingEditsAfterKeystroke(i.toString(),u,r,I._convertOptions(e))];case 2:o=c.sent();return[2,o&&!t.isDisposed()?o.map((function(n){return a._convertTextChanges(t,n)})):void 0]}}))}))};return n}(I),T=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.provideCodeActions=function(t,n,r,e){return __awaiter(this,void 0,void 0,(function(){var e,i,u,s,o,a,c;var f=this;return __generator(this,(function(h){switch(h.label){case 0:e=t.uri,i=t.getOffsetAt({lineNumber:n.startLineNumber,column:n.startColumn}),u=t.getOffsetAt({lineNumber:n.endLineNumber,column:n.endColumn}),s=I._convertOptions(t.getOptions()),o=r.markers.filter((function(t){return t.code})).map((function(t){return t.code})).map(Number);return[4,this._worker(e)];case 1:a=h.sent();if(t.isDisposed())return[2];return[4,a.getCodeFixesAtPosition(e.toString(),i,u,o,s)];case 2:c=h.sent();return[2,!c||t.isDisposed()?{actions:[],dispose:function(){}}:{actions:c.filter((function(t){return t.changes.filter((function(t){return t.isNewFile})).length===0})).map((function(n){return f._tsCodeFixActionToMonacoCodeAction(t,r,n)})),dispose:function(){}}]}}))}))};n.prototype._tsCodeFixActionToMonacoCodeAction=function(t,n,r){var e=[];for(var i=0,u=r.changes;i<u.length;i++){var s=u[i];for(var o=0,a=s.textChanges;o<a.length;o++){var c=a[o];e.push({resource:t.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(t,c.span),text:c.newText}})}}return{title:r.description,edit:{edits:e},diagnostics:n.markers,kind:"quickfix"}};return n}(I),F=function(t){__extends(n,t);function n(n,r){var e=this;e=t.call(this,r)||this,e._libFiles=n;return e}n.prototype.provideRenameEdits=function(t,n,r,e){return __awaiter(this,void 0,void 0,(function(){var e,i,u,s,o,a,c,f,h,v,l;return __generator(this,(function(d){switch(d.label){case 0:e=t.uri,i=e.toString(),u=t.getOffsetAt(n);return[4,this._worker(e)];case 1:s=d.sent();if(t.isDisposed())return[2];return[4,s.getRenameInfo(i,u,{allowRenameOfImportPath:!1})];case 2:o=d.sent();if(o.canRename===!1)return[2,{edits:[],rejectReason:o.localizedErrorMessage}];if(o.fileToRename!==void 0)throw new Error("Renaming files is not supported.");return[4,s.findRenameLocations(i,u,!1,!1,!1)];case 3:a=d.sent();if(!a||t.isDisposed())return[2];c=[];for(f=0,h=a;f<h.length;f++){v=h[f];l=this._libFiles.getOrCreateModel(v.fileName);if(!l)throw new Error("Unknown file ".concat(v.fileName,"."));c.push({resource:l.uri,versionId:void 0,textEdit:{range:this._textSpanToRange(l,v.textSpan),text:r}})}return[2,{edits:c}]}}))}))};return n}(v),L=function(t){__extends(n,t);function n(){return t!==null&&t.apply(this,arguments)||this}n.prototype.provideInlayHints=function(t,n,r){return __awaiter(this,void 0,void 0,(function(){var r,e,i,u,s,o;var a;var c=this;return __generator(this,(function(f){switch(f.label){case 0:r=t.uri,e=r.toString(),i=t.getOffsetAt({lineNumber:n.startLineNumber,column:n.startColumn}),u=t.getOffsetAt({lineNumber:n.endLineNumber,column:n.endColumn});return[4,this._worker(r)];case 1:s=f.sent();if(!t.isDisposed())return[3,2];o=null;return[3,4];case 2:a={};return[4,s.provideInlayHints(e,i,u)];case 3:o=(a.hints=f.sent().map((function(n){return __assign(__assign({},n),{label:n.text,position:t.getPositionAt(n.position),kind:c._convertHintKind(n.kind)})})),a.dispose=function(){},a);f.label=4;case 4:return[2,o]}}))}))};n.prototype._convertHintKind=function(t){return t==="Parameter"?o.languages.InlayHintKind.Parameter:o.languages.InlayHintKind.Type};return n}(v);t({FormatHelper:I,FormatAdapter:N,FormatOnTypeAdapter:j,CodeActionAdaptor:T,RenameAdapter:F,InlayHintsAdapter:L});function P(t){C=E(t,"typescript")}function B(t){O=E(t,"javascript")}function R(){return new Promise((function(t,n){if(!O)return n("JavaScript not registered!");t(O)}))}function D(){return new Promise((function(t,n){if(!C)return n("TypeScript not registered!");t(C)}))}function E(t,n){var r=[],e=new a(n,t),i=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return e.getLanguageServiceWorker.apply(e,t)},u=new l(i);return function(){var e=t.modeConfiguration;(function(t){for(;t.length;)t.pop().dispose()})(r),e.completionItems&&r.push(o.languages.registerCompletionItemProvider(n,new _(i))),e.signatureHelp&&r.push(o.languages.registerSignatureHelpProvider(n,new g(i))),e.hovers&&r.push(o.languages.registerHoverProvider(n,new w(i))),e.documentHighlights&&r.push(o.languages.registerDocumentHighlightProvider(n,new m(i))),e.definitions&&r.push(o.languages.registerDefinitionProvider(n,new b(u,i))),e.references&&r.push(o.languages.registerReferenceProvider(n,new y(u,i))),e.documentSymbols&&r.push(o.languages.registerDocumentSymbolProvider(n,new k(i))),e.rename&&r.push(o.languages.registerRenameProvider(n,new F(u,i))),e.documentRangeFormattingEdits&&r.push(o.languages.registerDocumentRangeFormattingEditProvider(n,new N(i))),e.onTypeFormattingEdits&&r.push(o.languages.registerOnTypeFormattingEditProvider(n,new j(i))),e.codeActions&&r.push(o.languages.registerCodeActionProvider(n,new T(i))),e.inlayHints&&r.push(o.languages.registerInlayHintsProvider(n,new L(i))),e.diagnostics&&r.push(new d(u,t,n,i))}(),i}}}}));
//# sourceMappingURL=p-a0e05eea.system.js.map