import{r as t,c as e,g as s,h as i,H as n}from"./p-7af91c05.js";const o="*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{--window-max-height:none;--window-gap:50px}.main-wrapper{display:block}.label-input-wrapper{display:-ms-flexbox;display:flex}.label-input-wrapper .input{-ms-flex:1;flex:1}:host([label-position=start]) .label-input-wrapper{-ms-flex-direction:row;flex-direction:row}:host([label-position=above]) .label-input-wrapper{-ms-flex-direction:column;flex-direction:column}.input{background-color:unset;border:none;color:inherit;font:inherit;margin:0;padding:0;outline:0}.ch-window-container{position:relative}ch-window::part(window){width:100%;max-height:calc(var(--window-max-height) - var(--window-gap));overflow-y:auto}";const c=o;const r="ArrowDown";const a="ArrowUp";const l=class{constructor(s){t(this,s);this.valueChanged=e(this,"valueChanged",7);this.selectionChanged=e(this,"selectionChanged",7);this.windowHidden=true;this.debounce=300;this.label=undefined;this.labelPosition="start";this.showLabel=true;this.value=undefined;this.showHeader=false;this.suggestTitle=undefined;this.cursorEnd=false}timeoutReference;keyEventsDictionary={ArrowDown:t=>{const e=this.getNewFocusedItem(t.currentFocusedItem,r);const s=this.getNewFocusedItem(e,r);e&&e.focus();if(!s){this.scrollListToBottom()}},ArrowUp:t=>{const e=this.getNewFocusedItem(t.currentFocusedItem,a);const s=this.getNewFocusedItem(e,a);e&&e.focus();if(!s){this.scrollListToTop()}}};textInput;chWindow;slot;get el(){return s(this)}valueChanged;selectionChanged;itemSelectedHandler(t){t.stopPropagation();this.value=t.detail.value;this.closeWindow();this.selectionChanged.emit(t.detail)}focusChangeAttemptHandler(t){const e=this.keyEventsDictionary[t.detail.code];if(e){const s=t.detail.el;const i=this.getChSuggestListItems();const n=i.findIndex((t=>t===s));const o=null;e({event:t.detail,currentFocusedItem:s,chSuggestListItemsArray:i,currentFocusedItemIndex:n,newItemToSetFocusOn:o})}}windowClosedHandler(){this.textInput.focus();this.windowHidden=true;this.slot.innerHTML=""}async selectInputText(){this.textInput.focus();this.textInput.select()}evaluateSlotIsEmpty=()=>{this.chWindow.hidden=!this.el.firstElementChild};setFocusOnFirstItem=()=>{const t=this.el.querySelector("ch-suggest-list-item");t&&t.focus()};getChSuggestListItems=()=>Array.from(this.el.querySelectorAll("ch-suggest-list-item"));getNewFocusedItem=(t,e)=>{const s=t=>{const s=t.querySelectorAll("ch-suggest-list-item");let i=s&&s[s.length-1];if(e===r){i=t.querySelector("ch-suggest-list-item")}else{const e=t.querySelectorAll("ch-suggest-list-item");i=e&&e[e.length-1]}return i};if(!t){return}let i=e===r?t.nextElementSibling:t.previousElementSibling;if(i?.nodeName==="CH-SUGGEST-LIST"){i=s(i)}else if(!i){const n=t.parentElement;const o=e===r?n.nextElementSibling:n.previousElementSibling;const c=n.nodeName==="CH-SUGGEST-LIST";if(c&&o&&o.nodeName==="CH-SUGGEST-LIST-ITEM"){i=e===r?n.nextElementSibling:n.previousElementSibling}else if(c&&o&&o.nodeName==="CH-SUGGEST-LIST"){const t=e===r?n.nextElementSibling:n.previousElementSibling;let o;if(e===r){o=t.querySelector("ch-suggest-list-item")}else{o=s(t)}i=o?o:null}}return i};handleInput=t=>{const e=t.target.value;this.value=e;if(this.timeoutReference){clearTimeout(this.timeoutReference)}this.timeoutReference=setTimeout((()=>{this.processInputEvent(e)}),this.debounce)};handleKeyDown=t=>{if(t.key===r){t.preventDefault();this.setFocusOnFirstItem()}};evaluateWindowMaxHeight=()=>{const t=window.innerHeight;const e=document.body.scrollHeight;const s=e>=t?e:t;const i=this.textInput.getBoundingClientRect().bottom+window.scrollY;const n=s-i+"px";this.el.style.setProperty("--window-max-height",n)};scrollListToTop=()=>{const t=this.chWindow.shadowRoot.querySelector("[part='window']");t.scrollTop=0};scrollListToBottom=()=>{const t=this.chWindow.shadowRoot.querySelector("[part='window']");t.scrollTop=t.scrollHeight};processInputEvent=t=>{this.valueChanged.emit(t);this.evaluateWindowMaxHeight()};closeWindow=()=>{this.chWindow.hidden=true};onFocusHandler=()=>{if(this.cursorEnd){this.textInput.setSelectionRange(this.textInput.value.length,this.textInput.value.length)}};render(){return i(n,{key:"0503197ec08394d001af26c55c1f11046f69b90b"},i("div",{key:"f1b55354dc0e6942265fad26551bb0f1d126cce0",class:"main-wrapper",part:"main-wrapper"},i("div",{key:"f77905d136e8f9a35fc8455217173481e028dd64",class:"label-input-wrapper",part:"label-input-wrapper"},this.showLabel&&this.label&&i("label",{key:"beaf46ebb1412e71fa4a97d14d2cfe1569efc682",id:"label",htmlFor:"input",part:"label"},this.label),i("input",{key:"fb4e3fea543c07f41e04c794b91ffeae8f29e985",type:"text",id:"input",part:"input",class:"input",ref:t=>this.textInput=t,onInput:this.handleInput,onKeyDown:this.handleKeyDown,onFocus:this.onFocusHandler,value:this.value,autocomplete:"off","aria-controls":"ch-window","aria-label":!this.showLabel&&this.label?this.label:undefined,"aria-labelledby":this.showLabel&&this.label?"label":undefined,"aria-expanded":this.windowHidden.toString()})),i("ch-window",{key:"99386314f2a6268ed5e40cdfde2cf590cb2b6534",id:"ch-window",container:this.textInput,"close-on-outside-click":true,"close-on-escape":true,xAlign:"inside-start",yAlign:"outside-end",ref:t=>this.chWindow=t,showHeader:this.showHeader,caption:this.suggestTitle,exportparts:"\r\n            header:header, \r\n            caption:title, \r\n            close:close-button,\r\n            window:dropdown"},i("slot",{key:"a0964f74a4e23d64fffc9b66ee75fbaf95fd8e48",onSlotchange:this.evaluateSlotIsEmpty,ref:t=>this.slot=t}))))}static get delegatesFocus(){return true}};l.style=c;const h="*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block}.title{margin:0;font:inherit}.list{margin:0;padding:0}";const d=h;const f=class{constructor(e){t(this,e);this.label=undefined}render(){return i(n,{key:"c87abbe60c8f7e00072392a38fc3f53725157751"},this.label&&i("h2",{key:"223c819bf3f639d4252ea7776ff46278089207fc",id:"heading",part:"title",class:"title"},this.label),i("ul",{key:"632ea49c63c4616c3d03e8fe8d4b73d498db54e0","aria-labelledby":this.label?"heading":undefined,part:"list",class:"list"},i("slot",{key:"9e6ac9410c0024bced3585da808866ee59f621a0"})))}};f.style=d;const u=":host{display:block}:where(button){all:unset;display:-ms-flexbox;display:flex;width:100%;cursor:pointer}*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}";const p=u;const b="ArrowDown";const w="ArrowUp";const g=class{constructor(s){t(this,s);this.itemSelected=e(this,"itemSelected",7);this.focusChangeAttempt=e(this,"focusChangeAttempt",7);this.iconSrc=undefined;this.value=undefined}get el(){return s(this)}itemSelected;focusChangeAttempt;getItemIndexes=()=>{const t=this.el.parentElement;if(t.nodeName==="CH-SUGGEST"){const e=t;let s=-1;const i=Array.from(e.querySelectorAll(":scope > ch-suggest-list-item"));for(let t=0;t<i.length;t++){if(i[t]===this.el){s=t;break}}return{itemIndex:s,listIndex:undefined}}if(t.nodeName==="CH-SUGGEST-LIST"){const e=t;const s=Array.from(e.parentElement.querySelectorAll(":scope > ch-suggest-list"));const i=s.findIndex((t=>t===e));if(i!==-1){const t=Array.from(e.querySelectorAll("ch-suggest-list-item"));const s=t.findIndex((t=>t===this.el));return{itemIndex:s,listIndex:i}}}};handleClick=()=>{const t=this.getItemIndexes();this.itemSelected.emit({value:this.value||this.el.innerText,description:this.el.innerText,icon:this.iconSrc,indexes:t})};handleKeyDown=t=>{if(t.code===w||t.code===b){t.preventDefault();this.focusChangeAttempt.emit({el:this.el,code:t.code})}};render(){return i(n,{key:"0c49264221a7bf73f4900d661a28ceb0c1ef5d21",role:"listitem",onKeyDown:this.handleKeyDown},i("button",{key:"73c310d25bdead63d39cf7a09e38e38d4c942b8b",part:"button",onClick:this.handleClick},i("slot",{key:"6cd3e5cb014c364a6ce1f983fd1c44bd017423ff",name:"icon"}),i("div",{key:"1b9f4a50c68c38b2a368c1e7c8c282309841fa7c",class:"content-wrapper",part:"content-wrapper"},i("slot",{key:"c91a3b3fac0a30cf5419a63820e733918daf4228"}))))}static get delegatesFocus(){return true}};g.style=p;export{l as ch_suggest,f as ch_suggest_list,g as ch_suggest_list_item};
//# sourceMappingURL=p-515f8f68.entry.js.map