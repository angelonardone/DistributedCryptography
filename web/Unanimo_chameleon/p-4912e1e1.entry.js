import{r as e,g as t,h as i,H as n,c as s,f as a}from"./p-7af91c05.js";import{u as r,t as o}from"./p-6d91f415.js";import{M as c,b as h,a as d,D as u,K as l,f as m}from"./p-625020d1.js";import{a as f,b as p,f as g,g as b,A as k,c as v,d as x,e as y,h as C,W as I}from"./p-2866a291.js";import{g as _}from"./p-ebac9feb.js";import{f as w}from"./p-d161cf55.js";import"./p-5f934da7.js";const z=(e,t)=>{e[c]={parentItem:t}};const A=e=>e[c];const M=(e,t)=>{for(let i=0;i<e.length;i++){const n=e[i];z(n,t);if(f(n)&&p(n)){M(n.items,n)}}};const O=':where(button,a){all:unset;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer}button:disabled{pointer-events:none}*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:grid}.expandable-button{-ms-flex-pack:center;justify-content:center;-ms-flex-item-align:center;align-self:center}.ch-disabled{pointer-events:none}::slotted([slot=action]){pointer-events:none}ch-popover{--ch-popover-separation-x:var(--ch-action-menu-separation-x);--ch-popover-separation-y:var(--ch-action-menu-separation-y)}ch-popover:not(.hydrated){display:none;opacity:0}.action{text-align:start;--ch-action-menu-item-start-img:var(--ch-start-img--base);--ch-action-menu-item-end-img:var(--ch-end-img--base)}.action.start-img--hover:hover{--ch-action-menu-item-start-img:var(--ch-start-img--hover)}.action.end-img--hover:hover{--ch-action-menu-item-end-img:var(--ch-start-end--hover)}.action.start-img--active:active{--ch-action-menu-item-start-img:var(--ch-start-img--active)}.action.end-img--active:active{--ch-action-menu-item-end-img:var(--ch-start-end--active)}.action.start-img--focus:focus{--ch-action-menu-item-start-img:var(--ch-start-img--focus)}.action.end-img--focus:focus{--ch-action-menu-item-end-img:var(--ch-end-img--focus)}.action.start-img--disabled.ch-disabled{--ch-action-menu-item-start-img:var(--ch-start-img--disabled)}.action.end-img--disabled.ch-disabled{--ch-action-menu-item-end-img:var(--ch-end-img--disabled)}.pseudo-img--start::before,.pseudo-img--end::before{content:"";display:block;inline-size:var(--ch-action-menu-item__image-size);block-size:var(--ch-action-menu-item__image-size);min-inline-size:var(--ch-action-menu-item__image-size)}.start-img-type--background::before{background:no-repeat center/var(--ch-action-menu-item__background-image-size) var(--ch-action-menu-item-start-img)}.end-img-type--background::after{background:no-repeat center/var(--ch-action-menu-item__background-image-size) var(--ch-action-menu-item-end-img)}.start-img-type--mask::before{-webkit-mask:no-repeat center/var(--ch-action-menu-item__background-image-size) var(--ch-action-menu-item-start-img);background-color:currentColor}.end-img-type--mask::after{-webkit-mask:no-repeat center/var(--ch-action-menu-item__background-image-size) var(--ch-action-menu-item-end-img);background-color:currentColor}.content{inline-size:100%}';const $=O;const j=/\s+/;const S=(e,t)=>({base:t==="start"?e.startImgSrc:e.endImgSrc});const E=`${h.ACTION} ${h.LINK}`;const D=`${E} ${h.EXPANDABLE}`;const P=`${h.ACTION} ${h.BUTTON}`;const R=`${P} ${h.EXPANDABLE}`;const T="window";let K;const B=class{constructor(t){e(this,t);this.actionGroupParent=false;this.blockAlign="center";this.caption=undefined;this.disabled=false;this.endImgSrc=undefined;this.endImgType="background";this.expandable=false;this.expanded=false;this.getImagePathCallback=undefined;this.href=undefined;this.inlineAlign="center";this.model=undefined;this.openOnFocus=false;this.parts=undefined;this.shortcut=undefined;this.startImgSrc=undefined;this.startImgType="background"}#e;#t;#i;get el(){return t(this)}endImgSrcChanged(){this.#t=this.#n("end")}getImagePathCallbackChanged(){this.#e=this.#n("start");this.#t=this.#n("end")}partsChanged(e){this.#s(e)}startImgSrcChanged(){this.#e=this.#n("start")}#n=e=>{if(e==="start"&&!this.startImgSrc||e==="end"&&!this.endImgSrc){return undefined}const t=this.getImagePathCallback??K;if(!t){return undefined}const i=t(this.model,e);return i?r(i,e):undefined};#a=()=>[i("span",{class:"content",part:h.CONTENT},this.caption),!!this.shortcut&&i("span",{"aria-hidden":"true",part:h.SHORTCUT},this.shortcut)];#r=()=>{const e=this.#e?.classes;const t=this.#t?.classes;const n={action:true,[u]:this.disabled,[`start-img-type--${this.startImgType??"background"} pseudo-img--start`]:!!this.#e,[e]:!!e,[`end-img-type--${this.endImgType??"background"} pseudo-img--end`]:!!this.#t,[t]:!!t};const s=this.expandable;return this.href?i("a",{role:this.disabled?"link":undefined,"aria-controls":s?T:null,"aria-disabled":this.disabled?"true":undefined,"aria-expanded":s?(!!this.expanded).toString():null,"aria-haspopup":s?"true":null,class:n,style:this.#t?.styles??undefined,part:o({[D]:s,[E]:!s,[h.DISABLED]:this.disabled,[h.EXPANDED]:s&&this.expanded,[h.COLLAPSED]:s&&!this.expanded}),href:!this.disabled?this.href:undefined,ref:e=>this.#i=e},this.#a()):i("button",{popoverTarget:T,"aria-controls":s?T:null,"aria-expanded":s?(!!this.expanded).toString():null,"aria-haspopup":s?"true":null,class:n,part:o({[R]:s,[P]:!s,[h.DISABLED]:this.disabled,[h.EXPANDED]:s&&this.expanded,[h.COLLAPSED]:s&&!this.expanded}),style:this.#t?.styles??undefined,disabled:this.disabled,type:"button",ref:e=>this.#i=e},this.#a())};#o=()=>i("ch-popover",{role:"list",id:T,part:h.WINDOW,actionById:true,actionElement:this.#i,blockAlign:this.blockAlign,firstLayer:this.actionGroupParent,inlineAlign:this.inlineAlign,popover:"manual",show:true},i("slot",null));#s=e=>{const t=e?`${d},${e.split(j).join(",")}`:d;this.el.setAttribute("exportparts",t)};connectedCallback(){this.el.setAttribute("role","listitem");this.#s(this.parts);K??=_("getImagePathCallback","ch-action-menu-render")??S;this.#e=this.#n("start");this.#t=this.#n("end")}componentDidRender(){const e=A(this.model);if(this.expanded&&e.focusFirstItemAfterExpand){e.focusFirstItemAfterExpand=false;requestAnimationFrame((()=>g(this.el)))}if(!this.expanded&&e.focusAfterCollapse){e.focusAfterCollapse=false;this.el.focus()}}render(){return i(n,{key:"d309072ff2d0520641a20032498692d113f934f3",style:this.#e?.styles??undefined},this.#r(),this.expandable&&this.expanded&&this.#o())}static get delegatesFocus(){return true}static get watchers(){return{endImgSrc:["endImgSrcChanged"],getImagePathCallback:["getImagePathCallbackChanged"],parts:["partsChanged"],startImgSrc:["startImgSrcChanged"]}}};B.style=$;const F={[l.ARROW_UP]:(e,t)=>{const i=b(e);if(i===undefined){return}e.preventDefault();return i===k?v(t):x(i,"previous")},[l.ARROW_DOWN]:(e,t)=>{const i=b(e);if(i===undefined){return}e.preventDefault();return i===k?g(t):x(i,"next")},[l.ARROW_RIGHT]:e=>{const t=b(e);if(t===undefined||t===k||!p(t.model)){return}e.preventDefault();if(t.model.expanded){return g(t.ref)}A(t.model).focusFirstItemAfterExpand=true;return{newExpanded:true,model:t.model}},[l.ARROW_LEFT]:e=>{const t=b(e);if(t===undefined||t===k){return undefined}const i=A(t.model);if(!i.parentItem){return undefined}e.preventDefault();A(i.parentItem).focusAfterCollapse=true;return{newExpanded:false,model:i.parentItem}},[l.HOME]:(e,t)=>{const i=b(e);if(i===undefined){return}if(i===k){e.preventDefault();return g(t)}if(y(i.ref)){e.preventDefault();return g(i.ref.parentElement)}},[l.END]:(e,t)=>{const i=b(e);if(i===undefined){return}if(i===k){e.preventDefault();return v(t)}if(y(i.ref)){e.preventDefault();return v(i.ref.parentElement)}}};const L=e=>{for(let t=0;t<e.length;t++){const i=e[t];if(f(i)&&i.expanded){i.expanded=false;if(i.items?.length>0){L(i.items)}}}};const q=e=>{e.expanded=false;if(e.items?.length>0){L(e.items)}};const H=e=>{let t=e;while(t!==undefined){t.expanded=true;t=A(t).parentItem}};const W=":where(button,a){all:unset;display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer}button:disabled{pointer-events:none}*,::after,::before{-webkit-box-sizing:border-box;box-sizing:border-box}:host{--ch-action-menu-item__image-size:0.875em;--ch-action-menu-item__background-image-size:100%;--ch-action-menu-separation:0px;--ch-action-menu-separation-x:var(--ch-action-menu-separation);--ch-action-menu-separation-y:var(--ch-action-menu-separation);display:contents}::slotted(action){pointer-events:none}hr{display:grid;block-size:1px;margin:0;background-color:color-mix(in srgb, currentColor 25%, transparent);border:unset;pointer-events:none}";const G=W;const J=class{constructor(t){e(this,t);this.buttonClick=s(this,"buttonClick",7);this.expandedChange=s(this,"expandedChange",7);this.expandedItemChange=s(this,"expandedItemChange",7);this.hyperlinkClick=s(this,"hyperlinkClick",7);this.buttonAccessibleName=undefined;this.blockAlign="outside-end";this.disabled=false;this.getImagePathCallback=undefined;this.expanded=false;this.gxImageConstructor=undefined;this.gxSettings=undefined;this.inlineAlign="center";this.model=undefined;this.useGxRender=false}#c;#h;get el(){return t(this)}expandedChanged(){if(this.expanded){this.#d()}else{this.#u()}}modelChanged(){this.#l()}buttonClick;expandedChange;expandedItemChange;hyperlinkClick;#m=e=>{const t=p(e);return i("ch-action-menu",{blockAlign:e.itemsBlockAlign??"inside-start",caption:e.caption,disabled:e.disabled??this.disabled,endImgSrc:this.useGxRender?w(e.endImgSrc,this.gxSettings,this.gxImageConstructor):e.endImgSrc,endImgType:e.endImgType,expandable:t,expanded:e.expanded,getImagePathCallback:this.getImagePathCallback,href:e.link?.url,inlineAlign:e.itemsBlockAlign??"outside-end",model:e,parts:e.parts,shortcut:e.shortcut,startImgSrc:this.useGxRender?w(e.startImgSrc,this.gxSettings,this.gxImageConstructor):e.startImgSrc,startImgType:e.startImgType},t&&e.expanded&&this.#f(e.items))};#p={separator:e=>i("hr",{key:e.id,part:o({[e.id]:!!e.id,[h.SEPARATOR]:true,[e.parts]:!!e.parts})}),slot:e=>i("slot",{name:e.id})};#f=e=>e.map((e=>f(e)?this.#m(e):this.#p[e.type](e)));#g=(e,t)=>{const i=b(e);if(i===undefined){return}if(i===k){if(t==="click"){return this.expanded?this.#b():this.#k()}return}const n=i.model;if(t==="click"){if(C(n)){const t=this.hyperlinkClick.emit({item:n,event:e});if(t.defaultPrevented){e.preventDefault()}this.#b();return}if(!p(n)){const t=this.buttonClick.emit(n);if(t.defaultPrevented){e.preventDefault();return}this.#b();return}}if(t==="mouseout"){q(n)}else{L(this.model);H(n);const e=t==="mouseover"||n.expanded;if(n.expanded!==e){n.expanded=e;this.expandedItemChange.emit({item:n,expanded:e})}}a(this)};#v=e=>this.#g(e,"click");#x=e=>this.#g(e,"mouseover");#y=e=>this.#g(e,"mouseout");#C=e=>{if(!this.expanded&&(e.code===l.ARROW_UP||e.code===l.ARROW_DOWN)){this.expanded=true;this.expandedChange.emit(true);return}const t=F[e.code];if(t){const i=t(e,this.#h);if(!i){return}if(i.newExpanded){L(this.model);H(i.model)}else{q(i.model)}this.expandedItemChange.emit({item:i.model,expanded:i.newExpanded});a(this)}};#I=e=>{const t=e.composedPath();if(!t.includes(this.el)){this.#b()}};#_=e=>{if(e.code===l.ESCAPE){this.#c.focus();this.#b()}};#k=()=>{this.expanded=true;this.expandedChange.emit(true)};#b=()=>{L(this.model);this.expanded=false;this.expandedChange.emit(false)};#d=()=>{document.addEventListener("click",this.#I,{capture:true,passive:true});document.addEventListener("keydown",this.#_,{capture:true,passive:true})};#u=()=>{document.removeEventListener("click",this.#I,true);document.removeEventListener("keydown",this.#_,true)};#l=()=>{if(this.model){M(this.model,undefined)}};connectedCallback(){this.#l();if(this.expanded){this.#d()}}disconnectedCallback(){this.#u()}render(){const e=!(this.disabled&&!this.expanded);return i(n,{key:"9e554160f65e264c93017548f8b641792c880909",onClick:e&&this.#v,onKeyDown:e&&this.#C},i("button",{key:"9138a2a705a728b64858ffd87cb0645fd136e6fc","aria-controls":I,"aria-expanded":this.expanded.toString(),"aria-haspopup":"true","aria-label":this.buttonAccessibleName,part:o({[m.EXPANDABLE_BUTTON]:true,[h.EXPANDED]:this.expanded,[h.COLLAPSED]:!this.expanded,[h.DISABLED]:this.disabled}),disabled:this.disabled,popoverTarget:I,type:"button",ref:e=>this.#c=e},i("slot",{key:"9edc29773521591a5bcb019e8cf5997dde84e12b"})),this.expanded&&this.model&&i("ch-popover",{key:"0a4054e2397d1d90196bcdf70b2cf9e7b838f586",role:"list",id:I,part:h.WINDOW,actionById:true,actionElement:this.#c,blockAlign:this.blockAlign,firstLayer:true,inlineAlign:this.inlineAlign,popover:"manual",show:true,onMouseOver:this.#x,onMouseOut:this.#y,ref:e=>this.#h=e},this.model!==undefined&&this.#f(this.model)))}static get watchers(){return{expanded:["expandedChanged"],model:["modelChanged"]}}};J.style=G;export{B as ch_action_menu,J as ch_action_menu_render};
//# sourceMappingURL=p-4912e1e1.entry.js.map