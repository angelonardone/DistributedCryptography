/*mustache.js - Logic-less {{mustache}} templates with JavaScript
 http://github.com/janl/mustache.js
 modernizr 3.6.0 (Custom Build) | MIT *
 https://modernizr.com/download/?-csstransitions-flexbox-history-domprefixes-setclasses-testallprops-testprop ! modernizr v3.6.0
 Build https://modernizr.com/download?-csstransitions-flexbox-history-domprefixes-setclasses-testallprops-testprop-dontmin

 Copyright (c)
  Faruk Ates
  Paul Irish
  Alex Sexton
  Ryan Seddon
  Patrick Kettner
  Stu Cox
  Richard Herrera

 MIT License
 {
  "name": "History API",
  "property": "history",
  "caniuse": "history",
  "tags": ["history"],
  "authors": ["Hay Kranen", "Alexander Farkas"],
  "notes": [{
    "name": "W3C Spec",
    "href": "https://www.w3.org/TR/html51/browsers.html#the-history-interface"
  }, {
    "name": "MDN documentation",
    "href": "https://developer.mozilla.org/en-US/docs/Web/API/window.history"
  }],
  "polyfills": ["historyjs", "html5historyapi"]
}
! {
  "name": "Flexbox",
  "property": "flexbox",
  "caniuse": "flexbox",
  "tags": ["css"],
  "notes": [{
    "name": "The _new_ flexbox",
    "href": "http://dev.w3.org/csswg/css3-flexbox"
  }],
  "warnings": [
    "A `true` result for this detect does not imply that the `flex-wrap` property is supported; see the `flexwrap` detect."
  ]
}
! {
  "name": "CSS Transitions",
  "property": "csstransitions",
  "caniuse": "css-transitions",
  "tags": ["css"]
}
! jQuery UI - v1.13.2 - 2022-09-06
 http://jqueryui.com
 Includes: position.js
 Copyright jQuery Foundation and other contributors; Licensed MIT  jQuery UI Position 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(l){return l.raw=l};$jscomp.createTemplateTagFirstArgWithRaw=function(l,c){l.raw=c;return l};$jscomp.arrayIteratorImpl=function(l){var c=0;return function(){return c<l.length?{done:!1,value:l[c++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.makeIterator=function(l){var c="undefined"!=typeof Symbol&&Symbol.iterator&&l[Symbol.iterator];return c?c.call(l):$jscomp.arrayIterator(l)};
$jscomp.arrayFromIterator=function(l){for(var c,d=[];!(c=l.next()).done;)d.push(c.value);return d};$jscomp.arrayFromIterable=function(l){return l instanceof Array?l:$jscomp.arrayFromIterator($jscomp.makeIterator(l))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(l,c,d){if(l==Array.prototype||l==Object.prototype)return l;l[c]=d.value;return l};$jscomp.getGlobal=function(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<l.length;++c){var d=l[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(l,c){var d=$jscomp.propertyToPolyfillSymbol[c];if(null==d)return l[c];d=l[d];return void 0!==d?d:l[c]};
$jscomp.polyfill=function(l,c,d,k){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(l,c,d,k):$jscomp.polyfillUnisolated(l,c,d,k))};$jscomp.polyfillUnisolated=function(l,c,d,k){d=$jscomp.global;l=l.split(".");for(k=0;k<l.length-1;k++){var a=l[k];if(!(a in d))return;d=d[a]}l=l[l.length-1];k=d[l];c=c(k);c!=k&&null!=c&&$jscomp.defineProperty(d,l,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(l,c,d,k){var a=l.split(".");l=1===a.length;k=a[0];k=!l&&k in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var b=0;b<a.length-1;b++){var f=a[b];if(!(f in k))return;k=k[f]}a=a[a.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?k[a]:null;c=c(d);null!=c&&(l?$jscomp.defineProperty($jscomp.polyfills,a,{configurable:!0,writable:!0,value:c}):c!==d&&($jscomp.propertyToPolyfillSymbol[a]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(a):$jscomp.POLYFILL_PREFIX+a,a=
$jscomp.propertyToPolyfillSymbol[a],$jscomp.defineProperty(k,a,{configurable:!0,writable:!0,value:c})))};$jscomp.polyfill("Array.from",function(l){return l?l:function(c,d,k){d=null!=d?d:function(g){return g};var a=[],b="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];if("function"==typeof b){c=b.call(c);for(var f=0;!(b=c.next()).done;)a.push(d.call(k,b.value,f++))}else for(b=c.length,f=0;f<b;f++)a.push(d.call(k,c[f],f));return a}},"es6","es3");
$jscomp.checkStringArgs=function(l,c,d){if(null==l)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return l+""};
$jscomp.polyfill("String.prototype.startsWith",function(l){return l?l:function(c,d){var k=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var a=k.length,b=c.length;d=Math.max(0,Math.min(d|0,k.length));for(var f=0;f<b&&d<a;)if(k[d++]!=c[f++])return!1;return f>=b}},"es6","es3");$jscomp.polyfill("globalThis",function(l){return l||$jscomp.global},"es_2020","es3");
$jscomp.findInternal=function(l,c,d){l instanceof String&&(l=String(l));for(var k=l.length,a=0;a<k;a++){var b=l[a];if(c.call(d,b,a,l))return{i:a,v:b}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(l){return l?l:function(c,d){return $jscomp.findInternal(this,c,d).v}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(l){return l?l:function(c,d){var k=$jscomp.checkStringArgs(this,c,"endsWith");c+="";void 0===d&&(d=k.length);d=Math.max(0,Math.min(d|0,k.length));for(var a=c.length;0<a&&0<d;)if(k[--d]!=c[--a])return!1;return 0>=a}},"es6","es3");$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(l){if(l)return l;var c=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var d=0,k=function(a){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(a||"")+"_"+d++,a)};return k},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(l){if(l)return l;l=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<c.length;d++){var k=$jscomp.global[c[d]];"function"===typeof k&&"function"!=typeof k.prototype[l]&&$jscomp.defineProperty(k.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return l},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(l){l={next:l};l[Symbol.iterator]=function(){return this};return l};$jscomp.iteratorFromArray=function(l,c){l instanceof String&&(l+="");var d=0,k={next:function(){if(d<l.length){var a=d++;return{value:c(a,l[a]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill("Array.prototype.values",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(c,d){return d})}},"es8","es3");$jscomp.polyfill("Object.is",function(l){return l?l:function(c,d){return c===d?0!==c||1/c===1/d:c!==c&&d!==d}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(l){return l?l:function(c,d){var k=this;k instanceof String&&(k=String(k));var a=k.length;d=d||0;for(0>d&&(d=Math.max(d+a,0));d<a;d++){var b=k[d];if(b===c||Object.is(b,c))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(l){return l?l:function(c,d){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,d||0)}},"es6","es3");$jscomp.owns=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)};
$jscomp.polyfill("Object.entries",function(l){return l?l:function(c){var d=[],k;for(k in c)$jscomp.owns(c,k)&&d.push([k,c[k]]);return d}},"es8","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(l){function c(){this.batch_=null}function d(f){return f instanceof a?f:new a(function(g,m){g(f)})}if(l&&!$jscomp.FORCE_POLYFILL_PROMISE)return l;c.prototype.asyncExecute=function(f){if(null==this.batch_){this.batch_=[];var g=this;this.asyncExecuteFunction(function(){g.executeBatch_()})}this.batch_.push(f)};var k=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(f){k(f,0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var f=
this.batch_;this.batch_=[];for(var g=0;g<f.length;++g){var m=f[g];f[g]=null;try{m()}catch(p){this.asyncThrow_(p)}}}this.batch_=null};c.prototype.asyncThrow_=function(f){this.asyncExecuteFunction(function(){throw f;})};var a=function(f){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var g=this.createResolveAndReject_();try{f(g.resolve,g.reject)}catch(m){g.reject(m)}};a.prototype.createResolveAndReject_=function(){function f(p){return function(u){m||(m=!0,p.call(g,u))}}var g=this,m=!1;
return{resolve:f(this.resolveTo_),reject:f(this.reject_)}};a.prototype.resolveTo_=function(f){if(f===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof a)this.settleSameAsPromise_(f);else{a:switch(typeof f){case "object":var g=null!=f;break a;case "function":g=!0;break a;default:g=!1}g?this.resolveToNonPromiseObj_(f):this.fulfill_(f)}};a.prototype.resolveToNonPromiseObj_=function(f){var g=void 0;try{g=f.then}catch(m){this.reject_(m);return}"function"==typeof g?
this.settleSameAsThenable_(g,f):this.fulfill_(f)};a.prototype.reject_=function(f){this.settle_(2,f)};a.prototype.fulfill_=function(f){this.settle_(1,f)};a.prototype.settle_=function(f,g){if(0!=this.state_)throw Error("Cannot settle("+f+", "+g+"): Promise already settled in state"+this.state_);this.state_=f;this.result_=g;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var f=0;f<this.onSettledCallbacks_.length;++f)b.asyncExecute(this.onSettledCallbacks_[f]);
this.onSettledCallbacks_=null}};var b=new c;a.prototype.settleSameAsPromise_=function(f){var g=this.createResolveAndReject_();f.callWhenSettled_(g.resolve,g.reject)};a.prototype.settleSameAsThenable_=function(f,g){var m=this.createResolveAndReject_();try{f.call(g,m.resolve,m.reject)}catch(p){m.reject(p)}};a.prototype.then=function(f,g){function m(w,A){return"function"==typeof w?function(q){try{p(w(q))}catch(v){u(v)}}:A}var p,u,x=new a(function(w,A){p=w;u=A});this.callWhenSettled_(m(f,p),m(g,u));return x};
a.prototype.catch=function(f){return this.then(void 0,f)};a.prototype.callWhenSettled_=function(f,g){function m(){switch(p.state_){case 1:f(p.result_);break;case 2:g(p.result_);break;default:throw Error("Unexpected state: "+p.state_);}}var p=this;null==this.onSettledCallbacks_?b.asyncExecute(m):this.onSettledCallbacks_.push(m)};a.resolve=d;a.reject=function(f){return new a(function(g,m){m(f)})};a.race=function(f){return new a(function(g,m){for(var p=$jscomp.makeIterator(f),u=p.next();!u.done;u=p.next())d(u.value).callWhenSettled_(g,
m)})};a.all=function(f){var g=$jscomp.makeIterator(f),m=g.next();return m.done?d([]):new a(function(p,u){function x(q){return function(v){w[q]=v;A--;0==A&&p(w)}}var w=[],A=0;do w.push(void 0),A++,d(m.value).callWhenSettled_(x(w.length-1),u),m=g.next();while(!m.done)})};return a},"es6","es3");$jscomp.polyfill("Number.isNaN",function(l){return l?l:function(c){return"number"===typeof c&&isNaN(c)}},"es6","es3");
$jscomp.polyfill("Object.values",function(l){return l?l:function(c){var d=[],k;for(k in c)$jscomp.owns(c,k)&&d.push(c[k]);return d}},"es8","es3");var gxnoFunc=function(){},gxdbg={logDebug:gxnoFunc,logMsg:gxnoFunc,logEx:gxnoFunc,exTxt:gxnoFunc,write:gxnoFunc,logPerf:gxnoFunc,printPerformanceLog:gxnoFunc};
(function(l,c){"object"===typeof exports&&exports&&"string"!==typeof exports.nodeName?c(exports):"function"===typeof define&&define.amd?define(["exports"],c):(l.Mustache={},c(l.Mustache))})(this,function(l){function c(r){return"function"===typeof r}function d(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function k(r,y){return null!=r&&"object"===typeof r&&y in r}function a(r,y){function C(fa){"string"===typeof fa&&(fa=fa.split(t,2));if(!x(fa)||2!==fa.length)throw Error("Invalid tags: "+
fa);O=new RegExp(d(fa[0])+"\\s*");Q=new RegExp("\\s*"+d(fa[1]));W=new RegExp("\\s*"+d("}"+fa[1]))}if(!r)return[];var D=[],F=[],H=[],L=!1,N=!1,O,Q,W;C(y||l.tags);r=new g(r);for(var V,Z,ba;!r.eos();){y=r.pos;if(Z=r.scanUntil(O)){ba=0;for(var ca=Z.length;ba<ca;++ba)if(V=Z.charAt(ba),w.call(A,V)?N=!0:H.push(F.length),F.push(["text",V,y,y+1]),y+=1,"\n"===V){if(L&&!N)for(;H.length;)delete F[H.pop()];else H=[];N=L=!1}}if(!r.scan(O))break;L=!0;V=r.scan(J)||"name";r.scan(v);"="===V?(Z=r.scanUntil(B),r.scan(B),
r.scanUntil(Q)):"{"===V?(Z=r.scanUntil(W),r.scan(G),r.scanUntil(Q),V="&"):Z=r.scanUntil(Q);if(!r.scan(Q))throw Error("Unclosed tag at "+r.pos);ba=[V,Z,y,r.pos];F.push(ba);if("#"===V||"^"===V)D.push(ba);else if("/"===V){V=D.pop();if(!V)throw Error('Unopened section "'+Z+'" at '+y);if(V[1]!==Z)throw Error('Unclosed section "'+V[1]+'" at '+y);}else"name"===V||"{"===V||"&"===V?N=!0:"="===V&&C(Z)}if(V=D.pop())throw Error('Unclosed section "'+V[1]+'" at '+r.pos);return f(b(F))}function b(r){for(var y=[],
C,D,F=0,H=r.length;F<H;++F)if(C=r[F])"text"===C[0]&&D&&"text"===D[0]?(D[1]+=C[1],D[3]=C[3]):(y.push(C),D=C);return y}function f(r){for(var y=[],C=y,D=[],F,H=0,L=r.length;H<L;++H)switch(F=r[H],F[0]){case "#":case "^":C.push(F);D.push(F);C=F[4]=[];break;case "/":C=D.pop();C[5]=F[2];C=0<D.length?D[D.length-1][4]:y;break;default:C.push(F)}return y}function g(r){this.tail=this.string=r;this.pos=0}function m(r,y){this.view=r;this.cache={".":this.view};this.parent=y}function p(){this.cache={}}var u=Object.prototype.toString,
x=Array.isArray||function(r){return"[object Array]"===u.call(r)},w=RegExp.prototype.test,A=/\S/,q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},v=/\s*/,t=/\s+/,B=/\s*=/,G=/\s*\}/,J=/#|\^|\/|>|\{|&|=|!/;g.prototype.eos=function(){return""===this.tail};g.prototype.scan=function(r){r=this.tail.match(r);if(!r||0!==r.index)return"";r=r[0];this.tail=this.tail.substring(r.length);this.pos+=r.length;return r};g.prototype.scanUntil=function(r){r=this.tail.search(r);
switch(r){case -1:var y=this.tail;this.tail="";break;case 0:y="";break;default:y=this.tail.substring(0,r),this.tail=this.tail.substring(r)}this.pos+=y.length;return y};m.prototype.push=function(r){return new m(r,this)};m.prototype.lookup=function(r){var y=this.cache;if(y.hasOwnProperty(r))var C=y[r];else{for(var D=this,F,H,L,N=!1;D;){if(0<r.indexOf("."))for(F=D.view,H=r.split("."),L=0;null!=F&&L<H.length;)L===H.length-1&&(N=k(F,H[L])||null!=F&&"object"!==typeof F&&F.hasOwnProperty&&F.hasOwnProperty(H[L])),
F=F[H[L++]];else F=D.view[r],N=k(D.view,r);if(N){C=F;break}D=D.parent}y[r]=C}c(C)&&(C=C.call(this.view));return C};p.prototype.clearCache=function(){this.cache={}};p.prototype.parse=function(r,y){var C=this.cache,D=r+":"+(y||l.tags).join(":"),F=C[D];null==F&&(F=C[D]=a(r,y));return F};p.prototype.render=function(r,y,C,D){var F=this.parse(r,D);y=y instanceof m?y:new m(y);return this.renderTokens(F,y,C,r,D)};p.prototype.renderTokens=function(r,y,C,D,F){for(var H="",L,N,O,Q=0,W=r.length;Q<W;++Q)O=void 0,
L=r[Q],N=L[0],"#"===N?O=this.renderSection(L,y,C,D):"^"===N?O=this.renderInverted(L,y,C,D):">"===N?O=this.renderPartial(L,y,C,F):"&"===N?O=this.unescapedValue(L,y):"name"===N?O=this.escapedValue(L,y):"text"===N&&(O=this.rawValue(L)),void 0!==O&&(H+=O);return H};p.prototype.renderSection=function(r,y,C,D){function F(W){return H.render(W,y,C)}var H=this,L="",N=y.lookup(r[1]);if(N){if(x(N))for(var O=0,Q=N.length;O<Q;++O)L+=this.renderTokens(r[4],y.push(N[O]),C,D);else if("object"===typeof N||"string"===
typeof N||"number"===typeof N)L+=this.renderTokens(r[4],y.push(N),C,D);else if(c(N)){if("string"!==typeof D)throw Error("Cannot use higher-order sections without the original template");N=N.call(y.view,D.slice(r[3],r[5]),F);null!=N&&(L+=N)}else L+=this.renderTokens(r[4],y,C,D);return L}};p.prototype.renderInverted=function(r,y,C,D){var F=y.lookup(r[1]);if(!F||x(F)&&0===F.length)return this.renderTokens(r[4],y,C,D)};p.prototype.renderPartial=function(r,y,C,D){if(C&&(r=c(C)?C(r[1]):C[r[1]],null!=r))return this.renderTokens(this.parse(r,
D),y,C,r)};p.prototype.unescapedValue=function(r,y){r=y.lookup(r[1]);if(null!=r)return r};p.prototype.escapedValue=function(r,y){r=y.lookup(r[1]);if(null!=r)return l.escape(r)};p.prototype.rawValue=function(r){return r[1]};l.name="mustache.js";l.version="3.0.1";l.tags=["{{","}}"];var n=new p;l.clearCache=function(){return n.clearCache()};l.parse=function(r,y){return n.parse(r,y)};l.render=function(r,y,C,D){if("string"!==typeof r)throw y=TypeError,r=x(r)?"array":typeof r,new y('Invalid template! Template should be a "string" but "'+
r+'" was given as the first argument for mustache#render(template, view, partials)');return n.render(r,y,C,D)};l.to_html=function(r,y,C,D){r=l.render(r,y,C);if(c(D))D(r);else return r};l.escape=function(r){return String(r).replace(/[&<>"'`=\/]/g,function(y){return q[y]})};l.Scanner=g;l.Context=m;l.Writer=p;return l});(function(){window.onpageshow=function(l){l.persisted&&window.location.reload()}})();
var gx=function(l){var c=/^(?:gx\.O\.)(.+)$/,d=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,k=function(){return!1};return{$:l.noConflict(),O:null,pO:null,languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",servletBasePath:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,
msg:{},NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:k,trueFn:function(){return!0},getNotificationDelay:function(){return void 0===gx.NotificationDelay?400:gx.NotificationDelay},numericLenDec:function(a){var b=a.split(".");a=2===b.length?b[0]:a;b=2===b.length?b[1]:"";a=(a.match(/9|Z|#|\?|\\/g)||[]).length;b=(b.match(/9|Z|#|\?|\\/g)||[]).length;return{Integers:a,Decimals:b}},rtPicture:function(a,b){return b&&b.getAttribute("data-gx-rt-picture")||a&&a.pic||""},dom:{_form:null,_avoidLeaksDiv:null,
id:function(a){return void 0==a.id||""==a.id?a.name:a.id},byId:function(a,b){return"string"===typeof a?(b=b||document,b.getElementById(a)):a},byName:function(a){return a?document.getElementsByName(a):[]},getOrCreatebyCss:function(a,b){b=b.trim().split(" ");a=document.body;b=$jscomp.makeIterator(b);for(var f=b.next();!f.done;f=b.next()){f=f.value;var g=a.querySelector(f);g||(f=f.split(/[\[\]]/)[0],g=document.createElement(f),a.appendChild(g));a=g}return a},toggleAttribute:function(a,b,f){"function"===
typeof a.toggleAttribute?a.toggleAttribute(b,f):f?a.setAttribute(b,""):a.removeAttribute(b,"")},byTag:function(a,b){b=b||document;return b.getElementsByTagName(a)},byClass:function(a,b,f){return!b&&(f=document||f,f.getElementsByClassName)?f.getElementsByClassName(a):l((b||"")+"."+a,f).toArray()},bySelector:function(a){return l(a).toArray()},getAttributeNames:function(a){return"function"===typeof a.getAttributeNames?a.getAttributeNames():Array.from(a.attributes).map(function(b){return b.name})},scripts:function(a){var b=
document.scripts;b||(b=document.getElementsByTagName("script"));if("undefined"!=typeof b){for(var f=[],g=b.length,m=0;m<g;m++)if(!a||null==b[m].getAttribute("data-gx-external-script")){var p=b[m].attributes.src;p&&p.value&&(p=p.value,"//:"!=p&&f.push(p))}return f}return[]},getIntersectionObserver:function(a){"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?a&&a(window.IntersectionObserver):gx.http.loadScript(gx.util.resourceUrl(gx.basePath+
gx.staticDirectory+"intersection-observer.js",!1),function(){a&&a(window.IntersectionObserver)})},_init:function(){gx.evt.processing=!1;gx.evt.userReadyCnt=1;gx.evt._userReady=!1;gx.evt.on_ready(this,function(){var a,b=gx.util.browser,f=[];if(document.querySelectorAll)f=document.querySelectorAll("input[type='hidden']");else{var g=gx.dom.byTag("input");var m=0;for(a=g.length;m<a;m++)"hidden"==g[m].getAttribute("type")&&f.push(g[m])}m=0;for(a=f.length;m<a;m++)f[m].setAttribute("autocomplete","off");
l('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")});if(b.isChrome())for(b=document.querySelectorAll("select"),m=0,a=b.length;m<a;m++)b[m].value||(f=b[m].querySelectorAll("option[selected]"))&&f.length&&(b[m].value=f[0].value);l('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")})});this.TRANSITION_END_EVENT=gx.util.browser.isWebkit()?"webkitTransitionEnd":gx.util.browser.isOpera()?"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?
"webkitAnimationEnd":gx.util.browser.isOpera()?"oAnimationEnd":"animationend"}},evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!1,skipPromptCtrl:!0,touchTimer:null,userReadyCnt:0,_userReady:!1,userReadyThreshold:2E3,userReadyThresholdFast:400,hooks:[],types:{VALUECHANGED:1,VALUECHANGING:2},promptFocus:function(a){!0!==
gx.evt.evtPromptMouseDown&&(a=gx.evt.source(a),a=l("[data-gx-attached-ctrl]",a)[0])&&(a=(a.getAttribute("data-gx-attached-ctrl").split(" ")||[]).pop(),a=gx.O.getValidStructId(a),a>=gx.csv.lastId&&(gx.csv.lastId=a,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll()));gx.evt.evtPromptMouseDown=!1},promptMousedown:function(){gx.evt.evtPromptMouseDown=!0},serialRunner:function(){var a=[];return{addTask:function(b){a.push(b);if(1===a.length)a[0]()},signalEndTask:function(){a.shift();if(0<a.length)a[0]()}}},
addHook:function(a,b,f,g){this.hooks.push({c:a,e:b,f:f,o:g})},removeHookByKey:function(a){l.each(gx.evt.hooks,function(b,f){f.o&&f.o.hookKey&&a===f.o.hookKey&&(gx.evt.detach(f.e,f.o,f.f),gx.evt.hooks[b]=void 0)});gx.evt.hooks=gx.evt.hooks.filter(function(b){return b})},attach:function(a,b,f,g,m){m=m||{};if("string"==typeof b){var p=f;g&&(p=f.closure(g));var u=gx.evt.hooks.length;if(m.single){var x=p,w=!1,A;p=function(){w||(A&&clearTimeout(A),gx.evt.detach(a,b,x,m),x.apply(this,arguments),gx.evt.hooks.splice(u,
1),w=!0)};m.timeout&&(A=setTimeout(p,m.timeout))}a.addEventListener?a.addEventListener(b,p,m.useCapture||!1):a.attachEvent?a.attachEvent("on"+b,p):a["on"+b]=p;this.addHook(a,b,p,m)}else if(gx.lang.isArray(b)){p=0;for(var q=b.length;p<q;p++)this.attach(a,b[p],f,g,m)}},on_ready:function(a,b){gx.fx.obs.addObserver("gx.onload",a,b)},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,
"gx-spa-navigating")},onbeforesend:function(a,b,f){gx.pO.MasterPage&&a.req.setRequestHeader(f,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,b,f,g,m,p){gx.reinit(!p)},oncontentreplace:function(a,b,f,g,m,p,u,x){a=gx.lang.getType(g);p=(p=p==u?p:u)?gx.lang.getType(p.toLowerCase()):!1;var w=gx.ajax.getJsonResponse();w&&gx.fn.setJsonHiddens(null,w.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);x?gx.setMasterPage(m):p&&gx.setMasterPage(new p);gx.ajax.clearJsonResponse();
w?gx.ajax.setJsonResponse({response:w,isPostBack:!1,afterCmpLoaded:function(){x&&(m.restoreTargetComponents(),m.restoreExoEventHandlers());gx.objectLoad(w.gxGrids,w.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}).done(function(){gx.fn.setFocusAfterLoad(!0)}):gx.objectLoad()}}});gx.livePrevWS._init()})},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},250);else if(gx.util.browser.isIE()&&
"complete"==document.readyState)gx.evt.onload()},_init:function(){gx.evt.oldDoPostDelay=gx.getNotificationDelay()+100;gx.evt.userReadyThresholdFast=gx.util.browser.isIE()?2E3:gx.evt.userReadyThresholdFast;document.gxReadyState="loading";gx.lang.doCallTimeout(function(){gx.evt.userReadyThreshold=gx.evt.userReadyThresholdFast},gx.evt,[],gx.evt.userReadyThreshold);gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE())?
this.attach(document,"readystatechange",this.onready):9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini()?this.attach(document,"DOMContentLoaded",this.onload):gx.util.browser.isBlackBerry()?this.attach(window,"load",this.onload):gx.wi(function(){this.onready(null)},gx.evt);gx.wi(function(){this.attach(document,["touchstart"],this.ontouchstart);this.attach(document,"mousedown",this.onmousedown);this.attach(document,
["mousemove","touchmove"],this.onmousemove);this.attach(document,["mouseup","touchend"],this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},gx.evt)}},define:function(a,b,f){var g=window||this,m=a.split("."),p=m.length;for(a=0;a<p-1;a++)"undefined"==
typeof g[m[a]]&&(g[m[a]]={}),g=g[m[a]];g[m[p-1]]=f;b||(g[m[p-1]].prototype=new gx.GxObject)},setParentObj:function(a){gx.pO=a;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=gx.pO.OnSessionTimeout;gx.fx.obs.notify(gx.PARENT_OBJECT_EVT)},createParentObj:function(a){if(!gx.spa||!gx.spa.started){var b;a instanceof gx.GxObject||(b=new a);b&&this.setParentObj(b)}},setExecutableComponent:function(a){gx.spa&&gx.spa.started||gx.wi(function(){null==gx.pO&&(gx.setParentObj(gx.createComponent(a,
"")),gx.fn.objectOnload(void 0,!0))},this)},setMasterPage:function(a){gx.wpo(function(){null!=gx.pO&&(gx.pO.MasterPage=a,gx.fx.obs.notify(gx.SETMASTERPAGE_EVT))})},createMasterPage:function(a){gx.wpo(function(){var b;gx.spa.isNavigating()||(a instanceof gx.GxObject||(b=new a),b&&this.setMasterPage(b))},this)},addComponent:function(a,b){null!=gx.pO&&gx.pO.setWebComponent(a,b)},createComponent:function(a,b,f){var g=null;a=gx.lang.getType(a);if(null!=a){a.prototype=new gx.GxObject;var m=gx.csv.cmpCtx;
gx.csv.cmpCtx=b;g=new a(b);f&&g.setContainer(f);gx.csv.cmpCtx=m;g.serviceUrl=gx.fn.getControlValue(g.CmpContext+"_CMPPGM")}return g},getObj:function(a,b){return""==a?1==b?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxO:function(){if(1==arguments.length&&"object"==typeof arguments[0])gx.O=arguments[0];else{var a=arguments[0];var b=arguments[1];gx.O=this.getObj(a,b)||gx.pO}gx.csv.cmpCtx=gx.O.CmpContext;return gx.O},setVar:function(a,b){gx.O.setVariable(a,b)},getVar:function(a){return gx.O.getVariable(a)},
prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var b=c;b=b.exec(a);null!=b&&b[1]?a=b[1]:(b=d,b=b.exec(a),null!=b&&b[1]&&(a=b[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=a},setTimeFormat:function(a){gx.timeFormat=a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=a},setDecimalPoint:function(a){gx.decimalPoint=
a},setThousandSeparator:function(a){gx.thousandSeparator=a},setStaticDirectory:function(a){gx.staticDirectory=a;if(""==gx.staticDirectory)gx.staticDirectory="/";else{var b=gx.staticDirectory.length;a=!gx.isabsoluteurl(a)&&"/"!=gx.staticDirectory.charAt(0);b="/"!=gx.staticDirectory.charAt(b-1);gx.staticDirectory=(a?"/":"")+gx.staticDirectory+(b?"/":"")}},getThemeElement:function(){return gx.dom.byId("gxtheme_css_reference")},updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");a&&a!=this.theme&&
(this.theme=a,(a=gx.getThemeElement())&&0>a.href.search("/"+this.theme+".css")&&(a.href=a.href.replace(/[^/]*.css/,this.theme+".css")))},setTheme:function(a){var b=gx.util.browser,f=b.isIE();b=b.ieVersion();var g=gx.dom.fixes;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{void 0===a&&g.resetFixesStyleElement();gx.HTML5&&g.html5(a);if(void 0===a){f&&(l(document.documentElement).addClass("ie"),l(document.documentElement).addClass("ie"+b),gx.runtimeTemplates&&!Modernizr.flexbox&&
l(document.documentElement).addClass("gx-align-fallback"));if(f&&10==b){var m=document.createElement("style");m.innerHTML="input::-ms-clear {display: none;}";document.body.appendChild(m)}g.setPopupMinWidth()}g.fixTableResets(a)}catch(p){gx.dbg.logEx(p,"gxapi.js","setTheme")}},typedOld:function(a,b,f){switch(f){case "int":return this.OldInteger(a,b);case "decimal":return this.OldDecimal(a,b,!0);case "date":return this.OldDate(a,b);case "dtime":return this.OldDateTime(a,b);default:return this.Old(a,
b)}},isInputEnabled:function(a){return a&&gx.evt.lastEvt==a?!0:!(gx.evt.processing&&!gx.csv.isvalidating()||gx.spa.isNavigating())},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,netcore:!1,isDotNet:function(){return this.net},isDotNetCore:function(){return this.netcore},isRuby:k,isJava:function(){return!this.net&&
!this.netcore},resolveObjClass:function(a){var b=a;if(gx.gen.isDotNet()||gx.gen.isDotNetCore())b=a.replace(/\.aspx$/,"");gx.gen.isJava()&&gx.pO&&gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName)&&(b=a.substring(gx.pO.PackageName.length+1));return b}},util:function(){var a=/^gx-image:\/\/(.*)/;return{executionContext:{getContext:function(){return gx.http.currentUrl()},changedContext:function(b){return b!==gx.util.executionContext.getContext()}},contentTypes:{txt:"text/plain",rtx:"text/richtext",
htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",
gz:"application/x-gzip"},compare:function(b,f,g){if(typeof b!=typeof g)return!1;if("string"==typeof b&&"like"==f)return f=g.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),f=gx.text.replaceAll(gx.text.replaceAll(f,"%",".*"),"_","."),(new RegExp(f,"i")).test(b);switch(f){case ">":return b>g;case ">=":return b>=g;case "<":return b<g;case "<=":return b<=g;case "<>":return b!=g;default:return b==g}},isKnownContentType:function(b){for(var f in this.contentTypes)if(this.contentTypes[f]==b)return!0;return!1},
getContentTypeFromExt:function(b){b=b.split(/[#?]/)[0].split(".").pop().trim();return this.getContentType(b)},getContentType:function(b){if(gx.lang.emptyObject(b))return"text/html";b=b.toLowerCase();b=gx.text.trim(b);if(this.isKnownContentType(b))return b;var f=b.lastIndexOf(".");-1!=f&&(b=b.substring(f+1));b=this.contentTypes[b];return gx.lang.emptyObject(b)?"text/html":b},getFileName:function(b){var f=b.lastIndexOf("/"),g=b.lastIndexOf("\\");f=f>g?f:g;g=b.lastIndexOf(".");if(!b)return b;if(0>g||
f>g)g=b.length;return b.substring(f+1,g)},getFileType:function(b){var f=b.lastIndexOf("/"),g=b.lastIndexOf("\\"),m=b.lastIndexOf(".");return 0>m||m<f||m<g?"":b.substring(m+1)},getWindowInfo:function(){var b="",f=!0,g=!1;try{if(g=window.location!=window.parent.location?!0:!1)try{f=window.frameElement.id||window.top.document.body,b=window.name}catch(m){f=!1}}catch(m){}return{insideIframe:g,canAccessFrame:f,frameId:b}},browser:function(){var b=navigator.userAgent,f=/; rv.([0-9]+)/,g,m;return{w3c:!0,
ie5:!0,ie:-1!=b.indexOf("MSIE")||-1!=b.indexOf("Trident"),edge:-1!=b.indexOf("Edge"),ff:-1!=b.indexOf("Firefox"),winCE:-1!=b.indexOf("Windows CE"),iphone:-1!=b.indexOf("iPhone"),ipad:-1!=b.indexOf("iPad"),ipod:-1!=b.indexOf("iPod"),blackBerry:-1!=b.indexOf("BlackBerry"),operaMini:-1!=b.indexOf("Opera Mini"),opera:-1!=b.indexOf("Opera"),chrome:-1!=b.indexOf("Chrome"),android:-1!=b.indexOf("Android"),webkit:-1!=b.search(/webkit/ig),safari:-1!=b.indexOf("Safari")&&-1===b.indexOf("Chrome"),get GX_TAB_ID_HEADER(){return"X-Gx-Tabid"},
get tabId(){if(!gx.util_storage||!gx.util_storage.isSupported())return"";m=gx.util_storage.get_string("Gx-Tabid");m||(m=gx.guid.generate(),gx.util_storage.set_string("Gx-Tabid",m));return m},isIEStrict:function(){return this.ie},isIE:function(){return this.ie||this.edge},isEdge:function(){return this.edge},isSafari:function(){return this.safari},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},
isIPad:function(){return this.ipad},isAndroid:function(){return this.android},isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()||this.isAndroid()},isCompatMode:function(){return"BackCompat"==document.compatMode},isOldIE:function(p){return gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=
(p||8)},ieVersion:function(){var p=function(){if(this.ie)try{var u=b.indexOf("MSIE");if(0<=u){var x=b.indexOf(";",u),w=b.substring(u+5,x);return parseFloat(w,10)}var A=b.match(f);if(1<A.length)return parseFloat(A[1],10)}catch(q){gx.dbg.logEx(q,"gxapi.js","ieVersion")}else if(this.edge&&(A=b.match(/ Edge\/([0-9]+)\./),1<A.length))return parseFloat(A[1],10);return-1};g||(g=p.call(this));return g},chromeVersion:function(){if(this.isChrome()){var p=b.match(/Chrome\/([0-9]+)/);if(1<p.length)return parseFloat(p[1],
10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&"undefined"!==typeof Range&&!Range.prototype.createContextualFragment&&(Range.prototype.createContextualFragment=function(p){var u=document.createDocumentFragment(),x=document.createElement("div");u.appendChild(x);x.outerHTML=p;return u});"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ie5=
this.ie&&document.getElementById&&document.all?!0:!1);this.setupIE()}}}(),addOnce:function(b,f,g){void 0==b[g]&&(b[g]=f)},inArray:function(b,f){if(null==b||!gx.lang.isArray(f))return!1;if("function"==typeof f.indexOf)return-1!=f.indexOf(b);for(var g=f.length,m=0;m<g;m++)if(f[m]==b)return!0;return!1},pushOnceSorted:function(b,f){for(var g=!0,m=0,p=f.length;m<p;m++){if(b==f[m]){g=!1;break}if(b<f[m]){f.splice(m,0,b);g=!1;break}}g&&f.push(b)},lastArray:function(b){return 0<b.length?b[b.length-1]:null},
noParmsUrl:function(b){var f=b.indexOf("?");-1!=f&&(b=b.substring(0,f));return b},resolveUrl:function(b){if(!b)return b;b=gx.util.imageUrl(b);return gx.isabsoluteurl(b)?b:gx.isRelativeToHost(b)?0!=b.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())?gx.util.resourceUrl(gx.basePath+b,!1):b:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b,!1)},imageName:function(b){return(b=a.exec(b))?b[1].replaceAll(".","_"):null},imageUrl:function(b){var f=a.exec(b);return f?gx.uc.getComputedImagePath(f[1].replaceAll(".",
"_")):b},resourceUrl:function(){var b;return function(f,g){b||(b=new RegExp(gx.basePath+"(/|$)","i"));if("undefined"==typeof f)return"";if(-1!=f.indexOf("://")||"."==f.charAt(0))return gx.text.startsWith(f,gx.basePath)?f.substring(gx.basePath.length):f;var m="/"!=gx.basePath.charAt(gx.basePath.length-1),p=""==gx.basePath?0:f.search(b);if(0==p&&!g)return("/"==f.charAt(0)?"":"/")+f;if(-1!=p||g){g=-1!=p&&0<gx.basePath.length?gx.text.replaceAll(f.substring(p+gx.basePath.length),"\\","/"):f;if("/"==f.charAt(0))return location.protocol+
"//"+location.host+f;f=0<gx.basePath.length&&"/"!=gx.basePath.charAt(0);m=m&&"/"!=g.charAt(0);return location.protocol+"//"+location.host+(f?"/":"")+gx.basePath+(m?"/":"")+g}return f}}(),sameAppUrl:function(b){b=new this.Url(b);return b.isRelative()?!0:b.isSameApp(location.href)},removeBaseUrl:function(b){var f="/"!=gx.staticDirectory.charAt(gx.staticDirectory.length-1),g=0<gx.basePath.length;var m="/"==gx.staticDirectory.charAt(0)?gx.staticDirectory.substring(1):gx.staticDirectory;m=(new RegExp("(?:/)?(?:"+
gx.basePath+(g?"/":"")+"(?:"+m+(f?"/":"")+")?)?((?:[\\S]*))")).exec(b);null!=m&&m[1]&&(b=m[1]);return b},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&6>=gx.util.browser.ieVersion()?"gx_blank.html":"about:blank"},Url:function(){var b=/^(([^:\/\?#]+):)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,f=/^(([^@]+)@)?([^:]+)(:(.+))?$/,g=function(m){this.url=m;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};
this.isSameApp=function(p){p=new gx.util.Url(p);return this.protocol==p.protocol&&this.host==p.host};(function(p,u){var x=b;x=x.exec(u);if(u=!gx.lang.emptyObject(x))if(p.protocol=x[2]?x[2]:"",u=x[4]?x[4]:"",p.path=x[5]?x[5]:"",p.query=x[7]?x[7]:"",p.hash=x[9]?x[9]:"",x=f,x=x.exec(u),u=!gx.lang.emptyObject(x))p.user=x[2]?x[2]:"",p.host=x[3]?x[3]:"",p.port=x[5]?x[5]:""})(this,m)};g.parseWithAnchor=function(m){var p=document.createElement("a");p.href=m;!p.protocol&&gx.util.browser.isIE()&&(p.href=p.href);
return p};return g}(),regExp:{isMatch:function(b,f){return null!==(new RegExp(f)).exec(b)},replace:function(b,f,g){return b.replace(f,g)},split:function(b,f){return b.split(f)},matches:function(b,f){b=(new RegExp(f)).exec(b);return null!==b?b:[]}},autoRefresh:{arTimer:null,getProps:function(){var b=gx.fn.getHidden("_GxRefreshTimeout");null!=b&&(b=gx.json.evalJSON(b),b.Time=parseInt(b.Time));return b},install:function(){var b=this.getProps();null!=b&&(this.create(),"focus"==b.Type&&gx.evt.attach(window,
"blur",this.destroy))},create:function(){if(null==this.arTimer){var b=this.getProps();null!=b&&(this.arTimer=setTimeout(function(){gx.http.reload()},1E3*b.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(b){var f="";if(-1!=b.indexOf("&"))for(var g=b.length,m=0;m<g-1;m++)if("&"==b[m]&&"&"!=b[m+1]){f+=b[m+1];break}return f},accessKeyCaption:function(b){var f="";if(-1==b.indexOf("&"))return b;
for(var g=b.length,m=0;m<g-1;m++)if("&"==b[m]&&"&"!=b[m+1]){f+=b.substring(m+1);break}else f+=b[m];return f},invalidFunc:function(b){throw"gxInvalidFunc: "+b;},urlValue:function(b){var f=b;"string"!=typeof f&&(f=gx.fn.getControlValueInt(b));return encodeURIComponent(f)},help:function(b){open(b,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},_init:function(){this.browser._init()}}}(),guid:{generate:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,
function(a){return(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)})}},lang:{inherits:function(a,b,f){var g=a.prototype;a.prototype=new b;for(var m in g)"undefined"==typeof a.prototype[m]&&(a.prototype[m]=g[m]);"undefined"==typeof a.prototype.base&&(a.prototype.base=b);!0===f&&(a.prototype.constructor=function(){b.prototype.constructor.apply(this,arguments);g.constructor.apply(this,arguments)})},apply:function(a,b){if(a&&b&&"object"===typeof b)for(var f in b)a[f]=b[f];return a},
isEmpty:function(a){return a instanceof gx.date.gxdate?0==(new gx.date.gxdate("")).compare(a):"number"==typeof a?0==a:"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal?gx.num.compare(a,0):""==a},isBigDecimal:function(a){return void 0!==gx.num.dec&&a instanceof gx.num.dec.bigDecimal},instanceOf:function(a,b){if(null==a||null==b)return!1;if(a instanceof b||b==String&&"string"==typeof a||b==Number&&("number"==typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||
b==Array&&gx.lang.isArray(a)||b==Function&&"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||gx.lang.isArray(a))return!1;for(a=a.base;"undefined"!=typeof a;){if(a==b)return!0;a=a.base}return!1},clone:function(a){var b={},f;for(f in a)b[f]=a[f];return b},cloneDeep:function(a){return"structuredClone"in globalThis?structuredClone(a):JSON.parse(JSON.stringify(a))},isDateType:function(a){return"date"==a||"dtime"==a},isNumericType:function(a){return"int"==a||"decimal"==a},isBooleanType:function(a){return"boolean"==
a||"bool"==a},isFixedCharacterType:function(a){return"char"==a||"bits"==a},isCharacterType:function(a){return"char"==a||"svchar"==a||"bits"==a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},booleanValue:function(a){return 1==a||0==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&(""==a||"false"==a.toLowerCase()||
"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},emptyNum:function(a){return a&&0===a||!a},emptyObj:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},emptyObject:function(a){return void 0===a||null==a||""==a||"number"==typeof a&&isNaN(a)?!0:!1},emptyforType:function(a,b){return b&&void 0==a?"int"===b?0:"char"===b?"":"date"===b||"dtime"===b?gx.date.nullDate():a:a},supEval:function(a,b){var f=null;f=b instanceof String||"string"==typeof b?a[b]:b;return function(){return f.apply(a,
arguments)}},getType:function(a){var b=null;try{for(var f=0,g=a.split("."),m=g.length;null===b&&f<m;)b=this.getTypeImpl(window,g,f++,m)}catch(p){gx.dbg.logEx(p,"gxapi.js","getType")}return b},getTypeImpl:function(a,b,f,g){for(var m=null;f<g;f++)if(a[b[f]])a=a[b[f]];else break;f===g&&a&&"function"===typeof a&&(m=a);return m},doEval:function(a,b){b=b||window;return b.execScript?b.execScript(a):eval.call?eval.call(b,a):eval(a)},doCall:function(){try{for(var a=arguments[0],b=[],f=arguments.length,g=1;g<
f;g++)b.push(arguments[g]);return a.apply(this,b)}catch(m){gx.dbg.logEx(m,"gxapi.js","doCall")}},doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,b,f,g){a=a.closure(b,f);g=setTimeout(a,g);return{f:a,t:g}},requestAnimationFrame:function(a,b){a=b?a.closure(b):a;window.requestAnimationFrame?window.requestAnimationFrame(a):window.setTimeout(a,10)},htmlDecode:function(){var a=document.createElement("div");return function(b){b&&"string"===typeof b&&(b=escape(b).replace(/%26/g,
"&").replace(/%23/g,"#").replace(/%3B/g,";"),a.innerHTML=b,b=l(a).text(),l(a).text(""));return unescape(b)}}(),arrayUnique:function(a,b){a=a.concat();for(var f=0;f<a.length;++f)for(var g=f+1;g<a.length;++g)(b&&b(a[f],a[g])||a[f]===a[g])&&a.splice(g--,1);return a},objToArray:function(){var a=function(b){return[b]};return function(b){return l.map(b,a)}}()},cache:function(){var a=!1;return{exceptionsRegEx:!1,remoteFiles:{},inlineCode:{},isCacheable:function(b){return this.exceptionsRegEx?!!b&&-1==b.search(this.exceptionsRegEx):
!0},addRemoteFile:function(b){this.isCacheable(b)&&(b=gx.util.noParmsUrl(b),b=gx.util.resourceUrl(b,!0),this.remoteFiles[b]=!0)},addLoadedFile:function(b){this.isCacheable(b)&&(b=gx.util.noParmsUrl(b),b=gx.util.resourceUrl(b,!0),this.remoteFiles[b]=!0)},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFiles:function(b){var f;if(b)for(f in this.remoteFiles)b.exec(f)&&(this.remoteFiles[f]=!1)},removeRemoteFile:function(b){b=gx.util.noParmsUrl(b);b=gx.util.resourceUrl(b,!0);this.remoteFiles[b]=
!1},fileLoaded:function(b){b=gx.util.noParmsUrl(b);b=gx.util.resourceUrl(b,!0);return this.remoteFiles[b]?!0:!1},updateStyles:function(b,f){for(var g=[],m=b.length,p=0;p<m;p++){var u=b[p];if(!gx.lang.emptyObject(u)){for(var x=!1,w=f.length,A=0;A<w;A++)if(u==f[A]){x=!0;break}x||g.push(u)}}b=gx.staticDirectory;"/"==b.charAt(0)&&(b=b.substring(1));m=g.length;for(f=0;f<m;f++)p=g[f],"/"!=p.charAt(0)&&(p=b+p),this.removeRemoteFile(p)},addInlineCode:function(b){this.inlineCode[b]=!0},deleteInlineCode:function(b){delete this.inlineCode[b]},
codeLoaded:function(b){return this.inlineCode[b]?!0:!1},_init:function(){if(!a){a=!0;var b=gx.staticDirectory;"/"==b.charAt(0)&&(b=b.substring(1));for(var f=gx.dom.scripts(!0),g=f.length,m=0;m<g;m++){var p=f[m];gx.lang.emptyObject(p)||("/"==p.charAt(0)||gx.isabsoluteurl(p)||(p=b+p),this.addRemoteFile(p))}f=gx.dom.styles();g=f.length;for(m=0;m<g;m++)p=f[m],gx.lang.emptyObject(p)||("/"==p.charAt(0)||gx.isabsoluteurl(p)||(p=b+p),this.addRemoteFile(p))}}}}(),json:{_nonSerializables:[],setNonSerializable:function(a){this.isNonSerializable(a)||
this._nonSerializables.push(a)},isNonSerializable:function(a){for(var b=this._nonSerializables.length,f=0;f<b;f++)if(this._nonSerializables[f]==a)return!0;return!1},evalJSON:function(a,b){try{return window.JSON&&!b?void 0===a?a:JSON.parse(a):eval("("+a+")")}catch(f){gx.dbg.logEx(f,"gxapi.js","evalJSON")}return a},evalValidJSON:function(a){return eval("("+a+")")},serializeSDTJson:function(a,b,f){a=gx.lang.cloneDeep(a);a=gx.O.applySDTMapping(a,b,!1);return gx.json.serializeJson(a,f,function(g){return g instanceof
gx.date.gxdate?(g.TimeFmt=24,'"'+(g.getStringWithFmt("Y4MD").replaceAll("/","-")+"T"+(g.HasTimePart?g.getTimeString(!0,!0,!0,0<g.Value.getMilliseconds()):"00:00:00"))+'"'):null})},serializeJson:function(a,b,f){if(b&&window.JSON)return JSON.stringify(a);var g=this.objToJson(a);if(null===g)g=this.arrayToJson(a);else return g;if(null===g){if("function"==typeof a)return null;g=[];for(var m in a)if(b||!this.isNonSerializable(m)){var p=this.objToJson(m,!0);if(null!==p){var u=this.serializeJson(a[m]);f&&
(u=f(a[m])||u);"string"==typeof u&&g.push(p+":"+u)}}return"{"+g.join(",")+"}"}return g},objToJson:function(a,b){var f=typeof a;if(b){if(!gx.lang.emptyObject(a)){if("string"==f)return gx.text.escapeString(a);if("number"==f)return'"'+a+'"';if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return'"'+a.toString()+'"'}}else{if("undefined"==f)return"null";if("string"==f)return gx.text.escapeString(a);if("number"==f||"boolean"==f)return a.toString();if("undefined"!=typeof gx.num.dec&&
a instanceof gx.num.dec.bigDecimal)return'"'+a.toString()+'"';if(null===a)return"null";if("function"==typeof a.json&&(b=a.json(),a!==b))return this.serializeJson(b)}return null},arrayToJson:function(a){if(Array.isArray(a)){for(var b=[],f=a.length,g=0;g<f;g++){var m=this.serializeJson(a[g]);"string"!=typeof m&&(m="undefined");b.push(m)}return"["+b.join(",")+"]"}return null},SDTFromJson:function(a,b,f,g){(f=gx.json.objFromJson(a,f,g))&&gx.O.applySDTMapping(a,b,!0);return f},objFromJson:function(a,b,
f){try{var g=this.evalValidJSON(b);if(Array.isArray(a)&&Array.isArray(g))for(;a.length>g.length;)a.shift();else for(var m in a)"function"!=typeof a[m]&&delete a[m];for(var p in g)a[p]=g[p];return!0}catch(u){return gx.dbg.logEx(u,"gxapi.js","objFromJson"),f&&f.push({Id:"FromJson Error",Description:gx.dbg.exTxt(u),Type:0}),!1}}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()}},
stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},csv:{},http:{currentUrl:function(){return""+location.origin+location.pathname},loadScript:function(a,b,f){var g=b,m=!1,p;if("string"!==typeof a){var u=a.callback;m=a.isExternal;var x=a.attris;a=a.url;g=function(){u&&u();b()}}var w=gx.dom.byTag("head")[0],A=l("script[src='"+a+"']"),q=!0;if(0<A.length&&!f)if(m)A.remove();
else{var v=A.get(0);q=!1}f=function(t){var B=function(){t();v.removeAttribute("data-gx-loading-script")};"function"==typeof t&&(v.addEventListener?gx.evt.attach(v,["load","error"],B,{userCapture:!1}):v.onreadystatechange=function(){"loaded"!=v.readyState&&"complete"!=v.readyState||B()})};if(v)null!==v.getAttribute("data-gx-loading-script")?f(g):g();else{v=document.createElement("script");v.type="text/javascript";v.src=a;if(x)for(p in x)x.hasOwnProperty(p)&&v.setAttribute(p,x[p]);g&&v.setAttribute("async",
"");m&&v.setAttribute("data-gx-external-script","");f(g);q&&(w.appendChild(v),v.setAttribute("data-gx-loading-script",""))}}},storage:function(a){this._prefix=a;this.supported=!1;this.isSupported=function(){return this.supported};this.set_string=function(b,f){this.supported&&(this._store[this._prefix+b]=f)};this.get_string=function(b){return this.supported?this._store[this._prefix+b]:null};this.set=function(b,f){this.set_string(b,gx.json.serializeJson(f))};this.get=function(b){return(b=this.get_string(b))?
gx.json.evalJSON(b):null};this.remove=function(b){this.supported&&this._store.removeItem(this._prefix+b)};try{if("undefined"!=typeof window.sessionStorage)try{this._store=window.sessionStorage,window.sessionStorage.setItem("storage.test",!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(b){gx.http.setCookie("GXLocalStorageSupport","false",1,!1)}}catch(b){gx.dbg.logEx(b,"gxapi.js","storage")}},_setBasePath:function(){for(var a=gx.dom.scripts(),b=null,f=0,g=a.length;f<g;f++)if(0<=
a[f].indexOf("gxgral.js")||0<=a[f].indexOf("gxcore.js")||0<=a[f].indexOf("gxapiSD.js")){b=a[f];break}a=f="";if(!gx.isRelativeToHost(b)||gx.isabsoluteurl(b))f=location.pathname.lastIndexOf("/"),f=1<f?location.pathname.substring(1,f):"";else{b=b.split("/");g=location.pathname.split("/");b.splice(b.length-1,1);g.splice(g.length-1,1);for(var m=0,p=g.length;m<p;m++)if(g[m]==b[m])f=f+(""==f?"":"/")+g[m];else if(gx.gen.isJava()&&"servlet"==g[m])a=g[m];else break}gx.basePath=f;gx.servletBasePath=a},objectLoad:function(a,
b){var f=l.Deferred();if(!gx.evt.execLoad)return f.resolve(),f.promise();var g=function(){gx.sec.loadKey();void 0===gx.runtimeTemplates&&(gx.runtimeTemplates=0<l("div[data-abstract-form]").length);var m=!0;gx.setTheme();gx.html.applyCustomHTMLAttributes();gx.fx.obs.addObserver("webcom.render",this,function(p){if(p=p.getContainer()){gx.setTheme(p);gx.html.applyCustomHTMLAttributes(p);var u=function(){"undefined"!=typeof gx.pendingCmps&&(--gx.pendingCmps,0===gx.pendingCmps&&gx.fx.obs.notify("webcom.all_rendered"))};
m||(gx.pendingCmps=gx.pendingCmps||0,gx.pendingCmps+=1,gx.plugdesign.applyTemplateObject({selector:"#"+p.id,observerKey:p.id,deferred:!0}).then(u))}});gx.fx.obs.addObserver("grid.onafterrender",this,function(p,u){u||gx.dom.fixes.fixTableResets(p.container)});delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"pagehide",gx.evt.onunload);gx.fn.setFocusInit();gx.dom.fixes.createLegacyNotification();gx.cache._init();gx.fn.installComponents(!0,b);gx.http.loadStyles();a&&gx.fn.loadJsonGrids(a,
!1);gx.plugdesign.init().done(function(){if("undefined"!=typeof gx.StorageTimeZone&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var p=jstz.determine().name();!gx.lang.emptyObject(p)&&gx.http.getCookie("GxTZOffset")!=p&&gx.http.setCookie("GxTZOffset",p,365,!1,"/")&&gx.config.timezone.reload&&gx.http.reload()}gx.evt.attach(window,"load",gx.http.applyDeferredStyles);gx.fn.objectOnload();gx.goReady(function(){gx.evt.setReady(!0,"goReady")});document.gxReadyState="complete";gx.util.autoRefresh.install();
1!=gx.applyingStyles&&gx.lang.requestAnimationFrame(function(){gx.fn.setOpacity("reset","body")});gx.fx.obs.notify("gx.onload");l(document).ready(function(u){gx.dom.indexElements()});gx.evt.userOnload();gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();m=!1;f.resolve()})};gx.popup?gx.goInteractive():gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"gxi.js",!1),function(){gx.goInteractive()});gx.wpo(function(){g()});return f.promise()},objectUnload:function(a){gx.fx.obs.notify("gx.onunload");
gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.notifications.deinit();gx.fx.obs.removeAll();gx.util.autoRefresh.destroy();gx.fn.objectOnUnload(a);gx.plugdesign.deinit();gx._deinit();l(document).off("keypress keyup input");gx.evt.detach(document,"keydown",gx.evt.onkeypress_hdlr);gx.fn.clearPromptlisteners();gx.evt.userReadyCnt=0},_init_interactive:function(){gx.evt.dispatcher.initialize();gx.base64._init();gx.sec._init();gx.geolocation._init();gx.popup._init();gx.livePrevWS._init()},_init:function(){gx.wi(gx._init_interactive,
gx);gx.lang.apply(this,{oldValues:[],oldKeyValues:[],newRows:[],suggestControls:{},disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],theme:""});gx.dbg._init();gx.dom._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.call_stack_storage=new gx.storage("gx_call_stack");gx.util_storage=new gx.storage("gx_util_storage")},_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);
gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus","onchange"],b=gx.fn.getFormElements(),f=0,g=b.length;f<g;f++)gx.dom.purgeElement(b[f],a);b=gx.dom.byTag("span");f=0;for(g=b.length;f<g;f++)gx.dom.purgeElement(b[f],a);b=gx.dom.byTag("img");f=0;for(g=b.length;f<g;f++)gx.dom.purgeElement(b[f],a)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.printing._deinit();gx.core.audio._deinit();gx.O=null;gx.pO=null},reinit:function(a){gx.pO.clean(a);gx.objectUnload(a);
gx._init()}}}(jQuery);gx.$.extend(gx.dbg,gxdbg);Object.defineProperty(gx.evt,"userReady",{get:function(){return gx._isReadyUI()}});
gx.plugdesign=function(l){var c={},d=!1,k,a,b=1,f={},g={},m=function(u,x){return function(w){var A=u[w.property],q;A&&(q=A[w.control.id]);!q&&A&&(q=A[w.control.name]);q&&(A=!0===q.fn.call(q.template,w.control,w.value),x&&(w.cancel=A))}},p=function(u,x){x=x||{};!0===x.deferred&&window.requestIdleCallback?window.requestIdleCallback(u):gx.lang.requestAnimationFrame(u)};return{init:function(){gx.plugdesign.initialized=!0;gx.fx.obs.addObserver("gx.plugdesign.onafterapplytemplate",this,gx.plugdesign.fixBootstrapGridLayout.closure(this));
gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);return gx.plugdesign.applyTemplateObject()},deinit:function(){gx.fx.obs.deleteObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.deleteObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);gx.plugdesign.initialized=!1;delete gx.runtimeTemplates},
onBeforePropertyChange:m(f,!0),onAfterPropertyChange:m(g,!1),registerTemplate:function(u){c[u.name]=u},unRegisterTemplate:function(u){delete c[u];gx.plugdesign.definition.templates=l.grep(gx.plugdesign.definition.templates,function(x){return x!==u})},getDOMContext:function(u,x,w,A,q,v){var t;x={};v&&(x.text=l(u).text());v=0;for(t=u.attributes.length;v<t;v++){var B=u.attributes[v];x[B.name]=B.value}x.el=u;w&&(x.outerHTML=u.outerHTML);A&&(x.innerHTML=u.innerHTML);q&&(x=q.call(this,x,u)||x);return x},
assingUserAPI:function(u,x){x.fnc_isRO=u.fnc_isRO},getElements:function(u,x,w,A){u="function"==typeof u.selector?u.selector(x?x:""):x&&!u.global?l(x).find(u.selector):l(u.selector);return w?u.not(w):u},shouldApplyOnElement:function(u,x){return"function"==typeof x.selector?this.getElements(x).is(u):l(u).is(x.selector)},applyTemplateOnElement:function(u,x,w){w=w||{};var A=l.Deferred();p(function(){if("string"==typeof u&&(u=c[u],!u)){A.resolve();return}if(!x.parentNode)return A.resolve(),!1;if(!0!==
w.checkInclusion||this.shouldApplyOnElement(x,u)){var q=gx.plugdesign.getDOMContext(x,q,u.outerHTML,u.innerHTML,u.setContext);u.apply(x,q);u.initialize&&u.initialize(q);if(u.listeners){var v=u.listeners,t;q="function"==typeof v.control?v.control(q):v.control;if(v.before)for(t in v.before)v.before.hasOwnProperty(t)&&(f[t]||(f[t]={}),f[t][q]={id:q,fn:v.before[t],template:u});if(v.after)for(t in v.after)v.after.hasOwnProperty(t)&&(g[t]||(g[t]={}),g[t][q]={id:q,fn:v.after[t],template:u})}}A.resolve()}.closure(this),
w);return A},applyTemplateSelection:function(u,x,w,A){A=A||{};var q=l.Deferred(),v=[],t="data-gx-tpl-applied-"+u.name,B=this.getElements(u,x,w,A);!0===u.onDemandInvoke||u.reDraw||(B=B.not("["+t+"]"));B.each(function(G,J){if(J)if("function"==typeof u.reDraw&&null!==J.getAttribute(t)){var n=gx.plugdesign.getDOMContext(J,n,!1,!1,u.setContext);u.reDraw(n)}else v.push(gx.plugdesign.applyTemplateOnElement(u,J,A))});l.when.apply(l,v).done(function(){u.outerHTML&&(B=this.getElements(u,x,w,A));B.attr(t,"");
q.resolve()}.closure(this));return q},applyClassMapOnElement:function(u,x){var w,A;u.initialize&&(w=gx.plugdesign.getDOMContext(x,w,!1,!1,u.setContext));if(Array.isArray(u.cssClass)){var q=0;for(A=u.cssClass.length;q<A;q++)gx.dom.addClass(x,u.cssClass[q])}else gx.dom.addClass(x,u.cssClass);u.initialize&&u.initialize(w)},applyClassSelection:function(u,x,w,A){var q=function(v){"Class"==v.property&&gx.dom.matchesSelector(v.control,u.selector)&&gx.plugdesign.applyClassMapOnElement(u,v.control)};this.getElements(u,
x,w,A).each(function(v,t){t&&(gx.plugdesign.applyClassMapOnElement(u,t),gx.plugdesign.assingUserAPI(u,t),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,q,{unique:!1,observerKey:A.observerKey}))})},controlValueChanged:function(u,x){u&&gx.lang.requestAnimationFrame(function(){gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:u,property:"Value",value:x}])})},applyControlValue:function(u,x){gx.fn.setControlValue(u.id,x);gx.html.onchange(u,x)},applyTemplates:function(u,x,w,A,
q){q=q||{};var v=l.Deferred();if(0===u.length)return v.resolve();u=l.map(u,function(t){var B=l.Deferred();"string"==typeof t?t=c[t]:(t.name=t.name||"auto-generated-"+b++,t=new gx.plugdesign.Template(t));if(!A||"function"==typeof A&&A(t)){var G=function(){gx.plugdesign.applyTemplateSelection(t,x,w,q).done(function(){B.resolve()})};!0===q.deferred?p(G):(G(),B.resolve())}else B.resolve();return B});!0===q.deferred?l.when.apply(l,u).done(function(){v.resolve()}):v.resolve();return v},applyClassMaps:function(u,
x,w,A,q){var v=l.Deferred(),t=function(G,J){gx.plugdesign.applyClassSelection(J,x,w,q)},B=function(){u=l.grep(u,A||gx.trueFn);l.each(u,t);v.resolve()};!0===q.deferred?p(B):B();return v},applyTemplateObject:function(u){u=u||{};var x=u.selector,w=u.excluded,A=u.templateSelector,q=u.classMapSelector,v=l.Deferred(),t=l.Deferred();A=A||function(y){return!0!==y.onDemandInvoke};if(!gx.runtimeTemplates||!gx.plugdesign.initialized)return v.resolve().promise();if(d){var B=this.applyTemplates(k,x,w,A,u);var G=
this.applyClassMaps(a,x,w,q,u);v.resolve()}else{var J=gx.plugdesign.definition;J.css&&l.each(J.css,function(y,C){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+C+"?"+gx.gxBuild,!1),!1,!0)});var n=[];J.js&&l.each(J.js,function(y,C){n.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+C+"?"+gx.gxBuild,!1))});var r=jQuery;jQuery=gx.$;gx.http.loadScripts(n,function(){d=!0;k=J.templates||[];a=J.class_maps||[];B=this.applyTemplates(k,x,w,A,u);G=this.applyClassMaps(a,x,w,void 0,
u);jQuery=r;v.resolve()}.closure(this))}l.when.apply(l,[v,B,G]).done(function(){gx.fx.obs.notify("gx.plugdesign.onafterapplytemplate",[u]);t.resolve()});return t.promise()},fixBootstrapGridLayout:function(){0===l(".container-fluid, .container").length&&l(".row").first().parent().toggleClass("container-fluid",!0)},Template:function(){var u=function(x){var w,A=[];x=x||{};if(x.name){if(x.selector){if(x.listeners){var q=x.listeners;if(!q.control&&(q.before||q.after)){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",
!0);return}}this.preProcessTemplate=function(){var v=this.template,t=/\{\{\$(\w+)\$\}\}/g,B,G=0;for(A=[];null!==(B=t.exec(v));)A[G]=B[1],v=v.replace(B[0],'<span id="hook_'+G+'"></span>'),G++;return v};this.postProcessTemplate=function(v){var t;if(A){var B=0;for(t=A.length;B<t;B++){var G=v[A[B]];var J=l("#hook_"+B);G&&J.after(G);J.remove()}}};this.apply=function(v,t){var B=gx.util.browser.isIE(),G=!1;!w&&this.template&&(w=this.preProcessTemplate(),Mustache.parse(w));if(w){var J=Mustache.render(w,t);
if("inner"==this.applyTo){if(B)for(;v.firstChild;)v.removeChild(v.firstChild);v.innerHTML=J}else G=v===document.activeElement,v.parentNode&&!B?v.outerHTML=J:l(v).replaceWith(J);this.postProcessTemplate(t);G&&gx.fn.setFocus(v)}};gx.lang.apply(this,x);return this}gx.dbg.write("A selector must be specified",!0)}else gx.dbg.write("A name must be specified",!0)};u.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,onDemandInvoke:!1,setContext:gx.emptyFn,initialize:gx.emptyFn,
listeners:{}};return u}()}}(gx.$);
gx.plugdesign.definition={css:[],js:[],templates:"labels atts-vars readonly-atts-vars checkbox radio-button prompt prompt-trigger datepicker geolocation multimedia-upload navbar navbar-textblock-link navbar-textblock-text textarea-auto-expand image usercontrol errorviewer password-atts-vars".split(" "),class_maps:[{selector:".control-group",cssClass:"form-group"},{selector:'.gx-attribute > input:not(.GeoLocOption):not([type="image"]):not([type="checkbox"]), .gx-attribute > select, .gx-attribute > textarea,.gx-attribute > .input-group > input, .gx-attribute > .input-group > select, .gx-attribute > .input-group > textarea, .gx-attribute > .dp_container input',cssClass:"form-control"},
{selector:"form",cssClass:"form-horizontal"},{selector:"div.gx-standard-grid > table",cssClass:"table-responsive",global:!0,first:!0},{selector:'.gx-button input, input[type="button"][data-gx-button], .gx-grid-paging-bar button',cssClass:["btn","btn-default"],first:!0},{selector:'.gx-navbar .gx-button input, .gx-navbar input[type="button"]',cssClass:"navbar-btn"},{selector:".BtnEnter",cssClass:"btn-primary",first:!0},{selector:".BtnDelete",cssClass:"btn-danger",first:!0},{selector:".Container",cssClass:"container",
first:!0},{selector:"#MAINTABLE_MPAGE.PromptMainTable:not(.ContainerFluid)",cssClass:"ContainerFluid"},{selector:".ContainerFluid",cssClass:"container-fluid",first:!0},{selector:".ReadonlyResponsiveImageAttribute, .ResponsiveImage",cssClass:"img-responsive",first:!0},{selector:".BtnTextBlock > a",cssClass:["btn","btn-default"],first:!0}]};
gx.html=function(l){var c=/<style[^>]*>([\s\S]*?)<\/style>/i,d=/<style[^>]*>([\s\S]*?)<\/style>/ig,k=/<style[^>]*data-gx-href="(.*)"\s*>\s*@import\s*url\("(.*)"\)\s*layer\((.*)\).*/i,a=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,b=/<link ([^>]*rel=['"]?shortcut icon['"]?[^>]*)>/i,f=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/ig,g=/<script[^>]*>[\s\S]*?(<script[^>]*>[\s\S]*?<.?\/script>)/i,m=/(<script[^>]*>\s*)\r?\n?\x3c!--\s*\r?\n?(.*)\r?\n?\s*\/\/--\x3e\s*\r?\n?(<.?\/script>)/ig,p=/<script([^>]*)>([\s\S]*?)<\/script>/i,
u=/data-gx-external-script/,x=/href=(['"]?)([^'">]*)\1/i,w=/id=(['"]?)([^'">]*)\1/i,A=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i,q=/src=(['"]?)([^"']*)\1/i,v=/<div><input type="hidden" name="GXState" value="{.*}"><\/div>/g;return{STYLE_ELEMENT_HREF:"data-gx-href",encodeCaseFormat:function(t,B,G){B==gx.html.controls.formats.TEXT?t=gx.html.encode(t,!1,G):B==gx.html.controls.formats.TEXT_W_SPACES&&(t=gx.html.encode(t,!0,G));return t},setGXImageCSSClass:function(t,B){var G=t.jquery?t:l(t),J=G.attr("data-gx-image-class");
t=l(t)[0];J&&G.removeClass(J);t.classList&&[].concat($jscomp.arrayFromIterable(t.classList)).forEach(function(n){n.startsWith("GX_Image_")&&t.classList.remove(n)});G.addClass(B);G.attr("data-gx-image-class",B)},applyCustomHTMLAttributes:function(t){t=t?l(t):l(document);t.find("input[data-msk-att], textarea[data-msk-att]").each(function(B,G){B=l(G);G=B.attr("data-msk-att");B.attr(G,B.attr("data-"+G))});t.find("img[data-gx-image-uri]").each(function(B,G){B=l(G);G=B.attr("data-gx-image-uri");(G=gx.util.imageName(G))&&
gx.html.setGXImageCSSClass(B,"GX_Image_"+G+"_Class")})},encode:function(t,B,G){var J=["<",">","&"],n=["&lt;","&gt;","&amp;"];B&&(J.push(" "),n.push("&nbsp;"));G&&(J.push("\n"),n.push("<br/>"),J.push("\r"),n.push(""));return gx.text.charReplace(t,J,n)},getHidden:function(t,B){return'<input type="hidden" id="'+t+'" name="'+t+'" value="'+B+'">'},viewportWidth:function(){var t=document.documentElement;return t&&t.clientHeight?Math.max(t.clientWidth,document.body.clientWidth):document.body.clientWidth},
viewportHeight:function(){var t=document.documentElement;return t&&t.clientHeight?Math.max(t.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(t,B){(void 0===B||B)&&(t=t.replace(d,""));t=t.replace(f,"");for(B=[];B;)if(B=t.match(p)){var G=this.nestedScripts(B,t);0<G&&(B=new RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+G+"}"),"i"),B=t.match(B));(G=B.lastIndex)||(G=B.index+B[0].length);
t=t.substring(0,B.index)+t.substring(G)}else break;return t},setOuterHtml:function(t,B){t.outerHTML=B},setInnerHtml:function(t,B,G,J,n){var r=gx.dom.styles(),y=gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME;gx.dom.shouldPurge()&&gx.dom.purge(t,!0);var C=l(t).children("."+y).get(0);!C&&J&&(C=document.createElement("div"),gx.dom.addClass(C,y),gx.dom.addClass(C,"Form-fx"),t.appendChild(C));J&&!gx.O.DSO&&gx.pO.fullAjax&&C&&gx.dom.hasClass(C,y)&&!gx.dom.hasClass(t,"transitioning")?(t=document.createElement("div"),
t.innerHTML=this.cleanHtmlRefs(B,n),gx.dom.replaceWithFx(C,t.children[0])):l(t).html(this.cleanHtmlRefs(B,n));gx.util.browser.isIE()&&gx.cache.updateStyles(r,gx.dom.styles());1==G&&this.processCode(B,!1)},setInnerText:function(t,B,G,J){var n=l(t);null!=t.nodeValue?t.nodeValue=B:gx.util.browser.isChrome()||null==t.innerText?gx.util.browser.isFirefox()||gx.util.browser.isChrome()?n.html(gx.html.encodeCaseFormat(B,G,J)):"TEXT"==t.tagName&&null!=t.innerHTML?n.html(B):n.html("<text>"+B+"</text>"):t.innerText=
B},nodesFromText:function(t){var B=document.createElement("div");B.style.visibility="hidden";B.style.display="none";document.body.appendChild(B);gx.dom.shouldPurge()&&gx.dom.purge(B,!0);B.innerHTML=t;t=[];for(var G=B.childNodes.length,J=0;J<G;J++)t.push(B.childNodes[J].cloneNode(!0));gx.dom.removeControlSafe(B);return t},onTypeAvailable:function(t,B,G,J){try{var n=500,r=gx.gen.resolveObjClass(t);try{var y=window.eval(r)}catch(C){}(y=y||eval(r))?G instanceof Array?B.apply(this,G):B():J<n&&setTimeout(function(){gx.html.onTypeAvailable(t,
B,G,J+1)},0)}catch(C){J<n&&setTimeout(function(){gx.html.onTypeAvailable(t,B,G,J+1)},150)}},processCSS:function(t){if(""!=t){var B=document.createElement("style");B.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(B);B.styleSheet?B.styleSheet.cssText=t:(t=document.createTextNode(t),B.appendChild(t))}},nestedScripts:function(t,B){t=t[0].match(g);for(var G=0;t;)B=B.replace(t[1],""),G++,t=(t=B.match(p))?t[0].match(g):null;return G},processCode:function(t,B,G,J,n,r,
y){var C=t,D=[],F=!1,H=[],L=[],N=[],O="",Q=[];O=[];if(""!=t){if(void 0===r||r)for(;O;){if(O=t.match(c))(r=O.lastIndex)||(r=O.index+O[0].length),t=t.substring(r);else break;N.push(O[1])}t=C;for(O=[];O;){if(O=t.match(k))(r=O.lastIndex)||(r=O.index+O[0].length),t=t.substring(r);else break;r=O[3];var W=O[2];var V=O[1];r&&!gx.cache.fileLoaded(W)&&(gx.http.loadStyle(W,gx.emptyFn,!0,V,r),gx.cache.addRemoteFile(W))}t=C;for(O=[];O;){if(O=t.match(a))(r=O.lastIndex)||(r=O.index+O[0].length),t=t.substring(r);
else break;r=O[1].match(x);V=O[1].match(w);r&&!gx.cache.fileLoaded(r[2])&&(L.push({href:r[2],id:V&&2<V.length?V[2]:null}),gx.cache.addRemoteFile(r[2]))}t=C;for(O=[];O;){if(O=t.match(b))(r=O.lastIndex)||(r=O.index+O[0].length),t=t.substring(r);else break;l("head link[rel='shortcut icon'").remove();l(document.head).append(O[0])}t=C.replace(v,"");t=C;gx.util.browser.isIE()&&(t=t.replace(m,"$1$2$3"));for(O=[];O;){if(O=t.match(p))C=this.nestedScripts(O,t),0<C&&(O=new RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}",
"{"+C+"}"),"i"),O=t.match(O)),(r=O.lastIndex)||(r=O.index+O[0].length),t=t.substring(r);else break;void 0!=O[1]&&""!=O[1]?(r=O[1].match(A),C=!!O[1].match(u),null==r&&(r=O[1].match(q)),r&&!gx.cache.fileLoaded(r[2])?(W=r[2],gx.lang.emptyObject(r[3])||(W+="?"+r[3]),D.push({url:W,isExternal:C,callback:C?void 0:function(ca,fa){return function(){gx.cache.addRemoteFile(ca)}}(r[2],C)})):r&&gx.cache.fileLoaded(r[2])?F=!0:!r&&O[2]&&H.push(O[2])):O[2]&&H.push(O[2])}if(1!=B){O=H.join(";");""!=O&&gx.lang.doEval(O);
if("function"==typeof G)gx.http.loadScripts(D,function(ca,fa){fa instanceof Array?ca.apply(this,fa):ca()}.closure(this,[G,J]),void 0,y);else{B={method:"GET",useCash:!0};B.load=function(ca,fa){gx.lang.supEval(this,Q.push(fa))}.closure(this);B.mimetype="text/plain";B.sync=!0;var Z=D.length;for(t=0;t<Z;t++)B.url=D[t].url,gx.http.doCall(B)}gx.fn.setOpacity(0,document.body);O=Q.join("");""!=O&&gx.lang.doEval(O);D=document.getElementsByTagName("style");B=L.length;var ba=0;for(t=0;t<B;t++){y=!1;H=D.length;
for(O=0;O<H;O++)D[t]&&L[t].href==(D[O].styleSheet&&D[O].styleSheet.cssText?D[O].styleSheet.cssText:D[O].innerHTML)&&(y=!0);y||((y=gx.dom.byId(L[t].id))?(H=document.createElement("link"),ba++,1===ba&&(gx.fn.setOpacity(0,document.body),gx.applyingStyles=!0),H.id=y.id,H.rel=y.rel,H.type=y.type,H.onload=function(ca){ba--;0===ba&&gx.lang.requestAnimationFrame(function(){gx.fn.setOpacity("reset",document.body);gx.applyingStyles=!1})},H.href=L[t].href,y.parentElement.replaceChild(H,y)):gx.http.loadStyle(L[t].href,
gx.emptyFn,!1,L[t].id))}gx.lang.doCallTimeout(function(){0<ba&&(gx.fn.setOpacity("reset",document.body),gx.applyingStyles=!1)},this,[],gx.html.MAX_STYLE_LOAD_DELAY);O=N.join("");gx.html.processCSS(O);gx.applyingStyles||gx.fn.setOpacity("reset",document.body);if(0==Z&&"function"==typeof G)if(F&&n)gx.html.onTypeAvailable(n,G,J,0);else J instanceof Array?G.apply(this,J):G()}}},getFieldLabel:function(t,B){var G=t.id,J=t.previousSibling;if(!J||"LABEL"!==J.tagName||J.htmlFor!==G){if("INPUT"==t.tagName||
"SELECT"==t.tagName||"TEXTAREA"==t.tagName)var n=t.id;else"SPAN"==t.tagName?(n=l(t).attr("data-gx-enabled-id"))||0!==G.indexOf("span_")||(n=G.substring(5)):gx.dom.hasClass(t,gx.uc.gxCssClass)&&(n=gx.uc.CtrlId(t.id));gx.dom.hasClass(t,gx.html.multimediaUpload.gxCssClass)&&(n=gx.html.multimediaUpload.CtrlId(t.id));if(n)return l("label[for='"+n+"']",B).get(0)}},multimediaUpload:{gxPreviewHTMLAtt:"data-gx-preview-image",gxCssClass:"gx-multimedia-upload",setPreviewAtt:function(t,B){(t="object"===typeof t?
t:gx.dom.el(t))&&t.setAttribute(gx.html.multimediaUpload.gxPreviewHTMLAtt,B)},getPreviewAtt:function(t){return(t="object"===typeof t?t:gx.dom.el(t))?t.getAttribute(gx.html.multimediaUpload.gxPreviewHTMLAtt):""},getInputFileEl:function(t){return l("#"+t+"[type='file']")[0]},CtrlId:function(t){return t.replace(/_ct$/,"")},resolveFileName:function(t,B){return t||B||""},onOptionChange:function(t){t=this.getElements(t);var B=t.fileField,G=t.uriField;t.uriOption.checked?(gx.dom.removeClass(B,"field-selected"),
gx.dom.addClass(G,"field-selected")):(gx.dom.removeClass(G,"field-selected"),gx.dom.addClass(B,"field-selected"))},imageLoadHandler:function(t,B){var G=function(n){var r="IMG"==n.tagName?"src":"href";return!n[r]||n[r]==document.location.href||"/"==n[r].charAt(n[r].length-1)};gx.dom.removeClass(B,"gx-multimedia-unknown");gx.dom.removeClass(B,"gx-multimedia-download");!t||G(t)?gx.dom.addClass(B,"gx-multimedia-empty"):gx.dom.removeClass(B,"gx-multimedia-empty");G(t)&&B&&!G(B)&&(gx.dom.removeClass(B,
"gx-multimedia-empty"),("IMG"!==t.tagName||G(t))&&gx.dom.addClass(B,"gx-multimedia-download"));if(gx.util.browser.isIE()&&t&&"IMG"==t.tagName){B=l(t);G=parseInt(B.css("maxWidth"));var J=parseInt(B.css("maxHeight"));G<t.width&&(B.css("height",gx.dom.addUnits(G*t.height/t.width)),B.css("width",gx.dom.addUnits(G)));J<t.height&&(B.css("width",gx.dom.addUnits(J*t.width/t.height)),B.css("height",gx.dom.addUnits(J)))}},dialogCloseHandler:function(t,B,G){G=this.getElements(t);B.style.display="none";t.appendChild(B);
G.uriOption.checked?this.refreshPreviewImg(t,G.uriField):this.refreshPreviewImg(t,G.fileField);G.action.focus();gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler)},prevImgClickHandler:function(t,B){t=t||event;var G=gx.evt.source(t);0<l(G).closest(".gx-multimedia-empty").length&&this.actionClickHandler(t,B)},actionClickHandler:function(t,B){var G=gx.html.multimediaUpload.isModal;t=t||event;t.preventDefault?t.preventDefault():t.returnValue=!1;t=this.getElements(B);var J=t.button[1];t.fieldsCt.style.display=
"block";var n=130,r=500,y=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(B.style.position="static",t.fileField.style.marginTop="0",t.uriField.style.marginTop="0",n=230);gx.runtimeTemplates&&(y=!1,l(window).width()<r&&(r=l(window).width()-20,n=170));B=gx.popup.openDialog({parentElement:B,w:r,h:n,contentHtml:t.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,resizable:y,isModal:void 0===G||G,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[B,t.fieldsCt,J])}});t.fileOption.focus();
gx.evt.attach(J,"click",B.close,B,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},clearActionHandler:function(t,B){t=t||event;t.preventDefault?t.preventDefault():t.returnValue=!1;t=this.getElements(B);t.uriField.value="";t.fileField.value="";t.uriOption.checked=!1;t.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[B]);this.clearPreviewImg(B);this.imageLoadHandler(t.previewImg,t.previewLink)},keypressHandler:function(t){13==t.event.keyCode&&(t.cancel=!0,gx.popup.currentPopup.close())},
tapHandler:function(t){this.getElements(t).action.focus()},getElements:function(t){t=gx.dom.byId(t);var B=l(t);t=B.find(".change-action")[0];var G=B.find(".clear-action")[0],J=null,n=l(G).next()[0];B=B.find(".fields-ct");n&&("A"==n.tagName?(J=n,n=n.firstChild):"IMG"!=n.tagName&&(n=null));return{previewLink:J,action:t,clearAction:G,previewImg:n,fieldsCt:B[0],uriField:B.find("input[type='text']")[0],fileField:B.find("input[type='file']")[0],uriOption:B.find("input[type='radio'][value='uri']")[0],fileOption:B.find("input[type='radio'][value='file']")[0],
button:B.find("input[type='button']")}},getContainer:function(t){for(t=gx.dom.byId(t);t;){if(gx.dom.hasClass(t,gx.html.multimediaUpload.gxCssClass))return t;t=t.parentNode}return null},setPreviewImage:function(t,B){t=gx.dom.byId(t);var G=this.getElements(t);0>gx.util.Url.parseWithAnchor(B).protocol.search(/^https?:/)&&G.uriOption.checked||(this.clearPreviewImg(t),G.previewImg&&gx.text.startsWith(gx.util.getContentTypeFromExt(B),"image")&&("IMG"==G.previewImg.tagName&&(G.previewImg.src=B),this.imageLoadHandler(G.previewImg,
G.previewLink)))},setPreviewLink:function(t,B){t=gx.dom.byId(t);t=this.getElements(t);t.previewLink&&B&&t.previewLink&&(t.previewLink.href=B);this.imageLoadHandler(t.previewImg,t.previewLink)},clearPreviewImg:function(t){t=gx.dom.byId(t);(t=this.getElements(t))&&t.previewImg&&t.previewLink&&(t.previewImg.src="",t.previewLink.href="")},refreshPreviewImg:function(t,B){t=gx.dom.byId(t);var G=this.getElements(t);if(G.previewImg&&"INPUT"==B.tagName){this.setPreviewAtt(t,"");if(B==G.fileField){var J;if(B.files&&
(J=B.files[0]))if(J.type.match(/image.*/)){var n=new FileReader;n.onload=function(r,y,C){y.src=r.target.result;C.href=r.target.result;this.setPreviewAtt(t,r.target.result)}.closure(this,[G.previewImg,G.previewLink],!0);n.readAsDataURL(J)}else{G.previewLink.href="#";G.previewLink.className="gx-multimedia-download";this.clearPreviewImg(t);return}B.gxctrldeleted&&this.clearPreviewImg(t)}else B==G.uriField&&(G.previewImg.src=B.value,G.previewLink.href=B.value);this.imageLoadHandler(G.previewImg,G.previewLink)}},
setType:function(t,B){t=gx.dom.byId(t);var G=this.getElements(t);G.fileOption.checked=B;G.uriOption.checked=!B;B&&(G.uriField.value="");this.onOptionChange(t)},getOptionValue:function(t){t=gx.dom.byId(t);return this.getElements(t).fileOption.checked?"file":"uri"},createControl:function(t){t=gx.dom.byId(t);if(!t._created){t._created=!0;var B=this.getElements(t);gx.dom.addClass(B.fileField,"field-selected");B.action.setAttribute("gxfocusable","1");var G=document.createElement("input");G.type="button";
G.className="BtnCancel";G.value=gx.getMessage("GXM_cancel");G.onclick=function(){gx.fn.closeWindow([])};B.fieldsCt.appendChild(G);G=document.createElement("input");G.type="button";G.className="BtnEnter";G.value=gx.getMessage("GXM_uploadconfirmoption");B.fieldsCt.appendChild(G);G=this.imageLoadHandler.closure(this,[B.previewImg,B.previewLink]);var J=this.onOptionChange.closure(this,[t]);G();B.previewImg&&gx.evt.attach(B.previewImg,"load",G);J();gx.evt.attach(B.uriOption,"click",J);gx.evt.attach(B.fileOption,
"click",J);gx.evt.attach(B.action,"click",this.actionClickHandler.closure(this,[t],!0));gx.evt.attach(B.previewImg.parentNode,"click",this.prevImgClickHandler.closure(this,[t],!0));gx.evt.attach(B.clearAction,"click",this.clearActionHandler.closure(this,[t],!0));gx.evt.attach(t,"touchstart",this.tapHandler.closure(this,[t]))}}},controls:function(){var t={},B={label:'<label class="gx-label {{className}} control-label" {{{additionalAtts}}} for="{{relatedElement}}">{{caption}}</label>',radio:['<span class="{{className}}" style="{{style}}">',
"{{#values}}",'<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"data-gxoch0="{{data-gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}</label>',"{{/values}}","</span>"]},G=function(n,r){var y=gx.lang.isArray(B[n])?B[n].join(""):B[n];t[n]||(t[n]=!0,Mustache.parse(y));return Mustache.render(y,r)},J=/"/g;return{applyTemplate:G,types:{singleLineEdit:1,multipleLineEdit:2,
blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25,label:26,divEnd:27,formGroup:28,formGroupEnd:29},formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},isMultiSelection:function(n){return"combo"==n||"dyncombo"==n||"listbx"==n||"dynlistbx"==n?!0:!1},eventJSCode:function(n,r,y,C,D){var F="";
if(4==n&&y)F=y;else if(1==n)F="gx.fn.closeWindow();";else if(7==n)n="",C&&D&&(n=",'"+C.gridName+"','"+D.gxId+"'"),F="gx.evt.execCliEvt( "+r+n+",this);";else if(6==n||5==n)F="gx.evt.execEvt("+r+",this,"+C.gridId+");";return F},onJsEventAttributes:function(n,r,y){var C=gx.GxObject,D=" "+C.GX_EVENT_DATA_ATTR+'="'+n+'"',F="";4===n&&(F=" "+C.GX_EVENT_CODE_DATA_ATTR+'="'+n+'"');y?D=r?D+(" "+C.GX_EVENT_CONDITION_DATA_ATTR+'="'+y+'"'+F):D+F:r&&(D+=F);return D+" "},startAnchor:function(n,r,y,C,D,F){F=F?' class="'+
F+'"':"";n=this.onJsEventAttributes(n,r,y);if(y||r)return'<a href="javascript:void(0)"'+n+F+">";if(C){var H="";r=C.replace(/(\\")/ig,"\\u0022");H+='<a href="'+r+'"';""!=D&&(H+=' target="'+D+'"');H+=F+">"}return H},endAnchor:function(n,r,y,C){(r||y||C)&&n.append("</a>")},onJSEvent_impl:function(n,r,y){var C=[];""!=y&&C.push('jsevent="'+y+'" ');C.push(n+'="if( ');""!=r?C.push("gx.evt.jsEvent(this)) {"+r+'} else return false;"'):C.push('!gx.evt.jsEvent(this)) return false;"');return C.join("")},onJSEvent:function(n,
r,y,C){n.append(" ");n.append(this.onJSEvent_impl(r,y,C))},htmlControl:function(n,r,y,C,D){this.id=n||"";this.width=r||0;this.widthUnit="px";this.height=y||0;this.heightUnit="px";this.cssClass=C||"";this.style=this.ownCssClass=this.roClass="";this.title=D||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link="";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=null;this.gridRow=this.gridId="";this.buffer=
new gx.text.stringBuffer;this.getHtml=function(){this.buffer.clear();this._getHtml();return this.buffer.toString()};this.append=function(F){return this.buffer.append(F)};this.tagAtt=function(F,H){H=H.toString();H=0<=H.indexOf('"')?H.replace(J,"&quot;"):H;return this.buffer.append(" "+F+(H?'="'+H+'"':""))};this.persistValue=function(){var F=this.getVStruct();!gx.lang.emptyNum(this.column.gxId)&&F&&(this._persistValue?this._persistValue():F.v2v&&F.v2v(this.value))};this.setIndividualProp=function(F,
H){this[F]="enabled"==F||"visible"==F||"isPassword"==F||"autoComplete"==F||"hasJsLink"==F?gx.lang.gxBoolean(H):H};this.setGridData=function(F){this.grid=F.grid;this.row=F.row;this.gridId=F.gridId;this.gridRow=F.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}};this.getVStruct=function(){return this.grid.parentObject.GXValidFnc[this.column.gxId]};this.getEventContext=function(){var F=this.grid.parentObject;return gx.json.serializeJson([F.CmpContext,
F.IsMasterPage])}},singleLineEdit:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=!1;this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da,ha,qa,z,E,K,I,M,P,R,S,U,aa,T,Y,X,ia,ea,ja,oa,ra,ka){this.id=F;this.inputType=z;this.step=E;this.title=W;this.placeholder=V;this.width=K;this.widthUnit=I;this.height=17==M?0:M;this.heightUnit=P;this.maxLength=R;this.visible=0!=da;this.enabled=0!=ha;this.rtEnabled=0!=qa;this.isPassword=
0!=S;this.format=U;this.link=O;this.linkTarget=Q;this.style=fa;this.cssClass=ca;this.roClass=ma;this.columnClass=na;this.columnHeaderClass=la;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);oa&&(this.rtEnabled||this.enabled)&&(H=ka);this.formattedValue=""===ka?"":gx.lang.emptyObject(H)?gx.applyPicture(this.vStruct,gx.html.encodeCaseFormat(ka||"",U)):gx.html.encodeCaseFormat(H,U);this.extraAttributes=L;this.jsScrCode=ba;this.usrOnclick=Z;this.eventName=N;this.parentId=aa;this.hasTheme=T;
this.autoComplete=0!=Y;this.autoCorrection=0!=X;this.value=ka||"";this.domainName=ea;this.rtPicture=ra};this._getHtml=function(){var F="",H=this.getVStruct();0==this.width&&(this.width=this.colSize?this.colSize:this.maxLength,this.widthUnit="chr");0<this.width&&("chr"==this.widthUnit?F=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";");0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+";");var L=this.style;this.style+=
this.visible?"":";display:none;";if(this.rtEnabled||this.enabled){if(this.dataType==gx.types.date||this.dataType==gx.types.dateTime)this.append("<div"),this.tagAtt("id",this.id+"_dp_container"),""!=this.column.align&&this.tagAtt("data-align",this.column.align),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">");this.row.ownerGrid.isFreestyle||void 0!==this.column.titleformat&&this.column.titleformat!=gx.html.controls.formats.TEXT||
this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>");this.append("<input");if(1==this.isPassword)this.tagAtt("type","password");else{this.tagAtt("type",this.inputType);if(this.step&&("number"==this.inputType||"range"==this.inputType)){this.tagAtt("step",this.step);var N=Math.pow(10,this.maxLength)-1;this.tagAtt("min",-1*N);this.tagAtt("max",N);"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"')}this.dataType==gx.types.geolocation&&
(this.extraAttributes+=" data-gx-geolocation")}this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue);this.append(F);""!=this.title&&this.tagAtt("title",this.title);""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder);this.autoComplete||this.tagAtt("autocomplete","off");this.tagAtt("spellcheck",this.autoCorrection.toString());"date"!=this.inputType&&"datetime"!=this.inputType&&"datetime-local"!=
this.inputType&&this.tagAtt("maxlength",this.maxLength);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.rtPicture&&this.tagAtt("data-gx-rt-picture",this.rtPicture);F=this.style;""!=this.column.align&&(F+=";text-align:"+this.column.align);N=!this.enabled&&this.rtEnabled?";display:none;":"";F+=N;""!=F&&this.tagAtt("style",F);this.append(this.extraAttributes);gx.fn.controlFiresEvent(H)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,H.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,
this.getEventContext()));this.append(">");this.dataType==gx.types.date||this.dataType==gx.types.dateTime?(F=this.grid.parentObject.getValidStructFld(this.id),void 0!=F.dp&&(0==F.dp.f&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),N=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+N),this.append(">")),this.append("</div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,
Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.dataType==gx.types.date||this.dataType==gx.types.dateTime?this.formattedValue:this.value);N=this.hasTheme?gx.fn.prefixROClass(0==this.parentId?this.cssClass:this.roClass):this.cssClass;F="";this.format!=gx.html.controls.formats.RAW_HTML&&(L+=this.visible?"":";display:none;",this.append("<span"),this.append(this.extraAttributes),""!=N&&this.tagAtt("class",
N),""!=L&&this.tagAtt("style",L),this.tagAtt("data-gx-readonly",""),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.tagAtt("data-gx-enabled-id",this.id),F=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),L=gx.html.controls.startAnchor(this.jsScrCode,F,this.usrOnclick,this.link,this.linkTarget),gx.fn.controlFiresEvent(H)&&(L||this.tagAtt("tabindex","0"),this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,H.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,
this.getEventContext())),this.append(">"),this.append(L));if(this.isPassword)for(H=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength),L=0;L<H;L++)this.append("*");else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,F,this.usrOnclick,this.link),this.append("</span>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},multipleLineEdit:function(n,
r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da,ha,qa,z,E,K,I,M,P,R,S,U,aa){this.id=F;this.visible=0!=O;this.enabled=0!=Q;this.rtEnabled=0!=W;this.width=V;this.widthUnit=Z;this.height=ba;this.heightUnit=ca;this.style=ma;this.cssClass=na;this.columnClass=la;this.columnHeaderClass=da;this.maxLength=ha;this.extraAttributes=L;this.autoresize=0!=qa;this.format=N;this.link=H;this.linkTarget=E;this.placeholder=
K;this.value=aa||"";this.autoCorrection=0!=I;this.domainName=P;this.maxTextLines=z;this.jsScrCode=S;this.title=U};this._getHtml=function(){var F=this.getVStruct();this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.rtEnabled||this.enabled)this.row.ownerGrid.isFreestyle||void 0!==this.column.titleformat&&this.column.titleformat!=gx.html.controls.formats.TEXT||this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>"),this.append("<textarea"),
""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",this.width):this.style=this.style+";width: "+this.width+this.widthUnit,1<this.maxTextLines&&this.tagAtt("data-gx-text-maxlines",this.maxTextLines),"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",
this.maxLength),""!=this.title&&this.tagAtt("title",this.title),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(gx.html.encodeCaseFormat(this.value,gx.html.controls.formats.TEXT,
!1)),this.append("</textarea>");if(!this.enabled){var H=this.visible?"":"display:none;";this.autoresize||(H+='overflow="hidden";');this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);this.cssClass=gx.fn.prefixROClass(this.cssClass);this.append("<span ");this.append(this.extraAttributes);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=H&&this.tagAtt("style",H);this.tagAtt("data-gx-readonly","");""!=this.title&&this.tagAtt("title",this.title);this.tagAtt("id","span_"+this.id);H=
gx.html.controls.startAnchor(this.jsScrCode,!!F.evt,"",this.link,this.linkTarget);F.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,F.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),H||this.tagAtt("tabindex","0"));this.format===gx.html.controls.formats.TEXT_W_SPACES&&this.tagAtt("data-text-format",gx.html.controls.formats.TEXT_W_SPACES);this.append(">");this.append(H);this.append(gx.html.encodeCaseFormat(this.value,this.format,!0));gx.html.controls.endAnchor(this,
!!F.evt,"",this.link);gx.html.controls.specificDomainCtrls(this);this.append("</span>")}}},blob:function(n,r,y,C,D,F,H){this.base(n,r,y,C,D);this.type=gx.html.controls.types.blob;this.display=F||0;this.contentType=H||"text/html";this.parameters=this.url="";this.setProperties=function(L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da,ha,qa,z,E,K,I,M,P,R,S,U,aa,T,Y,X,ia){this.id=L;this.value=N;this.contentType=O||"text/html";this.linkTarget=W;this.parameters=V;this.display=Z;this.visible=0!=ca;this.enabled=0!=ba;
this.alt=fa;this.title=ma;this.borderWidth=na;this.autoresize=0!=la;this.width=da;this.widthUnit=ha;this.height=qa;this.heightUnit=z;this.vSpace=E;this.hSpace=K;this.jsScrCode=I;this.usrOnclick=M;this.eventName=P;this.style=R;this.cssClass=S;this.columnClass=U;this.columnHeaderClass=aa;this.extraAttributes=T;this.extraDisplayAttributes=Y;this.jsDynCode=X;this.url=gx.util.resolveUrl(ia)};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append('<div class="gx-tbldsp-container"');
this.tagAtt("border",0);this.tagAtt("data-cellpadding",0);this.tagAtt("data-cellspacing",0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");this.tagAtt("title",gx.lang.emptyObject(this.title)?this.id:this.title);this.append("><div>");var L=-1!=this.contentType.toLowerCase().indexOf("image/");if(0==this.display){if(L){this.append("<img");this.tagAtt("alt",this.alt);if(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))this.url=gx.ajax.getImageUrl(gx,"blankImage");
this.tagAtt("src",this.url)}else this.append("<object"),this.tagAtt("type",this.contentType),""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url);this.tagAtt("id","Object_"+this.id);this.style+="display:block;";0==this.width||this.autoresize||(this.style=this.style+"width:"+this.width+this.widthUnit+";");0==this.height||this.autoresize||(this.style=this.style+"height:"+this.height+this.heightUnit+";");this.tagAtt("style",this.style);var N=""!=this.cssClass?"BlobContent"+this.cssClass:
this.cssClass;this.enabled||(N=gx.fn.prefixROClass(N));this.tagAtt("class",N);this.append(this.extraDisplayAttributes);this.append(">");L?this.append("</img>"):(this.append(this.parameters),this.append("</object>"))}else 1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),""!=this.linkTarget&&this.tagAtt("target",
this.linkTarget),this.append("><img"),this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("></a>"));this.append("</div><div>");if(this.enabled){var O="";gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data");N=gx.dom.byId(this.id);this.grid&&this.grid.parentObject.isTransaction()&&N&&this.value===N.value?(L=this.id+"_hook",this.append("<div"),this.tagAtt("id",L),this.append(">"),this.append("</div>"),this.grid.addControlToReuse({el:N,
hookId:L})):(this.append("<input"),this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(O+="display:none;"),0!=this.width&&(O=O+"width:"+this.width+";"),this.tagAtt("style",O),this.tagAtt("value",this.value),N=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,this.enabled||(N=gx.fn.prefixROClass(N)),this.tagAtt("class",N),L&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">"))}this.append("</div></div>")}},radio:function(n,
r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da){this.possibleValues=F.v||[];this.id=H;this.title=L;this.visible=0!=N;this.enabled=0!=O;this.columns=Q;this.orientation=W;this.style=V;this.cssClass=Z;this.columnClass=ba;this.columnHeaderClass=ca;this.jsScrCode=fa;this.usrOnclick=ma;this.eventName=na;this.extraAttributes=la;this.value=da};this._getHtml=function(){this.dataType==
gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));var F=[];F.push(this.enabled?this.cssClass:gx.fn.prefixROClass(this.cssClass));F.push("gx-radio-button");1==this.orientation&&F.push("gx-radio-button-vertical");F=F.join(" ");var H=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style+=this.visible?"":";display:none;";this.append(G("radio",{id:this.id,className:F,style:this.style,title:this.title,isDisabled:!this.enabled,extraAttributes:this.extraAttributes,
gxoch0:gx.html.controls.onJSEvent_impl("data-gxoch0",H,this.usrOnclick),values:l.map(this.possibleValues,function(L,N){return{itemId:this.id+"_"+N,itemValue:L[0],itemDesc:L[1],isSelected:gx.text.trim(this.value.toString())==gx.text.trim(L[0].toString())}}.closure(this))}))}},comboBox:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da,ha,qa,z,E,K,I,M,P,R){this.possibleValues=
F.v||[];this.id=H;this.title=V;this.visible=0!=Z;this.enabled=0!=ba;this.rtEnabled=0!=ca;this.rows=L;this.format=fa;this.width=ma;this.widthUnit=na;this.height=la;this.heightUnit=da;this.style=ha;this.cssClass=qa;this.columnClass=z;this.columnHeaderClass=E;this.formattedValue=I;this.jsScrCode=O;this.usrOnclick=N;this.eventName=Q;this.extraAttributes=K;this.value=R;this.rawValue=F};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));0<this.width&&
(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);var F=this.style+" ;overflow:hidden;",H=this.enabled||this.rtEnabled;this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(H){var L=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",this.id);
""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"data-gxoch0",L,this.usrOnclick);this.append(">");L=this.possibleValues.length;for(var N=0;N<L;N++){var O=this.possibleValues[N];this.append("<option");this.tagAtt("value",O[0]);gx.text.trim(O[0].toString())==
gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected");this.append(">");this.append(O[1]);this.append("</option>")}this.append("</select>")}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);L=gx.fn.prefixROClass(this.cssClass);F+=this.visible?"":";display:none;";this.append("<span ");this.tagAtt("id","span_"+this.id);""!=this.title&&this.tagAtt("title",this.title);""!=L&&this.tagAtt("class",L);""!=F&&this.tagAtt("style",F);gx.O.DSO&&this.tagAtt("data-gx-readonly",
"");H||this.tagAtt(gx.GxObject.GX_DATA_RAW_VALUE_ATTR,gx.json.serializeJson(this.rawValue));this.append(this.extraAttributes);this.append(">");L=this.possibleValues.length;for(N=0;N<L;N++)if(O=this.possibleValues[N],gx.text.trim(O[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(O[1]);break}this.append("</span>")}}},listBox:function(n,r,y,C,D,F){this.base(n,r,y,C,D);this.type=gx.html.controls.types.listBox;this.rows=F},checkBox:function(n,r,y,C,D,F,H,L){this.base(n,
r,y,C,D);this.type=gx.html.controls.types.checkBox;this.caption=F||"";this.checkedValue=H;this.uncheckedValue=L;this.setProperties=function(N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da){this.id=N;this.title=O;this.visible=0!=W;this.enabled=0!=V;this.checkedValue=Z;this.caption=ba;this.style=ca;this.cssClass=fa;this.columnClass=ma;this.columnHeaderClass=na;this.extraAttributes=la;this.value=da;this.labelCaption=Q};this._getHtml=function(){var N=this.getVStruct();this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),
this.checkedValue=gx.text.trim(this.checkedValue.toString()));var O=this.cssClass;this.enabled||(O=gx.fn.prefixROClass(this.cssClass));this.style+=this.visible?"":";display:none;";this.append("<label");this.tagAtt("for",this.id);""!=O&&this.tagAtt("class",O);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("id",this.id);this.tagAtt("type","checkbox");this.tagAtt("name",this.id);this.value.toString()==this.checkedValue.toString()?(this.append(" checked"),this.tagAtt("value",
this.checkedValue)):this.tagAtt("value",this.uncheckedValue);""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);gx.fn.controlFiresEvent(N)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,N.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.append(this.caption);this.append("</label>")}},imageReadOnly:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.image;
this.alt="";this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da,ha,qa,z,E,K,I,M,P,R,S,U,aa,T,Y,X){this.id=F;this.accessKey=N;this.visible=0!=Q;this.enabled=0!=W;this.alt=V;this.title=Z;this.borderWidth=ba;this.autoresize=0!=ca;this.width=fa;this.widthUnit=ma;this.height=na;this.heightUnit=la;this.vSpace=da;this.hSpace=ha;this.link=H;this.linkTarget=L;this.jsScrCode=qa;this.usrOnclick=z;this.eventName=E;this.style=K;this.cssClass=I;this.columnClass=M;this.columnHeaderClass=P;this.align=
R;this.extraAttributes=S;this.useMap=U;this.jsDynCode=aa;this.imgSrcSet=T;this.value=this.imageUrl=X;this.sLoading=Y};this._getHtml=function(){var F=this,H=gx.TabFocusOnPrompt?gx.fn.attachedControls():[],L=this.getVStruct(),N=H.find(function(O){return O.id===L.fld&&!0===O.info.isPrompt});N&&(H=N.info.controls||[],H=H.map(function(O){return F.grid.parentObject.getValidStruct(O).fld+"_"+F.gridRow}));this.grid.addHiddenControl(this.id,this.imageUrl);""!=this.eventName&&gx.text.endsWith(this.eventName,
".'")&&(this.eventName=this.eventName.replace(".'","."+this.gridRow+"'"));N=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);""!=N&&(this.accessKey=N);this.style+=this.visible?"":";display:none;";N=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);this.enabled&&""!=this.link&&this.append(gx.html.controls.startAnchor(this.jsScrCode,N,this.usrOnclick,this.link,this.linkTarget,"gx-image-link"));this.append("<img");this.tagAtt("src",
this.value);this.imgSrcSet&&this.tagAtt("srcset",this.imgSrcSet);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);""!=this.align&&this.tagAtt("align",this.align);if(""==this.cssClass||0<this.borderWidth)this.tagAtt("border",this.borderWidth),""!=this.cssClass&&(this.style=this.style+";border-width: "+
this.borderWidth);this.tagAtt("alt",this.alt||this.title);H&&this.tagAtt("data-gx-attached-ctrl",H.join(" "));""!=this.title&&this.tagAtt("title",this.title);0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);""!=this.useMap&&this.tagAtt("usemap",this.useMap);"lazy"!==this.sLoading&&"eager"!==this.sLoading||
this.tagAtt("loading",this.sLoading);this.extraAttributes&&this.append(this.extraAttributes);L.evt&&(this.tagAtt("tabindex","0"),this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,L.fld),this.tagAtt(gx.GxObject.GX_EVENT_DATA_ATTR,""),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.usrOnclick&&this.tagAtt(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR,this.usrOnclick));this.append(">");this.enabled&&""!=this.link&&""==N&&gx.html.controls.endAnchor(this,N,this.usrOnclick,this.link)};
this._persistValue=function(){var F=this.getVStruct();F.v2v&&F.v2v(this.imageUrl)}},multimedia:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.multimedia;this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da,ha,qa,z,E,K,I,M){this.id=F;this.text=H;this.display=0!=L;this.visible=0!=N;this.enabled=0!=O;this.autoresize=0!=Q;this.width=W;this.widthUnit=V;this.height=Z;this.heightUnit=ba;this.jsScrCode=ca;this.usrOnclick=fa;this.eventName=ma;this.style=na;this.cssClass=
la;this.columnClass=da;this.columnHeaderClass=ha;this.extraInputAttributes=qa;this.jsDynCode=E;this.readOnly=0!=K;this.isBlob=gx.lang.gxBoolean(I);this.multimediaUrl=M;this.value=gx.util.resolveUrl(M)};this.startMultimediaUploadControl=function(F,H,L,N){return['<div id="',F,'_ct" class="',gx.html.multimediaUpload.gxCssClass,'" style="',(N||"")+(H?"":"display:none;"),'" ',gx.html.multimediaUpload.gxPreviewHTMLAtt,'="',this.value,'" ">'].join("")};this.endMultimediaUploadControl=function(F,H,L,N,O,
Q,W,V,Z,ba,ca,fa,ma,na,la,da){L=[];N=gx.html.multimediaUpload.getInputFileEl(this.id);O="checked";Q="";W=F.match(/([\w]+)(_\d{4})$/);W=W[1]+"_GXI"+W[2];if(la||void 0===la)O="",Q="checked",H="";la=['<div id="',F,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',F,'Option" type="radio" value="file" ',Q,"/>",gx.getMessage("GXM_uploadfileoption"),"</label>",'<label class="option">','<input name="',F,'Option" type="radio" value="uri" ',O,"/>",gx.getMessage("GXM_uploadurioption"),
"</label>",'<input type="text" class="field ',ca,'" id="',W,'" name="',W,'" value="',H,'" ',ma," />"];L.push(la.join(""));la=N?['<div id="',F,'_hook"></div>']:['<input type="file" class="field ',ca,'" id="',F,'" name="',F,'" accept="',da,'" ',ma,"/>"];L.push(la.join(""));la=["</div>","</div>"];L.push(la.join(""));return L.join("")};this.getPreviewHtml=function(){var F=gx.fn.prefixROClass(this.cssClass||""),H=this.value,L=H?' href="'+H+'"':"",N=this.readOnly||!this.enabled,O=N?this.id:"";return(gx.text.startsWith(gx.util.getContentTypeFromExt(H),
"image")||!N&&""===H?["<a",' class="'," gx-multimedia-ro",'"',' target ="_blank"',L,">",'<img id = "Object_',this.id,'" class = "',F,'" alt = "',this.alt,'" src = "',H,'" />','<span id="',O,'" class="',this.placeHolderClass,'"></span>',"</a>"]:["<a",H?" download":"",' class="'," gx-multimedia-ro",'"',' target = "_blank"',L,">",'<span id = "',O,'" class = "',F," ",this.placeHolderClass,'" title = "',gx.getMessage("GXM_multimediaalttext"),'"></span>',"</a>"]).join("")};this._getHtml=function(){!this.readOnly&&
this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"></a>')):this.grid.addHiddenControl(this.id,this.multimediaUrl);this.append(this.getPreviewHtml());if(!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,
this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var F=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&F&&this.grid.addControlToReuse({el:F,hookId:this.id+"_hook"})}};this._persistValue=function(){var F=this.getVStruct();F.v2v&&F.v2v(gx.html.multimediaUpload.getPreviewAtt(this.id+"_ct")||this.multimediaUrl)}},
image:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.image;this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da,ha,qa,z,E,K,I,M,P,R,S,U,aa,T,Y,X,ia,ea,ja,oa){this.id=F;this.accessKey=N;this.visible=0!=Q;this.enabled=0!=W;this.alt=V;this.title=Z;this.borderWidth=ba;this.autoresize=0!=ca;this.width=fa;this.widthUnit=ma;this.height=na;this.heightUnit=la;
this.vSpace=da;this.hSpace=ha;this.link=H;this.linkTarget=L;this.jsScrCode=qa;this.usrOnclick=z;this.eventName=E;this.style=K;this.cssClass=I;this.columnClass=M;this.columnHeaderClass=P;this.align=R;this.extraInputAttributes=S;this.extraImageAttributes=U;this.useMap=aa;this.jsDynCode=T;this.readOnly=0!=Y;this.isBlob=gx.lang.gxBoolean(X);this.isAttribute=gx.lang.gxBoolean(ia);this.imgSrcSet=ea;this.multimediaUrl=oa;this.value=gx.util.resolveUrl(oa);this.themeName=O;this.className=I;this.sLoading=ja;
ia&&(this.className=gx.fn.prefixROClass(I));F=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(F);this.innerImage.column=this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.widthUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,this.usrOnclick,this.eventName,
this.style,this.className,this.columnClass,this.columnHeaderClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.imgSrcSet,this.sLoading,this.value)};this.getPreviewHtml=function(){var F=this.value,H=gx.fn.prefixROClass(this.cssClass||"");return['<a target="_blank" class="gx-multimedia-ro"><img id="Object_',this.id,'" class="',H,'" alt="',this.alt,'" src="',F,'" /><span class="',this.placeHolderClass,'"></span></a>'].join("")};this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=
this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>");this.append('<a gxfocusable="1" href="" class="action clear-action"></a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,
this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var F=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&F&&this.grid.addControlToReuse({el:F,hookId:this.id+"_hook"})}}},video:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},
audio:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},file:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.audio;this.placeHolderClass="gx-download-placeholder"},textBlock:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.textBlock;this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na){this.id=F;this.visible=0!=ba;this.enabled=0!=ca;this.rtEnabled=
0!=fa;this.format=ma;this.title=Z;this.link=H;this.linkTarget=L;this.jsScrCode=V;this.usrOnclick=N;this.eventName=O;this.extraAttributes=Q;this.cssClass=W;this.value=gx.text.replaceAll(na,"","'")};this._getHtml=function(){var F=this.getVStruct(),H=this.enabled||this.rtEnabled;if(this.format!=gx.html.controls.formats.RAW_HTML){if(this.format==gx.html.controls.formats.HTML){var L=(this.visible?";display:inline;":";display:none;")+this.extraAttributes;this.append("<div ")}else L=(this.visible?"":";display:none;")+
this.extraAttributes,this.append("<span ");this.tagAtt("id",this.id);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.tagAtt("data-gxformat",this.format);""!=L&&this.tagAtt("style",L);""!=this.title&&this.tagAtt("title",this.title);gx.fn.controlFiresEvent(F)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,F.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),"textblock"!==F.ctrltype&&this.tagAtt("tabindex",
"0"));this.append(">")}H?(L=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),this.append(gx.html.controls.startAnchor(this.jsScrCode,L,this.usrOnclick,this.link,this.linkTarget))):L="";this.append(gx.html.encodeCaseFormat(this.value,this.format));H&&gx.html.controls.endAnchor(this,L,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("</div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("</span>");this.format==gx.html.controls.formats.RAW_HTML&&
gx.html.processCode(this.buffer.toString(),!1)}},label:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.label;this.setProperties=function(F,H,L,N,O,Q){this.referencedEl=F;this.labelCaption=H;this.labelClass=L;this.extraStyle=Q;this.addAttributes=[0===N?"data-gx-sr-only":"",this.extraStyle?'style="'+this.extraStyle+'"':""].join(" ")};this._getHtml=function(){this.append(G("label",{caption:this.labelCaption,className:this.labelClass,additionalAtts:this.addAttributes,relatedElement:this.referencedEl}))}},
button:function(n,r,y,C,D,F){this.base(n,r,y,C,D);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=F||"rounded";this.setProperties=function(H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da,ha){this.reset=da;this.id=H;this.title=Q;this.accessKey=W;this.style=V;this.cssClass=Z;this.visible=0!=ba;this.enabled=0!=ca;this.buttonStyle=fa;this.jsScrCode=O;this.usrOnclick=N;this.eventName=ma+(5==this.jsScrCode?"+'"+this.gridRow+"'":"");this.extraAttributes=na;this.jsCode=L;this.jsDynCode=la;this.caption=
ha};this._getHtml=function(){var H=this.getVStruct();this.style+=this.visible?"":";display:none;";var L="BaseRBtn R"+this.cssClass;"rounded"==this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",this.style),this.tagAtt("class",L),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");L="button";1==this.reset?L="submit":0==this.reset&&
(L="reset");this.tagAtt("type",L);L=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==L&&(L=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));""!=L&&(this.accessKey=L);this.tagAtt("name",this.id);this.tagAtt("id",this.id);this.tagAtt("value",this.caption);""!=this.title&&this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",
this.style);this.enabled||this.append(" disabled");this.append(gx.html.controls.onJsEventAttributes(this.jsScrCode,this.jsCode,this.usrOnclick));this.append(this.extraAttributes);gx.fn.controlFiresEvent(H)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,H.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");"rounded"==this.buttonStyle&&this.append("</span></span></span></span>")}},grid:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.grid;
this.containerName="";this.setProperties=function(F){this.containerName=F;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.append("></div>")}},userControl:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(F,H){this.id=this.containerName=F;this.visible=0!=H};this._getHtml=function(){this.append("<div");this.tagAtt("id",
this.id);this.tagAtt("class",gx.uc.gxCssClass);this.append("></div>");this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.userControlContainer;this.containerName=this.parentName="";this.setProperties=function(F,H){this.parentName=F;this.containerName=H;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style",
"display:none;");this.tagAtt("class","gx_usercontrol_child");this.append(">")}},webComponent:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.webComponent;this.content=this.controlName="";this.setProperties=function(F){this.controlName=F;var H=this.grid.parentObject.getComponentData(this.controlName);F=H.Prefix;var L=this.grid.gxComponentContext+"gxHTMLWrp"+F+this.gridRow,N=gx.dom.byId(L),O="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+F+this.gridRow);
if(null!=N)H=L+"_hook",this.grid.addComponentToDraw({create:!1,existingEl:H,el:L,p:this.grid.gxComponentContext+F+this.gridRow}),L=H;else if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)&&!gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents))if(N=gx.csv.lastEvtResponse.gxComponents[L],gx.lang.emptyObject(N))O="";else{O=gx.html.cleanHtmlRefs(N);var Q=gx.fn.getHidden(this.grid.gxComponentContext+F+this.gridRow);Q||(Q=H.GXClass);gx.lang.emptyObject(Q)||this.grid.addComponentToDraw({load:!0,n:Q.toLowerCase(),
p:this.grid.gxComponentContext+F+this.gridRow,c:N})}this.id=L;this.content=O};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);this.append(">");this.append(this.content);this.append("</div>")}},embeddedPage:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca){this.id=F;this.value=
H;this.visible=0!=L;this.width=N;this.widthUnit=O;this.height=Q;this.heightUnit=W;this.borderStyle=V;this.align=Z;this.title=ba;this.scrollbars=ca};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",this.width+this.widthUnit);""!=this.title&&this.tagAtt("title",
this.title);""!=this.id&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">");this.append("</iframe>")}},table:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na,la,da,ha){this.id=F;this.visible=
0!=H;this.cssClass=L;this.background=N;this.backColor=O;this.borderColor=Q;this.align=W;this.title=V;this.borderWidth=Z;this.cellPadding=ba;this.cellSpacing=ca;this.height=fa;this.width=ma;this.rules=na;this.heightUnit=la;this.widthUnit=da;this.style="";this.header=ha};this._getHtml=function(){var F=this.getVStruct();this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+"background-image: url("+
this.background+");");if(""!=this.backColor){var H=parseInt(this.backColor);H=isNaN(H)?this.backColor:gx.color.html(H).Html;this.style=this.style+"background-color: "+H+";"}""!=this.borderColor&&(H=parseInt(this.borderColor),H=isNaN(H)?this.borderColor:gx.color.html(H).Html,this.style=this.style+"border-color: "+H+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+";");""!=this.width&&
(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&this.tagAtt("border",this.borderWidth);""!==this.cellSpacing&&this.tagAtt("data-cellspacing",this.cellSpacing);""!==this.cellPadding&&this.tagAtt("data-cellpadding",this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",
this.cssClass);""!=this.style&&this.tagAtt("style",this.style);F.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,F.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">");""!=this.header&&(this.append("<caption>"),this.append(this.header),this.append("</caption>"))}},row:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.row;this.verticalAlign=this.align=this.borderColor=this.backColor="";this.isFreestyleRow=
!1;this.oncontextmenu="";this.setProperties=function(F,H,L){H&&(this.cssClass=this.ownCssClass?H+(this.ownCssClass?" "+this.ownCssClass:""):H);this.style=L};this._getHtml=function(){this.append("<tr");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=
this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.cell;this.className=this.rowSpan=this.colSpan=this.verticalAlign=this.align=this.borderColor=this.backColor=this.background=this.style="";this.setProperties=function(F,
H,L){this.background=F;this.cssClass=L;H&&""!=H&&0<H.indexOf("style=")&&(this.style=H.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");
""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},responsiveRow:function(n,r,y,C,D){this.base(n,r,y,C,D);this._getHtml=function(){this.append("<div");
""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("class","row "+(this.cssClass||""));""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",
this.oncontextmenu);this.append(">")}},responsiveCell:function(n,r,y,C,D){this.base(n,r,y,C,D);this._getHtml=function(){this.append("<div");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&
this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.group;this.caption="";this.setProperties=function(F,H,L,N,O,Q,W,V,Z){this.id=
F;this.caption=H;this.visible=0!=L;this.width=N;this.widthUnit=O;this.height=Q;this.heightUnit=W;this.cssClass=V;this.extraAtts=Z};this._getHtml=function(){this.append("<fieldset");this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var F="-moz-border-radius:3pt;";"0"!=this.width&&(F+="width: "+this.width+this.widthUnit+";");"0"!=this.height&&(F+="height: "+this.height+this.heightUnit+";");this.visible||(F+="display:none;");this.tagAtt("style",
F);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">");this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("</legend>")}},div:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.div;this.setProperties=function(F,H,L,N,O,Q,W,V,Z,ba,ca){this.id=F;this.visible=0!=H;this.width=L;this.widthUnit=N;this.height=O;this.heightUnit=Q;this.cssClass=W;this.align=V;this.vAlign=
Z;this.extraAtts=ba;this.extraStyle=ca};this._getHtml=function(){var F=this.getVStruct(),H=this.align&&"left"!=this.align.toLowerCase()&&"start"!=this.align.toLowerCase(),L=this.vAlign&&"top"!=this.vAlign.toLowerCase(),N=this.visible?"":";display:none;",O=this.align.toLowerCase(),Q=this.vAlign.toLowerCase(),W=O,V=Q;"justify"===W&&(W="space-evenly");"middle"===V?V="center":"bottom"===V&&(V="end");""!=this.height&&(N=N+"height: "+this.height+this.heightUnit+";");""!=this.width&&(N=N+"width: "+this.width+
this.widthUnit+";");N+=this.extraStyle;this.append("<div");this.id&&this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);if(H||L)this.tagAtt("data-valign",""),N="display:flex;justify-content:"+W+";"+N,L&&(N=N+";flex-wrap:wrap;align-content:"+V+";");""!=N&&this.tagAtt("style",N);""!=this.extraAtts&&this.append(this.extraAtts);H&&this.tagAtt("data-align",O);L&&this.tagAtt("data-valign",Q);gx.fn.controlFiresEvent(F)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,F.fld),
this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">")}},divEnd:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.divEnd;this.setProperties=function(F,H){this.align=F;this.vAlign=H};this._getHtml=function(){this.append("</div>")}},formGroup:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.formGroup;this.setProperties=function(F){this.captionPosition=F};this._getHtml=function(){1===this.captionPosition&&
this.append('<div class="form-group gx-form-group">')}},formGroupEnd:function(n,r,y,C,D){this.base(n,r,y,C,D);this.type=gx.html.controls.types.formGroupEnd;this.setProperties=function(F){this.captionPosition=F};this._getHtml=function(){1===this.captionPosition&&this.append("</div>")}},specificDomainCtrls:function(n){if(n.domainName==gx.domains.component&&0==n.enabled){var r=n.enabled?";display:none;":"",y=n.id+"_comp_trigger",C=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\"+gx.theme+
"\\Select.png",!1);n.append("<img");n.tagAtt("src",C);n.tagAtt("id",y);n.tagAtt("class","");n.tagAtt("style",r+" margin-left:2px; cursor:pointer;");n.tagAtt("onclick","gx.popup.openUrl('"+n.value+"')");n.append("/>");r=[];r.push(n.column.gxId)}else n.dataType==gx.types.geolocation&&(r=n.enabled?"":";display:none;",y=n.id+"_geoLocMe",n.append("<img"),n.tagAtt("src",gx.ajax.getImageUrl(gx,"myLocationImage")),n.tagAtt("id",y),n.tagAtt("class","GeoLocOption"),n.tagAtt("style",r),n.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),
n.append(">"),r=[],r.push(n.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);
gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,
this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.file,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl);gx.lang.inherits(this.divEnd,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell);gx.lang.inherits(this.label,this.htmlControl);gx.lang.inherits(this.formGroup,this.htmlControl);gx.lang.inherits(this.formGroupEnd,
this.htmlControl)}}}()}}(gx.$);
gx.util.Observable=function(){var l={};return{observers:[],initialObservers:[],addObserver:function(c,d,k,a){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(c,d,k,a){a=a||{};if(!1===a.unique||0>this.indexOf(c,d,k)){var b={e:c,o:d,f:k,cfg:a};a&&a.observerKey&&(l[a.observerKey]=l[a.observerKey]||[],l[a.observerKey].push(b));this.observers.push(b);!0===a.doNotDelete&&this.initialObservers.push({e:c,o:d,f:k,cfg:a})}},deleteObserverByKey:function(c){l[c]&&(gx.$.each(l[c],
function(d,k){gx.fx.obs.deleteObserver(k.e,k.o,k.f)}),l[c]=[])},deleteObserver:function(c,d,k){new gx.thread.Mutex(this,this.deleteObserverSync,[c,d,k])},deleteObserverSync:function(c,d,k){c=this.indexOf(c,d,k);0<=c&&this.observers.splice(c,1)},removeAll:function(){this.observers=this.initialObservers.slice()},indexOf:function(c,d,k){for(var a=this.observers.length,b=0;b<a;b++){var f=this.observers[b];if(f&&f.e==c&&f.o==d&&f.f==k)return b}return-1},notify_count:0,notify:function(c,d,k){d||(d=[]);
var a=this.observers.length;this.notify_count+=1;for(var b=[],f,g=0;g<a;g++){var m=this.observers[g];if(m&&m.e==c&&!m.removed)try{m.cfg&&m.cfg.single&&(m.removed=!0),f=m.f.apply(m.o,d),m.cfg&&m.cfg.async&&b.push(f)}catch(p){gx.dbg.logEx(p,"gxfx.js","gx.obs.notify")}}gx.$.when.apply($,b).then(function(){--this.notify_count;if(0===this.notify_count)for(var p=this.observers.length-1;0<=p;p--)this.observers[p].removed&&this.observers.splice(p,1);k&&k()}.closure(this))}}};
gx.fx={GX_DATA_SUGGEST_LENGTH:"data-gx-suggest-length",GX_DATA_SUGGEST:"data-gx-suggest",delayedSuggest:function(){gx.$.each(gx.suggestControls,function(l,c){gx.fx.installSuggest(c,!0)})},installSuggest:function(l,c){if(!c&&document.readyState&&"complete"!=document.readyState)gx.suggestControls[l.id]=l;else try{var d=gx.O.getValidStructFld(l.id);if(d&&!gx.lang.emptyObject(d.gxsgprm)){var k=0<d.grid?gx.fn.currentGridRowImpl(d.grid):"main",a=d.gxsgprm;a.installed||(a.installed={});a.installed[k]||(gx.ajax.suggest(gx.O,
a[1],l.id,a[0],a[3],a[2]),a.installed[k]=!0,$(l).attr(gx.fx.GX_DATA_SUGGEST,"true"),$(l).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,$(l).val().length))}}catch(b){gx.dbg.logEx(b,"gxfx.js","installSuggest")}},updateSuggestParms:function(l){if(l)for(var c=l.length,d=0;d<c;d++){var k=gx.fn.validStruct(l[d]);k&&"function"==typeof k.c2v&&k.c2v()}},firesuggest:function(l,c,d,k){gx.evt.isComposing?gx.evt.firesuggestdelayed||(gx.evt.firesuggestdelayed=!0,gx.evt.doAfterComposing(function(){gx.fx.firesuggestimpl(l,c,
d,k)},this)):gx.fx.firesuggestimpl(l,c,d,k)},firesuggestimpl:function(l,c,d,k){gx.evt.firesuggestdelayed=!1;this.updateSuggestParms(k);if(l.textbox.value)return c.requestSuggestions(l.sdtParms,function(){c.values?l.autosuggest(c.values,d):l.hideSuggestions();delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")});if(""===l.textbox.value)gx.evt.onchange_impl(l.textbox);delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(l,c,d,k,a,b){this.cur=-1;
this.layer=this.IFrameControl=null;this.provider=c;this.textbox=l;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=l.onblur);this.ControlRefresh=d;this.typeahead=k;this.suggestParms=a||[];this.sdtParms=b||[];this.requestSuggestions=function(f,g,m){gx.fx.delayedValidation=!0;var p=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(f,g,m,p)},400)};this.hideSuggestions=function(){$(this.IFrameControl).hide();$(this.layer).hide()};
this.highlightSuggestion=function(f){for(var g=this.layer.childNodes.length,m=0;m<g;m++){var p=this.layer.childNodes[m];p==f?p.className="current":"current"==p.className&&(p.className="")}};this.init=function(){var f=function(g){g||(g=window.event);this.handleKeyUp(g)};gx.evt.attach(this.textbox,"keyup",f.closure(this));gx.evt.attach(this.textbox,"keydown",function(g){g||(g=window.event);this.handleKeyDown(g)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();this.textbox.GXonblur()}.closure(this));
gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,"input",f.closure(this));this.createDropDown()};this.nextSuggestion=function(){var f=this.layer.childNodes;0<f.length&&(this.cur=this.cur<f.length-1?this.cur+1:0,f=f[this.cur],this.highlightSuggestion(f),this.pickvalue(f.firstChild.nodeValue))};this.previousSuggestion=function(){var f=this.layer.childNodes;0<f.length&&(this.cur=0<this.cur?this.cur-1:f.length-1,f=f[this.cur],this.highlightSuggestion(f),this.pickvalue(f.firstChild.nodeValue))};
this.selectRange=function(f,g){if(this.textbox.createTextRange){var m=this.textbox.createTextRange();m.moveStart("character",f);m.moveEnd("character",g-this.textbox.value.length);m.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(f,g);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(f){if(!document.activeElement||this.textbox==document.activeElement){this.cur=-1;this.setupLayer();gx.dom.shouldPurge()&&gx.dom.purge(this.layer,!0);this.layer.innerHTML=
"";if(!this.IFrameControl){var g=!1;this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame");this.IFrameControl||(g=!0,this.IFrameControl=document.createElement("IFRAME"),this.IFrameControl.src="about:blank",this.IFrameControl.id="gxAutosuggestIFrame");$(this.IFrameControl).css({zIndex:1,display:"none",position:"absolute"});this.IFrameControl.frameBorder="0";g&&document.body.appendChild(this.IFrameControl)}for(var m=f.length,p=0;p<m;p++)g=document.createElement("div"),g.appendChild(document.createTextNode(f[p].d)),
g.style.width=this.textbox.offsetWidth,this.layer.appendChild(g);this.layer.style.left=this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;$([this.IFrameControl,this.layer]).show()}};this.typeAhead=function(f){if(this.textbox.createTextRange||
this.textbox.setSelectionRange){var g=this.textbox.value.length;this.pickvalue(f);f=f.length;g<f&&this.selectRange(g,f)}};this.pickvalue=function(f,g){for(var m=this.aSuggestions?this.aSuggestions.length:0,p=0;p<m;p++)if(this.aSuggestions[p].d==f){this.textbox.value=f;!0===g&&gx.evt.fireEvent(this.textbox,"input");break}};this.autosuggest=function(f,g){this.aSuggestions=f;f=this.aSuggestions.length;if(g&&null!=this.aSuggestions&&1==f)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&
null!=this.aSuggestions&&0<f&&(1==f&&this.aSuggestions[0].d!=this.textbox||1<f)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()};this.createDropDown=function(){var f=!1;this.layer=gx.dom.byId("gxAutosuggestElement");this.layer||(f=!0,this.layer=document.createElement("div"),this.layer.className="suggestions",this.layer.id="gxAutosuggestElement");this.setupLayer();f&&document.body.appendChild(this.layer)};this.setupLayer=function(){$(this.layer).hide();this.textbox.offsetWidth&&
$(this.layer).width(this.textbox.offsetWidth);this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=function(f){f=f||window.event;var g=gx.evt.source(f);"mousedown"==f.type?(gx.evt.stopPropagation(f),this.pickvalue(g.firstChild.nodeValue,!0),this.hideSuggestions(),window.setTimeout(function(){gx.fn.setFocus(this.textbox)}.bind(this),100)):"mouseover"==f.type?this.highlightSuggestion(g):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var f=this.textbox,g=0;null!=f&&"BODY"!=
f.tagName;)g+=f.offsetLeft,f=f.offsetParent;for(f=this.textbox;null!=f&&"BODY"!=f.tagName;)g-=f.scrollLeft,f=f.parentNode;return g};this.getTop=function(){for(var f=this.textbox,g=0;null!=f&&"BODY"!=f.tagName;)g+=f.offsetTop,f=f.offsetParent;for(f=this.textbox;null!=f&&"BODY"!=f.tagName;)g-=f.scrollTop,f=f.parentNode;return g};this.handleKeyDown=function(f){switch(f.keyCode){case 38:this.previousSuggestion();gx.evt.cancel(f,!0);break;case 40:this.nextSuggestion();gx.evt.cancel(f,!0);break;case 13:this.hideSuggestions()}};
this.handleKeyUp=function(f){f=f.keyCode;if(9==f)this.hideSuggestions();else if(8==f||46==f)this.requestSuggestions(this,this.provider,!1);else if(!(32>f||33<=f&&46>f||112<=f&&123>=f))this.requestSuggestions(this,this.provider,this.typeahead);else if(0===f){f=this.textbox.value.length;var g=parseInt($(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH)||"0",10);f!==g&&this.requestSuggestions(this,this.provider,this.typeahead)}$(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,this.textbox.value.length)};
this.init()},suggestProvider:function(l,c,d,k){this.requestSuggestions=function(a,b,f,g){var m,p=gx.ajax.gxObjectUrl(l)+"?",u="gxajaxSuggest_"+k,x=c.length;for(m=0;m<x;m++){var w=gx.fn.evalCtxScope(l,c[m]);void 0!=w&&(u+=","+encodeURIComponent(w))}u+=","+encodeURIComponent(void 0===g?gx.fn.getControlValue_impl(d):g);x=a.length;for(m=0;m<x;m++)u+=","+encodeURIComponent(gx.fn.evalCtxScope(l,a[m]));p+=gx.ajax.encryptParms(l,u);gx.http.doCall({method:"GET",url:p,handler:function(A,q){A=gx.json.evalJSON(q);
this.values=gx.fx.returnSuggestValues(this.VarRefresh,A[0]);b()},error:f,obj:this})}},returnSuggestValues:function(l,c){return c},addElement:function(l,c,d){if(!this.elementExists(l,c,d)){var k=c.id;!0===d&&(k+=c.types.sort().join(""));l.splice(0,0,c);l[k]=c}},elementExists:function(l,c,d){var k=c.id;!0===d&&(k+=c.types.sort().join(""));return l[k]?!0:!1},deleteElement:function(l,c,d){var k=c;d&&(k+=d.sort().join(""));l[k]&&delete l[k];k=l.length;for(var a=0;a<k;a++){var b=l[a];if(b.id==c)if(d){if(this.matchingTypes(d,
b.types)){l.splice(a,1);break}}else{l.splice(a,1);break}}return l},matchingTypes:function(l,c){for(var d=c.length,k=0;k<d;k++){for(var a=!1,b=l.length,f=0;f<b;f++)c[k].toLowerCase()==l[f].toLowerCase()&&(a=!0);if(!a)return!1}return!0},findControl:function(l,c,d,k){c=gx.dom.el(d);if(null!=c&&"none"!==$(c).css("display"))return c;c=gx.fn.getRONode(d,!1);if(k&&null!=c&&$(c).is(":visible"))return c;c=gx.dom.el("gxHTMLWrp"+d);if(null!=c)return c;k&&!l.id&&"A"===l.tagName&&(l=l.parentNode);d="(^"+(k?"("+
gx.fn.getRONodePrefix()+")?":"")+"v?"+d+"_(?:(?:[0-9]){4})+$)";d=new RegExp(d);return null!=l&&d.test(l.id)?l:null},isUnderMouse:function(l){var c=gx.evt.mouse.x,d=gx.evt.mouse.y,k=gx.dom.position(l),a=gx.dom.dimensions(l);return c>=k.x&&c<=k.x+a.w&&d>=k.y&&d<=k.y+a.h||"DIV"==l.tagName&&0===a.w&&0===a.h&&l.firstChild&&(k=gx.dom.position(l.firstChild),a=gx.dom.dimensions(l.firstChild),c>=k.x&&c<=k.x+a.w&&d>=k.y&&d<=k.y+a.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(l){return"dblclick"==
l?this.dblclicks:this.generics},addEventHandler:function(l,c,d,k){d=gx.lang.emptyObject(l)?d:l.CmpContext+d;l={id:c+d,cId:d,type:c,obj:l,hdl:k};c=this.getEventHandlers(c);gx.fx.addElement(c,l,!1)},deleteEventHandlers:function(l){for(var c=[this.dblclicks,this.generics],d=c.length,k=0;k<d;k++){for(var a=[],b=c[k],f=b.length,g=0;g<f;g++){var m=b[g];m.obj==l&&a.push(m)}f=a.length;for(g=0;g<f;g++)gx.fx.deleteElement(b,a[g].id)}},hasEventHandler:function(l,c){var d=gx.evt.source(c);l=this.getEventHandlers(l);
for(var k=l.length,a=!1,b=0;b<k&&!a;b++){var f=l[b];f=gx.fx.findControl(d,f.obj,f.cId,!0);null!=f&&(a=c.currentTarget===f||gx.fx.isUnderMouse(f))}return a},delayedDispatch:function(l){return gx.fx.dom.hasEventHandler("dblclick",l)},raiseEvent:function(l,c){c=gx.evt.source(c);var d=$(c),k=gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR;"dblclick"==l&&(clearTimeout(parseInt(d.attr(k),10)),d.removeAttr(k));l=this.getEventHandlers(l);d=l.length;for(k=0;k<d;k++){var a=l[k],b=gx.fx.findControl(c,a.obj,a.cId,
!0);null!=b&&gx.fx.isUnderMouse(b)&&a.hdl.call(a.obj)}},highlight:function(l,c,d){var k=gx.color.fromRGB(c[0],c[1],c[2]),a=gx.dom.getStyle(l,"backgroundColor"),b="transparent"==a||"rgba(0, 0, 0, 0)"==a;return{play:function(){l.style.backgroundColor=k.Html;setTimeout(this.end,d)},end:function(){var f=a;b&&(f="transparent");l.style.backgroundColor=f}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(l,
c,d){d&&(gx.evt.setEventRow(l,this.dragCtrl),this.obj=d.call(l,this.dragCtrl),this.obj.gxDragTypes=c)},drop:function(l,c,d){d&&d.call(c,l,this.dragCtrl,this.obj)},noDrop:function(){var l=this.noDropCtrl;null!=l&&l.gxDndClassName&&(l.className=l.gxDndClassName+"NoAcceptDrag")},out:function(){var l=this.dropCtrl;l&&l.gxClassName&&(l.className=l.gxClassName);this.dropCtrl=null;l=this.noDropCtrl;null!=l&&l.gxClassName&&(l.className=l.gxClassName);this.noDropCtrl=null},over:function(){var l=this.dropCtrl;
null!=l&&l.gxDndClassName&&(l.className=l.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);this.clonCtrl=null},restoreControl:function(){var l=this.clonCtrl;null!=l&&(null==this.toHdl&&(l.dropLeft=parseFloat(l.style.left||"0"),l.dropTop=parseFloat(l.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored()?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(l=this.nextCoords(),
this.moveDragControl(l.X,l.Y)))},nextCoords:function(){var l=this.clonCtrl,c=parseFloat(l.style.left||"0"),d=parseFloat(l.style.top||"0");c>=d?(--c,d=l.dropTop-(l.dropTop-l.originalTop)*(l.dropLeft-c)/(l.dropLeft-l.originalLeft)):(--d,c=l.dropLeft-(l.dropTop-d)*(l.dropLeft-l.originalLeft)/(l.dropTop-l.originalTop));c<=l.originalLeft&&(c=l.originalLeft);d<=l.originalTop&&(d=l.originalTop);return{X:c,Y:d}},moveControl:function(l){if(null==this.clonCtrl){var c=document.createElement("DIV");c.style.position=
"absolute";l.gxDndClassName&&(c.className=l.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(c,!0);c.innerHTML=this.dragInfo();gx.fn.setOpacity(50,c);document.body.appendChild(c);c.originalLeft=gx.evt.mouse.x-10;c.originalTop=gx.evt.mouse.y-10;c.diffLeft=10;c.diffTop=10;this.clonCtrl=c}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var l=this.clonCtrl;if(null==l)return!0;var c=parseFloat(l.style.left||"0"),d=parseFloat(l.style.top||"0")-l.originalTop;
return 0>=c-l.originalLeft&&0>=d?!0:!1},moveDragControl:function(l,c){try{var d=this.clonCtrl;null!=d&&(d.style.left=l-d.diffLeft+"px",d.style.top=c-d.diffTop+"px")}catch(k){this.deleteClonControl()}},dragInfo:function(){if(null!=this.obj){var l="",c="",d;for(d in this.obj){if("gxDragTypes"!=d){var k=[l];if("function"==typeof this.obj[d])continue;c+=d+": "+this.obj[d]+"</br>";l=k[0]}if(5<=l){c+="...";break}l++}return c}return""},deleteHandlers:function(l){gx.thread.Mutex(this,this.deleteHandlersSync,
[l])},deleteHandlersSync:function(l){var c=[],d,k=this.sources.length;for(d=0;d<k;d++){var a=this.sources[d];a.obj!=l&&c.push(a)}this.sources=c;c=[];k=this.targets.length;for(d=0;d<k;d++)a=this.targets[d],a.obj!=l&&c.push(a);this.targets=c},addSource:function(l,c,d,k,a){gx.thread.Mutex(this,this.addSourceSync,[l,c,d,k,a])},addSourceSync:function(l,c,d,k,a){c=gx.lang.emptyObject(l)?c:l.CmpContext+c;gx.fx.addElement(this.sources,{id:c,cssClass:d,types:k,obj:l,hdl:a},!1)},addTarget:function(l,c,d,k,
a){gx.thread.Mutex(this,this.addTargetSync,[l,c,d,k,a])},addTargetSync:function(l,c,d,k,a){c=gx.lang.emptyObject(l)?c:l.CmpContext+c;gx.fx.addElement(this.targets,{id:c,cssClass:d,types:k,obj:l,hdl:a},!0)},deleteSource:function(l){gx.thread.Mutex(this,this.deleteSourceSync,[l])},deleteSourceSync:function(l){this.sources=gx.fx.deleteElement(this.sources,l)},getSource:function(l){l=gx.evt.source(l);for(var c=this.sources.length,d=0;d<c;d++){var k=this.sources[d],a=this.dragCtrl=gx.fx.findControl(l,
k.obj,k.id);if(null!=a&&(a.gxClassName=a.className,a.gxDndClassName=k.cssClass,gx.fx.isUnderMouse(a)))return k}return this.obj=this.dragCtrl=null},getTarget:function(l,c){l=gx.evt.source(l);for(var d=this.targets.length,k=0;k<d;k++){var a=this.targets[k],b=gx.fx.findControl(l,a.obj,a.id);if(null!=b&&(b.gxClassName=b.className,b.gxDndClassName=a.cssClass,gx.fx.isUnderMouse(b))){if(gx.fx.matchingTypes(c,a.types))return this.noDropCtrl=null,this.dropCtrl=b,a;this.out();this.noDropCtrl=b;this.noDrop();
return null}}this.out();return null}},notifications:{queuedEvents:[],initialize:function(l){this.serialRunner=gx.evt.serialRunner();l.notifications||(l.notifications=[],gx.fx.obs.addObserver("gx.ws.onMessage.notifications",l,gx.fx.notifications.notify.closure(l),{single:!1,doNotDelete:l.IsMasterPage}),gx.fx.obs.addObserver("gx.onafterevent",l,gx.fx.notifications.fireQueuedEvents.closure(l),{single:!1,doNotDelete:l.IsMasterPage}));if(!this.webSocket){l.fullAjax||gx.dbg.write('Warning: WebNotifications are not supported with "Web User Experience": "Previous versions". You must use Smooth.');
l=gx.fn.getHidden("GX_WEBSOCKET_PORT");var c=gx.basePath&&0<gx.basePath.length?"/":"";this.webSocket=new gx.webSocket({port:l,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),wsProtocol:"https:"===location.protocol?"wss://":"ws://",host:l?location.hostname+":"+l+"/":location.host+"/",resourceUrl:c+"gxwebsocket?",basePath:gx.basePath,namespace:"notifications"})}},deinit:function(){gx.fx.notifications.queuedEvents=[]},addTracker:function(l,c,d,k,a,b){gx.fx.notifications.initialize(l);l.notifications[c||
""]={gxO:l,handler:a,eventName:d,type:k,noWait:b}},notify:function(l){l=gx.json.evalJSON(l);var c=this.notifications[l.GroupName||""];c&&(gx.fx.notifications.queuedEvents.push({notifObj:c,data:l,executed:!1}),(c.noWait||gx.isInputEnabled())&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){var l=gx.fx.notifications.queuedEvents.slice();gx.fx.notifications.queuedEvents=[];var c=gx.fx.notifications.serialRunner;l.forEach(function(d){if(!d.executed){var k=d.notifObj.gxO;d.executed=
!0;if(gx.lang.emptyObject(d.data.Object)||d.data.Object.toUpperCase()==k.ServerClass.toUpperCase())task=function(){var a=d.notifObj.eventName;if(a){var b=k.isServerEvent(a),f={};f[d.notifObj.type[0][0]]=d.data;k.setEventParameters(d.notifObj.type,f);gx.evt.dispatcher.dispatch(k.getServerEventName(a),k,0,0,b,void 0,void 0,!0).done(function(){c.signalEndTask()})}else d.notifObj.handler(d.data),c.signalEndTask()},c.addTask(task)}})}},ctx:{setters:[],trackers:[],deleteHandlers:function(l){gx.thread.Mutex(this,
this.deleteHandlersSync,[l])},deleteHandlersSync:function(l){var c,d=[],k=this.setters.length;for(c=0;c<k;c++){var a=this.setters[c];a.obj!=l&&d.push(a)}this.setters=d;d=[];k=this.trackers.length;for(c=0;c<k;c++)a=this.trackers[c],a.obj!=l&&d.push(a);this.trackers=d},addSetter:function(l,c,d,k,a){gx.thread.Mutex(this,this.addSetterSync,[l,c,d,k,a])},addSetterSync:function(l,c,d,k,a){c=gx.lang.emptyObject(l)?c:l.CmpContext+c;gx.fx.addElement(this.setters,{id:c,cssClass:d,types:k,obj:l,hdl:a},!1)},
addTracker:function(l,c,d){gx.thread.Mutex(this,this.addTrackerSync,[l,c,d])},addTrackerSync:function(l,c,d){gx.fx.addElement(this.trackers,{id:l.CmpContext+l.IsMasterPage.toString(),cssClass:"",types:c,obj:l,hdl:d},!0)},deleteSetter:function(l){gx.thread.Mutex(this,this.deleteSetterSync,[l])},deleteSetterSync:function(l){this.setters=gx.fx.deleteElement(this.setters,l)},notify:function(l,c,d){gx.thread.Mutex(this,this.notifySync,[l,c,d])},notifySync:function(l,c,d){if(l&&l.forcedFocus)l.forcedFocus=
!1;else{var k,a=gx.lang.emptyObject,b=function(u,x){var w=gx.O;gx.setGxO(u);x();gx.setGxO(w)},f=null;if(a(c)||a(d)){var g=this.setters.length;for(k=0;k<g;k++){var m=this.setters[k];if(a(l)){if(f=gx.fx.findControl(null,m.obj,m.id),null!=f&&a(f.onfocus)&&gx.fx.isUnderMouse(f)){b.apply(this,[m.obj,function(){gx.evt.setEventRow(m.obj,f);c=m.types;d=m.hdl.call(m.obj,f)}]);break}}else if(l.id==m.id){b.apply(this,[m.obj,function(){f=l;gx.evt.setEventRow(m.obj,f);c=m.types;d=m.hdl.call(m.obj,f)}]);break}}}if(!a(c)&&
(d||""===d))for(a=this.trackers.length,k=0;k<a;k++){var p=this.trackers[k];gx.fx.matchingTypes(c,p.types)&&b.apply(this,[p.obj,function(){p.hdl.call(p.obj,null,f,d)}])}}}}};
gx.date=function(){var l=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\.?([0-9]{1,3})?\s?(AM|PM)?/i,c=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?[\.:]?([0-9]{1,3})?\s?(AM|PM)?/i,d=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,k=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00(\.000)?)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,a=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(b){return this.getDay()==
b.getDay()&&this.getMonth()==b.getMonth()&&this.getFullYear()==b.getFullYear()?!0:!1},toJson:function(){var b=new gx.date.gxdate("");b.assign_date(this);return b.json()},isoString:function(b){return b.toISOString()},jsonNullFormat:{Default:0,YearOne:1},gxdate:function(b,f){this.json=function(){var g=this.TimeFmt;this.TimeFmt=24;var m=this.HasTimePart,p=this.HasDatePart;this.HasDatePart=this.HasTimePart=!0;var u=this.getStringWithFmt("Y4MD")+" "+(m?this.getTimeString(!0,!0,!0,0<this.Value.getMilliseconds()):
"00:00:00");this.TimeFmt=g;this.HasTimePart=m;this.HasDatePart=p;return u};this.mapCTODFormatToPattern=function(g){return"ANSI"==g?"Y4MD":g};this.emptyDateString=function(g){return-1==g.indexOf("Y4")?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==g?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(g){g=this.mapCTODFormatToPattern(g);if(0===this.Value-a)return this.emptyDateString(g);var m=g,p,u=this.FormatPos(g);if(this.JsonNullFormat===gx.date.jsonNullFormat.YearOne){var x=
p="01";var w="0001"}else p=gx.text.padl(this.Value.getDate().toString(),2,"0"),x=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),w=gx.text.padl(this.Value.getFullYear().toString(),4,"0");m=m.replace("D",p+(3>u.DPos?"/":""));m=m.replace("M",x+(3>u.MPos?"/":""));-1==g.indexOf("Y4")?(w=w.slice(2,4),m=m.replace("Y",w+(3>u.YPos?"/":""))):m=m.replace("Y4",w+(3>u.YPos?"/":""));return m};this.getString=function(g){gx.lang.emptyObject(g)&&(g=gx.dateFormat);return this.getStringWithFmt(g)};this.toISOString=
function(){return this.Value.toISOString()};this.toString=function(){var g=this.HasTimePart?" "+this.getTimeString(!0,!0):"";return this.getString()+g};this.gxdtoc=function(g,m){return this.getStringWithFmt(this.mapCTODFormatToPattern(g)).replace("/",m)};this.getUrlVal=function(){if(gx.date.isNullDate(this))return"";if(this.HasDatePart){var g=gx.text.padl(this.Value.getDate().toString(),2,"0");var m=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0");var p=gx.text.padl(this.Value.getFullYear().toString(),
4,"0")}else m=g="01",p="0001";var u=this.HasTimePart?gx.text.padl(this.Value.getHours().toString(),2,"0"):"",x=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",w=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",A=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";return p+m+g+u+x+w+A};this.getTimeString=function(g,m,p,u){if(gx.date.isNullDate(this)&&gx.blankWhenEmpty){var x="";p&&(x+="  ");g&&(x+="   ");m&&(x+="   ");
u&&(x+="    ");return x}x="";var w=this.Value.getHours();p=p||!0;12==this.TimeFmt&&12<=w?(12<w&&(w-=12),x=" PM"):12==this.TimeFmt&&(x=" AM");var A=this.HasTimePart?gx.text.padl(w.toString(),2,"0"):"",q=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",v=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",t=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";0===w&&""!==x&&(A="12");w="";p&&(w=A);g&&(w=w+":"+q);m&&(w=w+":"+
v);u&&(w=w+"."+t);return w+x};this.FormatPos=function(g){if("ANSI"==g){var m=1;var p=2;g=3}else{var u=g.indexOf("Y4");m=-1==u?g.indexOf("Y")+1:u+1;p=g.indexOf("M");0!==u&&p++;g=g.indexOf("D");0!==u&&g++}return{YPos:m,MPos:p,DPos:g}};this.assign_date=function(g){g instanceof gx.date.gxdate?(this.Value=g.Value,this.HasTimePart=g.HasTimePart,this.HasDatePart=g.HasDatePart):this.Value=void 0===g?a:g};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==
gx.NULL_TIMEZONEOFFSET)return this;var g=new gx.date.gxdate("");g.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());g.HasTimePart=this.HasTimePart;g.HasDatePart=this.HasDatePart;return g};this.fromUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var g=new gx.date.gxdate("");g.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());g.HasTimePart=this.HasTimePart;g.HasDatePart=
this.HasDatePart;return g};this.assign_string=function(g,m,p,u){var x=l,w=x.exec(g),A=0;if(null!=w){var q=g.indexOf(w[0]);0<q&&"."==gx.text.substring(g,q,1)&&(w=null)}if(null==w)-1!=g.indexOf("  /  /  ")&&(p=!0);else{q=w.length;for(var v=1;v<q;v++)gx.lang.emptyObject(w[v])||A++}var t=this.FormatPos(m),B=v=q=m=0,G=0,J=0,n=0;try{this.HasDatePart=!0;if(6==t.DPos+t.MPos+t.YPos&&null!=w&&3<=A){null!=w[t.YPos]&&(m=parseInt(w[t.YPos],10));if(isNaN(m))throw"InvalidDate";m<this.FYearOfCentury?m+=2E3:100>m?
m+=1900:1E3>m&&(m+=1E3);null!=w[t.MPos]&&(q=parseInt(w[t.MPos],10)-1);if(isNaN(q)||0>q||11<q)throw"InvalidDate";null!=w[t.DPos]&&(v=parseInt(w[t.DPos],10));if(isNaN(v)||0>v||v>gx.date.maxDays(q,m))throw"InvalidDate";}else this.HasDatePart=!1;this.HasTimePart=!1;t=0;null==w?(x=c,w=x.exec(g),null!=w&&(t=1,this.HasTimePart=!0)):3<A&&(t=4,this.HasTimePart=!0);if(this.HasTimePart&&!p){null!=w[t]&&(B=parseInt(w[t],10));if(gx.lang.emptyObject(w[t])||isNaN(B))throw this.HasTimePart=!1,"InvalidHour";null!=
w[t+1]&&(G=parseInt(w[t+1],10));isNaN(G)&&(G=0);null!=w[t+2]&&(J=parseInt(w[t+2],10));isNaN(J)&&(J=0);null!=w[t+3]&&(n=parseInt(w[t+3],10));isNaN(n)&&(n=0);if(!this.validTime(-1!=g.toLowerCase().indexOf("m"),B,G,J,n))throw"InvalidHour";(-1!=g.indexOf("PM")||-1!=g.indexOf("pm"))&&12>B&&(B+=12);-1==g.indexOf("AM")&&-1==g.indexOf("am")||12!=B||(B=0)}}catch(r){if(u)throw r;"InvalidDate"==r&&(n=J=G=B=v=q=m=0);"InvalidHour"==r&&(n=J=G=B=0)}this.Value=new Date(m,q,v,B,G,J,n);0<m+q+v+B+G+J+n&&(!this.HasTimePart||
p)&&this.Value.getDate()!=v&&(this.Value=new Date(Date.UTC(m,q,v,B+12,G,J,n)))};this.validTime=function(g,m,p,u,x){return g&&12<m||!g&&(24<m||24==m&&0<p+u)?!1:59>=p||59>=u||999>=x};this.compare=function(g){return"string"==typeof g?this.compare_string(g):this.compare_date(g)};this.compare_string=function(g){g=new gx.date.gxdate(g);return this.compare_date(g.Value)};this.compare_date=function(g){if(!g)return null;g=g instanceof gx.date.gxdate?g.Value:g;return this.HasTimePart?this.Value-g:this.Value.getFullYear()>
g.getFullYear()?1:this.Value.getFullYear()<g.getFullYear()?-1:this.Value.getMonth()>g.getMonth()?1:this.Value.getMonth()<g.getMonth()?-1:this.Value.getDate()>g.getDate()?1:this.Value.getDate()<g.getDate()?-1:0};this.JsonNullFormat=gx.date.jsonNullFormat.Default;this.TimeFmt=gx.timeFormat||12;this.SFmt=f||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof b?this.assign_string(b,this.SFmt):this.assign_date(b)},isANSIDateTime:function(b){return"string"==typeof b&&l.test(b)?!0:
!1},isANSIDate:function(b){return"string"==typeof b&&d.test(b)?!0:!1},isLeapYear:function(b){return 0===b%400?!0:0===b%100?!1:0===b%4?!0:!1},dateObject:function(b){return b instanceof this.gxdate?b.Value:"string"==typeof b?(new this.gxdate(b,this.isANSIDate(b)?"Y4MD":void 0)).Value:b instanceof Date?b:new Date},gxdateObject:function(b){if(b instanceof this.gxdate)return b;if("string"==typeof b)return new this.gxdate(b,this.isANSIDate(b)?"Y4MD":void 0);if(b instanceof Date){var f=new this.gxdate("");
f.assign_date(b);return f}return new this.gxdate("")},clonedDate:function(b,f){var g=new this.gxdate("");g.assign_date(f);b instanceof this.gxdate&&(g.SFmt=b.SFmt,g.HasTimePart=b.HasTimePart,g.HasDatePart=b.HasDatePart);return g},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var b=this.today();b.HasTimePart=!0;b.HasDatePart=!0;return b},today:function(){var b=new this.gxdate("");b.assign_date(new Date);return b},ctot:function(b,f){return new this.gxdate(b,f)},ctod:function(b,
f){b=new this.gxdate(b,f);b.Value.setHours(0,0,0,0);return b},ymdtod:function(b,f,g){b=new this.gxdate(b+"/"+f+"/"+g,"ANSI");b.Value.setHours(0,0,0,0);return b},ymdhmstot:function(b,f,g,m,p,u){return new this.gxdate(b+"/"+f+"/"+g+" "+m+":"+p+":"+u,"ANSI")},hour:function(b){return(new this.gxdate(b)).Value.getHours()},minute:function(b){return(new this.gxdate(b)).Value.getMinutes()},second:function(b){return(new this.gxdate(b)).Value.getSeconds()},millisec:function(b){return 864E5*b},day:function(b){return(new this.gxdate(b)).Value.getDate()},
month:function(b){return(new this.gxdate(b)).Value.getMonth()+1},year:function(b){return(new this.gxdate(b)).Value.getFullYear()},addDays:function(b,f){return this.addMill(b,this.dayToMillisec(f))},addSec:function(b,f){return this.addMill(b,this.secToMillisec(f))},addMill:function(b,f){var g=this.dateObject(b).clone(),m=new this.gxdate;m.assign_date(g);var p=g.getMilliseconds();g.setMilliseconds(p+f);return m.getString(this.isANSIDate(b)?"Y4MD":-1==gx.dateFormat.indexOf("Y4")?gx.dateFormat.replace("Y",
"Y4"):gx.dateFormat)},secDiff:function(b,f){return this.millisecToSec(this.milliDiff(b,f))},daysDiff:function(b,f){return this.millisecToDay(this.milliDiff(b,f))},milliDiff:function(b,f){b=this.gxdateObject(b);f=this.gxdateObject(f);b=b.Value.valueOf();f=f.Value.valueOf();return b-f},dayToMillisec:function(b){return 864E5*b},secToMillisec:function(b){return 1E3*b},millisecToDay:function(b){return b/24/60/60/1E3},millisecToSec:function(b){return b/1E3},dateParm:function(b){return"string"==typeof b?
new this.gxdate(b):b},urlDate:function(b,f){b="undefined"!=typeof b.value?b.value:gx.dom.spanValue(b)||b;f=new this.gxdate(b,f);return this.isNullDate(f)?"":f.Value.getFullYear().toString()+gx.text.padl((f.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0")},urlDateTime:function(b,f){b="undefined"!=typeof b.value?b.value:gx.dom.spanValue(b)||b;f=b instanceof this.gxdate?b:new this.gxdate(b,f);return f.HasDatePart?this.isNullDate(f)?"":f.Value.getFullYear().toString()+
gx.text.padl((f.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0")+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),2,"0")+gx.text.padl(f.Value.getSeconds().toString(),2,"0")+(0===f.Value.getMilliseconds()?"":gx.text.padl(f.Value.getMilliseconds().toString(),3,"0")):"00010101"+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),2,"0")+gx.text.padl(f.Value.getSeconds().toString(),
2,"0")},isNullDate:function(b){b instanceof this.gxdate&&(b=b.Value);var f=this.nullDate();return f.getFullYear()!=b.getFullYear()||f.getMonth()!=b.getMonth()||f.getDate()!=b.getDate()||f.getHours()!=b.getHours()||f.getMinutes()!=b.getMinutes()||f.getSeconds()!=b.getSeconds()||f.getMilliseconds()!=b.getMilliseconds()?!1:!0},dtoc:function(b,f,g){return(new this.gxdate(b,this.isANSIDate(b)?"Y4MD":void 0)).gxdtoc(f,g)},dttoc:function(b,f,g){b=new this.gxdate(b,this.isANSIDateTime(b)?"Y4MD":void 0);var m=
gx.dateFormat,p="";0<f&&(8<f&&-1==m.indexOf("Y4")&&(m=m.replace("Y","Y4")),p=b.getStringWithFmt(m)+" ");return 0<g?p+b.getTimeString(3<g,8<=g,1<g,12<=g):p},nulldate_toc:function(b,f){var g=new this.gxdate("");g.HasTimePart=!0;g.HasDatePart=!0;var m=gx.dateFormat,p="";0<b&&(8<b&&-1==m.indexOf("Y4")&&(m=m.replace("Y","Y4")),p=g.getStringWithFmt(m)+" ");return 0<f&&!gx.blankWhenEmpty?p+g.getTimeString(3<f,8<=f,1<f,12<=f):p},addyr:function(b,f){return this.addmth(b,12*f)},addmth:function(b,f){var g=this.gxdateObject(b);
b=new Date(this.dateObject(b).getTime());var m=b.getDate();b.setDate(1);b.setMonth(b.getMonth()+1*f);b.setDate(Math.min(m,this.maxDays(b.getMonth(),b.getFullYear())));return this.clonedDate(g,b)},dtadd:function(b,f){var g=this.gxdateObject(b);b=new Date(this.dateObject(b).getTime());var m=b.getMilliseconds();b.setMilliseconds(m+1E3*f);return this.clonedDate(g,b)},dtdiff:function(b,f){b=this.dateObject(b);f=this.dateObject(f);return(b-f)/1E3},maxDays:function(b,f){return[31,this.isLeapYear(f)?29:28,
31,30,31,30,31,31,30,31,30,31][b]},eom:function(b){var f=this.gxdateObject(b);b=this.dateObject(b);b=new Date(b.getTime());var g=this.maxDays(b.getMonth(),b.getFullYear());b.setDate(g);return this.clonedDate(f,b)},dow:function(b){b=this.dateObject(b);return b.equalsNoTime(this.nullDate())?0:b.getDay()+1},age:function(b,f){b=this.dateObject(b);f=this.dateObject(f);var g=this.nullDate();if(b.equalsNoTime(g)||f.equalsNoTime(g)||b.equalsNoTime(f))return 0;if(f>=b){g=36E5*f.getUTCHours()+6E4*f.getUTCMinutes()+
1E3*f.getUTCSeconds()-(36E5*b.getUTCHours()+6E4*b.getUTCMinutes()+1E3*b.getUTCSeconds());if(f.getUTCDate()>b.getUTCDate()||f.getUTCDate()==b.getUTCDate()&&0<=g)g=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds()));else for(g=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth()-1,b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds())),f=f.getUTCMonth()-1,-1==f&&(f=11);g.getUTCMonth()!=f;)g.setUTCDate(g.getUTCDate()-
1);return b=g.getUTCMonth()>=b.getUTCMonth()?g.getUTCFullYear()-b.getUTCFullYear():g.getUTCFullYear()-1-b.getUTCFullYear()}return 0},valid_date:function(b,f,g,m,p,u,x,w){var A=x||!1,q=!1;u=b.value;x=g;var v="^[ ]*(",t=0<f?"GXM_invaliddate":"GXM_invalidtime";var B=gx.num.replaceFullWidthNumerals(u);B=B.split("\n")[0];g="YMD"==g?1:0;p=12==p?1:0;if(k.test(B))q=!0,u=B="";else if(0<f&&5>=B.length){var G=(new Date).getFullYear().toString().substring(10===f?0:2);B=1===g?G+"/"+B:B+"/"+G}v=0<f?8==f?0===g?
v+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":v+"([0-9]{2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":0===g?A?v+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":v+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":A?v+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":v+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":v+"( )?( )?( )?";0<m&&(v+="(",0<f&&(v+="[ ]*"),v+="([0-9]{1,2})",v=2<m?v+"(:?([0-9]{1,2}))?":v+"(( )?)?",v=5<m?v+"(:?([0-9]{1,2}))?":v+"(( )?)?",v=8<m?v+"(\\.?([0-9]{1,3}))?":v+"(( )?)?",
v=(1==p?v+"[ ]*(a|am|p|pm)?":v+"(( )?)?")+")?");g=new RegExp(v+")?[ ]*$","i");if(g.test(B)){A=B.match(g);0<f?(g="/",0<B.indexOf("-")&&(g="-"),A[2]?g=A[2]+g+A[3]+g+A[4]:(g=1==w?"        ":"  "+g+"  "+g+"  ",10==f&&(g+="  "))):g="";0<m&&(0<f&&(g+=" "),1!=w||A[6]||A[8]||A[10]||A[12]?(A[6]?g+=A[6]:q?(w=B.match(k),g=w[4]?g+w[4]:g+(1==p?"12":"00")):g+=1==p?"12":"00",2<m&&(g=A[8]?g+":"+A[8]:g+":00"),5<m&&(g=A[10]?g+":"+A[10]:g+":00"),8<m&&(g=A[12]?g+"."+A[12]:g+".000"),1==p&&(g="p"==(A[13]?A[13].substr(0,
1):"a").toLowerCase()?g+" PM":g+" AM")):g+="        ");p=new this.gxdate("",x);try{p.assign_string(g,x,0>=m,!0),""!==gx.text.trim(g)&&(g=this.formatDateTime(m,f,x,p))}catch(J){return gx.fn.alert(b,gx.getMessage(t)),gx.csv.setFormatError(b),!1}if(g!=u){b.value=g;if(-1!=navigator.userAgent.indexOf("Firefox/2"))b.onchange();(f=gx.O.getValidStructFld(b))&&gx.O.refreshDependantGrids(f)}gx.csv.setFormatError(b,!1);return!0}gx.fn.alert(b,gx.getMessage(t));gx.csv.setFormatError(b);return!1},formatDateTime:function(b,
f,g,m){var p="";0<b&&m.HasTimePart&&(p=m.getTimeString(4<=b,8<=b,void 0,12<=b));b=g;8<f&&-1==b.indexOf("Y4")&&(b=b.replace("Y","Y4"));return 0<f?m.getStringWithFmt(b)+(m.HasTimePart?" "+p:""):m.HasTimePart?p:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(l){this.capacity=l||10;this.buffer=[];this.append=function(c){this.buffer.push(c);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var l=arguments[0],c=arguments.length,d=1;d<c;d++)l=l.replace("%"+d,gx.text.rtrim(arguments[d].toString()));return l},formatString:function(l,c,d,k){if(d)return gx.text.padl("",
c,"*");if(!gx.lang.emptyObject(k)&&this.startsWith(k,"@")&&0<k.indexOf("!")){c="";d=this.padr("",l?l.length:0,"!");k=this.replaceAll(d,"!"," ");if(l)for(var a=0,b=0,f;a<k.length&&b<l.length;)f=l[b],this.isSeparator(d[a])?(f==d[a]?(b++,c+=f):c+=k[a],a++):(c+=this.getCaret(d,f,a,c),a++,b++);else c=k;return gx.text.rtrim(c)}return l},getCaret:function(l,c,d,k){switch(l[d]){case "9":if(!isNaN(c))return c;break;case "X":return c;case "A":case "M":case "!":return c.toUpperCase();case "Z":if("1"<=c&&"9">=
c)return c;if("0"==c){l=!0;for(c=0;c<d;c++)if(" "!=k[c]){l=!1;break}if(!l)return"0"}}return" "},isSeparator:function(l){return"9"!=l&&"X"!=l&&"!"!=l&&"Z"!=l&&"A"!=l&&"M"!=l},replaceAll:function(l,c,d){return-1!=l.toString().indexOf(c)?String(l).split(c).join(d):l},charReplace:function(l,c,d){for(var k="",a=l.length,b=0;b<a;b++){for(var f=!1,g=c.length,m=0;m<g;m++)if(l.charAt(b)==c[m]&&m<d.length){k+=d[m];f=!0;break}!1===f&&(k+=l.charAt(b))}return k},length:function(l){return l.length},upper:function(l){return l.toUpperCase()},
lower:function(l){return l.toLowerCase()},padr:function(l,c,d){var k=c-l.length;if(1>k)return l.substring(0,c);for(c=0;c<k;c++)l+=d;return l},padl:function(l,c,d){var k=c-l.length;if(1>k)return l.substring(0,c);c="";for(var a=0;a<k;a++)c+=d;return c+l},ltrimstr:function(l,c,d){return this.ltrim(gx.num.str(l,c,d))},ltrim:function(l){return l.toString().replace(/^ */,"")},rtrim:function(l){return l.toString().replace(/ *$/,"")},trim:function(l){return this.rtrim(this.ltrim(l))},chr:function(l){return String.fromCharCode(l)},
like:function(l,c){if(null===c)return!1;c=c.replace(/([\.\\\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:\-])/g,"\\$1");return(new RegExp(c.replace(/%/g,".*").replace(/_/g,"."))).test(l)},compare:function(l,c){return this.rtrim(l).localeCompare(this.rtrim(c))},concat:function(l,c,d){return this.rtrim(l)+d+c},space:function(l){for(var c="",d=0;d<l;d++)c+=" ";return c},substring:function(l,c,d){return 0>d?l.toString().substring(c-1):l.toString().substring(c-1,c-1+d)},tostring:function(l){return l.toString()},toformattedstring:function(l){return l.toString().replace(".",
gx.decimalPoint)},newline:function(){return"\n"},escapeMapping:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(l,c){if(l=gx.text.escapeMapping[c])return l;l=c.charCodeAt();return"\\u00"+Math.floor(l/16).toString(16)+(l%16).toString(16)},escapeString:function(l){return this.escapeRegex.start.test(l)?'"'+l.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+l+'"'},indexOf:function(l,c,d){if(d>
l.length)return 0;0>=d&&(d=1);return l.indexOf(c,d-1)+1},lastIndexOf:function(l,c,d){if(d>l.length)return 0;0>=d&&(d=l.length);return l.lastIndexOf(c,d-1)+1},endsWith:function(l,c){return-1!==l.indexOf(c,l.length-c.length)},startsWith:function(l,c){return 1==this.indexOf(l,c)},contains:function(l,c){return 0<this.indexOf(l,c)},charAt:function(l,c){return l.charAt(c-1)}};
gx.num=function(){var l=/[\uFF10-\uFF19]|[\uFF0C-\uFF0E]|\u2015|\u30FC|\uFF0F/g,c=function(d,k,a,b){var f=gx.lang.instanceOf,g="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,m=gx.thousandSeparator,p=gx.decimalPoint;"string"==typeof a&&(a=gx.num.parseFloat(a,m,p));"string"==typeof b&&(b=gx.num.parseFloat(b,m,p));return f(a,g)&&f(b,Number)?a[d](new g(b.toString())).toString():f(a,Number)&&f(b,g)?(new g(a.toString()))[d](b).toString():f(a,Number)&&f(b,Number)||"undefined"==typeof gx.num.dec?
k(a,b):a[d](b)};return{str:function(d,k,a){if("string"===typeof d)return d;"undefined"==typeof k&&(k=10);if("undefined"==typeof a||k-1<=a)a=0;d=gx.num.toFixed(d,a);return d.length<=k?gx.text.padl(d,k," "):gx.text.padr("",k,"*")},compare:function(d,k){if("number"===typeof d&&"number"===typeof k)return d>k?1:d===k?0:-1;"number"===typeof d&&(d=new gx.num.dec.bigDecimal(d.toString()));"number"===typeof k&&(k=new gx.num.dec.bigDecimal(k.toString()));return gx.lang.instanceOf(d,gx.num.dec.bigDecimal)&&
gx.lang.instanceOf(k,gx.num.dec.bigDecimal)?d.compareTo(k):d-k},maxNumericPrecision:function(){return 15},extractValue:function(d,k,a){a=gx.num.replaceFullWidthNumerals(a);if(gx.lang.instanceOf(a,Number)||this.overflowNumber(a))return a;var b="";a=void 0===a?"":a;var f=function(u){return"("===u.charAt(0)&&")"===u.charAt(u.length-1)};if(d){var g=f(d);f=f(a);g&&(d=d.substring(1,d.length-1),f&&(a=a.substring(1,a.length-1)));g=!1;for(var m=0;m<d.length;m++){var p=d.charAt(m);if("\\"!==p||g){if(("#"===
p||"?"===p||"\\"===p)&&g||"#"!==p&&"?"!==p&&"\\"!==p)b+=p;g=!1}else g=!0}b="+"==d.charAt(0)||"-"==d.charAt(0)?b.replace(/[\+\-\d,*\.*Z*\s]+/,""):b.replace(/[\d,*\.*Z*\s]+/g,"");d.lastIndexOf(".")!=d.indexOf(".")&&(a=gx.text.replaceAll(a,".",""));for(m=0;m<b.length;m++)a=a.replace(b.charAt(m),"");a=!gx.config.number.validation.strict&&k?gx.text.replaceAll(a,k,""):a;a=(f?"-":"")+a}return gx.text.replaceAll(a," ","")},formatNumber:function(d,k,a,b,f,g,m){if(!a||""===d&&"Blank"===m)return d?d.toString():
"";d=gx.lang.emptyObject(d)?"0":d;b=-1!=a.indexOf(",")?gx.thousandSeparator:"";m=gx.decimalPoint;var p=!1,u=gx.numericLenDec(a),x=u.Integers;k=u.Decimals;"string"==typeof d&&b&&(d=gx.text.replaceAll(d,b,""));"string"==typeof d&&(d=d.replace(m,"."));if(gx.num.overflowNumber(d))return d;try{d="undefined"!=typeof gx.num.dec&&d instanceof gx.num.dec.bigDecimal||0!==k?gx.num.setScale(d,k,m):gx.num.trunc(d,0).toString()}catch(B){d=d.toString()}var w=d.split(".");w[0]||(w[0]="0");w[1]||(w[1]="");if(g){if(w[1].length>
k&&w[1].replace(/0*$/,"").length>k)throw"InvalidNumber";if(f&&"-"==w[0].charAt(0)&&w[0].replace(/0*/,"").length>x||!f&&"-"==w[0].charAt(0)||w[0].replace(/[+]?0*/,"").length>x)throw"InvalidNumber";}g=w[0].substring(0,x);0>d&&(f=!0);if(w[1].length<k){u=w[1];for(x=w[1].length+1;x<=k;x++)u+="0";w[1]=u}var A=u="",q="";x="("===a.charAt(0)&&")"===a.charAt(a.length-1);f&&("-"!=g.charAt(0)||x?("+"==a.charAt(0)&&(0!==Number(d)&&(u="+"),"+"==g.charAt(0)&&(g=g.substring(1))),x&&(a=a.substring(1,a.length-1),0>
Number(d)&&(g=(-1*Number(g)).toString(),A="(",q=")"))):(u="-",g=g.substring(1)));if(b&&3<g.length){f=g;g="";for(d=3;d<f.length;d+=3)x=f.slice(f.length-d,f.length-d+3),g=b+x+g+"";d=f.substr(0,0===f.length%3?3:f.length%3);g=d+g}m=w[1]?m:"";0<k?(a=a.split("."),a[1]==gx.text.padr("",k,"Z")&&(p=!0)):(a=Array(a),0<a.length&&0===gx.text.replaceAll(gx.text.replaceAll(a[0],",",""),"Z","").length&&(p=!0));k=0;d="";f=w[1].replace(/0*$/,"");if(1<a.length){var v=a[1];w=!1;for(x=0;x<v.length;x++){var t=v.charAt(x);
if(w)d+=v.charAt(x);else if("9"!=t&&"Z"!=t&&"#"!=t&&"?"!=t||w)if("\\"===t&&w){d+=t;w=!1;continue}else"."==t||","==t||w||(d+=t);else f.length>k?(d+=f.charAt(k),k++):d+=this.checkPictureCharacter(t,!0);w="\\"==v.charAt(x)}}f="";v=a[0];k=g.length-1;1<a.length&&gx.text.endsWith(v,"Z")&&(v=v.replace(/Z$/,"9"));for(x=v.length-1;0<=x;x--)if(a=v.charAt(x),w=!1,1<x?w="\\"==v.charAt(x-1)&&"\\"!=v.charAt(x-2):0<x&&(w="\\"==v.charAt(x-1)),w)f=a+f,x--;else if("9"!=a&&"Z"!=a&&"#"!=a&&"?"!=a||w)"\\"===a&&w?f=a+
f:","!=a&&"+"!=a?f=a+f:","==a&&g.charAt(k)==b&&(f=g.charAt(k)+f,k--);else if(0<=k){if("Z"!=a&&"#"!=a&&"?"!=a||0!==Number(g.substring(0,k+1)))f=g.charAt(k)+f;k--}else f=this.checkPictureCharacter(a)+f;return!p||"0"!=f&&""!==f||0!==d.replace(/0+$/,"").length?A+u+f+(d?m+d:"")+q:""},checkPictureCharacter:function(d,k){switch(d){case "9":return"0";case "Z":return(void 0===k?0:k)?"0":"";case "#":return"";case "?":return" "}},add:function(d,k){return c("add",function(a,b){return a+b},d,k)},subtract:function(d,
k){return c("substract",function(a,b){return a-b},d,k)},multiply:function(d,k){return c("multiply",function(a,b){return a*b},d,k)},divide:function(d,k){return c("divide",function(a,b){return a/b},d,k)},negate:function(d){return gx.lang.instanceOf(d,Number)||"undefined"==typeof gx.num.dec?-d:d.negate()},pow:function(d,k){return c("pow",function(a,b){return Math.pow(a,b)},d,k)},mod:function(d,k){return c("remainder",function(a,b){return a%b},d,k)},toFixed:function(d,k){return(gx.lang.isBigDecimal(d)?
d:Math.round(d*Math.pow(10,k))/Math.pow(10,k)).toFixed(k)},setScale:function(d,k){if(gx.lang.instanceOf(d,Number))return gx.num.toFixed(d,k);"string"==typeof d&&(d=gx.text.trim(d));if(d.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===d.length&&0===k)return"0";var a=d.split(".");a[1]||(a[1]="");if(a[1].length<k){var b=a[1];for(d=a[1].length+1;d<=k;d++)b+="0";a[1]=b;return a[0]+(""===a[1]?"":".")+a[1]}return gx.num.toFixed(Number(parseFloat(d)),k)}return(new gx.num.dec.bigDecimal(d)).setScale(k,
gx.num.dec.ROUND_UP).toString()},parseFloat:function(d,k,a){if(gx.lang.instanceOf(d,Number)||this.overflowNumber(d))return d;d=this.toInvariant(d,k,a);return d.length>this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(d):parseFloat(d)},toInvariant:function(d,k,a){return"number"==typeof d||"undefined"!=typeof gx.num.dec&&d instanceof gx.num.dec.bigDecimal?d:gx.text.replaceAll(d,k,"").replace(a,".")},parseInt:function(d,k,a){if("number"==typeof d)return d;d=gx.text.replaceAll(d,
a,"");return parseInt(d,k)},overflowNumber:function(d){return/\*(\**)/.test(d)},urlDecimal:function(d,k,a){return"undefined"!=typeof d?(d="undefined"!=typeof d.value?d.value:d,d=this.parseFloat(d,k,a),d.toString()):""},random:function(){return Math.random()},abs:function(d){return Math.abs(d)},intval:function(d){d="undefined"!=typeof d?d.toString():"";d=d.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?parseInt(d,0):(new gx.num.dec.bigDecimal(d)).setScale(0,gx.num.dec.ROUND_UP);
isNaN(d)&&(d=0);return d},val:function(d){d=gx.text.trim(d).replace(",",".");d=this.parseFloat(d);isNaN(d)&&(d=0);return d},trunc:function(d,k){var a=d;d=d.toString();var b=d.indexOf(".");if(-1!=b){a=d.substring(0,b);if(0===k)return Number(a);d=d.substring(b+1,b+1+k);a=gx.num.parseFloat(a+"."+d);isNaN(a)&&(a=0)}return a},round:function(d,k){return 0<=k?parseFloat(gx.num.decimalAdjust("round",d,-k).toFixed(k)):gx.num.roundNeg(d,k)},decimalAdjust:function(d,k,a){if("undefined"===typeof a||0===+a)return Math[d](k);
k=+k;a=+a;if(isNaN(k)||"number"!==typeof a||0!==a%1)return NaN;k=k.toString().split("e");k=Math[d](+(k[0]+"e"+(k[1]?+k[1]-a:-a)));k=k.toString().split("e");return+(k[0]+"e"+(k[1]?+k[1]+a:a))},roundNeg:function(d,k){d=d.toString();var a=d.indexOf(".");var b=parseInt(k,0)+1;b=""+"0000000000000000000000".substring(1,b);var f=parseFloat("."+b+"5");-1==a?(a="0000000000000000000000",b=""+d):0===a?(b="0",d=0+parseFloat(d)+parseFloat(f),d+="0000000000000000000000",a=""+d.substring(1,d.length)):(d=parseFloat(d)+
f,b=d.toString().substring(0,a),a=""+(""+d+"0000000000000000000000").substring(a+1,a+1+parseInt(k,0)));a=a.substring(0,parseInt(k,0));k=parseFloat(b+"."+a);isNaN(k)&&(k=0);return k},normalize_decimal_sep:function(d,k,a,b){var f=b.lastIndexOf(a);0<=d.indexOf(".")&&","==a&&-1==f&&b.lastIndexOf(".")==b.indexOf(".")?b=b.replace(".",a):-1==d.indexOf(k)&&"."==a&&-1==f&&b.lastIndexOf(",")==b.indexOf(",")&&(b=b.replace(",",a));return b},truncate:function(d,k,a){k=d.lastIndexOf(k);var b=d;-1!=k&&(b=0<a?1:
0,b=d.slice(0,k+parseInt(a,10)+b));return b},valid_decimal:function(d,k,a,b){var f=d.value,g=!0,m=gx.O.getValidStructFld(d),p=gx.rtPicture(m,d);b=p?gx.numericLenDec(p).Decimals:b;f=this.normalize_decimal_sep(p,k,a,f);gx.lang.emptyObject(m)||(f=gx.num.extractValue(gx.rtPicture(m,d),k,f));var u=new RegExp("^[ ]*((([+-]{1}[0-9]+)||([0-9]*))(\\"+k+"[0-9]{3})*(\\"+a+"[0-9]*)?)?[ ]*$");if(f)if(u.test(f)){b=gx.num.truncate(f,a,b);try{gx.lang.emptyObject(m)||(b=gx.num.formatNumber(b,m.dec,p,m.len,m.sign,
!0,m.emptyAsNull)),"."!=a&&"SELECT"==d.tagName&&(b=gx.num.toInvariant(b,k,a))}catch(x){g=!1}if(g&&b!=gx.text.trim(d.value)&&(d.value=b,gx.util.browser.isIEStrict()||-1!=navigator.userAgent.indexOf("Firefox/2")))d.onchange()}else g=!1;else g=!0;g?gx.csv.setFormatError(d,!1):(gx.csv.setFormatError(d),gx.fn.alert(d,gx.getMessage("GXM_badnum")))},valid_integer:function(d,k){var a=gx.O.getValidStructFld(d),b=gx.lang.emptyObject(a);var f=d.value;b||(f=gx.num.extractValue(gx.rtPicture(a,d),k,f));k=b||-1==
gx.rtPicture(a,d).indexOf(",")?/^[ ]*(([+-]{1}[0-9]+)||([0-9]*))[ ]*$/:new RegExp("^[ ]*([+-]{1}[0-9]+||[0-9]*)(\\"+k+"[0-9]{3})*[ ]*$");var g=!0;if(f)if(k.test(f)){try{b||(f=gx.num.formatNumber(f,a.dec,gx.rtPicture(a,d),a.len,a.sign,!0,a.emptyAsNull))}catch(m){g=!1}if(f!=gx.text.trim(d.value)&&(d.value=f,-1!=navigator.userAgent.indexOf("Firefox/2")))d.onchange()}else g=!1;else g="number"===d.type&&"undefined"!==typeof d.validity?d.validity.valid:!0;g?gx.csv.setFormatError(d,!1):(gx.csv.setFormatError(d),
gx.fn.alert(d,gx.getMessage("GXM_badnum")))},replaceFullWidthNumerals:function(d){return"string"===typeof d?d.replace(l,function(k){return 8213==k.charCodeAt()||12540==k.charCodeAt()?String.fromCharCode(45):String.fromCharCode(k.charCodeAt()-65248)}):d}}}();
gx.color={rgb:function(l,c,d){return 65536*l+256*c+d},css:function(l){return"rgb"==l.substring(0,3)?eval(l):"#"==l.charAt(0)?parseInt(l.substring(1),16):0},html:function(l){l=this.toHex(l);gx.lang.emptyObject(l)&&(l="000000");l=gx.text.padl(l,6,"0");var c={};c.Hexa=l;c.Html="#"+l;c.R=parseInt(l.substring(0,2),16);c.G=parseInt(l.substring(2,4),16);c.B=parseInt(l.substring(4,6),16);return c},fromRGB:function(l,c,d){var k={};"undefined"!=typeof l&&"undefined"!=typeof c&&"undefined"!=typeof d&&(k.Hexa=
this.toHex(l)+this.toHex(c)+this.toHex(d),k.Html="#"+k.Hexa,k.R=l,k.G=c,k.B=d);return k},ARGBToHex:function(l){var c=this.toHex(l>>16&255),d=this.toHex(l>>8&255);l=this.toHex(l&255);return c+d+l},toHex:function(l){if(void 0===l)return"000000";if(0>l)return gx.color.ARGBToHex(l);if(0===l)return l+"0";for(var c,d="";0!==l;)c=l%16,l=(l-c)/16,d="0123456789ABCDEF".charAt(c)+d;0!==d.length%2&&(d="0"+d);return d}};
gx.grid=function(l){return{drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3,0:"none",1:"uniform",2:"header",3:"report"},getImplClass:function(c,d){return d?(gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0),gx.lang.inherits(gx.ui.grid,
c.isResponsive?gx.grid.responsiveGrid:gx.grid.impl,!0),gx.lang.inherits(d,gx.ui.grid,!0),d=new d(gx.$),c&&(d.ParentObject=c.parentObject,d.ControlName=c.gridName,c.parentObject.setUserControl(d)),d):c.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(c){c=void 0!=c?c:1;return 0!=c?c:9999},setActiveGridRow:function(c,d){"string"===typeof c&&(c=(c=gx.O.getGrid(c))?c.grid:null);c&&c.gxAllowSelection&&(gx.csv.currentGridSelection=c,"undefined"!==typeof d&&
(c.toggleRowHoverById(c.gxHoveredRowId,!1),c.gxHoveredRowId=parseInt(d,10)-1,gx.grid.clearActiveGridHandlerInstalled||(gx.fx.obs.addObserver("gx.onclick",this,gx.grid.clearActiveGridHandler),gx.grid.clearActiveGridHandlerInstalled=!0)))},clearActiveGrid:function(c){c&&gx.csv.currentGridSelection!==c.grid||(delete gx.csv.currentGridSelection,delete gx.grid.clearActiveGridHandlerInstalled,gx.fx.obs.deleteObserver("gx.onclick",this,gx.grid.clearActiveGridHandler))},clearActiveGridHandler:function(c){c=
gx.evt.source(c.event);c=gx.fn.rowGridId(c);(c=gx.fn.getGridObj(c))&&c.grid.gxAllowSelection||gx.grid.clearActiveGrid()},handleKeyUpEvt:function(c){var d=gx.csv.currentGridSelection,k=!1;if(!d||!d.gxAllowSelection||d.gxAllowHovering)return k;switch(c.keyCode){case 38:case 40:d.ownerGrid.setSelection(d.ownerGrid.getSelection(),!0),gx.evt.cancel(c,!0),k=!0}return k},handleKeyPressEvt:function(c){var d=gx.csv.currentGridSelection,k=!1;if(!d||!d.gxAllowHovering&&!d.gxAllowSelection)return k;var a=d.gxAllowHovering;
switch(c.keyCode){case 38:a?k=d.setPreviousRowHovered():d.ownerGrid.setPreviousRowSelected(!1);gx.evt.cancel(c,!0);break;case 40:a?k=d.setNextRowHovered():d.ownerGrid.setNextRowSelected(!1);gx.evt.cancel(c,!0);break;case 13:k=d.ownerGrid.setSelection(d.gxHoveredRowId)&&d.gxOnLineActivate}return k},grid:function(c,d,k,a,b,f,g,m,p,u,x,w,A,q,v,t,B,G,J,n,r,y,C,D,F,H,L,N,O,Q,W,V,Z,ba,ca,fa,ma,na){var la=function(z){return function(E){E=this.parentObject.getGridById(a,E||gx.fn.currentGridRow(a));return z.call(this,
E||this)}.closure(this)}.closure(this);this.parentObject=c;this.parentObject["sub"+b+"_Rows"]=la(function(z){return z.grid.pageSize/z.grid.gxGridCols});this.parentObject[f.toUpperCase()+(p?"_MPAGE":"")+"_nFirstRecordOnPage"]=la(function(z){return z.grid.firstRecordOnPage});this.parentObject[f.toUpperCase()+(p?"_MPAGE":"")+"_nEOF"]=la(function(z){return z.grid.eof});this.gridLvl=d;this.gridLvlName=k;this.gridId=a;this.gridName=b;this.realGridName=f;this.containerName=g||this.gridName+"Container";this.parentName=
u||"";this.pagingParms=[];this.lvlKey=x||[];this.isFreestyle=w||!1;this.isResponsive=Z||!1;this.allowHovering=(this.allowSelection=q||!1)&&v||!1;this.allowCollapsing=W||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=H||!1;this.hasAddlines=L||!1;this.hasForEachLine=N||!1;this.width=void 0!=r?r:0;this.widthUnit=y||"";this.height=void 0!=C?C:0;this.heightUnit=D||"";this.gridCols=void 0!=A?A:1;this.gridCols=0!=this.gridCols?
this.gridCols:9999;this.gridRows=void 0!=t?t:5;this.gridResponsiveCols=ba||[1,1,1,1];this.usePaging=(this.usePaging=B||!1)&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=G||!1;this.defaultSetsContext=J||!1;this.boundedCollType=n||"";this.boundedCollName=V||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=m;this.isMasterPageGrid=p;this.htmlTags="";this.onLineActivate=Q;this.addingRows=!1;this.deleteMethod=gx.grid.deleteMethod;
this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.IsValidState=[];this.implClass=O;this.grid=gx.grid.getImplClass(this,O);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=this.width;this.grid.gxWidthUnit=
this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=this.gxComponentContext;
this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=void 0!=F?F:"New Row";this.grid.beforeRenderCallbacks=[];this.grid.isAbstract=ma;this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.useUserControlModelValues=function(){return this.isUsercontrol&&
!this.grid.useNativeChildControls};this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.grid.selectedRows=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.grid.useHiddensForControlValues=this.isUsercontrol&&(this.grid.useHiddensForControlValues||"undefined"===this.grid.useHiddensForControlValues);this.gxCreateGridCode=function(z){var E=new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+z,this.gridName,
this.containerName+"_"+z,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaultSetsContext,this.boundedCollType,this.width,this.widthUnit,this.height,this.heightUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing,this.boundedCollName,this.isResponsive,this.gridResponsiveCols,
!1,0,this.grid.isAbstract,this.InverseLoading),K=this.grid,I=E.grid;E.emptyText=this.emptyText;I.ControlLvl=this.gridLvl;I.GridId=this.gridId;I.GridRow=z;I.GridBaseName=this.gridName;if(K.Properties)for(P in K.Properties)I.setProp(P,K.Properties[P],K[P],K.PropTypes[P]);if(K.DynProperties){var M=K.DynProperties.length;for(z=0;z<M;z++){var P=K.DynProperties[z];I.setDynProp(P,K.Properties[P],K[P],K.PropTypes[P],!0)}}return E}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;
this.grid.eof=this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.InfiniteScrolling=ca;this.InverseLoading=na;this.ScrollType=fa;this.isAbstract=ma;this.addColumnDinCode=function(z,E){this.gxAddColumnsCode.push(function(){z.apply(this,E)})};this.addSingleLineEdit=function(z,E,K,I,M,P,R,S,U,aa,T,Y,X,ia,ea,ja,oa,ra,ka,sa,ta,wa,ua,va){this.addColumnDinCode(this.addSingleLineEdit,arguments);var pa=this.newColumn(I,R,Y,S);pa.visible=oa;pa.htmlName=K;pa.gxId=E;pa.gxAttId=
z;pa.gxAttName=P;pa.gxTooltip=M;pa.gxWidthUnit=U;pa.gxColSize=T;pa.gxSetsContext=ka;pa.gxCssClass=ta;pa.gxColumnClass=ua;pa.gxColumnHeaderClass=va;pa.gxControl=new gx.html.controls.singleLineEdit;pa.gxControl.column=pa;pa.gxControl.isPassword=sa;pa.gxControl.visible=pa.visible;pa.gxControl.dataType=pa.type;pa.gxControl.clickEvent=X;this.grid.addColumn(pa)};this.addPostingVar=function(z){this.postingVariables.push(z)};this.addMultipleLineEdit=function(z,E,K,I,M,P,R,S,U,aa,T,Y,X,ia,ea,ja,oa,ra){this.addColumnDinCode(this.addMultipleLineEdit,
arguments);var ka=this.newColumn(I,P,X,R);ka.visible=ea;ka.htmlName=K;ka.gxId=E;ka.gxAttId=z;ka.gxAttName=M;ka.gxWidthUnit=S;ka.gxSetsContext=ja;ka.gxColumnClass=ra;ka.gxControl=new gx.html.controls.multipleLineEdit;ka.gxControl.column=ka;ka.gxControl.dataType=ka.type;ka.gxControl.visible=ka.visible;ka.gxControl.heightUnit=aa;ka.gxControl.clickEvent=ia;this.grid.addColumn(ka)};this.addBlob=function(z,E,K,I,M,P,R,S,U,aa,T,Y,X,ia){this.addColumnDinCode(this.addBlob,arguments);var ea=this.newColumn(I,
P,"left",U);ea.visible=Y;ea.htmlName=K;ea.gxId=E;ea.gxAttId=z;ea.gxAttName=M;ea.gxWidthUnit=T;ea.gxSetsContext=X;ea.gxColumnClass=ia;ea.gxControl=new gx.html.controls.blob;ea.gxControl.column=ea;ea.gxControl.dataType=ea.type;ea.gxControl.visible=ea.visible;ea.gxControl.height=S;ea.gxControl.width=U;this.grid.addColumn(ea)};this.addRadioButton=function(z,E,K,I,M,P,R,S,U,aa,T){this.addColumnDinCode(this.addRadioButton,arguments);var Y=this.newColumn(I,P,"left","");Y.visible=U;Y.htmlName=K;Y.gxId=E;
Y.gxAttId=z;Y.gxAttName=M;Y.gxSetsContext=aa;Y.gxColumnClass=T;Y.gxControl=new gx.html.controls.radio;Y.gxControl.column=Y;Y.gxControl.dataType=Y.type;Y.gxControl.vertical=S;Y.gxControl.visible=Y.visible;Y.gxControl.clickEvent=R;this.grid.addColumn(Y)};this.addComboBox=function(z,E,K,I,M,P,R,S,U,aa,T,Y,X){this.addColumnDinCode(this.addComboBox,arguments);var ia=this.newColumn(I,P,"left",T);ia.visible=U;ia.htmlName=K;ia.gxId=E;ia.gxAttId=z;ia.gxAttName=M;ia.gxSetsContext=aa;ia.gxWidthUnit=Y;ia.gxColumnClass=
X;ia.gxControl=new gx.html.controls.comboBox;ia.gxControl.column=ia;ia.gxControl.dataType=ia.type;ia.gxControl.rtEnabled=1==S;ia.gxControl.visible=ia.visible;ia.gxControl.clickEvent=R;this.grid.addColumn(ia)};this.addListBox=function(z,E,K,I,M,P,R,S,U,aa,T,Y,X,ia){this.addColumnDinCode(this.addListBox,arguments);var ea=this.newColumn(I,P,"left",T);ea.visible=U;ea.htmlName=K;ea.gxId=E;ea.gxAttId=z;ea.gxAttName=M;ea.gxSetsContext=aa;ea.gxWidthUnit=Y;ea.gxColumnClass=X;ea.gxControl=new gx.html.controls.listBox;
ea.gxControl.column=ea;ea.gxControl.dataType=ea.type;ea.gxControl.rows=void 0!==ia?ia:4;ea.gxControl.rtEnabled=1==S;ea.gxControl.visible=ea.visible;ea.gxControl.clickEvent=R;this.grid.addColumn(ea)};this.addCheckBox=function(z,E,K,I,M,P,R,S,U,aa,T,Y,X,ia,ea){this.addColumnDinCode(this.addCheckBox,arguments);var ja=this.newColumn(I,R,"left",X);ja.visible=T;ja.htmlName=K;ja.gxId=E;ja.gxAttId=z;ja.gxAttName=P;ja.gxChecked=S;ja.gxUnChecked=U;ja.gxSetsContext=Y;ja.gxWidthUnit=ia;ja.gxColumnClass=ea;ja.gxControl=
new gx.html.controls.checkBox;ja.gxControl.column=ja;ja.gxControl.checkedValue=S;ja.gxControl.uncheckedValue=U;ja.gxControl.dataType=ja.type;ja.gxControl.visible=ja.visible;ja.gxControl.clickEvent=aa;this.grid.addColumn(ja)};this.addBitmap=function(z,E,K,I,M,P,R,S,U,aa,T,Y){this.addColumnDinCode(this.addBitmap,arguments);var X=this.newColumn(aa,"","left",I);X.htmlName=E;X.gxId=K;X.gxAttId=z;X.gxWidthUnit=M;X.gxControl=new gx.html.controls.image;X.gxControl.column=X;X.gxControl.dataType=X.type;X.gxControl.width=
I;X.gxControl.widthUnit=M;X.gxControl.height=P;X.gxControl.heightUnit=R;X.gxControl.clickEvent=S;X.gxCssClass=T;X.gxColumnClass=Y;this.grid.addColumn(X)};this.addVideo=function(z,E,K,I,M,P,R,S,U,aa,T,Y){this.addColumnDinCode(this.addVideo,arguments);var X=this.newColumn(aa,"","left",I);X.htmlName=E;X.gxId=K;X.gxAttId=z;X.gxWidthUnit=M;X.gxControl=new gx.html.controls.video;X.gxControl.column=X;X.gxControl.dataType=X.type;X.gxControl.width=I;X.gxControl.widthUnit=M;X.gxControl.height=P;X.gxControl.heightUnit=
R;X.gxControl.clickEvent=S;X.gxCssClass=T;X.gxColumnClass=Y;this.grid.addColumn(X)};this.addAudio=function(z,E,K,I,M,P,R,S,U,aa,T,Y){this.addColumnDinCode(this.addAudio,arguments);var X=this.newColumn(aa,"","left",I);X.htmlName=E;X.gxId=K;X.gxAttId=z;X.gxWidthUnit=M;X.gxControl=new gx.html.controls.audio;X.gxControl.column=X;X.gxControl.dataType=X.type;X.gxControl.width=I;X.gxControl.widthUnit=M;X.gxControl.height=P;X.gxControl.heightUnit=R;X.gxControl.clickEvent=S;X.gxCssClass=T;X.gxColumnClass=
Y;this.grid.addColumn(X)};this.addFile=function(z,E,K,I,M,P,R,S,U,aa,T,Y){this.addColumnDinCode(this.addVideo,arguments);var X=this.newColumn(aa,"","left",I);X.htmlName=E;X.gxId=K;X.gxAttId=z;X.gxWidthUnit=M;X.gxControl=new gx.html.controls.file;X.gxControl.column=X;X.gxControl.dataType=X.type;X.gxControl.width=I;X.gxControl.widthUnit=M;X.gxControl.height=P;X.gxControl.heightUnit=R;X.gxControl.clickEvent=S;X.gxCssClass=T;X.gxColumnClass=Y;this.grid.addColumn(X)};this.addTextBlock=function(z,E,K){this.addColumnDinCode(this.addTextBlock,
arguments);var I=this.newColumn("","","left");I.gxId=K;I.htmlName=z;I.gxControl=new gx.html.controls.textBlock;I.gxControl.column=I;I.gxControl.dataType=I.type;I.gxControl.clickEvent=E;this.grid.addColumn(I)};this.addLabel=function(z){this.addColumnDinCode(this.addLabel,arguments);var E=this.newColumn("","","left");E.htmlName=z;E.gxControl=new gx.html.controls.label;E.gxControl.column=E;this.grid.addColumn(E)};this.addButton=function(z,E,K,I,M){this.addColumnDinCode(this.addButton,arguments);var P=
this.newColumn("","","left");P.htmlName=E;P.gxId=z;P.gxControl=new gx.html.controls.button;P.gxControl.column=P;P.gxControl.dataType=P.type;this.grid.addColumn(P)};this.addGrid=function(z){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(z);var E=this.newColumn("","","left");E.htmlName=z.getContainerControlId();E.gxControl=new gx.html.controls.grid;E.gxControl.column=E;this.grid.addColumn(E)};this.addUsercontrol=function(z,E,K,I,M,P,R,S,U,aa){this.addColumnDinCode(this.addUsercontrol,
arguments);var T="",Y=this.parentObject;Y.GridUCsProps&&Y.GridUCsProps[M]&&(T=Y.GridUCsProps[M].title||"");T=this.newColumn(T,"","left");T.gxUCId=z;T.gxUCLastId=E;T.gxUCClassName=K;T.gxUCContainerName=I;T.gxUCControlName=M;T.gxUCFieldName=P;T.gxShowFunc=R;T.gxC2VFuncs=S;T.gxV2CFuncs=U;T.visible=aa;T.gxControl=new gx.html.controls.userControl;T.gxControl.column=T;T.gxControl.dataType=T.type;T.htmlName=M.toUpperCase();T.isUserControl=!0;this.grid.addColumn(T)};this.startContainer=function(){this.addColumnDinCode(this.startContainer,
arguments);var z=this.newColumn("","","left");z.gxControl=new gx.html.controls.userControlContainer;z.gxControl.column=z;z.gxControl.dataType=z.type;this.grid.addColumn(z)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("</div>")};this.addWebComponent=function(z){this.addColumnDinCode(this.addWebComponent,arguments);var E=this.newColumn("","","left");E.gxControl=new gx.html.controls.webComponent;E.gxControl.column=E;E.gxControl.dataType=E.type;
this.grid.addColumn(E)};this.addEmbeddedPage=function(z){this.addColumnDinCode(this.addEmbeddedPage,arguments);var E=this.newColumn("","","left");E.gxControl=new gx.html.controls.embeddedPage;E.gxControl.column=E;E.gxControl.dataType=E.type;this.grid.addColumn(E)};this.addHtmlCode=function(z){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(z)};this.startTable=function(z,E,K){this.addColumnDinCode(this.startTable,arguments);var I=this.newColumn("","","left");I.gxId=E;I.htmlName=
z+"_"+E;I.gxControl=new gx.html.controls.table;I.gxControl.column=I;I.gxControl.width=K;I.gxControl.dataType=I.type;this.grid.addColumn(I)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("</table>")};this.startRow=function(z,E,K,I,M,P){this.addColumnDinCode(this.startRow,arguments);var R=this.newColumn("","","left");R.gxControl=new gx.html.controls.row;R.gxControl.column=R;R.gxControl.title=z;R.gxControl.align=E;R.gxControl.verticalAlign=K;R.gxControl.backColor=
I;R.gxControl.borderColor=M;R.gxControl.cssClass=P;R.gxControl.ownCssClass=P;R.gxControl.dataType=R.type;this.grid.addColumn(R)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("</tr>")};this.startCell=function(z,E,K,I,M,P,R,S,U,aa){this.addColumnDinCode(this.startCell,arguments);var T=this.newColumn("","","left");T.gxControl=new gx.html.controls.cell;T.gxControl.column=T;T.gxControl.title=z;T.gxControl.align=E;T.gxControl.verticalAlign=K;T.gxControl.backColor=
I;T.gxControl.borderColor=M;T.gxControl.height=P;T.gxControl.width=R;T.gxControl.colSpan=S;T.gxControl.rowSpan=U;T.gxControl.cssClass=aa;T.gxControl.dataType=T.type;this.grid.addColumn(T)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("</div>"):this.currentBuffer.append("</td>")};this.startGroup=function(z,E,K,I,M){this.addColumnDinCode(this.startGroup,arguments);var P=this.newColumn("","","left");P.htmlName=z;P.gxControl=new gx.html.controls.group;
P.gxControl.column=P;P.gxControl.id=z;P.gxControl.caption=E;P.gxControl.height=K;P.gxControl.width=I;P.gxControl.cssClass=M;P.gxControl.dataType=P.type;this.grid.addColumn(P)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("</fieldset>")};this.startDiv=function(z,E,K,I){this.addColumnDinCode(this.startDiv,arguments);var M=this.newColumn("","","left");M.gxId=z;M.htmlName=E+"_"+z;M.gxControl=new gx.html.controls.div;M.gxControl.column=M;M.gxControl.width=
I;M.gxControl.height=K;M.gxControl.dataType=M.type;this.grid.addColumn(M)};this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);var z=this.newColumn("","","left");z.gxControl=new gx.html.controls.divEnd;z.gxControl.column=z;this.grid.addColumn(z)};this.startFormGroup=function(z,E,K,I){this.addColumnDinCode(this.startFormGroup,arguments);var M=this.newColumn("","","left");M.gxId=z;M.htmlName=E+"_"+z;M.gxControl=new gx.html.controls.formGroup;M.gxControl.column=M;M.gxControl.width=I;
M.gxControl.height=K;M.gxControl.dataType=M.type;this.grid.addColumn(M)};this.endFormGroup=function(){this.addColumnDinCode(this.endFormGroup,arguments);var z=this.newColumn("","","left");z.gxControl=new gx.html.controls.formGroupEnd;z.gxControl.column=z;this.grid.addColumn(z)};this.newColumn=function(z,E,K,I){E=this.getColumnType(E);z=new gx.grid.column(z,E,I,K);this.currentBuffer=z.buffer;z.htmlName="";z.gxId="";z.gxAttId="";z.gxAttName="";return z};this.getColumnType=function(z){switch(z){case "decimal":case "int":z=
gx.types.numeric;break;case "date":z=gx.types.date;break;case "dtime":z=gx.types.dateTime;break;case "boolean":z=gx.types.bool;break;case "GeneXus\\Geolocation":z=gx.types.geolocation;break;default:z=gx.types.character}return z};this.addOldComponent=function(z,E){"undefined"==typeof this.oldCmps[z]&&(this.oldCmps[z]=[]);this.oldCmps[z].push(E)};this.updateOldComponents=function(){for(var z=this.grid.rows.length,E=0;E<z;E++)delete this.oldCmps[this.grid.rows[E].gxId];for(var K in this.oldCmps){for(z=
this.oldCmps[K];0<z.length;)E=z.shift(),gx.fn.deleteHidden(E);delete this.oldCmps[K]}};this.addHidden=function(z){this.hiddens.push(z)};this.addHiddenControl=function(z,E,K){gx.fn.setHidden(z,E);1!=K&&this.addHidden(z)};this.clearHiddens=function(){for(var z=0;z<this.hiddens.length;z++)gx.fn.deleteHidden(this.hiddens[z]);this.hiddens=[]};var da={};this.setHtmlTags=function(z){gx.lang.apply(da,z);var E=' style="'+("0"==da.Visible?"display:none;":"");z=' class="'+da.Class+'"';var K=gx.lang.emptyObject;
E+=K(da.Background)?"":"background:"+da.Background+";";E+=K(da.Backcolor)||"0"==da.Backcolor?"":"background-color:"+gx.color.html(da.Backcolor).Html+";";E+=K(da.Bordercolor)||"0"==da.Bordercolor?"":"border-color:"+gx.color.html(da.Bordercolor).Html+";";E+=K(da.Borderwidth)||"0"==da.Borderwidth?"":" border-width:"+da.Borderwidth+";";E+=K(da.Width)||"0"==da.Width?"":" width:"+gx.dom.addUnits(da.Width,this.width==da.Width?this.widthUnit:"")+";";E+=K(da.Height)||"0"==da.Height?"":"max-height:"+gx.dom.addUnits(da.Height,
this.height==da.Height?this.heightUnit:"")+";";z+=K(da.Align)?"":' align="'+da.Align+'"';z+=K(da.Tooltiptext)?"":' title="'+da.Tooltiptext+'"';z+=K(da.Cellpadding)?"":' data-cellpadding="'+da.Cellpadding+'"';z+=K(da.Cellspacing)?"":' data-cellspacing="'+da.Cellspacing+'"';this.htmlTags=gx.text.trim(z+(E+'"'));this.grid.gxHtmlTags=this.htmlTags;K(da.Width)||(this.grid.gxWidth=da.Width);K(da.Height)||(this.grid.gxHeight=da.Height)};var ha={};this.setGridStyles=function(z){gx.lang.apply(ha,z);this.grid.header=
z.Header;this.visible=void 0!=ha.Visible?gx.lang.gxBoolean(ha.Visible):!0;this.setSortable(void 0!=ha.Sortable?gx.lang.gxBoolean(ha.Sortable):!0);this.background=void 0!=ha.Background?ha.Background:"";this.cssClass=void 0!=ha.Class?ha.Class:"";this.titleBackstyle=void 0!=ha.Backcolorstyle?ha.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=ha.Titlefont?ha.Titlefont:"";this.linesFont=void 0!=ha.Linesfont?ha.Linesfont:"";this.borderWidth=void 0!=ha.Borderwidth?ha.Borderwidth:"";this.toolTipText=
void 0!=ha.Tooltiptext?ha.Tooltiptext:"";try{this.backcolor=void 0!=ha.Backcolor?gx.color.html(ha.Backcolor).Html:"",this.titleBackcolor=void 0!=ha.Titlebackcolor?gx.color.html(ha.Titlebackcolor).Html:"",this.titleForecolor=void 0!=ha.Titleforecolor?gx.color.html(ha.Titleforecolor).Html:"",this.linesBackcolorOdd=void 0!=ha.Backcolorodd?gx.color.html(ha.Backcolorodd).Html:"",this.linesBackcolorEven=void 0!=ha.Backcoloreven?gx.color.html(ha.Backcoloreven).Html:"",this.bordercolor=void 0!=ha.Bordercolor?
gx.color.html(ha.Bordercolor).Html:""}catch(E){gx.dbg.logEx(E,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=ha.Borderwidth?ha.Borderwidth:"";this.toolTipText=void 0!=ha.Tooltiptext?ha.Tooltiptext:"";this.grid.gxCssClass="";this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=
this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=
this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&
(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};this.setSortable=function(z){if(this.sortable!=z){this.sortable=z;for(var E=this.grid.columns.length,K=0;K<E;K++)this.grid.columns[K].sortable=z}};this.lastRowId=0;this.addRow=function(z,E){var K;E=void 0===E?-1:E;var I=-1==E?this.lastRowId++:E,M=gx.grid.rowId(I+
1);M=new gx.grid.row(I,z,M,this.grid.gxParentRowId);M.gxCmpContext=this.gxComponentContext;M.Grids=z.Grids;M.ownerGrid=this;M.gxLvl=this.gridLvl;this.setRowHiddens(z.Hiddens);for(var P=this.grid.columns,R=P.length,S=0;S<R;S++){var U=P[S];if(0!==I){var aa=this.grid.rows[0].gxProps[S];var T=z.Props[S].length;for(K=this.grid.rowsValues?aa.length-1:aa.length;T<K;T++)M.gxProps[S].push(aa[T])}K=z.Props[S];K=K[K.length-1];(aa=this.grid.rowsValues)&&!this.autoRefreshing&&(T=aa[I],void 0!==T&&0<T.length&&
(K=aa[I][S]));M.values[S]=K;this.grid.rowsValues&&M.gxProps[S].push(K);this.parentObject.isTransaction()&&(U=this.columnIndexInKey(U.gxAttId),-1!=U&&(M.gxKeyValues[U]=K))}this.isFreestyle&&(M.IsNew=!0,this.installChildGrids(M));this.grid.addRow(M,!1,E);return M};this.installChildGrids=function(z){for(var E=this.childGrids.length,K=0;K<E;K++){var I=this.childGrids[K],M=I.gxCreateGridCode(z.gxId);M.grid.parentGxObject=this.parentObject;var P=(M.isMasterPageGrid?"MP":this.grid.gxCmpContext)+M.realGridName+
"Container";M.gxContainerDivName=P+"Div_"+z.gxId;M.gxContainerDataName=P+"Data_"+z.gxId;M.gxContainerValuesName=P+"DataV_"+z.gxId;z.gxGrids.push(M);M.parentGrid=this;M.parentRow=z;this.parentObject.setGrid(M);I.copyPropertiesTo(M);M.grid.gxCmpContext=this.grid.gxCmpContext;M.grid.gxParentRowId=z.gxId;this.installChildGridColumns(M,I)}};this.installChildGridColumns=function(z,E){for(var K=E.gxAddColumnsCode.length,I=0;I<K;I++)E.gxAddColumnsCode[I].call(z)};this.copyPropertiesTo=function(z){z.cssClass=
this.cssClass;z.titleBackstyle=this.titleBackstyle;z.titleBackcolor=this.titleBackcolor;z.linesBackcolorOdd=this.linesBackcolorOdd;z.linesBackcolorEven=this.linesBackcolorEven;z.grid.gxCssClass=this.grid.gxCssClass;z.grid.gxTitleClass=this.grid.gxTitleClass;z.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;z.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;z.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;z.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(z){if(z&&this.parentObject.isTransaction())for(var E in z)gx.fn.setHidden(E,
z[E])};this.executeEvent=function(z,E){gx.evt.setGridEvt(this.gridId.toString(),E);this.instanciateRow(E);this.parentObject[z].call(this.parentObject,E)};this.getHiddenName=function(z){var E="";this.parentRow&&(E="_"+this.parentRow.gxId);return this.grid.gxCmpContext+this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":"")+"_"+z+E};this.updatePagingVars=function(z,E){void 0==z&&void 0==E?(this.grid.eof=gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):
(this.grid.eof=z,this.grid.firstRecordOnPage=E)};this.setPagingVars=function(z,E){this.grid.eof=z;this.grid.firstRecordOnPage=E;gx.fn.setHidden(this.getHiddenName("nEOF"),z);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),E)};this.clearDefaultEventHandlers=function(){if(this.defaultDragable||this.defaultSetsContext){var z=this.grid.rows.length;for(var E=0;E<z;E++){var K=this.containerName+"Row_"+this.grid.rows[E].gxId;this.defaultDragable&&gx.fx.dnd.deleteSource(K);this.defaultSetsContext&&
gx.fx.ctx.deleteSetter(K)}}z=this.grid.columns.length;for(E=0;E<z;E++)if(K=this.grid.columns[E],1==K.gxSetsContext)for(var I=this.grid.rows.length,M=0;M<I;M++)gx.fx.ctx.deleteSetter(K.htmlName+"_"+this.grid.rows[M].gxId)};this.setDefaultEventHandlers=function(){var z=0,E=this.additiveResponse?this.firstAdditiveRow:0,K=this.getRowAsTypes();if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType)){z=this.grid.rows.length;for(var I=E;I<z;I++){var M=this.gxComponentContext+
this.containerName+"Row_"+this.grid.rows[I].gxId;M=gx.dom.byId(M);null!=M&&(M.gxGrid=this.containerName,M.gxGridName=this.gridName,M.gxId=this.grid.rows[I].gxId);M=this.containerName+"Row_"+this.grid.rows[I].gxId;P=function(S){return this.returnRowData(S)}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,M,this.cssClass,K,P);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,M,this.cssClass,K,P)}}else{z=this.grid.gxCmpContext+this.containerName+"Div";var P=function(){return this.returnGridData()}.closure(this);
this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,z,this.cssClass,[this.boundedCollType],P);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,z,this.cssClass,[this.boundedCollType],P)}if(this.parentGrid)for(I=gx.fx.ctx.setters[this.gxComponentContext+this.realGridName+"ContainerTbl"],z=this.grid.rows.length,P=E;P<z;P++)M=this.containerName+"Row_"+this.grid.rows[P].gxId,I&&I.hdl&&gx.fx.ctx.addSetter(this.parentObject,M,this.cssClass,K,I.hdl);if(!this.additiveResponse)for(z=this.grid.columns.length,
K=0;K<z;K++)if(M=this.grid.columns[K],1==M.gxSetsContext)for(I=this.grid.rows.length,P=E;P<I;P++){var R=gx.dom.el(this.gxComponentContext+M.htmlName+"_"+this.grid.rows[P].gxId,!0);null!=R&&(R.gxHtmlName=M.htmlName,gx.fx.ctx.addSetter(this.parentObject,M.htmlName+"_"+this.grid.rows[P].gxId,"",[M.gxAttName],this.returnColumnContext))}};this.infinite_scrolling_ensure_loading_scroll=function(){if(!this.mock_element){var z=l("#"+this.getGridInnerTableId());this.mock_element=l('<div class="gx-grid-loading" style="visibility:hidden;">'+
gx.getMessage("GXM_Loading")+"</div>");this.mock_element.insertAfter(z)}};this.infinite_scrolling_before_scroll=function(){this.infinite_scrolling_ensure_loading_scroll();!0!==this.isScrolling&&(this.mock_element.css("visibility","visible"),this.isScrolling=!0)};this.hide_loading_message=function(){gx.lang.requestAnimationFrame(function(){this.mock_element&&this.mock_element.css("visibility","hidden")},this)};this.remove_loading_message=function(){this.mock_element&&(l(this.mock_element).remove(),
this.mock_element=void 0)};this.infinite_scrolling_after_scroll=function(){var z=this.getGridInnerTableId();l("#"+z);this.fixColumnsWidth(this.fixedColumnsWidth);this.isScrolling=!1;this.hide_loading_message()};this.fixColumnsWidth=function(z){if(!this.isFreestyle){var E=this.getGridInnerTableId();E=l("#"+E).find("tbody tr[data-gxrendering_row]");l.each(E,function(K,I){l(I).children().map(function(M,P){P.style.width=z[M]+"px";P.style.maxWidth=z[M]+"px"})});E.removeAttr("data-gxrendering_row")}};this.unInstallScrollListener=
function(){this.ScrollingElement&&(l(this.ScrollingElement).scrollTop(0),this.remove_loading_message(),this.ScrollingElement.removeEventListener("scroll",this.ScrollingHandler,{passive:!0}))};this.installScrollListener=function(z,E,K,I){var M=gx.grid.scrollingThreshold||4,P=function(){if(this.InverseLoading)return z.scrollTop<=30*z.clientHeight/100;if(1==this.ScrollType){var U=l(window);var aa=l(document).height();var T="CSS1Compat"===(document.compatMode||"");T=void 0!==window.pageXOffset?window.pageYOffset:
T?document.documentElement.scrollTop:document.body.scrollTop;U=U.height()}else aa=z.scrollHeight,T=z.scrollTop,U=z.clientHeight;var Y=T;var X=S.lastPosition;S.lastPosition=Y;return Y<X?!1:aa-T-U<U*M}.closure(this),R=this,S={allow:!0,reallow:function(){S.allow=!0;S.runAfterReallow&&(S.runAfterReallow=!1,R.ScrollingHandler())},lastPosition:0,runAfterReallow:!1,delay:300};this.ScrollingHandler=function(){gx.lang.requestAnimationFrame(function(){if(S.allow){var U=R.grid;!0!==R.isScrolling&&!U.isLastPage()&&
P()&&(R.infinite_scrolling_before_scroll(),U.changeGridPage("NEXT",!1));S.allow=!1;setTimeout(S.reallow,S.delay)}else S.runAfterReallow=!0})};this.infinite_scrolling_ensure_loading_scroll();z.addEventListener("scroll",this.ScrollingHandler,{passive:!0})};this.installFixedGridHeader=function(){if(!this.usePaging&&!this.InfiniteScrolling&&!this.isFreestyle&&this.grid.gxHeight&&0<this.grid.rows.length){var z=this.getContainerControl();if(z){var E=l(z),K=this,I=this.getGridInnerTableId();z=l("#"+I);var M=
z.find("tbody tr:first").children(),P=l("#"+I+"> tbody"),R=l("#"+I+"> thead > tr"),S=l("#"+I+"> thead");I=gx.util.browser.isOldIE();this.fixedContainerWidth||(this.fixedContainerWidth=z.width());this.fixedColumnsWidth||(this.fixedColumnsWidth=M.map(function(){return l(this).width()}).get());E.addClass("gx-infinite-scrolling-container");if(!this.width||I)I?(E.addClass("gx-grid-fixed-header-ie7"),E.wrap("<div style='position:relative;'>"),z.css("width",""),E.width(this.fixedContainerWidth+l.position.scrollbarWidth()+
2),M=S.position(),R.css("top",M.top),M=R.outerHeight(!0),E.css("paddingTop",gx.dom.addUnits(M,"px")),z.attr("data-bkgstyle",""),M=z.css("background-color"),S=R.css("background-color"),!M||S&&"transparent"!==S||R.css("background-color",M)):z.width(this.fixedContainerWidth+l.position.scrollbarWidth()+2);0<this.fixedColumnsWidth.length&&(z.find("thead tr").children().each(function(U,aa){l(aa)[0].style.visibility=0<K.fixedColumnsWidth[U]?"":"hidden";l(aa)[0].style.width=K.fixedColumnsWidth[U]+"px"}),
this.fixColumnsWidth(this.fixedColumnsWidth));P.addClass("gx-infinite-scrolling-element");E=I?E:P;z.css("max-height","");E.css({"max-height":gx.dom.addUnits(this.grid.gxHeight,this.grid.gxHeight==this.height?this.heightUnit:"px")})}}};this.handleInfiniteScrolling=function(){if(this.InfiniteScrolling){var z=this.getContainerControl();if(z){var E=l(z);E.removeClass("gx-infinite-scrolling-container");if(0===this.grid.rows.length)this.emptyFirstLoad=!0,this.initialPageSize=this.grid.pageSize;else{var K=
this,I=this.getGridInnerTableId();if(1==this.ScrollType){var M=window;this.fixedColumnsWidth=[]}else{this.ScrollingHeight&&l(M).css({height:this.ScrollingHeight});var P=l("#"+I),R=P.find("tbody tr:first").children(),S=l("#"+I+">tbody"),U=l.grep(this.grid.columns,function(ja){return 1==ja.visible}).length;this.fixedColVisibleCount!=U&&(this.fixedColVisibleCount=U,this.isFreestyle||(this.ScrollingElement&&l(this.ScrollingElement).removeClass("gx-infinite-scrolling-element"),P.find("thead tr").children().each(function(ja,
oa){l(oa)[0].style.visibility="";l(oa)[0].style.width=""}),this.fixedColntainerWidth||(this.fixedColntainerWidth=P.width()),this.fixedColumnsWidth=R.map(function(){return this.offsetWidth}).get()));E.addClass("gx-infinite-scrolling-container");this.isFreestyle||P.width(this.fixedColntainerWidth+l.position.scrollbarWidth()+2);!this.isFreestyle&&0<this.fixedColumnsWidth.length&&(P.find("thead tr").children().each(function(ja,oa){l(oa)[0].style.visibility=0<K.fixedColumnsWidth[ja]?"":"hidden";l(oa)[0].style.width=
K.fixedColumnsWidth[ja]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));M=0<S.length?S[0]:z;l(M).addClass("gx-infinite-scrolling-element")}this.ScrollingHeight&&1!=this.ScrollType&&l(M).css({height:this.ScrollingHeight});this.ScrollingElement=M;this.infinitScrollingInstalled=!0;z=this.InverseLoading?this.grid.firstItemSelector:this.grid.lastItemSelector;var aa=this.infinite_scrolling_before_scroll.closure(this),T;!this.ScrollingHeight&&(this.isFreestyle||this.grid.rows.length>=this.grid.pageSize&&
0<this.grid.pageSize)&&(1!=this.ScrollType&&(this.emptyFirstLoad?($firstRow=P.find("tbody tr:first"),0<$firstRow.outerHeight()&&0<this.initialPageSize&&(T=$firstRow.outerHeight()*this.initialPageSize)):T=l(M).height()-2,0<T&&l(M).css({height:T})),this.ScrollingHeight=T);if(M){var Y=0,X=function(){var ja;if(10==Y)return Y=0,!1;(ja=this.InverseLoading?0==M.scrollTop:1==this.ScrollType?gx.popup.ispopup()?document.body.scrollHeight<document.body.clientHeight:document.body.scrollHeight<=document.body.clientHeight:
M.clientHeight==M.scrollHeight)&&Y++;return ja}.closure(this),ia=function(){K.InverseLoading&&(M.scrollTop=M.scrollHeight);this.hide_loading_message();ea()}.closure(this),ea=function(){if(!this.grid.isLastPage()&&X())return aa(),this.grid.changeGridPage("NEXT",!1).then(ia())}.closure(this);gx.lang.requestAnimationFrame(function(ja,oa,ra,ka){ea();this.installScrollListener(ja,oa,ra,ka)}.closure(this,[this.ScrollingElement,I,S,z]))}}}}};this.returnColumnContext=function(z){z="SPAN"==z.nodeName?gx.dom.spanValue(z):
gx.fn.getControlValue_impl(z.id);return null!=z?z:""};this.returnRowData=function(z){var E={};if(z=this.grid.getRowByGxId(z.gxId))for(var K=this.grid.columns.length,I=0;I<K;I++){var M=this.grid.columns[I].gxAttName;""!=M&&(E[M]=z.values[I])}return E};this.returnGridData=function(){for(var z=[],E=this.grid.rows.length,K=0;K<E;K++){var I={};z[K]=I;for(var M=this.grid.rows[K],P=this.grid.columns.length,R=0;R<P;R++){var S=this.grid.columns[R].gxAttName;""!=S&&(I[S]=M.values[R])}}return z};this.doDrop=
function(z){this.getNewRows(void 0!=z.length?z.length:1,null,function(E){this.addDropedRows(E,z)})};this.addDropedRows=function(z,E){z.gxHiddens&&gx.fn.setJsonHiddens(null,z.gxHiddens);z=z.gxContainer?z.gxContainer:z;var K=E.length;if(void 0!=K)for(var I=0;I<K;I++)this.setDroppedRow(z[I],E[I]);else this.setDroppedRow(z[0],E);this.setNewRows(z)};this.setDroppedRow=function(z,E){for(var K=this.grid.columns.length,I=0;I<K;I++){var M=z.Props[I],P=this.grid.columns[I].gxAttName,R="";""!=P&&void 0!=E[P]&&
(R=E[P]);M.Value=R;M.FormattedValue=R}};this.getRowAsTypes=function(){for(var z=[],E=this.grid.columns.length,K=0;K<E;K++){var I=this.grid.columns[K].gxAttName;""!=I&&z.push(I)}return z};this.addRows=function(z,E){var K=z.Count;E=void 0===E?-1:E;this.grid.rowsValues=z.values;for(var I=0;I<K;I++)this.addRow(z[I],-1===E?-1:E+I);0===E&&(this.grid.rows=this.grid.rows.slice(0,Number(gx.fn.getHidden(this.getHiddenName("Rows")))))};this.lastRowIsModified=function(){if(0==this.grid.rows.length)return!1;var z=
this.grid.rows[this.grid.rows.length-1];return z.gxExists()||z.gxIsMod()?!0:!1};this.getNewRows=function(z,E,K){K=void 0!=K?K:this.setNewRows;var I=gx.util.browser.isFirefox()?"keypress":"keydown";null!=E&&((E.type!=I||32!=E.charCode&&32!=E.keyCode&&13!=E.keyCode)&&"click"!=E.type||0!=this.grid.rows.length&&!this.lastRowIsModified())?null==E||32!=E.keyCode&&13!=E.keyCode||gx.evt.cancel(E,!0):(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,z+this.lastRowId,
this.lastRowId+1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,K),gx.csv.pkDirty=!1,null!=E&&gx.evt.cancel(E,!0))};this.setNewRows=function(z){return this.setNewRows_impl(z,function(E){this.refreshGrid({loadChildGrids:!1});this.grid.execShowFunction&&this.grid.execShowFunction()})};this.loadNewRows=function(z){z.gxHiddens&&gx.fn.setJsonHiddens(null,z.gxHiddens);z=z.gxContainer?z.gxContainer:z;return this.setNewRows_impl(z,function(E){this.loadGrid({rowProps:E,isPostback:!0,
addRows:!0})})};this.setNewRows_impl=function(z,E){z.gxHiddens&&gx.fn.setJsonHiddens(null,z.gxHiddens);z=z.gxContainer?z.gxContainer:z;if(void 0!=z.Count){var K;this.grid.rowsValues||(this.grid.rowsValues=[]);this.grid.rowsValues=this.grid.rowsValues.concat(z.values);for(K=0;K<z.Count;K++){var I=this.addRow(z[K]);gx.fn.setCurrentGridRow(this.gridId,I.gxId)}0<z.Count&&(this.addingRows=!0,E.call(this,z),this.addingRows=!1,this.setFocusFirstControl(z[0]))}return I};this.gxNewRowFocused=function(z){z.style.textDecoration=
"underline";var E=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(z,E,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(z){var E=gx.evt.source(z);void 0!=E&&z.ctrlKey&&46==z.keyCode&&(this.setRowDeleted(E),gx.evt.cancel(z,!0))};this.gxHasDuplicateKey=function(){for(var z=[],E=this.grid.rows,K=E.length,I=0;I<K;I++){var M=E[I];if((M.gxExists()||M.gxIsMod())&&!M.gxDeleted()){for(var P="",R=M.gxKeyValues.length,S=0;S<R;S++)P+=M.gxKeyValues[S].toString();
if(void 0!=z[P])return!0;z[P]=1}}return!1};this.columnIndexInKey=function(z){for(var E=this.lvlKey.length,K=0;K<E;K++)if(this.lvlKey[K]==z)return K;return-1};this.refreshVars=[];this.addRefreshingVar=function(z){if(!gx.lang.emptyObject(z)){var E="",K=function(){this.filterVarChanged()};this.refreshVars[this.refreshVars.length]=z;if(z.fld){var I=gx.dom.el(this.gxComponentContext+z.fld,!1,!0);if(void 0!=I&&gx.lang.emptyObject(z.hc)&&(E="radio"==I.type||"checkbox"==I.type?["click"]:"SELECT"==I.tagName?
"change":gx.evt.eachKeyAutorefreshType(z.type)?["keyup","input"]:"blur",""!=E))if("radio"==I.type){I=gx.dom.byName(this.gxComponentContext+z.fld);z=I.length;for(var M=0;M<z;M++){gx.evt.attach(I[M],E,K,this);var P=I[M].labels&&I[M].labels[0];P&&gx.evt.attach(P,E,function(){gx.lang.doCallTimeout(K,this,[],0)},this)}}else"search"==I.type&&(E=[E,"search"]),gx.evt.attach(I,E,K,this)}else if((E=this.parentObject.VarControlMap[z.rfrVar])&&(E=this.parentObject.getValidStructFld(E.id))&&E.isuc)for(I in E.ucInstances)E.ucInstances.hasOwnProperty(I)&&
(E.ucInstances[I].autoRefreshFn=K.closure(this))}};this.refreshParms=[];this.addRefreshingParm=function(z){gx.lang.emptyObject(z)||(this.refreshParms[this.refreshParms.length]=z)};this.doRefresh=function(){var z=this.getRefreshParmsUrl();this.callAsyncRefresh(z)};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var z=this.getRefreshParmsUrl();this.lastRefreshParms!=z&&(this.lastRefreshParms=z,this.callAsyncRefresh())}else this.parentObject.conditionsChanged=
this.conditionsChanged()};this.conditionsChanged=function(){for(var z=this.refreshVars.length,E=0;E<z;E++){var K=this.refreshVars[E];if("undefined"==typeof K.rfrVar){var I=gx.fn.getHidden(this.gxComponentContext+"GXH_"+K.fld);K=K.val();if(void 0!==I&&I!=K)return!0}}return!1};this.getRefreshParmsUrl=function(z){return this.getParmsValues(z,this.refreshParms,!0).join(",")};this.getParmsValues=function(z,E,K){var I=gx.O,M=E.length,P=[];gx.setGxO(this.parentObject);for(var R=function(ja,oa,ra,ka){!0===
ra&&(oa=gx.ajax.ControlValuesObject(oa,ja))&&ka.push(encodeURIComponent(gx.json.serializeJson(oa)));ka.push(ja)},S=0;S<M;S++){var U=E[S];if(U&&("function"==typeof U.c2v&&U.c2v(),gx.fn.call_v2bc(U,gx.O),"undefined"!=typeof U.rfrVar)){var aa=gx.fn.vStructForVar(U.rfrVar);if(!aa&&(aa=gx.fn.getVarControlMapForVar(U.rfrVar))&&!z){var T=this.parentObject.getValidStructFld(aa.id);if(T&&T.isuc){var Y=T&&T.grid?gx.fn.currentGridRowImpl(T.grid):void 0;(T.getUCInstance(Y)||T.uc).execC2VFunctions()}}if(aa&&("undefined"==
typeof U.rfrProp||this.isValueProperty(U.rfrProp)))var X=aa.type}if("undefined"!=typeof U.rfrVar){var ia;T=ia=Y=void 0;if("undefined"!=typeof U.rfrProp){var ea;"undefined"!=typeof U.gxAttId&&(ea=this.grid.getColumnByGxAttId(U.gxAttId));ea||(ea=this.grid.getColumnForVar(U.rfrVar));if(ea){if(ia=U.rfrProp.toLowerCase(),T=ea.hasOwnProperty(ia)?ea[ia]:ea.gxControl[ia],!aa||aa.fmt!==gx.html.controls.formats.RAW_HTML&&aa.fmt!==gx.html.controls.formats.HTML||(T=gx.lang.htmlDecode(T)),this.isValueProperty(ia)&&
ea.gxControl.type==gx.html.controls.types.image&&(T=gx.util.removeBaseUrl(T)),Y=this.parentObject.getValidStruct(ea.gxId))this.isValueProperty(ia)?X=Y.type:"enabled"===ia||"visible"===ia?(X="int",T=gx.lang.gxBoolean(T)?1:0):X=""}else T=""}else"undefined"!=typeof this.parentObject.VarControlMap[U.rfrVar]&&(ia=this.parentObject.VarControlMap[U.rfrVar].id),gx.lang.emptyObject(this.parentObject[U.rfrVar])?"undefined"==typeof T&&"undefined"!=typeof ia&&(T=gx.fn.getHidden(this.gxComponentContext+ia)):T=
this.parentObject[U.rfrVar],"object"==typeof T&&"date"!=X&&"dtime"!=X&&(T=gx.json.serializeJson(T));T="undefined"==typeof T?"":T;R(this.getFormattedParm(T,X),U.rfrVar,(!U.rfrProp||"Value"===U.rfrProp)&&K,P)}else"string"==typeof U.gxGrid?(T=gx.O.getGridByBaseName(U.gxGrid),"string"==typeof U.rfrProp&&"Rows"==U.rfrProp&&P.push(T?T.grid.pageSize:9999)):gx.lang.emptyObject(U.hc)?(R(this.getFormattedVStructParm(U),U.gxvar,(!U.rfrProp||"Value"===U.rfrProp)&&K,P),gx.fn.setHidden(this.gxComponentContext+
"GXH_"+U.fld,U.val())):(T=gx.fn.getHidden(this.gxComponentContext+"GXH_"+U.fld),P.push(encodeURIComponent(z&&"undefined"!==typeof T?T:this.parentObject[U.hc])))}this.parentObject.IsComponent&&P.push(encodeURIComponent(this.parentObject.CmpContext));gx.setGxO(I);return P};this.initRefreshParms=function(){this.parentObject.autoRefresh&&(this.lastRefreshParms=this.getRefreshParmsUrl(!0))};this.isValueProperty=function(z){return"undefined"!=typeof z&&"value"==z.toLowerCase()};this.getFormattedVStructParm=
function(z){if("date"==z.type||"dtime"==z.type){var E=gx.dom.el(this.gxComponentContext+z.fld);E="undefined"!=typeof E.value?E.value:gx.dom.spanValue(E)||E}else E=z.val();return this.getFormattedParm(E,z.type)};this.getFormattedParm=function(z,E){"date"===E?z=gx.date.urlDate(z,gx.dateFormat):"dtime"===E&&(z=gx.date.urlDateTime(z,gx.dateFormat));return encodeURIComponent(z)};this.callAsyncRefresh=function(z,E){gx.evt.refreshGridCallback||(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&(window.clearTimeout(this.refreshTimer),
this.refreshTimer=null,gx.evt.setReady(!0,"callAsyncRefresh"));gx.evt.setReady(!1,"callAsyncRefresh");var K=gx.util.executionContext.getContext();this.refreshTimer=window.setTimeout(function(){gx.util.executionContext.changedContext(K)||(this.autoRefreshing||gx.evt.processing?this.callAsyncRefresh(z):(gx.fx.obs.addObserver("grid.onafterrefresh",gx.evt,gx.evt.notifyRefreshGrid,{single:!0}),"undefined"===typeof z&&(z=this.getRefreshParmsUrl()),gx.ajax.refreshGrid(this,z),gx.evt.setReady(!0,"callAsyncRefresh"),
this.refreshTimer=null))}.closure(this),E||400)};this.updatePropsHidden=function(z){var E=this.getDataHiddenName();gx.fn.setHidden(E,z)};this.updatePagingVarsAfterRefresh=function(z){if(this.usePaging){var E=this.grid.gxGridName.toUpperCase()+"_nEOF",K=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(z[E],z[K])}};this.getSelection=function(){if(this.allowSelection)for(var z=this.grid.rows.length,E=0;E<z;E++)if(this.grid.rows[E].selected)return E;return-1};this.setNextRowSelected=
function(z){var E=Math.min(this.getSelection()+1,this.grid.rows.length);this.setSelection(E,z);this.grid.keepGridItemVisible(E)};this.setPreviousRowSelected=function(z){var E=Math.max(this.getSelection()-1,0);this.setSelection(E,z);this.grid.keepGridItemVisible(E)};this.setProperty=function(z){if(z.Selectedindex)if(z=Number(z.Selectedindex),-1==z)this.setSelection(z);else return this.setSelectionRowCtrl(this.grid.getRowByPos(z));return!1};this.setSelection=function(z,E){if(this.allowSelection){if(-1==
z)return this.grid.setRowSelected(void 0,"",void 0,void 0,E),!0;if(0<=z)return z=this.getRowCtrlByIdx(z),this.setSelectionRowCtrl(z,E)}return!1};this.setSelectionRowCtrl=function(z,E){return this.allowSelection&&z?(this.grid.setRowSelected(z,z.getAttribute("data-gxrow"),void 0,void 0,E),!0):!1};this.getRowCtrlByIdx=function(z){return gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+gx.grid.rowId(z+1))};this.blankGridRows=function(){this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage);
this.InfiniteScrolling&&this.additiveResponse||(this.lastRowId=0,this.grid.rows=[],delete this.grid.rowsValues)};this.setRowDeleted=function(z){z="string"==typeof z?this.grid.getRowByGxId(z):void 0==z.gxId?this.getRowFromHtmlCtrl(z):z;z.setDeleted(!z.gxDeleted());this.setRowModified(z.gxId);gx.fn.removeGridRow(z.gxId,this.gridId.toString());var E=new gx.text.stringBuffer;parseInt(z.gxId);this.grid.renderRow(z,!1,z.id,0,this.grid.lastRenderedRow,this.gxIsFreestyle&&1<this.gxGridCols,E,void 0,this.grid.gxBuffer.toString(),
this.grid.columns.length,void 0,void 0,void 0,void 0,this.grid.fromCollection,this.grid.columns);z=E.toString();E=(E=z.match(/id=.(\w*)./))&&gx.dom.el(E[1]);E.outerHTML=z;gx.plugdesign.applyTemplateObject(E);gx.dom.indexElements()};this.setFocusFirstControl=function(z){for(var E=0;E<z.Count;E++){var K=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId);if(K&&(K=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[E].htmlName+"_"+K.gxId),void 0!=K&&gx.fn.isAccepted(K))){gx.grid.lastFocusCtrl=
this.grid.columns[E].gxId;gx.fn.setFocus(K);break}}};this.instanciateRow=function(z){var E=gx.O,K,I;gx.setGxO(this.parentObject);gx.csv.instanciatedRowGrid=this;try{var M=z;"string"==typeof M&&(M=this.grid.getRowByGxId(z));if(null!=M){gx.fn.setCurrentGridRow(this.gridId,M.gxId);var P=M.values.length;for(I=0;I<P;I++){var R=this.grid.columns[I];if(""!=R.gxId){var S=this.parentObject.getValidStruct(R.gxId);S&&(this.useUserControlModelValues()?S.v2v&&(S.v2v(this.grid.properties[M.id][R.index].value),
gx.fn.setHidden(this.grid.properties[M.id][R.index].id,this.grid.properties[M.id][R.index].value)):"function"==typeof S.c2v&&S.c2v())}}}else for(gx.fn.setCurrentGridRow(this.gridId,z),P=this.grid.columns.length,I=0;I<P;I++)R=this.grid.columns[I],""!=R.gxId&&(S=this.parentObject.getValidStruct(R.gxId))&&"function"==typeof S.c2v&&S.c2v();var U=this.parentObject.UserControls;for(K in U)if(U.hasOwnProperty(K)){var aa=U[K];aa.GridId===this.gridId&&aa.GridRow===M.gxId&&(this.parentObject[aa.DesignContainerName]=
aa)}}catch(T){gx.dbg.logEx(T,"gxgrid.js","instanciateRow")}gx.setGxO(E);return!0};this.setRenderProp=function(z,E,K,I){this.grid.setProp(z,E,K,I)};this.setRenderDynProp=function(z,E,K,I){this.grid.setDynProp(z,E,K,I)};this.addRenderEventHandler=function(z,E){this.grid.addEventHandler(z,E)};this.addRenderV2CFunction=function(z){this.grid.addV2CFunction(z)};this.addRenderC2VFunction=function(z){this.grid.addC2VFunction(z)};this.cleanup=function(){gx.grid.clearActiveGrid(this);this.parentGrid=this.parentObject=
null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=null;this.grid.columns=null;this.grid.rows=null;this.grid=this.grid.selectedRows=null;this.unInstallScrollListener()};this.loadGrid=function(z){gx.dbg.logPerf("loadGrid_"+this.gridName);z=z||{};var E=z.rowProps,K=z.isPostback,I=z.addRows;z=z.isNestedLoad;this.isNestedLoad=this.isNestedLoad||z;z=gx.O;gx.setGxO(this.parentObject);this.isLoading=!0;var M=this.parentObject.isTransaction();
M&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this));if(void 0!=E){var P=E.GridName?E[E.GridName.toUpperCase()+"_nEOF"]:void 0,R=E.GridName?E[E.GridName.toUpperCase()+"_nFirstRecordOnPage"]:void 0,S=this.getContainerControl();M=this.InfiniteScrolling&&0===R&&P&&this.boundedCollType?0:-1;if(null!=S){this.autoRefreshing?this.updatePagingVarsAfterRefresh(E):this.updatePagingVars(P,R);K&&!I&&(E.values=this.getValuesFromHidden(),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&
this.backupComponents());this.deleteGridData();this.grid.setContainerDelayed(S);this.additiveResponse||this.clearHiddens();this.setRowsProperty();K=this.getSelection();this.autoRefreshing?this.updatePagingVarsAfterRefresh(E):this.updatePagingVars(P,R);I||-1!==M||this.blankGridRows();this.setHtmlTags(E);this.setGridStyles(E);this.setDeleteMethod(E.DeleteMethod);this.setSelectionAndHover(E.Allowselection,E.Selectioncolor,E.Allowhover,E.Hovercolor,E.Selectedindex);this.setCollapsing(E.Allowcollapsing,
E.Collapsed);this.setSflColumns(E.SflColumns);this.setColumnsProperties(E.Columns);I||this.addRows(E,M);this.updateOldComponents();this.initRefreshParms();var U=this.getGridInnerTableId();U=void 0!==l("#"+U).attr("data-gx-grid-nodata");U=this.refreshGrid({addRows:I&&!U,atRow:M,fromAutoRefresh:this.autoRefreshing});this.setProperty({Selectedindex:K+1})}}else this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=M||this.isFreestyle?9999:this.gridRows,S=this.getContainerControl(),null!=S?(this.grid.setContainerDelayed(S),
I=this.getRowsFromHidden(),null!=I?(I.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(I),this.setGridStyles(I),this.setDeleteMethod(I.DeleteMethod),this.setSelectionAndHover(I.Allowselection,I.Selectioncolor,I.Allowhover,I.Hovercolor,I.Selectedindex),this.setCollapsing(I.Allowcollapsing,I.Collapsed),this.setSflColumns(I.SflColumns),this.setColumnsProperties(I.Columns),this.updatePagingVars(),this.addRows(I),this.initRefreshParms(),this.addingRows=!0,U=this.refreshGrid(),this.addingRows=
!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),U=this.refreshGrid())):U=this.loadWrappedGridChilds();this.isLoading=!1;gx.setGxO(z);gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded");return U};this.loadWrappedGridChilds=function(){var z=l.Deferred();try{var E=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId);if("undefined"!=typeof E){E=parseInt(E);for(var K=0;K<E;K++)for(var I=this.grid.columns.length,M=0;M<I;M++){var P=this.grid.columns[M];
P.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(K+1),c:P})}this.setupGridUsercontrols(this.GridUserControls)}}catch(R){gx.dbg.logEx(R,"gxgrid.js","loadWrappedGridChilds")}z.resolve();return z};this.getRowsFromHidden=function(){var z=this.getDataHiddenName(),E=gx.fn.getHidden(z);gx.json.setNonSerializable(z);return"string"==typeof E?gx.json.evalJSON(E):"object"==typeof E?E:null};this.deleteGridData=function(){var z=this.getDataHiddenName();gx.json.setNonSerializable(z)};
this.getValuesFromHidden=function(){var z=this.getValuesHiddenName(),E=gx.fn.getHidden(z);gx.lang.emptyObject(E)&&(E=gx.fn.getControlValue(z));gx.json.setNonSerializable(z);z=null;null!=E&&""!=E&&(z=gx.json.evalJSON(E));return z};this.getContainerControlId=function(){return void 0!=this.gxContainerDivName?this.gxContainerDivName:this.grid.gxCmpContext+this.containerName+"Div"};this.getContainerControl=function(){if(!this.gxContainerCtrl){var z=gx.dom.byId(this.getContainerControlId());z&&(this.gxContainerCtrl=
z,z.setAttribute("data-gxgridid",this.gridId.toString()),gx.dom.addClass(z,"gx-grid"),this.isResponsive&&gx.dom.addClass(z,"gx-responsive-grid"),gx.dom.addClass(z,this.isFreestyle?"gx-freestyle-grid":"gx-standard-grid"),z.gxGridName=this.grid.gxGridName)}return this.gxContainerCtrl};this.getHiddenSuffix=function(){return""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId};this.getDataHiddenName=function(){return void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+
this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return void 0!=this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};this.setColumnsProperties=function(z){try{if(!gx.lang.emptyObject(z))for(var E=z.length,K=0;K<E;K++){var I=this.grid.columns[K];for(P in z[K]){var M=z[K][P];var P=this.fixColumnPropName(P);if(this.isUsercontrol){var R=gx.uc.getClientProperty(P,M);I[R.name]=R.value}I[P.toLowerCase()]=
M}this.checkPromptColumn(I)}}catch(S){gx.dbg.logEx(S,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(z){try{if(this.isPromptColumn(z)){var E=gx.fn.getAttachedCtrl(z.htmlName);if(E&&E.info&&E.info.controls){for(var K=!1,I=!1,M=E.info.controls.length,P=0;P<M;P++){var R=this.grid.getColumnByGxId(E.info.controls[P]),S=gx.lang.gxBoolean(R.enabled),U=gx.lang.gxBoolean(R.visible);S&&(I=!0);U&&(K=!0)}I||(z.enabled="0");K||(z.visible="0")}}}catch(aa){gx.dbg.logEx(aa,"gxgrid.js","checkPromptColumn")}};
this.fixColumnPropName=function(z){return"Horizontalalignment"==z?"align":z};this.setDeleteMethod=function(z){if(this.parentObject.isTransaction()){var E="DSP"==this.parentObject.Gx_mode;!E&&z&&"none"==z&&(E=!0);this.deleteMethod=E?gx.grid.deleteMethods.none:gx.grid.deleteMethod}};this.setSelectionAndHover=function(z,E,K,I,M){try{"undefined"!=typeof z&&(this.allowSelection=gx.lang.gxBoolean(z)),"undefined"!=typeof E&&(this.selectionColor=null),"undefined"!=typeof I&&(this.hoverColor=null),this.allowSelection&&
"undefined"!=typeof E&&("undefined"!=typeof K&&(this.allowHovering=gx.lang.gxBoolean(K)),E=eval(E),this.selectionColor="undefined"!=typeof E[0]?gx.color.fromRGB(E[0],E[1],E[2]):gx.color.html(E),this.allowHovering&&"undefined"!=typeof I&&(I=eval(I),this.hoverColor="undefined"!=typeof I[0]?gx.color.fromRGB(I[0],I[1],I[2]):gx.color.html(I))),this.grid.gxAllowSelection=this.allowSelection,this.grid.gxSelectionColor=this.selectionColor,this.grid.gxAllowHovering=this.allowHovering,this.grid.gxHoverColor=
this.hoverColor,this.grid.selectedRows=[],M=Number(M||0),0<M&&(this.grid.Selectedindex=M-1)}catch(P){gx.dbg.logEx(P,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(z,E){try{void 0!==z&&(this.allowCollapsing=gx.lang.gxBoolean(z),this.grid.gxAllowCollapsing=this.allowCollapsing),void 0!==E&&(this.collapsed=gx.lang.gxBoolean(E),this.grid.gxCollapsed=this.collapsed)}catch(K){gx.dbg.logEx(K,"gxgrid.js","setCollapsing")}};this.setSflColumns=function(z){try{gx.lang.emptyObject(z)&&0!==
z||(this.gridCols=gx.grid.validGridColsValue(parseInt(z)),this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols))}catch(E){gx.dbg.logEx(E,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(z){return z.gxAttId.indexOf&&-1!=z.gxAttId.indexOf("prompt_")?!0:!1};this.setRowsProperty=function(){var z=gx.fn.getHidden(this.getHiddenName("Rows"));if(null!=z){try{this.gridRows=parseInt(z,10)}catch(E){gx.dbg.logEx(E,"gxgrid.js",
"setRowsProperty")}this.grid.pageSize=this.gridRows*(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var z=this.grid.columns.length,E=0;E<z;E++){var K=this.parentObject.getValidStruct(this.grid.columns[E].gxId);K&&K.gxsgprm&&K.gxsgprm.installed&&(K.gxsgprm.installed={})}};this.refreshCollection=function(z){try{this.blankGridRows();this.updatePagingVars();this.initRefreshParms();for(var E=z.length,K=0;K<E;K++){for(var I={Props:[]},M=z[K],P=this.grid.columns.length,R=0;R<
P;R++){var S=this.grid.columns[R];I.Props[S.index]=[M[S.gxAttName]]}this.addRow(I)}this.refreshGrid({loadChildGrids:!1,fromAutoRefresh:!1,fromCollection:!0})}catch(U){gx.dbg.logEx(U,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(z){var E=l.Deferred(),K=[E];z=z||{};var I=z.loadChildGrids,M=z.fromAutoRefresh,P=z.fromCollection,R=z.isNestedLoad,S=z.immediateApplyInfiniteScroll;this.isNestedLoad=this.isNestedLoad||R;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=
[];this.GridControls=[];this.ColumnPropertiesAfterRender=[];this.additiveResponse||(z.addRows||this.clearDefaultEventHandlers(),this.clearHiddens());this.crearInstalledSuggests();this.setRowsProperty();void 0==this.parentRow||gx.lang.emptyObj(this.parentRow.Grids)||(R=this.parentRow.Grids[this.realGridName],null!=R&&(this.setHtmlTags(R),this.setGridStyles(R),this.setColumnsProperties(R.Columns),this.addingRows||this.parentRow.IsNew&&this.addRows(R)));var U=!1;R=function(){E.resolve()};var aa=function(){gx.fn.setPromptlisteners(this.getContainerControl());
this.setupGridControls(this.GridControls);this.setupCellAttributes(this.IsValidState);this.setupFixedColumnProperties();this.setupGridUsercontrols(this.GridUserControls);this.installFixedGridHeader();var Y=this,X=this.getGridInnerTableId(),ia=this.grid.scroll_last_row_selector(this.gridRows),ea=this.grid.scroll_nth_row_selector(),ja=this.grid.scroll_first_row_selector(this.gridRows);this.grid.firstItemSelector="#"+X+ja;this.grid.lastItemSelector="#"+X+ia;this.grid.nthItemSelector=function(ra,ka){return"#"+
X+ea(ra,ka)};var oa=function(ra){ra=l.map(ra,function(ka,sa){return ka.onLoadDeferred});l.when.apply(l,ra).done(function(){if(Y.InfiniteScrolling)if(S)Y.handleInfiniteScrolling();else{var ka=Y.getContainerControl();gx.fn.isVisible(ka)?gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",Y,Y.handleInfiniteScrolling,{single:!0}):gx.ol(Y.handleInfiniteScrolling,Y):gx.dom.getIntersectionObserver(function(sa){var ta=new sa(function(){gx.fn.isVisible(ka)&&(ta.disconnect(),Y.handleInfiniteScrolling())},
{root:document.body});ta.observe(ka)})}E.resolve()})};this.setupGridComponents(this.GridComponents).then(function(){var ra=l.map(Y.GridComponents,function(ka,sa){return gx.pO.getWebComponent(ka.p)});Y.isFreestyle&&(K=K.concat(Y.loadRowsGrids(U,z)));gx.fx.obs.notify("grid.onafterrender",[Y.grid,Y.isNestedLoad]);Y.isNestedLoad?(Y.isNestedLoad=!1,oa(ra)):Y.additiveResponse?gx.pendingCmps?gx.fx.obs.addObserver("webcom.all_rendered",Y,function(){Y.infinite_scrolling_after_scroll()}):Y.infinite_scrolling_after_scroll():
Y.applyTemplateObject().then(function(){oa(ra)});Y.additiveResponse=!1});this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();this.updateRcdCount();this.setDefaultEventHandlers();this.setSelection(this.grid.Selectedindex)};aa=aa.closure(this);this.grid.doSort();z.ScrollingElement=this.ScrollingElement;0==I?this.grid.render(U,!1,P,aa,R,z):(U=!z.onSetSort,this.grid.render(U,M,P,aa,R,z));var T=l.Deferred();l.when.apply(l,K).done(function(){T.resolve()});return T.promise()};
this.getGridInnerTableId=function(){return this.gxComponentContext+this.containerName+"Tbl"};this.disposeTemplateObject=function(){gx.fx.obs.deleteObserverByKey(this.getContainerControl().id)};this.applyTemplateObject=function(z){z=z||{};var E=this.isFreestyle&&!this.parentObject.IsComponent?"."+gx.GxObject.WEBCOMPONENT_CLASS_NAME+" *":"";gx.$.extend(z,{selector:"#"+this.getContainerControl().id,excluded:E,observerKey:this.getContainerControl().id});return gx.plugdesign.applyTemplateObject(z)};var qa=
"gx-wc-bkp_"+m+"_"+b;this.getComponentsBackupContainer=function(){var z=gx.dom.byId(qa);z||(z=document.createElement("div"),z.id=qa,z.style.display="none",document.body.appendChild(z));return z};this.destroyComponentsBackup=function(){var z=gx.dom.byId(qa);z&&z.parentNode&&gx.dom.removeControlSafe(z)};this.backupComponents=function(){try{if(!this.additiveResponse)for(var z=this.grid.rows.length,E=0;E<z;E++){for(var K=this.grid.rows[E],I=this.grid.columns.length,M=0;M<I;M++)if(this.grid.columns[M].gxControl.type==
gx.html.controls.types.webComponent){var P=this.parentObject.getComponentPrefix(K.gxProps[M][0]),R=gx.dom.byId(this.gxComponentContext+"gxHTMLWrp"+P+K.gxId);R&&(R.parentNode.removeChild(R),this.getComponentsBackupContainer().appendChild(R))}var S=K.gxGrids.length;for(M=0;M<S;M++){var U=K.gxGrids[M];U&&U.isFreestyle&&U.backupComponents()}}}catch(aa){gx.dbg.logEx(aa,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(z){var E=this.getContainerControl();if(!E)return[];var K=E.firstChild;
E=[];if(K.querySelectorAll)E=gx.fn.toArray(K.querySelectorAll("td[data-colindex='"+z+"'], th[data-colindex='"+z+"']"));else{var I=gx.dom.byTag("TD",K);K=gx.dom.byTag("TH",K);for(var M=0,P=I.length;M<P;M++)I[M].getAttribute("data-colindex")==z&&E.push(I[M]);I=0;for(M=K.length;I<M;I++)K[I].getAttribute("data-colindex")==z&&E.push(K[I])}return E};this.applyPropEntireColumn=function(z,E,K){z=this.getEntireGridColumn(z);for(var I=0;I<z.length;I++)gx.fn.setCtrlPropertyImpl(z[I],E,K)};this.setupFixedColumnProperties=
function(){for(var z=0;z<this.ColumnPropertiesAfterRender.length;z++){var E=this.ColumnPropertiesAfterRender[z];this.applyPropEntireColumn(E.colIndex,E.ptyName,E.ptyValue)}};this.addColPropertyAfterRender=function(z,E,K){K={colIndex:z,ptyName:E,ptyValue:K};z="gxpty"+E+z;(E=this.ColumnPropertiesAfterRender[z])?this.ColumnPropertiesAfterRender[E]=K:(E=this.ColumnPropertiesAfterRender.push(K)-1,this.ColumnPropertiesAfterRender[z]=E)};this.setupCellAttributes=function(z){for(var E in z){var K=z[E],I=
gx.dom.byId(E);if(I)for(var M in K)I.setAttribute(M,K[M])}};this.setupGridControls=function(z){for(var E=0,K=z.length;E<K;E++){var I=z[E],M=gx.dom.byId(I.hookId),P=M.parentNode;P&&(P.insertBefore(I.el,M),gx.dom.removeControlSafe(M))}};this.setupGridComponents=function(){var z=function(K,I){var M,P=K.length;for(M=0;M<P;M++){var R=K[M];if(!1!==R.create){var S=gx.createComponent(R.n,R.p);if(null!=S){gx.addComponent(S);S.readServerVars();if(R.load)S.onload(void 0,!0);M==P-1&&I.resolve()}}}},E=function(K){var I,
M=K.length;for(I=0;I<M;I++)gx.dom.removeClass(K[I],gx.GxObject.WEBCOMPONENT_LOADING_CLASS_NAME)};return function(K){var I=l.Deferred(),M,P=K.length,R=[];0==P&&I.resolve();var S=[];for(M=0;M<P;M++){var U=K[M];if(!1===U.create){var aa=gx.dom.byId(U.existingEl);if(aa){var T=aa.parentNode;U=gx.dom.byId(U.el);gx.dom.removeControlSafe(aa);T.appendChild(U);S.push(U)}M==P-1&&I.resolve()}else R.push(U.c)}gx.lang.requestAnimationFrame(E.closure(this,[S]));0<R.length&&gx.html.processCode(R.join(""),!1,z.closure(this,
[K,I]));this.destroyComponentsBackup();return I.promise()}}();this.setupGridUsercontrols=function(z){var E=z.length;gx.uc.StartRender();for(var K=0;K<E;K++){var I=z[K].r,M=z[K].c;I=gx.uc.getNew(this.parentObject,M.gxUCId,M.gxUCLastId,M.gxUCClassName,M.gxUCContainerName+"_"+I,M.gxUCControlName,M.gxUCFieldName,this.gridLvl,this.gridId,I);I.DesignContainerName=M.gxUCContainerName;I.setC2ShowFunction(M.gxShowFunc);for(var P=M.gxC2VFuncs.length,R=0;R<P;R++)I.addC2VFunction(M.gxC2VFuncs[R]);P=M.gxV2CFuncs.length;
for(R=0;R<P;R++)I.addV2CFunction(M.gxV2CFuncs[R],M.gxUCFieldName);I.setGridProperties();I.setGridEventHandlers();this.parentObject.setUserControl(I);I.execV2CFunctions(!0);I.execShowFunction()}gx.uc.EndRender()};this.triggerDatePickersSetup=function(z){for(var E=z.length,K=0;K<E;K++){for(var I=z[K].CtrlId,M=z[K].Grid,P=z[K].Row,R=gx.O,S=null,U=gx.fn.controlIds(),aa=U.length,T=0;T<aa&&(S=gx.fn.validStruct(U[T]),S.grid!=M||R.CmpContext+S.fld+"_"+P!=I);T++);null!=S&&void 0!=S.dp&&gx.fn.installDatePicker(I,
S,R,S.dp.f,S.dp.st,S.dp.wn,S.dp.mf,gx.fn.datePickerFormat(S.dp.pic,S.dp.dec,S.len),S.len,S.dp.dec)}};this.installImageControls=function(){var z=this.gxContainerCtrl,E=this.grid.newAdditiveRows?this.grid.newAdditiveRows.get(0):null;this.additiveResponse&&E&&E.childNodes[0]&&(z=E);z=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass,"",z);if(z[0]){E=0;for(var K=z.length;E<K;E++)gx.html.multimediaUpload.createControl(z[E])}};this.addComponentToDraw=function(z){this.GridComponents.push(z)};this.addUsercontrolToDraw=
function(z){this.GridUserControls.push(z)};this.addDatepickerToSetup=function(z){this.DatePickersControls.push(z)};this.addControlToReuse=function(z){z.el.parentNode&&gx.dom.removeControlSafe(z.el);this.GridControls.push(z)};this.loadRowsGrids=function(z,E){E=E||{};var K=[],I=this.grid.rows.length;for(E=this.additiveResponse||E.addRows?this.firstAdditiveRow:0;E<I;E++)K=K.concat(this.loadRowGrids(this.grid.rows[E],z));return K};this.loadRowGrids=function(z,E){for(var K=z.gxGrids.length,I=[],M=0;M<
K;M++){var P=z.gxGrids[M];P.grid.setContainerDelayed(gx.dom.byId(P.gxContainerDivName));if(E){if(void 0!=P.parentRow&&!gx.lang.emptyObj(P.parentRow.Grids)){var R=P.getDataHiddenName();gx.fn.setHidden(R,gx.json.serializeJson(P.parentRow.Grids[P.realGridName]))}I.push(P.loadGrid({isNestedLoad:!0}))}else I.push(P.refreshGrid({isNestedLoad:!0}));z.IsNew=!1}return I};this.updateRcdCount=function(){(this.hasForEachLine||this.parentObject.isTransaction())&&gx.fn.setHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+
this.gridId+(""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId),this.lastRowId.toString());var z=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+"_ROW");if(0==this.lastRowId||parseInt(z,10)>this.lastRowId)this.grid.instanciateSelectionVars("0000"),gx.fn.setCurrentGridRow(this.gridId,"")};this.updateControlValue=function(z,E,K){try{var I=this,M=K=K||gx.fn.currentGridRow(z.grid).toString(),P=K.length;if(4<P){var R=K.substring(4,P);I=gx.fn.gridObj(this.gxComponentContext,
this.gridName+"_"+R,this.isMasterPageGrid);if(!I)return;M=K.substring(0,4)}var S=parseInt(M,10)-1;1==E&&I.setRowModified(K);var U=I.getColumnIndexByName(z.fld),aa=gx.dom.el(this.gxComponentContext+z.fld+"_"+K);I.updateRowValue(U,S,aa);return I}catch(T){gx.dbg.logEx(T,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(z,E,K){var I=z.lastIndexOf("_");if(-1!=I){var M=z.substring(0,I);I=z.substring(I+1);if(I=this.grid.getRowByGxId(I))if(M=this.grid.getColumnByHtmlName(M)){var P=
this.parentObject[K.gxvar];"decimal"==K.type&&gx.lang.instanceOf(P,Number)&&(P=gx.num.toFixed(P,K.dec));I.values[M.index]=P;I.gxProps[M.index]||(I.gxProps[M.index]={});(z=gx.dom.el(z))&&"SELECT"==z.tagName&&(I.gxProps[M.index].Values=gx.dom.comboBoxToObj(z));I.gxProps[M.index].Value=P;I.gxProps[M.index].FormattedValue=E}}};this.getColumnIndexByName=function(z){for(var E=this.grid.columns,K=E.length,I=0;I<K;I++)if(E[I].htmlName==z)return I;return-1};this.setRowModified=function(z){gx.fn.setHidden(this.grid.gxCmpContext+
"nIsMod_"+this.gridLvl.toString()+"_"+z,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(z)};this.validateRow=function(z){if(z)try{var E=z.getAttribute("data-gxgridid");gx.fn.setCurrentGridRow(E,z.gxrow);var K=gx.fn.lastGridControl(E);gx.csv.validControls(gx.csv.lastId,K+1,!0,gx.O)}catch(I){gx.dbg.logEx(I,"gxgrid.js","validateRow")}};this.updateRowValue=function(z,E,K){E=this.grid.getRowById(E);var I=this.grid.columns[z];"checkbox"==K.type&&
(K.value=K.checked?I.gxChecked:I.gxUnChecked);K=this.parentObject.getValidStruct(this.grid.columns[z].gxId).val(E.gxId);E.values[z]=K;gx.lang.emptyObject(E.gxProps[z])||(E.gxProps[z].Value=K,E.gxProps[z].FormattedValue=gx.fn.getControlValue(this.grid.columns[z].htmlName+"_"+E.gxId,"screen"));this.parentObject.isTransaction()&&(z=this.columnIndexInKey(I.gxAttId),-1!=z&&(E.gxKeyValues[z]=K));I.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+I.htmlName+"_"+E.gxId+
"_gxBlob",K)};this.expandCollapse=function(z,E){gx.evt.cancel(E,!0);E=gx.dom.byId(this.getGridInnerTableId());null!=E&&(this.collapsed?(l(E).removeAttr("data-gx-sr-only"),z.className="collapse-icon",z.src=gx.ajax.getImageUrl(gx,"collapseImage")):(l(E).attr("data-gx-sr-only",""),z.className="expand-icon",z.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,this.parentGrid?(z=this.gridName.lastIndexOf("_"),z=this.gridName.substring(z),z=this.gxComponentContext+
this.realGridName.toUpperCase()+"_Collapsed"+z):z=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(z,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(z){var E=z.gxrow;gx.lang.emptyObject(E)&&(E=z.id.lastIndexOf("_"),E=z.id.substring(E+1));return this.grid.getRowByGxId(E)};this.showContextMenu=function(z,E){this.contextMenu.show(z,E)}},contextMenu:function(c){this.gxgrid=c;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=
this.rowClicked=null;var d=new gx.text.stringBuffer;this.show=function(k,a){this.gxgrid.validateRow(k);this.contextEvent=a;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(a,!0);this.rowClicked=k;this.startMenu();d.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("</div>");this.endMenu()};this.startMenu=function(){d.clear();var k=this.getMenuCoords();d.append('<div onclick="').append(this.gxgrid.grid.gridObject()+
".contextMenu.contextMenuClicked(event);").append('" onmouseover="');d.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');d.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");d.append("top:"+k.top+"; left:"+k.left+";").append('">')};this.endMenu=function(){d.append("</div>");
var k=gx.dom.byId(this.controlName);if(null==k){k=document.createElement("SPAN");var a=document.createElement("SPAN"),b=document.createElement("SPAN"),f=document.createElement("IFRAME");k.id=this.controlName;a.id=this.controlName+"Shadow";b.id=this.controlName+"Shadow2";f.id=this.controlName+"GXiFrameIEHack";f.src="about:blank";f.style.zIndex=1;f.style.visibility="hidden";f.style.position="absolute";f.frameBorder="0";document.body.appendChild(k);document.body.appendChild(a);document.body.appendChild(b);
document.body.appendChild(f)}gx.dom.shouldPurge()&&gx.dom.purge(k,!0);k.innerHTML=d.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};this.getMenuCoords=function(){var k=0,a=0,b=this.contextEvent;if(b.pageX||b.pageY)k=b.pageX,a=b.pageY;else if(b.clientX||b.clientY)k=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{left:k,top:a}};
this.contextMenuClicked=function(k){k=gx.evt.source(k);this.handleContextMenuAction(k.id);this.hide()};this.handleContextMenuAction=function(k){switch(k){case "deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);break;case "undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},getPaddedRowId:function(c){c=""+c;return"0000".substring(0,4-c.length)+c},rowId:function(c){for(c=c.toString();4>c.length;)c="0"+c;return c},_init:function(){this.deleteMethod||(this.deleteMethod=
this.deleteMethods.images);this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||
(this.deletePosition=this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}}}(gx.$);
gx.grid.impl=function(l){return function(c){var d=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName=
"";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.gxParentRowId="";this.gxHoveredRowId=null;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnAutoHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";
this.pagingButtonNextClass="PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=c;this.container=null;this.setContainerDelayed=function(f){this.container=f};this.addColumn=function(f){f.isGxRemove()&&(f.visible=!1);var g=
this.columns.length;f.index=g;f.table=this;this.columns[g]=f;"undefined"!=typeof f.htmlName&&(this.columnsHtmlName[f.htmlName]=f);"undefined"!=typeof f.gxId&&(this.columnsGxId[f.gxId]=f);"undefined"!=typeof f.gxAttId&&(this.columnsGxAttId[f.gxAttId]=f);return f};this.getColumnByIndex=function(f){return this.columns[f]};this.getColumnByCtrlType=function(f){return l.map(this.columns,function(g){return g.gxControl.type==f?g:null})};this.addRow=function(f,g,m){m=-1===m||void 0===m?this.rows.length:m;
f.table=this;if(null!=f)return this.rows[m]=f,"undefined"!=typeof f.id&&(this.rowsById[f.id]=f),"undefined"!=typeof f.gxId&&(this.rowsByGxId[f.gxId]=f),gx.lang.booleanValue(g)&&this.render(),f};this.getColumnByHtmlName=function(f){var g=this.columnsHtmlName[f];if("undefined"==typeof g&&"undefined"!=typeof this.gxCmpContext&&this.gxCmpContext.length<f.length){var m=f.substring(0,this.gxCmpContext.length);m==this.gxCmpContext&&(f=f.substring(this.gxCmpContext.length,f.length),g=this.columnsHtmlName[f])}return g};
this.getColumnByGxId=function(f){return this.columnsGxId[f]};this.getColumnByGxAttId=function(f){return this.columnsGxAttId[f]};this.getColumnForVar=function(f){for(var g=0;g<this.columns.length;g++){var m=this.parentGxObject.getValidStruct(this.columns[g].gxId);if(m&&m.gxvar==f)return this.columns[g]}return null};this.getRowById=function(f){return this.rowsById[f]};this.getRowByGxId=function(f){return this.rowsByGxId[f]};this.setSort=function(f,g){f==this.sortColumn?this.ascSort=null==g?!this.ascSort:
gx.lang.booleanValue(g):(this.sortColumn=f,this.ascSort=null==g?!0:gx.lang.booleanValue(g));this.doSort();this.ownerGrid.refreshGrid({immediateApplyInfiniteScroll:!0,onSetSort:!0})};this.doSort=function(){-1!=this.sortColumn&&this.rows.sort(this.sort)};this.getControlName=function(f,g){return this.gxCmpContext+g.htmlName+"_"+f.gxId};this.getControlId=function(f,g){return this.getControlName(f,g)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/
this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(f){return this.gxCmpContext+"delete"+this.gxGridName+"_"+f};this.showDeleteImage=function(f){this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn()&&(f=gx.dom.byId(this.deleteImgId(f)))&&!gx.fn.isVisible(f)&&(f.style.display="inline","A"==
f.parentNode.nodeName&&(f.parentNode.style.display="inline"))};this.appendDeleteHeader=function(f,g){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var m=this.isGxTrn(),p=!1;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(g==gx.grid.deletePositions.left)p=!0;else return;else gx.grid.deletePosition==g&&(p=!0);m&&p&&(g="&nbsp;",this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(g=gx.grid.deleteTitle),f.append('<th class="'+this.columnAutoHeaderClass+
'">'+g+"</th>"))}};this.appendDeleteImage=function(f,g,m){if(this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none&&this.isGxTrn()){var p=!1,u=!1;"DSP"!=this.parentGxObject.Gx_mode&&"DLT"!=this.parentGxObject.Gx_mode&&(p=g.gxDeleted(),u=g.gxIsMod()||g.gxExists());var x=this.deleteImgId(g.gxId),w=!1;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(m==gx.grid.deletePositions.left)w=!0;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==m)w=!0;else if(this.gxIsFreestyle){var A=
gx.grid.deletePositionFree;m==gx.grid.deletePositions.left?w=A==gx.grid.deletePositions.topL||A==gx.grid.deletePositions.bottomL:m==gx.grid.deletePositions.right&&(w=A==gx.grid.deletePositions.topR||A==gx.grid.deletePositions.bottomR);m=A}if(w){var q="<"+this.CELL_TAG+' class="gx-remove-row gx-remove-row-'+this.deleteImageAlign(m)+" gx-remove-row-"+this.deleteVerticalAlign(m)+'" style="text-align:'+this.deleteImageAlign(m)+";vertical-align:"+this.deleteVerticalAlign(m)+'">';m="</"+this.CELL_TAG+">";
w=!1;A="gx-grid-delete";gx.O.DSO&&(A="gx-grid__row-delete");var v=gx.getMessage("GXM_deleterow");p&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?(p=gx.grid.undeleteImage,gx.O.DSO&&(A="gx-grid__row-add"),v=gx.getMessage("GXM_Add")):u&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?p=gx.grid.deleteImage:p&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu?p=gx.grid.deleteImage:(p=gx.grid.deleteImage,w=!0);u="";f.append(q);this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&
(q=gx.fn.firstGridControl(this.ownerGrid.gridId),u=gx.grid.deleteTooltip,f.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+g.gxId+"');\""),f.append(' onfocus="gx.evt.onfocus(this,'+q+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+g.gxId+"',"+this.ownerGrid.gridId+')"'),g="",w&&(g+="display:none;"),g&&f.append(' style="'+g+'"'),f.append(">"));f.append('<img id="'+x+'" src="'+p+'"" title="'+v+'"');u&&f.append(' title="'+u+'"');f.append(' style="border-style: none;');
w&&f.append("display:none;");f.append('"');f.append(' class="'+A+'"/>');this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&f.append("</a>");f.append(m)}}};this.deleteVerticalAlign=function(f){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var g="top";if(f==gx.grid.deletePositions.bottomL||f==gx.grid.deletePositions.bottomR)g="bottom";return g}return"middle"};this.deleteImageAlign=function(f){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==
gx.grid.deleteMethods.menu)return"left";var g="right";if(f==gx.grid.deletePositions.bottomL||f==gx.grid.deletePositions.topL)g="left";return g}return"center"};this.getRowByPos=function(f){return this.container.querySelector(" tbody>tr:nth-child("+f+")")};this.scroll_last_row_selector=function(f){return this.ownerGrid.additiveResponse?" tbody tr:nth-last-child("+Math.min(f/2,1)+")":" tbody tr:last-child"};this.scroll_first_row_selector=function(){return" tbody tr:first-child"};this.scroll_nth_row_selector=
function(){return function(f,g){return g?" tbody tr:nth-child(n+"+f+"):nth-child(-n+"+(f+g)+")":" tbody tr:nth-child(n+"+f+")"}};this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(f,g){var m=this.ROW_TAG,p=this.ROW_BASE_CLASS;this.gxIsFreestyle&&(m=this.CELL_TAG);p+=(p?" ":"")+(f?this.evenRowClass:this.oddRowClass)+(g?" RowDeleted":"");return{cls:p,tag:m}};this.simpleAppendFn=function(f){return function(g){g.append(f)}};this.appendGridStyle=function(f){var g=
d.exec(this.gxHtmlTags);g&&1<g.length&&f.append(g[1]);gx.lang.emptyObject(this.gxBackground)||f.append(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,!0)+"');");gx.lang.emptyObject(this.gxBorderWidth)||f.append(";border: solid "+this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?f.append(";"):f.append(this.gxBordercolor+";");0<this.ownerGrid.width&&f.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";")};this.appendGridAttributes=function(f){f.append(this.gxHtmlTags.replace(d,
""));this.gxAllowCollapsing&&this.gxCollapsed&&f.append(" data-gx-sr-only ")};this.appendGridClassAttribute=function(f){-1==this.gxHtmlTags.indexOf("class=")&&f.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=function(f){f.append('<div valign="top" ><div>');f.append('<img class="collapse-icon" style="cursor:pointer;" src="');this.gxCollapsed?f.append(gx.ajax.getImageUrl(gx,"expandImage")):f.append(gx.ajax.getImageUrl(gx,"collapseImage"));f.append('" onclick="'+this.gridObject()+
'.expandCollapse(this, event);"></div><div>')};this.appendCollapsingWrapperEnd=function(f){f.append("</div></div>")};this.appendContainerStart=function(f,g){g.append("<table ");this.appendGridClassAttribute(g);g.append(' id="'+f+'" ');gx.lang.emptyObject(this.gxToolTipText)||g.append('title="'+this.gxToolTipText+'" ');g.append('style="');this.appendGridStyle(g);g.append('" ');this.appendGridAttributes(g);this.isAbstract||(g.append('data-bkgstyle="'),g.append(gx.grid.styles[this.gxTitleBackstyle]),
g.append('" '));g.append(">");gx.lang.emptyObject(this.header)||(g.append("<caption>"),g.append(this.header),g.append("</caption>"))};this.appendContainerEnd=this.simpleAppendFn("</table>");this.appendHeaderText=function(f,g){gx.lang.emptyObject(this.headerText)||g.append('<tr><td colspan="'+f+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>")};this.appendFooterText=function(f,g){gx.lang.emptyObject(this.footerText)||g.append('<tr><td colspan="'+f+'" class="'+this.footerClass+'">'+this.footerText+
"</td></tr>")};var k={left:"start",right:"end"},a=function(f){return gx.util.browser.isIE()||!k[f]?f:k[f]};this.appendHeader=function(f,g){var m=f.length,p=[],u=gx.ajax.getImageUrl(gx,"ascImage"),x=gx.ajax.getImageUrl(gx,"descImage"),w=0;g.append("<thead>");g.append("<tr>");this.appendDeleteHeader(g,gx.grid.deletePositions.left);for(var A=0;A<m;A++){var q=f[A];var v=[q.gxColumnClass||q.gxControl.columnClass,q.columnheaderclass||"",this.columnAutoHeaderClass].join(" ");g.append('<th class="'+v+'"');
v="white-space:nowrap;";gx.lang.gxBoolean(q.visible)||(v+="display:none;");q.width&&(q.gxWidthUnit||(q.gxWidthUnit="px"),v+="width:"+q.width+q.gxWidthUnit+";");q.align&&(v+="text-align:"+a(q.align)+";");gx.lang.emptyObject(this.gxTitleBackColor)||this.gxTitleBackstyle!=gx.grid.styles.header&&this.gxTitleBackstyle!=gx.grid.styles.report||(v+="background-color:"+this.gxTitleBackColor+";",this.gxRealTitleBackColor=this.gxTitleBackColor);gx.lang.emptyObject(this.gxBackColor)||this.gxTitleBackstyle!=gx.grid.styles.uniform||
(v+="background-color:"+this.gxBackColor+";",this.gxRealTitleBackColor=this.gxBackColor);gx.lang.emptyObject(this.gxTitleForeColor)||(v+="color:"+this.gxTitleForeColor+";");gx.lang.emptyObject(this.gxTitleFont)||(v+=this.gxTitleFont);q.titlefontunderline?v+="text-decoration: underline;":q.titlefontstrikethru&&(v+="text-decoration: line-through;");q.titlefontbold&&(v+="font-weight: bold;");q.titlefontitalic&&(v+="font-style: italic;");q.titlebackcolor&&(v+="background-color:"+gx.color.html(q.titlebackcolor).Html+
";");q.titleforecolor&&(v+="color:"+gx.color.html(q.titleforecolor).Html+";");g.append(' style="'+v+';"');g.append(' data-colindex="'+w+'"');g.append(">");w++;gx.lang.emptyObject(gx.text.trim(q.title))?g.append("&nbsp;"):(g.append("<span"),q.gxTooltip&&g.append(' title="'+q.gxTooltip+'"'),q.sortable&&g.append(' onclick="'+this.gridObject()+".grid.setSort("+q.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\""),g.append(">"),g.append(q.title),
null!=this.ascLabel&&null!=this.descLabel&&(this.ascLabel.src=u,this.descLabel.src=x,q.sortable&&this.sortColumn==q.index&&g.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,p))),g.append("</span>"));g.append("</th>")}this.appendDeleteHeader(g,gx.grid.deletePositions.right);g.append("</tr>");g.append("</thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("</tbody>");this.appendFooterWrapperStart=this.simpleAppendFn("<tfoot>");
this.appendFooterWrapperEnd=this.simpleAppendFn("</tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("</tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' data-cellspacing='0' data-cellpadding='0'><tbody>");this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</tbody></table></td>");this.appendCellPrefixEnd=this.appendCellPrefixStart=this.appendRowPrefix=gx.emptyFn;this.beforeRender=function(){this.tableClass=this.gxCssClass;
this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnAutoHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;l.each(this.beforeRenderCallbacks,function(f,g){g()});this.beforeRenderCallbacks=[]};this.drawEmptyContent=function(){var f=this.ownerGrid,g=f.getGridInnerTableId();f.emptyText&&0===l("#"+g+" + .gx-text-gridnodata").length&&l(document.createElement("div")).addClass("GridNoDataText gx-text-gridnodata").text(f.emptyText).insertAfter(l("#"+
g));0===this.rows.length?l("#"+g).attr("data-gx-grid-nodata",""):l("#"+g).removeAttr("data-gx-grid-nodata")};this.purgeGrid=function(){var f,g=["onblur","onclick","onfocus","onchange"],m=gx.dom.byTag("input",this.container);var p=0;for(f=m.length;p<f;p++)gx.dom.purgeElement(m[p],g);m=gx.dom.byTag("textarea",this.container);p=0;for(f=m.length;p<f;p++)gx.dom.purgeElement(m[p],g);m=gx.dom.byTag("select",this.container);p=0;for(f=m.length;p<f;p++)gx.dom.purgeElement(m[p],g);m=gx.dom.byTag("span",this.container);
p=0;for(f=m.length;p<f;p++)gx.dom.purgeElement(m[p],g);m=gx.dom.byTag("img",this.container);p=0;for(f=m.length;p<f;p++)gx.dom.purgeElement(m[p],g)};this.render=function(f,g,m,p,u,x){f=!!f;u=this.ownerGrid.getGridInnerTableId();var w=this.container;this.ownerGrid.disposeTemplateObject();this.beforeRender();this.ownerGrid.additiveResponse&&this.doSort();if(x.ScrollingElement)var A=x.ScrollingElement.scrollTop;f=this.drawGrid(u,f,g,m,x);gx.dom.shouldPurge()&&this.purgeGrid();var q=gx.dom.getActiveElement();
g=q?q.tagName.toUpperCase():"";g=q&&(q.id||q.name)&&"FORM"!=g&&gx.dom.isChildNode(q,w);var v=gx.dom.getCaretOffset(q),t=(m=gx.dom.byId(this.ownerGrid.gxComponentContext+this.ownerGrid.realGridName+"ContainerTbl"))?m.scrollTop:0;this.setGridHtml(this.container,f,x);this.ownerGrid.isNestedLoad||gx.dom.fixes.fixTableResets(this.container);this.ownerGrid.applyTemplateObject({deferred:!1});t&&m&&(m=gx.dom.byId(this.ownerGrid.gxComponentContext+this.ownerGrid.realGridName+"ContainerTbl"),m.scrollTo(0,t));
this.gxIsFreestyle||this.ownerGrid.instanciateRow(gx.fn.currentGridRowImpl(this.ownerGrid.gridId));this.ownerGrid.additiveResponse&&-1!=this.sortColumn&&this.ownerGrid.handleInfiniteScrolling();g&&(f=A?0:1,g=function(){var B=gx.dom.el(q.id||q.name,!1,!0);B&&(gx.csv.disableFocus=!0,0<B.offsetWidth&&0<B.offsetHeight&&(A&&(x.ScrollingElement.scrollTop=A),gx.fn.scrollIntoViewIfNeeded(B,w,{block:"end"}),gx.fn.setFocus(B,function(){gx.dom.setCaretOffset(B,v)})))},f?gx.lang.doCallTimeout(g,this,[],f):g());
this.drawEmptyContent();this.afterRender(u);p();this.rendered=!0};this.setGridHtml=function(f,g,m){m=m||{};gx.csv.IgnoreBlur=!0;var p=this.ownerGrid.InverseLoading,u,x=void 0!=m.atRow&&-1!=m.atRow,w=-1===this.sortColumn&&(this.ownerGrid.additiveResponse||m.addRows||x),A=m.ScrollingElement;A&&A!==window||(A=f.querySelector("tbody")||f);try{if(gx.fn.setOpacity(0,f),w)if(-1!==this.sortColumn)f.innerHTML=g,gx.plugdesign.applyTemplateObject({selector:f});else{if(this.gxIsFreestyle){var q=document.createElement("div");
q.className="gx-sr-only";q.innerHTML=g;q.setAttribute("data-gx-grid-rendering-additive-rows","");var v=l(q);var t=p?this.firstItemSelector:this.lastItemSelector;p?v.insertBefore(t):v.insertAfter(t)}else if(p)v=l(g).insertBefore(this.firstItemSelector);else{var B=function(D){return 0<A.childNodes.length?D.insertAfter(this.lastItemSelector):D.appendTo(A)}.bind(this);if(x){var G=A.childNodes.length,J=g.split(/<tr/),n=J.slice(1,G+1-m.atRow),r=J.slice(G+1-m.atRow),y=G-this.rows.length;Array.from(A.childNodes).slice(0,
n.length).forEach(function(D,F){var H=document.createElement("tr");D.replaceWith(H);H.outerHTML="<tr"+n[F]});if(0<r.length){var C=l("<tr"+r.join("<tr"));B(C)}for(;0<y--;)A.removeChild(A.lastChild);q=l(this.nthItemSelector(m.atRow+1,J.length-1))}else q=B(l(g))}this.newAdditiveRows=x?null:v;gx.plugdesign.applyTemplateObject({selector:v,deferred:!0}).then(function(){this.newAdditiveRows&&(u=this.newAdditiveRows.children(),p?u.insertBefore(this.newAdditiveRows):u.insertAfter(this.newAdditiveRows),this.newAdditiveRows.trigger("gx-grid:after-additive-rows-render"),
this.newAdditiveRows.remove(),delete this.newAdditiveRows)}.closure(this))}else f.innerHTML=g}finally{gx.lang.requestAnimationFrame(function(){setTimeout(function(){gx.fn.setOpacity("reset",f)},10)})}gx.csv.IgnoreBlur=!1};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.renderRow=function(f,g,m,p,u,x,w,A,q,v,t,B,G,J,n,r){f=this.rows[m];B=!!(m%2);var y=this.isGxTrn();g&&m===p&&!gx.fn.currentGridRowImpl(this.gxId)&&gx.fn.setCurrentGridRow(this.gxId,f.gxId);var C=f.gxDeleted();
t=new gx.text.stringBuffer;var D=this.getRowRenderingProps(B,C,m,p,u);x&&this.gxIsFreestyle&&(0<m&&0===m%this.gxGridCols||0===m&&0<this.gxGridCols)&&(0<m&&this.appendRowEnd(w,m,p,u),this.appendRowStart(w,m,p,u));var F="";this.gxTitleBackstyle==gx.grid.styles.report&&(F=B?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);this.gxTitleBackstyle==gx.grid.styles.header&&(F=this.gxLinesBackcolorOdd);this.gxTitleBackstyle==gx.grid.styles.uniform&&(F=this.gxBackColor);if(!this.gxIsFreestyle||this.gxIsFreestyle&&
x)this.appendRowPrefix(t,m,p,u),t.append("<"+D.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+f.gxId+"'"),this.gxIsFreestyle||t.append(' data-gxrendering_row=""'),this.gxIsFreestyle&&x?(t.append(' data-gxrow="'+f.gxId.toString()+'"'),(A=this.columns[1].gxControl.verticalAlign)&&t.append(' data-cell-valign="'+A+'"')):t.append(' data-gxrow="'+f.gxId.toString()+'"'),t.append(' class="'+D.cls+'"'),f.selected&&t.append(' data-selected="1"'),B="",F&&(B="background-color:"+F+";"),gx.lang.emptyObject(this.gxLinesFont)||
(B+=this.gxLinesFont),B&&t.append(' style="'+B+'" '),t.append(">"),w.append(t.toString());this.gxIsFreestyle&&(x&&this.appendRowBreaksWrapperStart(w,f),q=this.gxBuffer.toString(),w.append(q));this.gxIsFreestyle||this.appendDeleteImage(w,f,gx.grid.deletePositions.left);this.appendCellPrefixStart(w,m,p,u,f,D);for(A=0;A<v;A++){t=r[A];B=gx.lang.gxBoolean(t.visible);G=f.gxProps[t.index];q=f.values[t.index];J=t.gxControl;this.gxIsFreestyle&&J.type==gx.html.controls.types.row&&0===t.index&&(J.isFreestyleRow=
!0);J.setGridData({grid:this.ownerGrid,row:f,gridId:this.gxId,gridRow:f.gxId});n?(delete J.formattedValue,J.value=q,J.id=t.htmlName+"_"+J.gridRow):(J.setProperties.apply(J,G),J.isFreestyleRow&&(J.cssClass=D.cls));if(g)delete gx.usrPtys[J.id];else if(void 0!==gx.usrPtys[J.id])for(var H in gx.usrPtys[J.id])"enabled"==H&&(J.rtEnabled=!0),J.setIndividualProp(H,gx.usrPtys[J.id][H]);C&&(J.rtEnabled=!0,J.enabled=!1);q=this.parentGxObject.getValidStruct(t.gxId);"undefined"!==typeof G.Value&&(J.value="."!=
gx.decimalPoint&&q&&"decimal"==q.type&&"string"==typeof G.Value?G.Value.replace(".",gx.decimalPoint):G.Value);"undefined"!==typeof G.FormattedValue&&(J.formattedValue=G.FormattedValue);"undefined"===typeof J.formattedValue&&(n&&q&&q.v2c?(J.persistValue(),q.v2c(f.gxId),J.formattedValue=gx.fn.getControlValue(J.id)):J.formattedValue=J.value);G.Values&&(J.possibleValues=G.Values.v);this.gxIsFreestyle&&J.type==gx.html.controls.types.row&&0===t.index&&(J.id=this.gxCmpContext+this.gxGridObject+"Row_"+f.gxId,
y&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&(J.oncontextmenu=this.gridObject()+".showContextMenu(this, event);"),F&&(J.style+="background-color:"+F+";"));this.gxIsFreestyle||(w.append("<"+this.CELL_TAG+' class="gx-attribute '+(J.columnClass||"")+'" data-cell-valign="'+t.valign+'"'),w.append(' data-colindex="'+A+'"'),G="",B||(G+="display:none;",!J.visible||t.isGxRemove()||this.ownerGrid.isPromptColumn(t)||this.ownerGrid.addColPropertyAfterRender(A,"Visible",1)),t.width?(t.gxWidthUnit||
(t.gxWidthUnit="px"),G+="width:"+t.width+t.gxWidthUnit+";"):t.gxColSize&&(J.colSize=t.gxColSize),t.align&&(G+="text-align:"+a(t.align)+";"),J.style&&(G+=J.style.replace(/content:var\(.*\);/,"")),G&&w.append(' style="'+G+'" '),w.append(">"));w.append(J.getHtml());this.gxIsFreestyle&&J.type==gx.html.controls.types.row&&0===t.index&&this.appendDeleteImage(w,f,gx.grid.deletePositions.left);J.persistValue();this.gxIsFreestyle||w.append("</"+this.CELL_TAG+">");this.gxIsFreestyle&&(t.index==this.columns.length-
1&&this.appendDeleteImage(w,f,gx.grid.deletePositions.right),q=t.buffer.toString(),w.append(q))}this.appendCellPrefixEnd(w,m,p,u);this.gxIsFreestyle&&x?this.appendRowBreaksWrapperEnd(w):this.appendDeleteImage(w,f,gx.grid.deletePositions.right)};this.drawGrid=function(f,g,m,p,u){var x=this;u=u||{};var w=this.isGxTrn(),A=this.gxIsFreestyle&&1<this.gxGridCols;m=new gx.text.stringBuffer;var q=this.columns,v=q.length,t,B=void 0!=u.atRow&&-1!=u.atRow,G=-1===this.sortColumn&&(this.ownerGrid.additiveResponse||
u.addRows);!this.gxIsFreestyle&&w&&v++;var J,n=function(){if(0!==Number(this.pageSize)){J=this.getMaxPage();0>=this.currentPage?this.currentPage=1:this.currentPage>J&&(this.currentPage=J);var W=B?u.atRow:Math.max(this.pageSize*(this.currentPage-1),0);var V=Math.min(W+this.pageSize,this.rows.length)}else W=0,V=this.rows.length;return{firstRow:W,lastRow:V}}.call(this),r=n.firstRow;n=n.lastRow;if(G||u.immediateApplyInfiniteScroll){var y=r;r=G||"0"!=this.firstRecordOnPage&&-1==this.sortColumn?this.lastRenderedRow:
0;n=this.rows.length;this.ownerGrid.firstAdditiveRow=r}else y=r;this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(m);var C=q.length;if(!this.gxIsFreestyle&&n>r)for(var D=0;D<C;D++){var F=q[D];var H=F.gxControl;var L=!1;var N=gx.lang.gxBoolean(F.visible);F.visible=N;this.ownerGrid.checkPromptColumn(F);for(t=y;t<n&&!L;t++){var O=this.rows[t];var Q=O.gxProps[F.index];p||H.setProperties.apply(H,Q);H.visible&&(L=!0)}t=function(W){F.visible=L;G=!1;r=y;x.ownerGrid.firstAdditiveRow=0;u.addRows=!1};
this.ownerGrid.additiveResponse||(F.visible&&!L&&t(!1),!F.visible&&L&&t(!0))}if(D=!B&&(!G||-1!=this.sortColumn))this.appendContainerStart(f,m),this.appendHeaderText(v,m),this.gxIsFreestyle||this.appendHeader(q,m),this.appendBodyWrapperStart(m);if(this.ownerGrid.InverseLoading)for(t=n-1;t>=r;t--)this.renderRow.call(this,O,g,t,r,n,A,m,void 0,void 0,C,F,N,Q,H,p,q);else for(t=r;t<n;t++)this.renderRow.call(this,O,g,t,r,n,A,m,void 0,void 0,C,F,N,Q,H,p,q);this.gxIsFreestyle&&0<this.gxGridCols&&A&&this.appendRowEnd(m);
this.lastRenderedRow=n;D&&(this.appendBodyWrapperEnd(m),this.appendFooterWrapperStart(m),this.ownerGrid.InfiniteScrolling||!w&&!this.hasPagingButtons()||this.appendNavigationBar(v,m),this.appendFooterText(v,m),this.appendFooterWrapperEnd(m),this.appendContainerEnd(m),this.gxAllowCollapsing&&this.appendCollapsingWrapperEnd(m));this.fromCollection=p;f=m.toString();m.clear();m=null;return f};this.defineEventHandlers=function(){var f={};if(this.ownerGrid&&this.ownerGrid.parentObject&&this.ownerGrid.parentObject.IsComponent)var g=
this.ownerGrid.parentObject;g&&(g=gx.pO.getWebComponent(g.CmpContext),f.hookKey=g&&g.getContainer()&&g.getContainer().id);this.gxIsFreestyle||(gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this,f),gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this,f));this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this,f);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,
[],!0),this,f);gx.evt.attach(this.container,"click",this.clickHandler,this,f);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this,f)};this.isGridRow=function(f){return f&&f.tagName.toLowerCase()==this.ROW_TAG&&null!=f.getAttribute("data-gxrow")&&l(f).closest(".gx-grid")[0]==this.container};this.getTargetRow=function(f,g){for(;f&&gx.dom.isChildNode(f,this.container);){if(this.isGridRow(f)&&(!g||"body"==g&&"TBODY"==f.parentNode.tagName||"header"==g&&"THEAD"==f.parentNode.tagName))return f;
f=gx.dom.findParentByTagName(f,this.ROW_TAG)}};this.mouseOverHandler=function(f){!gx.runtimeTemplates&&this.gxAllowHovering&&(f=this.getTargetRow(gx.evt.source(f)))&&"1"!=f.getAttribute("data-selected")&&(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(f),this.gxHoveredRowId=parseInt(f.getAttribute("data-gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(f){!gx.runtimeTemplates&&this.gxAllowHovering&&(f=this.getTargetRow(gx.evt.source(f)))&&"1"!=f.getAttribute("data-selected")&&
this.endRowHover(f)};this.contextMenuHandler=function(f){var g=this.getTargetRow(gx.evt.source(f));g&&this.ownerGrid.showContextMenu(g,f)};this.mouseDownHandler=function(f,g){if(f=this.getTargetRow(gx.evt.source(f)))g="undefined"===typeof g?this.gxAllowSelection&&!this.gxIsFreestyle:g,this.setRowSelected(f,f.getAttribute("data-gxrow"),!1,g)};this.keyDownHandler=function(f){this.getTargetRow(gx.evt.source(f))&&this.ownerGrid.rowKeyPressed(f)};this.clickHandler=function(f){var g=gx.evt.source(f);g.parentNode&&
gx.dom.hasClass(g.parentNode,this.pagingBarClass)&&gx.evt.waitGridRefresh(function(){this.pagingHandler(g,f)}.closure(this))};this.pagingHandler=function(f,g){var m="";gx.evt.cancel(g,!0);gx.dom.hasClass(f,this.pagingButtonDisabled)||(gx.dom.hasClass(f,this.pagingButtonFirstClass)?m="FIRST":gx.dom.hasClass(f,this.pagingButtonPreviousClass)?m="PREV":gx.dom.hasClass(f,this.pagingButtonNextClass)?m="NEXT":gx.dom.hasClass(f,this.pagingButtonLastClass)&&(m="LAST"),this.changeGridPage(m))};this.changeGridPage=
function(f,g){var m=l.Deferred(),p=this.gxGridName.toUpperCase()+"PAGING",u=this.ownerGrid,x="";if(f){u.InfiniteScrolling||this.mask();if(gx.pO.fullAjax){if(gx.setGxO(this.parentGxObject),x="E"+u.realGridName.toUpperCase()+"_"+f+"PAGE"+(u.isMasterPageGrid?"_MPAGE":""),u.parentGrid)var w=u.parentGrid.gridId}else gx.fn.setHidden(this.gxCmpContext+p,f),x=this.gxCmpContext+"E"+p+".";gx.evt.execEvt(this.gxCmpContext,this.parentGxObject.IsMasterPage,x,gx.evt.dummyCtrl,w,void 0,void 0,!1,function(){this.unmask();
m.resolve()}.closure(this),g);return m.promise()}};this.setRowSelected=function(f,g,m,p,u){gx.grid.setActiveGridRow(this,g);p=void 0===p||p;u=void 0===u||u;var x=function(){var w=gx.O;if(!gx.lang.emptyObject(this.parentGxObject)){p&&!gx.runtimeTemplates&&void 0===f.gxOriginalBackcolor&&(f.gxOriginalBackcolor=f.style.backgroundColor);this.instanciateSelectionVars(g);var A=this.getRowByGxId(g),q=this.selectedRows||[],v=[];A&&q.push(A);for(A=0;A<q.length;A++){var t=q[A];t.selected=t.gxId==g;t.selected?
(p&&(gx.runtimeTemplates||(f.gxSBackcolor=void 0!==f.gxOriginalBackcolor?f.gxOriginalBackcolor:f.style.backgroundColor,this.gxSelectionColor&&(f.style.backgroundColor=this.gxSelectionColor.Html)),gx.dom.addClass(f,this.selectedRowClass),l(f).attr("data-gxselected","")),v.push(t)):p&&(t=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+t.gxId),null==t||void 0===t.gxSBackcolor||gx.runtimeTemplates||(t.style.backgroundColor=t.gxSBackcolor),gx.dom.removeClass(t,this.selectedRowClass),l(t).removeAttr("data-gxselected"))}for(A=
0;A<v.length;A++)this.instanciateSelectedRow(v[A],!u);gx.setGxO(w)}};m&&(p||gx.O.isTransaction())?setTimeout(x.closure(this),100):x.call(this)};this.instanciateSelectionVars=function(f){gx.setGxO(this.parentGxObject);gx.fn.setCurrentGridRow(this.gxId,f);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",f.substring(0,4))};this.instanciateSelectedRow=function(f,g){this.selectedRows=[f];this.setSelectedRowVars(f);if(this.gxOnLineActivate&&!this.ownerGrid.isLoading&&(gx.csv.instanciatedRowGrid=
this.ownerGrid,!g)){var m=this.parentGxObject;gx.lang.doCallTimeout(function(){gx.evt.doAfterProcessing(function(){if(m.fullAjax){var p=m.isServerEvent(this.gxOnLineActivate);gx.evt.dispatcher.dispatch(m.getServerEventName(this.gxOnLineActivate),m,this.ownerGrid.gridId,f.gxId,p)}else m[this.gxOnLineActivate].call(m,f.gxId)},this)},this,[],100)}};this.setSelectedRowVars=function(f){for(var g=this.parentGxObject,m=this.columns.length,p=0;p<m;p++){var u=g.GXValidFnc[this.columns[p].gxId];null!=u&&u.c2v&&
u.c2v(f.gxId)}};this.scrollIntoView=function(f,g,m){function p(v,t,B,G){return!1===g||B<=v+G&&v<=t+G?Math.min(B,Math.max(t,v)):(t+B)/2}function u(v,t,B,G){return{left:v,top:t,width:B,height:G,right:v+B,bottom:t+G,translate:function(J,n){return u(J+v,n+t,B,G)},relativeFromTo:function(J,n){var r=v,y=t;J=J.offsetParent;n=n.offsetParent;if(J===n)return x;for(;J;J=J.offsetParent)r+=J.offsetLeft+J.clientLeft,y+=J.offsetTop+J.clientTop;for(;n;n=n.offsetParent)r-=n.offsetLeft+n.clientLeft,y-=n.offsetTop+
n.clientTop;return u(r,y,B,G)}}}var x,w;for(x=u(f.offsetLeft,f.offsetTop,f.offsetWidth,f.offsetHeight);w=f.parentNode;){var A=w.offsetLeft+w.clientLeft,q=w.offsetTop+w.clientTop+m;x=x.relativeFromTo(f,w).translate(-A,-q);w.scrollTop=p(w.scrollTop,x.bottom-w.clientHeight+m,x.top,w.clientHeight);x=x.translate(A-w.scrollLeft,q-w.scrollTop);f=w}};this.keepGridItemVisible=function(f,g){var m=gx.util.browser.isOldIE(),p=l(this.ownerGrid.getContainerControl()),u=m?p.closest(".gx-grid-fixed-header-ie7"):
l("#"+this.ownerGrid.getContainerControlId()+" > table > tbody");0<u.length&&u[0].offsetHeight<u[0].scrollHeight&&(f=this.ownerGrid.getRowCtrlByIdx(f))&&(m=m?parseInt(p.css("paddingTop"),10):0,this.scrollIntoView(f,g,m))};this.setNextRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId+1,!0,!1)};this.setPreviousRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId-1,!0,!0)};this.toggleRowHoverById=function(f,g,m){var p=this.ownerGrid.getRowCtrlByIdx(f),u=!1;
p&&(u=!0,g?(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(p),this.gxHoveredRowId=f,this.keepGridItemVisible(f,m)):this.endRowHover(p));return u};this.getRowByDOMCtrl=function(f){f=parseInt(f.getAttribute("data-gxrow").substring(0,4),10)-1;return this.getRowById(f)};this.startRowHover=function(f){if(gx.runtimeTemplates)l(f).addClass("gx-row-hovered");else{void 0===f.gxOriginalBackcolor&&(f.gxOriginalBackcolor=f.style.backgroundColor);var g=this.getRowByDOMCtrl(f);this.gxAllowHovering&&
this.gxHoverColor&&!g.selected&&(f.gxHBackcolor=f.style.backgroundColor,f.style.backgroundColor=this.gxHoverColor.Html)}};this.endRowHover=function(f){if(gx.runtimeTemplates)l(f).removeClass("gx-row-hovered");else{var g=this.getRowByDOMCtrl(f);this.gxAllowHovering&&!g.selected&&void 0!==f.gxHBackcolor&&(f.style.backgroundColor=f.gxHBackcolor)}};this.hasPagingButtons=function(){return this.usePaging&&0<this.pageSize&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(f,g){gx.lang.emptyObject(this.gxRealTitleBackColor)?
g.append('<tr><td colspan="'+f+'" class="'+this.navigationClass+'" style="text-align: center;">'):g.append('<tr><td colspan="'+f+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">')};this.appendNavBarRowEnd=function(f){f.append("</td></tr>")};this.appendNavigationBar=function(f,g){var m=this.getRowCount();m=(0<m||0===m&&!this.isFirstPage())&&this.usePaging;var p=this.parentGxObject.Gx_mode;p=this.isGxTrn()&&!this.gxHasAddlines&&!("DSP"==
p||"DLT"==p);this.navigationClass=this.gxFooterClass;this.gxIsFreestyle&&1<this.gxGridCols&&(f=this.gxGridCols);(m||p)&&this.appendNavBarRowStart(f,g);m&&(g.append('<div class="'+this.pagingBarClass+'" style="padding-bottom:5px;">'),0>=this.currentPage&&(this.currentPage=1),g.append(this.buildPagingButton(this.pagingButtonFirstClass,!this.isFirstPage(),gx.getMessage("GXM_first"))),g.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous"))),g.append(this.buildPagingButton(this.pagingButtonNextClass,
!this.isLastPage(),gx.getMessage("GXM_next"))),g.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),gx.getMessage("GXM_last"))),g.append("</div>"));p&&(f="["+this.gxNewRowText+"]",gx.O.DSO&&(f=this.gxNewRowText),g.append(this.buildLink(f,this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);")));(m||p)&&this.appendNavBarRowEnd(g)};this.buildPagingButton=function(f,g,m){return'<button type="button" class="'+
f+(g?"":" "+this.pagingButtonDisabled)+'"style="padding-left:20px;padding-bottom:5px;'+((g?"":"opacity:.7;cursor:default")+'" title="')+m+'"'+(g?"":" disabled")+"/>"};this.buildLink=function(f,g,m,p,u){var x=this.navigationLinkClass;return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+u+'" onblur="this.style.textDecoration = \'none\';"><span '+(void 0!==p?'id="'+p+'"':"")+' style="cursor:'+((document.createTextRange?"hand":"pointer")+';" class="')+x+'" onclick="'+
g+'" onMouseOver="this.className=\''+this.highlightedNavigationLinkClass+"';window.status='"+m+"';return true;\" onMouseOut=\"this.className='"+x+"';window.status='';return true;\">"+f+"</span></a>"};this.isLastPage=function(){return"0"!=this.eof};this.isFirstPage=function(){return"0"==(gx.lang.emptyObject(this.firstRecordOnPage)?"0":this.firstRecordOnPage)};this.getWebImageTag=function(f){return'<img border="0" src="/'+this.basePath+this.imgsDir+f.toString()+'"/>'};var b=0;this.handleLabel=function(f){if(f.src){var g=
"img"+b;b++;var m="sort-ico--asc";f.src.includes("desc")&&(m="sort-ico--desc");return"<img name='"+g+"' border='0' src='"+f.src+"' class='"+m+"' >"}return f};this.sort=function(f,g){if(f.table.isGxTrn())if(f.gxExists()||g.gxExists()||f.gxIsMod()||g.gxIsMod()){if(!f.gxExists()&&g.gxExists()||!f.gxIsMod()&&g.gxIsMod())return 1;if(f.gxExists()&&!g.gxExists()||f.gxIsMod()&&!g.gxIsMod())return-1}else return 0;var m=f.table,p=m.getColumnByIndex(m.sortColumn);f=f.values[m.sortColumn];g=g.values[m.sortColumn];
gx.lang.instanceOf(f,Array)||(f=[f]);gx.lang.instanceOf(g,Array)||(g=[g]);switch(p.type){case gx.types.numeric:p=function(v){v=gx.num.parseFloat(v,gx.thousandSeparator,gx.decimalPoint);isNaN(v)&&(v=0);return v};break;case gx.types.date:case gx.types.dateTime:p=function(v){try{v=(new gx.date.gxdate(v)).Value}catch(t){gx.dbg.logEx(t,"JSTable.js","sort")}return v.valueOf()};break;case gx.types.bool:p=function(v){return gx.lang.booleanValue(v)?1:0};break;default:p=function(v){return String(v).replace(/<[^>]*>/g,
"").toUpperCase()}}for(var u=Math.max(f.length,g.length),x=0,w=0;0===x&&w<u;w++){var A=f[w];null==A&&(x=-1);var q=g[w];null==q&&(x=1);0===x&&(A=p(A),q=p(q),x="function"==typeof A.localeCompare?A==q?0:A.localeCompare(q):A==q?0:A>q?1:-1);0!==x&&(x*=m.ascSort?1:-1)}return x};this.mask=function(){var f=this.container||"function"===typeof this.getContainerControl&&this.getContainerControl();f&&f.firstChild&&gx.dom.mask(f.firstChild)};this.unmask=function(){var f=this.container||"function"===typeof this.getContainerControl&&
this.getContainerControl();f&&f.firstChild&&gx.dom.unmask(f.firstChild)}}}(gx.$);
gx.grid.column=function(l,c,d,k,a){this.table=null;this.index=-1;this.title=l||"";this.type="undefined"!=typeof c?c:gx.types.character;this.width=d||"";this.align=k||"left";this.valign=a||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(l,c,d,k){this.table=null;this.id=l;this.gxParentRowId=k||"";this.gxId=d+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=c.Props||[];this.gxRenderProps=c.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
gx.grid.responsiveGrid=function(l){var c=["xs","sm","md","lg"];return function(d){d=new gx.grid.impl(d);d.appendContainerStart=function(k,a){a.append("<div ");this.appendGridClassAttribute(a);a.append(' id="'+k+'" ');gx.lang.emptyObject(this.gxToolTipText)||a.append('title="'+this.gxToolTipText+'" ');a.append('style="');this.appendGridStyle(a);a.append('" ');this.appendGridAttributes(a);a.append(">")};d.getRowByPos=function(k){return this.container.querySelector((1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:nth-child("+
k+")")};d.scroll_last_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:last"};d.scroll_firt_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:first"};d.ROW_TAG="div";d.CELL_TAG="div";d.ROW_BASE_CLASS="row";d.getRowRenderingProps=function(k,a){var b=this.ROW_TAG,f=this.ROW_BASE_CLASS,g=this.gxGridResponsiveCols;this.gxIsFreestyle&&(b=this.CELL_TAG,f=l.map(c,function(m,p){return["col-",m,"-",Math.floor(12/(g[p]||12))||1].join("")}).join(" "));
this.gxIsFreestyle||(f+=" "+(k?this.evenRowClass:this.oddRowClass)+(a?" RowDeleted":""));return{cls:f,tag:b}};d.appendGridClassAttribute=function(k){k.append(' class="'+this.gxCssClass+'"')};d.appendGridAttributes=function(k){this.gxAllowCollapsing&&this.gxCollapsed&&k.append(" data-gx-sr-only ")};d.appendContainerEnd=d.simpleAppendFn("</div>");d.appendHeaderText=gx.emptyFn;d.appendFooterText=gx.emptyFn;d.appendHeader=gx.emptyFn;d.appendBodyWrapperStart=gx.emptyFn;d.appendBodyWrapperEnd=gx.emptyFn;
d.appendFooterWrapperStart=d.simpleAppendFn("<div>");d.appendFooterWrapperEnd=d.simpleAppendFn("</div>");d.appendRowStart=function(k,a,b){a==b&&!0!==this.ownerGrid.additiveResponse&&k.append('<div class="row">')};d.appendRowEnd=function(k,a,b,f){a==f&&!0!==this.ownerGrid.additiveResponse&&k.append("</div>")};d.appendRowBreaksWrapperStart=function(k,a){k.append("<div>");this.appendDeleteImage(k,a,gx.grid.deletePositions.left)};d.appendRowBreaksWrapperEnd=d.simpleAppendFn("</div></div>");d.appendRowPrefix=
function(k,a,b){if(a!=b){var f=this.gxGridResponsiveCols,g=!1;b=l.map(c,function(m,p){return 1!=f[p]&&0===a%f[p]||0===f[p]&&0===a%12?(g=!0,"visible-"+m):""}).join(" ");g&&k.append('<div class="clearfix '+b+'"></div>')}};d.appendCellPrefixStart=function(k,a,b,f,g){a=g.gxDeleted()?" RowDeleted":"";1==this.gxGridCols&&(k.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+g.gxId+'" data-gxrow="'+g.gxId.toString()+'" class="row'+a+'"><div class="col-xs-12">'),this.appendDeleteImage(k,g,gx.grid.deletePositions.left))};
d.appendCellPrefixEnd=function(k){1==this.gxGridCols&&k.append("</div></div>")};d.appendNavBarRowStart=function(k,a){a.append('<div class="'+this.ROW_BASE_CLASS+'"><div class="col-xs-12 '+this.navigationClass+'">')};d.appendNavBarRowEnd=function(k){k.append("</div></div>")};return d}}(gx.$);
gx.grid.flexGrid=function(l){var c,d=gx.dom;this.useNativeChildControls=!0;this.show=function(){c=l("#"+this.getContainerControl().id);var b=this.drawGrid((this.gxCmpContext||"")+this.gxGridObject+"Tbl",!this.IsPostBack);this.setGridHtml(c.get(0),b);this.ownerGrid.applyTemplateObject({deferred:!1});gx.dom.fixes.fixTableResets(this.container);this.gxWidth&&c.width(d.addUnits(this.gxWidth,this.gxWidthUnit));this.gxHeight&&c.height(d.addUnits(this.gxHeight,this.gxHeightUnit))};this.destroy=function(){c&&
c.hide()};this.appendGridAttributes=function(b){gx.grid.flexGrid.prototype.appendGridAttributes.apply(this,arguments);b.append(" data-gx-flex")};var k={"flex-direction":"row","flex-wrap":"no-wrap","justify-content":"flex-start","align-items":"flex-start","align-content":"flex-start"},a=function(b,f,g){k[f]!==g&&b.append(f+": "+g+";")};this.appendGridStyle=function(b){gx.grid.flexGrid.prototype.appendGridStyle.apply(this,arguments);a(b,"flex-direction",this.FlexDirection);a(b,"flex-wrap",this.FlexWrap);
a(b,"justify-content",this.JustifyContent);a(b,"align-items",this.AlignItems);a(b,"align-content",this.AlignContent)};this.getRowRenderingProps=function(){return{cls:"",tag:this.ROW_TAG}};this.appendRowPrefix=this.appendRowEnd=this.appendRowStart=gx.emptyFn;this.appendRowBreaksWrapperStart=function(b,f){this.appendDeleteImage(b,f,gx.grid.deletePositions.left)};this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</div>");this.appendCellPrefixStart=function(b,f,g,m,p){1==this.gxGridCols&&(b.append('<div id="'+
this.gxCmpContext+this.gxGridObject+"Row_"+p.gxId+'" data-gxrow="'+p.gxId.toString()+'">'),this.appendDeleteImage(b,p,gx.grid.deletePositions.left))};this.appendCellPrefixEnd=function(b){1==this.gxGridCols&&b.append("</div>")};this.appendNavBarRowStart=function(b,f){f.append('</div></div><div class="'+this.navigationClass+'">')};this.appendNavBarRowEnd=function(b){b.append("</div>")};this.scroll_last_row_selector=function(){return" > DIV[data-gxrow]:last"};this.scroll_firt_row_selector=function(){return" > DIV[data-gxrow]:first"}};
gx.lang.inherits(gx.grid.flexGrid,gx.grid.responsiveGrid);
gx.GxObject=function(l){var c=function(){this.onLoadDeferred=l.Deferred();this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.GridsUpper=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings={};this.UCBindingsHiddens={};this.GXValidFnc=
[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls={};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.InternalParms={};this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=c.CONTROL_CMP_REGEX;this.rowPatternRegex=/_([0-9]{4})+$/;this.postEventPopupCommands=[];this.targetsCounter=9996;this.feedbackCallCounter=this.feedbackTimeoutId=
0;gx.lang.apply(this,new gx.util.Observable)};c.GX_EVENT_CONTROL_DATA_ATTR="data-gx-evt-control";c.GX_EVENT_CONDITION_DATA_ATTR="data-gx-evt-condition";c.GX_EVENT_DATA_ATTR="data-gx-evt";c.GX_EVENT_CODE_DATA_ATTR="data-gx-evt-code";c.GX_EVENT_CONTEXT_DATA_ATTR="data-gx-context";c.GX_EVENT_CONTROL_DELAYED_ATTR="data-gx-click-delay";c.GX_EVENT_EXCLUDED_CTRLTYPES=["dyncombo","combo"];c.GX_EVENT_EVENT_IN_PROGRESS="data-gx-evt-inprogress";c.WEBCOMPONENT_CLASS_NAME="gxwebcomponent";c.WEBCOMPONENT_LOADING_CLASS_NAME=
"gxwebcomponent-loading";c.WEBCOMPONENT_BODY_CLASS_NAME="gxwebcomponent-body";c.CONTROL_CMP_REGEX=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})([0-9]{4})?/;return c}(gx.$);
gx.fn=function(l){var c=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,d=function(a){a=a.replace(/\\/g,".");return gx.gen.isDotNet()||gx.gen.isDotNetCore()?a.replace(/\.aspx$/,""):a},k=function(){var a=function(b,f){return b.gxIndex<f.gxIndex?-1:b.gxIndex>f.gxIndex?1:0};return function(b){return gx.fn.toArray(b).sort(a)}}();return{disableKeys:function(){gx.fx.obs.addObserver("gx.keypress",gx.fn,gx.fn.swallowKeys)},enableKeys:function(){gx.fx.obs.deleteObserver("gx.keypress",
gx.fn,gx.fn.swallowKeys)},swallowKeys:function(a){a.cancel=!0;a.event.preventDefault()},attachedControls:function(){return gx.attachedControls},cancelWindow:function(a){this.closeWindow(a,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel})},closeWindow:function(a,b,f){b=b||{};f=f||gx.O;if("string"==typeof a){if(this.closeFromServer(a,b.parmsMetadata))return;a=[]}a||(a=[]);if(gx.popup.ispopup()){var g=gx.popup.getPopup(),m=g.url?gx.util.noParmsUrl(g.url):"";if(!g.frameWindow||-1!=g.frameWindow.location.href.search(m+
"(\\?.*)?$")||gx.grid.drawAtServer){g.close(a,b,f);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():(a=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(a)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),a=gx.absoluteurl(a),gx.spa.started?(gx.spa.redirect(a),gx.ajax.enableForm(f,!0)):(gx.evt.redirecting=!0,location.href=a)))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},
closeFromServer:function(a,b){try{if(window.parent&&window.parent.gx)return!gx.popup.ispopup()||gx.grid.drawAtServer||window.parent.gx.grid.drawAtServer?window.parent.gx.fn.closeWindow(gx.json.evalJSON(a,!0),{parmsMetadata:gx.json.evalJSON(b,!0)}):gx.fn.closeWindow(gx.json.evalJSON(a,!0),{parmsMetadata:gx.json.evalJSON(b,!0)}),!0}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(a,b,f){gx.evt.execLoad=!1;f&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));
this.closeWindow(a,{parmsMetadata:b})},invalidEmptyValue:function(a){if(gx.lang.emptyObject(a.s)){for(var b=a.v.length,f=0;f<b;f++)if(a.v[f][0]===a.s)return!1;return!0}return!1},trimSelectValue:function(a,b){return"int"==b?gx.text.trim(a):gx.text.rtrim(a)},selectedDescription:function(a,b){for(var f=a.v.length,g=0;g<f;g++)if(this.trimSelectValue(a.v[g][0],b)===a.s)return a.v[g][1];return null},setGridCheckBoxValue:function(a,b,f,g){this.setCheckBoxValue(a+"_"+b,f,g)},setGridDecimalValue:function(a,
b,f,g,m){return this.setGridControlValue(a,b,f)},setGridControlValue:function(a,b,f,g){if(void 0!==b)return this.setControlValue(a+"_"+b,f,g)},setVarValues:function(a,b){for(var f=a.length,g=0;g<f;g++){var m=gx.fn.vStructForVar(a[g]);m&&m.v2v?m.v2v(b[g]):eval(a[g]+'="'+b[g]+'"')}},refreshControlOldValue:function(a){if(void 0!==l(a).attr(gx.csv.GX_OLD_VALUE_ATTRIBUTE)){var b=gx.fn.getControlValue("radio"==a.type?a.name:gx.dom.id(a));gx.fn.setControlOldValue(a,b)}},setControlOldValue:function(a,b){if(a){var f=
a.id,g=gx.O.getValidStructFld(f);b=gx.applyPicture(g,b,a);g&&g.gxgrid&&(g.gxgrid.IsValidState[f]=g.gxgrid.IsValidState[f]||{},g.gxgrid.IsValidState[f][gx.csv.GX_OLD_VALUE_ATTRIBUTE]=b);if("radio"==a.type)for(a=gx.dom.byName(a.name),f=a.length,g=0;g<f;g++)a[g].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b);else a.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b)}},setControlGxValid:function(a,b){if(a&&a.id){var f=a.id,g=gx.O.getValidStructFld(f);g&&g.gxgrid&&(g.gxgrid.IsValidState[f]?g.gxgrid.IsValidState[f].gxvalid=
b:g.gxgrid.IsValidState[f]={gxvalid:b});a.setAttribute(gx.csv.GX_VALID_ATTRIBUTE,b)}},setControlValue:function(a,b,f){a=gx.csv.ctxControlId(a);this.setControlValueAny(a,b,f)},setControlRoundedValue:function(a,b){a&&a.setAttribute("data-gx-rounded-value",b)},getControlRoundedValue:function(a){if(a&&(a=a.getAttribute("data-gx-rounded-value"),null!==a))return"."==gx.decimalPoint?a:a.replace(".",gx.decimalPoint)},setControlValueAny:function(a,b,f){var g=gx.O.getValidStructFld(a),m=!1;var p=gx.dom.el(a,
g&&("edit"==g.ctrltype||"checkbox"==g.ctrltype||"combo"==g.ctrltype));var u=function(){return gx.lang.emptyObject(A)?b:A};p&&gx.lang.isEmpty(b)&&!0===p.GXFormatError&&(gx.csv.setFormatError(p,!1),gx.util.balloon.clear(a));g&&("dtime"==g.type||"date"==g.type?""===b?b=gx.date.nulldate_toc(g.len,g.dec):"string"==typeof b&&(b=new gx.date.gxdate(b)):gx.lang.isFixedCharacterType(g.type)&&(b=gx.text.rtrim(b)));if(b instanceof gx.date.gxdate)gx.lang.emptyObject(g)||(b=gx.date.formatDateTime(g.dec,g.len,gx.dateFormat,
b));else if(gx.lang.instanceOf(b,Number)||"undefined"!=typeof gx.num.dec&&b instanceof gx.num.dec.bigDecimal){if(!gx.lang.emptyObject(g)){var x=gx.rtPicture(g,p),w=gx.numericLenDec(x).Decimals;if(0<w&&w!==g.dec){var A=gx.num.toFixed(b,g.dec);A="."==gx.decimalPoint?A:A.replace(".",gx.decimalPoint);this.setControlRoundedValue(p,A)}b=gx.num.formatNumber(b,g.dec,x,g.len,g.sign,!1,g.emptyAsNull)}}else"string"!=typeof b||gx.lang.emptyObject(g)||((m=void 0!=g.isPwd)?null!=p&&"SPAN"==p.nodeName&&(b=gx.text.formatString(b,
g.len,g.isPwd)):b=gx.text.formatString(b,g.len,g.isPwd,gx.rtPicture(g,p)));this.persistGridControlValue(a,u());null!=p&&"SPAN"!=p.nodeName?(this.setControlValue_impl(p,b,f),!0!==gx.csv.settingUIparms&&gx.fn.setControlOldValue(p,u())):gx.fn.setHidden(a,u());null!=p&&"SPAN"==p.nodeName&&(a=p);u=!1;u=g?g.multiline:null!=p&&"TEXTAREA"==p.tagName;m?this.setControlValue_span_safe(a,gx.text.formatString(b,g.len,g.isPwd,gx.rtPicture(g,p),f,u)):this.setControlValue_span_safe(a,b,f,u)},setDecimalValue:function(a,
b,f,g){this.setControlValue(a,b)},toDecimalValue:function(a,b,f){return gx.num.parseFloat(a,b,f)},toDatetimeValue:function(a,b){return new gx.date.gxdate(a,b)},setCheckBoxValue:function(a,b,f){try{a=gx.csv.ctxControlId(a);var g=gx.dom.byId(a);g||(g=gx.dom.form()[a]);if(g){var m=b.toString()==f.toString();g.checked=m;gx.dom.toggleAttribute(g,"checked",m);g.value=b}}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(a,b,f){var g=a.lastIndexOf("_");-1!=g&&(f=
f?f:gx.O.getValidStructFld(a.substring(0,g)))&&f.gxgrid&&(g=a.substring(g+1),4<g.length?(g=g.substring(4,g.length),(g=gx.O.getGrid(f.gxgrid.gridName+"_"+g))&&g.persistControlValue(a,b,f)):f.gxgrid.persistControlValue(a,b,f))},setControlValue_span_safe:function(a,b,f,g){"string"==typeof a&&(a=gx.dom.byId("span_"+a));if(a&&"SPAN"!==a.nodeName){var m="span_";m="string"==typeof a?m+a:m+gx.dom.id(a);a=gx.dom.byId(m)}null!=a&&(m=gx.dom.bySelector('[data-name="'+a.id+'"]'),2>m.length&&(m=[a]),l.each(m,function(p,
u){gx.fn.setControlValue_fmt(u,b,f,g)}))},setControlValue_fmt:function(a,b,f,g){try{if(null!=a)if(1==f){var m=a.getAttribute("data-gxlink");gx.lang.emptyObject(m)||null==a.firstChild||"A"!=a.firstChild.nodeName||(a=a.firstChild);gx.html.setInnerHtml(a,b,!0)}else{0==f&&"string"==typeof b&&(b=b.replace(/ +/g," "));for(m=a;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;0!=f||null!=a.firstChild&&"#text"==a.firstChild.nodeName||"A"==a.nodeName?gx.html.setInnerText(a,b,f,g):gx.html.setInnerText(m,
b,f,g)}}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(a,b,f){"string"==typeof a&&(a=gx.dom.el(a));b instanceof gx.date.gxdate&&(b=b.getString());if(null!=a){var g=gx.dom.byName(a.id);if(2>g.length||"radio"===a.type)g=[a];l.each(g,function(m,p){"radio"===p.type?gx.fn.setRadioValue(p.name,b):gx.dom.isEditControl(p)||"textarea"==p.type?(m=p.value!==b&&gx.dom.getActiveElement()===p&&p.selectionStart!==p.selectionEnd&&0<p.selectionEnd,p.value=b,m&&gx.fn.setSelection(p)):
void 0!=p.value?p.value=b:gx.fn.setControlValue_span_safe(p,b,f)})}},setGridComboBoxValue:function(a,b,f){this.setComboBoxValue(a+"_"+b,f)},setComboBoxValue:function(a,b){var f=gx.util.browser.isIE();a=gx.csv.ctxControlId(a);var g=gx.dom.byId(a);if(g){var m="",p=gx.O.getValidStructFld(a);gx.lang.emptyObject(p)||(m=p.type);"int"==m?b=gx.text.trim(b):"date"==m&&b instanceof gx.date.gxdate?b=b.getStringWithFmt("Y4MD"):"decimal"!=m&&(b=gx.text.rtrim(b));var u=b,x=!1;try{for(var w=g.options.length,A,q=
0;q<w;q++){var v=g.options[q];if(gx.lang.isNumericType(m)?Number(v.value)==Number(b):gx.text.trim(v.value)==gx.text.trim(b)){if(u="undefined"!=typeof v.innerText?v.innerText:v.text,g.selectedIndex=q,x=!0,v.setAttribute("selected","selected"),A=v,f)break}else f||v.removeAttribute("selected")}A&&A.value!=g.value&&gx.util.browser.isFirefox()&&gx.dom.redrawControl(g);x||(g.selectedIndex=0);0<p.grid&&this.persistGridControlValue(a,b,p)}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(a,
u,0)}},call_v2bc:function(a,b,f){"function"==typeof a.v2bc&&a.v2bc.call(b,f)},loadRadioButton:function(a,b,f){var g=l(a).parent().closest(".gx-radio-button"),m=l(a);b=l(gx.html.controls.applyTemplate("radio",{id:a.name,className:g.attr("class"),style:g.attr("style"),title:a.title,isDisabled:a.disabled,gxoch0:m.attr("data-gxoch0"),values:l.map(b,function(p,u){return{itemId:a.name+"_"+u,itemValue:p[0],itemDesc:p[1],isSelected:gx.text.trim(f.toString())==gx.text.trim(p[0].toString())}})}));g.replaceWith(b);
gx.plugdesign.applyTemplateObject(b)},loadComboBox:function(a,b){this.setComboValues(a,b)},setGridComboValues:function(a,b){if(0==this.controlGridId(a))this.setComboValues(a,b);else for(var f=1;999>f;f++){var g=gx.text.padl(f.toString(),4,"0");g=gx.dom.el(a+"_"+g);if(null==g)break;this.setComboValues(g.name,b)}},setComboValues:function(a,b){a=gx.dom.el(a);var f=gx.util.browser;if(null!=a){var g="";-1!=a.selectedIndex&&(g=a.options[a.selectedIndex].value);for(;a.options.length>b.length;)a.remove(a.options.length-
1);for(;b.length>a.options.length;){var m=document.createElement("OPTION");a.options.add(m)}for(var p=b.length,u=0;u<p;u++)if(m=a.options[u],m.value=b[u][0],f.isIE()&&9<=f.ieVersion()?m.innerText!=b[u][1]&&(m.innerText=b[u][1]):m.text!=b[u][1]&&(m.text=b[u][1]),Number(m.value)?Number(m.value)==Number(g):gx.text.trim(m.value)==gx.text.trim(g))a.selectedIndex=u;if(0==a.options.length)a.selectedIndex=-1;else if(-1==a.selectedIndex||a.selectedIndex>a.options.length-1)a.options[0].selected=!0}},getControlRefById:function(a){return(a=
this.validStruct(a))?0==a.grid?this.getControlRef(a.fld,!1):this.getControlGridRef(a.fld,a.grid):null},getControlRef:function(a,b,f){b||(a=gx.csv.ctxControlId(a));if("FORM"==a)return document;a=gx.dom.el(a,null,null,null,f);return null!=a?a:null},getControlRef_list:function(a){var b=gx.dom.byName(a);if(null!=b)return b;a=gx.dom.byId(a);return null!=a?[a]:null},screen_CtrlRef:function(a){a=this.getControlGridRef(a,this.controlGridId(a));return gx.lang.emptyObject(a)?null:("hidden"==a.type&&(a=gx.dom.byId("span_"+
gx.dom.id(a))),a)},screen_CtrlId:function(a){return this.getControlGridId(a,this.controlGridId(a))},getControlGridId:function(a,b,f){a=gx.csv.ctxControlId(a);if(gx.dom.el(a))return a;try{if(0==b)return a;void 0==f&&(f=this.currentGridRow(b));return a+"_"+f}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(a,b,f){var g;a=gx.csv.ctxControlId(a);if(0==b||-1!==a.search(gx.csv.CTRL_ROW_INDEX_REGEXP))if(g=gx.dom.el(a))return g;try{if(0==b)return null;void 0==f&&(f=this.currentGridRow(b));
if(g=gx.dom.el(a+"_"+f))return g;var m=gx.O.getComponentData(a);if(m)return gx.dom.el("gxHTMLWrp"+m.Prefix+f)}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRowSafe:function(a,b){var f=gx.fn.getGridObj(a,b);if(f&&f.grid.rows.length>=b)return gx.fn.setCurrentGridRow(a,b)},setCurrentGridRow:function(a,b){if("0000"!=b)try{return gx.currentRows[a]=b}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(a){try{return gx.currentRows[a]}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(a){a=this.currentGridRowImpl(a);return void 0==a?"0001":a},gridDuplicateKey:function(a){a=gx.fn.validStruct(a);if(void 0!=a){var b=a.gxgrid;if(null!=b&&(b=b.updateControlValue(a,!0)))return b.gxHasDuplicateKey()}return!1},firstGridControl:function(a,b){for(var f=gx.fn.controlIds(),g=f.length,m=0;m<g;m++){var p=gx.fn.validStruct(f[m],b);if(void 0!=p&&p.grid==a)return f[m]}return-1},lastGridControl:function(a,b){for(var f=gx.fn.controlIds(),
g=f.length-1;0<=g;g--){var m=gx.fn.validStruct(f[g],b);if(void 0!=m&&m.grid==a)return f[g]}return-1},getGridDateTimeValue:function(a,b,f,g){a=this.getControlValue(a+"_"+b);return new gx.date.gxdate(a,gx.dateFormat)},getGridDecimalValue:function(a,b,f,g){return this.getDecimalValue(a+"_"+b,f,g)},getGridIntegerValue:function(a,b,f){return this.getIntegerValue(a+"_"+b,f)},getGridControlValue:function(a,b){return this.getControlValue(a+"_"+b)},getControlValue:function(a,b,f,g){return this.getControlValue_impl(gx.csv.ctxControlId(a,
f),b,f,g)},getControlValue_impl:function(){var a=/_CMPPGM$/g;return function(b,f,g,m){if("hidden_only"==f)return gx.fn.getHidden(b);if(0<=b.search(a))return"nohidden"===f?null:gx.fn.getHidden(b);g=g||gx.O;m=m||(g?g.getValidStructFld(b):null);if(!(m&&m.gxgrid&&m.gxgrid.grid&&m.gxgrid.grid.useHiddensForControlValues)){var p=!m||"edit"!=m.ctrltype&&"checkbox"!=m.ctrltype&&"combo"!=m.ctrltype?gx.dom.el(b,!1,!0):gx.dom.byId(b);if(null!=p&&g){g=this.getControlRoundedValue(p);if(!gx.lang.emptyObject(g))return g;
m&&!p.gxtype&&(p.gxtype={type:m.type,len:m.len,dec:m.dec});if("checkbox"==p.type&&m.values&&m.values.length&&1<m.values.length)var u=p.checked?m.values[0]:m.values[1];else if("hidden"==p.type||"text"==p.type||"textarea"==p.type||"checkbox"==p.type)u=p.value;else if("radio"==p.type)u=gx.fn.getRadioValue(gx.dom.byName(b));else if("SELECT"==p.nodeName&&0<p.options.length?u=-1!=p.selectedIndex?"screen"==f?p.options[p.selectedIndex].text:p.options[p.selectedIndex].value:"screen"==f?p.options[0].text:p.options[0].value:
m&&"date"!=m.type&&"dtime"!=m.type&&"bits"!=m.type&&"audio"!=m.type&&"video"!=m.type&&"binaryfile"!=m.type&&(u=p.value),"IMG"==p.nodeName||"INPUT"==p.nodeName&&"image"==p.type)u=p.getAttribute("src");if(void 0!==u)return m&&"boolean"==m.type?gx.lang.gxBoolean(u):u}p=gx.dom.byId("span_"+b);if(null!=p)return b=gx.fn.getHidden(b),g=this.getControlRoundedValue(p),p=gx.lang.emptyObject(g)?gx.fn.getControlValue_span(p):g,"screen"==f?void 0!=p?p:b:void 0!=b?b:p;p=gx.dom.form()[b];if(null!=p)return"file"==
p.type&&(f=gx.html.multimediaUpload.getPreviewAtt(p.id+"_ct"))?f:this.getControlValueInt(p);m=gx.dom.byName(b);if(null!=m){u=m.length;for(g=0;g<u;g++)if(p=m[g],null!=p)return this.getControlValueInt(p);if(p=m[0])return p.value}}return null==p?"nohidden"===f?null:gx.fn.getHidden(b):""}}(),setRadioValue:function(a,b){a=gx.csv.ctxControlId(a);a=gx.dom.byName(a);if(null!=a)for(var f=a.length,g=0;g<f;g++){var m=l(a[g]);if(gx.text.ltrim(a[g].value)==gx.text.ltrim(b)){m.attr("checked","");m.prop("checked",
!0);break}}},getRadioValue:function(a){for(var b=a.length,f=0;f<b;f++)if(a[f].checked)return a[f].value;return""},getRadioSelected:function(a){a=gx.dom.byName(a);for(var b=a.length,f=0;f<b;f++)if(a[f].checked)return a[f];return null},getControlValueInt:function(a){if(void 0!=a.length&&"SELECT"!=a.tagName&&"undefined"!=typeof a[0]&&"radio"==a[0].type)return this.getRadioValue(a);if("checkbox"==a.type)return a.checked;if("SPAN"==a.tagName){var b=gx.fn.getHidden(gx.dom.id(a));return void 0!=b?b:gx.fn.getControlValue_span(a)}if("INPUT"==
a.tagName&&"text"==a.type&&(b=gx.dom.id(a),gx.O)){var f=gx.O.getValidStructFld(b);if(f&&"undefined"!=typeof gx.rtPicture(f,a)){if("int"==f.type)return this.getIntegerValue(b,-1!=gx.rtPicture(f,a).indexOf(",")?gx.thousandSeparator:"");if("decimal"==f.type)return this.getDecimalValue(b,-1!=gx.rtPicture(f,a).indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return a.value},getControlValue_span:function(a){for(;a&&!a.nodeValue;)a=a.childNodes[0];return a&&a.nodeValue?a.nodeValue:""},getDateTimeArrayValue:function(a){try{var b=
function(m,p){gx.lang.emptyObject(m)||l.each(m,function(u,x){m[u]=new gx.date.gxdate(x,p)});return""},f=this.getControlValue(a,"nohidden");var g=b(f,gx.dateFormat);g||(f=gx.fn.getHidden(gx.csv.ctxControlId(a)),g=b(f,"Y4MD"));return g}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","getDateTimeArrayValue")}return""},getDateValue:function(a){return this.getDateTimeValue(a)},getDateTimeValue:function(a){try{var b=this.getControlValue(a,"nohidden");if(!gx.lang.emptyObject(b))return new gx.date.gxdate(b,gx.dateFormat);
b=gx.fn.getHidden(gx.csv.ctxControlId(a));return new gx.date.gxdate(b,"Y4MD")}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(a,b,f){var g=gx.O?gx.O.getValidStructFld(a):null;a=this.getControlValue(a,f,void 0,g);g&&a&&(a=gx.num.extractValue(gx.rtPicture(g),b,a));if(gx.lang.isArray(a))return a;a="undefined"!=typeof a?a.toString():"";if(0===a.length&&g&&"Blank"===g.emptyAsNull)return a;b=a.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?gx.num.parseInt(a,
10,b):(new gx.num.dec.bigDecimal(gx.text.replaceAll(a,b,""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(b)?0:b},getDecimalValue:function(a,b,f,g){var m=gx.O?gx.O.getValidStructFld(a):null;g=this.getControlValue(a,g,void 0,m);a=gx.dom.el(a,m&&("edit"==m.ctrltype||"checkbox"==m.ctrltype||"combo"==m.ctrltype));m&&g&&(g=gx.num.extractValue(gx.rtPicture(m,a),b,g));if("undefined"!==typeof g&&0===g.length&&m&&"Blank"===m.emptyAsNull)return"";if(gx.lang.isArray(g))return g;b=gx.num.parseFloat(g||
"",b,f);return isNaN(b)?0:b},getBlobValue:function(a){var b=gx.dom.byId("Object_"+a);if(null!=b){if(b.data&&!gx.text.endsWith(b.data,"about:blank"))return b.data}else if(b=gx.dom.byId("Link_"+a),null!=b)return b.getAttribute("href");return""},getVarControlMap:function(a,b){if(a=a||gx.O)for(var f in a.VarControlMap)if("function"!=typeof f){var g=a.VarControlMap[f];if(g.id==b||a.CmpContext+g.id==b)return f}return null},getVarControlMapForVar:function(a){for(var b in gx.O.VarControlMap)if("string"==
typeof b&&b==a)return gx.O.VarControlMap[b];return null},v2c:function(a,b,f,g){a.v2c(g);"undefined"===typeof b&&(b=a.val(g));a=gx.fn.getControlGridRef(a.fld,a.grid,g);gx.plugdesign.controlValueChanged(a,b);f&&(a.value="")},v2cMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var f="";"number"==typeof b.grid&&0!=b.grid&&(f="_"+gx.fn.currentGridRowImpl(b.grid));gx.fn.setHidden(gx.O.CmpContext+b.id+f,gx.O[a])}},c2vMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var f=
"";"number"==typeof b.grid&&0!=b.grid&&(f="_"+gx.fn.currentGridRowImpl(b.grid));gx.O[a]=gx.fn.getHidden(gx.O.CmpContext+b.id+f)}},depsToVars:function(a){for(var b=0;b<a.length;b++){var f=a[b],g=gx.fn.vStructForVar(f);gx.lang.emptyObject(g)||"function"!=typeof g.c2v?this.c2vMap(f):g.c2v()}},verticalFormula:function(a,b,f,g,m,p,u,x){var w=gx.fn.vStructForVar(a);p&&(gx.lang.emptyObject(w)?this.v2cMap(a):w.v2c(g));var A=gx.fn.currentGridRowImpl(f),q=gx.fn.getGridObj(f,g),v=0,t=!1;if(q){for(var B=q.grid.rows.length,
G=0;G<B;G++){var J=q.grid.rows[G],n=J.gxDeleted(),r=J.gxExists(),y=J.gxIsMod();n||!r&&!y||(p&&(gx.fn.setCurrentGridRow(f,J.gxId),x&&0<x.length?this.depsToVars(x):gx.lang.emptyObject(w)||"function"!=typeof w.c2v?this.c2vMap(a):w.c2v()),m.call(gx.O)&&(t=!0,v=u(G,v)))}p&&gx.fn.setCurrentGridRow(f,A);x&&0<x.length?this.depsToVars(x):gx.lang.emptyObject(w)||"function"!=typeof w.c2v?this.c2vMap(a):w.c2v(g);t||(v=b)}else gx.dbg.write("verticalFormula: cant find grid "+f+" at row "+g);return v},rowValueHandler:function(a,
b,f,g,m,p,u){try{var x=gx.fn.vStructForVar(a)||gx.fn.getVarControlMapForVar(a),w=x?x.type:"decimal";switch(w){case "boolean":return g(a,b,f);case "int":case "decimal":var A=gx.num.parseFloat(gx.O[a],p,u);return 0==b?A:m(a,b,f,A);default:gx.dbg.write("Warning: Forumula not supported for: ",a,w)}}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","Formula could not be calculated for Field: "+a)}},maxFrm:function(a,b,f,g,m,p,u,x){var w=function(q,v,t){return t||gx.O[q]},A=function(q,v,t,B){return B>t?B:t};return gx.fn.verticalFormula(a,
b,m,p,u,!0,function(q,v){return gx.fn.rowValueHandler(a,q,v,w,A,f,g)},x)},sumFrm:function(a,b,f,g,m,p,u,x){var w=function(q,v,t){return t||gx.O[q]},A=function(q,v,t,B){return B+t};return gx.fn.verticalFormula(a,b,m,p,u,!0,function(q,v){return gx.fn.rowValueHandler(a,q,v,w,A,f,g)},x)},minFrm:function(a,b,f,g,m,p,u,x){var w=function(q,v,t){return t&&gx.O[q]},A=function(q,v,t,B){return B<t?B:t};return gx.fn.verticalFormula(a,b,m,p,u,!0,function(q,v){return gx.fn.rowValueHandler(a,q,v,w,A,f,g)},x)},averageFrm:function(a,
b,f,g,m,p,u,x){return gx.fn.verticalFormula(a,b,m,p,u,!0,function(w,A){var q=gx.num.parseFloat(gx.O[a],f,g);return 0==w?q:(A*w+q)/(w+1)},x)},countFrm:function(a,b,f,g,m,p){return gx.fn.verticalFormula(a,b,f,g,m,!1,function(u,x){return 0==u?1:x+1},p)},serialRule:function(a,b,f,g,m){m=m||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(f),f))return m[a];gx.lang.emptyObject(m[b])&&(m[b]=m[a]+g,(f=gx.fn.vStructForVar(b))&&f.v2c(),(f=m.VarControlMap[a])&&gx.fn.setControlValue(f.id,m[b]));b=m[b]||0;a=
m[a]||0;return 0<g?Math.max(b,a):Math.min(b,a)},setReturnParms:function(a,b,f,g){try{gx.csv.settingUIparms=!0;var m;if(g){var p=f.length;for(m=0;m<p;m++){var u=gx.fn.vStructForVar(b[m]);g.grid.setCellValue.apply(g.grid,[u,f[m]])}}else if(a&&b&&f&&(p=b.length,p<=f.length)){gx.setGxO(a);g=null;for(m=0;m<p;m++){var x=b[m];if(x){var w=f[m];u=gx.fn.vStructForVar(x);gx.lang.emptyObject(u)&&(u=gx.fn.vStructForHC(x));if(u){var A=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(u.fld));u.v2v&&(u.v2v(w),gx.fn.v2c(u,
w));gx.fn.call_v2bc(u,a);gx.fn.isAccepted(A)&&(g=A,gx.evt.onchange_impl(A));a.refreshDependantGrids(u)}else a.setVariable(x,w)}}g&&gx.fn.setFocus(g)}}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","setReturnParms")}gx.csv.settingUIparms=!1},isOutputParm:function(a){return a&&a.IOType&&("out"==a.IOType||"inout"==a.IOType)?!0:!1},checkPopupFocus:function(a){if(gx.popup.ispopup()){var b=gx.popup.getPopup();if(b&&b.frameDocument&&(a.ownerDocument?a.ownerDocument:a.document).URL!=b.frameWindow.location.href)return b.setFocusFirst(),
!1}return!0},persistControlProperty:function(a,b,f){a=gx.fn.screen_CtrlId(gx.csv.ctxControlId(a));gx.usrPtys[a]||(gx.usrPtys[a]={});gx.usrPtys[a][b.toLowerCase()]=f},setCtrlProperty:function(a,b,f,g){if(gx.O){var m="string"===typeof a&&gx.fn.isColumnProperty(b)?gx.O.getGridColumn(a,""):a;if(m instanceof gx.grid.column){var p=m;ControlId=m.htmlName}else"string"===typeof a?(ControlId=a,p="FORM"==ControlId?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(ControlId))):(p=a,ControlId=p.id);p&&((g=g||
gx.O.getValidStructFld(ControlId))&&g.grid&&gx.fn.persistControlProperty(ControlId,b,f),this.setCtrlPropertyImpl(p,b,f,g))}else gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(a,b,f){var g=gx.fn.screen_CtrlRef(a);if(null!=g){this.setCtrlPropertyImpl(g,b,f);var m=gx.fn.controlGridId(a);m&&(g=l(g).parent().closest("TD",l("[data-gxgridid="+m+"]").get(0)).get(0))&&(this.persistControlProperty(a,b,f),this.setCtrlPropertyImpl(g,
b,f))}},getControls:function(a){var b=[a];(a=this.getRONode(a.id,!1))&&b.push(a);return l(b)},setCtrlPropertyImpl:function(a,b,f,g){try{if(null!=a&&(a==document&&"Backcolor"==b&&(a=document.body,this.setCtrlPropertyImpl(gx.dom.form(),b,f)),g=g||gx.O.getValidStructFld(a.id),!(("Enabled"===b||"Visible"===b)&&g&&0<g.grid&&gx.fn.rowIsRemoved(g.grid,gx.fn.controlRowId(a))))){var m=g?g.ctrltype:null,p=a,u={control:p,property:b,value:f};gx.fx.obs.notify("gx.control.onbeforepropertychange",[u]);if(!u.cancel){var x=
l();switch(b){case "Picture":a.setAttribute("data-gx-rt-picture",f);g&&(g.v2c(),g.c2v());break;case "Caption":this.setCtrlCaption(a,f);break;case "Tooltiptext":a.title=f;break;case "Invitemessage":a.placeholder=f;break;case "Visible":if("INPUT"==a.nodeName&&"button"==a.type)this.setButtonVisibility(a,!this.propertyValueFalse(f));else{var w="checkbox"===a.type;if("INPUT"==a.nodeName){if(w&&l(a).parent().is("span:not(.gx-checkbox-wrapper)"))x=l(a).parent();else if("radio"==a.type){var A=l(a).parent().closest(".gx-radio-button");
0<A.length&&(a=A[0])}var q=gx.html.multimediaUpload.getContainer(a);q&&(a=q)}var v=this.propertyValueFalse(f),t=a.gxusrdisabled&&!w?a.gxusrdisabled:!1;if(v){var B=gx.dom.byId("span_"+a.id);this.setVisible(a,!v);B&&this.setVisible(B,!v)}else(B=this.getRONode(a.id,t))&&this.setVisible(B,t),this.setVisible(a,!t);for(var G=0;G<x.length;G++)this.setVisible(x[G],!t);gx.fn.setDateCtrlProperties(a,!t,!v)}gx.fn.checkAttachedProperty(a.id,b,gx.lang.gxBoolean(f));break;case "Enabled":v=this.propertyValueFalse(f);
if("hidden"===a.type)return;"textblock"===m&&l(a).toggleClass("gx-disabled",v);if(("SPAN"===a.tagName||"DIV"===a.tagName&&"1"===a.getAttribute("data-gxformat"))&&v)return;if("INPUT"===a.nodeName&&"radio"===a.type){var J=gx.dom.byName(a.name),n=J.length;for(G=0;G<n;G++)this.setEnabledProperty(J[G],!v)}else!gx.dom.isEditControl(a)&&"textarea"!==a.type&&"file"!==a.type&&"SELECT"!==a.tagName||"password"===a.type?this.setEnabledProperty(a,!v):(B=this.getRONode(a.id,v,g.fmt,g.multiline),gx.fn.isVisible(a,
0)||B&&gx.fn.isVisible(B,0)?(B&&this.setVisible(B,v),this.setEnabledProperty(a,!v),this.setVisible(a,!v),gx.fn.setDateCtrlProperties(a,!v,!0),gx.fn.checkAttachedProperty(a.id,b,!v),gx.fn.checkAttachedProperty(a.id,"Visible",!v)):(this.setEnabledProperty(a,!v),gx.fn.setDateCtrlProperties(a,!v,!1),gx.fn.checkAttachedProperty(a.id,b,!v)));break;case "Class":if(a==document){var r=l(gx.dom.form()),y=l(document.body),C=r.attr("data-gx-class")||"";y.removeClass(C).attr("class",f+" "+y.attr("class"));r.removeClass(C).attr({"class":f+
" "+r.attr("class"),"data-gx-class":f})}else{var D=this.getControls(a);D.attr("class",f);!gx.O.DSO&&0>=f.indexOf("Readonly")&&l(this.getRONode(a.id,!1)).attr("class",f+" Readonly"+f)}break;case "Columnclass":var F=a.parentNode;F&&"TD"==F.tagName&&this.setCtrlClass(F,"gx-attribute "+f);break;case "Columnheaderclass":var H=a.table.container.querySelectorAll("TH")[a.index];H&&this.setCtrlClass(H," "+f+" "+a.table.columnAutoHeaderClass);break;case "Link":this.setCtrlLink(this.getRONode(a.id,!1)||a,f);
break;case "Linktarget":this.setCtrlLinkTarget(this.getRONode(a.id,!1)||a,f);break;case "Backcolor":var L=gx.color.html(f);if(L&&void 0==a.gxGridName){a:{var N=a;if(N&&"radio"==N.type){var O=l(N).parent().closest(".gx-radio-button");if(0<O.length){a=O[0];break a}}a=N}D=this.getControls(a);D.css("background-color",L.Html)}break;case "Background":D=this.getControls(a);D.css("background-image","url("+f+")");break;case "Forecolor":if(L=gx.color.html(f))D=this.getControls(a),D.css("color",L.Html);break;
case "Fontbold":v=this.propertyValueFalse(f);D=this.getControls(a);D.css("fontWeight",v?"normal":"bold");break;case "Fontitalic":v=this.propertyValueFalse(f);D=this.getControls(a);D.css("fontStyle",v?"normal":"italic");break;case "Fontunderline":v=this.propertyValueFalse(f);D=this.getControls(a);D.css("textDecoration",v?"none":"underline");break;case "Fontstrikethru":v=this.propertyValueFalse(f);D=this.getControls(a);D.css("textDecoration",v?"none":"line-through");break;case "Fontname":D=this.getControls(a);
D.css("fontFamily",f);break;case "Fontsize":D=this.getControls(a);D.css("fontSize",f+"pt");break;case "Filename":this.setBlobFilename(a,f);break;case "Filetype":this.setBlobFiletype(a,f);break;case "URL":this.setBlobUrl(a,f);break;case "IsBlob":this.setMultimediaType(a,f);break;case "Bitmap":var Q=gx.util.imageName(f);Q?gx.html.setGXImageCSSClass(a,"GX_Image_"+Q+"_Class"):a.src=f;break;case "SrcSet":void 0!==f&&(a.srcset=f);break;case "gximage":f&&gx.html.setGXImageCSSClass(a,"GX_Image_"+f+"_Class");
break;case "Multimedia":this.setMultimediaValue(a.id,f);break;case "Jsonclick":a.jsevent=f;break;case "Source":D=f;N=D.indexOf("?");0<N&&(D=D.substring(0,N));-1==D.indexOf(":")&&-1==D.indexOf("/")?a.src=gx.ajax.objectUrl(f):a.src=gx.util.resourceUrl(f,!0);gx.evt.attach(a,"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==a.tagName||gx.dom.isRadio(a)||"SPAN"==a.tagName)if(f=gx.json.evalJSON(f),"SELECT"==a.tagName)0!=f.isset&&(gx.fn.loadComboBox(a.id,f.v),gx.fn.setComboBoxValue(a.id,f.s),
gx.plugdesign.controlValueChanged(a,f.v));else if(gx.dom.isRadio(a))0!=f.isset&&(gx.fn.loadRadioButton(a,f.v,f.s),gx.plugdesign.controlValueChanged(a,f.v));else{var W=a.id.substring(5);D="";var V=f.s;g=gx.O.getValidStructFld(W);gx.lang.emptyObject(g)||(D=g.type);V=gx.fn.trimSelectValue(V,D);f.s=V;gx.fn.setControlValue_span_safe(W,gx.fn.selectedDescription(f,D))}break;case "Width":a.width&&(a.width=f);a.style.width=gx.dom.addUnits(f);break;case "Height":a.height&&(a.height=f);a.style.height=gx.dom.addUnits(f);
break;case "Ispassword":a.type=gx.lang.gxBoolean(f)?"password":"text";break;case "Title":var Z=a.table.ownerGrid.getContainerControl();gx.dom.getOrCreatebyCss(Z,"[data-colindex='"+a.index+"'] span").textContent=f;a.title=f}var ba=gx.dom.id(a);if(ba){g=gx.O.getValidStructFld(ba);var ca=ba+(g&&g.grid&&0<g.grid?"":"_")+b;if(gx.fn.createPtyCondition(b)||gx.fn.isHidden(ca))f=1==f?"1":0==f?"0":f,gx.fn.setHidden(ca,f)}gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:p,property:b,value:f}])}}}catch(fa){gx.dbg.logEx(fa,
"gxfrmutl.js","setCtrlPropertyImpl")}},createPtyCondition:function(a){return("Visible"==a||"Enabled"==a)&&gx.O.isTransaction()},setEnabledProperty:function(a,b,f){var g=gx.dom.id(a);if(gx.lang.gxBoolean(b)){if(delete gx.disabledControls[g],gx.fn.isAccepted(a,!1))return}else gx.util.addOnce(gx.disabledControls,a,g);1==gx.csv.isvalidating()&&b&&null==gx.csv.validActivatedControl&&a!=gx.csv.lastControl&&(g=gx.O.getValidStructId(g),g>gx.O.fromValid&&g<=gx.O.toValid&&(gx.csv.validActivatedControl=a));
a.gxusrdisabled=!b;a.disabled=a.gxdisabled?1==a.gxdisabled?!0:a.gxusrdisabled:a.gxusrdisabled;(void 0===f||f)&&this.setEnabled(a,b)},setEnabled:function(a,b){var f=function(m,p){gx.lang.booleanValue(p)?m.removeAttribute("data-gx-readonly"):m.setAttribute("data-gx-readonly","")};gx.lang.booleanValue(b)?gx.dom.removeClass(a,"gx-disabled"):gx.dom.addClass(a,"gx-disabled");if(this.disabledAsSpan(a)){try{if("checkbox"==a.type)var g=a.parentNode;"radio"==a.type&&(g=l(a).parent().closest(".gx-radio-button")[0],
f(a,b))}catch(m){}if(gx.lang.booleanValue(b))!gx.O.DSO&&g&&0==g.className.indexOf("Readonly")&&(g.className=g.className.substring(8)),this.isVisible(a)&&(this.setVisible(a,1),(b=this.getRONode(a.id,!0))&&this.setVisible(b,0));else if(!gx.O.DSO&&g&&0>g.className.indexOf("Readonly")&&!gx.text.startsWith(g.className,"gx-")&&(g.className="Readonly"+g.className),this.isVisible(a)&&"password"!=a.type&&"image"!=a.type&&"checkbox"!=a.type&&"radio"!==a.type&&(b=this.getRONode(a.id,!0)))this.setVisible(a,0),
this.setVisible(b,1),f=gx.O.getValidStructFld(a),g=0,!gx.lang.emptyObject(f)&&f.format&&(g=f.format),this.setControlValue_span_safe(b,gx.fn.getControlValue(gx.dom.id(a),"screen",void 0,f),g,"textarea"==a.type)}else f(a,b)},disabledAsSpan:function(a){var b=a.tagName.toUpperCase();return"IMG"!=b&&!("INPUT"==b&&"button"==a.type)},setVisible:function(a,b){l(a).toggleClass("gx-invisible",!gx.lang.booleanValue(b));a.style.display=0==b?"none":this.displayByType(a.nodeName);var f=gx.O.getValidStructFld(a);
if(b&&f&&f.gxgrid&&!f.gxgrid.grid.gxIsFreestyle){var g=a.closest("td[data-colindex]");if(g){f.gxgrid.applyPropEntireColumn(g.getAttribute("data-colindex"),"Visible",b);return}}gx.fn.rowGridId(a)&&(a=l(a).find("table")[0])&&this.setVisible(a,b)},getRONodePrefix:function(){return"span_"},prefixROClass:function(a){return gx.O.DSO||""===a||0===a.indexOf("Readonly")?a:"Readonly"+a},getRONode:function(a,b,f,g){f=void 0===f?gx.html.controls.formats.TEXT:f;if(f===gx.html.controls.formats.RAW_HTML||f===gx.html.controls.formats.HTML||
gx.lang.emptyObject(a))return null;var m=gx.dom.byId(a);a=this.getRONodePrefix()+a;var p=gx.dom.byId(a);if(null!=p)return p;if(!b||null==m||"INPUT"===m.nodeName&&("radio"===m.type||"checkbox"===m.type))return null;b=document.createElement("SPAN");b.setAttribute("id",a);b.setAttribute("data-gx-readonly","");this.setVisible(b,!1);b.className=gx.fn.prefixROClass(m.className);a="IMG"==m.nodeName||"INPUT"==m.nodeName&&"image"==m.type?m.value:gx.fn.getControlValue(gx.dom.id(m),"screen");m.parentNode.insertBefore(b,
m);gx.html.setInnerText(b,a||"",f,g);return b},setDateCtrlProperties:function(a,b,f){var g=gx.dom.byId(gx.dom.id(a)+"_dp_trigger");g&&l(g).toggle(b);if(g=l(gx.dom.byId(gx.dom.id(a)+"_dp_container")))a.Flat&&l(a).hide(),a=l(".calendar",g),g.toggle(b&&f||!b&&f),a&&a.toggle(b&&f)},getGridCtrlProperty:function(a,b,f){try{if(0!=a){var g=this.getGridObj(a);if(g){var m=g.grid.getColumnByHtmlName(b);if(m)return m[f.toLowerCase()]}}else return this.getCtrlProperty(b,f)}catch(p){gx.dbg.logEx(p,"gxfrmutl.js",
"getGridCtrlProperty")}return""},getCtrlProperty:function(a,b){var f=gx.O.getValidStructFld(a),g=f&&0<f.grid?"_"+gx.fn.currentGridRowImpl(f.grid):"";g=gx.uc.getUserControlObj(gx.uc.userControlContainerId(a+g));if(null!=g)return g[b];if(g=this.screen_CtrlRef(a))return"Picture"===b?gx.rtPicture(f,g):"Text"===b?this.getControlValue(a,"screen",void 0,f):"Visible"==b&&gx.fn.getRONode(g.id)?this.getCtrlProperty_impl(g,b)||this.getCtrlProperty_impl(gx.fn.getRONode(a),b):"Enabled"==b&&gx.fn.getRONode(g.id)?
!this.getCtrlProperty_impl(gx.fn.getRONode(g.id),"Visible"):this.getCtrlProperty_impl(g,b)},getCtrlProperty_impl:function(a,b){if(null==a)return"";switch(b){case "Tooltiptext":return a.title;case "Invitemessage":return a.placeholder;case "Visible":return"INPUT"===a.nodeName&&"radio"===a.type&&(b=l(a).parent().closest(".gx-radio-button"),0<b.length&&(a=b[0])),"none"!=a.style.display;case "Enabled":return void 0===a.disabled?l(a).hasClass("gx-disabled")?!1:!0:!a.disabled;case "Class":return a.className;
case "Backcolor":return gx.color.css(a.style.backgroundColor);case "Forecolor":return gx.color.css(a.style.color);case "Width":return gx.dom.dimensions(a).w;case "Height":return gx.dom.dimensions(a).h;case "Caption":return this.getCtrlCaption(a);case "Fontbold":return"bold"==a.style.fontWeight;case "Fontitalic":return"italic"==a.style.fontStyle;case "Fontunderline":return"underline"==a.style.textDecoration;case "Fontstrikethru":return"line-through"==a.style.textDecoration;case "Fontname":return a.style.fontFamily;
case "Filename":return a.value.split(/(\\|\/)/g).pop();case "Fontsize":return a=parseInt(a.style.fontSize),isNaN(a)?12:a;case "Ispassword":return"password"==a.type}},displayByType:function(a){switch(a){case "TABLE":return!gx.util.browser.isIE()||8<=gx.util.browser.ieVersion()?"table":"block";case "P":case "DIV":return"block"}return""},setCtrlCaption:function(a,b){try{var f=gx.html.getFieldLabel(a);if(f)gx.fn.setControlValue_fmt(f,b,0,!1);else{switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":var g=
a.getAttribute("data-gxformat"),m=gx.O.getValidStructFld(a);null==g&&(g=!gx.lang.emptyObject(m)&&m.format?m.format:0);f=!1;m&&(f="edit"===m.ctrltype?m.multiline:!0);gx.fn.setControlValue_fmt(a,b,g,f);return;case "INPUT":"checkbox"!=a.type&&(a.value=b);return}"#document"==a.nodeName&&(a.title=b)}}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(a){var b=gx.html.getFieldLabel(a);if(b)return l(b).text();switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":b=a.getAttribute("data-gxformat");
if(null!=b&&"1"==b)return a.innerHTML;for(;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;return"undefined"!=typeof a.innerText?a.innerText:a.textContent||a.text;case "INPUT":if("checkbox"!=a.type)return a.value;break;default:return""}},propertyValueFalse:function(a){return"string"==typeof a&&(a=a.toLowerCase(),"false"==a||0==gx.num.parseFloat(a))?!0:0==a},setButtonVisibility:function(a,b){b=b?"":"none";var f=a.parentNode;gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=
b,f=f.parentNode,gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b,f=f.parentNode,gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b,f=f.parentNode,gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b))));a.style.display=b},setBlobValue:function(a,b){a=gx.dom.byId(a)||gx.dom.byId("Object_"+a);this.setBlobUrl(a,b)},setBlobFilename:function(a,b){null!=a&&(a=gx.O.getValidStructFld(a))&&gx.fn.setHidden(a.fld+"_Filename",gx.text.trim(b))},setBlobFiletype:function(a,b){if(null!=
a){var f=gx.O.getValidStructFld(a);f&&gx.fn.setHidden(f.fld+"_Filetype",gx.text.trim(b));f=a;"INPUT"==f.nodeName&&"file"==f.type&&(f=gx.dom.byId("Object_"+a.id));null!=f&&(b=gx.util.getContentType(b),this.setObjectCtrlType(f,b),gx.fn.setVisible(f,!0))}},resolveResourceUrl:function(a,b){if(""==a)return b?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.isabsoluteurl(a))if(gx.isRelativeToHost(a)){if(0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+a,!1)}else return gx.util.resourceUrl(gx.basePath+
gx.staticDirectory+a,!1);return a},setBlobUrl:function(a,b){var f=gx.html.multimediaUpload.getContainer(a);if(f)a=this.resolveResourceUrl(b,!1),gx.html.multimediaUpload.setPreviewImage(f,a),gx.html.multimediaUpload.setPreviewLink(f,a);else if(!b.match(/^[a-z]:[\S]*/i)&&null!=a){f=a;var g="INPUT"==f.nodeName&&"file"==f.type;if(""===b&&""===b){var m=l(f);m.wrap("<form>").closest("form").get(0).reset();m.unwrap()}g&&(f=gx.dom.byId("Object_"+a.id));null!=f&&(g=gx.util.getContentTypeFromExt(b),f=this.setObjectCtrlType(f,
g));null!=f?"IMG"==f.tagName?(b=this.resolveResourceUrl(b,!0),f.src=b):(f.data=b||"about:blank",gx.fn.setVisible(f,!0),this.resizeObject(f),gx.dom.redrawControl(f)):(f=gx.dom.byId("Link_"+a.id),null!=f&&(f.style.display=""!=b?"block":"none",f.href=b))}},setGridMultimediaValue:function(a,b,f,g){if(void 0!==b)return this.setMultimediaValue(a+"_"+b,f,g)},setMultimediaValue:function(a,b,f){var g=gx.dom.byId(gx.csv.ctxControlId(a));if(g){var m=gx.html.multimediaUpload.getContainer(g),p=this.resolveResourceUrl(f||
b||"",!1);if(m){0<=gx.util.Url.parseWithAnchor(b).protocol.search(/^https?:/)&&gx.html.multimediaUpload.setPreviewImage(m,p);var u=""==b&&""==f||""!=b;if(!u){var x=gx.dom.byId(g.id+"_GXI");x&&(x.value=f)}(a=gx.dom.byId(a))&&""==b&&(a.value="");this.setMultimediaType(g,u);gx.html.multimediaUpload.setPreviewLink(m,p)}else{if("IMG"==g.tagName||"INPUT"==g.tagName&&"image"==g.type)g.src=p;(b=g.parentNode)&&"A"==b.tagName&&gx.dom.isMultimediaElement(g)&&(p?b.href=p:b.removeAttribute("href"))}}},setMultimediaType:function(a,
b){a&&(a=gx.html.multimediaUpload.getContainer(a))&&gx.html.multimediaUpload.setType(a,gx.lang.gxBoolean(b))},setObjectCtrlType:function(a,b){var f=a;if("IMG"==a.nodeName&&(!b||0==b.indexOf("image/")))return f;if(a.type!=b||"OBJECT"==a.nodeName&&0==b.indexOf("image/"))if(f=0==b.indexOf("image/")?gx.html.nodesFromText('<img id="'+a.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+a.id+'" type="'+b+'">')[0]){try{for(var g in a.attributes)if("id"!=g&&"type"!=g&&"implementation"!=
g&&a[g])try{f[g]=a[g]}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","setObjectCtrlType")}}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","setObjectCtrlType")}if(b=a.parentNode){g=null;for(var m=b.childNodes.length,p=0;p<m;p++)if(b.childNodes[p]==a){p<m-1&&(g=b.childNodes[p+1]);break}gx.dom.removeControlSafe(a);null!=g?b.insertBefore(f,g):b.appendChild(f)}}return f},resizeObject:function(a){var b=gx.lang.emptyObject;!b(a.data)&&"about:blank"!=a.data&&b(a.width)&&b(a.height)&&b(a.style.width)&&b(a.style.height)&&(a.style.width=
"200px",a.style.height="200px")},restoreLostCtrlOnGridRefresh:function(a,b,f){if(null==b.form){var g=gx.dom.id(b);!(g=gx.O.getValidStructFld(g))||"checkbox"!=b.type||g.gxgrid&&parseInt(a||0,10)!==parseInt(g.gxgrid.grid.firstRecordOnPage||0,10)||(b=gx.dom.el(b.id)||gx.dom.el(b.name),b.checked=f)}return b},checkboxClick:function(a,b,f,g,m){var p=b.checked;m=m?gx.getObj(m):null;var u="object"===typeof a?a:gx.fn.validStruct(a,m),x=u&&u.gxgrid?u.gxgrid.grid.firstRecordOnPage:0;a=u&&u.grid?u.grid:0;var w=
function(A){b=this.restoreLostCtrlOnGridRefresh(x,b,p);b.checked=p;b.value=p?f:g;gx.dom.toggleAttribute(b,"checked",p);u&&(A=gx.fn.controlRowIndex(b),"function"==typeof u.c2v&&u.c2v(A),gx.fn.call_v2bc(u,gx.O),gx.csv.invalidateCtrl(b,!0))}.closure(this);a&&gx.pO.supportAjaxEvents&&gx.evt.doAfterValidating(w);gx.fx.obs.notify("gx.validation",null,function(){if(gx.evt.fixWebKitOnFocus())b.onfocus();w.call(this,!0)});gx.pO.fullAjax||w.call(this,!0);m&&gx.util.browser.isIE()&&gx.setGxO(m)},setCtrlClass:function(a,
b){null!=a&&(a.className=b)},setCtrlLink:function(a,b){if(null!=a)if(""==b)this.unsetCtrlLink(a);else if("A"==a.tagName)a.href=b;else{var f=a.firstChild;if(f&&"A"==f.tagName)f.href=b;else{var g=a.parentNode;if("A"==g.tagName)g.href=b;else{var m=document.createElement("A");m.href=b;f&&"#text"==f.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(m,!0),m.innerHTML=f.nodeValue,a.replaceChild(m,f)):(g.replaceChild(m,a),m.appendChild(a));(a=l(a).attr("data-gx-link-target"))&&l(m).attr("target",a)}}}},unsetCtrlLink:function(a){if(null!=
a&&(a=a.parentNode,"A"==a.tagName)){var b=a.firstChild,f=a.parentNode;if(null!=f){for(;null!=b;)f.insertBefore(b,a),b=a.firstChild;gx.dom.removeControlSafe(a)}}},setCtrlLinkTarget:function(a,b){if(null!=a){var f=l(a);f.is("a")||(f=f.children());f.is("a")&&f.attr("target",b);l(a).attr("data-gx-link-target",b)}},scrollIntoViewIfNeeded:function(a,b,f){gx.fn.isVisibleAtScroll(a,b)||a.scrollIntoView(f)},isVisibleAtScroll:function(a,b){var f=a.getBoundingClientRect();a=f.bottom;var g=f.height;f=f.top;b=
b.getBoundingClientRect();return f<=b.top?b.top-f<=g:a-b.bottom<=g},isVisible:function(a,b){if(!a||gx.dom.hasClass(a,"gx-invisible")||"INPUT"===a.tagName.toUpperCase()&&"hidden"===a.type||"none"===a.style.display)return!1;try{for(var f;a&&("undefined"==typeof b||0<=b);){if((f=gx.dom.getComputedStyle(a))&&("hidden"==f.visibility||"none"==f.display))return!1;a=a.parentNode;"undefined"!=typeof b&&b--}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(a,b){var f=this.gridObjByLvl(a);
if(f)return f=gx.O.getGridById(f.gridId,b)||f,(a=f.grid.getRowByGxId(b))?a.gxIsMod():!0;f=!1;try{f=1==this.getControlValue("nIsMod_"+a+"_"+b)}catch(g){f=!1}return f},gridObjByLvl:function(a){for(var b=gx.O.Grids,f=b.length,g=0;g<f;g++)if(b[g].gridLvl==a)return b[g];return null},forceEnableControls:function(a){for(var b in gx.disabledControls){b=this.getControlRef_list(b);for(var f=b.length,g=0;g<f;g++)try{"button"!=b[g].type&&"submit"!=b[g].type&&(b[g].disabled=a)}catch(m){gx.dbg.logEx(m,"gxfrmutl.js",
"forceEnableControls")}}},alert:function(a,b){try{var f=gx.util.balloon.getNew(a.id);f.setError(b);f.show();gx.csv.invalidForcedCtrl=gx.csv.invalidForcedCtrl||{};gx.csv.invalidForcedCtrl.Ctrl=a;gx.csv.invalidForcedCtrl.ForceFocus=!1}catch(g){gx.util.alert.showError(b)}},getGridRowMode:function(a,b){return this.getGridRowModeImpl(a,b,this.currentGridRow(b))},getGridRowModeImpl:function(a,b,f){b=this.rowIsRemoved(b,f);a=this.getControlValue("nRcdExists_"+a+"_"+f);return"1"==b?"DLT":"0"==a?"INS":"UPD"},
rowIsRemoved:function(a,b){a=this.getGridObj(a);return null!=a&&(b=a.grid.getRowByGxId(b))?b.gxDeleted():!1},getGridObj:function(a,b){return gx.O.getGridById(a,b)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","changeCmpContext")}},initOld:function(a){void 0==gx.oldValues[a.id]&&(gx.oldValues[a.id]=a.value)},hasUnicode:function(a){return/[^\u0000-\u00ff]/.test(a)},setFocusOnError:function(a){var b=gx.fn.controlGridId(a);a=gx.csv.ctxControlId(a);b=0==
b?gx.dom.el(a):gx.fn.getControlGridRef(a,b);return null!=b&&(gx.O.AnyError=1,gx.csv.anyError=!0,b.setAttribute("data-gxvalid","0"),gx.csv.stopOnError||gx.csv.invalidForcedCtrl&&gx.csv.invalidForcedCtrl.ForceFocus)?(gx.fn.setFocus(b),!0):!1},usrSetFocus:function(a){gx.usrPendingControl=a},usrSetFocus_commit:function(){gx.usrPendingControl&&(gx.fn.usrSetFocus_impl(gx.usrPendingControl),delete gx.usrPendingControl)},usrSetFocus_impl:function(a,b){void 0===b&&(b=!0);var f=gx.fn.screen_CtrlRef(a);null==
f?gx.grid.setActiveGridRow(a,0):(a=gx.dom.id(f),1==gx.csv.isvalidating()?b?gx.fx.obs.addObserver("gx.onaftervalidate",this,function(g){gx.lang.doCallTimeout(gx.fn.usrSetFocus_impl,gx.fn,[g,!1],200)}.closure(gx.fn,[a]),{single:!0}):gx.usrFocusControl=a:(gx.fn.setFocus(f),delete gx.usrFocusControl))},setFocus:function(a,b){if(a){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&
window.parent.gx.csv.lastControl.blur())}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(a.id)&&(a=gx.dom.byId(a.id),!a))return;gx.fn.setFocusSafe(a,function(f){gx.fn.setSelection(f);f.forcedFocus=!0;b&&b()})}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(a,b){var f=this,g=gx.csv.setFocusOnload;if(a){var m=function(u,x){try{g&&x&&gx.fx.obs.addObserver("gx.onafterfocus",this,x.closure(this,[u]),{single:!0}),u.focus()}catch(w){}!g&&x&&x(u)},
p=function(){gx.lang.doCallTimeout(m,f,[a,b],g?500:0)};gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",window,p,{single:!0}):p()}},setFocusInit:function(){try{gx.csv.lastActiveControl=window.document.activeElement}catch(a){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},arrayCtrlFocus:function(a){a&&"radio"==a.type&&(a=gx.fn.getRadioSelected(a.name)||a);return a},setFocusOnload:function(a){a=void 0===a?!0:!1;gx.wpo(function(){if(!gx.pO.focusOnlyNEmb||top===
self||gx.popup.ispopup()){var b=null;b=gx.pO.getUserFocus();if(!gx.lang.emptyObject(b)){if("notset"==b)return;var f=gx.pO.getUserControl(gx.uc.userControlContainerId(b));if(gx.lang.emptyObject(f))gx.csv.userFocus=gx.fn.getControlRef(b,null,!0);else{f.setFocusBase();return}}if("notset"!=gx.csv.userFocus){b=gx.csv.userFocus;gx.fn.isAccepted(b)||(gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?b=gx.csv.lastActiveControl:(b=gx.fn.firstAcceptedControl(gx.popup.ispopup()),b=gx.fn.arrayCtrlFocus(b)));
try{b?(f=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=b,gx.csv.setFocusOnload=a,gx.fn.isAccepted(b)?(gx.O&&gx.O.IsComponent&&(gx.csv.disableFocus=!0),gx.fn.setFocus(b,f)):(gx.popup.setFocus(),f())):gx.popup.setFocus()}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setFocusOnload")}}}})},setSelectionImpl:function(a){setTimeout(function(){document.activeElement===a&&l(a).select()},0)},setSelection:function(a){if(a&&gx.fn.isVisible(a))try{if(gx.csv.lastControl=a,(gx.dom.isEditControl(a)||"file"==
a.type)&&a.select)this.setSelectionImpl(a);else if("TEXTAREA"==a.nodeName||"SELECT"==a.nodeName)a.focus(),this.setSelectionImpl(a)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setSelection")}},isActiveCtrl:function(a,b,f){return gx.fn.isAccepted(a,b,f)||gx.TabFocusOnPrompt&&a&&a.parentElement&&"IMG"==a.tagName&&"A"==a.parentElement.tagName},isAccepted:function(a,b,f){b=void 0===b||b;f=f||gx.O;var g=["FIELDSET"];g=null!=a&&a.type&&"hidden"!==a.type&&!a.disabled&&!a.readOnly&&!gx.util.inArray(a.nodeName,
g)&&gx.fn.isVisible(a);if(!g)return!1;b&&(a=gx.dom.id(a),b=f.getValidStructFld(a),a=f.getVariable("Gx_mode"),0<gx.csv.lastGrid&&f.setVariable("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),g=!gx.lang.emptyObject(b)&&b.nac?!b.nac.call(f):!0,f.setVariable("Gx_mode",a));return g},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(a,b){b=b||gx.csv.lastControl;var f=gx.fn.getControlIndex(b),g=f,m=this.controlGridId(b.id||
b.name),p=!1;a&&gx.dom.hasClass(b,"gx_newrow")&&(g=b.gxControlIdx,p=!0);if(-1==g)return!0;var u=gx.fn.getFormElements();for(b=gx.fn.searchFocus(++g,!0);;b=gx.fn.searchFocus(++g,!0))if(null==b||g==u.length)g=-1;else{if(a)break;if(gx.evt.isEnterEvtCtrl(b))break;if("INPUT"==b.nodeName&&"submit"!=b.type&&"button"!=b.type&&"image"!=b.type)break}!p&&m&&gx.O.isTransaction()&&this.controlGridId(b.id||b.name)!=m&&(a=gx.O.getGridById(m),b=gx.dom.byId(a.containerName+"_NewRow").parentNode,b.gxControlIdx=f);
gx.fn.setFocus(b)},getFormElements:function(){return l.makeArray(l("button, fieldset, input, img, object, output, select, textarea"))},getControlIndex:function(a){var b=gx.fn.getFormElements().length-1;return this.controlIndex(a,0,b)},controlIndex:function(a,b,f){if(document.all){var g=gx.fn.getFormElements(),m=g[b].sourceIndex,p=g[f].sourceIndex,u=parseInt(b+(f-b)/2)+1;g=g[u].sourceIndex;if(b==f&&a.sourceIndex==m&&a.sourceIndex==p||a.sourceIndex==m)return b;if(a.sourceIndex==p)return f;if(a.sourceIndex==
g)return u;if(a.sourceIndex>g&&a.sourceIndex<p)return this.controlIndex(a,u+1,f-1);if(a.sourceIndex>m&&a.sourceIndex<g)return this.controlIndex(a,b+1,u-1)}else return a.gxIndex},searchFocus:function(a,b){return b?this.searchFocusFwd(a):this.searchFocusBack(a)},searchFocusBack:function(a){for(var b=k(gx.fn.getFormElements());0<=a;a--)if(gx.fn.isActiveCtrl(b[a]))return b[a];return null},searchFocusFwd:function(a){for(var b=k(gx.fn.getFormElements()),f=b.length;a<f;a++)if(gx.fn.isActiveCtrl(b[a]))return b[a];
return null},rowGridId:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("data-gxgridid");return null!=b?b:gx.fn.rowGridId(a.parentNode)},controlRowIndex:function(a){return l(a).parentsUntil(".gx_usercontrol, .gxwebcomponent").filter("[data-gxrow]").attr("data-gxrow")||""},controlRowIdImpl:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("data-gxrow");return null!=b?b:gx.fn.controlRowIdImpl(a.parentNode)},controlRowId:function(a){var b=gx.fn.controlRowIdImpl(a);
null===b&&a&&a.id&&0<a.id.lastIndexOf("_")&&(b=a.id.lastIndexOf("_"),b=a.id.substring(b+1));return b},controlGridId:function(a){try{var b,f=gx.O.Grids;if(f){var g=0;for(b=f.length;g<b;g++)if(f[g].grid.columnsHtmlName[a])return f[g].gridId}var m=gx.fn.controlIds();g=0;for(b=m.length;g<b;g++){var p=gx.fn.validStruct(m[g]);if(gx.O.isSameField(p,a))return p.grid}var u=gx.O.getComponentData(a);if(u){var x=gx.fn.gridObjByLvl(u.lvl);if(x)return x.gridId}}catch(w){}return 0},oldGridId:function(a){try{for(var b=
gx.fn.controlIds(),f=b.length,g=0;g<f;g++){var m=gx.fn.validStruct(b[g]);if(void 0!=m&&m.gxold==a)return m.grid}}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(a,b){var f="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,a)&&(f=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)):this.isLvlParmOld(0,a)&&(f=gx.O.Gx_mode);return"no_mode"==f?!0:"UPD"==f||null==gx.csv.validatingGrid?(window[a]=b,!0):!1},isLvlParmOld:function(a,
b){try{var f=gx.O.getOldLvl(b);if(0<=f){if(0<a){var g=gx.fn.gridLvl(a);return f<g}return!0}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(a){try{for(var b=gx.fn.controlIds(),f=b.length,g=0;g<f;g++){var m=gx.fn.validStruct(b[g]);if(void 0!=m&&void 0!=m.lvl&&m.grid==a)return m.lvl}}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(a){try{for(var b=gx.fn.controlIds(),f=b.length,g=0;g<f;g++){var m=gx.fn.validStruct(b[g]);if(void 0!=m&&m.lvl==
a)return m.grid}}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(a){try{for(var b=gx.fn.controlIds(),f=0;f<b.length;f++){var g=gx.fn.validStruct(b[f]);if(void 0!=g&&g.fld==a)return b[f]}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(a,b){try{var f=null;b&&(f=[]);for(var g=gx.fn.controlIds(),m=g.length,p=0;p<m;p++){var u=gx.fn.validStruct(g[p]);if(void 0!=u&&a(u))if(u.id=g[p],b)f.push(u);else return u}}catch(x){gx.dbg.logEx(x,"gxfrmutl.js",
"getVStruct")}return f},vStructForOld:function(a){return gx.fn.getVStruct(function(b){return b.gxold==a})},vStructForVar:function(a){return gx.fn.getVStruct(function(b){return b.gxvar==a})},vStructForVarWId:function(a,b){var f=gx.fn.getVStruct(function(u){return u.gxvar==a},!0),g=f[0],m=f.length;if(1<m)for(var p=0;p<m&&(g=f[p],g.id!=b);p++);return g},vStructForHC:function(a){return gx.fn.getVStruct(function(b){return b.hc==a})},firstCtrlAfterGrid:function(a,b){for(var f=gx.fn.lastCtrlId();a<f;a++){var g=
gx.fn.validStruct(a);if(void 0!=g&&g.grid!=b)return a}return f},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(a){try{return gx.oldKeyValues[a]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(a,b){try{return gx.oldKeyValues[a+gx.fn.currentGridRow(b)]}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridKey")}return""},setKey:function(a,b){null!=a&&(gx.oldKeyValues[a]=b)},unsetKey:function(a){null!=a&&(gx.oldKeyValues[a]=void 0)},setGridKey:function(a,b,f){null!=
a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=f)},unsetGridKey:function(a,b){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=void 0)},removeGridRow:function(a,b){var f=gx.fn.rowIsRemoved(b,a);try{for(var g=gx.fn.controlIds(),m=g.length,p=0;p<m;p++){var u=gx.fn.validStruct(g[p]);if(void 0!=u&&u.grid==b){var x=gx.dom.el(u.fld+"_"+a);null!=x&&(x.gxdisabled=f,x.disabled=f)}}}catch(w){gx.dbg.logEx(w,"gxfrmutl.js","removeGridRow")}gx.evt.doAfterValidating(function(){gx.csv.validGridRow(b,a)})},controlFiresEvent:function(a){return a&&
(a.evt||a.triggersEvt)},controlIds:function(a){return(a=a||gx.O)?a.getControlIds():[]},getControlContext:function(a){var b=null;(a=gx.json.evalJSON(l(a).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)||"{}"))&&1<a.length&&(b=gx.getObj(a[0],a[1]));return b},validStruct:function(a,b){b=b||gx.O;return b.getValidStruct(a)},lastCtrlId:function(a){if(!0===a){a=this.controlIds();for(var b=a.length-1;0<=b;b--){var f=this.validStruct(a[b]);if(f.v2v&&(void 0===f.isacc||1==f.isacc))return a[b]}}else return gx.O.getLastControlId()},
lastMainLevelCtrlId:function(a,b){return 0==b&&a==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(a){try{for(var b=gx.fn.vStructsArray(),f=gx.fn.controlIds(),g=f.length,m=0;m<g;m++){var p=b[f[m]];if(null!=p){var u=gx.fn.getControlGridRef(p.fld,p.grid);if(u&&gx.fn.isAccepted(u)&&(a||"submit"!=u.type&&"image"!=u.type&&"button"!=u.type&&"fieldset"!=u.type))return u}}}catch(x){gx.dbg.logEx(x,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(a){var b=
gx.dom.byId(gx.csv.cmpCtx+"BTN_DELETE");null!=b&&a.isTransaction()&&gx.fn.setCtrlPropertyImpl(b,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(a){1!=gx.csv.isvalidating()&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(a&&gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.O.fromValid=gx.csv.lastId,gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(a){var b=function(f){try{for(var g=
f.length,m=0;m<g;m++)gx.fn.setCtrlPropertyImpl(f[m],"Enabled",0)}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","disableCtrl")}};a=gx.fn.getControlRef_list(a);if(null!=a)if("complete"==document.gxReadyState)b(a);else gx.evt.on_ready(this,b.closure(this,[a]))},refreshGridRowBC:function(a,b){try{var f=gx.O.getGridBC(a);if(f){var g=gx.pO.getGridForColl(f.gxvar);if(gx.csv.validatingGrid&&g&&gx.csv.validatingGrid.gridId==g.gridId)return gx.fn.setGridHidden(a,b),b=b[parseInt(gx.fn.currentGridRow(g.gridId))-1],gx.O.bcToScreen(f,
b),!0}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","refreshGridRowBC")}return!1},refreshBC:function(a,b){b=gx.O.applySDTVarMapping(b,a);return this.refreshFormBC(a,b)||this.refreshGridRowBC(a,b)},refreshFormBC:function(a,b){try{var f=gx.O.getFormBC(a)||gx.O.getFormBCForVar(a);if(f)return gx.setVar(a,b),gx.fn.setGridHidden(a,b),gx.O.bcToScreen(f,b),!0}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[a]},
GX_HASH_PREFIX:"gxhash_",getHash:function(a,b,f){return gx.fn.getHidden(a+gx.fn.GX_HASH_PREFIX+b+(f?"_"+f:""))||gx.fn.getHidden(a+gx.fn.GX_HASH_PREFIX+b)},getHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return gx.http.viewState[a]},setHidden:function(a,b){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[a]=b},setGridHidden:function(a,b){var f=a,g=gx.fn.oldGridId(a);0<g&&(f=a+"_"+gx.fn.currentGridRowImpl(g));gx.fn.setHidden(f,b)},deleteHidden:function(a){gx.http.viewState&&
delete gx.http.viewState[a]},setJsonHiddens:function(a,b,f){var g=[];f=void 0===f||f;for(var m in b){f?gx.fn.setGridHidden(m,b[m]):gx.fn.setHidden(m,b[m]);var p=gx.fn.getVarControlMap(a,m);var u=b[m];if(!gx.lang.emptyObject(p)){if(a){var x=a.VarControlMap[p];if("date"==x.type||"dtime"==x.type)u=new gx.date.gxdate(b[m],"Y4MD")}gx.setVar(p,u)}gx.fn.vStructForOld(m)&&gx.setVar(m,u);a&&a.UCBindingsHiddens[m]&&(g=g.concat(gx.O.UCBindingsHiddens[m].uc))}return g},filterHiddens:function(a,b){var f={},g;
for(g in b)g&&0==g.search(a)&&(f[g]=b[g]);return f},autoRefreshingControl:function(a,b){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&gx.csv.lastControl.id==b+a},setJsonValues:function(a,b,f,g,m){if(!a)return[];for(var p=gx.O,u=a.length,x=[],w,A,q=0;q<u;q++){var v=a[q],t=v.CmpContext,B=gx.lang.booleanValue(v.IsMasterPage),G=gx.setGxO(t,B);if(!gx.lang.emptyObject(gx.O))for(var J in v)if("CmpContext"!=J&&"IsMasterPage"!=J&&(!m||m(J))){var n=v[J];if(("object"!=typeof n||
!gx.fn.refreshBC(J,v[J]))&&"function"!=typeof n){var r=gx.fn.vStructForVar(J)||gx.O.getValidStructFld(J);if(r){if(r.v2v&&!gx.fn.autoRefreshingControl(r.fld,t)){var y=gx.O.getGridById(r.grid);y=y&&y.additiveResponse;0!=r.grid&&(w=gx.dom.el(J,!1,!1),w=gx.fn.controlRowId(w)||(r.grid==f?g:gx.fn.currentGridRow(r.grid)));y||(r.v2v(n),gx.fn.v2c(r,n,!1,w))}}else"GX_FocusControl"!=J||b?(r=gx.fn.vStructForHC(J),gx.lang.emptyObject(r)||gx.lang.emptyObject(r.hc)||r.grid||(r.hc==J?(G[r.hc]=n,gx.fn.setHidden(t+
"GXH_"+r.fld,n)):r.hd==J&&(G[r.hd]=n)),gx.lang.emptyObject(r)||(A="",0!=r.grid&&(A=r.grid==f?g:gx.fn.currentGridRow(r.grid)),gx.fn.setHidden(t+"GXHC"+r.fld+"_"+A,n)),A=gx.fn.getVarControlMap(G,J),gx.lang.emptyObject(A)?gx.setVar(J,n):gx.setVar(A,n),r&&!y&&gx.fn.call_v2bc(r,G),gx.fn.setGridHidden(J,n),gx.O.UCBindings[J]&&(x=x.concat(G.UCBindings[J].uc))):p.CmpContext==t&&p.IsMasterPage==B&&(gx.usrFocusControl=n)}}}gx.setGxO(p);return x},getPropertyControlRef:function(a,b,f){var g=gx.fn.getControlRef(a,
!0);g=null!=g||f?g:gx.dom.byId("Object_"+a);null==g&&(g=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(a)));null==g&&b&&(g=gx.dom.el(a+"_"+b));return g},isColumnProperty:function(a){return"title titlebackcolor titlebackstyle titlefontbold titlefontitalic titlefontname titlefontsize titlefontstrikethru titlefontunderline titleforecolor titleformat columnheaderclass".split(" ").includes(a.toLowerCase())},setJsonProperties:function(a,b){if(!a)return[];for(var f=gx.O,g=a.length,m=[],p=0;p<g;p++){var u=a[p],
x=u.CmpContext,w=gx.lang.booleanValue(u.IsMasterPage);x=gx.setGxO(x,w);if(!gx.lang.emptyObject(gx.O))for(var A in u)if("CmpContext"!==A&&"IsMasterPage"!==A&&""!==A&&(w=u[A],"function"!=typeof w)){var q=x.getValidStructFld(A);if("FORM"==A||q||0<=A.indexOf("gxHTMLWrp")||0<=A.indexOf("ContainerDiv")){var v=q&&("bits"==q.type||"bitstr"==q.type||"audio"==q.type||"video"==q.type||"binaryfile"==q.type);v=gx.fn.getPropertyControlRef(A,b,!v)}else v=gx.fn.getPropertyControlRef(A,b);var t=!1;if(v&&v.gxGridName){var B=
gx.fn.gridObjFromGxO(v.gxGridName);t=B.setProperty(w)}if(!t){var G=b||(q&&q.grid?gx.fn.currentGridRow(q.grid):"");t=x.getGridColumn(A,G);if((null==v||B)&&gx.uc.isUserControl(A,x)||t&&t.isUserControl)q=A,t&&t.isUserControl&&(q=A+"_"+G),gx.uc.setProperties(q,w),m.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(q)));else if(null!=v||null!=t)for(var J in w)if(gx.fn.isColumnProperty(J))t&&gx.fn.setCtrlProperty(t,J,w[J],q);else if(v)if(v.parentElement||(v=gx.fn.getPropertyControlRef(A,G)),"object"===
typeof w[J])for(var n in w[J])gx.fn.setCtrlProperty(v,n,w[J][n],q);else gx.fn.setCtrlProperty(v,J,w[J],q)}}}gx.setGxO(f);return m},loadJsonGrids:function(a,b,f){f=f||[];var g=[],m=function(D){for(var F=0;F<D.length;F++)if("string"===typeof D[F])return D[F];return""},p=function(D){var F="",H=D.lastIndexOf("_");-1!==H&&(F=(D=D.substring(H+5))?"_"+D:"");return F},u=function(D,F,H){for(var L=0;L<D.Count;L++){var N=D[L],O;for(O in N.Grids)(N=gx.fn.gridObj(F,O+"_"+gx.text.padl((L+1).toString(),4,"0"),!1))&&
N.isUsercontrol&&H.push({cmpCtx:F,gridName:O+"_"+gx.text.padl((L+1).toString(),4,"0"),inMasterPage:!1})}},x=[];if(a)for(var w=a.length,A,q=0;q<w;q++)try{var v=a[q];if(void 0!=v.Count){var t=v.CmpContext,B=v.GridName,G=gx.csv.validatingGrid;if(gx.pO.fullAjax||gx.lang.emptyObject(G)||G.gxComponentContext!=t&&G.gridName!=B||!gx.lang.emptyObject(G.boundedCollType)){var J="true"==v.InMasterPage?!0:!1,n="",r="";v[0]&&v[0].Props&&v[0].Props[0]&&gx.lang.isArray(v[0].Props[0])&&(r=m(v[0].Props[0]));n=p(r);
if(A=gx.fn.gridObj(t,B+n,J))u(v,t,x),x.push({cmpCtx:t,gridName:B+n,inMasterPage:J}),b?gx.O.Grids[A.gridName]&&gx.O.Grids[A.gridName].parentGrid||g.push(A.loadGrid({rowProps:v,isPostback:b})):A.updatePropsHidden(v)}}}catch(D){gx.dbg.logEx(D,"gxfrmutl.js","loadJsonGrids")}x=x.filter(function(D){return(D=gx.fn.gridObj(D.cmpCtx,D.gridName,D.inMasterPage))&&D.isUsercontrol});x=gx.lang.arrayUnique(x,function(D,F){return D.gridName===F.gridName});var y=[];for(q=0;q<x.length;q++)a=x[q],(a=gx.fn.gridObj(a.cmpCtx,
a.gridName,a.inMasterPage))&&a.grid&&(a.grid.ownerGrid&&a.grid.ownerGrid.parentGrid?y.push(a.grid):f.push(a.grid));var C=l.Deferred();l.when.apply(l,g).done(function(){gx.dom.indexElements();C.resolve(y)});return C.promise()},getErrorViewerCtrls:function(){var a=gx.dom.byClass("gx_ev");if(0==a.length){a=[];for(var b=gx.dom.byTag("span"),f=b.length,g=0;g<f;g++)"gxErrorViewer"==b[g].getAttribute("data-gx-id")&&a.push(b[g])}return a},setErrorViewer:function(a,b){b=void 0===b||b;gx.O.AnyError=0;if(a)try{gx.fx.obs.notify("gx.onmessages",
[a]);var f=gx.dom.byClass("gx_ev"),g=f.length,m;for(m in a){var p=a[m];if(!gx.lang.isArray(p)){var u=p.fields;p=p.msgs}var x=[];if(u)for(var w=0,A=u.length;w<A;w++)if(!gx.lang.isArray(u[w])){var q=gx.fn.vStructForVar(u[w].replace(/^gx\.O\./,""));q&&x.push(q.fld)}"MAIN"==m&&(m="");if("undefined"!=typeof p){for(w=0;w<g;w++){var v=f[w];if(v&&v.getAttribute("data-gx-id")==m+"gxErrorViewer"){var t=gx.csv.setFocusOnload?v.innerHTML:"";break}}var B={},G=!1,J;for(J in p){var n=p[J];n&&1==n.type&&(gx.O.AnyError=
1);if(!gx.lang.emptyObject(n.text)&&"function"!=typeof n){var r=gx.fn.screen_CtrlRef(n.att),y=r&&l(r).is("[data-gxgridid].gx-invisible "+r.tagName);if(""!=n.att&&(y&&gx.fn.isVisible(r,0)||gx.fn.isVisible(r))){var C=B[n.att];C||(C=gx.util.balloon.getNew(n.att,void 0,n.id?x:[]),B[n.att]=C);1==n.type?C.setError(n.text):C.setMessage(n.text);G||"ForeignKeyNotFound"!==n.id||(G=!0)}else if("ForeignKeyNotFound"===n.id&&!G||"ForeignKeyNotFound"!==n.id){var D=1==n.type?"gx-error-message":"gx-warning-message";
if("SuccessfullyAdded"===n.id||"SuccessfullyDeleted"===n.id||"SuccessfullyUpdated"===n.id)D="gx-success-message";t+='<div class="'+D+'">'+gx.html.encode(n.text)+"</div>"}}}G=!1;for(var F in B)if(C=B[F],0!=C.show()||G||(G=!0,gx.fn.setFocusOnError(F)),gx.csv.oneAtAtime)break;for(w=0;w<g;w++)if((v=f[w])&&v.getAttribute("data-gx-id")==m+"gxErrorViewer"&&v.innerHTML!=t&&(gx.dom.shouldPurge()&&gx.dom.purge(v,!0),v.innerHTML=b?t:v.innerHTML+t,""!=t)){var H=gx.fx.dom.highlight(v,[255,255,165],2500);H.play();
v.effect=H}}}gx.plugdesign.applyTemplateObject({templateSelector:function(L){return"errorviewer"===L.name},classMapSelector:function(){return!1}});gx.config.csv.scrollTopOnError&&gx.O.AnyError&&!G&&window.scrollTo(0,0)}catch(L){gx.dbg.logEx(L,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(a){var b=c.exec(a);return b?b[1]+b[2]:a},clearCompontHiddens:function(a){var b=[],f;for(f in a)"function"!=typeof a[f]&&b.push(gx.fn.cmpContextFromCtrl(f));try{gx.O.deleteComponentHiddens(b)}catch(g){gx.dbg.logEx(g,
"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(a,b,f,g,m){try{var p=[],u=!1,x=[],w;for(w in a)if(x.push(w),"function"!=typeof a[w])try{var A=a[w];if(A){var q=gx.dom.byId(w);!q&&b&&(q=gx.dom.byId(b[w]));gx.lang.emptyObject(q)&&(l(document.body).append("<div id='"+w+"'></div>"),q=gx.dom.byId(w));if(!gx.lang.emptyObject(q)){q.id&&(gx.fx.obs.deleteObserverByKey(q.id),gx.evt.removeHookByKey(q.id));gx.html.setInnerHtml(q,A,!1,m);var v=gx.fn.cmpContextFromCtrl(w),t=d(gx.fn.getHidden(v+
"_CMPPGM"));p.push({type:v,name:t,html:A,container:q})}}}catch(B){u=!0,gx.dbg.logEx(B,"gxfrmutl.js","setJsonComponents")}}catch(B){u=!0,gx.dbg.logEx(B,"gxfrmutl.js","setJsonComponents")}0!=p.length&&!u||"function"!=typeof g?(a=l.map(p,function(B){return gx.fn.createComponentAsync(B,f)}),l.when.apply(l,a).done(function(){g(x)})):g(x)},cmpRegexCache:{},getCmpRegex:function(a){var b=this.cmpRegexCache[a];this.cmpRegexCache[a]||(b=new RegExp("^"+a),this.cmpRegexCache[a]=b);return b},processCodeCallback:function(a,
b,f,g,m,p){gx.fn.createComponentObj(a,b,g);gx.fn.setJsonHiddens(m,f);p.resolve()},createComponentAsync:function(a,b){var f=l.Deferred(),g=a.type,m=a.name,p=a.html;a=a.container;f.then(function(){gx.fx.obs.notify("gx.onafterevent",[gx.csv.lastEvtResponse])});try{var u=gx.O,x=gx.fn.filterHiddens(gx.fn.getCmpRegex(g),b);gx.cache.codeLoaded(g+m)?(gx.fn.createComponentObj(m,g,a),gx.fn.setJsonHiddens(u,x),f.resolve()):(gx.cache.addInlineCode(g+m),gx.html.processCode(p,!1,gx.html.onTypeAvailable,[m,gx.fn.processCodeCallback,
[m,g,x,a,u,f],0],m))}catch(w){gx.dbg.logEx(w,"gxfrmutl.js","createComponentAsync"),f.resolve()}return f},createComponentObj:function(a,b,f){a=gx.createComponent(a,b,f);null!=a&&gx.addComponent(a)},cleanAttachedCtrls:function(a){gx.attachedControls=[]},getAttachedCtrl:function(a){for(var b=gx.attachedControls.length,f=0;f<b;f++){var g=gx.attachedControls[f];if(g.id==a)return g}return null},attachCtrl:function(a,b){null==gx.fn.getAttachedCtrl(a)&&gx.attachedControls.push({id:a,info:b})},doAttachs:function(a){var b=
gx.fn.attachedControls(),f=b.length,g=gx.O;a=a&&a.length?l.map(a,gx.fn.cmpContextFromCtrl):void 0;var m,p;for(p=0;p<f;p++){var u=b[p];if(!a||0<=l.inArray(u.info.wc,a)){var x=gx.setGxO(u.info.wc,u.info.mp);if(u.info.isPrompt&&x.isTransaction()&&"DSP"==x.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(u.info.wc+u.info.id),"Visible",!1);else if(!u.attached){x=u.info.controls;var w=x.length;var A=[];for(m=0;m<w;m++){gx.fn.addAttach(x[m],u);var q=gx.fn.validStruct(x[m]);gx.fn.checkAttachedPropertyVS(q,"Visible",
!1);gx.fn.checkAttachedPropertyVS(q,"Enabled",!1);A.push(q.fld)}u.attached=!0;l("#"+u.id).attr("data-gx-attached-ctrl",A.join(" "))}}}gx.setGxO(g);gx.fn.setPromptlisteners()},setPromptlisteners:function(a){gx.TabFocusOnPrompt&&l("[data-gx-attached-ctrl]",a).not("[gxfocusable]").parent().on("focus",gx.evt.promptFocus).on("mousedown",gx.evt.promptMousedown).attr("gxfocusable","1")},clearPromptlisteners:function(a){l("[data-gx-attached-ctrl]",a).parent().off("focus").off("mousedown")},addAttach:function(a,
b){a=gx.fn.validStruct(a);void 0==a.attachedCtrls&&(a.attachedCtrls=[]);a.attachedCtrls.push(b)},checkAttachedProperty:function(a,b,f){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(a),b,f)},checkAttachedPropertyVS:function(a,b,f){if(void 0!=a&&(a=a.attachedCtrls,void 0!=a))for(var g=a.length,m=0;m<g;m++)gx.fn.checkAttachedControlProperty(a[m],b,f)},checkAttachedControlProperty:function(a,b,f){var g=a.info.id;a=a.info;var m=!0,p=a.controls;a=a.wc;for(var u=p.length,x=0;x<u;x++){var w=gx.fn.getCtrlProperty(a+
gx.fn.validStruct(p[x]).fld,b);m=f?w==f:m&&w==f;if(f&&m)break}m&&gx.fn.setCtrlPropertyImpl(gx.dom.el(a+g),b,f)},changeControlOpacity:function(a,b,f,g){var m=Math.round(g),p="";p="string"==typeof a?a:a.id;b>f?(gx.fn.setOpacity(b,p),setTimeout(function(){gx.fn.changeControlOpacity(a,b-10,f,g)},m)):b<f?(gx.fn.setOpacity(b,p),setTimeout(function(){gx.fn.changeControlOpacity(a,b+10,f,g)},m)):gx.fn.setOpacity(f,p)},setOpacity:function(a,b){var f=b;"string"==typeof b&&(f="body"==b?document.body:gx.dom.el(b));
null!=f&&(b=f.style,f="reset"==a?"":a/100,b.opacity=f,b.MozOpacity=f,b.filter="alpha(opacity="+("reset"==a?100:a)+")")},fadeControl:function(a,b,f){"in"==b?gx.fn.changeControlOpacity(a,0,100,f):gx.fn.changeControlOpacity(a,100,0,f)},fadeIn:function(a,b){gx.fn.fadeControl(a,"in",b)},statusMsg:function(a){window.status=a},objectOnload:function(a,b){var f=document.documentElement,g=null;try{g=window.top.document.documentElement}catch(x){}g&&f!=g&&gx.dom.getAttributeNames(g).filter(function(x){return x.startsWith("gx-data-")}).forEach(function(x){return f.setAttribute(x,
g.getAttribute(x))});var m=l(document.body),p="true"===m.attr("data-HasEnter"),u="true"===m.attr("data-Skiponenter");gx.evt.onkeypress_hdlr=gx.evt.onkeypress_hdlr||function(x){gx.evt.onkeypress(x,p,u)};gx.evt.attach(document,["keydown"],gx.evt.onkeypress_hdlr);l(document).on("input",function(x){gx.evt.oninput(x)});l(document).on("keyup",function(x){gx.evt.onkeyup(x)});l(document).on("keyup",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',
function(x){var w=x.target.id+" + "+x.target.value;gx.evt.cvcingContext!==w&&(gx.evt.cvcingContext=w,gx.evt.oncontrolvaluechanging(x))});l(document).on("paste",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(x){gx.evt.oncontrolpasting(x)});null!=gx.pO&&(gx.pO.onload(a,b),gx.setGxO(gx.pO))},objectOnUnload:function(a){if(null!=gx.pO)gx.pO.onunload(a)},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},
objectPostback:function(a,b){null!=gx.pO&&(gx.pO.postbackLoad(a,b),gx.fx.obs.notify("gx.onobjectpostback",arguments))},gridObjFromGxO:function(a){return gx.fn.gridObj(gx.O.CmpContext,a,gx.O.IsMasterPage)},gridObj:function(a,b,f){return(a=gx.getObj(a,f))?a.getGrid(b):null},installComponents:function(a,b){var f=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=f)for(var g in f)if(a||!gx.pO.getWebComponent(g)){var m=d(f[g].toLowerCase());m=gx.createComponent(m,g);null!=m&&(gx.addComponent(m,b),setTimeout(function(p){this.addComponentRemoteFiles(p)}.closure(this,
[m]),1))}},addComponentRemoteFiles:function(a){if(a=a.getContainer())gx.html.processCode(a.innerHTML,!0),gx.dom.fitToParent(a)},datePickerFormat:function(a,b,f){var g=gx.dateFormat,m=g.substr(0,1),p=g.substr(1,1);g=g.substr(2,1);m=gx.fn.datePickerDateFormat(m,a);p=gx.fn.datePickerDateFormat(p,a);a=gx.fn.datePickerDateFormat(g,a);g=gx.fn.datePickerTimeFormat(b);return 0<f&&0<b?m+"/"+p+"/"+a+" "+g:0<f?m+"/"+p+"/"+a:g},datePickerDateFormat:function(a,b){return"Y"==a&&"99/99/9999"==b.substr(0,10)?"%Y":
"Y"==a?"%y":"M"==a?"%m":"D"==a?"%d":""},datePickerTimeFormat:function(a){var b=gx.timeFormat;if(12==b){b="%I";var f=" %p"}else b=24==b?"%H":"",f="";if(2==a)a="";else if(5==a)a=":%M";else if(8==a)a=":%M:%S";else return"";return b+a+f},installDatePicker:function(a,b,f,g,m,p,u,x,w,A){(new gx.ui.controls.datePicker({inputId:a,triggerId:a+"_dp_trigger",inline:g,inputType:m?"datetime":"date",weeksNumbers:p,mondayFirst:u,format:x,datePartLength:w,timePartLength:A,afterChange:gx.fn.datePickerChanged,vStruct:b,
gxO:f})).render()},datePickerChanged:function(a,b,f,g,m){if(!a||a.dateClicked){m=m||gx.O;if("undefined"===typeof g)for(var p=gx.fn.controlIds(),u=p.length,x=0;x<u;x++){g=gx.fn.validStruct(p[x]);var w=0!=g.grid?"_"+gx.fn.currentGridRow(g.grid):"";if(f.id==m.CmpContext+g.fld+w)break}null!=g&&void 0!=g.dp&&(b=gx.date.isNullDate(b)?gx.date.nulldate_toc(g.len,g.dec):b.print(gx.fn.datePickerFormat(g.dp.pic,g.dp.dec,g.len)),b!=f.value&&(f.setAttribute("data-gxvalid","0"),f.value=b,f.onchange(),a&&a.callCloseHandler(),
0<g.grid&&(gx.fn.getGridObj(g.grid)||g.gxgrid).setRowModified(gx.fn.currentGridRow(g.grid)),m.refreshDependantGrids(g)))}},toArray:function(a){if(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()){for(var b=[],f=0,g=a.length;f<g;f++)b[f]=a[f];return b}return Array.prototype.slice.call(a)},evalCtxScope:function(a,b){var f=gx.O;gx.setGxO(a);a=eval(b);a instanceof Object&&(a=gx.json.serializeJson(a));gx.setGxO(f);return a}}}(gx.$);
Function.prototype.closure=function(l,c,d){var k=gx.util.browser;if(k.isIE()&&8>k.ieVersion()){window.__objs||(window.__objs=[],window.__funs=[],window.__args=[]);var a=this,b=l.__objId;b||(__objs[b=l.__objId=__objs.length]=l);var f=a.__funId;f||(__funs[f=a.__funId=__funs.length]=a);c||(c=[]);var g=c.__argsId;g||(__args[g=c.__argsId=__args.length]=c);c=a=l=null;return function(){if(__funs){var m=__args[g];!0===d&&(m=Array.prototype.slice.call(arguments,0),m=m.concat(__args[g]));0==m.length&&0<arguments.length&&
(m=arguments);m=__funs[f].apply(__objs[b],m);if(__objs)try{delete __objs[b].__objId}catch(p){__objs[b].__objId=null}__funs&&delete __funs[f].__funId;__args&&delete __args[g].__argsId;return m}}}a=this;return function(){var m=c||arguments;!0===d&&(m=Array.prototype.slice.call(arguments,0),m=m.concat(c));return a.apply(l||window,m)}};
gx.thread={Map:function(){this.map={};this.add=function(l,c){this.map[l]=c};this.remove=function(l){delete this.map[l]};this.get=function(l){return null==l?null:this.map[l]};this.first=function(){return this.get(this.nextKey())};this.next=function(l){return this.get(this.nextKey(l))};this.nextKey=function(l){for(var c in this.map){if(!l)return c;l==c&&(l=null)}return null}},Command:function(l,c,d){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=
function(){c.apply(l,d)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(l,c,d,k){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(var b;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+
")",10);try{b=this.c.execute()}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if("function"==typeof k)try{k.call(l,b)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(l,c,d);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};gx.INTERACTIVE_EVT="gx.onInteractive";gx.PARENT_OBJECT_EVT="gx.onCreateParentObject";
gx.SETMASTERPAGE_EVT="gx.onSetMasterPage";gx.ONREADY_EVT="gx.onready";gx.ONAFTERLOAD_EVT="onafterload";gx.ONAFTERGALOAD_EVT="onaftergaload";gx.isInteractive=!1;gx.isReady=!1;gx.getActiveContext=function(){var l=window;gx.popup.getPopup()&&gx.popup.getPopup().frameWindow&&(l=gx.popup.getPopup().frameWindow);return l};gx.isReadyUI_impl=function(l){return 1>l.gx.evt.userReadyCnt&&l.gx.evt.userReadyThresholdWait()&&l.gx.isInputEnabled()&&(l.gx.ajax.isFormEnabled()||null!=gx.popup.getPopup())};
gx.isReadyUI=function(){return gx._isReadyUI()};gx._isReadyUI=function(){return gx.isReadyUI_impl(gx.getActiveContext())};gx.goInteractive=function(){gx.isInteractive=!0;gx.fx.obs.notify(gx.INTERACTIVE_EVT)};gx.goReady=function(l){gx.isReady=!0;gx.fx.obs.notify(gx.ONREADY_EVT,[],l)};gx.goOnload=function(){gx.isLoaded=!0;gx.fx.obs.notify(gx.ONAFTERLOAD_EVT)};gx.observe_run=function(l,c,d,k){d[k]=function(a,b,f){f=f||[];l()?a.apply(b,f):gx.fx.obs.addObserver(c,b,a.closure(b,f),{single:!0})}};
gx.observe_run(function(){return gx.isLoaded},gx.ONAFTERLOAD_EVT,gx,"ol");gx.observe_run(function(){return gx.isReady},gx.ONREADY_EVT,gx,"wr");gx.observe_run(function(){return gx.pO&&gx.pO.MasterPage},gx.SETMASTERPAGE_EVT,gx,"wmp");gx.observe_run(function(){return gx.isInteractive},gx.INTERACTIVE_EVT,gx,"wi");gx.observe_run(function(){return gx.pO},gx.PARENT_OBJECT_EVT,gx,"wpo");gx.observe_run(function(){return window.gtag},gx.ONAFTERGALOAD_EVT,gx,"wga");gx.isabsoluteurl=function(l){return-1!==l.search("://")};
gx.isRelativeToHost=function(l){return"/"==l.substr(0,1)};gx.absoluteurl=function(l){return gx.isabsoluteurl(l)?l:"/"!==l.charAt(0)?gx.util.resourceUrl(l,!0):location.protocol+"//"+location.host+l};gx.timeoutActions={ignore:0,warn:1};
gx.uc=function(l){var c=/^_gx_image_resource_/,d=function(a){if("string"===typeof a)return gx.util.imageUrl(a);Array.isArray(a)&&(a=a.map(function(m){return d(m)}));if("object"===typeof a)for(var b=$jscomp.makeIterator(Object.entries(a)),f=b.next();!f.done;f=b.next()){var g=$jscomp.makeIterator(f.value);f=g.next().value;g=g.next().value;a[f]=d(g)}return a},k={};return{PostRenderScripts:k,gxCssClass:"gx_usercontrol",getNew:function(a,b,f,g,m,p,u,x,w,A){try{var q=eval(g);gx.lang.inherits(q,gx.uc.UserControl,
!0);var v=new q(l)}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","getNew UserControl "+g),v=new gx.uc.UserControl}v.ContainerName=m;v.DesignContainerName=m;v.LabelForAttValue=a.CmpContext+p.toUpperCase()+(w?"_"+A:"");v.setupControl(a,p,u,b,f,x,w,A);return v},fromChild:function(a){var b=gx.pO.getUsercontrolFromChild(a);if(null!=b||gx.pO.hasMasterPage()&&(b=gx.pO.MasterPage.getUsercontrolFromChild(a),null!=b))return b;for(var f=gx.pO.WebComponents.length,g=0;g<f;g++)if(b=gx.pO.WebComponents[g].getUsercontrolFromChild(a),
null!=b)return b;return null},getUserControlObj:function(a){var b=gx.O.getUserControl(a);if(gx.lang.emptyObject(b)){if(gx.pO.hasMasterPage()&&(b=gx.pO.MasterPage.getUserControl(a),!gx.lang.emptyObject(b)))return b;for(var f=gx.pO.WebComponents.length,g=0;g<f&&(b=gx.pO.WebComponents[g].getUserControl(a),gx.lang.emptyObject(b));g++);}return b},CtrlId:function(a){return a.replace(/Container$/,"")},userControlContainerId:function(a){var b=a+"Container";if(0<=a.indexOf("ContainerDiv"))return a;var f=gx.O.getValidStructFld(a);
if(f){var g=gx.O.rowPatternRegex.exec(a);g=g?g[1]:null;if(f="function"===typeof f.getUCInstance?f.getUCInstance(g):f.uc)b=f.ContainerName}return b&&(f=a.lastIndexOf("_"),-1!=f&&(a=b+a.substring(f),null!=gx.dom.byId(a)))?a:b},setProperties:function(a,b){a=gx.uc.getUserControlObj(gx.uc.userControlContainerId(a));if(null!=a)if(void 0!=b.length)for(var f=b.length,g=0;g<f;g++)for(var m in b[g]){var p=b[g][m];a[m]=p}else for(m in b)p=b[m],a[m]=p},isUserControl:function(a,b){b=b||gx.O;return gx.lang.emptyObj(b.UserControls)?
!1:a instanceof gx.uc.UserControl?!0:(a=gx.dom.byId(gx.uc.userControlContainerId(a)))&&"DIV"===a.tagName&&gx.dom.hasClass(a,gx.uc.gxCssClass)?!0:!1},StartRender:function(){k={}},pushPostRenderScripts:function(a){l.each(a&&a.Scripts||[],function(b,f){k[f]=f})},EndRender:function(){var a=gx.lang.objToArray(k);a=l.map(a,function(b){return gx.util.resourceUrl(gx.util.resolveUrl(b),!1)});gx.http.loadScripts(a,gx.emptyFn,0,!0)},isImageResourcePty:function(a){return gx.text.startsWith(a,"_gx_image_resource_")},
getComputedImagePath:function(a){try{var b=getComputedStyle(document.documentElement).getPropertyValue("--GX-Image_"+a)||"";if(b=b.replaceAll("\\","").replace(/\s*url\((.+?)\)/,"$1"))gx.uc.UserControl.theme_el=gx.uc.UserControl.theme_el||gx.getThemeElement(),b=(new URL(b,gx.uc.UserControl.theme_el.href.toString())).toString()}catch(f){}return b},getClientProperty:function(a,b){var f=b,g=a;gx.uc.isImageResourcePty(a)&&(g=a.replace(c,""),f=gx.uc.getComputedImagePath(b));return{name:g,value:f}},UserControl:function(){this.ParentObject=
null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.IsPostBack=this.RealControl=this.C2ShowFunction=null;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+
this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(a){var b=""!=this.GridRow?"_"+this.GridRow:"",f=this.DesignContainerName+this.ControlName+"_"+a+b;f=gx.dom.byId(f);f||(f=this.DesignContainerName+a+b,f=gx.dom.byId(f));return f};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(a,
b,f,g,m,p,u,x){this.ParentObject=a;this.ControlName=b;this.ControlId=g;this.LastIdBefore=m;this.ControlLvl=void 0!=p?p:0;this.GridId=void 0!=u?u:0;this.GridRow=void 0!=x?x:"";gx.util.pushOnceSorted(this.ControlId,this.ParentObject.GXCtrlIds);var w=x||"_norow",A=this.ParentObject.GXValidFnc[this.ControlId];A||(this.ParentObject.GXValidFnc[this.ControlId]={id:this.ControlId,lvl:this.ControlLvl,fld:f,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl},A=this.ParentObject.GXValidFnc[this.ControlId]);
A=this.ParentObject.GXValidFnc[this.ControlId];A.ucInstances=A.ucInstances||{};A.ucInstances[w]=this;A.getUCInstance=function(q){q=q||w;return A.ucInstances[q]}};this.addValidFunction=function(a,b,f){this.ValidFunctions.push(a);this.ParentObject.addUsercontrolBinding(b,f+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;for(var a=this.ValidFunctions.length,b,f=0;f<a;f++)if((b=this.ValidFunctions[f])&&!b.call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=
null,!1;gx.csv.validatingUC=null;return!0};this.attachEvents=function(){try{var a=this.getContainerControl();if(gx.lang.emptyObject(document.frames))a.onfocus=this.onfocus,this.RealControl=a;else{var b=document.frames.length;if(0<b){var f=0;for(f=0;f<b;f++){var g=document.frames[f];if(1==gx.dom.isChildNode(g,a)){g.frameElement.onfocus=this.onfocus;this.RealControl=g.frameElement;break}}}}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),
this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=this.ControlId;gx.csv.anyError||this.setFocusBase()};this.oninput=function(){this.autoRefreshFn&&this.autoRefreshFn()};this.onchange=function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(a){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),
!0);this.getContainerControl().innerHTML=a};this.createWebComponent=function(a,b,f,g,m){this.ParentObject.createWebComponent(a,b,f,this.GridRow,g,m)};this.deleteWebComponent=function(a){a=gx.fn.cmpContextFromCtrl(a);this.ParentObject.deleteComponent(a)};this.notifyContext=function(a,b){gx.fx.ctx.notify(null,a,b)};this.addV2CFunction=function(a,b,f,g){if("function"==typeof a){var m=b;this.V2CFunctions.push(a);var p=gx.fn.getVarControlMap(this.ParentObject,m);void 0!==p&&this.ParentObject.addUsercontrolBinding(p,
m,this)}else p=a,m=b,this.ParentObject.addUsercontrolBinding(p,m,this),this.V2CFunctions.push(function(u,x,w){var A=m;w&&(x&&(A=m+"_"+x),x=p,A=g?gx.fn.getControlValue(A)[g]:gx.fn.getControlValue(A),g?u.ParentObject[x][g]=A:u.ParentObject[x]=A);A=g?u.ParentObject[p][g]:u.ParentObject[p];u.useGxDateForBindings&&(x=gx.fn.getVarControlMapForVar(p),"date"!==x.type&&"dtime"!==x.type||"string"!==typeof A||(A=u.IsPostBack?new gx.date.gxdate(A):new gx.date.gxdate(A,"Y4MD"),x=p,w=A,g?u.ParentObject[x][g]=w:
u.ParentObject[x]=w));u[f](d(A))})};this.addC2VFunction=function(a){this.C2VFunctions.push(a)};this.setC2ShowFunction=function(a){this.C2ShowFunction=a};this.execV2CFunctions=function(a){var b=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;var f,g=this.V2CFunctions,m=g.length;for(f=0;f<m;f++)try{g[f](this,this.GridRow,a)}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=b};this.execC2VFunctions=function(){var a=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;
var b,f=this.C2VFunctions,g=f.length;for(b=0;b<g;b++)try{f[b](this,this.GridRow)}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=a};this.sdtV2c=function(a,b,f,g,m){if(null!==b){if(b=parseInt(b,10)-1,void 0!==this.ParentObject[a][b])this[m](this.ParentObject[a][b][f])}else this.ParentObject[a]=gx.fn.getControlValue(g,null,this.ParentObject),this[m](this.ParentObject[a][f])};this.sdtC2v=function(a,b,f,g,m){null!==b?(b=parseInt(b,10)-1,this.ParentObject[a][b][f]=this[m]()):this.ParentObject[a][f]=
this[m]();gx.fn.setControlValue(g,this.ParentObject[a])};this.execShowFunction=function(){!1===this.IsPostBack&&(this.IsPostBack=!0);null===this.IsPostBack&&(this.IsPostBack=!1);var a=this.getContainerControl();try{null!=this.C2ShowFunction&&a&&this.C2ShowFunction(this)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execShowFunction")}if(a){if(this.autoToggleVisibility){var b=l(a).add("label[for='"+this.LabelForAttValue+"']");gx.lang.gxBoolean(this.Visible)?b.show():b.hide()}gx.plugdesign.applyTemplateObject({selector:"#"+
a.id,templateSelector:function(f){return!0===f.onDemandInvoke}})}gx.uc.pushPostRenderScripts(this)};this.updateAndShow=function(a){try{this.execV2CFunctions(a)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","updateAndShow")}a&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};this.isServerEvent=function(a){var b=this.ParentObject,f=b.IsMasterPage?"_MPAGE":"";a=this.ControlName.toUpperCase()+f+"."+a.toUpperCase()+f;if(a=b.getClientEventName(a))return b.isServerEvent(a);gx.dbg.logDebug("Client event name couldn't be resolved.");
return!1};this.eventHandler=function(a,b,f){gx.evt.setReady(!1,"eventHandler");var g=gx.O;gx.setGxO(this.ParentObject);if(0<a){var m=this.DesignContainerName,p=(new RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$")).exec(this.DesignContainerName);p&&p[1]&&(m=p[1]);this.ParentObject[m]=this;(a=this.ParentObject.getGridById(a,b))&&a.instanciateRow(b)}this.execC2VFunctions();f.call(this.ParentObject,this.getEventRow()).always(function(u){gx.setGxO(u);gx.evt.setReady(!0,"eventHandler")}.closure(this,
[g]));gx.csv.instanciatedRowGrid=null};this.addEventHandler=function(a,b){this[a]=function(f){var g=this.isServerEvent(a);g&&"function"===typeof f&&gx.fx.obs.addObserver("gx.onafterevent",this,f,{single:!0});this.eventHandler(this.GridId,this.GridRow,b);g||"function"!==typeof f||f.call(this)}.closure(this)};this.addProperty=function(a,b){this.Properties[a]=b};this.setProp=function(a,b,f,g){this.addProperty(a,b);this.PropTypes[a]=g;gx.lang.isBooleanType(g)?this[a]=gx.lang.gxBoolean(f):"color"==g?gx.lang.emptyObject(f)||
(this[a]="number"==typeof f||"string"==typeof f?gx.color.html(f):f):gx.lang.isNumericType(g)?gx.lang.emptyObject(f)||(this[a]=gx.num.parseFloat(f)):this[a]=f};this.setDynProp=function(a,b,f,g,m){this.addProperty(a,b);this.DynProperties.push(a);this.PropTypes[a]=g;var p=function(){var u=this.getDynPropertyValueFromHidden(a,b);void 0===u&&(u=f);this.setProp(a,b,u,g)};m?p.call(this):this.ParentObject.CmpContext?gx.fx.obs.addObserver("webcom.render",this,function(u){u===this.ParentObject&&p.call(this)}):
gx.wr(p,this)};this.refreshDynProperties=function(){for(var a=0,b=this.DynProperties.length;a<b;a++){var f=this.DynProperties[a];this[f]=this.getDynPropertyValueFromHidden(f,this.Properties[f])}};this.getDynPropertyValueFromHidden=function(a,b){var f=gx.fn.getHidden(this.getHiddenName("_gx_image_resource_"+b))||gx.fn.getHidden(this.getHiddenName("_gx_image_resource_"+b.toLowerCase()));if(f)try{f=gx.uc.getClientProperty("_gx_image_resource_"+a,f).value}catch(g){f=""}else f=gx.fn.getHidden(this.getHiddenName(b)),
void 0===f&&(f=gx.fn.getHidden(this.getHiddenName(a)));return f};this.setGridProperties=function(){for(var a,b=this.ParentObject.getGridUCProperties(this.ControlName),f=b.length,g=0;g<f;g++){var m=b[g],p=m.v;a=this.getHiddenName(m.h);a=gx.fn.getHidden(a);if(void 0===p||void 0!==a)p=a,"color"==m.t&&(p=gx.color.html(p));this.setProp(m.p,m.h,p,m.t)}};this.setGridEventHandlers=function(){for(var a=this.ParentObject.getGridUCEventHandlers(this.ControlName),b=a.length,f=0;f<b;f++){var g=a[f];this.addEventHandler(g.e,
g.h)}};this.getHiddenName=function(a){var b="",f=this.ControlName.toUpperCase();""!=this.GridRow&&(b="_"+this.GridRow,this.ownerGrid&&(f=this.ownerGrid.realGridName.toUpperCase()));return this.ParentObject.CmpContext+f+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+a+b};this.saveProperties=function(){for(var a in this.Properties)if(this.hasOwnProperty(a)){var b=this[a];"function"!=typeof this.Properties[a]&&("undefined"!=typeof b&&"undefined"!=typeof b.R&&"undefined"!=typeof b.G&&"undefined"!=typeof b.B&&
(b=gx.color.rgb(b.R,b.G,b.B)),gx.lang.isBooleanType(this.PropTypes[a])&&(b=b?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[a]),b))}}}}}(gx.$);gx._init();window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));window.$.fn&&window.$.fn.jquery?gx.dbg.write("global $ is jquery"+window.$.fn.jquery):gx.dbg.write("Warning: $ is not a jQuery object instance");
(function(l,c,d){function k(){return"function"!==typeof c.createElement?c.createElement(arguments[0]):B?c.createElementNS.call(c,"http://www.w3.org/2000/svg",arguments[0]):c.createElement.apply(c,arguments)}function a(y){return y.replace(/([a-z])-([a-z])/g,function(C,D,F){return D+F.toUpperCase()}).replace(/^-/,"")}function b(y,C){return function(){return y.apply(C,arguments)}}function f(y){return y.replace(/([A-Z])/g,function(C,D){return"-"+D.toLowerCase()}).replace(/^ms-/,"-ms-")}function g(y,C,
D,F){var H=k("div");var L=c.body;L||(L=k(B?"svg":"body"),L.fake=!0);if(parseInt(D,10))for(;D--;){var N=k("div");N.id=F?F[D]:"modernizr"+(D+1);H.appendChild(N)}D=k("style");D.type="text/css";D.id="smodernizr";(L.fake?L:H).appendChild(D);L.appendChild(H);D.styleSheet?D.styleSheet.cssText=y:D.appendChild(c.createTextNode(y));H.id="modernizr";if(L.fake){L.style.background="";L.style.overflow="hidden";var O=t.style.overflow;t.style.overflow="hidden";t.appendChild(L)}y=C(H,y);L.fake?(L.parentNode.removeChild(L),
t.style.overflow=O):H.parentNode.removeChild(H);return!!y}function m(y,C){var D=y.length;if("CSS"in l&&"supports"in l.CSS){for(;D--;)if(l.CSS.supports(f(y[D]),C))return!0;return!1}if("CSSSupportsRule"in l){for(var F=[];D--;)F.push("("+f(y[D])+":"+C+")");F=F.join(" or ");return g("@supports ("+F+") { #modernizr { position: absolute; } }",function(H){if("getComputedStyle"in l){H=getComputedStyle.call(l,H,null);var L=l.console;null!==H?H=H.getPropertyValue("position"):L&&L[L.error?"error":"log"].call(L,
"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else H=H.currentStyle&&H.currentStyle.position;return"absolute"==H})}return d}function p(y,C,D,F){function H(){N&&(delete r.style,delete r.modElem)}F="undefined"===typeof F?!1:F;if("undefined"!==typeof D){var L=m(y,D);if("undefined"!==typeof L)return L}for(L=["modernizr","tspan","samp"];!r.style&&L.length;){var N=!0;r.modElem=k(L.shift());r.style=r.modElem.style}var O=y.length;for(L=0;L<O;L++){var Q=y[L];var W=
r.style[Q];~(""+Q).indexOf("-")&&(Q=a(Q));if(r.style[Q]!==d){if(F||"undefined"===typeof D)return H(),"pfx"==C?Q:!0;try{r.style[Q]=D}catch(V){}if(r.style[Q]!=W)return H(),"pfx"==C?Q:!0}}H();return!1}function u(y,C,D,F,H){var L=y.charAt(0).toUpperCase()+y.slice(1),N=(y+" "+J.join(L+" ")+L).split(" ");if("string"===typeof C||"undefined"===typeof C)return p(N,C,F,H);N=(y+" "+G.join(L+" ")+L).split(" ");a:{y=N;for(var O in y)if(y[O]in C){if(!1===D){C=y[O];break a}O=C[y[O]];if("function"===typeof O){C=
b(O,D||C);break a}C=O;break a}C=!1}return C}function x(y,C,D){return u(y,d,d,C,D)}var w=[],A=[],q={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(y,C){var D=this;setTimeout(function(){C(D[y])},0)},addTest:function(y,C,D){A.push({name:y,fn:C,options:D})},addAsyncTest:function(y){A.push({name:null,fn:y})}},v=function(){};v.prototype=q;v=new v;v.addTest("history",function(){var y=navigator.userAgent;return-1===y.indexOf("Android 2.")&&-1===
y.indexOf("Android 4.0")||-1===y.indexOf("Mobile Safari")||-1!==y.indexOf("Chrome")||-1!==y.indexOf("Windows Phone")||"file:"===location.protocol?l.history&&"pushState"in l.history:!1});var t=c.documentElement,B="svg"===t.nodeName.toLowerCase(),G=q._config.usePrefixes?["moz","o","ms","webkit"]:[];q._domPrefixes=G;var J=q._config.usePrefixes?["Moz","O","ms","Webkit"]:[];q._cssomPrefixes=J;var n={elem:k("modernizr")};v._q.push(function(){delete n.elem});var r={style:n.elem.style};v._q.unshift(function(){delete r.style});
q.testProp=function(y,C,D){return p([y],d,C,D)};q.testAllProps=u;q.testAllProps=x;v.addTest("flexbox",x("flexBasis","1px",!0));v.addTest("csstransitions",x("transition","all",!0));(function(){var y,C;for(C in A)if(A.hasOwnProperty(C)){var D=[];var F=A[C];if(F.name&&(D.push(F.name.toLowerCase()),F.options&&F.options.aliases&&F.options.aliases.length))for(y=0;y<F.options.aliases.length;y++)D.push(F.options.aliases[y].toLowerCase());F="function"===typeof F.fn?F.fn():F.fn;for(y=0;y<D.length;y++){var H=
D[y];H=H.split(".");1===H.length?v[H[0]]=F:(!v[H[0]]||v[H[0]]instanceof Boolean||(v[H[0]]=new Boolean(v[H[0]])),v[H[0]][H[1]]=F);w.push((F?"":"no-")+H.join("-"))}}})();(function(y){var C=t.className,D=v._config.classPrefix||"";B&&(C=C.baseVal);v._config.enableJSClass&&(C=C.replace(new RegExp("(^|\\s)"+D+"no-js(\\s|$)"),"$1"+D+"js$2"));v._config.enableClasses&&(C+=" "+D+y.join(" "+D),B?t.className.baseVal=C:t.className=C)})(w);delete q.addTest;delete q.addAsyncTest;for(q=0;q<v._q.length;q++)v._q[q]();
l.Modernizr=v})(window,document);
gx.spa=function(l){var c=/<head[^>]*>([\s\S]*?)<\/head>/i,d=/(<body[^>]*>[\s\S]*?<\/body>)/i,k=/<title[^>]*>([\s\S]*?)<\/title>/i,a=/#.*/,b=/#/,f=!1,g=!1,m=window.location.href,p=!0,u={},x,w;"state"in window.history&&(p=!1);gx.wpo(function(){gx.pO.fullAjax&&(gx.cache.exceptionsRegEx=/messages\..+\.js/)},this);var A=function(){f||g||this.notify("onnavigatecomplete")};return{timeout:-1,setTimeout:function(q){this.timeout=q},isSameApp:function(q,v){var t=q.port===v.port;t=(t=t||""===q.port&&"http:"===
q.protocol&&"80"===v.port)||""===q.port&&"https:"===q.protocol&&"443"===v.port;return q.protocol===v.protocol&&q.hostname===v.hostname&&t},handleClick:function(q){var v=this.getTarget(q),t;if(v&&"A"===v.tagName.toUpperCase()&&null!==v.getAttribute("href")&&void 0!==v.getAttribute("href")&&!(v.target&&("_blank"==v.target||"_parent"==v.target&&window.parent!=window||"_top"==v.target&&window.top!=window||"_"!=v.target.substr(0,1)&&window.name!=v.target)||1<q.which||q.metaKey||q.ctrlKey)){var B=this.parseUrl(v.href);
if(this.isSameApp(location,B)){var G="/"==B.pathname.charAt(0)?B.pathname:"/"+B.pathname;if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))===G.substring(0,G.lastIndexOf("/"))&&!(0<=B.href.search(b)&&B.href.replace(a,"")===location.href.replace(a,""))&&""!==v.getAttribute("href")&&0!==v.href.indexOf("javascript:"))if(this.ignoreClick)this.ignoreClick=!1;else{B=l(v);for(t in u)if(u.hasOwnProperty(t)&&B.is(t))return;this.navigate({url:v.href,push:!0,scrollTo:!0,direction:"forward"});
q.preventDefault()}}}},redirect:function(q,v){delete gx.referrer;v=void 0===v||v;var t=this.parseUrl(q),B="/"==t.pathname.charAt(0)?t.pathname:"/"+t.pathname;this.isSameApp(location,t)?location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==B.substring(0,B.lastIndexOf("/"))?window.location=q:(gx.referrer=location.href,this.navigate({url:q,push:v,scrollTo:!0,direction:"forward"})):window.location=q},setLocation:function(q){this.setStopNavigating(q);window.location=q},canNavigate:function(){return!f&&
!g},isNavigating:function(){return!this.canNavigate()},isNavigatingRaw:function(){return f},cancelNavigating:function(){f=!1},setStopNavigating:function(q){f=!1;this.notify("onnavigate",[q])},navigate:function(q){var v,t,B=q.url,G=!1;this.canNavigate()?(f=!0,this.notify("onbeforenavigate",[B]),(t=this.request)&&4>t.readyState&&(t.onreadystatechange=gx.emptyFn,gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+t.readyState),t.abort()),this.request=t=gx.http.doCall({method:"GET",
url:B,handler:function(J,n,r){J=r.getResponseHeader("X-SPA-REDIRECT-URL");var y=r.getResponseHeader("X-GXOBJECT");G||(v&&clearTimeout(v),530==r.status?this.setLocation(B):J?(this.setStopNavigating(J),setTimeout(gx.spa.redirect.closure(gx.spa,[J]),100)):(q.push&&0<t.readyState&&y?(this.updateState(),this.state=this.createState(q),window.history.pushState(null,"",t.responseURL||B)):gx.O.endFeedback(!1),this.processResponse.call(this,n,r,q)))},beforeSend:function(J){gx.spa.isNavigatingRaw()||gx.O.startFeedback(!1);
this.notify("onbeforesend",[this.createEvent(J,B),"X-SPA-REQUEST","X-SPA-MP"]);0<this.timeout&&(v=setTimeout(this.timeoutHandler.closure(this,[J,B]),this.timeout));J.setRequestHeader("X-SPA-REQUEST","1")},offline:function(){v&&clearTimeout(v);G=!0;f=!1},error:function(J){J=this.createEvent(J,B);J.cancel=!0;this.notify("onerror",[J]);J.cancel&&this.setLocation(B)},ajaxHeader:!1,avoidCache:!1,handleAllStatusCodes:!0,obj:this}),this.notify("onnavigatestart",[B])):this.setLocation(B)},processResponse:function(q,
v,t){try{var B=t.url;var G=this.parseUrl(B).hash,J=t.direction,n=v.status,r=v.getResponseHeader("X-GXOBJECT"),y=v.getResponseHeader("X-SPA-RETURN"),C=v.getResponseHeader("X-SPA-RETURN-MD"),D=this.createEvent(v,B),F=gx.pO.MasterPage,H=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",L=v.getResponseHeader("X-SPA-MP")||"",N=!(""===H||H.toLowerCase()!=L.toLowerCase()),O=this.getContentPlaceholder();if(null!==y)gx.fn.closeWindowServerScript(y,C,!0);else if(500===n)window.history.pushState(null,"",B),this.cancelNavigating(),
gx.dom.writeError(v.responseText,gx.getMessage("GXM_runtimeappsrv"),n);else if(r){this.notify("onbeforeprocessresponse",[D,q,r,H,L,N]);var Q=this.extractContents(v,!N),W=N?O.firstChild:document.body,V=Q.body;if(Q.body){this.state=this.createState(t);t.push&&window.history.replaceState(this.state,"",v.responseURL||B);Q.title&&(document.title=Q.title);this.notify("onbeforecontentreplace",[v,B,Q]);var Z=gx.getThemeElement();Z&&Z.href&&gx.cache.removeRemoteFile(gx.getThemeElement().href);gx.dom.replaceWithFx(W,
V,{domRemove:!1,domAdd:N,enteringClass:"forward"==J?"entering":"leaving",leavingClass:"forward"==J?"leaving":"entering",enterDurationClass:"forward"==J?"enter-fx-duration":"leave-fx-duration",leaveDurationClass:"forward"==J?"leave-fx-duration":"enter-fx-duration",transitionTimeout:200,transitionEndCallback:function(){V=this.replaceContentCallback(v,B,G,q,O,Q,W,V,t,r,F,H,L,N);N||gx.html.processCode(Q.rawHtml||Q.head.innerHTML+Q.body.innerHTML,!1,this.processCodeCallback.closure(this,[v,B,G,q,O,Q,W,
V,t,r,F,H,L,N]),null,null,!1,!0);g=!1;this.notify("ontransitionend",[D,F,H,L,N]);this.recoverScrollPosition(t);return V}.closure(this),beforeTransitionStart:function(ba){g=!0;if(N)return gx.html.processCode(q,!1,function(){ba&&ba();this.processCodeCallback(v,B,G,q,O,Q,W,V,t,r,F,H,L,N)}.closure(this),null,null,!1),!0}.closure(this)})}else this.setLocation(B)}else this.setLocation(B)}catch(ba){gx.dbg.logEx(ba,"gxspa.js","processResponse"),this.setLocation(B)}},replaceContentCallback:function(q,v,t,
B,G,J,n,r,y,C,D,F,H,L){if(L)n.parentNode&&(this.dettachContent(n),n.parentNode.removeChild(n));else{if(gx.util.browser.isWebkit()||gx.util.browser.isFirefox()){this.dettachContent(document.body);l(document.body).remove();var N=document.createElement("body");q=l(r).prop("attributes");l.each(q,function(){l(N).attr(this.name,this.value)});document.documentElement.appendChild(N);N.innerHTML=r.innerHTML;r=N}else document.body=r,r=document.body;l([].concat($jscomp.arrayFromIterable(document.head.childNodes))).filter("meta[name]").remove();
l([].concat($jscomp.arrayFromIterable(J.head.childNodes)).reverse()).filter("meta[name]").each(function(O,Q){document.head.insertBefore(Q,document.head.firstChild)})}return r},filterTest:function(q){return $filter(this,q,1<arguments.length?arguments[1]:void 0)},processCodeCallback:function(q,v,t,B,G,J,n,r,y,C,D,F,H,L){q=this.createEvent(q,v);try{this.notify("oncontentreplace",[q,B,J,C,D,F,H,L])}catch(N){gx.dbg.logEx(N,"gxspa.js","processCodeCallback"),this.setLocation(v)}B=!0;y.scrollTo&&(window.scrollTo(0,
0),B=!1);y.push&&window._gaq&&_gaq.push(["_trackPageview"]);y.push&&window.ga&&window.ga("send","pageview",location.pathname);""!==t&&(J=this.parseUrl(v),J.hash=t,window.history.replaceState(this.state,"",J.href),t=gx.dom.el(J.hash))&&(t.scrollIntoView(!0),B=!1);this.setStopNavigating(v);B&&this.recoverScrollPosition(y)},timeoutHandler:function(q,v){var t=this.createEvent(q,v);t.cancel=!0;this.notify("ontimeout",[t]);t.cancel&&(q.abort(),gx.dbg.logMsg("Request cancelled - timeout expired: "+q.readyState),
this.setLocation(v))},getContentPlaceholder:function(){return gx.dom.byClass("gx-content-placeholder")[0]},extractContents:function(q,v){var t=document.createElement("div"),B={},G,J;if(v){t=document.createElement("iframe");t.src="about:blank";t.style.display="none";document.body.appendChild(t);v=q.responseText.match(c);1<v.length&&(G=v[1]);v=q.responseText.match(d);0<v.length&&(J=v[0]);v=q.responseText.match(k);1<v.length&&(B.title=v[1]);t.contentDocument&&null==t.contentDocument.body&&t.contentDocument.write("<body></body>");
t.contentDocument.body.outerHTML=J;var n=t.contentDocument.head;n.innerHTML=G;l("head script").each(function(r,y){l(n).find("script").each(function(C,D){null===y.getAttribute("data-gx-external-script")?y.src==D.src&&n.removeChild(D):l(y).remove()})});B.body=t.contentDocument.body;B.head=n;B.rawHtml=n.innerHTML+J}else{gx.html.setInnerHtml(t,q.responseText,!1,!1,!1);q=gx.dom.byClass("gx-content-placeholder","div",t);if(0===q.length)return B;B.body=q[0].firstChild;q=gx.dom.byTag("title",t);0<q.length&&
(B.title=q[0].innerText||q[0].textContent)}return B},handlePopState:function(q){if(q.state){q=q.state;this.getContentPlaceholder();if(q&&"gx-spa"==q.source){if(p&&m==q.url||this.state.url===q.url)return;this.navigate({id:q.id,url:q.url,push:!1,scrollPosition:q.scrollPosition,direction:this.state.id<q.id?"forward":"back"})}gx.popup.ispopup()&&gx.fn.cancelWindow()}},parseUrl:function(q){var v=document.createElement("a");v.href=q;return v},createEvent:function(q,v){return{req:q,url:v,cancel:!1}},addIgnoredSelector:function(q){u[q]=
!0},removeIgnoredSelector:function(q){delete u[q]},recoverScrollPosition:function(q){var v=q.scrollPosition;this.canNavigate()&&!q.scrollTo&&v&&window.scrollTo(v.x,v.y)},dettachContent:function(q){var v=gx.dom.getActiveElement();v&&l.contains(q,v)&&gx.dom.purgeElement(v)},updateState:function(){var q=this.state;q.url=location.href;q.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(q,"",q.url)},createState:function(q){q=q||{};return{id:q.id||(new Date).getTime(),source:"gx-spa",
url:q.url}},getTarget:function(q){return q.target&&"A"==q.target.tagName?q.target:gx.dom.findParentByTagName(q.target,"A")},applyConfig:function(q){if(q&&q.listeners)for(var v in q.listeners){var t=q.listeners[v];"function"==typeof t&&this.addObserver(v,q.listeners.scope||this,t)}},setBodyClass:function(){var q="Form",v=document.body;v.className&&(q=v.className.split(" ")[0]);gx.dom.hasClass(v,q+"-fx")||gx.dom.addClass(v,q+"-fx")},isSupported:function(){return gx.util.browser.isIE()&&!gx.util.browser.isEdge()?
!1:gx.pO&&gx.pO.fullAjax&&Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(q){this.isSupported()&&!this.started&&(this.applyConfig(q),x=this.handleClick.closure(this),w=this.handlePopState.closure(this),document.addEventListener("click",x,!1),window.addEventListener("popstate",w,!1),this.state=this.createState({url:location.href}),window.history.replaceState(this.state,document.title),this.setBodyClass(),this.started=!0,this.addObserver("onnavigate",this,A),
this.addObserver("ontransitionend",this,A))},stop:function(){this.started&&(document.removeEventListener("click",x,!1),window.removeEventListener("popstate",w,!1),this.started=!1)}}}(gx.$);gx.lang.apply(gx.spa,new gx.util.Observable);gx.core={};
gx.core.analytics=function(l){var c=function(){console.log("Google Analytics v4- GA not enabled on this webpage")};return{supported:function(){return new Promise(function(d,k){gx.wga(function(){return d()});gx.lang.doCallTimeout(k,window,[],6E3)})},trackView:function(d){this.supported().then(function(){return window.gtag("event","pageview",d)},c)},trackEvent:function(d,k,a,b){this.supported().then(function(){window.gtag("event",k,{hitType:"event",eventCategory:d,eventAction:k,eventLabel:a,eventValue:b})},
c)},trackPurchase:function(d){var k=function(a,b,f,g,m){if(g&&gx.lang.emptyObject(f)&&null==m)return console.log("Google Analytics ECommerce - Warning: Property value must be assigned: ",b),!1;gx.lang.emptyObject(f)&&g&&(f=m);return gx.lang.emptyObject(f)?!1:(a[b]=f,!0)};this.supported().then(function(){var a={};if(k(a,"id",d.TransactionId,!0))for(k(a,"affiliation",d.Affiliation),k(a,"revenue",d.Revenue),k(a,"shipping",d.Shipping),k(a,"tax",d.Tax),k(a,"currency",d.CurrencyCode),k(a,"eventCategory",
"ecommerce:addTransaction"),window.gtag("event",a.eventCategory,a),a=0;a<d.Items.length;a++){var b=d.Items[a],f={};k(f,"id",d.TransactionId,!0)&&k(f,"name",b.Name,!0)&&(k(f,"sku",b.Id),k(f,"category",b.Category),k(f,"price",b.Price),k(f,"quantity",b.Quantity),k(f,"currency",b.CurrencyCode),k(f,"eventCategory","ecommerce:addItem"),window.gtag("event",f.eventCategory,f))}},c)},setUserId:function(d){this.supported().then(function(){return window.gtag("set","userId",d)},c)}}}(gx.$);
gx.core.audio=function(l){var c,d=[],k=[];return{supported:function(){return!(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion())},getSoundVar:function(a){return 2==a?k:d[a]},playBackground:function(a){this.play(a,1)},play:function(a,b){c=!0;2!=b&&this.stop(b);3==b&&(this.stop(2),this.pauseSound(this.getSoundVar(1)));2==b&&this.stop(3);this.playSound(b,a).always(function(){3==b&&this.resumeSound(this.getSoundVar(1))}.closure(this,[]))},playSound:function(a,b){var f=l.Deferred();this.supported()?
(b=new Howl({src:[b],html5:!0,onplay:function(){},onend:function(){f.resolve()},onstop:function(){f.resolve()},onpause:function(){f.resolve()}}),b.play()):(b=l("<bgsound/>").attr({id:"gxIE7AudioSound_"+a,loop:"0",src:b}),l("body").append(b));d[a]=b;2==a&&k.push(b);return f.promise()},stop:function(a){if(a){var b=this.getSoundVar(a);this.stopSound(b);d[a]=null}else this.stopSound(this.getSoundVar(3)),this.stopSound(this.getSoundVar(2)),this.stopSound(this.getSoundVar(1))},stopSound:function(a){var b=
this.supported();a=gx.lang.isArray(a)?a:[a];l.map(a,function(f,g){f=a[g];!b&&f&&(l(f).attr("src",""),l(f).remove(),f=void 0);f&&f.stop&&f.stop()})},pauseSound:function(a){this.supported()&&a&&a.pause&&a.pause()},resumeSound:function(a){this.supported()&&a&&a.play&&a.play()},isPlaying:function(a){if(this.supported())return a?this.isPlaying_impl(this.getSoundVar(a)):this.isPlaying_impl(this.getSoundVar(3))||this.isPlaying_impl(this.getSoundVar(2))||this.isPlaying_impl(this.getSoundVar(1))},isPlaying_impl:function(a){var b,
f=!1;a=gx.lang.isArray(a)?a:[a];for(var g=0;g<a.length;g++)(b=a[g])&&(f=f||b.playing())},_deinit:function(){c&&(this.stop(3),this.stop(2));c=!1}}}(gx.$);gx.core.pwa=function(l){var c;window.addEventListener("beforeinstallprompt",function(d){c=d;c.userChoice.then(function(k){gx.fx.obs.notify("gx.pwa.onpromptchoice",[k.outcome]);c=null});gx.fx.obs.notify("gx.pwa.onbeforeinstallprompt")});return{showPrompt:function(){c&&c.prompt()}}}(gx.$);
gx.core.ds=function(l){return{setOption:function(c,d){document.documentElement.setAttribute("gx-data-"+c,d)},clearOption:function(c){document.documentElement.removeAttribute("gx-data-"+c)}}}(gx.$);
gx.core.clientSocket=function(l){var c,d,k=0;window.addEventListener("unload",function(g){d&&d.close()});var a=function(g){gx.fx.obs.notify("gx.core.clientsocket.onmessagereceived",[g])},b=function(){k=1;gx.fx.obs.notify("gx.core.clientsocket.onconnect",[void 0])},f=function(){k=0;gx.fx.obs.notify("gx.core.clientsocket.onconnectfailed",[void 0])};return{open:function(g){if(1===k)gx.dbg.logDebug("gx.core.clientSocket - WebSocket already connected");else{c="clientSocket_"+g;try{if(this.attachHandlers(c),
g)d=new gx.webSocket({wsURL:g,namespace:c});else{var m=gx.fn.getHidden("GX_WEBSOCKET_PORT"),p=gx.basePath&&0<gx.basePath.length?"/":"";d=new gx.webSocket({port:m,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),wsProtocol:"https:"===location.protocol?"wss://":"ws://",host:m?location.hostname+":"+m+"/":location.host+"/",resourceUrl:p+(gx.gen.isDotNet()?"gxwebsocket.svc?":"gxwebsocket?"),basePath:gx.basePath,namespace:c})}}catch(u){gx.dbg.logEx(u,"genexus-core.js","Could not initialize WebSocket Client")}}},
close:function(){this.detachHandlers(c);try{d&&d.close()}catch(g){}k=0},send:function(g){1===k?d.send(g):gx.dbg.logDebug("gx.core.clientSocket - WebSocket is disconnected")},attachHandlers:function(g){gx.fx.obs.addObserver("gx.ws.onMessage."+g,this,a,{single:!1,doNotDelete:gx.O.IsMasterPage});gx.fx.obs.addObserver("gx.ws.onOpen."+g,this,b,{single:!1,doNotDelete:gx.O.IsMasterPage});gx.fx.obs.addObserver("gx.ws.onError."+g,this,f,{single:!1,doNotDelete:gx.O.IsMasterPage})},detachHandlers:function(g){gx.fx.obs.deleteObserver("gx.ws.onMessage."+
g,this,a);gx.fx.obs.deleteObserver("gx.ws.onOpen."+g,this,b);gx.fx.obs.deleteObserver("gx.ws.onError."+g,this,f)}}}(gx.$);
(function(l){var c=/(gx-form-item|col-(?:xs|sm|md|lg)-\d{1,2})/g,d=function(q){gx.plugdesign.registerTemplate(new gx.plugdesign.Template(q))},k=function(q,v){q=l(q).parent().find("span");gx.lang.gxBoolean(v)?q.parent("p").hide():(q.removeClass("form-control"),v=q.parent("p"),0===v.length?gx.plugdesign.applyTemplateOnElement("readonly-atts-vars",q[0],{checkInclusion:!0}):v.show())},a=function(q,v){var t=l(".gx-form-group[data-gx-for='"+gx.dom.id(q)+"']");0===t.length&&(t=l(q).parents("div.gx-attribute").first());
gx.lang.gxBoolean(v)?t.show():t.hide()},b=function(q,v){v=v.trim();q=gx.html.getFieldLabel(q);v=v.split(" ").join("Label ")+(v?"Label":"");if(q){var t=(t=q.className.match(c))?t.join(" ")||"":"";v=["gx-label",t,v,"control-label"].join(" ");q.className!==v&&(q.className=v)}};d({name:"labels",selector:"div.gx-form-group:has(label.gx-label:not([data-gx-sr-only]))",excluded:"div:has(.gx_usercontrol)",setContext:function(q,v){v=l(v).find("label.gx-label").addClass("control-label");q.labelEl=v[0];return q},
listeners:{control:function(q){return l(q.labelEl).attr("for")},after:{Class:b}}});d({name:"atts-vars",selector:".gx-attribute > input, .gx-attribute > select, .gx-attribute > textarea, .gx-attribute > img:first-child",initialize:function(q){(q=l("#"+q.id)[0])&&b(q,q.className.replace("form-control",""))},listeners:{control:function(q){return q.id},after:{Enabled:k,Visible:a}}});d({name:"readonly-atts-vars",selector:'.gx-attribute span[data-gx-readonly],span[class^="Readonly"]:not(:has(input[type="radio"], input[type="checkbox"]))',
template:'<p class="form-control-static">{{{outerHTML}}}</p>',outerHTML:!0,listeners:{control:function(q){return q.id},after:{Visible:function(q,v){var t=l(q).parent("p");gx.lang.gxBoolean(v)?t.show():t.hide();a(q,v)}}}});d({name:"password-atts-vars",selector:'.gx-attribute input[type="password"][data-gx-password-reveal]',template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn gx-pwd-reveal-btn"><button class="btn btn-default" type="button" title="'+gx.getMessage("GXM_revealpassword")+
'"><span class="glyphicon glyphicon-eye-open"></span></button></span></div>',setContext:function(q,v){q.inputEl=v;return q},initialize:function(q){var v=l("#"+q.id),t=l("#"+q.id)[0];v.next().on("click",function(){gx.fn.setCtrlProperty(t.id,"Ispassword","password"!=t.type)})},listeners:{control:function(q){return q.id},after:{Visible:function(q,v){gx.lang.gxBoolean(v)&&gx.fn.isVisible(q,0)?l(q).next().show():l(q).next().hide();a(q,v)},Enabled:function(q,v){gx.lang.gxBoolean(v)?l(q).next().children().first().prop("disabled",
!1):l(q).next().children().first().prop("disabled",!0)},Ispassword:function(q,v){l("button",l(q).next()).attr("title",gx.getMessage(gx.lang.gxBoolean(v)?"GXM_revealpassword":"GXM_hidepassword")).children().first().toggleClass("glyphicon-eye-open").toggleClass("glyphicon-eye-close")}}}});d({name:"checkbox",selector:'.gx-attribute > input[type="checkbox"], .gx-attribute span > input[type="checkbox"]',setContext:function(q,v){q.id=l(v)[0].id;return q},initialize:function(q){q=l("#"+q.id).get(0);l(q).closest("span").addClass("gx-checkbox-wrapper")},
listeners:{control:function(q){return q.id},after:{Visible:function(q,v){var t=l(q).parent().closest(".gx-checkbox-wrapper");gx.lang.gxBoolean(v)?(t.show(),t.children().show()):t.hide();a(q,v)}}}});d({name:"usercontrol",onDemandInvoke:!0,selector:".gx_usercontrol",setContext:function(q,v){q.id=l(v)[0].id;return q},listeners:{control:function(q){return q.id},after:{Visible:a}}});var f=function(q,v,t){q.visible=v;var B=l(q).parent().find(".input-group-btn");gx.lang.gxBoolean(v)&&gx.fn.isVisible(q,0)?
(this.enabled||void 0===this.enabled)&&B.show():B.hide();t||a(q,v)};d({name:"datepicker",selector:".dp_container:has(img):has(input)",template:'<div class="dp_container {{alignClass}}" id="{{datePickerCt.id}}"><div class="input-group">{{$inputEl$}}{{$spaneEl$}}<span class="input-group-btn"><a class="btn btn-default">{{$imgEl$}}</a></span></div></div>',outerHTML:!0,setContext:function(q,v){var t=l(v),B=t.attr("data-align");q.datePickerCt=v;q.inputEl=t.find("input")[0];q.imgEl=t.find("img")[0];q.inputElId=
q.inputEl.id;q.alignClass=B?"pull-"+B:"";q.nativeEl=t.find("#"+q.inputEl.id+"-picker")[0];v=l("#span_"+q.inputEl.id);0<v.length&&(t=v.parent("p")[0],q.spaneEl=t?t:v,t&&l(t).remove());return q},initialize:function(q){var v=l("#"+q.inputElId),t=v.parent().closest(".dp_container");q.nativeEl&&t.append(q.nativeEl);t.find("a").on("click",function(G){try{if("IMG"!=G.target.nodeName)return t.find("img")[0].click(),!1}catch(J){return!1}});var B=gx.fn.isVisible(v[0],0);q=l("#span_"+q.inputEl.id);0<q.length&&
(B=B||gx.fn.isVisible(q[0],0));f.call(this,v[0],B,!0)},listeners:{control:function(q){return q.inputEl.id},after:{Enabled:function(q,v){q.enabled=gx.lang.gxBoolean(v);var t=l(q).parent().find(".input-group-btn");if(gx.lang.gxBoolean(v)){var B=this.visible||gx.fn.isVisible(q);(B||void 0===B)&&t.show()}else t.hide();k(q,v)},Visible:f}}});var g=function(q){return l(q).parent().closest("span")},m=function(q){q.find(":checked").parent("label").button("toggle")},p=function(q,v){var t=q.find("label");gx.lang.gxBoolean(v)?
(t.prop("disabled",!1),t.removeClass("disabled"),q.find("input, label").css("pointer-events","")):(t.prop("disabled",!0),q.find("input, label").css("pointer-events","none"),t.addClass("disabled"))};d({name:"radio-button",selector:".gx-radio-button:not(.gx-tpl-ignore) label",setContext:function(q,v){var t=g(v);q.name=l(v).children("input").attr("name");q.spanEl=t;l(t).prop("initialized")||(t.children("label").addClass("gx-radio-label btn btn-default"),v=l(v).children().prop("disabled"),0===t.children('[class*="active"]').length&&
m(t),p(t,!(!0===v||"disabled"===v)),t.find("script").remove(),t.attr("data-toggle","buttons"),v=t.hasClass("gx-radio-button-vertical")?"-vertical":"",t.addClass("btn-group"+v).removeClass("gx-radio-button-vertical").css("vertical-align","baseline"));return q},initialize:function(q){l(q.spanEl).prop("initialized")||(q.spanEl.prop("initialized",!0),q.spanEl.children("label").on("click",function(){var v=l(this).children("input");v.trigger("focus");v.attr("checked","");v.prop("checked",!0);gx.evt.onchange(v.get(0))}))},
listeners:{control:function(q){return q.name},after:{Visible:a,Enabled:function(q,v){p(g(q),v)},Value:function(q){m(g(q))}}}});d({name:"prompt",selector:function(q){return l('a:has(img[id*="PROMPT"])',q).prevUntil("","input, select")},template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn">{{$promptEl$}}</span></div>',setContext:function(q,v){q.inputEl=v;q.promptEl=l(v).nextUntil("",'a:has(img[id*="PROMPT"])').addClass("btn btn-default");return q},listeners:{control:function(q){return q.inputEl.id},
before:{Visible:function(q,v){q=l(q).parent();gx.lang.gxBoolean(v)?q.show():q.hide()},Enabled:function(q,v){q=l(q).parent().find(".input-group-btn");gx.lang.gxBoolean(v)?q.show():q.hide()}}}});d({name:"prompt-trigger",selector:'img[id*="PROMPT"].gx-prompt',setContext:function(q,v){q.imgEl=v;return q},listeners:{control:function(q){return q.imgEl.id},before:{Enabled:function(q,v){q=l(q).closest(".input-group-btn");gx.lang.gxBoolean(v)?q.show():q.hide()}}}});var u=function(q,v){q=l(q).parent();q=q.add(q.find("img"));
gx.lang.gxBoolean(v)?q.show():q.hide()};d({name:"geolocation",selector:"input + img.GeoLocOption",template:'<div class="input-group"><div id="{{inputEl.id}}_hook"></div><span class="input-group-btn"><a class="btn btn-default"><div id="{{inputEl.id}}_trigger_hook"></div></a></span></div>',setContext:function(q,v){q.inputEl=l(v).prev()[0];q.triggerEl=l(v)[0];return q},initialize:function(q){gx.evt.attach(q.el,"click",function(){gx.geolocation.getMyPosition(this)});l("#"+q.inputEl.id+"_hook").replaceWith(q.inputEl);
l("#"+q.inputEl.id+"_trigger_hook").replaceWith(q.triggerEl);u.call(this,q.inputEl,gx.fn.isVisible(q.inputEl,0))},listeners:{control:function(q){return q.inputEl.id},before:{Visible:u,Enabled:function(q,v){q=l(q).parent().find(".input-group-btn");gx.lang.gxBoolean(v)?q.show():q.hide()}}}});d({name:"multimedia-upload",selector:".gx-multimedia-upload .fields-ct",template:'<div class="row"><div class="col-sm-4"><div class="row"><div class="col-sm-12">{{$fileOptionLbl$}}</div><div class="col-sm-12">{{$uriOptionLbl$}}</div></div></div><div class="col-sm-8">{{$uriField$}}{{$fileField$}}</div></div><div class="row"><div class="col-sm-12">{{$button$}}</div></div>',
applyTo:"inner",setContext:function(q,v){v=l(v).parent().closest(".gx-multimedia-upload")[0];var t=gx.html.multimediaUpload.getElements(v);t.fileOptionLbl=t.fileOption.parentNode;t.uriOptionLbl=t.uriOption.parentNode;gx.lang.apply(q,t);q.container=v;return q},initialize:function(q){l(q.button).addClass("btn btn-default Button");l(q.uriField).addClass("form-control")},listeners:{control:function(q){return gx.html.multimediaUpload.CtrlId(q.container.id)},after:{Visible:function(q,v){a(q,v,7)}}}});d({name:"navbar",
selector:".gx-navbar",setContext:function(q,v){q.toggleBtn=l(v).find(".gx-navbar-toggle");q.navBarInner=l(v).find(".gx-navbar-inner");return q},initialize:function(q){q.toggleBtn.attr("data-target","#"+q.navBarInner.attr("id"))}});gx.spa.addObserver("onnavigatecomplete",window,function(){var q=l(".navbar-collapse");q.collapse&&q.collapse("hide")});var x=function(q){q.anchor.get(0).href==location.href?q.anchor.parent().addClass("active"):q.anchor.parent().removeClass("active")};d({name:"navbar-textblock-link",
selector:"a.gx-navbar-textblock, .gx-navbar-textblock:has(a)",template:"{{$anchor$}}",setContext:function(q,v){var t=["id","class","style",gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,"title"];v=l(v);var B;q.anchor=v.children("a");0===q.anchor.length&&v.is("a")&&(q.anchor=v);for(B=0;B<t.length;B++)q.anchor.attr(t[B],v.attr(t[B]));return q},reDraw:x,initialize:x,listeners:{control:function(q){return q.id},before:{Caption:function(q,v){l(q).text(v);return!0},Link:function(q,
v){l(q).attr("href",v);return!0}}}});d({name:"navbar-textblock-text",selector:"span.gx-navbar-textblock:not(:has(a))",initialize:function(q){l(q.el).addClass("navbar-text")},listeners:{control:function(q){return q.id},after:{Link:function(q,v){var t=l(q);v&&t.hasClass("navbar-text")&&(t.removeClass("navbar-text"),gx.plugdesign.applyTemplateOnElement("navbar-textblock-link",q))}}}});d({name:"errorviewer",selector:".gx_ev div",initialize:function(q){q=l(q.el);var v=q.parent(".gx_ev"),t=v.css("position");
if("fixed"===t||"absolute"===t)v[0].effect&&v[0].effect.end(),q.addClass("alert alert-dismissible fade in").attr("style","").attr("role","alert").prepend(l('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'))}});d({name:"textarea-auto-expand",selector:".gx-attribute > textarea[data-gx-text-maxlines]",setContext:function(q,v){q.el=l(v);return q},initialize:function(q){var v=q.el;q=v[0];var t=l(window),B=parseInt(v.attr("rows"),
10),G=parseInt(v.attr("data-gx-text-maxlines"),10);v.css("overflow-x","hidden");var J=function(n,r,y){r+=y;n.attr("rows",r);return r};v=function(){for(var n=t.scrollTop(),r=parseInt(l(this).attr("rows"),10),y=l(this);r>B&&this.scrollHeight>=this.clientHeight;)r=J(y,r,-1);for(;""!==l(this).val()&&r<G&&this.scrollHeight>this.clientHeight;)r=J(y,r,1);t.scrollTop(n)};gx.evt.attach(q,["input","keyup"],v.closure(q,[]));gx.evt.on_ready(q,v.closure(q,[]))}});var w=function(q){q=q.get(0);return"on"===gx.dom.getComputedStyle(q).getPropertyValue("--gx-image-scaling").trim()},
A=function(q){var v=q;w(q)&&(0<q.parent("a").length&&(v=q.parent("a")),v.parent("div[data-align-inner]").parent().parent().attr("data-align-image",""))};d({name:"image",selector:"img[data-gx-image]",setContext:function(q,v){q.el=l(v);return q},initialize:function(q){q=q.el;var v=q.get(0).currentSrc||q.attr("src");v&&w(q)&&q.css("background-image","url("+v+")");A(q)},listeners:{control:function(q){return q.id},after:{Bitmap:function(q,v){q=l(q);v&&w(q)?q.css("background-image","url("+v+")"):q.css("background-image",
"none")},Class:function(q){var v=l(q);q.src&&w(v)?v.css("background-image","url("+q.src+")"):v.css("background-image","none");A(v)}}}})})(gx.$);
gx.ui=function(l){return{grid:function(){this.gridContainer=null;this.firstTime=!0;this.loadingCollection=this.autoRefreshing=!1;this.properties=[];this.setContainerDelayed=function(d){this.gridContainer=d;this.DesignContainerName=this.ContainerName=gx.dom.id(d);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(d,k,a,b,f){this.refreshDynProperties();this.properties=[];for(var g=
0;g<this.rows.length;g++){this.properties[g]=[];for(var m=this.rows[g],p=0;p<this.columns.length;p++){var u=this.columns[p],x=m.gxProps[u.index],w=u.gxControl;w.grid=this.ownerGrid;w.row=m;w.gridId=this.gxId;w.gridRow=m.gxId;a?w.value=x[0]:w.setProperties.apply(w,x);this.setRenderProperties(m.gxRenderProps[p],w);!w.enabled&&w.type<=gx.html.controls.types.checkBox&&(w.cssClass=gx.fn.prefixROClass(w.cssClass));this.properties[g][p]=gx.lang.clone(w);this.addC2V(u,this.properties[g][p])}}this.firstTime=
d;this.autoRefreshing=k?!0:!1;this.loadingCollection=a?!0:!1;this.show&&(this.setC2ShowFunction(function(A){A.show();gx.lang.requestAnimationFrame(b)}),this.autoRefreshing&&(this.show(),b()));f();this.autoRefreshing=!1};this.addC2V=function(d,k){this.addC2VFunction(function(a){if(""!==d.gxAttName){var b=a.ParentObject.getValidStruct(d.gxId);b&&(a.ParentObject[b.gxvar]=k.value);gx.fn.setHidden(k.id,k.value)}})};this.setRenderProperties=function(d,k){if(d)for(var a in d)k[a]=d[a]};this.selectRow=function(d){if(d=
this.rows[d])this.instanciateSelectionVars(d.gxId),this.instanciateSelectedRow(d)};this.getEventRow=function(){return gx.lang.emptyObject(this.GridRow)?"0001":this.GridRow};this.executeEvent=function(d,k){if(d<this.columns.length&&k<this.rows.length)if(d=this.properties[k][d],k=gx.html.controls.eventJSCode(d.jsScrCode,d.eventName,d.jsDynCode,d.grid,d.row),""!==k)gx.lang.emptyObject(d.usrOnclick)||(k="if("+d.usrOnclick+") { "+k+" }"),d=new Function(k),"function"==typeof d&&d();else if(d.clickEvent){k=
this.parentGxObject;var a=d.row.gxId;this.ownerGrid.instanciateRow(a);k[d.clickEvent].call(k,a)}};this.executeIsValid=function(d,k){if(d<this.columns.length&&k<this.rows.length){var a=this.parentGxObject;k=this.properties[k][d];d=k.vStruct||a.GXValidFnc[k.column.gxId];k=k.row.gxId;d&&d.isvalid&&(this.ownerGrid.instanciateRow(k),a[d.isvalid].call(a))}};this.addEventHandler=function(d,k){this[d]=function(a){var b=this.isServerEvent(d);b&&a&&gx.fx.obs.addObserver("gx.onafterevent",this,a,{single:!0});
var f=gx.fn.currentGridRow(this.GridId);this.eventHandler(this.GridId,f,k);!b&&a&&a.call(this)}.closure(this)};var c={};this.requestSuggest=function(d,k,a){var b=l.Deferred();if(d<this.columns.length&&k<this.rows.length){var f=this.parentGxObject;k=this.properties[k][d];d=k.vStruct||f.GXValidFnc[k.column.gxId];k=k.row.gxId;var g=c[k+"_"+d.id];!g&&d&&d.gxsgprm&&(this.ownerGrid.instanciateRow(k),g=new gx.fx.suggestProvider(f,d.gxsgprm[1],null,d.gxsgprm[0]),c[k+"_"+d.id]=g);g?(gx.fx.updateSuggestParms(d.gxsgprm[2]),
g.requestSuggestions([],function(){b.resolve(g.values)},function(){b.reject()},a)):b.reject()}else b.reject();return b.promise()};this.executeValidate=function(d,k){if(d<this.columns.length&&k<this.rows.length){var a=this.parentGxObject;k=this.properties[k][d];d=k.vStruct||a.GXValidFnc[k.column.gxId];k=k.row.gxId;d&&d.fnc&&(this.ownerGrid.instanciateRow(k),d.fnc.call(a))}}}}}(gx.$);
gx.ui.controls=function(l){var c=function(){var d="render selectTabPageByIndex hideTabPageByIndex showTabPageByIndex getTabPageIndexByControlName getTabPageControlNameByIndex".split(" ");return{show:function(){for(var k=this.ActivePage,a=0;a<d.length;a++)this[d[a]]||console.error("Missing required method",d[a],this);this.IsPostBack?this.update&&this.update():(this.beforeRender&&this.beforeRender(),this.render(),this.ActivePageControlName&&(k=parseInt(this.getTabPageIndexByControlName(this.ActivePageControlName),
10)),k||(k=1),this.selectTabPageByIndex(k),this.tabPageSelected(k,!0,!1),this.HistoryManagement&&HistoryManager.Initialize(this),this.afterRender&&this.afterRender());this.allways&&this.allways()},destroy:function(){HistoryManager.RemoveListener(this)},tabPageSelected:function(k,a,b){this.ActivePage!==k&&(this.ActivePage=k||1,this.ActivePageControlName=this.getTabPageControlNameByIndex(k)||"",this.HistoryManagement&&!1!==b&&HistoryManager.AddHistoryPoint(this.ActivePageControlName,!0,null,!1),!a&&
this.TabChanged&&this.TabChanged())},getId:function(){return(this.ParentObject?this.ParentObject.CmpContext||"-"+this.ParentObject.ServerClass||"":"")+"-"+this.ControlName},urlListener:function(){if(!gx.grid.drawAtServer){var k=(k=0<document.location.hash.length?document.location.hash.substr(1):"")?this.getTabPageIndexByControlName(k):1;this.selectTabPageByIndex(k);this.tabPageSelected(k,!1,!1)}},SelectTab:function(k){this.selectTabPageByIndex(k);this.tabPageSelected(k,!1,void 0)},HideTab:function(k){this.hideTabPageByIndex(k)},
ShowTab:function(k){this.showTabPageByIndex(k)}}}();return{datePicker:function(d){this.$input=l("#"+d.inputId);this.$trigger=l("#"+d.triggerId);this.showInLine=d.inline;this.inputType=d.inputType;this.format=d.format;this.datePartLength=d.datePartLength;this.timePartLength=d.timePartLength;this.nativeSupport=gx.HTML5&&(gx.util.browser.isIPhone()||gx.util.browser.isIPad()||gx.util.browser.isAndroid()&&gx.util.browser.isChrome());this.afterChange=d.afterChange;this.opts=d;this.getInputType=function(){return 0<
this.timePartLength&&0===this.datePartLength?"time":0<this.datePartLength&&0===this.timePartLength?"date":"datetime-local"};this.getTimeStep=function(){return 6<this.timePartLength?1:60};this.resolveValue=function(k,a){gx.date.isNullDate(a)&&"time"!==k&&(a=new Date);if("date"==k)a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),k=a.toISOString().slice(0,10);else{a.setMinutes(a.getMinutes()-a.getTimezoneOffset());var b=0,f=19;"time"==k&&(b=11,f=60==this.getTimeStep()?16:19);k=(new gx.date.gxdate(a)).Value.toISOString().slice(b,
f)}return k};this.render=function(){if(this.nativeSupport){var k=this.$input,a=this.getInputType(),b=l("<input>");b.attr("type",a);"time"!==a&&"datetime-local"!==a||b.attr("step",this.getTimeStep());b.css("position","absolute");b.css("top","0");b.css("left","0");b.css("opacity","0");b.attr("id",k.attr("id")+"-picker");this.dtPicker=b;k.parent().append(b);b.bind("touchstart touchend mousedown mouseup",function(){return!0!==k.prop("disabled")});var f=this,g=function(m){m=m.val();var p=new gx.date.gxdate(m,
"Y4MD");m=""!==m?p.Value:gx.date.nullDate();f.afterChange&&f.afterChange(null,m,k[0],f.opts.vStruct,f.opts.gxO)};this.$trigger.on("click",function(){var m=gx.date.dateObject(k.val());gx.date.isNullDate(m)||(m=f.resolveValue(a,m),b.val(m),g(b));b.trigger("click").trigger("focus")});gx.evt.attach(b[0],"change",function(){var m=l(this);g(m)})}else this.opts.showsTime="date"!==this.opts.inputType,gx.html.onTypeAvailable("Calendar",this.installCalendar,[this.opts],0)};this.installCalendar=function(k){var a=
k.inputId,b=gx.dom.byId(a),f=l(b),g=k.inline,m=k.weeksNumbers,p=k.mondayFirst,u=k.showsTime,x=k.format;k=k.gxO;if(gx.lang.emptyObject(b)||"SELECT"!=b.nodeName)if(0===g){b=a+"_dp_trigger";if((g=gx.dom.byId(b))&&"none"!==f.css("display")&&"hidden"!==f.css("visibility")&&"none"===f.css("display")||"hidden"===f.css("visibility")||!g)b=a;f=f.parent().closest(".dp_container")[0];Calendar.setup({inputField:a,parentNode:f,showsTime:u,weekNumbers:m,mondayFirst:p,ifFormat:x,button:b,onSelect:gx.fn.datePickerChanged,
align:"Bl",singleClick:!0,displayRight:!1,gxO:k})}else gx.lang.emptyObject(b)||f.css("display","none"),Calendar.setup({inputField:a,showsTime:u,weekNumbers:m,mondayFirst:p,ifFormat:x,flat:a+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:!0,gxO:k})}},actionGroup:function(){return{init:function(){0<l("[data-gx-base-lib='none']").length&&gx.fx.obs.addObserver("gx.onclick",this,function(d){d=d.event;var k=d.target;if(l(k).is(".gx-navbar .dropdown>a")){d.preventDefault();d=
k.getAttribute("aria-expanded");var a=function(b){var f=l(k).next(".gx-dropdown-menu");b=b.event.target;l(b).closest(f).length||b==k||"true"!==k.getAttribute("aria-expanded")||(k.setAttribute("aria-expanded","false"),gx.fx.obs.deleteObserver("gx.onclick",this,a))};"false"===d?(gx.fx.obs.addObserver("gx.onclick",this,a),k.setAttribute("aria-expanded","true")):(gx.fx.obs.deleteObserver("gx.onclick",this,a),k.setAttribute("aria-expanded","false"))}})},dynamicItems:function(){return function(d){this.preProcessItems=
function(k,a){var b;var f=0;for(b=k.length;f<b;f++){var g=(a?a+" ":"")+f.toString();k[f]._$Key=g;k[f].Children?this.preProcessItems(k[f].Children,g):k[f].Children=[]}};this.getItems=function(){return this.items};this.setItems=function(k){this.preProcessItems(k);this.items=k||[]};this.getItemPressed=function(){return this.itemPressed||{}};this.setItemPressed=function(k){this.itemPressed=k};this.assignItemPressed=function(k){k=k.split(" ");var a=this.getItems(),b;for(b=0;b<k.length;b++){var f=parseInt(k[b],
10);var g=g?g.Children[f]:a[f]}this.setItemPressed(g)};this.getType=function(k){var a;return function(){a||(a=d(k.getContainerControl()).closest("[data-gx-actiongroup-type]").attr("data-gx-actiongroup-type"));return a}}(this);this.renderMenu=function(k){this.IsPostBack?d('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove():d(this.getContainerControl()).after('<li data-gx-dynitem-hook="'+this.ContainerName+'"></li>').css("display","none").appendTo(gx.dom.form());k.length&&(k=Mustache.render("{{#Children}}{{> navbarItemTemplate}}{{/Children}}",
{containerName:this.ContainerName,Children:k},{navbarItemTemplate:'<li data-gx-dynitem-source="{{containerName}}">{{#Link}}<a href="{{Link}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/Link}}{{^Link}}{{#Children.length}}{{> navbarDropDowntemplate}}{{/Children.length}}{{^Children.length}}{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/EventName}}{{^EventName}}<span class="gx-navbar-textblock {{Class}} navbar-text" data-gx-tpl-applied-navbar-textblock-text title="{{TooltipText}}">{{Caption}}</span>{{/EventName}}</span>{{/Children.length}}{{/Link}}</li>',
navbarDropDowntemplate:'<li class="dropdown" data-gx-dynitem-source="{{containerName}}"><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle" title="{{TooltipText}}">{{Caption}}<span class="caret"></span></a><ul class="gx-dropdown-menu dropdown-menu {{Class}}">{{#Children}}{{> navbarItemTemplate}}{{/Children}}</ul></li>'}),d('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(k))};this.renderToolbar=function(k){var a="";k.length&&
(a=Mustache.render('{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}">{{Caption}}</a>{{/EventName}}{{^EventName}}{{Caption}}{{/EventName}}</span>{{/Children.length}}{{/Link}}{{/Children}}',
{containerName:this.ContainerName,Children:k},{toolbarItemTemplate:'{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}">{{Caption}}</a>{{/EventName}}{{^EventName}}{{Caption}}{{/EventName}}</span>{{/Children.length}}{{/Link}}{{/Children}}'}));
d(this.getContainerControl()).attr("data-gx-dynitem-container","").html(a)};this.show=function(){if(this.getContainerControl()){var k=this.getType(),a=gx.lang.isArray(this.items)?this.items:[this.items],b=[];"menu"==k?(this.renderMenu(a),b=document.querySelectorAll("[data-gx-dynitem-source='"+this.ContainerName+"'] a[data-event-name]")):"toolbar"==k&&(this.renderToolbar(a),b=this.getContainerControl().querySelectorAll("a[data-event-name]"));for(k=0;k<b.length;k++)gx.evt.attach(b[k],"click",this.fireEvent,
this)}};this.destroy=function(){var k=this.getType();"menu"==k?(d('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove(),d('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(this.getContainerControl()).remove()):"toolbar"==k&&d(this.getContainerControl()).html("")};this.fireEvent=function(k){k.preventDefault();k=k.currentTarget.dataset;var a=this.ParentObject,b=a.IsMasterPage?k.eventName.toUpperCase()+"_MPAGE":"'"+k.eventName.toUpperCase()+"'";if(b=a.getClientEventName(b))this.assignItemPressed(k.key),
this.execC2VFunctions(),gx.evt.dispatcher.dispatch(a.getServerEventName(b),a,0,0,a.isServerEvent(b),void 0,void 0,!0)}}}()}}(),defineTabControl:function(d){gx.lang.apply(d.prototype,c);return d}}}(gx.$);gx.setGxObyCtx=function(l,c){var d;void 0!=l&&(d=gx.getObj(l,c))&&gx.setGxO(l,c);return gx.O};gx.parentGridRow=function(l,c){var d=gx.fn.currentGridRowImpl(l);return d=(l=c.getGridById(l,d))&&l.parentGrid?gx.fn.currentGridRow(l.parentGrid.gridId):void 0};
gx.applyPicture=function(l,c,d){if(!gx.lang.emptyObject(l)&&!gx.lang.emptyObject(gx.rtPicture(l,d))&&!gx.lang.emptyObject(l.type))try{switch(l.type){case "int":case "decimal":return c=Number.isNaN(Number(c))?gx.num.extractValue(gx.rtPicture(l,d),gx.thousandSeparator,c):c,gx.num.formatNumber(c,l.dec,gx.rtPicture(l,d),l.len,l.sign,!0,l.emptyAsNull);case "char":return c;default:return c}}catch(k){}return c};
gx.SetOld=function(l,c,d){var k=c;l=gx.fn.controlGridId(l);0<l&&(k=c+"_"+gx.fn.currentGridRow(l));gx.fn.setHidden(k,gx.getVar(d))};gx.Old=function(l,c){try{var d=c,k=gx.fn.controlGridId(l);0<k&&(d=c+"_"+gx.fn.currentGridRow(k));var a=gx.fn.getHidden(d);"undefined"==typeof a&&""!=gx.O.CmpContext&&(a=gx.fn.getHidden(gx.O.CmpContext+d));return a}catch(b){gx.dbg.logEx(b,"gxapi.js","Old")}return""};gx.OldInteger=function(l,c){l=parseInt(gx.Old(l,c),10);return isNaN(l)?0:l};
gx.OldDecimal=function(l,c){l=gx.num.parseFloat(gx.Old(l,c),gx.thousandSeparator,gx.decimalPoint);return isNaN(l)?0:l};gx.OldDate=function(l,c){return(new gx.date.gxdate(gx.Old(l,c),"Y4MD")).getStringWithFmt(gx.dateFormat)};gx.OldDateTime=function(l,c){l=new gx.date.gxdate(gx.Old(l,c),"Y4MD");return l.getStringWithFmt(gx.dateFormat)+" "+l.getTimeString(!0,!0)};
gx.dom_i=function(l){return{el:function(c,d,k,a,b){if(c){if("string"===typeof c){a=this.byId(c);if(null!=a||!k&&(a=this.byId("span_"+c),null!=a))return a;if(d)return null;a=this.byName(c);return null!=a&&0<a.length?(a[0].id||(a[0].id=c),c=Array.from(a).filter(function(f){return f.checked}),0===c.length?a[0]:c[0]):null}return c}return null},matchesSelector:function(){var c;return function(d,k){d=gx.dom.byId(d);var a=d.matches||d.matchesSelector||d.msMatchesSelector||d.mozMatchesSelector||d.webkitMatchesSelector||
d.oMatchesSelector;void 0===c&&(c=gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion());return c||!a?l(d).is(k):a?a.call(d,k):!1}}(),hasAttribute:function(c,d){return c.hasAttribute?c.hasAttribute(d):void 0!==c[d]},hasClass:function(c,d){if(c=gx.dom.el(c,!0))return c.classList?c.classList.contains(d):d&&-1!=(" "+c.className+" ").indexOf(" "+d+" ")},isRoundedBtnWrapper:function(c){return c.hasClass("BtnRight")||c.hasClass("BtnLeft")||c.hasClass("BtnBackground")},addPrefixClass:function(c,d){if(c){var k=
l(c);c.className&&!k.attr("data-gx-unprefixed-class")&&(k.attr("data-gx-unprefixed-class",c.className),k=c.className.split(" "),k.splice(0,0,""),c.className+=k.join(" "+d))}},removePrefixClass:function(c,d){if(c){var k=l(c);if(0<=c.className.search(new RegExp("(^|\\s)"+d))){var a=k.attr("data-gx-unprefixed-class");k.removeAttr("data-gx-unprefixed-class");c.className=a||c.className.substring(d.length)}}},addClass:function(c,d){var k=gx.dom.el(c,!0);k&&d&&(k.classList?0<d.indexOf(" ")?k.classList.add.apply(k.classList,
d.split(" ")):k.classList.add(d):this.hasClass(c,d)||(k.className=k.className+(k.className?" ":"")+d))},classReCache:{},removeClass:function(c,d){var k=gx.dom.el(c,!0);k&&(k.classList?k.classList.remove(d):this.hasClass(c,d)&&(c=this.classReCache[d],c||(c=new RegExp("(?:^|\\s+)"+d+"(?:\\s+|$)","g"),this.classReCache[d]=c),k.className=k.className.replace(c," ")))},hasTransition:function(c){if(c&&Modernizr.csstransitions){var d=gx.util.browser,k="transitionDuration";d.isIE()&&(k="msTransitionDuration");
d.isWebkit()?k="webkitTransitionDuration":d.isFirefox()?k="MozTransitionDuration":d.isOpera()&&(k="OTransitionDuration");c=parseFloat(gx.dom.getComputedStyle(c)[k],10);return 0!==c&&!isNaN(c)}return!1},hasAnimation:function(c){if(c&&Modernizr.csstransitions){var d=gx.util.browser,k="animationName";d.isIE()&&(k="msAnimationName");d.isWebkit()?k="webkitAnimationName":d.isFirefox()?k="MozAnimationName":d.isOpera()&&(k="OAnimationName");return(c=gx.dom.getComputedStyle(c)[k])&&"none"!=c}return!1},isMultimediaElement:function(c){return"SPAN"==
c.tagName&&(gx.dom.hasClass(c,"gx-video-placeholder")||gx.dom.hasClass(c,"gx-audio-placeholder")||gx.dom.hasClass(c,"gx-download-placeholder"))},purgeElement:function(c,d){d=d||c.attributes;if(d){var k=d.length;for(var a=0;a<k;a+=1){var b=d[a].name||d[a];"function"===typeof c[b]&&(c[b]=null)}}},purge:function(c,d){d||this.purgeElement(c);if(c=c.childNodes){d=0;for(var k=c.length;d<k;d++)gx.dom.purge(c[d],!1)}},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isOldIE()},form:function(){null==
this._form&&(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){try{for(var c=gx.fn.getFormElements(),d=c.length,k=0;k<d;k++)c[k].gxIndex=k}catch(a){gx.dbg.logEx(a,"gxapi.js","indexElements")}},setAttribute:function(c,d,k){var a=function(){try{var b=gx.dom.byName(c);if(null!=b&&0<b.length)for(var f=b.length,g=0;g<f;g++)b[g].setAttribute(d,k);else g=gx.dom.byId(c),null!=g&&g.setAttribute(d,k)}catch(m){gx.dbg.logEx(m,"gxapi.js",
"setAttribute")}};"loading"==document.gxReadyState?gx.fx.obs.addObserver("gx.onload",this,a,{single:!0}):a.apply(this)},createInput:function(c,d){var k=document.createElement("input");k.type=d;k.id=c;k.name=c;gx.dom.form().appendChild(k);return k},hasSelectedFile:function(){var c=l('input[type="file"]'),d=c.length;if(!d)return!1;for(var k=0;k<d;k++)if(!gx.lang.emptyObject(c[k].value))return!0;return!1},hasSubmitControl:function(){var c=this.byTag("input"),d=c.length;if(!d)return!1;for(var k=0;k<d;k++){var a=
c[k].getAttribute("type");if("submit"==a||"image"==a)return!0}return!1},styles:function(){var c=[].concat($jscomp.arrayFromIterable(document.styleSheets)).map(function(k){return k.href}).filter(function(k){return!gx.lang.emptyObject(k)}),d=[].concat($jscomp.arrayFromIterable(document.querySelectorAll("style["+gx.html.STYLE_ELEMENT_HREF+"]"))).map(function(k){return k.getAttribute(gx.html.STYLE_ELEMENT_HREF)});return[].concat($jscomp.arrayFromIterable(c),$jscomp.arrayFromIterable(d))},getComputedStyle:function(c){try{return"#document"==
c.nodeName?null:"function"==typeof window.getComputedStyle?window.getComputedStyle(c):"undefined"!=typeof c.currentStyle?c.currentStyle:c.style}catch(d){return gx.dbg.logEx(d,"gxapi.js","getComputedStyle"),null}},getStyle:function(c,d){var k="";try{k="function"==typeof window.getComputedStyle?window.getComputedStyle(c,null)[d]:"undefined"!=typeof c.currentStyle?c.currentStyle[d]:c.style[d];var a=parseInt(k);isNaN(a)||(k=a)}catch(b){gx.dbg.logEx(b,"gxapi.js","getStyle")}return k},CSS_URL_REGEXP:/url\(["']?(?!(?:https?:|\/))([^"\)]+)["']?\)/ig,
CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,cssRules:null,cacheStyleSheet:function(c,d){var k=c.href?c.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,a;this.cssRules||(this.cssRules=[]);try{if(a=c.cssRules||c.rules){c=0;for(var b=a.length;c<b;c++){var f=a[c].cssText;d&&!f.includes("@import")&&(f=f.replace(this.CSS_URL_REGEXP,'url("'+k+'$1")'));this.cssRules.push(f)}}}catch(g){}},getCssRules:function(c,d){var k=document.styleSheets;if(null===this.cssRules||c){this.cssRules=[];c=0;for(var a=
k.length;c<a;c++)try{k[c].disabled||this.cacheStyleSheet(k[c],d)}catch(b){}}return this.cssRules},setStyleElement:function(c,d,k){try{c.innerHTML=(k?c.innerHTML:"")+d}catch(a){c.styleSheet.cssText=(k?c.styleSheet.cssText:"")+d}},isButton:function(c){return void 0!=c&&null!=c?"submit"==c.type||"button"==c.type:!1},isRadio:function(c){return c&&"INPUT"==c.tagName&&"radio"==c.type},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,
tel:!0,month:!0,week:!0},isEditControl:function(c){return c&&"INPUT"==c.tagName?this.editControls[c.type]||!1:!1},isTextControl:function(c){return c&&"INPUT"===c.tagName&&"text"===c.type||"TEXTAREA"===c.tagName},isDateControl:function(c){return"date"==c.type||"datetime"==c.type||"datetime-local"==c.type},isButtonLike:function(c){return c?this.isButton(c)||gx.dom.hasAttribute(c,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR)?!0:c&&"INPUT"===c.nodeName?"file"===c.type||("image"===c.type||"checkbox"===c.type)&&
"function"==typeof c.onclick:!1:!1},iFrameDoc:function(c){try{if(c.contentDocument)return c.contentDocument;if(c.contentWindow)return c.contentWindow.document}catch(d){}return null},forEachChild:function(c,d,k){if(c&&c.childNodes&&"function"==typeof k)for(var a=c.childNodes.length,b=0;b<a&&!1!==k.call(d,c.childNodes[b]);b++);},isTextWithLink:function(c){return null!=c&&"A"==c.tagName&&c.childNodes&&0<c.childNodes.length&&this.innerChildIsText(c.firstChild)?!0:!1},isImageWithLink:function(c){return c&&
"A"===c.tagName&&c.href&&(c=c.firstElementChild,!gx.dom.hasClass(c,"gx-prompt")&&c&&"IMG"===c.tagName)?!0:!1},isChildNode:function(c,d){c.frameElement&&(c=c.frameElement);if(c==d)return!0;for(;c.parentNode;){if(c==d||c.parentNode==d)return!0;c=c.parentNode}return!1},NodeLevel:function(c){for(var d=0;c.parentNode;)(c.id||c.name)&&d++,c=c.parentNode;return d},findRadioContainer:function(c){return c.parentNode&&"SPAN"==c.parentNode.tagName?c.parentNode:gx.dom.findParentByTagName(c,"table")||gx.dom.findParentByTagName(c,
"span")||c.parentNode},findParentByTagName:function(c,d,k){c=c.parentNode;d=d.toUpperCase();for(var a=0;c&&(!k||a!=k);){a++;if(c.tagName==d)return c;c=c.parentNode}},innerChildIsText:function(c){for(;null!=c;){if(c.nodeName&&"#text"==c.nodeName)return!0;c=c.firstChild}return!1},allChildrenAreText:function(c){for(c=c.firstChild;c;){var d=c.nodeName.toLowerCase();if("#text"!==d&&"pre"!==d&&null!=c.offsetParent)return!1;c=c.nextSibling}return!0},position:function(c){c=l(c).offset();return{x:Math.floor(c.left),
y:Math.floor(c.top)}},dimensions:function(c){c=l(c);return{w:c.outerWidth(),h:c.outerHeight()}},windowDimensions:function(c){var d=c.documentElement;c=c.body;return d&&d.scrollHeight?{scrollWidth:Math.max(d.scrollWidth,c.scrollWidth),scrollHeight:Math.max(d.scrollHeight,c.scrollHeight),clientHeight:Math.max(d.clientHeight,c.clientHeight),clientWidth:Math.max(d.clientWidth,c.clientWidth)}:{scrollWidth:c.scrollWidth,scrollHeight:c.scrollHeight,clientHeight:c.clientHeight,clientWidth:c.clientWidth}},
documentScroll:function(c){c=c||document;var d=-1,k=-1;try{d=c.documentElement.scrollTop||c.body.scrollTop,k=c.documentElement.scrollLeft||c.body.scrollLeft}catch(a){}return{scrollTop:d,scrollLeft:k}},documentScrollable:function(c){c=c||document;var d={x:!1,y:!1};c=gx.dom.windowDimensions(c);c.scrollHeight>c.clientHeight&&(d.x=!0);c.scrollWidth>c.clientWidth&&(d.x=!0);return d},autofitIFrame:function(c){c=gx.evt.source(window.event||c);var d=window.frames[c.name].document;if(d&&""==c.width&&""==c.height){var k=
gx.dom.windowDimensions(d);d=k.scrollWidth?k.scrollWidth+10:null;k=k.scrollHeight?k.scrollHeight+10:null;d&&k&&(c.style.width=d+"px",c.style.height=k+"px")}},fitToParent:function(c){if(!gx.util.browser.isIE()&&c&&c.childNodes){for(var d=null,k=c.childNodes.length,a=0;a<k;a++){var b=c.childNodes[a];if("TABLE"==b.nodeName){d=b;break}}null!=d&&(-1!=d.style.width.indexOf("%")&&(c.style.width=gx.dom.addUnits(d.style.width)),-1!=d.style.height.indexOf("%")&&(c.style.height=gx.dom.addUnits(d.style.height)))}},
redrawControl:function(c){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(c,c.outerHTML):setTimeout(function(){gx.html.setOuterHtml(c,c.outerHTML)},100)},setCaretPosition:function(c,d){null!=c&&(c.createTextRange?(c=c.createTextRange(),c.move("character",d),c.select()):c.selectionStart?(c.focus(),c.setSelectionRange(d,d)):c.focus())},replaceAtCaretPosition:function(c,d){if(document.selection){var k=document.selection.createRange().getBookmark();c.selection=c.createTextRange();
c.selection.moveToBookmark(k);c.selectLeft=c.createTextRange();c.selectLeft.collapse(!0);c.selectLeft.setEndPoint("EndToStart",c.selection);k=c.selectLeft.text.length+1;var a=c.selectLeft.text.length+(0==c.selection.text.length?1:c.selection.text.length)}else k=c.selectionStart,a=c.selectionEnd;c.setRangeText?c.setRangeText(d,k,a,"end"):(c.value=c.value.substr(0,k)+d+c.value.substr(k,c.value.length),gx.dom.setCaretPosition(c,k+d.length))},spanValue:function(c){var d=c.nodeValue;gx.lang.emptyObject(d)&&
(d=c.innerText||c.textContent);gx.lang.emptyObject(d)&&(d="");return d},removeControlSafe:function(c){gx.dom.shouldPurge()?(this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV")),this._avoidLeaksDiv.appendChild(c),gx.dom.purge(this._avoidLeaksDiv),this.removeControl(this._avoidLeaksDiv),this._avoidLeaksDiv=null):this.removeControl(c)},removeControl:function(c){if(null==document.createRange)c.removeNode(!0);else{var d=document.createRange();c&&(d.selectNode(c),d.deleteContents())}},
radioToObj:function(c,d){d={s:"",v:[]};if(!c)return d;if(gx.dom.isRadio(c)){d.s=c.value;c=gx.dom.byName(c.name);for(var k=c.length,a=0;a<k;a++){var b=l(c[a]),f=l("label[for='"+c[a].id+"']").first();d.v.push([b.val(),f.text().trim()])}}return d},comboBoxToObj:function(c,d){try{var k={s:"",v:[]};if(!c)return k;if("SELECT"===c.tagName){k.s=c.value;var a=c.options.length;for(d=0;d<a;d++){var b=l(c.options[d]);k.v.push([b.val(),b.text()])}}else if("SPAN"===c.tagName){if(c.hasAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR))return gx.json.evalJSON(c.getAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR));
var f=gx.fn.getControlValue_span(c);k.v.push([d,f]);k.s=d}return k}catch(g){gx.dbg.logEx(g,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s|ch|rem|vh|vw|vmin|vmax|q)$/i,addUnits:function(c,d){return""===c||"auto"==c?c:void 0===c?"":"number"!=typeof c&&this.unitPattern.test(c)?c:c+(d||"px")},getScrollbarWidth:function(){var c=document.createElement("div"),d=c.style;d.display="block";d.position="absolute";d.width="100px";d.height="100px";d.left="-999px";d.top=
"-999px";d.overflow="scroll";document.body.insertBefore(c,null);d=c.clientWidth;if(0===d)document.body.removeChild(c);else return document.body.removeChild(c),100-d},getActiveElement:function(c){c=c||document;try{var d=c.activeElement;d&&d.nodeName||(d=c.body)}catch(k){d=c.body}return d},getCaretOffset:function(c){return c&&"INPUT"===c.tagName&&"text"===c.type&&"undefined"!==typeof c.selectionStart?{s:c.selectionStart,e:c.selectionEnd}:{s:0,e:0}},setCaretOffset:function(c,d){c&&"INPUT"==c.tagName&&
"text"==c.type&&c.setSelectionRange&&c.setSelectionRange(d.s,d.e)},write:function(c,d){d=d||document;d.write(c)},writeError:function(c,d,k,a){gx.dbg.write(c);a=a||document;a.head.innerHTML="";a.body.innerHTML=c},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASK_ZINDEX:2,MASKED_CLASS:"gx-masked",isMaskElement:function(c){return this.hasClass(c,this.MASK_CLASS)},mask:function(c,d){d=d||0;if((c=this.el(c))&&!this.hasClass(c,this.MASK_RELATIVE_CLASS)){var k=gx.util.browser,
a=k.ieVersion(),b=6==a||k.isIE&&k.isCompatMode(),f=!!c.style.setExpression,g=l(c);g.css("caret-color","transparent");g.is("body")&&"static"==this.getComputedStyle(c).position||this.addClass(c,this.MASK_RELATIVE_CLASS);var m=document.createElement("div");m.className=this.MASK_CLASS;m.style.zIndex=this.MASK_ZINDEX;if("TABLE"==c.tagName){var p=l(m);g=l(c);p.width(g.width());p.insertAfter(g);p.parent().addClass(this.MASK_RELATIVE_CLASS)}else c.appendChild(m);try{m.style.animationDelay=d/2+"ms",m.style.webkitAnimation=
d/2+"ms"}catch(u){}this.addClass(c,this.MASKED_CLASS);if(b&&f)try{m.style.setExpression("height","this.parentNode."+(c==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(u){}else c=this.getComputedStyle(c).height,k.isIE&&(7!=k.ieVersion||k.isCompatMode())&&"auto"==c&&(m.style.height=c);k.isIE()&&(7>=a||k.isCompatMode())&&(l(m),(k=this.getComputedStyle(m).opacity)&&l(m).css("opacity",k));return m}},unmask:function(c){c=this.el(c);var d;l(c).css("caret-color","");if("TABLE"==c.tagName){var k=
c.nextSibling;k&&"DIV"==k.tagName&&this.hasClass(k,this.MASK_CLASS)&&(d=k)}else{k=0;for(var a=c.childNodes.length;k<a;k++)if("DIV"==c.childNodes[k].tagName&&this.hasClass(c.childNodes[k],this.MASK_CLASS)&&!this.hasClass(c.childNodes[k],this.UNMASK_CLASS)){d=c.childNodes[k];break}}d&&!d.removed?(d.removed=!0,d.style.clearExpression&&(d.style.clearExpression("width"),d.style.clearExpression("height")),this.removeClass(c,this.MASKED_CLASS),k=gx.dom.hasTransition(d)?gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(d)?
gx.dom.ANIMATION_END_EVENT:!1,a=function(){"TABLE"==c.tagName?d.parentNode&&(gx.dom.removeClass(d.parentNode,this.MASK_RELATIVE_CLASS),d.parentNode.removeChild(d)):d.parentNode==c&&c.removeChild(d);gx.dom.removeClass(c,this.MASK_RELATIVE_CLASS)}.closure(this),k?gx.evt.attach(d,k,a,!1,{single:!0,useCapture:!0,timeout:300}):a(),this.addClass(d,this.UNMASK_CLASS)):(this.removeClass(c,this.MASKED_CLASS),this.removeClass(c,this.MASK_RELATIVE_CLASS))},replaceWithFx:function(c,d,k){k=k||{};var a=k.enteringClass||
"entering",b=k.leavingClass||"leaving",f=k.enterDurationClass||"enter-fx-duration",g=k.leaveDurationClass||"leave-fx-duration",m=k.transitioningClass||"transitioning",p=k.transitionTimeout||1500,u=function(Q){return 0<Q.childNodes.length&&(gx.dom.hasAnimation(Q)||gx.dom.hasTransition(Q))&&!gx.dom.hasClass(Q.parentNode,m)},x=function(Q){return gx.dom.hasAnimation(Q)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(Q)?gx.dom.TRANSITION_END_EVENT:!1};"BODY"==c.tagName&&(gx.dom.addClass(c,c.className+
"-fx"),c.style.position="static");"BODY"==d.tagName&&gx.dom.addClass(d,d.className+"-fx");var w=c.parentNode,A=u(c),q=u(d),v="BODY"!=c.tagName;if(A||q){u=document.createElement("iframe");var t=document.createElement("div"),B=this.getComputedStyle(c),G=B.width;B=B.height;var J=x(c),n=x(d),r,y,C,D,F,H=0;gx.dom.addClass(w,m);if("BODY"!=c.tagName&&"BODY"!=d.tagName)if(A){u.setAttribute("scrolling","no");u.setAttribute("frameborder","0");u.style.width=gx.dom.addUnits(window.innerWidth);u.style.height=
gx.dom.addUnits(window.innerHeight);u.style.display="none";t.appendChild(u);t.style.width=G;t.style.height=B;t.style.overflow="hidden";gx.spa.dettachContent(c);c.insertBefore(t,c.firstChild);x=u.contentDocument;try{x.open(),x.write(this.getDocTypeDeclaration(document)),x.write("<html>"),x.write("<head></head>"),x.write("<body><div></div></body>"),x.write("</html>"),x.close()}catch(Q){gx.dbg.logEx(Q,"gxapi.js","replaceWithFx"),t=x.createElement("div"),x.body.appendChild(t)}x.documentElement&&(x.documentElement.className=
"gx-fx-iframe");x.body.style.margin="0";x.body.className=gx.dom.form().className;x.head.appendChild(document.createElement("style"));var L=x.styleSheets[0];t=gx.dom.getCssRules(!0,!0);var N=[];t=t.filter(function(Q,W){if(Q.includes("@import"))return Q;N.push(Q)});var O=function(Q){Q.forEach(function(W){try{L.insertRule(W,L.cssRules.length)}catch(V){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+W)}})};O(t);O(N);x.body.firstChild.style.width=G;for(x.body.firstChild.style.height=B;c.childNodes[1];)x.body.firstChild.appendChild(c.childNodes[1]);
u.style.display="block"}else q&&(c.style.display="none");gx.dom.addClass(d,a);gx.dom.addClass(d,f);gx.dom.addClass(c,g);!1!==k.domAdd&&w.appendChild(d);g=function(){C=function(){2===H?(gx.dom.removeClass(w,m),v&&(k.transitionEndCallback&&(d=k.transitionEndCallback(c,d)),!1!==k.domRemove&&c.parentNode==w&&w.removeChild(c)),gx.dom.removeClass(d,f)):v||(k.transitionEndCallback&&(d=k.transitionEndCallback(c,d)),gx.dom.removeClass(d,a),q&&(F=setTimeout(y,p)))};A?(r=function(){clearTimeout(D);H++;k.leavingTransCallback&&
k.leavingTransCallback(c,d);C()},gx.evt.attach(c,J,r,!1,{single:!0,useCapture:!0})):(H++,C());q?(y=function(){2<=H?gx.evt.detach(d,n,y):(clearTimeout(F),H++,k.enteringTransCallback&&k.enteringTransCallback(c,d),C())},gx.evt.attach(d,n,y,!1,{single:!0,useCapture:!0})):(H++,C());gx.lang.requestAnimationFrame(function(){gx.dom.addClass(c,b);v&&(gx.dom.removeClass(d,a),q&&(F=setTimeout(y,p)));A&&(D=setTimeout(r,p))})};k.beforeTransitionStart?!0!==k.beforeTransitionStart(g)&&g():g()}else!1!==k.domRemove&&
w.removeChild(c),!1!==k.domAdd&&(c.parentNode==w?w.replaceChild(d,c):w.appendChild(d)),k.beforeTransitionStart&&k.beforeTransitionStart(),k.leavingTransCallback&&k.leavingTransCallback(c,d),k.enteringTransCallback&&k.enteringTransCallback(c,d),k.transitionEndCallback&&(d=k.transitionEndCallback(c,d))},getDocTypeDeclaration:function(c){c=c||document;c=c.doctype;parts=["!DOCTYPE"];if(!c)return"";parts.push(c.name||"html");c.publicId&&(parts.push("PUBLIC"),parts.push('"'+c.publicId+'"'));c.systemId&&
parts.push('"'+c.systemId+'"');return"<"+parts.join(" ")+">"},createShadowRoot:function(c){c=this.el(c);return c.createShadowRoot?c.createShadowRoot():c.webkitCreateShadowRoot?c.webkitCreateShadowRoot():!1},fixes:function(){var c=/gx-tab-padding-fix-\d+/ig,d=/gx-tab-spacing-fix-\d+/ig,k={},a={},b,f,g,m={center:{marginLeft:"auto",marginRight:"auto",className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,className:"gx-right-align",alignment:"right"},left:{marginLeft:0,
marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{resetFixesStyleElement:function(){k={};a={};l("#gx-dom-fixes").empty()},getFixesStyleElement:function(){var p=l("#gx-dom-fixes")[0];if(!p){p=document.createElement("style");p.id="gx-dom-fixes";var u=gx.getThemeElement();l("head")[0].insertBefore(p,u);gx.util.browser.isIE()&&l(u).insertAfter(p)}return p},html5:function(p){var u=gx.util.browser,x=u.isIE(),w=gx.O.DSO?["@layer gx-dom-fixes {"]:[];l("TABLE",p||document.body).each(function(){var q=
l(this);q.attr({align:q.data("align")})});if(!p){if(!g){for(A in m)gx.lang.apply(m[A],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},{el:"fieldset",last:!0}]});g=".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}";
Mustache.parse(g)}for(A in m)w.push(Mustache.render(g,m[A]));gx.O.DSO&&w.push("}");var A=this.getFixesStyleElement();gx.dom.setStyleElement(A,w.join(""),!0)}(x||u.isOpera())&&l("td[data-align]",p||document.body).each(function(){var q=l(this),v=q.attr("data-align").toLowerCase(),t=m[v].className,B=q.attr("class")||"";B&&(B=" "+B);q.attr("align",v);q.hasClass(t)||q.attr("class",t+B);q.children("div."+m[v].contHolderClassName).children("div."+m[v].contHolderBodyClassName).addClass(t);q.children("div."+
m[v].wcClassName).children("div."+m[v].wcBodyClassName).addClass(t)})},setPopupMinWidth:function(){var p=gx.popup.getPopup();if(p){var u=!0;if(gx.runtimeTemplates){try{u=window.parent.gx.runtimeTemplates}catch(x){}u||(u=this.getPopupMinWidth(),l(document.documentElement).css("min-width",gx.dom.addUnits(u)));l(document.documentElement).addClass("gx-popup-document")}(p.autoresize||void 0===p.autoresize)&&l(document.documentElement).css("height","auto")}},getPopupMinWidth:function(){var p=gx.popup.getPopup(),
u=l(p?p.window:window).width();p=800;1200<=u&&(p=900);768<=u&&992>u&&(p=600);768>u&&(p=u-20);return p},fixTableResets:function(p){var u=[],x=[],w=this.getFixesStyleElement();b||(b="{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}",Mustache.parse(b));f||(f="{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}",Mustache.parse(f));l("table[data-cellpadding], table[data-cellspacing]",p||document.body).each(function(){var A=this.getAttribute("data-cellpadding");
void 0!==A&&(k[A]||(k[A]=A,u.push(A)),l("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className="gx-tab-padding-fix-"+A+" "+this.className.replace(c,"").trim()}));var q=this.getAttribute("data-cellspacing");void 0!==q&&(a[q]||(a[q]=q,x.push(q)),this.className="gx-tab-spacing-fix-"+q+" "+this.className.replace(d,"").trim())});p=""+Mustache.render(b,u)+Mustache.render(f,x);0<p.length&&(gx.O.DSO?gx.dom.setStyleElement(w," @layer gx-dom-fixes { "+p+" }",!0):gx.dom.setStyleElement(w,
p,!0))},createLegacyNotification:function(){l("div#gx_ajax_notification").length||l('<div id="gx_ajax_notification" style="display:none;"></div>').appendTo(document.body)}}}(),_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)},element_in_scroll:function(c,d){var k=l(d)[0].offsetTop-l(c)[0].offsetTop-l(c).scrollTop();return c&&l(d)[0]?k<l(c).height():
!1}}}(gx.$);$.extend(gx.dom,gx.dom_i);
gx.evt_i=function(l){return{eachKeyAutorefreshType:function(c){return!gx.lang.isNumericType(c)&&!gx.lang.isDateType(c)},waitGridRefresh:function(c){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(c):c.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var c=gx.evt.refreshGridCallback.pop();"function"==typeof c&&c.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var c=
this.hooks.length,d=0;d<c;d++){var k=this.hooks[d];try{this.detach(k.c,k.e,k.f),k.c=null,k.f=null}catch(a){gx.dbg.logEx(a,"gxapi.js","clearHooks")}this.hooks[d]=null}this.hooks=[]},source:function(c){return c.target||c.currentTarget||c.srcElement},createEvent:function(c,d,k,a){d=void 0===d?!0:d;k=void 0===k?!0:k;a=a||{};if(window.CustomEvent)var b=new CustomEvent(c,{bubbles:d,cancelable:k,detail:a});else b=document.createEvent("CustomEvent"),b.initCustomEvent(c,d,k,a);return b},dispatch:function(c,
d){return c.dispatchEvent?c.dispatchEvent(d):c.fireEvent("on"+d.type,d)},fireEvent:function(c,d){gx.evt.dispatch(c,gx.evt.createEvent(d))},detach:function(c,d,k,a){try{if(a=a||{},"string"==typeof d)c.removeEventListener?c.removeEventListener(d,k,a.useCapture||!1):c.detachEvent?c.detachEvent("on"+d,k):c["on"+d]=null;else if(gx.lang.isArray(d))for(var b=0,f=d.length;b<f;b++)this.detach(c,d[b],k,a)}catch(g){gx.dbg.logEx(g,"gxapi.js","detach")}},stopPropagation:function(c){c&&(c.stopPropagation?c.stopPropagation():
c.cancelBubble=!0)},cancel:function(c,d){if(d&&gx.util.browser.isIE()&&typeof("undefined"!=c.keyCode))try{c.keyCode=0}catch(k){}"undefined"==typeof c.preventDefault?(c.cancelBubble=d,c.returnValue=!d):d&&(c.preventDefault(),c.stopPropagation())},checkCtrlFocus:function(c){try{if(gx.evt.fixWebKitOnFocus()&&"button"==c.type&&gx.fn.isAccepted(c)&&void 0!=c.onfocus)c.onfocus()}catch(d){gx.dbg.logEx(d,"gxapi.js","checkCtrlFocus")}},doClick:function(c,d){if(gx.isInputEnabled()&&(d=gx.evt.source(d),"button"!=
d.type&&"submit"!=d.type&&(c=gx.dom.el(c),gx.fn.isAccepted(c)))){if(void 0!=c.onfocus)c.onfocus();if(void 0!=c.onclick)c.onclick();"INPUT"==c.nodeName&&"submit"==c.type&&gx.dom.form().submit()}},executeOnblur:function(c,d){var k=gx.csv.lastId,a=gx.O.focusControl;gx.O.focusControl=c;this.onblur(d,gx.O.focusControl);gx.O.focusControl=a;gx.csv.lastId=k},onblur:function(c,d){if(gx.O&&!0!==gx.csv.IgnoreBlur){c=gx.fn.controlRowId(c);gx.csv.lastId=d;gx.O.GXLastCtrlId===d&&window.event&&null===window.event.relatedTarget&&
(gx.csv.ExecutingOnBlur=!0,gx.csv.validControls(d,d+1,!0,gx.O),gx.csv.ExecutingOnBlur=!1);try{var k=gx.fn.validStruct(d);k&&null!=k.gxgrid&&k.gxgrid.updateControlValue(k,!1,c);var a=gx.csv.lastControl;if(a){var b=a.getAttribute("maxlength");0<b&&a.value.length>b&&(a.value=a.value.substring(0,b));if(k&&"bits"==k.type&&0==k.ro){var f=gx.fn.getControlGridRef(k.fld,k.gxgrid?k.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>a.id.indexOf(k.fld)&&(a=f);var g=gx.html.multimediaUpload.getContainer(f);gx.html.multimediaUpload.refreshPreviewImg(g,
a)}}}catch(m){gx.dbg.logEx(m,"gxapi.js","onblur")}}},onfocus:function(){var c=function(){var d=l.Deferred();gx.fx.obs.notify("gx.onbeforefocus",arguments);gx.evt.onfocus_impl.apply(gx.evt,arguments).then(function(){gx.fx.obs.notify("gx.onafterfocus");d.resolve()});return d.promise()};!0===gx.evt.is_button_mouse_event||gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,c.closure(this,arguments),{single:!0,async:!0}):c.apply(gx.evt,arguments)},onfocus_impl:function(c,d,k,a,b,f,g){var m=
l.Deferred();b=gx.fn.controlRowIndex(c)||b;try{gx.csv.lastGrid!=f&&gx.grid.clearActiveGrid();if(gx.spa.isNavigating())return m.resolve(!1).promise();gx.evt.setReady(!1,"onfocus_impl");if(!gx.fn.checkPopupFocus(c))return gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!1).promise();var p=!1;gx.csv.cmpCtx!=k&&(p=!0,gx.O.fromValid=0);gx.setGxO(k,a);gx.fn.refreshControlOldValue(c);p&&gx.fn.changeCmpContext();gx.fn.initOld(c);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=
null)}catch(n){gx.dbg.logEx(n,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=c;0!=f&&""==b||gx.fn.setCurrentGridRow(f,b);gx.fx.installSuggest(c);var u=!1;if(gx.csv.lastGrid!=f){gx.csv.lastRow[f]=null;if(!g){if(gx.csv.lastGrid<f){var x=gx.fn.firstGridControl(f);gx.O.fromValid>x&&(gx.O.fromValid=x)}gx.csv.lastGrid=f}u=!0}0<d&&(gx.O.focusControl=d);if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise();if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(c)}catch(n){gx.dbg.logEx(n,
"gxapi.js","onfocus")}try{var w=gx.fn.getControlValue("Mode");if("DLT"==w||"DSP"==w||gx.O.isTransaction()&&gx.dom.isButton(c)&&!gx.evt.isEnterEvtCtrl(c)&&!gx.evt.isCheckEvtCtrl(c)&&!g)return gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise()}catch(n){gx.dbg.logEx(n,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&c.gxdisabled&&null!=gx.csv.lastControl){cn=gx.fn.getControlIndex(c)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0,
"onfocus_impl"),m.resolve(!0).promise();gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0,"onfocus_impl");return m.resolve(!0).promise()}if(gx.csv.invalidForcedCtrl){var A=gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.Ctrl.id);gx.csv.invalidForcedCtrl=null;if(A)return gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise()}if(null!=gx.csv.invalidControl&&gx.csv.invalidControl!=c&&gx.O.focusControl>=gx.csv.invalidId&&gx.csv.invalidControl==c)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,
!1,gx.O,b).done(function(n){n&&(gx.csv.invalidControl=null,gx.evt.setReady(!0,"onfocus_impl"));m.resolve(!0)}),m.promise();g?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0==gx.csv.lastRow[f]||gx.csv.lastRow[f]==b||u||gx.O.fromValid!=gx.O.toValid||(gx.csv.lastId=gx.O.fromValid);var q=
gx.fn.controlIds();0<q.length&&gx.O.fromValid<q[0]&&(gx.O.fromValid=q[0]);gx.lang.emptyObject(gx.csv.lastRow[f])&&0!=f&&(gx.csv.rowChanged=!0,gx.csv.lastRow[f]=b);var v=gx.O,t=gx.csv.lastId,B=gx.fn.validStruct(t,v);if(B)var G=gx.csv.lastRow[B.grid];gx.csv.checkRowChange(t,u,v,G).done(function(n){var r=!1,y=!1,C=function(){null==gx.csv.invalidControl&&c===document.activeElement&&("SELECT"===c.nodeName||gx.dom.isTextControl(c)&&c.selectionStart===c.selectionEnd)&&gx.fn.setSelection(c);gx.csv.disableFocusCondition();
m.resolve(!0)};!gx.lang.emptyObject(G)&&!gx.lang.emptyObject(b)&&G.length>b.length&&(r=G.substring(G.length-b.length),r=parseInt(r)<parseInt(b));gx.csv.backwardGridValidation&&(!gx.lang.emptyObject(G)&&!gx.lang.emptyObject(b)&&G.length==b.length&&parseInt(G)>parseInt(b)&&(y=v.focusControl>gx.fn.firstGridControl(f)),!gx.lang.emptyObject(G)&&!gx.lang.emptyObject(b)&&G.length==b.length&&parseInt(G)<parseInt(b)&&(y=v.focusControl<t&&v.focusControl>gx.fn.firstGridControl(f)));n&&null==gx.csv.invalidControl&&
y?(v.fromValid=gx.fn.firstGridControl(f),gx.csv.validControls(v.fromValid,v.focusControl,!0,gx.O)):n&&!u||!(v.focusControl>=t||r)?(v.toValid=v.focusControl,C()):(gx.fn.lastMainLevelCtrlId(t,f)&&(n=gx.fn.getControlRefById(t))&&1===n.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&(v.fromValid=t+1),gx.csv.validateAll(v).done(C))});if(f&&b){var J=gx.O.getGridById(f,b);J&&J.allowSelection&&J.setSelection(parseInt(b,10)-1)}gx.evt.setReady(!0,"onfocus_impl");return m.promise()}catch(n){gx.dbg.logEx(n,"gxapi.js",
"onfocus")}gx.evt.setReady(!0,"onfocus_impl");return m.resolve(!1).promise()},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(c){gx.dbg.logEx(c,"gxapi.js","userOnload")}},onunload:function(c){gx.objectUnload(c);gx.spa.stop()},onclick:function(c){var d={event:c};gx.fx.obs.notify("gx.onclick",[d]);d.cancel||(gx.evt.setReady(!1,"onclick"),gx.isInputEnabled(c)||gx.evt.cancel(c,!0),gx.evt.mouse.update(c),setTimeout(function(){gx.fx.ctx.notify()},10),gx.evt.setReady(!0,
"onclick"))},ontouchstart:function(c){c=gx.evt.onmousedown.closure(this,[c]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(c,150):c()},onmousedown:function(c){var d=window.event||c,k=gx.evt.source(d);if(k&&8>=gx.util.browser.ieVersion()&&l(k).is("shape"))return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(k);gx.evt.mouse.update(c);c=gx.fx.dnd;c.deleteClonControl();k=c.getSource(d);gx.dom.isMaskElement(d.target)||null==k||(gx.evt.cancel(d,!0),
gx.setGxO(k.obj),c.drag(k.obj,k.types,k.hdl))},onmousemove:function(c){gx.evt.mouse.update(c);var d=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()&&gx.popup.ext.compatMode()){var k=gx.popup.ext;k.movepopup();if(null!=k.currIDb||null!=k.currRS)return!1}null!=d.obj&&(c=window.event||c,gx.evt.cancel(c,!0),null!=gx.fx.dnd.getTarget(c,d.obj.gxDragTypes)&&d.over(),d.moveControl(d.dragCtrl))},onmouseup:function(c){window.clearTimeout(gx.evt.touchTimer);gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(c);
var d=gx.fx.dnd;if(null!=d.dragCtrl){var k=window.event||c;k=d.getTarget(k,d.obj.gxDragTypes);null!=k?(d.deleteClonControl(),gx.setGxO(k.obj),d.drop(d.dropCtrl,k.obj,k.hdl)):d.restoreControl();k=window.event||c;gx.evt.cancel(k,!0)}d.out();d.dragCtrl=null;d.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(c){gx.evt.mouse.update(c);var d=window.event||c;!gx.util.browser.isOldIE()&&gx.fx.dom.delayedDispatch(c)||gx.fx.dom.raiseEvent("dblclick",d)},onwindowblur:function(c){gx.fx.dnd.deleteClonControl()},
checkMaxLength:function(c,d,k){k=window.event||k;var a=gx.util.browser.isIE(),b=k.keyCode;if(a){if("keydown"==k.type&&229==b)return c.value.length<=d?c.ImeKey=!0:!1;if("keyup"==k.type&&8==b&&c.ImeKey&&c.value.length+1>=d)return c.value=c.value.substring(0,c.value.length-1),c.ImeKey=!1,!0}if("keyup"==k.type||a)return c.value.length+1<=d||8==b||9==b||46==b||35<=b&&40>=b},fireControlValueChange:function(c,d,k){var a=l.Deferred();if(!c||!d)return a.resolve();a=c.getValidStructFld(d);if(a&&a.evt_cvc){var b=
gx.evt.startValidation(a.gxgrid);gx.evt.stopPropagation(k);if(a.grid){gx.evt.setEventRow(c,d);var f=gx.fn.controlRowIndex(d)}gx.fn.disableKeys();return c[a.evt_cvc].call(c,f).always(function(){gx.evt.endValidation(b,gx.evt.types.VALUECHANGED);gx.fn.enableKeys()})}return l.Deferred().resolve()},fireControlValueChanging:function(c){var d=gx.fn.getControlContext(c)||gx.O,k=l.Deferred();if(!d||!c)return k.resolve();var a=d.getValidStructFld(c);if(a){var b=a.gxgrid&&a.gxgrid.isFreestyle,f=a.evt_cvcing&&
!a.gxsgprm;if(f)var g=gx.evt.startValidation(a.gxgrid);if(f||b)b=gx.O,gx.setGxO(d),"function"==typeof a.c2v&&a.c2v(),gx.fn.call_v2bc(a,d),gx.setGxO(b);if(f)return a.grid&&gx.evt.setEventRow(d,c),d[a.evt_cvcing].call(d).always(function(){gx.evt.endValidation(g,gx.evt.types.VALUECHANGING)})}return k.resolve()},oncontrolvaluechanging:function(c){var d=c.keyCode;8!=d&&32>d||33<=d&&46>d||112<=d&&123>=d&&121!=d||(c=gx.evt.source(c))&&gx.evt.fireControlValueChanging(c)},oncontrolpasting:function(c){(c=gx.evt.source(c))&&
gx.lang.doCallTimeout(gx.evt.fireControlValueChanging,gx.evt,[c],0)},onkeypress:function(c,d,k){if(c=c||window.event){var a=13===c.keyCode;27===c.keyCode&&gx.evt.shouldIgnoreEscKey()&&gx.evt.cancel(c,!0);var b=gx.fn,f=gx.util.browser;d={event:c,hasEnter:d,skipOnEnter:k,cancel:!1};if(27===c.keyCode&&gx.popup.ispopup())b.cancelWindow();else if(gx.fx.obs.notify("gx.keypress",[d]),!d.cancel){a&&!gx.isInputEnabled()&&this.cancel(c,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(c))return this.cancel(c,
!0),!1;this.lastKey=c.keyCode;this.shiftPressed=c.shiftKey;var g=c.ctrlKey;d=gx.evt.source(c)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.evt.validKeypressForCtrl(d,c)||this.cancel(c,!0);9!==c.keyCode&&gx.csv.invalidateCtrl(d,c);if(!(this.isEnterEvtCtrl(d)&&this.isTriggerKey(c)&&this.cancelAndRefresh(c))&&(this.checkFuncKey(c,d),(32==c.charCode||32==c.keyCode||a&&!k)&&gx.dom.hasClass(d,"gx_newrow")&&l(d).find("span").trigger("click"),a&&k||!gx.grid.handleKeyPressEvt(c)))switch(c.keyCode){case 13:a=
this.triggersEvt(d),k?b.enterHasFocus()||this.shiftPressed&&"TEXTAREA"===d.nodeName||(g&&"TEXTAREA"===d.nodeName?(gx.dom.replaceAtCaretPosition(d,"\n"),this.cancel(c,!0)):(f.isIE()&&"file"!=d.type?(gx.evt.isEnterEvtCtrl(d)&&gx.O.executeEnterEvent(c,d),this.lastKey=9,c.keyCode=this.lastKey,this.cancel(c,!0),b.skipFocus(k,d)):(d.value&&f.isIE()&&"SELECT"!=d.tagName&&(f=d.value,d.value="",d.value=f),b.skipFocus(k),this.cancel(c,!0)),this.enter=!1)):a||gx.O.executeEnterEvent(c,d)}}}},moveFocus:function(c){c=
c.getAttribute("gxfocusable");if(null==c||"1"!=c){c=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl);if(-1==c)return!0;var d=gx.fn.searchFocus(this.shiftPressed?c-1:c+1,!this.shiftPressed);c=d.value;gx.fn.setFocus(d);gx.lang.doCallTimeout(function(k){event.isComposing&&(d.value=k)},this,[c],50)}},onkeyup:function(c){var d=window.event?window.event:c;c=gx.evt.source(d);if(""==c.type&&9==d.keyCode){if(!this.skipPromptCtrl)return;if(gx.dom.isTextWithLink(c)||gx.dom.isImageWithLink(c)){if(d=
c.id||("A"==c.tagName&&c.parentNode?c.parentNode.id:""))d=gx.O.getValidStructId(d),gx.evt.onfocus(c,d,"",!1,"",0);return}gx.evt.moveFocus(c)}gx.grid.handleKeyUpEvt(d)},oninput:function(c){var d=window.event?window.event:c;c=gx.evt.source(d);var k=c.getAttribute("maxlength")||(c.getAttribute("max")?c.getAttribute("max").length:0),a="undefined"==typeof c.value?"":c.value,b=!1;gx.evt.isComposing&&!d.isComposing&&(gx.fx.obs.notify("gx.endcomposing"),b=!0);gx.evt.isComposing=d.isComposing;if(d=this.autoSkip&&
""!=c.type&&!this.isControlKey(this.lastKey))d=(gx.evt.isComposing?a.match(/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF\u3000-\u303F\uFF10-\uFF190-9]*/)[0].length:a.length)>=k;d&&0<k&&!b&&gx.evt.moveFocus(c)},shouldIgnoreEscKey:function(){var c=gx.popup.getPopup();return gx.evt.processing||c&&"opening"==c.state},validKeypressForCtrl:function(c,d){if(!c||"text"!==c.type&&"number"!==c.type)return!0;var k=gx.O.getValidStructFld(c);if(k){var a=gx.rtPicture(k,c),b=gx.numericLenDec(a),f=b.Decimals;b=b.Integers;
var g=k.type;k=c.value;if("int"==g||"decimal"==g){if("e"===d.key)return!1;a:{try{if(null!==c.selectionStart&&void 0!==c.selectionStart){var m=c.selectionEnd-c.selectionStart;break a}else if(window.getSelection){m=window.getSelection().toString().length;break a}}catch(p){}m=void 0}if(void 0===m)return!0;if(gx.util.browser.isFirefox()&&"number"==c.type&&0===f)!c.gxoninput&&c.max&&c.min&&(c.gxoninput=!0,gx.evt.attach(c,"input",function(p){if(p.max&&p.min){var u=Number(p.value);if(u>p.max||u<p.min)p.value=
p.value.substr(0,p.max.length)}}.closure(this,[c])));else{if(1<d.key.length)return!0;if(/[^\+\-\.,]/.test(d.key)&&/\D/.test(d.key)&&!d.ctrlKey&&isNaN(Number(d.key)))return!1;c=document.getSelection().toString();if(d.key===gx.thousandSeparator)return!0;if(d.key===gx.decimalPoint)return 0<c.length&&gx.text.contains(c,d.key)?!0:!gx.text.contains(k,d.key);if(/[\+\-]/.test(d.key))return!gx.text.contains(k,d.key)||gx.text.contains(c,d.key);d=k.split("").filter(function(p){return"0"<=p&&"9">=p}).length;
k=gx.num.normalize_decimal_sep(a,gx.thousandSeparator,gx.decimalPoint,k);a=b+(-1==k.indexOf(gx.decimalPoint)?0:f);return d-m<a}}}return!0},setEventRow:function(c,d){var k=gx.fn.rowGridId(d),a=k&&(gx.fn.controlRowId(d)||gx.fn.currentGridRowImpl(k)||"0001");k&&a&&(void 0!=d.gxGridName&&gx.fn.setHidden(c.CmpContext+d.gxGridName.toUpperCase()+"_ROW",a),gx.evt.setCurrentGridRows(k,a));gx.csv.lastEvtRow=a},ctrlOnchange:function(c,d,k,a,b){gx.csv.pkDirty=k;"UPD"==c.value?"1"==d.value?(k?null!=a&&(a.value=
gx.getMessage("GXM_captionadd")):null!=a&&(a.value=gx.getMessage("GXM_captionupdate")),d.value="0"):k&&null!=a&&(a.value=gx.getMessage("GXM_captionadd")):"INS"==c.value&&"1"==d.value&&(null!=a&&(a.value=gx.getMessage("GXM_captionadd")),d.value="0")},onchange:function(){var c=function(){return gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,c.closure(this,arguments),{single:!0,async:!0}):c.apply(gx.evt,arguments)},onchange_impl:function(c,
d,k){if(gx.evt.fixWebKitOnFocus()&&"radio"===c.type)c.onfocus();var a=gx.fn.getControlContext(c)||gx.O,b=a.getValidStructFld(c),f=b&&b.hasRVFmt,g=l.Deferred();if(c.GXFormatError&&!f)g.resolve();else{gx.evt.setReady(!1,"onchange_impl");gx.evt.lastControl=c;f=gx.fn.getControlValue("radio"==c.type?c.name:gx.dom.id(c));var m=!1,p=gx.O.focusControl,u=function(){delete gx.fx.delayedValidation;gx.evt.setReady(!0,"onchange_impl");var q=gx.util.browser.isWebkit()&&("radio"==c.type||"checkbox"==c.type||"file"==
c.type),v="radio"==c.type||"checkbox"==c.type;m&&b&&(gx.fn.lastMainLevelCtrlId(p,b.grid)||b.gxsgprm)&&(v=q=!0);k&&(v=!1);if(q&&c.onblur)c.onblur();q=function(){gx.evt.execUsrOnchange(c);gx.fx.obs.notify("gx.validation");g.resolve()};!v||"undefined"!=typeof c.GXFormatError&&0!=c.GXFormatError?q():gx.csv.validControls(p,p+1,!0,a).then(q)};if(gx.csv.controlValueHasChanged(c,f,b)){m=!0;gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0");gx.csv.invalidateGXCtrl(c);var x=!0;
if(b){var w=b.grid?gx.fn.controlRowIndex(c):void 0;"function"==typeof b.c2v&&b.c2v(w);gx.fn.call_v2bc(b,a,w)}k||gx.fn.setControlOldValue(c,f);var A=function(){var q=l.Deferred();if("select-one"==c.type||"checkbox"==c.type||"radio"==c.type){x=!1;gx.evt.setReady(!1,"validationCallback");var v=b?gx.fn.currentGridRowImpl(b.grid):null;gx.csv.validate(c,b.id||p,!0,a,v).done(function(t){t&&gx.csv.invalidControl==c&&(gx.csv.invalidControl=null);gx.evt.execOnchange(c,t);gx.evt.setReady(!0,"validationCallback");
q.resolve()}).fail(function(){gx.evt.setReady(!0,"validationCallback");q.resolve()})}x&&(gx.evt.execOnchange(c,!1),q.resolve());return q.promise()};f=function(){A.call(this).then(u.closure(this))}.closure(this);gx.evt.fireControlValueChange(a,c,d).always(f)}else u.call(this);return g.promise()}},execOnchange:function(c,d,k){var a="";if(c.attributes["data-gxoch1"])try{a+=c.attributes["data-gxoch1"].value+";"}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(c)&&c.attributes["data-gxoch2"])try{a+=
c.attributes["data-gxoch2"].value+";"}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}try{""!=a&&eval(a)}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}d||gx.fn.setControlGxValid(c,"0");k||(c.setAttribute("gxctrlchanged","1"),gx.fn.setControlValue("IsModified","1"));!0!==k&&gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(c){var d="";if(!gx.dom.hasAttribute(c,"data-gxoch0"))return!0;try{d=c.attributes["data-gxoch0"].value}catch(k){return!0}return(new Function(d)).call(c)},
jsEvent:function(c){if(!gx.isInputEnabled())return!1;c=c.getAttribute?c.getAttribute("data-jsevent")||c.getAttribute("jsevent"):c.jsevent;return gx.lang.emptyObject(c)?!0:eval(c)},isEnterEvtCtrl:function(c){if(gx.O.EnterCtrl){var d=gx.dom.id(c);d||"A"!=c.tagName||(d=c.parentNode.id);d&&0==d.indexOf("span_")&&(d=d.substring(5));if(!d)return!1;var k=gx.O.EnterCtrl;c=gx.fn.rowGridId(c);for(var a=0,b=k.length;a<b;a++){var f=gx.csv.ctxControlId(k[a]);if(c&&-1!=d.search(new RegExp(".*"+f+"_[0-9]{4}$"))||
f==d)return!0}}return!1},isCheckEvtCtrl:function(c){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){c=gx.dom.id(c);for(var d in gx.O.CheckCtrl)if(gx.O.CheckCtrl[d]==c||gx.O.CmpContext+gx.O.CheckCtrl[d]==c)return!0}return!1},isTriggerKey:function(c){for(var d=this.triggerKeys.length,k=0;k<d;k++)if(c.keyCode==this.triggerKeys[k]||c.charCode==this.triggerKeys[k])return!0;return!1},isControlKey:function(c){for(var d=this.controlKeys.length,k=0;k<d;k++)if(c==this.controlKeys[k])return!0;return!1},invalidDSPKey:function(c){var d=
c.keyCode-111;c.shiftKey&&(d+=12);return this.keyListeners[d]&&"ENTER"==this.keyListeners[d][gx.O.CmpContext]||13==c.keyCode?!0:!1},addKeyListener:function(c,d,k){1==d&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[d]&&(this.keyListeners[d]=[]);this.keyListeners[d][c]=k},setEvtName:function(c,d){gx.fn.setHidden("_EventName",c)},cancelAndRefresh:function(c){var d=gx.O;if(d&&d.conditionsChanged){this.cancel(c,!0);d.autoRefresh||this.resetGridsPagingVarsIfConditionsChanged(d.Grids||[]);
if(d.autoRefresh||d.hasEnterEvent||d.anyGridBaseTable)d.executeServerEvent("RFR",!1);else return!1;return!0}return!1},resetGridsPagingVarsIfConditionsChanged:function(c){var d=!1;l.each(c,function(k,a){a.conditionsChanged&&a.conditionsChanged()&&(a.setPagingVars(0,0),d=!0)});return d},setGridEvt:function(c,d,k){k=k||gx.O;if(gx.isInputEnabled()&&!gx.lang.emptyObject(c)){if(gx.lang.emptyObject(d)){var a=gx.fn.getGridObj(c);a&&(d=gx.fn.getHidden(k.CmpContext+a.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",
c);gx.fn.setHidden("_EventRowId",d);d&&gx.fn.setCurrentGridRow(c,d)}},checkFuncKey:function(c,d){var k=gx.popup.getPopup(),a=k?k.frameWindow.gx.O:gx.O;k=k?k.frameWindow.gx.evt.keyListeners:this.keyListeners;var b=this.lastKey-111;c.shiftKey&&(b+=12);if(0<b&&24>=b&&void 0!=k[b]){var f=k[b][a.CmpContext];if("undefined"!=typeof f)this.execFnKeyEvt(c,a,f,d);else for(var g in k[b])if(f=k[b][g],"undefined"!=typeof f&&(a=gx.getObj(g,!1),null!=a)){this.execFnKeyEvt(c,a,f,d);break}}},execFnKeyEvt:function(c,
d,k,a){if(!gx.evt.processing&&!gx.spa.isNavigating())if(this.cancel(c,!0),"PROMPT"==k){if((c=d.getValidStructFld(a))&&c.attachedCtrls){k=c.attachedCtrls;for(var b=0,f=k.length;b<f;b++)if((a=k[b])&&a.info&&a.info.isPrompt){var g=k[b].info.id;"function"==typeof d.promptKeyHandlers[g]&&(a=0<c.grid?"_"+gx.fn.currentGridRowImpl(c.grid):"",a=gx.dom.el(d.CmpContext+g+a),d.promptKeyHandlers[g].call(d,a))}}}else d.isTransaction()&&"SELECT"==k?(d=gx.dom.byId(d.CmpContext+"BTN_SELECT"))&&"function"==typeof d.click&&
d.click():d.executeEvent(k,!1)},keyModifiesValue:function(c){c=window.event?c.keyCode:c.which;return 32<=c&&127>=c||229==c?!0:!1},triggersEvt:function(c){if(!gx.lang.emptyObject(c)){if(c==gx.evt.dummyCtrl)return!0;var d=gx.config.evt.triggersEvtNodes||{};if("A"===c.nodeName||"TEXTAREA"===c.nodeName||d[c.nodeName])return!0;if("INPUT"===c.nodeName){if("button"===c.type||"image"===c.type)return!0}else if("IMG"===c.tagName&&gx.dom.hasAttribute(c,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR))return!0}return!1},
setProcessing:function(c){var d=c.status;c=c.cond;"undefined"!=typeof c&&!c||gx.evt.redirecting||(gx.evt.processing=d,gx.dbg.enabled&&(console.groupCollapsed("setProcessing ${ctx} ${gx.evt.processing}"),console.trace(),console.groupEnd()),gx.evt.setReady(!gx.evt.processing,"setProcessing"),gx.evt.processing||gx.fx.obs.notify("gx.endprocessing"))},doAfterProcessing:function(c,d){gx.evt.processing?gx.fx.obs.addObserver("gx.endprocessing",d,c,{single:!0}):c.call(d)},doAfterComposing:function(c,d){gx.evt.isComposing?
gx.fx.obs.addObserver("gx.endcomposing",d,c,{single:!0}):c.call(d)},doAfterValidating:function(c,d){gx.csv.isvalidating()?gx.fx.obs.addObserver("gx.onaftervalidatecompleted",d,c,{single:!0}):c.call(d)},startValidation:function(c,d){if(c||d)gx.csv.validatingGrid=c,gx.csv.validating+=1;return{gxgrid:c,force:d}},endValidation:function(c,d){if(c.gxgrid||c.force)--gx.csv.validating,0===gx.csv.validating&&(gx.csv.validatingGrid=null,gx.fx.obs.notify("gx.onaftervalidatecompleted")),0>gx.csv.validating&&
gx.dbg.logMsg("WARNING! endValidation unexpected condition (gx.csv.validating < 0)"),gx.fx.obs.notify("gx.onaftervalidate",[d])},userReadyThresholdWait:function(){gx.evt.userReadyTStamp||(gx.evt.userReadyTStamp=Date.now());return Date.now()>gx.evt.userReadyTStamp+gx.evt.userReadyThreshold},setReady:function(c,d){gx.evt.userReadyCnt+=c?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;0==gx.evt.userReadyCnt?(gx.evt._userReady=!0,gx.evt.userReadyTStamp=Date.now()):gx.evt._userReady=
!1;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0);gx.dbg.enabled&&(console.groupCollapsed("setReady ${Context} ${gx.evt.userReadyCnt}"),console.trace(),console.groupEnd())},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,setCurrentGridRows:function(c,d){for(;0<c&&d&&4<=d.length;){gx.fn.setCurrentGridRow(c,d.substr(0,4));var k=d.substr(4);if(c=gx.O.getGridById(c,k))c=c.parentGrid;c=c?c.gridId:0;d=d.slice(4)}},canExecuteEvent:function(c,d){return!(!d&&(gx.spa.isNavigating()||gx.evt.redirecting||!gx.csv.isvalidating()&&
(gx.lang.emptyObject(c)||gx.evt.processing)))},execEvt:function(c,d,k,a,b,f,g,m,p,u,x,w){gx.dbg.logPerf("execEvt");gx.text.contains(k,"EENTER")&&gx.ajax.saveFormForAutoComplete();if(this.canExecuteEvent(k,u)){var A=gx.getObj(c,d),q=b,v=(c=this.EVT_ROW_ID_REGEXP.exec(k))&&1<c.length?c[1]:null;c&&2<c.length&&gx.evt.setCurrentGridRows(q,v);v||(v=gx.fn.currentGridRowImpl(q));c=function(){gx.fx.obs.notify("gx.validation",null,function(){if(!u&&A&&A.inputHasFormatErrors(k,b,v))x&&x.call();else{g&&(gx.evt.srvCommand=
!0,a&&(q=gx.fn.rowGridId(a),v=gx.fn.controlRowId(a),gx.lang.emptyObject(q)||gx.lang.emptyObject(v)||(gx.csv.lastGrid=q,gx.fn.setCurrentGridRow(q,v))));if(0<gx.csv.lastId&&!gx.csv.validatingAll){var t=A.getValidStruct(gx.csv.lastId);if((gx.evt.isEnterEvtCtrl(a)&&0<a.id?A.getValidStructId(a.id):A.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(a)||t&&t.isuc)||w)gx.csv.validatingAll=!0,A.fromValid=gx.csv.lastId,A.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=!1}this.setEvtName(k,
a);this.lastEvent=k;if(!g&&(gx.grid.drawAtServer||a&&"INPUT"==a.nodeName&&"submit"==a.type))this.execEvtSubmit(k,a);else{gx.evt.setProcessing({status:!0,ctx:"notifyValidation"});var B=function(){gx.evt.setProcessing({status:!1,ctx:"notifyValidation"})};t=function(){gx.ajax.doPost((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),f,!0,b,v,p,A,k);B()};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(k,A,q,v,!0,void 0,m).done(function(G){G||x&&x.call();
p&&p(G);B()}).fail(t):gx.evt.execNonFullAjaxEvent(t)}}}.closure(this))};gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(a)&&a!=gx.csv.lastControl&&void 0!=a.onfocus?(gx.fx.obs.addObserver("gx.onafterfocus",this,c,{single:!0}),a.onfocus()):c.call(this)}else x&&x.call()},execEvtSubmit:function(c,d){if(gx.isInputEnabled()){gx.evt.setProcessing({status:!0,ctx:"execEvtSubmit"});gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[c,d]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);
c=gx.dom.form();var k=gx.popup.getPopup();if(null!=k&&(d=c.action,k=k.window.gx.popup.lvl,-1!=k)){var a=gx.http.urlParameterPrefix(d);a+=encodeURIComponent("gxPopupLevel="+k+";");c.action=d+a}c.submit()}},execCliEvt:function(c,d,k,a,b,f){var g=l.Deferred();if(!this.canExecuteEvent(!0,!1))return g.reject();gx.fx.obs.notify("gx.validation");f=void 0!=f?f:[];var m=gx.getObj(c,d);if(null!=m){gx.setGxO(c,d);if("string"==typeof a&&""!=a&&4<arguments.length){var p=m.getGrid(a);p.instanciateRow(b);p=p.gridId}if(m.inputHasFormatErrors(m.getServerEventName(k),
p,b))return g.reject();var u=m.isServerEvent(k);gx.evt.setProcessing({status:!0,cond:!u,ctx:"execCliEvt"});m.execC2VFunctions();var x=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing({status:!1,cond:!u,ctx:"execCliEvt"})});m.conditionsChanged?m.executeServerEvent("RFR",!0):gx.fx.obs.notify("gx.onafterevent",[]);g.resolve()},w=function(){m[k](f);x();gx.fx.obs.notify("gx.afterNonFullajax")};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(m.getServerEventName(k),m,p,b,!1,f).done(x).fail(w):
gx.evt.execNonFullAjaxEvent(w);return g.promise()}return g.reject()},execNonFullAjaxEvent:function(c){gx.evt.NonFullAjaxserialRunner=gx.evt.NonFullAjaxserialRunner||gx.evt.serialRunner();gx.fx.obs.addObserver("gx.afterNonFullajax",gx.evt,function(){gx.evt.NonFullAjaxserialRunner.signalEndTask()},{single:!0});gx.evt.NonFullAjaxserialRunner.addTask(c)},fixWebKitOnFocus:function(){var c=gx.util.browser;return c.isWebkit()&&!c.isChrome()||c.isChrome()&&30>c.chromeVersion()?!0:!1},dispatcherTimeout:30,
dispatcher:function(){var c=function(d,k){k=[];var a,b={};for(a=0;a<d.length;a++){var f=d[a];b[f.eventName]||(b[f.eventName]=[]);b[f.eventName].push(f.deferred);0!==k.length&&f.eventName===k[k.length-1].eventName||k.push(f)}for(a=0;a<k.length;a++){f=k[a];var g=b[f.eventName];for(d=0;d<g.length;d++)f.deferred!==g[d]&&f.deferred.done(function(){this.resolve.apply(this,arguments)}.closure(g[d]))}return k};return{dispatchedEvents:{},serialRunner:gx.evt.serialRunner(),getContextKey:function(d,k,a,b){return b+
(d.CmpContext+d.ServerClass)+(k||"")+(a||"")},getEventParmsMetadata:function(d,k,a){return k.EvtParms[d]["input"==a?0:1]},eventDepends:function(d,k,a){k=this.getEventParmsMetadata(k,a,"output");d=this.getEventParmsMetadata(d,a,"input");for(var b,f=0,g=k.length;f<g;f++){a=gx.ajax.resolveParmKey(k[f]);for(var m=0,p=d.length;m<p;m++)if(b=gx.ajax.resolveParmKey(d[m]),a==b)return!0}return!1},initialize:function(){this.t&&clearTimeout(this.t);this.serialRunner=gx.evt.serialRunner();this.dispatchedEvents=
{}},beforeDispatch:function(d){var k=gx.ajax.getSecurityToken(d);k&&(d.InternalParms[k.id]=k.value)},types:{event:"event",validation:"validation"},dispatch:function(d,k,a,b,f,g,m,p){p=p||gx.evt.dispatcher.types.event;f=void 0===f||f;var u=l.Deferred();if("object"===typeof d){var x=d.fn;d=d.eventName}k.cleanEventName(d);k.getClientEventName(d);if(p===gx.evt.dispatcher.types.validation){var w=d.toUpperCase();var A=d}else w=k.cleanEventName(d),A=k.getClientEventName(d);this.beforeDispatch(k);if(!k.EvtParms[w])return u.reject(),
u.promise();d=this.getContextKey(k,a,b,p);var q=this.dispatchedEvents[d];f={eventName:w,clientSideEventName:A,clientSideFunction:f?null:(x||k[A]).closure(k,g||[]),serverSide:f,deferred:u,arguments:g,disableForm:m};q?q.events.push(f):(q={gxO:k,grid:a,row:b,type:p,events:[f]},this.dispatchedEvents[d]=q,this.t=setTimeout(this.serialRunner.addTask.closure(this.serialRunner,[this.dispatchTimeoutCallback.closure(this,[d])]),gx.evt.dispatcherTimeout));return u.promise()},dispatchTimeoutCallback:function(d){var k=
this.dispatchedEvents[d],a=k.type,b=k.gxO,f=k.grid,g=k.row,m=[],p=[],u=[],x={};delete this.dispatchedEvents[d];if(a!==gx.evt.dispatcher.types.validation){d=0;for(var w=k.events.length;d<w;d++){var A=k.events[d];if(A.serverSide)p.push(A);else{var q=!0;for(var v=0;v<d;v++)if(this.eventDepends(A.eventName,k.events[v].eventName,b)){q=!1;break}q?m.push(A):p.push(A)}}}else p=k.events;k=c(m,a).concat(c(p,a));m=!1;d=0;for(w=k.length;d<w;d++){p=k[d].eventName;x[p]||(x[p]=[]);x[p].push(k[d].deferred);if(m&&
k[d].serverSide)t.addMethod(p);else{var t=this.createMessage(a,p,b,f,g,k[d].serverSide,k[d].disableForm);k[d].serverSide||(t.callback=k[d].clientSideFunction);u.push(t)}m=k[d].serverSide}var B=function(r,y,C){for(var D=0,F=r.methods.length;D<F;D++)for(var H=x[r.methods[D]],L=0;L<H.length;L++){var N=H[L];N&&(y?N.resolve(C):N.reject(C))}},G=0,J=this.serialRunner,n=function(){if(G<u.length){var r=u[G++],y=G==u.length;r.call().done(function(C){B(r,!0,C);n();y&&J.signalEndTask()}).fail(function(C){B(r,
!1,C);for(var D=G;D<u.length;D++)B(u[D],!1,C);J.signalEndTask()})}};n()},createMessage:function(d,k,a,b,f,g,m){return d===gx.evt.dispatcher.types.validation?new gx.ajax.validationMessage(k,a,b,f,g,m):new gx.ajax.message(k,a,b,f,g,m)}}}(),mouse:{x:-1,y:-1,update:function(c){try{gx.lang.emptyObject(c.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=c.pageX,this.y=c.pageY):0<c.touches.length&&(this.x=
c.touches[0].pageX,this.y=c.touches[0].pageY)}catch(d){gx.dbg.logEx(d,"gxapi.js","mouse update")}}},_deinit:function(){this.lastEvent=this.lastControl=null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}}}(gx.$);
gx.csv_i=function(l){var c=function(d,k,a,b){b=[];for(var f=0;f<d.length;f++)b.push(k.validControl.apply(k,d[f]));l.when.apply(l,b).done(a)};return{GX_OLD_VALUE_ATTRIBUTE:"data-gxoldvalue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:0,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,
validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],resetRow:function(){gx.csv.lastEvtRow=null;gx.csv.validatingGrid=null;gx.csv.instanciatedRowGrid=null},isvalidating:function(){return 0<gx.csv.validating},validateAll:function(d){var k=l.Deferred();d=d||gx.O;this.validControls(d.fromValid,d.toValid,!1,d).done(function(a,b){try{null!=this.invalidControl&&gx.csv.stopOnError||
(d.fromValid=b||d.toValid)}catch(f){gx.dbg.logEx(f,"gxapi.js","validateAll")}k.resolve()}.closure(this));return k.promise()},validControls:function(d,k,a,b,f){var g=l.Deferred(),m=[],p=0,u=0,x=0,w=gx.csv.fullGridValidation&&1<=k-d&&gx.O.isTransaction();b=b||gx.O;b.startFeedback();var A=function(Q,W){gx.csv.stopOnError&&(-1!=W?(Q=gx.fn.validStruct(W,b),Q=gx.fn.getControlGridRef(Q.fld,Q.grid),gx.csv.disableFocus=document.activeElement!==Q,gx.fn.isAccepted(Q,b)?gx.fn.setFocus(Q):gx.fn.setFocus(gx.evt.lastControl)):
gx.dom.isButton(gx.csv.lastControl)||null==gx.csv.validActivatedControl||gx.fn.setFocus(gx.csv.validActivatedControl))};try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=0;var q=null;if(k>d){w&&(q=gx.fn.validStruct(d),void 0!=q&&void 0!=q.lvl&&(p=q.lvl),q=gx.fn.validStruct(k),void 0!=q&&void 0!=q.lvl&&(u=q.lvl));m=[];for(var v=d;v<k;v++){q=gx.fn.validStruct(v);var t=null;if(q){var B=gx.fn.currentGridRowImpl(q.grid);var G=!!q.hasRVFmt;t=1==q.isuc?q.uc.getRealControl():
gx.fn.getControlGridRef(q.fld,q.grid)}else G=!1;if(t&&t.GXFormatError&&!0===t.GXFormatError&&!G){var J=v;break}m.push([v,a,b,B,f]);if(w&&v>d&&v<k&&void 0!=q&&void 0!=q.lvl&&(x=q.lvl,x!=p&&x!=u&&q&&q.grid)){var n=gx.fn.getGridObj(q.grid),r=n.grid.rows.length,y=gx.fn.currentGridRowImpl(q.grid),C=gx.fn.lastGridControl(q.grid);if(v==C){var D=gx.fn.firstGridControl(q.grid);for(t=0;t<r;t++){var F=n.grid.rows[t],H=F.gxDeleted(),L=F.gxExists(),N=F.gxIsMod();if(!H&&(L||N)&&F.gxId!=y)for(var O=D;O<=C;O++)m.push([O,
a,b,y,F.gxId])}}}}if(0<m.length)return gx.evt.setProcessing({status:!0,ctx:"validControls"}),c(m,this,function(){for(var Q=!0,W=-1,V=0,Z=arguments.length;V<Z;V++){var ba=arguments[V].ret;if(Q&&!ba){W=arguments[V].ctrl;Q=!1;break}}A(Q,W);gx.evt.setProcessing({status:!1,ctx:"validControls"});b.endFeedback();g.resolve(Q,J)}),g.promise()}A(!0,-1);b.endFeedback();g.resolve(!0,J)}catch(Q){gx.dbg.logEx(Q,"gxapi.js","validControls")}return g.promise()},validControl:function(d,k,a,b,f){var g=l.Deferred();
a=a||gx.O;var m=gx.fn.validStruct(d,a),p=!0;if(void 0!=m){if(0!=m.grid){var u=b?b:gx.fn.currentGridRowImpl(m.grid);gx.lang.emptyObject(u)||gx.fn.setCurrentGridRow(m.grid,u)}1==m.isuc?(u=0!=m.grid?b?b:gx.fn.currentGridRowImpl(m.grid):null,m.getUCInstance(u),m.uc.execC2VFunctions()):"function"==typeof m.c2v&&m.c2v();gx.fn.call_v2bc(m,a);try{if(0==m.lvl||0!=m.grid&&gx.fn.gridRowIsMod(m.lvl,gx.fn.currentGridRow(m.grid))||!a.isTransaction()){var x=null;if(x=1==m.isuc?m.uc.getRealControl():gx.fn.getControlGridRef(m.fld,
m.grid))return this.validate(x,d,k,a,b,f).done(function(w){try{var A=!1,q=!0,v=-1;0!=m.grid&&(A=gx.fn.rowIsRemoved(m.grid,gx.fn.currentGridRow(m.grid)));w||A||(gx.csv.invalidControl=x,gx.csv.invalidId=d,q=!1,v=d);gx.csv.lastId=d;0==gx.fn.isAccepted(x)&&(gx.csv.ExecutingOnBlur||gx.evt.executeOnblur(d,x),x.getAttribute("data-gxhiddenonchange")!=x.value&&(x.setAttribute("data-gxhiddenonchange",x.value),gx.evt.execOnchange(x,!1,!0)))}catch(t){gx.dbg.logEx(t,"gxapi.js","validControl - callback")}g.resolve({ret:q,
ctrl:v})}),p=!1,g.promise()}}catch(w){gx.dbg.logEx(w,"gxapi.js","validControl")}}p&&g.resolve({ret:!0,ctrl:-1});return g.promise()},validate:function(d,k,a,b,f,g){var m=l.Deferred();b=b||gx.O;var p=!0;gx.csv.anyError=!1;var u=gx.fn.validStruct(k,b);if(void 0==u)return m.resolve(!0),m.promise();gx.csv.refreshVars(u,b);if(null==u.fnc&&null==u.isvalid){if("SELECT"!=d.tagName&&"checkbox"!=d.type&&!gx.evt.eachKeyAutorefreshType(u.type)&&!gx.lang.emptyObject(u.rgrid)){p=u.rgrid.length;for(var x=0;x<p;x++)u.rgrid[x].filterVarChanged()}m.resolve(!0);
return m.promise()}try{if(-1!=k&&(a||"1"!=d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE))){gx.csv.currentId=k;var w=gx.evt.startValidation(u.gxgrid,!0);gx.csv.refreshVars(u);a=function(A){1==b.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=d),gx.csv.anyError=!0,b.AnyError=0);gx.csv.anyError&&(A=!gx.csv.anyError);if(!A)return gx.evt.endValidation(w),m.resolve(!1),m.promise();gx.csv.refreshControls(u,b,f);gx.csv.invalidateDeps(k,b);if(!gx.lang.emptyObject(u.rgrid)&&!gx.lang.emptyObject(u.hc)){A=
u.rgrid.length;for(var q=0;q<A;q++)u.rgrid[q].filterVarChanged()}var v=gx.fn.isAccepted(d,!1,b),t=function(){m.resolve(!0);try{if(!g){var J=gx.dom.byId(d.id);v?gx.fn.setControlGxValid(J,"1"):gx.fn.setControlGxValid(J,"0")}gx.evt.endValidation(w)}catch(n){gx.dbg.logEx(n,"gxapi.js","validate")}};if(null!=u.isvalid&&v&&"1"!=d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&!g)if(q=u.gxgrid?u.gxgrid:null,A=u.isvalid,gx.pO.supportAjaxEvents){q=u.gxgrid?u.gxgrid.gridId:!1;var B=b.isServerEvent(A);A?gx.evt.dispatcher.dispatch(b.getServerEventName(A),
b,q,f,B).done(t).fail(t):b[A](f).then(t)}else{var G=gx.csv.instanciatedRowGrid;gx.csv.instanciatedRowGrid=q;b[A](f).then(function(){gx.csv.instanciatedRowGrid=G;t()})}else t()};p=!1;u.isuc?a.call(this,u.fnc.call(u.uc)):null!=u.fnc?(x=u.fnc.call(b))&&x.done?x.done(a.closure(this)):a.call(this,x):a.call(this,!0)}}catch(A){gx.dbg.logEx(A,"gxapi.js","validate")}p&&m.resolve(!0);return m.promise()},invalidateForm:function(){if(1!=gx.O.AnyError)for(var d=gx.fn.controlIds(),k=d.length,a=0;a<k;a++){var b=
gx.fn.validStruct(d[a]);b&&b.fld&&!b.isuc&&(b=gx.fn.getControlGridRef(b.fld,b.grid),this.invalidateGXCtrl(b,!1))}},invalidateGXCtrl:function(d,k){"undefined"===typeof k&&(k=!0);d&&(1!=d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)||k&&!gx.csv.controlValueHasChanged(d)||gx.fn.setControlGxValid(d,"0"))},invalidateCtrl:function(d,k){try{this.invalidateGXCtrl(d);var a=gx.fn.validStruct(gx.O.focusControl);if(a&&0!=a.grid&&(!0===k||gx.evt.keyModifiesValue(k))){var b=gx.fn.controlRowId(d)||gx.fn.currentGridRowImpl(a.grid)||
"0001";a.gxgrid.setRowModified(b)}}catch(f){gx.dbg.logEx(f,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(d,k){for(var a=gx.fn.controlIds(k),b=a.length,f=0;f<b;f++){var g=a[f];if(g>d){g=gx.fn.validStruct(g,k);for(var m=g.ip?g.ip.length:0,p=0;p<m;p++)if(g.ip[p]==d)if(0==g.grid){var u=gx.fn.getControlGridRef(g.fld,g.grid);u&&gx.fn.setControlGxValid(u,"0")}else{var x=gx.fn.getGridObj(g.grid);if(x)for(var w=x.grid.rows.length,A=0;A<w;A++){u=x.grid.rows[A];var q=u.gxDeleted(),v=u.gxExists();!q&&
v&&(x.setRowModified(u.gxId),(u=gx.fn.getControlRef(g.fld+"_"+u.gxId))&&gx.fn.setControlGxValid(u,"0"))}}}}},controlValueHasChanged:function(d,k,a){if(!d)return!1;"undefined"===typeof k&&(k=d.value);var b=d.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE),f=gx.applyPicture(a,b,d);return null===b||f!==gx.applyPicture(a,k,d)||gx.evt.fixWebKitOnFocus()&&"radio"===d.type},setFormatError:function(d,k){d=gx.dom.el(d);if(d.id){var a=void 0!==this.gxFormatErrors[d.id];k||"undefined"==typeof k?(a||(this.gxFormatErrors[d.id]=
this.gxFormatErrors.push(d.id)-1),d.GXFormatError=!0):(a&&this.gxFormatErrors.splice(this.gxFormatErrors[d.id],1),delete this.gxFormatErrors[d.id],d.GXFormatError=!1)}},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var d=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var k=gx.fn.validStruct(gx.O.focusControl);
if(k&&k.nac&&1==k.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var a=gx.fn.searchFocusFwd(cn);null!=a&&gx.fn.setFocus(a);gx.setVar("Gx_mode",d);return!0}gx.setVar("Gx_mode",d)}catch(b){}return!1},loadScreen:function(d){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0,void 0,void 0,d,!1))}catch(k){gx.dbg.logEx(k,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(d,
k){var a=k||gx.O;return a&&a.IsMasterPage&&0!=d.indexOf("MP")&&(a=this.CTRL_ROW_INDEX_REGEXP.exec(d))&&1<a.length?(d=a[1],k=2<a.length?"_"+a[2]:"",d+(-1===d.indexOf("_MPAGE")?"_MPAGE":"")+k):(k=(k?k.CmpContext:this.cmpCtx)||"")&&0==d.indexOf(k)||0<=d.search(gx.GxObject.CONTROL_CMP_REGEX)?d:k+d},isProperty:function(d){return d instanceof Array&&2==d.length||"object"==typeof d&&"undefined"!=typeof d[0]&&"undefined"!=typeof d[1]?!0:!1},checkGridChange:function(d,k,a,b){if(d){var f=d.gridId;d=gx.fn.currentGridRowImpl(f);
gx.csv.validGridRowChange(f,d,a,d).done(function(){var g=a.getGridById(f,b);gx.csv.checkGridChange(g.parentGrid,!0,a,b)})}},checkRowChange:function(d,k,a,b){var f=l.Deferred();try{var g=gx.fn.validStruct(d,a);if("undefined"!=typeof g){var m=g.grid;if(0!=m){var p=gx.fn.currentGridRowImpl(m);if(p&&(p!=b||k)&&1<p.length&&b&&1<b.length){gx.csv.rowChanged=!0;var u=a.Gx_BScreen;a.Gx_BScreen=1;gx.csv.validGridRowChange(m,p,a,b).done(function(x){x&&(x=a.getGridById(m,b))&&(x.instanciateRow(p),x.parentGrid&&
gx.csv.checkGridChange(x.parentGrid,!0,a,b));a.Gx_BScreen=u;f.resolve(!0)})}else f.resolve(!1);void 0!=p&&gx.fn.setCurrentGridRow(m,p)}else f.resolve(!1)}else f.resolve(!1)}catch(x){gx.dbg.logEx(x,"gxfrmutl.js","checkRowChange")}return f.promise()},validGridRow:function(d,k){void 0!=k&&gx.fn.setCurrentGridRow(d,k);k=gx.fn.firstGridControl(d);d=gx.fn.lastGridControl(d);gx.csv.validControls(k,d+1,!0,gx.O)},validGridRowChange:function(d,k,a,b){var f=l.Deferred();void 0!=b&&gx.fn.setCurrentGridRow(d,
b);var g=gx.fn.firstGridControl(d,a),m=gx.fn.lastGridControl(d,a);b=!gx.lang.emptyObject(b)&&!gx.lang.emptyObject(k)&&b.length==k.length&&parseInt(b)>parseInt(k);gx.csv.anyFormatError()?(a=gx.csv.gxFormatErrors,gx.csv.invalidForcedCtrl=gx.csv.invalidForcedCtrl||{},gx.csv.invalidForcedCtrl.Ctrl=gx.dom.el(a[0]),gx.csv.invalidForcedCtrl.ForceFocus=!0,gx.fn.setFocus(gx.csv.invalidForcedCtrl.Ctrl),f.resolve(!1)):gx.csv.validControls(g,m+1,!0,a,b).done(function(p){!p&&gx.csv.stopOnError||gx.csv.changeGridRow(d,
g,k);f.resolve(p)});return f.promise()},changeGridRow:function(d,k,a){gx.csv.lastId=k;gx.O.fromValid>k&&(gx.O.fromValid=k);gx.csv.lastRow[d]=a;gx.O.Gx_BScreen=1},targetRowIsMod:function(d){return(d=gx.fn.validStruct(d))?gx.fn.gridRowIsMod(d.lvl,gx.fn.currentGridRow(d.grid)):!1},refreshVars:function(d,k){for(var a=d.ip?d.ip.length:0,b=0;b<a;b++)try{"function"==typeof gx.fn.validStruct(d.ip[b],k).c2v&&gx.fn.validStruct(d.ip[b],k).c2v()}catch(f){gx.dbg.logEx(f,"gxapi.js","refreshVars")}},refreshControls:function(d,
k,a){for(var b=d.op?d.op.length:0,f=0;f<b;f++)try{var g=gx.fn.validStruct(d.op[f],k),m=null;if(0==g.grid)gx.fn.v2c(g),m=gx.dom.el(gx.csv.ctxControlId(g.fld));else{var p=gx.fn.currentGridRowImpl(g.grid);gx.text.endsWith(a,p)&&(gx.fn.v2c(g),m=gx.fn.getControlGridRef(g.fld,g.grid))}m&&gx.fn.setControlGxValid(m,"0")}catch(u){gx.dbg.logEx(u,"gxapi.js","refreshControls")}b=d.ucs?d.ucs.length:0;for(f=0;f<b;f++)try{gx.fn.validStruct(d.ucs[f],k).uc.execV2CFunctions(!0)}catch(u){gx.dbg.logEx(u,"gxapi.js","refreshControls")}},
setValidValues:function(d,k,a){var b=[];if(1<a.length-k.length){var f=gx.json.evalJSON(a[a.length-1]);for(h in f)gx.fn.setHidden(h,f[h]);b=gx.json.evalJSON(a[a.length-2])}f={};d={fields:d,msgs:b};gx.O.cmpCtx?f[gx.O.cmpCtx]=d:f.MAIN=d;gx.fn.setErrorViewer(f);if(!gx.O.AnyError){var g=!1;d=k.length;for(f=0;f<d;f++){var m=k[f];b=a[f];if(this.isProperty(m)){var p=gx.fn.vStructForVar(m[0])||gx.O.getValidStructFld(m[0]);null!=p&&gx.fn.setCtrlProperty(p.fld,m[1],b)}else if(p=gx.fn.validStruct(this.currentId),
gx.lang.emptyObject(p)||gx.lang.emptyObject(p.hc)||(p.hc==m?(gx.O[p.hc]=b,gx.fn.setHidden(this.cmpCtx+"GXH_"+p.fld,b)):p.hd==m&&(gx.O[p.hd]=b)),p=gx.fn.vStructForVarWId(m,this.currentId),gx.lang.emptyObject(p)){p=gx.fn.vStructForHC(m);if(null!=p){var u="";0!=p.grid&&(u="_"+gx.fn.currentGridRow(p.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+p.fld+u,b)}p=gx.fn.gridObjFromGxO(m);void 0!=p?(g=!0,p.loadGrid({rowProps:b})):gx.fn.saveLvlOldParm(m,b)&&(gx.setVar(m,b),gx.fn.setGridHidden(m,b))}else m=gx.fn.screen_CtrlRef(p.fld),
!gx.lang.emptyObject(m)&&b instanceof Object&&("SELECT"==m.tagName?(-1!=m.selectedIndex&&gx.fn.invalidEmptyValue(b)&&(b.s=m.options[m.selectedIndex].value),u=gx.dom.id(m),gx.fn.loadComboBox(u,b.v),gx.fn.setComboBoxValue(u,b.s)):gx.lang.emptyObject(b.s)||(b.s=gx.fn.trimSelectValue(b.s,p.type)),u=gx.fn.selectedDescription(b,p.type),b=gx.lang.emptyObject(b.s)&&!gx.lang.emptyObject(m.value)?m.value:"SPAN"!=m.tagName||gx.lang.emptyObject(b.s)||gx.lang.emptyObject(u)?b.s:u,gx.fn.setControlValue_span_safe(this.cmpCtx+
p.fld,b,0)),p.v2v&&(p.v2v(b),gx.fn.v2c(p,b,"bits"==p.type))}}gx.O.refreshOlds();gx.fn.enableDisableDelete(gx.O);g&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.gxFormatErrors=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}}}(gx.$);
gx.http_i=function(l){return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(c,d){return"{"!=d[0]&&200==c.status&&0!=c.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")?(gx.dbg.logEx('Unexpected AJAX respose format "'+
c.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(c,d,k){null!=gx.dom.el(c,!1,!0,!0)?gx.fn.setControlValue_impl(c,d):k&&(gx.dom.createInput(c,"hidden"),gx.fn.setControlValue_impl(c,d))},clearMultipartHidden:function(){this.saveHidden("GXAjaxMultipart","",!1)},clearState:function(){this.viewState=null;this.viewStateLoaded=!1;l(gx.dom.el("GXState")).val("{}")},applyWellKnownPtys:function(){gx.wpo(function(){this.viewState.FORM_Caption&&gx.fn.setCtrlPropertyImpl(document,
"Caption",this.viewState.FORM_Caption)},this)},loadState:function(){gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;var c=gx.dom.el("GXState");if(c){var d=c=c.value;this.useBase64State&&(d=gx.base64.decode(c));this.viewState=gx.json.evalJSON(d);this.viewStateLoaded=!0;this.applyWellKnownPtys()}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(c){if(this.viewState){var d=gx.json.serializeJson(this.viewState,c);c=d;this.useBase64State&&(c=gx.base64.encode(d));d=
gx.dom.el("GXState");null==d?gx.dom.createInput("GXState","hidden"):this.oldState=d.value;gx.fn.setControlValue_impl("GXState",c);this.useStateSignature&&(gx.http.setStateHsh(c),gx.http.setHsh())}},setStateHsh:function(c){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");c=gx.MD5.getHsh(c);gx.fn.setControlValue_impl("GXHSH12",c)},setHsh:function(){for(var c=gx.pO.WebComponents.length,d=0;d<c;d++)gx.http.setObjectHsh(gx.pO.WebComponents[d]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(c){var d=
c.getControlIdsh();if(null!=d){var k="";c.IsComponent&&null!=c.CmpContext&&(k=c.CmpContext);for(var a="",b=0;b<d.length;b++)if((validStruct=c.getValidStruct(d[b]))&&"function"==typeof validStruct.val){var f=gx.fn.getControlValue_impl(k+validStruct.fld);a="checkbox"==validStruct.ctrltype&&""==gx.text.trim(f)?a+validStruct.val():a+f}gx.http.createHsh(k+"GXHSH11",a)}},createHsh:function(c,d){null==gx.dom.el(c)&&gx.dom.createInput(c,"hidden");d=gx.MD5.getHsh(d);gx.fn.setControlValue_impl(c,d)},refreshState:function(){null!=
this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},getCookie:function(c){c+="=";for(var d=document.cookie.split(";"),k=d.length,a=0;a<k;a++){for(var b=d[a];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(c))return b.substring(c.length,b.length)}return null},setCookie:function(c,d,k,a,b){k=k||1;var f=[];k=new Date((new Date).getTime()+864E5*k);f.push(c+"="+escape(d));b&&f.push("path="+b);f.push(a?"session":"expires="+k.toGMTString());"https:"===location.protocol&&
(f.push("secure"),f.push("samesite=none"));document.cookie=f.join(";");return this.getCookie(c)==d},checkResponseStatus:function(c,d){return c.status==this.STATUS_FORBIDDEN?!1:c.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(d),!0):this.isBadResponse(c)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",c.status)),!0):c.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.timeoutActions.warn&&
gx.http.reloadOnTimeout(d),!0):!1},isSessionTimeoutError:function(c,d){return!gx.gen.isDotNet()&&!gx.gen.isDotNetCore()&&d&&c&&gx.pO.AjaxSecurity&&c.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==d.name&&2147500037==d.result||"Error"==d.name&&-2146697209==d.number||"NETWORK_ERR"==d.name&&101==d.code)?!0:!1},reloadOnTimeout:function(c){if((c||gx.pO.fullAjax||gx.pO.AjaxSecurity)&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(c){""==
document.location.hash?this.redirect(location.href,!1,c):document.location.reload()},redirect:function(c,d,k,a,b){b=void 0===b?!0:b;a=a||gx.O;var f=gx.popup.getPopup();if(null!=f&&gx.util.sameAppUrl(c)&&(f=f.window.gx.popup.lvl,-1!=f)){var g=gx.http.urlParameterPrefix(c);g+=encodeURIComponent("gxPopupLevel="+f+";");c+=g}b&&!gx.isabsoluteurl(c)&&(c=gx.absoluteurl(c));d?gx.evt.redirecting=!0:setTimeout(function(){gx.ajax.enableForm()},200);gx.spa.started&&!k?(gx.spa.redirect(c),gx.pO!=a?a.endFeedback():
gx.ajax.enableForm()):(gx.pO.startFeedback(!1),location.href=c)},getRequest:function(){var c=null;window.XMLHttpRequest&&(c=new XMLHttpRequest);if(!c)try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(k){}}return c},postDataFormat:{HTTP:0,JSON:1},getPostData:function(c,d){d=d||gx.http.postDataFormat.HTTP;var k=d==gx.http.postDataFormat.HTTP?[]:{};if(c.reqData)k=c.reqData;else{c=c.formNode;c="Form"==c.tagName?c.elements:l("input[type!=file],textarea,select");
for(var a=c.length,b=0;b<a;b++){var f=gx.http.elementPostData(c[b],d);null!=f&&(d==gx.http.postDataFormat.HTTP?k.push(f):k[f[0]]=f[1])}}gx.lang.isArray(k)&&d==gx.http.postDataFormat.HTTP&&(k=k.join("&")+"&");return k},elementPostData:function(c,d){if(gx.json.isNonSerializable(c.name)||"FIELDSET"==c.tagName)return null;var k="";if("select-multiple"==c.type)for(var a=c.options.length,b=0;b<a;b++)c.options[b].selected&&(k=c.options[b].value);else if("radio"==c.type||"checkbox"==c.type)if(c.checked)k=
c.value;else{if("radio"==c.type)return null}else k="image"===c.type?c.src:this.element_gxvalue(c);return d==gx.http.postDataFormat.HTTP?encodeURIComponent(c.name)+"="+encodeURIComponent(k):[c.name,k]},element_gxvalue:function(c){return c.gxtype&&"dtime"==c.gxtype.type?(dt=new gx.date.gxdate(c.value,gx.dateFormat),dt.HasTimePart=0<c.gxtype.dec,dt.HasDatePart=0<c.gxtype.len,gx.date.dttoc(dt,c.gxtype.len,c.gxtype.dec)):c.value},doHandleRequest:function(c,d){if(c.readyState==this.STATE_DONE){if(c.status==
this.STATUS_OK||d.handleAllStatusCodes){var k=new gx.util.Url(c.responseURL);if(gx.text.endsWith(k.path,".html")){window.location.href=c.responseURL;return}this.isOffline(c)&&(this.handleOffline(c),d.offline&&d.offline.call(d.obj||window,c,d));this.doCallHandler(c,d)}else gx.http.checkResponseStatus(c,d.warnOnTimeout)||gx.lang.doCallTimeout(gx.dom.writeError,document,[c.responseText,gx.getMessage("GXM_runtimeappsrv"),c.status],50);d.always&&d.always.call(d.obj||window,c,d);window.gx&&(gx.dbg.logPerf("execEvt",
"Event Executed"),gx.dbg.printPerformanceLog())}},onRequestError:function(c,d){d.error&&d.error.call(d.obj||window,c,d);d.always&&d.always.call(d.obj||window,c,d);gx.evt.setProcessing({status:!1,cond:!gx.csv.isvalidating(),ctx:"onRequestError"});c.readyState==this.STATE_DONE?gx.http.checkResponseStatus(c,d.warnOnTimeout):this.isBadResponse(c)&&gx.http.reloadOnTimeout(d.warnOnTimeout)},isBadResponse:function(c){return c.status==this.STATE_UNSENT&&gx.lang.emptyObject(c.responseText)?!0:!1},doCall:function(c){c.gxInitiator=
gx.util.executionContext.getContext();gx.util.alert.hide();c.handler||"function"!=typeof c.load||(c.handler=c.load);"boolean"!=typeof c.sync&&(c.sync=!1);c.method||(c.method="POST");if(c.multipart&&"POST"==c.method)this.doMultipartPost(c);else{var d=this.getRequest();if(null!=d){if("function"==typeof c.handler&&!c.sync){var k=gx.http.doHandleRequest.closure(this,[d,c]),a=gx.http.onRequestError.closure(this,[d,c]);gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?d.onreadystatechange=k:(d.onload=
k,d.onerror=a)}k=null;"POST"==c.method&&(k=gx.http.getPostData(c));a=!1!==c.avoidCache?this.uncache(c.url):c.url;d.open(c.method,a,!c.sync);d.setRequestHeader("Accept","*/*,text/html");!1!==c.ajaxHeader&&d.setRequestHeader(gx.ajax.reqHeader,"1");d.setRequestHeader(gx.util.browser.GX_TAB_ID_HEADER,gx.util.browser.tabId);"POST"==c.method&&d.setRequestHeader("Content-Type",c.contentType?c.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&gx.AjaxSecurity&&gx.OnSessionTimeout==gx.timeoutActions.ignore&&
d.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(d,c.gxO);c.beforeSend&&c.beforeSend.call(c.obj||window,d);try{d.send(k)}catch(b){gx.dbg.logEx(b,"gxapi.js","doCall")}"function"==typeof c.handler&&c.sync&&gx.http.doHandleRequest(d,c);return d}}return null},doCallHandler:function(c,d){if(!d.gxInitiator||!gx.util.executionContext.changedContext(d.gxInitiator))if(d.obj?d.handler.call(d.obj,null,c.responseText,c):d.handler(null,c.responseText,c),window.gx&&"function"===typeof d.onReady)d.onReady()},
doMultipartPost:function(c){gx.http.saveState(!0);this.getPostIFrame().gxPostInfo=c;var d=c.formNode;c.oldAction=d.getAttribute("action");d.setAttribute("action",c.url);c.oldTarget=d.getAttribute("target");d.setAttribute("target",this.iframeName);c.reqData&&(gx.http.saveHidden("GXAjaxMultipart",c.reqData,!0),this.setSecurityToken(null,c.gxO));d.submit()},setSecurityToken:function(c,d){(d=gx.ajax.getSecurityToken(d))&&(gx.dom.hasSelectedFile()?gx.http.saveHidden("X-GXAUTH-TOKEN",d.value,!0):c.setRequestHeader("X-GXAUTH-TOKEN",
d.value));(d=gx.http.getCookie("XSRF-TOKEN"))&&c.setRequestHeader("X-XSRF-TOKEN",d)},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":"load"},getPostIFrame:function(){var c=this.iframeName,d=gx.dom.byId(c);d&&d.frameElement&&(d=d.frameElement);d||(d=document.createElement("div"),d.innerHTML='<iframe id="'+c+'" name="'+c+'" src="about:blank">',document.body.appendChild(d),
d=d.firstChild,document.body.appendChild(d),window[c]=d,d.name=c,d.setAttribute("name",c),d.id=c,d.style.position="absolute",d.style.left="0px",d.style.top="0px",d.style.height="1px",d.style.width="1px",d.style.visibility="hidden");gx.evt.attach(d,this.iFrameloadEventName(),gx.http.iframeOnload);return d},iFrameJsonResponse:function(c){return l(c).find("input[data-response-content-type='application/json']").val()},captureIframeHTTPStatusCode:function(c){var d=/HTTP Status (\d\d\d)/gi,k=0;c.title&&
(c=d.exec(c.title),0<c.length&&(k=Number(c[1])));return{status:k}},iframeOnload:function(){var c=gx.dom.byId(gx.http.iframeName);if(!gx.http.useReadyStateEvent()||"complete"==c.readyState)if(c||(c=window.frames[gx.http.iframeName]),c&&c.frameElement&&(c=c.frameElement),c)try{gx.http.useReadyStateEvent()&&(c.src="about:blank",gx.evt.detach(c,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var d=c.gxPostInfo,k=d.formNode;k.setAttribute("action",d.oldAction);k.setAttribute("target",d.oldTarget);
var a=c.contentDocument?c.contentDocument:c.contentWindow.document;if(a){var b=a.body,f=gx.http.iFrameJsonResponse(b),g=!gx.lang.emptyObject(f);g||(g=gx.dom.allChildrenAreText(b))&&(f=gx.http.multipartResponse(b));if(g){var m=gx.base64.decode(f);gx.http.clearMultipartHidden();d.handler(null,m,d);if(window.gx&&"function"===typeof d.onReady)d.onReady();d.always&&d.always.call(d.obj||window,null,d)}else{var p=gx.http.captureIframeHTTPStatusCode(a);gx.http.checkResponseStatus(p,d.warnOnTimeout)||document.write(a.documentElement.innerHTML)}}}catch(u){c=
"Unknown error";k=gx.getMessage("GXM_NetworkError").replace("%1","NoStatusCode");gx.text.startsWith(u.message,"Blocked a frame with origin")&&(c="Upload File Changed",k=gx.getMessage("GXM_FileUploadFileChanged"),l('input[type="file"]').val(""));gx.dbg.logEx(u,"gxapi.js","FileUpload error: "+c);if(d.error)d.error.call(d.obj||window,null,d);else if(gx.fx.obs.notify("gx.afterNonFullajax"),window.gx&&"function"===typeof d.onReady)d.onReady();d.always&&d.always.call(d.obj||window,null,d);gx.util.alert.showError(k)}},
multipartResponse:function(c){var d="";try{d=l(c).text()}catch(k){gx.dbg.logEx(k,"gxapi.js","multipartResponse")}return d},uncache:function(c){var d=(new Date).getTime();return c+gx.http.urlParameterPrefix(c)+"gx-no-cache="+d},callBackend_simple:function(c,d,k,a,b,f,g,m){gx.http.callBackend_impl(void 0,c,d,gx.http.modes.none,k,a,b,f,g,m)},callBackend:function(c,d,k,a,b,f,g,m,p,u,x){gx.http.callBackend_impl(c,d,a,b,f,g,m,p,u,x)},callBackend_impl:function(c,d,k,a,b,f,g,m,p,u,x){var w=this.getRequest();
u=u||{};if(w){try{var A=gx.O;b||A.startFeedback();f="undefined"!=typeof f?f:"GET";g="undefined"!=typeof g?g:null;p="undefined"!=typeof p?p:!1;m||(d=this.uncache(d));w.open(f,d,p);w.setRequestHeader(gx.ajax.reqHeader,"2");for(var q in u)w.setRequestHeader(q,u[q]);try{"POST"==f?w.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.timeoutActions.ignore&&w.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken)}catch(t){gx.dbg.logEx(t,
"gxapi.js","callBackend_impl: gx.O cannot be null")}var v=function(){b||A.endFeedback();this.lastStatus=w.status;this.lastResponse=w.responseText;if(w.readyState!=this.STATE_DONE||w.status!=this.STATUS_OK)gx.http.checkResponseStatus(w)||(window.status="GXAjax HTTP error: ("+w.status+") - "+w.statusText,gx.dbg.logEx(w.responseText),x&&x());else if(a!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(a==this.modes.full)this.handleFull(this.lastResponse);
else if(a==this.modes.call)return this.handleCall(this.lastResponse,c);return this.handleRetVal(this.lastResponse,c,k)}catch(t){gx.dbg.logEx(t,"gxapi.js","callBackend"),x&&x()}}else window.status="GXAjax HTTP error: (bad response format)",x&&x()}.closure(this);p&&(gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?w.onreadystatechange=v:w.onload=v);w.send(g);p||v()}catch(t){window.status="GXAjax HTTP error: "+t.message}window.status=""}},handleFull:function(c){gx.http.postHandler(null,c,{status:200,
responseText:""})},handleCall:function(c,d){if(d){var k=l.parseJSON(c);if(gx.lang.isArray(k))return d(k);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+c)}},handleRetVal:function(c,d,k){var a=gx.json.evalJSON(c),b=a[0];this.lastStatus=a[1];void 0==this.lastStatus&&(this.lastStatus=0);if(d&&(k||null==this.lastStatus||0==this.lastStatus)){k=l.parseJSON(c);if(gx.lang.isArray(k))return d(k);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+
c)}else return b},postHandler:function(c,d,k,a){try{if(gx.csv.lastEvtResponse=null,200>k.status||299<k.status)gx.dom.writeError(k.responseText,gx.getMessage("GXM_runtimeappsrv"),k.status);else if(gx.http.validJsonResponse(k,d)){var b=gx.json.evalJSON(d);null==b?gx.dom.writeError(d.toString(),gx.getMessage("GXM_runtimeappsrv"),k.status):(gx.http.refreshState(),gx.csv.lastEvtResponse=b,gx.fn.forceEnableControls(!0),b.rowId=this.rowId,b.gridId=this.gridId,gx.ajax.setPostResponse(b,gx.O,a).done(function(f){f||
(gx.fx.obs.notify("gx.onafterevent",[b]),gx.fx.obs.notify("gx.afterNonFullajax"))}))}}catch(f){gx.dbg.logEx(f,"gxapi.js","postHandler")}},encodeUriSegment:function(c){return encodeURIComponent(c).replace(/%20/g,"+")},formatLink:function(c,d,k){k=void 0===gx.csv.useNamedParameters||!0===gx.csv.useNamedParameters?k:void 0;c=gx.ajax.objectUrl(c);if(d&&0<d.length){var a=",",b="";k&&(a="&");c+="?";for(var f=d.length,g=0;g<f;g++){0<g&&(c+=a);k&&(b=k[g]+"=");var m=gx.http.encodeUriSegment("function"==typeof d[g].getUrlVal?
d[g].getUrlVal():d[g]);m=g===f-1&&""===m&&!1===gx.csv.useNamedParameters?",":m;c+=b+m}}return c},loadScripts:function(c,d,k,a){"undefined"==typeof k&&(k=0);k>=c.length?d():gx.http.loadScript(c[k],function(b,f,g){gx.http.loadScripts(b,f,g+1,a)}.closure(this,[c,d,k]),a)},loadStyle:function(c,d,k,a,b){if(a=b?document.querySelector('style[data-gx-href="'+a+'"]'):a?gx.dom.byId(a):null)a.href=c;else{var f=gx.dom.byTag("head")[0];b?(a||(a=document.createElement("style"),a.setAttribute("data-gx-href",c)),
a.innerHTML='@import url("'+c+'") layer('+b+")"):(a=document.createElement("link"),a.rel="stylesheet",a.type="text/css",a.href=c);"function"==typeof d&&(a.onload=d);k?(c=gx.getThemeElement(),l(a).insertBefore(c),gx.util.browser.isIE()&&l(c).insertAfter(a)):f.appendChild(a)}},applyDeferredStyles:function(){l("link[rel='preload'][as='style']").each(function(c,d){d.rel="stylesheet"})},layerNaming:function(c){return c.replace(/\?\w*$/,"").replace(/[\/\.]/g,"_")},loadStyles:function(){var c=gx.fn.getHidden("GX_STYLE_FILES");
if(!gx.lang.emptyObject(c))for(var d=0;d<c.length;d++){var k=c[d];k=gx.util.resolveUrl(k);gx.cache.fileLoaded(k)||(gx.cache.addRemoteFile(k),this.loadStyle(k,void 0,!0,void 0,this.layerNaming(k)))}},doCommands:function(){var c=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(c)||gx.ajax.dispatchCommands(c)},isOffline:function(c){return"1"===c.getResponseHeader("X-GX-OFFLINE")},handleOffline:function(c){gx.util.alert.showError(gx.getMessage("GXM_OfflineUnsupported"))},useNamedParameters:function(c){return!1===
gx.csv.useNamedParameters?!1:-1<c.indexOf("=")},urlParameterSeparator:function(c){return this.useNamedParameters(c)?"&":","},urlParameterPrefix:function(c){var d=c.indexOf("?");return-1<d?d==c.length-1?"":this.urlParameterSeparator(c):"?"}}}(gx.$);gx.$.extend(gx.evt,gx.evt_i);gx.$.extend(gx.csv,gx.csv_i);gx.$.extend(gx.http,gx.http_i);var defaultConfig={popup:{ignoreCmdsOnCancel:!1},websocket:{},timezone:{reload:!0},evt:{dblclick:{delay:450}},number:{validation:{strict:!0}},csv:{scrollTopOnError:!1}};
gx.config=gx.$.extend({},defaultConfig,window.gxCustomConfig||{});var GlobalEvents=function(l){return{executeMethod:function(c,d){try{var k=function(a){a.gx&&a.gx.fx.obs.notify(c,d)};k(window.top);window.top.document.querySelectorAll("iframe").forEach(function(a,b){k(a.contentWindow)})}catch(a){gx.dbg.logEx(a,"gxapi.js","GlobalEvents.executeMethod")}}}}(jQuery);
gx.util.browser.isIE()&&function(){function l(c,d){d=d||{bubbles:!1,cancelable:!1,detail:void 0};var k=document.createEvent("CustomEvent");k.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return k}if("function"===typeof window.CustomEvent)return!1;l.prototype=window.Event.prototype;window.CustomEvent=l}();
gx.fx.obs.addObserver("gx.onload",gx,function(){var l={};gx.serviceWorkerUrl&&"serviceWorker"in navigator&&(gx.staticDirectory&&gx.basePath&&(l={scope:gx.util.resourceUrl(gx.basePath,!1)+"/"}),navigator.serviceWorker.register(gx.serviceWorkerUrl,l).then(function(c){console.log("Service Worker Registered:",gx.serviceWorkerUrl,"scope: ",c.scope)}))});
(function(l){function c(n,r){n=l(n);var y=n.is("SPAN,DIV");return n.attr(r)||(y?n.find("> a").first().attr(r):"")}var d=gx.GxObject.prototype;d.sPrefix=function(){return this.CmpContext};d.declareDomainHdlr=function(n,r){this.GXValidFnc[n].dom_hdl=r};d.setVCMap=function(n,r,y,C,D,F){this.VarControlMap[n]={id:r,grid:y,type:C,length:D,decimals:F}};d.setSDTMapping=function(n,r){this.SDTMap=this.SDTMap||{};this.SDTMap[n]=r;n={};for(var y in r)r[y].extr&&(n[r[y].extr]=y);r.extrn=n};d.applySDTVarMapping=
function(n,r){if(this.VarControlMap[r]&&this.VarControlMap[r].type)var y=this.VarControlMap[r].type;return this.applySDTMapping(n,y,!0)};d.applySDTMapping=function(n,r,y){if(n&&r){r=this.SDTMap?this.SDTMap[r]:void 0;var C;if(r){for(C in r.extrn)y?(n[r.extrn[C]]=n[C],delete n[C]):(n[C]=n[r.extrn[C]],delete n[r.extrn[C]]);for(C in r)if(r[C].sdt){var D=n[C]?n[C].length:0;if(D)for(var F=0;F<D;F++)this.applySDTMapping(n[C][F],r[C].sdt,y);else this.applySDTMapping(n[C],r[C].sdt,y)}}}return n};d.Initialize=
function(){this.InitStandaloneVars();gx.wpo(function(){this.initTargets()},this)};d.InitStandaloneVars=function(){var n=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=n&&gx.setGxO(n)};d.getCmpType=function(n){n=this.cmpRegex.exec(n);this.cmpRegex.lastIndex=0;return n};d.getContainer=function(){if(this.containerControl)return gx.dom.byId(this.containerControl);if(!this.CmpContext&&!this.IsMasterPage)return l(".gx-content-placeholder").get(0)||document.body;var n,r=this.getCmpType(this.CmpContext);
r&&(n=gx.dom.byId(r[1]+"gxHTMLWrp"+r[2]+(r[3]||"")));if(n)return n};d.setContainer=function(n){this.containerControl=n};d.setObjectType=function(n){this.ObjectType=n};d.getObjectType=function(){return this.ObjectType};d.isTransaction=function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};d.setAjaxSecurity=function(n){this.AjaxSecurity=n};d.setOnAjaxSessionTimeout=function(n){switch(n){case "Warn":this.OnSessionTimeout=gx.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=
gx.timeoutActions.callObj}};d.addKeyListener=function(n,r){gx.evt.addKeyListener(this.CmpContext,n,r)};d.clearMessages=function(){this.MsgList.length=0};d.addMessage=function(n){this.MsgList.push(n)};d.showMessages=function(n){for(var r=[],y=this.MsgList.length,C=0;C<y;C++){var D=this.MsgList[C];"string"===typeof D?r.push({att:"",type:2,text:this.MsgList[C]}):r.push(D)}y={};y[""==this.CmpContext?"MAIN":this.CmpContext]=r;n?gx.fn.setErrorViewer(y,!1):gx.fn.setErrorViewer(y);this.clearMessages()};d.setPrompt=
function(n,r){gx.fn.attachCtrl(this.CmpContext+n,{id:n,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:r,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[n]=function(y){if((y=(y||gx.dom.el(n)).parentNode)&&y.href&&(y=y.href.match("javascript:(.+)"))&&1<y.length){y=decodeURIComponent(y[1]);try{eval(y)}catch(C){gx.dbg.logEx(C,"gxfrmutl.js","setPrompt")}}}};d.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var n=[],r=gx.csv.lastEvtResponse.gxValues,
y=r.length,C=0;C<y;C++){var D=r[C];if(D.CmpContext==this.CmpContext&&gx.lang.booleanValue(D.IsMasterPage)==this.IsMasterPage){n.push(D);break}}gx.fn.setJsonValues(n)}};d.call=function(n,r,y,C){gx.nav.willRedirect(n)?(!1===gx.csv.useNamedParameters&&(C=void 0),this.postEventRedirect={url:gx.http.formatLink(n,r,C),forceDisableFrm:!1}):gx.nav.call.apply(gx.nav,arguments)};d.callUrl=function(n,r){gx.nav.willRedirectByUrl(n)?this.postEventRedirect={url:n,forceDisableFrm:!1}:gx.nav.callUrl.apply(gx.nav,
arguments)};d.popupOpen=function(n){this.postEventPopupCommands.push({popup:gx.lang.clone(n)})};d.popupOpenUrl=function(n,r){this.postEventPopupCommands.push({popup:gx.popup.openUrlToOpenPopupParms(n,r)})};d.refreshInputs=function(n){for(var r=n.length,y=0;y<r;y++){var C=this.getValidStructFld(n[y][1]);null!=C&&"function"==typeof C.c2v&&C.c2v()}};d.refreshOutputs_impl=function(n){for(var r=[],y=0,C=n.length;y<C;y++){var D=n[y];if(D.fld){var F=this.getValidStructFld(D.fld);if(null!=F)gx.fn.v2c(F),
D=gx.fn.getControlGridRef(F.fld,F.grid),gx.csv.invalidateGXCtrl(D),gx.fn.setControlOldValue(D,F.val());else{F=this.getVariable(D.av);if(null!=F&&"object"==typeof F){var H=this.getFormBCForVar(D.av);null!=H&&this.bcToScreen(H,F);(H=this.getGridForColl(D.av))&&H.refreshCollection(F)}gx.fn.setHidden(gx.csv.ctxControlId(D.fld,this),F)}}else D.ctrl&&r.push(D)}gx.uc.StartRender();y=0;for(C=r.length;y<C;y++)D=r[y],gx.uc.isUserControl(D.ctrl)&&(D.ctrl.execV2CFunctions(!1),D.ctrl.execShowFunction());gx.uc.EndRender()};
d.OnClientEventEnd=function(){gx.fn.usrSetFocus_commit()};d.refreshOutputs=function(n){var r=this.postEventPopupCommands;this.postEventPopupCommands=[];this.postEventRedirect&&(r.push({redirect:this.postEventRedirect}),delete this.postEventRedirect);0<r.length&&gx.ajax.dispatchCommands(r);this.refreshOutputs_impl(n);this.showMessages()};d.refreshRowOutputs=function(n){this.refreshOutputs_impl(n)};d.refreshServerOutputs=function(n){for(var r=n.length,y=0;y<r;y++){var C=n[y],D=gx.fn.getHidden(this.CmpContext+
C.fld);void 0!=D&&((C=this.getValidStructFld(C.fld))&&C.v2v?(C.v2v(D),gx.fn.v2c(C,D)):this.setVariable(n[y].av,D))}};d.getContextObject=function(n){return null!=this.getValidStructFld(n)&&(n=gx.fn.getControlValue_impl(this.CmpContext+n),null!=n)?n:""};d.getValidStructId=function(n){if(!gx.lang.emptyObject(n))for(var r=this.getControlIds(),y=0;y<r.length;y++){var C=this.getValidStruct(r[y]);if(this.isSameField(C,n))return r[y]}return-1};d.getValidStructFld=function(n){if("function"==typeof n||"object"==
typeof n&&n.tagName)n="object"==typeof n&&"radio"===n.type&&n.name?n.name:gx.dom.id(n);var r=this.getValidStructFld_cache[n];if(r)return r;if(!gx.lang.emptyObject(n)){r=this.getControlIds();for(var y=r.length,C=0;C<y;C++){var D=this.getValidStruct(r[C]);if(this.isSameField(D,n))return this.getValidStructFld_cache[n]=D}}return this.getValidStructFld_cache[n]=null};d.isSameField=function(n,r){var y=n.fld;if(y==r)return!0;this.IsComponent&&0==r.indexOf(this.CmpContext)&&(r=r.substring(this.CmpContext.length));
0!=n.grid&&(r=r.replace(this.rowPatternRegex,""));this.IsMasterPage&&(y=y.replace(/_MPAGE$/,""),r=r.replace(/_MPAGE$/,""));return y==r};d.getUserFocus=function(){var n=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(n)&&"notset"!=n){var r=gx.dom.byId(n);if(!gx.lang.emptyObject(r)&&!gx.fn.isAccepted(r)){n=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var y=gx.O;gx.O=this;r=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=y;gx.csv.cmpCtx=n;n=gx.lang.emptyObject(r)?"":r.id}}if(gx.lang.emptyObject(n)){if(this.hasMasterPage()&&
(n=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(n)))return n;r=[];for(y=0;y<this.WebComponents.length;y++)if(0==this.WebComponents[y].CmpContext.indexOf("MP"))r.push(this.WebComponents[y]);else if(n=this.WebComponents[y].getUserFocus(),!gx.lang.emptyObject(n))return n;for(y=0;y<r.length&&(n=r[y].getUserFocus(),gx.lang.emptyObject(n));y++);}return n};d.getGridColumn=function(n,r){var y=null,C=gx.fn.controlGridId(n);0!=C&&(r=gx.O.getGridById(C,r))&&(y=r.grid.getColumnByHtmlName(n));return y};
d.hasMasterPage=function(){return null!=this.MasterPage};d.setComponent=function(n){this.CmpControls[n.id.toLowerCase()]=n};d.getComponentByPrefix=function(n){var r=l.map(this.CmpControls,function(y,C){return y.Prefix==n?y:null});return 1==r.length?r[0]:null};d.refreshGrid=function(n){(n=this.getGrid(n))&&n.doRefresh()};d.refreshComponent=function(n){var r=this.getWebComponent(this.CmpContext+this.getComponentData(n).Prefix);r?gx.evt.dispatcher.dispatch("REFRESH",r):(r=gx.fn.controlGridId(n),0!==
r&&(r=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(n).Prefix+gx.fn.currentGridRow(r)))&&gx.evt.dispatcher.dispatch("REFRESH",r))};d.getComponentPrefix=function(n){return(n=this.getComponentData(n))?n.Prefix||"":""};d.getComponentData=function(n){return this.CmpControls[n.toLowerCase()]};d.createWebComponent=function(n,r,y,C,D,F,H){F=F||this.getComponentPrefix(n);C||(n=gx.fn.controlGridId(n),C=0!==n?gx.fn.currentGridRow(n):"");D=D||this.CmpContext+"gxHTMLWrp"+F+C;F=this.CmpContext+F;
var L=gx.getObj(F,!1);L?L.startFeedback():(n=gx.dom.byId(D),n.firstChild&&gx.dom.mask(D));n=gx.gen.isJava()&&gx.pO.PackageName&&!gx.text.startsWith(r,"/")?gx.pO.PackageName+".":"";gx.ajax.dynComponent(n+r,y,F,C).done(function(N){N.DynComponentMap||(N.DynComponentMap={});N.DynComponentMap[F+C]=D;gx.ajax.setJsonResponse({response:N,isPostBack:!0,gxObject:L||gx.O,afterCmpLoaded:function(){H&&H(F)}});L?L.endFeedback():gx.dom.unmask(D)})};d.registerComponent=function(n){this.WebComponents[n.CmpContext]=
n;this.WebComponents.push(n)};d.setWebComponent=function(n,r){this.deleteComponent(n.CmpContext,n,!1);r&&this.restoreComponentHiddens(n.CmpContext,r);this.registerComponent(n);n.JustCreated=!0;gx.fn.setHidden(n.CmpContext,n.ServerClass);gx.fx.obs.notify("webcom.render",[n])};d.getWebComponent=function(n){return this.WebComponents[n]};d.deleteComponent=function(n,r,y){y="undefined"==typeof y?!0:y;var C=this.getWebComponent(n);if(C){var D=gx.gen.isJava()&&C.PackageName?C.PackageName+".":"";gx.cache.deleteInlineCode(n+
D+C.ServerClass.toLowerCase());y&&this.deleteComponentHiddens(n);gx.lang.emptyObject(r)||gx.fn.setHidden(r.CmpContext,r.ServerClass);C.ondestroy();delete this.WebComponents[n];r=this.WebComponents.length;for(y=0;y<r;y++)if(this.WebComponents[y].CmpContext==n){this.WebComponents.splice(y,1);break}for(r=gx.attachedControls.length;r--;)gx.attachedControls[r].info.wc===n&&gx.attachedControls.splice(r,1);r=this.WebComponents;for(var F in r)isNaN(parseInt(F))&&0===F.indexOf(n)&&this.deleteComponent(F)}};
d.deleteComponentHiddens=function(n){if(gx.lang.isArray(n)){if(0==n.length)return;n=gx.fn.getCmpRegex("("+n.join("|")+")")}else n=gx.fn.getCmpRegex(n);n=gx.fn.filterHiddens(n,gx.http.viewState);for(var r in n)r&&gx.fn.deleteHidden(r)};d.restoreComponentHiddens=function(n,r){n=gx.fn.getCmpRegex(n);r=gx.fn.filterHiddens(n,r);for(var y in r)y&&gx.fn.setHidden(y,r[y])};d.setCmpContext=function(n){void 0!=n&&(this.IsTypeComponent=!0,""!==n&&(this.IsComponent=!0),this.CmpContext=n)};d.getOldLvl=function(n){for(var r in this.LvlOlds)for(var y=
this.LvlOlds[r],C=y.length,D=0;D<C;D++)if(y[D]==n)return r;return-1};d.refreshDependantGrids=function(n){for(var r=this.Grids.length,y=0;y<r;y++)for(var C=this.Grids[y],D=C.refreshVars,F=D.length,H=0;H<F;H++)if(D[H].fld==n.fld){C.filterVarChanged();break}};d.getCtrlPropertyValue=function(n,r){var y=gx.fn.getCtrlProperty(n,r);void 0===y&&(y=gx.fn.getHidden(n+"_"+r));return y};d.setGrid=function(n){this.Grids[n.gridName]=n;this.GridsUpper[n.gridName.toUpperCase()]=n;var r=this.getGridIdxByName(n.gridName);
-1!=r?this.Grids[r]=n:this.Grids.push(n)};d.getGrid=function(n){n=n||"";return this.Grids[n]||this.GridsUpper[n.toUpperCase()]};d.getGridIdxByProp=function(n){for(var r=this.Grids.length,y=0;y<r;y++)if(n(this.Grids[y]))return y;return-1};d.getGridIdxByName=function(n){return this.getGridIdxByProp(function(r){return r.gridName===n})};d.getGridByBaseName=function(n){var r=this.getGridIdxByProp(function(y){return y.gridName===n||y.grid.GridBaseName===n});return-1===r?null:this.Grids[r]};d.getGridIdx=
function(n){for(var r=this.Grids.length,y=0;y<r;y++)if(this.Grids[y].gridId==n)return y;return-1};d.getGridById=function(n,r){r=r||"";for(var y=this.Grids.length,C=0;C<y;C++){var D=this.Grids[C];if(D.gridId==n&&(!D.parentRow||gx.text.endsWith(r,D.parentRow.gxId)))return D}return null};d.getGridForColl=function(n){n=this.getAllGridsForColl(n);return 0===n.length?null:n[0]};d.getAllGridsForColl=function(n){for(var r=this.Grids.length,y=[],C=0;C<r;C++){var D=this.Grids[C];D.boundedCollName==n&&y.push(D)}return y};
d.getFormBCForVar=function(n){for(var r in this.FormBCs){var y=this.FormBCs[r];if(y&&y.gxvar==n)return y}return null};d.getGridBC=function(n){var r=n;this.IsComponent&&0===n.indexOf(this.CmpContext)&&(r=n.substring(this.CmpContext.length));return this.GridBCs[r]};d.getFormBC=function(n){var r=n;this.IsComponent&&0===n.indexOf(this.CmpContext)&&(r=n.substring(this.CmpContext.length));return this.FormBCs[r]};d.addGridBCProperty=function(n,r,y,C){var D=this.getGridBC(n);"undefined"==typeof D&&(D={},
D.gxvar=C,this.GridBCs[n]=D);this.addBCProperties(D,r,y,C)};d.addBCProperty=function(n,r,y,C){var D=this.getFormBC(n);"undefined"==typeof D&&(D={},D.gxvar=C,this.FormBCs[n]=D);this.addBCProperties(D,r,y,C)};d.addBCProperties=function(n,r,y,C){if(n&&y)if(r instanceof Array)for(var D=r.length,F=function(L){var N=this[y.gxvar];gx.lang.emptyObject(y.hc)||(N=this[y.hc]);if("date"==y.type)N=(new gx.date.gxdate(N)).getString("Y4MD");else if("bitstr"===y.type&&gx.pO.fullAjax){var O=gx.fn.getControlGridRef(y.fld,
y.grid,L);O&&l(O).val()&&(N="gxformdataref:"+O.id)}this.valueToBCProp(this[C],r,y,N,L)},H=0;H<D;H++){if("undefined"==typeof n[r[H]])if(H<D-1)n[r[H]]={};else{n[r[H]]=y;"object"==typeof this[C]&&(y.v2bc=F);break}n=n[r[H]]}else"string"==typeof r&&(n[r]=y)};d.valueToBCProp=function(n,r,y,C,D){try{if(n){var F=r.length,H=D||"",L=D=0,N,O=function(Q){if(gx.lang.isArray(Q)&&y&&y.grid){var W=gx.fn.getGridObj(y.grid,H&&4===H.length?H:void 0);W=W&&W.grid&&!W.InfiniteScrolling?W.grid.firstRecordOnPage:0;N=H?H:
gx.fn.currentGridRow(y.grid);3<N.length&&(L+=1,N=N.substr(-4*L,4),Q=Q[Number(W||0)+Number(N)-1])}return Q};for(n=O(n);n&&D<F-1;D++)n[r[D]]||(n[r[D]]={}),n=O(n[r[D]]);n&&(D=r.length-1,n[r[D]]=C,void 0!==n[r[D]+"_N"]&&(n[r[D]+"_N"]=0))}}catch(Q){gx.dbg.logEx(Q,"gxfrmutl.js","valueToBCProp")}};d.bcToScreen=function(n,r){for(var y in n)if("gxvar"!=y)try{if("object"==typeof r[y])this.bcToScreen(n[y],r[y]);else{var C=n[y];(0==C.grid||gx.csv.validatingGrid&&C.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(C.hc)&&
void 0!=r[y]&&C.v2v&&(C.v2v(r[y]),gx.fn.v2c(C,r[y]))}}catch(D){gx.dbg.logEx(D,"gxfrmutl.js","bcToScreen")}};d.addGridUCEventHandler=function(n,r,y){gx.lang.emptyObject(this.GridUCsEvts[n])&&(this.GridUCsEvts[n]=[]);this.GridUCsEvts[n].push({e:r,h:y})};d.getGridUCEventHandlers=function(n){n=this.GridUCsEvts[n];return gx.lang.emptyObject(n)?[]:n};d.setGridUCDynProp=function(n,r,y,C,D){this.setGridUCProp(n,r,y,C,D)};d.setGridUCProp=function(n,r,y,C,D){gx.lang.emptyObject(this.GridUCsProps[n])&&(this.GridUCsProps[n]=
[]);this.GridUCsProps[n].push({p:r,h:y,v:C,t:D});"InternalTitle"==r&&(this.GridUCsProps[n].title=C)};d.getGridUCProperties=function(n){n=this.GridUCsProps[n];return gx.lang.emptyObject(n)?[]:n};d.addUsercontrolBinding=function(n,r,y){this.UCBindings[n]||(this.UCBindings[n]={fld:r,uc:[]},this.UCBindingsHiddens[r]=this.UCBindings[n]);gx.util.inArray(y,this.UCBindings[n].uc)||this.UCBindings[n].uc.push(y)};d.setUserControl=function(n){n.ContainerName&&(this.UserControls[n.ContainerName]=n)};d.getUserControl=
function(n){var r=this.UserControls[n];r||""==this.CmpContext||(r=this.UserControls[this.CmpContext+n]);return r};d.getUserControlGrids=function(){return l.map(this.Grids,function(n){if(n.grid&&n.isUsercontrol)return n.grid})};d.execV2CFunctions=function(n,r,y,C){y=void 0===y||y;r||(r=this.UserControls);var D=this;gx.uc.StartRender();l.each(r,function(F,H){!H||D!=H.ParentObject||!y&&H.GridId&&!H.gxGridName||C&&!C(H)||H.updateAndShow(n)});gx.uc.EndRender()};d.execC2VFunctions=function(){l.each(this.UserControls,
function(n,r){try{r.execC2VFunctions()}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","execC2VFunctions")}try{r.saveProperties()}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","execC2VFunctions")}})};d.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};d.setVariable=function(n,r){var y=this[n]=r;0!=n.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+n,r);if(void 0!=this.VarControlMap[n]){var C=this.VarControlMap[n].type;if("date"==
C||"dtime"==C)"string"==typeof r&&(r=new gx.date.gxdate(r),this[n]=r),"date"==C?y=r.getStringWithFmt("Y4MD"):(y=this.VarControlMap[n].decimals,y=r.getStringWithFmt("Y4MD")+" "+r.getTimeString(!0,!0,1<y,12<=y));"decimal"==C&&"."!=gx.decimalPoint?(y=r.toString().replace(".",gx.decimalPoint),"string"==typeof r&&(this[n]=gx.num.parseFloat(r))):"int"==C&&"string"==typeof r&&(this[n]=gx.num.parseInt(r));gx.fn.setHidden(this.CmpContext+this.VarControlMap[n].id,y)}this.isTransaction()&&"Gx_mode"==n&&this.setMode();
void 0!=this.UCBindings[n]&&gx.fn.setHidden(this.CmpContext+this.UCBindings[n].fld,r)};d.getVariable=function(n){return this[n]};d.isServerEvent=function(n){return this.Events[n][1]||!1};d.getServerEventName=function(n){return this.Events[n][0]||""};d.getClientEventName=function(n){for(var r in this.Events)if(this.Events[r][0]==n)return r;return""};var k={RFR:"REFRESH",RFR_MPAGE:"REFRESH"},a=[".CONTROLVALUECHANGED",".CONTROLVALUECHANGING"],b=function(n){for(var r=0;r<a.length;r++)if(0<=n.indexOf(a[r]))return!1;
return!0};d.cleanEventName=function(n){n=n.replace(new RegExp("^"+this.CmpContext),"");var r=(gx.pO.fullAjax?/^E('?(.*)\.?'?)/:/^E('?(\w+)\.?([^\.]*)'?)/).exec(n);n=r&&r.length&&1<r.length?r[1].replace(/\.\d*$/,""):n;return k[n]||n};d.inputHasFormatErrors=function(n,r,y){var C=this;r=this.cleanEventName(n);var D,F,H=!1;n=gx.csv.anyFormatError();var L;if(!this.fullAjax&&n)return!0;if(!n||!this.EvtParms[r]||!b(r))return!1;y=this.EvtParms[r][0];var N=this,O=function(Z,ba,ca){var fa=ba||fa,ma=ca||ma;
if(Z)if(fa&&ma&&Z.grid==fa){if((D=gx.fn.getControlGridRef(Z.fld,fa,ma))&&D.id&&void 0!==gx.csv.gxFormatErrors[D.id])return!0}else if((D=Z.fld?gx.fn.getControlGridRef(Z.fld,Z.grid):null)&&D.id)for(L in gx.csv.gxFormatErrors)if(Z==N.getValidStructFld(L))return!0;return!1};r=0;for(len=y.length;r<len&&!H;r++){var Q=y[r];if(Q.postForm)return n;if(Q.fld)if(F=this.getValidStructFld(Q.fld))H=H||O(F);else{var W=this.getFormBCForVar(Q.av);if(null!=W)for(var V in W)F=W[V],"object"===typeof F&&(H=H||O(F));(Q=
gx.O.getAllGridsForColl(Q.av))&&Q.some(function(Z){var ba=Z.gridId;gx.O.GXValidFnc.filter(function(ca){return ca.grid===ba}).forEach(function(ca){(F=C.getValidStructFld(ca.fld))&&Z.grid.rows.forEach(function(fa){H=H||O(F,ba,fa.gxId)});return H})})}}return H};d.setEventParameters=function(n,r){gx.csv.lastEvtRow=null;gx.O=this;var y=!0,C=-1;gx.csv.cmpCtx=this.CmpContext;for(var D=n.length,F=0;F<D;F++){var H=n[F][0],L=n[F][1],N=n[F][2],O=!1;if(r instanceof q)this.setVariable(N,r.parms[F]),O=!0;else for(var Q in r)if(Q.toLowerCase()==
H.toLowerCase()){this.setVariable(N,r[Q]);O=!0;break}O||this.setVariable(N,r);H=this.getValidStructFld(L);null!=H?(0!=H.grid&&-1==C?C=H.grid:0!=H.grid&&H.grid!=C&&(y=!1),gx.fn.v2c(H)):gx.fn.setHidden(this.CmpContext+L,this.getVariable(N))}y&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(C))};d.executeEvent=function(n,r,y,C,D){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var F=this.getClientEventName(n);(F?this.isServerEvent(F):1)?(D?(F=this.getGrid(D))&&y?F.instanciateRow(y):gx.csv.instanciatedRowGrid=null:
gx.csv.instanciatedRowGrid=null,n=this.executeServerEvent(n,r,y,C,this.fullAjax&&!y&&!D)):n=gx.evt.execCliEvt(this.CmpContext,this.IsMasterPage,F,D,y,"");gx.csv.instanciatedRowGrid=null;return n};d.executeClientEvent=function(n,r){var y=gx.$.Deferred();Promise.resolve(n.apply(this,r)).then(function(C){y.resolve()});return y.promise()};d.executeServerEvent=function(n,r,y,C,D){var F=l.Deferred();gx.csv.cmpCtx=this.CmpContext;var H=!0;void 0!=r&&0==r&&(H=!1);(r=null!=y&&(gx.csv.validatingGrid||gx.csv.instanciatedRowGrid))&&
r.parentObject!=this&&(r=null);var L=gx.lang.emptyObject(r)?!1:r.gridId;y=y||gx.csv.lastEvtRow||"";D?(y="",L=null):(""==y&&L&&(y=gx.csv.lastRow[L]),"undefined"==typeof y&&(y=gx.fn.currentGridRowImpl(r.gridId)));gx.evt.execEvt(this.CmpContext,this.IsMasterPage,this.CmpContext+"E"+n+"."+(y||""),gx.evt.dummyCtrl,L,H,null,!0,function(){F.resolve()},C,function(){F.resolve()},!1);return F.promise()};d.executeEnterEvent=function(n,r,y){if(gx.evt.executingEnterEvent)gx.evt.cancel(n,!0);else{var C=this.gxOWithEnter(r),
D=!1;if(r&&r.onblur)r.onblur();if((gx.pO.fullAjax||null==C)&&n&&gx.evt.cancelAndRefresh(n)){if(null==C||C.autoRefresh||!C.hasEnterEvent||C.anyGridBaseTable)return;D=!0}n?(gx.dom.hasSubmitControl()&&gx.evt.cancel(n,!0),r&&"INPUT"==r.nodeName&&gx.dom.isEditControl(r)&&gx.evt.cancel(n,!0)):D=!0;if(null!=C){var F="ENTER";C.IsMasterPage&&(F+="_MPAGE");F=C.CmpContext+"E"+F+".";if(r&&gx.evt.isEnterEvtCtrl(r)){var H=gx.fn.controlRowId(r);var L=gx.fn.controlGridId(r.id);H&&(F+=H)}r=function(){gx.evt.executingEnterEvent=
!1};gx.evt.executingEnterEvent=!0;gx.evt.execEvt(C.CmpContext,C.IsMasterPage,F,gx.evt.dummyCtrl,L,!1,null,y,r,D,r,null!=C);n&&gx.evt.cancel(n,!0)}}};d.gxOWithEnter=function(n){if(n&&(n=gx.fn.getControlContext(n))&&n.hasEnterEvent)return n;if(this.hasEnterEvent)return this;if(this.IsComponent){n=this.getCmpType(this.CmpContext);var r=""==n[1]&&0==n[0].indexOf("MP");n=gx.getObj(n[1],r);if(!gx.lang.emptyObject(n))return n.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();
return null};d.getLastControlId=function(){return this.GXLastCtrlId};d.getValidStruct=function(n){return this.GXValidFnc[n]};d.getControlIds=function(){return this.GXCtrlIds};d.getControlIdsh=function(){return this.GXCtrlIdsh};d.getUsercontrolFromChild=function(n){l.each(this.UserControls,function(r,y){r=y.getContainerControl();if(gx.dom.isChildNode(n,r))return y});return null};d.installFlatLevelDatePickers=function(){for(var n,r=this.getControlIds(),y=r.length,C=0;C<y;C++)n=this.getValidStruct(r[C]),
void 0!=n&&0==n.grid&&void 0!=n.dp&&gx.fn.installDatePicker(this.CmpContext+n.fld,n,this,n.dp.f,n.dp.st,n.dp.wn,n.dp.mf,gx.fn.datePickerFormat(n.dp.pic,n.dp.dec,n.len),n.len,n.dp.dec)};d.installImageControls=function(){for(var n=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass),r=0,y=n.length;r<y;r++)gx.html.multimediaUpload.createControl(n[r]);n={};this.IsComponent&&(r=gx.pO.getWebComponent(this.CmpContext),n.observerKey=r&&r.getContainer()&&r.getContainer().id);gx.fx.obs.addObserver("gx.multimedia.clear",
this,this.clearMultimediaValue,n)};d.initControlsEnabledFlag=function(n){if("bits"!=n.type&&"audio"!=n.type&&"video"!=n.type&&(n=gx.fn.getControlRef(n.fld))){var r=gx.http.viewState[gx.dom.id(n)+"_Enabled"];void 0!==r&&gx.fn.setEnabledProperty(n,gx.lang.gxBoolean(r),!1)}};d.initControlsBehaviour=function(){var n=this;l.each(gx.O.GXValidFnc,function(r,y){y&&y.fld&&(n.initControlsEnabledFlag(y),y.gxsgprm&&(r=gx.fn.getControlRef(y.fld))&&gx.fx.installSuggest(r))})};var f=function(n){if(gx.lang.emptyObject(n))return!1;
try{var r=new Function(gx.text.contains(n.toLowerCase(),"return")?n:"return "+n)}catch(y){return gx.lang.doEval(n)}try{return r()}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","evaluateCode")}return!1},g=function(n){var r=n.tagName.toLowerCase();return"img"==r||"input"==r?l(n).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR):l("a["+gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR+"]",n).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR)},m=function(){var n={select:!0,textarea:!0},r=gx.lang.apply({radio:!0,checkbox:!0,
file:!0},gx.dom.editControls);return function(y,C){C=void 0===C?!1:C;if(!y)return!1;var D=y.tagName.toLowerCase(),F=[].slice.call(y.children);return(n.a=C)&&F.some(function(H){return m(H,C)})||("input"==D?r[y.type.toLowerCase()]:n[D])}}(),p=function(n){return n&&"label"==n.tagName.toLowerCase()&&(n=n.getAttribute("for"))?(n=gx.dom.el(n),m(n)&&gx.fn.isVisible(n,0)):!1},u=function(n){if("keypress"!==n.type||13===n.keyCode||32===n.keyCode&&gx.dom.isButton(n))if("keypress"===n.type&&(gx.evt.processing||
gx.evt.redirecting))n.preventDefault();else{var r=n.target,y=l(r),C=l(n.currentTarget);gx.dom.isRoundedBtnWrapper(y)&&(y=y.find("input"),C=C.find("input"));var D=gx.fn.getControlContext(C);if(!r||"A"!==r.tagName.toUpperCase()||void 0!==l(r).attr(gx.GxObject.GX_EVENT_DATA_ATTR)||!r.href)if(!D)n.preventDefault();else if(!C.hasClass("gx-disabled")&&(!m(r)&&!p(r)||l(r).is(C))&&!gx.dom.hasAttribute(r,gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS)){n.stopPropagation();var F=function(){var H=C.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR);
gx.util.browser.isOldIE()&&!gx.util.browser.isWinCE()?w.apply(this,[n,y,D,H]):x.apply(this,[n,y,D,H])};gx.wr(function(){gx.evt.doAfterProcessing(F,this)},this)}}},x=function(n,r,y,C){if(!r[0]||"button"!==r[0].type||!r[0].disabled){var D=function(){gx.csv.resetRow();var H=y.getValidStructFld(C);H&&H.grid&&gx.evt.setEventRow(y,r.get(0))},F=function(){D();r.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);y.handleControlEvent(n,C,this)}.closure(this);gx.fx.dom.delayedDispatch(n)?r.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)?
(D(),gx.fx.dom.raiseEvent("dblclick",n)):(F=setTimeout(F,gx.config.evt.dblclick.delay),r.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,F)):F.call()}},w=function(n,r,y,C){if(!r.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)){var D=function(){gx.csv.resetRow();var F=y.getValidStructFld(C);F&&F.grid&&gx.evt.setEventRow(y,r.get(0));r.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);y.handleControlEvent(n,C,this)}.closure(this);gx.fx.dom.delayedDispatch(n)?(D=setTimeout(D,gx.config.evt.dblclick.delay),
r.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,D)):D.call()}},A=function(n,r,y){try{y&&n.preventDefault(),r&&n.stopPropagation()}catch(C){}};d.handleControlEvent=function(n,r,y){var C=this.controlEventMap;if(C[r]){var D=C[r],F=C[r].evt;r=this.Events[F]?this.Events[F][0]:C[r].std;var H=c(y,gx.GxObject.GX_EVENT_DATA_ATTR),L=c(y,gx.GxObject.GX_EVENT_CODE_DATA_ATTR),N=g(y);C=0<D.grid?gx.fn.controlRowId(n.currentTarget):null;var O=this.getGridById(D.grid,C);F=!0;var Q=!1,W=l(n.target);if(!gx.util.inArray(D.ctrltype,
gx.GxObject.GX_EVENT_EXCLUDED_CTRLTYPES))switch(H){case "1":A(n,!0,!0);N&&!f(N)||gx.fn.closeWindow();break;case "3":case "4":A(n,!0,!0);L&&f(L);break;case "8":gx.ajax.doRefresh(this);break;default:if(!N||f(N)){if(O)var V=O.gridName;"checkbox"===D.ctrltype&&(gx.fn.checkboxClick(D,y,D.values[0],D.values[1]),F=!1,Q=!0);if(r){D=r.substring(r.indexOf(".")+1,r.length).toLowerCase();H=n.type.toLowerCase();if(D.includes("click")&&!H.includes("click")&&n.currentTarget&&"textarea"===n.currentTarget.type)break;
W.attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,!0);this.executeEvent(r,!1,C,!1,V).always(function(Z){var ba=function(){l(Z).attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,null)};gx.evt.redirecting?ba():gx.spa.isNavigatingRaw()?gx.spa.addObserver("onnavigate",this,ba,{single:!0}):ba()}.closure(this,[W]))}if(Q)gx.evt.onchange(y)}gx.dom.isRadio(y)||A(n,!0,F)}}};d.registerCtrlsEventHandlers=function(){var n,r=this.GXCtrlIds,y=this.GXValidFnc,C=this.IsMasterPage,D=this.CmpContext,F=C?"_MPAGE":"",H="["+gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR+
"]",L=!D&&!C;void 0===this.listeningControlEvents&&(this.listeningControlEvents=!1);this.controlEventMap||(this.controlEventMap={});var N=this.controlEventMap;var O=0;for(n=r.length;O<n;O++){var Q=y[r[O]];var W=gx.fn.controlFiresEvent(Q);var V=this.hasEnterEvent&&!gx.lang.emptyObject(Q.ctrltype)||Q.evt_cvc||Q.evt_cvcing;if(W||V)if(W&&(N[Q.fld]=Q),0===Q.grid&&Q.fld){var Z=D+Q.fld+(Q.gxvar?"":F);V="#span_"+Z;Z="radio"===Q.ctrltype?"[name="+Z+"]":"#"+Z;try{var ba=Q.gxvar&&0<l(V).length?l(V):l(Z)}catch(ca){gx.dbg.logEx(ca,
"gxfrmutl.js","registerCtrlsEventHandlers")}W&&(ba.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,Q.fld),ba.is("img")&&ba.attr("tabindex","0"),m(ba.get(0),!0)||ba.attr("tabindex","0"));ba.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,gx.json.serializeJson([D,C]))}}L&&!this.listeningControlEvents&&(this.listeningControlEvents=!0,l(document.body).on("click keypress",H,u),l(H).each(function(){for(var ca=l(this).parent().first();gx.dom.isRoundedBtnWrapper(ca);)ca.on("click keypress",null,u),ca=ca.parent().first()}))};
d.unregisterCtrlsEventHandlers=function(){this.listeningControlEvents&&l(document.body).off("click keypress",u);this.listeningControlEvents=!1};d.clearMultimediaValue=function(n){n=gx.html.multimediaUpload.getElements(n);n.fileField.onchange(n.fileField);gx.fn.setHidden(n.fileField.id,"");gx.fn.setHidden(n.uriField.id,"");gx.fn.setHidden(n.fileField.id+"_gxBlob","")};d.refreshOlds=function(){for(var n in this.LvlOlds){var r=this.LvlOlds[n];if("function"!=typeof r){var y=gx.fn.lvlGrid(parseInt(n,10));
if(0!=y){var C=gx.fn.currentGridRow(y);if("9999"===C)continue}y=r.length;for(var D=0;D<y;D++){var F=r[D],H=F,L="",N=gx.fn.vStructForOld(H);if(N){if(!N.gxgrid||0<N.gxgrid.grid.rows.length)L=gx.typedOld(N.fld,H,N.type)}else gx.lang.emptyObject(C)||(F+="_"+C),L=gx.fn.getHidden(this.CmpContext+F);"undefined"!=typeof L&&(N||(window[H]=L),this[H]=L)}}}};var q=function(n){this.parms=n;return this};d.refreshExoEventControls=function(n){var r=this;n="GLOBALEVENTS."+n.toUpperCase();(this.EvtParms[n]?this.EvtParms[n][0]:
[]).forEach(function(y){if(y=y.fld?r.getValidStructFld(y.fld):null){var C=gx.fn.currentGridRowImpl(y.grid);"function"==typeof y.c2v&&"function"==typeof y.val&&(y.val(C)&&y.c2v(C),gx.fn.call_v2bc(y,r));!0===y.isuc&&(y.getUCInstance(C)||y.uc).execC2VFunctions()}})};d.addExoEventHandler=function(n,r){var y=function(){var C=gx.O;gx.setGxO(this);this.refreshExoEventControls(n);r.call(this,null,null,new q(Array.prototype.slice.call(arguments,0)));gx.setGxO(C)};gx.fx.obs.addObserver(n,this,y);this.exoEventHandlers=
this.exoEventHandlers||{};this.exoEventHandlers[n]=y};d.deleteExoEventHandlers=function(){for(var n in this.exoEventHandlers)this.exoEventHandlers.hasOwnProperty(n)&&gx.fx.obs.deleteObserver(n,this,this.exoEventHandlers[n])};d.restoreExoEventHandlers=function(){for(var n in this.exoEventHandlers)gx.fx.obs.addObserver(n,this,this.exoEventHandlers[n])};d.deleteEventHandlers=function(){try{this.unregisterCtrlsEventHandlers(),gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this),this.deleteExoEventHandlers(),
gx.fx.dom.deleteEventHandlers(this)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","deleteEventHandlers")}};d.ondestroy=function(){try{this.endFeedback(),this.deleteEventHandlers(),l.each(this.UserControls,function(n,r){if(!gx.lang.emptyObject(r.destroy))try{r.destroy()}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","ondestroy")}}),this.UserControls=[],delete this.containerControl}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","ondestroy")}};d.onpost=function(){var n=gx.O;gx.setGxO(this);if(this.hasMasterPage())this.MasterPage.onpost();
for(var r=this.WebComponents.length,y=0;y<r;y++)this.WebComponents[y].onpost();this.ReadonlyForm&&this.IsComponent&&n!=this&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(n)};d.roControlsAsHidden=function(){for(var n=this.getControlIds(),r=n.length,y=0;y<r;y++){var C=this.getValidStruct(n[y]);if(0==C.grid&&"function"==typeof C.val){C=this.CmpContext+C.fld;var D=gx.dom.el(C);D&&!gx.fn.isAccepted(D)&&gx.fn.setHidden(C,gx.fn.getControlValue(C))}}};d.onload=function(n,r){l.Deferred();var y=
[];gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.screenToVars();gx.wmp(function(){this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this))},this);var C=this.Grids.length;if(!1!==n)for(var D=0;D<C;D++)y.push(this.Grids[D].loadGrid());C=this.WebComponents.length;for(D=0;D<C;D++)y.push(this.WebComponents[D].onload(n));r?this.afterLoad():gx.wr(this.afterLoad.closure(this),this);gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);var F=this;
l.when.apply(l,y).done(function(){F.execV2CFunctions(!0,void 0,!1,function(H){return H.ownerGrid&&H.ownerGrid.parentGrid});F.onLoadDeferred.resolve()})};d.afterLoad=function(){gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0,void 0,!1);this.JustCreated=!1;this.registerCtrlsEventHandlers();gx.$.map(gx.$("input[data-gx-disable], select[data-gx-disable]",
this.getContainer()),function(n,r){gx.fn.disableCtrl(n.getAttribute("data-gx-disable"));n.removeAttribute("data-gx-disable")});this===gx.pO&&(gx.ui.controls.actionGroup.init(),gx.dom.indexElements(),gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.goOnload()};d.onunload=function(n){if(this.hasMasterPage()&&!1!==n)this.MasterPage.onunload();n=this.Grids.length;for(--n;0<=n;n--)delete this.Grids[this.Grids[n].gridName],this.Grids[n].cleanup(),this.Grids.splice(n,
1);n=this.WebComponents.length;for(--n;0<=n;n--)delete this.WebComponents[this.WebComponents[n].CmpContext],this.WebComponents[n].onunload(),this.WebComponents.splice(n,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};d.clean=function(n){this.cleanHiddens();this.onunload(n)};d.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};d.screenToVars=function(){try{for(var n=this.getControlIds(),r=n.length,y=0;y<r;y++){var C=this.getValidStruct(n[y]);
C&&0==C.lvl&&"function"==typeof C.c2v&&C.c2v()}}catch(D){gx.dbg.logEx(D,"gxfrmutl.js","screenToVars")}};d.postbackLoad=function(n,r){var y=this.IsComponent&&this.JustCreated;this.hasMasterPage()&&this.MasterPage.postbackLoad(n);for(var C=this.WebComponents.length,D=0;D<C;D++)this.WebComponents[D].postbackLoad(n);y&&(this.installImageControls(),this.installFlatLevelDatePickers(),this.registerCtrlsEventHandlers());this.execV2CFunctions(!0,y?!1:n);this.conditionsChanged=this.JustCreated=!1;this===gx.pO&&
gx.fn.doAttachs(r);gx.goOnload();this.onLoadDeferred.resolve()};d.addDragSource=function(n,r,y,C){gx.fx.dnd.addSource(this,n,r,y,C)};d.addDropTarget=function(n,r,y,C){gx.fx.dnd.addTarget(this,n,r,y,C)};d.addContextSetter=function(n,r,y,C){gx.fx.ctx.addSetter(this,n,r,y,C)};d.addContextTracker=function(n,r,y,C){gx.fx.ctx.addTracker(this,y,C)};d.addOnMessage=function(n,r,y,C,D){gx.fx.notifications.addTracker(this,n,r,y,C,D)};d.addEventHandler=function(n,r,y){gx.fx.dom.addEventHandler(this,n,r,y)};d.updateBitmapValue=
function(n,r,y,C){n=gx.html.multimediaUpload.getContainer(n);"file"==gx.html.multimediaUpload.getOptionValue(n)?this[r]=C:this[y]=C};d.getFeedbackContainer=function(){return this==gx.pO?document.body:this.getContainer()};d.startFeedback=function(n,r){if(gx.pO.MasterPage&&this===gx.pO.MasterPage)return this.startFeedback.apply(gx.pO,arguments);this.feedbackCallCounter++;r&&gx.fn.disableKeys();var y=!0===n?0:gx.getNotificationDelay();var C=function(){var D=this.getFeedbackContainer();D&&gx.dom.mask(D,
y)};1==this.feedbackCallCounter&&(0===y?C.call(this):this.feedbackTimeoutId||(C=gx.lang.doCallTimeout(C,this,arguments,y),this.feedbackTimeoutId=C.t))};d.endFeedback=function(){if(gx.pO.MasterPage&&this===gx.pO.MasterPage)return this.endFeedback.apply(gx.pO);gx.fn.enableKeys();0<this.feedbackCallCounter&&this.feedbackCallCounter--;if(0==this.feedbackCallCounter){this.feedbackTimeoutId&&(clearTimeout(this.feedbackTimeoutId),this.feedbackTimeoutId=!1);var n=this.getFeedbackContainer();n&&gx.dom.unmask(n)}};
d.isFeedbackOn=function(){return 0<this.feedbackCallCounter};(function(){var n=9996,r=this;return function(y){var C="MPW"+n++,D=r.CmpContext+"gxHTMLWrp"+C;r.setComponent({id:v(y),GXClass:null,Prefix:C,lvl:1});return l('<div class="gx-call-target '+y+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+D+'"></div></div>')}}).call(this);var v=function(n){return"GX-"+n.toUpperCase()+"-TARGET"};d.initSingleTarget=function(n){var r="MPW"+this.targetsCounter++,y=this.CmpContext+"gxHTMLWrp"+
r;this.setComponent({id:v(n),GXClass:null,Prefix:r,lvl:1});return l('<div class="gx-call-target '+n+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+y+'"></div></div>')};d.initTargets=function(){if(gx.pO&&gx.pO.fullAjax&&this.IsMasterPage){var n=l(gx.dom.form());var r=n.children("[data-abstract-form]").first();r.length||(r=l("<div></div>"),r.append(n.children()),n.append(r));n=r.addClass("gx-center-target");r=this.initSingleTarget("top");var y=this.initSingleTarget("right");
var C=this.initSingleTarget("bottom");var D=this.initSingleTarget("left");l('<div id="gx-column-targets"></div>').insertBefore(n).append(D).append(n).append(y).before(r).after(C)}};d.createObjectInTarget=function(n,r,y){n=n.toLowerCase();var C=t(n);this.createWebComponent(v(n),r,y,void 0,void 0,void 0,function(D){this.targetComponents=this.targetComponents||{};(D=gx.pO.getWebComponent(D))&&(this.targetComponents[n]=D)});l(C.selector).removeClass("empty")};d.restoreTargetComponents=function(){var n;
this.targetComponents=this.targetComponents||{};for(n in this.targetComponents)this.targetComponents.hasOwnProperty(n)&&gx.pO.registerComponent(this.targetComponents[n])};var t=function(n){return{selector:".gx-call-target."+n,centerSelector:".gx-center-target"}},B,G={useCapture:!0};d.showTarget=function(n,r){n=n.toLowerCase();var y=t(n),C=y.selector,D=y.centerSelector;l(y.selector).removeClass("empty");l(C).removeClass("off");l(D).addClass("slideout "+n);l(document.documentElement).addClass("gx-blocking");
gx.fx.obs.notify("gx.targetshown",[n]);if(!1!==r){B=function(H){l(H.target).closest(C).length||l(H.target).is(C)||!l(C).is(":visible")||(F.call(this),H.stopImmediatePropagation(),H.preventDefault())}.closure(this);var F=function(){this.hideTarget(n)};gx.evt.attach(document,"click",B,!1,G);gx.spa.addObserver("onnavigate",this,F)}};d.hideTarget=function(n){n=n.toLowerCase();var r=t(n),y=r.centerSelector;l(r.selector).addClass("off");l(y).removeClass("slideout "+n);l(document.documentElement).removeClass("gx-blocking");
gx.evt.detach(document,"click",B,G);gx.fx.obs.notify("gx.targethidden",[n])};d.collapseTarget=function(n){n=n.toLowerCase();var r=t(n),y=r.selector;r=r.centerSelector;this.showTarget(n,!1);l(y).addClass("collapsed");l(r).addClass("collapsed");gx.fx.obs.notify("gx.targetcollapsed",[n])};d.expandTarget=function(n){n=n.toLowerCase();var r=t(n),y=r.selector;r=r.centerSelector;this.showTarget(n,!1);l(y).removeClass("collapsed");l(r).removeClass("collapsed");gx.fx.obs.notify("gx.targetexpanded",[n])};var J=
function(n,r){n=Array.prototype.slice.call(n,0);n.push(r);return n};d.validSrvEvt=function(){return gx.ajax.validSrvEvt.apply(gx.ajax,J(arguments,this))};d.validCliEvt=function(){return gx.ajax.validCliEvt.apply(gx.ajax,J(arguments,this))}})(gx.$);gx.lang.apply(gx.GxObject.prototype,new gx.util.Observable);
gx.printing=function(l){return{IFrameId:"gxprintHelper_Iframe",print:function(c){this.printDirect(c)},printDirect:function(c){if(c){gx.printing._deinit();var d=l("<iframe>");d.attr("id",gx.printing.IFrameId).css({visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"});l(document.body).append(d);d[0].onload=function(){this.contentWindow.print()};d.attr("src",c.reportFile)}},_deinit:function(){l("#"+gx.printing.IFrameId).remove()}}}(gx.$);
gx.thread={Map:function(){this.map={};this.add=function(l,c){this.map[l]=c};this.remove=function(l){delete this.map[l]};this.get=function(l){return null==l?null:this.map[l]};this.first=function(){return this.get(this.nextKey())};this.next=function(l){return this.get(this.nextKey(l))};this.nextKey=function(l){for(var c in this.map){if(!l)return c;l==c&&(l=null)}return null}},Command:function(l,c,d){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=
function(){c.apply(l,d)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(l,c,d,k){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(var b;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+
")",10);try{b=this.c.execute()}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if("function"==typeof k)try{k.call(l,b)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(l,c,d);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,iv:null,keyName:"GX_AJAX_KEY",ivName:"GX_AJAX_IV",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var l=gx.fn.getHidden(this.keyName);gx.lang.emptyObject(l)?this.key=null:this.key=l;null!=this.key&&this.loadSecToken();this.iv=gx.fn.getHidden(this.ivName)},loadSecToken:function(){var l=gx.fn.getHidden(this.secTokenName);gx.lang.emptyObject(l)?this.secToken=null:this.secToken=l},encrypt:function(l,c){try{if(c=null==c?this.key:c,null!=c){var d=this.rijndael;c=d.hexToByteArray(c);
var k=null!=this.iv?d.rijndaelEncrypt(l,c,"CBC",d.hexToByteArray(this.iv)):d.rijndaelEncrypt(l,c);return d.byteArrayToHex(k)}}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","encrypt")}return l},decrypt:function(l,c){try{if(c=null==c?this.key:c,null!=c){var d=this.rijndael;c=d.hexToByteArray(c);var k=d.hexToByteArray(l),a=d.rijndaelDecrypt(k,c,"CBC");return d.byteArrayToString(a)}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","decrypt")}return l},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(l,c){return l<<c|l>>>32-c},AddUnsigned:function(l,c){var d=l&2147483648;var k=c&2147483648;var a=l&1073741824;var b=c&1073741824;l=(l&1073741823)+(c&1073741823);return a&b?l^2147483648^d^k:a|b?l&1073741824?l^3221225472^d^k:l^1073741824^d^k:l^d^k},F:function(l,c,d){return l&c|~l&d},G:function(l,c,d){return l&d|c&~d},H:function(l,c,d){return l^c^d},I:function(l,c,d){return c^(l|~d)},FF:function(l,c,d,k,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(c,
d,k),a),f));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},GG:function(l,c,d,k,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(c,d,k),a),f));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},HH:function(l,c,d,k,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(c,d,k),a),f));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},II:function(l,c,d,k,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(c,d,k),a),f));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},ConvertToWordArray:function(l){var c=l.length;var d=c+8;for(var k=16*((d-d%64)/64+1),a=Array(k-1),b,f=0;f<c;)d=(f-f%4)/4,b=f%4*8,a[d]|=l.charCodeAt(f)<<b,f++;d=(f-f%4)/4;a[d]|=128<<f%4*8;a[k-2]=c<<3;a[k-1]=c>>>29;return a},WordToHex:function(l){var c="",d;for(d=0;3>=d;d++){var k=l>>>8*d&255;k="0"+k.toString(16);c+=k.substr(k.length-2,2)}return c},Utf8Encode:function(l){l=l.replace(/\r\n/g,"\n");for(var c="",d=0;d<l.length;d++){var k=l.charCodeAt(d);
128>k?c+=String.fromCharCode(k):(127<k&&2048>k?c+=String.fromCharCode(k>>6|192):(c+=String.fromCharCode(k>>12|224),c+=String.fromCharCode(k>>6&63|128)),c+=String.fromCharCode(k&63|128))}return c},getHsh:function(l){var c;l=gx.MD5.Utf8Encode(l);l=gx.MD5.ConvertToWordArray(l);var d=1732584193;var k=4023233417;var a=2562383102;var b=271733878;for(c=0;c<l.length;c+=16){var f=d;var g=k;var m=a;var p=b;d=gx.MD5.FF(d,k,a,b,l[c+0],7,3614090360);b=gx.MD5.FF(b,d,k,a,l[c+1],12,3905402710);a=gx.MD5.FF(a,b,d,
k,l[c+2],17,606105819);k=gx.MD5.FF(k,a,b,d,l[c+3],22,3250441966);d=gx.MD5.FF(d,k,a,b,l[c+4],7,4118548399);b=gx.MD5.FF(b,d,k,a,l[c+5],12,1200080426);a=gx.MD5.FF(a,b,d,k,l[c+6],17,2821735955);k=gx.MD5.FF(k,a,b,d,l[c+7],22,4249261313);d=gx.MD5.FF(d,k,a,b,l[c+8],7,1770035416);b=gx.MD5.FF(b,d,k,a,l[c+9],12,2336552879);a=gx.MD5.FF(a,b,d,k,l[c+10],17,4294925233);k=gx.MD5.FF(k,a,b,d,l[c+11],22,2304563134);d=gx.MD5.FF(d,k,a,b,l[c+12],7,1804603682);b=gx.MD5.FF(b,d,k,a,l[c+13],12,4254626195);a=gx.MD5.FF(a,b,
d,k,l[c+14],17,2792965006);k=gx.MD5.FF(k,a,b,d,l[c+15],22,1236535329);d=gx.MD5.GG(d,k,a,b,l[c+1],5,4129170786);b=gx.MD5.GG(b,d,k,a,l[c+6],9,3225465664);a=gx.MD5.GG(a,b,d,k,l[c+11],14,643717713);k=gx.MD5.GG(k,a,b,d,l[c+0],20,3921069994);d=gx.MD5.GG(d,k,a,b,l[c+5],5,3593408605);b=gx.MD5.GG(b,d,k,a,l[c+10],9,38016083);a=gx.MD5.GG(a,b,d,k,l[c+15],14,3634488961);k=gx.MD5.GG(k,a,b,d,l[c+4],20,3889429448);d=gx.MD5.GG(d,k,a,b,l[c+9],5,568446438);b=gx.MD5.GG(b,d,k,a,l[c+14],9,3275163606);a=gx.MD5.GG(a,b,d,
k,l[c+3],14,4107603335);k=gx.MD5.GG(k,a,b,d,l[c+8],20,1163531501);d=gx.MD5.GG(d,k,a,b,l[c+13],5,2850285829);b=gx.MD5.GG(b,d,k,a,l[c+2],9,4243563512);a=gx.MD5.GG(a,b,d,k,l[c+7],14,1735328473);k=gx.MD5.GG(k,a,b,d,l[c+12],20,2368359562);d=gx.MD5.HH(d,k,a,b,l[c+5],4,4294588738);b=gx.MD5.HH(b,d,k,a,l[c+8],11,2272392833);a=gx.MD5.HH(a,b,d,k,l[c+11],16,1839030562);k=gx.MD5.HH(k,a,b,d,l[c+14],23,4259657740);d=gx.MD5.HH(d,k,a,b,l[c+1],4,2763975236);b=gx.MD5.HH(b,d,k,a,l[c+4],11,1272893353);a=gx.MD5.HH(a,b,
d,k,l[c+7],16,4139469664);k=gx.MD5.HH(k,a,b,d,l[c+10],23,3200236656);d=gx.MD5.HH(d,k,a,b,l[c+13],4,681279174);b=gx.MD5.HH(b,d,k,a,l[c+0],11,3936430074);a=gx.MD5.HH(a,b,d,k,l[c+3],16,3572445317);k=gx.MD5.HH(k,a,b,d,l[c+6],23,76029189);d=gx.MD5.HH(d,k,a,b,l[c+9],4,3654602809);b=gx.MD5.HH(b,d,k,a,l[c+12],11,3873151461);a=gx.MD5.HH(a,b,d,k,l[c+15],16,530742520);k=gx.MD5.HH(k,a,b,d,l[c+2],23,3299628645);d=gx.MD5.II(d,k,a,b,l[c+0],6,4096336452);b=gx.MD5.II(b,d,k,a,l[c+7],10,1126891415);a=gx.MD5.II(a,b,
d,k,l[c+14],15,2878612391);k=gx.MD5.II(k,a,b,d,l[c+5],21,4237533241);d=gx.MD5.II(d,k,a,b,l[c+12],6,1700485571);b=gx.MD5.II(b,d,k,a,l[c+3],10,2399980690);a=gx.MD5.II(a,b,d,k,l[c+10],15,4293915773);k=gx.MD5.II(k,a,b,d,l[c+1],21,2240044497);d=gx.MD5.II(d,k,a,b,l[c+8],6,1873313359);b=gx.MD5.II(b,d,k,a,l[c+15],10,4264355552);a=gx.MD5.II(a,b,d,k,l[c+6],15,2734768916);k=gx.MD5.II(k,a,b,d,l[c+13],21,1309151649);d=gx.MD5.II(d,k,a,b,l[c+4],6,4149444226);b=gx.MD5.II(b,d,k,a,l[c+11],10,3174756917);a=gx.MD5.II(a,
b,d,k,l[c+2],15,718787259);k=gx.MD5.II(k,a,b,d,l[c+9],21,3951481745);d=gx.MD5.AddUnsigned(d,f);k=gx.MD5.AddUnsigned(k,g);a=gx.MD5.AddUnsigned(a,m);b=gx.MD5.AddUnsigned(b,p)}return(gx.MD5.WordToHex(d)+gx.MD5.WordToHex(k)+gx.MD5.WordToHex(a)+gx.MD5.WordToHex(b)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(l){try{if(window.atob)return decodeURIComponent(atob(l).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(c){}return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(l)))},encode:function(l){try{if(window.btoa)return btoa(encodeURIComponent(l).replace(/%([0-9A-F]{2})/g,function(c,d){return String.fromCharCode("0x"+d)}))}catch(c){}return this.encodeImpl(this.UTF8BytesFromString(l))},bytesFromUTF8Bytes:function(l){for(var c=
[],d=0,k,a,b=l.length;d<b;)k=l[d],128>k?(c.push(k),d++):191<k&&224>k?(a=l[d+1],c.push((k&31)<<6|a&63),d+=2):(a=l[d+1],c.push((k&15)<<12|(a&63)<<6|l[d+2]&63),d+=3);return c},UTF8BytesFromString:function(l){l=l.replace(/\r\n/g,"\n");for(var c=[],d=l.length,k=0;k<d;k++){var a=l.charCodeAt(k);128>a?c.push(a):(127<a&&2048>a?c.push(a>>6|192):(c.push(a>>12|224),c.push(a>>6&63|128)),c.push(a&63|128))}return c},bytesToString:function(l){for(var c=gx.util.browser.isChrome()?32765:5E4,d=[];l.length>=c;)d.push(eval("String.fromCharCode("+
l.slice(0,c).join(",")+");")),l=l.slice(c);0!=l.length&&d.push(eval("String.fromCharCode("+l.join(",")+");"));return d.join("")},decodeImpl:function(l){var c=this.f64,d=[],k=0;l=l.replace(/\n|\r/g,"");l=l.replace(/=/g,"");for(var a=l.length;k<a;)d[d.length]=c[l.charAt(k)]<<2|c[l.charAt(k+1)]>>4,d[d.length]=(c[l.charAt(k+1)]&15)<<4|c[l.charAt(k+2)]>>2,d[d.length]=(c[l.charAt(k+2)]&3)<<6|c[l.charAt(k+3)],k+=4;2==l.length%4&&(d=d.slice(0,d.length-2));3==l.length%4&&(d=d.slice(0,d.length-1));return d},
encodeImpl:function(l){var c=this.b64,d=[],k=0,a=l.length;1==a%3&&(l[l.length]=0,l[l.length]=0);2==a%3&&(l[l.length]=0);for(var b=l.length;k<b;)d[d.length]=c[l[k]>>2],d[d.length]=c[(l[k]&3)<<4|l[k+1]>>4],d[d.length]=c[(l[k+1]&15)<<2|l[k+2]>>6],d[d.length]=c[l[k+2]&63],k+=3;1==a%3&&(d[d.length-1]=d[d.length-2]="=");2==a%3&&(d[d.length-1]="=");return d.join("")},_init:function(){for(var l=0;64>l;l++){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l);this.b64[l]=c;this.f64[c]=
l}}};
gx.webSocket=function(l){this.reconnect=!0;this.initialized=this.opened=!1;this.retryCount=0;this.maxRetries=l.maxRetries||6;this.retryDelay=l.retryDelay||2500;this._init=function(k){if(!this.initialized&&"WebSocket"in window){k=k||{};k.clientId=k.clientId||"";k.basePath=k.basePath||"";this.namespace="."+k.namespace;try{var a=k.wsProtocol+k.host+k.basePath+k.resourceUrl+k.clientId;this.create(k.wsURL||a);this.initialized=!0;this.wsOpts=k}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","Could not initialize WebSocket")}}};var c=
this,d=function(){this.initialized=this.opened=!1;this.reconnect&&(-1==this.maxRetries||this.retryCount<this.maxRetries)&&(this.retryCount++,this.retryHandle=gx.lang.doCallTimeout(this._init,this,[this.wsOpts],this.retryDelay*this.retryCount))};this.create=function(k){try{this.ws=new WebSocket(k),this.ws.onopen=function(){c.opened=!0;c.retryCount=0;c.stopRetry=!1;gx.fx.obs.notify("gx.ws.onOpen"+c.namespace,[])},this.ws.onerror=function(a){gx.dbg.logDebug("gx.webSocket - Error: "+a.data);gx.fx.obs.notify("gx.ws.onError"+
c.namespace,[a.data]);c.stopRetry||d.apply(c);c.stopRetry=!1},this.ws.onmessage=function(a){gx.dbg.logDebug("gx.webSocket - New Message: "+a.data);gx.fx.obs.notify("gx.ws.onMessage"+c.namespace,[a.data])},this.ws.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");c.opened?(c.retryCount=0,d.apply(c)):gx.fx.obs.notify("gx.ws.OnClose"+c.namespace,[])}}catch(a){gx.lang.doCallTimeout(gx.fx.obs.notify,gx.fx.obs,["gx.ws.onCtxError"+c.namespace,[a]],100)}};window.onbeforeunload=function(){c.opened&&
c.ws.close()};this.close=function(){c.opened&&(c.opened=!1,c.ws.close());c.stopRetry=!0;c.retryHandle&&clearInterval(c.retryHandle.t)};this.send=function(k){c.ws?c.ws.send(k):gx.dbg.logDebug("gx.webSocket - ws is not initialized")};this._init(l)};
gx.util.alert=function(l){var c=!1,d=!1,k=function(b){b=b||{};var f=b.message||"",g=b.cssClass||"",m=b.cssDisBtnClass||"",p=b.dataDisAtt;b=b.dismissmitAt;c&&0!=l("#gx-main-error").length||(l(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'></div>"),c=!0);a();var u=l("#gx-main-error");u.html('<div class="'+g+'"><button type="button" class="'+m+'" data-dismiss="'+p+'" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;</button><span>'+f+"</span></div>");u.slideDown();
d=!0;b&&window.setTimeout(function(){a()},b)},a=function(){d&&(l("#gx-main-error").fadeOut(500,function(){l(this).empty()}),d=!1)};return{showMessage:function(b,f){l("#gx-main-error");k(l.extend({message:b,cssClass:"alert alert-warning alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},f))},showError:function(b,f){l("#gx-main-error");k(l.extend({message:b,cssClass:"alert alert-danger alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},f))},hide:a}}(gx.$);
gx.geolocation=function(l){var c;return{attachedCtrls:c,_init:function(){c=[]},getMyPosition:function(d){d.attachedCtrl=l("#"+d.id.replace(/_geoLocMe$/,""))[0];c.push(d);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(gx.pO.clearMessages(),gx.pO.addMessage("Your browser does not support HTML5 Geolocalization"),gx.pO.refreshOutputs([]))},positionHandler:function(d){var k=c.shift(),a=gx.fn.validStruct(gx.O.getValidStructId(k.attachedCtrl.id));
d=d.coords.latitude+","+d.coords.longitude;gx.evt.setEventRow(gx.pO,k.attachedCtrl);a.v2v&&(a.v2v(d),a.v2c());a.gxgrid&&a.gxgrid.updateControlValue(a,!0)},handle_errors:function(d){c.shift();switch(d.code){case d.PERMISSION_DENIED:d="user did not share geolocation data";break;case d.POSITION_UNAVAILABLE:d="could not detect current position";break;case d.TIMEOUT:d="retrieving position timed out";break;default:d="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(d);gx.pO.refreshOutputs([])}}}(gx.$);
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(l,c){var d=l.slice(0,c);return l=l.slice(c).concat(d)},xtime:function(l){l<<=1;return l&256?l^283:l},mult_GF256:function(l,c){var d,k=0;for(d=1;256>d;d*=2,c=this.xtime(c))l&d&&(k^=c);return k},byteSub:function(l,c){c="encrypt"==c?this.SBox:this.SBoxInverse;for(var d=0;4>d;d++)for(var k=0;k<this.Nb;k++)l[d][k]=c[l[d][k]]},shiftRow:function(l,c){for(var d=
1;4>d;d++)l[d]="encrypt"==c?this.cyclicShiftLeft(l[d],this.shiftOffsets[this.Nb][d]):this.cyclicShiftLeft(l[d],this.Nb-this.shiftOffsets[this.Nb][d])},mixColumn:function(l,c){for(var d=[],k=0;k<this.Nb;k++){for(var a=0;4>a;a++)d[a]="encrypt"==c?this.mult_GF256(l[a][k],2)^this.mult_GF256(l[(a+1)%4][k],3)^l[(a+2)%4][k]^l[(a+3)%4][k]:this.mult_GF256(l[a][k],14)^this.mult_GF256(l[(a+1)%4][k],11)^this.mult_GF256(l[(a+2)%4][k],13)^this.mult_GF256(l[(a+3)%4][k],9);for(a=0;4>a;a++)l[a][k]=d[a]}},addRoundKey:function(l,
c){for(var d=0;d<this.Nb;d++)l[0][d]^=c[d]&255,l[1][d]^=c[d]>>8&255,l[2][d]^=c[d]>>16&255,l[3][d]^=c[d]>>24&255},keyExpansion:function(l){var c=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var d=0;d<this.Nk;d++)c[d]=l[4*d]|l[4*d+1]<<8|l[4*d+2]<<16|l[4*d+3]<<24;for(d=this.Nk;d<this.Nb*(this.Nr+1);d++)l=c[d-1],0==d%this.Nk?l=(this.SBox[l>>8&255]|this.SBox[l>>16&255]<<8|this.SBox[l>>24&255]<<16|this.SBox[l&255]<<24)^this.Rcon[Math.floor(d/
this.Nk)-1]:6<this.Nk&&4==d%this.Nk&&(l=this.SBox[l>>24&255]<<24|this.SBox[l>>16&255]<<16|this.SBox[l>>8&255]<<8|this.SBox[l&255]),c[d]=c[d-this.Nk]^l;return c},Round:function(l,c){this.byteSub(l,"encrypt");this.shiftRow(l,"encrypt");this.mixColumn(l,"encrypt");this.addRoundKey(l,c)},InverseRound:function(l,c){this.addRoundKey(l,c);this.mixColumn(l,"decrypt");this.shiftRow(l,"decrypt");this.byteSub(l,"decrypt")},FinalRound:function(l,c){this.byteSub(l,"encrypt");this.shiftRow(l,"encrypt");this.addRoundKey(l,
c)},InverseFinalRound:function(l,c){this.addRoundKey(l,c);this.shiftRow(l,"decrypt");this.byteSub(l,"decrypt")},encrypt:function(l,c){var d;if(l&&8*l.length==this.blockSizeInBits&&c){l=this.packBytes(l);this.addRoundKey(l,c);for(d=1;d<this.Nr;d++)this.Round(l,c.slice(this.Nb*d,this.Nb*(d+1)));this.FinalRound(l,c.slice(this.Nb*this.Nr));return this.unpackBytes(l)}},decrypt:function(l,c){var d;if(l&&8*l.length==this.blockSizeInBits&&c){l=this.packBytes(l);this.InverseFinalRound(l,c.slice(this.Nb*this.Nr));
for(d=this.Nr-1;0<d;d--)this.InverseRound(l,c.slice(this.Nb*d,this.Nb*(d+1)));this.addRoundKey(l,c);return this.unpackBytes(l)}},byteArrayToString:function(l){for(var c="",d=l.length,k=0;k<d;k++)0!=l[k]&&(c+=String.fromCharCode(l[k]));return c},stringToByteArray:function(l){for(var c=[],d=l.length,k=0;k<d;k++)c[c.length]=l.charCodeAt();return c},byteArrayToHex:function(l){var c="";if(l){for(var d=l.length,k=0;k<d;k++)c+=(16>l[k]?"0":"")+l[k].toString(16);return c}},hexToByteArray:function(l){var c=
[];if(!(l.length%2)){if(0==l.indexOf("0x")||0==l.indexOf("0X"))l=l.substring(2);for(var d=l.length,k=0;k<d;k+=2)c[Math.floor(k/2)]=parseInt(l.slice(k,k+2),16);return c}},packBytes:function(l){var c=[];if(l&&!(l.length%4)){c[0]=[];c[1]=[];c[2]=[];c[3]=[];for(var d=l.length,k=0;k<d;k+=4)c[0][k/4]=l[k],c[1][k/4]=l[k+1],c[2][k/4]=l[k+2],c[3][k/4]=l[k+3];return c}},unpackBytes:function(l){for(var c=[],d=l[0].length,k=0;k<d;k++)c[c.length]=l[0][k],c[c.length]=l[1][k],c[c.length]=l[2][k],c[c.length]=l[3][k];
return c},formatPlaintext:function(l){var c=this.blockSizeInBits/8,d;if("string"==typeof l||l.indexOf){l=l.split("");var k=l.length;for(d=0;d<k;d++)l[d]=l[d].charCodeAt(0)&255}for(d=c-l.length%c;0<d&&d<c;d--)l[l.length]=0;return l},rijndaelEncrypt:function(l,c,d,k){var a,b=this.blockSizeInBits/8;if(l&&c&&8*c.length==this.keySizeInBits){"CBC"!=d&&(d="ECB",k=[]);l=this.formatPlaintext(l);c=this.keyExpansion(c);for(var f=0;f<l.length/b;f++){var g=l.slice(f*b,(f+1)*b);if("CBC"==d)for(a=0;a<b;a++)g[a]^=
k[f*b+a];k=k.concat(this.encrypt(g,c))}return k}},rijndaelDecrypt:function(l,c,d){var k=this.blockSizeInBits/8,a=[],b;if(l&&c&&"string"!=typeof l&&8*c.length==this.keySizeInBits){d||(d="ECB");c=this.keyExpansion(c);for(b=l.length/k-1;0<b;b--){var f=this.decrypt(l.slice(b*k,(b+1)*k),c);if("CBC"==d)for(var g=0;g<k;g++)a[(b-1)*k+g]=f[g]^l[(b-1)*k+g];else a=f.concat(a)}"ECB"==d&&(a=this.decrypt(l.slice(0,k),c).concat(a));return a}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/
32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.popup=function(l){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.top=this.position=this.height=this.width=0;this.cssClass="";this.left=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};var c=function(d){0===l(this.getEl()).find(d.target).length&&(l(document.body).off("click",c),this.close())}.closure(this);this.open=function(d){this.state=
"opening";this.id=d.id||"gxdialog";this.callbacks=d.callbacks;var k=void 0===d.resizable||d.resizable,a="PopupBorder gx-popup gx-popup-default";this.cssClass&&(a=a.replace("gx-popup-default",""),a+=" "+this.cssClass);gx.popup.ext.window(this,!1,0,0,d.w,d.h,d.contentHtml,"white",d.title,"black","black","black","black",void 0===d.isModal||d.isModal,!0,!0,k,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",a,"PopupShadow",
d.showParentPopups,!1,d.callbacks,d.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened";setTimeout(function(){l(document.body).on("click",c)},1)};this.close=function(){l(document.body).off("click",c);this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};
this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(c,d){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=d?d:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){gx.lang.isArray(c)?(this.url=c[0],this.autoresize=c[1],this.width=c[2],this.height=c[3],this.position=c[4],this.top=
c[5],this.left=c[6],this.OncloseCmds=c[7]||[],this.ReturnParms=c[8]||[],this.cssClass=c[9]):c&&c.Url&&(this.url=c.Url,"undefined"!=typeof c.Autoresize&&(this.autoresize=c.Autoresize),"undefined"!=typeof c.Width&&(this.width=c.Width),"undefined"!=typeof c.Height&&(this.height=c.Height),"undefined"!=typeof c.Position&&(this.position=c.Position),"undefined"!=typeof c.Top&&(this.top=c.Top),"undefined"!=typeof c.Left&&(this.left=c.Left),"undefined"!=typeof c.Class&&(this.cssClass=c.Class),"undefined"!=
typeof c.OncloseCmds&&(this.OncloseCmds=c.OncloseCmds),"undefined"!=typeof c.ReturnParms&&(this.ReturnParms=c.ReturnParms))};this.open=function(){this.state="opening";var k=gx.popup.gxOpener();this.lvl=-1;this.lvl=k&&k.gx&&k.gx.popup.ext.win&&k.gx.popup.ext.win.gx?k.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;k=this.url;if(this.IsPrompt){gx.popup.currentPrompt=
this;for(var a="?",b,f,g=this.ReturnParms.length,m=0;m<g;m++){b="";if(gx.lang.emptyObject(this.ReturnParms[m].Ctrl))if("string"==typeof this.ReturnParms[m])b=gx.util.urlValue(this.ReturnParms[m])+",";else if("number"==typeof this.ReturnParms[m])b=gx.util.urlValue(this.ReturnParms[m].toString())+",";else if(this.CustomRenderGrid)f=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[m].id),gx.lang.emptyObject(f)||(b=gx.util.urlValue(f+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[m].id))continue;
else f=gx.fn.getHidden(this.ReturnParms[m].id),gx.lang.emptyObject(f)||(b=gx.util.urlValue(f)),b+=",";else b=gx.util.urlValue(this.ReturnParms[m].Ctrl)+",";a="out"==this.ReturnParms[m].IOType?a+",":a+b;this.ReturnParms[m].isLastKey&&gx.fn.isOutputParm(this.ReturnParms[m])&&!this.PromptIsGet&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);k+=a}a=document.activeElement;gx.csv.lastControl&&a&&gx.util.inArray(a.tagName,["BODY",
"FORM"])&&(a=gx.csv.lastControl);a&&(a&&(this.callerActiveElement=a),a.blur&&a.blur());this.InternalPopup=gx.popup.Impl(this,k,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var k=[];if(this.IsPrompt)for(var a=this.ReturnParms.length,b=0;b<a;b++){var f=this.ReturnParms[b];gx.fn.isOutputParm(f)&&k.push(f)}else return this.ReturnParms;return k};this.close=function(k,a,b){a=a||{};this.state="closing";k&&(this.RawReturnedParms=k);var f=window;
gx.popup.ext.win?(f=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var g=function(){var u=l.Deferred();this.setCellValue.apply(this,arguments);return u.resolve()},m=function(){var u;gx.evt.evtPromptMouseDown=!0;this.beforeClose&&this.beforeClose(k);!this.isPdf&&this.frameWindow&&this.frameWindow.gx&&(this.IsPrompt&&(null==this.parentPopup?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=
null),this.frameWindow.gx.evt.onunload.call(this.frameWindow),gx.util.browser.isIE()||(this.frameDocument.gxPopup=null),this.frameWindow=this.frameDocument=null);gx.popup.ext.close(this);var x=this.getOutputParms(),w=function(){a&&!0===a.ignoreCmds&&(this.OncloseCmds=[]);gx.ajax.dispatchCommands(this.OncloseCmds,void 0,{updateParms:x});this.cleanup();this.state="closed";this.afterClose&&this.afterClose(k);this.parentPopup?this.parentPopup.frameWindow.gx.fx.obs.notify("popup.afterclose",[this]):gx.fx.obs.notify("popup.afterclose",
[this])}.closure(this),A=!0;gx.csv.lastId=0;if(null!=k&&this.IsPrompt){if(b&&a.parmsMetadata&&a.updateParms){var q=a.parmsMetadata.length;for(u=0;u<q;u++)A=a.parmsMetadata[u],gx.util.inArray(A,a.updateParms)&&(k[u]=b[A])}q=k.length;var v=gx.popup.assignPromptFields,t=gx.popup;gx.lang.emptyObject(this.CustomRenderGrid)||(v=g,t=this.CustomRenderGrid.grid);A=!1;v.call(t,x,k).then(function(){var B=null;q=x.length;for(u=0;u<q;u++){var G=x[u].Ctrl;gx.fn.isAccepted(G)&&(B=G)}B&&gx.TabOnPrompSelect&&(G=gx.fn.getControlIndex(B),
-1!=G&&(B=gx.fn.searchFocus(G+1,!0)));gx.fn.setFocus(B);if(this.PromptIsGet)if(this.Opener.fullAjax){var J;(G=gx.csv.ctxControlId(B.id))&&(J=gx.O.getValidStructFld(G));J&&gx.csv.validControls(J.id,J.id+1,!0,this.Opener)}else{gx.csv.loadScreen(function(){gx.fn.setFocus(B);w()});return}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),"undefined"==typeof window.GXPkIsDirty?!1:window.GXPkIsDirty,null,"eng")}catch(n){gx.dbg.logEx(n,
"gxpopup.js","close")}w()}.closure(this))}else k&&x&&x instanceof Array&&0<x.length&&gx.fn.setReturnParms(this.Opener,x,k,this.CustomRenderGrid);A&&w()},p=gx.util.browser;p.isFirefox()||p.isIE()?f.setTimeout(m.closure(this),10):m.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload(!1)};this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null,
this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(k){gx.dbg.logEx(k,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},getWindowIframeElement:function(c){var d;c=c.document.getElementsByTagName("iframe");for(var k=0;k<c.length&&!d;k++){var a=c[k];a.contentWindow===window&&(d=a)}return d},gxOpener:function(){try{parent.gxTestAvailable=1;var c=this.getWindowIframeElement(parent);return c&&void 0!==l(c).attr("data-gx-popup-ct")?parent:window}catch(d){}return null},
setFocus:function(){var c=this.getPopup();c&&c.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},waitCallback:function(c){var d=gx.popup.getPopup();d?"opened"==d.state?c():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[c],50):c()},getPopup:function(){var c=this.gxOpener();try{if(!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(c.gx))return c.gx.popup.currentPopup}catch(d){}return null},setPopup:function(c){this.currentPopup=
c},open:function(c,d){return this.openPopup(c,d)},openUrlToOpenPopupParms:function(c,d,k){var a=1,b=0,f=0,g=0,m=0,p=0;k&&(a=k[0],b=k[1],f=k[2],g=k[3],m=k[4],p=k[5]);return[c,a,b,f,g,m,p,[],d]},openUrl:function(){return this.openPopup(this.openUrlToOpenPopupParms.apply(this,arguments))},openPopup:function(c,d){var k=this.getPopup();d=d||gx.O;var a,b;if(k&&(k.Opener===d||k.Opener.MasterPage&&k.Opener.MasterPage===d)&&gx.lang.isArray(c))k.OncloseCmds.push({popup:c});else{var f=new this.Popup(c,!1);f.Opener=
d;c=0;for(k=f.ReturnParms.length;c<k&&!((b=gx.fn.vStructForVar(f.ReturnParms[c]))&&b.grid&&(a=d.getGridById(b.grid)));c++);a&&a.isUsercontrol&&(f.CustomRenderGrid=a);f.open();return f}},openDialog:function(c){var d=new this.Dialog;d.Opener=gx.O;d.open(c);return d},openPrompt:function(c,d,k,a,b,f){if(null==gx.popup.currentPrompt){a&&gx.setGxO(a,b);var g=document.activeElement,m=!1,p;if(g){var u=gx.fn.rowGridId(g);g=gx.fn.controlRowIndex(g);if(!gx.lang.emptyObject(u)&&!gx.lang.emptyObject(g)){gx.csv.lastGrid=
u;gx.fn.setCurrentGridRow(u,g);u=gx.O;g=gx.csv.lastId;var x=gx.fn.validStruct(g,u);if(x)var w=gx.csv.lastRow[x.grid];gx.csv.checkRowChange(g,!1,u,w)}}else{w=0;for(g=d.length;w<g;w++)if(d[w].IOType){u=d[w].id;break}u&&(x=gx.O.getValidStructFld(u),!gx.lang.emptyObject(x)&&(p=gx.O.getGridById(x.grid)))&&(m=p.isUsercontrol)&&(u=p.gridId+"",g=gx.lang.emptyObject(p.grid.getSelectedRow)?void 0:gx.text.padl(p.grid.getSelectedRow()+"",4,"0"),gx.lang.emptyObject(u)||gx.lang.emptyObject(g)||(gx.csv.lastGrid=
u,gx.fn.setCurrentGridRow(u,g)))}if(f||this.outParmsAccepted(d)||m)c=new this.Popup([c,1,0,0,0,0,0,[],d],!0),c.IsMod=k,c.Opener=gx.getObj(a,b),m&&(c.CustomRenderGrid=p),c.open()}},outParmsAccepted:function(c){for(var d=c.length,k=!1,a=0;a<d;a++){var b=c[a];gx.fn.isOutputParm(b)&&(k=!0);if(gx.fn.isOutputParm(b)&&b.Ctrl&&gx.fn.isAccepted(b.Ctrl))return!0}return!k},gxReturn:function(c){gx.fn.closeWindow(c)},parmId:function(c){c=gx.dom.id(c);0===c.indexOf("span_")&&(c=c.substring(5));return c},popuplvl:function(){var c=
gx.popup.getPopup();return c&&c.window?c.window.gx.popup.lvl:-1},assignPromptFields:function(c,d){var k=[],a=gx.O,b=[],f=99999,g=Math.min(c.length,d.length),m=0;for(m=0;m<g;m++){var p=c[m],u=d[m];if(p.Ctrl&&!gx.lang.emptyObject(p)){gx.csv.pkDirty=p.isKey;"checkbox"==p.Ctrl.type&&p.Ctrl.value!=u&&(p.Ctrl.checked=!p.Ctrl.checked);p.Ctrl.value!=u&&p.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0);var x=gx.csv.ctxControlId(this.parmId(p.Ctrl)),w=a.getValidStructFld(x);b.push({idx:w?w.id:f++,ParmCtrl:p.Ctrl,
ControlId:x,VStruct:w,PValue:u})}}b.sort(function(A,q){return A.idx<q.idx?-1:A.idx>q.idx?1:0});for(m=0;m<b.length;m++)this.assignPromptFieldValue(b[m],a);for(m=0;m<b.length;m++)k.push(this.assignAndValidatePromptField(b[m],a));return l.when.apply(l,k)},assignPromptFieldValue:function(c,d){var k=c.VStruct,a=c.ParmCtrl;c=c.PValue;gx.lang.emptyObject(k)||gx.lang.emptyObject(k.v2c)||"date"!=k.type&&"dtime"!=k.type?(gx.fn.setControlValue(this.parmId(a),c,0),k.c2v(),"function"===typeof k.v2bc&&k.v2bc.call(d)):
(k.v2v(c),"function"===typeof k.v2bc&&k.v2bc.call(d),gx.fn.v2c(k,c));gx.fn.setControlGxValid(a,"0");gx.evt.execOnchange(a);d=gx.dom.byId("span_"+a.name);null!=d&&(0===d.childNodes.length&&d.appendChild(gx.popup.gxOpener().document.createTextNode("")),d.childNodes[0].nodeValue=c);k&&k.gxgrid&&k.gxgrid.updateControlValue(k,!1)},assignAndValidatePromptField:function(c,d){var k=l.Deferred(),a=!0,b=c.ControlId,f=c.VStruct,g,m=function(){gx.popup.assignPromptFieldValue(c,d);gx.util.balloon.clear(b);g&&
(gx.O.fromValid>g&&(gx.O.fromValid=g),gx.O.toValid=g+1,gx.csv.validateAll().done(function(){if(!gx.lang.emptyObject(f.rgrid)){for(var p=f.rgrid.length,u=0;u<p;u++)f.rgrid[u].filterVarChanged();k.resolve()}}));k.resolve()}.closure(this);!gx.lang.emptyObject(f)&&(g=d.getValidStructId(f.fld))&&(g>gx.O.toValid&&(d.toValid=g),a=!1,gx.csv.validateAll().done(m));a&&k.resolve();return k.promise()},autofit:function(){var c=this.getPopup();gx.lang.emptyObject(c)||"opened"!=c.state||this.ext.autofit(c,null,
!1)},Impl:function(c,d,k,a,b,f,g,m){var p="PopupBorder gx-popup gx-popup-default";c.cssClass&&(p=p.replace("gx-popup-default",""),p+=" "+c.cssClass);return new this.ext.popUp(c,k,f,m,g,a,b,"gxp",d,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",p,"PopupShadow",void 0)},setZIndex:function(c){c=
gx.dom.getStyle(c,"zIndex");isNaN(c)&&(c=999);c++;this.zindex=c;this.ext.zdx=c},ext:{currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,win:null,doc:null,compatMode:function(){return!gx.runtimeTemplates||gx.util.browser.isIE()&8>=gx.util.browser.ieVersion()},hide:function(c){var d=gx.dom.byId;gx.popup.ext.compatMode()&&(d(c+"_t").style.visibility="hidden",d(c+"_c").style.visibility="hidden",d(c+"_rs").style.visibility="hidden");d(c+"_b").style.visibility="hidden"},show:function(c){var d=
gx.dom.byId,k=l("#"+c+"_b");gx.popup.ext.compatMode()?(d(c+"_t").style.visibility="visible",d(c+"_c").style.visibility="visible",d(c+"_rs").style.visibility="visible"):l(document.body).toggleClass("gx-popup-opened",!0);k.css("visibility","visible")},close:function(c,d){l(document.body).toggleClass("gx-popup-opened",!1);if(!d||"function"!=typeof d||!1!==d()){c.draggable&&c.draggable.deinit();c.resizable&&c.resizable.deinit();gx.popup.ext.iFrame=null;gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=
null;gx.popup.ext.currRS=null;var k=c.id;d=document.getElementById(k+"_b");k=document.getElementById(k+"_ifrm");gx.popup.ext.deinitmodal(c);gx.popup.setPopup(c.parentPopup);var a=c.callerActiveElement;a&&a.focus&&a.focus();c.parentPopup?c.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[c]):gx.fx.obs.notify("popup.close",[c]);k&&(k.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?d.parentNode.removeChild(d):gx.dom.removeControlSafe(d)}},move:function(c,
d,k){c=l("#"+c+"_b");c.toggleClass("gx-popup-centered",!1);void 0!==d?c.css({left:Math.max(d,0)}).toggleClass("gx-popup-horizontal-center",!1):c.toggleClass("gx-popup-horizontal-center",!0);void 0!==k&&c.css({top:Math.max(k,0)})},resize:function(c,d,k){var a=gx.dom.byId;if(a(c+"_rs").rsEnable){var b=a(c+"_rs"),f=a(c+"_b"),g=a(c+"_t");a=a(c+"_c");gx.popup.ext.compatMode()?(b.style.left=Math.max(d,92)+"px",b.style.top=Math.max(k,72)+"px",f.style.width=Math.max(d+8,100)+"px",f.style.height=Math.max(k+
8,80)+"px",g.style.width=Math.max(d+3,92)+"px",a.style.width=Math.max(d-5,87)+"px",a.style.height=Math.max(k-28,44)+"px"):(c=document.getElementById(c+"_ifrm"),l(c).css({width:d,height:k}));this.resizePopupContent(d,k)}},movepopup:function(){null!=this.currIDb&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff);null!=this.currRS&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(){gx.popup.ext.currRS=null},startRS:function(c,
d){var k=gx.popup.ext,a=c.pageX;c=c.pageY;var b=l(d);gx.popup.ext.compatMode()?(k.rsxoff=parseInt(d.style.left,0)-a,k.rsyoff=parseInt(d.style.top,0)-c):(k.rsxoff=b.position().left-a,k.rsyoff=b.position().top-c);k.currRS=d;return!1},changez:function(c){c=null!=c?c:this;var d=gx.popup.ext,k=gx.dom.byId;c.style.zIndex=++d.zdx;k(c.cid+"_rs").style.zIndex=++d.zdx},stopdrag:function(){gx.popup.ext.currIDb=null},grab_id:function(c,d){var k=gx.popup.ext,a=gx.dom.byId;d=a(d.cid+"_b");gx.evt.mouse.update(c);
c=gx.evt.mouse.x;a=gx.evt.mouse.y;gx.popup.ext.compatMode()?(k.xoff=parseInt(d.style.left,0)-c,k.yoff=parseInt(d.style.top,0)-a):(k.xoff=l(d).position().left-c,k.yoff=l(d).position().top-a);k.currIDb=d;return!1},subBox:function(c,d,k,a,b,f){b=document.createElement("div");b.setAttribute("id",f);b.style.position="absolute";b.style.left=c+"px";b.style.top=d+"px";b.style.width=k+"px";b.style.height=a+"px";b.style.visibility="visible";b.style.padding="0px";b.style.width=k+"px";return b},window:function(){gx.popup.ext.compatMode()?
this.window_compat.apply(this,arguments):this.window_responsive.apply(this,arguments)},window_responsive:function(c,d,k,a,b,f,g,m,p,u,x,w,A,q,v,t,B,G,J,n,r,y,C,D,F,H,L,N){F=void 0!==F?F:gx.popup.showParentPopups;d=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);a=this.win.gx.dom.byId.closure(this.win.gx.dom);k=l("<div/>",{id:d+"_b",style:v?"":"visibility:hidden;"})[0];l(k).addClass("gx-responsive-popup gx-popup-centered "+C+" gx-popup-initial");C=l("<div/>",{id:d+"_t"})[0];
C.className=n;C.innerHTML='<span id="'+d+'_gxtitle" class="PopupTitle">'+p+'</span><span class="'+r+'"; id="'+d+'_cls"></span>';p=l("<div/>",{id:d+"_c"})[0];p.className=y;"string"==typeof g?p.innerHTML=g:p.appendChild(g);k.appendChild(C);k.appendChild(p);N=gx.dom.byId(N)||this.doc.body;N.appendChild(k);v||this.hide(d);g=a(d+"_b");v=a(d+"_cls");g.cid=d;g.isExt=G?!0:!1;G=a(d+"_t");G.cid=d;B&&(c.resizable=new gx.popup.ext.resizable(g,d,J,k));t&&(c.draggable=new gx.popup.ext.draggable(g,G));gx.evt.attach(v,
"click",L.close||this.close.closure(this,[c,L.beforeClose]));(q||F)&&this.initmodal(c,F,H)},resizable:function(c,d,k,a){var b,f=!1,g,m,p,u,x;this.init=function(w,A,q,v){var t=l("<div/>",{id:A+"_rs"})[0];t.className+="gx-popup-resize";t.innerHTML='<img src="'+q+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'">';t.rsEnable=!0;t.style.cursor="se-resize";t.cid=A;v.appendChild(t);p=w;t.firstChild.addEventListener("dragstart",function(B){gx.evt.cancel(B,!0)},!0);u=this.onMouseup.closure(this);
x=this.onMousemove.closure(this);t.addEventListener("mousedown",this.onMousedown.closure(this));document.addEventListener("mouseup",u);document.addEventListener("mousemove",x);b=!0};this.deinit=function(){b&&(document.removeEventListener("mouseup",u),document.removeEventListener("mousemove",x),b=p=null)};this.onMousemove=function(w){if(f){var A=l(p).find("iframe");l("iframe").css("pointer-events","none");var q=l(p).hasClass("gx-popup-centered")?2:1,v=w.clientX-g,t=w.clientY-m;v=l(A).width()+v*q;q=
l(A).height()+t*q;l(A).css({width:v,height:q});g=w.clientX;m=w.clientY}};this.onMousedown=function(w){g=w.clientX;m=w.clientY;f=!0};this.onMouseup=function(){f&&(l("iframe").css("pointer-events",""),f=!1)};this.init(c,d,k,a)},draggable:function(c,d){var k,a=!1,b,f,g=0,m=0,p,u,x,w,A;this.init=function(q,v){p=q;u=v;A=this.onMousedown.closure(this);w=this.onMousemove.closure(this);x=this.onMouseup.closure(this);p.addEventListener("mousedown",A);p.addEventListener("mouseup",x);document.addEventListener("mousemove",
w);k=!0};this.deinit=function(){k&&(p.removeEventListener("mousedown",A),p.removeEventListener("mouseup",x),document.removeEventListener("mousemove",w),k=p=u=null)};this.onMousemove=function(q){if(a){l("iframe").css("pointer-events","none");var v=q.clientY-f;p.style.left=g+(q.clientX-b)+"px";p.style.top=m+v+"px"}};this.onMousedown=function(q){if(q.target===u){var v=l(p);g=v.position().left;m=v.position().top;v.css({left:g,top:m}).toggleClass("gx-popup-centered gx-popup-horizontal-center",!1);b=q.clientX;
f=q.clientY;a=!0}};this.onMouseup=function(){a&&(l("iframe").css("pointer-events",""),a=!1,g=parseInt(p.style.left,10)||0,m=parseInt(p.style.top,10)||0)};this.init(c,d)},window_compat:function(c,d,k,a,b,f,g,m,p,u,x,w,A,q,v,t,B,G,J,n,r,y,C,D,F,H,L,N){F=void 0!==F?F:gx.popup.showParentPopups;w=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);A=this.win.gx.dom.byId.closure(this.win.gx.dom);b=Math.max(b,100);f=Math.max(f,80);d=new this.subBox(b-8,f-8,7,7,"",w+"_rs");B&&(d.className+=
"gx-popup-resize",d.innerHTML='<img src="'+J+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',d.style.cursor="se-resize");d.rsEnable=B;k=new this.subBox(k,a,b,f,x,w+"_b");k.className=C;k.style.display="block";k.style.boxSizing="content-box";k.style.zIndex=++this.zdx;v||(k.style.visibility="hidden");u=new this.subBox(2,2,b-5,20,u,w+"_t");u.style.overflow="hidden";u.style.boxSizing="content-box";u.className=n;u.innerHTML='<span id="'+w+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+
p+'</span><span class="'+r+'" style="z-index:'+ ++this.zdx+';" id="'+w+'_cls"></span>';b=new this.subBox(2,24,b-13,f-36,m,w+"_c");b.className=y;"string"==typeof g?b.innerHTML=g:b.appendChild(g);b.style.overflow="hidden";b.style.boxSizing="content-box";v||(k.style.visibility="hidden",u.style.visibility="hidden",b.style.visibility="hidden");k.appendChild(u);k.appendChild(b);k.appendChild(d);N=gx.dom.byId(N)||this.doc.body;N.appendChild(k);v||this.hide(w);var O=A(w+"_b");O.cid=w;O.isExt=G?!0:!1;var Q=
A(w+"_t");Q.cid=w;B&&(g=A(w+"_rs"),g.cid=w,g.style.boxSizing="content-box",gx.evt.attach(g,"mousedown",this.startRS.closure(this,[g],!0)),gx.evt.attach(g,"mouseup",this.stopRS.closure(this,[g],!0)));g=A(w+"_cls");gx.evt.attach(g,"click",L.close||this.close.closure(this,[c,L.beforeClose]));t&&(gx.evt.attach(Q,"mousedown",function(W){this.grab_id(W,Q);gx.evt.attach(O,"mouseup",this.stopdrag.closure(this,[Q],!0),this,{single:!0})},this),B&&gx.evt.attach(d.firstChild,"dragstart",function(W){gx.evt.cancel(W,
!0)},!0));(q||F)&&this.initmodal(c,F,H)},popUp:function(c,d,k,a,b,f,g,m,p,u,x,w,A,q,v,t,B,G,J,n,r,y,C,D,F,H,L,N,O,Q,W,V,Z,ba,ca){x=gx.popup.ext;null!=c.parentPopup?(w=c.parentPopup.window,x=w.gx.popup.ext,x.win=w,x.doc=w.document,gx.popup.ext=x):(x.win=window,x.doc=x.win.document);x.win.gx.popup.setPopup(c);c.window=x.win;c.document=x.doc;x.win.gx.popup.lvl++;m+=x.win.gx.popup.lvl;c.id=m;c.IsPrompt||gx.util.sameAppUrl(p)?(p+=gx.http.urlParameterPrefix(p),p+=encodeURIComponent("gxPopupLevel="+x.win.gx.popup.lvl+
";"),p+=encodeURIComponent("gxTabId="+gx.util.browser.tabId+";"),k=gx.util.getFileName(p),k=k.charAt(0).toUpperCase()+k.slice(1),gx.popup.ext.compatMode()?(w=gx.HTML5?"auto":"100%",p='<iframe id="'+m+'_ifrm" src="'+p+'" width="'+w+'" height="'+w+'" frameborder="0" style="overflow:auto;" title="'+k+'" data-gx-popup-ct=""></iframe>'):(w=!d&&0<f?f:gx.dom.fixes.getPopupMinWidth(),p=l("<iframe/>",{id:m+"_ifrm",src:p,title:k,style:"width:"+gx.dom.addUnits(w)}),p.attr("data-gx-popup-ct",""),p=p[0].outerHTML,
gx.util.browser.isIPad()&&(p='<div class="iframe-container">'+p+"</div>")),k={close:c.close.closure(c,[null,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel}])},x.window(c,d,a,b,f,g,p,u,A,q,t,B,G,J,n,r,y,D,O,Q,W,V,Z,ba,ca,!0,k),d=x.win.gx.dom.byId(m+"_ifrm"),x.iFrame=d,gx.lang.doCallTimeout(x.showIfLoaded,x,[c,d,1],50)):(gx.popup.setPopup(null),c=new Date,c=c.getTime(),m="",1==k&&(m="left="+a+",top="+b),a="",d||(a=",width="+f+",height="+g),window.open(D?p:"","gx"+c,"status=no,menubar=no"+a+",resizable="+
(y?"yes":"no")+",scrollbars=yes,"+m))},initmodal:function(c,d,k){c.showParentPopups=d;null==c.parentPopup?gx.ajax.disableForm(k,!0):d||this.hide(c.parentPopup.id)},deinitmodal:function(c){if(null==c.parentPopup)gx.ajax.enableForm();else{this.show(c.parentPopup.id);var d=c.parentPopup.frameWindow;d&&d.gx&&c.parentPopup.frameWindow.gx.ajax.enableForm()}},getDocumentContentType:function(c){return c.contentType||l(c.querySelector('meta[http-equiv="content-type"]')).attr("content")},isPDFPopup:function(c,
d){if(void 0===d.isPdf){var k=c.src;if(gx.util.getContentTypeFromExt(k)==gx.util.contentTypes.pdf)return d.isPdf=!0;var a=gx.util.contentTypes.html;try{var b=c.contentDocument;b=c.contentWindow.document;a=this.getDocumentContentType(b);if(a==gx.util.contentTypes.pdf)return d.isPdf=!0}catch(g){a=null}if(gx.lang.emptyObject(a)){var f;c={};c.url=k;c.method="HEAD";c.sync=!0;c.ajaxHeader=!1;c.handler=function(g,m,p){f=p.getResponseHeader("Content-Type")};c.obj=!0;gx.http.doCall(c);if(f&&0<=f.indexOf(gx.util.contentTypes.pdf))return d.isPdf=
!0}return!1}return d.isPdf},showIfLoaded:function(c,d,k){try{if(c.isActive()&&(this.docReady(d,k)||10<k&&this.isPDFPopup(d,c))){var a=gx.dom.iFrameDoc(d),b=!1;try{b=a&&"about:blank"!=a.URL}catch(g){}var f=this.isPDFPopup(d,c);if(b||f){c.state="opened";this.autofit(c,a,!0);return}}}catch(g){gx.dbg.logEx(g,"gxpopup.js","showIfLoaded")}k++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[c,d,k],50*k)},docReady:function(c,d){if("complete"==c.readyState)return!0;if(c=gx.dom.iFrameDoc(c)){try{var k=
"undefined"!=typeof c.gxReadyState?c.gxReadyState:c.readyState}catch(a){return!0}if("complete"==k)return!0}return!gx.util.browser.isIE()&&50<=d&&c&&c.body&&0!==c.body.childNodes.length?!0:!1},resizePopupContentLegacy:function(c,d){var k=gx.dom.iFrameDoc(this.iFrame);d=0<d?d:"100%";c=0<c?c:"100%";var a=l(this.iFrame);k&&(c=d="100%");a.width(c);void 0===d&&(d=Math.max(Math.max(k.body.scrollHeight,k.documentElement.scrollHeight),Math.max(k.body.offsetHeight,k.documentElement.offsetHeight)));a.height(d)},
resizePopupContent:function(c,d){gx.HTML5&&this.iFrame&&(gx.popup.ext.compatMode()?this.resizePopupContentLegacy(c,d):this.resizePopupContentImpl(c,d))},resizePopupContentImpl:function(c,d){var k=gx.dom.iFrameDoc(this.iFrame),a=l(this.iFrame);if(0<c&&0<d)a.width(c),a.height(d);else if(k){try{var b=a[0].contentWindow.gx&&a[0].contentWindow.gx.runtimeTemplates}catch(g){}b||a.width(50);c=Math.max(k.body.scrollWidth,k.body.getBoundingClientRect().width,k.documentElement.scrollWidth,k.documentElement.getBoundingClientRect().width);
try{var f=a[0].scrollWidth-a[0].contentDocument.scrollingElement.offsetWidth;c+=a.height()<k.body.offsetHeight?f:0}catch(g){}1<Math.abs(a.width()-c)&&a.width(c);k=Math.max(k.body.scrollHeight,k.body.getBoundingClientRect().height,k.documentElement.scrollHeight,k.documentElement.getBoundingClientRect().height);a.height(k)}},autofit:function(){gx.popup.ext.compatMode()?this.autofit_comp.apply(this,arguments):this.autofit_responsive.apply(this,arguments)},autofit_responsive:function(c,d,k){if(!gx.lang.emptyObject(c)){var a=
c.id,b=c.isPdf,f=l("#"+a+"_c");this.doc||(this.doc=c.document);var g=this.doc;var m=g.getElementById(a+"_ifrm"),p=l(g.getElementById(a+"_gxtitle"));!d&&gx.popup.ispopup()&&(d=gx.dom.iFrameDoc(m));this.iFrame=this.iFrame||m;p.text(d&&!b?d.title:"");c.frameDocument=d;c.frameWindow=m.contentWindow;d&&!b&&(d.gxPopup=c);gx.util.browser.isIPad()&&(f.css("overflow-y","auto"),f.css("-webkit-overflow-scrolling","touch"));if(window.self!==window.top){var u=this.getiFrameSizeInfo(g),x=0;u.accessParentFrame&&
(x=window.top.document.body.scrollTop);p=u.scrollTop;m=u.maxHeight+Math.min(x-u.y,0)-50;f.css("max-height",m).parent().css("margin-top","0px");this.move(a,void 0,Math.max(x-u.y,0)+p+(m-Math.min(d.body.offsetHeight,m))/2)}if(b){f.addClass("gx-popup-pdf");var w=.5*g.body.clientWidth;var A=.85*g.body.clientHeight}c.autoresize||(w=c.width,A=c.height);this.resizePopupContent(w,A);k&&(c.position&&(d=parseInt(c.top,0),c=parseInt(c.left,0),this.move(a,c,d)),this.show(a))}},autofit_comp:function(c,d,k){if(!gx.lang.emptyObject(c)){var a=
document;c.zindex=null!=a.gxPopup?this.zdx+a.gxPopup.zindex:this.zdx;var b=c.id,f=c.isPdf;this.doc||(this.doc=c.document);a=this.doc;var g=a.getElementById(b+"_ifrm");!d&&gx.popup.ispopup()&&(d=gx.dom.iFrameDoc(g));c.frameDocument=d;c.frameWindow=g.contentWindow;d&&!f&&(d.gxPopup=c);g=a.getElementById(b+"_rs");var m=a.getElementById(b+"_t"),p=a.getElementById(b+"_b"),u=a.getElementById(b+"_c"),x=a.getElementById(b+"_gxtitle");x.innerHTML=d&&!f?d.title:"";x.style.width="auto";var w=gx.dom.getComputedStyle(u),
A=gx.dom.getComputedStyle(m),q=gx.dom.getComputedStyle(p),v=gx.dom.getComputedStyle(g),t=parseInt(w.height,0),B=parseInt(w.width,0),G=this.getiFrameSizeInfo(a),J=G.maxWidth,n=G.maxHeight,r=G.scrollTop,y=G.scrollLeft,C=G.x;G=G.y;var D=gx.dom.dimensions(p);c.autoresize||(t=c.height-t+D.h,B=c.width-B+D.w);var F=c.width-B,H=c.height-t;c.autoresize&&(!f&&d?(d=gx.HTML5?d.documentElement||d.body:d.body,a=k&&gx.util.browser.isEdge()?l.position.scrollbarWidth():0,d?(d.gxwidth||(d.gxwidth=d.scrollWidth),F=
d.gxwidth+a,a=d.gxwidth+30-J,H=d.scrollHeight+30-n,F=Math.max(F,x.clientWidth+15)-B-(0<a?a:0),H=d.scrollHeight-t-(0<H?H:0)):gx.util.browser.isIE()&&(0>F&&(F=0),0>H&&(H=0))):f&&(F=a.body.clientWidth/2,H=a.body.clientHeight/2));x=parseInt(c.top,0);t=parseInt(c.left,0);c.position||(x=(n-H)/2-D.h/2+r-G,t=(J-F)/2-D.w/2+y-C,0>x&&(x=5,H-=5),0>t&&(t=5,F-=5));p.style.top=parseInt(x,0)+"px";p.style.left=parseInt(t,0)+"px";c.autoresize?(c=function(L,N){N=parseInt(L,0)+N;return 0<N?N:L},m.style.width=c(A.width,
F)+"px",p.style.height=c(q.height,H)+"px",p.style.width=c(q.width,F)+"px",u.style.height=c(w.height,H)+"px",u.style.width=c(w.width,F)+"px",c=gx.util.browser.isIE()?4:2,g.style.top=parseInt(q.height,0)-parseInt(v.height,0)-c+"px",g.style.left=parseInt(q.width,0)-parseInt(v.width,0)-c+"px"):(t=c.height,B=c.width,g.style.left=Math.max(B,92)+"px",g.style.top=Math.max(t,72)+"px",p.style.width=Math.max(B+8,100)+"px",p.style.height=Math.max(t+8,80)+"px",m.style.width=Math.max(B+3,92)+"px",u.style.width=
Math.max(B-5,87)+"px",u.style.height=Math.max(t-28,44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(u.style["overflow-y"]="auto",u.style["-webkit-overflow-scrolling"]="touch"):u.style.overflow="hidden";f&&gx.util.browser.isIE()?this.resizePopupContent("100%","100%"):this.resizePopupContent(parseInt(u.offsetWidth,10),parseInt(u.offsetHeight,10));k&&this.show(b)}},getiFrameSizeInfo:function(c){var d=gx.util.getWindowInfo().canAccessFrame,k={x:0,y:0,accessParentFrame:d};!d||window==window.top||
gx.lang.emptyObject(window.top)?(k.maxWidth=window.innerWidth||c.documentElement.clientWidth||c.body.offsetWidth,k.maxHeight=window.innerHeight||c.documentElement.clientHeight||c.body.offsetHeight,k.scrollTop=gx.dom.documentScroll(c).scrollTop,k.scrollLeft=gx.dom.documentScroll(c).scrollLeft):(d=gx.dom.position(window.frameElement),window.top.document.body.clientHeight>c.body.clientHeight?k.maxHeight=c.body.clientHeight:(k.maxHeight=window.top.document.body.clientHeight,k.y=d.y),k.scrollTop=c.body.scrollTop,
k.scrollLeft=c.body.scrollLeft,k.maxWidth=Math.min(window.top.document.body.clientWidth,c.body.clientWidth),window.top.document.body.clientWidth>c.body.clientWidth?k.maxWidth=c.body.clientWidth:(k.maxWidth=window.top.document.body.clientWidth,k.x=d.x));return k},_init:function(){}},_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();var c=this.getPopup();if(c){try{c.frameDocument&&(gx.util.browser.isIE()?c.frameDocument=c.frameWindow.document:c.frameDocument.gxPopup=c)}catch(d){c.frameDocument=
c.frameWindow.document,gx.dbg.logEx(d,"gxpopup.js","_init")}c=c.window.gx.popup;gx.fx.obs.addObserver("gx.onload",c,function(){this.autofit()}.closure(c));gx.fx.obs.addObserver("grid.onafterrefresh",c,function(d,k,a){k<a&&this.autofit()}.closure(c));gx.fx.obs.addObserver("gx.onafterevent",c,function(){this.autofit()}.closure(c))}}}}(gx.$);
gx.ajax=function(l){function c(a,b,f){0<a&&(f=f||gx.O,gx.fn.setCurrentGridRow(a,b),(a=f.getGridById(a))&&a.instanciateRow(b))}var d=/\?(.*)/,k=function(a,b,f){gx.dbg.logMsg("Unable to execute external object "+a+" - "+b+"("+f+")")};return{reqHeader:"GxAjaxRequest",dfTimer:null,resolveParmKey:function(a){var b=!1;a.av?b=a.av:a.ctrl&&a.prop?b=a.ctrl+a.prop:a.ctrl&&(b=a.ctrl);return b},serviceUrl:function(a){var b=gx.ajax.selfUrl();a&&(b=d.test(b)?b.replace(d,"?"+a+gx.http.urlParameterSeparator(b)+"$1"):
b+("?"+a));return b},validationMessage:function(a,b,f,g,m,p){a=new gx.ajax.message(a,b,f,g,m,p);return gx.lang.apply(a,{isValidation:!0,beforeCall:gx.emptyFn,beforeAjaxCall:function(u){u.warnOnTimeout=!0;u.beforeSend=function(x){x.setRequestHeader("X-FULL-AJAX-REQUEST","1")}},beforeProcesResponse:function(u){var x,w=[],A=this.getParmsMetadata("input");for(x=0;x<A.length;x++)A[x].av&&w.push(A[x].av);u.isValidation=!0;u.validationInput=w}})},message:function(a,b,f,g,m,p){var u;return{disableForm:p,
gxO:b,grid:f,row:g,methods:[a],isValidation:!1,addMethod:function(x){this.methods.push(x)},gridsData:function(){var x=this.gxO.getGridById(this.grid,this.row),w={},A=function(v,t){t[v.gridName]={id:v.gridId,lastRow:Math.max(0,Number(v.lastRowId)),pRow:v.parentRow?v.parentRow.gxId:""}};if(x){var q=function(v,t){if(v){A(v,t);var B=gx.fn.currentGridRowImpl(v.gridId);B&&(t[v.gridName].lastRow=Math.max(0,Number(B.substr(-4,4))-1));q(v.parentGrid,t)}};(function(v,t,B,G){var J=function(n,r){return n?r.parentGrid===
n&&gx.text.startsWith(r.parentRow.gxId,G)?r:J(n.parentGrid,r):null};B=l.map(gx.O.Grids,function(n){return J(v,n)});l.each(B,function(n,r){A(r,t)})})(x,w,this.gxO,this.row);q(x,w)}else l.each(this.gxO.Grids,function(v,t){A(t,w)});return w},to_json:function(){var x={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,pkgName:this.gxO.PackageName||"",events:this.methods};this.fullPost&&(x.fullPost=this.fullPost);this.addGXStateParms(x);
this.grid&&(x.grid=this.grid);x.grids=this.gridsData();this.row&&(x.row=this.row.substring(0,4),x.pRow=this.row.substring(4));return gx.json.serializeJson(x)},getParmsMetadata:function(x){for(var w=[],A={},q=0,v=this.methods.length;q<v;q++){var t=this.methods[q];if(this.gxO.EvtParms[t]){t=this.gxO.EvtParms[t]["input"==x?0:1];for(var B=0;B<t.length;B++)if(t[B].postForm||t[B].sPrefix||t[B].sSFPrefix||t[B].sCompEvt)w.push(t[B]);else{var G=gx.ajax.resolveParmKey(t[B]);G&&(void 0===A[G]?(A[G]=w.length,
w.push(t[B])):void 0===w[A[G]].grid&&void 0!==t[B].grid&&(w[A[G]]=t[B]))}}}return w},parmFromHidden:function(x,w){var A=gx.O;gx.setGxO(w);if(!gx.lang.emptyObject(x)&&!gx.lang.emptyObject(w)&&x.v2v){var q=gx.fn.getHidden(this.gxO.IsMasterPage?x.fld+"_MPAGE":gx.O.CmpContext+x.fld);x.v2v(q);q=w[x.gxvar]}gx.setGxO(A);return q},getInputParms:function(){for(var x=this,w=this.getParmsMetadata("input"),A=this.gxO.CmpContext,q=[],v=[],t,B,G,J,n,r,y=0,C=w.length;y<C;y++)if(B=G=void 0,r="",t=w[y],t.postForm){J=
{};J.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(J,gx.http.postDataFormat.JSON);for(var D in gx.http.viewState)this.fullPost[D]||void 0===gx.http.viewState[D]||(this.fullPost[D]=gx.http.viewState[D])}else if(this.gxO.isTransaction()&&0<this.grid&&this.row&&"Gx_mode"===t.av&&"vMODE"===t.fld)q.push(gx.fn.getGridRowModeImpl(gx.fn.gridLvl(this.grid),this.grid,this.row));else if("Referrer"==t.prop)q.push(gx.referrer?gx.referrer:document.referrer);else if(t.sPrefix)q.push(this.gxO.sPrefix());
else if(t.sSFPrefix)q.push("");else if(t.sCompEvt)q.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),""));else if(t.ctrl){if(t.prop)"GridRC"==t.prop?(J=(J=gx.parentGridRow(t.grid,this.gxO))?"_"+J:"",B={gridRC:gx.fn.getHidden(this.gxO.sPrefix()+t.av+J),rowSuffix:J,grid:t.grid}):B="GridCurrRow"==t.prop?gx.fn.currentGridRowImpl(t.grid):this.gxO.getCtrlPropertyValue(this.gxO.sPrefix()+t.ctrl,t.prop);else if(G=this.gxO.getValidStructFld(t.ctrl))J=gx.fn.getControlGridRef(G.fld,G.grid),gx.html.controls.isMultiSelection(G.ctrltype)?
r=gx.dom.comboBoxToObj(J,B):"radio"===G.ctrltype&&(r=gx.dom.radioToObj(J,B)),r&&(B=r);q.push(void 0!==B?B:null)}else{J=function(L){L.forEach(function(N){if(N&&"function"==typeof N.c2v&&"function"==typeof N.val){var O=N.grid===x.grid?x.row:gx.fn.currentGridRowImpl(N.grid);void 0!==N.val(O)&&N.c2v(O);gx.fn.call_v2bc(N,gx.O)}N&&!0===N.isuc&&(n=x.row||(N&&N.grid?gx.fn.currentGridRowImpl(N.grid):void 0),(N.getUCInstance(n)||N.uc).execC2VFunctions())})};r=this.getParmVarVStruct(t);G=r[0];J(r);G||(r=this.getParmVarVStructGrid(t,
gx.O),J(r));B="function"==typeof this.gxO[t.av]?this.gxO[t.av](this.row):void 0===this.gxO[t.av]?t.fld?gx.fn.getControlValue(t.fld):"":this.gxO[t.av];J=gx.fn.vStructForOld(t.av);!J||"date"!=J.type&&"dtime"!=J.type||"string"===typeof B&&(B=new gx.date.gxdate(B));this.isValidation&&B instanceof gx.date.gxdate&&!B.HasDatePart&&(J=new gx.date.gxdate(""),J.assign_date(B),J.JsonNullFormat=gx.date.jsonNullFormat.YearOne,B=J);if(void 0!==t.grid){var F=B,H=[];l.each(this.gxO.Grids,function(L,N){if(N.gridId===
t.grid){L=N.parentRow?N.parentRow.gxId:"";if(G){B={pRow:L,c:[],hc:[],hsh:[],v:F};for(var O=1;O<=N.lastRowId;O++){n=gx.grid.getPaddedRowId(O);var Q=G.isuc?gx.fn.getControlValue(G.fld+"_"+n+L):G.val(n+L);B.c.push(Q);t.hsh&&B.hsh.push(gx.fn.getHash(A,G.fld,n+L));gx.lang.emptyObject(G.hc)||B.hc.push(gx.fn.getControlValue("GXHC"+G.fld+"_"+n+L))}}else gx.lang.isArray(B)&&(B={pRow:L,c:B,v:B[Number(gx.fn.currentGridRowImpl(t.grid))-1]||B[0]});H.push(B)}});B=H}else t.hsh&&(G&&G.grid?(n=gx.fn.currentGridRowImpl(G.grid)||
"",""===n&&(B=this.parmFromHidden(G,this.gxO))):n="",v.push({hsh:gx.fn.getHash(this.gxO.CmpContext,t.fld,n),row:n}));q.push(gx.lang.emptyforType(B,t.type))}return{input:q,hashed:v}},refreshOutputParms:function(){for(var x=this.getParmsMetadata("output"),w,A,q=0,v=x.length;q<v;q++)w=x[q],(w=this.getParmVarVStruct(w)[0])&&w.grid&&"function"==typeof w.c2v&&"function"==typeof w.val&&(A=gx.fn.currentGridRowImpl(w.grid),void 0!==w.val(A)&&w.v2c(A))},getParmVarVStructGrid:function(x,w){var A=[];if(x=w.getAllGridsForColl(x.av)){var q;
x.forEach(function(v){var t=w.GXValidFnc,B=v.gridId;q!=B&&(q=B,t.filter(function(G){return G.grid===B}).forEach(function(G){(vStruct=w.getValidStructFld(G.fld))&&vStruct.gxvar&&A.push(vStruct)}))})}return A},getParmVarVStruct:function(x){var w,A=[];x.av&&(w=gx.O.getFormBCForVar(x.av));w?A=Object.values(w).filter(function(q){return q.ctrltype}):void 0!==x.fld?A.push(x.fld?this.gxO.getValidStructFld(x.fld):null):this.grid&&this.row&&(w=this.gxO.getGridById(this.grid,this.row))&&(x=w.grid.getColumnForVar(x.av))&&
A.push(this.gxO.getValidStruct(x.gxId));return A},addGXStateParms:function(x){var w={};gx.notifications&&gx.notifications.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID")&&(w.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(w)||(x.gxstate=w)},beforeCall:function(){m&&gx.fn.objectOnpost()},call:function(){u=l.Deferred();var x=gx.O;gx.setGxO(this.gxO);if(this.grid&&this.row){var w=gx.fn.currentGridRowImpl(this.grid);gx.fn.setCurrentGridRow(this.grid,this.row)}this.beforeCall();
var A=this.getInputParms();m?(this.parms=A.input,this.hashedParms=A.hashed,this.doAjaxCall(!1,this.disableForm)):(this.doClientSideCall(),this.refreshOutputParms());this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,w);gx.setGxO(x);return u.promise()},doAjaxCall:function(x,w){var A=this.to_json();gx.evt.setProcessing({status:!0,ctx:"doAjaxCall"});!1!==w&&this.gxO.startFeedback(!1,!0);gx.fx.obs.notify("gx.onbeforeevent",[A,x]);x=gx.ajax.getPostInfo(this.gxO,A,x);x.handler=this.ajaxCallHandler.closure(this);
x.error=this.ajaxCallError.closure(this);x.handleAllStatusCodes=!0;x.url=gx.ajax.serviceUrl((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));x.reqData=A;x.always=this.callback;x.contentType="application/json";this.beforeAjaxCall(x);gx.http.doCall(x)},beforeAjaxCall:gx.emptyFn,doClientSideCall:function(){var x=this.callback();u.resolve(x)},ajaxCallError:function(){u.resolve(!1);b.endFeedback()},afterAjaxCallHandler:function(x,w,A){A=A||gx.O;
gx.evt.setProcessing({status:!1,ctx:"afterAjaxCallHandler"});u.resolve(!x);x&&(A.endFeedback(),gx.fx.obs.notify("gx.onafterevent",[w]))},ajaxCallHandler:function(x,w,A){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;gx.http.lastStatus=A.status;x=!1;if(A.status==gx.http.STATUS_FORBIDDEN)gx.util.alert.showError(gx.getMessage("GXM_runtimeappsrv")+" ("+A.status+" "+A.statusText+")"),x=!0;else if(gx.http.checkResponseStatus(A,this.isValidation))x=!0;else if(200>A.status||299<A.status)gx.dom.writeError(A.responseText,
gx.getMessage("GXM_runtimeappsrv"),A.status),x=!0;else if(gx.http.validJsonResponse(A,w)){var q=gx.json.evalJSON(w);null==q?gx.dom.writeError(w.toString(),gx.getMessage("GXM_runtimeappsrv"),A.status):(gx.csv.lastEvtResponse=q,w={response:q,isPostBack:!0,context:{fullAjaxCall:!0},gxObject:this.gxO,gridId:this.grid,row:this.row},this.beforeProcesResponse(w),gx.ajax.setJsonResponse(w).done(function(){gx.fx.obs.notify("gx.onafterevent",[q])}))}else x=!0;this.afterAjaxCallHandler(x,q,this.gxO)},beforeProcesResponse:gx.emptyFn,
startFeedback:function(){this.gxO.startFeedback(!1,this.isValidation)}}},maxGETLength:function(a){return a.AjaxSecurity?600:1350},getImageUrl:function(a,b){var f=a[b];if(gx.lang.emptyObject(f))return"";"object"==typeof f&&(a[b]=gx.ajax.resolveImageUrl(f));return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a[b],!0)},resolveImageUrl:function(a){var b;for(b=0;b<a.length;b++){var f=a[b];if(f.l==gx.languageCode&&f.t==gx.theme)return(f.i?"Resources/":"")+f.p}},encryptParms:function(a,b){return a.AjaxSecurity?
gx.sec.encrypt(b):b},doPost:function(a,b,f,g,m,p,u,x){!1!==f&&u.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,b]);gx.fn.objectOnpost();gx.fn.forceEnableControls(!1);var w=this.getPostInfo(u,a,b);w.rowId=m;w.gridId=g;w.url=gx.ajax.serviceUrl(a);w.evt=x;w.always=function(){!1!==f&&u.endFeedback();p&&p()};fnc=function(){x&&gx.fn.setHidden("_EventName",x);gx.evt.setGridEvt(g,m,u);gx.http.saveState();gx.http.doCall(w)};b?gx.lang.doCallTimeout(fnc,this,[],gx.evt.oldDoPostDelay):fnc.bind(this)()},
getPostInfo:function(a,b,f){b={};b.formNode=gx.dom.form();b.method="POST";b.encoding="UTF-8";b.useCash=!1;b.gxO=a;!0===f&&(b.sync=!0);b.handler=gx.http.postHandler;this.multipartInfo(b);return b},multipartInfo:function(a){gx.dom.hasSelectedFile()&&(a.multipart=!0,a.mimetype="text/html",a.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(a,b){var f=void 0!==a.refresh_form;a=a.refresh||a.refresh_form;gx.util.balloon.clearAll();if("GET"==a)gx.http.reload(!0);else return a="RFR",
b.IsMasterPage&&(a+="_MPAGE"),b=f||!gx.pO.fullAjax?gx.pO:b,f=b.fullAjax,b.executeServerEvent(a,!gx.pO.fullAjax,null,!0,f);return l.Deferred().resolve()},doRefresh:function(a){var b=a.IsMasterPage?"RFR_MPAGE":"RFR";a=gx.pO.fullAjax?a:gx.pO;a.executeServerEvent(b,!0,null,!0,a.fullAjax)},dispatchCommands:function(a,b,f,g){f=f||{};var m,p=f.ignoreCmds||[];g=void 0===g?0:g;b=b||gx.O;if(a&&0<a.length){for(var u=a.length,x=g;x<u;x++){g=a[x];var w=Object.keys?Object.keys(g)[0]:"";if(!gx.util.inArray(w,p)){g.set_focus&&
gx.fn.usrSetFocus(g.set_focus);g.print&&gx.printing.print(g.print);g.close&&(w=[],g.close.values instanceof Array&&(w=g.close.values),gx.fn.closeWindow(w,{parmsMetadata:g.close.metadata,updateParms:f.updateParms},b));if(void 0!==g.refresh||void 0!==g.refresh_form||""===g.cmp_refresh){gx.ajax.dispatchRefreshCommand(g,b).then(function(){gx.ajax.dispatchCommands(a,b,f,x+1)});return}g.redirect&&(w=g.redirect,w.url=gx.ajax.removeGXParms(w.url),gx.http.redirect(w.url,1===w.forceDisableFrm,2===w.forceDisableFrm,
b,!1));g.calltarget&&gx.nav.callFromServerRedirect(g.calltarget.url,g.calltarget.target);g.callback&&g.callback.apply(g.callback.scope,g.args||[]);g.cmp_refresh&&(w=gx.pO.getWebComponent(g.cmp_refresh),gx.evt.dispatcher.dispatch("REFRESH",w));if(g.popup){a.length>x+1&&(gx.lang.isArray(g.popup)?g.popup[7]=a.slice(x+1):g.popup.OncloseCmds=a.slice(x+1));gx.popup.open(g.popup,b);break}if(g.ucmethod&&(m=gx.getObj(g.ucmethod.CmpContext,g.ucmethod.IsMasterPage))){w=gx.O;gx.setGxO(m);if((m=gx.O.getUserControl(g.ucmethod.Control))&&
"function"==typeof m[g.ucmethod.Method])try{m[g.ucmethod.Method].apply(m,g.ucmethod.Parms);var A=!0}catch(q){gx.dbg.logEx(q,"gxcallrpc.js","Failed to execute usercontrol method: "+g.ucmethod.Method)}gx.setGxO(w)}g.exomethod&&(gx.ajax.dispatchExoMethod(g.exomethod),A=!0);g.exoprop&&gx.ajax.dispatchExoProperty(g.exoprop)}}A&&b.showMessages(!0)}gx.fn.usrSetFocus_commit()},resolveExoObject:function(a,b){a=a[b];var f;if(!a){b=b.split(".");a=window;var g=0;for(f=b.length;g<f;g++)if(a=a[b[g]],void 0===a)return}return a},
dispatchExoMethod:function(a){var b=gx.getObj(a.CmpContext,a.IsMasterPage),f,g;if(b){var m=gx.O;gx.setGxO(b);try{(f=this.resolveExoObject(b,a.ObjectName))&&"GlobalEvents"===a.ObjectName?f.executeMethod(a.Method,a.Parms):a.IsEvent?gx.fx.obs.notify(a.Method,a.Parms):f?(g=f[a.Method])?g.apply(f,a.Parms):k("method","Method not found",a.Method):k("method","Object not found",a.ObjectName)}catch(p){gx.dbg.logEx(p,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(m)}}},dispatchExoProperty:function(a){var b=
gx.getObj(a.CmpContext,a.IsMasterPage),f;if(b){var g=gx.O;gx.setGxO(b);try{(f=this.resolveExoObject(b,a.ObjectName))?f[a.PropertyName]=a.Value:k("property","Object not found",a.ObjectName)}catch(m){gx.dbg.logEx(m,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(g)}}},ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(a,b,f,g,m,p,u,x){b=b||gx.O;if(a&&0<a.length)for(f=a.length,p=0;p<f;p++){var w=a[p];if(w.load){if(g=b.getGridById(w.load.grid,x))w.load.props.values=w.load.values,g.loadNewRows(w.load.props)}else w.addlines&&
(gx.lang.doCall(gx.fn.setJsonValues,m),gx.lang.doCall(gx.fn.setJsonProperties,u,x),(g=b.getGridById(w.addlines.grid,x))&&g.getNewRows(w.addlines.count))}},willLeavePage:function(a){if(a)for(var b=a.length,f=0;f<b;f++)if(a[f].close)return!0;return!1},getRedirectCommand:function(a){if(a)for(var b=a.length,f=0;f<b;f++){var g=a[f];if(g.popup)break;if(g.redirect)return g}return null},saveJsonResponse:function(a){this.lastJsonResponse=JSON.parse(gx.lang.htmlDecode(a))},clearJsonResponse:function(){delete this.lastJsonResponse},
getJsonResponse:function(){this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands;return this.lastJsonResponse},setPostResponse:function(a,b,f){return this.setJsonResponse({gridId:a.gridId,row:a.rowId,response:a,isPostBack:!0,gxObject:b||gx.O,context:f})},setJsonResponse:function(a){var b=l.Deferred(),f=a.response,g,m=a.isPostBack,p=a.afterCmpLoaded,u=a.gxObject,x=a.gridId,w=a.row,A=a.context||{},q=!!a.isValidation,v=gx.fn,t=gx.lang.doCall,B=this.willLeavePage(f.gxCommands),G=this.getShouldUpdatePropertyFunction(f);
if(u){var J=gx.O;gx.O=u}if(x&&w){var n=gx.fn.currentGridRow(x);gx.fn.setCurrentGridRow(x,w)}if(gx.evt.srvCommand)gx.evt.srvCommand=!1,t(gx.ajax.dispatchCommands,f.gxCommands,u),b.resolve(B);else{var r=this.getRedirectCommand(f.gxCommands);if(r&&1===r.redirect.forceDisableFrm)t(gx.ajax.dispatchCommands,f.gxCommands,u,{ignoreCmds:["refresh","cmp_refresh"]}),b.resolve(B);else if(B)t(gx.ajax.dispatchCommands,f.gxCommands,u),b.resolve(B);else{t(gx.ajax.dispatchPreCommands,f.gxCommands,u,f.gxComponents,
f.gxHiddens,f.gxValues,f.gxGrids,f.gxProps,w);t(v.clearCompontHiddens,f.gxComponents);var y=t(v.setJsonHiddens,u,f.gxHiddens);t(v.setJsonComponents,f.gxComponents,f.DynComponentMap,f.gxHiddens,function(C){gx.http.loadStyles();gx.updateTheme();m&&gx.fn.installComponents(!1);"function"==typeof p&&p();J&&(gx.O=J);var D=[],F=t(v.setJsonValues,f.gxValues,q,x,w,G),H=t(v.setJsonProperties,f.gxProps,w),L=l.map(C,function(W){W=v.cmpContextFromCtrl(W);if(W=gx.pO.WebComponents[W])return gx.lang.objToArray(W.UserControls).concat(W.getUserControlGrids())});
q||!u.isTransaction()&&u.fullAjax||gx.util.balloon.clearAll();v.enableDisableDelete(u);m&&(g=t(v.loadJsonGrids,f.gxGrids,m,D));q&&gx.ajax.transformValidationMessages(a,u,f.gxMessages);t(v.setErrorViewer,f.gxMessages);var N=function(W){W=W||[];var V;gx.pO.supportAjaxEvents&&(V=gx.lang.arrayUnique(H.concat(F,L,W,y),function(Z,ba){return Z.ControlName===ba.ControlName}));v.objectPostback(V,C);q||v.setFocusAfterLoad(!0);return l.Deferred().resolve()}.closure(this),O=function(){!A.fullAjaxCall||A.autoRefreshing||
!m&&gx.popup.currentPopup||u.endFeedback();t(gx.ajax.dispatchCommands,f.gxCommands,u);n&&gx.fn.setCurrentGridRowSafe(x,n);b.resolve(B)}.closure(this),Q=[];m&&(u.execV2CFunctions(!0,D,!1),g&&Q.push(g.done(N)),C&&C.length&&Q.push(N.apply(this,[])));l.when.apply(l,Q).done(O)},m)}}return b.promise()},getShouldUpdatePropertyFunction:function(a){var b,f,g,m={};if(a.gxGrids)for(b=0;b<a.gxGrids.length;b++){var p=a.gxGrids[b];for(f=0;f<p.Count;f++)for(g=0;g<p[f].Props.length;g++)m[p[f].Props[g][0]]=!0}return function(u){return!m[u]}},
transformValidationMessages:function(a,b,f){b=b.cmpCtx||"MAIN";"undefined"!=typeof f[b]&&(f[b]={fields:a.validationInput,msgs:f[b]})},disableForm:function(a,b){gx.pO.startFeedback(b,void 0===a||a)},enableForm:function(a,b){a=a||gx.O;b&&(a.feedbackCallCounter=0);gx.pO&&gx.pO.endFeedback();a!=gx.pO&&a.endFeedback()},isFormEnabled:function(){var a=gx.getActiveContext();return a==top&&null!=gx.popup.getPopup()?!0:gx.pO?!a.gx.pO.isFeedbackOn()&&!a.gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){if(!(!gx.ajax.formAutocomplete||
gx.grid.drawAtServer||gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||7>=document.documentMode||7>=gx.util.browser.ieVersion()))){var a=gx.dom.form(),b=document.createElement("iframe");b.id="gx_iframe_force_ajax_autocomplete";b.name="gx_iframe_force_ajax_autocomplete";b.style.cssText="display: none";b.src="/content/blank";document.body.appendChild(b);var f=document.createElement("input");f.type="submit";f.style.cssText="display: none";a.appendChild(f);var g=a.target,m=a.action;a.target=b.name;
a.action=b.src;var p=l(f);gx.evt.attach(f,"click",function(u){u.stopPropagation();return!0});p.trigger("click");setTimeout(function(){a.target=g;a.action=m;a.removeChild(f);document.body.removeChild(b)})}},suggest:function(a,b,f,g,m,p,u){a=new gx.fx.suggestProvider(a,b,f,g);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(f),a,f,m,p,u)},hideCode:function(a,b,f){var g=this.objectUrl()+"?";b="gxajaxHideCode_"+b;for(var m=a.length,p=0;p<m;p++)b+=","+encodeURIComponent(eval(a[p]));g+=gx.ajax.encryptParms(gx.O,
b);gx.http.callBackend_impl(function(u){gx.fn.setVarValues(f,u)},g,!0,gx.http.modes.retval);return this.lastStatus},callCrl:function(a,b,f){var g=f?gx.fn.setGridComboValues:gx.fn.setComboValues,m=f?b:gx.fn.screen_CtrlRef(b).name;f=this.objectUrl()+"?";a="gxajaxCallCrl_"+b+","+this.arrayToUrl(a);f+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(p){g(m,p)},f,!0,gx.http.modes.retval)},refreshGrid:function(a,b){var f=gx.O;gx.setGxO(a.parentObject);var g="GET",m=gx.ajax.gxObjectUrl(a.parentObject)+
"?",p="gxajaxGridRefresh_"+a.gridName+","+b;gx.fx.obs.notify("grid.onbeforerefresh",[a]);a.autoRefreshing=!0;gx.csv.autoRefreshing=a;var u=a.grid.rows.length;a.setPagingVars(0,0);if(p.length>gx.ajax.maxGETLength(gx.O)){g="POST";var x=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+a.gridName)];b=b.split(",");p=0;for(var w=b.length;p<w;p++)x.push("GXParm"+p+"="+b[p])}else m+=gx.ajax.encryptParms(gx.O,p);a.grid.mask();gx.http.doCall({method:g,url:m,reqData:x,handler:function(A,q,v){gx.http.postHandler(A,
q,v,{autoRefreshing:!0});gx.fx.obs.notify("grid.onafterrefresh",[a,u,a.grid.rows.length])},always:function(){gx.csv.autoRefreshing=null;a.autoRefreshing=!1;a.grid.unmask();gx.setGxO(f)}})},newRows:function(a,b,f,g,m,p,u,x){var w=this.objectUrl()+"?",A=[],q=gx.O;a=gx.fn.gridObj(a,u?f+"_"+u:f,b);b="GET";f="gxajaxNewRow_"+f;A.push(f);A.push(g);A.push(m);A.push(p);(q.IsComponent||q.IsTypeComponent)&&A.push(q.CmpContext);A=A.concat(a.getParmsValues(!1,a.postingVariables,!1));g=A.join(",");if(g.length>
gx.ajax.maxGETLength(q)){b="POST";q=["GXEvent="+gx.ajax.encryptParms(q,f)];g=1;for(m=A.length;g<m;g++)q.push("GXParm"+(g-1)+"="+A[g]);g=q.join("&")}else w+=gx.ajax.encryptParms(q,g),g=null;gx.http.callBackend_simple(w,!0,null,b,g);if(w=gx.http.lastResponse)w=gx.json.evalJSON(w),x.call(a,w),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[w])},loadCrl:function(a,b,f){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var g=this.objectUrl()+"?";a="gxajaxExecAct_"+a+","+this.arrayToUrl(b);
g+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(m){gx.fn.setVarValues(f,m)},g,!0,gx.http.modes.retval)}},udp:function(a,b,f){var g=this.objectUrl()+"?";a=a+","+this.arrayToUrl(b);g+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(m){gx.fn.setVarValues(f,m)},g,!0,gx.http.modes.retval)},srvEvt:function(a,b,f,g){var m=this.objectUrl()+"?";a=a+","+b+","+this.arrayToUrl(f);m+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(p){gx.fn.setVarValues(g,p)},m,!0,
gx.http.modes.full)},validSrvEvt:function(a,b,f){var g=gx.fn.currentGridRowImpl(b);if(0<b){var m=gx.fn.currentGridRowImpl(b);c(b,g,f)}if(gx.fx.delayedValidation){var p=l.Deferred(),u=arguments;gx.fx.obs.addObserver("gx.validation",this,function(){return this.validSrvEvt_impl.apply(this,u).then(function(x){p.resolve(x);c(b,m,f)})},{single:!0,async:!0});return p.promise()}return this.validSrvEvt_impl.apply(this,arguments).then(function(x){c(b,m,f);return x})},validCliEvt:function(a,b,f,g){g=g||gx.O;
return gx.evt.dispatcher.dispatch({eventName:a,fn:f},g,b,gx.fn.currentGridRowImpl(b),!1,void 0,void 0,gx.evt.dispatcher.types.validation)},validSrvEvt_impl:function(a,b,f){f=f||gx.O;var g=gx.fn.currentGridRowImpl(b);return gx.evt.dispatcher.dispatch(a,f,b,g,!0,void 0,void 0,gx.evt.dispatcher.types.validation).then(function(m){f.refreshOlds();return m})},getParmsPostData:function(a){for(var b="",f=0;f<a.length;f++)0<f&&(b+="&"),b+="GXParm"+f+"="+this.parmToUrl(a[f],!0);return b},getCallerUrl:function(a){if(gx.stackSupported()){a=
(a=gx.call_stack_storage.get(gx.stackId(a)))||[];var b=1==a.length&&a[0]!=gx.ajax.selfUrl()?a[0]:"";return b=1<a.length?a[a.length-2]:b}return gx.fn.getHidden("sCallerURL")},pushReferer:function(a,b){b="undefined"==typeof b?location.href:gx.absoluteurl(b);if(gx.stackSupported()){"undefined"==typeof a&&(a=gx.popup.popuplvl());var f=gx.call_stack_storage.get(gx.stackId(a));f=f||[];b!=gx.util.lastArray(f)&&f.push(b);gx.call_stack_storage.set(gx.stackId(a),f)}else a=this.objectUrl()+"?",b="dyncall,PushReferer,"+
encodeURIComponent(b),a+=gx.ajax.encryptParms(gx.O,b),gx.http.callBackend_simple(a,!0,!0)},windowClosed:function(a){if(gx.stackSupported())if(-1==a){a=gx.stackId(gx.popup.popuplvl());var b=gx.call_stack_storage.get(a);b=b||[];b.pop();gx.call_stack_storage.set(a,b)}else gx.call_stack_storage.remove(gx.stackId(a));else a=-1==a?",PopReferer":",DeleteReferer,"+a.toString(),b=this.objectUrl()+"?",b+=gx.ajax.encryptParms(gx.O,"dyncall"+a),gx.http.callBackend_simple(b,!0,!0)},aggSel:function(a,b,f){var g=
this.objectUrl()+"?";a="gxajaxAggSel"+b+"_"+a+","+this.arrayToUrl(f);g+=gx.ajax.encryptParms(gx.O,a);return gx.http.callBackend_impl(null,g,!1,gx.http.modes.retval)[0]},aggSelDecimal:function(a,b,f,g,m){return gx.num.parseFloat(this.aggSel(a,b,m),f,g)},aggSelInteger:function(a,b,f){return parseInt(this.aggSel(a,b,f),10)},dynComponent:function(a,b,f,g){var m=l.Deferred();a=gx.util.removeBaseUrl(a).toLowerCase();gx.gen.isDotNet()&&(a+=".aspx");a=gx.ajax.objectUrl(a);f="GXEvent="+gx.ajax.encryptParms(gx.O,
"dyncomponent")+"&GXAction="+encodeURIComponent(f)+"&GXParm0="+encodeURIComponent(g);for(g=0;g<b.length;g++)f+="&GXParm"+(g+1).toString()+"="+encodeURIComponent("function"==typeof b[g].getUrlVal?b[g].getUrlVal():b[g]);gx.http.doCall({method:"POST",url:a,reqData:f,handler:function(p,u){m.resolve(gx.json.evalJSON(u))},error:function(){m.reject()}});return m.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(a){return a.replace(/\?gxajaxEvt,?|\?gxportlet,?/,
"?")},getSecurityToken:function(a){if(a&&a.ajaxSecurityToken){var b="GX_AUTH_"+(a.CmpContext?a.CmpContext:"")+a.ServerClass;b=b.toUpperCase();a=gx.fn.getHidden(b)||a.InternalParms[b];return{id:b,value:a}}},arrayToUrl:function(a,b){for(var f="",g=a.length,m=0;m<g;m++)f+=this.parmToUrl(a[m],b)+",";return f},ControlValuesObject:function(a,b){a=gx.fn.vStructForVar(gx.unprefixVar(a));return null!=a&&gx.html.controls.isMultiSelection(a.ctrltype)?(a=gx.fn.getControlGridRef(a.fld,a.grid),gx.dom.comboBoxToObj(a,
b)):null},parmToUrl:function(a,b){var f=eval(a);if(f instanceof Array&&2==f.length&&"string"==typeof f[0]&&"string"==typeof f[1]){var g=gx.fn.vStructForVar(f[0]);null!=g&&(f=gx.fn.getGridCtrlProperty(g.grid,g.fld,f[1]))}b&&(b=gx.ajax.ControlValuesObject(a,f))&&(f=b);"object"==typeof f&&(f=gx.json.serializeJson(f));if("undefined"==typeof f||null==f)b=!1,a&&0===a.indexOf("gx.O.")&&(a=gx.unprefixVar(a),a=gx.fn.getHidden(gx.O.CmpContext+a),null!=a&&"undefined"!=typeof a&&(f=a,b=!0)),b||(f="");return encodeURIComponent(f)},
gxObjectUrl:function(a){return this.objectUrl(a.serviceUrl,a&&a.fullAjax?a.CmpContext:void 0)},objectUrl:function(a,b){b=void 0!==b?b:gx.csv.cmpCtx;a||(a=b?gx.fn.getControlValue(b+"_CMPPGM"):gx.ajax.selfUrl(),null!=a&&(a=a.replace(/\?.*/,""),a=a.replace(/#[\s\S]*$/,"")),a=this.objnameFromUrl(a));return gx.absoluteurl(this.objToRelativeUrl(a))},objToRelativeUrl:function(a){return null==a||gx.isabsoluteurl(a)?a:""===gx.servletBasePath?a:gx.servletBasePath+"/"+a},objnameFromUrl:function(a){0<=a.indexOf("?")&&
(a=a.split("?")[0]);var b=a.split("/"),f=b.length;return 0===f?a:b[f-1]},_init:function(){if(gx.stackSupported()){var a=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));if(a)for(var b=0;b<a.length;b++)gx.ajax.pushReferer(gx.popup.popuplvl(),a[b]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){function l(c,d){var k=$("#"+c.id+"_dp_trigger");if(0<k.length)return k.get(0);if(d&&0<d.length&&(k=$("[data-gx-attached-ctrl~='"+c.id+"']"),0<k.length))return k.parent().get(0)}this.init=function(c,d){this.id=c;this.balloonid=c+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.sourceElements=d||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr=
"";this.active=!1;this.errorValue=null;gx.util.balloon.lastLbl=null};this.setMessage=function(c){this.hasMessage||(this.messageWar=c,this.hasMessage=!0)};this.setAsFormatError=function(){this.isFormatError=!0;gx.csv.setFormatError(this.id,!1)};this.setError=function(c){this.hasMessage||(this.messageErr=c,this.hasMessage=this.isError=!0,this.isFormatError&&gx.csv.setFormatError(this.id))};this.create=function(c,d,k,a){var b=document.createElement("span");b.id=c;b.className=k;c=document.createElement("div");
c.style.position="absolute";c.style.zIndex=100;c.style.display="none";c.classList.add("gx-error__message-container");a=document.createTextNode(a);b.appendChild(a);c.appendChild(b);"right"==gx.csv.messagePosition||"bottom"==gx.csv.messagePosition?(a=$(d).closest(".gx-attribute"),!0===gx.csv.overlap&&gx.runtimeTemplates&&0<a.length?a.append(c):(a=l(d))?0<=a.id.indexOf("_dp_trigger")?$(a).closest(".dp_container").append(c):$(a).after(c):$(d).after(c)):!0===gx.csv.overlap?$(d).after(c):$(d).before(c);
!0===gx.csv.overlap?(b.style.position="static",b.style.zIndex="1"):(c.style.position="relative",b.style.position="relative");return b};this.getControlValue=function(){for(var c=[gx.fn.getControlValue(this.id)],d=0,k=this.sourceElements.length;d<k;d++)c.push(gx.fn.getControlValue(this.sourceElements[d]));return c.join(";")};this.groupControl=function(c){(c=gx.dom.el(c))&&"INPUT"===c.nodeName&&"radio"===c.type&&(c=c.parentNode&&"SPAN"==c.parentNode.tagName?c.parentNode:gx.dom.findParentByTagName(c,
"table"));return c};this.hideBalloon=function(c){c=c.parentNode;try{c&&(c.style.display="none")}catch(d){gx.dbg.logEx(d,"gxballoon.js","hideBalloon")}};this.showBalloon=function(c){try{var d=gx.csv.messagePosition,k=gx.dom.el(this.id),a=c.parentNode,b=$(a),f,g,m=gx.popup.ispopup()?"flipfit":"none",p=k,u=l(k,this.sourceElements);gx.lang.requestAnimationFrame(function(){if(this.active)if(!0===gx.csv.overlap){switch(d){case "top":f="left bottom";g="left top";break;case "right":f="left center";g="right center";
p=u||p;break;case "bottom":f="left top";g="left bottom";break;case "left":f="right center",g="left center"}b.fadeIn({queue:!1}).css("display","block");b.position({my:f,at:g,of:p,collision:m})}else a.style.display="top"!=d&&"bottom"!=d||!1!==gx.csv.overlap?"inline":"block"},this)}catch(x){gx.dbg.logEx(x,"gxballoon.js","showBalloon")}};this.show=function(c){var d,k,a;if(void 0===document.readyState||"complete"==document.readyState){try{if(!1===this.hasMessage)return!0;var b=gx.dom.el(this.id);null===
b&&null!==gx.csv.validatingUC&&(b=gx.csv.validatingUC.getContainerControl());if("hidden"==b.type){var f=gx.dom.byId("span_"+this.id);null!==f&&(b=f)}else if("INPUT"===b.nodeName&&"radio"===b.type){var g=gx.dom.byName(gx.dom.id(b));b=gx.dom.findRadioContainer(b)}if(g){f=[];var m=0;for(a=g.length;m<a;m++)f.push(g[m]);g=f}else for(g=[b],m=0,a=this.sourceElements.length;m<a;m++)g.push(gx.dom.el(this.sourceElements[m]));this.active=d=!0;if(0<this.messageErr.length){var p="Error";var u=this.messageErr}else 0<
this.messageWar.length&&(p="Warning",u=gx.html.encode(this.messageWar));""!==p&&(f=p+"Messages",gx.dom.addPrefixClass(b,p),(k=gx.dom.byId(this.balloonid))?(k.innerHTML=u,k.className=f,d=!1):k=this.create(this.balloonid,b,f,u));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl);gx.util.balloon.lastLbl=k;!0===c?gx.csv.oneAtAtime||this.showBalloon(k):this.showBalloon(k);if(!1===gx.util.balloon.timerOn&&0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=
setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(d)for(gx.csv.oneAtAtime&&(gx.evt.attach(b,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(b,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this))),a=g.length,m=0;m<a;m++)"INPUT"===g[m].nodeName&&"radio"===g[m].type?gx.evt.attach(g[m],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(g[m],"blur",gx.util.balloon.cvsHide,this);this.errorValue=this.getControlValue()}catch(x){gx.dbg.logEx(x,
"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){try{var l=this.groupControl(this.id);var c=this.getControlValue();if(c!=this.errorValue){this.errorValue=c;var d=gx.dom.byId(this.balloonid);null!=d&&(l&&(gx.dom.removePrefixClass(l,"Error"),gx.dom.removePrefixClass(l,"Warning")),this.hideBalloon(d),this.active=!1)}}catch(k){}},cvsMouseOutHandler:function(){if(this.active){var l=gx.dom.byId(this.balloonid);null!=l&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=l.id&&this.hideBalloon(l):
this.hideBalloon(l))}},cvsMouseOverHandler:function(){if(this.active){var l=gx.dom.byId(this.balloonid);null!=l&&this.showBalloon(l)}},clearAll:function(){var l;this.timerOn=!1;for(l in this.balloons){var c=this.balloons[l];var d=gx.util.balloon.cvsHide.closure(c);c.clear();d()}},clear:function(l){try{var c=gx.csv.ctxControlId(l);if(this.balloons[c]){var d=this.balloons[c];var k=gx.util.balloon.cvsHide.closure(d);d.clear();k()}}catch(a){gx.dbg.logEx(a,"gxballoon.js","clear")}},getNew:function(l,c,
d){d=d||[];var k,a=d.length;"undefined"!=typeof c&&(l=l+"_"+c);try{var b=gx.fn.screen_CtrlRef(l);"INPUT"===b.nodeName&&"radio"===b.type&&(gx.dom.byName(gx.dom.id(b)),b=gx.dom.findRadioContainer(b),b.id||b.setAttribute("id","BallonAnchor_"+l));var f=gx.dom.id(b);l=gx.csv.ctxControlId(f);for(k=0;k<a;k++)b=gx.fn.screen_CtrlRef(d[k]),f=gx.dom.id(b),d[k]=gx.csv.ctxControlId(f)}catch(g){gx.dbg.logEx(g,"gxballoon.js","getNew")}this.balloons[l]?(c=this.balloons[l],c.sourceElements=d||[],c.clear()):(c=new this.impl,
this.balloons[l]=c,c.init(l,d));return c}};
(function(l){var c=function(){var d={"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":"Asia/Amman Asia/Jerusalem Europe/Helsinki Asia/Damascus Africa/Cairo Asia/Gaza Europe/Minsk".split(" "),"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],
"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk",
"Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]},k=function(u){u=-u.getTimezoneOffset();return null!==u?u:0},a=function(){var u=k(new Date(2014,0,2)),x=k(new Date(2014,5,2)),w=u-x;return 0>w?u+",1":0<w?x+",1,s":u+",0"},b=function(){var u;if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.DateTimeFormat&&(u=Intl.DateTimeFormat(),"undefined"!==typeof u&&"undefined"!==typeof u.resolvedOptions)&&(u=u.resolvedOptions().timeZone)&&(-1<u.indexOf("/")||
"UTC"===u))return u},f=function q(x,w,A){"undefined"===typeof w&&(w=864E5,A=36E5);var v=(new Date(x.getTime()-w)).getTime();x=x.getTime()+w;for(var t=(new Date(v)).getTimezoneOffset(),B=null;v<x-A;){var G=new Date(v);if(G.getTimezoneOffset()!==t){B=G;break}v+=A}return 864E5===w?q(B,36E5,6E4):36E5===w?q(B,6E4,1E3):B},g=function(x,w,A,q){if("N/A"!==A)return A;if("Asia/Beirut"===w){if("Africa/Cairo"===q.name&&13983768E5===x[6].s&&14116788E5===x[6].e||"Asia/Jerusalem"===q.name&&13959648E5===x[6].s&&14118588E5===
x[6].e)return 0}else if("America/Santiago"===w){if("America/Asuncion"===q.name&&14124816E5===x[6].s&&1397358E6===x[6].e||"America/Campo_Grande"===q.name&&14136912E5===x[6].s&&13925196E5===x[6].e)return 0}else if("America/Montevideo"===w){if("America/Sao_Paulo"===q.name&&14136876E5===x[6].s&&1392516E6===x[6].e)return 0}else if("Pacific/Auckland"===w&&"Pacific/Fiji"===q.name&&14142456E5===x[6].s&&13961016E5===x[6].e)return 0;return A},m=function(x,w){for(var A={},q=c.olson.dst_rules.zones,v=q.length,
t=d[w],B=0;B<v;B++){var G=q[B];var J=q[B];for(var n=0,r=0;r<x.length;r++)if(J.rules[r]&&x[r]){if(x[r].s>=J.rules[r].s&&x[r].e<=J.rules[r].e)n=0,n+=Math.abs(x[r].s-J.rules[r].s),n+=Math.abs(J.rules[r].e-x[r].e);else{n="N/A";break}if(864E6<n){n="N/A";break}}J=g(x,w,n,J);"N/A"!==J&&(A[G.name]=J)}for(var y in A)if(A.hasOwnProperty(y))for(q=0;q<t.length;q++)if(t[q]===y)return y;return w},p=function(x){var w=function(){for(var A=[],q=0;q<c.olson.dst_rules.years.length;q++){var v=c.olson.dst_rules.years[q];
var t=(new Date(v,0,1,0,0,1,0)).getTime();v=(new Date(v,12,31,23,59,59)).getTime();for(var B=(new Date(t)).getTimezoneOffset(),G=null,J=null;t<v-864E5;){var n=new Date(t),r=n.getTimezoneOffset();r!==B&&(r<B&&(G=n),r>B&&(J=n),B=r);t+=864E5}v=G&&J?{s:f(G).getTime(),e:f(J).getTime()}:!1;A.push(v)}return A}();return function(A){for(var q=0;q<A.length;q++)if(!1!==A[q])return!0;return!1}(w)?m(w,x):x};return{determine:function(){var x=navigator.userAgent.toLowerCase(),w=b();w||(-1!=x.indexOf("firefox")&&
"undefined"!==typeof Intl&&"undefined"!==typeof Intl.DateTimeFormat&&(x=Intl.DateTimeFormat(void 0,{timeZoneName:"long"}).format(new Date).toLowerCase(),-1!=x.indexOf("montevideo")||-1!=x.indexOf("uruguay"))&&(w="America/Montevideo"),w||(w=c.olson.timezones[a()]),"undefined"!==typeof d[w]&&(w=p(w)));return{name:function(){return w}}}}}();c.olson=c.olson||{};c.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu",
"-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab",
"-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg",
"300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe",
"660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};c.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572E5,s:12090744E5},{e:1250802E6,s:1240524E6},{e:12858804E5,s:12840696E5},!1,!1,!1,{e:14116788E5,s:1406844E6}]},{name:"Africa/Casablanca",rules:[{e:12202236E5,
s:12122784E5},{e:12508092E5,s:12438144E5},{e:1281222E6,s:12727584E5},{e:13120668E5,s:13017888E5},{e:13489704E5,s:1345428E6},{e:13828392E5,s:13761E8},{e:14142888E5,s:14069448E5}]},{name:"America/Asuncion",rules:[{e:12050316E5,s:12243888E5},{e:12364812E5,s:12558384E5},{e:12709548E5,s:12860784E5},{e:13024044E5,s:1317528E6},{e:1333854E6,s:13495824E5},{e:1364094E6,s:1381032E6},{e:13955436E5,s:14124816E5}]},{name:"America/Campo_Grande",rules:[{e:12032172E5,s:12243888E5},{e:12346668E5,s:12558384E5},{e:12667212E5,
s:1287288E6},{e:12981708E5,s:13187376E5},{e:13302252E5,s:1350792E6},{e:136107E7,s:13822416E5},{e:13925196E5,s:14136912E5}]},{name:"America/Goose_Bay",rules:[{e:122559486E4,s:120503526E4},{e:125704446E4,s:123648486E4},{e:128909886E4,s:126853926E4},{e:13205556E5,s:129998886E4},{e:13520052E5,s:13314456E5},{e:13834548E5,s:13628952E5},{e:14149044E5,s:13943448E5}]},{name:"America/Havana",rules:[{e:12249972E5,s:12056436E5},{e:12564468E5,s:12364884E5},{e:12885012E5,s:12685428E5},{e:13211604E5,s:13005972E5},
{e:13520052E5,s:13332564E5},{e:13834548E5,s:13628916E5},{e:14149044E5,s:13943412E5}]},{name:"America/Mazatlan",rules:[{e:1225008E6,s:12074724E5},{e:12564576E5,s:1238922E6},{e:1288512E6,s:12703716E5},{e:13199616E5,s:13018212E5},{e:13514112E5,s:13332708E5},{e:13828608E5,s:13653252E5},{e:14143104E5,s:13967748E5}]},{name:"America/Mexico_City",rules:[{e:12250044E5,s:12074688E5},{e:1256454E6,s:12389184E5},{e:12885084E5,s:1270368E6},{e:1319958E6,s:13018176E5},{e:13514076E5,s:13332672E5},{e:13828572E5,s:13653216E5},
{e:14143068E5,s:13967712E5}]},{name:"America/Miquelon",rules:[{e:12255984E5,s:12050388E5},{e:1257048E6,s:12364884E5},{e:12891024E5,s:12685428E5},{e:1320552E6,s:12999924E5},{e:13520016E5,s:1331442E6},{e:13834512E5,s:13628916E5},{e:14149008E5,s:13943412E5}]},{name:"America/Santa_Isabel",rules:[{e:12250116E5,s:1207476E6},{e:12564612E5,s:12389256E5},{e:12885156E5,s:12703752E5},{e:13199652E5,s:13018248E5},{e:13514148E5,s:13332744E5},{e:13828644E5,s:13653288E5},{e:1414314E6,s:13967784E5}]},{name:"America/Santiago",
rules:[{e:1206846E6,s:1223784E6},{e:1237086E6,s:12552336E5},{e:127035E7,s:12866832E5},{e:13048236E5,s:13138992E5},{e:13356684E5,s:13465584E5},{e:1367118E6,s:13786128E5},{e:13985676E5,s:14100624E5}]},{name:"America/Sao_Paulo",rules:[{e:12032136E5,s:12243852E5},{e:12346632E5,s:12558348E5},{e:12667176E5,s:12872844E5},{e:12981672E5,s:1318734E6},{e:13302216E5,s:13507884E5},{e:13610664E5,s:1382238E6},{e:1392516E6,s:14136876E5}]},{name:"Asia/Amman",rules:[{e:1225404E6,s:12066552E5},{e:12568536E5,s:12381048E5},
{e:12883032E5,s:12695544E5},{e:13197528E5,s:13016088E5},!1,!1,{e:14147064E5,s:13959576E5}]},{name:"Asia/Damascus",rules:[{e:12254868E5,s:120726E7},{e:125685E7,s:12381048E5},{e:12882996E5,s:12701592E5},{e:13197492E5,s:13016088E5},{e:13511988E5,s:13330584E5},{e:13826484E5,s:1364508E6},{e:14147028E5,s:13959576E5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572E5,s:12066552E5},{e:12520152E5,s:12381048E5},{e:1281474E6,s:126964086E4},{e:1312146E6,s:130160886E4},{e:13481784E5,
s:13330584E5},{e:13802292E5,s:1364508E6},{e:1414098E6,s:13959576E5}]},{name:"Asia/Irkutsk",rules:[{e:12249576E5,s:12068136E5},{e:12564072E5,s:12382632E5},{e:12884616E5,s:12697128E5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612E5,s:12066624E5},{e:1254006E6,s:1238112E6},{e:1284246E6,s:12695616E5},{e:131751E7,s:1301616E6},{e:13483548E5,s:13330656E5},{e:13828284E5,s:13645152E5},{e:1414278E6,s:13959648E5}]},{name:"Asia/Kamchatka",rules:[{e:12249432E5,s:12067992E5},{e:12563928E5,s:12382488E5},
{e:12884508E5,s:12696984E5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612E5,s:12068172E5},{e:12564108E5,s:12382668E5},{e:12884652E5,s:12697164E5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648E5,s:12068208E5},{e:12564144E5,s:12382704E5},{e:12884688E5,s:126972E7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504E5,s:12068064E5},{e:12564E8,s:1238256E6},{e:12884544E5,s:12697056E5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954E6,s:120681E7},{e:12564036E5,s:12382596E5},{e:1288458E6,
s:12697092E5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684E5,s:12068244E5},{e:1256418E6,s:1238274E6},{e:12884724E5,s:12697236E5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972E6,s:1206828E6},{e:12564216E5,s:12382776E5},{e:1288476E6,s:12697272E5},{e:13199256E5,s:13011768E5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076E5,s:12231342E5},{e:12388572E5,s:12545838E5},{e:12703068E5,s:12860334E5},{e:13017564E5,s:1317483E6},{e:1333206E6,s:13495374E5},{e:13652604E5,s:1380987E6},
{e:139671E7,s:14124366E5}]},{name:"Australia/Perth",rules:[{e:12068136E5,s:12249576E5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]},{name:"Europe/Minsk",rules:[{e:12249792E5,s:12068352E5},{e:12564288E5,s:12382848E5},{e:12884832E5,s:12697344E5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756E5,
s:12068316E5},{e:12564252E5,s:12382812E5},{e:12884796E5,s:12697308E5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528E5,s:13168728E5},{e:13332024E5,s:13489272E5},{e:13652568E5,s:13803768E5},{e:13967064E5,s:14118264E5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984E5,s:12878424E5},{e:13271544E5,s:1319292E6},{e:1358604E6,s:13507416E5},{e:139005E7,s:1382796E6},{e:14215032E5,s:14148504E5}]},{name:"Europe/London",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,
s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]}]};"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=c:"undefined"!==typeof define&&null!==define&&null!=define.amd?define([],function(){return c}):"undefined"===typeof l?window.jstz=c:l.jstz=c})();gx.livePrev=function(l){gx.ajax.getPostInfo("",!1);gx.ajax.getPostInfo("",!1);return{}}(gx.$);
gx.livePrevWS={FIRST_PORT:30100,LAST_PORT:30120,MAX_RETRY:3,retry_count:0,onError:function(){gx.livePrevWS.IPNamesIdx<gx.livePrevWS.IPNames.length-1?(gx.livePrevWS.IPNamesIdx+=1,gx.livePrevWS.host=gx.livePrevWS.IPNames[gx.livePrevWS.IPNamesIdx],gx.livePrev.port=gx.livePrevWS.FIRST_PORT,gx.livePrevWS.Connect()):gx.livePrev.port<gx.livePrevWS.LAST_PORT?(gx.livePrevWS.IPNamesIdx=0,gx.livePrev.port+=1,gx.livePrevWS.Connect()):gx.util.alert.showMessage("Can not Connect to LivePreview",{dismissmitAt:5E3})},
onMessage:function(l){var c=function(b){var f=$.map(document.styleSheets,function(g){return g.href==b?g:null});return 0<f.length?f[0]:void 0},d=function(b,f,g){return g((b||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase(),(f||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase())},k=function(b,f,g){var m=b.cssRules,p=m.length,u=!1,x=!1;$.each(m,function(w,A){A&&A.selectorText&&d(A.selectorText,f.replace(":","::"),function(q,v){return q==v})&&(b.deleteRule(w),p=w,u=!0)});u||$.each(m,function(w,A){A&&A.selectorText&&
d(A.selectorText,f.replace(":","::")+",",function(q,v){return 0==q.indexOf(v)})&&(b.deleteRule(w),p=w,b.insertRule(A.selectorText+g.replace(/.*{/,"{"),p),x=!0)});x||b.insertRule(g,p)},a=function(b){var f=gx.getThemeElement();if(f=c(f.href))for(var g=0==b.indexOf("@media",0),m=b.split(/{|}/),p=0;p<m.length-1;p+=2){var u=m[p].replace(/(\r\n|\r|\n| *$)/gm,"");gx.lang.emptyObject(u)||(g?$.each(f.cssRules,function(x,w){g&&!w.selectorText&&(x=w.cssText.split(/{/)[0],d(x.replace(/ all and/gm,""),u)&&(u=
m[p+1].replace(/(\r\n|\r|\n| )/gm,""),k(w,u,u+" {"+m[p+2]+"}")))}):k(f,u,u+" {"+m[p+1]+"}"))}};l=gx.json.evalJSON(l);if("KBOK"===l.Type)gx.util.alert.showMessage("Connected to LivePreview at "+gx.livePrevWS.host+" on port "+gx.livePrev.port,{dismissmitAt:2E3});else if("KBDoesNotMatchGUID"===l.Type)gx.livePrevWS.onError();else"ThemeStyleChanged"===l.Type&&a(l.Data)},onOpen:function(){gx.livePrevWS.timeOutHdlr&&clearTimeout(gx.livePrevWS.timeOutHdlr);gx.livePrevWS.retry_count=0;gx.livePrevWS.SocketConnect()},
onTimeout:function(){gx.livePrevWS.webSocket.close();gx.livePrevWS.onError()},SocketConnect:function(){objData={KBUUID:gx.livePrevWS.KBUUID,Language:gx.languageCode,KBName:"TestWS",DeviceName:"Web Simulator",DeviceId:gx.livePrevWS.clientGUID,DeviceType:0,DeviceOSName:"Web",Theme:gx.theme,Type:"Connect",Data:{Name:gx.livePrevWS.KBName,UUID:gx.livePrevWS.KBUUID}};gx.livePrevWS.webSocket.send(gx.json.serializeJson(objData))},Connect:function(){var l={};gx.livePrev.port=gx.livePrev.port||gx.livePrevWS.FIRST_PORT;
l.port=gx.livePrev.port;l.wsProtocol="https:"===location.protocol?"wss://":"ws://";l.host=gx.livePrevWS.host+":"+l.port;l.resourceUrl="/live/";l.namespace="livepreview";l.maxRetries=10;l.retryDelay=50;gx.livePrevWS.webSocket&&gx.livePrevWS.webSocket.close();gx.livePrevWS.webSocket=new gx.webSocket(l);gx.livePrevWS.timeOutHdlr=setTimeout(gx.livePrevWS.onTimeout,3E3)},_init:function(){if(!gx.lang.emptyObject(gx.livePreviewUri)){gx.fx.obs.addObserver("gx.ws.onOpen.livepreview",gx.livePrevWS,gx.livePrevWS.onOpen,
{single:!1});gx.fx.obs.addObserver("gx.ws.onMessage.livepreview",gx.livePrevWS,gx.livePrevWS.onMessage,{single:!1});gx.fx.obs.addObserver("gx.ws.onError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});gx.fx.obs.addObserver("gx.ws.onCtxError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});if(!gx.livePrevWS.clientGUID){var l=gx.livePrevWS,c=gx.http.getCookie("GXClientID");c=c||gx.guid.generate();gx.http.setCookie("GXClientID",c,1,!1);l.clientGUID=c}l="";c=[];var d=gx.livePreviewUri.split("?");
0<d.length&&(d=d[1],d=d.split(":"),2<d.length&&(l=d[1],c=d[2].substring(1,d[2].length-1).split(","),d=d[0]));gx.livePrevWS.IPNamesIdx=0;gx.livePrevWS.IPNames=c;gx.livePrevWS.KBName=l;gx.livePrevWS.KBUUID=d;gx.livePrevWS.host=gx.livePrevWS.IPNames[0];gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"html2canvas.js?"+gx.gxBuild,!1),gx.livePrevWS.Connect)}}};
gx.nav=function(){var l=function(){var a={top:!0,right:!0,bottom:!0,left:!0};return function(b){return!!a[b.toLowerCase()]}}(),c=function(a){var b=a;gx.gen.isDotNet()&&(b=a.replace(/\.aspx$/,""));gx.gen.isJava()&&gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName)&&(b=a.substring(gx.pO.PackageName.length+1));return b},d=function(a){var b=a.split("?"),f;if(0<b.length){var g=2==b.length?b[1].split(gx.http.urlParameterSeparator(a)):[];var m=0;for(f=g.length;m<f;m++)g[m]=gx.http.useNamedParameters(a)?
decodeURIComponent(g[m].split("=")[1]):decodeURIComponent(g[m]);return{obj:b[0],args:g}}return!1},k={};return{setCallTarget:function(a,b){k[a.toLowerCase()]=b.toLowerCase()},willRedirect:function(a){return gx.pO&&!gx.pO.fullAjax?!0:!l(k[c(a).toLowerCase()]||"")},willRedirectByUrl:function(a){a=d(a);return this.willRedirect(a.obj,a.args)},call:function(a,b,f){var g=c(a),m=gx.pO.MasterPage;f=f||k[g.toLowerCase()]||"";delete k[g.toLowerCase()];gx.pO&&!gx.pO.fullAjax?gx.http.redirect(gx.http.formatLink(a,
b),!1,!1,gx.pO):l(f)?m&&m.createObjectInTarget(f,g,b):gx.http.redirect(gx.http.formatLink(a,b),!1,!1,gx.pO)},callUrl:function(a,b){(a=d(a))&&this.call(a.obj,a.args,b)},callFromServerRedirect:function(a,b){this.callUrl(a,b)}}}(gx.$);
(function(l){"function"===typeof define&&define.amd?define(["jquery"],l):l(jQuery)})(function(l){l.ui=l.ui||{};l.ui.version="1.13.2";(function(){function c(w,A,q){return[parseFloat(w[0])*(u.test(w[0])?A/100:1),parseFloat(w[1])*(u.test(w[1])?q/100:1)]}function d(w){var A=w[0];return 9===A.nodeType?{width:w.width(),height:w.height(),offset:{top:0,left:0}}:null!=A&&A===A.window?{width:w.width(),height:w.height(),offset:{top:w.scrollTop(),left:w.scrollLeft()}}:A.preventDefault?{width:0,height:0,offset:{top:A.pageY,
left:A.pageX}}:{width:w.outerWidth(),height:w.outerHeight(),offset:w.offset()}}var k,a=Math.max,b=Math.abs,f=/left|center|right/,g=/top|center|bottom/,m=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,u=/%$/,x=l.fn.position;l.position={scrollbarWidth:function(){if(void 0!==k)return k;var w=l("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>");var A=w.children()[0];l("body").append(w);var q=A.offsetWidth;w.css("overflow","scroll");
A=A.offsetWidth;q===A&&(A=w[0].clientWidth);w.remove();return k=q-A},getScrollInfo:function(w){var A=w.isWindow||w.isDocument?"":w.element.css("overflow-x"),q=w.isWindow||w.isDocument?"":w.element.css("overflow-y");A="scroll"===A||"auto"===A&&w.width<w.element[0].scrollWidth;return{width:"scroll"===q||"auto"===q&&w.height<w.element[0].scrollHeight?l.position.scrollbarWidth():0,height:A?l.position.scrollbarWidth():0}},getWithinInfo:function(w){var A=l(w||window);var q=A[0];q=null!=q&&q===q.window;
var v=!!A[0]&&9===A[0].nodeType;return{element:A,isWindow:q,isDocument:v,offset:q||v?{left:0,top:0}:l(w).offset(),scrollLeft:A.scrollLeft(),scrollTop:A.scrollTop(),width:A.outerWidth(),height:A.outerHeight()}}};l.fn.position=function(w){if(!w||!w.of)return x.apply(this,arguments);w=l.extend({},w);var A="string"===typeof w.of?l(document).find(w.of):l(w.of),q=l.position.getWithinInfo(w.within),v=l.position.getScrollInfo(q),t=(w.collision||"flip").split(" "),B={};var G=d(A);A[0].preventDefault&&(w.at=
"left top");var J=G.width;var n=G.height;var r=G.offset;var y=l.extend({},r);l.each(["my","at"],function(){var D=(w[this]||"").split(" ");1===D.length&&(D=f.test(D[0])?D.concat(["center"]):g.test(D[0])?["center"].concat(D):["center","center"]);D[0]=f.test(D[0])?D[0]:"center";D[1]=g.test(D[1])?D[1]:"center";var F=m.exec(D[0]);var H=m.exec(D[1]);B[this]=[F?F[0]:0,H?H[0]:0];w[this]=[p.exec(D[0])[0],p.exec(D[1])[0]]});1===t.length&&(t[1]=t[0]);"right"===w.at[0]?y.left+=J:"center"===w.at[0]&&(y.left+=
J/2);"bottom"===w.at[1]?y.top+=n:"center"===w.at[1]&&(y.top+=n/2);var C=c(B.at,J,n);y.left+=C[0];y.top+=C[1];return this.each(function(){var D,F=l(this),H=F.outerWidth(),L=F.outerHeight(),N=parseInt(l.css(this,"marginLeft"),10)||0,O=parseInt(l.css(this,"marginTop"),10)||0,Q=H+N+(parseInt(l.css(this,"marginRight"),10)||0)+v.width,W=L+O+(parseInt(l.css(this,"marginBottom"),10)||0)+v.height,V=l.extend({},y),Z=c(B.my,F.outerWidth(),F.outerHeight());"right"===w.my[0]?V.left-=H:"center"===w.my[0]&&(V.left-=
H/2);"bottom"===w.my[1]?V.top-=L:"center"===w.my[1]&&(V.top-=L/2);V.left+=Z[0];V.top+=Z[1];var ba={marginLeft:N,marginTop:O};l.each(["left","top"],function(ca,fa){if(l.ui.position[t[ca]])l.ui.position[t[ca]][fa](V,{targetWidth:J,targetHeight:n,elemWidth:H,elemHeight:L,collisionPosition:ba,collisionWidth:Q,collisionHeight:W,offset:[C[0]+Z[0],C[1]+Z[1]],my:w.my,at:w.at,within:q,elem:F})});w.using&&(D=function(ca){var fa=r.left-V.left,ma=fa+J-H,na=r.top-V.top,la=na+n-L,da={target:{element:A,left:r.left,
top:r.top,width:J,height:n},element:{element:F,left:V.left,top:V.top,width:H,height:L},horizontal:0>ma?"left":0<fa?"right":"center",vertical:0>la?"top":0<na?"bottom":"middle"};J<H&&b(fa+ma)<J&&(da.horizontal="center");n<L&&b(na+la)<n&&(da.vertical="middle");a(b(fa),b(ma))>a(b(na),b(la))?da.important="horizontal":da.important="vertical";w.using.call(this,ca,da)});F.offset(l.extend(V,{using:D}))})};l.ui.position={fit:{left:function(w,A){var q=A.within,v=q.isWindow?q.scrollLeft:q.offset.left,t=q.width,
B=w.left-A.collisionPosition.marginLeft;q=v-B;var G=B+A.collisionWidth-t-v;A.collisionWidth>t?0<q&&0>=G?(A=w.left+q+A.collisionWidth-t-v,w.left+=q-A):w.left=0<G&&0>=q?v:q>G?v+t-A.collisionWidth:v:w.left=0<q?w.left+q:0<G?w.left-G:a(w.left-B,w.left)},top:function(w,A){var q=A.within,v=q.isWindow?q.scrollTop:q.offset.top,t=A.within.height,B=w.top-A.collisionPosition.marginTop;q=v-B;var G=B+A.collisionHeight-t-v;A.collisionHeight>t?0<q&&0>=G?(A=w.top+q+A.collisionHeight-t-v,w.top+=q-A):w.top=0<G&&0>=
q?v:q>G?v+t-A.collisionHeight:v:w.top=0<q?w.top+q:0<G?w.top-G:a(w.top-B,w.top)}},flip:{left:function(w,A){var q=A.within,v=q.offset.left+q.scrollLeft,t=q.width,B=q.isWindow?q.scrollLeft:q.offset.left,G=w.left-A.collisionPosition.marginLeft;q=G-B;var J=G+A.collisionWidth-t-B;G="left"===A.my[0]?-A.elemWidth:"right"===A.my[0]?A.elemWidth:0;var n="left"===A.at[0]?A.targetWidth:"right"===A.at[0]?-A.targetWidth:0,r=-2*A.offset[0];if(0>q){if(A=w.left+G+n+r+A.collisionWidth-t-v,0>A||A<b(q))w.left+=G+n+r}else 0<
J&&(A=w.left-A.collisionPosition.marginLeft+G+n+r-B,0<A||b(A)<J)&&(w.left+=G+n+r)},top:function(w,A){var q=A.within,v=q.offset.top+q.scrollTop,t=q.height,B=q.isWindow?q.scrollTop:q.offset.top,G=w.top-A.collisionPosition.marginTop;q=G-B;var J=G+A.collisionHeight-t-B;G="top"===A.my[1]?-A.elemHeight:"bottom"===A.my[1]?A.elemHeight:0;var n="top"===A.at[1]?A.targetHeight:"bottom"===A.at[1]?-A.targetHeight:0,r=-2*A.offset[1];if(0>q){if(A=w.top+G+n+r+A.collisionHeight-t-v,0>A||A<b(q))w.top+=G+n+r}else 0<
J&&(A=w.top-A.collisionPosition.marginTop+G+n+r-B,0<A||b(A)<J)&&(w.top+=G+n+r)}},flipfit:{left:function(){l.ui.position.flip.left.apply(this,arguments);l.ui.position.fit.left.apply(this,arguments)},top:function(){l.ui.position.flip.top.apply(this,arguments);l.ui.position.fit.top.apply(this,arguments)}}}})()});
