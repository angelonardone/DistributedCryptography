/*mustache.js - Logic-less {{mustache}} templates with JavaScript
 http://github.com/janl/mustache.js
 modernizr 3.6.0 (Custom Build) | MIT *
 https://modernizr.com/download/?-csstransitions-flexbox-history-domprefixes-setclasses-testallprops-testprop ! modernizr v3.6.0
 Build https://modernizr.com/download?-csstransitions-flexbox-history-domprefixes-setclasses-testallprops-testprop-dontmin

 Copyright (c)
  Faruk Ates
  Paul Irish
  Alex Sexton
  Ryan Seddon
  Patrick Kettner
  Stu Cox
  Richard Herrera

 MIT License
 {
  "name": "History API",
  "property": "history",
  "caniuse": "history",
  "tags": ["history"],
  "authors": ["Hay Kranen", "Alexander Farkas"],
  "notes": [{
    "name": "W3C Spec",
    "href": "https://www.w3.org/TR/html51/browsers.html#the-history-interface"
  }, {
    "name": "MDN documentation",
    "href": "https://developer.mozilla.org/en-US/docs/Web/API/window.history"
  }],
  "polyfills": ["historyjs", "html5historyapi"]
}
! {
  "name": "Flexbox",
  "property": "flexbox",
  "caniuse": "flexbox",
  "tags": ["css"],
  "notes": [{
    "name": "The _new_ flexbox",
    "href": "http://dev.w3.org/csswg/css3-flexbox"
  }],
  "warnings": [
    "A `true` result for this detect does not imply that the `flex-wrap` property is supported; see the `flexwrap` detect."
  ]
}
! {
  "name": "CSS Transitions",
  "property": "csstransitions",
  "caniuse": "css-transitions",
  "tags": ["css"]
}
! jQuery UI - v1.13.2 - 2022-09-06
 http://jqueryui.com
 Includes: position.js
 Copyright jQuery Foundation and other contributors; Licensed MIT  jQuery UI Position 1.13.2
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(l){return l.raw=l};$jscomp.createTemplateTagFirstArgWithRaw=function(l,c){l.raw=c;return l};$jscomp.arrayIteratorImpl=function(l){var c=0;return function(){return c<l.length?{done:!1,value:l[c++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.makeIterator=function(l){var c="undefined"!=typeof Symbol&&Symbol.iterator&&l[Symbol.iterator];return c?c.call(l):$jscomp.arrayIterator(l)};
$jscomp.arrayFromIterator=function(l){for(var c,d=[];!(c=l.next()).done;)d.push(c.value);return d};$jscomp.arrayFromIterable=function(l){return l instanceof Array?l:$jscomp.arrayFromIterator($jscomp.makeIterator(l))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(l,c,d){if(l==Array.prototype||l==Object.prototype)return l;l[c]=d.value;return l};$jscomp.getGlobal=function(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<l.length;++c){var d=l[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(l,c){var d=$jscomp.propertyToPolyfillSymbol[c];if(null==d)return l[c];d=l[d];return void 0!==d?d:l[c]};
$jscomp.polyfill=function(l,c,d,k){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(l,c,d,k):$jscomp.polyfillUnisolated(l,c,d,k))};$jscomp.polyfillUnisolated=function(l,c,d,k){d=$jscomp.global;l=l.split(".");for(k=0;k<l.length-1;k++){var a=l[k];if(!(a in d))return;d=d[a]}l=l[l.length-1];k=d[l];c=c(k);c!=k&&null!=c&&$jscomp.defineProperty(d,l,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(l,c,d,k){var a=l.split(".");l=1===a.length;k=a[0];k=!l&&k in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var b=0;b<a.length-1;b++){var f=a[b];if(!(f in k))return;k=k[f]}a=a[a.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?k[a]:null;c=c(d);null!=c&&(l?$jscomp.defineProperty($jscomp.polyfills,a,{configurable:!0,writable:!0,value:c}):c!==d&&($jscomp.propertyToPolyfillSymbol[a]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(a):$jscomp.POLYFILL_PREFIX+a,a=
$jscomp.propertyToPolyfillSymbol[a],$jscomp.defineProperty(k,a,{configurable:!0,writable:!0,value:c})))};$jscomp.polyfill("Array.from",function(l){return l?l:function(c,d,k){d=null!=d?d:function(g){return g};var a=[],b="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];if("function"==typeof b){c=b.call(c);for(var f=0;!(b=c.next()).done;)a.push(d.call(k,b.value,f++))}else for(b=c.length,f=0;f<b;f++)a.push(d.call(k,c[f],f));return a}},"es6","es3");
$jscomp.checkStringArgs=function(l,c,d){if(null==l)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return l+""};
$jscomp.polyfill("String.prototype.startsWith",function(l){return l?l:function(c,d){var k=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var a=k.length,b=c.length;d=Math.max(0,Math.min(d|0,k.length));for(var f=0;f<b&&d<a;)if(k[d++]!=c[f++])return!1;return f>=b}},"es6","es3");$jscomp.findInternal=function(l,c,d){l instanceof String&&(l=String(l));for(var k=l.length,a=0;a<k;a++){var b=l[a];if(c.call(d,b,a,l))return{i:a,v:b}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(l){return l?l:function(c,d){return $jscomp.findInternal(this,c,d).v}},"es6","es3");$jscomp.polyfill("String.prototype.endsWith",function(l){return l?l:function(c,d){var k=$jscomp.checkStringArgs(this,c,"endsWith");c+="";void 0===d&&(d=k.length);d=Math.max(0,Math.min(d|0,k.length));for(var a=c.length;0<a&&0<d;)if(k[--d]!=c[--a])return!1;return 0>=a}},"es6","es3");
$jscomp.polyfill("Math.trunc",function(l){return l?l:function(c){c=Number(c);if(isNaN(c)||Infinity===c||-Infinity===c||0===c)return c;var d=Math.floor(Math.abs(c));return 0>c?-d:d}},"es6","es3");$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(l){if(l)return l;var c=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var d=0,k=function(a){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(a||"")+"_"+d++,a)};return k},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(l){if(l)return l;l=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<c.length;d++){var k=$jscomp.global[c[d]];"function"===typeof k&&"function"!=typeof k.prototype[l]&&$jscomp.defineProperty(k.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return l},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(l){l={next:l};l[Symbol.iterator]=function(){return this};return l};$jscomp.iteratorFromArray=function(l,c){l instanceof String&&(l+="");var d=0,k={next:function(){if(d<l.length){var a=d++;return{value:c(a,l[a]),done:!1}}k.next=function(){return{done:!0,value:void 0}};return k.next()}};k[Symbol.iterator]=function(){return k};return k};
$jscomp.polyfill("Array.prototype.values",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(c,d){return d})}},"es8","es3");$jscomp.polyfill("Object.is",function(l){return l?l:function(c,d){return c===d?0!==c||1/c===1/d:c!==c&&d!==d}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(l){return l?l:function(c,d){var k=this;k instanceof String&&(k=String(k));var a=k.length;d=d||0;for(0>d&&(d=Math.max(d+a,0));d<a;d++){var b=k[d];if(b===c||Object.is(b,c))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(l){return l?l:function(c,d){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,d||0)}},"es6","es3");$jscomp.owns=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)};
$jscomp.polyfill("Object.entries",function(l){return l?l:function(c){var d=[],k;for(k in c)$jscomp.owns(c,k)&&d.push([k,c[k]]);return d}},"es8","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(l){function c(){this.batch_=null}function d(f){return f instanceof a?f:new a(function(g,m){g(f)})}if(l&&!$jscomp.FORCE_POLYFILL_PROMISE)return l;c.prototype.asyncExecute=function(f){if(null==this.batch_){this.batch_=[];var g=this;this.asyncExecuteFunction(function(){g.executeBatch_()})}this.batch_.push(f)};var k=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(f){k(f,0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var f=
this.batch_;this.batch_=[];for(var g=0;g<f.length;++g){var m=f[g];f[g]=null;try{m()}catch(n){this.asyncThrow_(n)}}}this.batch_=null};c.prototype.asyncThrow_=function(f){this.asyncExecuteFunction(function(){throw f;})};var a=function(f){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var g=this.createResolveAndReject_();try{f(g.resolve,g.reject)}catch(m){g.reject(m)}};a.prototype.createResolveAndReject_=function(){function f(n){return function(t){m||(m=!0,n.call(g,t))}}var g=this,m=!1;
return{resolve:f(this.resolveTo_),reject:f(this.reject_)}};a.prototype.resolveTo_=function(f){if(f===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof a)this.settleSameAsPromise_(f);else{a:switch(typeof f){case "object":var g=null!=f;break a;case "function":g=!0;break a;default:g=!1}g?this.resolveToNonPromiseObj_(f):this.fulfill_(f)}};a.prototype.resolveToNonPromiseObj_=function(f){var g=void 0;try{g=f.then}catch(m){this.reject_(m);return}"function"==typeof g?
this.settleSameAsThenable_(g,f):this.fulfill_(f)};a.prototype.reject_=function(f){this.settle_(2,f)};a.prototype.fulfill_=function(f){this.settle_(1,f)};a.prototype.settle_=function(f,g){if(0!=this.state_)throw Error("Cannot settle("+f+", "+g+"): Promise already settled in state"+this.state_);this.state_=f;this.result_=g;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var f=0;f<this.onSettledCallbacks_.length;++f)b.asyncExecute(this.onSettledCallbacks_[f]);
this.onSettledCallbacks_=null}};var b=new c;a.prototype.settleSameAsPromise_=function(f){var g=this.createResolveAndReject_();f.callWhenSettled_(g.resolve,g.reject)};a.prototype.settleSameAsThenable_=function(f,g){var m=this.createResolveAndReject_();try{f.call(g,m.resolve,m.reject)}catch(n){m.reject(n)}};a.prototype.then=function(f,g){function m(u,B){return"function"==typeof u?function(p){try{n(u(p))}catch(v){t(v)}}:B}var n,t,w=new a(function(u,B){n=u;t=B});this.callWhenSettled_(m(f,n),m(g,t));return w};
a.prototype.catch=function(f){return this.then(void 0,f)};a.prototype.callWhenSettled_=function(f,g){function m(){switch(n.state_){case 1:f(n.result_);break;case 2:g(n.result_);break;default:throw Error("Unexpected state: "+n.state_);}}var n=this;null==this.onSettledCallbacks_?b.asyncExecute(m):this.onSettledCallbacks_.push(m)};a.resolve=d;a.reject=function(f){return new a(function(g,m){m(f)})};a.race=function(f){return new a(function(g,m){for(var n=$jscomp.makeIterator(f),t=n.next();!t.done;t=n.next())d(t.value).callWhenSettled_(g,
m)})};a.all=function(f){var g=$jscomp.makeIterator(f),m=g.next();return m.done?d([]):new a(function(n,t){function w(p){return function(v){u[p]=v;B--;0==B&&n(u)}}var u=[],B=0;do u.push(void 0),B++,d(m.value).callWhenSettled_(w(u.length-1),t),m=g.next();while(!m.done)})};return a},"es6","es3");$jscomp.polyfill("Number.isNaN",function(l){return l?l:function(c){return"number"===typeof c&&isNaN(c)}},"es6","es3");
$jscomp.polyfill("Object.values",function(l){return l?l:function(c){var d=[],k;for(k in c)$jscomp.owns(c,k)&&d.push(c[k]);return d}},"es8","es3");var gxnoFunc=function(){},gxdbg={logDebug:gxnoFunc,logMsg:gxnoFunc,logEx:gxnoFunc,exTxt:gxnoFunc,write:gxnoFunc,logPerf:gxnoFunc,printPerformanceLog:gxnoFunc};
(function(l,c){"object"===typeof exports&&exports&&"string"!==typeof exports.nodeName?c(exports):"function"===typeof define&&define.amd?define(["exports"],c):(l.Mustache={},c(l.Mustache))})(this,function(l){function c(q){return"function"===typeof q}function d(q){return q.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function k(q,x){return null!=q&&"object"===typeof q&&x in q}function a(q,x){function D(da){"string"===typeof da&&(da=da.split(A,2));if(!w(da)||2!==da.length)throw Error("Invalid tags: "+
da);P=new RegExp(d(da[0])+"\\s*");O=new RegExp("\\s*"+d(da[1]));W=new RegExp("\\s*"+d("}"+da[1]))}if(!q)return[];var C=[],I=[],G=[],K=!1,N=!1,P,O,W;D(x||l.tags);q=new g(q);for(var V,Y,ba;!q.eos();){x=q.pos;if(Y=q.scanUntil(P)){ba=0;for(var fa=Y.length;ba<fa;++ba)if(V=Y.charAt(ba),u.call(B,V)?N=!0:G.push(I.length),I.push(["text",V,x,x+1]),x+=1,"\n"===V){if(K&&!N)for(;G.length;)delete I[G.pop()];else G=[];N=K=!1}}if(!q.scan(P))break;K=!0;V=q.scan(H)||"name";q.scan(v);"="===V?(Y=q.scanUntil(y),q.scan(y),
q.scanUntil(O)):"{"===V?(Y=q.scanUntil(W),q.scan(F),q.scanUntil(O),V="&"):Y=q.scanUntil(O);if(!q.scan(O))throw Error("Unclosed tag at "+q.pos);ba=[V,Y,x,q.pos];I.push(ba);if("#"===V||"^"===V)C.push(ba);else if("/"===V){V=C.pop();if(!V)throw Error('Unopened section "'+Y+'" at '+x);if(V[1]!==Y)throw Error('Unclosed section "'+V[1]+'" at '+x);}else"name"===V||"{"===V||"&"===V?N=!0:"="===V&&D(Y)}if(V=C.pop())throw Error('Unclosed section "'+V[1]+'" at '+q.pos);return f(b(I))}function b(q){for(var x=[],
D,C,I=0,G=q.length;I<G;++I)if(D=q[I])"text"===D[0]&&C&&"text"===C[0]?(C[1]+=D[1],C[3]=D[3]):(x.push(D),C=D);return x}function f(q){for(var x=[],D=x,C=[],I,G=0,K=q.length;G<K;++G)switch(I=q[G],I[0]){case "#":case "^":D.push(I);C.push(I);D=I[4]=[];break;case "/":D=C.pop();D[5]=I[2];D=0<C.length?C[C.length-1][4]:x;break;default:D.push(I)}return x}function g(q){this.tail=this.string=q;this.pos=0}function m(q,x){this.view=q;this.cache={".":this.view};this.parent=x}function n(){this.cache={}}var t=Object.prototype.toString,
w=Array.isArray||function(q){return"[object Array]"===t.call(q)},u=RegExp.prototype.test,B=/\S/,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},v=/\s*/,A=/\s+/,y=/\s*=/,F=/\s*\}/,H=/#|\^|\/|>|\{|&|=|!/;g.prototype.eos=function(){return""===this.tail};g.prototype.scan=function(q){q=this.tail.match(q);if(!q||0!==q.index)return"";q=q[0];this.tail=this.tail.substring(q.length);this.pos+=q.length;return q};g.prototype.scanUntil=function(q){q=this.tail.search(q);
switch(q){case -1:var x=this.tail;this.tail="";break;case 0:x="";break;default:x=this.tail.substring(0,q),this.tail=this.tail.substring(q)}this.pos+=x.length;return x};m.prototype.push=function(q){return new m(q,this)};m.prototype.lookup=function(q){var x=this.cache;if(x.hasOwnProperty(q))var D=x[q];else{for(var C=this,I,G,K,N=!1;C;){if(0<q.indexOf("."))for(I=C.view,G=q.split("."),K=0;null!=I&&K<G.length;)K===G.length-1&&(N=k(I,G[K])||null!=I&&"object"!==typeof I&&I.hasOwnProperty&&I.hasOwnProperty(G[K])),
I=I[G[K++]];else I=C.view[q],N=k(C.view,q);if(N){D=I;break}C=C.parent}x[q]=D}c(D)&&(D=D.call(this.view));return D};n.prototype.clearCache=function(){this.cache={}};n.prototype.parse=function(q,x){var D=this.cache,C=q+":"+(x||l.tags).join(":"),I=D[C];null==I&&(I=D[C]=a(q,x));return I};n.prototype.render=function(q,x,D,C){var I=this.parse(q,C);x=x instanceof m?x:new m(x);return this.renderTokens(I,x,D,q,C)};n.prototype.renderTokens=function(q,x,D,C,I){for(var G="",K,N,P,O=0,W=q.length;O<W;++O)P=void 0,
K=q[O],N=K[0],"#"===N?P=this.renderSection(K,x,D,C):"^"===N?P=this.renderInverted(K,x,D,C):">"===N?P=this.renderPartial(K,x,D,I):"&"===N?P=this.unescapedValue(K,x):"name"===N?P=this.escapedValue(K,x):"text"===N&&(P=this.rawValue(K)),void 0!==P&&(G+=P);return G};n.prototype.renderSection=function(q,x,D,C){function I(W){return G.render(W,x,D)}var G=this,K="",N=x.lookup(q[1]);if(N){if(w(N))for(var P=0,O=N.length;P<O;++P)K+=this.renderTokens(q[4],x.push(N[P]),D,C);else if("object"===typeof N||"string"===
typeof N||"number"===typeof N)K+=this.renderTokens(q[4],x.push(N),D,C);else if(c(N)){if("string"!==typeof C)throw Error("Cannot use higher-order sections without the original template");N=N.call(x.view,C.slice(q[3],q[5]),I);null!=N&&(K+=N)}else K+=this.renderTokens(q[4],x,D,C);return K}};n.prototype.renderInverted=function(q,x,D,C){var I=x.lookup(q[1]);if(!I||w(I)&&0===I.length)return this.renderTokens(q[4],x,D,C)};n.prototype.renderPartial=function(q,x,D,C){if(D&&(q=c(D)?D(q[1]):D[q[1]],null!=q))return this.renderTokens(this.parse(q,
C),x,D,q)};n.prototype.unescapedValue=function(q,x){q=x.lookup(q[1]);if(null!=q)return q};n.prototype.escapedValue=function(q,x){q=x.lookup(q[1]);if(null!=q)return l.escape(q)};n.prototype.rawValue=function(q){return q[1]};l.name="mustache.js";l.version="3.0.1";l.tags=["{{","}}"];var r=new n;l.clearCache=function(){return r.clearCache()};l.parse=function(q,x){return r.parse(q,x)};l.render=function(q,x,D,C){if("string"!==typeof q)throw x=TypeError,q=w(q)?"array":typeof q,new x('Invalid template! Template should be a "string" but "'+
q+'" was given as the first argument for mustache#render(template, view, partials)');return r.render(q,x,D,C)};l.to_html=function(q,x,D,C){q=l.render(q,x,D);if(c(C))C(q);else return q};l.escape=function(q){return String(q).replace(/[&<>"'`=\/]/g,function(x){return p[x]})};l.Scanner=g;l.Context=m;l.Writer=n;return l});(function(){window.onpageshow=function(l){l.persisted&&window.location.reload()}})();
var gx=function(l){var c=/^(?:gx\.O\.)(.+)$/,d=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,k=function(){return!1};return{$:l.noConflict(),O:null,pO:null,languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",servletBasePath:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,
msg:{},NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:k,trueFn:function(){return!0},getNotificationDelay:function(){return void 0===gx.NotificationDelay?400:gx.NotificationDelay},numericLenDec:function(a){var b=a.split(".");a=2===b.length?b[0]:a;b=2===b.length?b[1]:"";a=(a.match(/9|Z|#|\?|\\/g)||[]).length;b=(b.match(/9|Z|#|\?|\\/g)||[]).length;return{Integers:a,Decimals:b}},rtPicture:function(a,b){return b&&b.getAttribute("data-gx-rt-picture")||a&&a.pic||""},dom:{_form:null,_avoidLeaksDiv:null,
id:function(a){return void 0==a.id||""==a.id?a.name:a.id},byId:function(a,b){return"string"===typeof a?(b=b||document,b.getElementById(a)):a},byName:function(a){return a?document.getElementsByName(a):[]},getOrCreatebyCss:function(a,b){b=b.trim().split(" ");a=document.body;b=$jscomp.makeIterator(b);for(var f=b.next();!f.done;f=b.next()){f=f.value;var g=a.querySelector(f);g||(f=f.split(/[\[\]]/)[0],g=document.createElement(f),a.appendChild(g));a=g}return a},toggleAttribute:function(a,b,f){"function"===
typeof a.toggleAttribute?a.toggleAttribute(b,f):f?a.setAttribute(b,""):a.removeAttribute(b,"")},byTag:function(a,b){b=b||document;return b.getElementsByTagName(a)},byClass:function(a,b,f){return!b&&(f=document||f,f.getElementsByClassName)?f.getElementsByClassName(a):l((b||"")+"."+a,f).toArray()},bySelector:function(a){return l(a).toArray()},getAttributeNames:function(a){return"function"===typeof a.getAttributeNames?a.getAttributeNames():Array.from(a.attributes).map(function(b){return b.name})},scripts:function(a){var b=
document.scripts;b||(b=document.getElementsByTagName("script"));if("undefined"!=typeof b){for(var f=[],g=b.length,m=0;m<g;m++)if(!a||null==b[m].getAttribute("data-gx-external-script")){var n=b[m].attributes.src;n&&n.value&&(n=n.value,"//:"!=n&&f.push(n))}return f}return[]},getIntersectionObserver:function(a){"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?a&&a(window.IntersectionObserver):gx.http.loadScript(gx.util.resourceUrl(gx.basePath+
gx.staticDirectory+"intersection-observer.js",!1),function(){a&&a(window.IntersectionObserver)})},_init:function(){gx.evt.processing=!1;gx.evt.userReadyCnt=1;gx.evt._userReady=!1;gx.evt.on_ready(this,function(){var a,b=gx.util.browser,f=[];if(document.querySelectorAll)f=document.querySelectorAll("input[type='hidden']");else{var g=gx.dom.byTag("input");var m=0;for(a=g.length;m<a;m++)"hidden"==g[m].getAttribute("type")&&f.push(g[m])}m=0;for(a=f.length;m<a;m++)f[m].setAttribute("autocomplete","off");
l('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")});if(b.isChrome())for(b=document.querySelectorAll("select"),m=0,a=b.length;m<a;m++)b[m].value||(f=b[m].querySelectorAll("option[selected]"))&&f.length&&(b[m].value=f[0].value);l('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")})});this.TRANSITION_END_EVENT=gx.util.browser.isWebkit()?"webkitTransitionEnd":gx.util.browser.isOpera()?"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?
"webkitAnimationEnd":gx.util.browser.isOpera()?"oAnimationEnd":"animationend"}},evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!1,skipPromptCtrl:!0,touchTimer:null,userReadyCnt:0,_userReady:!1,userReadyThreshold:2E3,userReadyThresholdFast:400,hooks:[],types:{VALUECHANGED:1,VALUECHANGING:2},promptFocus:function(a){!0!==
gx.evt.evtPromptMouseDown&&(a=gx.evt.source(a),a=l("[data-gx-attached-ctrl]",a)[0])&&(a=(a.getAttribute("data-gx-attached-ctrl").split(" ")||[]).pop(),a=gx.O.getValidStructId(a),a>=gx.csv.lastId&&(gx.csv.lastId=a,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll()));gx.evt.evtPromptMouseDown=!1},promptMousedown:function(){gx.evt.evtPromptMouseDown=!0},serialRunner:function(){var a=[];return{addTask:function(b){a.push(b);if(1===a.length)a[0]()},signalEndTask:function(){a.shift();if(0<a.length)a[0]()}}},
addHook:function(a,b,f,g){this.hooks.push({c:a,e:b,f:f,o:g})},removeHookByKey:function(a){l.each(gx.evt.hooks,function(b,f){f.o&&f.o.hookKey&&a===f.o.hookKey&&(gx.evt.detach(f.e,f.o,f.f),gx.evt.hooks[b]=void 0)});gx.evt.hooks=gx.evt.hooks.filter(function(b){return b})},attach:function(a,b,f,g,m){m=m||{};if("string"==typeof b){var n=f;g&&(n=f.closure(g));var t=gx.evt.hooks.length;if(m.single){var w=n,u=!1,B;n=function(){u||(B&&clearTimeout(B),gx.evt.detach(a,b,w,m),w.apply(this,arguments),gx.evt.hooks.splice(t,
1),u=!0)};m.timeout&&(B=setTimeout(n,m.timeout))}a.addEventListener?a.addEventListener(b,n,m.useCapture||!1):a.attachEvent?a.attachEvent("on"+b,n):a["on"+b]=n;this.addHook(a,b,n,m)}else if(gx.lang.isArray(b)){n=0;for(var p=b.length;n<p;n++)this.attach(a,b[n],f,g,m)}},on_ready:function(a,b){gx.fx.obs.addObserver("gx.onload",a,b)},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,
"gx-spa-navigating")},onbeforesend:function(a,b,f){gx.pO.MasterPage&&a.req.setRequestHeader(f,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,b,f,g,m,n){gx.reinit(!n)},oncontentreplace:function(a,b,f,g,m,n,t,w){a=gx.lang.getType(g);n=(n=n==t?n:t)?gx.lang.getType(n.toLowerCase()):!1;var u=gx.ajax.getJsonResponse();u&&gx.fn.setJsonHiddens(null,u.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);w?gx.setMasterPage(m):n&&gx.setMasterPage(new n);gx.ajax.clearJsonResponse();
u?gx.ajax.setJsonResponse({response:u,isPostBack:!1,afterCmpLoaded:function(){w&&(m.restoreTargetComponents(),m.restoreExoEventHandlers());gx.objectLoad(u.gxGrids,u.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}).done(function(){gx.fn.setFocusAfterLoad(!0)}):gx.objectLoad()}}});gx.livePrevWS._init()})},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},250);else if(gx.util.browser.isIE()&&
"complete"==document.readyState)gx.evt.onload()},_init:function(){gx.evt.oldDoPostDelay=gx.getNotificationDelay()+100;gx.evt.userReadyThresholdFast=gx.util.browser.isIE()?2E3:gx.evt.userReadyThresholdFast;document.gxReadyState="loading";gx.lang.doCallTimeout(function(){gx.evt.userReadyThreshold=gx.evt.userReadyThresholdFast},gx.evt,[],gx.evt.userReadyThreshold);gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE())?
this.attach(document,"readystatechange",this.onready):9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini()?this.attach(document,"DOMContentLoaded",this.onload):gx.util.browser.isBlackBerry()?this.attach(window,"load",this.onload):gx.wi(function(){this.onready(null)},gx.evt);gx.wi(function(){this.attach(document,["touchstart"],this.ontouchstart);this.attach(document,"mousedown",this.onmousedown);this.attach(document,
["mousemove","touchmove"],this.onmousemove);this.attach(document,["mouseup","touchend"],this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},gx.evt)}},define:function(a,b,f){var g=window||this,m=a.split("."),n=m.length;for(a=0;a<n-1;a++)"undefined"==
typeof g[m[a]]&&(g[m[a]]={}),g=g[m[a]];g[m[n-1]]=f;b||(g[m[n-1]].prototype=new gx.GxObject)},setParentObj:function(a){gx.pO=a;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=gx.pO.OnSessionTimeout;gx.fx.obs.notify(gx.PARENT_OBJECT_EVT)},createParentObj:function(a){if(!gx.spa||!gx.spa.started){var b;a instanceof gx.GxObject||(b=new a);b&&this.setParentObj(b)}},setExecutableComponent:function(a){gx.spa&&gx.spa.started||gx.wi(function(){null==gx.pO&&(gx.setParentObj(gx.createComponent(a,
"")),gx.fn.objectOnload(void 0,!0))},this)},setMasterPage:function(a){gx.wpo(function(){null!=gx.pO&&(gx.pO.MasterPage=a,gx.fx.obs.notify(gx.SETMASTERPAGE_EVT))})},createMasterPage:function(a){gx.wpo(function(){var b;gx.spa.isNavigating()||(a instanceof gx.GxObject||(b=new a),b&&this.setMasterPage(b))},this)},addComponent:function(a,b){null!=gx.pO&&gx.pO.setWebComponent(a,b)},createComponent:function(a,b,f){var g=null;a=gx.lang.getType(a);if(null!=a){a.prototype=new gx.GxObject;var m=gx.csv.cmpCtx;
gx.csv.cmpCtx=b;g=new a(b);f&&g.setContainer(f);gx.csv.cmpCtx=m;g.serviceUrl=gx.fn.getControlValue(g.CmpContext+"_CMPPGM")}return g},getObj:function(a,b){return""==a?1==b?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxO:function(){if(1==arguments.length&&"object"==typeof arguments[0])gx.O=arguments[0];else{var a=arguments[0];var b=arguments[1];gx.O=this.getObj(a,b)||gx.pO}gx.csv.cmpCtx=gx.O.CmpContext;return gx.O},setVar:function(a,b){gx.O.setVariable(a,b)},getVar:function(a){return gx.O.getVariable(a)},
prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var b=c;b=b.exec(a);null!=b&&b[1]?a=b[1]:(b=d,b=b.exec(a),null!=b&&b[1]&&(a=b[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=a},setTimeFormat:function(a){gx.timeFormat=a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=a},setDecimalPoint:function(a){gx.decimalPoint=
a},setThousandSeparator:function(a){gx.thousandSeparator=a},setStaticDirectory:function(a){gx.staticDirectory=a;if(""==gx.staticDirectory)gx.staticDirectory="/";else{var b=gx.staticDirectory.length;a=!gx.isabsoluteurl(a)&&"/"!=gx.staticDirectory.charAt(0);b="/"!=gx.staticDirectory.charAt(b-1);gx.staticDirectory=(a?"/":"")+gx.staticDirectory+(b?"/":"")}},getThemeElement:function(){return gx.dom.byId("gxtheme_css_reference")},updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");a&&a!=this.theme&&
(this.theme=a,(a=gx.getThemeElement())&&0>a.href.search("/"+this.theme+".css")&&(a.href=a.href.replace(/[^/]*.css/,this.theme+".css")))},setTheme:function(a){var b=gx.util.browser,f=b.isIE();b=b.ieVersion();var g=gx.dom.fixes;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{void 0===a&&g.resetFixesStyleElement();gx.HTML5&&g.html5(a);if(void 0===a){f&&(l(document.documentElement).addClass("ie"),l(document.documentElement).addClass("ie"+b),gx.runtimeTemplates&&!Modernizr.flexbox&&
l(document.documentElement).addClass("gx-align-fallback"));if(f&&10==b){var m=document.createElement("style");m.innerHTML="input::-ms-clear {display: none;}";document.body.appendChild(m)}g.setPopupMinWidth()}g.fixTableResets(a)}catch(n){gx.dbg.logEx(n,"gxapi.js","setTheme")}},typedOld:function(a,b,f){switch(f){case "int":return this.OldInteger(a,b);case "decimal":return this.OldDecimal(a,b,!0);case "date":return this.OldDate(a,b);case "dtime":return this.OldDateTime(a,b);default:return this.Old(a,
b)}},isInputEnabled:function(a){return a&&gx.evt.lastEvt==a?!0:!(gx.evt.processing&&!gx.csv.isvalidating()||gx.spa.isNavigating())},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,netcore:!1,isDotNet:function(){return this.net},isDotNetCore:function(){return this.netcore},isRuby:k,isJava:function(){return!this.net&&
!this.netcore},resolveObjClass:function(a){var b=a;if(gx.gen.isDotNet()||gx.gen.isDotNetCore())b=a.replace(/\.aspx$/,"");gx.gen.isJava()&&gx.pO&&gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName)&&(b=a.substring(gx.pO.PackageName.length+1));return b}},util:function(){var a=/^gx-image:\/\/(.*)/;return{executionContext:{getContext:function(){return gx.http.currentUrl()},changedContext:function(b){return b!==gx.util.executionContext.getContext()}},contentTypes:{txt:"text/plain",rtx:"text/richtext",
htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",
gz:"application/x-gzip"},compare:function(b,f,g){if(typeof b!=typeof g)return!1;if("string"==typeof b&&"like"==f)return f=g.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),f=gx.text.replaceAll(gx.text.replaceAll(f,"%",".*"),"_","."),(new RegExp(f,"i")).test(b);switch(f){case ">":return b>g;case ">=":return b>=g;case "<":return b<g;case "<=":return b<=g;case "<>":return b!=g;default:return b==g}},isKnownContentType:function(b){for(var f in this.contentTypes)if(this.contentTypes[f]==b)return!0;return!1},
getContentTypeFromExt:function(b){b=b.split(/[#?]/)[0].split(".").pop().trim();return this.getContentType(b)},getContentType:function(b){if(gx.lang.emptyObject(b))return"text/html";b=b.toLowerCase();b=gx.text.trim(b);if(this.isKnownContentType(b))return b;var f=b.lastIndexOf(".");-1!=f&&(b=b.substring(f+1));b=this.contentTypes[b];return gx.lang.emptyObject(b)?"text/html":b},getFileName:function(b){var f=b.lastIndexOf("/"),g=b.lastIndexOf("\\");f=f>g?f:g;g=b.lastIndexOf(".");if(!b)return b;if(0>g||
f>g)g=b.length;return b.substring(f+1,g)},getFileType:function(b){var f=b.lastIndexOf("/"),g=b.lastIndexOf("\\"),m=b.lastIndexOf(".");return 0>m||m<f||m<g?"":b.substring(m+1)},getWindowInfo:function(){var b="",f=!0,g=!1;try{if(g=window.location!=window.parent.location?!0:!1)try{f=window.frameElement.id||window.top.document.body,b=window.name}catch(m){f=!1}}catch(m){}return{insideIframe:g,canAccessFrame:f,frameId:b}},browser:function(){var b=navigator.userAgent,f=/; rv.([0-9]+)/,g,m;return{w3c:!0,
ie5:!0,ie:-1!=b.indexOf("MSIE")||-1!=b.indexOf("Trident"),edge:-1!=b.indexOf("Edge"),ff:-1!=b.indexOf("Firefox"),winCE:-1!=b.indexOf("Windows CE"),iphone:-1!=b.indexOf("iPhone"),ipad:-1!=b.indexOf("iPad"),ipod:-1!=b.indexOf("iPod"),blackBerry:-1!=b.indexOf("BlackBerry"),operaMini:-1!=b.indexOf("Opera Mini"),opera:-1!=b.indexOf("Opera"),chrome:-1!=b.indexOf("Chrome"),android:-1!=b.indexOf("Android"),webkit:-1!=b.search(/webkit/ig),safari:-1!=b.indexOf("Safari")&&-1===b.indexOf("Chrome"),get GX_TAB_ID_HEADER(){return"X-Gx-Tabid"},
get tabId(){if(!gx.util_storage||!gx.util_storage.isSupported())return"";m=gx.util_storage.get_string("Gx-Tabid");m||(m=gx.guid.generate(),gx.util_storage.set_string("Gx-Tabid",m));return m},isIEStrict:function(){return this.ie},isIE:function(){return this.ie||this.edge},isEdge:function(){return this.edge},isSafari:function(){return this.safari},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},
isIPad:function(){return this.ipad},isAndroid:function(){return this.android},isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()||this.isAndroid()},isCompatMode:function(){return"BackCompat"==document.compatMode},isOldIE:function(n){return gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=
(n||8)},ieVersion:function(){var n=function(){if(this.ie)try{var t=b.indexOf("MSIE");if(0<=t){var w=b.indexOf(";",t),u=b.substring(t+5,w);return parseFloat(u,10)}var B=b.match(f);if(1<B.length)return parseFloat(B[1],10)}catch(p){gx.dbg.logEx(p,"gxapi.js","ieVersion")}else if(this.edge&&(B=b.match(/ Edge\/([0-9]+)\./),1<B.length))return parseFloat(B[1],10);return-1};g||(g=n.call(this));return g},chromeVersion:function(){if(this.isChrome()){var n=b.match(/Chrome\/([0-9]+)/);if(1<n.length)return parseFloat(n[1],
10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&"undefined"!==typeof Range&&!Range.prototype.createContextualFragment&&(Range.prototype.createContextualFragment=function(n){var t=document.createDocumentFragment(),w=document.createElement("div");t.appendChild(w);w.outerHTML=n;return t});"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ie5=
this.ie&&document.getElementById&&document.all?!0:!1);this.setupIE()}}}(),addOnce:function(b,f,g){void 0==b[g]&&(b[g]=f)},inArray:function(b,f){if(null==b||!gx.lang.isArray(f))return!1;if("function"==typeof f.indexOf)return-1!=f.indexOf(b);for(var g=f.length,m=0;m<g;m++)if(f[m]==b)return!0;return!1},pushOnceSorted:function(b,f){for(var g=!0,m=0,n=f.length;m<n;m++){if(b==f[m]){g=!1;break}if(b<f[m]){f.splice(m,0,b);g=!1;break}}g&&f.push(b)},lastArray:function(b){return 0<b.length?b[b.length-1]:null},
noParmsUrl:function(b){var f=b.indexOf("?");-1!=f&&(b=b.substring(0,f));return b},resolveUrl:function(b){if(!b)return b;b=gx.util.imageUrl(b);return gx.isabsoluteurl(b)?b:gx.isRelativeToHost(b)?0!=b.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())?gx.util.resourceUrl(gx.basePath+b,!1):b:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b,!1)},imageName:function(b){return(b=a.exec(b))?b[1].replaceAll(".","_"):null},imageUrl:function(b){var f=a.exec(b);return f?gx.uc.getComputedImagePath(f[1].replaceAll(".",
"_")):b},resourceUrl:function(){var b;return function(f,g){b||(b=new RegExp(gx.basePath+"(/|$)","i"));if("undefined"==typeof f)return"";if(-1!=f.indexOf("://")||"."==f.charAt(0))return gx.text.startsWith(f,gx.basePath)?f.substring(gx.basePath.length):f;var m="/"!=gx.basePath.charAt(gx.basePath.length-1),n=""==gx.basePath?0:f.search(b);if(0==n&&!g)return("/"==f.charAt(0)?"":"/")+f;if(-1!=n||g){g=-1!=n&&0<gx.basePath.length?gx.text.replaceAll(f.substring(n+gx.basePath.length),"\\","/"):f;if("/"==f.charAt(0))return location.protocol+
"//"+location.host+f;f=0<gx.basePath.length&&"/"!=gx.basePath.charAt(0);m=m&&"/"!=g.charAt(0);return location.protocol+"//"+location.host+(f?"/":"")+gx.basePath+(m?"/":"")+g}return f}}(),sameAppUrl:function(b){b=new this.Url(b);return b.isRelative()?!0:b.isSameApp(location.href)},removeBaseUrl:function(b){var f="/"!=gx.staticDirectory.charAt(gx.staticDirectory.length-1),g=0<gx.basePath.length;var m="/"==gx.staticDirectory.charAt(0)?gx.staticDirectory.substring(1):gx.staticDirectory;m=(new RegExp("(?:/)?(?:"+
gx.basePath+(g?"/":"")+"(?:"+m+(f?"/":"")+")?)?((?:[\\S]*))")).exec(b);null!=m&&m[1]&&(b=m[1]);return b},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&6>=gx.util.browser.ieVersion()?"gx_blank.html":"about:blank"},Url:function(){var b=/^(([^:\/\?#]+):)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,f=/^(([^@]+)@)?([^:]+)(:(.+))?$/,g=function(m){this.url=m;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};
this.isSameApp=function(n){n=new gx.util.Url(n);return this.protocol==n.protocol&&this.host==n.host};(function(n,t){var w=b;w=w.exec(t);if(t=!gx.lang.emptyObject(w))if(n.protocol=w[2]?w[2]:"",t=w[4]?w[4]:"",n.path=w[5]?w[5]:"",n.query=w[7]?w[7]:"",n.hash=w[9]?w[9]:"",w=f,w=w.exec(t),t=!gx.lang.emptyObject(w))n.user=w[2]?w[2]:"",n.host=w[3]?w[3]:"",n.port=w[5]?w[5]:""})(this,m)};g.parseWithAnchor=function(m){var n=document.createElement("a");n.href=m;!n.protocol&&gx.util.browser.isIE()&&(n.href=n.href);
return n};return g}(),regExp:{isMatch:function(b,f){return null!==(new RegExp(f)).exec(b)},replace:function(b,f,g){return b.replace(f,g)},split:function(b,f){return b.split(f)},matches:function(b,f){b=(new RegExp(f)).exec(b);return null!==b?b:[]}},autoRefresh:{arTimer:null,getProps:function(){var b=gx.fn.getHidden("_GxRefreshTimeout");null!=b&&(b=gx.json.evalJSON(b),b.Time=parseInt(b.Time));return b},install:function(){var b=this.getProps();null!=b&&(this.create(),"focus"==b.Type&&gx.evt.attach(window,
"blur",this.destroy))},create:function(){if(null==this.arTimer){var b=this.getProps();null!=b&&(this.arTimer=setTimeout(function(){gx.http.reload()},1E3*b.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(b){var f="";if(-1!=b.indexOf("&"))for(var g=b.length,m=0;m<g-1;m++)if("&"==b[m]&&"&"!=b[m+1]){f+=b[m+1];break}return f},accessKeyCaption:function(b){var f="";if(-1==b.indexOf("&"))return b;
for(var g=b.length,m=0;m<g-1;m++)if("&"==b[m]&&"&"!=b[m+1]){f+=b.substring(m+1);break}else f+=b[m];return f},invalidFunc:function(b){throw"gxInvalidFunc: "+b;},urlValue:function(b){var f=b;"string"!=typeof f&&(f=gx.fn.getControlValueInt(b));return encodeURIComponent(f)},help:function(b){open(b,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},_init:function(){this.browser._init()}}}(),guid:{generate:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,
function(a){return(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)})}},lang:{inherits:function(a,b,f){var g=a.prototype;a.prototype=new b;for(var m in g)"undefined"==typeof a.prototype[m]&&(a.prototype[m]=g[m]);"undefined"==typeof a.prototype.base&&(a.prototype.base=b);!0===f&&(a.prototype.constructor=function(){b.prototype.constructor.apply(this,arguments);g.constructor.apply(this,arguments)})},apply:function(a,b){if(a&&b&&"object"===typeof b)for(var f in b)a[f]=b[f];return a},
isEmpty:function(a){return a instanceof gx.date.gxdate?0==(new gx.date.gxdate("")).compare(a):"number"==typeof a?0==a:"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal?gx.num.compare(a,0):""==a},isBigDecimal:function(a){return void 0!==gx.num.dec&&a instanceof gx.num.dec.bigDecimal},instanceOf:function(a,b){if(null==a||null==b)return!1;if(a instanceof b||b==String&&"string"==typeof a||b==Number&&("number"==typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||
b==Array&&gx.lang.isArray(a)||b==Function&&"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||gx.lang.isArray(a))return!1;for(a=a.base;"undefined"!=typeof a;){if(a==b)return!0;a=a.base}return!1},clone:function(a){var b={},f;for(f in a)b[f]=a[f];return b},cloneDeep:function(a){if(gx.lang.isArray(a)){var b=[];a.forEach(function(m,n){b[n]=gx.lang.cloneDeep(m)})}else if(a instanceof gx.date.gxdate)b=gx.json.serializeGXdateJson(a);else{b={};for(var f in a)if(Object.hasOwnProperty.call(a,
f)){var g=a[f];"function"!==typeof g&&(b[f]=g instanceof Object?gx.lang.cloneDeep(g):g)}}return b},isDateType:function(a){return"date"==a||"dtime"==a},isNumericType:function(a){return"int"==a||"decimal"==a},isBooleanType:function(a){return"boolean"==a||"bool"==a},isFixedCharacterType:function(a){return"char"==a||"bits"==a},isCharacterType:function(a){return"char"==a||"svchar"==a||"bits"==a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},isVstruct:function(a){return a.v2v&&
a.gxvar},booleanValue:function(a){return 1==a||0==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&(""==a||"false"==a.toLowerCase()||"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},emptyNum:function(a){return a&&0===a||!a},emptyObj:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},emptyObject:function(a){return void 0===
a||null==a||""==a||"number"==typeof a&&isNaN(a)?!0:!1},emptyforType:function(a,b){return b&&void 0==a?"int"===b?0:"char"===b?"":"date"===b||"dtime"===b?gx.date.nullDate():a:a},supEval:function(a,b){var f=null;f=b instanceof String||"string"==typeof b?a[b]:b;return function(){return f.apply(a,arguments)}},getType:function(a){var b=null;try{for(var f=0,g=a.split("."),m=g.length;null===b&&f<m;)b=this.getTypeImpl(window,g,f++,m)}catch(n){gx.dbg.logEx(n,"gxapi.js","getType")}return b},getTypeImpl:function(a,
b,f,g){for(var m=null;f<g;f++)if(a[b[f]])a=a[b[f]];else break;f===g&&a&&"function"===typeof a&&(m=a);return m},doEval:function(a,b){b=b||window;return b.execScript?b.execScript(a):eval.call?eval.call(b,a):eval(a)},doCall:function(){try{for(var a=arguments[0],b=[],f=arguments.length,g=1;g<f;g++)b.push(arguments[g]);return a.apply(this,b)}catch(m){gx.dbg.logEx(m,"gxapi.js","doCall")}},doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,b,f,g){a=a.closure(b,f);g=setTimeout(a,
g);return{f:a,t:g}},requestAnimationFrame:function(a,b){a=b?a.closure(b):a;window.requestAnimationFrame?window.requestAnimationFrame(a):window.setTimeout(a,10)},htmlDecode:function(){var a=document.createElement("div");return function(b){b&&"string"===typeof b&&(b=escape(b).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),a.innerHTML=b,b=l(a).text(),l(a).text(""));return unescape(b)}}(),arrayUnique:function(a,b){a=a.concat();for(var f=0;f<a.length;++f)for(var g=f+1;g<a.length;++g)(b&&b(a[f],
a[g])||a[f]===a[g])&&a.splice(g--,1);return a},objToArray:function(){var a=function(b){return[b]};return function(b){return l.map(b,a)}}()},cache:function(){var a=!1;return{exceptionsRegEx:!1,remoteFiles:{},inlineCode:{},isCacheable:function(b){return this.exceptionsRegEx?!!b&&-1==b.search(this.exceptionsRegEx):!0},addRemoteFile:function(b){this.isCacheable(b)&&(b=gx.util.noParmsUrl(b),b=gx.util.resourceUrl(b,!0),this.remoteFiles[b]=!0)},addLoadedFile:function(b){this.isCacheable(b)&&(b=gx.util.noParmsUrl(b),
b=gx.util.resourceUrl(b,!0),this.remoteFiles[b]=!0)},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFiles:function(b){var f;if(b)for(f in this.remoteFiles)b.exec(f)&&(this.remoteFiles[f]=!1)},removeRemoteFile:function(b){b=gx.util.noParmsUrl(b);b=gx.util.resourceUrl(b,!0);this.remoteFiles[b]=!1},fileLoaded:function(b){b=gx.util.noParmsUrl(b);b=gx.util.resourceUrl(b,!0);return this.remoteFiles[b]?!0:!1},updateStyles:function(b,f){for(var g=[],m=b.length,n=0;n<m;n++){var t=b[n];if(!gx.lang.emptyObject(t)){for(var w=
!1,u=f.length,B=0;B<u;B++)if(t==f[B]){w=!0;break}w||g.push(t)}}b=gx.staticDirectory;"/"==b.charAt(0)&&(b=b.substring(1));m=g.length;for(f=0;f<m;f++)n=g[f],"/"!=n.charAt(0)&&(n=b+n),this.removeRemoteFile(n)},addInlineCode:function(b){this.inlineCode[b]=!0},deleteInlineCode:function(b){delete this.inlineCode[b]},codeLoaded:function(b){return this.inlineCode[b]?!0:!1},_init:function(){if(!a){a=!0;var b=gx.staticDirectory;"/"==b.charAt(0)&&(b=b.substring(1));for(var f=gx.dom.scripts(!0),g=f.length,m=
0;m<g;m++){var n=f[m];gx.lang.emptyObject(n)||("/"==n.charAt(0)||gx.isabsoluteurl(n)||(n=b+n),this.addRemoteFile(n))}f=gx.dom.styles();g=f.length;for(m=0;m<g;m++)n=f[m],gx.lang.emptyObject(n)||("/"==n.charAt(0)||gx.isabsoluteurl(n)||(n=b+n),this.addRemoteFile(n))}}}}(),json:{_nonSerializables:[],setNonSerializable:function(a){this.isNonSerializable(a)||this._nonSerializables.push(a)},isNonSerializable:function(a){for(var b=this._nonSerializables.length,f=0;f<b;f++)if(this._nonSerializables[f]==a)return!0;
return!1},evalJSON:function(a,b){try{return window.JSON&&!b?void 0===a?a:JSON.parse(a):eval("("+a+")")}catch(f){gx.dbg.logEx(f,"gxapi.js","evalJSON")}return a},evalValidJSON:function(a){return eval("("+a+")")},serializeGXdateJson:function(a){return a instanceof gx.date.gxdate?(a.TimeFmt=24,a.getStringWithFmt("Y4MD").replaceAll("/","-")+"T"+(a.HasTimePart?a.getTimeString(!0,!0,!0,0<a.Value.getMilliseconds()):"00:00:00")):null},serializeSDTJson:function(a,b,f){a=gx.lang.cloneDeep(a);a=gx.O.applySDTMapping(a,
b,!1);return gx.json.serializeJson(a,f,function(g){return g instanceof gx.date.gxdate?'"'+gx.json.serializeGXdateJson(g)+'"':null})},serializeJson:function(a,b,f){if(b&&window.JSON)return JSON.stringify(a);var g=this.objToJson(a);if(null===g)g=this.arrayToJson(a);else return g;if(null===g){if("function"==typeof a)return null;g=[];for(var m in a)if(b||!this.isNonSerializable(m)){var n=this.objToJson(m,!0);if(null!==n){var t=this.serializeJson(a[m]);f&&(t=f(a[m])||t);"string"==typeof t&&g.push(n+":"+
t)}}return"{"+g.join(",")+"}"}return g},objToJson:function(a,b){var f=typeof a;if(b){if(!gx.lang.emptyObject(a)){if("string"==f)return gx.text.escapeString(a);if("number"==f)return'"'+a+'"';if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return'"'+a.toString()+'"'}}else{if("undefined"==f)return"null";if("string"==f)return gx.text.escapeString(a);if("number"==f||"boolean"==f)return a.toString();if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return'"'+a.toString()+
'"';if(null===a)return"null";if("function"==typeof a.json&&(b=a.json(),a!==b))return this.serializeJson(b)}return null},arrayToJson:function(a){if(Array.isArray(a)){for(var b=[],f=a.length,g=0;g<f;g++){var m=this.serializeJson(a[g]);"string"!=typeof m&&(m="undefined");b.push(m)}return"["+b.join(",")+"]"}return null},SDTFromJson:function(a,b,f,g){(f=gx.json.objFromJson(a,f,g))&&gx.O.applySDTMapping(a,b,!0);return f},objFromJson:function(a,b,f){try{var g=function(t,w){if(gx.lang.isArray(t))t.forEach(function(B,
p){B instanceof Object?(w[p]=w[p]||{},g(B,w[p])):w[p]=B});else for(var u in t)w[u]=t[u]},m=this.evalValidJSON(b);if(Array.isArray(a)&&Array.isArray(m))for(;a.length>m.length;)a.shift();else for(var n in a)"function"!=typeof a[n]&&delete a[n];g(m,a);return!0}catch(t){return gx.dbg.logEx(t,"gxapi.js","objFromJson"),f&&f.push({Id:"FromJson Error",Description:gx.dbg.exTxt(t),Type:0}),!1}}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=
[];this.hshTimes.onload=(new Date).getTime()}},stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},csv:{},http:{currentUrl:function(){return""+location.origin+location.pathname},loadScript:function(a,b,f){var g=b,m=!1,n=!1,t;if("string"!==typeof a){var w=a.callback;m=a.isExternal;n=a.isModule;var u=a.attris;a=a.url;g=function(){w&&w();b()}}var B=gx.dom.byTag("head")[0],
p=l("script[src='"+a+"']"),v=!0;if(0<p.length&&!f)if(m)p.remove();else{var A=p.get(0);v=!1}f=function(y){var F=function(){y();A.removeAttribute("data-gx-loading-script")};"function"==typeof y&&(A.addEventListener?gx.evt.attach(A,["load","error"],F,{userCapture:!1}):A.onreadystatechange=function(){"loaded"!=A.readyState&&"complete"!=A.readyState||F()})};if(A)null!==A.getAttribute("data-gx-loading-script")?f(g):g();else{A=document.createElement("script");A.type=n?"module":"text/javascript";A.src=a;
if(u)for(t in u)u.hasOwnProperty(t)&&A.setAttribute(t,u[t]);g&&A.setAttribute("async","");m&&A.setAttribute("data-gx-external-script","");f(g);v&&(B.appendChild(A),A.setAttribute("data-gx-loading-script",""))}}},storage:function(a){this._prefix=a;this.supported=!1;this.isSupported=function(){return this.supported};this.set_string=function(b,f){this.supported&&(this._store[this._prefix+b]=f)};this.get_string=function(b){return this.supported?this._store[this._prefix+b]:null};this.set=function(b,f){this.set_string(b,
gx.json.serializeJson(f))};this.get=function(b){return(b=this.get_string(b))?gx.json.evalJSON(b):null};this.remove=function(b){this.supported&&this._store.removeItem(this._prefix+b)};try{if("undefined"!=typeof window.sessionStorage)try{this._store=window.sessionStorage,window.sessionStorage.setItem("storage.test",!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(b){gx.http.setCookie("GXLocalStorageSupport","false",1,!1)}}catch(b){gx.dbg.logEx(b,"gxapi.js","storage")}},_setBasePath:function(){for(var a=
gx.dom.scripts(),b=null,f=0,g=a.length;f<g;f++)if(0<=a[f].indexOf("gxgral.js")||0<=a[f].indexOf("gxcore.js")||0<=a[f].indexOf("gxapiSD.js")){b=a[f];break}a=f="";if(!gx.isRelativeToHost(b)||gx.isabsoluteurl(b))f=location.pathname.lastIndexOf("/"),f=1<f?location.pathname.substring(1,f):"";else{b=b.split("/");g=location.pathname.split("/");b.splice(b.length-1,1);g.splice(g.length-1,1);for(var m=0,n=g.length;m<n;m++)if(g[m]==b[m])f=f+(""==f?"":"/")+g[m];else if(gx.gen.isJava()&&"servlet"==g[m])a=g[m];
else break}gx.basePath=f;gx.servletBasePath=a},objectLoad:function(a,b){var f=l.Deferred();if(!gx.evt.execLoad)return f.resolve(),f.promise();var g=function(){gx.sec.loadKey();void 0===gx.runtimeTemplates&&(gx.runtimeTemplates=0<l("div[data-abstract-form]").length);var m=!0;gx.setTheme();gx.html.applyCustomHTMLAttributes();gx.fx.obs.addObserver("webcom.render",this,function(n){if(n=n.getContainer()){gx.setTheme(n);gx.html.applyCustomHTMLAttributes(n);var t=function(){"undefined"!=typeof gx.pendingCmps&&
(--gx.pendingCmps,0===gx.pendingCmps&&gx.fx.obs.notify("webcom.all_rendered"))};m||(gx.pendingCmps=gx.pendingCmps||0,gx.pendingCmps+=1,gx.plugdesign.applyTemplateObject({selector:"#"+n.id,observerKey:n.id,deferred:!0}).then(t))}});gx.fx.obs.addObserver("grid.onafterrender",this,function(n,t){t||gx.dom.fixes.fixTableResets(n.container)});delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"pagehide",gx.evt.onunload);gx.fn.setFocusInit();gx.dom.fixes.createLegacyNotification();
gx.cache._init();gx.fn.installComponents(!0,b);gx.http.loadStyles();a&&gx.fn.loadJsonGrids(a,!1);gx.plugdesign.init().done(function(){if("undefined"!=typeof gx.StorageTimeZone&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var n=jstz.determine().name();!gx.lang.emptyObject(n)&&gx.http.getCookie("GxTZOffset")!=n&&gx.http.setCookie("GxTZOffset",n,365,!1,"/")&&gx.config.timezone.reload&&gx.http.reload()}gx.evt.attach(window,"load",gx.http.applyDeferredStyles);gx.fn.objectOnload();gx.goReady(function(){gx.evt.setReady(!0,
"goReady")});document.gxReadyState="complete";gx.util.autoRefresh.install();1!=gx.applyingStyles&&gx.lang.requestAnimationFrame(function(){gx.fn.setOpacity("reset","body")});gx.fx.obs.notify("gx.onload");l(document).ready(function(t){gx.dom.indexElements()});gx.evt.userOnload();gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();m=!1;f.resolve()})};gx.popup?gx.goInteractive():gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"gxi.js",!1),function(){gx.goInteractive()});
gx.wpo(function(){g()});return f.promise()},objectUnload:function(a){gx.fx.obs.notify("gx.onunload");gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.notifications.deinit();gx.fx.obs.removeAll();gx.util.autoRefresh.destroy();gx.fn.objectOnUnload(a);gx.plugdesign.deinit();gx._deinit();l(document).off("keypress keyup input");gx.evt.detach(document,"keydown",gx.evt.onkeypress_hdlr);gx.fn.clearPromptlisteners();gx.evt.userReadyCnt=0},_init_interactive:function(){gx.evt.dispatcher.initialize();gx.base64._init();
gx.sec._init();gx.geolocation._init();gx.popup._init();gx.livePrevWS._init()},_init:function(){gx.wi(gx._init_interactive,gx);gx.lang.apply(this,{oldValues:[],oldKeyValues:[],newRows:[],suggestControls:{},disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],theme:""});gx.dbg._init();gx.dom._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.call_stack_storage=new gx.storage("gx_call_stack");gx.util_storage=new gx.storage("gx_util_storage")},
_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus","onchange"],b=gx.fn.getFormElements(),f=0,g=b.length;f<g;f++)gx.dom.purgeElement(b[f],a);b=gx.dom.byTag("span");f=0;for(g=b.length;f<g;f++)gx.dom.purgeElement(b[f],a);b=gx.dom.byTag("img");f=0;for(g=b.length;f<g;f++)gx.dom.purgeElement(b[f],a)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();
gx.printing._deinit();gx.core.audio._deinit();gx.O=null;gx.pO=null},reinit:function(a){gx.pO.clean(a);gx.objectUnload(a);gx._init()}}}(jQuery);gx.$.extend(gx.dbg,gxdbg);Object.defineProperty(gx.evt,"userReady",{get:function(){return gx._isReadyUI()}});
gx.plugdesign=function(l){var c={},d=!1,k,a,b=1,f={},g={},m=function(t,w){return function(u){var B=t[u.property],p;B&&(p=B[u.control.id]);!p&&B&&(p=B[u.control.name]);p&&(B=!0===p.fn.call(p.template,u.control,u.value),w&&(u.cancel=B))}},n=function(t,w){w=w||{};!0===w.deferred&&window.requestIdleCallback?window.requestIdleCallback(t):gx.lang.requestAnimationFrame(t)};return{init:function(){gx.plugdesign.initialized=!0;gx.fx.obs.addObserver("gx.plugdesign.onafterapplytemplate",this,gx.plugdesign.fixBootstrapGridLayout.closure(this));
gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);return gx.plugdesign.applyTemplateObject()},deinit:function(){gx.fx.obs.deleteObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.deleteObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);gx.plugdesign.initialized=!1;delete gx.runtimeTemplates},
onBeforePropertyChange:m(f,!0),onAfterPropertyChange:m(g,!1),registerTemplate:function(t){c[t.name]=t},unRegisterTemplate:function(t){delete c[t];gx.plugdesign.definition.templates=l.grep(gx.plugdesign.definition.templates,function(w){return w!==t})},getDOMContext:function(t,w,u,B,p,v){var A;w={};v&&(w.text=l(t).text());v=0;for(A=t.attributes.length;v<A;v++){var y=t.attributes[v];w[y.name]=y.value}w.el=t;u&&(w.outerHTML=t.outerHTML);B&&(w.innerHTML=t.innerHTML);p&&(w=p.call(this,w,t)||w);return w},
assingUserAPI:function(t,w){w.fnc_isRO=t.fnc_isRO},getElements:function(t,w,u,B){t="function"==typeof t.selector?t.selector(w?w:""):w&&!t.global?l(w).find(t.selector):l(t.selector);return u?t.not(u):t},shouldApplyOnElement:function(t,w){return"function"==typeof w.selector?this.getElements(w).is(t):l(t).is(w.selector)},applyTemplateOnElement:function(t,w,u){u=u||{};var B=l.Deferred();n(function(){if("string"==typeof t&&(t=c[t],!t)){B.resolve();return}if(!w.parentNode)return B.resolve(),!1;if(!0!==
u.checkInclusion||this.shouldApplyOnElement(w,t)){var p=gx.plugdesign.getDOMContext(w,p,t.outerHTML,t.innerHTML,t.setContext);t.apply(w,p);t.initialize&&t.initialize(p);if(t.listeners){var v=t.listeners,A;p="function"==typeof v.control?v.control(p):v.control;if(v.before)for(A in v.before)v.before.hasOwnProperty(A)&&(f[A]||(f[A]={}),f[A][p]={id:p,fn:v.before[A],template:t});if(v.after)for(A in v.after)v.after.hasOwnProperty(A)&&(g[A]||(g[A]={}),g[A][p]={id:p,fn:v.after[A],template:t})}}B.resolve()}.closure(this),
u);return B},applyTemplateSelection:function(t,w,u,B){B=B||{};var p=l.Deferred(),v=[],A="data-gx-tpl-applied-"+t.name,y=this.getElements(t,w,u,B);!0===t.onDemandInvoke||t.reDraw||(y=y.not("["+A+"]"));y.each(function(F,H){if(H)if("function"==typeof t.reDraw&&null!==H.getAttribute(A)){var r=gx.plugdesign.getDOMContext(H,r,!1,!1,t.setContext);t.reDraw(r)}else v.push(gx.plugdesign.applyTemplateOnElement(t,H,B))});l.when.apply(l,v).done(function(){t.outerHTML&&(y=this.getElements(t,w,u,B));y.attr(A,"");
p.resolve()}.closure(this));return p},applyClassMapOnElement:function(t,w){var u,B;t.initialize&&(u=gx.plugdesign.getDOMContext(w,u,!1,!1,t.setContext));if(Array.isArray(t.cssClass)){var p=0;for(B=t.cssClass.length;p<B;p++)gx.dom.addClass(w,t.cssClass[p])}else gx.dom.addClass(w,t.cssClass);t.initialize&&t.initialize(u)},applyClassSelection:function(t,w,u,B){var p=function(v){"Class"==v.property&&gx.dom.matchesSelector(v.control,t.selector)&&gx.plugdesign.applyClassMapOnElement(t,v.control)};this.getElements(t,
w,u,B).each(function(v,A){A&&(gx.plugdesign.applyClassMapOnElement(t,A),gx.plugdesign.assingUserAPI(t,A),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,p,{unique:!1,observerKey:B.observerKey}))})},controlValueChanged:function(t,w){t&&gx.lang.requestAnimationFrame(function(){gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:t,property:"Value",value:w}])})},applyControlValue:function(t,w){gx.fn.setControlValue(t.id,w);gx.html.onchange(t,w)},applyTemplates:function(t,w,u,B,
p){p=p||{};var v=l.Deferred();if(0===t.length)return v.resolve();t=l.map(t,function(A){var y=l.Deferred();"string"==typeof A?A=c[A]:(A.name=A.name||"auto-generated-"+b++,A=new gx.plugdesign.Template(A));if(!B||"function"==typeof B&&B(A)){var F=function(){gx.plugdesign.applyTemplateSelection(A,w,u,p).done(function(){y.resolve()})};!0===p.deferred?n(F):(F(),y.resolve())}else y.resolve();return y});!0===p.deferred?l.when.apply(l,t).done(function(){v.resolve()}):v.resolve();return v},applyClassMaps:function(t,
w,u,B,p){var v=l.Deferred(),A=function(F,H){gx.plugdesign.applyClassSelection(H,w,u,p)},y=function(){t=l.grep(t,B||gx.trueFn);l.each(t,A);v.resolve()};!0===p.deferred?n(y):y();return v},applyTemplateObject:function(t){t=t||{};var w=t.selector,u=t.excluded,B=t.templateSelector,p=t.classMapSelector,v=l.Deferred(),A=l.Deferred();B=B||function(x){return!0!==x.onDemandInvoke};if(!gx.runtimeTemplates||!gx.plugdesign.initialized)return v.resolve().promise();if(d){var y=this.applyTemplates(k,w,u,B,t);var F=
this.applyClassMaps(a,w,u,p,t);v.resolve()}else{var H=gx.plugdesign.definition;H.css&&l.each(H.css,function(x,D){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+D+"?"+gx.gxBuild,!1),!1,!0)});var r=[];H.js&&l.each(H.js,function(x,D){r.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+D+"?"+gx.gxBuild,!1))});var q=jQuery;jQuery=gx.$;gx.http.loadScripts(r,function(){d=!0;k=H.templates||[];a=H.class_maps||[];y=this.applyTemplates(k,w,u,B,t);F=this.applyClassMaps(a,w,u,void 0,
t);jQuery=q;v.resolve()}.closure(this))}l.when.apply(l,[v,y,F]).done(function(){gx.fx.obs.notify("gx.plugdesign.onafterapplytemplate",[t]);A.resolve()});return A.promise()},fixBootstrapGridLayout:function(){0===l(".container-fluid, .container").length&&l(".row").first().parent().toggleClass("container-fluid",!0)},Template:function(){var t=function(w){var u,B=[];w=w||{};if(w.name){if(w.selector){if(w.listeners){var p=w.listeners;if(!p.control&&(p.before||p.after)){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",
!0);return}}this.preProcessTemplate=function(){var v=this.template,A=/\{\{\$(\w+)\$\}\}/g,y,F=0;for(B=[];null!==(y=A.exec(v));)B[F]=y[1],v=v.replace(y[0],'<span id="hook_'+F+'"></span>'),F++;return v};this.postProcessTemplate=function(v){var A;if(B){var y=0;for(A=B.length;y<A;y++){var F=v[B[y]];var H=l("#hook_"+y);F&&H.after(F);H.remove()}}};this.apply=function(v,A){var y=gx.util.browser.isIE(),F=!1;!u&&this.template&&(u=this.preProcessTemplate(),Mustache.parse(u));if(u){var H=Mustache.render(u,A);
if("inner"==this.applyTo){if(y)for(;v.firstChild;)v.removeChild(v.firstChild);v.innerHTML=H}else F=v===document.activeElement,v.parentNode&&!y?v.outerHTML=H:l(v).replaceWith(H);this.postProcessTemplate(A);F&&gx.fn.setFocus(v)}};gx.lang.apply(this,w);return this}gx.dbg.write("A selector must be specified",!0)}else gx.dbg.write("A name must be specified",!0)};t.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,onDemandInvoke:!1,setContext:gx.emptyFn,initialize:gx.emptyFn,
listeners:{}};return t}()}}(gx.$);
gx.plugdesign.definition={css:[],js:[],templates:"labels atts-vars readonly-atts-vars checkbox radio-button prompt prompt-trigger datepicker geolocation multimedia-upload navbar navbar-textblock-link navbar-textblock-text textarea-auto-expand image usercontrol errorviewer password-atts-vars".split(" "),class_maps:[{selector:".control-group",cssClass:"form-group"},{selector:'.gx-attribute > input:not(.GeoLocOption):not([type="image"]):not([type="checkbox"]), .gx-attribute > select, .gx-attribute > textarea,.gx-attribute > .input-group > input, .gx-attribute > .input-group > select, .gx-attribute > .input-group > textarea, .gx-attribute > .dp_container input',cssClass:"form-control"},
{selector:"form",cssClass:"form-horizontal"},{selector:"div.gx-standard-grid > table",cssClass:"table-responsive",global:!0,first:!0},{selector:'.gx-button input, input[type="button"][data-gx-button], .gx-grid-paging-bar button',cssClass:["btn","btn-default"],first:!0},{selector:'.gx-navbar .gx-button input, .gx-navbar input[type="button"]',cssClass:"navbar-btn"},{selector:".BtnEnter",cssClass:"btn-primary",first:!0},{selector:".BtnDelete",cssClass:"btn-danger",first:!0},{selector:".Container",cssClass:"container",
first:!0},{selector:"#MAINTABLE_MPAGE.PromptMainTable:not(.ContainerFluid)",cssClass:"ContainerFluid"},{selector:".ContainerFluid",cssClass:"container-fluid",first:!0},{selector:".ReadonlyResponsiveImageAttribute, .ResponsiveImage",cssClass:"img-responsive",first:!0},{selector:".BtnTextBlock > a",cssClass:["btn","btn-default"],first:!0}]};
gx.html=function(l){var c=/<style[^>]*>([\s\S]*?)<\/style>/i,d=/<style[^>]*>([\s\S]*?)<\/style>/ig,k=/<style[^>]*data-gx-href="(.*)"\s*>\s*@import\s*url\("(.*)"\)\s*layer\((.*)\).*/i,a=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,b=/<link ([^>]*rel=['"]?shortcut icon['"]?[^>]*)>/i,f=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/ig,g=/<script[^>]*>[\s\S]*?(<script[^>]*>[\s\S]*?<.?\/script>)/i,m=/(<script[^>]*>\s*)\r?\n?\x3c!--\s*\r?\n?(.*)\r?\n?\s*\/\/--\x3e\s*\r?\n?(<.?\/script>)/ig,n=/<script([^>]*)>([\s\S]*?)<\/script>/i,
t=/data-gx-external-script/,w=/type="module"/,u=/href=(['"]?)([^'">]*)\1/i,B=/id=(['"]?)([^'">]*)\1/i,p=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i,v=/src=(['"]?)([^"']*)\1/i,A=/<div><input type="hidden" name="GXState" value="{.*}"><\/div>/g;return{STYLE_ELEMENT_HREF:"data-gx-href",encodeCaseFormat:function(y,F,H){F==gx.html.controls.formats.TEXT?y=gx.html.encode(y,!1,H):F==gx.html.controls.formats.TEXT_W_SPACES&&(y=gx.html.encode(y,!0,H));return y},setGXImageCSSClass:function(y,F){var H=y.jquery?y:l(y),
r=H.attr("data-gx-image-class");y=l(y)[0];r&&H.removeClass(r);y.classList&&[].concat($jscomp.arrayFromIterable(y.classList)).forEach(function(q){q.startsWith("GX_Image_")&&y.classList.remove(q)});H.addClass(F);H.attr("data-gx-image-class",F)},applyCustomHTMLAttributes:function(y){y=y?l(y):l(document);y.find("input[data-msk-att], textarea[data-msk-att]").each(function(F,H){F=l(H);H=F.attr("data-msk-att");F.attr(H,F.attr("data-"+H))});y.find("img[data-gx-image-uri]").each(function(F,H){F=l(H);H=F.attr("data-gx-image-uri");
(H=gx.util.imageName(H))&&gx.html.setGXImageCSSClass(F,"GX_Image_"+H+"_Class")})},encode:function(y,F,H){var r=["<",">","&"],q=["&lt;","&gt;","&amp;"];F&&(r.push(" "),q.push("&nbsp;"));H&&(r.push("\n"),q.push("<br/>"),r.push("\r"),q.push(""));return gx.text.charReplace(y,r,q)},getHidden:function(y,F){return'<input type="hidden" id="'+y+'" name="'+y+'" value="'+F+'">'},viewportWidth:function(){var y=document.documentElement;return y&&y.clientHeight?Math.max(y.clientWidth,document.body.clientWidth):
document.body.clientWidth},viewportHeight:function(){var y=document.documentElement;return y&&y.clientHeight?Math.max(y.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(y,F){(void 0===F||F)&&(y=y.replace(d,""));y=y.replace(f,"");for(F=[];F;)if(F=y.match(n)){var H=this.nestedScripts(F,y);0<H&&(F=new RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+H+"}"),"i"),F=y.match(F));(H=F.lastIndex)||
(H=F.index+F[0].length);y=y.substring(0,F.index)+y.substring(H)}else break;return y},setOuterHtml:function(y,F){y.outerHTML=F},setInnerHtml:function(y,F,H,r,q){var x=gx.dom.styles(),D=gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME;gx.dom.shouldPurge()&&gx.dom.purge(y,!0);var C=l(y).children("."+D).get(0);!C&&r&&(C=document.createElement("div"),gx.dom.addClass(C,D),gx.dom.addClass(C,"Form-fx"),y.appendChild(C));r&&!gx.O.DSO&&gx.pO.fullAjax&&C&&gx.dom.hasClass(C,D)&&!gx.dom.hasClass(y,"transitioning")?(y=
document.createElement("div"),y.innerHTML=this.cleanHtmlRefs(F,q),gx.dom.replaceWithFx(C,y.children[0])):l(y).html(this.cleanHtmlRefs(F,q));gx.util.browser.isIE()&&gx.cache.updateStyles(x,gx.dom.styles());1==H&&this.processCode(F,!1)},setInnerText:function(y,F,H,r){var q=l(y);null!=y.nodeValue?y.nodeValue=F:gx.util.browser.isChrome()||null==y.innerText?gx.util.browser.isFirefox()||gx.util.browser.isChrome()?q.html(gx.html.encodeCaseFormat(F,H,r)):"TEXT"==y.tagName&&null!=y.innerHTML?q.html(F):q.html("<text>"+
F+"</text>"):y.innerText=F},nodesFromText:function(y){var F=document.createElement("div");F.style.visibility="hidden";F.style.display="none";document.body.appendChild(F);gx.dom.shouldPurge()&&gx.dom.purge(F,!0);F.innerHTML=y;y=[];for(var H=F.childNodes.length,r=0;r<H;r++)y.push(F.childNodes[r].cloneNode(!0));gx.dom.removeControlSafe(F);return y},onTypeAvailable:function(y,F,H,r){try{var q=500,x=gx.gen.resolveObjClass(y);try{var D=window.eval(x)}catch(C){}(D=D||eval(x))?H instanceof Array?F.apply(this,
H):F():r<q&&setTimeout(function(){gx.html.onTypeAvailable(y,F,H,r+1)},0)}catch(C){r<q&&setTimeout(function(){gx.html.onTypeAvailable(y,F,H,r+1)},150)}},processCSS:function(y){if(""!=y){var F=document.createElement("style");F.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(F);F.styleSheet?F.styleSheet.cssText=y:(y=document.createTextNode(y),F.appendChild(y))}},nestedScripts:function(y,F){y=y[0].match(g);for(var H=0;y;)F=F.replace(y[1],""),H++,y=(y=F.match(n))?y[0].match(g):
null;return H},processCode:function(y,F,H,r,q,x,D){var C=y,I=[],G=!1,K=[],N=[],P=[],O="",W=[];O=[];if(""!=y){if(void 0===x||x)for(;O;){if(O=y.match(c))(x=O.lastIndex)||(x=O.index+O[0].length),y=y.substring(x);else break;P.push(O[1])}y=C;for(O=[];O;){if(O=y.match(k))(x=O.lastIndex)||(x=O.index+O[0].length),y=y.substring(x);else break;x=O[3];var V=O[2];var Y=O[1];x&&!gx.cache.fileLoaded(V)&&(gx.http.loadStyle(V,gx.emptyFn,!0,Y,x),gx.cache.addRemoteFile(V))}y=C;for(O=[];O;){if(O=y.match(a))(x=O.lastIndex)||
(x=O.index+O[0].length),y=y.substring(x);else break;x=O[1].match(u);Y=O[1].match(B);x&&!gx.cache.fileLoaded(x[2])&&(N.push({href:x[2],id:Y&&2<Y.length?Y[2]:null}),gx.cache.addRemoteFile(x[2]))}y=C;for(O=[];O;){if(O=y.match(b))(x=O.lastIndex)||(x=O.index+O[0].length),y=y.substring(x);else break;l("head link[rel='shortcut icon'").remove();l(document.head).append(O[0])}y=C.replace(A,"");y=C;gx.util.browser.isIE()&&(y=y.replace(m,"$1$2$3"));for(O=[];O;){if(O=y.match(n))C=this.nestedScripts(O,y),0<C&&
(O=new RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+C+"}"),"i"),O=y.match(O)),(x=O.lastIndex)||(x=O.index+O[0].length),y=y.substring(x);else break;void 0!=O[1]&&""!=O[1]?(x=O[1].match(p),C=!!O[1].match(t),V=!!O[1].match(w),null==x&&(x=O[1].match(v)),x&&!gx.cache.fileLoaded(x[2])?(Y=x[2],gx.lang.emptyObject(x[3])||(Y+="?"+x[3]),I.push({url:Y,isExternal:C,isModule:V,callback:C?void 0:function(da,ka){return function(){gx.cache.addRemoteFile(da)}}(x[2],
C)})):x&&gx.cache.fileLoaded(x[2])?G=!0:!x&&O[2]&&K.push(O[2])):O[2]&&K.push(O[2])}if(1!=F){O=K.join(";");""!=O&&gx.lang.doEval(O);if("function"==typeof H)gx.http.loadScripts(I,function(da,ka){ka instanceof Array?da.apply(this,ka):da()}.closure(this,[H,r]),void 0,D);else{F={method:"GET",useCash:!0};F.load=function(da,ka){gx.lang.supEval(this,W.push(ka))}.closure(this);F.mimetype="text/plain";F.sync=!0;var ba=I.length;for(y=0;y<ba;y++)F.url=I[y].url,gx.http.doCall(F)}gx.fn.setOpacity(0,document.body);
O=W.join("");""!=O&&gx.lang.doEval(O);I=document.getElementsByTagName("style");F=N.length;var fa=0;for(y=0;y<F;y++){D=!1;K=I.length;for(O=0;O<K;O++)I[y]&&N[y].href==(I[O].styleSheet&&I[O].styleSheet.cssText?I[O].styleSheet.cssText:I[O].innerHTML)&&(D=!0);D||((D=gx.dom.byId(N[y].id))?(K=document.createElement("link"),fa++,1===fa&&(gx.fn.setOpacity(0,document.body),gx.applyingStyles=!0),K.id=D.id,K.rel=D.rel,K.type=D.type,K.onload=function(da){fa--;0===fa&&gx.lang.requestAnimationFrame(function(){gx.fn.setOpacity("reset",
document.body);gx.applyingStyles=!1})},K.href=N[y].href,D.parentElement.replaceChild(K,D)):gx.http.loadStyle(N[y].href,gx.emptyFn,!1,N[y].id))}gx.lang.doCallTimeout(function(){0<fa&&(gx.fn.setOpacity("reset",document.body),gx.applyingStyles=!1)},this,[],gx.html.MAX_STYLE_LOAD_DELAY);O=P.join("");gx.html.processCSS(O);gx.applyingStyles||gx.fn.setOpacity("reset",document.body);if(0==ba&&"function"==typeof H)if(G&&q)gx.html.onTypeAvailable(q,H,r,0);else r instanceof Array?H.apply(this,r):H()}}},getFieldLabel:function(y,
F){var H=y.id,r=y.previousSibling;if(!r||"LABEL"!==r.tagName||r.htmlFor!==H){if("INPUT"==y.tagName||"SELECT"==y.tagName||"TEXTAREA"==y.tagName)var q=y.id;else"SPAN"==y.tagName?(q=l(y).attr("data-gx-enabled-id"))||0!==H.indexOf("span_")||(q=H.substring(5)):gx.dom.hasClass(y,gx.uc.gxCssClass)&&(q=gx.uc.CtrlId(y.id));gx.dom.hasClass(y,gx.html.multimediaUpload.gxCssClass)&&(q=gx.html.multimediaUpload.CtrlId(y.id));if(q)return l("label[for='"+q+"']",F).get(0)}},multimediaUpload:{gxPreviewHTMLAtt:"data-gx-preview-image",
gxCssClass:"gx-multimedia-upload",setPreviewAtt:function(y,F){(y="object"===typeof y?y:gx.dom.el(y))&&y.setAttribute(gx.html.multimediaUpload.gxPreviewHTMLAtt,F)},getPreviewAtt:function(y){return(y="object"===typeof y?y:gx.dom.el(y))?y.getAttribute(gx.html.multimediaUpload.gxPreviewHTMLAtt):""},getInputFileEl:function(y){return l("#"+y+"[type='file']")[0]},CtrlId:function(y){return y.replace(/_ct$/,"")},resolveFileName:function(y,F){return y||F||""},onOptionChange:function(y){y=this.getElements(y);
var F=y.fileField,H=y.uriField;y.uriOption.checked?(gx.dom.removeClass(F,"field-selected"),gx.dom.addClass(H,"field-selected")):(gx.dom.removeClass(H,"field-selected"),gx.dom.addClass(F,"field-selected"))},imageLoadHandler:function(y,F){var H=function(q){var x="IMG"==q.tagName?"src":"href";return!q[x]||q[x]==document.location.href||"/"==q[x].charAt(q[x].length-1)};gx.dom.removeClass(F,"gx-multimedia-unknown");gx.dom.removeClass(F,"gx-multimedia-download");!y||H(y)?gx.dom.addClass(F,"gx-multimedia-empty"):
gx.dom.removeClass(F,"gx-multimedia-empty");H(y)&&F&&!H(F)&&(gx.dom.removeClass(F,"gx-multimedia-empty"),("IMG"!==y.tagName||H(y))&&gx.dom.addClass(F,"gx-multimedia-download"));if(gx.util.browser.isIE()&&y&&"IMG"==y.tagName){F=l(y);H=parseInt(F.css("maxWidth"));var r=parseInt(F.css("maxHeight"));H<y.width&&(F.css("height",gx.dom.addUnits(H*y.height/y.width)),F.css("width",gx.dom.addUnits(H)));r<y.height&&(F.css("width",gx.dom.addUnits(r*y.width/y.height)),F.css("height",gx.dom.addUnits(r)))}},dialogCloseHandler:function(y,
F,H){H=this.getElements(y);F.style.display="none";y.appendChild(F);H.uriOption.checked?this.refreshPreviewImg(y,H.uriField):this.refreshPreviewImg(y,H.fileField);H.action.focus();gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler)},prevImgClickHandler:function(y,F){y=y||event;var H=gx.evt.source(y);0<l(H).closest(".gx-multimedia-empty").length&&this.actionClickHandler(y,F)},actionClickHandler:function(y,F){var H=gx.html.multimediaUpload.isModal;y=y||event;y.preventDefault?y.preventDefault():
y.returnValue=!1;y=this.getElements(F);var r=y.button[1];y.fieldsCt.style.display="block";var q=130,x=500,D=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(F.style.position="static",y.fileField.style.marginTop="0",y.uriField.style.marginTop="0",q=230);gx.runtimeTemplates&&(D=!1,l(window).width()<x&&(x=l(window).width()-20,q=170));F=gx.popup.openDialog({parentElement:F,w:x,h:q,contentHtml:y.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,resizable:D,isModal:void 0===H||H,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,
[F,y.fieldsCt,r])}});y.fileOption.focus();gx.evt.attach(r,"click",F.close,F,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},clearActionHandler:function(y,F){y=y||event;y.preventDefault?y.preventDefault():y.returnValue=!1;y=this.getElements(F);y.uriField.value="";y.fileField.value="";y.uriOption.checked=!1;y.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[F]);this.clearPreviewImg(F);this.imageLoadHandler(y.previewImg,y.previewLink)},keypressHandler:function(y){13==
y.event.keyCode&&(y.cancel=!0,gx.popup.currentPopup.close())},tapHandler:function(y){this.getElements(y).action.focus()},getElements:function(y){y=gx.dom.byId(y);var F=l(y);y=F.find(".change-action")[0];var H=F.find(".clear-action")[0],r=null,q=l(H).next()[0];F=F.find(".fields-ct");q&&("A"==q.tagName?(r=q,q=q.firstChild):"IMG"!=q.tagName&&(q=null));return{previewLink:r,action:y,clearAction:H,previewImg:q,fieldsCt:F[0],uriField:F.find("input[type='text']")[0],fileField:F.find("input[type='file']")[0],
uriOption:F.find("input[type='radio'][value='uri']")[0],fileOption:F.find("input[type='radio'][value='file']")[0],button:F.find("input[type='button']")}},getContainer:function(y){for(y=gx.dom.byId(y);y;){if(gx.dom.hasClass(y,gx.html.multimediaUpload.gxCssClass))return y;y=y.parentNode}return null},setPreviewImage:function(y,F){y=gx.dom.byId(y);var H=this.getElements(y);0>gx.util.Url.parseWithAnchor(F).protocol.search(/^https?:/)&&H.uriOption.checked||(this.clearPreviewImg(y),H.previewImg&&gx.text.startsWith(gx.util.getContentTypeFromExt(F),
"image")&&("IMG"==H.previewImg.tagName&&(H.previewImg.src=F),this.imageLoadHandler(H.previewImg,H.previewLink)))},setPreviewLink:function(y,F){y=gx.dom.byId(y);y=this.getElements(y);y.previewLink&&F&&y.previewLink&&(y.previewLink.href=F);this.imageLoadHandler(y.previewImg,y.previewLink)},clearPreviewImg:function(y){y=gx.dom.byId(y);(y=this.getElements(y))&&y.previewImg&&y.previewLink&&(y.previewImg.src="",y.previewLink.href="")},refreshPreviewImg:function(y,F){y=gx.dom.byId(y);var H=this.getElements(y);
if(H.previewImg&&"INPUT"==F.tagName){this.setPreviewAtt(y,"");if(F==H.fileField){var r;if(F.files&&(r=F.files[0]))if(r.type.match(/image.*/)){var q=new FileReader;q.onload=function(x,D,C){D.src=x.target.result;C.href=x.target.result;this.setPreviewAtt(y,x.target.result)}.closure(this,[H.previewImg,H.previewLink],!0);q.readAsDataURL(r)}else{H.previewLink.href="#";H.previewLink.className="gx-multimedia-download";this.clearPreviewImg(y);return}F.gxctrldeleted&&this.clearPreviewImg(y)}else F==H.uriField&&
(H.previewImg.src=F.value,H.previewLink.href=F.value);this.imageLoadHandler(H.previewImg,H.previewLink)}},setType:function(y,F){y=gx.dom.byId(y);var H=this.getElements(y);H.fileOption.checked=F;H.uriOption.checked=!F;F&&(H.uriField.value="");this.onOptionChange(y)},getOptionValue:function(y){y=gx.dom.byId(y);return this.getElements(y).fileOption.checked?"file":"uri"},createControl:function(y){y=gx.dom.byId(y);if(!y._created){y._created=!0;var F=this.getElements(y);gx.dom.addClass(F.fileField,"field-selected");
F.action.setAttribute("gxfocusable","1");var H=document.createElement("input");H.type="button";H.className="BtnCancel";H.value=gx.getMessage("GXM_cancel");H.onclick=function(){gx.fn.closeWindow([])};F.fieldsCt.appendChild(H);H=document.createElement("input");H.type="button";H.className="BtnEnter";H.value=gx.getMessage("GXM_uploadconfirmoption");F.fieldsCt.appendChild(H);H=this.imageLoadHandler.closure(this,[F.previewImg,F.previewLink]);var r=this.onOptionChange.closure(this,[y]);H();F.previewImg&&
gx.evt.attach(F.previewImg,"load",H);r();gx.evt.attach(F.uriOption,"click",r);gx.evt.attach(F.fileOption,"click",r);gx.evt.attach(F.action,"click",this.actionClickHandler.closure(this,[y],!0));gx.evt.attach(F.previewImg.parentNode,"click",this.prevImgClickHandler.closure(this,[y],!0));gx.evt.attach(F.clearAction,"click",this.clearActionHandler.closure(this,[y],!0));gx.evt.attach(y,"touchstart",this.tapHandler.closure(this,[y]))}}},controls:function(){var y={},F={label:'<label class="gx-label {{className}} control-label" {{{additionalAtts}}} for="{{relatedElement}}">{{caption}}</label>',
radio:['<span class="{{className}}" style="{{style}}">',"{{#values}}",'<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"data-gxoch0="{{data-gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}</label>',"{{/values}}","</span>"]},H=function(q,x){var D=gx.lang.isArray(F[q])?F[q].join(""):F[q];y[q]||(y[q]=!0,Mustache.parse(D));return Mustache.render(D,x)},r=/"/g;return{applyTemplate:H,
types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25,label:26,divEnd:27,formGroup:28,formGroupEnd:29},formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},isMultiSelection:function(q){return"combo"==q||"dyncombo"==q||"listbx"==q||"dynlistbx"==q?!0:!1},
eventJSCode:function(q,x,D,C,I){var G="";if(4==q&&D)G=D;else if(1==q)G="gx.fn.closeWindow();";else if(7==q)q="",C&&I&&(q=",'"+C.gridName+"','"+I.gxId+"'"),G="gx.evt.execCliEvt( "+x+q+",this);";else if(6==q||5==q)G="gx.evt.execEvt("+x+",this,"+C.gridId+");";return G},onJsEventAttributes:function(q,x,D){var C=gx.GxObject,I=" "+C.GX_EVENT_DATA_ATTR+'="'+q+'"',G="";4===q&&(G=" "+C.GX_EVENT_CODE_DATA_ATTR+'="'+q+'"');D?I=x?I+(" "+C.GX_EVENT_CONDITION_DATA_ATTR+'="'+D+'"'+G):I+G:x&&(I+=G);return I+" "},
startAnchor:function(q,x,D,C,I,G){G=G?' class="'+G+'"':"";q=this.onJsEventAttributes(q,x,D);if(D||x)return'<a href="javascript:void(0)"'+q+G+">";if(C){var K="";x=C.replace(/(\\")/ig,"\\u0022");K+='<a href="'+x+'"';""!=I&&(K+=' target="'+I+'"');K+=G+">"}return K},endAnchor:function(q,x,D,C){(x||D||C)&&q.append("</a>")},onJSEvent_impl:function(q,x,D){var C=[];""!=D&&C.push('jsevent="'+D+'" ');C.push(q+'="if( ');""!=x?C.push("gx.evt.jsEvent(this)) {"+x+'} else return false;"'):C.push('!gx.evt.jsEvent(this)) return false;"');
return C.join("")},onJSEvent:function(q,x,D,C){q.append(" ");q.append(this.onJSEvent_impl(x,D,C))},htmlControl:function(q,x,D,C,I){this.id=q||"";this.width=x||0;this.widthUnit="px";this.height=D||0;this.heightUnit="px";this.cssClass=C||"";this.style=this.ownCssClass=this.roClass="";this.title=I||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link="";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=
null;this.gridRow=this.gridId="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){this.buffer.clear();this._getHtml();return this.buffer.toString()};this.append=function(G){return this.buffer.append(G)};this.tagAtt=function(G,K){K=K.toString();K=0<=K.indexOf('"')?K.replace(r,"&quot;"):K;return this.buffer.append(" "+G+(K?'="'+K+'"':""))};this.persistValue=function(){var G=this.getVStruct();!gx.lang.emptyNum(this.column.gxId)&&G&&(this._persistValue?this._persistValue():G.v2v&&G.v2v(this.value))};
this.setIndividualProp=function(G,K){this[G]="enabled"==G||"visible"==G||"isPassword"==G||"autoComplete"==G||"hasJsLink"==G?gx.lang.gxBoolean(K):K};this.setGridData=function(G){this.grid=G.grid;this.row=G.row;this.gridId=G.gridId;this.gridRow=G.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}};this.getVStruct=function(){return this.grid.parentObject.GXValidFnc[this.column.gxId]};this.getEventContext=function(){var G=this.grid.parentObject;
return gx.json.serializeJson([G.CmpContext,G.IsMasterPage])}},singleLineEdit:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=!1;this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha,pa,z,E,L,J,M,Q,R,T,U,aa,S,Z,X,ia,ea,ja,qa,ra,la,sa){this.id=G;this.inputType=E;this.step=L;this.title=V;this.placeholder=Y;this.width=J;this.widthUnit=M;this.height=17==Q?0:Q;this.heightUnit=R;this.maxLength=T;this.visible=0!=ha;this.enabled=
0!=pa;this.rtEnabled=0!=z;this.isPassword=0!=U;this.format=aa;this.link=O;this.linkTarget=W;this.style=ka;this.cssClass=da;this.roClass=ma;this.columnClass=na;this.columnHeaderClass=ca;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);ra&&(this.rtEnabled||this.enabled)&&(K=sa);this.formattedValue=""===sa?"":gx.lang.emptyObject(K)?gx.applyPicture(this.vStruct,gx.html.encodeCaseFormat(sa||"",aa)):gx.html.encodeCaseFormat(K,aa);this.extraAttributes=N;this.jsScrCode=fa;this.usrOnclick=ba;this.eventName=
P;this.parentId=S;this.hasTheme=Z;this.autoComplete=0!=X;this.autoCorrection=0!=ia;this.value=sa||"";this.domainName=ja;this.rtPicture=la};this._getHtml=function(){var G="",K=this.getVStruct();0==this.width&&(this.width=this.colSize?this.colSize:this.maxLength,this.widthUnit="chr");0<this.width&&("chr"==this.widthUnit?G=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";");0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+
";");var N=this.style;this.style+=this.visible?"":";display:none;";if(this.rtEnabled||this.enabled){if(this.dataType==gx.types.date||this.dataType==gx.types.dateTime)this.append("<div"),this.tagAtt("id",this.id+"_dp_container"),""!=this.column.align&&this.tagAtt("data-align",this.column.align),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">");this.row.ownerGrid.isFreestyle||void 0!==this.column.titleformat&&this.column.titleformat!=
gx.html.controls.formats.TEXT||this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>");this.append("<input");if(1==this.isPassword)this.tagAtt("type","password");else{this.tagAtt("type",this.inputType);if(this.step&&("number"==this.inputType||"range"==this.inputType)){this.tagAtt("step",this.step);var P=Math.pow(10,this.maxLength)-1;this.tagAtt("min",-1*P);this.tagAtt("max",P);"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"')}this.dataType==
gx.types.geolocation&&(this.extraAttributes+=" data-gx-geolocation")}this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue);this.append(G);""!=this.title&&this.tagAtt("title",this.title);""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder);this.autoComplete||this.tagAtt("autocomplete","off");this.tagAtt("spellcheck",this.autoCorrection.toString());"date"!=this.inputType&&"datetime"!=
this.inputType&&"datetime-local"!=this.inputType&&this.tagAtt("maxlength",this.maxLength);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.rtPicture&&this.tagAtt("data-gx-rt-picture",this.rtPicture);G=this.style;""!=this.column.align&&(G+=";text-align:"+this.column.align);P=!this.enabled&&this.rtEnabled?";display:none;":"";G+=P;""!=G&&this.tagAtt("style",G);this.append(this.extraAttributes);gx.fn.controlFiresEvent(K)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,K.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,
this.getEventContext()));this.append(">");this.dataType==gx.types.date||this.dataType==gx.types.dateTime?(G=this.grid.parentObject.getValidStructFld(this.id),void 0!=G.dp&&(0==G.dp.f&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),P=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+P),this.append(">")),this.append("</div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,
Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.dataType==gx.types.date||this.dataType==gx.types.dateTime?this.formattedValue:this.value);P=this.hasTheme?gx.fn.prefixROClass(0==this.parentId?this.cssClass:this.roClass):this.cssClass;G="";this.format!=gx.html.controls.formats.RAW_HTML&&(N+=this.visible?"":";display:none;",this.append("<span"),this.append(this.extraAttributes),""!=P&&this.tagAtt("class",
P),""!=N&&this.tagAtt("style",N),this.tagAtt("data-gx-readonly",""),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.tagAtt("data-gx-enabled-id",this.id),G=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),N=gx.html.controls.startAnchor(this.jsScrCode,G,this.usrOnclick,this.link,this.linkTarget),gx.fn.controlFiresEvent(K)&&(N||this.tagAtt("tabindex","0"),this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,K.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,
this.getEventContext())),this.append(">"),this.append(N));if(this.isPassword)for(K=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength),N=0;N<K;N++)this.append("*");else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,G,this.usrOnclick,this.link),this.append("</span>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},multipleLineEdit:function(q,
x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha,pa,z,E,L,J,M,Q,R,T,U,aa,S){this.id=G;this.visible=0!=O;this.enabled=0!=W;this.rtEnabled=0!=V;this.width=Y;this.widthUnit=ba;this.height=fa;this.heightUnit=da;this.style=ma;this.cssClass=na;this.columnClass=ca;this.columnHeaderClass=ha;this.maxLength=pa;this.extraAttributes=N;this.autoresize=0!=z;this.format=P;this.link=K;this.linkTarget=L;this.placeholder=
J;this.value=S||"";this.autoCorrection=0!=M;this.domainName=R;this.maxTextLines=E;this.jsScrCode=U;this.title=aa};this._getHtml=function(){var G=this.getVStruct();this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.rtEnabled||this.enabled)this.row.ownerGrid.isFreestyle||void 0!==this.column.titleformat&&this.column.titleformat!=gx.html.controls.formats.TEXT||this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>"),this.append("<textarea"),
""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",this.width):this.style=this.style+";width: "+this.width+this.widthUnit,1<this.maxTextLines&&this.tagAtt("data-gx-text-maxlines",this.maxTextLines),"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",
this.maxLength),""!=this.title&&this.tagAtt("title",this.title),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(gx.html.encodeCaseFormat(this.value,gx.html.controls.formats.TEXT,
!1)),this.append("</textarea>");if(!this.enabled){var K=this.visible?"":"display:none;";this.autoresize||(K+='overflow="hidden";');this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);this.cssClass=gx.fn.prefixROClass(this.cssClass);this.append("<span ");this.append(this.extraAttributes);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=K&&this.tagAtt("style",K);this.tagAtt("data-gx-readonly","");""!=this.title&&this.tagAtt("title",this.title);this.tagAtt("id","span_"+this.id);K=
gx.html.controls.startAnchor(this.jsScrCode,!!G.evt,"",this.link,this.linkTarget);G.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,G.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),K||this.tagAtt("tabindex","0"));this.format===gx.html.controls.formats.TEXT_W_SPACES&&this.tagAtt("data-text-format",gx.html.controls.formats.TEXT_W_SPACES);this.append(">");this.append(K);this.append(gx.html.encodeCaseFormat(this.value,this.format,!0));gx.html.controls.endAnchor(this,
!!G.evt,"",this.link);gx.html.controls.specificDomainCtrls(this);this.append("</span>")}}},blob:function(q,x,D,C,I,G,K){this.base(q,x,D,C,I);this.type=gx.html.controls.types.blob;this.display=G||0;this.contentType=K||"text/html";this.parameters=this.url="";this.setProperties=function(N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha,pa,z,E,L,J,M,Q,R,T,U,aa,S,Z,X,ia,ea){this.id=N;this.value=P;this.contentType=O||"text/html";this.linkTarget=V;this.parameters=Y;this.display=ba;this.visible=0!=da;this.enabled=0!=fa;
this.alt=ka;this.title=ma;this.borderWidth=na;this.autoresize=0!=ca;this.width=ha;this.widthUnit=pa;this.height=z;this.heightUnit=E;this.vSpace=L;this.hSpace=J;this.jsScrCode=M;this.usrOnclick=Q;this.eventName=R;this.style=T;this.cssClass=U;this.columnClass=aa;this.columnHeaderClass=S;this.extraAttributes=Z;this.extraDisplayAttributes=X;this.jsDynCode=ia;this.url=gx.util.resolveUrl(ea)};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append('<div class="gx-tbldsp-container"');
this.tagAtt("border",0);this.tagAtt("data-cellpadding",0);this.tagAtt("data-cellspacing",0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");this.tagAtt("title",gx.lang.emptyObject(this.title)?this.id:this.title);this.append("><div>");var N=-1!=this.contentType.toLowerCase().indexOf("image/");if(0==this.display){if(N){this.append("<img");this.tagAtt("alt",this.alt);if(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))this.url=gx.ajax.getImageUrl(gx,"blankImage");
this.tagAtt("src",this.url)}else this.append("<object"),this.tagAtt("type",this.contentType),""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url);this.tagAtt("id","Object_"+this.id);this.style+="display:block;";0==this.width||this.autoresize||(this.style=this.style+"width:"+this.width+this.widthUnit+";");0==this.height||this.autoresize||(this.style=this.style+"height:"+this.height+this.heightUnit+";");this.tagAtt("style",this.style);var P=""!=this.cssClass?"BlobContent"+this.cssClass:
this.cssClass;this.enabled||(P=gx.fn.prefixROClass(P));this.tagAtt("class",P);this.append(this.extraDisplayAttributes);this.append(">");N?this.append("</img>"):(this.append(this.parameters),this.append("</object>"))}else 1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),""!=this.linkTarget&&this.tagAtt("target",
this.linkTarget),this.append("><img"),this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("></a>"));this.append("</div><div>");if(this.enabled){var O="";gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data");P=gx.dom.byId(this.id);this.grid&&this.grid.parentObject.isTransaction()&&P&&this.value===P.value?(N=this.id+"_hook",this.append("<div"),this.tagAtt("id",N),this.append(">"),this.append("</div>"),this.grid.addControlToReuse({el:P,
hookId:N})):(this.append("<input"),this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(O+="display:none;"),0!=this.width&&(O=O+"width:"+this.width+";"),this.tagAtt("style",O),this.tagAtt("value",this.value),P=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,this.enabled||(P=gx.fn.prefixROClass(P)),this.tagAtt("class",P),N&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">"))}this.append("</div></div>")}},radio:function(q,
x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha){this.possibleValues=G.v||[];this.id=K;this.title=N;this.visible=0!=P;this.enabled=0!=O;this.columns=W;this.orientation=V;this.style=Y;this.cssClass=ba;this.columnClass=fa;this.columnHeaderClass=da;this.jsScrCode=ka;this.usrOnclick=ma;this.eventName=na;this.extraAttributes=ca;this.value=ha};this._getHtml=function(){this.dataType==
gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));var G=[];G.push(this.enabled?this.cssClass:gx.fn.prefixROClass(this.cssClass));G.push("gx-radio-button");1==this.orientation&&G.push("gx-radio-button-vertical");G=G.join(" ");var K=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style+=this.visible?"":";display:none;";this.append(H("radio",{id:this.id,className:G,style:this.style,title:this.title,isDisabled:!this.enabled,extraAttributes:this.extraAttributes,
gxoch0:gx.html.controls.onJSEvent_impl("data-gxoch0",K,this.usrOnclick),values:l.map(this.possibleValues,function(N,P){return{itemId:this.id+"_"+P,itemValue:N[0],itemDesc:N[1],isSelected:gx.text.trim(this.value.toString())==gx.text.trim(N[0].toString())}}.closure(this))}))}},comboBox:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha,pa,z,E,L,J,M,Q,R,T){this.possibleValues=
G.v||[];this.id=K;this.title=Y;this.visible=0!=ba;this.enabled=0!=fa;this.rtEnabled=0!=da;this.rows=N;this.format=ka;this.width=ma;this.widthUnit=na;this.height=ca;this.heightUnit=ha;this.style=pa;this.cssClass=z;this.columnClass=E;this.columnHeaderClass=L;this.formattedValue=M;this.jsScrCode=O;this.usrOnclick=P;this.eventName=W;this.extraAttributes=J;this.value=T;this.rawValue=G};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));0<this.width&&
(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);var G=this.style+" ;overflow:hidden;",K=this.enabled||this.rtEnabled;this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(K){var N=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",this.id);
""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"data-gxoch0",N,this.usrOnclick);this.append(">");N=this.possibleValues.length;for(var P=0;P<N;P++){var O=this.possibleValues[P];this.append("<option");this.tagAtt("value",O[0]);gx.text.trim(O[0].toString())==
gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected");this.append(">");this.append(O[1]);this.append("</option>")}this.append("</select>")}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);N=gx.fn.prefixROClass(this.cssClass);G+=this.visible?"":";display:none;";this.append("<span ");this.tagAtt("id","span_"+this.id);""!=this.title&&this.tagAtt("title",this.title);""!=N&&this.tagAtt("class",N);""!=G&&this.tagAtt("style",G);gx.O.DSO&&this.tagAtt("data-gx-readonly",
"");K||this.tagAtt(gx.GxObject.GX_DATA_RAW_VALUE_ATTR,gx.json.serializeJson(this.rawValue));this.append(this.extraAttributes);this.append(">");N=this.possibleValues.length;for(P=0;P<N;P++)if(O=this.possibleValues[P],gx.text.trim(O[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(O[1]);break}this.append("</span>")}}},listBox:function(q,x,D,C,I,G){this.base(q,x,D,C,I);this.type=gx.html.controls.types.listBox;this.rows=G},checkBox:function(q,x,D,C,I,G,K,N){this.base(q,
x,D,C,I);this.type=gx.html.controls.types.checkBox;this.caption=G||"";this.checkedValue=K;this.uncheckedValue=N;this.setProperties=function(P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha){this.id=P;this.title=O;this.visible=0!=V;this.enabled=0!=Y;this.checkedValue=ba;this.caption=fa;this.style=da;this.cssClass=ka;this.columnClass=ma;this.columnHeaderClass=na;this.extraAttributes=ca;this.value=ha;this.labelCaption=W};this._getHtml=function(){var P=this.getVStruct();this.dataType==gx.types.numeric&&(this.value=
gx.text.trim(this.value.toString()),this.checkedValue=gx.text.trim(this.checkedValue.toString()));var O=this.cssClass;this.enabled||(O=gx.fn.prefixROClass(this.cssClass));this.style+=this.visible?"":";display:none;";this.append("<label");this.tagAtt("for",this.id);""!=O&&this.tagAtt("class",O);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("id",this.id);this.tagAtt("type","checkbox");this.tagAtt("name",this.id);this.value.toString()==this.checkedValue.toString()?
(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",this.uncheckedValue);""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);gx.fn.controlFiresEvent(P)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,P.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.append(this.caption);this.append("</label>")}},imageReadOnly:function(q,x,D,C,I){this.base(q,
x,D,C,I);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha,pa,z,E,L,J,M,Q,R,T,U,aa,S,Z,X,ia){this.id=G;this.accessKey=P;this.visible=0!=W;this.enabled=0!=V;this.alt=Y;this.title=ba;this.borderWidth=fa;this.autoresize=0!=da;this.width=ka;this.widthUnit=ma;this.height=na;this.heightUnit=ca;this.vSpace=ha;this.hSpace=pa;this.link=K;this.linkTarget=N;this.jsScrCode=z;this.usrOnclick=E;this.eventName=L;this.style=J;this.cssClass=M;this.columnClass=
Q;this.columnHeaderClass=R;this.align=T;this.extraAttributes=U;this.useMap=aa;this.jsDynCode=S;this.imgSrcSet=Z;this.value=this.imageUrl=ia;this.sLoading=X};this._getHtml=function(){var G=this,K=gx.TabFocusOnPrompt?gx.fn.attachedControls():[],N=this.getVStruct(),P=K.find(function(O){return O.id===N.fld&&!0===O.info.isPrompt});P&&(K=P.info.controls||[],K=K.map(function(O){return G.grid.parentObject.getValidStruct(O).fld+"_"+G.gridRow}));this.grid.addHiddenControl(this.id,this.imageUrl);""!=this.eventName&&
gx.text.endsWith(this.eventName,".'")&&(this.eventName=this.eventName.replace(".'","."+this.gridRow+"'"));P=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);""!=P&&(this.accessKey=P);this.style+=this.visible?"":";display:none;";P=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);this.enabled&&""!=this.link&&this.append(gx.html.controls.startAnchor(this.jsScrCode,P,this.usrOnclick,this.link,this.linkTarget,"gx-image-link"));this.append("<img");
this.tagAtt("src",this.value);this.imgSrcSet&&this.tagAtt("srcset",this.imgSrcSet);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);""!=this.align&&this.tagAtt("align",this.align);if(""==this.cssClass||0<this.borderWidth)this.tagAtt("border",this.borderWidth),""!=this.cssClass&&(this.style=this.style+
";border-width: "+this.borderWidth);this.tagAtt("alt",this.alt||this.title);K&&this.tagAtt("data-gx-attached-ctrl",K.join(" "));""!=this.title&&this.tagAtt("title",this.title);0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);""!=this.useMap&&this.tagAtt("usemap",this.useMap);"lazy"!==this.sLoading&&
"eager"!==this.sLoading||this.tagAtt("loading",this.sLoading);this.extraAttributes&&this.append(this.extraAttributes);N.evt&&(this.tagAtt("tabindex","0"),this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,N.fld),this.tagAtt(gx.GxObject.GX_EVENT_DATA_ATTR,""),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.usrOnclick&&this.tagAtt(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR,this.usrOnclick));this.append(">");this.enabled&&""!=this.link&&""==P&&gx.html.controls.endAnchor(this,
P,this.usrOnclick,this.link)};this._persistValue=function(){var G=this.getVStruct();G.v2v&&G.v2v(this.imageUrl)}},multimedia:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.multimedia;this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha,pa,z,E,L,J,M,Q){this.id=G;this.text=K;this.display=0!=N;this.visible=0!=P;this.enabled=0!=O;this.autoresize=0!=W;this.width=V;this.widthUnit=Y;this.height=ba;this.heightUnit=fa;this.jsScrCode=da;this.usrOnclick=ka;this.eventName=
ma;this.style=na;this.cssClass=ca;this.columnClass=ha;this.columnHeaderClass=pa;this.extraInputAttributes=z;this.jsDynCode=L;this.readOnly=0!=J;this.isBlob=gx.lang.gxBoolean(M);this.multimediaUrl=Q;this.value=gx.util.resolveUrl(Q)};this.startMultimediaUploadControl=function(G,K,N,P){return['<div id="',G,'_ct" class="',gx.html.multimediaUpload.gxCssClass,'" style="',(P||"")+(K?"":"display:none;"),'" ',gx.html.multimediaUpload.gxPreviewHTMLAtt,'="',this.value,'" ">'].join("")};this.endMultimediaUploadControl=
function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha){N=[];P=gx.html.multimediaUpload.getInputFileEl(this.id);O="checked";W="";V=G.match(/([\w]+)(_(\d{4})+)$/);V=V[1]+"_GXI"+V[2];if(ca||void 0===ca)O="",W="checked",K="";ca=['<div id="',G,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',G,'Option" type="radio" value="file" ',W,"/>",gx.getMessage("GXM_uploadfileoption"),"</label>",'<label class="option">','<input name="',G,'Option" type="radio" value="uri" ',O,"/>",gx.getMessage("GXM_uploadurioption"),
"</label>",'<input type="text" class="field ',da,'" id="',V,'" name="',V,'" value="',K,'" ',ma," />"];N.push(ca.join(""));ca=P?['<div id="',G,'_hook"></div>']:['<input type="file" class="field ',da,'" id="',G,'" name="',G,'" accept="',ha,'" ',ma,"/>"];N.push(ca.join(""));ca=["</div>","</div>"];N.push(ca.join(""));return N.join("")};this.getPreviewHtml=function(){var G=gx.fn.prefixROClass(this.cssClass||""),K=this.value,N=K?' href="'+K+'"':"",P=this.readOnly||!this.enabled,O=P?this.id:"";return(gx.text.startsWith(gx.util.getContentTypeFromExt(K),
"image")||!P&&""===K?["<a",' class="'," gx-multimedia-ro",'"',' target ="_blank"',N,">",'<img id = "Object_',this.id,'" class = "',G,'" alt = "',this.alt,'" src = "',K,'" />','<span id="',O,'" class="',this.placeHolderClass,'"></span>',"</a>"]:["<a",K?" download":"",' class="'," gx-multimedia-ro",'"',' target = "_blank"',N,">",'<span id = "',O,'" class = "',G," ",this.placeHolderClass,'" title = "',gx.getMessage("GXM_multimediaalttext"),'"></span>',"</a>"]).join("")};this._getHtml=function(){!this.readOnly&&
this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"></a>')):this.grid.addHiddenControl(this.id,this.multimediaUrl);this.append(this.getPreviewHtml());if(!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,
this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var G=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&G&&this.grid.addControlToReuse({el:G,hookId:this.id+"_hook"})}};this._persistValue=function(){var G=this.getVStruct();G.v2v&&G.v2v(gx.html.multimediaUpload.getPreviewAtt(this.id+"_ct")||this.multimediaUrl)}},
image:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.image;this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha,pa,z,E,L,J,M,Q,R,T,U,aa,S,Z,X,ia,ea,ja,qa,ra){this.id=G;this.accessKey=P;this.visible=0!=W;this.enabled=0!=V;this.alt=Y;this.title=ba;this.borderWidth=fa;this.autoresize=0!=da;this.width=ka;this.widthUnit=ma;this.height=na;this.heightUnit=
ca;this.vSpace=ha;this.hSpace=pa;this.link=K;this.linkTarget=N;this.jsScrCode=z;this.usrOnclick=E;this.eventName=L;this.style=J;this.cssClass=M;this.columnClass=Q;this.columnHeaderClass=R;this.align=T;this.extraInputAttributes=U;this.extraImageAttributes=aa;this.useMap=S;this.jsDynCode=Z;this.readOnly=0!=X;this.isBlob=gx.lang.gxBoolean(ia);this.isAttribute=gx.lang.gxBoolean(ea);this.imgSrcSet=ja;this.multimediaUrl=ra;this.value=gx.util.resolveUrl(ra);this.themeName=O;this.className=M;this.sLoading=
qa;ea&&(this.className=gx.fn.prefixROClass(M));G=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(G);this.innerImage.column=this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.widthUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,this.usrOnclick,this.eventName,
this.style,this.className,this.columnClass,this.columnHeaderClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.imgSrcSet,this.sLoading,this.value)};this.getPreviewHtml=function(){var G=this.value,K=gx.fn.prefixROClass(this.cssClass||"");return['<a target="_blank" class="gx-multimedia-ro"><img id="Object_',this.id,'" class="',K,'" alt="',this.alt,'" src="',G,'" /><span class="',this.placeHolderClass,'"></span></a>'].join("")};this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=
this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>");this.append('<a gxfocusable="1" href="" class="action clear-action"></a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,
this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var G=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&G&&this.grid.addControlToReuse({el:G,hookId:this.id+"_hook"})}}},video:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},
audio:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},file:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.audio;this.placeHolderClass="gx-download-placeholder"},textBlock:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.textBlock;this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na){this.id=G;this.visible=0!=fa;this.enabled=0!=da;this.rtEnabled=
0!=ka;this.format=ma;this.title=ba;this.link=K;this.linkTarget=N;this.jsScrCode=Y;this.usrOnclick=P;this.eventName=O;this.extraAttributes=W;this.cssClass=V;this.value=gx.text.replaceAll(na,"","'")};this._getHtml=function(){var G=this.getVStruct(),K=this.enabled||this.rtEnabled;if(this.format!=gx.html.controls.formats.RAW_HTML){if(this.format==gx.html.controls.formats.HTML){var N=(this.visible?";display:inline;":";display:none;")+this.extraAttributes;this.append("<div ")}else N=(this.visible?"":";display:none;")+
this.extraAttributes,this.append("<span ");this.tagAtt("id",this.id);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.tagAtt("data-gxformat",this.format);""!=N&&this.tagAtt("style",N);""!=this.title&&this.tagAtt("title",this.title);gx.fn.controlFiresEvent(G)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,G.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),"textblock"!==G.ctrltype&&this.tagAtt("tabindex",
"0"));this.append(">")}K?(N=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),this.append(gx.html.controls.startAnchor(this.jsScrCode,N,this.usrOnclick,this.link,this.linkTarget))):N="";this.append(gx.html.encodeCaseFormat(this.value,this.format));K&&gx.html.controls.endAnchor(this,N,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("</div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("</span>");this.format==gx.html.controls.formats.RAW_HTML&&
gx.html.processCode(this.buffer.toString(),!1)}},label:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.label;this.setProperties=function(G,K,N,P,O,W){this.referencedEl=G;this.labelCaption=K;this.labelClass=N;this.extraStyle=W;this.addAttributes=[0===P?"data-gx-sr-only":"",this.extraStyle?'style="'+this.extraStyle+'"':""].join(" ")};this._getHtml=function(){this.append(H("label",{caption:this.labelCaption,className:this.labelClass,additionalAtts:this.addAttributes,relatedElement:this.referencedEl}))}},
button:function(q,x,D,C,I,G){this.base(q,x,D,C,I);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=G||"rounded";this.setProperties=function(K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha,pa){this.reset=ha;this.id=K;this.title=W;this.accessKey=V;this.style=Y;this.cssClass=ba;this.visible=0!=fa;this.enabled=0!=da;this.buttonStyle=ka;this.jsScrCode=O;this.usrOnclick=P;this.eventName=ma+(5==this.jsScrCode?"+'"+this.gridRow+"'":"");this.extraAttributes=na;this.jsCode=N;this.jsDynCode=ca;
this.caption=pa};this._getHtml=function(){var K=this.getVStruct();this.style+=this.visible?"":";display:none;";var N="BaseRBtn R"+this.cssClass;"rounded"==this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",this.style),this.tagAtt("class",N),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");N="button";1==this.reset?N="submit":
0==this.reset&&(N="reset");this.tagAtt("type",N);N=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==N&&(N=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));""!=N&&(this.accessKey=N);this.tagAtt("name",this.id);this.tagAtt("id",this.id);this.tagAtt("value",this.caption);""!=this.title&&this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",
this.style);this.enabled||this.append(" disabled");this.append(gx.html.controls.onJsEventAttributes(this.jsScrCode,this.jsCode,this.usrOnclick));this.append(this.extraAttributes);gx.fn.controlFiresEvent(K)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,K.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");"rounded"==this.buttonStyle&&this.append("</span></span></span></span>")}},grid:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.grid;
this.containerName="";this.setProperties=function(G){this.containerName=G;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.append("></div>")}},userControl:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(G,K){this.id=this.containerName=G;this.visible=0!=K};this._getHtml=function(){this.append("<div");this.tagAtt("id",
this.id);this.tagAtt("class",gx.uc.gxCssClass);this.append("></div>");this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.userControlContainer;this.containerName=this.parentName="";this.setProperties=function(G,K){this.parentName=G;this.containerName=K;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style",
"display:none;");this.tagAtt("class","gx_usercontrol_child");this.append(">")}},webComponent:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.webComponent;this.content=this.controlName="";this.setProperties=function(G){this.controlName=G;var K=this.grid.parentObject.getComponentData(this.controlName);G=K.Prefix;var N=this.grid.gxComponentContext+"gxHTMLWrp"+G+this.gridRow,P=gx.dom.byId(N),O="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+G+this.gridRow);
if(null!=P)K=N+"_hook",this.grid.addComponentToDraw({create:!1,existingEl:K,el:N,p:this.grid.gxComponentContext+G+this.gridRow}),N=K;else if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)&&!gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents))if(P=gx.csv.lastEvtResponse.gxComponents[N],gx.lang.emptyObject(P))O="";else{O=gx.html.cleanHtmlRefs(P);var W=gx.fn.getHidden(this.grid.gxComponentContext+G+this.gridRow);W||(W=K.GXClass);gx.lang.emptyObject(W)||this.grid.addComponentToDraw({load:!0,n:W.toLowerCase(),
p:this.grid.gxComponentContext+G+this.gridRow,c:P})}this.id=N;this.content=O};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);this.append(">");this.append(this.content);this.append("</div>")}},embeddedPage:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da){this.id=G;
this.value=K;this.visible=0!=N;this.width=P;this.widthUnit=O;this.height=W;this.heightUnit=V;this.borderStyle=Y;this.align=ba;this.title=fa;this.scrollbars=da};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",this.width+this.widthUnit);""!=this.title&&
this.tagAtt("title",this.title);""!=this.id&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">");this.append("</iframe>")}},table:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma,na,ca,ha,pa){this.id=
G;this.visible=0!=K;this.cssClass=N;this.background=P;this.backColor=O;this.borderColor=W;this.align=V;this.title=Y;this.borderWidth=ba;this.cellPadding=fa;this.cellSpacing=da;this.height=ka;this.width=ma;this.rules=na;this.heightUnit=ca;this.widthUnit=ha;this.style="";this.header=pa};this._getHtml=function(){var G=this.getVStruct();this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+
"background-image: url("+this.background+");");if(""!=this.backColor){var K=parseInt(this.backColor);K=isNaN(K)?this.backColor:gx.color.html(K).Html;this.style=this.style+"background-color: "+K+";"}""!=this.borderColor&&(K=parseInt(this.borderColor),K=isNaN(K)?this.borderColor:gx.color.html(K).Html,this.style=this.style+"border-color: "+K+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+
";");""!=this.width&&(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&this.tagAtt("border",this.borderWidth);""!==this.cellSpacing&&this.tagAtt("data-cellspacing",this.cellSpacing);""!==this.cellPadding&&this.tagAtt("data-cellpadding",this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&
this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);G.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,G.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">");""!=this.header&&(this.append("<caption>"),this.append(this.header),this.append("</caption>"))}},row:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.row;this.verticalAlign=this.align=this.borderColor=this.backColor=
"";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(G,K,N){K&&(this.cssClass=this.ownCssClass?K+(this.ownCssClass?" "+this.ownCssClass:""):K);this.style=N};this._getHtml=function(){this.append("<tr");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",
this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.cell;this.className=this.rowSpan=this.colSpan=this.verticalAlign=this.align=this.borderColor=this.backColor=this.background=this.style="";this.setProperties=
function(G,K,N){this.background=G;this.cssClass=N;K&&""!=K&&0<K.indexOf("style=")&&(this.style=K.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+
";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},responsiveRow:function(q,x,D,C,I){this.base(q,x,D,C,I);this._getHtml=function(){this.append("<div");
""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("class","row "+(this.cssClass||""));""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",
this.oncontextmenu);this.append(">")}},responsiveCell:function(q,x,D,C,I){this.base(q,x,D,C,I);this._getHtml=function(){this.append("<div");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&
this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.group;this.caption="";this.setProperties=function(G,K,N,P,O,W,V,Y,ba){this.id=
G;this.caption=K;this.visible=0!=N;this.width=P;this.widthUnit=O;this.height=W;this.heightUnit=V;this.cssClass=Y;this.extraAtts=ba};this._getHtml=function(){this.append("<fieldset");this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var G="-moz-border-radius:3pt;";"0"!=this.width&&(G+="width: "+this.width+this.widthUnit+";");"0"!=this.height&&(G+="height: "+this.height+this.heightUnit+";");this.visible||(G+="display:none;");this.tagAtt("style",
G);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">");this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("</legend>")}},div:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.div;this.setProperties=function(G,K,N,P,O,W,V,Y,ba,fa,da){this.id=G;this.visible=0!=K;this.width=N;this.widthUnit=P;this.height=O;this.heightUnit=W;this.cssClass=V;this.align=Y;this.vAlign=
ba;this.extraAtts=fa;this.extraStyle=da};this._getHtml=function(){var G=this.getVStruct(),K=this.align&&"left"!=this.align.toLowerCase()&&"start"!=this.align.toLowerCase(),N=this.vAlign&&"top"!=this.vAlign.toLowerCase(),P=this.visible?"":";display:none;",O=this.align.toLowerCase(),W=this.vAlign.toLowerCase(),V=O,Y=W;"justify"===V&&(V="space-evenly");"middle"===Y?Y="center":"bottom"===Y&&(Y="end");""!=this.height&&(P=P+"height: "+this.height+this.heightUnit+";");""!=this.width&&(P=P+"width: "+this.width+
this.widthUnit+";");P+=this.extraStyle;this.append("<div");this.id&&this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);if(K||N)this.tagAtt("data-valign",""),P="display:flex;justify-content:"+V+";"+P,N&&(P=P+";flex-wrap:wrap;align-content:"+Y+";");""!=P&&this.tagAtt("style",P);""!=this.extraAtts&&this.append(this.extraAtts);K&&this.tagAtt("data-align",O);N&&this.tagAtt("data-valign",W);gx.fn.controlFiresEvent(G)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,G.fld),
this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">")}},divEnd:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.divEnd;this.setProperties=function(G,K){this.align=G;this.vAlign=K};this._getHtml=function(){this.append("</div>")}},formGroup:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.formGroup;this.setProperties=function(G){this.captionPosition=G};this._getHtml=function(){1===this.captionPosition&&
this.append('<div class="form-group gx-form-group">')}},formGroupEnd:function(q,x,D,C,I){this.base(q,x,D,C,I);this.type=gx.html.controls.types.formGroupEnd;this.setProperties=function(G){this.captionPosition=G};this._getHtml=function(){1===this.captionPosition&&this.append("</div>")}},specificDomainCtrls:function(q){if(q.domainName==gx.domains.component&&0==q.enabled){var x=q.enabled?";display:none;":"",D=q.id+"_comp_trigger",C=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\"+gx.theme+
"\\Select.png",!1);q.append("<img");q.tagAtt("src",C);q.tagAtt("id",D);q.tagAtt("class","");q.tagAtt("style",x+" margin-left:2px; cursor:pointer;");q.tagAtt("onclick","gx.popup.openUrl('"+q.value+"')");q.append("/>");x=[];x.push(q.column.gxId)}else q.dataType==gx.types.geolocation&&(x=q.enabled?"":";display:none;",D=q.id+"_geoLocMe",q.append("<img"),q.tagAtt("src",gx.ajax.getImageUrl(gx,"myLocationImage")),q.tagAtt("id",D),q.tagAtt("class","GeoLocOption"),q.tagAtt("style",x),q.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),
q.append(">"),x=[],x.push(q.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);
gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,
this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.file,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl);gx.lang.inherits(this.divEnd,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell);gx.lang.inherits(this.label,this.htmlControl);gx.lang.inherits(this.formGroup,this.htmlControl);gx.lang.inherits(this.formGroupEnd,
this.htmlControl)}}}()}}(gx.$);
gx.util.Observable=function(){var l={};return{observers:[],initialObservers:[],addObserver:function(c,d,k,a){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(c,d,k,a){a=a||{};if(!1===a.unique||0>this.indexOf(c,d,k)){var b={e:c,o:d,f:k,cfg:a};a&&a.observerKey&&(l[a.observerKey]=l[a.observerKey]||[],l[a.observerKey].push(b));this.observers.push(b);!0===a.doNotDelete&&this.initialObservers.push({e:c,o:d,f:k,cfg:a})}},deleteObserverByKey:function(c){l[c]&&(gx.$.each(l[c],
function(d,k){gx.fx.obs.deleteObserver(k.e,k.o,k.f)}),l[c]=[])},deleteObserver:function(c,d,k){new gx.thread.Mutex(this,this.deleteObserverSync,[c,d,k])},deleteObserverSync:function(c,d,k){c=this.indexOf(c,d,k);0<=c&&this.observers.splice(c,1)},removeAll:function(){this.observers=this.initialObservers.slice()},indexOf:function(c,d,k){for(var a=this.observers.length,b=0;b<a;b++){var f=this.observers[b];if(f&&f.e==c&&f.o==d&&f.f==k)return b}return-1},notify_count:0,notify:function(c,d,k){d||(d=[]);
var a=this.observers.length;this.notify_count+=1;for(var b=[],f,g=0;g<a;g++){var m=this.observers[g];if(m&&m.e==c&&!m.removed)try{m.cfg&&m.cfg.single&&(m.removed=!0),f=m.f.apply(m.o,d),m.cfg&&m.cfg.async&&b.push(f)}catch(n){gx.dbg.logEx(n,"gxfx.js","gx.obs.notify")}}gx.$.when.apply($,b).then(function(){--this.notify_count;if(0===this.notify_count)for(var n=this.observers.length-1;0<=n;n--)this.observers[n].removed&&this.observers.splice(n,1);k&&k()}.closure(this))}}};
gx.fx={GX_DATA_SUGGEST_LENGTH:"data-gx-suggest-length",GX_DATA_SUGGEST:"data-gx-suggest",delayedSuggest:function(){gx.$.each(gx.suggestControls,function(l,c){gx.fx.installSuggest(c,!0)})},installSuggest:function(l,c){if(!c&&document.readyState&&"complete"!=document.readyState)gx.suggestControls[l.id]=l;else try{var d=gx.O.getValidStructFld(l.id);if(d&&!gx.lang.emptyObject(d.gxsgprm)){var k=0<d.grid?gx.fn.currentGridRowImpl(d.grid):"main",a=d.gxsgprm;a.installed||(a.installed={});a.installed[k]||(gx.ajax.suggest(gx.O,
a[1],l.id,a[0],a[3],a[2]),a.installed[k]=!0,$(l).attr(gx.fx.GX_DATA_SUGGEST,"true"),$(l).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,$(l).val().length))}}catch(b){gx.dbg.logEx(b,"gxfx.js","installSuggest")}},updateSuggestParms:function(l){if(l)for(var c=l.length,d=0;d<c;d++){var k=gx.fn.validStruct(l[d]);k&&"function"==typeof k.c2v&&k.c2v()}},firesuggest:function(l,c,d,k){gx.evt.isComposing?gx.evt.firesuggestdelayed||(gx.evt.firesuggestdelayed=!0,gx.evt.doAfterComposing(function(){gx.fx.firesuggestimpl(l,c,
d,k)},this)):gx.fx.firesuggestimpl(l,c,d,k)},firesuggestimpl:function(l,c,d,k){gx.evt.firesuggestdelayed=!1;this.updateSuggestParms(k);if(l.textbox.value)return c.requestSuggestions(l.sdtParms,function(){c.values?l.autosuggest(c.values,d):l.hideSuggestions();delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")});if(""===l.textbox.value)gx.evt.onchange_impl(l.textbox);delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(l,c,d,k,a,b){this.cur=-1;
this.layer=this.IFrameControl=null;this.provider=c;this.textbox=l;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=l.onblur);this.ControlRefresh=d;this.typeahead=k;this.suggestParms=a||[];this.sdtParms=b||[];this.requestSuggestions=function(f,g,m){gx.fx.delayedValidation=!0;var n=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(f,g,m,n)},400)};this.hideSuggestions=function(){$(this.IFrameControl).hide();$(this.layer).hide()};
this.highlightSuggestion=function(f){for(var g=this.layer.childNodes.length,m=0;m<g;m++){var n=this.layer.childNodes[m];n==f?n.className="current":"current"==n.className&&(n.className="")}};this.init=function(){var f=function(g){g||(g=window.event);this.handleKeyUp(g)};gx.evt.attach(this.textbox,"keyup",f.closure(this));gx.evt.attach(this.textbox,"keydown",function(g){g||(g=window.event);this.handleKeyDown(g)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();this.textbox.GXonblur()}.closure(this));
gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,"input",f.closure(this));this.createDropDown()};this.nextSuggestion=function(){var f=this.layer.childNodes;0<f.length&&(this.cur=this.cur<f.length-1?this.cur+1:0,f=f[this.cur],this.highlightSuggestion(f),this.pickvalue(f.firstChild.nodeValue))};this.previousSuggestion=function(){var f=this.layer.childNodes;0<f.length&&(this.cur=0<this.cur?this.cur-1:f.length-1,f=f[this.cur],this.highlightSuggestion(f),this.pickvalue(f.firstChild.nodeValue))};
this.selectRange=function(f,g){if(this.textbox.createTextRange){var m=this.textbox.createTextRange();m.moveStart("character",f);m.moveEnd("character",g-this.textbox.value.length);m.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(f,g);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(f){if(!document.activeElement||this.textbox==document.activeElement){this.cur=-1;this.setupLayer();gx.dom.shouldPurge()&&gx.dom.purge(this.layer,!0);this.layer.innerHTML=
"";if(!this.IFrameControl){var g=!1;this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame");this.IFrameControl||(g=!0,this.IFrameControl=document.createElement("IFRAME"),this.IFrameControl.src="about:blank",this.IFrameControl.id="gxAutosuggestIFrame");$(this.IFrameControl).css({zIndex:1,display:"none",position:"absolute"});this.IFrameControl.frameBorder="0";g&&document.body.appendChild(this.IFrameControl)}for(var m=f.length,n=0;n<m;n++)g=document.createElement("div"),g.appendChild(document.createTextNode(f[n].d)),
g.style.width=this.textbox.offsetWidth,this.layer.appendChild(g);this.layer.style.left=this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;$([this.IFrameControl,this.layer]).show()}};this.typeAhead=function(f){if(this.textbox.createTextRange||
this.textbox.setSelectionRange){var g=this.textbox.value.length;this.pickvalue(f);f=f.length;g<f&&this.selectRange(g,f)}};this.pickvalue=function(f,g){for(var m=this.aSuggestions?this.aSuggestions.length:0,n=0;n<m;n++)if(this.aSuggestions[n].d==f){this.textbox.value=f;!0===g&&gx.evt.fireEvent(this.textbox,"input");break}};this.autosuggest=function(f,g){this.aSuggestions=f;f=this.aSuggestions.length;if(g&&null!=this.aSuggestions&&1==f)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&
null!=this.aSuggestions&&0<f&&(1==f&&this.aSuggestions[0].d!=this.textbox||1<f)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()};this.createDropDown=function(){var f=!1;this.layer=gx.dom.byId("gxAutosuggestElement");this.layer||(f=!0,this.layer=document.createElement("div"),this.layer.className="suggestions",this.layer.id="gxAutosuggestElement");this.setupLayer();f&&document.body.appendChild(this.layer)};this.setupLayer=function(){$(this.layer).hide();this.textbox.offsetWidth&&
$(this.layer).width(this.textbox.offsetWidth);this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=function(f){f=f||window.event;var g=gx.evt.source(f);"mousedown"==f.type?(gx.evt.stopPropagation(f),this.pickvalue(g.firstChild.nodeValue,!0),this.hideSuggestions(),window.setTimeout(function(){gx.fn.setFocus(this.textbox)}.bind(this),100)):"mouseover"==f.type?this.highlightSuggestion(g):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var f=this.textbox,g=0;null!=f&&"BODY"!=
f.tagName;)g+=f.offsetLeft,f=f.offsetParent;for(f=this.textbox;null!=f&&"BODY"!=f.tagName;)g-=f.scrollLeft,f=f.parentNode;return g};this.getTop=function(){for(var f=this.textbox,g=0;null!=f&&"BODY"!=f.tagName;)g+=f.offsetTop,f=f.offsetParent;for(f=this.textbox;null!=f&&"BODY"!=f.tagName;)g-=f.scrollTop,f=f.parentNode;return g};this.handleKeyDown=function(f){switch(f.keyCode){case 38:this.previousSuggestion();gx.evt.cancel(f,!0);break;case 40:this.nextSuggestion();gx.evt.cancel(f,!0);break;case 13:this.hideSuggestions()}};
this.handleKeyUp=function(f){f=f.keyCode;if(9==f)this.hideSuggestions();else if(8==f||46==f)this.requestSuggestions(this,this.provider,!1);else if(!(32>f||33<=f&&46>f||112<=f&&123>=f))this.requestSuggestions(this,this.provider,this.typeahead);else if(0===f){f=this.textbox.value.length;var g=parseInt($(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH)||"0",10);f!==g&&this.requestSuggestions(this,this.provider,this.typeahead)}$(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,this.textbox.value.length)};
this.init()},suggestProvider:function(l,c,d,k){this.requestSuggestions=function(a,b,f,g){var m,n=gx.ajax.gxObjectUrl(l)+"?",t="gxajaxSuggest_"+k,w=c.length;for(m=0;m<w;m++){var u=gx.fn.evalCtxScope(l,c[m]);void 0!=u&&(t+=","+encodeURIComponent(u))}t+=","+encodeURIComponent(void 0===g?gx.fn.getControlValue_impl(d):g);w=a.length;for(m=0;m<w;m++)t+=","+encodeURIComponent(gx.fn.evalCtxScope(l,a[m]));n+=gx.ajax.encryptParms(l,t);gx.http.doCall({method:"GET",url:n,handler:function(B,p){B=gx.json.evalJSON(p);
this.values=gx.fx.returnSuggestValues(this.VarRefresh,B[0]);b()},error:f,obj:this})}},returnSuggestValues:function(l,c){return c},addElement:function(l,c,d){if(!this.elementExists(l,c,d)){var k=c.id;!0===d&&(k+=c.types.sort().join(""));l.splice(0,0,c);l[k]=c}},elementExists:function(l,c,d){var k=c.id;!0===d&&(k+=c.types.sort().join(""));return l[k]?!0:!1},deleteElement:function(l,c,d){var k=c;d&&(k+=d.sort().join(""));l[k]&&delete l[k];k=l.length;for(var a=0;a<k;a++){var b=l[a];if(b.id==c)if(d){if(this.matchingTypes(d,
b.types)){l.splice(a,1);break}}else{l.splice(a,1);break}}return l},matchingTypes:function(l,c){for(var d=c.length,k=0;k<d;k++){for(var a=!1,b=l.length,f=0;f<b;f++)c[k].toLowerCase()==l[f].toLowerCase()&&(a=!0);if(!a)return!1}return!0},findControl:function(l,c,d,k){c=gx.dom.el(d);if(null!=c&&"none"!==$(c).css("display"))return c;c=gx.fn.getRONode(d,!1);if(k&&null!=c&&$(c).is(":visible"))return c;c=gx.dom.el("gxHTMLWrp"+d);if(null!=c)return c;k&&!l.id&&"A"===l.tagName&&(l=l.parentNode);d="(^"+(k?"("+
gx.fn.getRONodePrefix()+")?":"")+"v?"+d+"_(?:(?:[0-9]){4})+$)";d=new RegExp(d);return null!=l&&d.test(l.id)?l:null},isUnderMouse:function(l){var c=gx.evt.mouse.x,d=gx.evt.mouse.y,k=gx.dom.position(l),a=gx.dom.dimensions(l);return c>=k.x&&c<=k.x+a.w&&d>=k.y&&d<=k.y+a.h||"DIV"==l.tagName&&0===a.w&&0===a.h&&l.firstChild&&(k=gx.dom.position(l.firstChild),a=gx.dom.dimensions(l.firstChild),c>=k.x&&c<=k.x+a.w&&d>=k.y&&d<=k.y+a.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(l){return"dblclick"==
l?this.dblclicks:this.generics},addEventHandler:function(l,c,d,k){d=gx.lang.emptyObject(l)?d:l.CmpContext+d;l={id:c+d,cId:d,type:c,obj:l,hdl:k};c=this.getEventHandlers(c);gx.fx.addElement(c,l,!1)},deleteEventHandlers:function(l){for(var c=[this.dblclicks,this.generics],d=c.length,k=0;k<d;k++){for(var a=[],b=c[k],f=b.length,g=0;g<f;g++){var m=b[g];m.obj==l&&a.push(m)}f=a.length;for(g=0;g<f;g++)gx.fx.deleteElement(b,a[g].id)}},hasEventHandler:function(l,c){var d=gx.evt.source(c);l=this.getEventHandlers(l);
for(var k=l.length,a=!1,b=0;b<k&&!a;b++){var f=l[b];f=gx.fx.findControl(d,f.obj,f.cId,!0);null!=f&&(a=c.currentTarget===f||gx.fx.isUnderMouse(f))}return a},delayedDispatch:function(l){return gx.fx.dom.hasEventHandler("dblclick",l)},raiseEvent:function(l,c){c=gx.evt.source(c);var d=$(c),k=gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR;"dblclick"==l&&(clearTimeout(parseInt(d.attr(k),10)),d.removeAttr(k));l=this.getEventHandlers(l);d=l.length;for(k=0;k<d;k++){var a=l[k],b=gx.fx.findControl(c,a.obj,a.cId,
!0);null!=b&&gx.fx.isUnderMouse(b)&&a.hdl.call(a.obj)}},highlight:function(l,c,d){var k=gx.color.fromRGB(c[0],c[1],c[2]),a=gx.dom.getStyle(l,"backgroundColor"),b="transparent"==a||"rgba(0, 0, 0, 0)"==a;return{play:function(){l.style.backgroundColor=k.Html;setTimeout(this.end,d)},end:function(){var f=a;b&&(f="transparent");l.style.backgroundColor=f}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(l,
c,d){d&&(gx.evt.setEventRow(l,this.dragCtrl),this.obj=d.call(l,this.dragCtrl),this.obj.gxDragTypes=c)},drop:function(l,c,d){d&&d.call(c,l,this.dragCtrl,this.obj)},noDrop:function(){var l=this.noDropCtrl;null!=l&&l.gxDndClassName&&(l.className=l.gxDndClassName+"NoAcceptDrag")},out:function(){var l=this.dropCtrl;l&&l.gxClassName&&(l.className=l.gxClassName);this.dropCtrl=null;l=this.noDropCtrl;null!=l&&l.gxClassName&&(l.className=l.gxClassName);this.noDropCtrl=null},over:function(){var l=this.dropCtrl;
null!=l&&l.gxDndClassName&&(l.className=l.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);this.clonCtrl=null},restoreControl:function(){var l=this.clonCtrl;null!=l&&(null==this.toHdl&&(l.dropLeft=parseFloat(l.style.left||"0"),l.dropTop=parseFloat(l.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored()?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(l=this.nextCoords(),
this.moveDragControl(l.X,l.Y)))},nextCoords:function(){var l=this.clonCtrl,c=parseFloat(l.style.left||"0"),d=parseFloat(l.style.top||"0");c>=d?(--c,d=l.dropTop-(l.dropTop-l.originalTop)*(l.dropLeft-c)/(l.dropLeft-l.originalLeft)):(--d,c=l.dropLeft-(l.dropTop-d)*(l.dropLeft-l.originalLeft)/(l.dropTop-l.originalTop));c<=l.originalLeft&&(c=l.originalLeft);d<=l.originalTop&&(d=l.originalTop);return{X:c,Y:d}},moveControl:function(l){if(null==this.clonCtrl){var c=document.createElement("DIV");c.style.position=
"absolute";l.gxDndClassName&&(c.className=l.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(c,!0);c.innerHTML=this.dragInfo();gx.fn.setOpacity(50,c);document.body.appendChild(c);c.originalLeft=gx.evt.mouse.x-10;c.originalTop=gx.evt.mouse.y-10;c.diffLeft=10;c.diffTop=10;this.clonCtrl=c}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var l=this.clonCtrl;if(null==l)return!0;var c=parseFloat(l.style.left||"0"),d=parseFloat(l.style.top||"0")-l.originalTop;
return 0>=c-l.originalLeft&&0>=d?!0:!1},moveDragControl:function(l,c){try{var d=this.clonCtrl;null!=d&&(d.style.left=l-d.diffLeft+"px",d.style.top=c-d.diffTop+"px")}catch(k){this.deleteClonControl()}},dragInfo:function(){if(null!=this.obj){var l="",c="",d;for(d in this.obj){if("gxDragTypes"!=d){var k=[l];if("function"==typeof this.obj[d])continue;c+=d+": "+this.obj[d]+"</br>";l=k[0]}if(5<=l){c+="...";break}l++}return c}return""},deleteHandlers:function(l){gx.thread.Mutex(this,this.deleteHandlersSync,
[l])},deleteHandlersSync:function(l){var c=[],d,k=this.sources.length;for(d=0;d<k;d++){var a=this.sources[d];a.obj!=l&&c.push(a)}this.sources=c;c=[];k=this.targets.length;for(d=0;d<k;d++)a=this.targets[d],a.obj!=l&&c.push(a);this.targets=c},addSource:function(l,c,d,k,a){gx.thread.Mutex(this,this.addSourceSync,[l,c,d,k,a])},addSourceSync:function(l,c,d,k,a){c=gx.lang.emptyObject(l)?c:l.CmpContext+c;gx.fx.addElement(this.sources,{id:c,cssClass:d,types:k,obj:l,hdl:a},!1)},addTarget:function(l,c,d,k,
a){gx.thread.Mutex(this,this.addTargetSync,[l,c,d,k,a])},addTargetSync:function(l,c,d,k,a){c=gx.lang.emptyObject(l)?c:l.CmpContext+c;gx.fx.addElement(this.targets,{id:c,cssClass:d,types:k,obj:l,hdl:a},!0)},deleteSource:function(l){gx.thread.Mutex(this,this.deleteSourceSync,[l])},deleteSourceSync:function(l){this.sources=gx.fx.deleteElement(this.sources,l)},getSource:function(l){l=gx.evt.source(l);for(var c=this.sources.length,d=0;d<c;d++){var k=this.sources[d],a=this.dragCtrl=gx.fx.findControl(l,
k.obj,k.id);if(null!=a&&(a.gxClassName=a.className,a.gxDndClassName=k.cssClass,gx.fx.isUnderMouse(a)))return k}return this.obj=this.dragCtrl=null},getTarget:function(l,c){l=gx.evt.source(l);for(var d=this.targets.length,k=0;k<d;k++){var a=this.targets[k],b=gx.fx.findControl(l,a.obj,a.id);if(null!=b&&(b.gxClassName=b.className,b.gxDndClassName=a.cssClass,gx.fx.isUnderMouse(b))){if(gx.fx.matchingTypes(c,a.types))return this.noDropCtrl=null,this.dropCtrl=b,a;this.out();this.noDropCtrl=b;this.noDrop();
return null}}this.out();return null}},notifications:{queuedEvents:[],initialize:function(l){this.serialRunner=gx.evt.serialRunner();l.notifications||(l.notifications=[],gx.fx.obs.addObserver("gx.ws.onMessage.notifications",l,gx.fx.notifications.notify.closure(l),{single:!1,doNotDelete:l.IsMasterPage}),gx.fx.obs.addObserver("gx.onafterevent",l,gx.fx.notifications.fireQueuedEvents.closure(l),{single:!1,doNotDelete:l.IsMasterPage}));if(!this.webSocket){l.fullAjax||gx.dbg.write('Warning: WebNotifications are not supported with "Web User Experience": "Previous versions". You must use Smooth.');
l=gx.fn.getHidden("GX_WEBSOCKET_PORT");var c=gx.basePath&&0<gx.basePath.length?"/":"";this.webSocket=new gx.webSocket({port:l,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),wsProtocol:"https:"===location.protocol?"wss://":"ws://",host:l?location.hostname+":"+l+"/":location.host+"/",resourceUrl:c+"gxwebsocket?",basePath:gx.basePath,namespace:"notifications"})}},deinit:function(){gx.fx.notifications.queuedEvents=[]},addTracker:function(l,c,d,k,a,b){gx.fx.notifications.initialize(l);l.notifications[c||
""]={gxO:l,handler:a,eventName:d,type:k,noWait:b}},notify:function(l){l=gx.json.evalJSON(l);var c=this.notifications[l.GroupName||""];c&&(gx.fx.notifications.queuedEvents.push({notifObj:c,data:l,executed:!1}),(c.noWait||gx.isInputEnabled())&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){var l=gx.fx.notifications.queuedEvents.slice();gx.fx.notifications.queuedEvents=[];var c=gx.fx.notifications.serialRunner;l.forEach(function(d){if(!d.executed){var k=d.notifObj.gxO;d.executed=
!0;if(gx.lang.emptyObject(d.data.Object)||d.data.Object.toUpperCase()==k.ServerClass.toUpperCase())task=function(){var a=d.notifObj.eventName;if(a){var b=k.isServerEvent(a),f={};f[d.notifObj.type[0][0]]=d.data;k.setEventParameters(d.notifObj.type,f);gx.evt.dispatcher.dispatch(k.getServerEventName(a),k,0,0,b,void 0,void 0,!0).done(function(){c.signalEndTask()})}else d.notifObj.handler(d.data),c.signalEndTask()},c.addTask(task)}})}},ctx:{setters:[],trackers:[],deleteHandlers:function(l){gx.thread.Mutex(this,
this.deleteHandlersSync,[l])},deleteHandlersSync:function(l){var c,d=[],k=this.setters.length;for(c=0;c<k;c++){var a=this.setters[c];a.obj!=l&&d.push(a)}this.setters=d;d=[];k=this.trackers.length;for(c=0;c<k;c++)a=this.trackers[c],a.obj!=l&&d.push(a);this.trackers=d},addSetter:function(l,c,d,k,a){gx.thread.Mutex(this,this.addSetterSync,[l,c,d,k,a])},addSetterSync:function(l,c,d,k,a){c=gx.lang.emptyObject(l)?c:l.CmpContext+c;gx.fx.addElement(this.setters,{id:c,cssClass:d,types:k,obj:l,hdl:a},!1)},
addTracker:function(l,c,d){gx.thread.Mutex(this,this.addTrackerSync,[l,c,d])},addTrackerSync:function(l,c,d){gx.fx.addElement(this.trackers,{id:l.CmpContext+l.IsMasterPage.toString(),cssClass:"",types:c,obj:l,hdl:d},!0)},deleteSetter:function(l){gx.thread.Mutex(this,this.deleteSetterSync,[l])},deleteSetterSync:function(l){this.setters=gx.fx.deleteElement(this.setters,l)},notify:function(l,c,d){gx.thread.Mutex(this,this.notifySync,[l,c,d])},notifySync:function(l,c,d){if(l&&l.forcedFocus)l.forcedFocus=
!1;else{var k,a=gx.lang.emptyObject,b=function(t,w){var u=gx.O;gx.setGxO(t);w();gx.setGxO(u)},f=null;if(a(c)||a(d)){var g=this.setters.length;for(k=0;k<g;k++){var m=this.setters[k];if(a(l)){if(f=gx.fx.findControl(null,m.obj,m.id),null!=f&&a(f.onfocus)&&gx.fx.isUnderMouse(f)){b.apply(this,[m.obj,function(){gx.evt.setEventRow(m.obj,f);c=m.types;d=m.hdl.call(m.obj,f)}]);break}}else if(l.id==m.id){b.apply(this,[m.obj,function(){f=l;gx.evt.setEventRow(m.obj,f);c=m.types;d=m.hdl.call(m.obj,f)}]);break}}}if(!a(c)&&
(d||""===d))for(a=this.trackers.length,k=0;k<a;k++){var n=this.trackers[k];gx.fx.matchingTypes(c,n.types)&&b.apply(this,[n.obj,function(){n.hdl.call(n.obj,null,f,d)}])}}}}};
gx.date=function(){var l=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\.?([0-9]{1,3})?\s?(AM|PM)?/i,c=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?[\.:]?([0-9]{1,3})?\s?(AM|PM)?/i,d=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,k=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00(\.000)?)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,a=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(b){return this.getDay()==
b.getDay()&&this.getMonth()==b.getMonth()&&this.getFullYear()==b.getFullYear()?!0:!1},toJson:function(){var b=new gx.date.gxdate("");b.assign_date(this);return b.json()},isoString:function(b){return b.toISOString()},jsonNullFormat:{Default:0,YearOne:1},gxdate:function(b,f){this.json=function(){var g=this.TimeFmt;this.TimeFmt=24;var m=this.HasTimePart,n=this.HasDatePart;this.HasDatePart=this.HasTimePart=!0;var t=this.getStringWithFmt("Y4MD")+" "+(m?this.getTimeString(!0,!0,!0,0<this.Value.getMilliseconds()):
"00:00:00");this.TimeFmt=g;this.HasTimePart=m;this.HasDatePart=n;return t};this.mapCTODFormatToPattern=function(g){return"ANSI"==g?"Y4MD":g};this.emptyDateString=function(g){return-1==g.indexOf("Y4")?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==g?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(g){g=this.mapCTODFormatToPattern(g);if(0===this.Value-a)return this.emptyDateString(g);var m=g,n,t=this.FormatPos(g);if(this.JsonNullFormat===gx.date.jsonNullFormat.YearOne){var w=
n="01";var u="0001"}else n=gx.text.padl(this.Value.getDate().toString(),2,"0"),w=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),u=gx.text.padl(this.Value.getFullYear().toString(),4,"0");m=m.replace("D",n+(3>t.DPos?"/":""));m=m.replace("M",w+(3>t.MPos?"/":""));-1==g.indexOf("Y4")?(u=u.slice(2,4),m=m.replace("Y",u+(3>t.YPos?"/":""))):m=m.replace("Y4",u+(3>t.YPos?"/":""));return m};this.getString=function(g){gx.lang.emptyObject(g)&&(g=gx.dateFormat);return this.getStringWithFmt(g)};this.toISOString=
function(){return this.Value.toISOString()};this.toString=function(){var g=this.HasTimePart?" "+this.getTimeString(!0,!0):"";return this.getString()+g};this.gxdtoc=function(g,m){return this.getStringWithFmt(this.mapCTODFormatToPattern(g)).replace("/",m)};this.getUrlVal=function(){if(gx.date.isNullDate(this))return"";if(this.HasDatePart){var g=gx.text.padl(this.Value.getDate().toString(),2,"0");var m=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0");var n=gx.text.padl(this.Value.getFullYear().toString(),
4,"0")}else m=g="01",n="0001";var t=this.HasTimePart?gx.text.padl(this.Value.getHours().toString(),2,"0"):"",w=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",u=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",B=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";return n+m+g+t+w+u+B};this.getTimeString=function(g,m,n,t){if(gx.date.isNullDate(this)&&gx.blankWhenEmpty){var w="";n&&(w+="  ");g&&(w+="   ");m&&(w+="   ");
t&&(w+="    ");return w}w="";var u=this.Value.getHours();n=n||!0;12==this.TimeFmt&&12<=u?(12<u&&(u-=12),w=" PM"):12==this.TimeFmt&&(w=" AM");var B=this.HasTimePart?gx.text.padl(u.toString(),2,"0"):"",p=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",v=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",A=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";0===u&&""!==w&&(B="12");u="";n&&(u=B);g&&(u=u+":"+p);m&&(u=u+":"+
v);t&&(u=u+"."+A);return u+w};this.FormatPos=function(g){if("ANSI"==g){var m=1;var n=2;g=3}else{var t=g.indexOf("Y4");m=-1==t?g.indexOf("Y")+1:t+1;n=g.indexOf("M");0!==t&&n++;g=g.indexOf("D");0!==t&&g++}return{YPos:m,MPos:n,DPos:g}};this.assign_date=function(g){g instanceof gx.date.gxdate?(this.Value=g.Value,this.HasTimePart=g.HasTimePart,this.HasDatePart=g.HasDatePart):this.Value=void 0===g?a:g};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==
gx.NULL_TIMEZONEOFFSET)return this;var g=new gx.date.gxdate("");g.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());g.HasTimePart=this.HasTimePart;g.HasDatePart=this.HasDatePart;return g};this.fromUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var g=new gx.date.gxdate("");g.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());g.HasTimePart=this.HasTimePart;g.HasDatePart=
this.HasDatePart;return g};this.assign_string=function(g,m,n,t){var w=l,u=w.exec(g),B=0;if(null!=u){var p=g.indexOf(u[0]);0<p&&"."==gx.text.substring(g,p,1)&&(u=null)}if(null==u)-1!=g.indexOf("  /  /  ")&&(n=!0);else{p=u.length;for(var v=1;v<p;v++)gx.lang.emptyObject(u[v])||B++}var A=this.FormatPos(m),y=v=p=m=0,F=0,H=0,r=0;try{this.HasDatePart=!0;if(6==A.DPos+A.MPos+A.YPos&&null!=u&&3<=B){null!=u[A.YPos]&&(m=parseInt(u[A.YPos],10));if(isNaN(m))throw"InvalidDate";m<this.FYearOfCentury?m+=2E3:100>m?
m+=1900:1E3>m&&(m+=1E3);null!=u[A.MPos]&&(p=parseInt(u[A.MPos],10)-1);if(isNaN(p)||0>p||11<p)throw"InvalidDate";null!=u[A.DPos]&&(v=parseInt(u[A.DPos],10));if(isNaN(v)||0>v||v>gx.date.maxDays(p,m))throw"InvalidDate";}else this.HasDatePart=!1;this.HasTimePart=!1;A=0;null==u?(w=c,u=w.exec(g),null!=u&&(A=1,this.HasTimePart=!0)):3<B&&(A=4,this.HasTimePart=!0);if(this.HasTimePart&&!n){null!=u[A]&&(y=parseInt(u[A],10));if(gx.lang.emptyObject(u[A])||isNaN(y))throw this.HasTimePart=!1,"InvalidHour";null!=
u[A+1]&&(F=parseInt(u[A+1],10));isNaN(F)&&(F=0);null!=u[A+2]&&(H=parseInt(u[A+2],10));isNaN(H)&&(H=0);null!=u[A+3]&&(r=parseInt(u[A+3],10));isNaN(r)&&(r=0);if(!this.validTime(-1!=g.toLowerCase().indexOf("m"),y,F,H,r))throw"InvalidHour";(-1!=g.indexOf("PM")||-1!=g.indexOf("pm"))&&12>y&&(y+=12);-1==g.indexOf("AM")&&-1==g.indexOf("am")||12!=y||(y=0)}}catch(q){if(t)throw q;"InvalidDate"==q&&(r=H=F=y=v=p=m=0);"InvalidHour"==q&&(r=H=F=y=0)}this.Value=new Date(m,p,v,y,F,H,r);0<m+p+v+y+F+H+r&&(!this.HasTimePart||
n)&&this.Value.getDate()!=v&&(this.Value=new Date(Date.UTC(m,p,v,y+12,F,H,r)))};this.validTime=function(g,m,n,t,w){return g&&12<m||!g&&(24<m||24==m&&0<n+t)?!1:59>=n||59>=t||999>=w};this.compare=function(g){return"string"==typeof g?this.compare_string(g):this.compare_date(g)};this.compare_string=function(g){g=new gx.date.gxdate(g);return this.compare_date(g.Value)};this.compare_date=function(g){if(!g)return null;g=g instanceof gx.date.gxdate?g.Value:g;return this.HasTimePart?this.Value-g:this.Value.getFullYear()>
g.getFullYear()?1:this.Value.getFullYear()<g.getFullYear()?-1:this.Value.getMonth()>g.getMonth()?1:this.Value.getMonth()<g.getMonth()?-1:this.Value.getDate()>g.getDate()?1:this.Value.getDate()<g.getDate()?-1:0};this.JsonNullFormat=gx.date.jsonNullFormat.Default;this.TimeFmt=gx.timeFormat||12;this.SFmt=f||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof b?this.assign_string(b,this.SFmt):this.assign_date(b)},isANSIDateTime:function(b){return"string"==typeof b&&l.test(b)?!0:
!1},isANSIDate:function(b){return"string"==typeof b&&d.test(b)?!0:!1},isLeapYear:function(b){return 0===b%400?!0:0===b%100?!1:0===b%4?!0:!1},dateObject:function(b){return b instanceof this.gxdate?b.Value:"string"==typeof b?(new this.gxdate(b,this.isANSIDate(b)?"Y4MD":void 0)).Value:b instanceof Date?b:new Date},gxdateObject:function(b){if(b instanceof this.gxdate)return b;if("string"==typeof b)return new this.gxdate(b,this.isANSIDate(b)?"Y4MD":void 0);if(b instanceof Date){var f=new this.gxdate("");
f.assign_date(b);return f}return new this.gxdate("")},clonedDate:function(b,f){var g=new this.gxdate("");g.assign_date(f);b instanceof this.gxdate&&(g.SFmt=b.SFmt,g.HasTimePart=b.HasTimePart,g.HasDatePart=b.HasDatePart);return g},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var b=this.today();b.HasTimePart=!0;b.HasDatePart=!0;return b},today:function(){var b=new this.gxdate("");b.assign_date(new Date);return b},ctot:function(b,f){return new this.gxdate(b,f)},ctod:function(b,
f){b=new this.gxdate(b,f);b.Value.setHours(0,0,0,0);return b},ymdtod:function(b,f,g){b=new this.gxdate(b+"/"+f+"/"+g,"ANSI");b.Value.setHours(0,0,0,0);return b},ymdhmstot:function(b,f,g,m,n,t){return new this.gxdate(b+"/"+f+"/"+g+" "+m+":"+n+":"+t,"ANSI")},hour:function(b){return(new this.gxdate(b)).Value.getHours()},minute:function(b){return(new this.gxdate(b)).Value.getMinutes()},second:function(b){return(new this.gxdate(b)).Value.getSeconds()},millisec:function(b){return 864E5*b},day:function(b){return(new this.gxdate(b)).Value.getDate()},
month:function(b){return(new this.gxdate(b)).Value.getMonth()+1},year:function(b){return(new this.gxdate(b)).Value.getFullYear()},addDays:function(b,f){return this.addMill(b,this.dayToMillisec(f))},addSec:function(b,f){return this.addMill(b,this.secToMillisec(f))},addMill:function(b,f){var g=this.dateObject(b).clone(),m=new this.gxdate;m.assign_date(g);var n=g.getMilliseconds();g.setMilliseconds(n+f);return m.getString(this.isANSIDate(b)?"Y4MD":-1==gx.dateFormat.indexOf("Y4")?gx.dateFormat.replace("Y",
"Y4"):gx.dateFormat)},secDiff:function(b,f){return this.millisecToSec(this.milliDiff(b,f))},daysDiff:function(b,f){return this.millisecToDay(this.milliDiff(b,f))},milliDiff:function(b,f){b=this.gxdateObject(b);f=this.gxdateObject(f);b=b.Value.valueOf();f=f.Value.valueOf();return b-f},dayToMillisec:function(b){return 864E5*b},secToMillisec:function(b){return 1E3*b},millisecToDay:function(b){return b/24/60/60/1E3},millisecToSec:function(b){return b/1E3},dateParm:function(b){return"string"==typeof b?
new this.gxdate(b):b},urlDate:function(b,f){b="undefined"!=typeof b.value?b.value:gx.dom.spanValue(b)||b;f=new this.gxdate(b,f);return this.isNullDate(f)?"":f.Value.getFullYear().toString()+gx.text.padl((f.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0")},urlDateTime:function(b,f){b="undefined"!=typeof b.value?b.value:gx.dom.spanValue(b)||b;f=b instanceof this.gxdate?b:new this.gxdate(b,f);return f.HasDatePart?this.isNullDate(f)?"":f.Value.getFullYear().toString()+
gx.text.padl((f.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0")+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),2,"0")+gx.text.padl(f.Value.getSeconds().toString(),2,"0")+(0===f.Value.getMilliseconds()?"":gx.text.padl(f.Value.getMilliseconds().toString(),3,"0")):"00010101"+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),2,"0")+gx.text.padl(f.Value.getSeconds().toString(),
2,"0")},isNullDate:function(b){b instanceof this.gxdate&&(b=b.Value);var f=this.nullDate();return f.getFullYear()!=b.getFullYear()||f.getMonth()!=b.getMonth()||f.getDate()!=b.getDate()||f.getHours()!=b.getHours()||f.getMinutes()!=b.getMinutes()||f.getSeconds()!=b.getSeconds()||f.getMilliseconds()!=b.getMilliseconds()?!1:!0},dtoc:function(b,f,g){return(new this.gxdate(b,this.isANSIDate(b)?"Y4MD":void 0)).gxdtoc(f,g)},dttoc:function(b,f,g){b=new this.gxdate(b,this.isANSIDateTime(b)?"Y4MD":void 0);var m=
gx.dateFormat,n="";0<f&&(8<f&&-1==m.indexOf("Y4")&&(m=m.replace("Y","Y4")),n=b.getStringWithFmt(m)+" ");return 0<g?n+b.getTimeString(3<g,8<=g,1<g,12<=g):n},nulldate_toc:function(b,f){var g=new this.gxdate("");g.HasTimePart=!0;g.HasDatePart=!0;var m=gx.dateFormat,n="";0<b&&(8<b&&-1==m.indexOf("Y4")&&(m=m.replace("Y","Y4")),n=g.getStringWithFmt(m)+" ");return 0<f&&!gx.blankWhenEmpty?n+g.getTimeString(3<f,8<=f,1<f,12<=f):n},addyr:function(b,f){return this.addmth(b,12*f)},addmth:function(b,f){var g=this.gxdateObject(b);
b=new Date(this.dateObject(b).getTime());var m=b.getDate();b.setDate(1);b.setMonth(b.getMonth()+1*f);b.setDate(Math.min(m,this.maxDays(b.getMonth(),b.getFullYear())));return this.clonedDate(g,b)},dtadd:function(b,f){var g=this.gxdateObject(b);b=new Date(this.dateObject(b).getTime());var m=b.getMilliseconds();b.setMilliseconds(m+1E3*f);return this.clonedDate(g,b)},dtdiff:function(b,f){b=this.dateObject(b);f=this.dateObject(f);return(b-f)/1E3},maxDays:function(b,f){return[31,this.isLeapYear(f)?29:28,
31,30,31,30,31,31,30,31,30,31][b]},eom:function(b){var f=this.gxdateObject(b);b=this.dateObject(b);b=new Date(b.getTime());var g=this.maxDays(b.getMonth(),b.getFullYear());b.setDate(g);return this.clonedDate(f,b)},dow:function(b){b=this.dateObject(b);return b.equalsNoTime(this.nullDate())?0:b.getDay()+1},age:function(b,f){b=this.dateObject(b);f=this.dateObject(f);var g=this.nullDate();if(b.equalsNoTime(g)||f.equalsNoTime(g)||b.equalsNoTime(f))return 0;if(f>=b){g=36E5*f.getUTCHours()+6E4*f.getUTCMinutes()+
1E3*f.getUTCSeconds()-(36E5*b.getUTCHours()+6E4*b.getUTCMinutes()+1E3*b.getUTCSeconds());if(f.getUTCDate()>b.getUTCDate()||f.getUTCDate()==b.getUTCDate()&&0<=g)g=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds()));else for(g=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth()-1,b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds())),f=f.getUTCMonth()-1,-1==f&&(f=11);g.getUTCMonth()!=f;)g.setUTCDate(g.getUTCDate()-
1);return b=g.getUTCMonth()>=b.getUTCMonth()?g.getUTCFullYear()-b.getUTCFullYear():g.getUTCFullYear()-1-b.getUTCFullYear()}return 0},valid_date:function(b,f,g,m,n,t,w,u){var B=w||!1,p=!1;t=b.value;w=g;var v="^[ ]*(",A=0<f?"GXM_invaliddate":"GXM_invalidtime";var y=gx.num.replaceFullWidthNumerals(t);y=y.split("\n")[0];g="YMD"==g?1:0;n=12==n?1:0;if(k.test(y))p=!0,t=y="";else if(0<f&&5>=y.length){var F=(new Date).getFullYear().toString().substring(10===f?0:2);y=1===g?F+"/"+y:y+"/"+F}v=0<f?8==f?0===g?
v+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":v+"([0-9]{2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":0===g?B?v+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":v+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":B?v+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":v+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":v+"( )?( )?( )?";0<m&&(v+="(",0<f&&(v+="[ ]*"),v+="([0-9]{1,2})",v=2<m?v+"(:?([0-9]{1,2}))?":v+"(( )?)?",v=5<m?v+"(:?([0-9]{1,2}))?":v+"(( )?)?",v=8<m?v+"(\\.?([0-9]{1,3}))?":v+"(( )?)?",
v=(1==n?v+"[ ]*(a|am|p|pm)?":v+"(( )?)?")+")?");g=new RegExp(v+")?[ ]*$","i");if(g.test(y)){B=y.match(g);0<f?(g="/",0<y.indexOf("-")&&(g="-"),B[2]?g=B[2]+g+B[3]+g+B[4]:(g=1==u?"        ":"  "+g+"  "+g+"  ",10==f&&(g+="  "))):g="";0<m&&(0<f&&(g+=" "),1!=u||B[6]||B[8]||B[10]||B[12]?(B[6]?g+=B[6]:p?(u=y.match(k),g=u[4]?g+u[4]:g+(1==n?"12":"00")):g+=1==n?"12":"00",2<m&&(g=B[8]?g+":"+B[8]:g+":00"),5<m&&(g=B[10]?g+":"+B[10]:g+":00"),8<m&&(g=B[12]?g+"."+B[12]:g+".000"),1==n&&(g="p"==(B[13]?B[13].substr(0,
1):"a").toLowerCase()?g+" PM":g+" AM")):g+="        ");n=new this.gxdate("",w);try{n.assign_string(g,w,0>=m,!0),""!==gx.text.trim(g)&&(g=this.formatDateTime(m,f,w,n))}catch(H){return gx.fn.alert(b,gx.getMessage(A)),gx.csv.setFormatError(b),!1}if(g!=t){b.value=g;if(-1!=navigator.userAgent.indexOf("Firefox/2"))b.onchange();(f=gx.O.getValidStructFld(b))&&gx.O.refreshDependantGrids(f)}gx.csv.setFormatError(b,!1);return!0}gx.fn.alert(b,gx.getMessage(A));gx.csv.setFormatError(b);return!1},formatDateTime:function(b,
f,g,m){var n="";0<b&&m.HasTimePart&&(n=m.getTimeString(4<=b,8<=b,void 0,12<=b));b=g;8<f&&-1==b.indexOf("Y4")&&(b=b.replace("Y","Y4"));return 0<f?m.getStringWithFmt(b)+(m.HasTimePart?" "+n:""):m.HasTimePart?n:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(l){this.capacity=l||10;this.buffer=[];this.append=function(c){this.buffer.push(c);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var l=arguments[0],c=arguments.length,d=1;d<c;d++)l=l.replace("%"+d,gx.text.rtrim(arguments[d].toString()));return l},formatString:function(l,c,d,k){if(d)return gx.text.padl("",
c,"*");if(!gx.lang.emptyObject(k)&&this.startsWith(k,"@")&&0<k.indexOf("!")){c="";d=this.padr("",l?l.length:0,"!");k=this.replaceAll(d,"!"," ");if(l)for(var a=0,b=0,f;a<k.length&&b<l.length;)f=l[b],this.isSeparator(d[a])?(f==d[a]?(b++,c+=f):c+=k[a],a++):(c+=this.getCaret(d,f,a,c),a++,b++);else c=k;return gx.text.rtrim(c)}return l},getCaret:function(l,c,d,k){switch(l[d]){case "9":if(!isNaN(c))return c;break;case "X":return c;case "A":case "M":case "!":return c.toUpperCase();case "Z":if("1"<=c&&"9">=
c)return c;if("0"==c){l=!0;for(c=0;c<d;c++)if(" "!=k[c]){l=!1;break}if(!l)return"0"}}return" "},isSeparator:function(l){return"9"!=l&&"X"!=l&&"!"!=l&&"Z"!=l&&"A"!=l&&"M"!=l},replaceAll:function(l,c,d){return-1!=l.toString().indexOf(c)?String(l).split(c).join(d):l},charReplace:function(l,c,d){for(var k="",a=l.length,b=0;b<a;b++){for(var f=!1,g=c.length,m=0;m<g;m++)if(l.charAt(b)==c[m]&&m<d.length){k+=d[m];f=!0;break}!1===f&&(k+=l.charAt(b))}return k},length:function(l){return l.length},upper:function(l){return l.toUpperCase()},
lower:function(l){return l.toLowerCase()},padr:function(l,c,d){var k=c-l.length;if(1>k)return l.substring(0,c);for(c=0;c<k;c++)l+=d;return l},padl:function(l,c,d){var k=c-l.length;if(1>k)return l.substring(0,c);c="";for(var a=0;a<k;a++)c+=d;return c+l},ltrimstr:function(l,c,d){return this.ltrim(gx.num.str(l,c,d))},ltrim:function(l){return l.toString().replace(/^ */,"")},rtrim:function(l){return l.toString().replace(/ *$/,"")},trim:function(l){return this.rtrim(this.ltrim(l))},chr:function(l){return String.fromCharCode(l)},
like:function(l,c){if(null===c)return!1;c=c.replace(/([\.\\\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:\-])/g,"\\$1");return(new RegExp(c.replace(/%/g,".*").replace(/_/g,"."))).test(l)},compare:function(l,c){return this.rtrim(l).localeCompare(this.rtrim(c))},concat:function(l,c,d){return this.rtrim(l)+d+c},space:function(l){for(var c="",d=0;d<l;d++)c+=" ";return c},substring:function(l,c,d){return 0>d?l.toString().substring(c-1):l.toString().substring(c-1,c-1+d)},tostring:function(l){return l.toString()},toformattedstring:function(l){return l.toString().replace(".",
gx.decimalPoint)},newline:function(){return"\n"},escapeMapping:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(l,c){if(l=gx.text.escapeMapping[c])return l;l=c.charCodeAt();return"\\u00"+Math.floor(l/16).toString(16)+(l%16).toString(16)},escapeString:function(l){return this.escapeRegex.start.test(l)?'"'+l.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+l+'"'},indexOf:function(l,c,d){if(d>
l.length)return 0;0>=d&&(d=1);return l.indexOf(c,d-1)+1},lastIndexOf:function(l,c,d){if(d>l.length)return 0;0>=d&&(d=l.length);return l.lastIndexOf(c,d-1)+1},endsWith:function(l,c){return-1!==l.indexOf(c,l.length-c.length)},startsWith:function(l,c){return 1==this.indexOf(l,c)},contains:function(l,c){return 0<this.indexOf(l,c)},charAt:function(l,c){return l.charAt(c-1)}};
gx.num=function(){var l=/[\uFF10-\uFF19]|[\uFF0C-\uFF0E]|\u2015|\u30FC|\uFF0F/g,c=function(d,k,a,b){var f=gx.lang.instanceOf,g="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,m=gx.thousandSeparator,n=gx.decimalPoint;"string"==typeof a&&(a=gx.num.parseFloat(a,m,n));"string"==typeof b&&(b=gx.num.parseFloat(b,m,n));return f(a,g)&&f(b,Number)?a[d](new g(b.toString())).toString():f(a,Number)&&f(b,g)?(new g(a.toString()))[d](b).toString():f(a,Number)&&f(b,Number)||"undefined"==typeof gx.num.dec?
k(a,b):a[d](b)};return{str:function(d,k,a){if("string"===typeof d)return d;"undefined"==typeof k&&(k=10);if("undefined"==typeof a||k-1<=a)a=0;d=gx.num.toFixed(d,a);return d.length<=k?gx.text.padl(d,k," "):gx.text.padr("",k,"*")},compare:function(d,k){if("number"===typeof d&&"number"===typeof k)return d>k?1:d===k?0:-1;"number"===typeof d&&(d=new gx.num.dec.bigDecimal(d.toString()));"number"===typeof k&&(k=new gx.num.dec.bigDecimal(k.toString()));return gx.lang.instanceOf(d,gx.num.dec.bigDecimal)&&
gx.lang.instanceOf(k,gx.num.dec.bigDecimal)?d.compareTo(k):d-k},maxNumericPrecision:function(){return 15},extractValue:function(d,k,a){a=gx.num.replaceFullWidthNumerals(a);if(gx.lang.instanceOf(a,Number)||this.overflowNumber(a))return a;var b="";a=void 0===a?"":a;var f=function(t){return"("===t.charAt(0)&&")"===t.charAt(t.length-1)};if(d){var g=f(d);f=f(a);g&&(d=d.substring(1,d.length-1),f&&(a=a.substring(1,a.length-1)));g=!1;for(var m=0;m<d.length;m++){var n=d.charAt(m);if("\\"!==n||g){if(("#"===
n||"?"===n||"\\"===n)&&g||"#"!==n&&"?"!==n&&"\\"!==n)b+=n;g=!1}else g=!0}b="+"==d.charAt(0)||"-"==d.charAt(0)?b.replace(/[\+\-\d,*\.*Z*\s]+/,""):b.replace(/[\d,*\.*Z*\s]+/g,"");d.lastIndexOf(".")!=d.indexOf(".")&&(a=gx.text.replaceAll(a,".",""));for(m=0;m<b.length;m++)a=a.replace(b.charAt(m),"");a=!gx.config.number.validation.strict&&k?gx.text.replaceAll(a,k,""):a;a=(f?"-":"")+a}return gx.text.replaceAll(a," ","")},formatNumber:function(d,k,a,b,f,g,m){if(!a||""===d&&"Blank"===m)return d?d.toString():
"";d=gx.lang.emptyObject(d)?"0":d;b=-1!=a.indexOf(",")?gx.thousandSeparator:"";m=gx.decimalPoint;var n=!1,t=gx.numericLenDec(a),w=t.Integers;k=t.Decimals;"string"==typeof d&&b&&(d=gx.text.replaceAll(d,b,""));"string"==typeof d&&(d=d.replace(m,"."));if(gx.num.overflowNumber(d))return d;try{d="undefined"!=typeof gx.num.dec&&d instanceof gx.num.dec.bigDecimal||0!==k?gx.num.setScale(d,k,m):gx.num.trunc(d,0).toString()}catch(y){d=d.toString()}var u=d.split(".");u[0]||(u[0]="0");u[1]||(u[1]="");if(g){if(u[1].length>
k&&u[1].replace(/0*$/,"").length>k)throw"InvalidNumber";if(f&&"-"==u[0].charAt(0)&&u[0].replace(/0*/,"").length>w||!f&&"-"==u[0].charAt(0)||u[0].replace(/[+]?0*/,"").length>w)throw"InvalidNumber";}g=u[0].substring(0,w);0>d&&(f=!0);if(u[1].length<k){t=u[1];for(w=u[1].length+1;w<=k;w++)t+="0";u[1]=t}var B=t="",p="";w="("===a.charAt(0)&&")"===a.charAt(a.length-1);f&&("-"!=g.charAt(0)||w?("+"==a.charAt(0)&&(0!==Number(d)&&(t="+"),"+"==g.charAt(0)&&(g=g.substring(1))),w&&(a=a.substring(1,a.length-1),0>
Number(d)&&(g=(-1*Number(g)).toString(),B="(",p=")"))):(t="-",g=g.substring(1)));if(b&&3<g.length){f=g;g="";for(d=3;d<f.length;d+=3)w=f.slice(f.length-d,f.length-d+3),g=b+w+g+"";d=f.substr(0,0===f.length%3?3:f.length%3);g=d+g}m=u[1]?m:"";0<k?(a=a.split("."),a[1]==gx.text.padr("",k,"Z")&&(n=!0)):(a=Array(a),0<a.length&&0===gx.text.replaceAll(gx.text.replaceAll(a[0],",",""),"Z","").length&&(n=!0));k=0;d="";f=u[1].replace(/0*$/,"");if(1<a.length){var v=a[1];u=!1;for(w=0;w<v.length;w++){var A=v.charAt(w);
if(u)d+=v.charAt(w);else if("9"!=A&&"Z"!=A&&"#"!=A&&"?"!=A||u)if("\\"===A&&u){d+=A;u=!1;continue}else"."==A||","==A||u||(d+=A);else f.length>k?(d+=f.charAt(k),k++):d+=this.checkPictureCharacter(A,!0);u="\\"==v.charAt(w)}}f="";v=a[0];k=g.length-1;1<a.length&&gx.text.endsWith(v,"Z")&&(v=v.replace(/Z$/,"9"));for(w=v.length-1;0<=w;w--)if(a=v.charAt(w),u=!1,1<w?u="\\"==v.charAt(w-1)&&"\\"!=v.charAt(w-2):0<w&&(u="\\"==v.charAt(w-1)),u)f=a+f,w--;else if("9"!=a&&"Z"!=a&&"#"!=a&&"?"!=a||u)"\\"===a&&u?f=a+
f:","!=a&&"+"!=a?f=a+f:","==a&&g.charAt(k)==b&&(f=g.charAt(k)+f,k--);else if(0<=k){if("Z"!=a&&"#"!=a&&"?"!=a||0!==Number(g.substring(0,k+1)))f=g.charAt(k)+f;k--}else f=this.checkPictureCharacter(a)+f;return!n||"0"!=f&&""!==f||0!==d.replace(/0+$/,"").length?B+t+f+(d?m+d:"")+p:""},checkPictureCharacter:function(d,k){switch(d){case "9":return"0";case "Z":return(void 0===k?0:k)?"0":"";case "#":return"";case "?":return" "}},add:function(d,k){return c("add",function(a,b){return a+b},d,k)},subtract:function(d,
k){return c("substract",function(a,b){return a-b},d,k)},multiply:function(d,k){return c("multiply",function(a,b){return a*b},d,k)},divide:function(d,k){return c("divide",function(a,b){return a/b},d,k)},negate:function(d){return gx.lang.instanceOf(d,Number)||"undefined"==typeof gx.num.dec?-d:d.negate()},pow:function(d,k){return c("pow",function(a,b){return Math.pow(a,b)},d,k)},mod:function(d,k){return c("remainder",function(a,b){return Math.trunc(a%b)},d,k)},toFixed:function(d,k){return(gx.lang.isBigDecimal(d)?
d:Math.round(d*Math.pow(10,k))/Math.pow(10,k)).toFixed(k)},setScale:function(d,k){if(gx.lang.instanceOf(d,Number))return gx.num.toFixed(d,k);"string"==typeof d&&(d=gx.text.trim(d));if(d.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===d.length&&0===k)return"0";var a=d.split(".");a[1]||(a[1]="");if(a[1].length<k){var b=a[1];for(d=a[1].length+1;d<=k;d++)b+="0";a[1]=b;return a[0]+(""===a[1]?"":".")+a[1]}return gx.num.toFixed(Number(parseFloat(d)),k)}return(new gx.num.dec.bigDecimal(d)).setScale(k,
gx.num.dec.ROUND_UP).toString()},parseFloat:function(d,k,a){if(gx.lang.instanceOf(d,Number)||this.overflowNumber(d))return d;d=this.toInvariant(d,k,a);return d.length>this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(d):parseFloat(d)},toInvariant:function(d,k,a){return"number"==typeof d||"undefined"!=typeof gx.num.dec&&d instanceof gx.num.dec.bigDecimal?d:gx.text.replaceAll(d,k,"").replace(a,".")},parseInt:function(d,k,a){if("number"==typeof d)return d;d=gx.text.replaceAll(d,
a,"");return parseInt(d,k)},overflowNumber:function(d){return/\*(\**)/.test(d)},urlDecimal:function(d,k,a){return"undefined"!=typeof d?(d="undefined"!=typeof d.value?d.value:d,d=this.parseFloat(d,k,a),d.toString()):""},random:function(){return Math.random()},abs:function(d){return Math.abs(d)},intval:function(d){d="undefined"!=typeof d?d.toString():"";d=d.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?parseInt(d,0):(new gx.num.dec.bigDecimal(d)).setScale(0,gx.num.dec.ROUND_UP);
isNaN(d)&&(d=0);return d},val:function(d){d=gx.text.trim(d).replace(",",".");d=this.parseFloat(d);isNaN(d)&&(d=0);return d},trunc:function(d,k){var a=d;d=d.toString();var b=d.indexOf(".");if(-1!=b){a=d.substring(0,b);if(0===k)return Number(a);d=d.substring(b+1,b+1+k);a=gx.num.parseFloat(a+"."+d);isNaN(a)&&(a=0)}return a},round:function(d,k){return 0<=k?parseFloat(gx.num.decimalAdjust("round",d,-k).toFixed(k)):gx.num.roundNeg(d,k)},decimalAdjust:function(d,k,a){if("undefined"===typeof a||0===+a)return Math[d](k);
k=+k;a=+a;if(isNaN(k)||"number"!==typeof a||0!==a%1)return NaN;k=k.toString().split("e");k=Math[d](+(k[0]+"e"+(k[1]?+k[1]-a:-a)));k=k.toString().split("e");return+(k[0]+"e"+(k[1]?+k[1]+a:a))},roundNeg:function(d,k){d=d.toString();var a=d.indexOf(".");var b=parseInt(k,0)+1;b=""+"0000000000000000000000".substring(1,b);var f=parseFloat("."+b+"5");-1==a?(a="0000000000000000000000",b=""+d):0===a?(b="0",d=0+parseFloat(d)+parseFloat(f),d+="0000000000000000000000",a=""+d.substring(1,d.length)):(d=parseFloat(d)+
f,b=d.toString().substring(0,a),a=""+(""+d+"0000000000000000000000").substring(a+1,a+1+parseInt(k,0)));a=a.substring(0,parseInt(k,0));k=parseFloat(b+"."+a);isNaN(k)&&(k=0);return k},normalize_decimal_sep:function(d,k,a,b){var f=b.lastIndexOf(a);0<=d.indexOf(".")&&","==a&&-1==f&&b.lastIndexOf(".")==b.indexOf(".")?b=b.replace(".",a):-1==d.indexOf(k)&&"."==a&&-1==f&&b.lastIndexOf(",")==b.indexOf(",")&&(b=b.replace(",",a));return b},truncate:function(d,k,a){k=d.lastIndexOf(k);var b=d;-1!=k&&(b=0<a?1:
0,b=d.slice(0,k+parseInt(a,10)+b));return b},valid_decimal:function(d,k,a,b){var f=d.value,g=!0,m=gx.O.getValidStructFld(d),n=gx.rtPicture(m,d);b=n?gx.numericLenDec(n).Decimals:b;f=this.normalize_decimal_sep(n,k,a,f);gx.lang.emptyObject(m)||(f=gx.num.extractValue(gx.rtPicture(m,d),k,f));var t=new RegExp("^[ ]*((([+-]{1}[0-9]+)||([0-9]*))(\\"+k+"[0-9]{3})*(\\"+a+"[0-9]*)?)?[ ]*$");if(f)if(t.test(f)){b=gx.num.truncate(f,a,b);try{gx.lang.emptyObject(m)||(b=gx.num.formatNumber(b,m.dec,n,m.len,m.sign,
!0,m.emptyAsNull)),"."!=a&&"SELECT"==d.tagName&&(b=gx.num.toInvariant(b,k,a))}catch(w){g=!1}if(g&&b!=gx.text.trim(d.value)&&(d.value=b,gx.util.browser.isIEStrict()||-1!=navigator.userAgent.indexOf("Firefox/2")))d.onchange()}else g=!1;else g=!0;g?gx.csv.setFormatError(d,!1):(gx.csv.setFormatError(d),gx.fn.alert(d,gx.getMessage("GXM_badnum")))},valid_integer:function(d,k){var a=gx.O.getValidStructFld(d),b=gx.lang.emptyObject(a);var f=d.value;b||(f=gx.num.extractValue(gx.rtPicture(a,d),k,f));k=b||-1==
gx.rtPicture(a,d).indexOf(",")?/^[ ]*(([+-]{1}[0-9]+)||([0-9]*))[ ]*$/:new RegExp("^[ ]*([+-]{1}[0-9]+||[0-9]*)(\\"+k+"[0-9]{3})*[ ]*$");var g=!0;if(f)if(k.test(f)){try{b||(f=gx.num.formatNumber(f,a.dec,gx.rtPicture(a,d),a.len,a.sign,!0,a.emptyAsNull))}catch(m){g=!1}if(f!=gx.text.trim(d.value)&&(d.value=f,-1!=navigator.userAgent.indexOf("Firefox/2")))d.onchange()}else g=!1;else g="number"===d.type&&"undefined"!==typeof d.validity?d.validity.valid:!0;g?gx.csv.setFormatError(d,!1):(gx.csv.setFormatError(d),
gx.fn.alert(d,gx.getMessage("GXM_badnum")))},replaceFullWidthNumerals:function(d){return"string"===typeof d?d.replace(l,function(k){return 8213==k.charCodeAt()||12540==k.charCodeAt()?String.fromCharCode(45):String.fromCharCode(k.charCodeAt()-65248)}):d}}}();
gx.color={rgb:function(l,c,d){return 65536*l+256*c+d},css:function(l){return"rgb"==l.substring(0,3)?eval(l):"#"==l.charAt(0)?parseInt(l.substring(1),16):0},html:function(l){l=this.toHex(l);gx.lang.emptyObject(l)&&(l="000000");l=gx.text.padl(l,6,"0");var c={};c.Hexa=l;c.Html="#"+l;c.R=parseInt(l.substring(0,2),16);c.G=parseInt(l.substring(2,4),16);c.B=parseInt(l.substring(4,6),16);return c},fromRGB:function(l,c,d){var k={};"undefined"!=typeof l&&"undefined"!=typeof c&&"undefined"!=typeof d&&(k.Hexa=
this.toHex(l)+this.toHex(c)+this.toHex(d),k.Html="#"+k.Hexa,k.R=l,k.G=c,k.B=d);return k},ARGBToHex:function(l){var c=this.toHex(l>>16&255),d=this.toHex(l>>8&255);l=this.toHex(l&255);return c+d+l},toHex:function(l){if(void 0===l)return"000000";if(0>l)return gx.color.ARGBToHex(l);if(0===l)return l+"0";for(var c,d="";0!==l;)c=l%16,l=(l-c)/16,d="0123456789ABCDEF".charAt(c)+d;0!==d.length%2&&(d="0"+d);return d}};
gx.grid=function(l){return{drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3,0:"none",1:"uniform",2:"header",3:"report"},getImplClass:function(c,d){return d?(gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0),gx.lang.inherits(gx.ui.grid,
c.isResponsive?gx.grid.responsiveGrid:gx.grid.impl,!0),gx.lang.inherits(d,gx.ui.grid,!0),d=new d(gx.$),c&&(d.ParentObject=c.parentObject,d.ControlName=c.gridName,c.parentObject.setUserControl(d)),d):c.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(c){c=void 0!=c?c:1;return 0!=c?c:9999},setActiveGridRow:function(c,d){"string"===typeof c&&(c=(c=gx.O.getGrid(c))?c.grid:null);c&&c.gxAllowSelection&&(gx.csv.currentGridSelection=c,"undefined"!==typeof d&&
(c.toggleRowHoverById(c.gxHoveredRowId,!1),c.gxHoveredRowId=parseInt(d,10)-1,gx.grid.clearActiveGridHandlerInstalled||(gx.fx.obs.addObserver("gx.onclick",this,gx.grid.clearActiveGridHandler),gx.grid.clearActiveGridHandlerInstalled=!0)))},clearActiveGrid:function(c){c&&gx.csv.currentGridSelection!==c.grid||(delete gx.csv.currentGridSelection,delete gx.grid.clearActiveGridHandlerInstalled,gx.fx.obs.deleteObserver("gx.onclick",this,gx.grid.clearActiveGridHandler))},clearActiveGridHandler:function(c){c=
gx.evt.source(c.event);c=gx.fn.rowGridId(c);(c=gx.fn.getGridObj(c))&&c.grid.gxAllowSelection||gx.grid.clearActiveGrid()},handleKeyUpEvt:function(c){var d=gx.csv.currentGridSelection,k=!1;if(!d||!d.gxAllowSelection||d.gxAllowHovering)return k;switch(c.keyCode){case 38:case 40:d.ownerGrid.setSelection(d.ownerGrid.getSelection(),!0),gx.evt.cancel(c,!0),k=!0}return k},handleKeyPressEvt:function(c){var d=gx.csv.currentGridSelection,k=!1;if(!d||!d.gxAllowHovering&&!d.gxAllowSelection)return k;var a=d.gxAllowHovering;
switch(c.keyCode){case 38:a?k=d.setPreviousRowHovered():d.ownerGrid.setPreviousRowSelected(!1);gx.evt.cancel(c,!0);break;case 40:a?k=d.setNextRowHovered():d.ownerGrid.setNextRowSelected(!1);gx.evt.cancel(c,!0);break;case 13:k=d.ownerGrid.setSelection(d.gxHoveredRowId)&&d.gxOnLineActivate}return k},grid:function(c,d,k,a,b,f,g,m,n,t,w,u,B,p,v,A,y,F,H,r,q,x,D,C,I,G,K,N,P,O,W,V,Y,ba,fa,da,ka,ma){var na=function(z){return function(E){E=this.parentObject.getGridById(a,E||gx.fn.currentGridRow(a));return z.call(this,
E||this)}.closure(this)}.closure(this);this.parentObject=c;this.parentObject["sub"+b+"_Rows"]=na(function(z){return z.grid.pageSize/z.grid.gxGridCols});this.parentObject[f.toUpperCase()+(n?"_MPAGE":"")+"_nFirstRecordOnPage"]=na(function(z){return z.grid.firstRecordOnPage});this.parentObject[f.toUpperCase()+(n?"_MPAGE":"")+"_nEOF"]=na(function(z){return z.grid.eof});this.gridLvl=d;this.gridLvlName=k;this.gridId=a;this.gridName=b;this.realGridName=f;this.containerName=g||this.gridName+"Container";this.parentName=
t||"";this.pagingParms=[];this.lvlKey=w||[];this.isFreestyle=u||!1;this.isResponsive=Y||!1;this.allowHovering=(this.allowSelection=p||!1)&&v||!1;this.allowCollapsing=W||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=G||!1;this.hasAddlines=K||!1;this.hasForEachLine=N||!1;this.width=void 0!=q?q:0;this.widthUnit=x||"";this.height=void 0!=D?D:0;this.heightUnit=C||"";this.gridCols=void 0!=B?B:1;this.gridCols=0!=this.gridCols?
this.gridCols:9999;this.gridRows=void 0!=A?A:5;this.gridResponsiveCols=ba||[1,1,1,1];this.usePaging=(this.usePaging=y||!1)&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=F||!1;this.defaultSetsContext=H||!1;this.boundedCollType=r||"";this.boundedCollName=V||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=m;this.isMasterPageGrid=n;this.htmlTags="";this.onLineActivate=O;this.addingRows=!1;this.deleteMethod=gx.grid.deleteMethod;
this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.IsValidState=[];this.implClass=P;this.grid=gx.grid.getImplClass(this,P);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=this.width;this.grid.gxWidthUnit=
this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=this.gxComponentContext;
this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=void 0!=I?I:"New Row";this.grid.beforeRenderCallbacks=[];this.grid.isAbstract=ka;this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.useUserControlModelValues=function(){return this.isUsercontrol&&
!this.grid.useNativeChildControls};this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.grid.selectedRows=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.grid.useHiddensForControlValues=this.isUsercontrol&&(this.grid.useHiddensForControlValues||"undefined"===this.grid.useHiddensForControlValues);this.gxCreateGridCode=function(z){var E=new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+z,this.gridName,
this.containerName+"_"+z,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaultSetsContext,this.boundedCollType,this.width,this.widthUnit,this.height,this.heightUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing,this.boundedCollName,this.isResponsive,this.gridResponsiveCols,
!1,0,this.grid.isAbstract,this.InverseLoading),L=this.grid,J=E.grid;E.emptyText=this.emptyText;J.ControlLvl=this.gridLvl;J.GridId=this.gridId;J.GridRow=z;J.GridBaseName=this.gridName;if(L.Properties)for(Q in L.Properties)J.setProp(Q,L.Properties[Q],L[Q],L.PropTypes[Q]);if(L.DynProperties){var M=L.DynProperties.length;for(z=0;z<M;z++){var Q=L.DynProperties[z];J.setDynProp(Q,L.Properties[Q],L[Q],L.PropTypes[Q],!0)}}return E}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;
this.grid.eof=this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.InfiniteScrolling=fa;this.InverseLoading=ma;this.ScrollType=da;this.isAbstract=ka;this.addColumnDinCode=function(z,E){this.gxAddColumnsCode.push(function(){z.apply(this,E)})};this.addSingleLineEdit=function(z,E,L,J,M,Q,R,T,U,aa,S,Z,X,ia,ea,ja,qa,ra,la,sa,ta,wa,ua,va){this.addColumnDinCode(this.addSingleLineEdit,arguments);var oa=this.newColumn(J,R,Z,T);oa.visible=qa;oa.htmlName=L;oa.gxId=E;oa.gxAttId=
z;oa.gxAttName=Q;oa.gxTooltip=M;oa.gxWidthUnit=U;oa.gxColSize=S;oa.gxSetsContext=la;oa.gxCssClass=ta;oa.gxColumnClass=ua;oa.gxColumnHeaderClass=va;oa.gxControl=new gx.html.controls.singleLineEdit;oa.gxControl.column=oa;oa.gxControl.isPassword=sa;oa.gxControl.visible=oa.visible;oa.gxControl.dataType=oa.type;oa.gxControl.clickEvent=X;this.grid.addColumn(oa)};this.addPostingVar=function(z){this.postingVariables.push(z)};this.addMultipleLineEdit=function(z,E,L,J,M,Q,R,T,U,aa,S,Z,X,ia,ea,ja,qa,ra){this.addColumnDinCode(this.addMultipleLineEdit,
arguments);var la=this.newColumn(J,Q,X,R);la.visible=ea;la.htmlName=L;la.gxId=E;la.gxAttId=z;la.gxAttName=M;la.gxWidthUnit=T;la.gxSetsContext=ja;la.gxColumnClass=ra;la.gxControl=new gx.html.controls.multipleLineEdit;la.gxControl.column=la;la.gxControl.dataType=la.type;la.gxControl.visible=la.visible;la.gxControl.heightUnit=aa;la.gxControl.clickEvent=ia;this.grid.addColumn(la)};this.addBlob=function(z,E,L,J,M,Q,R,T,U,aa,S,Z,X,ia){this.addColumnDinCode(this.addBlob,arguments);var ea=this.newColumn(J,
Q,"left",U);ea.visible=Z;ea.htmlName=L;ea.gxId=E;ea.gxAttId=z;ea.gxAttName=M;ea.gxWidthUnit=S;ea.gxSetsContext=X;ea.gxColumnClass=ia;ea.gxControl=new gx.html.controls.blob;ea.gxControl.column=ea;ea.gxControl.dataType=ea.type;ea.gxControl.visible=ea.visible;ea.gxControl.height=T;ea.gxControl.width=U;this.grid.addColumn(ea)};this.addRadioButton=function(z,E,L,J,M,Q,R,T,U,aa,S){this.addColumnDinCode(this.addRadioButton,arguments);var Z=this.newColumn(J,Q,"left","");Z.visible=U;Z.htmlName=L;Z.gxId=E;
Z.gxAttId=z;Z.gxAttName=M;Z.gxSetsContext=aa;Z.gxColumnClass=S;Z.gxControl=new gx.html.controls.radio;Z.gxControl.column=Z;Z.gxControl.dataType=Z.type;Z.gxControl.vertical=T;Z.gxControl.visible=Z.visible;Z.gxControl.clickEvent=R;this.grid.addColumn(Z)};this.addComboBox=function(z,E,L,J,M,Q,R,T,U,aa,S,Z,X){this.addColumnDinCode(this.addComboBox,arguments);var ia=this.newColumn(J,Q,"left",S);ia.visible=U;ia.htmlName=L;ia.gxId=E;ia.gxAttId=z;ia.gxAttName=M;ia.gxSetsContext=aa;ia.gxWidthUnit=Z;ia.gxColumnClass=
X;ia.gxControl=new gx.html.controls.comboBox;ia.gxControl.column=ia;ia.gxControl.dataType=ia.type;ia.gxControl.rtEnabled=1==T;ia.gxControl.visible=ia.visible;ia.gxControl.clickEvent=R;this.grid.addColumn(ia)};this.addListBox=function(z,E,L,J,M,Q,R,T,U,aa,S,Z,X,ia){this.addColumnDinCode(this.addListBox,arguments);var ea=this.newColumn(J,Q,"left",S);ea.visible=U;ea.htmlName=L;ea.gxId=E;ea.gxAttId=z;ea.gxAttName=M;ea.gxSetsContext=aa;ea.gxWidthUnit=Z;ea.gxColumnClass=X;ea.gxControl=new gx.html.controls.listBox;
ea.gxControl.column=ea;ea.gxControl.dataType=ea.type;ea.gxControl.rows=void 0!==ia?ia:4;ea.gxControl.rtEnabled=1==T;ea.gxControl.visible=ea.visible;ea.gxControl.clickEvent=R;this.grid.addColumn(ea)};this.addCheckBox=function(z,E,L,J,M,Q,R,T,U,aa,S,Z,X,ia,ea){this.addColumnDinCode(this.addCheckBox,arguments);var ja=this.newColumn(J,R,"left",X);ja.visible=S;ja.htmlName=L;ja.gxId=E;ja.gxAttId=z;ja.gxAttName=Q;ja.gxChecked=T;ja.gxUnChecked=U;ja.gxSetsContext=Z;ja.gxWidthUnit=ia;ja.gxColumnClass=ea;ja.gxControl=
new gx.html.controls.checkBox;ja.gxControl.column=ja;ja.gxControl.checkedValue=T;ja.gxControl.uncheckedValue=U;ja.gxControl.dataType=ja.type;ja.gxControl.visible=ja.visible;ja.gxControl.clickEvent=aa;this.grid.addColumn(ja)};this.addBitmap=function(z,E,L,J,M,Q,R,T,U,aa,S,Z){this.addColumnDinCode(this.addBitmap,arguments);var X=this.newColumn(aa,"","left",J);X.htmlName=E;X.gxId=L;X.gxAttId=z;X.gxWidthUnit=M;X.gxControl=new gx.html.controls.image;X.gxControl.column=X;X.gxControl.dataType=X.type;X.gxControl.width=
J;X.gxControl.widthUnit=M;X.gxControl.height=Q;X.gxControl.heightUnit=R;X.gxControl.clickEvent=T;X.gxCssClass=S;X.gxColumnClass=Z;this.grid.addColumn(X)};this.addVideo=function(z,E,L,J,M,Q,R,T,U,aa,S,Z){this.addColumnDinCode(this.addVideo,arguments);var X=this.newColumn(aa,"","left",J);X.htmlName=E;X.gxId=L;X.gxAttId=z;X.gxWidthUnit=M;X.gxControl=new gx.html.controls.video;X.gxControl.column=X;X.gxControl.dataType=X.type;X.gxControl.width=J;X.gxControl.widthUnit=M;X.gxControl.height=Q;X.gxControl.heightUnit=
R;X.gxControl.clickEvent=T;X.gxCssClass=S;X.gxColumnClass=Z;this.grid.addColumn(X)};this.addAudio=function(z,E,L,J,M,Q,R,T,U,aa,S,Z){this.addColumnDinCode(this.addAudio,arguments);var X=this.newColumn(aa,"","left",J);X.htmlName=E;X.gxId=L;X.gxAttId=z;X.gxWidthUnit=M;X.gxControl=new gx.html.controls.audio;X.gxControl.column=X;X.gxControl.dataType=X.type;X.gxControl.width=J;X.gxControl.widthUnit=M;X.gxControl.height=Q;X.gxControl.heightUnit=R;X.gxControl.clickEvent=T;X.gxCssClass=S;X.gxColumnClass=
Z;this.grid.addColumn(X)};this.addFile=function(z,E,L,J,M,Q,R,T,U,aa,S,Z){this.addColumnDinCode(this.addVideo,arguments);var X=this.newColumn(aa,"","left",J);X.htmlName=E;X.gxId=L;X.gxAttId=z;X.gxWidthUnit=M;X.gxControl=new gx.html.controls.file;X.gxControl.column=X;X.gxControl.dataType=X.type;X.gxControl.width=J;X.gxControl.widthUnit=M;X.gxControl.height=Q;X.gxControl.heightUnit=R;X.gxControl.clickEvent=T;X.gxCssClass=S;X.gxColumnClass=Z;this.grid.addColumn(X)};this.addTextBlock=function(z,E,L){this.addColumnDinCode(this.addTextBlock,
arguments);var J=this.newColumn("","","left");J.gxId=L;J.htmlName=z;J.gxControl=new gx.html.controls.textBlock;J.gxControl.column=J;J.gxControl.dataType=J.type;J.gxControl.clickEvent=E;this.grid.addColumn(J)};this.addLabel=function(z){this.addColumnDinCode(this.addLabel,arguments);var E=this.newColumn("","","left");E.htmlName=z;E.gxControl=new gx.html.controls.label;E.gxControl.column=E;this.grid.addColumn(E)};this.addButton=function(z,E,L,J,M){this.addColumnDinCode(this.addButton,arguments);var Q=
this.newColumn("","","left");Q.htmlName=E;Q.gxId=z;Q.gxControl=new gx.html.controls.button;Q.gxControl.column=Q;Q.gxControl.dataType=Q.type;this.grid.addColumn(Q)};this.addGrid=function(z){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(z);var E=this.newColumn("","","left");E.htmlName=z.getContainerControlId();E.gxControl=new gx.html.controls.grid;E.gxControl.column=E;this.grid.addColumn(E)};this.addUsercontrol=function(z,E,L,J,M,Q,R,T,U,aa){this.addColumnDinCode(this.addUsercontrol,
arguments);var S="",Z=this.parentObject;Z.GridUCsProps&&Z.GridUCsProps[M]&&(S=Z.GridUCsProps[M].title||"");S=this.newColumn(S,"","left");S.gxUCId=z;S.gxUCLastId=E;S.gxUCClassName=L;S.gxUCContainerName=J;S.gxUCControlName=M;S.gxUCFieldName=Q;S.gxShowFunc=R;S.gxC2VFuncs=T;S.gxV2CFuncs=U;S.visible=aa;S.gxControl=new gx.html.controls.userControl;S.gxControl.column=S;S.gxControl.dataType=S.type;S.htmlName=M.toUpperCase();S.isUserControl=!0;this.grid.addColumn(S)};this.startContainer=function(){this.addColumnDinCode(this.startContainer,
arguments);var z=this.newColumn("","","left");z.gxControl=new gx.html.controls.userControlContainer;z.gxControl.column=z;z.gxControl.dataType=z.type;this.grid.addColumn(z)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("</div>")};this.addWebComponent=function(z){this.addColumnDinCode(this.addWebComponent,arguments);var E=this.newColumn("","","left");E.gxControl=new gx.html.controls.webComponent;E.gxControl.column=E;E.gxControl.dataType=E.type;
this.grid.addColumn(E)};this.addEmbeddedPage=function(z){this.addColumnDinCode(this.addEmbeddedPage,arguments);var E=this.newColumn("","","left");E.gxControl=new gx.html.controls.embeddedPage;E.gxControl.column=E;E.gxControl.dataType=E.type;this.grid.addColumn(E)};this.addHtmlCode=function(z){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(z)};this.startTable=function(z,E,L){this.addColumnDinCode(this.startTable,arguments);var J=this.newColumn("","","left");J.gxId=E;J.htmlName=
z+"_"+E;J.gxControl=new gx.html.controls.table;J.gxControl.column=J;J.gxControl.width=L;J.gxControl.dataType=J.type;this.grid.addColumn(J)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("</table>")};this.startRow=function(z,E,L,J,M,Q){this.addColumnDinCode(this.startRow,arguments);var R=this.newColumn("","","left");R.gxControl=new gx.html.controls.row;R.gxControl.column=R;R.gxControl.title=z;R.gxControl.align=E;R.gxControl.verticalAlign=L;R.gxControl.backColor=
J;R.gxControl.borderColor=M;R.gxControl.cssClass=Q;R.gxControl.ownCssClass=Q;R.gxControl.dataType=R.type;this.grid.addColumn(R)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("</tr>")};this.startCell=function(z,E,L,J,M,Q,R,T,U,aa){this.addColumnDinCode(this.startCell,arguments);var S=this.newColumn("","","left");S.gxControl=new gx.html.controls.cell;S.gxControl.column=S;S.gxControl.title=z;S.gxControl.align=E;S.gxControl.verticalAlign=L;S.gxControl.backColor=
J;S.gxControl.borderColor=M;S.gxControl.height=Q;S.gxControl.width=R;S.gxControl.colSpan=T;S.gxControl.rowSpan=U;S.gxControl.cssClass=aa;S.gxControl.dataType=S.type;this.grid.addColumn(S)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("</div>"):this.currentBuffer.append("</td>")};this.startGroup=function(z,E,L,J,M){this.addColumnDinCode(this.startGroup,arguments);var Q=this.newColumn("","","left");Q.htmlName=z;Q.gxControl=new gx.html.controls.group;
Q.gxControl.column=Q;Q.gxControl.id=z;Q.gxControl.caption=E;Q.gxControl.height=L;Q.gxControl.width=J;Q.gxControl.cssClass=M;Q.gxControl.dataType=Q.type;this.grid.addColumn(Q)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("</fieldset>")};this.startDiv=function(z,E,L,J){this.addColumnDinCode(this.startDiv,arguments);var M=this.newColumn("","","left");M.gxId=z;M.htmlName=E+"_"+z;M.gxControl=new gx.html.controls.div;M.gxControl.column=M;M.gxControl.width=
J;M.gxControl.height=L;M.gxControl.dataType=M.type;this.grid.addColumn(M)};this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);var z=this.newColumn("","","left");z.gxControl=new gx.html.controls.divEnd;z.gxControl.column=z;this.grid.addColumn(z)};this.startFormGroup=function(z,E,L,J){this.addColumnDinCode(this.startFormGroup,arguments);var M=this.newColumn("","","left");M.gxId=z;M.htmlName=E+"_"+z;M.gxControl=new gx.html.controls.formGroup;M.gxControl.column=M;M.gxControl.width=J;
M.gxControl.height=L;M.gxControl.dataType=M.type;this.grid.addColumn(M)};this.endFormGroup=function(){this.addColumnDinCode(this.endFormGroup,arguments);var z=this.newColumn("","","left");z.gxControl=new gx.html.controls.formGroupEnd;z.gxControl.column=z;this.grid.addColumn(z)};this.newColumn=function(z,E,L,J){E=this.getColumnType(E);z=new gx.grid.column(z,E,J,L);this.currentBuffer=z.buffer;z.htmlName="";z.gxId="";z.gxAttId="";z.gxAttName="";return z};this.getColumnType=function(z){switch(z){case "decimal":case "int":z=
gx.types.numeric;break;case "date":z=gx.types.date;break;case "dtime":z=gx.types.dateTime;break;case "boolean":z=gx.types.bool;break;case "GeneXus\\Geolocation":z=gx.types.geolocation;break;default:z=gx.types.character}return z};this.addOldComponent=function(z,E){"undefined"==typeof this.oldCmps[z]&&(this.oldCmps[z]=[]);this.oldCmps[z].push(E)};this.updateOldComponents=function(){for(var z=this.grid.rows.length,E=0;E<z;E++)delete this.oldCmps[this.grid.rows[E].gxId];for(var L in this.oldCmps){for(z=
this.oldCmps[L];0<z.length;)E=z.shift(),gx.fn.deleteHidden(E);delete this.oldCmps[L]}};this.addHidden=function(z){this.hiddens.push(z)};this.addHiddenControl=function(z,E,L){gx.fn.setHidden(z,E);1!=L&&this.addHidden(z)};this.clearHiddens=function(){for(var z=0;z<this.hiddens.length;z++)gx.fn.deleteHidden(this.hiddens[z]);this.hiddens=[]};var ca={};this.setHtmlTags=function(z){gx.lang.apply(ca,z);var E=' style="'+("0"==ca.Visible?"display:none;":"");z=' class="'+ca.Class+'"';var L=gx.lang.emptyObject;
E+=L(ca.Background)?"":"background:"+ca.Background+";";E+=L(ca.Backcolor)||"0"==ca.Backcolor?"":"background-color:"+gx.color.html(ca.Backcolor).Html+";";E+=L(ca.Bordercolor)||"0"==ca.Bordercolor?"":"border-color:"+gx.color.html(ca.Bordercolor).Html+";";E+=L(ca.Borderwidth)||"0"==ca.Borderwidth?"":" border-width:"+ca.Borderwidth+";";E+=L(ca.Width)||"0"==ca.Width?"":" width:"+gx.dom.addUnits(ca.Width,this.width==ca.Width?this.widthUnit:"")+";";E+=L(ca.Height)||"0"==ca.Height?"":"max-height:"+gx.dom.addUnits(ca.Height,
this.height==ca.Height?this.heightUnit:"")+";";z+=L(ca.Align)?"":' align="'+ca.Align+'"';z+=L(ca.Tooltiptext)?"":' title="'+ca.Tooltiptext+'"';z+=L(ca.Cellpadding)?"":' data-cellpadding="'+ca.Cellpadding+'"';z+=L(ca.Cellspacing)?"":' data-cellspacing="'+ca.Cellspacing+'"';this.htmlTags=gx.text.trim(z+(E+'"'));this.grid.gxHtmlTags=this.htmlTags;L(ca.Width)||(this.grid.gxWidth=ca.Width);L(ca.Height)||(this.grid.gxHeight=ca.Height)};var ha={};this.setGridStyles=function(z){gx.lang.apply(ha,z);this.grid.header=
z.Header;this.visible=void 0!=ha.Visible?gx.lang.gxBoolean(ha.Visible):!0;this.setSortable(void 0!=ha.Sortable?gx.lang.gxBoolean(ha.Sortable):!0);this.background=void 0!=ha.Background?ha.Background:"";this.cssClass=void 0!=ha.Class?ha.Class:"";this.titleBackstyle=void 0!=ha.Backcolorstyle?ha.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=ha.Titlefont?ha.Titlefont:"";this.linesFont=void 0!=ha.Linesfont?ha.Linesfont:"";this.borderWidth=void 0!=ha.Borderwidth?ha.Borderwidth:"";this.toolTipText=
void 0!=ha.Tooltiptext?ha.Tooltiptext:"";try{this.backcolor=void 0!=ha.Backcolor?gx.color.html(ha.Backcolor).Html:"",this.titleBackcolor=void 0!=ha.Titlebackcolor?gx.color.html(ha.Titlebackcolor).Html:"",this.titleForecolor=void 0!=ha.Titleforecolor?gx.color.html(ha.Titleforecolor).Html:"",this.linesBackcolorOdd=void 0!=ha.Backcolorodd?gx.color.html(ha.Backcolorodd).Html:"",this.linesBackcolorEven=void 0!=ha.Backcoloreven?gx.color.html(ha.Backcoloreven).Html:"",this.bordercolor=void 0!=ha.Bordercolor?
gx.color.html(ha.Bordercolor).Html:""}catch(E){gx.dbg.logEx(E,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=ha.Borderwidth?ha.Borderwidth:"";this.toolTipText=void 0!=ha.Tooltiptext?ha.Tooltiptext:"";this.grid.gxCssClass="";this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=
this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=
this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&
(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};this.setSortable=function(z){if(this.sortable!=z){this.sortable=z;for(var E=this.grid.columns.length,L=0;L<E;L++)this.grid.columns[L].sortable=z}};this.lastRowId=0;this.addRow=function(z,E){var L;E=void 0===E?-1:E;var J=-1==E?this.lastRowId++:E,M=gx.grid.rowId(J+
1);M=new gx.grid.row(J,z,M,this.grid.gxParentRowId);M.gxCmpContext=this.gxComponentContext;M.Grids=z.Grids;M.ownerGrid=this;M.gxLvl=this.gridLvl;this.setRowHiddens(z.Hiddens);for(var Q=this.grid.columns,R=Q.length,T=0;T<R;T++){var U=Q[T];if(0!==J){var aa=this.grid.rows[0].gxProps[T];var S=z.Props[T].length;for(L=this.grid.rowsValues?aa.length-1:aa.length;S<L;S++)M.gxProps[T].push(aa[S])}L=z.Props[T];L=L[L.length-1];(aa=this.grid.rowsValues)&&!this.autoRefreshing&&(S=aa[J],void 0!==S&&0<S.length&&
(L=aa[J][T]));M.values[T]=L;this.grid.rowsValues&&M.gxProps[T].push(L);this.parentObject.isTransaction()&&(U=this.columnIndexInKey(U.gxAttId),-1!=U&&(M.gxKeyValues[U]=L))}this.isFreestyle&&(M.IsNew=!0,this.installChildGrids(M));this.grid.addRow(M,!1,E);return M};this.installChildGrids=function(z){for(var E=this.childGrids.length,L=0;L<E;L++){var J=this.childGrids[L],M=J.gxCreateGridCode(z.gxId);M.grid.parentGxObject=this.parentObject;var Q=(M.isMasterPageGrid?"MP":this.grid.gxCmpContext)+M.realGridName+
"Container";M.gxContainerDivName=Q+"Div_"+z.gxId;M.gxContainerDataName=Q+"Data_"+z.gxId;M.gxContainerValuesName=Q+"DataV_"+z.gxId;z.gxGrids.push(M);M.parentGrid=this;M.parentRow=z;this.parentObject.setGrid(M);J.copyPropertiesTo(M);M.grid.gxCmpContext=this.grid.gxCmpContext;M.grid.gxParentRowId=z.gxId;this.installChildGridColumns(M,J)}};this.installChildGridColumns=function(z,E){for(var L=E.gxAddColumnsCode.length,J=0;J<L;J++)E.gxAddColumnsCode[J].call(z)};this.copyPropertiesTo=function(z){z.cssClass=
this.cssClass;z.titleBackstyle=this.titleBackstyle;z.titleBackcolor=this.titleBackcolor;z.linesBackcolorOdd=this.linesBackcolorOdd;z.linesBackcolorEven=this.linesBackcolorEven;z.grid.gxCssClass=this.grid.gxCssClass;z.grid.gxTitleClass=this.grid.gxTitleClass;z.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;z.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;z.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;z.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(z){if(z&&this.parentObject.isTransaction())for(var E in z)gx.fn.setHidden(E,
z[E])};this.executeEvent=function(z,E){gx.evt.setGridEvt(this.gridId.toString(),E);this.instanciateRow(E);this.parentObject[z].call(this.parentObject,E)};this.getHiddenName=function(z){var E="";this.parentRow&&(E="_"+this.parentRow.gxId);return this.grid.gxCmpContext+this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":"")+"_"+z+E};this.updatePagingVars=function(z,E){void 0==z&&void 0==E?(this.grid.eof=gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):
(this.grid.eof=z,this.grid.firstRecordOnPage=E)};this.setPagingVars=function(z,E){this.grid.eof=z;this.grid.firstRecordOnPage=E;gx.fn.setHidden(this.getHiddenName("nEOF"),z);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),E)};this.clearDefaultEventHandlers=function(){if(this.defaultDragable||this.defaultSetsContext){var z=this.grid.rows.length;for(var E=0;E<z;E++){var L=this.containerName+"Row_"+this.grid.rows[E].gxId;this.defaultDragable&&gx.fx.dnd.deleteSource(L);this.defaultSetsContext&&
gx.fx.ctx.deleteSetter(L)}}z=this.grid.columns.length;for(E=0;E<z;E++)if(L=this.grid.columns[E],1==L.gxSetsContext)for(var J=this.grid.rows.length,M=0;M<J;M++)gx.fx.ctx.deleteSetter(L.htmlName+"_"+this.grid.rows[M].gxId)};this.setDefaultEventHandlers=function(){var z=0,E=this.additiveResponse?this.firstAdditiveRow:0,L=this.getRowAsTypes();if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType)){z=this.grid.rows.length;for(var J=E;J<z;J++){var M=this.gxComponentContext+
this.containerName+"Row_"+this.grid.rows[J].gxId;M=gx.dom.byId(M);null!=M&&(M.gxGrid=this.containerName,M.gxGridName=this.gridName,M.gxId=this.grid.rows[J].gxId);M=this.containerName+"Row_"+this.grid.rows[J].gxId;Q=function(T){return this.returnRowData(T)}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,M,this.cssClass,L,Q);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,M,this.cssClass,L,Q)}}else{z=this.grid.gxCmpContext+this.containerName+"Div";var Q=function(){return this.returnGridData()}.closure(this);
this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,z,this.cssClass,[this.boundedCollType],Q);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,z,this.cssClass,[this.boundedCollType],Q)}if(this.parentGrid)for(J=gx.fx.ctx.setters[this.gxComponentContext+this.realGridName+"ContainerTbl"],z=this.grid.rows.length,Q=E;Q<z;Q++)M=this.containerName+"Row_"+this.grid.rows[Q].gxId,J&&J.hdl&&gx.fx.ctx.addSetter(this.parentObject,M,this.cssClass,L,J.hdl);if(!this.additiveResponse)for(z=this.grid.columns.length,
L=0;L<z;L++)if(M=this.grid.columns[L],1==M.gxSetsContext)for(J=this.grid.rows.length,Q=E;Q<J;Q++){var R=gx.dom.el(this.gxComponentContext+M.htmlName+"_"+this.grid.rows[Q].gxId,!0);null!=R&&(R.gxHtmlName=M.htmlName,gx.fx.ctx.addSetter(this.parentObject,M.htmlName+"_"+this.grid.rows[Q].gxId,"",[M.gxAttName],this.returnColumnContext))}};this.infinite_scrolling_ensure_loading_scroll=function(){if(!this.mock_element){var z=l("#"+this.getGridInnerTableId());this.mock_element=l('<div class="gx-grid-loading" style="visibility:hidden;">'+
gx.getMessage("GXM_Loading")+"</div>");this.mock_element.insertAfter(z)}};this.infinite_scrolling_before_scroll=function(){this.infinite_scrolling_ensure_loading_scroll();!0!==this.isScrolling&&(this.mock_element.css("visibility","visible"),this.isScrolling=!0)};this.hide_loading_message=function(){gx.lang.requestAnimationFrame(function(){this.mock_element&&this.mock_element.css("visibility","hidden")},this)};this.remove_loading_message=function(){this.mock_element&&(l(this.mock_element).remove(),
this.mock_element=void 0)};this.infinite_scrolling_after_scroll=function(){var z=this.getGridInnerTableId();l("#"+z);this.fixColumnsWidth(this.fixedColumnsWidth);this.isScrolling=!1;this.hide_loading_message()};this.fixColumnsWidth=function(z){if(!this.isFreestyle){var E=this.getGridInnerTableId();E=l("#"+E).find("tbody tr[data-gxrendering_row]");l.each(E,function(L,J){l(J).children().map(function(M,Q){Q.style.width=z[M]+"px";Q.style.maxWidth=z[M]+"px"})});E.removeAttr("data-gxrendering_row")}};this.unInstallScrollListener=
function(){this.ScrollingElement&&(l(this.ScrollingElement).scrollTop(0),this.remove_loading_message(),this.ScrollingElement.removeEventListener("scroll",this.ScrollingHandler,{passive:!0}))};this.installScrollListener=function(z,E,L,J){var M=gx.grid.scrollingThreshold||4,Q=function(){if(this.InverseLoading)return z.scrollTop<=30*z.clientHeight/100;if(1==this.ScrollType){var U=l(window);var aa=l(document).height();var S="CSS1Compat"===(document.compatMode||"");S=void 0!==window.pageXOffset?window.pageYOffset:
S?document.documentElement.scrollTop:document.body.scrollTop;U=U.height()}else aa=z.scrollHeight,S=z.scrollTop,U=z.clientHeight;var Z=S;var X=T.lastPosition;T.lastPosition=Z;return Z<X?!1:aa-S-U<U*M}.closure(this),R=this,T={allow:!0,reallow:function(){T.allow=!0;T.runAfterReallow&&(T.runAfterReallow=!1,R.ScrollingHandler())},lastPosition:0,runAfterReallow:!1,delay:300};this.ScrollingHandler=function(){gx.lang.requestAnimationFrame(function(){if(T.allow){var U=R.grid;!0!==R.isScrolling&&!U.isLastPage()&&
Q()&&(R.infinite_scrolling_before_scroll(),U.changeGridPage("NEXT",!1));T.allow=!1;setTimeout(T.reallow,T.delay)}else T.runAfterReallow=!0})};this.infinite_scrolling_ensure_loading_scroll();z.addEventListener("scroll",this.ScrollingHandler,{passive:!0})};this.installFixedGridHeader=function(){if(!this.usePaging&&!this.InfiniteScrolling&&!this.isFreestyle&&this.grid.gxHeight&&0<this.grid.rows.length){var z=this.getContainerControl();if(z){var E=l(z),L=this,J=this.getGridInnerTableId();z=l("#"+J);var M=
z.find("tbody tr:first").children(),Q=l("#"+J+"> tbody"),R=l("#"+J+"> thead > tr"),T=l("#"+J+"> thead");J=gx.util.browser.isOldIE();this.fixedContainerWidth||(this.fixedContainerWidth=z.width());this.fixedColumnsWidth||(this.fixedColumnsWidth=M.map(function(){return l(this).width()}).get());E.addClass("gx-infinite-scrolling-container");if(!this.width||J)J?(E.addClass("gx-grid-fixed-header-ie7"),E.wrap("<div style='position:relative;'>"),z.css("width",""),E.width(this.fixedContainerWidth+l.position.scrollbarWidth()+
2),M=T.position(),R.css("top",M.top),M=R.outerHeight(!0),E.css("paddingTop",gx.dom.addUnits(M,"px")),z.attr("data-bkgstyle",""),M=z.css("background-color"),T=R.css("background-color"),!M||T&&"transparent"!==T||R.css("background-color",M)):z.width(this.fixedContainerWidth+l.position.scrollbarWidth()+2);0<this.fixedColumnsWidth.length&&(z.find("thead tr").children().each(function(U,aa){l(aa)[0].style.visibility=0<L.fixedColumnsWidth[U]?"":"hidden";l(aa)[0].style.width=L.fixedColumnsWidth[U]+"px"}),
this.fixColumnsWidth(this.fixedColumnsWidth));Q.addClass("gx-infinite-scrolling-element");E=J?E:Q;z.css("max-height","");E.css({"max-height":gx.dom.addUnits(this.grid.gxHeight,this.grid.gxHeight==this.height?this.heightUnit:"px")})}}};this.handleInfiniteScrolling=function(){if(this.InfiniteScrolling){var z=this.getContainerControl();if(z){var E=l(z);E.removeClass("gx-infinite-scrolling-container");if(0===this.grid.rows.length)this.emptyFirstLoad=!0,this.initialPageSize=this.grid.pageSize;else{var L=
this,J=this.getGridInnerTableId();if(1==this.ScrollType){var M=window;this.fixedColumnsWidth=[]}else{this.ScrollingHeight&&l(M).css({height:this.ScrollingHeight});var Q=l("#"+J),R=Q.find("tbody tr:first").children(),T=l("#"+J+">tbody"),U=l.grep(this.grid.columns,function(ja){return 1==ja.visible}).length;this.fixedColVisibleCount!=U&&(this.fixedColVisibleCount=U,this.isFreestyle||(this.ScrollingElement&&l(this.ScrollingElement).removeClass("gx-infinite-scrolling-element"),Q.find("thead tr").children().each(function(ja,
qa){l(qa)[0].style.visibility="";l(qa)[0].style.width=""}),this.fixedColntainerWidth||(this.fixedColntainerWidth=Q.width()),this.fixedColumnsWidth=R.map(function(){return this.offsetWidth}).get()));E.addClass("gx-infinite-scrolling-container");this.isFreestyle||Q.width(this.fixedColntainerWidth+l.position.scrollbarWidth()+2);!this.isFreestyle&&0<this.fixedColumnsWidth.length&&(Q.find("thead tr").children().each(function(ja,qa){l(qa)[0].style.visibility=0<L.fixedColumnsWidth[ja]?"":"hidden";l(qa)[0].style.width=
L.fixedColumnsWidth[ja]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));M=0<T.length?T[0]:z;l(M).addClass("gx-infinite-scrolling-element")}this.ScrollingHeight&&1!=this.ScrollType&&l(M).css({height:this.ScrollingHeight});this.ScrollingElement=M;this.infinitScrollingInstalled=!0;z=this.InverseLoading?this.grid.firstItemSelector:this.grid.lastItemSelector;var aa=this.infinite_scrolling_before_scroll.closure(this),S;!this.ScrollingHeight&&(this.isFreestyle||this.grid.rows.length>=this.grid.pageSize&&
0<this.grid.pageSize)&&(1!=this.ScrollType&&(this.emptyFirstLoad?($firstRow=Q.find("tbody tr:first"),0<$firstRow.outerHeight()&&0<this.initialPageSize&&(S=$firstRow.outerHeight()*this.initialPageSize)):S=l(M).height()-2,0<S&&l(M).css({height:S})),this.ScrollingHeight=S);if(M){var Z=0,X=function(){var ja;if(10==Z)return Z=0,!1;(ja=this.InverseLoading?0==M.scrollTop:1==this.ScrollType?gx.popup.ispopup()?document.body.scrollHeight<document.body.clientHeight:document.body.scrollHeight<=document.body.clientHeight:
M.clientHeight==M.scrollHeight)&&Z++;return ja}.closure(this),ia=function(){L.InverseLoading&&(M.scrollTop=M.scrollHeight);this.hide_loading_message();ea()}.closure(this),ea=function(){if(!this.grid.isLastPage()&&X())return aa(),this.grid.changeGridPage("NEXT",!1).then(ia())}.closure(this);gx.lang.requestAnimationFrame(function(ja,qa,ra,la){ea();this.installScrollListener(ja,qa,ra,la)}.closure(this,[this.ScrollingElement,J,T,z]))}}}}};this.returnColumnContext=function(z){z="SPAN"==z.nodeName?gx.dom.spanValue(z):
gx.fn.getControlValue_impl(z.id);return null!=z?z:""};this.returnRowData=function(z){var E={};if(z=this.grid.getRowByGxId(z.gxId))for(var L=this.grid.columns.length,J=0;J<L;J++){var M=this.grid.columns[J].gxAttName;""!=M&&(E[M]=z.values[J])}return E};this.returnGridData=function(){for(var z=[],E=this.grid.rows.length,L=0;L<E;L++){var J={};z[L]=J;for(var M=this.grid.rows[L],Q=this.grid.columns.length,R=0;R<Q;R++){var T=this.grid.columns[R].gxAttName;""!=T&&(J[T]=M.values[R])}}return z};this.doDrop=
function(z){this.getNewRows(void 0!=z.length?z.length:1,null,function(E){this.addDropedRows(E,z)})};this.addDropedRows=function(z,E){z.gxHiddens&&gx.fn.setJsonHiddens(null,z.gxHiddens);z=z.gxContainer?z.gxContainer:z;var L=E.length;if(void 0!=L)for(var J=0;J<L;J++)this.setDroppedRow(z[J],E[J]);else this.setDroppedRow(z[0],E);this.setNewRows(z)};this.setDroppedRow=function(z,E){for(var L=this.grid.columns.length,J=0;J<L;J++){var M=z.Props[J],Q=this.grid.columns[J].gxAttName,R="";""!=Q&&void 0!=E[Q]&&
(R=E[Q]);M.Value=R;M.FormattedValue=R}};this.getRowAsTypes=function(){for(var z=[],E=this.grid.columns.length,L=0;L<E;L++){var J=this.grid.columns[L].gxAttName;""!=J&&z.push(J)}return z};this.addRows=function(z,E){var L=z.Count;E=void 0===E?-1:E;this.grid.rowsValues=z.values;for(var J=0;J<L;J++)this.addRow(z[J],-1===E?-1:E+J);0===E&&(this.grid.rows=this.grid.rows.slice(0,Number(gx.fn.getHidden(this.getHiddenName("Rows")))))};this.lastRowIsModified=function(){if(0==this.grid.rows.length)return!1;var z=
this.grid.rows[this.grid.rows.length-1];return z.gxExists()||z.gxIsMod()?!0:!1};this.getNewRows=function(z,E,L){L=void 0!=L?L:this.setNewRows;var J=gx.util.browser.isFirefox()?"keypress":"keydown";null!=E&&((E.type!=J||32!=E.charCode&&32!=E.keyCode&&13!=E.keyCode)&&"click"!=E.type||0!=this.grid.rows.length&&!this.lastRowIsModified())?null==E||32!=E.keyCode&&13!=E.keyCode||gx.evt.cancel(E,!0):(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,z+this.lastRowId,
this.lastRowId+1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,L),gx.csv.pkDirty=!1,null!=E&&gx.evt.cancel(E,!0))};this.setNewRows=function(z){return this.setNewRows_impl(z,function(E){this.refreshGrid({loadChildGrids:!1});this.grid.execShowFunction&&this.grid.execShowFunction()})};this.loadNewRows=function(z){z.gxHiddens&&gx.fn.setJsonHiddens(null,z.gxHiddens);z=z.gxContainer?z.gxContainer:z;return this.setNewRows_impl(z,function(E){this.loadGrid({rowProps:E,isPostback:!0,
addRows:!0})})};this.setNewRows_impl=function(z,E){z.gxHiddens&&gx.fn.setJsonHiddens(null,z.gxHiddens);z=z.gxContainer?z.gxContainer:z;if(void 0!=z.Count){var L;this.grid.rowsValues||(this.grid.rowsValues=[]);this.grid.rowsValues=this.grid.rowsValues.concat(z.values);for(L=0;L<z.Count;L++){var J=this.addRow(z[L]);gx.fn.setCurrentGridRow(this.gridId,J.gxId)}0<z.Count&&(this.addingRows=!0,E.call(this,z),this.addingRows=!1,this.setFocusFirstControl(z[0]))}return J};this.gxNewRowFocused=function(z){z.style.textDecoration=
"underline";var E=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(z,E,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(z){var E=gx.evt.source(z);void 0!=E&&z.ctrlKey&&46==z.keyCode&&(this.setRowDeleted(E),gx.evt.cancel(z,!0))};this.gxHasDuplicateKey=function(){for(var z=[],E=this.grid.rows,L=E.length,J=0;J<L;J++){var M=E[J];if((M.gxExists()||M.gxIsMod())&&!M.gxDeleted()){for(var Q="",R=M.gxKeyValues.length,T=0;T<R;T++)Q+=M.gxKeyValues[T].toString();
if(void 0!=z[Q])return!0;z[Q]=1}}return!1};this.columnIndexInKey=function(z){for(var E=this.lvlKey.length,L=0;L<E;L++)if(this.lvlKey[L]==z)return L;return-1};this.refreshVars=[];this.addRefreshingVar=function(z){if(!gx.lang.emptyObject(z)){var E="",L=function(){this.filterVarChanged()};this.refreshVars[this.refreshVars.length]=z;if(z.fld){var J=gx.dom.el(this.gxComponentContext+z.fld,!1,!0);if(void 0!=J&&gx.lang.emptyObject(z.hc)&&(E="radio"==J.type||"checkbox"==J.type?["click"]:"SELECT"==J.tagName?
"change":gx.evt.eachKeyAutorefreshType(z.type)?["keyup","input"]:"blur",""!=E))if("radio"==J.type){J=gx.dom.byName(this.gxComponentContext+z.fld);z=J.length;for(var M=0;M<z;M++){gx.evt.attach(J[M],E,L,this);var Q=J[M].labels&&J[M].labels[0];Q&&gx.evt.attach(Q,E,function(){gx.lang.doCallTimeout(L,this,[],0)},this)}}else"search"==J.type&&(E=[E,"search"]),gx.evt.attach(J,E,L,this)}else if((E=this.parentObject.VarControlMap[z.rfrVar])&&(E=this.parentObject.getValidStructFld(E.id))&&E.isuc)for(J in E.ucInstances)E.ucInstances.hasOwnProperty(J)&&
(E.ucInstances[J].autoRefreshFn=L.closure(this))}};this.refreshParms=[];this.addRefreshingParm=function(z){gx.lang.emptyObject(z)||(this.refreshParms[this.refreshParms.length]=z)};this.doRefresh=function(){var z=this.getRefreshParmsUrl();this.callAsyncRefresh(z)};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var z=this.getRefreshParmsUrl();this.lastRefreshParms!=z&&(this.lastRefreshParms=z,this.callAsyncRefresh())}else this.parentObject.conditionsChanged=
this.conditionsChanged()};this.conditionsChanged=function(){for(var z=this.refreshVars.length,E=0;E<z;E++){var L=this.refreshVars[E];if("undefined"==typeof L.rfrVar){var J=gx.fn.getHidden(this.gxComponentContext+"GXH_"+L.fld);L=L.val();if(void 0!==J&&J!=L)return!0}}return!1};this.getRefreshParmsUrl=function(z){return this.getParmsValues(z,this.refreshParms,!0).join(",")};this.getParmsValues=function(z,E,L){var J=gx.O,M=E.length,Q=[];gx.setGxO(this.parentObject);for(var R=function(ja,qa,ra,la){!0===
ra&&(qa=gx.ajax.ControlValuesObject(qa,ja))&&la.push(encodeURIComponent(gx.json.serializeJson(qa)));la.push(ja)},T=0;T<M;T++){var U=E[T];if(U&&("function"==typeof U.c2v&&U.c2v(),gx.fn.call_v2bc(U,gx.O),"undefined"!=typeof U.rfrVar)){var aa=gx.fn.vStructForVar(U.rfrVar);if(!aa&&(aa=gx.fn.getVarControlMapForVar(U.rfrVar))&&!z){var S=this.parentObject.getValidStructFld(aa.id);if(S&&S.isuc){var Z=S&&S.grid?gx.fn.currentGridRowImpl(S.grid):void 0;(S.getUCInstance(Z)||S.uc).execC2VFunctions()}}if(aa&&("undefined"==
typeof U.rfrProp||this.isValueProperty(U.rfrProp)))var X=aa.type}if("undefined"!=typeof U.rfrVar){var ia;S=ia=Z=void 0;if("undefined"!=typeof U.rfrProp){var ea;"undefined"!=typeof U.gxAttId&&(ea=this.grid.getColumnByGxAttId(U.gxAttId));ea||(ea=this.grid.getColumnForVar(U.rfrVar));if(ea){if(ia=U.rfrProp.toLowerCase(),S=ea.hasOwnProperty(ia)?ea[ia]:ea.gxControl[ia],!aa||aa.fmt!==gx.html.controls.formats.RAW_HTML&&aa.fmt!==gx.html.controls.formats.HTML||(S=gx.lang.htmlDecode(S)),this.isValueProperty(ia)&&
ea.gxControl.type==gx.html.controls.types.image&&(S=gx.util.removeBaseUrl(S)),Z=this.parentObject.getValidStruct(ea.gxId))this.isValueProperty(ia)?X=Z.type:"enabled"===ia||"visible"===ia?(X="int",S=gx.lang.gxBoolean(S)?1:0):X=""}else S=""}else"undefined"!=typeof this.parentObject.VarControlMap[U.rfrVar]&&(ia=this.parentObject.VarControlMap[U.rfrVar].id),gx.lang.emptyObject(this.parentObject[U.rfrVar])?"undefined"==typeof S&&"undefined"!=typeof ia&&(S=gx.fn.getHidden(this.gxComponentContext+ia)):S=
this.parentObject[U.rfrVar],"object"==typeof S&&"date"!=X&&"dtime"!=X&&(S=gx.json.serializeJson(S));S="undefined"==typeof S?"":S;R(this.getFormattedParm(S,X),U.rfrVar,(!U.rfrProp||"Value"===U.rfrProp)&&L,Q)}else"string"==typeof U.gxGrid?(S=gx.O.getGridByBaseName(U.gxGrid),"string"==typeof U.rfrProp&&"Rows"==U.rfrProp&&Q.push(S?S.grid.pageSize:9999)):gx.lang.emptyObject(U.hc)?(R(this.getFormattedVStructParm(U),U.gxvar,(!U.rfrProp||"Value"===U.rfrProp)&&L,Q),gx.fn.setHidden(this.gxComponentContext+
"GXH_"+U.fld,U.val())):(S=gx.fn.getHidden(this.gxComponentContext+"GXH_"+U.fld),Q.push(encodeURIComponent(z&&"undefined"!==typeof S?S:this.parentObject[U.hc])))}this.parentObject.IsComponent&&Q.push(encodeURIComponent(this.parentObject.CmpContext));gx.setGxO(J);return Q};this.initRefreshParms=function(){this.parentObject.autoRefresh&&(this.lastRefreshParms=this.getRefreshParmsUrl(!0))};this.isValueProperty=function(z){return"undefined"!=typeof z&&"value"==z.toLowerCase()};this.getFormattedVStructParm=
function(z){if("date"==z.type||"dtime"==z.type){var E=gx.dom.el(this.gxComponentContext+z.fld);E="undefined"!=typeof E.value?E.value:gx.dom.spanValue(E)||E}else E=z.val();return this.getFormattedParm(E,z.type)};this.getFormattedParm=function(z,E){"date"===E?z=gx.date.urlDate(z,gx.dateFormat):"dtime"===E&&(z=gx.date.urlDateTime(z,gx.dateFormat));return encodeURIComponent(z)};this.callAsyncRefresh=function(z,E){gx.evt.refreshGridCallback||(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&(window.clearTimeout(this.refreshTimer),
this.refreshTimer=null,gx.evt.setReady(!0,"callAsyncRefresh"));gx.evt.setReady(!1,"callAsyncRefresh");var L=gx.util.executionContext.getContext();this.refreshTimer=window.setTimeout(function(){gx.util.executionContext.changedContext(L)||(this.autoRefreshing||gx.evt.processing?this.callAsyncRefresh(z):(gx.fx.obs.addObserver("grid.onafterrefresh",gx.evt,gx.evt.notifyRefreshGrid,{single:!0}),"undefined"===typeof z&&(z=this.getRefreshParmsUrl()),gx.ajax.refreshGrid(this,z),gx.evt.setReady(!0,"callAsyncRefresh"),
this.refreshTimer=null))}.closure(this),E||400)};this.updatePropsHidden=function(z){var E=this.getDataHiddenName();gx.fn.setHidden(E,z)};this.updatePagingVarsAfterRefresh=function(z){if(this.usePaging){var E=this.grid.gxGridName.toUpperCase()+"_nEOF",L=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(z[E],z[L])}};this.getSelection=function(){if(this.allowSelection)for(var z=this.grid.rows.length,E=0;E<z;E++)if(this.grid.rows[E].selected)return E;return-1};this.setNextRowSelected=
function(z){var E=Math.min(this.getSelection()+1,this.grid.rows.length);this.setSelection(E,z);this.grid.keepGridItemVisible(E)};this.setPreviousRowSelected=function(z){var E=Math.max(this.getSelection()-1,0);this.setSelection(E,z);this.grid.keepGridItemVisible(E)};this.setProperty=function(z){if(z.Selectedindex)if(z=Number(z.Selectedindex),-1==z)this.setSelection(z);else return this.setSelectionRowCtrl(this.grid.getRowByPos(z));return!1};this.setSelection=function(z,E){if(this.allowSelection){if(-1==
z)return this.grid.setRowSelected(void 0,"",void 0,void 0,E),!0;if(0<=z)return z=this.getRowCtrlByIdx(z),this.setSelectionRowCtrl(z,E)}return!1};this.setSelectionRowCtrl=function(z,E){return this.allowSelection&&z?(this.grid.setRowSelected(z,z.getAttribute("data-gxrow"),void 0,void 0,E),!0):!1};this.getRowCtrlByIdx=function(z){return gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+gx.grid.rowId(z+1))};this.blankGridRows=function(){this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage);
this.InfiniteScrolling&&this.additiveResponse||(this.lastRowId=0,this.grid.rows=[],delete this.grid.rowsValues)};this.setRowDeleted=function(z){z="string"==typeof z?this.grid.getRowByGxId(z):void 0==z.gxId?this.getRowFromHtmlCtrl(z):z;z.setDeleted(!z.gxDeleted());this.setRowModified(z.gxId);gx.fn.removeGridRow(z.gxId,this.gridId.toString());var E=new gx.text.stringBuffer;parseInt(z.gxId);this.grid.renderRow(z,!1,z.id,0,this.grid.lastRenderedRow,this.gxIsFreestyle&&1<this.gxGridCols,E,void 0,this.grid.gxBuffer.toString(),
this.grid.columns.length,void 0,void 0,void 0,void 0,this.grid.fromCollection,this.grid.columns);z=E.toString();E=(E=z.match(/id=.(\w*)./))&&gx.dom.el(E[1]);E.outerHTML=z;gx.plugdesign.applyTemplateObject(E);gx.dom.indexElements()};this.setFocusFirstControl=function(z){for(var E=0;E<z.Count;E++){var L=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId);if(L&&(L=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[E].htmlName+"_"+L.gxId),void 0!=L&&gx.fn.isAccepted(L))){gx.grid.lastFocusCtrl=
this.grid.columns[E].gxId;gx.fn.setFocus(L);break}}};this.instanciateRow=function(z){var E=gx.O,L,J;gx.setGxO(this.parentObject);gx.csv.instanciatedRowGrid=this;try{var M=z;"string"==typeof M&&(M=this.grid.getRowByGxId(z));if(null!=M){gx.fn.setCurrentGridRow(this.gridId,M.gxId);var Q=M.values.length;for(J=0;J<Q;J++){var R=this.grid.columns[J];if(""!=R.gxId){var T=this.parentObject.getValidStruct(R.gxId);T&&(this.useUserControlModelValues()?T.v2v&&(T.v2v(this.grid.properties[M.id][R.index].value),
gx.fn.setHidden(this.grid.properties[M.id][R.index].id,this.grid.properties[M.id][R.index].value)):"function"==typeof T.c2v&&T.c2v())}}}else for(gx.fn.setCurrentGridRow(this.gridId,z),Q=this.grid.columns.length,J=0;J<Q;J++)R=this.grid.columns[J],""!=R.gxId&&(T=this.parentObject.getValidStruct(R.gxId))&&"function"==typeof T.c2v&&T.c2v();var U=this.parentObject.UserControls;for(L in U)if(U.hasOwnProperty(L)){var aa=U[L];aa.GridId===this.gridId&&aa.GridRow===M.gxId&&(this.parentObject[aa.DesignContainerName]=
aa)}}catch(S){gx.dbg.logEx(S,"gxgrid.js","instanciateRow")}gx.setGxO(E);return!0};this.setRenderProp=function(z,E,L,J){this.grid.setProp(z,E,L,J)};this.setRenderDynProp=function(z,E,L,J){this.grid.setDynProp(z,E,L,J)};this.addRenderEventHandler=function(z,E){this.grid.addEventHandler(z,E)};this.addRenderV2CFunction=function(z){this.grid.addV2CFunction(z)};this.addRenderC2VFunction=function(z){this.grid.addC2VFunction(z)};this.cleanup=function(){gx.grid.clearActiveGrid(this);this.parentGrid=this.parentObject=
null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=null;this.grid.columns=null;this.grid.rows=null;this.grid=this.grid.selectedRows=null;this.unInstallScrollListener()};this.loadGrid=function(z){gx.dbg.logPerf("loadGrid_"+this.gridName);z=z||{};var E=z.rowProps,L=z.isPostback,J=z.addRows;z=z.isNestedLoad;this.isNestedLoad=this.isNestedLoad||z;z=gx.O;gx.setGxO(this.parentObject);this.isLoading=!0;var M=this.parentObject.isTransaction();
M&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this));if(void 0!=E){var Q=E.GridName?E[E.GridName.toUpperCase()+"_nEOF"]:void 0,R=E.GridName?E[E.GridName.toUpperCase()+"_nFirstRecordOnPage"]:void 0,T=this.getContainerControl();M=this.InfiniteScrolling&&0===R&&Q&&this.boundedCollType?0:-1;if(null!=T){this.autoRefreshing?this.updatePagingVarsAfterRefresh(E):this.updatePagingVars(Q,R);L&&!J&&(E.values=this.getValuesFromHidden(),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&
this.backupComponents());this.deleteGridData();this.grid.setContainerDelayed(T);this.additiveResponse||this.clearHiddens();this.setRowsProperty();L=this.getSelection();this.autoRefreshing?this.updatePagingVarsAfterRefresh(E):this.updatePagingVars(Q,R);J||-1!==M||this.blankGridRows();this.setHtmlTags(E);this.setGridStyles(E);this.setDeleteMethod(E.DeleteMethod);this.setSelectionAndHover(E.Allowselection,E.Selectioncolor,E.Allowhover,E.Hovercolor,E.Selectedindex);this.setCollapsing(E.Allowcollapsing,
E.Collapsed);this.setSflColumns(E.SflColumns);this.setColumnsProperties(E.Columns);J||this.addRows(E,M);this.updateOldComponents();this.initRefreshParms();var U=this.getGridInnerTableId();U=void 0!==l("#"+U).attr("data-gx-grid-nodata");U=this.refreshGrid({addRows:J&&!U,atRow:M,fromAutoRefresh:this.autoRefreshing});this.setProperty({Selectedindex:L+1})}}else this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=M||this.isFreestyle?9999:this.gridRows,T=this.getContainerControl(),null!=T?(this.grid.setContainerDelayed(T),
J=this.getRowsFromHidden(),null!=J?(J.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(J),this.setGridStyles(J),this.setDeleteMethod(J.DeleteMethod),this.setSelectionAndHover(J.Allowselection,J.Selectioncolor,J.Allowhover,J.Hovercolor,J.Selectedindex),this.setCollapsing(J.Allowcollapsing,J.Collapsed),this.setSflColumns(J.SflColumns),this.setColumnsProperties(J.Columns),this.updatePagingVars(),this.addRows(J),this.initRefreshParms(),this.addingRows=!0,U=this.refreshGrid(),this.addingRows=
!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),U=this.refreshGrid())):U=this.loadWrappedGridChilds();this.isLoading=!1;gx.setGxO(z);gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded");return U};this.loadWrappedGridChilds=function(){var z=l.Deferred();try{var E=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId);if("undefined"!=typeof E){E=parseInt(E);for(var L=0;L<E;L++)for(var J=this.grid.columns.length,M=0;M<J;M++){var Q=this.grid.columns[M];
Q.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(L+1),c:Q})}this.setupGridUsercontrols(this.GridUserControls)}}catch(R){gx.dbg.logEx(R,"gxgrid.js","loadWrappedGridChilds")}z.resolve();return z};this.getRowsFromHidden=function(){var z=this.getDataHiddenName(),E=gx.fn.getHidden(z);gx.json.setNonSerializable(z);return"string"==typeof E?gx.json.evalJSON(E):"object"==typeof E?E:null};this.deleteGridData=function(){var z=this.getDataHiddenName();gx.json.setNonSerializable(z)};
this.getValuesFromHidden=function(){var z=this.getValuesHiddenName(),E=gx.fn.getHidden(z);gx.lang.emptyObject(E)&&(E=gx.fn.getControlValue(z));gx.json.setNonSerializable(z);z=null;null!=E&&""!=E&&(z=gx.json.evalJSON(E));return z};this.getContainerControlId=function(){return void 0!=this.gxContainerDivName?this.gxContainerDivName:this.grid.gxCmpContext+this.containerName+"Div"};this.getContainerControl=function(){if(!this.gxContainerCtrl){var z=gx.dom.byId(this.getContainerControlId());z&&(this.gxContainerCtrl=
z,z.setAttribute("data-gxgridid",this.gridId.toString()),gx.dom.addClass(z,"gx-grid"),this.isResponsive&&gx.dom.addClass(z,"gx-responsive-grid"),gx.dom.addClass(z,this.isFreestyle?"gx-freestyle-grid":"gx-standard-grid"),z.gxGridName=this.grid.gxGridName)}return this.gxContainerCtrl};this.getHiddenSuffix=function(){return""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId};this.getDataHiddenName=function(){return void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+
this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return void 0!=this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};this.setColumnsProperties=function(z){try{if(!gx.lang.emptyObject(z))for(var E=z.length,L=0;L<E;L++){var J=this.grid.columns[L];for(Q in z[L]){var M=z[L][Q];var Q=this.fixColumnPropName(Q);if(this.isUsercontrol){var R=gx.uc.getClientProperty(Q,M);J[R.name]=R.value}J[Q.toLowerCase()]=
M}this.checkPromptColumn(J)}}catch(T){gx.dbg.logEx(T,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(z){try{if(this.isPromptColumn(z)){var E=gx.fn.getAttachedCtrl(z.htmlName);if(E&&E.info&&E.info.controls){for(var L=!1,J=!1,M=E.info.controls.length,Q=0;Q<M;Q++){var R=this.grid.getColumnByGxId(E.info.controls[Q]),T=gx.lang.gxBoolean(R.enabled),U=gx.lang.gxBoolean(R.visible);T&&(J=!0);U&&(L=!0)}J||(z.enabled="0");L||(z.visible="0")}}}catch(aa){gx.dbg.logEx(aa,"gxgrid.js","checkPromptColumn")}};
this.fixColumnPropName=function(z){return"Horizontalalignment"==z?"align":z};this.setDeleteMethod=function(z){if(this.parentObject.isTransaction()){var E="DSP"==this.parentObject.Gx_mode;!E&&z&&"none"==z&&(E=!0);this.deleteMethod=E?gx.grid.deleteMethods.none:gx.grid.deleteMethod}};this.setSelectionAndHover=function(z,E,L,J,M){try{"undefined"!=typeof z&&(this.allowSelection=gx.lang.gxBoolean(z)),"undefined"!=typeof E&&(this.selectionColor=null),"undefined"!=typeof J&&(this.hoverColor=null),this.allowSelection&&
"undefined"!=typeof E&&("undefined"!=typeof L&&(this.allowHovering=gx.lang.gxBoolean(L)),E=eval(E),this.selectionColor="undefined"!=typeof E[0]?gx.color.fromRGB(E[0],E[1],E[2]):gx.color.html(E),this.allowHovering&&"undefined"!=typeof J&&(J=eval(J),this.hoverColor="undefined"!=typeof J[0]?gx.color.fromRGB(J[0],J[1],J[2]):gx.color.html(J))),this.grid.gxAllowSelection=this.allowSelection,this.grid.gxSelectionColor=this.selectionColor,this.grid.gxAllowHovering=this.allowHovering,this.grid.gxHoverColor=
this.hoverColor,this.grid.selectedRows=[],M=Number(M||0),0<M&&(this.grid.Selectedindex=M-1)}catch(Q){gx.dbg.logEx(Q,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(z,E){try{void 0!==z&&(this.allowCollapsing=gx.lang.gxBoolean(z),this.grid.gxAllowCollapsing=this.allowCollapsing),void 0!==E&&(this.collapsed=gx.lang.gxBoolean(E),this.grid.gxCollapsed=this.collapsed)}catch(L){gx.dbg.logEx(L,"gxgrid.js","setCollapsing")}};this.setSflColumns=function(z){try{gx.lang.emptyObject(z)&&0!==
z||(this.gridCols=gx.grid.validGridColsValue(parseInt(z)),this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols))}catch(E){gx.dbg.logEx(E,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(z){return z.gxAttId.indexOf&&-1!=z.gxAttId.indexOf("prompt_")?!0:!1};this.setRowsProperty=function(){var z=gx.fn.getHidden(this.getHiddenName("Rows"));if(null!=z){try{this.gridRows=parseInt(z,10)}catch(E){gx.dbg.logEx(E,"gxgrid.js",
"setRowsProperty")}this.grid.pageSize=this.gridRows*(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var z=this.grid.columns.length,E=0;E<z;E++){var L=this.parentObject.getValidStruct(this.grid.columns[E].gxId);L&&L.gxsgprm&&L.gxsgprm.installed&&(L.gxsgprm.installed={})}};this.refreshCollection=function(z){try{this.blankGridRows();this.updatePagingVars();this.initRefreshParms();for(var E=z.length,L=0;L<E;L++){for(var J={Props:[]},M=z[L],Q=this.grid.columns.length,R=0;R<
Q;R++){var T=this.grid.columns[R];J.Props[T.index]=[M[T.gxAttName]]}this.addRow(J)}this.refreshGrid({loadChildGrids:!1,fromAutoRefresh:!1,fromCollection:!0})}catch(U){gx.dbg.logEx(U,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(z){var E=l.Deferred(),L=[E];z=z||{};var J=z.loadChildGrids,M=z.fromAutoRefresh,Q=z.fromCollection,R=z.isNestedLoad,T=z.immediateApplyInfiniteScroll;this.isNestedLoad=this.isNestedLoad||R;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=
[];this.GridControls=[];this.ColumnPropertiesAfterRender=[];this.additiveResponse||(z.addRows||this.clearDefaultEventHandlers(),this.clearHiddens());this.crearInstalledSuggests();this.setRowsProperty();void 0==this.parentRow||gx.lang.emptyObj(this.parentRow.Grids)||(R=this.parentRow.Grids[this.realGridName],null!=R&&(this.setHtmlTags(R),this.setGridStyles(R),this.setColumnsProperties(R.Columns),this.addingRows||this.parentRow.IsNew&&this.addRows(R)));var U=!1;R=function(){E.resolve()};var aa=function(){gx.fn.setPromptlisteners(this.getContainerControl());
this.setupGridControls(this.GridControls);this.setupCellAttributes(this.IsValidState);this.setupFixedColumnProperties();this.setupGridUsercontrols(this.GridUserControls);this.installFixedGridHeader();var Z=this,X=this.getGridInnerTableId(),ia=this.grid.scroll_last_row_selector(this.gridRows),ea=this.grid.scroll_nth_row_selector(),ja=this.grid.scroll_first_row_selector(this.gridRows);this.grid.firstItemSelector="#"+X+ja;this.grid.lastItemSelector="#"+X+ia;this.grid.nthItemSelector=function(ra,la){return"#"+
X+ea(ra,la)};var qa=function(ra){ra=l.map(ra,function(la,sa){return la.onLoadDeferred});l.when.apply(l,ra).done(function(){if(Z.InfiniteScrolling)if(T)Z.handleInfiniteScrolling();else{var la=Z.getContainerControl();gx.fn.isVisible(la)?gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",Z,Z.handleInfiniteScrolling,{single:!0}):gx.ol(Z.handleInfiniteScrolling,Z):gx.dom.getIntersectionObserver(function(sa){var ta=new sa(function(){gx.fn.isVisible(la)&&(ta.disconnect(),Z.handleInfiniteScrolling())},
{root:document.body});ta.observe(la)})}E.resolve()})};this.setupGridComponents(this.GridComponents).then(function(){var ra=l.map(Z.GridComponents,function(la,sa){return gx.pO.getWebComponent(la.p)});Z.isFreestyle&&(L=L.concat(Z.loadRowsGrids(U,z)));gx.fx.obs.notify("grid.onafterrender",[Z.grid,Z.isNestedLoad]);Z.isNestedLoad?(Z.isNestedLoad=!1,qa(ra)):Z.additiveResponse?gx.pendingCmps?gx.fx.obs.addObserver("webcom.all_rendered",Z,function(){Z.infinite_scrolling_after_scroll()}):Z.infinite_scrolling_after_scroll():
Z.applyTemplateObject().then(function(){qa(ra)});Z.additiveResponse=!1});this.additiveResponse&&gx.dom.indexElements();this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();this.updateRcdCount();this.setDefaultEventHandlers();this.setSelection(this.grid.Selectedindex)};aa=aa.closure(this);this.grid.doSort();z.ScrollingElement=this.ScrollingElement;0==J?this.grid.render(U,!1,Q,aa,R,z):(U=!z.onSetSort,this.grid.render(U,M,Q,aa,R,z));var S=l.Deferred();l.when.apply(l,L).done(function(){S.resolve()});
return S.promise()};this.getGridInnerTableId=function(){return this.gxComponentContext+this.containerName+"Tbl"};this.disposeTemplateObject=function(){gx.fx.obs.deleteObserverByKey(this.getContainerControl().id)};this.applyTemplateObject=function(z){z=z||{};var E=this.isFreestyle&&!this.parentObject.IsComponent?"."+gx.GxObject.WEBCOMPONENT_CLASS_NAME+" *":"";gx.$.extend(z,{selector:"#"+this.getContainerControl().id,excluded:E,observerKey:this.getContainerControl().id});return gx.plugdesign.applyTemplateObject(z)};
var pa="gx-wc-bkp_"+m+"_"+b;this.getComponentsBackupContainer=function(){var z=gx.dom.byId(pa);z||(z=document.createElement("div"),z.id=pa,z.style.display="none",document.body.appendChild(z));return z};this.destroyComponentsBackup=function(){var z=gx.dom.byId(pa);z&&z.parentNode&&gx.dom.removeControlSafe(z)};this.backupComponents=function(){try{if(!this.additiveResponse)for(var z=this.grid.rows.length,E=0;E<z;E++){for(var L=this.grid.rows[E],J=this.grid.columns.length,M=0;M<J;M++)if(this.grid.columns[M].gxControl.type==
gx.html.controls.types.webComponent){var Q=this.parentObject.getComponentPrefix(L.gxProps[M][0]),R=gx.dom.byId(this.gxComponentContext+"gxHTMLWrp"+Q+L.gxId);R&&(R.parentNode.removeChild(R),this.getComponentsBackupContainer().appendChild(R))}var T=L.gxGrids.length;for(M=0;M<T;M++){var U=L.gxGrids[M];U&&U.isFreestyle&&U.backupComponents()}}}catch(aa){gx.dbg.logEx(aa,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(z){var E=this.getContainerControl();if(!E)return[];var L=E.firstChild;
E=[];if(L.querySelectorAll)E=gx.fn.toArray(L.querySelectorAll("td[data-colindex='"+z+"'], th[data-colindex='"+z+"']"));else{var J=gx.dom.byTag("TD",L);L=gx.dom.byTag("TH",L);for(var M=0,Q=J.length;M<Q;M++)J[M].getAttribute("data-colindex")==z&&E.push(J[M]);J=0;for(M=L.length;J<M;J++)L[J].getAttribute("data-colindex")==z&&E.push(L[J])}return E};this.applyPropEntireColumn=function(z,E,L){z=this.getEntireGridColumn(z);for(var J=0;J<z.length;J++)gx.fn.setCtrlPropertyImpl(z[J],E,L)};this.setupFixedColumnProperties=
function(){for(var z=0;z<this.ColumnPropertiesAfterRender.length;z++){var E=this.ColumnPropertiesAfterRender[z];this.applyPropEntireColumn(E.colIndex,E.ptyName,E.ptyValue)}};this.addColPropertyAfterRender=function(z,E,L){L={colIndex:z,ptyName:E,ptyValue:L};z="gxpty"+E+z;(E=this.ColumnPropertiesAfterRender[z])?this.ColumnPropertiesAfterRender[E]=L:(E=this.ColumnPropertiesAfterRender.push(L)-1,this.ColumnPropertiesAfterRender[z]=E)};this.setupCellAttributes=function(z){for(var E in z){var L=z[E],J=
gx.dom.byId(E);if(J)for(var M in L)J.setAttribute(M,L[M])}};this.setupGridControls=function(z){for(var E=0,L=z.length;E<L;E++){var J=z[E],M=gx.dom.byId(J.hookId),Q=M.parentNode;Q&&(Q.insertBefore(J.el,M),gx.dom.removeControlSafe(M))}};this.setupGridComponents=function(){var z=function(L,J){var M,Q=L.length;for(M=0;M<Q;M++){var R=L[M];if(!1!==R.create){var T=gx.createComponent(R.n,R.p);if(null!=T){gx.addComponent(T);T.readServerVars();if(R.load)T.onload(void 0,!0);M==Q-1&&J.resolve()}}}},E=function(L){var J,
M=L.length;for(J=0;J<M;J++)gx.dom.removeClass(L[J],gx.GxObject.WEBCOMPONENT_LOADING_CLASS_NAME)};return function(L){var J=l.Deferred(),M,Q=L.length,R=[];0==Q&&J.resolve();var T=[];for(M=0;M<Q;M++){var U=L[M];if(!1===U.create){var aa=gx.dom.byId(U.existingEl);if(aa){var S=aa.parentNode;U=gx.dom.byId(U.el);gx.dom.removeControlSafe(aa);S.appendChild(U);T.push(U)}M==Q-1&&J.resolve()}else R.push(U.c)}gx.lang.requestAnimationFrame(E.closure(this,[T]));0<R.length&&gx.html.processCode(R.join(""),!1,z.closure(this,
[L,J]));this.destroyComponentsBackup();return J.promise()}}();this.setupGridUsercontrols=function(z){var E=z.length;gx.uc.StartRender();for(var L=0;L<E;L++){var J=z[L].r,M=z[L].c;J=gx.uc.getNew(this.parentObject,M.gxUCId,M.gxUCLastId,M.gxUCClassName,M.gxUCContainerName+"_"+J,M.gxUCControlName,M.gxUCFieldName,this.gridLvl,this.gridId,J);J.DesignContainerName=M.gxUCContainerName;J.setC2ShowFunction(M.gxShowFunc);for(var Q=M.gxC2VFuncs.length,R=0;R<Q;R++)J.addC2VFunction(M.gxC2VFuncs[R]);Q=M.gxV2CFuncs.length;
for(R=0;R<Q;R++)J.addV2CFunction(M.gxV2CFuncs[R],M.gxUCFieldName);J.setGridProperties();J.setGridEventHandlers();this.parentObject.setUserControl(J);J.execV2CFunctions(!0);J.execShowFunction()}gx.uc.EndRender()};this.triggerDatePickersSetup=function(z){for(var E=z.length,L=0;L<E;L++){for(var J=z[L].CtrlId,M=z[L].Grid,Q=z[L].Row,R=gx.O,T=null,U=gx.fn.controlIds(),aa=U.length,S=0;S<aa&&(T=gx.fn.validStruct(U[S]),T.grid!=M||R.CmpContext+T.fld+"_"+Q!=J);S++);null!=T&&void 0!=T.dp&&gx.fn.installDatePicker(J,
T,R,T.dp.f,T.dp.st,T.dp.wn,T.dp.mf,gx.fn.datePickerFormat(T.dp.pic,T.dp.dec,T.len),T.len,T.dp.dec)}};this.installImageControls=function(){var z=this.gxContainerCtrl,E=this.grid.newAdditiveRows?this.grid.newAdditiveRows.get(0):null;this.additiveResponse&&E&&E.childNodes[0]&&(z=E);z=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass,"",z);if(z[0]){E=0;for(var L=z.length;E<L;E++)gx.html.multimediaUpload.createControl(z[E])}};this.addComponentToDraw=function(z){this.GridComponents.push(z)};this.addUsercontrolToDraw=
function(z){this.GridUserControls.push(z)};this.addDatepickerToSetup=function(z){this.DatePickersControls.push(z)};this.addControlToReuse=function(z){z.el.parentNode&&gx.dom.removeControlSafe(z.el);this.GridControls.push(z)};this.loadRowsGrids=function(z,E){E=E||{};var L=[],J=this.grid.rows.length;for(E=this.additiveResponse||E.addRows?this.firstAdditiveRow:0;E<J;E++)L=L.concat(this.loadRowGrids(this.grid.rows[E],z));return L};this.loadRowGrids=function(z,E){for(var L=z.gxGrids.length,J=[],M=0;M<
L;M++){var Q=z.gxGrids[M];Q.grid.setContainerDelayed(gx.dom.byId(Q.gxContainerDivName));if(E){if(void 0!=Q.parentRow&&!gx.lang.emptyObj(Q.parentRow.Grids)){var R=Q.getDataHiddenName();gx.fn.setHidden(R,gx.json.serializeJson(Q.parentRow.Grids[Q.realGridName]))}J.push(Q.loadGrid({isNestedLoad:!0}))}else J.push(Q.refreshGrid({isNestedLoad:!0}));z.IsNew=!1}return J};this.updateRcdCount=function(){(this.hasForEachLine||this.parentObject.isTransaction())&&gx.fn.setHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+
this.gridId+(""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId),this.lastRowId.toString());var z=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+"_ROW");if(0==this.lastRowId||parseInt(z,10)>this.lastRowId)this.grid.instanciateSelectionVars("0000"),gx.fn.setCurrentGridRow(this.gridId,"")};this.updateControlValue=function(z,E,L){try{var J=this,M=L=L||gx.fn.currentGridRow(z.grid).toString(),Q=L.length;if(4<Q){var R=L.substring(4,Q);J=gx.fn.gridObj(this.gxComponentContext,
this.gridName+"_"+R,this.isMasterPageGrid);if(!J)return;M=L.substring(0,4)}var T=parseInt(M,10)-1;1==E&&J.setRowModified(L);var U=J.getColumnIndexByName(z.fld),aa=gx.dom.el(this.gxComponentContext+z.fld+"_"+L);J.updateRowValue(U,T,aa);return J}catch(S){gx.dbg.logEx(S,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(z,E,L){var J=z.lastIndexOf("_");if(-1!=J){var M=z.substring(0,J);J=z.substring(J+1);if(J=this.grid.getRowByGxId(J))if(M=this.grid.getColumnByHtmlName(M)){var Q=
this.parentObject[L.gxvar];"decimal"==L.type&&gx.lang.instanceOf(Q,Number)&&(Q=gx.num.toFixed(Q,L.dec));J.values[M.index]=Q;J.gxProps[M.index]||(J.gxProps[M.index]={});(z=gx.dom.el(z))&&"SELECT"==z.tagName&&(J.gxProps[M.index].Values=gx.dom.comboBoxToObj(z));J.gxProps[M.index].Value=Q;J.gxProps[M.index].FormattedValue=E}}};this.getColumnIndexByName=function(z){for(var E=this.grid.columns,L=E.length,J=0;J<L;J++)if(E[J].htmlName==z)return J;return-1};this.setRowModified=function(z){gx.fn.setHidden(this.grid.gxCmpContext+
"nIsMod_"+this.gridLvl.toString()+"_"+z,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(z)};this.validateRow=function(z){if(z)try{var E=z.getAttribute("data-gxgridid");gx.fn.setCurrentGridRow(E,z.gxrow);var L=gx.fn.lastGridControl(E);gx.csv.validControls(gx.csv.lastId,L+1,!0,gx.O)}catch(J){gx.dbg.logEx(J,"gxgrid.js","validateRow")}};this.updateRowValue=function(z,E,L){E=this.grid.getRowById(E);var J=this.grid.columns[z];"checkbox"==L.type&&
(L.value=L.checked?J.gxChecked:J.gxUnChecked);L=this.parentObject.getValidStruct(this.grid.columns[z].gxId).val(E.gxId);E.values[z]=L;gx.lang.emptyObject(E.gxProps[z])||(E.gxProps[z].Value=L,E.gxProps[z].FormattedValue=gx.fn.getControlValue(this.grid.columns[z].htmlName+"_"+E.gxId,"screen"));this.parentObject.isTransaction()&&(z=this.columnIndexInKey(J.gxAttId),-1!=z&&(E.gxKeyValues[z]=L));J.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+J.htmlName+"_"+E.gxId+
"_gxBlob",L)};this.expandCollapse=function(z,E){gx.evt.cancel(E,!0);E=gx.dom.byId(this.getGridInnerTableId());null!=E&&(this.collapsed?(l(E).removeAttr("data-gx-sr-only"),z.className="collapse-icon",z.src=gx.ajax.getImageUrl(gx,"collapseImage")):(l(E).attr("data-gx-sr-only",""),z.className="expand-icon",z.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,this.parentGrid?(z=this.gridName.lastIndexOf("_"),z=this.gridName.substring(z),z=this.gxComponentContext+
this.realGridName.toUpperCase()+"_Collapsed"+z):z=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(z,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(z){var E=z.gxrow;gx.lang.emptyObject(E)&&(E=z.id.lastIndexOf("_"),E=z.id.substring(E+1));return this.grid.getRowByGxId(E)};this.showContextMenu=function(z,E){this.contextMenu.show(z,E)}},contextMenu:function(c){this.gxgrid=c;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=
this.rowClicked=null;var d=new gx.text.stringBuffer;this.show=function(k,a){this.gxgrid.validateRow(k);this.contextEvent=a;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(a,!0);this.rowClicked=k;this.startMenu();d.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("</div>");this.endMenu()};this.startMenu=function(){d.clear();var k=this.getMenuCoords();d.append('<div onclick="').append(this.gxgrid.grid.gridObject()+
".contextMenu.contextMenuClicked(event);").append('" onmouseover="');d.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');d.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");d.append("top:"+k.top+"; left:"+k.left+";").append('">')};this.endMenu=function(){d.append("</div>");
var k=gx.dom.byId(this.controlName);if(null==k){k=document.createElement("SPAN");var a=document.createElement("SPAN"),b=document.createElement("SPAN"),f=document.createElement("IFRAME");k.id=this.controlName;a.id=this.controlName+"Shadow";b.id=this.controlName+"Shadow2";f.id=this.controlName+"GXiFrameIEHack";f.src="about:blank";f.style.zIndex=1;f.style.visibility="hidden";f.style.position="absolute";f.frameBorder="0";document.body.appendChild(k);document.body.appendChild(a);document.body.appendChild(b);
document.body.appendChild(f)}gx.dom.shouldPurge()&&gx.dom.purge(k,!0);k.innerHTML=d.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};this.getMenuCoords=function(){var k=0,a=0,b=this.contextEvent;if(b.pageX||b.pageY)k=b.pageX,a=b.pageY;else if(b.clientX||b.clientY)k=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{left:k,top:a}};
this.contextMenuClicked=function(k){k=gx.evt.source(k);this.handleContextMenuAction(k.id);this.hide()};this.handleContextMenuAction=function(k){switch(k){case "deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);break;case "undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},getPaddedRowId:function(c){c=""+c;return"0000".substring(0,4-c.length)+c},rowId:function(c){for(c=c.toString();4>c.length;)c="0"+c;return c},_init:function(){this.deleteMethod||(this.deleteMethod=
this.deleteMethods.images);this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||
(this.deletePosition=this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}}}(gx.$);
gx.grid.impl=function(l){return function(c){var d=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName=
"";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.gxParentRowId="";this.gxHoveredRowId=null;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnAutoHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";
this.pagingButtonNextClass="PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=c;this.container=null;this.setContainerDelayed=function(f){this.container=f};this.addColumn=function(f){f.isGxRemove()&&(f.visible=!1);var g=
this.columns.length;f.index=g;f.table=this;this.columns[g]=f;"undefined"!=typeof f.htmlName&&(this.columnsHtmlName[f.htmlName]=f);"undefined"!=typeof f.gxId&&(this.columnsGxId[f.gxId]=f);"undefined"!=typeof f.gxAttId&&(this.columnsGxAttId[f.gxAttId]=f);return f};this.getColumnByIndex=function(f){return this.columns[f]};this.getColumnByCtrlType=function(f){return l.map(this.columns,function(g){return g.gxControl.type==f?g:null})};this.addRow=function(f,g,m){m=-1===m||void 0===m?this.rows.length:m;
f.table=this;if(null!=f)return this.rows[m]=f,"undefined"!=typeof f.id&&(this.rowsById[f.id]=f),"undefined"!=typeof f.gxId&&(this.rowsByGxId[f.gxId]=f),gx.lang.booleanValue(g)&&this.render(),f};this.getColumnByHtmlName=function(f){var g=this.columnsHtmlName[f];if("undefined"==typeof g&&"undefined"!=typeof this.gxCmpContext&&this.gxCmpContext.length<f.length){var m=f.substring(0,this.gxCmpContext.length);m==this.gxCmpContext&&(f=f.substring(this.gxCmpContext.length,f.length),g=this.columnsHtmlName[f])}return g};
this.getColumnByGxId=function(f){return this.columnsGxId[f]};this.getColumnByGxAttId=function(f){return this.columnsGxAttId[f]};this.getColumnForVar=function(f){for(var g=0;g<this.columns.length;g++){var m=this.parentGxObject.getValidStruct(this.columns[g].gxId);if(m&&m.gxvar==f)return this.columns[g]}return null};this.getRowById=function(f){return this.rowsById[f]};this.getRowByGxId=function(f){return this.rowsByGxId[f]};this.setSort=function(f,g){f==this.sortColumn?this.ascSort=null==g?!this.ascSort:
gx.lang.booleanValue(g):(this.sortColumn=f,this.ascSort=null==g?!0:gx.lang.booleanValue(g));this.doSort();this.ownerGrid.refreshGrid({immediateApplyInfiniteScroll:!0,onSetSort:!0})};this.doSort=function(){-1!=this.sortColumn&&this.rows.sort(this.sort)};this.getControlName=function(f,g){return this.gxCmpContext+g.htmlName+"_"+f.gxId};this.getControlId=function(f,g){return this.getControlName(f,g)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/
this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(f){return this.gxCmpContext+"delete"+this.gxGridName+"_"+f};this.showDeleteImage=function(f){this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn()&&(f=gx.dom.byId(this.deleteImgId(f)))&&!gx.fn.isVisible(f)&&(f.style.display="inline","A"==
f.parentNode.nodeName&&(f.parentNode.style.display="inline"))};this.appendDeleteHeader=function(f,g){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var m=this.isGxTrn(),n=!1;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(g==gx.grid.deletePositions.left)n=!0;else return;else gx.grid.deletePosition==g&&(n=!0);m&&n&&(g="&nbsp;",this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(g=gx.grid.deleteTitle),f.append('<th class="'+this.columnAutoHeaderClass+
'">'+g+"</th>"))}};this.appendDeleteImage=function(f,g,m){if(this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none&&this.isGxTrn()){var n=!1,t=!1;"DSP"!=this.parentGxObject.Gx_mode&&"DLT"!=this.parentGxObject.Gx_mode&&(n=g.gxDeleted(),t=g.gxIsMod()||g.gxExists());var w=this.deleteImgId(g.gxId),u=!1;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(m==gx.grid.deletePositions.left)u=!0;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==m)u=!0;else if(this.gxIsFreestyle){var B=
gx.grid.deletePositionFree;m==gx.grid.deletePositions.left?u=B==gx.grid.deletePositions.topL||B==gx.grid.deletePositions.bottomL:m==gx.grid.deletePositions.right&&(u=B==gx.grid.deletePositions.topR||B==gx.grid.deletePositions.bottomR);m=B}if(u){var p="<"+this.CELL_TAG+' class="gx-remove-row gx-remove-row-'+this.deleteImageAlign(m)+" gx-remove-row-"+this.deleteVerticalAlign(m)+'" style="text-align:'+this.deleteImageAlign(m)+";vertical-align:"+this.deleteVerticalAlign(m)+'">';m="</"+this.CELL_TAG+">";
u=!1;B="gx-grid-delete";gx.O.DSO&&(B="gx-grid__row-delete");var v=gx.getMessage("GXM_deleterow");n&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?(n=gx.grid.undeleteImage,gx.O.DSO&&(B="gx-grid__row-add"),v=gx.getMessage("GXM_Add")):t&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?n=gx.grid.deleteImage:n&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu?n=gx.grid.deleteImage:(n=gx.grid.deleteImage,u=!0);t="";f.append(p);this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&
(p=gx.fn.firstGridControl(this.ownerGrid.gridId),t=gx.grid.deleteTooltip,f.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+g.gxId+"');\""),f.append(' onfocus="gx.evt.onfocus(this,'+p+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+g.gxId+"',"+this.ownerGrid.gridId+')"'),g="",u&&(g+="display:none;"),g&&f.append(' style="'+g+'"'),f.append(">"));f.append('<img id="'+w+'" src="'+n+'"" title="'+v+'"');t&&f.append(' title="'+t+'"');f.append(' style="border-style: none;');
u&&f.append("display:none;");f.append('"');f.append(' class="'+B+'"/>');this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&f.append("</a>");f.append(m)}}};this.deleteVerticalAlign=function(f){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var g="top";if(f==gx.grid.deletePositions.bottomL||f==gx.grid.deletePositions.bottomR)g="bottom";return g}return"middle"};this.deleteImageAlign=function(f){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==
gx.grid.deleteMethods.menu)return"left";var g="right";if(f==gx.grid.deletePositions.bottomL||f==gx.grid.deletePositions.topL)g="left";return g}return"center"};this.getRowByPos=function(f){return this.container.querySelector(" tbody>tr:nth-child("+f+")")};this.scroll_last_row_selector=function(f){return this.ownerGrid.additiveResponse?" tbody tr:nth-last-child("+Math.min(f/2,1)+")":" tbody tr:last-child"};this.scroll_first_row_selector=function(){return" tbody tr:first-child"};this.scroll_nth_row_selector=
function(){return function(f,g){return g?" tbody tr:nth-child(n+"+f+"):nth-child(-n+"+(f+g)+")":" tbody tr:nth-child(n+"+f+")"}};this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(f,g){var m=this.ROW_TAG,n=this.ROW_BASE_CLASS;this.gxIsFreestyle&&(m=this.CELL_TAG);n+=(n?" ":"")+(f?this.evenRowClass:this.oddRowClass)+(g?" RowDeleted":"");return{cls:n,tag:m}};this.simpleAppendFn=function(f){return function(g){g.append(f)}};this.appendGridStyle=function(f){var g=
d.exec(this.gxHtmlTags);g&&1<g.length&&f.append(g[1]);gx.lang.emptyObject(this.gxBackground)||f.append(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,!0)+"');");gx.lang.emptyObject(this.gxBorderWidth)||f.append(";border: solid "+this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?f.append(";"):f.append(this.gxBordercolor+";");0<this.ownerGrid.width&&f.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";")};this.appendGridAttributes=function(f){f.append(this.gxHtmlTags.replace(d,
""));this.gxAllowCollapsing&&this.gxCollapsed&&f.append(" data-gx-sr-only ")};this.appendGridClassAttribute=function(f){-1==this.gxHtmlTags.indexOf("class=")&&f.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=function(f){f.append('<div valign="top" ><div>');f.append('<img class="collapse-icon" style="cursor:pointer;" src="');this.gxCollapsed?f.append(gx.ajax.getImageUrl(gx,"expandImage")):f.append(gx.ajax.getImageUrl(gx,"collapseImage"));f.append('" onclick="'+this.gridObject()+
'.expandCollapse(this, event);"></div><div>')};this.appendCollapsingWrapperEnd=function(f){f.append("</div></div>")};this.appendContainerStart=function(f,g){g.append("<table ");this.appendGridClassAttribute(g);g.append(' id="'+f+'" ');gx.lang.emptyObject(this.gxToolTipText)||g.append('title="'+this.gxToolTipText+'" ');g.append('style="');this.appendGridStyle(g);g.append('" ');this.appendGridAttributes(g);this.isAbstract||(g.append('data-bkgstyle="'),g.append(gx.grid.styles[this.gxTitleBackstyle]),
g.append('" '));g.append(">");gx.lang.emptyObject(this.header)||(g.append("<caption>"),g.append(this.header),g.append("</caption>"))};this.appendContainerEnd=this.simpleAppendFn("</table>");this.appendHeaderText=function(f,g){gx.lang.emptyObject(this.headerText)||g.append('<tr><td colspan="'+f+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>")};this.appendFooterText=function(f,g){gx.lang.emptyObject(this.footerText)||g.append('<tr><td colspan="'+f+'" class="'+this.footerClass+'">'+this.footerText+
"</td></tr>")};var k={left:"start",right:"end"},a=function(f){return gx.util.browser.isIE()||!k[f]?f:k[f]};this.appendHeader=function(f,g){var m=f.length,n=[],t=gx.ajax.getImageUrl(gx,"ascImage"),w=gx.ajax.getImageUrl(gx,"descImage"),u=0;g.append("<thead>");g.append("<tr>");this.appendDeleteHeader(g,gx.grid.deletePositions.left);for(var B=0;B<m;B++){var p=f[B];var v=[p.gxColumnClass||p.gxControl.columnClass,p.columnheaderclass||"",this.columnAutoHeaderClass].join(" ");g.append('<th class="'+v+'"');
v="white-space:nowrap;";gx.lang.gxBoolean(p.visible)||(v+="display:none;");p.width&&(p.gxWidthUnit||(p.gxWidthUnit="px"),v+="width:"+p.width+p.gxWidthUnit+";");p.align&&(v+="text-align:"+a(p.align)+";");gx.lang.emptyObject(this.gxTitleBackColor)||this.gxTitleBackstyle!=gx.grid.styles.header&&this.gxTitleBackstyle!=gx.grid.styles.report||(v+="background-color:"+this.gxTitleBackColor+";",this.gxRealTitleBackColor=this.gxTitleBackColor);gx.lang.emptyObject(this.gxBackColor)||this.gxTitleBackstyle!=gx.grid.styles.uniform||
(v+="background-color:"+this.gxBackColor+";",this.gxRealTitleBackColor=this.gxBackColor);gx.lang.emptyObject(this.gxTitleForeColor)||(v+="color:"+this.gxTitleForeColor+";");gx.lang.emptyObject(this.gxTitleFont)||(v+=this.gxTitleFont);p.titlefontunderline?v+="text-decoration: underline;":p.titlefontstrikethru&&(v+="text-decoration: line-through;");p.titlefontbold&&(v+="font-weight: bold;");p.titlefontitalic&&(v+="font-style: italic;");p.titlebackcolor&&(v+="background-color:"+gx.color.html(p.titlebackcolor).Html+
";");p.titleforecolor&&(v+="color:"+gx.color.html(p.titleforecolor).Html+";");g.append(' style="'+v+';"');g.append(' data-colindex="'+u+'"');g.append(">");u++;gx.lang.emptyObject(gx.text.trim(p.title))?g.append("&nbsp;"):(g.append("<span"),p.gxTooltip&&g.append(' title="'+p.gxTooltip+'"'),p.sortable&&g.append(' onclick="'+this.gridObject()+".grid.setSort("+p.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\""),g.append(">"),g.append(p.title),
null!=this.ascLabel&&null!=this.descLabel&&(this.ascLabel.src=t,this.descLabel.src=w,p.sortable&&this.sortColumn==p.index&&g.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,n))),g.append("</span>"));g.append("</th>")}this.appendDeleteHeader(g,gx.grid.deletePositions.right);g.append("</tr>");g.append("</thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("</tbody>");this.appendFooterWrapperStart=this.simpleAppendFn("<tfoot>");
this.appendFooterWrapperEnd=this.simpleAppendFn("</tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("</tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' data-cellspacing='0' data-cellpadding='0'><tbody>");this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</tbody></table></td>");this.appendCellPrefixEnd=this.appendCellPrefixStart=this.appendRowPrefix=gx.emptyFn;this.beforeRender=function(){this.tableClass=this.gxCssClass;
this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnAutoHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;l.each(this.beforeRenderCallbacks,function(f,g){g()});this.beforeRenderCallbacks=[]};this.drawEmptyContent=function(){var f=this.ownerGrid,g=f.getGridInnerTableId();f.emptyText&&0===l("#"+g+" + .gx-text-gridnodata").length&&l(document.createElement("div")).addClass("GridNoDataText gx-text-gridnodata").text(f.emptyText).insertAfter(l("#"+
g));0===this.rows.length?l("#"+g).attr("data-gx-grid-nodata",""):l("#"+g).removeAttr("data-gx-grid-nodata")};this.purgeGrid=function(){var f,g=["onblur","onclick","onfocus","onchange"],m=gx.dom.byTag("input",this.container);var n=0;for(f=m.length;n<f;n++)gx.dom.purgeElement(m[n],g);m=gx.dom.byTag("textarea",this.container);n=0;for(f=m.length;n<f;n++)gx.dom.purgeElement(m[n],g);m=gx.dom.byTag("select",this.container);n=0;for(f=m.length;n<f;n++)gx.dom.purgeElement(m[n],g);m=gx.dom.byTag("span",this.container);
n=0;for(f=m.length;n<f;n++)gx.dom.purgeElement(m[n],g);m=gx.dom.byTag("img",this.container);n=0;for(f=m.length;n<f;n++)gx.dom.purgeElement(m[n],g)};this.render=function(f,g,m,n,t,w){f=!!f;t=this.ownerGrid.getGridInnerTableId();var u=this.container;this.ownerGrid.disposeTemplateObject();this.beforeRender();this.ownerGrid.additiveResponse&&this.doSort();if(w.ScrollingElement)var B=w.ScrollingElement.scrollTop;f=this.drawGrid(t,f,g,m,w);gx.dom.shouldPurge()&&this.purgeGrid();var p=gx.dom.getActiveElement();
g=p?p.tagName.toUpperCase():"";g=p&&(p.id||p.name)&&"FORM"!=g&&gx.dom.isChildNode(p,u);var v=gx.dom.getCaretOffset(p),A=(m=gx.dom.byId(this.ownerGrid.gxComponentContext+this.ownerGrid.realGridName+"ContainerTbl"))?m.scrollTop:0;this.setGridHtml(this.container,f,w);this.ownerGrid.isNestedLoad||gx.dom.fixes.fixTableResets(this.container);this.ownerGrid.applyTemplateObject({deferred:!1});A&&m&&(m=gx.dom.byId(this.ownerGrid.gxComponentContext+this.ownerGrid.realGridName+"ContainerTbl"),m.scrollTo(0,A));
this.gxIsFreestyle||this.ownerGrid.instanciateRow(gx.fn.currentGridRowImpl(this.ownerGrid.gridId));this.ownerGrid.additiveResponse&&-1!=this.sortColumn&&this.ownerGrid.handleInfiniteScrolling();g&&(f=B?0:1,g=function(){var y=gx.dom.el(p.id||p.name,!1,!0);y&&(gx.csv.disableFocus=!0,0<y.offsetWidth&&0<y.offsetHeight&&(B&&(w.ScrollingElement.scrollTop=B),gx.fn.scrollIntoViewIfNeeded(y,u,{block:"end"}),gx.fn.setFocus(y,function(){gx.dom.setCaretOffset(y,v)})))},f?gx.lang.doCallTimeout(g,this,[],f):g());
this.drawEmptyContent();this.afterRender(t);n();this.rendered=!0};this.setGridHtml=function(f,g,m){m=m||{};gx.csv.IgnoreBlur=!0;var n=this.ownerGrid.InverseLoading,t,w=void 0!=m.atRow&&-1!=m.atRow,u=-1===this.sortColumn&&(this.ownerGrid.additiveResponse||m.addRows||w),B=m.ScrollingElement;B&&B!==window||(B=f.querySelector("tbody")||f);try{if(gx.fn.setOpacity(0,f),u)if(-1!==this.sortColumn)f.innerHTML=g,gx.plugdesign.applyTemplateObject({selector:f});else{if(this.gxIsFreestyle){var p=document.createElement("div");
p.className="gx-sr-only";p.innerHTML=g;p.setAttribute("data-gx-grid-rendering-additive-rows","");var v=l(p);var A=n?this.firstItemSelector:this.lastItemSelector;n?v.insertBefore(A):v.insertAfter(A)}else if(n)v=l(g).insertBefore(this.firstItemSelector);else{var y=function(C){return 0<B.childNodes.length?C.insertAfter(this.lastItemSelector):C.appendTo(B)}.bind(this);if(w){var F=B.childNodes.length,H=g.split(/<tr/),r=H.slice(1,F+1-m.atRow),q=H.slice(F+1-m.atRow),x=F-this.rows.length;Array.from(B.childNodes).slice(0,
r.length).forEach(function(C,I){var G=document.createElement("tr");C.replaceWith(G);G.outerHTML="<tr"+r[I]});if(0<q.length){var D=l("<tr"+q.join("<tr"));y(D)}for(;0<x--;)B.removeChild(B.lastChild);p=l(this.nthItemSelector(m.atRow+1,H.length-1))}else p=y(l(g))}this.newAdditiveRows=w?null:v;gx.plugdesign.applyTemplateObject({selector:v,deferred:!0}).then(function(){this.newAdditiveRows&&(t=this.newAdditiveRows.children(),n?t.insertBefore(this.newAdditiveRows):t.insertAfter(this.newAdditiveRows),this.newAdditiveRows.trigger("gx-grid:after-additive-rows-render"),
this.newAdditiveRows.remove(),delete this.newAdditiveRows)}.closure(this))}else f.innerHTML=g}finally{gx.lang.requestAnimationFrame(function(){setTimeout(function(){gx.fn.setOpacity("reset",f)},10)})}gx.csv.IgnoreBlur=!1};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.renderRow=function(f,g,m,n,t,w,u,B,p,v,A,y,F,H,r,q){f=this.rows[m];y=!!(m%2);var x=this.isGxTrn();g&&m===n&&!gx.fn.currentGridRowImpl(this.gxId)&&gx.fn.setCurrentGridRow(this.gxId,f.gxId);var D=f.gxDeleted();
A=new gx.text.stringBuffer;var C=this.getRowRenderingProps(y,D,m,n,t);w&&this.gxIsFreestyle&&(0<m&&0===m%this.gxGridCols||0===m&&0<this.gxGridCols)&&(0<m&&this.appendRowEnd(u,m,n,t),this.appendRowStart(u,m,n,t));var I="";this.gxTitleBackstyle==gx.grid.styles.report&&(I=y?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);this.gxTitleBackstyle==gx.grid.styles.header&&(I=this.gxLinesBackcolorOdd);this.gxTitleBackstyle==gx.grid.styles.uniform&&(I=this.gxBackColor);if(!this.gxIsFreestyle||this.gxIsFreestyle&&
w)this.appendRowPrefix(A,m,n,t),A.append("<"+C.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+f.gxId+"'"),this.gxIsFreestyle||A.append(' data-gxrendering_row=""'),this.gxIsFreestyle&&w?(A.append(' data-gxrow="'+f.gxId.toString()+'"'),(B=this.columns[1].gxControl.verticalAlign)&&A.append(' data-cell-valign="'+B+'"')):A.append(' data-gxrow="'+f.gxId.toString()+'"'),A.append(' class="'+C.cls+'"'),f.selected&&A.append(' data-selected="1"'),y="",I&&(y="background-color:"+I+";"),gx.lang.emptyObject(this.gxLinesFont)||
(y+=this.gxLinesFont),y&&A.append(' style="'+y+'" '),A.append(">"),u.append(A.toString());this.gxIsFreestyle&&(w&&this.appendRowBreaksWrapperStart(u,f),p=this.gxBuffer.toString(),u.append(p));this.gxIsFreestyle||this.appendDeleteImage(u,f,gx.grid.deletePositions.left);this.appendCellPrefixStart(u,m,n,t,f,C);for(B=0;B<v;B++){A=q[B];y=gx.lang.gxBoolean(A.visible);F=f.gxProps[A.index];p=f.values[A.index];H=A.gxControl;this.gxIsFreestyle&&H.type==gx.html.controls.types.row&&0===A.index&&(H.isFreestyleRow=
!0);H.setGridData({grid:this.ownerGrid,row:f,gridId:this.gxId,gridRow:f.gxId});r?(delete H.formattedValue,H.value=p,H.id=A.htmlName+"_"+H.gridRow):(H.setProperties.apply(H,F),H.isFreestyleRow&&(H.cssClass=C.cls));if(g)delete gx.usrPtys[H.id];else if(void 0!==gx.usrPtys[H.id])for(var G in gx.usrPtys[H.id])"enabled"==G&&(H.rtEnabled=!0),H.setIndividualProp(G,gx.usrPtys[H.id][G]);D&&(H.rtEnabled=!0,H.enabled=!1);p=this.parentGxObject.getValidStruct(A.gxId);"undefined"!==typeof F.Value&&(H.value="."!=
gx.decimalPoint&&p&&"decimal"==p.type&&"string"==typeof F.Value?F.Value.replace(".",gx.decimalPoint):F.Value);"undefined"!==typeof F.FormattedValue&&(H.formattedValue=F.FormattedValue);"undefined"===typeof H.formattedValue&&(r&&p&&p.v2c?(H.persistValue(),p.v2c(f.gxId),H.formattedValue=gx.fn.getControlValue(H.id)):H.formattedValue=H.value);F.Values&&(H.possibleValues=F.Values.v);this.gxIsFreestyle&&H.type==gx.html.controls.types.row&&0===A.index&&(H.id=this.gxCmpContext+this.gxGridObject+"Row_"+f.gxId,
x&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&(H.oncontextmenu=this.gridObject()+".showContextMenu(this, event);"),I&&(H.style+="background-color:"+I+";"));this.gxIsFreestyle||(u.append("<"+this.CELL_TAG+' class="gx-attribute '+(H.columnClass||"")+'" data-cell-valign="'+A.valign+'"'),u.append(' data-colindex="'+B+'"'),F="",y||(F+="display:none;",!H.visible||A.isGxRemove()||this.ownerGrid.isPromptColumn(A)||this.ownerGrid.addColPropertyAfterRender(B,"Visible",1)),A.width?(A.gxWidthUnit||
(A.gxWidthUnit="px"),F+="width:"+A.width+A.gxWidthUnit+";"):A.gxColSize&&(H.colSize=A.gxColSize),A.align&&(F+="text-align:"+a(A.align)+";"),H.style&&(F+=H.style.replace(/content:var\(.*\);/,"")),F&&u.append(' style="'+F+'" '),u.append(">"));u.append(H.getHtml());this.gxIsFreestyle&&H.type==gx.html.controls.types.row&&0===A.index&&this.appendDeleteImage(u,f,gx.grid.deletePositions.left);H.persistValue();this.gxIsFreestyle||u.append("</"+this.CELL_TAG+">");this.gxIsFreestyle&&(A.index==this.columns.length-
1&&this.appendDeleteImage(u,f,gx.grid.deletePositions.right),p=A.buffer.toString(),u.append(p))}this.appendCellPrefixEnd(u,m,n,t);this.gxIsFreestyle&&w?this.appendRowBreaksWrapperEnd(u):this.appendDeleteImage(u,f,gx.grid.deletePositions.right)};this.drawGrid=function(f,g,m,n,t){var w=this;t=t||{};var u=this.isGxTrn(),B=this.gxIsFreestyle&&1<this.gxGridCols;m=new gx.text.stringBuffer;var p=this.columns,v=p.length,A,y=void 0!=t.atRow&&-1!=t.atRow,F=-1===this.sortColumn&&(this.ownerGrid.additiveResponse||
t.addRows);!this.gxIsFreestyle&&u&&v++;var H,r=function(){if(0!==Number(this.pageSize)){H=this.getMaxPage();0>=this.currentPage?this.currentPage=1:this.currentPage>H&&(this.currentPage=H);var W=y?t.atRow:Math.max(this.pageSize*(this.currentPage-1),0);var V=Math.min(W+this.pageSize,this.rows.length)}else W=0,V=this.rows.length;return{firstRow:W,lastRow:V}}.call(this),q=r.firstRow;r=r.lastRow;if(F||t.immediateApplyInfiniteScroll){var x=q;q=F||"0"!=this.firstRecordOnPage&&-1==this.sortColumn?this.lastRenderedRow:
0;r=this.rows.length;this.ownerGrid.firstAdditiveRow=q}else x=q;this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(m);var D=p.length;if(!this.gxIsFreestyle&&r>q)for(var C=0;C<D;C++){var I=p[C];var G=I.gxControl;var K=!1;var N=gx.lang.gxBoolean(I.visible);I.visible=N;this.ownerGrid.checkPromptColumn(I);for(A=x;A<r&&!K;A++){var P=this.rows[A];var O=P.gxProps[I.index];n||G.setProperties.apply(G,O);G.visible&&(K=!0)}A=function(W){I.visible=K;F=!1;q=x;w.ownerGrid.firstAdditiveRow=0;t.addRows=!1};
this.ownerGrid.additiveResponse||(I.visible&&!K&&A(!1),!I.visible&&K&&A(!0))}if(C=!y&&(!F||-1!=this.sortColumn))this.appendContainerStart(f,m),this.appendHeaderText(v,m),this.gxIsFreestyle||this.appendHeader(p,m),this.appendBodyWrapperStart(m);if(this.ownerGrid.InverseLoading)for(A=r-1;A>=q;A--)this.renderRow.call(this,P,g,A,q,r,B,m,void 0,void 0,D,I,N,O,G,n,p);else for(A=q;A<r;A++)this.renderRow.call(this,P,g,A,q,r,B,m,void 0,void 0,D,I,N,O,G,n,p);this.gxIsFreestyle&&0<this.gxGridCols&&B&&this.appendRowEnd(m);
this.lastRenderedRow=r;C&&(this.appendBodyWrapperEnd(m),this.appendFooterWrapperStart(m),this.ownerGrid.InfiniteScrolling||!u&&!this.hasPagingButtons()||this.appendNavigationBar(v,m),this.appendFooterText(v,m),this.appendFooterWrapperEnd(m),this.appendContainerEnd(m),this.gxAllowCollapsing&&this.appendCollapsingWrapperEnd(m));this.fromCollection=n;f=m.toString();m.clear();m=null;return f};this.defineEventHandlers=function(){var f={};if(this.ownerGrid&&this.ownerGrid.parentObject&&this.ownerGrid.parentObject.IsComponent)var g=
this.ownerGrid.parentObject;g&&(g=gx.pO.getWebComponent(g.CmpContext),f.hookKey=g&&g.getContainer()&&g.getContainer().id);this.gxIsFreestyle||(gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this,f),gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this,f));this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this,f);gx.evt.attach(this.container,["mousedown","touchstart"],this.mouseDownHandler.closure(this,
[],!0),this,f);gx.evt.attach(this.container,"click",this.clickHandler,this,f);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this,f)};this.isGridRow=function(f){return f&&f.tagName.toLowerCase()==this.ROW_TAG&&null!=f.getAttribute("data-gxrow")&&l(f).closest(".gx-grid")[0]==this.container};this.getTargetRow=function(f,g){for(;f&&gx.dom.isChildNode(f,this.container);){if(this.isGridRow(f)&&(!g||"body"==g&&"TBODY"==f.parentNode.tagName||"header"==g&&"THEAD"==f.parentNode.tagName))return f;
f=gx.dom.findParentByTagName(f,this.ROW_TAG)}};this.mouseOverHandler=function(f){!gx.runtimeTemplates&&this.gxAllowHovering&&(f=this.getTargetRow(gx.evt.source(f)))&&"1"!=f.getAttribute("data-selected")&&(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(f),this.gxHoveredRowId=parseInt(f.getAttribute("data-gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(f){!gx.runtimeTemplates&&this.gxAllowHovering&&(f=this.getTargetRow(gx.evt.source(f)))&&"1"!=f.getAttribute("data-selected")&&
this.endRowHover(f)};this.contextMenuHandler=function(f){var g=this.getTargetRow(gx.evt.source(f));g&&this.ownerGrid.showContextMenu(g,f)};this.mouseDownHandler=function(f,g){if(f=this.getTargetRow(gx.evt.source(f)))g="undefined"===typeof g?this.gxAllowSelection&&!this.gxIsFreestyle:g,this.setRowSelected(f,f.getAttribute("data-gxrow"),!1,g)};this.keyDownHandler=function(f){this.getTargetRow(gx.evt.source(f))&&this.ownerGrid.rowKeyPressed(f)};this.clickHandler=function(f){var g=gx.evt.source(f);g.parentNode&&
gx.dom.hasClass(g.parentNode,this.pagingBarClass)&&gx.evt.waitGridRefresh(function(){this.pagingHandler(g,f)}.closure(this))};this.pagingHandler=function(f,g){var m="";gx.evt.cancel(g,!0);gx.dom.hasClass(f,this.pagingButtonDisabled)||(gx.dom.hasClass(f,this.pagingButtonFirstClass)?m="FIRST":gx.dom.hasClass(f,this.pagingButtonPreviousClass)?m="PREV":gx.dom.hasClass(f,this.pagingButtonNextClass)?m="NEXT":gx.dom.hasClass(f,this.pagingButtonLastClass)&&(m="LAST"),this.changeGridPage(m))};this.changeGridPage=
function(f,g){var m=l.Deferred(),n=this.gxGridName.toUpperCase()+"PAGING",t=this.ownerGrid,w="";if(f){t.InfiniteScrolling||this.mask();if(gx.pO.fullAjax){if(gx.setGxO(this.parentGxObject),w="E"+t.realGridName.toUpperCase()+"_"+f+"PAGE"+(t.isMasterPageGrid?"_MPAGE":""),t.parentGrid)var u=t.parentGrid.gridId}else gx.fn.setHidden(this.gxCmpContext+n,f),w=this.gxCmpContext+"E"+n+".";gx.evt.execEvt(this.gxCmpContext,this.parentGxObject.IsMasterPage,w,gx.evt.dummyCtrl,u,void 0,void 0,!1,function(){this.unmask();
m.resolve()}.closure(this),g);return m.promise()}};this.setRowSelected=function(f,g,m,n,t){gx.grid.setActiveGridRow(this,g);n=void 0===n||n;t=void 0===t||t;var w=function(){var u=gx.O;if(!gx.lang.emptyObject(this.parentGxObject)){n&&!gx.runtimeTemplates&&void 0===f.gxOriginalBackcolor&&(f.gxOriginalBackcolor=f.style.backgroundColor);this.instanciateSelectionVars(g);var B=this.getRowByGxId(g),p=this.selectedRows||[],v=[];B&&p.push(B);for(B=0;B<p.length;B++){var A=p[B];A.selected=A.gxId==g;A.selected?
(n&&(gx.runtimeTemplates||(f.gxSBackcolor=void 0!==f.gxOriginalBackcolor?f.gxOriginalBackcolor:f.style.backgroundColor,this.gxSelectionColor&&(f.style.backgroundColor=this.gxSelectionColor.Html)),gx.dom.addClass(f,this.selectedRowClass),l(f).attr("data-gxselected","")),v.push(A)):n&&(A=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+A.gxId),null==A||void 0===A.gxSBackcolor||gx.runtimeTemplates||(A.style.backgroundColor=A.gxSBackcolor),gx.dom.removeClass(A,this.selectedRowClass),l(A).removeAttr("data-gxselected"))}for(B=
0;B<v.length;B++)this.instanciateSelectedRow(v[B],!t);gx.setGxO(u)}};m&&(n||gx.O.isTransaction())?setTimeout(w.closure(this),100):w.call(this)};this.instanciateSelectionVars=function(f){gx.setGxO(this.parentGxObject);gx.fn.setCurrentGridRow(this.gxId,f);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",f.substring(0,4))};this.instanciateSelectedRow=function(f,g){this.selectedRows=[f];this.setSelectedRowVars(f);if(this.gxOnLineActivate&&!this.ownerGrid.isLoading&&(gx.csv.instanciatedRowGrid=
this.ownerGrid,!g)){var m=this.parentGxObject;gx.lang.doCallTimeout(function(){gx.evt.doAfterProcessing(function(){if(m.fullAjax){var n=m.isServerEvent(this.gxOnLineActivate);gx.evt.dispatcher.dispatch(m.getServerEventName(this.gxOnLineActivate),m,this.ownerGrid.gridId,f.gxId,n)}else m[this.gxOnLineActivate].call(m,f.gxId)},this)},this,[],100)}};this.setSelectedRowVars=function(f){for(var g=this.parentGxObject,m=this.columns.length,n=0;n<m;n++){var t=g.GXValidFnc[this.columns[n].gxId];null!=t&&t.c2v&&
t.c2v(f.gxId)}};this.scrollIntoView=function(f,g,m){function n(v,A,y,F){return!1===g||y<=v+F&&v<=A+F?Math.min(y,Math.max(A,v)):(A+y)/2}function t(v,A,y,F){return{left:v,top:A,width:y,height:F,right:v+y,bottom:A+F,translate:function(H,r){return t(H+v,r+A,y,F)},relativeFromTo:function(H,r){var q=v,x=A;H=H.offsetParent;r=r.offsetParent;if(H===r)return w;for(;H;H=H.offsetParent)q+=H.offsetLeft+H.clientLeft,x+=H.offsetTop+H.clientTop;for(;r;r=r.offsetParent)q-=r.offsetLeft+r.clientLeft,x-=r.offsetTop+
r.clientTop;return t(q,x,y,F)}}}var w,u;for(w=t(f.offsetLeft,f.offsetTop,f.offsetWidth,f.offsetHeight);u=f.parentNode;){var B=u.offsetLeft+u.clientLeft,p=u.offsetTop+u.clientTop+m;w=w.relativeFromTo(f,u).translate(-B,-p);u.scrollTop=n(u.scrollTop,w.bottom-u.clientHeight+m,w.top,u.clientHeight);w=w.translate(B-u.scrollLeft,p-u.scrollTop);f=u}};this.keepGridItemVisible=function(f,g){var m=gx.util.browser.isOldIE(),n=l(this.ownerGrid.getContainerControl()),t=m?n.closest(".gx-grid-fixed-header-ie7"):
l("#"+this.ownerGrid.getContainerControlId()+" > table > tbody");0<t.length&&t[0].offsetHeight<t[0].scrollHeight&&(f=this.ownerGrid.getRowCtrlByIdx(f))&&(m=m?parseInt(n.css("paddingTop"),10):0,this.scrollIntoView(f,g,m))};this.setNextRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId+1,!0,!1)};this.setPreviousRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId-1,!0,!0)};this.toggleRowHoverById=function(f,g,m){var n=this.ownerGrid.getRowCtrlByIdx(f),t=!1;
n&&(t=!0,g?(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(n),this.gxHoveredRowId=f,this.keepGridItemVisible(f,m)):this.endRowHover(n));return t};this.getRowByDOMCtrl=function(f){f=parseInt(f.getAttribute("data-gxrow").substring(0,4),10)-1;return this.getRowById(f)};this.startRowHover=function(f){if(gx.runtimeTemplates)l(f).addClass("gx-row-hovered");else{void 0===f.gxOriginalBackcolor&&(f.gxOriginalBackcolor=f.style.backgroundColor);var g=this.getRowByDOMCtrl(f);this.gxAllowHovering&&
this.gxHoverColor&&!g.selected&&(f.gxHBackcolor=f.style.backgroundColor,f.style.backgroundColor=this.gxHoverColor.Html)}};this.endRowHover=function(f){if(gx.runtimeTemplates)l(f).removeClass("gx-row-hovered");else{var g=this.getRowByDOMCtrl(f);this.gxAllowHovering&&!g.selected&&void 0!==f.gxHBackcolor&&(f.style.backgroundColor=f.gxHBackcolor)}};this.hasPagingButtons=function(){return this.usePaging&&0<this.pageSize&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(f,g){gx.lang.emptyObject(this.gxRealTitleBackColor)?
g.append('<tr><td colspan="'+f+'" class="'+this.navigationClass+'" style="text-align: center;">'):g.append('<tr><td colspan="'+f+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">')};this.appendNavBarRowEnd=function(f){f.append("</td></tr>")};this.appendNavigationBar=function(f,g){var m=this.getRowCount();m=(0<m||0===m&&!this.isFirstPage())&&this.usePaging;var n=this.parentGxObject.Gx_mode;n=this.isGxTrn()&&!this.gxHasAddlines&&!("DSP"==
n||"DLT"==n);this.navigationClass=this.gxFooterClass;this.gxIsFreestyle&&1<this.gxGridCols&&(f=this.gxGridCols);(m||n)&&this.appendNavBarRowStart(f,g);m&&(g.append('<div class="'+this.pagingBarClass+'" style="padding-bottom:5px;">'),0>=this.currentPage&&(this.currentPage=1),g.append(this.buildPagingButton(this.pagingButtonFirstClass,!this.isFirstPage(),gx.getMessage("GXM_first"))),g.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous"))),g.append(this.buildPagingButton(this.pagingButtonNextClass,
!this.isLastPage(),gx.getMessage("GXM_next"))),g.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),gx.getMessage("GXM_last"))),g.append("</div>"));n&&(f="["+this.gxNewRowText+"]",gx.O.DSO&&(f=this.gxNewRowText),g.append(this.buildLink(f,this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);")));(m||n)&&this.appendNavBarRowEnd(g)};this.buildPagingButton=function(f,g,m){return'<button type="button" class="'+
f+(g?"":" "+this.pagingButtonDisabled)+'"style="padding-left:20px;padding-bottom:5px;'+((g?"":"opacity:.7;cursor:default")+'" title="')+m+'"'+(g?"":" disabled")+"/>"};this.buildLink=function(f,g,m,n,t){var w=this.navigationLinkClass;return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+t+'" onblur="this.style.textDecoration = \'none\';"><span '+(void 0!==n?'id="'+n+'"':"")+' style="cursor:'+((document.createTextRange?"hand":"pointer")+';" class="')+w+'" onclick="'+
g+'" onMouseOver="this.className=\''+this.highlightedNavigationLinkClass+"';window.status='"+m+"';return true;\" onMouseOut=\"this.className='"+w+"';window.status='';return true;\">"+f+"</span></a>"};this.isLastPage=function(){return"0"!=this.eof};this.isFirstPage=function(){return"0"==(gx.lang.emptyObject(this.firstRecordOnPage)?"0":this.firstRecordOnPage)};this.getWebImageTag=function(f){return'<img border="0" src="/'+this.basePath+this.imgsDir+f.toString()+'"/>'};var b=0;this.handleLabel=function(f){if(f.src){var g=
"img"+b;b++;var m="sort-ico--asc";f.src.includes("desc")&&(m="sort-ico--desc");return"<img name='"+g+"' border='0' src='"+f.src+"' class='"+m+"' >"}return f};this.sort=function(f,g){if(f.table.isGxTrn())if(f.gxExists()||g.gxExists()||f.gxIsMod()||g.gxIsMod()){if(!f.gxExists()&&g.gxExists()||!f.gxIsMod()&&g.gxIsMod())return 1;if(f.gxExists()&&!g.gxExists()||f.gxIsMod()&&!g.gxIsMod())return-1}else return 0;var m=f.table,n=m.getColumnByIndex(m.sortColumn);f=f.values[m.sortColumn];g=g.values[m.sortColumn];
gx.lang.instanceOf(f,Array)||(f=[f]);gx.lang.instanceOf(g,Array)||(g=[g]);switch(n.type){case gx.types.numeric:n=function(v){v=gx.num.parseFloat(v,gx.thousandSeparator,gx.decimalPoint);isNaN(v)&&(v=0);return v};break;case gx.types.date:case gx.types.dateTime:n=function(v){try{v=(new gx.date.gxdate(v)).Value}catch(A){gx.dbg.logEx(A,"JSTable.js","sort")}return v.valueOf()};break;case gx.types.bool:n=function(v){return gx.lang.booleanValue(v)?1:0};break;default:n=function(v){return String(v).replace(/<[^>]*>/g,
"").toUpperCase()}}for(var t=Math.max(f.length,g.length),w=0,u=0;0===w&&u<t;u++){var B=f[u];null==B&&(w=-1);var p=g[u];null==p&&(w=1);0===w&&(B=n(B),p=n(p),w="function"==typeof B.localeCompare?B==p?0:B.localeCompare(p):B==p?0:B>p?1:-1);0!==w&&(w*=m.ascSort?1:-1)}return w};this.mask=function(){var f=this.container||"function"===typeof this.getContainerControl&&this.getContainerControl();f&&f.firstChild&&gx.dom.mask(f.firstChild)};this.unmask=function(){var f=this.container||"function"===typeof this.getContainerControl&&
this.getContainerControl();f&&f.firstChild&&gx.dom.unmask(f.firstChild)}}}(gx.$);
gx.grid.column=function(l,c,d,k,a){this.table=null;this.index=-1;this.title=l||"";this.type="undefined"!=typeof c?c:gx.types.character;this.width=d||"";this.align=k||"left";this.valign=a||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(l,c,d,k){this.table=null;this.id=l;this.gxParentRowId=k||"";this.gxId=d+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=c.Props||[];this.gxRenderProps=c.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
gx.grid.responsiveGrid=function(l){var c=["xs","sm","md","lg"];return function(d){d=new gx.grid.impl(d);d.appendContainerStart=function(k,a){a.append("<div ");this.appendGridClassAttribute(a);a.append(' id="'+k+'" ');gx.lang.emptyObject(this.gxToolTipText)||a.append('title="'+this.gxToolTipText+'" ');a.append('style="');this.appendGridStyle(a);a.append('" ');this.appendGridAttributes(a);a.append(">")};d.getRowByPos=function(k){return this.container.querySelector((1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:nth-child("+
k+")")};d.scroll_last_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:last"};d.scroll_firt_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:first"};d.ROW_TAG="div";d.CELL_TAG="div";d.ROW_BASE_CLASS="row";d.getRowRenderingProps=function(k,a){var b=this.ROW_TAG,f=this.ROW_BASE_CLASS,g=this.gxGridResponsiveCols;this.gxIsFreestyle&&(b=this.CELL_TAG,f=l.map(c,function(m,n){return["col-",m,"-",Math.floor(12/(g[n]||12))||1].join("")}).join(" "));
this.gxIsFreestyle||(f+=" "+(k?this.evenRowClass:this.oddRowClass)+(a?" RowDeleted":""));return{cls:f,tag:b}};d.appendGridClassAttribute=function(k){k.append(' class="'+this.gxCssClass+'"')};d.appendGridAttributes=function(k){this.gxAllowCollapsing&&this.gxCollapsed&&k.append(" data-gx-sr-only ")};d.appendContainerEnd=d.simpleAppendFn("</div>");d.appendHeaderText=gx.emptyFn;d.appendFooterText=gx.emptyFn;d.appendHeader=gx.emptyFn;d.appendBodyWrapperStart=gx.emptyFn;d.appendBodyWrapperEnd=gx.emptyFn;
d.appendFooterWrapperStart=d.simpleAppendFn("<div>");d.appendFooterWrapperEnd=d.simpleAppendFn("</div>");d.appendRowStart=function(k,a,b){a==b&&!0!==this.ownerGrid.additiveResponse&&k.append('<div class="row">')};d.appendRowEnd=function(k,a,b,f){a==f&&!0!==this.ownerGrid.additiveResponse&&k.append("</div>")};d.appendRowBreaksWrapperStart=function(k,a){k.append("<div>");this.appendDeleteImage(k,a,gx.grid.deletePositions.left)};d.appendRowBreaksWrapperEnd=d.simpleAppendFn("</div></div>");d.appendRowPrefix=
function(k,a,b){if(a!=b){var f=this.gxGridResponsiveCols,g=!1;b=l.map(c,function(m,n){return 1!=f[n]&&0===a%f[n]||0===f[n]&&0===a%12?(g=!0,"visible-"+m):""}).join(" ");g&&k.append('<div class="clearfix '+b+'"></div>')}};d.appendCellPrefixStart=function(k,a,b,f,g){a=g.gxDeleted()?" RowDeleted":"";1==this.gxGridCols&&(k.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+g.gxId+'" data-gxrow="'+g.gxId.toString()+'" class="row'+a+'"><div class="col-xs-12">'),this.appendDeleteImage(k,g,gx.grid.deletePositions.left))};
d.appendCellPrefixEnd=function(k){1==this.gxGridCols&&k.append("</div></div>")};d.appendNavBarRowStart=function(k,a){a.append('<div class="'+this.ROW_BASE_CLASS+'"><div class="col-xs-12 '+this.navigationClass+'">')};d.appendNavBarRowEnd=function(k){k.append("</div></div>")};return d}}(gx.$);
gx.grid.flexGrid=function(l){var c,d=gx.dom;this.useNativeChildControls=!0;this.show=function(){c=l("#"+this.getContainerControl().id);var b=this.drawGrid((this.gxCmpContext||"")+this.gxGridObject+"Tbl",!this.IsPostBack);this.setGridHtml(c.get(0),b);this.ownerGrid.applyTemplateObject({deferred:!1});gx.dom.fixes.fixTableResets(this.container);this.gxWidth&&c.width(d.addUnits(this.gxWidth,this.gxWidthUnit));this.gxHeight&&c.height(d.addUnits(this.gxHeight,this.gxHeightUnit))};this.destroy=function(){c&&
c.hide()};this.appendGridAttributes=function(b){gx.grid.flexGrid.prototype.appendGridAttributes.apply(this,arguments);b.append(" data-gx-flex")};var k={"flex-direction":"row","flex-wrap":"no-wrap","justify-content":"flex-start","align-items":"flex-start","align-content":"flex-start"},a=function(b,f,g){k[f]!==g&&b.append(f+": "+g+";")};this.appendGridStyle=function(b){gx.grid.flexGrid.prototype.appendGridStyle.apply(this,arguments);a(b,"flex-direction",this.FlexDirection);a(b,"flex-wrap",this.FlexWrap);
a(b,"justify-content",this.JustifyContent);a(b,"align-items",this.AlignItems);a(b,"align-content",this.AlignContent)};this.getRowRenderingProps=function(){return{cls:"",tag:this.ROW_TAG}};this.appendRowPrefix=this.appendRowEnd=this.appendRowStart=gx.emptyFn;this.appendRowBreaksWrapperStart=function(b,f){this.appendDeleteImage(b,f,gx.grid.deletePositions.left)};this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</div>");this.appendCellPrefixStart=function(b,f,g,m,n){1==this.gxGridCols&&(b.append('<div id="'+
this.gxCmpContext+this.gxGridObject+"Row_"+n.gxId+'" data-gxrow="'+n.gxId.toString()+'">'),this.appendDeleteImage(b,n,gx.grid.deletePositions.left))};this.appendCellPrefixEnd=function(b){1==this.gxGridCols&&b.append("</div>")};this.appendNavBarRowStart=function(b,f){f.append('</div></div><div class="'+this.navigationClass+'">')};this.appendNavBarRowEnd=function(b){b.append("</div>")};this.scroll_last_row_selector=function(){return" > DIV[data-gxrow]:last"};this.scroll_firt_row_selector=function(){return" > DIV[data-gxrow]:first"}};
gx.lang.inherits(gx.grid.flexGrid,gx.grid.responsiveGrid);
gx.GxObject=function(l){var c=function(){this.onLoadDeferred=l.Deferred();this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.GridsUpper=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings={};this.UCBindingsHiddens={};this.GXValidFnc=
[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls={};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.InternalParms={};this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=c.CONTROL_CMP_REGEX;this.rowPatternRegex=/_([0-9]{4})+$/;this.postEventPopupCommands=[];this.targetsCounter=9996;this.feedbackCallCounter=this.feedbackTimeoutId=
0;gx.lang.apply(this,new gx.util.Observable)};c.GX_EVENT_CONTROL_DATA_ATTR="data-gx-evt-control";c.GX_EVENT_CONDITION_DATA_ATTR="data-gx-evt-condition";c.GX_EVENT_DATA_ATTR="data-gx-evt";c.GX_EVENT_CODE_DATA_ATTR="data-gx-evt-code";c.GX_EVENT_CONTEXT_DATA_ATTR="data-gx-context";c.GX_EVENT_CONTROL_DELAYED_ATTR="data-gx-click-delay";c.GX_EVENT_EXCLUDED_CTRLTYPES=["dyncombo","combo"];c.GX_EVENT_EVENT_IN_PROGRESS="data-gx-evt-inprogress";c.WEBCOMPONENT_CLASS_NAME="gxwebcomponent";c.WEBCOMPONENT_LOADING_CLASS_NAME=
"gxwebcomponent-loading";c.WEBCOMPONENT_BODY_CLASS_NAME="gxwebcomponent-body";c.CONTROL_CMP_REGEX=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})([0-9]{4})?/;return c}(gx.$);
gx.fn=function(l){var c=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,d=function(a){a=a.replace(/\\/g,".");return gx.gen.isDotNet()||gx.gen.isDotNetCore()?a.replace(/\.aspx$/,""):a},k=function(){var a=function(b,f){return b.gxIndex<f.gxIndex?-1:b.gxIndex>f.gxIndex?1:0};return function(b){return gx.fn.toArray(b).sort(a)}}();return{disableKeys:function(){gx.fx.obs.addObserver("gx.keypress",gx.fn,gx.fn.swallowKeys)},enableKeys:function(){gx.fx.obs.deleteObserver("gx.keypress",
gx.fn,gx.fn.swallowKeys)},swallowKeys:function(a){a.cancel=!0;a.event.preventDefault()},attachedControls:function(){return gx.attachedControls},cancelWindow:function(a){this.closeWindow(a,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel})},closeWindow:function(a,b,f){b=b||{};f=f||gx.O;if("string"==typeof a){if(this.closeFromServer(a,b.parmsMetadata))return;a=[]}a||(a=[]);if(gx.popup.ispopup()){var g=gx.popup.getPopup(),m=g.url?gx.util.noParmsUrl(g.url):"";if(!g.frameWindow||-1!=g.frameWindow.location.href.search(m+
"(\\?.*)?$")||gx.grid.drawAtServer){g.close(a,b,f);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():(a=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(a)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),a=gx.absoluteurl(a),gx.spa.started?(gx.spa.redirect(a),gx.ajax.enableForm(f,!0)):(gx.evt.redirecting=!0,location.href=a)))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},
closeFromServer:function(a,b){try{if(window.parent&&window.parent.gx)return!gx.popup.ispopup()||gx.grid.drawAtServer||window.parent.gx.grid.drawAtServer?window.parent.gx.fn.closeWindow(gx.json.evalJSON(a,!0),{parmsMetadata:gx.json.evalJSON(b,!0)}):gx.fn.closeWindow(gx.json.evalJSON(a,!0),{parmsMetadata:gx.json.evalJSON(b,!0)}),!0}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(a,b,f){gx.evt.execLoad=!1;f&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));
this.closeWindow(a,{parmsMetadata:b})},invalidEmptyValue:function(a){if(gx.lang.emptyObject(a.s)){for(var b=a.v.length,f=0;f<b;f++)if(a.v[f][0]===a.s)return!1;return!0}return!1},trimSelectValue:function(a,b){return"int"==b?gx.text.trim(a):gx.text.rtrim(a)},selectedDescription:function(a,b){for(var f=a.v.length,g=0;g<f;g++)if(this.trimSelectValue(a.v[g][0],b)===a.s)return a.v[g][1];return null},setGridCheckBoxValue:function(a,b,f,g){this.setCheckBoxValue(a+"_"+b,f,g)},setGridDecimalValue:function(a,
b,f,g,m){return this.setGridControlValue(a,b,f)},setGridControlValue:function(a,b,f,g){if(void 0!==b)return this.setControlValue(a+"_"+b,f,g)},setVarValues:function(a,b){for(var f=a.length,g=0;g<f;g++){var m=gx.fn.vStructForVar(a[g]);m&&m.v2v?m.v2v(b[g]):eval(a[g]+'="'+b[g]+'"')}},refreshControlOldValue:function(a){if(void 0!==l(a).attr(gx.csv.GX_OLD_VALUE_ATTRIBUTE)){var b=gx.fn.getControlValue("radio"==a.type?a.name:gx.dom.id(a));gx.fn.setControlOldValue(a,b)}},setControlOldValue:function(a,b){if(a){var f=
a.id,g=gx.O.getValidStructFld(f);b=gx.applyPicture(g,b,a);g&&g.gxgrid&&(g.gxgrid.IsValidState[f]=g.gxgrid.IsValidState[f]||{},g.gxgrid.IsValidState[f][gx.csv.GX_OLD_VALUE_ATTRIBUTE]=b);if("radio"==a.type)for(a=gx.dom.byName(a.name),f=a.length,g=0;g<f;g++)a[g].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b);else a.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b)}},setControlGxValid:function(a,b){if(a&&a.id){var f=a.id,g=gx.O.getValidStructFld(f);g&&g.gxgrid&&(g.gxgrid.IsValidState[f]?g.gxgrid.IsValidState[f].gxvalid=
b:g.gxgrid.IsValidState[f]={gxvalid:b});a.setAttribute(gx.csv.GX_VALID_ATTRIBUTE,b)}},setControlValue:function(a,b,f){a=gx.csv.ctxControlId(a);this.setControlValueAny(a,b,f)},clearControlRoundedValue:function(a){a&&a.removeAttribute("data-gx-rounded-value")},setControlRoundedValue:function(a,b){a&&a.setAttribute("data-gx-rounded-value",b)},getControlRoundedValue:function(a){if(a&&(a=a.getAttribute("data-gx-rounded-value"),null!==a))return"."==gx.decimalPoint?a:a.replace(".",gx.decimalPoint)},setControlValueAny:function(a,
b,f){var g=gx.O.getValidStructFld(a),m=!1;var n=gx.dom.el(a,g&&("edit"==g.ctrltype||"checkbox"==g.ctrltype||"combo"==g.ctrltype));var t=function(){return gx.lang.emptyObject(B)?b:B};n&&gx.lang.isEmpty(b)&&!0===n.GXFormatError&&(gx.csv.setFormatError(n,!1),gx.util.balloon.clear(a));g&&("dtime"==g.type||"date"==g.type?""===b?b=gx.date.nulldate_toc(g.len,g.dec):"string"==typeof b&&(b=new gx.date.gxdate(b)):gx.lang.isFixedCharacterType(g.type)&&(b=gx.text.rtrim(b)));if(b instanceof gx.date.gxdate)gx.lang.emptyObject(g)||
(b=gx.date.formatDateTime(g.dec,g.len,gx.dateFormat,b));else if(gx.lang.instanceOf(b,Number)||"undefined"!=typeof gx.num.dec&&b instanceof gx.num.dec.bigDecimal){if(!gx.lang.emptyObject(g)){var w=gx.rtPicture(g,n),u=gx.numericLenDec(w).Decimals;if(0<u&&u!==g.dec){var B=gx.num.toFixed(b,g.dec);B="."==gx.decimalPoint?B:B.replace(".",gx.decimalPoint);this.setControlRoundedValue(n,B)}b=gx.num.formatNumber(b,g.dec,w,g.len,g.sign,!1,g.emptyAsNull)}}else"string"!=typeof b||gx.lang.emptyObject(g)||((m=void 0!=
g.isPwd)?null!=n&&"SPAN"==n.nodeName&&(b=gx.text.formatString(b,g.len,g.isPwd)):b=gx.text.formatString(b,g.len,g.isPwd,gx.rtPicture(g,n)));this.persistGridControlValue(a,t());null!=n&&"SPAN"!=n.nodeName?(this.setControlValue_impl(n,b,f),!0!==gx.csv.settingUIparms&&gx.fn.setControlOldValue(n,t())):gx.fn.setHidden(a,t());null!=n&&"SPAN"==n.nodeName&&(a=n);t=!1;t=g?g.multiline:null!=n&&"TEXTAREA"==n.tagName;m?this.setControlValue_span_safe(a,gx.text.formatString(b,g.len,g.isPwd,gx.rtPicture(g,n),f,t)):
this.setControlValue_span_safe(a,b,f,t)},setDecimalValue:function(a,b,f,g){this.setControlValue(a,b)},toDecimalValue:function(a,b,f){return gx.num.parseFloat(a,b,f)},toDatetimeValue:function(a,b){return new gx.date.gxdate(a,b)},setCheckBoxValue:function(a,b,f){try{a=gx.csv.ctxControlId(a);var g=gx.dom.byId(a);g||(g=gx.dom.form()[a]);if(g){var m=b.toString()==f.toString();g.checked=m;gx.dom.toggleAttribute(g,"checked",m);g.value=b}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(a,
b,f){var g=a.lastIndexOf("_");-1!=g&&(f=f?f:gx.O.getValidStructFld(a.substring(0,g)))&&f.gxgrid&&(g=a.substring(g+1),4<g.length?(g=g.substring(4,g.length),(g=gx.O.getGrid(f.gxgrid.gridName+"_"+g))&&g.persistControlValue(a,b,f)):f.gxgrid.persistControlValue(a,b,f))},setControlValue_span_safe:function(a,b,f,g){"string"==typeof a&&(a=gx.dom.byId("span_"+a));if(a&&"SPAN"!==a.nodeName){var m="span_";m="string"==typeof a?m+a:m+gx.dom.id(a);a=gx.dom.byId(m)}null!=a&&(m=gx.dom.bySelector('[data-name="'+a.id+
'"]'),2>m.length&&(m=[a]),l.each(m,function(n,t){gx.fn.setControlValue_fmt(t,b,f,g)}))},setControlValue_fmt:function(a,b,f,g){try{if(null!=a)if(1==f){var m=a.getAttribute("data-gxlink");gx.lang.emptyObject(m)||null==a.firstChild||"A"!=a.firstChild.nodeName||(a=a.firstChild);gx.html.setInnerHtml(a,b,!0)}else{0==f&&"string"==typeof b&&(b=b.replace(/ +/g," "));for(m=a;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;0!=f||null!=a.firstChild&&"#text"==a.firstChild.nodeName||"A"==a.nodeName?
gx.html.setInnerText(a,b,f,g):gx.html.setInnerText(m,b,f,g)}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(a,b,f){"string"==typeof a&&(a=gx.dom.el(a));b instanceof gx.date.gxdate&&(b=b.getString());if(null!=a){var g=gx.dom.byName(a.id);if(2>g.length||"radio"===a.type)g=[a];l.each(g,function(m,n){"radio"===n.type?gx.fn.setRadioValue(n.name,b):gx.dom.isEditControl(n)||"textarea"==n.type?(m=n.value!==b&&gx.dom.getActiveElement()===n&&n.selectionStart!==
n.selectionEnd&&0<n.selectionEnd,n.value=b,m&&gx.fn.setSelection(n)):void 0!=n.value?n.value=b:gx.fn.setControlValue_span_safe(n,b,f)})}},setGridComboBoxValue:function(a,b,f){this.setComboBoxValue(a+"_"+b,f)},setComboBoxValue:function(a,b){var f=gx.util.browser.isIE();a=gx.csv.ctxControlId(a);var g=gx.dom.byId(a);if(g){var m="",n=gx.O.getValidStructFld(a);gx.lang.emptyObject(n)||(m=n.type);"int"==m?b=gx.text.trim(b):"date"==m&&b instanceof gx.date.gxdate?b=b.getStringWithFmt("Y4MD"):"decimal"!=m&&
(b=gx.text.rtrim(b));var t=b,w=!1;try{for(var u=g.options.length,B,p=0;p<u;p++){var v=g.options[p];if(gx.lang.isNumericType(m)?Number(v.value)==Number(b):gx.text.trim(v.value)==gx.text.trim(b)){if(t="undefined"!=typeof v.innerText?v.innerText:v.text,g.selectedIndex=p,w=!0,v.setAttribute("selected","selected"),B=v,f)break}else f||v.removeAttribute("selected")}B&&B.value!=g.value&&gx.util.browser.isFirefox()&&gx.dom.redrawControl(g);w||(g.selectedIndex=0);0<n.grid&&this.persistGridControlValue(a,b,
n)}catch(A){gx.dbg.logEx(A,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(a,t,0)}},call_v2bc:function(a,b,f){"function"==typeof a.v2bc&&a.v2bc.call(b,f)},loadRadioButton:function(a,b,f){var g=l(a).parent().closest(".gx-radio-button"),m=l(a);b=l(gx.html.controls.applyTemplate("radio",{id:a.name,className:g.attr("class"),style:g.attr("style"),title:a.title,isDisabled:a.disabled,gxoch0:m.attr("data-gxoch0"),values:l.map(b,function(n,t){return{itemId:a.name+"_"+t,itemValue:n[0],itemDesc:n[1],
isSelected:gx.text.trim(f.toString())==gx.text.trim(n[0].toString())}})}));g.replaceWith(b);gx.plugdesign.applyTemplateObject(b)},loadComboBox:function(a,b){this.setComboValues(a,b)},setGridComboValues:function(a,b){if(0==this.controlGridId(a))this.setComboValues(a,b);else for(var f=1;999>f;f++){var g=gx.text.padl(f.toString(),4,"0");g=gx.dom.el(a+"_"+g);if(null==g)break;this.setComboValues(g.name,b)}},setComboValues:function(a,b){a=gx.dom.el(a);var f=gx.util.browser;if(null!=a){var g="";-1!=a.selectedIndex&&
(g=a.options[a.selectedIndex].value);for(;a.options.length>b.length;)a.remove(a.options.length-1);for(;b.length>a.options.length;){var m=document.createElement("OPTION");a.options.add(m)}for(var n=b.length,t=0;t<n;t++)if(m=a.options[t],m.value=b[t][0],f.isIE()&&9<=f.ieVersion()?m.innerText!=b[t][1]&&(m.innerText=b[t][1]):m.text!=b[t][1]&&(m.text=b[t][1]),Number(m.value)?Number(m.value)==Number(g):gx.text.trim(m.value)==gx.text.trim(g))a.selectedIndex=t;if(0==a.options.length)a.selectedIndex=-1;else if(-1==
a.selectedIndex||a.selectedIndex>a.options.length-1)a.options[0].selected=!0}},getControlRefById:function(a){return(a=this.validStruct(a))?0==a.grid?this.getControlRef(a.fld,!1):this.getControlGridRef(a.fld,a.grid):null},getControlRef:function(a,b,f){b||(a=gx.csv.ctxControlId(a));if("FORM"==a)return document;a=gx.dom.el(a,null,null,null,f);return null!=a?a:null},getControlRef_list:function(a){var b=gx.dom.byName(a);if(null!=b)return b;a=gx.dom.byId(a);return null!=a?[a]:null},screen_CtrlRef:function(a){a=
this.getControlGridRef(a,this.controlGridId(a));return gx.lang.emptyObject(a)?null:("hidden"==a.type&&(a=gx.dom.byId("span_"+gx.dom.id(a))),a)},screen_CtrlId:function(a){return this.getControlGridId(a,this.controlGridId(a))},getControlGridId:function(a,b,f){a=gx.csv.ctxControlId(a);if(gx.dom.el(a))return a;try{if(0==b)return a;void 0==f&&(f=this.currentGridRow(b));return a+"_"+f}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(a,b,f){var g;a=gx.csv.ctxControlId(a);
if(0==b||-1!==a.search(gx.csv.CTRL_ROW_INDEX_REGEXP))if(g=gx.dom.el(a))return g;try{if(0==b)return null;void 0==f&&(f=this.currentGridRow(b));if(g=gx.dom.el(a+"_"+f))return g;var m=gx.O.getComponentData(a);if(m)return gx.dom.el("gxHTMLWrp"+m.Prefix+f)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRowSafe:function(a,b){var f=gx.fn.getGridObj(a,b);if(f&&f.grid.rows.length>=b)return gx.fn.setCurrentGridRow(a,b)},setCurrentGridRow:function(a,b){if("0000"!=b)try{return gx.currentRows[a]=
b}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(a){try{return gx.currentRows[a]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(a){a=this.currentGridRowImpl(a);return void 0==a?"0001":a},gridDuplicateKey:function(a){a=gx.fn.validStruct(a);if(void 0!=a){var b=a.gxgrid;if(null!=b&&(b=b.updateControlValue(a,!0)))return b.gxHasDuplicateKey()}return!1},firstGridControl:function(a,b){for(var f=gx.fn.controlIds(),g=f.length,
m=0;m<g;m++){var n=gx.fn.validStruct(f[m],b);if(void 0!=n&&n.grid==a)return f[m]}return-1},lastGridControl:function(a,b){for(var f=gx.fn.controlIds(),g=f.length-1;0<=g;g--){var m=gx.fn.validStruct(f[g],b);if(void 0!=m&&m.grid==a)return f[g]}return-1},getGridDateTimeValue:function(a,b,f,g){a=this.getControlValue(a+"_"+b);return new gx.date.gxdate(a,gx.dateFormat)},getGridDecimalValue:function(a,b,f,g){return this.getDecimalValue(a+"_"+b,f,g)},getGridIntegerValue:function(a,b,f){return this.getIntegerValue(a+
"_"+b,f)},getGridControlValue:function(a,b){return this.getControlValue(a+"_"+b)},getControlValue:function(a,b,f,g){return this.getControlValue_impl(gx.csv.ctxControlId(a,f),b,f,g)},getControlValue_impl:function(){var a=/_CMPPGM$/g;return function(b,f,g,m){if("hidden_only"==f)return gx.fn.getHidden(b);if(0<=b.search(a))return"nohidden"===f?null:gx.fn.getHidden(b);g=g||gx.O;m=m||(g?g.getValidStructFld(b):null);if(!(m&&m.gxgrid&&m.gxgrid.grid&&m.gxgrid.grid.useHiddensForControlValues)){var n=!m||"edit"!=
m.ctrltype&&"checkbox"!=m.ctrltype&&"combo"!=m.ctrltype?gx.dom.el(b,!1,!0):gx.dom.byId(b);if(null!=n&&g){g=this.getControlRoundedValue(n);if(!gx.lang.emptyObject(g))return g;m&&!n.gxtype&&(n.gxtype={type:m.type,len:m.len,dec:m.dec});if("checkbox"==n.type&&m.values&&m.values.length&&1<m.values.length)var t=n.checked?m.values[0]:m.values[1];else if("hidden"==n.type||"text"==n.type||"textarea"==n.type||"checkbox"==n.type)t=n.value;else if("radio"==n.type)t=gx.fn.getRadioValue(gx.dom.byName(b));else if("SELECT"==
n.nodeName&&0<n.options.length?t=-1!=n.selectedIndex?"screen"==f?n.options[n.selectedIndex].text:n.options[n.selectedIndex].value:"screen"==f?n.options[0].text:n.options[0].value:m&&"date"!=m.type&&"dtime"!=m.type&&"bits"!=m.type&&"audio"!=m.type&&"video"!=m.type&&"binaryfile"!=m.type&&(t=n.value),"IMG"==n.nodeName||"INPUT"==n.nodeName&&"image"==n.type)t=n.getAttribute("src");if(void 0!==t)return m&&"boolean"==m.type?gx.lang.gxBoolean(t):t}n=gx.dom.byId("span_"+b);if(null!=n)return b=gx.fn.getHidden(b),
g=this.getControlRoundedValue(n),n=gx.lang.emptyObject(g)?gx.fn.getControlValue_span(n):g,"screen"==f?void 0!=n?n:b:void 0!=b?b:n;n=gx.dom.form()[b];if(null!=n)return"file"==n.type&&(f=gx.html.multimediaUpload.getPreviewAtt(n.id+"_ct"))?f:this.getControlValueInt(n);m=gx.dom.byName(b);if(null!=m){t=m.length;for(g=0;g<t;g++)if(n=m[g],null!=n)return this.getControlValueInt(n);if(n=m[0])return n.value}}return null==n?"nohidden"===f?null:gx.fn.getHidden(b):""}}(),setRadioValue:function(a,b){a=gx.csv.ctxControlId(a);
a=gx.dom.byName(a);if(null!=a)for(var f=a.length,g=0;g<f;g++){var m=l(a[g]);if(gx.text.ltrim(a[g].value)==gx.text.ltrim(b)){m.attr("checked","");m.prop("checked",!0);break}}},getRadioValue:function(a){for(var b=a.length,f=0;f<b;f++)if(a[f].checked)return a[f].value;return""},getRadioSelected:function(a){a=gx.dom.byName(a);for(var b=a.length,f=0;f<b;f++)if(a[f].checked)return a[f];return null},getControlValueInt:function(a){if(void 0!=a.length&&"SELECT"!=a.tagName&&"undefined"!=typeof a[0]&&"radio"==
a[0].type)return this.getRadioValue(a);if("checkbox"==a.type)return a.checked;if("SPAN"==a.tagName){var b=gx.fn.getHidden(gx.dom.id(a));return void 0!=b?b:gx.fn.getControlValue_span(a)}if("INPUT"==a.tagName&&"text"==a.type&&(b=gx.dom.id(a),gx.O)){var f=gx.O.getValidStructFld(b);if(f&&"undefined"!=typeof gx.rtPicture(f,a)){if("int"==f.type)return this.getIntegerValue(b,-1!=gx.rtPicture(f,a).indexOf(",")?gx.thousandSeparator:"");if("decimal"==f.type)return this.getDecimalValue(b,-1!=gx.rtPicture(f,
a).indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return a.value},getControlValue_span:function(a){for(;a&&!a.nodeValue;)a=a.childNodes[0];return a&&a.nodeValue?a.nodeValue:""},getDateTimeArrayValue:function(a){try{var b=function(m,n){gx.lang.emptyObject(m)||l.each(m,function(t,w){m[t]=new gx.date.gxdate(w,n)});return""},f=this.getControlValue(a,"nohidden");var g=b(f,gx.dateFormat);g||(f=gx.fn.getHidden(gx.csv.ctxControlId(a)),g=b(f,"Y4MD"));return g}catch(m){gx.dbg.logEx(m,"gxfrmutl.js",
"getDateTimeArrayValue")}return""},getDateValue:function(a){return this.getDateTimeValue(a)},getDateTimeValue:function(a){try{var b=this.getControlValue(a,"nohidden");if(!gx.lang.emptyObject(b))return new gx.date.gxdate(b,gx.dateFormat);b=gx.fn.getHidden(gx.csv.ctxControlId(a));return new gx.date.gxdate(b,"Y4MD")}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(a,b,f){var g=gx.O?gx.O.getValidStructFld(a):null;a=this.getControlValue(a,f,void 0,g);g&&a&&(a=gx.num.extractValue(gx.rtPicture(g),
b,a));if(gx.lang.isArray(a))return a;a="undefined"!=typeof a?a.toString():"";if(0===a.length&&g&&"Blank"===g.emptyAsNull)return a;b=a.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?gx.num.parseInt(a,10,b):(new gx.num.dec.bigDecimal(gx.text.replaceAll(a,b,""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(b)?0:b},getDecimalValue:function(a,b,f,g){var m=gx.O?gx.O.getValidStructFld(a):null;g=this.getControlValue(a,g,void 0,m);a=gx.dom.el(a,m&&("edit"==m.ctrltype||"checkbox"==
m.ctrltype||"combo"==m.ctrltype));m&&g&&(g=gx.num.extractValue(gx.rtPicture(m,a),b,g));if("undefined"!==typeof g&&0===g.length&&m&&"Blank"===m.emptyAsNull)return"";if(gx.lang.isArray(g))return g;b=gx.num.parseFloat(g||"",b,f);return isNaN(b)?0:b},getBlobValue:function(a){var b=gx.dom.byId("Object_"+a);if(null!=b){if(b.data&&!gx.text.endsWith(b.data,"about:blank"))return b.data}else if(b=gx.dom.byId("Link_"+a),null!=b)return b.getAttribute("href");return""},getVarControlMap:function(a,b){if(a=a||gx.O)for(var f in a.VarControlMap)if("function"!=
typeof f){var g=a.VarControlMap[f];if(g.id==b||a.CmpContext+g.id==b)return f}return null},getVarControlMapForVar:function(a){for(var b in gx.O.VarControlMap)if("string"==typeof b&&b==a)return gx.O.VarControlMap[b];return null},v2c:function(a,b,f,g){a.v2c(g);"undefined"===typeof b&&(b=a.val(g));a=gx.fn.getControlGridRef(a.fld,a.grid,g);gx.plugdesign.controlValueChanged(a,b);f&&(a.value="")},v2cMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var f="";"number"==typeof b.grid&&0!=b.grid&&
(f="_"+gx.fn.currentGridRowImpl(b.grid));gx.fn.setHidden(gx.O.CmpContext+b.id+f,gx.O[a])}},c2vMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var f="";"number"==typeof b.grid&&0!=b.grid&&(f="_"+gx.fn.currentGridRowImpl(b.grid));gx.O[a]=gx.fn.getHidden(gx.O.CmpContext+b.id+f)}},depsToVars:function(a){for(var b=0;b<a.length;b++){var f=a[b],g=gx.fn.vStructForVar(f);gx.lang.emptyObject(g)||"function"!=typeof g.c2v?this.c2vMap(f):g.c2v()}},verticalFormula:function(a,b,f,g,m,n,t,w){var u=
gx.fn.vStructForVar(a);n&&(gx.lang.emptyObject(u)?this.v2cMap(a):u.v2c(g));var B=gx.fn.currentGridRowImpl(f),p=gx.fn.getGridObj(f,g),v=0,A=!1;if(p){for(var y=p.grid.rows.length,F=0;F<y;F++){var H=p.grid.rows[F],r=H.gxDeleted(),q=H.gxExists(),x=H.gxIsMod();r||!q&&!x||(n&&(gx.fn.setCurrentGridRow(f,H.gxId),w&&0<w.length?this.depsToVars(w):gx.lang.emptyObject(u)||"function"!=typeof u.c2v?this.c2vMap(a):u.c2v()),m.call(gx.O)&&(A=!0,v=t(F,v)))}n&&gx.fn.setCurrentGridRow(f,B);w&&0<w.length?this.depsToVars(w):
gx.lang.emptyObject(u)||"function"!=typeof u.c2v?this.c2vMap(a):u.c2v(g);A||(v=b)}else gx.dbg.write("verticalFormula: cant find grid "+f+" at row "+g);return v},rowValueHandler:function(a,b,f,g,m,n,t){try{var w=gx.fn.vStructForVar(a)||gx.fn.getVarControlMapForVar(a),u=w?w.type:"decimal";switch(u){case "boolean":return g(a,b,f);case "int":case "decimal":var B=gx.num.parseFloat(gx.O[a],n,t);return 0==b?B:m(a,b,f,B);default:gx.dbg.write("Warning: Forumula not supported for: ",a,u)}}catch(p){gx.dbg.logEx(p,
"gxfrmutl.js","Formula could not be calculated for Field: "+a)}},maxFrm:function(a,b,f,g,m,n,t,w){var u=function(p,v,A){return A||gx.O[p]},B=function(p,v,A,y){return y>A?y:A};return gx.fn.verticalFormula(a,b,m,n,t,!0,function(p,v){return gx.fn.rowValueHandler(a,p,v,u,B,f,g)},w)},sumFrm:function(a,b,f,g,m,n,t,w){var u=function(p,v,A){return A||gx.O[p]},B=function(p,v,A,y){return y+A};return gx.fn.verticalFormula(a,b,m,n,t,!0,function(p,v){return gx.fn.rowValueHandler(a,p,v,u,B,f,g)},w)},minFrm:function(a,
b,f,g,m,n,t,w){var u=function(p,v,A){return A&&gx.O[p]},B=function(p,v,A,y){return y<A?y:A};return gx.fn.verticalFormula(a,b,m,n,t,!0,function(p,v){return gx.fn.rowValueHandler(a,p,v,u,B,f,g)},w)},averageFrm:function(a,b,f,g,m,n,t,w){return gx.fn.verticalFormula(a,b,m,n,t,!0,function(u,B){var p=gx.num.parseFloat(gx.O[a],f,g);return 0==u?p:(B*u+p)/(u+1)},w)},countFrm:function(a,b,f,g,m,n){return gx.fn.verticalFormula(a,b,f,g,m,!1,function(t,w){return 0==t?1:w+1},n)},serialRule:function(a,b,f,g,m){m=
m||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(f),f))return m[a];gx.lang.emptyObject(m[b])&&(m[b]=m[a]+g,(f=gx.fn.vStructForVar(b))&&f.v2c(),(f=m.VarControlMap[a])&&gx.fn.setControlValue(f.id,m[b]));b=m[b]||0;a=m[a]||0;return 0<g?Math.max(b,a):Math.min(b,a)},setReturnParms:function(a,b,f,g){try{gx.csv.settingUIparms=!0;var m;if(g){var n=f.length;for(m=0;m<n;m++){var t=gx.fn.vStructForVar(b[m]);g.grid.setCellValue.apply(g.grid,[t,f[m]])}}else if(a&&b&&f&&(n=b.length,n<=f.length)){gx.setGxO(a);
g=null;for(m=0;m<n;m++){var w=b[m];if(w){var u=f[m];t=gx.fn.vStructForVar(w);gx.lang.emptyObject(t)&&(t=gx.fn.vStructForHC(w));if(t){var B=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(t.fld));t.v2v&&(t.v2v(u),gx.fn.v2c(t,u));gx.fn.call_v2bc(t,a);gx.fn.isAccepted(B)&&(g=B,gx.evt.onchange_impl(B));a.refreshDependantGrids(t)}else a.setVariable(w,u)}}g&&gx.fn.setFocus(g)}}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","setReturnParms")}gx.csv.settingUIparms=!1},isOutputParm:function(a){return a&&a.IOType&&("out"==
a.IOType||"inout"==a.IOType)?!0:!1},checkPopupFocus:function(a){if(gx.popup.ispopup()){var b=gx.popup.getPopup();if(b&&b.frameDocument&&(a.ownerDocument?a.ownerDocument:a.document).URL!=b.frameWindow.location.href)return b.setFocusFirst(),!1}return!0},persistControlProperty:function(a,b,f){a=gx.fn.screen_CtrlId(gx.csv.ctxControlId(a));gx.usrPtys[a]||(gx.usrPtys[a]={});gx.usrPtys[a][b.toLowerCase()]=f},setCtrlProperty:function(a,b,f,g){if(gx.O){var m="string"===typeof a&&gx.fn.isColumnProperty(b)?
gx.O.getGridColumn(a,""):a;if(m instanceof gx.grid.column){var n=m;ControlId=m.htmlName}else"string"===typeof a?(ControlId=a,n="FORM"==ControlId?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(ControlId))):(n=a,ControlId=n.id);n&&((g=g||gx.O.getValidStructFld(ControlId))&&g.grid&&gx.fn.persistControlProperty(ControlId,b,f),this.setCtrlPropertyImpl(n,b,f,g))}else gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(a,b,f){var g=
gx.fn.screen_CtrlRef(a);if(null!=g){this.setCtrlPropertyImpl(g,b,f);var m=gx.fn.controlGridId(a);m&&(g=l(g).parent().closest("TD",l("[data-gxgridid="+m+"]").get(0)).get(0))&&(this.persistControlProperty(a,b,f),this.setCtrlPropertyImpl(g,b,f))}},getControls:function(a){var b=[a];(a=this.getRONode(a.id,!1))&&b.push(a);return l(b)},setCtrlPropertyImpl:function(a,b,f,g){try{if(null!=a&&(a==document&&"Backcolor"==b&&(a=document.body,this.setCtrlPropertyImpl(gx.dom.form(),b,f)),g=g||gx.O.getValidStructFld(a.id),
!(("Enabled"===b||"Visible"===b)&&g&&0<g.grid&&gx.fn.rowIsRemoved(g.grid,gx.fn.controlRowId(a))))){var m=g?g.ctrltype:null,n=a,t={control:n,property:b,value:f};gx.fx.obs.notify("gx.control.onbeforepropertychange",[t]);if(!t.cancel){var w=l();switch(b){case "Picture":a.setAttribute("data-gx-rt-picture",f);g&&(g.v2c(),g.c2v());break;case "Caption":this.setCtrlCaption(a,f);break;case "Tooltiptext":a.title=f;break;case "Invitemessage":a.placeholder=f;break;case "Visible":if("INPUT"==a.nodeName&&"button"==
a.type)this.setButtonVisibility(a,!this.propertyValueFalse(f));else{var u="checkbox"===a.type;if("INPUT"==a.nodeName){if(u&&l(a).parent().is("span:not(.gx-checkbox-wrapper)"))w=l(a).parent();else if("radio"==a.type){var B=l(a).parent().closest(".gx-radio-button");0<B.length&&(a=B[0])}var p=gx.html.multimediaUpload.getContainer(a);p&&(a=p)}var v=this.propertyValueFalse(f),A=a.gxusrdisabled&&!u?a.gxusrdisabled:!1;if(v){var y=gx.dom.byId("span_"+a.id);this.setVisible(a,!v);y&&this.setVisible(y,!v)}else(y=
this.getRONode(a.id,A))&&this.setVisible(y,A),this.setVisible(a,!A);for(var F=0;F<w.length;F++)this.setVisible(w[F],!A);gx.fn.setDateCtrlProperties(a,!A,!v)}gx.fn.checkAttachedProperty(a.id,b,gx.lang.gxBoolean(f));break;case "Enabled":v=this.propertyValueFalse(f);if("hidden"===a.type)return;"textblock"===m&&l(a).toggleClass("gx-disabled",v);if(("SPAN"===a.tagName||"DIV"===a.tagName&&"1"===a.getAttribute("data-gxformat"))&&v)return;if("INPUT"===a.nodeName&&"radio"===a.type){var H=gx.dom.byName(a.name),
r=H.length;for(F=0;F<r;F++)this.setEnabledProperty(H[F],!v)}else!gx.dom.isEditControl(a)&&"textarea"!==a.type&&"file"!==a.type&&"SELECT"!==a.tagName||"password"===a.type?this.setEnabledProperty(a,!v):(y=this.getRONode(a.id,v,g.fmt,g.multiline),gx.fn.isVisible(a,0)||y&&gx.fn.isVisible(y,0)?(y&&this.setVisible(y,v),this.setEnabledProperty(a,!v),this.setVisible(a,!v),gx.fn.setDateCtrlProperties(a,!v,!0),gx.fn.checkAttachedProperty(a.id,b,!v),gx.fn.checkAttachedProperty(a.id,"Visible",!v)):(this.setEnabledProperty(a,
!v),gx.fn.setDateCtrlProperties(a,!v,!1),gx.fn.checkAttachedProperty(a.id,b,!v)));break;case "Class":if(a==document){var q=l(gx.dom.form()),x=l(document.body),D=q.attr("data-gx-class")||"";x.removeClass(D).attr("class",f+" "+x.attr("class"));q.removeClass(D).attr({"class":f+" "+q.attr("class"),"data-gx-class":f})}else{var C=this.getControls(a);C.attr("class",f);!gx.O.DSO&&0>=f.indexOf("Readonly")&&l(this.getRONode(a.id,!1)).attr("class",f+" Readonly"+f)}break;case "Columnclass":var I=a.parentNode;
I&&"TD"==I.tagName&&this.setCtrlClass(I,"gx-attribute "+f);break;case "Columnheaderclass":var G=a.table.container.querySelectorAll("TH")[a.index];G&&this.setCtrlClass(G," "+f+" "+a.table.columnAutoHeaderClass);break;case "Link":this.setCtrlLink(this.getRONode(a.id,!1)||a,f);break;case "Linktarget":this.setCtrlLinkTarget(this.getRONode(a.id,!1)||a,f);break;case "Backcolor":var K=gx.color.html(f);if(K&&void 0==a.gxGridName){a:{var N=a;if(N&&"radio"==N.type){var P=l(N).parent().closest(".gx-radio-button");
if(0<P.length){a=P[0];break a}}a=N}C=this.getControls(a);C.css("background-color",K.Html)}break;case "Background":C=this.getControls(a);C.css("background-image","url("+f+")");break;case "Forecolor":if(K=gx.color.html(f))C=this.getControls(a),C.css("color",K.Html);break;case "Fontbold":v=this.propertyValueFalse(f);C=this.getControls(a);C.css("fontWeight",v?"normal":"bold");break;case "Fontitalic":v=this.propertyValueFalse(f);C=this.getControls(a);C.css("fontStyle",v?"normal":"italic");break;case "Fontunderline":v=
this.propertyValueFalse(f);C=this.getControls(a);C.css("textDecoration",v?"none":"underline");break;case "Fontstrikethru":v=this.propertyValueFalse(f);C=this.getControls(a);C.css("textDecoration",v?"none":"line-through");break;case "Fontname":C=this.getControls(a);C.css("fontFamily",f);break;case "Fontsize":C=this.getControls(a);C.css("fontSize",f+"pt");break;case "Filename":this.setBlobFilename(a,f);break;case "Filetype":this.setBlobFiletype(a,f);break;case "URL":this.setBlobUrl(a,f);break;case "IsBlob":this.setMultimediaType(a,
f);break;case "Bitmap":var O=gx.util.imageName(f);O?gx.html.setGXImageCSSClass(a,"GX_Image_"+O+"_Class"):a.src=f;break;case "SrcSet":void 0!==f&&(a.srcset=f);break;case "gximage":f&&gx.html.setGXImageCSSClass(a,"GX_Image_"+f+"_Class");break;case "Multimedia":this.setMultimediaValue(a.id,f);break;case "Jsonclick":a.jsevent=f;break;case "Source":C=f;N=C.indexOf("?");0<N&&(C=C.substring(0,N));-1==C.indexOf(":")&&-1==C.indexOf("/")?a.src=gx.ajax.objectUrl(f):a.src=gx.util.resourceUrl(f,!0);gx.evt.attach(a,
"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==a.tagName||gx.dom.isRadio(a)||"SPAN"==a.tagName)if(f=gx.json.evalJSON(f),"SELECT"==a.tagName)0!=f.isset&&(gx.fn.loadComboBox(a.id,f.v),gx.fn.setComboBoxValue(a.id,f.s),gx.plugdesign.controlValueChanged(a,f.v));else if(gx.dom.isRadio(a))0!=f.isset&&(gx.fn.loadRadioButton(a,f.v,f.s),gx.plugdesign.controlValueChanged(a,f.v));else{var W=a.id.substring(5);C="";var V=f.s;g=gx.O.getValidStructFld(W);gx.lang.emptyObject(g)||(C=g.type);V=gx.fn.trimSelectValue(V,
C);f.s=V;gx.fn.setControlValue_span_safe(W,gx.fn.selectedDescription(f,C))}break;case "Width":a.width&&(a.width=f);a.style.width=gx.dom.addUnits(f);break;case "Height":a.height&&(a.height=f);a.style.height=gx.dom.addUnits(f);break;case "Ispassword":a.type=gx.lang.gxBoolean(f)?"password":"text";break;case "Title":var Y=a.table.ownerGrid.getContainerControl();gx.dom.getOrCreatebyCss(Y,"[data-colindex='"+a.index+"'] span").innerHTML=f;a.title=f}var ba=gx.dom.id(a);if(ba){g=gx.O.getValidStructFld(ba);
var fa=ba+(g&&g.grid&&0<g.grid?"":"_")+b;if(gx.fn.createPtyCondition(b)||gx.fn.isHidden(fa))f=1==f?"1":0==f?"0":f,gx.fn.setHidden(fa,f)}gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:n,property:b,value:f}])}}}catch(da){gx.dbg.logEx(da,"gxfrmutl.js","setCtrlPropertyImpl")}},createPtyCondition:function(a){return("Visible"==a||"Enabled"==a)&&gx.O.isTransaction()},setEnabledProperty:function(a,b,f){var g=gx.dom.id(a);if(gx.lang.gxBoolean(b)){if(delete gx.disabledControls[g],gx.fn.isAccepted(a,
!1))return}else gx.util.addOnce(gx.disabledControls,a,g);1==gx.csv.isvalidating()&&b&&null==gx.csv.validActivatedControl&&a!=gx.csv.lastControl&&(g=gx.O.getValidStructId(g),g>gx.O.fromValid&&g<=gx.O.toValid&&(gx.csv.validActivatedControl=a));a.gxusrdisabled=!b;a.disabled=a.gxdisabled?1==a.gxdisabled?!0:a.gxusrdisabled:a.gxusrdisabled;(void 0===f||f)&&this.setEnabled(a,b)},setEnabled:function(a,b){var f=function(m,n){gx.lang.booleanValue(n)?m.removeAttribute("data-gx-readonly"):m.setAttribute("data-gx-readonly",
"")};gx.lang.booleanValue(b)?gx.dom.removeClass(a,"gx-disabled"):gx.dom.addClass(a,"gx-disabled");if(this.disabledAsSpan(a)){try{if("checkbox"==a.type)var g=a.parentNode;"radio"==a.type&&(g=l(a).parent().closest(".gx-radio-button")[0],f(a,b))}catch(m){}if(gx.lang.booleanValue(b))!gx.O.DSO&&g&&0==g.className.indexOf("Readonly")&&(g.className=g.className.substring(8)),this.isVisible(a)&&(this.setVisible(a,1),(b=this.getRONode(a.id,!0))&&this.setVisible(b,0));else if(!gx.O.DSO&&g&&0>g.className.indexOf("Readonly")&&
!gx.text.startsWith(g.className,"gx-")&&(g.className="Readonly"+g.className),this.isVisible(a)&&"password"!=a.type&&"image"!=a.type&&"checkbox"!=a.type&&"radio"!==a.type&&(b=this.getRONode(a.id,!0)))this.setVisible(a,0),this.setVisible(b,1),f=gx.O.getValidStructFld(a),g=0,!gx.lang.emptyObject(f)&&f.format&&(g=f.format),this.setControlValue_span_safe(b,gx.fn.getControlValue(gx.dom.id(a),"screen",void 0,f),g,"textarea"==a.type)}else f(a,b)},disabledAsSpan:function(a){var b=a.tagName.toUpperCase();return"IMG"!=
b&&!("INPUT"==b&&"button"==a.type)},setVisible:function(a,b){l(a).toggleClass("gx-invisible",!gx.lang.booleanValue(b));a.style.display=0==b?"none":this.displayByType(a.nodeName);var f=gx.O.getValidStructFld(a);if(b&&f&&f.gxgrid&&!f.gxgrid.grid.gxIsFreestyle){var g=a.closest("td[data-colindex]");if(g){f.gxgrid.applyPropEntireColumn(g.getAttribute("data-colindex"),"Visible",b);return}}gx.fn.rowGridId(a)&&(a=l(a).find("table")[0])&&this.setVisible(a,b)},getRONodePrefix:function(){return"span_"},prefixROClass:function(a){return gx.O.DSO||
""===a||0===a.indexOf("Readonly")?a:"Readonly"+a},getRONode:function(a,b,f,g){f=void 0===f?gx.html.controls.formats.TEXT:f;if(f===gx.html.controls.formats.RAW_HTML||f===gx.html.controls.formats.HTML||gx.lang.emptyObject(a))return null;var m=gx.dom.byId(a);a=this.getRONodePrefix()+a;var n=gx.dom.byId(a);if(null!=n)return n;if(!b||null==m||"INPUT"===m.nodeName&&("radio"===m.type||"checkbox"===m.type))return null;b=document.createElement("SPAN");b.setAttribute("id",a);b.setAttribute("data-gx-readonly",
"");this.setVisible(b,!1);b.className=gx.fn.prefixROClass(m.className);a="IMG"==m.nodeName||"INPUT"==m.nodeName&&"image"==m.type?m.value:gx.fn.getControlValue(gx.dom.id(m),"screen");m.parentNode.insertBefore(b,m);gx.html.setInnerText(b,a||"",f,g);return b},setDateCtrlProperties:function(a,b,f){var g=gx.dom.byId(gx.dom.id(a)+"_dp_trigger");g&&l(g).toggle(b);if(g=l(gx.dom.byId(gx.dom.id(a)+"_dp_container")))a.Flat&&l(a).hide(),a=l(".calendar",g),g.toggle(b&&f||!b&&f),a&&a.toggle(b&&f)},getGridCtrlProperty:function(a,
b,f){try{if(0!=a){var g=this.getGridObj(a);if(g){var m=g.grid.getColumnByHtmlName(b);if(m)return m[f.toLowerCase()]}}else return this.getCtrlProperty(b,f)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(a,b){var f=gx.O.getValidStructFld(a),g=f&&0<f.grid?"_"+gx.fn.currentGridRowImpl(f.grid):"";g=gx.uc.getUserControlObj(gx.uc.userControlContainerId(a+g));if(null!=g)return g[b];if(g=this.screen_CtrlRef(a))return"Picture"===b?gx.rtPicture(f,g):"Text"===
b?this.getControlValue(a,"screen",void 0,f):"Visible"==b&&gx.fn.getRONode(g.id)?this.getCtrlProperty_impl(g,b)||this.getCtrlProperty_impl(gx.fn.getRONode(a),b):"Enabled"==b&&gx.fn.getRONode(g.id)?!this.getCtrlProperty_impl(gx.fn.getRONode(g.id),"Visible"):this.getCtrlProperty_impl(g,b)},getCtrlProperty_impl:function(a,b){if(null==a)return"";switch(b){case "Tooltiptext":return a.title;case "Invitemessage":return a.placeholder;case "Visible":return"INPUT"===a.nodeName&&"radio"===a.type&&(b=l(a).parent().closest(".gx-radio-button"),
0<b.length&&(a=b[0])),"none"!=a.style.display;case "Enabled":return void 0===a.disabled?l(a).hasClass("gx-disabled")?!1:!0:!a.disabled;case "Class":return a.className;case "Backcolor":return gx.color.css(a.style.backgroundColor);case "Forecolor":return gx.color.css(a.style.color);case "Width":return gx.dom.dimensions(a).w;case "Height":return gx.dom.dimensions(a).h;case "Caption":return this.getCtrlCaption(a);case "Fontbold":return"bold"==a.style.fontWeight;case "Fontitalic":return"italic"==a.style.fontStyle;
case "Fontunderline":return"underline"==a.style.textDecoration;case "Fontstrikethru":return"line-through"==a.style.textDecoration;case "Fontname":return a.style.fontFamily;case "Filename":return a.value.split(/(\\|\/)/g).pop();case "Fontsize":return a=parseInt(a.style.fontSize),isNaN(a)?12:a;case "Ispassword":return"password"==a.type}},displayByType:function(a){switch(a){case "TABLE":return!gx.util.browser.isIE()||8<=gx.util.browser.ieVersion()?"table":"block";case "P":case "DIV":return"block"}return""},
setCtrlCaption:function(a,b){try{var f=gx.html.getFieldLabel(a);if(f)gx.fn.setControlValue_fmt(f,b,0,!1);else{switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":var g=a.getAttribute("data-gxformat"),m=gx.O.getValidStructFld(a);null==g&&(g=!gx.lang.emptyObject(m)&&m.format?m.format:0);f=!1;m&&(f="edit"===m.ctrltype?m.multiline:!0);gx.fn.setControlValue_fmt(a,b,g,f);return;case "INPUT":"checkbox"!=a.type&&(a.value=b);return}"#document"==a.nodeName&&(a.title=b)}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js",
"setCtrlCaption")}},getCtrlCaption:function(a){var b=gx.html.getFieldLabel(a);if(b)return l(b).text();switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":b=a.getAttribute("data-gxformat");if(null!=b&&"1"==b)return a.innerHTML;for(;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;return"undefined"!=typeof a.innerText?a.innerText:a.textContent||a.text;case "INPUT":if("checkbox"!=a.type)return a.value;break;default:return""}},propertyValueFalse:function(a){return"string"==typeof a&&
(a=a.toLowerCase(),"false"==a||0==gx.num.parseFloat(a))?!0:0==a},setButtonVisibility:function(a,b){b=b?"":"none";var f=a.parentNode;gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b,f=f.parentNode,gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b,f=f.parentNode,gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b,f=f.parentNode,gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b))));a.style.display=b},setBlobValue:function(a,b){a=gx.dom.byId(a)||gx.dom.byId("Object_"+
a);this.setBlobUrl(a,b)},setBlobFilename:function(a,b){null!=a&&(a=gx.O.getValidStructFld(a))&&gx.fn.setHidden(a.fld+"_Filename",gx.text.trim(b))},setBlobFiletype:function(a,b){if(null!=a){var f=gx.O.getValidStructFld(a);f&&gx.fn.setHidden(f.fld+"_Filetype",gx.text.trim(b));f=a;"INPUT"==f.nodeName&&"file"==f.type&&(f=gx.dom.byId("Object_"+a.id));null!=f&&(b=gx.util.getContentType(b),this.setObjectCtrlType(f,b),gx.fn.setVisible(f,!0))}},resolveResourceUrl:function(a,b){if(""==a)return b?gx.ajax.getImageUrl(gx,
"blankImage"):"";if(!gx.isabsoluteurl(a))if(gx.isRelativeToHost(a)){if(0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+a,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1);return a},setBlobUrl:function(a,b){var f=gx.html.multimediaUpload.getContainer(a);if(f)a=this.resolveResourceUrl(b,!1),gx.html.multimediaUpload.setPreviewImage(f,a),gx.html.multimediaUpload.setPreviewLink(f,a);else if(!b.match(/^[a-z]:[\S]*/i)&&null!=a){f=a;
var g="INPUT"==f.nodeName&&"file"==f.type;if(""===b&&""===b){var m=l(f);m.wrap("<form>").closest("form").get(0).reset();m.unwrap()}g&&(f=gx.dom.byId("Object_"+a.id));null!=f&&(g=gx.util.getContentTypeFromExt(b),f=this.setObjectCtrlType(f,g));null!=f?"IMG"==f.tagName?(b=this.resolveResourceUrl(b,!0),f.src=b):(f.data=b||"about:blank",gx.fn.setVisible(f,!0),this.resizeObject(f),gx.dom.redrawControl(f)):(f=gx.dom.byId("Link_"+a.id),null!=f&&(f.style.display=""!=b?"block":"none",f.href=b))}},setGridMultimediaValue:function(a,
b,f,g){if(void 0!==b)return this.setMultimediaValue(a+"_"+b,f,g)},setMultimediaValue:function(a,b,f){var g=gx.dom.byId(gx.csv.ctxControlId(a));if(g){var m=gx.html.multimediaUpload.getContainer(g),n=this.resolveResourceUrl(f||b||"",!1);if(m){0<=gx.util.Url.parseWithAnchor(b).protocol.search(/^https?:/)&&gx.html.multimediaUpload.setPreviewImage(m,n);var t=""==b&&""==f||""!=b;if(!t){var w=gx.dom.byId(g.id+"_GXI");w&&(w.value=f)}(a=gx.dom.byId(a))&&""==b&&(a.value="");this.setMultimediaType(g,t);gx.html.multimediaUpload.setPreviewLink(m,
n)}else{if("IMG"==g.tagName||"INPUT"==g.tagName&&"image"==g.type)g.src=n;(b=g.parentNode)&&"A"==b.tagName&&gx.dom.isMultimediaElement(g)&&(n?b.href=n:b.removeAttribute("href"))}}},setMultimediaType:function(a,b){a&&(a=gx.html.multimediaUpload.getContainer(a))&&gx.html.multimediaUpload.setType(a,gx.lang.gxBoolean(b))},setObjectCtrlType:function(a,b){var f=a;if("IMG"==a.nodeName&&(!b||0==b.indexOf("image/")))return f;if(a.type!=b||"OBJECT"==a.nodeName&&0==b.indexOf("image/"))if(f=0==b.indexOf("image/")?
gx.html.nodesFromText('<img id="'+a.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+a.id+'" type="'+b+'">')[0]){try{for(var g in a.attributes)if("id"!=g&&"type"!=g&&"implementation"!=g&&a[g])try{f[g]=a[g]}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setObjectCtrlType")}}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setObjectCtrlType")}if(b=a.parentNode){g=null;for(var m=b.childNodes.length,n=0;n<m;n++)if(b.childNodes[n]==a){n<m-1&&(g=b.childNodes[n+1]);break}gx.dom.removeControlSafe(a);
null!=g?b.insertBefore(f,g):b.appendChild(f)}}return f},resizeObject:function(a){var b=gx.lang.emptyObject;!b(a.data)&&"about:blank"!=a.data&&b(a.width)&&b(a.height)&&b(a.style.width)&&b(a.style.height)&&(a.style.width="200px",a.style.height="200px")},restoreLostCtrlOnGridRefresh:function(a,b,f){if(null==b.form){var g=gx.dom.id(b);!(g=gx.O.getValidStructFld(g))||"checkbox"!=b.type||g.gxgrid&&parseInt(a||0,10)!==parseInt(g.gxgrid.grid.firstRecordOnPage||0,10)||(b=gx.dom.el(b.id)||gx.dom.el(b.name),
b.checked=f)}return b},checkboxClick:function(a,b,f,g,m){var n=b.checked;m=m?gx.getObj(m):null;var t="object"===typeof a?a:gx.fn.validStruct(a,m),w=t&&t.gxgrid?t.gxgrid.grid.firstRecordOnPage:0;a=t&&t.grid?t.grid:0;var u=function(B){b=this.restoreLostCtrlOnGridRefresh(w,b,n);b.checked=n;b.value=n?f:g;gx.dom.toggleAttribute(b,"checked",n);t&&(B=gx.fn.controlRowIndex(b),"function"==typeof t.c2v&&t.c2v(B),gx.fn.call_v2bc(t,gx.O),gx.csv.invalidateCtrl(b,!0))}.closure(this);a&&gx.pO.supportAjaxEvents&&
gx.evt.doAfterValidating(u);gx.fx.obs.notify("gx.validation",null,function(){if(gx.evt.fixWebKitOnFocus())b.onfocus();u.call(this,!0)});gx.pO.fullAjax||u.call(this,!0);m&&gx.util.browser.isIE()&&gx.setGxO(m)},setCtrlClass:function(a,b){null!=a&&(a.className=b)},setCtrlLink:function(a,b){if(null!=a)if(""==b)this.unsetCtrlLink(a);else if("A"==a.tagName)a.href=b;else{var f=a.firstChild;if(f&&"A"==f.tagName)f.href=b;else{var g=a.parentNode;if("A"==g.tagName)g.href=b;else{var m=document.createElement("A");
m.href=b;f&&"#text"==f.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(m,!0),m.innerHTML=f.nodeValue,a.replaceChild(m,f)):(g.replaceChild(m,a),m.appendChild(a));(a=l(a).attr("data-gx-link-target"))&&l(m).attr("target",a)}}}},unsetCtrlLink:function(a){if(null!=a&&(a=a.parentNode,"A"==a.tagName)){var b=a.firstChild,f=a.parentNode;if(null!=f){for(;null!=b;)f.insertBefore(b,a),b=a.firstChild;gx.dom.removeControlSafe(a)}}},setCtrlLinkTarget:function(a,b){if(null!=a){var f=l(a);f.is("a")||(f=f.children());
f.is("a")&&f.attr("target",b);l(a).attr("data-gx-link-target",b)}},scrollIntoViewIfNeeded:function(a,b,f){gx.fn.isVisibleAtScroll(a,b)||a.scrollIntoView(f)},isVisibleAtScroll:function(a,b){var f=a.getBoundingClientRect();a=f.bottom;var g=f.height;f=f.top;b=b.getBoundingClientRect();return f<=b.top?b.top-f<=g:a-b.bottom<=g},isVisible:function(a,b){if(!a||gx.dom.hasClass(a,"gx-invisible")||"INPUT"===a.tagName.toUpperCase()&&"hidden"===a.type||"none"===a.style.display)return!1;try{for(var f;a&&("undefined"==
typeof b||0<=b);){if((f=gx.dom.getComputedStyle(a))&&("hidden"==f.visibility||"none"==f.display))return!1;a=a.parentNode;"undefined"!=typeof b&&b--}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(a,b){var f=this.gridObjByLvl(a);if(f)return f=gx.O.getGridById(f.gridId,b)||f,(a=f.grid.getRowByGxId(b))?a.gxIsMod():!0;f=!1;try{f=1==this.getControlValue("nIsMod_"+a+"_"+b)}catch(g){f=!1}return f},gridObjByLvl:function(a){for(var b=gx.O.Grids,f=b.length,g=0;g<f;g++)if(b[g].gridLvl==
a)return b[g];return null},forceEnableControls:function(a){for(var b in gx.disabledControls){b=this.getControlRef_list(b);for(var f=b.length,g=0;g<f;g++)try{"button"!=b[g].type&&"submit"!=b[g].type&&(b[g].disabled=a)}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","forceEnableControls")}}},alert:function(a,b){try{var f=gx.util.balloon.getNew(a.id);f.setError(b);f.show();gx.csv.invalidForcedCtrl=gx.csv.invalidForcedCtrl||{};gx.csv.invalidForcedCtrl.Ctrl=a;gx.csv.invalidForcedCtrl.ForceFocus=!1}catch(g){gx.util.alert.showError(b)}},
getGridRowMode:function(a,b){return this.getGridRowModeImpl(a,b,this.currentGridRow(b))},getGridRowModeImpl:function(a,b,f){b=this.rowIsRemoved(b,f);a=this.getControlValue("nRcdExists_"+a+"_"+f);return"1"==b?"DLT":"0"==a?"INS":"UPD"},rowIsRemoved:function(a,b){a=this.getGridObj(a);return null!=a&&(b=a.grid.getRowByGxId(b))?b.gxDeleted():!1},getGridObj:function(a,b){return gx.O.getGridById(a,b)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","changeCmpContext")}},
initOld:function(a){void 0==gx.oldValues[a.id]&&(gx.oldValues[a.id]=a.value)},hasUnicode:function(a){return/[^\u0000-\u00ff]/.test(a)},setFocusOnError:function(a){var b=gx.fn.controlGridId(a);a=gx.csv.ctxControlId(a);b=0==b?gx.dom.el(a):gx.fn.getControlGridRef(a,b);return null!=b&&(gx.O.AnyError=1,gx.csv.anyError=!0,b.setAttribute("data-gxvalid","0"),gx.csv.stopOnError||gx.csv.invalidForcedCtrl&&gx.csv.invalidForcedCtrl.ForceFocus)?(gx.fn.setFocus(b),!0):!1},usrSetFocus:function(a){gx.usrPendingControl=
a},usrSetFocus_commit:function(){gx.usrPendingControl&&(gx.fn.usrSetFocus_impl(gx.usrPendingControl),delete gx.usrPendingControl)},usrSetFocus_impl:function(a,b){void 0===b&&(b=!0);var f=gx.fn.screen_CtrlRef(a);null==f?gx.grid.setActiveGridRow(a,0):(a=gx.dom.id(f),1==gx.csv.isvalidating()?b?gx.fx.obs.addObserver("gx.onaftervalidate",this,function(g){gx.lang.doCallTimeout(gx.fn.usrSetFocus_impl,gx.fn,[g,!1],200)}.closure(gx.fn,[a]),{single:!0}):gx.usrFocusControl=a:(gx.fn.setFocus(f),delete gx.usrFocusControl))},
setFocus:function(a,b){if(a){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(a.id)&&(a=gx.dom.byId(a.id),!a))return;gx.fn.setFocusSafe(a,function(f){gx.fn.setSelection(f);f.forcedFocus=!0;b&&b()})}catch(f){gx.dbg.logEx(f,"gxfrmutl.js",
"setFocus")}}},setFocusSafe:function(a,b){var f=this,g=gx.csv.setFocusOnload;if(a){var m=function(t,w){try{g&&w&&gx.fx.obs.addObserver("gx.onafterfocus",this,w.closure(this,[t]),{single:!0}),t.focus()}catch(u){}!g&&w&&w(t)},n=function(){gx.lang.doCallTimeout(m,f,[a,b],g?500:0)};gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",window,n,{single:!0}):n()}},setFocusInit:function(){try{gx.csv.lastActiveControl=window.document.activeElement}catch(a){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=
gx.csv.lastControl)},arrayCtrlFocus:function(a){a&&"radio"==a.type&&(a=gx.fn.getRadioSelected(a.name)||a);return a},setFocusOnload:function(a){a=void 0===a?!0:!1;gx.wpo(function(){if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){var b=null;b=gx.pO.getUserFocus();if(!gx.lang.emptyObject(b)){if("notset"==b)return;var f=gx.pO.getUserControl(gx.uc.userControlContainerId(b));if(gx.lang.emptyObject(f))gx.csv.userFocus=gx.fn.getControlRef(b,null,!0);else{f.setFocusBase();return}}if("notset"!=gx.csv.userFocus){b=
gx.csv.userFocus;gx.fn.isAccepted(b)||(gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?b=gx.csv.lastActiveControl:(b=gx.fn.firstAcceptedControl(gx.popup.ispopup()),b=gx.fn.arrayCtrlFocus(b)));try{b?(f=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=b,gx.csv.setFocusOnload=a,gx.fn.isAccepted(b)?(gx.O&&gx.O.IsComponent&&(gx.csv.disableFocus=!0),gx.fn.setFocus(b,f)):(gx.popup.setFocus(),f())):gx.popup.setFocus()}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setFocusOnload")}}}})},
setSelectionImpl:function(a){setTimeout(function(){document.activeElement===a&&l(a).select()},0)},setSelection:function(a){if(a&&gx.fn.isVisible(a))try{if(gx.csv.lastControl=a,(gx.dom.isEditControl(a)||"file"==a.type)&&a.select)this.setSelectionImpl(a);else if("TEXTAREA"==a.nodeName||"SELECT"==a.nodeName)a.focus(),this.setSelectionImpl(a)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setSelection")}},isActiveCtrl:function(a,b,f){return gx.fn.isAccepted(a,b,f)||gx.TabFocusOnPrompt&&a&&a.parentElement&&"IMG"==
a.tagName&&"A"==a.parentElement.tagName},isAccepted:function(a,b,f){b=void 0===b||b;f=f||gx.O;var g=["FIELDSET"];g=null!=a&&a.type&&"hidden"!==a.type&&!a.disabled&&!a.readOnly&&!gx.util.inArray(a.nodeName,g)&&gx.fn.isVisible(a);if(!g)return!1;b&&(a=gx.dom.id(a),b=f.getValidStructFld(a),a=f.getVariable("Gx_mode"),0<gx.csv.lastGrid&&f.setVariable("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),g=!gx.lang.emptyObject(b)&&b.nac?!b.nac.call(f):!0,f.setVariable("Gx_mode",
a));return g},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(a,b){b=b||gx.csv.lastControl;var f=gx.fn.getControlIndex(b),g=f,m=this.controlGridId(b.id||b.name),n=!1;a&&gx.dom.hasClass(b,"gx_newrow")&&(g=b.gxControlIdx,n=!0);if(-1==g)return!0;var t=gx.fn.getFormElements();for(b=gx.fn.searchFocus(++g,!0);;b=gx.fn.searchFocus(++g,!0))if(null==b||g==t.length)g=-1;else{if(a)break;if(gx.evt.isEnterEvtCtrl(b))break;if("INPUT"==b.nodeName&&
"submit"!=b.type&&"button"!=b.type&&"image"!=b.type)break}!n&&m&&gx.O.isTransaction()&&this.controlGridId(b.id||b.name)!=m&&(a=gx.O.getGridById(m),b=gx.dom.byId(a.containerName+"_NewRow").parentNode,b.gxControlIdx=f);gx.fn.setFocus(b)},getFormElements:function(){return l.makeArray(l("button, fieldset, input, img, object, output, select, textarea, div[class="+gx.uc.gxCssClass+"]"))},getControlIndex:function(a){var b=gx.fn.getFormElements().length-1;return this.controlIndex(a,0,b)},controlIndex:function(a,
b,f){if(document.all){var g=gx.fn.getFormElements(),m=g[b].sourceIndex,n=g[f].sourceIndex,t=parseInt(b+(f-b)/2)+1;g=g[t].sourceIndex;if(b==f&&a.sourceIndex==m&&a.sourceIndex==n||a.sourceIndex==m)return b;if(a.sourceIndex==n)return f;if(a.sourceIndex==g)return t;if(a.sourceIndex>g&&a.sourceIndex<n)return this.controlIndex(a,t+1,f-1);if(a.sourceIndex>m&&a.sourceIndex<g)return this.controlIndex(a,b+1,t-1)}else return a.gxIndex},searchFocus:function(a,b){return b?this.searchFocusFwd(a):this.searchFocusBack(a)},
findControlToFocus:function(a){if(gx.fn.isActiveCtrl(a))return a;var b=l(a).find("div[tabindex=0]")[0];if(l(a).is("div")&&l(a).hasClass("gx_usercontrol")&&b)return b},searchFocusBack:function(a){for(var b=k(gx.fn.getFormElements());0<=a;a--){var f=this.findControlToFocus(b[a]);if(f)return f}return null},searchFocusFwd:function(a){for(var b=k(gx.fn.getFormElements()),f=b.length;a<f;a++){var g=this.findControlToFocus(b[a]);if(g)return g}return null},rowGridId:function(a){if(!a||!a.getAttribute)return null;
var b=a.getAttribute("data-gxgridid");return null!=b?b:gx.fn.rowGridId(a.parentNode)},controlRowIndex:function(a){return l(a).parentsUntil(".gx_usercontrol, .gxwebcomponent").filter("[data-gxrow]").attr("data-gxrow")||""},controlRowIdImpl:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("data-gxrow");return null!=b?b:gx.fn.controlRowIdImpl(a.parentNode)},controlRowId:function(a){var b=gx.fn.controlRowIdImpl(a);null===b&&a&&a.id&&0<a.id.lastIndexOf("_")&&(b=a.id.lastIndexOf("_"),
b=a.id.substring(b+1));return b},controlGridId:function(a){try{var b,f=gx.O.Grids;if(f){var g=0;for(b=f.length;g<b;g++)if(f[g].grid.columnsHtmlName[a])return f[g].gridId}var m=gx.fn.controlIds();g=0;for(b=m.length;g<b;g++){var n=gx.fn.validStruct(m[g]);if(gx.O.isSameField(n,a))return n.grid}var t=gx.O.getComponentData(a);if(t){var w=gx.fn.gridObjByLvl(t.lvl);if(w)return w.gridId}}catch(u){}return 0},oldGridId:function(a){try{for(var b=gx.fn.controlIds(),f=b.length,g=0;g<f;g++){var m=gx.fn.validStruct(b[g]);
if(void 0!=m&&m.gxold==a)return m.grid}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(a,b){var f="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,a)&&(f=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)):this.isLvlParmOld(0,a)&&(f=gx.O.Gx_mode);return"no_mode"==f?!0:"UPD"==f||null==gx.csv.validatingGrid?(window[a]=b,!0):!1},isLvlParmOld:function(a,b){try{var f=gx.O.getOldLvl(b);if(0<=f){if(0<a){var g=gx.fn.gridLvl(a);
return f<g}return!0}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(a){try{for(var b=gx.fn.controlIds(),f=b.length,g=0;g<f;g++){var m=gx.fn.validStruct(b[g]);if(void 0!=m&&void 0!=m.lvl&&m.grid==a)return m.lvl}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(a){try{for(var b=gx.fn.controlIds(),f=b.length,g=0;g<f;g++){var m=gx.fn.validStruct(b[g]);if(void 0!=m&&m.lvl==a)return m.grid}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","lvlGrid")}return 0},
vStructId:function(a){try{for(var b=gx.fn.controlIds(),f=0;f<b.length;f++){var g=gx.fn.validStruct(b[f]);if(void 0!=g&&g.fld==a)return b[f]}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(a,b){try{var f=null;b&&(f=[]);for(var g=gx.fn.controlIds(),m=g.length,n=0;n<m;n++){var t=gx.fn.validStruct(g[n]);if(void 0!=t&&a(t))if(t.id=g[n],b)f.push(t);else return t}}catch(w){gx.dbg.logEx(w,"gxfrmutl.js","getVStruct")}return f},vStructForOld:function(a){return gx.fn.getVStruct(function(b){return b.gxold==
a})},vStructForVar:function(a){return gx.fn.getVStruct(function(b){return b.gxvar==a})},vStructForVarWId:function(a,b){var f=gx.fn.getVStruct(function(t){return t.gxvar==a},!0),g=f[0],m=f.length;if(1<m)for(var n=0;n<m&&(g=f[n],g.id!=b);n++);return g},vStructForHC:function(a){return gx.fn.getVStruct(function(b){return b.hc==a})},firstCtrlAfterGrid:function(a,b){for(var f=gx.fn.lastCtrlId();a<f;a++){var g=gx.fn.validStruct(a);if(void 0!=g&&g.grid!=b)return a}return f},clearOldKeys:function(){gx.oldKeyValues=
[]},oldKey:function(a){try{return gx.oldKeyValues[a]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(a,b){try{return gx.oldKeyValues[a+gx.fn.currentGridRow(b)]}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridKey")}return""},setKey:function(a,b){null!=a&&(gx.oldKeyValues[a]=b)},unsetKey:function(a){null!=a&&(gx.oldKeyValues[a]=void 0)},setGridKey:function(a,b,f){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=f)},unsetGridKey:function(a,b){null!=a&&(gx.oldKeyValues[a+
gx.fn.currentGridRow(b)]=void 0)},removeGridRow:function(a,b){var f=gx.fn.rowIsRemoved(b,a);try{for(var g=gx.fn.controlIds(),m=g.length,n=0;n<m;n++){var t=gx.fn.validStruct(g[n]);if(void 0!=t&&t.grid==b){var w=gx.dom.el(t.fld+"_"+a);null!=w&&(w.gxdisabled=f,w.disabled=f)}}}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","removeGridRow")}gx.evt.doAfterValidating(function(){gx.csv.validGridRow(b,a)})},controlFiresEvent:function(a){return a&&(a.evt||a.triggersEvt)},controlIds:function(a){return(a=a||gx.O)?a.getControlIds():
[]},getControlContext:function(a){var b=null;(a=gx.json.evalJSON(l(a).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)||"{}"))&&1<a.length&&(b=gx.getObj(a[0],a[1]));return b},validStruct:function(a,b){b=b||gx.O;return b.getValidStruct(a)},lastCtrlId:function(a){if(!0===a){a=this.controlIds();for(var b=a.length-1;0<=b;b--){var f=this.validStruct(a[b]);if(f.v2v&&(void 0===f.isacc||1==f.isacc))return a[b]}}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(a,b){return 0==b&&a==this.lastCtrlId(!0)},
vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(a){try{for(var b=gx.fn.vStructsArray(),f=gx.fn.controlIds(),g=f.length,m=0;m<g;m++){var n=b[f[m]];if(null!=n){var t=gx.fn.getControlGridRef(n.fld,n.grid);if(t&&gx.fn.isAccepted(t)&&(a||"submit"!=t.type&&"image"!=t.type&&"button"!=t.type&&"fieldset"!=t.type))return t}}}catch(w){gx.dbg.logEx(w,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(a){var b=gx.dom.byId(gx.csv.cmpCtx+"BTN_DELETE");
null!=b&&a.isTransaction()&&gx.fn.setCtrlPropertyImpl(b,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(a){1!=gx.csv.isvalidating()&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(a&&gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.O.fromValid=gx.csv.lastId,gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(a){var b=function(f){try{for(var g=f.length,m=0;m<g;m++)gx.fn.setCtrlPropertyImpl(f[m],
"Enabled",0)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","disableCtrl")}};a=gx.fn.getControlRef_list(a);if(null!=a)if("complete"==document.gxReadyState)b(a);else gx.evt.on_ready(this,b.closure(this,[a]))},refreshGridRowBC:function(a,b){try{var f=gx.O.getGridBC(a);if(f){var g=gx.pO.getGridForColl(f.gxvar);if(gx.csv.validatingGrid&&g&&gx.csv.validatingGrid.gridId==g.gridId)return gx.fn.setGridHidden(a,b),b=b[parseInt(gx.fn.currentGridRow(g.gridId))-1],gx.O.bcToScreen(f,b),!0}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js",
"refreshGridRowBC")}return!1},refreshBC:function(a,b){b=gx.O.applySDTVarMapping(b,a);return this.refreshFormBC(a,b)||this.refreshGridRowBC(a,b)},refreshFormBC:function(a,b){try{var f=gx.O.getFormBC(a)||gx.O.getFormBCForVar(a);if(f)return gx.setVar(a,b),gx.fn.setGridHidden(a,b),gx.O.bcToScreen(f,b),!0}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[a]},GX_HASH_PREFIX:"gxhash_",
getHash:function(a,b,f){return gx.fn.getHidden(a+gx.fn.GX_HASH_PREFIX+b+(f?"_"+f:""))||gx.fn.getHidden(a+gx.fn.GX_HASH_PREFIX+b)},getHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return gx.http.viewState[a]},setHidden:function(a,b){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[a]=b},setGridHidden:function(a,b){var f=a,g=gx.fn.oldGridId(a);0<g&&(f=a+"_"+gx.fn.currentGridRowImpl(g));gx.fn.setHidden(f,b)},deleteHidden:function(a){gx.http.viewState&&delete gx.http.viewState[a]},
setJsonHiddens:function(a,b,f){var g=[];f=void 0===f||f;for(var m in b){f?gx.fn.setGridHidden(m,b[m]):gx.fn.setHidden(m,b[m]);var n=gx.fn.getVarControlMap(a,m);var t=b[m];if(!gx.lang.emptyObject(n)){if(a){var w=a.VarControlMap[n];if("date"==w.type||"dtime"==w.type)t=new gx.date.gxdate(b[m],"Y4MD")}gx.setVar(n,t)}gx.fn.vStructForOld(m)&&gx.setVar(m,t);a&&a.UCBindingsHiddens[m]&&(g=g.concat(gx.O.UCBindingsHiddens[m].uc))}return g},filterHiddens:function(a,b){var f={},g;for(g in b)g&&0==g.search(a)&&
(f[g]=b[g]);return f},autoRefreshingControl:function(a,b){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&gx.csv.lastControl.id==b+a},setJsonValues:function(a,b,f,g,m){if(!a)return[];for(var n=gx.O,t=a.length,w=[],u,B,p=0;p<t;p++){var v=a[p],A=v.CmpContext,y=gx.lang.booleanValue(v.IsMasterPage),F=gx.setGxO(A,y);if(!gx.lang.emptyObject(gx.O))for(var H in v)if("CmpContext"!=H&&"IsMasterPage"!=H&&(!m||m(H))){var r=v[H];if(("object"!=typeof r||!gx.fn.refreshBC(H,v[H]))&&"function"!=
typeof r){var q=gx.fn.vStructForVar(H)||gx.O.getValidStructFld(H);if(q){if(q.v2v&&!gx.fn.autoRefreshingControl(q.fld,A)){var x=gx.O.getGridById(q.grid);x=x&&x.InfiniteScrolling;0!=q.grid&&(u=gx.dom.el(H,!1,!1),u=gx.fn.controlRowId(u)||(q.grid==f?g:gx.fn.currentGridRow(q.grid)));x||(q.v2v(r),gx.fn.v2c(q,r,!1,u))}}else"GX_FocusControl"!=H||b?(q=gx.fn.vStructForHC(H),gx.lang.emptyObject(q)||gx.lang.emptyObject(q.hc)||q.grid||(q.hc==H?(F[q.hc]=r,gx.fn.setHidden(A+"GXH_"+q.fld,r)):q.hd==H&&(F[q.hd]=r)),
gx.lang.emptyObject(q)||(B="",0!=q.grid&&(B=q.grid==f?g:gx.fn.currentGridRow(q.grid)),gx.fn.setHidden(A+"GXHC"+q.fld+"_"+B,r)),B=gx.fn.getVarControlMap(F,H),gx.lang.emptyObject(B)?gx.setVar(H,r):gx.setVar(B,r),q&&!x&&gx.fn.call_v2bc(q,F),gx.fn.setGridHidden(H,r),gx.O.UCBindings[H]&&(gx.O.v2UC(H),w=w.concat(F.UCBindings[H].uc))):n.CmpContext==A&&n.IsMasterPage==y&&(gx.usrFocusControl=r)}}}gx.setGxO(n);return w},getPropertyControlRef:function(a,b,f){var g=gx.fn.getControlRef(a,!0);g=null!=g||f?g:gx.dom.byId("Object_"+
a);null==g&&(g=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(a)));null==g&&b&&(g=gx.dom.el(a+"_"+b));return g},isColumnProperty:function(a){return"title titlebackcolor titlebackstyle titlefontbold titlefontitalic titlefontname titlefontsize titlefontstrikethru titlefontunderline titleforecolor titleformat columnheaderclass".split(" ").includes(a.toLowerCase())},setJsonProperties:function(a,b){if(!a)return[];for(var f=gx.O,g=a.length,m=[],n=0;n<g;n++){var t=a[n],w=t.CmpContext,u=gx.lang.booleanValue(t.IsMasterPage);
w=gx.setGxO(w,u);if(!gx.lang.emptyObject(gx.O))for(var B in t)if("CmpContext"!==B&&"IsMasterPage"!==B&&""!==B&&(u=t[B],"function"!=typeof u)){var p=w.getValidStructFld(B);if("FORM"==B||p||0<=B.indexOf("gxHTMLWrp")||0<=B.indexOf("ContainerDiv")){var v=p&&("bits"==p.type||"bitstr"==p.type||"audio"==p.type||"video"==p.type||"binaryfile"==p.type);v=gx.fn.getPropertyControlRef(B,b,!v)}else v=gx.fn.getPropertyControlRef(B,b);var A=!1;if(v&&v.gxGridName){var y=gx.fn.gridObjFromGxO(v.gxGridName);A=y.setProperty(u)}if(!A){var F=
b||(p&&p.grid?gx.fn.currentGridRow(p.grid):"");A=w.getGridColumn(B,F);if((null==v||y)&&gx.uc.isUserControl(B,w)||A&&A.isUserControl)p=B,A&&A.isUserControl&&(p=B+"_"+F),gx.uc.setProperties(p,u),m.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(p)));else if(null!=v||null!=A)for(var H in u)if(gx.fn.isColumnProperty(H))A&&gx.fn.setCtrlProperty(A,H,u[H],p);else if(v)if(v.parentElement||(v=gx.fn.getPropertyControlRef(B,F)),"object"===typeof u[H])for(var r in u[H])gx.fn.setCtrlProperty(v,r,u[H][r],
p);else gx.fn.setCtrlProperty(v,H,u[H],p)}}}gx.setGxO(f);return m},loadJsonGrids:function(a,b,f){f=f||[];var g=[],m=function(C){for(var I=0;I<C.length;I++)if("string"===typeof C[I])return C[I];return""},n=function(C){var I="",G=C.lastIndexOf("_");-1!==G&&(I=(C=C.substring(G+5))?"_"+C:"");return I},t=function(C,I,G){for(var K=0;K<C.Count;K++){var N=C[K],P;for(P in N.Grids)(N=gx.fn.gridObj(I,P+"_"+gx.text.padl((K+1).toString(),4,"0"),!1))&&N.isUsercontrol&&G.push({cmpCtx:I,gridName:P+"_"+gx.text.padl((K+
1).toString(),4,"0"),inMasterPage:!1})}},w=[];if(a)for(var u=a.length,B,p=0;p<u;p++)try{var v=a[p];if(void 0!=v.Count){var A=v.CmpContext,y=v.GridName,F=gx.csv.validatingGrid;if(gx.pO.fullAjax||gx.lang.emptyObject(F)||F.gxComponentContext!=A&&F.gridName!=y||!gx.lang.emptyObject(F.boundedCollType)){var H="true"==v.InMasterPage?!0:!1,r="",q="";v[0]&&v[0].Props&&v[0].Props[0]&&gx.lang.isArray(v[0].Props[0])&&(q=m(v[0].Props[0]));r=n(q);if(B=gx.fn.gridObj(A,y+r,H))t(v,A,w),w.push({cmpCtx:A,gridName:y+
r,inMasterPage:H}),b?gx.O.Grids[B.gridName]&&gx.O.Grids[B.gridName].parentGrid||g.push(B.loadGrid({rowProps:v,isPostback:b})):B.updatePropsHidden(v)}}}catch(C){gx.dbg.logEx(C,"gxfrmutl.js","loadJsonGrids")}w=w.filter(function(C){return(C=gx.fn.gridObj(C.cmpCtx,C.gridName,C.inMasterPage))&&C.isUsercontrol});w=gx.lang.arrayUnique(w,function(C,I){return C.gridName===I.gridName});var x=[];for(p=0;p<w.length;p++)a=w[p],(a=gx.fn.gridObj(a.cmpCtx,a.gridName,a.inMasterPage))&&a.grid&&(a.grid.ownerGrid&&a.grid.ownerGrid.parentGrid?
x.push(a.grid):f.push(a.grid));var D=l.Deferred();l.when.apply(l,g).done(function(){gx.dom.indexElements();D.resolve(x)});return D.promise()},getErrorViewerCtrls:function(){var a=gx.dom.byClass("gx_ev");if(0==a.length){a=[];for(var b=gx.dom.byTag("span"),f=b.length,g=0;g<f;g++)"gxErrorViewer"==b[g].getAttribute("data-gx-id")&&a.push(b[g])}return a},setErrorViewer:function(a,b){b=void 0===b||b;gx.O.AnyError=0;if(a)try{gx.fx.obs.notify("gx.onmessages",[a]);var f=gx.dom.byClass("gx_ev"),g=f.length,m;
for(m in a){var n=a[m];if(!gx.lang.isArray(n)){var t=n.fields;n=n.msgs}var w=[];if(t)for(var u=0,B=t.length;u<B;u++)if(!gx.lang.isArray(t[u])){var p=gx.fn.vStructForVar(t[u].replace(/^gx\.O\./,""));p&&w.push(p.fld)}"MAIN"==m&&(m="");if("undefined"!=typeof n){for(u=0;u<g;u++){var v=f[u];if(v&&v.getAttribute("data-gx-id")==m+"gxErrorViewer"){var A=gx.csv.setFocusOnload?v.innerHTML:"";break}}var y={},F=!1,H;for(H in n){var r=n[H];r&&1==r.type&&(gx.O.AnyError=1);if(!gx.lang.emptyObject(r.text)&&"function"!=
typeof r){var q=gx.fn.screen_CtrlRef(r.att),x=q&&l(q).is("[data-gxgridid].gx-invisible "+q.tagName);if(""!=r.att&&(x&&gx.fn.isVisible(q,0)||gx.fn.isVisible(q))){var D=y[r.att];D||(D=gx.util.balloon.getNew(r.att,void 0,r.id?w:[]),y[r.att]=D);1==r.type?D.setError(r.text):D.setMessage(r.text);F||"ForeignKeyNotFound"!==r.id||(F=!0)}else if("ForeignKeyNotFound"===r.id&&!F||"ForeignKeyNotFound"!==r.id){var C=1==r.type?"gx-error-message":"gx-warning-message";if("SuccessfullyAdded"===r.id||"SuccessfullyDeleted"===
r.id||"SuccessfullyUpdated"===r.id)C="gx-success-message";A+='<div class="'+C+'">'+gx.html.encode(r.text)+"</div>"}}}F=!1;for(var I in y)if(D=y[I],0!=D.show()||F||(F=!0,gx.fn.setFocusOnError(I)),gx.csv.oneAtAtime)break;for(u=0;u<g;u++)if((v=f[u])&&v.getAttribute("data-gx-id")==m+"gxErrorViewer"&&v.innerHTML!=A&&(gx.dom.shouldPurge()&&gx.dom.purge(v,!0),v.innerHTML=b?A:v.innerHTML+A,""!=A)){var G=gx.fx.dom.highlight(v,[255,255,165],2500);G.play();v.effect=G}}}gx.plugdesign.applyTemplateObject({templateSelector:function(K){return"errorviewer"===
K.name},classMapSelector:function(){return!1}});gx.config.csv.scrollTopOnError&&gx.O.AnyError&&!F&&window.scrollTo(0,0)}catch(K){gx.dbg.logEx(K,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(a){var b=c.exec(a);return b?b[1]+b[2]:a},clearCompontHiddens:function(a){var b=[],f;for(f in a)"function"!=typeof a[f]&&b.push(gx.fn.cmpContextFromCtrl(f));try{gx.O.deleteComponentHiddens(b)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(a,b,f,g,m){try{var n=
[],t=!1,w=[],u;for(u in a)if(w.push(u),"function"!=typeof a[u])try{var B=a[u];if(B){var p=gx.dom.byId(u);!p&&b&&(p=gx.dom.byId(b[u]));gx.lang.emptyObject(p)&&(l(document.body).append("<div id='"+u+"'></div>"),p=gx.dom.byId(u));if(!gx.lang.emptyObject(p)){p.id&&(gx.fx.obs.deleteObserverByKey(p.id),gx.evt.removeHookByKey(p.id));gx.html.setInnerHtml(p,B,!1,m);var v=gx.fn.cmpContextFromCtrl(u),A=d(gx.fn.getHidden(v+"_CMPPGM"));n.push({type:v,name:A,html:B,container:p})}}}catch(y){t=!0,gx.dbg.logEx(y,
"gxfrmutl.js","setJsonComponents")}}catch(y){t=!0,gx.dbg.logEx(y,"gxfrmutl.js","setJsonComponents")}0!=n.length&&!t||"function"!=typeof g?(a=l.map(n,function(y){return gx.fn.createComponentAsync(y,f)}),l.when.apply(l,a).done(function(){g(w)})):g(w)},cmpRegexCache:{},getCmpRegex:function(a){var b=this.cmpRegexCache[a];this.cmpRegexCache[a]||(b=new RegExp("^"+a),this.cmpRegexCache[a]=b);return b},processCodeCallback:function(a,b,f,g,m,n){gx.fn.createComponentObj(a,b,g);gx.fn.setJsonHiddens(m,f);n.resolve()},
createComponentAsync:function(a,b){var f=l.Deferred(),g=a.type,m=a.name,n=a.html;a=a.container;f.then(function(){gx.fx.obs.notify("gx.onafterevent",[gx.csv.lastEvtResponse])});try{var t=gx.O,w=gx.fn.filterHiddens(gx.fn.getCmpRegex(g),b);gx.cache.codeLoaded(g+m)?(gx.fn.createComponentObj(m,g,a),gx.fn.setJsonHiddens(t,w),f.resolve()):(gx.cache.addInlineCode(g+m),gx.html.processCode(n,!1,gx.html.onTypeAvailable,[m,gx.fn.processCodeCallback,[m,g,w,a,t,f],0],m))}catch(u){gx.dbg.logEx(u,"gxfrmutl.js","createComponentAsync"),
f.resolve()}return f},createComponentObj:function(a,b,f){a=gx.createComponent(a,b,f);null!=a&&gx.addComponent(a)},cleanAttachedCtrls:function(a){gx.attachedControls=[]},getAttachedCtrl:function(a){for(var b=gx.attachedControls.length,f=0;f<b;f++){var g=gx.attachedControls[f];if(g.id==a)return g}return null},attachCtrl:function(a,b){null==gx.fn.getAttachedCtrl(a)&&gx.attachedControls.push({id:a,info:b})},doAttachs:function(a){var b=gx.fn.attachedControls(),f=b.length,g=gx.O;a=a&&a.length?l.map(a,gx.fn.cmpContextFromCtrl):
void 0;var m,n;for(n=0;n<f;n++){var t=b[n];if(!a||0<=l.inArray(t.info.wc,a)){var w=gx.setGxO(t.info.wc,t.info.mp);if(t.info.isPrompt&&w.isTransaction()&&"DSP"==w.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(t.info.wc+t.info.id),"Visible",!1);else if(!t.attached){w=t.info.controls;var u=w.length;var B=[];for(m=0;m<u;m++){gx.fn.addAttach(w[m],t);var p=gx.fn.validStruct(w[m]);gx.fn.checkAttachedPropertyVS(p,"Visible",!1);gx.fn.checkAttachedPropertyVS(p,"Enabled",!1);B.push(p.fld)}t.attached=!0;l("#"+
t.id).attr("data-gx-attached-ctrl",B.join(" "))}}}gx.setGxO(g);gx.fn.setPromptlisteners()},setPromptlisteners:function(a){gx.TabFocusOnPrompt&&l("[data-gx-attached-ctrl]",a).not("[gxfocusable]").parent().on("focus",gx.evt.promptFocus).on("mousedown",gx.evt.promptMousedown).attr("gxfocusable","1")},clearPromptlisteners:function(a){l("[data-gx-attached-ctrl]",a).parent().off("focus").off("mousedown")},addAttach:function(a,b){a=gx.fn.validStruct(a);void 0==a.attachedCtrls&&(a.attachedCtrls=[]);a.attachedCtrls.push(b)},
checkAttachedProperty:function(a,b,f){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(a),b,f)},checkAttachedPropertyVS:function(a,b,f){if(void 0!=a&&(a=a.attachedCtrls,void 0!=a))for(var g=a.length,m=0;m<g;m++)gx.fn.checkAttachedControlProperty(a[m],b,f)},checkAttachedControlProperty:function(a,b,f){var g=a.info.id;a=a.info;var m=!0,n=a.controls;a=a.wc;for(var t=n.length,w=0;w<t;w++){var u=gx.fn.getCtrlProperty(a+gx.fn.validStruct(n[w]).fld,b);m=f?u==f:m&&u==f;if(f&&m)break}m&&gx.fn.setCtrlPropertyImpl(gx.dom.el(a+
g),b,f)},changeControlOpacity:function(a,b,f,g){var m=Math.round(g),n="";n="string"==typeof a?a:a.id;b>f?(gx.fn.setOpacity(b,n),setTimeout(function(){gx.fn.changeControlOpacity(a,b-10,f,g)},m)):b<f?(gx.fn.setOpacity(b,n),setTimeout(function(){gx.fn.changeControlOpacity(a,b+10,f,g)},m)):gx.fn.setOpacity(f,n)},setOpacity:function(a,b){var f=b;"string"==typeof b&&(f="body"==b?document.body:gx.dom.el(b));null!=f&&(b=f.style,f="reset"==a?"":a/100,b.opacity=f,b.MozOpacity=f,b.filter="alpha(opacity="+("reset"==
a?100:a)+")")},fadeControl:function(a,b,f){"in"==b?gx.fn.changeControlOpacity(a,0,100,f):gx.fn.changeControlOpacity(a,100,0,f)},fadeIn:function(a,b){gx.fn.fadeControl(a,"in",b)},statusMsg:function(a){window.status=a},objectOnload:function(a,b){var f=document.documentElement,g=null;try{g=window.top.document.documentElement}catch(w){}g&&f!=g&&gx.dom.getAttributeNames(g).filter(function(w){return w.startsWith("gx-data-")}).forEach(function(w){return f.setAttribute(w,g.getAttribute(w))});var m=l(document.body),
n="true"===m.attr("data-HasEnter"),t="true"===m.attr("data-Skiponenter");gx.evt.onkeypress_hdlr=gx.evt.onkeypress_hdlr||function(w){gx.evt.onkeypress(w,n,t)};gx.evt.attach(document,["keydown"],gx.evt.onkeypress_hdlr);l(document).on("input",function(w){gx.evt.oninput(w)});l(document).on("keyup",function(w){gx.evt.onkeyup(w)});l(document).on("keyup",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(w){var u=
w.target.id+" + "+w.target.value;gx.evt.cvcingContext!==u&&(gx.evt.cvcingContext=u,gx.evt.oncontrolvaluechanging(w))});l(document).on("paste",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(w){gx.evt.oncontrolpasting(w)});null!=gx.pO&&(gx.pO.onload(a,b),gx.setGxO(gx.pO))},objectOnUnload:function(a){if(null!=gx.pO)gx.pO.onunload(a)},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},objectPostback:function(a,
b){null!=gx.pO&&(gx.pO.postbackLoad(a,b),gx.fx.obs.notify("gx.onobjectpostback",arguments))},gridObjFromGxO:function(a){return gx.fn.gridObj(gx.O.CmpContext,a,gx.O.IsMasterPage)},gridObj:function(a,b,f){return(a=gx.getObj(a,f))?a.getGrid(b):null},installComponents:function(a,b){var f=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=f)for(var g in f)if(a||!gx.pO.getWebComponent(g)){var m=d(f[g].toLowerCase());m=gx.createComponent(m,g);null!=m&&(gx.addComponent(m,b),setTimeout(function(n){this.addComponentRemoteFiles(n)}.closure(this,
[m]),1))}},addComponentRemoteFiles:function(a){if(a=a.getContainer())gx.html.processCode(a.innerHTML,!0),gx.dom.fitToParent(a)},datePickerFormat:function(a,b,f){var g=gx.dateFormat,m=g.substr(0,1),n=g.substr(1,1);g=g.substr(2,1);m=gx.fn.datePickerDateFormat(m,a);n=gx.fn.datePickerDateFormat(n,a);a=gx.fn.datePickerDateFormat(g,a);g=gx.fn.datePickerTimeFormat(b);return 0<f&&0<b?m+"/"+n+"/"+a+" "+g:0<f?m+"/"+n+"/"+a:g},datePickerDateFormat:function(a,b){return"Y"==a&&"99/99/9999"==b.substr(0,10)?"%Y":
"Y"==a?"%y":"M"==a?"%m":"D"==a?"%d":""},datePickerTimeFormat:function(a){var b=gx.timeFormat;if(12==b){b="%I";var f=" %p"}else b=24==b?"%H":"",f="";if(2==a)a="";else if(5==a)a=":%M";else if(8==a)a=":%M:%S";else return"";return b+a+f},installDatePicker:function(a,b,f,g,m,n,t,w,u,B){(new gx.ui.controls.datePicker({inputId:a,triggerId:a+"_dp_trigger",inline:g,inputType:m?"datetime":"date",weeksNumbers:n,mondayFirst:t,format:w,datePartLength:u,timePartLength:B,afterChange:gx.fn.datePickerChanged,vStruct:b,
gxO:f})).render()},datePickerChanged:function(a,b,f,g,m){if(!a||a.dateClicked){m=m||gx.O;if("undefined"===typeof g)for(var n=gx.fn.controlIds(),t=n.length,w=0;w<t;w++){g=gx.fn.validStruct(n[w]);var u=0!=g.grid?"_"+gx.fn.currentGridRow(g.grid):"";if(f.id==m.CmpContext+g.fld+u)break}null!=g&&void 0!=g.dp&&(b=gx.date.isNullDate(b)?gx.date.nulldate_toc(g.len,g.dec):b.print(gx.fn.datePickerFormat(g.dp.pic,g.dp.dec,g.len)),b!=f.value&&(f.setAttribute("data-gxvalid","0"),f.value=b,f.onchange(),a&&a.callCloseHandler(),
0<g.grid&&(gx.fn.getGridObj(g.grid)||g.gxgrid).setRowModified(gx.fn.currentGridRow(g.grid)),m.refreshDependantGrids(g)))}},toArray:function(a){if(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()){for(var b=[],f=0,g=a.length;f<g;f++)b[f]=a[f];return b}return Array.prototype.slice.call(a)},evalCtxScope:function(a,b){var f=gx.O;gx.setGxO(a);a=eval(b);a instanceof Object&&(a=gx.json.serializeJson(a));gx.setGxO(f);return a}}}(gx.$);
Function.prototype.closure=function(l,c,d){var k=gx.util.browser;if(k.isIE()&&8>k.ieVersion()){window.__objs||(window.__objs=[],window.__funs=[],window.__args=[]);var a=this,b=l.__objId;b||(__objs[b=l.__objId=__objs.length]=l);var f=a.__funId;f||(__funs[f=a.__funId=__funs.length]=a);c||(c=[]);var g=c.__argsId;g||(__args[g=c.__argsId=__args.length]=c);c=a=l=null;return function(){if(__funs){var m=__args[g];!0===d&&(m=Array.prototype.slice.call(arguments,0),m=m.concat(__args[g]));0==m.length&&0<arguments.length&&
(m=arguments);m=__funs[f].apply(__objs[b],m);if(__objs)try{delete __objs[b].__objId}catch(n){__objs[b].__objId=null}__funs&&delete __funs[f].__funId;__args&&delete __args[g].__argsId;return m}}}a=this;return function(){var m=c||arguments;!0===d&&(m=Array.prototype.slice.call(arguments,0),m=m.concat(c));return a.apply(l||window,m)}};
gx.thread={Map:function(){this.map={};this.add=function(l,c){this.map[l]=c};this.remove=function(l){delete this.map[l]};this.get=function(l){return null==l?null:this.map[l]};this.first=function(){return this.get(this.nextKey())};this.next=function(l){return this.get(this.nextKey(l))};this.nextKey=function(l){for(var c in this.map){if(!l)return c;l==c&&(l=null)}return null}},Command:function(l,c,d){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=
function(){c.apply(l,d)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(l,c,d,k){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(var b;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+
")",10);try{b=this.c.execute()}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if("function"==typeof k)try{k.call(l,b)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(l,c,d);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};gx.INTERACTIVE_EVT="gx.onInteractive";gx.PARENT_OBJECT_EVT="gx.onCreateParentObject";
gx.SETMASTERPAGE_EVT="gx.onSetMasterPage";gx.ONREADY_EVT="gx.onready";gx.ONAFTERLOAD_EVT="onafterload";gx.ONAFTERGALOAD_EVT="onaftergaload";gx.isInteractive=!1;gx.isReady=!1;gx.getActiveContext=function(){var l=window;gx.popup.getPopup()&&gx.popup.getPopup().frameWindow&&(l=gx.popup.getPopup().frameWindow);return l};gx.isReadyUI_impl=function(l){return 1>l.gx.evt.userReadyCnt&&l.gx.evt.userReadyThresholdWait()&&l.gx.isInputEnabled()&&(l.gx.ajax.isFormEnabled()||null!=gx.popup.getPopup())};
gx.isReadyUI=function(){return gx._isReadyUI()};gx._isReadyUI=function(){return gx.isReadyUI_impl(gx.getActiveContext())};gx.goInteractive=function(){gx.isInteractive=!0;gx.fx.obs.notify(gx.INTERACTIVE_EVT)};gx.goReady=function(l){gx.isReady=!0;gx.fx.obs.notify(gx.ONREADY_EVT,[],l)};gx.goOnload=function(){gx.isLoaded=!0;gx.fx.obs.notify(gx.ONAFTERLOAD_EVT)};gx.observe_run=function(l,c,d,k){d[k]=function(a,b,f){f=f||[];l()?a.apply(b,f):gx.fx.obs.addObserver(c,b,a.closure(b,f),{single:!0})}};
gx.observe_run(function(){return gx.isLoaded},gx.ONAFTERLOAD_EVT,gx,"ol");gx.observe_run(function(){return gx.isReady},gx.ONREADY_EVT,gx,"wr");gx.observe_run(function(){return gx.pO&&gx.pO.MasterPage},gx.SETMASTERPAGE_EVT,gx,"wmp");gx.observe_run(function(){return gx.isInteractive},gx.INTERACTIVE_EVT,gx,"wi");gx.observe_run(function(){return gx.pO},gx.PARENT_OBJECT_EVT,gx,"wpo");gx.observe_run(function(){return window.gtag},gx.ONAFTERGALOAD_EVT,gx,"wga");gx.isabsoluteurl=function(l){return-1!==l.search("://")};
gx.isRelativeToHost=function(l){return"/"==l.substr(0,1)};gx.absoluteurl=function(l){return gx.isabsoluteurl(l)?l:"/"!==l.charAt(0)?gx.util.resourceUrl(l,!0):location.protocol+"//"+location.host+l};gx.timeoutActions={ignore:0,warn:1};
gx.uc=function(l){var c=/^_gx_image_resource_/,d=function(a){if("string"===typeof a)return gx.util.imageUrl(a);Array.isArray(a)&&(a=a.map(function(m){return d(m)}));if("object"===typeof a)for(var b=$jscomp.makeIterator(Object.entries(a)),f=b.next();!f.done;f=b.next()){var g=$jscomp.makeIterator(f.value);f=g.next().value;g=g.next().value;a[f]=d(g)}return a},k={};return{PostRenderScripts:k,gxCssClass:"gx_usercontrol",getNew:function(a,b,f,g,m,n,t,w,u,B){try{var p=eval(g);gx.lang.inherits(p,gx.uc.UserControl,
!0);var v=new p(l)}catch(A){gx.dbg.logEx(A,"gxfrmutl.js","getNew UserControl "+g),v=new gx.uc.UserControl}v.ContainerName=m;v.DesignContainerName=m;v.LabelForAttValue=a.CmpContext+n.toUpperCase()+(u?"_"+B:"");v.setupControl(a,n,t,b,f,w,u,B);return v},fromChild:function(a){var b=gx.pO.getUsercontrolFromChild(a);if(null!=b||gx.pO.hasMasterPage()&&(b=gx.pO.MasterPage.getUsercontrolFromChild(a),null!=b))return b;for(var f=gx.pO.WebComponents.length,g=0;g<f;g++)if(b=gx.pO.WebComponents[g].getUsercontrolFromChild(a),
null!=b)return b;return null},getUserControlObj:function(a){var b=gx.O.getUserControl(a);if(gx.lang.emptyObject(b)){if(gx.pO.hasMasterPage()&&(b=gx.pO.MasterPage.getUserControl(a),!gx.lang.emptyObject(b)))return b;for(var f=gx.pO.WebComponents.length,g=0;g<f&&(b=gx.pO.WebComponents[g].getUserControl(a),gx.lang.emptyObject(b));g++);}return b},CtrlId:function(a){return a.replace(/Container$/,"")},userControlContainerId:function(a){var b=a+"Container";if(0<=a.indexOf("ContainerDiv"))return a;var f=gx.O.getValidStructFld(a);
if(f){var g=gx.O.rowPatternRegex.exec(a);g=g?g[1]:null;if(f="function"===typeof f.getUCInstance?f.getUCInstance(g):f.uc)b=f.ContainerName}return b&&(f=a.lastIndexOf("_"),-1!=f&&(a=b+a.substring(f),null!=gx.dom.byId(a)))?a:b},setProperties:function(a,b){a=gx.uc.getUserControlObj(gx.uc.userControlContainerId(a));if(null!=a)if(void 0!=b.length)for(var f=b.length,g=0;g<f;g++)for(var m in b[g]){var n=b[g][m];a[m]=n}else for(m in b)n=b[m],a[m]=n},isUserControl:function(a,b){b=b||gx.O;return gx.lang.emptyObj(b.UserControls)?
!1:a instanceof gx.uc.UserControl?!0:(a=gx.dom.byId(gx.uc.userControlContainerId(a)))&&"DIV"===a.tagName&&gx.dom.hasClass(a,gx.uc.gxCssClass)?!0:!1},StartRender:function(){k={}},pushPostRenderScripts:function(a){l.each(a&&a.Scripts||[],function(b,f){k[f]=f})},EndRender:function(){var a=gx.lang.objToArray(k);a=l.map(a,function(b){return gx.util.resourceUrl(gx.util.resolveUrl(b),!1)});gx.http.loadScripts(a,gx.emptyFn,0,!0)},isImageResourcePty:function(a){return gx.text.startsWith(a,"_gx_image_resource_")},
getComputedImagePath:function(a){try{var b=getComputedStyle(document.documentElement).getPropertyValue("--GX-Image_"+a)||"";if(b=b.replaceAll("\\","").replace(/\s*url\((.+?)\)/,"$1"))gx.uc.UserControl.theme_el=gx.uc.UserControl.theme_el||gx.getThemeElement(),b=(new URL(b,gx.uc.UserControl.theme_el.href.toString())).toString()}catch(f){}return b},getClientProperty:function(a,b){var f=b,g=a;gx.uc.isImageResourcePty(a)&&(g=a.replace(c,""),f=gx.uc.getComputedImagePath(b));return{name:g,value:f}},UserControl:function(){this.ParentObject=
null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.IsPostBack=this.RealControl=this.C2ShowFunction=null;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+
this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(a){var b=""!=this.GridRow?"_"+this.GridRow:"",f=this.DesignContainerName+this.ControlName+"_"+a+b;f=gx.dom.byId(f);f||(f=this.DesignContainerName+a+b,f=gx.dom.byId(f));return f};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(a,
b,f,g,m,n,t,w){this.ParentObject=a;this.ControlName=b;this.ControlId=g;this.LastIdBefore=m;this.ControlLvl=void 0!=n?n:0;this.GridId=void 0!=t?t:0;this.GridRow=void 0!=w?w:"";gx.util.pushOnceSorted(this.ControlId,this.ParentObject.GXCtrlIds);var u=w||"_norow",B=this.ParentObject.GXValidFnc[this.ControlId];B||(this.ParentObject.GXValidFnc[this.ControlId]={id:this.ControlId,lvl:this.ControlLvl,fld:f,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl},B=this.ParentObject.GXValidFnc[this.ControlId]);
B=this.ParentObject.GXValidFnc[this.ControlId];B.ucInstances=B.ucInstances||{};B.ucInstances[u]=this;B.getUCInstance=function(p){p=p||u;return B.ucInstances[p]}};this.addValidFunction=function(a,b,f){this.ValidFunctions.push(a);this.ParentObject.addUsercontrolBinding(b,f+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;for(var a=this.ValidFunctions.length,b,f=0;f<a;f++)if((b=this.ValidFunctions[f])&&!b.call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=
null,!1;gx.csv.validatingUC=null;return!0};this.attachEvents=function(){try{var a=this.getContainerControl();if(gx.lang.emptyObject(document.frames))a.onfocus=this.onfocus,this.RealControl=a;else{var b=document.frames.length;if(0<b){var f=0;for(f=0;f<b;f++){var g=document.frames[f];if(1==gx.dom.isChildNode(g,a)){g.frameElement.onfocus=this.onfocus;this.RealControl=g.frameElement;break}}}}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),
this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=this.ControlId;gx.csv.anyError||this.setFocusBase()};this.oninput=function(){this.autoRefreshFn&&this.autoRefreshFn()};this.onchange=function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(a){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),
!0);this.getContainerControl().innerHTML=a};this.createWebComponent=function(a,b,f,g,m){this.ParentObject.createWebComponent(a,b,f,this.GridRow,g,m)};this.deleteWebComponent=function(a){a=gx.fn.cmpContextFromCtrl(a);this.ParentObject.deleteComponent(a)};this.notifyContext=function(a,b){gx.fx.ctx.notify(null,a,b)};this.addV2CFunction=function(a,b,f,g){if("function"==typeof a){var m=b;this.V2CFunctions.push(a);var n=gx.fn.getVarControlMap(this.ParentObject,m);void 0!==n&&this.ParentObject.addUsercontrolBinding(n,
m,this)}else n=a,m=b,this.ParentObject.addUsercontrolBinding(n,m,this),this.V2CFunctions.push(function(t,w,u){var B=m;u&&(w&&(B=m+"_"+w),w=n,B=g?gx.fn.getControlValue(B)[g]:gx.fn.getControlValue(B),g?t.ParentObject[w][g]=B:t.ParentObject[w]=B);B=g?t.ParentObject[n][g]:t.ParentObject[n];t.useGxDateForBindings&&(w=gx.fn.getVarControlMapForVar(n),"date"!==w.type&&"dtime"!==w.type||"string"!==typeof B||(B=t.IsPostBack?new gx.date.gxdate(B):new gx.date.gxdate(B,"Y4MD"),w=n,u=B,g?t.ParentObject[w][g]=u:
t.ParentObject[w]=u));t[f](d(B))})};this.addC2VFunction=function(a){this.C2VFunctions.push(a)};this.setC2ShowFunction=function(a){this.C2ShowFunction=a};this.execV2CFunctions=function(a){var b=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;var f,g=this.V2CFunctions,m=g.length;for(f=0;f<m;f++)try{g[f](this,this.GridRow,a)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=b};this.execC2VFunctions=function(){var a=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;
var b,f=this.C2VFunctions,g=f.length;for(b=0;b<g;b++)try{f[b](this,this.GridRow)}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=a};this.sdtV2c=function(a,b,f,g,m){if(null!==b){if(b=parseInt(b,10)-1,void 0!==this.ParentObject[a][b])this[m](this.ParentObject[a][b][f])}else this.ParentObject[a]=gx.fn.getControlValue(g,null,this.ParentObject),this[m](this.ParentObject[a][f])};this.sdtC2v=function(a,b,f,g,m){null!==b?(b=parseInt(b,10)-1,this.ParentObject[a][b][f]=this[m]()):this.ParentObject[a][f]=
this[m]();gx.fn.setControlValue(g,this.ParentObject[a])};this.execShowFunction=function(){!1===this.IsPostBack&&(this.IsPostBack=!0);null===this.IsPostBack&&(this.IsPostBack=!1);var a=this.getContainerControl();try{null!=this.C2ShowFunction&&a&&this.C2ShowFunction(this)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","execShowFunction")}if(a){if(this.autoToggleVisibility){var b=l(a).add("label[for='"+this.LabelForAttValue+"']");gx.lang.gxBoolean(this.Visible)?b.show():b.hide()}gx.plugdesign.applyTemplateObject({selector:"#"+
a.id,templateSelector:function(f){return!0===f.onDemandInvoke}})}gx.uc.pushPostRenderScripts(this)};this.updateAndShow=function(a){try{this.execV2CFunctions(a)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","updateAndShow")}a&&(this.onFocusHandler&&l("#"+this.ContainerName).find("div[tabindex=0]").off("focus"),this.execShowFunction(),l("#"+this.ContainerName).find("div[tabindex=0]").on("focus",this.onfocus.bind(this)),this.onFocusHandler=!0)};this.getEventRow=function(){return this.GridRow};this.isServerEvent=
function(a){var b=this.ParentObject,f=b.IsMasterPage?"_MPAGE":"";a=this.ControlName.toUpperCase()+f+"."+a.toUpperCase()+f;if(a=b.getClientEventName(a))return b.isServerEvent(a);gx.dbg.logDebug("Client event name couldn't be resolved.");return!1};this.eventHandler=function(a,b,f){gx.evt.setReady(!1,"eventHandler");var g=gx.O;gx.setGxO(this.ParentObject);if(0<a){var m=this.DesignContainerName,n=(new RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$")).exec(this.DesignContainerName);n&&n[1]&&(m=n[1]);
this.ParentObject[m]=this;(a=this.ParentObject.getGridById(a,b))&&a.instanciateRow(b)}this.execC2VFunctions();f.call(this.ParentObject,this.getEventRow()).always(function(t){gx.setGxO(t);gx.evt.setReady(!0,"eventHandler")}.closure(this,[g]));gx.csv.instanciatedRowGrid=null};this.addEventHandler=function(a,b){this[a]=function(f){var g=this.isServerEvent(a);g&&"function"===typeof f&&gx.fx.obs.addObserver("gx.onafterevent",this,f,{single:!0});this.eventHandler(this.GridId,this.GridRow,b);g||"function"!==
typeof f||f.call(this)}.closure(this)};this.addProperty=function(a,b){this.Properties[a]=b};this.setProp=function(a,b,f,g){this.addProperty(a,b);this.PropTypes[a]=g;gx.lang.isBooleanType(g)?this[a]=gx.lang.gxBoolean(f):"color"==g?gx.lang.emptyObject(f)||(this[a]="number"==typeof f||"string"==typeof f?gx.color.html(f):f):gx.lang.isNumericType(g)?gx.lang.emptyObject(f)||(this[a]=gx.num.parseFloat(f)):this[a]=f};this.setDynProp=function(a,b,f,g,m){this.addProperty(a,b);this.DynProperties.push(a);this.PropTypes[a]=
g;var n=function(){var t=this.getDynPropertyValueFromHidden(a,b);void 0===t&&(t=f);this.setProp(a,b,t,g)};m?n.call(this):this.ParentObject.CmpContext?gx.fx.obs.addObserver("webcom.render",this,function(t){t===this.ParentObject&&n.call(this)}):gx.wr(n,this)};this.refreshDynProperties=function(){for(var a=0,b=this.DynProperties.length;a<b;a++){var f=this.DynProperties[a];this[f]=this.getDynPropertyValueFromHidden(f,this.Properties[f])}};this.getDynPropertyValueFromHidden=function(a,b){var f=gx.fn.getHidden(this.getHiddenName("_gx_image_resource_"+
b))||gx.fn.getHidden(this.getHiddenName("_gx_image_resource_"+b.toLowerCase()));if(f)try{f=gx.uc.getClientProperty("_gx_image_resource_"+a,f).value}catch(g){f=""}else f=gx.fn.getHidden(this.getHiddenName(b)),void 0===f&&(f=gx.fn.getHidden(this.getHiddenName(a)));return f};this.setGridProperties=function(){for(var a,b=this.ParentObject.getGridUCProperties(this.ControlName),f=b.length,g=0;g<f;g++){var m=b[g],n=m.v;a=this.getHiddenName(m.h);a=gx.fn.getHidden(a);if(void 0===n||void 0!==a)n=a,"color"==
m.t&&(n=gx.color.html(n));this.setProp(m.p,m.h,n,m.t)}};this.setGridEventHandlers=function(){for(var a=this.ParentObject.getGridUCEventHandlers(this.ControlName),b=a.length,f=0;f<b;f++){var g=a[f];this.addEventHandler(g.e,g.h)}};this.getHiddenName=function(a){var b="",f=this.ControlName.toUpperCase();""!=this.GridRow&&(b="_"+this.GridRow,this.ownerGrid&&(f=this.ownerGrid.realGridName.toUpperCase()));return this.ParentObject.CmpContext+f+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+a+b};this.saveProperties=
function(){for(var a in this.Properties)if(this.hasOwnProperty(a)){var b=this[a];"function"!=typeof this.Properties[a]&&("undefined"!=typeof b&&"undefined"!=typeof b.R&&"undefined"!=typeof b.G&&"undefined"!=typeof b.B&&(b=gx.color.rgb(b.R,b.G,b.B)),gx.lang.isBooleanType(this.PropTypes[a])&&(b=b?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[a]),b))}}}}}(gx.$);gx._init();window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));
window.$.fn&&window.$.fn.jquery?gx.dbg.write("global $ is jquery"+window.$.fn.jquery):gx.dbg.write("Warning: $ is not a jQuery object instance");
(function(l,c,d){function k(){return"function"!==typeof c.createElement?c.createElement(arguments[0]):y?c.createElementNS.call(c,"http://www.w3.org/2000/svg",arguments[0]):c.createElement.apply(c,arguments)}function a(x){return x.replace(/([a-z])-([a-z])/g,function(D,C,I){return C+I.toUpperCase()}).replace(/^-/,"")}function b(x,D){return function(){return x.apply(D,arguments)}}function f(x){return x.replace(/([A-Z])/g,function(D,C){return"-"+C.toLowerCase()}).replace(/^ms-/,"-ms-")}function g(x,D,
C,I){var G=k("div");var K=c.body;K||(K=k(y?"svg":"body"),K.fake=!0);if(parseInt(C,10))for(;C--;){var N=k("div");N.id=I?I[C]:"modernizr"+(C+1);G.appendChild(N)}C=k("style");C.type="text/css";C.id="smodernizr";(K.fake?K:G).appendChild(C);K.appendChild(G);C.styleSheet?C.styleSheet.cssText=x:C.appendChild(c.createTextNode(x));G.id="modernizr";if(K.fake){K.style.background="";K.style.overflow="hidden";var P=A.style.overflow;A.style.overflow="hidden";A.appendChild(K)}x=D(G,x);K.fake?(K.parentNode.removeChild(K),
A.style.overflow=P):G.parentNode.removeChild(G);return!!x}function m(x,D){var C=x.length;if("CSS"in l&&"supports"in l.CSS){for(;C--;)if(l.CSS.supports(f(x[C]),D))return!0;return!1}if("CSSSupportsRule"in l){for(var I=[];C--;)I.push("("+f(x[C])+":"+D+")");I=I.join(" or ");return g("@supports ("+I+") { #modernizr { position: absolute; } }",function(G){if("getComputedStyle"in l){G=getComputedStyle.call(l,G,null);var K=l.console;null!==G?G=G.getPropertyValue("position"):K&&K[K.error?"error":"log"].call(K,
"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else G=G.currentStyle&&G.currentStyle.position;return"absolute"==G})}return d}function n(x,D,C,I){function G(){N&&(delete q.style,delete q.modElem)}I="undefined"===typeof I?!1:I;if("undefined"!==typeof C){var K=m(x,C);if("undefined"!==typeof K)return K}for(K=["modernizr","tspan","samp"];!q.style&&K.length;){var N=!0;q.modElem=k(K.shift());q.style=q.modElem.style}var P=x.length;for(K=0;K<P;K++){var O=x[K];var W=
q.style[O];~(""+O).indexOf("-")&&(O=a(O));if(q.style[O]!==d){if(I||"undefined"===typeof C)return G(),"pfx"==D?O:!0;try{q.style[O]=C}catch(V){}if(q.style[O]!=W)return G(),"pfx"==D?O:!0}}G();return!1}function t(x,D,C,I,G){var K=x.charAt(0).toUpperCase()+x.slice(1),N=(x+" "+H.join(K+" ")+K).split(" ");if("string"===typeof D||"undefined"===typeof D)return n(N,D,I,G);N=(x+" "+F.join(K+" ")+K).split(" ");a:{x=N;for(var P in x)if(x[P]in D){if(!1===C){D=x[P];break a}P=D[x[P]];if("function"===typeof P){D=
b(P,C||D);break a}D=P;break a}D=!1}return D}function w(x,D,C){return t(x,d,d,D,C)}var u=[],B=[],p={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(x,D){var C=this;setTimeout(function(){D(C[x])},0)},addTest:function(x,D,C){B.push({name:x,fn:D,options:C})},addAsyncTest:function(x){B.push({name:null,fn:x})}},v=function(){};v.prototype=p;v=new v;v.addTest("history",function(){var x=navigator.userAgent;return-1===x.indexOf("Android 2.")&&-1===
x.indexOf("Android 4.0")||-1===x.indexOf("Mobile Safari")||-1!==x.indexOf("Chrome")||-1!==x.indexOf("Windows Phone")||"file:"===location.protocol?l.history&&"pushState"in l.history:!1});var A=c.documentElement,y="svg"===A.nodeName.toLowerCase(),F=p._config.usePrefixes?["moz","o","ms","webkit"]:[];p._domPrefixes=F;var H=p._config.usePrefixes?["Moz","O","ms","Webkit"]:[];p._cssomPrefixes=H;var r={elem:k("modernizr")};v._q.push(function(){delete r.elem});var q={style:r.elem.style};v._q.unshift(function(){delete q.style});
p.testProp=function(x,D,C){return n([x],d,D,C)};p.testAllProps=t;p.testAllProps=w;v.addTest("flexbox",w("flexBasis","1px",!0));v.addTest("csstransitions",w("transition","all",!0));(function(){var x,D;for(D in B)if(B.hasOwnProperty(D)){var C=[];var I=B[D];if(I.name&&(C.push(I.name.toLowerCase()),I.options&&I.options.aliases&&I.options.aliases.length))for(x=0;x<I.options.aliases.length;x++)C.push(I.options.aliases[x].toLowerCase());I="function"===typeof I.fn?I.fn():I.fn;for(x=0;x<C.length;x++){var G=
C[x];G=G.split(".");1===G.length?v[G[0]]=I:(!v[G[0]]||v[G[0]]instanceof Boolean||(v[G[0]]=new Boolean(v[G[0]])),v[G[0]][G[1]]=I);u.push((I?"":"no-")+G.join("-"))}}})();(function(x){var D=A.className,C=v._config.classPrefix||"";y&&(D=D.baseVal);v._config.enableJSClass&&(D=D.replace(new RegExp("(^|\\s)"+C+"no-js(\\s|$)"),"$1"+C+"js$2"));v._config.enableClasses&&(D+=" "+C+x.join(" "+C),y?A.className.baseVal=D:A.className=D)})(u);delete p.addTest;delete p.addAsyncTest;for(p=0;p<v._q.length;p++)v._q[p]();
l.Modernizr=v})(window,document);
gx.spa=function(l){var c=/<head[^>]*>([\s\S]*?)<\/head>/i,d=/(<body[^>]*>[\s\S]*?<\/body>)/i,k=/<title[^>]*>([\s\S]*?)<\/title>/i,a=/#.*/,b=/#/,f=!1,g=!1,m=window.location.href,n=!0,t={},w,u;"state"in window.history&&(n=!1);gx.wpo(function(){gx.pO.fullAjax&&(gx.cache.exceptionsRegEx=/messages\..+\.js/)},this);var B=function(){f||g||this.notify("onnavigatecomplete")};return{timeout:-1,setTimeout:function(p){this.timeout=p},isSameApp:function(p,v){var A=p.port===v.port;A=(A=A||""===p.port&&"http:"===
p.protocol&&"80"===v.port)||""===p.port&&"https:"===p.protocol&&"443"===v.port;return p.protocol===v.protocol&&p.hostname===v.hostname&&A},handleClick:function(p){var v=this.getTarget(p),A;if(v&&"A"===v.tagName.toUpperCase()&&null!==v.getAttribute("href")&&void 0!==v.getAttribute("href")&&!(v.target&&("_blank"==v.target||"_parent"==v.target&&window.parent!=window||"_top"==v.target&&window.top!=window||"_"!=v.target.substr(0,1)&&window.name!=v.target)||1<p.which||p.metaKey||p.ctrlKey)){var y=this.parseUrl(v.href);
if(this.isSameApp(location,y)){var F="/"==y.pathname.charAt(0)?y.pathname:"/"+y.pathname;if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))===F.substring(0,F.lastIndexOf("/"))&&!(0<=y.href.search(b)&&y.href.replace(a,"")===location.href.replace(a,""))&&""!==v.getAttribute("href")&&0!==v.href.indexOf("javascript:"))if(this.ignoreClick)this.ignoreClick=!1;else{y=l(v);for(A in t)if(t.hasOwnProperty(A)&&y.is(A))return;this.navigate({url:v.href,push:!0,scrollTo:!0,direction:"forward"});
p.preventDefault()}}}},redirect:function(p,v){delete gx.referrer;v=void 0===v||v;var A=this.parseUrl(p),y="/"==A.pathname.charAt(0)?A.pathname:"/"+A.pathname;this.isSameApp(location,A)?location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==y.substring(0,y.lastIndexOf("/"))?window.location=p:(gx.referrer=location.href,this.navigate({url:p,push:v,scrollTo:!0,direction:"forward"})):window.location=p},setLocation:function(p){this.setStopNavigating(p);window.location=p},canNavigate:function(){return!f&&
!g},isNavigating:function(){return!this.canNavigate()},isNavigatingRaw:function(){return f},cancelNavigating:function(){f=!1},setStopNavigating:function(p){f=!1;this.notify("onnavigate",[p])},navigate:function(p){var v,A,y=p.url,F=!1;this.canNavigate()?(f=!0,this.notify("onbeforenavigate",[y]),(A=this.request)&&4>A.readyState&&(A.onreadystatechange=gx.emptyFn,gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+A.readyState),A.abort()),this.request=A=gx.http.doCall({method:"GET",
url:y,handler:function(H,r,q){H=q.getResponseHeader("X-SPA-REDIRECT-URL");var x=q.getResponseHeader("X-GXOBJECT");F||(v&&clearTimeout(v),530==q.status?this.setLocation(y):H?(this.setStopNavigating(H),setTimeout(gx.spa.redirect.closure(gx.spa,[H]),100)):(p.push&&0<A.readyState&&x?(this.updateState(),this.state=this.createState(p),window.history.pushState(null,"",A.responseURL||y)):gx.O.endFeedback(!1),this.processResponse.call(this,r,q,p)))},beforeSend:function(H){gx.spa.isNavigatingRaw()||gx.O.startFeedback(!1);
this.notify("onbeforesend",[this.createEvent(H,y),"X-SPA-REQUEST","X-SPA-MP"]);0<this.timeout&&(v=setTimeout(this.timeoutHandler.closure(this,[H,y]),this.timeout));H.setRequestHeader("X-SPA-REQUEST","1")},offline:function(){v&&clearTimeout(v);F=!0;f=!1},error:function(H){H=this.createEvent(H,y);H.cancel=!0;this.notify("onerror",[H]);H.cancel&&this.setLocation(y)},ajaxHeader:!1,avoidCache:!1,handleAllStatusCodes:!0,obj:this}),this.notify("onnavigatestart",[y])):this.setLocation(y)},processResponse:function(p,
v,A){try{var y=A.url;var F=this.parseUrl(y).hash,H=A.direction,r=v.status,q=v.getResponseHeader("X-GXOBJECT"),x=v.getResponseHeader("X-SPA-RETURN"),D=v.getResponseHeader("X-SPA-RETURN-MD"),C=this.createEvent(v,y),I=gx.pO.MasterPage,G=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",K=v.getResponseHeader("X-SPA-MP")||"",N=!(""===G||G.toLowerCase()!=K.toLowerCase()),P=this.getContentPlaceholder();if(null!==x)gx.fn.closeWindowServerScript(x,D,!0);else if(500===r)window.history.pushState(null,"",y),this.cancelNavigating(),
gx.dom.writeError(v.responseText,gx.getMessage("GXM_runtimeappsrv"),r);else if(q){this.notify("onbeforeprocessresponse",[C,p,q,G,K,N]);var O=this.extractContents(v,!N),W=N?P.firstChild:document.body,V=O.body;if(O.body){this.state=this.createState(A);A.push&&window.history.replaceState(this.state,"",v.responseURL||y);O.title&&(document.title=O.title);this.notify("onbeforecontentreplace",[v,y,O]);var Y=gx.getThemeElement();Y&&Y.href&&gx.cache.removeRemoteFile(gx.getThemeElement().href);gx.dom.replaceWithFx(W,
V,{domRemove:!1,domAdd:N,enteringClass:"forward"==H?"entering":"leaving",leavingClass:"forward"==H?"leaving":"entering",enterDurationClass:"forward"==H?"enter-fx-duration":"leave-fx-duration",leaveDurationClass:"forward"==H?"leave-fx-duration":"enter-fx-duration",transitionTimeout:200,transitionEndCallback:function(){V=this.replaceContentCallback(v,y,F,p,P,O,W,V,A,q,I,G,K,N);N||gx.html.processCode(O.rawHtml||O.head.innerHTML+O.body.innerHTML,!1,this.processCodeCallback.closure(this,[v,y,F,p,P,O,W,
V,A,q,I,G,K,N]),null,null,!1,!0);g=!1;this.notify("ontransitionend",[C,I,G,K,N]);this.recoverScrollPosition(A);return V}.closure(this),beforeTransitionStart:function(ba){g=!0;if(N)return gx.html.processCode(p,!1,function(){ba&&ba();this.processCodeCallback(v,y,F,p,P,O,W,V,A,q,I,G,K,N)}.closure(this),null,null,!1),!0}.closure(this)})}else this.setLocation(y)}else this.setLocation(y)}catch(ba){gx.dbg.logEx(ba,"gxspa.js","processResponse"),this.setLocation(y)}},replaceContentCallback:function(p,v,A,
y,F,H,r,q,x,D,C,I,G,K){if(K)r.parentNode&&(this.dettachContent(r),r.parentNode.removeChild(r));else{if(gx.util.browser.isWebkit()||gx.util.browser.isFirefox()){this.dettachContent(document.body);l(document.body).remove();var N=document.createElement("body");p=l(q).prop("attributes");l.each(p,function(){l(N).attr(this.name,this.value)});document.documentElement.appendChild(N);N.innerHTML=q.innerHTML;q=N}else document.body=q,q=document.body;l([].concat($jscomp.arrayFromIterable(document.head.childNodes))).filter("meta[name]").remove();
l([].concat($jscomp.arrayFromIterable(H.head.childNodes)).reverse()).filter("meta[name]").each(function(P,O){document.head.insertBefore(O,document.head.firstChild)})}return q},filterTest:function(p){return $filter(this,p,1<arguments.length?arguments[1]:void 0)},processCodeCallback:function(p,v,A,y,F,H,r,q,x,D,C,I,G,K){p=this.createEvent(p,v);try{this.notify("oncontentreplace",[p,y,H,D,C,I,G,K])}catch(N){gx.dbg.logEx(N,"gxspa.js","processCodeCallback"),this.setLocation(v)}y=!0;x.scrollTo&&(window.scrollTo(0,
0),y=!1);x.push&&window._gaq&&_gaq.push(["_trackPageview"]);x.push&&window.ga&&window.ga("send","pageview",location.pathname);""!==A&&(H=this.parseUrl(v),H.hash=A,window.history.replaceState(this.state,"",H.href),A=gx.dom.el(H.hash))&&(A.scrollIntoView(!0),y=!1);this.setStopNavigating(v);y&&this.recoverScrollPosition(x)},timeoutHandler:function(p,v){var A=this.createEvent(p,v);A.cancel=!0;this.notify("ontimeout",[A]);A.cancel&&(p.abort(),gx.dbg.logMsg("Request cancelled - timeout expired: "+p.readyState),
this.setLocation(v))},getContentPlaceholder:function(){return gx.dom.byClass("gx-content-placeholder")[0]},extractContents:function(p,v){var A=document.createElement("div"),y={},F,H;if(v){A=document.createElement("iframe");A.src="about:blank";A.style.display="none";document.body.appendChild(A);v=p.responseText.match(c);1<v.length&&(F=v[1]);v=p.responseText.match(d);0<v.length&&(H=v[0]);v=p.responseText.match(k);1<v.length&&(y.title=v[1]);A.contentDocument&&null==A.contentDocument.body&&A.contentDocument.write("<body></body>");
A.contentDocument.body.outerHTML=H;var r=A.contentDocument.head;r.innerHTML=F;l("head script").each(function(q,x){l(r).find("script").each(function(D,C){null===x.getAttribute("data-gx-external-script")?x.src==C.src&&r.removeChild(C):l(x).remove()})});y.body=A.contentDocument.body;y.head=r;y.rawHtml=r.innerHTML+H}else{gx.html.setInnerHtml(A,p.responseText,!1,!1,!1);p=gx.dom.byClass("gx-content-placeholder","div",A);if(0===p.length)return y;y.body=p[0].firstChild;p=gx.dom.byTag("title",A);0<p.length&&
(y.title=p[0].innerText||p[0].textContent)}return y},handlePopState:function(p){if(p.state){p=p.state;this.getContentPlaceholder();if(p&&"gx-spa"==p.source){if(n&&m==p.url||this.state.url===p.url)return;this.navigate({id:p.id,url:p.url,push:!1,scrollPosition:p.scrollPosition,direction:this.state.id<p.id?"forward":"back"})}gx.popup.ispopup()&&gx.fn.cancelWindow()}},parseUrl:function(p){var v=document.createElement("a");v.href=p;return v},createEvent:function(p,v){return{req:p,url:v,cancel:!1}},addIgnoredSelector:function(p){t[p]=
!0},removeIgnoredSelector:function(p){delete t[p]},recoverScrollPosition:function(p){var v=p.scrollPosition;this.canNavigate()&&!p.scrollTo&&v&&window.scrollTo(v.x,v.y)},dettachContent:function(p){var v=gx.dom.getActiveElement();v&&l.contains(p,v)&&gx.dom.purgeElement(v)},updateState:function(){var p=this.state;p.url=location.href;p.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(p,"",p.url)},createState:function(p){p=p||{};return{id:p.id||(new Date).getTime(),source:"gx-spa",
url:p.url}},getTarget:function(p){return p.target&&"A"==p.target.tagName?p.target:gx.dom.findParentByTagName(p.target,"A")},applyConfig:function(p){if(p&&p.listeners)for(var v in p.listeners){var A=p.listeners[v];"function"==typeof A&&this.addObserver(v,p.listeners.scope||this,A)}},setBodyClass:function(){var p="Form",v=document.body;v.className&&(p=v.className.split(" ")[0]);gx.dom.hasClass(v,p+"-fx")||gx.dom.addClass(v,p+"-fx")},isSupported:function(){return gx.util.browser.isIE()&&!gx.util.browser.isEdge()?
!1:gx.pO&&gx.pO.fullAjax&&Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(p){this.isSupported()&&!this.started&&(this.applyConfig(p),w=this.handleClick.closure(this),u=this.handlePopState.closure(this),document.addEventListener("click",w,!1),window.addEventListener("popstate",u,!1),this.state=this.createState({url:location.href}),window.history.replaceState(this.state,document.title),this.setBodyClass(),this.started=!0,this.addObserver("onnavigate",this,B),
this.addObserver("ontransitionend",this,B))},stop:function(){this.started&&(document.removeEventListener("click",w,!1),window.removeEventListener("popstate",u,!1),this.started=!1)}}}(gx.$);gx.lang.apply(gx.spa,new gx.util.Observable);gx.core={};
gx.core.analytics=function(l){var c=function(){console.log("Google Analytics v4- GA not enabled on this webpage")};return{supported:function(){return new Promise(function(d,k){gx.wga(function(){return d()});gx.lang.doCallTimeout(k,window,[],6E3)})},trackView:function(d){this.supported().then(function(){return window.gtag("event","pageview",d)},c)},trackEvent:function(d,k,a,b){this.supported().then(function(){window.gtag("event",k,{hitType:"event",eventCategory:d,eventAction:k,eventLabel:a,eventValue:b})},
c)},trackPurchase:function(d){var k=function(a,b,f,g,m){if(g&&gx.lang.emptyObject(f)&&null==m)return console.log("Google Analytics ECommerce - Warning: Property value must be assigned: ",b),!1;gx.lang.emptyObject(f)&&g&&(f=m);return gx.lang.emptyObject(f)?!1:(a[b]=f,!0)};this.supported().then(function(){var a={};if(k(a,"id",d.TransactionId,!0))for(k(a,"affiliation",d.Affiliation),k(a,"revenue",d.Revenue),k(a,"shipping",d.Shipping),k(a,"tax",d.Tax),k(a,"currency",d.CurrencyCode),k(a,"eventCategory",
"ecommerce:addTransaction"),window.gtag("event",a.eventCategory,a),a=0;a<d.Items.length;a++){var b=d.Items[a],f={};k(f,"id",d.TransactionId,!0)&&k(f,"name",b.Name,!0)&&(k(f,"sku",b.Id),k(f,"category",b.Category),k(f,"price",b.Price),k(f,"quantity",b.Quantity),k(f,"currency",b.CurrencyCode),k(f,"eventCategory","ecommerce:addItem"),window.gtag("event",f.eventCategory,f))}},c)},setUserId:function(d){this.supported().then(function(){return window.gtag("set","userId",d)},c)}}}(gx.$);
gx.core.audio=function(l){var c,d=[],k=[];return{supported:function(){return!(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion())},getSoundVar:function(a){return 2==a?k:d[a]},playBackground:function(a){this.play(a,1)},play:function(a,b){c=!0;2!=b&&this.stop(b);3==b&&(this.stop(2),this.pauseSound(this.getSoundVar(1)));2==b&&this.stop(3);this.playSound(b,a).always(function(){3==b&&this.resumeSound(this.getSoundVar(1))}.closure(this,[]))},playSound:function(a,b){var f=l.Deferred();this.supported()?
(b=new Howl({src:[b],html5:!0,onplay:function(){},onend:function(){f.resolve()},onstop:function(){f.resolve()},onpause:function(){f.resolve()}}),b.play()):(b=l("<bgsound/>").attr({id:"gxIE7AudioSound_"+a,loop:"0",src:b}),l("body").append(b));d[a]=b;2==a&&k.push(b);return f.promise()},stop:function(a){if(a){var b=this.getSoundVar(a);this.stopSound(b);d[a]=null}else this.stopSound(this.getSoundVar(3)),this.stopSound(this.getSoundVar(2)),this.stopSound(this.getSoundVar(1))},stopSound:function(a){var b=
this.supported();a=gx.lang.isArray(a)?a:[a];l.map(a,function(f,g){f=a[g];!b&&f&&(l(f).attr("src",""),l(f).remove(),f=void 0);f&&f.stop&&f.stop()})},pauseSound:function(a){this.supported()&&a&&a.pause&&a.pause()},resumeSound:function(a){this.supported()&&a&&a.play&&a.play()},isPlaying:function(a){if(this.supported())return a?this.isPlaying_impl(this.getSoundVar(a)):this.isPlaying_impl(this.getSoundVar(3))||this.isPlaying_impl(this.getSoundVar(2))||this.isPlaying_impl(this.getSoundVar(1))},isPlaying_impl:function(a){var b,
f=!1;a=gx.lang.isArray(a)?a:[a];for(var g=0;g<a.length;g++)(b=a[g])&&(f=f||b.playing())},_deinit:function(){c&&(this.stop(3),this.stop(2));c=!1}}}(gx.$);gx.core.pwa=function(l){var c;window.addEventListener("beforeinstallprompt",function(d){c=d;c.userChoice.then(function(k){gx.fx.obs.notify("gx.pwa.onpromptchoice",[k.outcome]);c=null});gx.fx.obs.notify("gx.pwa.onbeforeinstallprompt")});return{showPrompt:function(){c&&c.prompt()}}}(gx.$);
gx.core.ds=function(l){return{setOption:function(c,d){document.documentElement.setAttribute("gx-data-"+c,d)},clearOption:function(c){document.documentElement.removeAttribute("gx-data-"+c)}}}(gx.$);
gx.core.clientSocket=function(l){var c,d,k=0;window.addEventListener("unload",function(g){d&&d.close()});var a=function(g){gx.fx.obs.notify("gx.core.clientsocket.onmessagereceived",[g])},b=function(){k=1;gx.fx.obs.notify("gx.core.clientsocket.onconnect",[void 0])},f=function(){k=0;gx.fx.obs.notify("gx.core.clientsocket.onconnectfailed",[void 0])};return{open:function(g){if(1===k)gx.dbg.logDebug("gx.core.clientSocket - WebSocket already connected");else{c="clientSocket_"+g;try{if(this.attachHandlers(c),
g)d=new gx.webSocket({wsURL:g,namespace:c});else{var m=gx.fn.getHidden("GX_WEBSOCKET_PORT"),n=gx.basePath&&0<gx.basePath.length?"/":"";d=new gx.webSocket({port:m,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),wsProtocol:"https:"===location.protocol?"wss://":"ws://",host:m?location.hostname+":"+m+"/":location.host+"/",resourceUrl:n+(gx.gen.isDotNet()?"gxwebsocket.svc?":"gxwebsocket?"),basePath:gx.basePath,namespace:c})}}catch(t){gx.dbg.logEx(t,"genexus-core.js","Could not initialize WebSocket Client")}}},
close:function(){this.detachHandlers(c);try{d&&d.close()}catch(g){}k=0},send:function(g){1===k?d.send(g):gx.dbg.logDebug("gx.core.clientSocket - WebSocket is disconnected")},attachHandlers:function(g){gx.fx.obs.addObserver("gx.ws.onMessage."+g,this,a,{single:!1,doNotDelete:gx.O.IsMasterPage});gx.fx.obs.addObserver("gx.ws.onOpen."+g,this,b,{single:!1,doNotDelete:gx.O.IsMasterPage});gx.fx.obs.addObserver("gx.ws.onError."+g,this,f,{single:!1,doNotDelete:gx.O.IsMasterPage})},detachHandlers:function(g){gx.fx.obs.deleteObserver("gx.ws.onMessage."+
g,this,a);gx.fx.obs.deleteObserver("gx.ws.onOpen."+g,this,b);gx.fx.obs.deleteObserver("gx.ws.onError."+g,this,f)}}}(gx.$);
(function(l){var c=/(gx-form-item|col-(?:xs|sm|md|lg)-\d{1,2})/g,d=function(p){gx.plugdesign.registerTemplate(new gx.plugdesign.Template(p))},k=function(p,v){p=l(p).parent().find("span");gx.lang.gxBoolean(v)?p.parent("p").hide():(p.removeClass("form-control"),v=p.parent("p"),0===v.length?gx.plugdesign.applyTemplateOnElement("readonly-atts-vars",p[0],{checkInclusion:!0}):v.show())},a=function(p,v){var A=l(".gx-form-group[data-gx-for='"+gx.dom.id(p)+"']");0===A.length&&(A=l(p).parents("div.gx-attribute").first());
gx.lang.gxBoolean(v)?A.show():A.hide()},b=function(p,v){v=v.trim();p=gx.html.getFieldLabel(p);v=v.split(" ").join("Label ")+(v?"Label":"");if(p){var A=(A=p.className.match(c))?A.join(" ")||"":"";v=["gx-label",A,v,"control-label"].join(" ");p.className!==v&&(p.className=v)}};d({name:"labels",selector:"div.gx-form-group:has(label.gx-label:not([data-gx-sr-only]))",excluded:"div:has(.gx_usercontrol)",setContext:function(p,v){v=l(v).find("label.gx-label").addClass("control-label");p.labelEl=v[0];return p},
listeners:{control:function(p){return l(p.labelEl).attr("for")},after:{Class:b}}});d({name:"atts-vars",selector:".gx-attribute > input, .gx-attribute > select, .gx-attribute > textarea, .gx-attribute > img:first-child",initialize:function(p){(p=l("#"+p.id)[0])&&b(p,p.className.replace("form-control",""))},listeners:{control:function(p){return p.id},after:{Enabled:k,Visible:a}}});d({name:"readonly-atts-vars",selector:'.gx-attribute:not(:has([data-gx-tpl-applied-readonly-atts-vars])) span[data-gx-readonly]:not([data-gx-tpl-applied-readonly-atts-vars]),span[class^="Readonly"]:not(:has(input[type="radio"], input[type="checkbox"]))',
template:'<p data-gx-tpl-applied-readonly-atts-vars class="form-control-static">{{{outerHTML}}}</p>',outerHTML:!0,listeners:{control:function(p){return p.id},after:{Visible:function(p,v){var A=l(p).parent("p");gx.lang.gxBoolean(v)?A.show():A.hide();a(p,v)}}}});d({name:"password-atts-vars",selector:'.gx-attribute input[type="password"][data-gx-password-reveal]',template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn gx-pwd-reveal-btn"><button class="btn btn-default" type="button" title="'+
gx.getMessage("GXM_revealpassword")+'"><span class="glyphicon glyphicon-eye-open"></span></button></span></div>',setContext:function(p,v){p.inputEl=v;return p},initialize:function(p){var v=l("#"+p.id),A=l("#"+p.id)[0];v.next().on("click",function(){gx.fn.setCtrlProperty(A.id,"Ispassword","password"!=A.type)})},listeners:{control:function(p){return p.id},after:{Visible:function(p,v){gx.lang.gxBoolean(v)&&gx.fn.isVisible(p,0)?l(p).next().show():l(p).next().hide();a(p,v)},Enabled:function(p,v){gx.lang.gxBoolean(v)?
l(p).next().children().first().prop("disabled",!1):l(p).next().children().first().prop("disabled",!0)},Ispassword:function(p,v){l("button",l(p).next()).attr("title",gx.getMessage(gx.lang.gxBoolean(v)?"GXM_revealpassword":"GXM_hidepassword")).children().first().toggleClass("glyphicon-eye-open").toggleClass("glyphicon-eye-close")}}}});d({name:"checkbox",selector:'.gx-attribute > input[type="checkbox"], .gx-attribute span > input[type="checkbox"]',setContext:function(p,v){p.id=l(v)[0].id;return p},initialize:function(p){p=
l("#"+p.id).get(0);l(p).closest("span").addClass("gx-checkbox-wrapper")},listeners:{control:function(p){return p.id},after:{Visible:function(p,v){var A=l(p).parent().closest(".gx-checkbox-wrapper");gx.lang.gxBoolean(v)?(A.show(),A.children().show()):A.hide();a(p,v)}}}});d({name:"usercontrol",onDemandInvoke:!0,selector:".gx_usercontrol",setContext:function(p,v){p.id=l(v)[0].id;return p},listeners:{control:function(p){return p.id},after:{Visible:a}}});var f=function(p,v,A){p.visible=v;var y=l(p).parent().find(".input-group-btn");
gx.lang.gxBoolean(v)&&gx.fn.isVisible(p,0)?(this.enabled||void 0===this.enabled)&&y.show():y.hide();A||a(p,v)};d({name:"datepicker",selector:".dp_container:has(img):has(input)",template:'<div class="dp_container {{alignClass}}" id="{{datePickerCt.id}}"><div class="input-group">{{$inputEl$}}{{$spaneEl$}}<span class="input-group-btn"><a class="btn btn-default">{{$imgEl$}}</a></span></div></div>',outerHTML:!0,setContext:function(p,v){var A=l(v),y=A.attr("data-align");p.datePickerCt=v;p.inputEl=A.find("input")[0];
p.imgEl=A.find("img")[0];p.inputElId=p.inputEl.id;p.alignClass=y?"pull-"+y:"";p.nativeEl=A.find("#"+p.inputEl.id+"-picker")[0];v=l("#span_"+p.inputEl.id);0<v.length&&(A=v.parent("p")[0],p.spaneEl=A?A:v,A&&l(A).remove());return p},initialize:function(p){var v=l("#"+p.inputElId),A=v.parent().closest(".dp_container");p.nativeEl&&A.append(p.nativeEl);A.find("a").on("click",function(F){try{if("IMG"!=F.target.nodeName)return A.find("img")[0].click(),!1}catch(H){return!1}});var y=gx.fn.isVisible(v[0],0);
p=l("#span_"+p.inputEl.id);0<p.length&&(y=y||gx.fn.isVisible(p[0],0));f.call(this,v[0],y,!0)},listeners:{control:function(p){return p.inputEl.id},after:{Enabled:function(p,v){p.enabled=gx.lang.gxBoolean(v);var A=l(p).parent().find(".input-group-btn");if(gx.lang.gxBoolean(v)){var y=this.visible||gx.fn.isVisible(p);(y||void 0===y)&&A.show()}else A.hide();k(p,v)},Visible:f}}});var g=function(p){return l(p).parent().closest("span")},m=function(p){p.find(":checked").parent("label").button("toggle")},n=
function(p,v){var A=p.find("label");gx.lang.gxBoolean(v)?(A.prop("disabled",!1),A.removeClass("disabled"),p.find("input, label").css("pointer-events","")):(A.prop("disabled",!0),p.find("input, label").css("pointer-events","none"),A.addClass("disabled"))};d({name:"radio-button",selector:".gx-radio-button:not(.gx-tpl-ignore) label",setContext:function(p,v){var A=g(v);p.name=l(v).children("input").attr("name");p.spanEl=A;l(A).prop("initialized")||(A.children("label").addClass("gx-radio-label btn btn-default"),
v=l(v).children().prop("disabled"),0===A.children('[class*="active"]').length&&m(A),n(A,!(!0===v||"disabled"===v)),A.find("script").remove(),A.attr("data-toggle","buttons"),v=A.hasClass("gx-radio-button-vertical")?"-vertical":"",A.addClass("btn-group"+v).removeClass("gx-radio-button-vertical").css("vertical-align","baseline"));return p},initialize:function(p){l(p.spanEl).prop("initialized")||(p.spanEl.prop("initialized",!0),p.spanEl.children("label").on("click",function(){var v=l(this).children("input");
v.trigger("focus");v.attr("checked","");v.prop("checked",!0);gx.evt.onchange(v.get(0))}))},listeners:{control:function(p){return p.name},after:{Visible:a,Enabled:function(p,v){n(g(p),v)},Value:function(p){m(g(p))}}}});d({name:"prompt",selector:function(p){return l('a:has(img[id*="PROMPT"])',p).prevUntil("","input, select")},template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn">{{$promptEl$}}</span></div>',setContext:function(p,v){p.inputEl=v;p.promptEl=l(v).nextUntil("",'a:has(img[id*="PROMPT"])').addClass("btn btn-default");
return p},listeners:{control:function(p){return p.inputEl.id},before:{Visible:function(p,v){p=l(p).parent();gx.lang.gxBoolean(v)?p.show():p.hide()},Enabled:function(p,v){p=l(p).parent().find(".input-group-btn");gx.lang.gxBoolean(v)?p.show():p.hide()}}}});d({name:"prompt-trigger",selector:'img[id*="PROMPT"].gx-prompt',setContext:function(p,v){p.imgEl=v;return p},listeners:{control:function(p){return p.imgEl.id},before:{Enabled:function(p,v){p=l(p).closest(".input-group-btn");gx.lang.gxBoolean(v)?p.show():
p.hide()}}}});var t=function(p,v){p=l(p).parent();p=p.add(p.find("img"));gx.lang.gxBoolean(v)?p.show():p.hide()};d({name:"geolocation",selector:"input + img.GeoLocOption",template:'<div class="input-group"><div id="{{inputEl.id}}_hook"></div><span class="input-group-btn"><a class="btn btn-default"><div id="{{inputEl.id}}_trigger_hook"></div></a></span></div>',setContext:function(p,v){p.inputEl=l(v).prev()[0];p.triggerEl=l(v)[0];return p},initialize:function(p){gx.evt.attach(p.el,"click",function(){gx.geolocation.getMyPosition(this)});
l("#"+p.inputEl.id+"_hook").replaceWith(p.inputEl);l("#"+p.inputEl.id+"_trigger_hook").replaceWith(p.triggerEl);t.call(this,p.inputEl,gx.fn.isVisible(p.inputEl,0))},listeners:{control:function(p){return p.inputEl.id},before:{Visible:t,Enabled:function(p,v){p=l(p).parent().find(".input-group-btn");gx.lang.gxBoolean(v)?p.show():p.hide()}}}});d({name:"multimedia-upload",selector:".gx-multimedia-upload .fields-ct",template:'<div class="row"><div class="col-sm-4"><div class="row"><div class="col-sm-12">{{$fileOptionLbl$}}</div><div class="col-sm-12">{{$uriOptionLbl$}}</div></div></div><div class="col-sm-8">{{$uriField$}}{{$fileField$}}</div></div><div class="row"><div class="col-sm-12">{{$button$}}</div></div>',
applyTo:"inner",setContext:function(p,v){v=l(v).parent().closest(".gx-multimedia-upload")[0];var A=gx.html.multimediaUpload.getElements(v);A.fileOptionLbl=A.fileOption.parentNode;A.uriOptionLbl=A.uriOption.parentNode;gx.lang.apply(p,A);p.container=v;return p},initialize:function(p){l(p.button).addClass("btn btn-default Button");l(p.uriField).addClass("form-control")},listeners:{control:function(p){return gx.html.multimediaUpload.CtrlId(p.container.id)},after:{Visible:function(p,v){a(p,v,7)}}}});d({name:"navbar",
selector:".gx-navbar",setContext:function(p,v){p.toggleBtn=l(v).find(".gx-navbar-toggle");p.navBarInner=l(v).find(".gx-navbar-inner");return p},initialize:function(p){p.toggleBtn.attr("data-target","#"+p.navBarInner.attr("id"))}});gx.spa.addObserver("onnavigatecomplete",window,function(){var p=l(".navbar-collapse");p.collapse&&p.collapse("hide")});var w=function(p){p.anchor.get(0).href==location.href?p.anchor.parent().addClass("active"):p.anchor.parent().removeClass("active")};d({name:"navbar-textblock-link",
selector:"a.gx-navbar-textblock, .gx-navbar-textblock:has(a)",template:"{{$anchor$}}",setContext:function(p,v){var A=["id","class","style",gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,"title"];v=l(v);var y;p.anchor=v.children("a");0===p.anchor.length&&v.is("a")&&(p.anchor=v);for(y=0;y<A.length;y++)p.anchor.attr(A[y],v.attr(A[y]));return p},reDraw:w,initialize:w,listeners:{control:function(p){return p.id},before:{Caption:function(p,v){l(p).text(v);return!0},Link:function(p,
v){l(p).attr("href",v);return!0}}}});d({name:"navbar-textblock-text",selector:"span.gx-navbar-textblock:not(:has(a))",initialize:function(p){l(p.el).addClass("navbar-text")},listeners:{control:function(p){return p.id},after:{Link:function(p,v){var A=l(p);v&&A.hasClass("navbar-text")&&(A.removeClass("navbar-text"),gx.plugdesign.applyTemplateOnElement("navbar-textblock-link",p))}}}});d({name:"errorviewer",selector:".gx_ev div",initialize:function(p){p=l(p.el);var v=p.parent(".gx_ev"),A=v.css("position");
if("fixed"===A||"absolute"===A)v[0].effect&&v[0].effect.end(),p.addClass("alert alert-dismissible fade in").attr("style","").attr("role","alert").prepend(l('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'))}});d({name:"textarea-auto-expand",selector:".gx-attribute > textarea[data-gx-text-maxlines]",setContext:function(p,v){p.el=l(v);return p},initialize:function(p){var v=p.el;p=v[0];var A=l(window),y=parseInt(v.attr("rows"),
10),F=parseInt(v.attr("data-gx-text-maxlines"),10);v.css("overflow-x","hidden");var H=function(r,q,x){q+=x;r.attr("rows",q);return q};v=function(){for(var r=A.scrollTop(),q=parseInt(l(this).attr("rows"),10),x=l(this);q>y&&this.scrollHeight>=this.clientHeight;)q=H(x,q,-1);for(;""!==l(this).val()&&q<F&&this.scrollHeight>this.clientHeight;)q=H(x,q,1);A.scrollTop(r)};gx.evt.attach(p,["input","keyup"],v.closure(p,[]));gx.evt.on_ready(p,v.closure(p,[]))}});var u=function(p){p=p.get(0);return"on"===gx.dom.getComputedStyle(p).getPropertyValue("--gx-image-scaling").trim()},
B=function(p){var v=p;u(p)&&(0<p.parent("a").length&&(v=p.parent("a")),v.parent("div[data-align-inner]").parent().parent().attr("data-align-image",""))};d({name:"image",selector:"img[data-gx-image]",setContext:function(p,v){p.el=l(v);return p},initialize:function(p){p=p.el;var v=p.get(0).currentSrc||p.attr("src");v&&u(p)&&p.css("background-image","url("+v+")");B(p)},listeners:{control:function(p){return p.id},after:{Bitmap:function(p,v){p=l(p);v&&u(p)?p.css("background-image","url("+v+")"):p.css("background-image",
"none")},Class:function(p){var v=l(p);p.src&&u(v)?v.css("background-image","url("+p.src+")"):v.css("background-image","none");B(v)}}}})})(gx.$);
gx.ui=function(l){return{grid:function(){this.gridContainer=null;this.firstTime=!0;this.loadingCollection=this.autoRefreshing=!1;this.properties=[];this.setContainerDelayed=function(d){this.gridContainer=d;this.DesignContainerName=this.ContainerName=gx.dom.id(d);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(d,k,a,b,f){this.refreshDynProperties();this.properties=[];for(var g=
0;g<this.rows.length;g++){this.properties[g]=[];for(var m=this.rows[g],n=0;n<this.columns.length;n++){var t=this.columns[n],w=m.gxProps[t.index],u=t.gxControl;u.grid=this.ownerGrid;u.row=m;u.gridId=this.gxId;u.gridRow=m.gxId;a?u.value=w[0]:u.setProperties.apply(u,w);this.setRenderProperties(m.gxRenderProps[n],u);!u.enabled&&u.type<=gx.html.controls.types.checkBox&&(u.cssClass=gx.fn.prefixROClass(u.cssClass));this.properties[g][n]=gx.lang.clone(u);this.addC2V(t,this.properties[g][n])}}this.firstTime=
d;this.autoRefreshing=k?!0:!1;this.loadingCollection=a?!0:!1;this.show&&(this.setC2ShowFunction(function(B){B.show();gx.lang.requestAnimationFrame(b)}),this.autoRefreshing&&(this.show(),b()));f();this.autoRefreshing=!1};this.addC2V=function(d,k){this.addC2VFunction(function(a){if(""!==d.gxAttName){var b=a.ParentObject.getValidStruct(d.gxId);b&&(a.ParentObject[b.gxvar]=k.value);gx.fn.setHidden(k.id,k.value)}})};this.setRenderProperties=function(d,k){if(d)for(var a in d)k[a]=d[a]};this.selectRow=function(d){if(d=
this.rows[d])this.instanciateSelectionVars(d.gxId),this.instanciateSelectedRow(d)};this.getEventRow=function(){return gx.lang.emptyObject(this.GridRow)?"0001":this.GridRow};this.executeEvent=function(d,k){if(d<this.columns.length&&k<this.rows.length)if(d=this.properties[k][d],k=gx.html.controls.eventJSCode(d.jsScrCode,d.eventName,d.jsDynCode,d.grid,d.row),""!==k)gx.lang.emptyObject(d.usrOnclick)||(k="if("+d.usrOnclick+") { "+k+" }"),d=new Function(k),"function"==typeof d&&d();else if(d.clickEvent){k=
this.parentGxObject;var a=d.row.gxId;this.ownerGrid.instanciateRow(a);k[d.clickEvent].call(k,a)}};this.executeIsValid=function(d,k){if(d<this.columns.length&&k<this.rows.length){var a=this.parentGxObject;k=this.properties[k][d];d=k.vStruct||a.GXValidFnc[k.column.gxId];k=k.row.gxId;d&&d.isvalid&&(this.ownerGrid.instanciateRow(k),a[d.isvalid].call(a))}};this.addEventHandler=function(d,k){this[d]=function(a){var b=this.isServerEvent(d);b&&a&&gx.fx.obs.addObserver("gx.onafterevent",this,a,{single:!0});
var f=gx.fn.currentGridRow(this.GridId);this.eventHandler(this.GridId,f,k);!b&&a&&a.call(this)}.closure(this)};var c={};this.requestSuggest=function(d,k,a){var b=l.Deferred();if(d<this.columns.length&&k<this.rows.length){var f=this.parentGxObject;k=this.properties[k][d];d=k.vStruct||f.GXValidFnc[k.column.gxId];k=k.row.gxId;var g=c[k+"_"+d.id];!g&&d&&d.gxsgprm&&(this.ownerGrid.instanciateRow(k),g=new gx.fx.suggestProvider(f,d.gxsgprm[1],null,d.gxsgprm[0]),c[k+"_"+d.id]=g);g?(gx.fx.updateSuggestParms(d.gxsgprm[2]),
g.requestSuggestions([],function(){b.resolve(g.values)},function(){b.reject()},a)):b.reject()}else b.reject();return b.promise()};this.executeValidate=function(d,k){if(d<this.columns.length&&k<this.rows.length){var a=this.parentGxObject;k=this.properties[k][d];d=k.vStruct||a.GXValidFnc[k.column.gxId];k=k.row.gxId;d&&d.fnc&&(this.ownerGrid.instanciateRow(k),d.fnc.call(a))}}}}}(gx.$);
gx.ui.controls=function(l){var c=function(){var d="render selectTabPageByIndex hideTabPageByIndex showTabPageByIndex getTabPageIndexByControlName getTabPageControlNameByIndex".split(" ");return{show:function(){for(var k=this.ActivePage,a=0;a<d.length;a++)this[d[a]]||console.error("Missing required method",d[a],this);this.IsPostBack?this.update&&this.update():(this.beforeRender&&this.beforeRender(),this.render(),this.ActivePageControlName&&(k=parseInt(this.getTabPageIndexByControlName(this.ActivePageControlName),
10)),k||(k=1),this.selectTabPageByIndex(k),this.tabPageSelected(k,!0,!1),this.HistoryManagement&&HistoryManager.Initialize(this),this.afterRender&&this.afterRender());this.allways&&this.allways()},destroy:function(){HistoryManager.RemoveListener(this)},tabPageSelected:function(k,a,b){this.ActivePage!==k&&(this.ActivePage=k||1,this.ActivePageControlName=this.getTabPageControlNameByIndex(k)||"",this.HistoryManagement&&!1!==b&&HistoryManager.AddHistoryPoint(this.ActivePageControlName,!0,null,!1),!a&&
this.TabChanged&&this.TabChanged())},getId:function(){return(this.ParentObject?this.ParentObject.CmpContext||"-"+this.ParentObject.ServerClass||"":"")+"-"+this.ControlName},urlListener:function(){if(!gx.grid.drawAtServer){var k=(k=0<document.location.hash.length?document.location.hash.substr(1):"")?this.getTabPageIndexByControlName(k):1;this.selectTabPageByIndex(k);this.tabPageSelected(k,!1,!1)}},SelectTab:function(k){this.selectTabPageByIndex(k);this.tabPageSelected(k,!1,void 0)},HideTab:function(k){this.hideTabPageByIndex(k)},
ShowTab:function(k){this.showTabPageByIndex(k)}}}();return{datePicker:function(d){this.$input=l("#"+d.inputId);this.$trigger=l("#"+d.triggerId);this.showInLine=d.inline;this.inputType=d.inputType;this.format=d.format;this.datePartLength=d.datePartLength;this.timePartLength=d.timePartLength;this.nativeSupport=gx.HTML5&&(gx.util.browser.isIPhone()||gx.util.browser.isIPad()||gx.util.browser.isAndroid()&&gx.util.browser.isChrome());this.afterChange=d.afterChange;this.opts=d;this.getInputType=function(){return 0<
this.timePartLength&&0===this.datePartLength?"time":0<this.datePartLength&&0===this.timePartLength?"date":"datetime-local"};this.getTimeStep=function(){return 6<this.timePartLength?1:60};this.resolveValue=function(k,a){gx.date.isNullDate(a)&&"time"!==k&&(a=new Date);if("date"==k)a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),k=a.toISOString().slice(0,10);else{a.setMinutes(a.getMinutes()-a.getTimezoneOffset());var b=0,f=19;"time"==k&&(b=11,f=60==this.getTimeStep()?16:19);k=(new gx.date.gxdate(a)).Value.toISOString().slice(b,
f)}return k};this.render=function(){if(this.nativeSupport){var k=this.$input,a=this.getInputType(),b=l("<input>");b.attr("type",a);"time"!==a&&"datetime-local"!==a||b.attr("step",this.getTimeStep());b.css("position","absolute");b.css("top","0");b.css("left","0");b.css("opacity","0");b.attr("id",k.attr("id")+"-picker");this.dtPicker=b;k.parent().append(b);b.bind("touchstart touchend mousedown mouseup",function(){return!0!==k.prop("disabled")});var f=this,g=function(m){m=m.val();var n=new gx.date.gxdate(m,
"Y4MD");m=""!==m?n.Value:gx.date.nullDate();f.afterChange&&f.afterChange(null,m,k[0],f.opts.vStruct,f.opts.gxO)};this.$trigger.on("click",function(){var m=gx.date.dateObject(k.val());gx.date.isNullDate(m)||(m=f.resolveValue(a,m),b.val(m),g(b));b.trigger("click").trigger("focus")});gx.evt.attach(b[0],"change",function(){var m=l(this);g(m)})}else this.opts.showsTime="date"!==this.opts.inputType,gx.html.onTypeAvailable("Calendar",this.installCalendar,[this.opts],0)};this.installCalendar=function(k){var a=
k.inputId,b=gx.dom.byId(a),f=l(b),g=k.inline,m=k.weeksNumbers,n=k.mondayFirst,t=k.showsTime,w=k.format;k=k.gxO;if(gx.lang.emptyObject(b)||"SELECT"!=b.nodeName)if(0===g){b=a+"_dp_trigger";if((g=gx.dom.byId(b))&&"none"!==f.css("display")&&"hidden"!==f.css("visibility")&&"none"===f.css("display")||"hidden"===f.css("visibility")||!g)b=a;f=f.parent().closest(".dp_container")[0];Calendar.setup({inputField:a,parentNode:f,showsTime:t,weekNumbers:m,mondayFirst:n,ifFormat:w,button:b,onSelect:gx.fn.datePickerChanged,
align:"Bl",singleClick:!0,displayRight:!1,gxO:k})}else gx.lang.emptyObject(b)||f.css("display","none"),Calendar.setup({inputField:a,showsTime:t,weekNumbers:m,mondayFirst:n,ifFormat:w,flat:a+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:!0,gxO:k})}},actionGroup:function(){return{init:function(){0<l("[data-gx-base-lib='none']").length&&gx.fx.obs.addObserver("gx.onclick",this,function(d){d=d.event;var k=d.target;if(l(k).is(".gx-navbar .dropdown>a")){d.preventDefault();d=
k.getAttribute("aria-expanded");var a=function(b){var f=l(k).next(".gx-dropdown-menu");b=b.event.target;l(b).closest(f).length||b==k||"true"!==k.getAttribute("aria-expanded")||(k.setAttribute("aria-expanded","false"),gx.fx.obs.deleteObserver("gx.onclick",this,a))};"false"===d?(gx.fx.obs.addObserver("gx.onclick",this,a),k.setAttribute("aria-expanded","true")):(gx.fx.obs.deleteObserver("gx.onclick",this,a),k.setAttribute("aria-expanded","false"))}})},dynamicItems:function(){return function(d){this.preProcessItems=
function(k,a){var b;var f=0;for(b=k.length;f<b;f++){var g=(a?a+" ":"")+f.toString();k[f]._$Key=g;k[f].Children?this.preProcessItems(k[f].Children,g):k[f].Children=[]}};this.getItems=function(){return this.items};this.setItems=function(k){this.preProcessItems(k);this.items=k||[]};this.getItemPressed=function(){return this.itemPressed||{}};this.setItemPressed=function(k){this.itemPressed=k};this.assignItemPressed=function(k){k=k.split(" ");var a=this.getItems(),b;for(b=0;b<k.length;b++){var f=parseInt(k[b],
10);var g=g?g.Children[f]:a[f]}this.setItemPressed(g)};this.getType=function(k){var a;return function(){a||(a=d(k.getContainerControl()).closest("[data-gx-actiongroup-type]").attr("data-gx-actiongroup-type"));return a}}(this);this.renderMenu=function(k){this.IsPostBack?d('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove():d(this.getContainerControl()).after('<li data-gx-dynitem-hook="'+this.ContainerName+'"></li>').css("display","none").appendTo(gx.dom.form());k.length&&(k=Mustache.render("{{#Children}}{{> navbarItemTemplate}}{{/Children}}",
{containerName:this.ContainerName,Children:k},{navbarItemTemplate:'<li data-gx-dynitem-source="{{containerName}}">{{#Link}}<a href="{{Link}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/Link}}{{^Link}}{{#Children.length}}{{> navbarDropDowntemplate}}{{/Children.length}}{{^Children.length}}{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/EventName}}{{^EventName}}<span class="gx-navbar-textblock {{Class}} navbar-text" data-gx-tpl-applied-navbar-textblock-text title="{{TooltipText}}">{{Caption}}</span>{{/EventName}}</span>{{/Children.length}}{{/Link}}</li>',
navbarDropDowntemplate:'<li class="dropdown" data-gx-dynitem-source="{{containerName}}"><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle" title="{{TooltipText}}">{{Caption}}<span class="caret"></span></a><ul class="gx-dropdown-menu dropdown-menu {{Class}}">{{#Children}}{{> navbarItemTemplate}}{{/Children}}</ul></li>'}),d('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(k))};this.renderToolbar=function(k){var a="";k.length&&
(a=Mustache.render('{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}">{{Caption}}</a>{{/EventName}}{{^EventName}}{{Caption}}{{/EventName}}</span>{{/Children.length}}{{/Link}}{{/Children}}',
{containerName:this.ContainerName,Children:k},{toolbarItemTemplate:'{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}">{{Caption}}</a>{{/EventName}}{{^EventName}}{{Caption}}{{/EventName}}</span>{{/Children.length}}{{/Link}}{{/Children}}'}));
d(this.getContainerControl()).attr("data-gx-dynitem-container","").html(a)};this.show=function(){if(this.getContainerControl()){var k=this.getType(),a=gx.lang.isArray(this.items)?this.items:[this.items],b=[];"menu"==k?(this.renderMenu(a),b=document.querySelectorAll("[data-gx-dynitem-source='"+this.ContainerName+"'] a[data-event-name]")):"toolbar"==k&&(this.renderToolbar(a),b=this.getContainerControl().querySelectorAll("a[data-event-name]"));for(k=0;k<b.length;k++)gx.evt.attach(b[k],"click",this.fireEvent,
this)}};this.destroy=function(){var k=this.getType();"menu"==k?(d('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove(),d('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(this.getContainerControl()).remove()):"toolbar"==k&&d(this.getContainerControl()).html("")};this.fireEvent=function(k){k.preventDefault();k=k.currentTarget.dataset;var a=this.ParentObject,b="E"+(a.IsMasterPage?k.eventName.toUpperCase()+"_MPAGE":"'"+k.eventName.toUpperCase()+"'");if(b=a.getClientEventName(b))this.assignItemPressed(k.key),
this.execC2VFunctions(),gx.evt.dispatcher.dispatch(a.getServerEventName(b),a,0,0,a.isServerEvent(b),void 0,void 0,!0)}}}()}}(),defineTabControl:function(d){gx.lang.apply(d.prototype,c);return d}}}(gx.$);gx.setGxObyCtx=function(l,c){var d;void 0!=l&&(d=gx.getObj(l,c))&&gx.setGxO(l,c);return gx.O};gx.parentGridRow=function(l,c){var d=gx.fn.currentGridRowImpl(l);return d=(l=c.getGridById(l,d))&&l.parentGrid?gx.fn.currentGridRow(l.parentGrid.gridId):void 0};
gx.applyPicture=function(l,c,d){if(!gx.lang.emptyObject(l)&&!gx.lang.emptyObject(gx.rtPicture(l,d))&&!gx.lang.emptyObject(l.type))try{switch(l.type){case "int":case "decimal":return c=Number.isNaN(Number(c))?gx.num.extractValue(gx.rtPicture(l,d),gx.thousandSeparator,c):c,gx.num.formatNumber(c,l.dec,gx.rtPicture(l,d),l.len,l.sign,!0,l.emptyAsNull);case "char":return c;default:return c}}catch(k){}return c};
gx.SetOld=function(l,c,d){var k=c;l=gx.fn.controlGridId(l);0<l&&(k=c+"_"+gx.fn.currentGridRow(l));gx.fn.setHidden(k,gx.getVar(d))};gx.Old=function(l,c){try{var d=c,k=gx.fn.controlGridId(l);0<k&&(d=c+"_"+gx.fn.currentGridRow(k));var a=gx.fn.getHidden(d);"undefined"==typeof a&&""!=gx.O.CmpContext&&(a=gx.fn.getHidden(gx.O.CmpContext+d));return a}catch(b){gx.dbg.logEx(b,"gxapi.js","Old")}return""};gx.OldInteger=function(l,c){l=parseInt(gx.Old(l,c),10);return isNaN(l)?0:l};
gx.OldDecimal=function(l,c){l=gx.num.parseFloat(gx.Old(l,c),gx.thousandSeparator,gx.decimalPoint);return isNaN(l)?0:l};gx.OldDate=function(l,c){return(new gx.date.gxdate(gx.Old(l,c),"Y4MD")).getStringWithFmt(gx.dateFormat)};gx.OldDateTime=function(l,c){l=new gx.date.gxdate(gx.Old(l,c),"Y4MD");return l.getStringWithFmt(gx.dateFormat)+" "+l.getTimeString(!0,!0)};
gx.dom_i=function(l){return{el:function(c,d,k,a,b){if(c){if("string"===typeof c){a=this.byId(c);if(null!=a||!k&&(a=this.byId("span_"+c),null!=a))return a;if(d)return null;a=this.byName(c);return null!=a&&0<a.length?(a[0].id||(a[0].id=c),c=Array.from(a).filter(function(f){return f.checked}),0===c.length?a[0]:c[0]):null}return c}return null},matchesSelector:function(){var c;return function(d,k){d=gx.dom.byId(d);var a=d.matches||d.matchesSelector||d.msMatchesSelector||d.mozMatchesSelector||d.webkitMatchesSelector||
d.oMatchesSelector;void 0===c&&(c=gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion());return c||!a?l(d).is(k):a?a.call(d,k):!1}}(),hasAttribute:function(c,d){return c.hasAttribute?c.hasAttribute(d):void 0!==c[d]},hasClass:function(c,d){if(c=gx.dom.el(c,!0))return c.classList?c.classList.contains(d):d&&-1!=(" "+c.className+" ").indexOf(" "+d+" ")},isRoundedBtnWrapper:function(c){return c.hasClass("BtnRight")||c.hasClass("BtnLeft")||c.hasClass("BtnBackground")},addPrefixClass:function(c,d){if(c){var k=
l(c);c.className&&!k.attr("data-gx-unprefixed-class")&&(k.attr("data-gx-unprefixed-class",c.className),k=c.className.split(" "),k.splice(0,0,""),c.className+=k.join(" "+d))}},removePrefixClass:function(c,d){if(c){var k=l(c);if(0<=c.className.search(new RegExp("(^|\\s)"+d))){var a=k.attr("data-gx-unprefixed-class");k.removeAttr("data-gx-unprefixed-class");c.className=a||c.className.substring(d.length)}}},addClass:function(c,d){var k=gx.dom.el(c,!0);k&&d&&(k.classList?0<d.indexOf(" ")?k.classList.add.apply(k.classList,
d.split(" ")):k.classList.add(d):this.hasClass(c,d)||(k.className=k.className+(k.className?" ":"")+d))},classReCache:{},removeClass:function(c,d){var k=gx.dom.el(c,!0);k&&(k.classList?k.classList.remove(d):this.hasClass(c,d)&&(c=this.classReCache[d],c||(c=new RegExp("(?:^|\\s+)"+d+"(?:\\s+|$)","g"),this.classReCache[d]=c),k.className=k.className.replace(c," ")))},hasTransition:function(c){if(c&&Modernizr.csstransitions){var d=gx.util.browser,k="transitionDuration";d.isIE()&&(k="msTransitionDuration");
d.isWebkit()?k="webkitTransitionDuration":d.isFirefox()?k="MozTransitionDuration":d.isOpera()&&(k="OTransitionDuration");c=parseFloat(gx.dom.getComputedStyle(c)[k],10);return 0!==c&&!isNaN(c)}return!1},hasAnimation:function(c){if(c&&Modernizr.csstransitions){var d=gx.util.browser,k="animationName";d.isIE()&&(k="msAnimationName");d.isWebkit()?k="webkitAnimationName":d.isFirefox()?k="MozAnimationName":d.isOpera()&&(k="OAnimationName");return(c=gx.dom.getComputedStyle(c)[k])&&"none"!=c}return!1},isMultimediaElement:function(c){return"SPAN"==
c.tagName&&(gx.dom.hasClass(c,"gx-video-placeholder")||gx.dom.hasClass(c,"gx-audio-placeholder")||gx.dom.hasClass(c,"gx-download-placeholder"))},purgeElement:function(c,d){d=d||c.attributes;if(d){var k=d.length;for(var a=0;a<k;a+=1){var b=d[a].name||d[a];"function"===typeof c[b]&&(c[b]=null)}}},purge:function(c,d){d||this.purgeElement(c);if(c=c.childNodes){d=0;for(var k=c.length;d<k;d++)gx.dom.purge(c[d],!1)}},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isOldIE()},form:function(){null==
this._form&&(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){try{for(var c=gx.fn.getFormElements(),d=c.length,k=0;k<d;k++)c[k].gxIndex=k}catch(a){gx.dbg.logEx(a,"gxapi.js","indexElements")}},setAttribute:function(c,d,k){var a=function(){try{var b=gx.dom.byName(c);if(null!=b&&0<b.length)for(var f=b.length,g=0;g<f;g++)b[g].setAttribute(d,k);else g=gx.dom.byId(c),null!=g&&g.setAttribute(d,k)}catch(m){gx.dbg.logEx(m,"gxapi.js",
"setAttribute")}};"loading"==document.gxReadyState?gx.fx.obs.addObserver("gx.onload",this,a,{single:!0}):a.apply(this)},createInput:function(c,d){var k=document.createElement("input");k.type=d;k.id=c;k.name=c;gx.dom.form().appendChild(k);return k},hasSelectedFile:function(){var c=l('input[type="file"]'),d=c.length;if(!d)return!1;for(var k=0;k<d;k++)if(!gx.lang.emptyObject(c[k].value))return!0;return!1},hasSubmitControl:function(){var c=this.byTag("input"),d=c.length;if(!d)return!1;for(var k=0;k<d;k++){var a=
c[k].getAttribute("type");if("submit"==a||"image"==a)return!0}return!1},styles:function(){var c=[].concat($jscomp.arrayFromIterable(document.styleSheets)).map(function(k){return k.href}).filter(function(k){return!gx.lang.emptyObject(k)}),d=[].concat($jscomp.arrayFromIterable(document.querySelectorAll("style["+gx.html.STYLE_ELEMENT_HREF+"]"))).map(function(k){return k.getAttribute(gx.html.STYLE_ELEMENT_HREF)});return[].concat($jscomp.arrayFromIterable(c),$jscomp.arrayFromIterable(d))},getComputedStyle:function(c){try{return"#document"==
c.nodeName?null:"function"==typeof window.getComputedStyle?window.getComputedStyle(c):"undefined"!=typeof c.currentStyle?c.currentStyle:c.style}catch(d){return gx.dbg.logEx(d,"gxapi.js","getComputedStyle"),null}},getStyle:function(c,d){var k="";try{k="function"==typeof window.getComputedStyle?window.getComputedStyle(c,null)[d]:"undefined"!=typeof c.currentStyle?c.currentStyle[d]:c.style[d];var a=parseInt(k);isNaN(a)||(k=a)}catch(b){gx.dbg.logEx(b,"gxapi.js","getStyle")}return k},CSS_URL_REGEXP:/url\(["']?(?!(?:https?:|\/))([^"\)]+)["']?\)/ig,
CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,cssRules:null,cacheStyleSheet:function(c,d){var k=c.href?c.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,a;this.cssRules||(this.cssRules=[]);try{if(a=c.cssRules||c.rules){c=0;for(var b=a.length;c<b;c++){var f=a[c].cssText;d&&!f.includes("@import")&&(f=f.replace(this.CSS_URL_REGEXP,'url("'+k+'$1")'));this.cssRules.push(f)}}}catch(g){}},getCssRules:function(c,d){var k=document.styleSheets;if(null===this.cssRules||c){this.cssRules=[];c=0;for(var a=
k.length;c<a;c++)try{k[c].disabled||this.cacheStyleSheet(k[c],d)}catch(b){}}return this.cssRules},setStyleElement:function(c,d,k){try{c.innerHTML=(k?c.innerHTML:"")+d}catch(a){c.styleSheet.cssText=(k?c.styleSheet.cssText:"")+d}},isButton:function(c){return void 0!=c&&null!=c?"submit"==c.type||"button"==c.type:!1},isRadio:function(c){return c&&"INPUT"==c.tagName&&"radio"==c.type},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,
tel:!0,month:!0,week:!0},isEditControl:function(c){return c&&"INPUT"==c.tagName?this.editControls[c.type]||!1:!1},isTextControl:function(c){return c&&"INPUT"===c.tagName&&"text"===c.type||"TEXTAREA"===c.tagName},isDateControl:function(c){return"date"==c.type||"datetime"==c.type||"datetime-local"==c.type},isButtonLike:function(c){return c?this.isButton(c)||gx.dom.hasAttribute(c,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR)?!0:c&&"INPUT"===c.nodeName?"file"===c.type||("image"===c.type||"checkbox"===c.type)&&
"function"==typeof c.onclick:!1:!1},iFrameDoc:function(c){try{if(c.contentDocument)return c.contentDocument;if(c.contentWindow)return c.contentWindow.document}catch(d){}return null},forEachChild:function(c,d,k){if(c&&c.childNodes&&"function"==typeof k)for(var a=c.childNodes.length,b=0;b<a&&!1!==k.call(d,c.childNodes[b]);b++);},isTextWithLink:function(c){return null!=c&&"A"==c.tagName&&c.childNodes&&0<c.childNodes.length&&this.innerChildIsText(c.firstChild)?!0:!1},isImageWithLink:function(c){return c&&
"A"===c.tagName&&c.href&&(c=c.firstElementChild,!gx.dom.hasClass(c,"gx-prompt")&&c&&"IMG"===c.tagName)?!0:!1},isChildNode:function(c,d){c.frameElement&&(c=c.frameElement);if(c==d)return!0;for(;c.parentNode;){if(c==d||c.parentNode==d)return!0;c=c.parentNode}return!1},NodeLevel:function(c){for(var d=0;c.parentNode;)(c.id||c.name)&&d++,c=c.parentNode;return d},findRadioContainer:function(c){return c.parentNode&&"SPAN"==c.parentNode.tagName?c.parentNode:gx.dom.findParentByTagName(c,"table")||gx.dom.findParentByTagName(c,
"span")||c.parentNode},findParentByTagName:function(c,d,k){c=c.parentNode;d=d.toUpperCase();for(var a=0;c&&(!k||a!=k);){a++;if(c.tagName==d)return c;c=c.parentNode}},innerChildIsText:function(c){for(;null!=c;){if(c.nodeName&&"#text"==c.nodeName)return!0;c=c.firstChild}return!1},allChildrenAreText:function(c){for(c=c.firstChild;c;){var d=c.nodeName.toLowerCase();if("#text"!==d&&"pre"!==d&&null!=c.offsetParent)return!1;c=c.nextSibling}return!0},position:function(c){c=l(c).offset();return{x:Math.floor(c.left),
y:Math.floor(c.top)}},dimensions:function(c){c=l(c);return{w:c.outerWidth(),h:c.outerHeight()}},windowDimensions:function(c){var d=c.documentElement;c=c.body;return d&&d.scrollHeight?{scrollWidth:Math.max(d.scrollWidth,c.scrollWidth),scrollHeight:Math.max(d.scrollHeight,c.scrollHeight),clientHeight:Math.max(d.clientHeight,c.clientHeight),clientWidth:Math.max(d.clientWidth,c.clientWidth)}:{scrollWidth:c.scrollWidth,scrollHeight:c.scrollHeight,clientHeight:c.clientHeight,clientWidth:c.clientWidth}},
documentScroll:function(c){c=c||document;var d=-1,k=-1;try{d=c.documentElement.scrollTop||c.body.scrollTop,k=c.documentElement.scrollLeft||c.body.scrollLeft}catch(a){}return{scrollTop:d,scrollLeft:k}},documentScrollable:function(c){c=c||document;var d={x:!1,y:!1};c=gx.dom.windowDimensions(c);c.scrollHeight>c.clientHeight&&(d.x=!0);c.scrollWidth>c.clientWidth&&(d.x=!0);return d},autofitIFrame:function(c){c=gx.evt.source(window.event||c);var d=window.frames[c.name].document;if(d&&""==c.width&&""==c.height){var k=
gx.dom.windowDimensions(d);d=k.scrollWidth?k.scrollWidth+10:null;k=k.scrollHeight?k.scrollHeight+10:null;d&&k&&(c.style.width=d+"px",c.style.height=k+"px")}},fitToParent:function(c){if(!gx.util.browser.isIE()&&c&&c.childNodes){for(var d=null,k=c.childNodes.length,a=0;a<k;a++){var b=c.childNodes[a];if("TABLE"==b.nodeName){d=b;break}}null!=d&&(-1!=d.style.width.indexOf("%")&&(c.style.width=gx.dom.addUnits(d.style.width)),-1!=d.style.height.indexOf("%")&&(c.style.height=gx.dom.addUnits(d.style.height)))}},
redrawControl:function(c){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(c,c.outerHTML):setTimeout(function(){gx.html.setOuterHtml(c,c.outerHTML)},100)},setCaretPosition:function(c,d){null!=c&&(c.createTextRange?(c=c.createTextRange(),c.move("character",d),c.select()):c.selectionStart?(c.focus(),c.setSelectionRange(d,d)):c.focus())},replaceAtCaretPosition:function(c,d){if(document.selection){var k=document.selection.createRange().getBookmark();c.selection=c.createTextRange();
c.selection.moveToBookmark(k);c.selectLeft=c.createTextRange();c.selectLeft.collapse(!0);c.selectLeft.setEndPoint("EndToStart",c.selection);k=c.selectLeft.text.length+1;var a=c.selectLeft.text.length+(0==c.selection.text.length?1:c.selection.text.length)}else k=c.selectionStart,a=c.selectionEnd;c.setRangeText?c.setRangeText(d,k,a,"end"):(c.value=c.value.substr(0,k)+d+c.value.substr(k,c.value.length),gx.dom.setCaretPosition(c,k+d.length))},spanValue:function(c){var d=c.nodeValue;gx.lang.emptyObject(d)&&
(d=c.innerText||c.textContent);gx.lang.emptyObject(d)&&(d="");return d},removeControlSafe:function(c){gx.dom.shouldPurge()?(this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV")),this._avoidLeaksDiv.appendChild(c),gx.dom.purge(this._avoidLeaksDiv),this.removeControl(this._avoidLeaksDiv),this._avoidLeaksDiv=null):this.removeControl(c)},removeControl:function(c){if(null==document.createRange)c.removeNode(!0);else{var d=document.createRange();c&&(d.selectNode(c),d.deleteContents())}},
radioToObj:function(c,d){d={s:"",v:[]};if(!c)return d;if(gx.dom.isRadio(c)){d.s=c.value;c=gx.dom.byName(c.name);for(var k=c.length,a=0;a<k;a++){var b=l(c[a]),f=l("label[for='"+c[a].id+"']").first();d.v.push([b.val(),f.text().trim()])}}return d},comboBoxToObj:function(c,d){try{var k={s:"",v:[]};if(!c)return k;if("SELECT"===c.tagName){k.s=c.value;var a=c.options.length;for(d=0;d<a;d++){var b=l(c.options[d]);k.v.push([b.val(),b.text()])}}else if("SPAN"===c.tagName){if(c.hasAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR))return gx.json.evalJSON(c.getAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR));
var f=gx.fn.getControlValue_span(c);k.v.push([d,f]);k.s=d}return k}catch(g){gx.dbg.logEx(g,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s|ch|rem|vh|vw|vmin|vmax|q)$/i,addUnits:function(c,d){return""===c||"auto"==c?c:void 0===c?"":"number"!=typeof c&&this.unitPattern.test(c)?c:c+(d||"px")},getScrollbarWidth:function(){var c=document.createElement("div"),d=c.style;d.display="block";d.position="absolute";d.width="100px";d.height="100px";d.left="-999px";d.top=
"-999px";d.overflow="scroll";document.body.insertBefore(c,null);d=c.clientWidth;if(0===d)document.body.removeChild(c);else return document.body.removeChild(c),100-d},getActiveElement:function(c){c=c||document;try{var d=c.activeElement;d&&d.nodeName||(d=c.body)}catch(k){d=c.body}return d},getCaretOffset:function(c){return c&&"INPUT"===c.tagName&&"text"===c.type&&"undefined"!==typeof c.selectionStart?{s:c.selectionStart,e:c.selectionEnd}:{s:0,e:0}},setCaretOffset:function(c,d){c&&"INPUT"==c.tagName&&
"text"==c.type&&c.setSelectionRange&&c.setSelectionRange(d.s,d.e)},write:function(c,d){d=d||document;d.write(c)},writeError:function(c,d,k,a){gx.dbg.write(c);a=a||document;a.head.innerHTML="";a.body.innerHTML=c},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASK_ZINDEX:2,MASKED_CLASS:"gx-masked",isMaskElement:function(c){return this.hasClass(c,this.MASK_CLASS)},mask:function(c,d){d=d||0;if((c=this.el(c))&&!this.hasClass(c,this.MASK_RELATIVE_CLASS)){var k=gx.util.browser,
a=k.ieVersion(),b=6==a||k.isIE&&k.isCompatMode(),f=!!c.style.setExpression,g=l(c);g.css("caret-color","transparent");g.is("body")&&"static"==this.getComputedStyle(c).position||this.addClass(c,this.MASK_RELATIVE_CLASS);var m=document.createElement("div");m.className=this.MASK_CLASS;m.style.zIndex=this.MASK_ZINDEX;if("TABLE"==c.tagName){var n=l(m);g=l(c);n.width(g.width());n.insertAfter(g);n.parent().addClass(this.MASK_RELATIVE_CLASS)}else c.appendChild(m);try{m.style.animationDelay=d/2+"ms",m.style.webkitAnimation=
d/2+"ms"}catch(t){}this.addClass(c,this.MASKED_CLASS);if(b&&f)try{m.style.setExpression("height","this.parentNode."+(c==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(t){}else c=this.getComputedStyle(c).height,k.isIE&&(7!=k.ieVersion||k.isCompatMode())&&"auto"==c&&(m.style.height=c);k.isIE()&&(7>=a||k.isCompatMode())&&(l(m),(k=this.getComputedStyle(m).opacity)&&l(m).css("opacity",k));return m}},unmask:function(c){c=this.el(c);var d;l(c).css("caret-color","");if("TABLE"==c.tagName){var k=
c.nextSibling;k&&"DIV"==k.tagName&&this.hasClass(k,this.MASK_CLASS)&&(d=k)}else{k=0;for(var a=c.childNodes.length;k<a;k++)if("DIV"==c.childNodes[k].tagName&&this.hasClass(c.childNodes[k],this.MASK_CLASS)&&!this.hasClass(c.childNodes[k],this.UNMASK_CLASS)){d=c.childNodes[k];break}}d&&!d.removed?(d.removed=!0,d.style.clearExpression&&(d.style.clearExpression("width"),d.style.clearExpression("height")),this.removeClass(c,this.MASKED_CLASS),k=gx.dom.hasTransition(d)?gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(d)?
gx.dom.ANIMATION_END_EVENT:!1,a=function(){"TABLE"==c.tagName?d.parentNode&&(gx.dom.removeClass(d.parentNode,this.MASK_RELATIVE_CLASS),d.parentNode.removeChild(d)):d.parentNode==c&&c.removeChild(d);gx.dom.removeClass(c,this.MASK_RELATIVE_CLASS)}.closure(this),k?gx.evt.attach(d,k,a,!1,{single:!0,useCapture:!0,timeout:300}):a(),this.addClass(d,this.UNMASK_CLASS)):(this.removeClass(c,this.MASKED_CLASS),this.removeClass(c,this.MASK_RELATIVE_CLASS))},replaceWithFx:function(c,d,k){k=k||{};var a=k.enteringClass||
"entering",b=k.leavingClass||"leaving",f=k.enterDurationClass||"enter-fx-duration",g=k.leaveDurationClass||"leave-fx-duration",m=k.transitioningClass||"transitioning",n=k.transitionTimeout||1500,t=function(O){return 0<O.childNodes.length&&(gx.dom.hasAnimation(O)||gx.dom.hasTransition(O))&&!gx.dom.hasClass(O.parentNode,m)},w=function(O){return gx.dom.hasAnimation(O)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(O)?gx.dom.TRANSITION_END_EVENT:!1};"BODY"==c.tagName&&(gx.dom.addClass(c,c.className+
"-fx"),c.style.position="static");"BODY"==d.tagName&&gx.dom.addClass(d,d.className+"-fx");var u=c.parentNode,B=t(c),p=t(d),v="BODY"!=c.tagName;if(B||p){t=document.createElement("iframe");var A=document.createElement("div"),y=this.getComputedStyle(c),F=y.width;y=y.height;var H=w(c),r=w(d),q,x,D,C,I,G=0;gx.dom.addClass(u,m);if("BODY"!=c.tagName&&"BODY"!=d.tagName)if(B){t.setAttribute("scrolling","no");t.setAttribute("frameborder","0");t.style.width=gx.dom.addUnits(window.innerWidth);t.style.height=
gx.dom.addUnits(window.innerHeight);t.style.display="none";A.appendChild(t);A.style.width=F;A.style.height=y;A.style.overflow="hidden";gx.spa.dettachContent(c);c.insertBefore(A,c.firstChild);w=t.contentDocument;try{w.open(),w.write(this.getDocTypeDeclaration(document)),w.write("<html>"),w.write("<head></head>"),w.write("<body><div></div></body>"),w.write("</html>"),w.close()}catch(O){gx.dbg.logEx(O,"gxapi.js","replaceWithFx"),A=w.createElement("div"),w.body.appendChild(A)}w.documentElement&&(w.documentElement.className=
"gx-fx-iframe");w.body.style.margin="0";w.body.className=gx.dom.form().className;w.head.appendChild(document.createElement("style"));var K=w.styleSheets[0];A=gx.dom.getCssRules(!0,!0);var N=[];A=A.filter(function(O,W){if(O.includes("@import"))return O;N.push(O)});var P=function(O){O.forEach(function(W){try{K.insertRule(W,K.cssRules.length)}catch(V){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+W)}})};P(A);P(N);w.body.firstChild.style.width=F;for(w.body.firstChild.style.height=y;c.childNodes[1];)w.body.firstChild.appendChild(c.childNodes[1]);
t.style.display="block"}else p&&(c.style.display="none");gx.dom.addClass(d,a);gx.dom.addClass(d,f);gx.dom.addClass(c,g);!1!==k.domAdd&&u.appendChild(d);g=function(){D=function(){2===G?(gx.dom.removeClass(u,m),v&&(k.transitionEndCallback&&(d=k.transitionEndCallback(c,d)),!1!==k.domRemove&&c.parentNode==u&&u.removeChild(c)),gx.dom.removeClass(d,f)):v||(k.transitionEndCallback&&(d=k.transitionEndCallback(c,d)),gx.dom.removeClass(d,a),p&&(I=setTimeout(x,n)))};B?(q=function(){clearTimeout(C);G++;k.leavingTransCallback&&
k.leavingTransCallback(c,d);D()},gx.evt.attach(c,H,q,!1,{single:!0,useCapture:!0})):(G++,D());p?(x=function(){2<=G?gx.evt.detach(d,r,x):(clearTimeout(I),G++,k.enteringTransCallback&&k.enteringTransCallback(c,d),D())},gx.evt.attach(d,r,x,!1,{single:!0,useCapture:!0})):(G++,D());gx.lang.requestAnimationFrame(function(){gx.dom.addClass(c,b);v&&(gx.dom.removeClass(d,a),p&&(I=setTimeout(x,n)));B&&(C=setTimeout(q,n))})};k.beforeTransitionStart?!0!==k.beforeTransitionStart(g)&&g():g()}else!1!==k.domRemove&&
u.removeChild(c),!1!==k.domAdd&&(c.parentNode==u?u.replaceChild(d,c):u.appendChild(d)),k.beforeTransitionStart&&k.beforeTransitionStart(),k.leavingTransCallback&&k.leavingTransCallback(c,d),k.enteringTransCallback&&k.enteringTransCallback(c,d),k.transitionEndCallback&&(d=k.transitionEndCallback(c,d))},getDocTypeDeclaration:function(c){c=c||document;c=c.doctype;parts=["!DOCTYPE"];if(!c)return"";parts.push(c.name||"html");c.publicId&&(parts.push("PUBLIC"),parts.push('"'+c.publicId+'"'));c.systemId&&
parts.push('"'+c.systemId+'"');return"<"+parts.join(" ")+">"},createShadowRoot:function(c){c=this.el(c);return c.createShadowRoot?c.createShadowRoot():c.webkitCreateShadowRoot?c.webkitCreateShadowRoot():!1},fixes:function(){var c=/gx-tab-padding-fix-\d+/ig,d=/gx-tab-spacing-fix-\d+/ig,k={},a={},b,f,g,m={center:{marginLeft:"auto",marginRight:"auto",className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,className:"gx-right-align",alignment:"right"},left:{marginLeft:0,
marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{resetFixesStyleElement:function(){k={};a={};l("#gx-dom-fixes").empty()},getFixesStyleElement:function(){var n=l("#gx-dom-fixes")[0];if(!n){n=document.createElement("style");n.id="gx-dom-fixes";var t=gx.getThemeElement();l("head")[0].insertBefore(n,t);gx.util.browser.isIE()&&l(t).insertAfter(n)}return n},html5:function(n){var t=gx.util.browser,w=t.isIE(),u=gx.O.DSO?["@layer gx-dom-fixes {"]:[];l("TABLE",n||document.body).each(function(){var p=
l(this);p.attr({align:p.data("align")})});if(!n){if(!g){for(B in m)gx.lang.apply(m[B],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},{el:"fieldset",last:!0}]});g=".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}";
Mustache.parse(g)}for(B in m)u.push(Mustache.render(g,m[B]));gx.O.DSO&&u.push("}");var B=this.getFixesStyleElement();gx.dom.setStyleElement(B,u.join(""),!0)}(w||t.isOpera())&&l("td[data-align]",n||document.body).each(function(){var p=l(this),v=p.attr("data-align").toLowerCase(),A=m[v].className,y=p.attr("class")||"";y&&(y=" "+y);p.attr("align",v);p.hasClass(A)||p.attr("class",A+y);p.children("div."+m[v].contHolderClassName).children("div."+m[v].contHolderBodyClassName).addClass(A);p.children("div."+
m[v].wcClassName).children("div."+m[v].wcBodyClassName).addClass(A)})},setPopupMinWidth:function(){var n=gx.popup.getPopup();if(n){var t=!0;if(gx.runtimeTemplates){try{t=window.parent.gx.runtimeTemplates}catch(w){}t||(t=this.getPopupMinWidth(),l(document.documentElement).css("min-width",gx.dom.addUnits(t)));l(document.documentElement).addClass("gx-popup-document")}(n.autoresize||void 0===n.autoresize)&&l(document.documentElement).css("height","auto")}},getPopupMinWidth:function(){var n=gx.popup.getPopup(),
t=l(n?n.window:window).width();n=800;1200<=t&&(n=900);768<=t&&992>t&&(n=600);768>t&&(n=t-20);return n},fixTableResets:function(n){var t=[],w=[],u=this.getFixesStyleElement();b||(b="{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}",Mustache.parse(b));f||(f="{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}",Mustache.parse(f));l("table[data-cellpadding], table[data-cellspacing]",n||document.body).each(function(){var B=this.getAttribute("data-cellpadding");
void 0!==B&&(k[B]||(k[B]=B,t.push(B)),l("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className="gx-tab-padding-fix-"+B+" "+this.className.replace(c,"").trim()}));var p=this.getAttribute("data-cellspacing");void 0!==p&&(a[p]||(a[p]=p,w.push(p)),this.className="gx-tab-spacing-fix-"+p+" "+this.className.replace(d,"").trim())});n=""+Mustache.render(b,t)+Mustache.render(f,w);0<n.length&&(gx.O.DSO?gx.dom.setStyleElement(u," @layer gx-dom-fixes { "+n+" }",!0):gx.dom.setStyleElement(u,
n,!0))},createLegacyNotification:function(){l("div#gx_ajax_notification").length||l('<div id="gx_ajax_notification" style="display:none;"></div>').appendTo(document.body)}}}(),_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)},element_in_scroll:function(c,d){var k=l(d)[0].offsetTop-l(c)[0].offsetTop-l(c).scrollTop();return c&&l(d)[0]?k<l(c).height():
!1}}}(gx.$);$.extend(gx.dom,gx.dom_i);
gx.evt_i=function(l){return{eachKeyAutorefreshType:function(c){return!gx.lang.isNumericType(c)&&!gx.lang.isDateType(c)},waitGridRefresh:function(c){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(c):c.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var c=gx.evt.refreshGridCallback.pop();"function"==typeof c&&c.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var c=
this.hooks.length,d=0;d<c;d++){var k=this.hooks[d];try{this.detach(k.c,k.e,k.f),k.c=null,k.f=null}catch(a){gx.dbg.logEx(a,"gxapi.js","clearHooks")}this.hooks[d]=null}this.hooks=[]},source:function(c){return c.target||c.currentTarget||c.srcElement},createEvent:function(c,d,k,a){d=void 0===d?!0:d;k=void 0===k?!0:k;a=a||{};if(window.CustomEvent)var b=new CustomEvent(c,{bubbles:d,cancelable:k,detail:a});else b=document.createEvent("CustomEvent"),b.initCustomEvent(c,d,k,a);return b},dispatch:function(c,
d){return c.dispatchEvent?c.dispatchEvent(d):c.fireEvent("on"+d.type,d)},fireEvent:function(c,d){gx.evt.dispatch(c,gx.evt.createEvent(d))},detach:function(c,d,k,a){try{if(a=a||{},"string"==typeof d)c.removeEventListener?c.removeEventListener(d,k,a.useCapture||!1):c.detachEvent?c.detachEvent("on"+d,k):c["on"+d]=null;else if(gx.lang.isArray(d))for(var b=0,f=d.length;b<f;b++)this.detach(c,d[b],k,a)}catch(g){gx.dbg.logEx(g,"gxapi.js","detach")}},stopPropagation:function(c){c&&(c.stopPropagation?c.stopPropagation():
c.cancelBubble=!0)},cancel:function(c,d){if(d&&gx.util.browser.isIE()&&typeof("undefined"!=c.keyCode))try{c.keyCode=0}catch(k){}"undefined"==typeof c.preventDefault?(c.cancelBubble=d,c.returnValue=!d):d&&(c.preventDefault(),c.stopPropagation())},checkCtrlFocus:function(c){try{if(gx.evt.fixWebKitOnFocus()&&"button"==c.type&&gx.fn.isAccepted(c)&&void 0!=c.onfocus)c.onfocus()}catch(d){gx.dbg.logEx(d,"gxapi.js","checkCtrlFocus")}},doClick:function(c,d){if(gx.isInputEnabled()&&(d=gx.evt.source(d),"button"!=
d.type&&"submit"!=d.type&&(c=gx.dom.el(c),gx.fn.isAccepted(c)))){if(void 0!=c.onfocus)c.onfocus();if(void 0!=c.onclick)c.onclick();"INPUT"==c.nodeName&&"submit"==c.type&&gx.dom.form().submit()}},executeOnblur:function(c,d){var k=gx.csv.lastId,a=gx.O.focusControl;gx.O.focusControl=c;this.onblur(d,gx.O.focusControl);gx.O.focusControl=a;gx.csv.lastId=k},onblur:function(c,d){if(gx.O&&!0!==gx.csv.IgnoreBlur){c=gx.fn.controlRowId(c);gx.csv.lastId=d;gx.O.GXLastCtrlId===d&&window.event&&null===window.event.relatedTarget&&
(gx.csv.ExecutingOnBlur=!0,gx.csv.validControls(d,d+1,!0,gx.O),gx.csv.ExecutingOnBlur=!1);try{var k=gx.fn.validStruct(d);k&&null!=k.gxgrid&&k.gxgrid.updateControlValue(k,!1,c);var a=gx.csv.lastControl;if(a){var b=a.getAttribute("maxlength");0<b&&a.value.length>b&&(a.value=a.value.substring(0,b));if(k&&"bits"==k.type&&0==k.ro){var f=gx.fn.getControlGridRef(k.fld,k.gxgrid?k.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>a.id.indexOf(k.fld)&&(a=f);var g=gx.html.multimediaUpload.getContainer(f);gx.html.multimediaUpload.refreshPreviewImg(g,
a)}}}catch(m){gx.dbg.logEx(m,"gxapi.js","onblur")}}},onfocus:function(){var c=function(){var d=l.Deferred();gx.fx.obs.notify("gx.onbeforefocus",arguments);gx.evt.onfocus_impl.apply(gx.evt,arguments).then(function(){gx.fx.obs.notify("gx.onafterfocus");d.resolve()});return d.promise()};!0===gx.evt.is_button_mouse_event||gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,c.closure(this,arguments),{single:!0,async:!0}):c.apply(gx.evt,arguments)},onfocus_impl:function(c,d,k,a,b,f,g){var m=
l.Deferred();b=gx.fn.controlRowIndex(c)||b;try{gx.csv.lastGrid!=f&&gx.grid.clearActiveGrid();if(gx.spa.isNavigating())return m.resolve(!1).promise();gx.evt.setReady(!1,"onfocus_impl");if(!gx.fn.checkPopupFocus(c))return gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!1).promise();var n=!1;gx.csv.cmpCtx!=k&&(n=!0,gx.O.fromValid=0);gx.setGxO(k,a);!0!==c.GXFormatError&&gx.fn.refreshControlOldValue(c);n&&gx.fn.changeCmpContext();gx.fn.initOld(c);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,
gx.grid.lastFocusCtrl=null)}catch(r){gx.dbg.logEx(r,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=c;0!=f&&""==b||gx.fn.setCurrentGridRow(f,b);gx.fx.installSuggest(c);var t=!1;if(gx.csv.lastGrid!=f){gx.csv.lastRow[f]=null;if(!g){if(gx.csv.lastGrid<f){var w=gx.fn.firstGridControl(f);gx.O.fromValid>w&&(gx.O.fromValid=w)}gx.csv.lastGrid=f}t=!0}0<d&&(gx.O.focusControl=d);if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise();if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(c)}catch(r){gx.dbg.logEx(r,
"gxapi.js","onfocus")}try{var u=gx.fn.getControlValue("Mode");if("DLT"==u||"DSP"==u||gx.O.isTransaction()&&gx.dom.isButton(c)&&!gx.evt.isEnterEvtCtrl(c)&&!gx.evt.isCheckEvtCtrl(c)&&!g)return gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise()}catch(r){gx.dbg.logEx(r,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&c.gxdisabled&&null!=gx.csv.lastControl){cn=gx.fn.getControlIndex(c)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0,
"onfocus_impl"),m.resolve(!0).promise();gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0,"onfocus_impl");return m.resolve(!0).promise()}if(gx.csv.invalidForcedCtrl){var B=gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.Ctrl.id);gx.csv.invalidForcedCtrl=null;if(B)return gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise()}if(null!=gx.csv.invalidControl&&gx.csv.invalidControl!=c&&gx.O.focusControl>=gx.csv.invalidId&&gx.csv.invalidControl==c)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,
!1,gx.O,b).done(function(r){r&&(gx.csv.invalidControl=null,gx.evt.setReady(!0,"onfocus_impl"));m.resolve(!0)}),m.promise();g?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0==gx.csv.lastRow[f]||gx.csv.lastRow[f]==b||t||gx.O.fromValid!=gx.O.toValid||(gx.csv.lastId=gx.O.fromValid);var p=
gx.fn.controlIds();0<p.length&&gx.O.fromValid<p[0]&&(gx.O.fromValid=p[0]);gx.lang.emptyObject(gx.csv.lastRow[f])&&0!=f&&(gx.csv.rowChanged=!0,gx.csv.lastRow[f]=b);var v=gx.O,A=gx.csv.lastId,y=gx.fn.validStruct(A,v);if(y)var F=gx.csv.lastRow[y.grid];gx.csv.checkRowChange(A,t,v,F).done(function(r){var q=!1,x=!1,D=function(){null==gx.csv.invalidControl&&c===document.activeElement&&("SELECT"===c.nodeName||gx.dom.isTextControl(c)&&c.selectionStart===c.selectionEnd)&&gx.fn.setSelection(c);gx.csv.disableFocusCondition();
m.resolve(!0)};!gx.lang.emptyObject(F)&&!gx.lang.emptyObject(b)&&F.length>b.length&&(q=F.substring(F.length-b.length),q=parseInt(q)<parseInt(b));gx.csv.backwardGridValidation&&(!gx.lang.emptyObject(F)&&!gx.lang.emptyObject(b)&&F.length==b.length&&parseInt(F)>parseInt(b)&&(x=v.focusControl>gx.fn.firstGridControl(f)),!gx.lang.emptyObject(F)&&!gx.lang.emptyObject(b)&&F.length==b.length&&parseInt(F)<parseInt(b)&&(x=v.focusControl<A&&v.focusControl>gx.fn.firstGridControl(f)));r&&null==gx.csv.invalidControl&&
x?(v.fromValid=gx.fn.firstGridControl(f),gx.csv.validControls(v.fromValid,v.focusControl,!0,gx.O)):r&&!t||!(v.focusControl>=A||q)?(v.toValid=v.focusControl,D()):(gx.fn.lastMainLevelCtrlId(A,f)&&(r=gx.fn.getControlRefById(A))&&1===r.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&(v.fromValid=A+1),gx.csv.validateAll(v).done(D))});if(f&&b){var H=gx.O.getGridById(f,b);H&&H.allowSelection&&H.setSelection(parseInt(b,10)-1)}gx.evt.setReady(!0,"onfocus_impl");return m.promise()}catch(r){gx.dbg.logEx(r,"gxapi.js",
"onfocus")}gx.evt.setReady(!0,"onfocus_impl");return m.resolve(!1).promise()},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(c){gx.dbg.logEx(c,"gxapi.js","userOnload")}},onunload:function(c){gx.objectUnload(c);gx.spa.stop()},onclick:function(c){var d={event:c};gx.fx.obs.notify("gx.onclick",[d]);d.cancel||(gx.evt.setReady(!1,"onclick"),gx.isInputEnabled(c)||gx.evt.cancel(c,!0),gx.evt.mouse.update(c),setTimeout(function(){gx.fx.ctx.notify()},10),gx.evt.setReady(!0,
"onclick"))},ontouchstart:function(c){c=gx.evt.onmousedown.closure(this,[c]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(c,150):c()},onmousedown:function(c){var d=window.event||c,k=gx.evt.source(d);if(k&&8>=gx.util.browser.ieVersion()&&l(k).is("shape"))return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(k);gx.evt.mouse.update(c);var a=gx.fx.dnd;a.deleteClonControl();var b=a.getSource(d);gx.dom.isMaskElement(d.target)||null==b||(gx.evt.cancel(d,
!0),gx.setGxO(b.obj),gx.lang.doCallTimeout(function(){a.drag(b.obj,b.types,b.hdl)},a,[],0))},onmousemove:function(c){gx.evt.mouse.update(c);var d=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()&&gx.popup.ext.compatMode()){var k=gx.popup.ext;k.movepopup();if(null!=k.currIDb||null!=k.currRS)return!1}null!=d.obj&&(c=window.event||c,gx.evt.cancel(c,!0),null!=gx.fx.dnd.getTarget(c,d.obj.gxDragTypes)&&d.over(),d.moveControl(d.dragCtrl))},onmouseup:function(c){window.clearTimeout(gx.evt.touchTimer);
gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(c);var d=gx.fx.dnd;if(null!=d.dragCtrl){var k=window.event||c;k=d.getTarget(k,d.obj.gxDragTypes);null!=k?(d.deleteClonControl(),gx.setGxO(k.obj),d.drop(d.dropCtrl,k.obj,k.hdl)):d.restoreControl();k=window.event||c;gx.evt.cancel(k,!0)}d.out();d.dragCtrl=null;d.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(c){gx.evt.mouse.update(c);var d=window.event||c;!gx.util.browser.isOldIE()&&gx.fx.dom.delayedDispatch(c)||gx.fx.dom.raiseEvent("dblclick",
d)},onwindowblur:function(c){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(c,d,k){k=window.event||k;var a=gx.util.browser.isIE(),b=k.keyCode;if(a){if("keydown"==k.type&&229==b)return c.value.length<=d?c.ImeKey=!0:!1;if("keyup"==k.type&&8==b&&c.ImeKey&&c.value.length+1>=d)return c.value=c.value.substring(0,c.value.length-1),c.ImeKey=!1,!0}if("keyup"==k.type||a)return c.value.length+1<=d||8==b||9==b||46==b||35<=b&&40>=b},fireControlValueChange:function(c,d,k){var a=l.Deferred();if(!c||!d)return a.resolve();
a=c.getValidStructFld(d);if(a&&a.evt_cvc){var b=gx.evt.startValidation(a.gxgrid);gx.evt.stopPropagation(k);if(a.grid){gx.evt.setEventRow(c,d);var f=gx.fn.controlRowIndex(d)}gx.fn.disableKeys();return c[a.evt_cvc].call(c,f).always(function(){gx.evt.endValidation(b,gx.evt.types.VALUECHANGED);gx.fn.enableKeys()})}return l.Deferred().resolve()},fireControlValueChanging:function(c){var d=gx.fn.getControlContext(c)||gx.O,k=l.Deferred();if(!d||!c)return k.resolve();var a=d.getValidStructFld(c);if(a){var b=
a.gxgrid&&a.gxgrid.isFreestyle,f=a.evt_cvcing&&!a.gxsgprm;if(f)var g=gx.evt.startValidation(a.gxgrid);if(f||b)b=gx.O,gx.setGxO(d),"function"==typeof a.c2v&&a.c2v(),gx.fn.call_v2bc(a,d),gx.setGxO(b);if(f)return a.grid&&gx.evt.setEventRow(d,c),d[a.evt_cvcing].call(d).always(function(){gx.evt.endValidation(g,gx.evt.types.VALUECHANGING)})}return k.resolve()},oncontrolvaluechanging:function(c){var d=c.keyCode;8!=d&&32>d||33<=d&&46>d||112<=d&&123>=d&&121!=d||(c=gx.evt.source(c))&&gx.evt.fireControlValueChanging(c)},
oncontrolpasting:function(c){(c=gx.evt.source(c))&&gx.lang.doCallTimeout(gx.evt.fireControlValueChanging,gx.evt,[c],0)},onkeypress:function(c,d,k){if(c=c||window.event){var a=13===c.keyCode;27===c.keyCode&&gx.evt.shouldIgnoreEscKey()&&gx.evt.cancel(c,!0);var b=gx.fn,f=gx.util.browser;d={event:c,hasEnter:d,skipOnEnter:k,cancel:!1};if(27===c.keyCode&&gx.popup.ispopup())b.cancelWindow();else if(gx.fx.obs.notify("gx.keypress",[d]),!d.cancel){a&&!gx.isInputEnabled()&&this.cancel(c,!0);if(!gx.O||gx.O.isTransaction()&&
"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(c))return this.cancel(c,!0),!1;this.lastKey=c.keyCode;this.shiftPressed=c.shiftKey;var g=c.ctrlKey;d=gx.evt.source(c)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.evt.validKeypressForCtrl(d,c)||this.cancel(c,!0);9!==c.keyCode&&gx.csv.invalidateCtrl(d,c);if(!(this.isEnterEvtCtrl(d)&&this.isTriggerKey(c)&&this.cancelAndRefresh(c))&&(this.checkFuncKey(c,d),(32==c.charCode||32==c.keyCode||a&&!k)&&gx.dom.hasClass(d,"gx_newrow")&&l(d).find("span").trigger("click"),
a&&k||!gx.grid.handleKeyPressEvt(c)))switch(c.keyCode){case 13:a=this.triggersEvt(d),k?b.enterHasFocus()||this.shiftPressed&&"TEXTAREA"===d.nodeName||(g&&"TEXTAREA"===d.nodeName?(gx.dom.replaceAtCaretPosition(d,"\n"),this.cancel(c,!0)):(f.isIE()&&"file"!=d.type?(gx.evt.isEnterEvtCtrl(d)&&gx.O.executeEnterEvent(c,d),this.lastKey=9,c.keyCode=this.lastKey,this.cancel(c,!0),b.skipFocus(k,d)):(d.value&&f.isIE()&&"SELECT"!=d.tagName&&(f=d.value,d.value="",d.value=f),b.skipFocus(k),this.cancel(c,!0)),this.enter=
!1)):a||gx.O.executeEnterEvent(c,d)}}}},moveFocus:function(c){c=c.getAttribute("gxfocusable");if(null==c||"1"!=c){c=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl);if(-1==c)return!0;var d=gx.fn.searchFocus(this.shiftPressed?c-1:c+1,!this.shiftPressed);c=d.value;gx.fn.setFocus(d);gx.lang.doCallTimeout(function(k){event.isComposing&&(d.value=k)},this,[c],50)}},onkeyup:function(c){var d=window.event?window.event:c;c=gx.evt.source(d);if(""==c.type&&9==d.keyCode){if(!this.skipPromptCtrl)return;
if(gx.dom.isTextWithLink(c)||gx.dom.isImageWithLink(c)){if(d=c.id||("A"==c.tagName&&c.parentNode?c.parentNode.id:""))d=gx.O.getValidStructId(d),gx.evt.onfocus(c,d,"",!1,"",0);return}gx.evt.moveFocus(c)}gx.grid.handleKeyUpEvt(d)},oninput:function(c){var d=window.event?window.event:c;c=gx.evt.source(d);var k=c.getAttribute("maxlength")||(c.getAttribute("max")?c.getAttribute("max").length:0),a="undefined"==typeof c.value?"":c.value,b=!1;gx.evt.isComposing&&!d.isComposing&&(gx.fx.obs.notify("gx.endcomposing"),
b=!0);gx.evt.isComposing=d.isComposing;d=function(g){return gx.evt.isComposing?g.match(/[\u3040-\u309F\u30A0-\u30FF\u4E00-\u9FFF\u3000-\u303F\uFF10-\uFF190-9]*/)[0].length:g.length};if(this.autoSkip&&""!=c.type&&!this.isControlKey(this.lastKey)&&d(a)>=k&&0<k&&!b){var f=function(g){gx.evt.cancel(g,!0);document.removeEventListener("textInput",f)};document.addEventListener("textInput",f);gx.evt.moveFocus(c)}},shouldIgnoreEscKey:function(){var c=gx.popup.getPopup();return gx.evt.processing||c&&"opening"==
c.state},validKeypressForCtrl:function(c,d){if(!c||"text"!==c.type&&"number"!==c.type)return!0;var k=gx.O.getValidStructFld(c);if(k){var a=gx.rtPicture(k,c),b=gx.numericLenDec(a),f=b.Decimals;b=b.Integers;var g=k.type;k=c.value;if("int"==g||"decimal"==g){if("e"===d.key)return!1;a:{try{if(null!==c.selectionStart&&void 0!==c.selectionStart){var m=c.selectionEnd-c.selectionStart;break a}else if(window.getSelection){m=window.getSelection().toString().length;break a}}catch(n){}m=void 0}if(void 0===m)return!0;
if(gx.util.browser.isFirefox()&&"number"==c.type&&0===f)!c.gxoninput&&c.max&&c.min&&(c.gxoninput=!0,gx.evt.attach(c,"input",function(n){if(n.max&&n.min){var t=Number(n.value);if(t>n.max||t<n.min)n.value=n.value.substr(0,n.max.length)}}.closure(this,[c])));else{if(1<d.key.length)return!0;if(/[^\+\-\.,]/.test(d.key)&&/\D/.test(d.key)&&!d.ctrlKey&&isNaN(Number(d.key)))return!1;c=document.getSelection().toString();if(d.key===gx.thousandSeparator)return!0;if(d.key===gx.decimalPoint)return 0<c.length&&
gx.text.contains(c,d.key)?!0:!gx.text.contains(k,d.key);if(/[\+\-]/.test(d.key))return!gx.text.contains(k,d.key)||gx.text.contains(c,d.key);d=k.split("").filter(function(n){return"0"<=n&&"9">=n}).length;k=gx.num.normalize_decimal_sep(a,gx.thousandSeparator,gx.decimalPoint,k);a=b+(-1==k.indexOf(gx.decimalPoint)?0:f);return d-m<a}}}return!0},setEventRow:function(c,d){var k=gx.fn.rowGridId(d),a=k&&(gx.fn.controlRowId(d)||gx.fn.currentGridRowImpl(k)||"0001");k&&a&&(void 0!=d.gxGridName&&gx.fn.setHidden(c.CmpContext+
d.gxGridName.toUpperCase()+"_ROW",a),gx.evt.setCurrentGridRows(k,a));gx.csv.lastEvtRow=a},ctrlOnchange:function(c,d,k,a,b){gx.csv.pkDirty=k;"UPD"==c.value?"1"==d.value?(k?null!=a&&(a.value=gx.getMessage("GXM_captionadd")):null!=a&&(a.value=gx.getMessage("GXM_captionupdate")),d.value="0"):k&&null!=a&&(a.value=gx.getMessage("GXM_captionadd")):"INS"==c.value&&"1"==d.value&&(null!=a&&(a.value=gx.getMessage("GXM_captionadd")),d.value="0")},onchange:function(){var c=function(){return gx.evt.onchange_impl.apply(gx.evt,
arguments)};gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,c.closure(this,arguments),{single:!0,async:!0}):c.apply(gx.evt,arguments)},onchange_impl:function(c,d,k){if(gx.evt.fixWebKitOnFocus()&&"radio"===c.type)c.onfocus();var a=gx.fn.getControlContext(c)||gx.O,b=a.getValidStructFld(c),f=b&&b.hasRVFmt,g=l.Deferred();if(c.GXFormatError&&!f)g.resolve();else{gx.evt.setReady(!1,"onchange_impl");gx.evt.lastControl=c;gx.fn.clearControlRoundedValue(c);f=gx.fn.getControlValue("radio"==
c.type?c.name:gx.dom.id(c));var m=!1,n=gx.O.focusControl,t=function(){delete gx.fx.delayedValidation;gx.evt.setReady(!0,"onchange_impl");var p=gx.util.browser.isWebkit()&&("radio"==c.type||"checkbox"==c.type||"file"==c.type),v="radio"==c.type||"checkbox"==c.type;m&&b&&(gx.fn.lastMainLevelCtrlId(n,b.grid)||b.gxsgprm)&&(v=p=!0);k&&(v=!1);if(p&&c.onblur)c.onblur();p=function(){gx.evt.execUsrOnchange(c);gx.fx.obs.notify("gx.validation");g.resolve()};!v||"undefined"!=typeof c.GXFormatError&&0!=c.GXFormatError?
p():gx.csv.validControls(n,n+1,!0,a).then(p)};if(gx.csv.controlValueHasChanged(c,f,b)){m=!0;gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0");gx.csv.invalidateGXCtrl(c);var w=!0;if(b){var u=b.grid?gx.fn.controlRowIndex(c):void 0;"function"==typeof b.c2v&&b.c2v(u);gx.fn.call_v2bc(b,a,u)}k||gx.fn.setControlOldValue(c,f);var B=function(){var p=l.Deferred();if("select-one"==c.type||"checkbox"==c.type||"radio"==c.type){w=!1;gx.evt.setReady(!1,"validationCallback");var v=
b?gx.fn.currentGridRowImpl(b.grid):null;gx.csv.validate(c,b.id||n,!0,a,v).done(function(A){A&&gx.csv.invalidControl==c&&(gx.csv.invalidControl=null);gx.evt.execOnchange(c,A);gx.evt.setReady(!0,"validationCallback");p.resolve()}).fail(function(){gx.evt.setReady(!0,"validationCallback");p.resolve()})}w&&(gx.evt.execOnchange(c,!1),p.resolve());return p.promise()};f=function(){B.call(this).then(t.closure(this))}.closure(this);gx.evt.fireControlValueChange(a,c,d).always(f)}else t.call(this);return g.promise()}},
execOnchange:function(c,d,k){var a="";if(c.attributes["data-gxoch1"])try{a+=c.attributes["data-gxoch1"].value+";"}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(c)&&c.attributes["data-gxoch2"])try{a+=c.attributes["data-gxoch2"].value+";"}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}try{""!=a&&eval(a)}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}d||gx.fn.setControlGxValid(c,"0");k||(c.setAttribute("gxctrlchanged","1"),gx.fn.setControlValue("IsModified","1"));!0!==
k&&gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(c){var d="";if(!gx.dom.hasAttribute(c,"data-gxoch0"))return!0;try{d=c.attributes["data-gxoch0"].value}catch(k){return!0}return(new Function(d)).call(c)},jsEvent:function(c){if(!gx.isInputEnabled())return!1;c=c.getAttribute?c.getAttribute("data-jsevent")||c.getAttribute("jsevent"):c.jsevent;return gx.lang.emptyObject(c)?!0:eval(c)},isEnterEvtCtrl:function(c){if(gx.O.EnterCtrl){var d=gx.dom.id(c);d||"A"!=c.tagName||(d=c.parentNode.id);
d&&0==d.indexOf("span_")&&(d=d.substring(5));if(!d)return!1;var k=gx.O.EnterCtrl;c=gx.fn.rowGridId(c);for(var a=0,b=k.length;a<b;a++){var f=gx.csv.ctxControlId(k[a]);if(c&&-1!=d.search(new RegExp(".*"+f+"_[0-9]{4}$"))||f==d)return!0}}return!1},isCheckEvtCtrl:function(c){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){c=gx.dom.id(c);for(var d in gx.O.CheckCtrl)if(gx.O.CheckCtrl[d]==c||gx.O.CmpContext+gx.O.CheckCtrl[d]==c)return!0}return!1},isTriggerKey:function(c){for(var d=this.triggerKeys.length,k=0;k<
d;k++)if(c.keyCode==this.triggerKeys[k]||c.charCode==this.triggerKeys[k])return!0;return!1},isControlKey:function(c){for(var d=this.controlKeys.length,k=0;k<d;k++)if(c==this.controlKeys[k])return!0;return!1},invalidDSPKey:function(c){var d=c.keyCode-111;c.shiftKey&&(d+=12);return this.keyListeners[d]&&"ENTER"==this.keyListeners[d][gx.O.CmpContext].evt||13==c.keyCode?!0:!1},addKeyListener:function(c,d,k){1==d&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[d]&&(this.keyListeners[d]=[]);
this.keyListeners[d][c.CmpContext]={evt:k,IsMasterPage:c.IsMasterPage}},setEvtName:function(c,d){gx.fn.setHidden("_EventName",c)},cancelAndRefresh:function(c){var d=gx.O;if(d&&d.conditionsChanged){this.cancel(c,!0);d.autoRefresh||this.resetGridsPagingVarsIfConditionsChanged(d.Grids||[]);if(d.autoRefresh||d.hasEnterEvent||d.anyGridBaseTable)d.executeServerEvent("ERFR",!1);else return!1;return!0}return!1},resetGridsPagingVarsIfConditionsChanged:function(c){var d=!1;l.each(c,function(k,a){a.conditionsChanged&&
a.conditionsChanged()&&(a.setPagingVars(0,0),d=!0)});return d},setGridEvt:function(c,d,k){k=k||gx.O;if(gx.isInputEnabled()&&!gx.lang.emptyObject(c)){if(gx.lang.emptyObject(d)){var a=gx.fn.getGridObj(c);a&&(d=gx.fn.getHidden(k.CmpContext+a.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",c);gx.fn.setHidden("_EventRowId",d);d&&gx.fn.setCurrentGridRow(c,d)}},checkFuncKey:function(c,d){var k=gx.popup.getPopup(),a=k?k.frameWindow.gx.O:gx.O;k=k?k.frameWindow.gx.evt.keyListeners:this.keyListeners;
var b=this.lastKey-111;c.shiftKey&&(b+=12);if(0<b&&24>=b&&void 0!=k[b]){var f=k[b][a.CmpContext];a.IsMasterPage&&!f.IsMasterPage&&(a=gx.pO);if("undefined"!=typeof f)this.execFnKeyEvt(c,a,f.evt,d);else for(var g in k[b])if(f=k[b][g],"undefined"!=typeof f&&(a=gx.getObj(g,!1),null!=a)){this.execFnKeyEvt(c,a,f.evt,d);break}}},execFnKeyEvt:function(c,d,k,a){if(!gx.evt.processing&&!gx.spa.isNavigating())if(this.cancel(c,!0),"EPROMPT"==k){if((c=d.getValidStructFld(a))&&c.attachedCtrls){k=c.attachedCtrls;
for(var b=0,f=k.length;b<f;b++)if((a=k[b])&&a.info&&a.info.isPrompt){var g=k[b].info.id;"function"==typeof d.promptKeyHandlers[g]&&(a=0<c.grid?"_"+gx.fn.currentGridRowImpl(c.grid):"",a=gx.dom.el(d.CmpContext+g+a),d.promptKeyHandlers[g].call(d,a))}}}else d.isTransaction()&&"ESELECT"==k?(d=gx.dom.byId(d.CmpContext+"BTN_SELECT"))&&"function"==typeof d.click&&d.click():d.isTransaction()&&"EGET"==k?d.executeEvent("ESELECT",!1):d.executeEvent(k,!1)},keyModifiesValue:function(c){c=window.event?c.keyCode:
c.which;return 32<=c&&127>=c||229==c?!0:!1},triggersEvt:function(c){if(!gx.lang.emptyObject(c)){if(c==gx.evt.dummyCtrl)return!0;var d=gx.config.evt.triggersEvtNodes||{};if("A"===c.nodeName||"TEXTAREA"===c.nodeName||d[c.nodeName])return!0;if("INPUT"===c.nodeName){if("button"===c.type||"image"===c.type)return!0}else if("IMG"===c.tagName&&gx.dom.hasAttribute(c,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR))return!0}return!1},setProcessing:function(c){var d=c.status;c=c.cond;"undefined"!=typeof c&&!c||gx.evt.redirecting||
(gx.evt.processing=d,gx.dbg.enabled&&(console.groupCollapsed("setProcessing ${ctx} ${gx.evt.processing}"),console.trace(),console.groupEnd()),gx.evt.setReady(!gx.evt.processing,"setProcessing"),gx.evt.processing||gx.fx.obs.notify("gx.endprocessing"))},doAfterProcessing:function(c,d){gx.evt.processing?gx.fx.obs.addObserver("gx.endprocessing",d,c,{single:!0}):c.call(d)},doAfterComposing:function(c,d){gx.evt.isComposing?gx.fx.obs.addObserver("gx.endcomposing",d,c,{single:!0}):c.call(d)},doAfterValidating:function(c,
d){gx.csv.isvalidating()?gx.fx.obs.addObserver("gx.onaftervalidatecompleted",d,c,{single:!0}):c.call(d)},startValidation:function(c,d){if(c||d)gx.csv.validatingGrid=c,gx.csv.validating+=1;return{gxgrid:c,force:d}},endValidation:function(c,d){if(c.gxgrid||c.force)--gx.csv.validating,0===gx.csv.validating&&(gx.csv.validatingGrid=null,gx.fx.obs.notify("gx.onaftervalidatecompleted")),0>gx.csv.validating&&gx.dbg.logMsg("WARNING! endValidation unexpected condition (gx.csv.validating < 0)"),gx.fx.obs.notify("gx.onaftervalidate",
[d])},userReadyThresholdWait:function(){gx.evt.userReadyTStamp||(gx.evt.userReadyTStamp=Date.now());return Date.now()>gx.evt.userReadyTStamp+gx.evt.userReadyThreshold},setReady:function(c,d){gx.evt.userReadyCnt+=c?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;0==gx.evt.userReadyCnt?(gx.evt._userReady=!0,gx.evt.userReadyTStamp=Date.now()):gx.evt._userReady=!1;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0);gx.dbg.enabled&&(console.groupCollapsed("setReady ${Context} ${gx.evt.userReadyCnt}"),
console.trace(),console.groupEnd())},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,setCurrentGridRows:function(c,d){for(;0<c&&d&&4<=d.length;){gx.fn.setCurrentGridRow(c,d.substr(0,4));var k=d.substr(4);if(c=gx.O.getGridById(c,k))c=c.parentGrid;c=c?c.gridId:0;d=d.slice(4)}},canExecuteEvent:function(c,d){return!(!d&&(gx.spa.isNavigating()||gx.evt.redirecting||!gx.csv.isvalidating()&&(gx.lang.emptyObject(c)||gx.evt.processing)))},execEvt:function(c,d,k,a,b,f,g,m,n,t,w,u){gx.dbg.logPerf("execEvt");gx.text.contains(k,
"EENTER")&&gx.ajax.saveFormForAutoComplete();if(this.canExecuteEvent(k,t)){var B=gx.getObj(c,d),p=b,v=(c=this.EVT_ROW_ID_REGEXP.exec(k))&&1<c.length?c[1]:null;c&&2<c.length&&gx.evt.setCurrentGridRows(p,v);v||(v=gx.fn.currentGridRowImpl(p));c=function(){gx.fx.obs.notify("gx.validation",null,function(){if(!t&&B&&B.inputHasFormatErrors(k,b,v))w&&w.call();else{g&&(gx.evt.srvCommand=!0,a&&(p=gx.fn.rowGridId(a),v=gx.fn.controlRowId(a),gx.lang.emptyObject(p)||gx.lang.emptyObject(v)||(gx.csv.lastGrid=p,gx.fn.setCurrentGridRow(p,
v))));if(0<gx.csv.lastId&&!gx.csv.validatingAll){var A=B.getValidStruct(gx.csv.lastId);if((gx.evt.isEnterEvtCtrl(a)&&0<a.id?B.getValidStructId(a.id):B.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(a)||A&&A.isuc)||u)gx.csv.validatingAll=!0,B.fromValid=gx.csv.lastId,B.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=!1}this.setEvtName(k,a);this.lastEvent=k;if(!g&&(gx.grid.drawAtServer||a&&"INPUT"==a.nodeName&&"submit"==a.type))this.execEvtSubmit(k,a);else{gx.evt.setProcessing({status:!0,
ctx:"notifyValidation"});var y=function(){gx.evt.setProcessing({status:!1,ctx:"notifyValidation"})};A=function(){gx.ajax.doPost((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),f,!0,b,v,n,B,k);y()};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(k,B,p,v,!0,void 0,m).done(function(F){F||w&&w.call();n&&n(F);y()}).fail(A):gx.evt.execNonFullAjaxEvent(A)}}}.closure(this))};gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(a)&&a!=gx.csv.lastControl&&
void 0!=a.onfocus?(gx.fx.obs.addObserver("gx.onafterfocus",this,c,{single:!0}),a.onfocus()):c.call(this)}else w&&w.call()},execEvtSubmit:function(c,d){if(gx.isInputEnabled()){gx.evt.setProcessing({status:!0,ctx:"execEvtSubmit"});gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[c,d]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);c=gx.dom.form();var k=gx.popup.getPopup();if(null!=k&&(d=c.action,k=k.window.gx.popup.lvl,-1!=k)){var a=gx.http.urlParameterPrefix(d);a+=
encodeURIComponent("gxPopupLevel="+k+";");c.action=d+a}c.submit()}},execCliEvt:function(c,d,k,a,b,f){var g=l.Deferred();if(!this.canExecuteEvent(!0,!1))return g.reject();gx.fx.obs.notify("gx.validation");f=void 0!=f?f:[];var m=gx.getObj(c,d);if(null!=m){gx.setGxO(c,d);if("string"==typeof a&&""!=a&&4<arguments.length){var n=m.getGrid(a);n.instanciateRow(b);n=n.gridId}if(m.inputHasFormatErrors(m.getServerEventName(k),n,b))return g.reject();var t=m.isServerEvent(k);gx.evt.setProcessing({status:!0,cond:!t,
ctx:"execCliEvt"});m.execC2VFunctions();var w=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing({status:!1,cond:!t,ctx:"execCliEvt"})});m.conditionsChanged?m.executeServerEvent("ERFR",!0):gx.fx.obs.notify("gx.onafterevent",[]);g.resolve()},u=function(){m[k](f);w();gx.fx.obs.notify("gx.afterNonFullajax")};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(m.getServerEventName(k),m,n,b,!1,f).done(w).fail(u):gx.evt.execNonFullAjaxEvent(u);return g.promise()}return g.reject()},execNonFullAjaxEvent:function(c){gx.evt.NonFullAjaxserialRunner=
gx.evt.NonFullAjaxserialRunner||gx.evt.serialRunner();gx.fx.obs.addObserver("gx.afterNonFullajax",gx.evt,function(){gx.evt.NonFullAjaxserialRunner.signalEndTask()},{single:!0});gx.evt.NonFullAjaxserialRunner.addTask(c)},fixWebKitOnFocus:function(){var c=gx.util.browser;return c.isWebkit()&&!c.isChrome()||c.isChrome()&&30>c.chromeVersion()?!0:!1},dispatcherTimeout:30,dispatcher:function(){var c=function(d,k){k=[];var a,b={};for(a=0;a<d.length;a++){var f=d[a];b[f.eventName]||(b[f.eventName]=[]);b[f.eventName].push(f.deferred);
0!==k.length&&f.eventName===k[k.length-1].eventName||k.push(f)}for(a=0;a<k.length;a++){f=k[a];var g=b[f.eventName];for(d=0;d<g.length;d++)f.deferred!==g[d]&&f.deferred.done(function(){this.resolve.apply(this,arguments)}.closure(g[d]))}return k};return{dispatchedEvents:{},serialRunner:gx.evt.serialRunner(),getContextKey:function(d,k,a,b){return b+(d.CmpContext+d.ServerClass)+(k||"")+(a||"")},getEventParmsMetadata:function(d,k,a){return k.EvtParms[d]["input"==a?0:1]},eventDepends:function(d,k,a){k=
this.getEventParmsMetadata(k,a,"output");d=this.getEventParmsMetadata(d,a,"input");for(var b,f=0,g=k.length;f<g;f++){a=gx.ajax.resolveParmKey(k[f]);for(var m=0,n=d.length;m<n;m++)if(b=gx.ajax.resolveParmKey(d[m]),a==b)return!0}return!1},initialize:function(){this.t&&clearTimeout(this.t);this.serialRunner=gx.evt.serialRunner();this.dispatchedEvents={}},beforeDispatch:function(d){var k=gx.ajax.getSecurityToken(d);k&&(d.InternalParms[k.id]=k.value)},types:{event:"event",validation:"validation"},dispatch:function(d,
k,a,b,f,g,m,n){n=n||gx.evt.dispatcher.types.event;f=void 0===f||f;var t=l.Deferred();if("object"===typeof d){var w=d.fn;d=d.eventName}k.cleanEventName(d);k.getClientEventName(d);if(n===gx.evt.dispatcher.types.validation){var u=d.toUpperCase();var B=d}else u=k.cleanEventName(d),B=k.getClientEventName(d);this.beforeDispatch(k);if(!k.EvtParms[u])return t.reject(),t.promise();d=this.getContextKey(k,a,b,n);var p=this.dispatchedEvents[d];f={eventName:u,clientSideEventName:B,clientSideFunction:f?null:(w||
k[B]).closure(k,g||[]),serverSide:f,deferred:t,arguments:g,disableForm:m};p?p.events.push(f):(p={gxO:k,grid:a,row:b,type:n,events:[f]},this.dispatchedEvents[d]=p,this.t=setTimeout(this.serialRunner.addTask.closure(this.serialRunner,[this.dispatchTimeoutCallback.closure(this,[d])]),gx.evt.dispatcherTimeout));return t.promise()},dispatchTimeoutCallback:function(d){var k=this.dispatchedEvents[d],a=k.type,b=k.gxO,f=k.grid,g=k.row,m=[],n=[],t=[],w={};delete this.dispatchedEvents[d];if(a!==gx.evt.dispatcher.types.validation){d=
0;for(var u=k.events.length;d<u;d++){var B=k.events[d];if(B.serverSide)n.push(B);else{var p=!0;for(var v=0;v<d;v++)if(this.eventDepends(B.eventName,k.events[v].eventName,b)){p=!1;break}p?m.push(B):n.push(B)}}}else n=k.events;k=c(m,a).concat(c(n,a));m=!1;d=0;for(u=k.length;d<u;d++){n=k[d].eventName;w[n]||(w[n]=[]);w[n].push(k[d].deferred);if(m&&k[d].serverSide)A.addMethod(n);else{var A=this.createMessage(a,n,b,f,g,k[d].serverSide,k[d].disableForm);k[d].serverSide||(A.callback=k[d].clientSideFunction);
t.push(A)}m=k[d].serverSide}var y=function(q,x,D){for(var C=0,I=q.methods.length;C<I;C++)for(var G=w[q.methods[C]],K=0;K<G.length;K++){var N=G[K];N&&(x?N.resolve(D):N.reject(D))}},F=0,H=this.serialRunner,r=function(){if(F<t.length){var q=t[F++],x=F==t.length;q.call().done(function(D){y(q,!0,D);r();x&&H.signalEndTask()}).fail(function(D){y(q,!1,D);for(var C=F;C<t.length;C++)y(t[C],!1,D);H.signalEndTask()})}};r()},createMessage:function(d,k,a,b,f,g,m){return d===gx.evt.dispatcher.types.validation?new gx.ajax.validationMessage(k,
a,b,f,g,m):new gx.ajax.message(k,a,b,f,g,m)}}}(),mouse:{x:-1,y:-1,update:function(c){try{gx.lang.emptyObject(c.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=c.pageX,this.y=c.pageY):0<c.touches.length&&(this.x=c.touches[0].pageX,this.y=c.touches[0].pageY)}catch(d){gx.dbg.logEx(d,"gxapi.js","mouse update")}}},_deinit:function(){this.lastEvent=this.lastControl=null;this.dummyCtrl={};this.keyListeners=
{};this.hooks=[]}}}(gx.$);
gx.csv_i=function(l){var c=function(d,k,a,b){b=[];for(var f=0;f<d.length;f++)b.push(k.validControl.apply(k,d[f]));l.when.apply(l,b).done(a)};return{GX_OLD_VALUE_ATTRIBUTE:"data-gxoldvalue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:0,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,
validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],resetRow:function(){gx.csv.lastEvtRow=null;gx.csv.validatingGrid=null;gx.csv.instanciatedRowGrid=null},isvalidating:function(){return 0<gx.csv.validating},validateAll:function(d){var k=l.Deferred();d=d||gx.O;this.validControls(d.fromValid,d.toValid,!1,d).done(function(a,b){try{null!=this.invalidControl&&gx.csv.stopOnError||
(d.fromValid=b||d.toValid)}catch(f){gx.dbg.logEx(f,"gxapi.js","validateAll")}k.resolve()}.closure(this));return k.promise()},validControls:function(d,k,a,b,f){var g=l.Deferred(),m=[],n=0,t=0,w=0,u=gx.csv.fullGridValidation&&1<=k-d&&gx.O.isTransaction();b=b||gx.O;b.startFeedback();var B=function(O,W){gx.csv.stopOnError&&(-1!=W?(O=gx.fn.validStruct(W,b),O=gx.fn.getControlGridRef(O.fld,O.grid),gx.csv.disableFocus=document.activeElement!==O,gx.fn.isAccepted(O,b)?gx.fn.setFocus(O):gx.fn.setFocus(gx.evt.lastControl)):
gx.dom.isButton(gx.csv.lastControl)||null==gx.csv.validActivatedControl||gx.fn.setFocus(gx.csv.validActivatedControl))};try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=0;var p=null;if(k>d){u&&(p=gx.fn.validStruct(d),void 0!=p&&void 0!=p.lvl&&(n=p.lvl),p=gx.fn.validStruct(k),void 0!=p&&void 0!=p.lvl&&(t=p.lvl));m=[];for(var v=d;v<k;v++){p=gx.fn.validStruct(v);var A=null;if(p){var y=gx.fn.currentGridRowImpl(p.grid);var F=!!p.hasRVFmt;A=1==p.isuc?p.uc.getRealControl():
gx.fn.getControlGridRef(p.fld,p.grid)}else F=!1;if(A&&A.GXFormatError&&!0===A.GXFormatError&&!F){var H=v;break}m.push([v,a,b,y,f]);if(u&&v>d&&v<k&&void 0!=p&&void 0!=p.lvl&&(w=p.lvl,w!=n&&w!=t&&p&&p.grid)){var r=gx.fn.getGridObj(p.grid),q=r.grid.rows.length,x=gx.fn.currentGridRowImpl(p.grid),D=gx.fn.lastGridControl(p.grid);if(v==D){var C=gx.fn.firstGridControl(p.grid);for(A=0;A<q;A++){var I=r.grid.rows[A],G=I.gxDeleted(),K=I.gxExists(),N=I.gxIsMod();if(!G&&(K||N)&&I.gxId!=x)for(var P=C;P<=D;P++)m.push([P,
a,b,x,I.gxId])}}}}if(0<m.length)return gx.evt.setProcessing({status:!0,ctx:"validControls"}),c(m,this,function(){for(var O=!0,W=-1,V=0,Y=arguments.length;V<Y;V++){var ba=arguments[V].ret;if(O&&!ba){W=arguments[V].ctrl;O=!1;break}}B(O,W);gx.evt.setProcessing({status:!1,ctx:"validControls"});b.endFeedback();g.resolve(O,H)}),g.promise()}B(!0,-1);b.endFeedback();g.resolve(!0,H)}catch(O){gx.dbg.logEx(O,"gxapi.js","validControls")}return g.promise()},validControl:function(d,k,a,b,f){var g=l.Deferred();
a=a||gx.O;var m=gx.fn.validStruct(d,a),n=!0;if(void 0!=m){if(0!=m.grid){var t=b?b:gx.fn.currentGridRowImpl(m.grid);gx.lang.emptyObject(t)||gx.fn.setCurrentGridRow(m.grid,t)}1==m.isuc?(t=0!=m.grid?b?b:gx.fn.currentGridRowImpl(m.grid):null,m.getUCInstance(t),m.uc.execC2VFunctions()):"function"==typeof m.c2v&&m.c2v();gx.fn.call_v2bc(m,a);try{if(0==m.lvl||0!=m.grid&&gx.fn.gridRowIsMod(m.lvl,gx.fn.currentGridRow(m.grid))||!a.isTransaction()){var w=null;if(w=1==m.isuc?m.uc.getRealControl():gx.fn.getControlGridRef(m.fld,
m.grid))return this.validate(w,d,k,a,b,f).done(function(u){try{var B=!1,p=!0,v=-1;0!=m.grid&&(B=gx.fn.rowIsRemoved(m.grid,gx.fn.currentGridRow(m.grid)));u||B||(gx.csv.invalidControl=w,gx.csv.invalidId=d,p=!1,v=d);gx.csv.lastId=d;0==gx.fn.isAccepted(w)&&(gx.csv.ExecutingOnBlur||gx.evt.executeOnblur(d,w),w.getAttribute("data-gxhiddenonchange")!=w.value&&(w.setAttribute("data-gxhiddenonchange",w.value),gx.evt.execOnchange(w,!1,!0)))}catch(A){gx.dbg.logEx(A,"gxapi.js","validControl - callback")}g.resolve({ret:p,
ctrl:v})}),n=!1,g.promise()}}catch(u){gx.dbg.logEx(u,"gxapi.js","validControl")}}n&&g.resolve({ret:!0,ctrl:-1});return g.promise()},validate:function(d,k,a,b,f,g){var m=l.Deferred();b=b||gx.O;var n=!0;gx.csv.anyError=!1;var t=gx.fn.validStruct(k,b);if(void 0==t)return m.resolve(!0),m.promise();gx.csv.refreshVars(t,b);if(null==t.fnc&&null==t.isvalid){if("SELECT"!=d.tagName&&"checkbox"!=d.type&&!gx.evt.eachKeyAutorefreshType(t.type)&&!gx.lang.emptyObject(t.rgrid)){n=t.rgrid.length;for(var w=0;w<n;w++)t.rgrid[w].filterVarChanged()}m.resolve(!0);
return m.promise()}try{if(-1!=k&&(a||"1"!=d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE))){gx.csv.currentId=k;var u=gx.evt.startValidation(t.gxgrid,!0);gx.csv.refreshVars(t);a=function(B){1==b.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=d),gx.csv.anyError=!0,b.AnyError=0);gx.csv.anyError&&(B=!gx.csv.anyError);if(!B)return gx.evt.endValidation(u),m.resolve(!1),m.promise();gx.csv.refreshControls(t,b,f);gx.csv.invalidateDeps(k,b);if(!gx.lang.emptyObject(t.rgrid)&&!gx.lang.emptyObject(t.hc)){B=
t.rgrid.length;for(var p=0;p<B;p++)t.rgrid[p].filterVarChanged()}var v=gx.fn.isAccepted(d,!1,b),A=function(){m.resolve(!0);try{if(!g){var H=gx.dom.byId(d.id);v?gx.fn.setControlGxValid(H,"1"):gx.fn.setControlGxValid(H,"0")}gx.evt.endValidation(u)}catch(r){gx.dbg.logEx(r,"gxapi.js","validate")}};if(null!=t.isvalid&&v&&"1"!=d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&!g)if(p=t.gxgrid?t.gxgrid:null,B=t.isvalid,gx.pO.supportAjaxEvents){p=t.gxgrid?t.gxgrid.gridId:!1;var y=b.isServerEvent(B);B?gx.evt.dispatcher.dispatch(b.getServerEventName(B),
b,p,f,y).done(A).fail(A):b[B](f).then(A)}else{var F=gx.csv.instanciatedRowGrid;gx.csv.instanciatedRowGrid=p;b[B](f).then(function(){gx.csv.instanciatedRowGrid=F;A()})}else A()};n=!1;t.isuc?a.call(this,t.fnc.call(t.uc)):null!=t.fnc?(w=t.fnc.call(b))&&w.done?w.done(a.closure(this)):a.call(this,w):a.call(this,!0)}}catch(B){gx.dbg.logEx(B,"gxapi.js","validate")}n&&m.resolve(!0);return m.promise()},invalidateForm:function(){if(1!=gx.O.AnyError)for(var d=gx.fn.controlIds(),k=d.length,a=0;a<k;a++){var b=
gx.fn.validStruct(d[a]);b&&b.fld&&!b.isuc&&(b=gx.fn.getControlGridRef(b.fld,b.grid),this.invalidateGXCtrl(b,!1))}},invalidateGXCtrl:function(d,k){"undefined"===typeof k&&(k=!0);d&&(1!=d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)||k&&!gx.csv.controlValueHasChanged(d)||gx.fn.setControlGxValid(d,"0"))},invalidateCtrl:function(d,k){try{this.invalidateGXCtrl(d);var a=gx.fn.validStruct(gx.O.focusControl);if(a&&0!=a.grid&&(!0===k||gx.evt.keyModifiesValue(k))){var b=gx.fn.controlRowId(d)||gx.fn.currentGridRowImpl(a.grid)||
"0001";a.gxgrid.setRowModified(b)}}catch(f){gx.dbg.logEx(f,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(d,k){for(var a=gx.fn.controlIds(k),b=a.length,f=0;f<b;f++){var g=a[f];if(g>d){g=gx.fn.validStruct(g,k);for(var m=g.ip?g.ip.length:0,n=0;n<m;n++)if(g.ip[n]==d)if(0==g.grid){var t=gx.fn.getControlGridRef(g.fld,g.grid);t&&gx.fn.setControlGxValid(t,"0")}else{var w=gx.fn.getGridObj(g.grid);if(w)for(var u=w.grid.rows.length,B=0;B<u;B++){t=w.grid.rows[B];var p=t.gxDeleted(),v=t.gxExists();!p&&
v&&(w.setRowModified(t.gxId),(t=gx.fn.getControlRef(g.fld+"_"+t.gxId))&&gx.fn.setControlGxValid(t,"0"))}}}}},controlValueHasChanged:function(d,k,a){if(!d)return!1;"undefined"===typeof k&&(k=d.value);var b=d.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE),f=gx.applyPicture(a,b,d);return null===b||f!==gx.applyPicture(a,k,d)||gx.evt.fixWebKitOnFocus()&&"radio"===d.type},setFormatError:function(d,k){d=gx.dom.el(d);if(d.id){var a=void 0!==this.gxFormatErrors[d.id];k||"undefined"==typeof k?(a||(this.gxFormatErrors[d.id]=
this.gxFormatErrors.push(d.id)-1),d.GXFormatError=!0):(a&&this.gxFormatErrors.splice(this.gxFormatErrors[d.id],1),delete this.gxFormatErrors[d.id],d.GXFormatError=!1)}},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var d=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var k=gx.fn.validStruct(gx.O.focusControl);
if(k&&k.nac&&1==k.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var a=gx.fn.searchFocusFwd(cn);null!=a&&gx.fn.setFocus(a);gx.setVar("Gx_mode",d);return!0}gx.setVar("Gx_mode",d)}catch(b){}return!1},loadScreen:function(d){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0,void 0,void 0,d,!1))}catch(k){gx.dbg.logEx(k,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(d,
k){var a=k||gx.O;return a&&a.IsMasterPage&&0!=d.indexOf("MP")&&(a=this.CTRL_ROW_INDEX_REGEXP.exec(d))&&1<a.length?(d=a[1],k=2<a.length?"_"+a[2]:"",d+(-1===d.indexOf("_MPAGE")?"_MPAGE":"")+k):(k=(k?k.CmpContext:this.cmpCtx)||"")&&0==d.indexOf(k)||0<=d.search(gx.GxObject.CONTROL_CMP_REGEX)?d:k+d},isProperty:function(d){return d instanceof Array&&2==d.length||"object"==typeof d&&"undefined"!=typeof d[0]&&"undefined"!=typeof d[1]?!0:!1},checkGridChange:function(d,k,a,b){if(d){var f=d.gridId;d=gx.fn.currentGridRowImpl(f);
gx.csv.validGridRowChange(f,d,a,d).done(function(){var g=a.getGridById(f,b);gx.csv.checkGridChange(g.parentGrid,!0,a,b)})}},checkRowChange:function(d,k,a,b){var f=l.Deferred();try{var g=gx.fn.validStruct(d,a);if("undefined"!=typeof g){var m=g.grid;if(0!=m){var n=gx.fn.currentGridRowImpl(m);if(n&&(n!=b||k)&&1<n.length&&b&&1<b.length){gx.csv.rowChanged=!0;var t=a.Gx_BScreen;a.Gx_BScreen=1;gx.csv.validGridRowChange(m,n,a,b).done(function(w){w&&(w=a.getGridById(m,b))&&(w.instanciateRow(n),w.parentGrid&&
gx.csv.checkGridChange(w.parentGrid,!0,a,b));a.Gx_BScreen=t;f.resolve(!0)})}else f.resolve(!1);void 0!=n&&gx.fn.setCurrentGridRow(m,n)}else f.resolve(!1)}else f.resolve(!1)}catch(w){gx.dbg.logEx(w,"gxfrmutl.js","checkRowChange")}return f.promise()},validGridRow:function(d,k){void 0!=k&&gx.fn.setCurrentGridRow(d,k);k=gx.fn.firstGridControl(d);d=gx.fn.lastGridControl(d);gx.csv.validControls(k,d+1,!0,gx.O)},validGridRowChange:function(d,k,a,b){var f=l.Deferred();void 0!=b&&gx.fn.setCurrentGridRow(d,
b);var g=gx.fn.firstGridControl(d,a),m=gx.fn.lastGridControl(d,a);b=!gx.lang.emptyObject(b)&&!gx.lang.emptyObject(k)&&b.length==k.length&&parseInt(b)>parseInt(k);gx.csv.anyFormatError()?(a=gx.csv.gxFormatErrors,gx.csv.invalidForcedCtrl=gx.csv.invalidForcedCtrl||{},gx.csv.invalidForcedCtrl.Ctrl=gx.dom.el(a[0]),gx.csv.invalidForcedCtrl.ForceFocus=!0,gx.fn.setFocus(gx.csv.invalidForcedCtrl.Ctrl),f.resolve(!1)):gx.csv.validControls(g,m+1,!0,a,b).done(function(n){!n&&gx.csv.stopOnError||gx.csv.changeGridRow(d,
g,k);f.resolve(n)});return f.promise()},changeGridRow:function(d,k,a){gx.csv.lastId=k;gx.O.fromValid>k&&(gx.O.fromValid=k);gx.csv.lastRow[d]=a;gx.O.Gx_BScreen=1},targetRowIsMod:function(d){return(d=gx.fn.validStruct(d))?gx.fn.gridRowIsMod(d.lvl,gx.fn.currentGridRow(d.grid)):!1},refreshVars:function(d,k){for(var a=d.ip?d.ip.length:0,b=0;b<a;b++)try{"function"==typeof gx.fn.validStruct(d.ip[b],k).c2v&&gx.fn.validStruct(d.ip[b],k).c2v()}catch(f){gx.dbg.logEx(f,"gxapi.js","refreshVars")}},refreshControls:function(d,
k,a){for(var b=d.op?d.op.length:0,f=0;f<b;f++)try{var g=gx.fn.validStruct(d.op[f],k),m=null;if(0==g.grid)gx.fn.v2c(g),m=gx.dom.el(gx.csv.ctxControlId(g.fld));else{var n=gx.fn.currentGridRowImpl(g.grid);gx.text.endsWith(a,n)&&(gx.fn.v2c(g),m=gx.fn.getControlGridRef(g.fld,g.grid))}m&&gx.fn.setControlGxValid(m,"0")}catch(t){gx.dbg.logEx(t,"gxapi.js","refreshControls")}b=d.ucs?d.ucs.length:0;for(f=0;f<b;f++)try{gx.fn.validStruct(d.ucs[f],k).uc.execV2CFunctions(!0)}catch(t){gx.dbg.logEx(t,"gxapi.js","refreshControls")}},
setValidValues:function(d,k,a){var b=[];if(1<a.length-k.length){var f=gx.json.evalJSON(a[a.length-1]);for(h in f)gx.fn.setHidden(h,f[h]);b=gx.json.evalJSON(a[a.length-2])}f={};d={fields:d,msgs:b};gx.O.cmpCtx?f[gx.O.cmpCtx]=d:f.MAIN=d;gx.fn.setErrorViewer(f);if(!gx.O.AnyError){var g=!1;d=k.length;for(f=0;f<d;f++){var m=k[f];b=a[f];if(this.isProperty(m)){var n=gx.fn.vStructForVar(m[0])||gx.O.getValidStructFld(m[0]);null!=n&&gx.fn.setCtrlProperty(n.fld,m[1],b)}else if(n=gx.fn.validStruct(this.currentId),
gx.lang.emptyObject(n)||gx.lang.emptyObject(n.hc)||(n.hc==m?(gx.O[n.hc]=b,gx.fn.setHidden(this.cmpCtx+"GXH_"+n.fld,b)):n.hd==m&&(gx.O[n.hd]=b)),n=gx.fn.vStructForVarWId(m,this.currentId),gx.lang.emptyObject(n)){n=gx.fn.vStructForHC(m);if(null!=n){var t="";0!=n.grid&&(t="_"+gx.fn.currentGridRow(n.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+n.fld+t,b)}n=gx.fn.gridObjFromGxO(m);void 0!=n?(g=!0,n.loadGrid({rowProps:b})):gx.fn.saveLvlOldParm(m,b)&&(gx.setVar(m,b),gx.fn.setGridHidden(m,b))}else m=gx.fn.screen_CtrlRef(n.fld),
!gx.lang.emptyObject(m)&&b instanceof Object&&("SELECT"==m.tagName?(-1!=m.selectedIndex&&gx.fn.invalidEmptyValue(b)&&(b.s=m.options[m.selectedIndex].value),t=gx.dom.id(m),gx.fn.loadComboBox(t,b.v),gx.fn.setComboBoxValue(t,b.s)):gx.lang.emptyObject(b.s)||(b.s=gx.fn.trimSelectValue(b.s,n.type)),t=gx.fn.selectedDescription(b,n.type),b=gx.lang.emptyObject(b.s)&&!gx.lang.emptyObject(m.value)?m.value:"SPAN"!=m.tagName||gx.lang.emptyObject(b.s)||gx.lang.emptyObject(t)?b.s:t,gx.fn.setControlValue_span_safe(this.cmpCtx+
n.fld,b,0)),n.v2v&&(n.v2v(b),gx.fn.v2c(n,b,"bits"==n.type))}}gx.O.refreshOlds();gx.fn.enableDisableDelete(gx.O);g&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.gxFormatErrors=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}}}(gx.$);
gx.http_i=function(l){return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(c,d){return"{"!=d[0]&&200==c.status&&0!=c.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")?(gx.dbg.logEx('Unexpected AJAX respose format "'+
c.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(c,d,k){null!=gx.dom.el(c,!1,!0,!0)?gx.fn.setControlValue_impl(c,d):k&&(gx.dom.createInput(c,"hidden"),gx.fn.setControlValue_impl(c,d))},clearMultipartHidden:function(){this.saveHidden("GXAjaxMultipart","",!1)},clearState:function(){this.viewState=null;this.viewStateLoaded=!1;l(gx.dom.el("GXState")).val("{}")},applyWellKnownPtys:function(){gx.wpo(function(){this.viewState.FORM_Caption&&gx.fn.setCtrlPropertyImpl(document,
"Caption",this.viewState.FORM_Caption)},this)},loadState:function(){gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;var c=gx.dom.el("GXState");if(c){var d=c=c.value;this.useBase64State&&(d=gx.base64.decode(c));this.viewState=gx.json.evalJSON(d);this.viewStateLoaded=!0;this.applyWellKnownPtys()}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(c){if(this.viewState){var d=gx.json.serializeJson(this.viewState,c);c=d;this.useBase64State&&(c=gx.base64.encode(d));d=
gx.dom.el("GXState");null==d?gx.dom.createInput("GXState","hidden"):this.oldState=d.value;gx.fn.setControlValue_impl("GXState",c);this.useStateSignature&&(gx.http.setStateHsh(c),gx.http.setHsh())}},setStateHsh:function(c){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");c=gx.MD5.getHsh(c);gx.fn.setControlValue_impl("GXHSH12",c)},setHsh:function(){for(var c=gx.pO.WebComponents.length,d=0;d<c;d++)gx.http.setObjectHsh(gx.pO.WebComponents[d]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(c){var d=
c.getControlIdsh();if(null!=d){var k="";c.IsComponent&&null!=c.CmpContext&&(k=c.CmpContext);for(var a="",b=0;b<d.length;b++)if((validStruct=c.getValidStruct(d[b]))&&"function"==typeof validStruct.val){var f=gx.fn.getControlValue_impl(k+validStruct.fld);a="checkbox"==validStruct.ctrltype&&""==gx.text.trim(f)?a+validStruct.val():a+f}gx.http.createHsh(k+"GXHSH11",a)}},createHsh:function(c,d){null==gx.dom.el(c)&&gx.dom.createInput(c,"hidden");d=gx.MD5.getHsh(d);gx.fn.setControlValue_impl(c,d)},refreshState:function(){null!=
this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},getCookie:function(c){c+="=";for(var d=document.cookie.split(";"),k=d.length,a=0;a<k;a++){for(var b=d[a];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(c))return b.substring(c.length,b.length)}return null},setCookie:function(c,d,k,a,b){k=k||1;var f=[];k=new Date((new Date).getTime()+864E5*k);f.push(c+"="+escape(d));b&&f.push("path="+b);f.push(a?"session":"expires="+k.toGMTString());"https:"===location.protocol&&
(f.push("secure"),f.push("samesite=none"));document.cookie=f.join(";");return this.getCookie(c)==d},checkResponseStatus:function(c,d){return c.status==this.STATUS_FORBIDDEN?!1:c.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(d),!0):this.isBadResponse(c)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",c.status)),!0):c.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.timeoutActions.warn&&
gx.http.reloadOnTimeout(d),!0):!1},isSessionTimeoutError:function(c,d){return!gx.gen.isDotNet()&&!gx.gen.isDotNetCore()&&d&&c&&gx.pO.AjaxSecurity&&c.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==d.name&&2147500037==d.result||"Error"==d.name&&-2146697209==d.number||"NETWORK_ERR"==d.name&&101==d.code)?!0:!1},reloadOnTimeout:function(c){if((c||gx.pO.fullAjax||gx.pO.AjaxSecurity)&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(c){""==
document.location.hash?this.redirect(location.href,!1,c):document.location.reload()},redirect:function(c,d,k,a,b){b=void 0===b?!0:b;a=a||gx.O;var f=gx.popup.getPopup();if(null!=f&&gx.util.sameAppUrl(c)&&(f=f.window.gx.popup.lvl-(f.isClosing?1:0),-1!=f)){var g=gx.http.urlParameterPrefix(c);g+=encodeURIComponent("gxPopupLevel="+f+";");c+=g}b&&!gx.isabsoluteurl(c)&&(c=gx.absoluteurl(c));d?gx.evt.redirecting=!0:setTimeout(function(){gx.ajax.enableForm()},200);gx.spa.started&&!k?(gx.spa.redirect(c),gx.pO!=
a?a.endFeedback():gx.ajax.enableForm()):(gx.pO.startFeedback(!1),location.href=c)},getRequest:function(){var c=null;window.XMLHttpRequest&&(c=new XMLHttpRequest);if(!c)try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(k){}}return c},postDataFormat:{HTTP:0,JSON:1},getPostData:function(c,d){d=d||gx.http.postDataFormat.HTTP;var k=d==gx.http.postDataFormat.HTTP?[]:{};if(c.reqData)k=c.reqData;else{c=c.formNode;c="Form"==c.tagName?c.elements:l("input[type!=file],textarea,select");
for(var a=c.length,b=0;b<a;b++){var f=gx.http.elementPostData(c[b],d);null!=f&&(d==gx.http.postDataFormat.HTTP?k.push(f):k[f[0]]=f[1])}}gx.lang.isArray(k)&&d==gx.http.postDataFormat.HTTP&&(k=k.join("&")+"&");return k},elementPostData:function(c,d){if(gx.json.isNonSerializable(c.name)||"FIELDSET"==c.tagName)return null;var k="";if("select-multiple"==c.type)for(var a=c.options.length,b=0;b<a;b++)c.options[b].selected&&(k=c.options[b].value);else if("radio"==c.type||"checkbox"==c.type)if(c.checked)k=
c.value;else{if("radio"==c.type)return null}else k="image"===c.type?c.src:this.element_gxvalue(c);return d==gx.http.postDataFormat.HTTP?encodeURIComponent(c.name)+"="+encodeURIComponent(k):[c.name,k]},element_gxvalue:function(c){return c.gxtype&&"dtime"==c.gxtype.type?(dt=new gx.date.gxdate(c.value,gx.dateFormat),dt.HasTimePart=0<c.gxtype.dec,dt.HasDatePart=0<c.gxtype.len,gx.date.dttoc(dt,c.gxtype.len,c.gxtype.dec)):c.value},doHandleRequest:function(c,d){if(c.readyState==this.STATE_DONE){if(c.status==
this.STATUS_OK||d.handleAllStatusCodes){var k=new gx.util.Url(c.responseURL);if(gx.text.endsWith(k.path,".html")){window.location.href=c.responseURL;return}this.isOffline(c)&&(this.handleOffline(c),d.offline&&d.offline.call(d.obj||window,c,d));this.doCallHandler(c,d)}else gx.http.checkResponseStatus(c,d.warnOnTimeout)||gx.lang.doCallTimeout(gx.dom.writeError,document,[c.responseText,gx.getMessage("GXM_runtimeappsrv"),c.status],50);d.always&&d.always.call(d.obj||window,c,d);window.gx&&(gx.dbg.logPerf("execEvt",
"Event Executed"),gx.dbg.printPerformanceLog())}},onRequestError:function(c,d){d.error&&d.error.call(d.obj||window,c,d);d.always&&d.always.call(d.obj||window,c,d);gx.evt.setProcessing({status:!1,cond:!gx.csv.isvalidating(),ctx:"onRequestError"});c.readyState==this.STATE_DONE?gx.http.checkResponseStatus(c,d.warnOnTimeout):this.isBadResponse(c)&&gx.http.reloadOnTimeout(d.warnOnTimeout)},isBadResponse:function(c){return c.status==this.STATE_UNSENT&&gx.lang.emptyObject(c.responseText)?!0:!1},doCall:function(c){c.gxInitiator=
gx.util.executionContext.getContext();gx.util.alert.hide();c.handler||"function"!=typeof c.load||(c.handler=c.load);"boolean"!=typeof c.sync&&(c.sync=!1);c.method||(c.method="POST");if(c.multipart&&"POST"==c.method)this.doMultipartPost(c);else{var d=this.getRequest();if(null!=d){if("function"==typeof c.handler&&!c.sync){var k=gx.http.doHandleRequest.closure(this,[d,c]),a=gx.http.onRequestError.closure(this,[d,c]);gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?d.onreadystatechange=k:(d.onload=
k,d.onerror=a)}k=null;"POST"==c.method&&(k=gx.http.getPostData(c));a=!1!==c.avoidCache?this.uncache(c.url):c.url;d.open(c.method,a,!c.sync);d.setRequestHeader("Accept","*/*,text/html");!1!==c.ajaxHeader&&d.setRequestHeader(gx.ajax.reqHeader,"1");d.setRequestHeader(gx.util.browser.GX_TAB_ID_HEADER,gx.util.browser.tabId);"POST"==c.method&&d.setRequestHeader("Content-Type",c.contentType?c.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&gx.AjaxSecurity&&gx.OnSessionTimeout==gx.timeoutActions.ignore&&
d.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(d,c.gxO);c.beforeSend&&c.beforeSend.call(c.obj||window,d);try{d.send(k)}catch(b){gx.dbg.logEx(b,"gxapi.js","doCall")}"function"==typeof c.handler&&c.sync&&gx.http.doHandleRequest(d,c);return d}}return null},doCallHandler:function(c,d){if(!d.gxInitiator||!gx.util.executionContext.changedContext(d.gxInitiator))if(d.obj?d.handler.call(d.obj,null,c.responseText,c):d.handler(null,c.responseText,c),window.gx&&"function"===typeof d.onReady)d.onReady()},
doMultipartPost:function(c){gx.http.saveState(!0);this.getPostIFrame().gxPostInfo=c;var d=c.formNode;c.oldAction=d.getAttribute("action");d.setAttribute("action",c.url);c.oldTarget=d.getAttribute("target");d.setAttribute("target",this.iframeName);c.reqData&&(gx.http.saveHidden("GXAjaxMultipart",c.reqData,!0),this.setSecurityToken(null,c.gxO));d.submit()},setSecurityToken:function(c,d){(d=gx.ajax.getSecurityToken(d))&&(gx.dom.hasSelectedFile()?gx.http.saveHidden("X-GXAUTH-TOKEN",d.value,!0):c.setRequestHeader("X-GXAUTH-TOKEN",
d.value));(d=gx.http.getCookie("XSRF-TOKEN"))&&c.setRequestHeader("X-XSRF-TOKEN",d)},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":"load"},getPostIFrame:function(){var c=this.iframeName,d=gx.dom.byId(c);d&&d.frameElement&&(d=d.frameElement);d||(d=document.createElement("div"),d.innerHTML='<iframe id="'+c+'" name="'+c+'" src="about:blank">',document.body.appendChild(d),
d=d.firstChild,document.body.appendChild(d),window[c]=d,d.name=c,d.setAttribute("name",c),d.id=c,d.style.position="absolute",d.style.left="0px",d.style.top="0px",d.style.height="1px",d.style.width="1px",d.style.visibility="hidden");gx.evt.attach(d,this.iFrameloadEventName(),gx.http.iframeOnload);return d},iFrameJsonResponse:function(c){return l(c).find("input[data-response-content-type='application/json']").val()},captureIframeHTTPStatusCode:function(c){var d=/HTTP Status (\d\d\d)/gi,k=0;c.title&&
(c=d.exec(c.title),0<c.length&&(k=Number(c[1])));return{status:k}},iframeOnload:function(){var c=gx.dom.byId(gx.http.iframeName);if(!gx.http.useReadyStateEvent()||"complete"==c.readyState)if(c||(c=window.frames[gx.http.iframeName]),c&&c.frameElement&&(c=c.frameElement),c)try{gx.http.useReadyStateEvent()&&(c.src="about:blank",gx.evt.detach(c,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var d=c.gxPostInfo,k=d.formNode;k.setAttribute("action",d.oldAction);k.setAttribute("target",d.oldTarget);
var a=c.contentDocument?c.contentDocument:c.contentWindow.document;if(a){var b=a.body,f=gx.http.iFrameJsonResponse(b),g=!gx.lang.emptyObject(f);g||(g=gx.dom.allChildrenAreText(b))&&(f=gx.http.multipartResponse(b));if(g){var m=gx.base64.decode(f);gx.http.clearMultipartHidden();d.handler(null,m,d);if(window.gx&&"function"===typeof d.onReady)d.onReady();d.always&&d.always.call(d.obj||window,null,d)}else{var n=gx.http.captureIframeHTTPStatusCode(a);gx.http.checkResponseStatus(n,d.warnOnTimeout)||document.write(a.documentElement.innerHTML)}}}catch(t){c=
"Unknown error";k=gx.getMessage("GXM_NetworkError").replace("%1","NoStatusCode");gx.text.startsWith(t.message,"Blocked a frame with origin")&&(c="Upload File Changed",k=gx.getMessage("GXM_FileUploadFileChanged"),l('input[type="file"]').val(""));gx.dbg.logEx(t,"gxapi.js","FileUpload error: "+c);if(d.error)d.error.call(d.obj||window,null,d);else if(gx.fx.obs.notify("gx.afterNonFullajax"),window.gx&&"function"===typeof d.onReady)d.onReady();d.always&&d.always.call(d.obj||window,null,d);gx.util.alert.showError(k)}},
multipartResponse:function(c){var d="";try{d=l(c).text()}catch(k){gx.dbg.logEx(k,"gxapi.js","multipartResponse")}return d},uncache:function(c){var d=(new Date).getTime();return c+gx.http.urlParameterPrefix(c)+"gx-no-cache="+d},callBackend_simple:function(c,d,k,a,b,f,g,m){gx.http.callBackend_impl(void 0,c,d,gx.http.modes.none,k,a,b,f,g,m)},callBackend:function(c,d,k,a,b,f,g,m,n,t,w){gx.http.callBackend_impl(c,d,a,b,f,g,m,n,t,w)},callBackend_impl:function(c,d,k,a,b,f,g,m,n,t,w){var u=this.getRequest();
t=t||{};if(u){try{var B=gx.O;b||B.startFeedback();f="undefined"!=typeof f?f:"GET";g="undefined"!=typeof g?g:null;n="undefined"!=typeof n?n:!1;m||(d=this.uncache(d));u.open(f,d,n);u.setRequestHeader(gx.ajax.reqHeader,"2");for(var p in t)u.setRequestHeader(p,t[p]);try{"POST"==f?u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.timeoutActions.ignore&&u.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken)}catch(A){gx.dbg.logEx(A,
"gxapi.js","callBackend_impl: gx.O cannot be null")}var v=function(){b||B.endFeedback();this.lastStatus=u.status;this.lastResponse=u.responseText;if(u.readyState!=this.STATE_DONE||u.status!=this.STATUS_OK)gx.http.checkResponseStatus(u)||(window.status="GXAjax HTTP error: ("+u.status+") - "+u.statusText,gx.dbg.logEx(u.responseText),w&&w());else if(a!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(a==this.modes.full)this.handleFull(this.lastResponse);
else if(a==this.modes.call)return this.handleCall(this.lastResponse,c);return this.handleRetVal(this.lastResponse,c,k)}catch(A){gx.dbg.logEx(A,"gxapi.js","callBackend"),w&&w()}}else window.status="GXAjax HTTP error: (bad response format)",w&&w()}.closure(this);n&&(gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?u.onreadystatechange=v:u.onload=v);u.send(g);n||v()}catch(A){window.status="GXAjax HTTP error: "+A.message}window.status=""}},handleFull:function(c){gx.http.postHandler(null,c,{status:200,
responseText:""})},handleCall:function(c,d){if(d){var k=l.parseJSON(c);if(gx.lang.isArray(k))return d(k);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+c)}},handleRetVal:function(c,d,k){var a=gx.json.evalJSON(c),b=a[0];this.lastStatus=a[1];void 0==this.lastStatus&&(this.lastStatus=0);if(d&&(k||null==this.lastStatus||0==this.lastStatus)){k=l.parseJSON(c);if(gx.lang.isArray(k))return d(k);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+
c)}else return b},postHandler:function(c,d,k,a){try{if(gx.csv.lastEvtResponse=null,200>k.status||299<k.status)gx.dom.writeError(k.responseText,gx.getMessage("GXM_runtimeappsrv"),k.status);else if(gx.http.validJsonResponse(k,d)){var b=gx.json.evalJSON(d);null==b?gx.dom.writeError(d.toString(),gx.getMessage("GXM_runtimeappsrv"),k.status):(gx.http.refreshState(),gx.csv.lastEvtResponse=b,gx.fn.forceEnableControls(!0),b.rowId=this.rowId,b.gridId=this.gridId,gx.ajax.setPostResponse(b,gx.O,a).done(function(f){f||
(gx.fx.obs.notify("gx.onafterevent",[b]),gx.fx.obs.notify("gx.afterNonFullajax"))}))}}catch(f){gx.dbg.logEx(f,"gxapi.js","postHandler")}},encodeUriSegment:function(c){return encodeURIComponent(c).replace(/%20/g,"+")},formatLink:function(c,d,k){k=void 0===gx.csv.useNamedParameters||!0===gx.csv.useNamedParameters?k:void 0;c=gx.ajax.objectUrl(c);if(d&&0<d.length){var a=",",b="";k&&(a="&");c+="?";for(var f=d.length,g=0;g<f;g++){0<g&&(c+=a);k&&(b=k[g]+"=");var m=gx.http.encodeUriSegment("function"==typeof d[g].getUrlVal?
d[g].getUrlVal():d[g]);m=g===f-1&&""===m&&!1===gx.csv.useNamedParameters?",":m;c+=b+m}}return c},loadScripts:function(c,d,k,a){"undefined"==typeof k&&(k=0);k>=c.length?d():gx.http.loadScript(c[k],function(b,f,g){gx.http.loadScripts(b,f,g+1,a)}.closure(this,[c,d,k]),a)},loadStyle:function(c,d,k,a,b){if(a=b?document.querySelector('style[data-gx-href="'+a+'"]'):a?gx.dom.byId(a):null)a.href=c;else{var f=gx.dom.byTag("head")[0];b?(a||(a=document.createElement("style"),a.setAttribute("data-gx-href",c)),
a.innerHTML='@import url("'+c+'") layer('+b+")"):(a=document.createElement("link"),a.rel="stylesheet",a.type="text/css",a.href=c);"function"==typeof d&&(a.onload=d);k?(c=gx.getThemeElement(),l(a).insertBefore(c),gx.util.browser.isIE()&&l(c).insertAfter(a)):f.appendChild(a)}},applyDeferredStyles:function(){l("link[rel='preload'][as='style']").each(function(c,d){d.rel="stylesheet"})},layerNaming:function(c){return c.replace(/\?\w*$/,"").replace(/[\/\.]/g,"_")},loadStyles:function(){var c=gx.fn.getHidden("GX_STYLE_FILES");
if(!gx.lang.emptyObject(c))for(var d=0;d<c.length;d++){var k=c[d];k=gx.util.resolveUrl(k);gx.cache.fileLoaded(k)||(gx.cache.addRemoteFile(k),this.loadStyle(k,void 0,!0,void 0,this.layerNaming(k)))}},doCommands:function(){var c=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(c)||gx.ajax.dispatchCommands(c)},isOffline:function(c){return"1"===c.getResponseHeader("X-GX-OFFLINE")},handleOffline:function(c){gx.util.alert.showError(gx.getMessage("GXM_OfflineUnsupported"))},useNamedParameters:function(c){return!1===
gx.csv.useNamedParameters?!1:-1<c.indexOf("=")},urlParameterSeparator:function(c){return this.useNamedParameters(c)?"&":","},urlParameterPrefix:function(c){var d=c.indexOf("?");return-1<d?d==c.length-1?"":this.urlParameterSeparator(c):"?"}}}(gx.$);gx.$.extend(gx.evt,gx.evt_i);gx.$.extend(gx.csv,gx.csv_i);gx.$.extend(gx.http,gx.http_i);var defaultConfig={popup:{ignoreCmdsOnCancel:!1},websocket:{},timezone:{reload:!0},evt:{dblclick:{delay:450}},number:{validation:{strict:!0}},csv:{scrollTopOnError:!1}};
gx.config=gx.$.extend({},defaultConfig,window.gxCustomConfig||{});var GlobalEvents=function(l){return{executeMethod:function(c,d){try{var k=function(a){a.gx&&a.gx.fx.obs.notify(c,d)};k(window.top);window.top.document.querySelectorAll("iframe").forEach(function(a,b){k(a.contentWindow)})}catch(a){gx.dbg.logEx(a,"gxapi.js","GlobalEvents.executeMethod")}}}}(jQuery);
gx.util.browser.isIE()&&function(){function l(c,d){d=d||{bubbles:!1,cancelable:!1,detail:void 0};var k=document.createEvent("CustomEvent");k.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return k}if("function"===typeof window.CustomEvent)return!1;l.prototype=window.Event.prototype;window.CustomEvent=l}();
gx.fx.obs.addObserver("gx.onload",gx,function(){var l={};gx.serviceWorkerUrl&&"serviceWorker"in navigator&&(gx.staticDirectory&&gx.basePath&&(l={scope:gx.util.resourceUrl(gx.basePath,!1)+"/"}),navigator.serviceWorker.register(gx.serviceWorkerUrl,l).then(function(c){console.log("Service Worker Registered:",gx.serviceWorkerUrl,"scope: ",c.scope)}))});
(function(l){function c(r,q){r=l(r);var x=r.is("SPAN,DIV");return r.attr(q)||(x?r.find("> a").first().attr(q):"")}var d=gx.GxObject.prototype;d.sPrefix=function(){return this.CmpContext};d.declareDomainHdlr=function(r,q){this.GXValidFnc[r].dom_hdl=q};d.setVCMap=function(r,q,x,D,C,I){this.VarControlMap[r]={id:q,grid:x,type:D,length:C,decimals:I}};d.setSDTMapping=function(r,q){this.SDTMap=this.SDTMap||{};this.SDTMap[r]=q;r={};for(var x in q)q[x].extr&&(r[q[x].extr]=x);q.extrn=r};d.applySDTVarMapping=
function(r,q){if(this.VarControlMap[q]&&this.VarControlMap[q].type)var x=this.VarControlMap[q].type;return this.applySDTMapping(r,x,!0)};d.applySDTMapping=function(r,q,x){if(r&&q){q=this.SDTMap?this.SDTMap[q]:void 0;var D;if(q){for(D in q.extrn)x?(r[q.extrn[D]]=r[D],delete r[D]):(r[D]=r[q.extrn[D]],delete r[q.extrn[D]]);for(D in q)if(q[D].sdt){var C=r[D]?r[D].length:0;if(C)for(var I=0;I<C;I++)this.applySDTMapping(r[D][I],q[D].sdt,x);else this.applySDTMapping(r[D],q[D].sdt,x)}}}return r};d.Initialize=
function(){this.InitStandaloneVars();gx.wpo(function(){this.initTargets()},this)};d.InitStandaloneVars=function(){var r=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=r&&gx.setGxO(r)};d.getCmpType=function(r){r=this.cmpRegex.exec(r);this.cmpRegex.lastIndex=0;return r};d.getContainer=function(){if(this.containerControl)return gx.dom.byId(this.containerControl);if(!this.CmpContext&&!this.IsMasterPage)return l(".gx-content-placeholder").get(0)||document.body;var r,q=this.getCmpType(this.CmpContext);
q&&(r=gx.dom.byId(q[1]+"gxHTMLWrp"+q[2]+(q[3]||"")));if(r)return r};d.setContainer=function(r){this.containerControl=r};d.setObjectType=function(r){this.ObjectType=r};d.getObjectType=function(){return this.ObjectType};d.isTransaction=function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};d.setAjaxSecurity=function(r){this.AjaxSecurity=r};d.setOnAjaxSessionTimeout=function(r){switch(r){case "Warn":this.OnSessionTimeout=gx.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=
gx.timeoutActions.callObj}};d.addKeyListener=function(r,q){gx.evt.addKeyListener(this,r,q)};d.clearMessages=function(){this.MsgList.length=0};d.addMessage=function(r){this.MsgList.push(r)};d.showMessages=function(r){for(var q=[],x=this.MsgList.length,D=0;D<x;D++){var C=this.MsgList[D];"string"===typeof C?q.push({att:"",type:2,text:this.MsgList[D]}):q.push(C)}x={};x[""==this.CmpContext?"MAIN":this.CmpContext]=q;r?gx.fn.setErrorViewer(x,!1):gx.fn.setErrorViewer(x);this.clearMessages()};d.setPrompt=
function(r,q){gx.fn.attachCtrl(this.CmpContext+r,{id:r,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:q,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[r]=function(x){if((x=(x||gx.dom.el(r)).parentNode)&&x.href&&(x=x.href.match("javascript:(.+)"))&&1<x.length){x=decodeURIComponent(x[1]);try{eval(x)}catch(D){gx.dbg.logEx(D,"gxfrmutl.js","setPrompt")}}}};d.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var r=[],q=gx.csv.lastEvtResponse.gxValues,
x=q.length,D=0;D<x;D++){var C=q[D];if(C.CmpContext==this.CmpContext&&gx.lang.booleanValue(C.IsMasterPage)==this.IsMasterPage){r.push(C);break}}gx.fn.setJsonValues(r)}};d.call=function(r,q,x,D){gx.nav.willRedirect(r)?(!1===gx.csv.useNamedParameters&&(D=void 0),this.postEventRedirect={url:gx.http.formatLink(r,q,D),forceDisableFrm:!1}):gx.nav.call.apply(gx.nav,arguments)};d.callUrl=function(r,q){gx.nav.willRedirectByUrl(r)?this.postEventRedirect={url:r,forceDisableFrm:!1}:gx.nav.callUrl.apply(gx.nav,
arguments)};d.popupOpen=function(r){this.postEventPopupCommands.push({popup:gx.lang.clone(r)})};d.popupOpenUrl=function(r,q){this.postEventPopupCommands.push({popup:gx.popup.openUrlToOpenPopupParms(r,q)})};d.refreshInputs=function(r){for(var q=r.length,x=0;x<q;x++){var D=this.getValidStructFld(r[x][1]);null!=D&&"function"==typeof D.c2v&&D.c2v()}};d.refreshOutputs_impl=function(r){for(var q=[],x=0,D=r.length;x<D;x++){var C=r[x];if(C.fld){var I=this.getValidStructFld(C.fld);if(null!=I)gx.fn.v2c(I),
C=gx.fn.getControlGridRef(I.fld,I.grid),gx.csv.invalidateGXCtrl(C),0<I.grid&&gx.fn.persistGridControlValue(C.id,I.val(),I),gx.fn.setControlOldValue(C,I.val());else{I=this.getVariable(C.av);if(null!=I&&"object"==typeof I){var G=this.getFormBCForVar(C.av);null!=G&&this.bcToScreen(G,I);(G=this.getGridForColl(C.av))&&G.refreshCollection(I)}gx.fn.setHidden(gx.csv.ctxControlId(C.fld,this),I)}}else C.ctrl&&q.push(C)}gx.uc.StartRender();x=0;for(D=q.length;x<D;x++)C=q[x],gx.uc.isUserControl(C.ctrl)&&(C.ctrl.execV2CFunctions(!1),
C.ctrl.execShowFunction());gx.uc.EndRender()};d.OnClientEventEnd=function(){gx.fn.usrSetFocus_commit()};d.refreshOutputs=function(r){var q=this.postEventPopupCommands;this.postEventPopupCommands=[];this.postEventRedirect&&(q.push({redirect:this.postEventRedirect}),delete this.postEventRedirect);0<q.length&&gx.ajax.dispatchCommands(q);this.refreshOutputs_impl(r);this.showMessages()};d.refreshRowOutputs=function(r){this.refreshOutputs_impl(r)};d.refreshServerOutputs=function(r){for(var q=r.length,x=
0;x<q;x++){var D=r[x],C=gx.fn.getHidden(this.CmpContext+D.fld);void 0!=C&&((D=this.getValidStructFld(D.fld))&&D.v2v?(D.v2v(C),gx.fn.v2c(D,C)):this.setVariable(r[x].av,C))}};d.getContextObject=function(r){return null!=this.getValidStructFld(r)&&(r=gx.fn.getControlValue_impl(this.CmpContext+r),null!=r)?r:""};d.getValidStructId=function(r){if(!gx.lang.emptyObject(r))for(var q=this.getControlIds(),x=0;x<q.length;x++){var D=this.getValidStruct(q[x]);if(this.isSameField(D,r))return q[x]}return-1};d.getValidStructFld=
function(r){if("function"==typeof r||"object"==typeof r&&r.tagName)r="object"==typeof r&&"radio"===r.type&&r.name?r.name:gx.dom.id(r);var q=this.getValidStructFld_cache[r];if(q)return q;if(!gx.lang.emptyObject(r)){q=this.getControlIds();for(var x=q.length,D=0;D<x;D++){var C=this.getValidStruct(q[D]);if(this.isSameField(C,r))return this.getValidStructFld_cache[r]=C}}return this.getValidStructFld_cache[r]=null};d.isSameField=function(r,q){var x=r.fld;if(x==q)return!0;this.IsComponent&&0==q.indexOf(this.CmpContext)&&
(q=q.substring(this.CmpContext.length));0!=r.grid&&(q=q.replace(this.rowPatternRegex,""));this.IsMasterPage&&(x=x.replace(/_MPAGE$/,""),q=q.replace(/_MPAGE$/,""));return x==q};d.getUserFocus=function(){var r=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(r)&&"notset"!=r){var q=gx.dom.byId(r);if(!gx.lang.emptyObject(q)&&!gx.fn.isAccepted(q)){r=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var x=gx.O;gx.O=this;q=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=x;gx.csv.cmpCtx=
r;r=gx.lang.emptyObject(q)?"":q.id}}if(gx.lang.emptyObject(r)){if(this.hasMasterPage()&&(r=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(r)))return r;q=[];for(x=0;x<this.WebComponents.length;x++)if(0==this.WebComponents[x].CmpContext.indexOf("MP"))q.push(this.WebComponents[x]);else if(r=this.WebComponents[x].getUserFocus(),!gx.lang.emptyObject(r))return r;for(x=0;x<q.length&&(r=q[x].getUserFocus(),gx.lang.emptyObject(r));x++);}return r};d.getGridColumn=function(r,q){var x=null,D=gx.fn.controlGridId(r);
0!=D&&(q=gx.O.getGridById(D,q))&&(x=q.grid.getColumnByHtmlName(r));return x};d.hasMasterPage=function(){return null!=this.MasterPage};d.setComponent=function(r){this.CmpControls[r.id.toLowerCase()]=r};d.getComponentByPrefix=function(r){var q=l.map(this.CmpControls,function(x,D){return x.Prefix==r?x:null});return 1==q.length?q[0]:null};d.refreshGrid=function(r){(r=this.getGrid(r))&&r.doRefresh()};d.refreshComponent=function(r){var q=this.getWebComponent(this.CmpContext+this.getComponentData(r).Prefix);
q?gx.evt.dispatcher.dispatch("REFRESH",q):(q=gx.fn.controlGridId(r),0!==q&&(q=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(r).Prefix+gx.fn.currentGridRow(q)))&&gx.evt.dispatcher.dispatch("REFRESH",q))};d.getComponentPrefix=function(r){return(r=this.getComponentData(r))?r.Prefix||"":""};d.getComponentData=function(r){return this.CmpControls[r.toLowerCase()]};d.createWebComponent=function(r,q,x,D,C,I,G){I=I||this.getComponentPrefix(r);D||(r=gx.fn.controlGridId(r),D=0!==r?gx.fn.currentGridRow(r):
"");C=C||this.CmpContext+"gxHTMLWrp"+I+D;I=this.CmpContext+I;var K=gx.getObj(I,!1);K?K.startFeedback():(r=gx.dom.byId(C),r.firstChild&&gx.dom.mask(C));r=gx.gen.isJava()&&gx.pO.PackageName&&!gx.text.startsWith(q,"/")?gx.pO.PackageName+".":"";gx.ajax.dynComponent(r+q,x,I,D).done(function(N){N.DynComponentMap||(N.DynComponentMap={});N.DynComponentMap[I+D]=C;gx.ajax.setJsonResponse({response:N,isPostBack:!0,gxObject:K||gx.O,afterCmpLoaded:function(){G&&G(I)}});K?K.endFeedback():gx.dom.unmask(C)})};d.registerComponent=
function(r){this.WebComponents[r.CmpContext]=r;this.WebComponents.push(r)};d.setWebComponent=function(r,q){this.deleteComponent(r.CmpContext,r,!1);q&&this.restoreComponentHiddens(r.CmpContext,q);this.registerComponent(r);r.JustCreated=!0;gx.fn.setHidden(r.CmpContext,r.ServerClass);gx.fx.obs.notify("webcom.render",[r])};d.getWebComponent=function(r){return this.WebComponents[r]};d.deleteComponent=function(r,q,x){x="undefined"==typeof x?!0:x;var D=this.getWebComponent(r);if(D){var C=gx.gen.isJava()&&
D.PackageName?D.PackageName+".":"";gx.cache.deleteInlineCode(r+C+D.ServerClass.toLowerCase());x&&this.deleteComponentHiddens(r);gx.lang.emptyObject(q)||gx.fn.setHidden(q.CmpContext,q.ServerClass);D.ondestroy();delete this.WebComponents[r];q=this.WebComponents.length;for(x=0;x<q;x++)if(this.WebComponents[x].CmpContext==r){this.WebComponents.splice(x,1);break}for(q=gx.attachedControls.length;q--;)gx.attachedControls[q].info.wc===r&&gx.attachedControls.splice(q,1);q=this.WebComponents;for(var I in q)isNaN(parseInt(I))&&
0===I.indexOf(r)&&this.deleteComponent(I)}};d.deleteComponentHiddens=function(r){if(gx.lang.isArray(r)){if(0==r.length)return;r=gx.fn.getCmpRegex("("+r.join("|")+")")}else r=gx.fn.getCmpRegex(r);r=gx.fn.filterHiddens(r,gx.http.viewState);for(var q in r)q&&gx.fn.deleteHidden(q)};d.restoreComponentHiddens=function(r,q){r=gx.fn.getCmpRegex(r);q=gx.fn.filterHiddens(r,q);for(var x in q)x&&gx.fn.setHidden(x,q[x])};d.setCmpContext=function(r){void 0!=r&&(this.IsTypeComponent=!0,""!==r&&(this.IsComponent=
!0),this.CmpContext=r)};d.getOldLvl=function(r){for(var q in this.LvlOlds)for(var x=this.LvlOlds[q],D=x.length,C=0;C<D;C++)if(x[C]==r)return q;return-1};d.refreshDependantGrids=function(r){for(var q=this.Grids.length,x=0;x<q;x++)for(var D=this.Grids[x],C=D.refreshVars,I=C.length,G=0;G<I;G++)if(C[G].fld==r.fld){D.filterVarChanged();break}};d.getCtrlPropertyValue=function(r,q){var x=gx.fn.getCtrlProperty(r,q);void 0===x&&(x=gx.fn.getHidden(r+"_"+q));return x};d.setGrid=function(r){this.Grids[r.gridName]=
r;this.GridsUpper[r.gridName.toUpperCase()]=r;var q=this.getGridIdxByName(r.gridName);-1!=q?this.Grids[q]=r:this.Grids.push(r)};d.getGrid=function(r){r=r||"";return this.Grids[r]||this.GridsUpper[r.toUpperCase()]};d.getGridIdxByProp=function(r){for(var q=this.Grids.length,x=0;x<q;x++)if(r(this.Grids[x]))return x;return-1};d.getGridIdxByName=function(r){return this.getGridIdxByProp(function(q){return q.gridName===r})};d.getGridByBaseName=function(r){var q=this.getGridIdxByProp(function(x){return x.gridName===
r||x.grid.GridBaseName===r});return-1===q?null:this.Grids[q]};d.getGridIdx=function(r){for(var q=this.Grids.length,x=0;x<q;x++)if(this.Grids[x].gridId==r)return x;return-1};d.getGridById=function(r,q){q=q||"";for(var x=this.Grids.length,D=0;D<x;D++){var C=this.Grids[D];if(C.gridId==r&&(!C.parentRow||gx.text.endsWith(q,C.parentRow.gxId)))return C}return null};d.getGridForColl=function(r){r=this.getAllGridsForColl(r);return 0===r.length?null:r[0]};d.getAllGridsForColl=function(r){for(var q=this.Grids.length,
x=[],D=0;D<q;D++){var C=this.Grids[D];C.boundedCollName==r&&x.push(C)}return x};d.getFormBCForVar=function(r){for(var q in this.FormBCs){var x=this.FormBCs[q];if(x&&x.gxvar==r)return x}return null};d.getGridBC=function(r){var q=r;this.IsComponent&&0===r.indexOf(this.CmpContext)&&(q=r.substring(this.CmpContext.length));return this.GridBCs[q]};d.getFormBC=function(r){var q=r;this.IsComponent&&0===r.indexOf(this.CmpContext)&&(q=r.substring(this.CmpContext.length));return this.FormBCs[q]};d.addGridBCProperty=
function(r,q,x,D){var C=this.getGridBC(r);"undefined"==typeof C&&(C={},C.gxvar=D,this.GridBCs[r]=C);this.addBCProperties(C,q,x,D)};d.addBCProperty=function(r,q,x,D){var C=this.getFormBC(r);"undefined"==typeof C&&(C={},C.gxvar=D,this.FormBCs[r]=C);this.addBCProperties(C,q,x,D)};d.addBCProperties=function(r,q,x,D){if(r&&x)if(q instanceof Array)for(var C=q.length,I=function(K){var N=this[x.gxvar];gx.lang.emptyObject(x.hc)||(N=this[x.hc]);if("date"==x.type)N=(new gx.date.gxdate(N)).getString("Y4MD");
else if("bitstr"===x.type&&gx.pO.fullAjax){var P=gx.fn.getControlGridRef(x.fld,x.grid,K);P&&l(P).val()&&(N="gxformdataref:"+P.id)}this.valueToBCProp(this[D],q,x,N,K)},G=0;G<C;G++){if("undefined"==typeof r[q[G]])if(G<C-1)r[q[G]]={};else{r[q[G]]=x;"object"==typeof this[D]&&(x.v2bc=I);break}r=r[q[G]]}else"string"==typeof q&&(r[q]=x)};d.valueToBCProp=function(r,q,x,D,C){try{if(r){var I=q.length,G=C||"",K=C=0,N,P=function(O){if(gx.lang.isArray(O)&&x&&x.grid){var W=gx.fn.getGridObj(x.grid,G&&4===G.length?
G:void 0);W=W&&W.grid&&!W.InfiniteScrolling?W.grid.firstRecordOnPage:0;N=G?G:gx.fn.currentGridRow(x.grid);3<N.length&&(K+=1,N=N.substr(-4*K,4),O=O[Number(W||0)+Number(N)-1])}return O};for(r=P(r);r&&C<I-1;C++)r[q[C]]||(r[q[C]]={}),r=P(r[q[C]]);r&&(C=q.length-1,r[q[C]]=D,void 0!==r[q[C]+"_N"]&&(r[q[C]+"_N"]=0))}}catch(O){gx.dbg.logEx(O,"gxfrmutl.js","valueToBCProp")}};d.bcToScreen=function(r,q){for(var x in r)if("gxvar"!=x)try{var D=r[x];"object"!=typeof q[x]||gx.lang.isVstruct(D)?(0==D.grid||gx.csv.validatingGrid&&
D.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(D.hc)&&void 0!=q[x]&&D.v2v&&(D.v2v(q[x]),gx.fn.v2c(D,q[x])):this.bcToScreen(r[x],q[x])}catch(C){gx.dbg.logEx(C,"gxfrmutl.js","bcToScreen")}};d.addGridUCEventHandler=function(r,q,x){gx.lang.emptyObject(this.GridUCsEvts[r])&&(this.GridUCsEvts[r]=[]);this.GridUCsEvts[r].push({e:q,h:x})};d.getGridUCEventHandlers=function(r){r=this.GridUCsEvts[r];return gx.lang.emptyObject(r)?[]:r};d.setGridUCDynProp=function(r,q,x,D,C){this.setGridUCProp(r,q,
x,D,C)};d.setGridUCProp=function(r,q,x,D,C){gx.lang.emptyObject(this.GridUCsProps[r])&&(this.GridUCsProps[r]=[]);this.GridUCsProps[r].push({p:q,h:x,v:D,t:C});"InternalTitle"==q&&(this.GridUCsProps[r].title=D)};d.getGridUCProperties=function(r){r=this.GridUCsProps[r];return gx.lang.emptyObject(r)?[]:r};d.v2UC=function(r){this.UCBindings[r].uc.forEach(function(q){q.execV2CFunctions()})};d.addUsercontrolBinding=function(r,q,x){this.UCBindings[r]||(this.UCBindings[r]={fld:q,uc:[]},this.UCBindingsHiddens[q]=
this.UCBindings[r]);gx.util.inArray(x,this.UCBindings[r].uc)||this.UCBindings[r].uc.push(x)};d.setUserControl=function(r){r.ContainerName&&(this.UserControls[r.ContainerName]=r)};d.getUserControl=function(r){var q=this.UserControls[r];q||""==this.CmpContext||(q=this.UserControls[this.CmpContext+r]);return q};d.getUserControlGrids=function(){return l.map(this.Grids,function(r){if(r.grid&&r.isUsercontrol)return r.grid})};d.execV2CFunctions=function(r,q,x,D){x=void 0===x||x;q||(q=this.UserControls);
var C=this;gx.uc.StartRender();l.each(q,function(I,G){!G||C!=G.ParentObject||!x&&G.GridId&&!G.gxGridName||D&&!D(G)||G.updateAndShow(r)});gx.uc.EndRender()};d.execC2VFunctions=function(){l.each(this.UserControls,function(r,q){try{q.execC2VFunctions()}catch(x){gx.dbg.logEx(x,"gxfrmutl.js","execC2VFunctions")}try{q.saveProperties()}catch(x){gx.dbg.logEx(x,"gxfrmutl.js","execC2VFunctions")}})};d.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",
this.Gx_mode)};d.setVariable=function(r,q){var x=this[r]=q;0!=r.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+r,q);if(void 0!=this.VarControlMap[r]){var D=this.VarControlMap[r].type;if("date"==D||"dtime"==D)"string"==typeof q&&(q=new gx.date.gxdate(q),this[r]=q),"date"==D?x=q.getStringWithFmt("Y4MD"):(x=this.VarControlMap[r].decimals,x=q.getStringWithFmt("Y4MD")+" "+q.getTimeString(!0,!0,1<x,12<=x));"decimal"==D&&"."!=gx.decimalPoint?(x=q.toString().replace(".",gx.decimalPoint),"string"==
typeof q&&(this[r]=gx.num.parseFloat(q))):"int"==D&&"string"==typeof q&&(this[r]=gx.num.parseInt(q));gx.fn.setHidden(this.CmpContext+this.VarControlMap[r].id,x)}this.isTransaction()&&"Gx_mode"==r&&this.setMode();void 0!=this.UCBindings[r]&&gx.fn.setHidden(this.CmpContext+this.UCBindings[r].fld,q)};d.getVariable=function(r){return this[r]};d.isServerEvent=function(r){return this.Events[r][1]||!1};d.getServerEventName=function(r){return this.Events[r][0]||""};d.getClientEventName=function(r){for(var q in this.Events)if(this.Events[q][0]==
r)return q;return""};var k={ERFR:"REFRESH",ERFR_MPAGE:"REFRESH",RFR:"REFRESH",RFR_MPAGE:"REFRESH"},a=[".CONTROLVALUECHANGED",".CONTROLVALUECHANGING"],b=function(r){for(var q=0;q<a.length;q++)if(0<=r.indexOf(a[q]))return!1;return!0};d.cleanEventName=function(r){r=r.replace(new RegExp("^"+this.CmpContext),"");var q=(gx.pO.fullAjax?/^E('?(.*)\.?'?)/:/^E('?(\w+)\.?([^\.]*)'?)/).exec(r);r=q&&q.length&&1<q.length?q[1].replace(/\.\d*$/,""):r;return k[r]||r};d.inputHasFormatErrors=function(r,q,x){var D=this;
q=this.cleanEventName(r);var C,I,G=!1;r=gx.csv.anyFormatError();var K;if(!this.fullAjax&&r)return!0;if(!r||!this.EvtParms[q]||!b(q))return!1;x=this.EvtParms[q][0];var N=this,P=function(Y,ba,fa){var da=ba||da,ka=fa||ka;if(Y)if(da&&ka&&Y.grid==da){if((C=gx.fn.getControlGridRef(Y.fld,da,ka))&&C.id&&void 0!==gx.csv.gxFormatErrors[C.id])return!0}else if((C=Y.fld?gx.fn.getControlGridRef(Y.fld,Y.grid):null)&&C.id)for(K in gx.csv.gxFormatErrors)if(Y==N.getValidStructFld(K))return!0;return!1};q=0;for(len=
x.length;q<len&&!G;q++){var O=x[q];if(O.postForm)return r;if(O.fld)if(I=this.getValidStructFld(O.fld))G=G||P(I);else{var W=this.getFormBCForVar(O.av);if(null!=W)for(var V in W)I=W[V],"object"===typeof I&&(G=G||P(I));(O=gx.O.getAllGridsForColl(O.av))&&O.some(function(Y){var ba=Y.gridId;gx.O.GXValidFnc.filter(function(fa){return fa.grid===ba}).forEach(function(fa){(I=D.getValidStructFld(fa.fld))&&Y.grid.rows.forEach(function(da){G=G||P(I,ba,da.gxId)});return G})})}}return G};d.setEventParameters=function(r,
q){gx.csv.lastEvtRow=null;gx.O=this;var x=!0,D=-1;gx.csv.cmpCtx=this.CmpContext;for(var C=r.length,I=0;I<C;I++){var G=r[I][0],K=r[I][1],N=r[I][2],P=!1;if(q instanceof p)this.setVariable(N,q.parms[I]),P=!0;else for(var O in q)if(O.toLowerCase()==G.toLowerCase()){this.setVariable(N,q[O]);P=!0;break}P||this.setVariable(N,q);G=this.getValidStructFld(K);null!=G?(0!=G.grid&&-1==D?D=G.grid:0!=G.grid&&G.grid!=D&&(x=!1),gx.fn.v2c(G)):gx.fn.setHidden(this.CmpContext+K,this.getVariable(N))}x&&(gx.csv.lastEvtRow=
gx.fn.currentGridRowImpl(D))};d.executeEvent=function(r,q,x,D,C){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var I=this.getClientEventName(r);(I?this.isServerEvent(I):1)?(C?(I=this.getGrid(C))&&x?I.instanciateRow(x):gx.csv.instanciatedRowGrid=null:gx.csv.instanciatedRowGrid=null,r=this.executeServerEvent(r,q,x,D,this.fullAjax&&!x&&!C)):r=gx.evt.execCliEvt(this.CmpContext,this.IsMasterPage,I,C,x,"");gx.csv.instanciatedRowGrid=null;return r};d.executeClientEvent=function(r,q){var x=gx.$.Deferred();Promise.resolve(r.apply(this,
q)).then(function(D){x.resolve()});return x.promise()};d.executeServerEvent=function(r,q,x,D,C){var I=l.Deferred();gx.csv.cmpCtx=this.CmpContext;var G=!0;void 0!=q&&0==q&&(G=!1);(q=null!=x&&(gx.csv.validatingGrid||gx.csv.instanciatedRowGrid))&&q.parentObject!=this&&(q=null);var K=gx.lang.emptyObject(q)?!1:q.gridId;x=x||gx.csv.lastEvtRow||"";C?(x="",K=null):(""==x&&K&&(x=gx.csv.lastRow[K]),"undefined"==typeof x&&(x=gx.fn.currentGridRowImpl(q.gridId)));gx.evt.execEvt(this.CmpContext,this.IsMasterPage,
this.CmpContext+r+"."+(x||""),gx.evt.dummyCtrl,K,G,null,!0,function(){I.resolve()},D,function(){I.resolve()},!1);return I.promise()};d.executeEnterEvent=function(r,q,x){if(gx.evt.executingEnterEvent)gx.evt.cancel(r,!0);else{var D=this.gxOWithEnter(q),C=!1;if(q&&q.onblur)q.onblur();if((gx.pO.fullAjax||null==D)&&r&&gx.evt.cancelAndRefresh(r)){if(null==D||D.autoRefresh||!D.hasEnterEvent||D.anyGridBaseTable)return;C=!0}r?(gx.dom.hasSubmitControl()&&gx.evt.cancel(r,!0),q&&"INPUT"==q.nodeName&&gx.dom.isEditControl(q)&&
gx.evt.cancel(r,!0)):C=!0;if(null!=D){var I="ENTER";D.IsMasterPage&&(I+="_MPAGE");I=D.CmpContext+"E"+I+".";if(q&&gx.evt.isEnterEvtCtrl(q)){var G=gx.fn.controlRowId(q);var K=gx.fn.controlGridId(q.id);G&&(I+=G)}q=function(){gx.evt.executingEnterEvent=!1};gx.evt.executingEnterEvent=!0;gx.evt.execEvt(D.CmpContext,D.IsMasterPage,I,gx.evt.dummyCtrl,K,!1,null,x,q,C,q,null!=D);r&&gx.evt.cancel(r,!0)}}};d.gxOWithEnter=function(r){if(r&&(r=gx.fn.getControlContext(r))&&r.hasEnterEvent)return r;if(this.hasEnterEvent)return this;
if(this.IsComponent){r=this.getCmpType(this.CmpContext);var q=""==r[1]&&0==r[0].indexOf("MP");r=gx.getObj(r[1],q);if(!gx.lang.emptyObject(r))return r.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();return null};d.getLastControlId=function(){return this.GXLastCtrlId};d.getValidStruct=function(r){return this.GXValidFnc[r]};d.getControlIds=function(){return this.GXCtrlIds};d.getControlIdsh=function(){return this.GXCtrlIdsh};d.getUsercontrolFromChild=function(r){l.each(this.UserControls,
function(q,x){q=x.getContainerControl();if(gx.dom.isChildNode(r,q))return x});return null};d.installFlatLevelDatePickers=function(){for(var r,q=this.getControlIds(),x=q.length,D=0;D<x;D++)r=this.getValidStruct(q[D]),void 0!=r&&0==r.grid&&void 0!=r.dp&&gx.fn.installDatePicker(this.CmpContext+r.fld,r,this,r.dp.f,r.dp.st,r.dp.wn,r.dp.mf,gx.fn.datePickerFormat(r.dp.pic,r.dp.dec,r.len),r.len,r.dp.dec)};d.installImageControls=function(){for(var r=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass),q=0,
x=r.length;q<x;q++)gx.html.multimediaUpload.createControl(r[q]);r={};this.IsComponent&&(q=gx.pO.getWebComponent(this.CmpContext),r.observerKey=q&&q.getContainer()&&q.getContainer().id);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue,r)};d.initControlsEnabledFlag=function(r){if("bits"!=r.type&&"audio"!=r.type&&"video"!=r.type&&(r=gx.fn.getControlRef(r.fld))){var q=gx.http.viewState[gx.dom.id(r)+"_Enabled"];void 0!==q&&gx.fn.setEnabledProperty(r,gx.lang.gxBoolean(q),!1)}};
d.initControlsBehaviour=function(){var r=this;l.each(gx.O.GXValidFnc,function(q,x){x&&x.fld&&(r.initControlsEnabledFlag(x),x.gxsgprm&&(q=gx.fn.getControlRef(x.fld))&&gx.fx.installSuggest(q))})};var f=function(r){if(gx.lang.emptyObject(r))return!1;try{var q=new Function(gx.text.contains(r.toLowerCase(),"return")?r:"return "+r)}catch(x){return gx.lang.doEval(r)}try{return q()}catch(x){gx.dbg.logEx(x,"gxfrmutl.js","evaluateCode")}return!1},g=function(r){var q=r.tagName.toLowerCase();return"img"==q||
"input"==q?l(r).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR):l("a["+gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR+"]",r).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR)},m=function(){var r={select:!0,textarea:!0},q=gx.lang.apply({radio:!0,checkbox:!0,file:!0},gx.dom.editControls);return function(x,D){D=void 0===D?!1:D;if(!x)return!1;var C=x.tagName.toLowerCase(),I=[].slice.call(x.children);return(r.a=D)&&I.some(function(G){return m(G,D)})||("input"==C?q[x.type.toLowerCase()]:r[C])}}(),n=function(r){return r&&
"label"==r.tagName.toLowerCase()&&(r=r.getAttribute("for"))?(r=gx.dom.el(r),m(r)&&gx.fn.isVisible(r,0)):!1},t=function(r){if("keypress"!==r.type||13===r.keyCode||32===r.keyCode&&gx.dom.isButton(r))if("keypress"===r.type&&(gx.evt.processing||gx.evt.redirecting))r.preventDefault();else{var q=r.target,x=l(q),D=l(r.currentTarget);gx.dom.isRoundedBtnWrapper(x)&&(x=x.find("input"),D=D.find("input"));var C=gx.fn.getControlContext(D);if(!q||"A"!==q.tagName.toUpperCase()||void 0!==l(q).attr(gx.GxObject.GX_EVENT_DATA_ATTR)||
!q.href)if(!C)r.preventDefault();else if(!D.hasClass("gx-disabled")&&(!m(q)&&!n(q)||l(q).is(D))&&!gx.dom.hasAttribute(q,gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS)){r.stopPropagation();var I=function(){var G=D.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR);gx.util.browser.isOldIE()&&!gx.util.browser.isWinCE()?u.apply(this,[r,x,C,G]):w.apply(this,[r,x,C,G])};gx.wr(function(){gx.evt.doAfterProcessing(I,this)},this)}}},w=function(r,q,x,D){if(!q[0]||"button"!==q[0].type||!q[0].disabled){var C=function(){gx.csv.resetRow();
var G=x.getValidStructFld(D);G&&G.grid&&gx.evt.setEventRow(x,q.get(0))},I=function(){C();q.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);x.handleControlEvent(r,D,this)}.closure(this);gx.fx.dom.delayedDispatch(r)?q.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)?(C(),gx.fx.dom.raiseEvent("dblclick",r)):(I=setTimeout(I,gx.config.evt.dblclick.delay),q.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,I)):I.call()}},u=function(r,q,x,D){if(!q.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)){var C=
function(){gx.csv.resetRow();var I=x.getValidStructFld(D);I&&I.grid&&gx.evt.setEventRow(x,q.get(0));q.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);x.handleControlEvent(r,D,this)}.closure(this);gx.fx.dom.delayedDispatch(r)?(C=setTimeout(C,gx.config.evt.dblclick.delay),q.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,C)):C.call()}},B=function(r,q,x){try{x&&r.preventDefault(),q&&r.stopPropagation()}catch(D){}};d.handleControlEvent=function(r,q,x){var D=this.controlEventMap;if(D[q]){var C=D[q],
I=D[q].evt;q=this.Events[I]?this.Events[I][0]:"E"+D[q].std;var G=c(x,gx.GxObject.GX_EVENT_DATA_ATTR),K=c(x,gx.GxObject.GX_EVENT_CODE_DATA_ATTR),N=g(x);D=0<C.grid?gx.fn.controlRowId(r.currentTarget):null;var P=this.getGridById(C.grid,D);I=!0;var O=!1,W=l(r.target);if(!gx.util.inArray(C.ctrltype,gx.GxObject.GX_EVENT_EXCLUDED_CTRLTYPES))switch(G){case "1":B(r,!0,!0);N&&!f(N)||gx.fn.closeWindow();break;case "3":case "4":B(r,!0,!0);K&&f(K);break;case "8":gx.ajax.doRefresh(this);break;default:if(!N||f(N)){if(P)var V=
P.gridName;"checkbox"===C.ctrltype&&(gx.fn.checkboxClick(C,x,C.values[0],C.values[1]),I=!1,O=!0);if(q){C=q.substring(q.indexOf(".")+1,q.length).toLowerCase();G=r.type.toLowerCase();if(C.includes("click")&&!G.includes("click")&&r.currentTarget&&"textarea"===r.currentTarget.type)break;W.attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,!0);this.executeEvent(q,!1,D,!1,V).always(function(Y){var ba=function(){l(Y).attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,null)};gx.evt.redirecting?ba():gx.spa.isNavigatingRaw()?
gx.spa.addObserver("onnavigate",this,ba,{single:!0}):ba()}.closure(this,[W]))}if(O)gx.evt.onchange(x)}gx.dom.isRadio(x)||B(r,!0,I)}}};d.registerCtrlsEventHandlers=function(){var r,q=this.GXCtrlIds,x=this.GXValidFnc,D=this.IsMasterPage,C=this.CmpContext,I=D?"_MPAGE":"",G="["+gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR+"]",K=!C&&!D;void 0===this.listeningControlEvents&&(this.listeningControlEvents=!1);this.controlEventMap||(this.controlEventMap={});var N=this.controlEventMap;var P=0;for(r=q.length;P<r;P++){var O=
x[q[P]];var W=gx.fn.controlFiresEvent(O);var V=this.hasEnterEvent&&!gx.lang.emptyObject(O.ctrltype)||O.evt_cvc||O.evt_cvcing;if(W||V)if(W&&(N[O.fld]=O),0===O.grid&&O.fld){var Y=C+O.fld+(O.gxvar?"":I);V="#span_"+Y;Y="radio"===O.ctrltype?"[name="+Y+"]":"#"+Y;try{var ba=O.gxvar&&0<l(V).length?l(V):l(Y)}catch(fa){gx.dbg.logEx(fa,"gxfrmutl.js","registerCtrlsEventHandlers")}W&&(ba.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,O.fld),ba.is("img")&&ba.attr("tabindex","0"),m(ba.get(0),!0)||ba.attr("tabindex",
"0"));ba.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,gx.json.serializeJson([C,D]))}}K&&!this.listeningControlEvents&&(this.listeningControlEvents=!0,l(document.body).on("click keypress",G,t),l(G).each(function(){for(var fa=l(this).parent().first();gx.dom.isRoundedBtnWrapper(fa);)fa.on("click keypress",null,t),fa=fa.parent().first()}))};d.unregisterCtrlsEventHandlers=function(){this.listeningControlEvents&&l(document.body).off("click keypress",t);this.listeningControlEvents=!1};d.clearMultimediaValue=
function(r){r=gx.html.multimediaUpload.getElements(r);r.fileField.onchange(r.fileField);gx.fn.setHidden(r.fileField.id,"");gx.fn.setHidden(r.uriField.id,"");gx.fn.setHidden(r.fileField.id+"_gxBlob","")};d.refreshOlds=function(){for(var r in this.LvlOlds){var q=this.LvlOlds[r];if("function"!=typeof q){var x=gx.fn.lvlGrid(parseInt(r,10));if(0!=x){var D=gx.fn.currentGridRow(x);if("9999"===D)continue}x=q.length;for(var C=0;C<x;C++){var I=q[C],G=I,K="",N=gx.fn.vStructForOld(G);if(N){if(!N.gxgrid||0<N.gxgrid.grid.rows.length)K=
gx.typedOld(N.fld,G,N.type)}else gx.lang.emptyObject(D)||(I+="_"+D),K=gx.fn.getHidden(this.CmpContext+I);"undefined"!=typeof K&&(N||(window[G]=K),this[G]=K)}}}};var p=function(r){this.parms=r;return this};d.refreshExoEventControls=function(r){var q=this;r="GLOBALEVENTS."+r.toUpperCase();(this.EvtParms[r]?this.EvtParms[r][0]:[]).forEach(function(x){if(x=x.fld?q.getValidStructFld(x.fld):null){var D=gx.fn.currentGridRowImpl(x.grid);"function"==typeof x.c2v&&"function"==typeof x.val&&(x.val(D)&&x.c2v(D),
gx.fn.call_v2bc(x,q));!0===x.isuc&&(x.getUCInstance(D)||x.uc).execC2VFunctions()}})};d.addExoEventHandler=function(r,q){var x=function(){var D=gx.O;gx.setGxO(this);this.refreshExoEventControls(r);q.call(this,null,null,new p(Array.prototype.slice.call(arguments,0)));gx.setGxO(D)};gx.fx.obs.addObserver(r,this,x);this.exoEventHandlers=this.exoEventHandlers||{};this.exoEventHandlers[r]=x};d.deleteExoEventHandlers=function(){for(var r in this.exoEventHandlers)this.exoEventHandlers.hasOwnProperty(r)&&gx.fx.obs.deleteObserver(r,
this,this.exoEventHandlers[r])};d.restoreExoEventHandlers=function(){for(var r in this.exoEventHandlers)gx.fx.obs.addObserver(r,this,this.exoEventHandlers[r])};d.deleteEventHandlers=function(){try{this.unregisterCtrlsEventHandlers(),gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this),this.deleteExoEventHandlers(),gx.fx.dom.deleteEventHandlers(this)}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","deleteEventHandlers")}};d.ondestroy=function(){try{this.endFeedback(),this.deleteEventHandlers(),l.each(this.UserControls,
function(r,q){if(!gx.lang.emptyObject(q.destroy))try{q.destroy()}catch(x){gx.dbg.logEx(x,"gxfrmutl.js","ondestroy")}}),this.UserControls=[],delete this.containerControl}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","ondestroy")}};d.onpost=function(){var r=gx.O;gx.setGxO(this);if(this.hasMasterPage())this.MasterPage.onpost();for(var q=this.WebComponents.length,x=0;x<q;x++)this.WebComponents[x].onpost();this.ReadonlyForm&&this.IsComponent&&r!=this&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(r)};
d.roControlsAsHidden=function(){for(var r=this.getControlIds(),q=r.length,x=0;x<q;x++){var D=this.getValidStruct(r[x]);if(0==D.grid&&"function"==typeof D.val){D=this.CmpContext+D.fld;var C=gx.dom.el(D);C&&!gx.fn.isAccepted(C)&&gx.fn.setHidden(D,gx.fn.getControlValue(D))}}};d.onload=function(r,q){l.Deferred();var x=[];gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.screenToVars();gx.wmp(function(){this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this))},
this);var D=this.Grids.length;if(!1!==r)for(var C=0;C<D;C++)x.push(this.Grids[C].loadGrid());D=this.WebComponents.length;for(C=0;C<D;C++)x.push(this.WebComponents[C].onload(r));q?this.afterLoad():gx.wr(this.afterLoad.closure(this),this);gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);var I=this;l.when.apply(l,x).done(function(){I.execV2CFunctions(!0,void 0,!1,function(G){return G.ownerGrid&&G.ownerGrid.parentGrid});I.onLoadDeferred.resolve()})};d.afterLoad=function(){gx.dbg.logPerf("objectAfterLoad_"+
this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0,void 0,!1);this.JustCreated=!1;this.registerCtrlsEventHandlers();gx.$.map(gx.$("input[data-gx-disable], select[data-gx-disable]",this.getContainer()),function(r,q){gx.fn.disableCtrl(r.getAttribute("data-gx-disable"));r.removeAttribute("data-gx-disable")});this===gx.pO&&(gx.ui.controls.actionGroup.init(),gx.dom.indexElements(),
gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.goOnload()};d.onunload=function(r){if(this.hasMasterPage()&&!1!==r)this.MasterPage.onunload();r=this.Grids.length;for(--r;0<=r;r--)delete this.Grids[this.Grids[r].gridName],this.Grids[r].cleanup(),this.Grids.splice(r,1);r=this.WebComponents.length;for(--r;0<=r;r--)delete this.WebComponents[this.WebComponents[r].CmpContext],this.WebComponents[r].onunload(),this.WebComponents.splice(r,1);this.getValidStructFld_cache=
{};gx.fn.cleanAttachedCtrls();this.ondestroy()};d.clean=function(r){this.cleanHiddens();this.onunload(r)};d.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};d.screenToVars=function(){try{for(var r=this.getControlIds(),q=r.length,x=0;x<q;x++){var D=this.getValidStruct(r[x]);D&&0==D.lvl&&"function"==typeof D.c2v&&D.c2v()}}catch(C){gx.dbg.logEx(C,"gxfrmutl.js","screenToVars")}};d.postbackLoad=function(r,q){var x=this.IsComponent&&this.JustCreated;this.hasMasterPage()&&this.MasterPage.postbackLoad(r);
for(var D=this.WebComponents.length,C=0;C<D;C++)this.WebComponents[C].postbackLoad(r);x&&(this.installImageControls(),this.installFlatLevelDatePickers(),this.registerCtrlsEventHandlers());this.execV2CFunctions(!0,x?!1:r);this.conditionsChanged=this.JustCreated=!1;this===gx.pO&&gx.fn.doAttachs(q);gx.goOnload();this.onLoadDeferred.resolve()};d.addDragSource=function(r,q,x,D){gx.fx.dnd.addSource(this,r,q,x,D)};d.addDropTarget=function(r,q,x,D){gx.fx.dnd.addTarget(this,r,q,x,D)};d.addContextSetter=function(r,
q,x,D){gx.fx.ctx.addSetter(this,r,q,x,D)};d.addContextTracker=function(r,q,x,D){gx.fx.ctx.addTracker(this,x,D)};d.addOnMessage=function(r,q,x,D,C){gx.fx.notifications.addTracker(this,r,q,x,D,C)};d.addEventHandler=function(r,q,x){gx.fx.dom.addEventHandler(this,r,q,x)};d.updateBitmapValue=function(r,q,x,D){r=gx.html.multimediaUpload.getContainer(r);"file"==gx.html.multimediaUpload.getOptionValue(r)?this[q]=D:this[x]=D};d.getFeedbackContainer=function(){return this==gx.pO?document.body:this.getContainer()};
d.startFeedback=function(r,q){if(gx.pO.MasterPage&&this===gx.pO.MasterPage)return this.startFeedback.apply(gx.pO,arguments);this.feedbackCallCounter++;q&&gx.fn.disableKeys();var x=!0===r?0:gx.getNotificationDelay();var D=function(){var C=this.getFeedbackContainer();C&&gx.dom.mask(C,x)};1==this.feedbackCallCounter&&(0===x?D.call(this):this.feedbackTimeoutId||(D=gx.lang.doCallTimeout(D,this,arguments,x),this.feedbackTimeoutId=D.t))};d.endFeedback=function(){if(gx.pO.MasterPage&&this===gx.pO.MasterPage)return this.endFeedback.apply(gx.pO);
gx.fn.enableKeys();0<this.feedbackCallCounter&&this.feedbackCallCounter--;if(0==this.feedbackCallCounter){this.feedbackTimeoutId&&(clearTimeout(this.feedbackTimeoutId),this.feedbackTimeoutId=!1);var r=this.getFeedbackContainer();r&&gx.dom.unmask(r)}};d.isFeedbackOn=function(){return 0<this.feedbackCallCounter};(function(){var r=9996,q=this;return function(x){var D="MPW"+r++,C=q.CmpContext+"gxHTMLWrp"+D;q.setComponent({id:v(x),GXClass:null,Prefix:D,lvl:1});return l('<div class="gx-call-target '+x+
' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+C+'"></div></div>')}}).call(this);var v=function(r){return"GX-"+r.toUpperCase()+"-TARGET"};d.initSingleTarget=function(r){var q="MPW"+this.targetsCounter++,x=this.CmpContext+"gxHTMLWrp"+q;this.setComponent({id:v(r),GXClass:null,Prefix:q,lvl:1});return l('<div class="gx-call-target '+r+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+x+'"></div></div>')};d.initTargets=function(){if(gx.pO&&gx.pO.fullAjax&&
this.IsMasterPage){var r=l(gx.dom.form());var q=r.children("[data-abstract-form]").first();q.length||(q=l("<div></div>"),q.append(r.children()),r.append(q));r=q.addClass("gx-center-target");q=this.initSingleTarget("top");var x=this.initSingleTarget("right");var D=this.initSingleTarget("bottom");var C=this.initSingleTarget("left");l('<div id="gx-column-targets"></div>').insertBefore(r).append(C).append(r).append(x).before(q).after(D)}};d.createObjectInTarget=function(r,q,x){r=r.toLowerCase();var D=
A(r);this.createWebComponent(v(r),q,x,void 0,void 0,void 0,function(C){this.targetComponents=this.targetComponents||{};(C=gx.pO.getWebComponent(C))&&(this.targetComponents[r]=C)});l(D.selector).removeClass("empty")};d.restoreTargetComponents=function(){var r;this.targetComponents=this.targetComponents||{};for(r in this.targetComponents)this.targetComponents.hasOwnProperty(r)&&gx.pO.registerComponent(this.targetComponents[r])};var A=function(r){return{selector:".gx-call-target."+r,centerSelector:".gx-center-target"}},
y,F={useCapture:!0};d.showTarget=function(r,q){r=r.toLowerCase();var x=A(r),D=x.selector,C=x.centerSelector;l(x.selector).removeClass("empty");l(D).removeClass("off");l(C).addClass("slideout "+r);l(document.documentElement).addClass("gx-blocking");gx.fx.obs.notify("gx.targetshown",[r]);if(!1!==q){y=function(G){l(G.target).closest(D).length||l(G.target).is(D)||!l(D).is(":visible")||(I.call(this),G.stopImmediatePropagation(),G.preventDefault())}.closure(this);var I=function(){this.hideTarget(r)};gx.evt.attach(document,
"click",y,!1,F);gx.spa.addObserver("onnavigate",this,I)}};d.hideTarget=function(r){r=r.toLowerCase();var q=A(r),x=q.centerSelector;l(q.selector).addClass("off");l(x).removeClass("slideout "+r);l(document.documentElement).removeClass("gx-blocking");gx.evt.detach(document,"click",y,F);gx.fx.obs.notify("gx.targethidden",[r])};d.collapseTarget=function(r){r=r.toLowerCase();var q=A(r),x=q.selector;q=q.centerSelector;this.showTarget(r,!1);l(x).addClass("collapsed");l(q).addClass("collapsed");gx.fx.obs.notify("gx.targetcollapsed",
[r])};d.expandTarget=function(r){r=r.toLowerCase();var q=A(r),x=q.selector;q=q.centerSelector;this.showTarget(r,!1);l(x).removeClass("collapsed");l(q).removeClass("collapsed");gx.fx.obs.notify("gx.targetexpanded",[r])};var H=function(r,q){r=Array.prototype.slice.call(r,0);r.push(q);return r};d.validSrvEvt=function(){return gx.ajax.validSrvEvt.apply(gx.ajax,H(arguments,this))};d.validCliEvt=function(){return gx.ajax.validCliEvt.apply(gx.ajax,H(arguments,this))}})(gx.$);
gx.lang.apply(gx.GxObject.prototype,new gx.util.Observable);gx.printing=function(l){return{IFrameId:"gxprintHelper_Iframe",print:function(c){this.printDirect(c)},printDirect:function(c){if(c){gx.printing._deinit();var d=l("<iframe>");d.attr("id",gx.printing.IFrameId).css({visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"});l(document.body).append(d);d[0].onload=function(){this.contentWindow.print()};d.attr("src",c.reportFile)}},_deinit:function(){l("#"+gx.printing.IFrameId).remove()}}}(gx.$);
gx.thread={Map:function(){this.map={};this.add=function(l,c){this.map[l]=c};this.remove=function(l){delete this.map[l]};this.get=function(l){return null==l?null:this.map[l]};this.first=function(){return this.get(this.nextKey())};this.next=function(l){return this.get(this.nextKey(l))};this.nextKey=function(l){for(var c in this.map){if(!l)return c;l==c&&(l=null)}return null}},Command:function(l,c,d){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=
function(){c.apply(l,d)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(l,c,d,k){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(var b;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+
")",10);try{b=this.c.execute()}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if("function"==typeof k)try{k.call(l,b)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(l,c,d);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,iv:null,keyName:"GX_AJAX_KEY",ivName:"GX_AJAX_IV",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var l=gx.fn.getHidden(this.keyName);gx.lang.emptyObject(l)?this.key=null:this.key=l;null!=this.key&&this.loadSecToken();this.iv=gx.fn.getHidden(this.ivName)},loadSecToken:function(){var l=gx.fn.getHidden(this.secTokenName);gx.lang.emptyObject(l)?this.secToken=null:this.secToken=l},encrypt:function(l,c){try{if(c=null==c?this.key:c,null!=c){var d=this.rijndael;c=d.hexToByteArray(c);
var k=null!=this.iv?d.rijndaelEncrypt(l,c,"CBC",d.hexToByteArray(this.iv)):d.rijndaelEncrypt(l,c);return d.byteArrayToHex(k)}}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","encrypt")}return l},decrypt:function(l,c){try{if(c=null==c?this.key:c,null!=c){var d=this.rijndael;c=d.hexToByteArray(c);var k=d.hexToByteArray(l),a=d.rijndaelDecrypt(k,c,"CBC");return d.byteArrayToString(a)}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","decrypt")}return l},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(l,c){return l<<c|l>>>32-c},AddUnsigned:function(l,c){var d=l&2147483648;var k=c&2147483648;var a=l&1073741824;var b=c&1073741824;l=(l&1073741823)+(c&1073741823);return a&b?l^2147483648^d^k:a|b?l&1073741824?l^3221225472^d^k:l^1073741824^d^k:l^d^k},F:function(l,c,d){return l&c|~l&d},G:function(l,c,d){return l&d|c&~d},H:function(l,c,d){return l^c^d},I:function(l,c,d){return c^(l|~d)},FF:function(l,c,d,k,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(c,
d,k),a),f));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},GG:function(l,c,d,k,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(c,d,k),a),f));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},HH:function(l,c,d,k,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(c,d,k),a),f));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},II:function(l,c,d,k,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(c,d,k),a),f));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},ConvertToWordArray:function(l){var c=l.length;var d=c+8;for(var k=16*((d-d%64)/64+1),a=Array(k-1),b,f=0;f<c;)d=(f-f%4)/4,b=f%4*8,a[d]|=l.charCodeAt(f)<<b,f++;d=(f-f%4)/4;a[d]|=128<<f%4*8;a[k-2]=c<<3;a[k-1]=c>>>29;return a},WordToHex:function(l){var c="",d;for(d=0;3>=d;d++){var k=l>>>8*d&255;k="0"+k.toString(16);c+=k.substr(k.length-2,2)}return c},Utf8Encode:function(l){l=l.replace(/\r\n/g,"\n");for(var c="",d=0;d<l.length;d++){var k=l.charCodeAt(d);
128>k?c+=String.fromCharCode(k):(127<k&&2048>k?c+=String.fromCharCode(k>>6|192):(c+=String.fromCharCode(k>>12|224),c+=String.fromCharCode(k>>6&63|128)),c+=String.fromCharCode(k&63|128))}return c},getHsh:function(l){var c;l=gx.MD5.Utf8Encode(l);l=gx.MD5.ConvertToWordArray(l);var d=1732584193;var k=4023233417;var a=2562383102;var b=271733878;for(c=0;c<l.length;c+=16){var f=d;var g=k;var m=a;var n=b;d=gx.MD5.FF(d,k,a,b,l[c+0],7,3614090360);b=gx.MD5.FF(b,d,k,a,l[c+1],12,3905402710);a=gx.MD5.FF(a,b,d,
k,l[c+2],17,606105819);k=gx.MD5.FF(k,a,b,d,l[c+3],22,3250441966);d=gx.MD5.FF(d,k,a,b,l[c+4],7,4118548399);b=gx.MD5.FF(b,d,k,a,l[c+5],12,1200080426);a=gx.MD5.FF(a,b,d,k,l[c+6],17,2821735955);k=gx.MD5.FF(k,a,b,d,l[c+7],22,4249261313);d=gx.MD5.FF(d,k,a,b,l[c+8],7,1770035416);b=gx.MD5.FF(b,d,k,a,l[c+9],12,2336552879);a=gx.MD5.FF(a,b,d,k,l[c+10],17,4294925233);k=gx.MD5.FF(k,a,b,d,l[c+11],22,2304563134);d=gx.MD5.FF(d,k,a,b,l[c+12],7,1804603682);b=gx.MD5.FF(b,d,k,a,l[c+13],12,4254626195);a=gx.MD5.FF(a,b,
d,k,l[c+14],17,2792965006);k=gx.MD5.FF(k,a,b,d,l[c+15],22,1236535329);d=gx.MD5.GG(d,k,a,b,l[c+1],5,4129170786);b=gx.MD5.GG(b,d,k,a,l[c+6],9,3225465664);a=gx.MD5.GG(a,b,d,k,l[c+11],14,643717713);k=gx.MD5.GG(k,a,b,d,l[c+0],20,3921069994);d=gx.MD5.GG(d,k,a,b,l[c+5],5,3593408605);b=gx.MD5.GG(b,d,k,a,l[c+10],9,38016083);a=gx.MD5.GG(a,b,d,k,l[c+15],14,3634488961);k=gx.MD5.GG(k,a,b,d,l[c+4],20,3889429448);d=gx.MD5.GG(d,k,a,b,l[c+9],5,568446438);b=gx.MD5.GG(b,d,k,a,l[c+14],9,3275163606);a=gx.MD5.GG(a,b,d,
k,l[c+3],14,4107603335);k=gx.MD5.GG(k,a,b,d,l[c+8],20,1163531501);d=gx.MD5.GG(d,k,a,b,l[c+13],5,2850285829);b=gx.MD5.GG(b,d,k,a,l[c+2],9,4243563512);a=gx.MD5.GG(a,b,d,k,l[c+7],14,1735328473);k=gx.MD5.GG(k,a,b,d,l[c+12],20,2368359562);d=gx.MD5.HH(d,k,a,b,l[c+5],4,4294588738);b=gx.MD5.HH(b,d,k,a,l[c+8],11,2272392833);a=gx.MD5.HH(a,b,d,k,l[c+11],16,1839030562);k=gx.MD5.HH(k,a,b,d,l[c+14],23,4259657740);d=gx.MD5.HH(d,k,a,b,l[c+1],4,2763975236);b=gx.MD5.HH(b,d,k,a,l[c+4],11,1272893353);a=gx.MD5.HH(a,b,
d,k,l[c+7],16,4139469664);k=gx.MD5.HH(k,a,b,d,l[c+10],23,3200236656);d=gx.MD5.HH(d,k,a,b,l[c+13],4,681279174);b=gx.MD5.HH(b,d,k,a,l[c+0],11,3936430074);a=gx.MD5.HH(a,b,d,k,l[c+3],16,3572445317);k=gx.MD5.HH(k,a,b,d,l[c+6],23,76029189);d=gx.MD5.HH(d,k,a,b,l[c+9],4,3654602809);b=gx.MD5.HH(b,d,k,a,l[c+12],11,3873151461);a=gx.MD5.HH(a,b,d,k,l[c+15],16,530742520);k=gx.MD5.HH(k,a,b,d,l[c+2],23,3299628645);d=gx.MD5.II(d,k,a,b,l[c+0],6,4096336452);b=gx.MD5.II(b,d,k,a,l[c+7],10,1126891415);a=gx.MD5.II(a,b,
d,k,l[c+14],15,2878612391);k=gx.MD5.II(k,a,b,d,l[c+5],21,4237533241);d=gx.MD5.II(d,k,a,b,l[c+12],6,1700485571);b=gx.MD5.II(b,d,k,a,l[c+3],10,2399980690);a=gx.MD5.II(a,b,d,k,l[c+10],15,4293915773);k=gx.MD5.II(k,a,b,d,l[c+1],21,2240044497);d=gx.MD5.II(d,k,a,b,l[c+8],6,1873313359);b=gx.MD5.II(b,d,k,a,l[c+15],10,4264355552);a=gx.MD5.II(a,b,d,k,l[c+6],15,2734768916);k=gx.MD5.II(k,a,b,d,l[c+13],21,1309151649);d=gx.MD5.II(d,k,a,b,l[c+4],6,4149444226);b=gx.MD5.II(b,d,k,a,l[c+11],10,3174756917);a=gx.MD5.II(a,
b,d,k,l[c+2],15,718787259);k=gx.MD5.II(k,a,b,d,l[c+9],21,3951481745);d=gx.MD5.AddUnsigned(d,f);k=gx.MD5.AddUnsigned(k,g);a=gx.MD5.AddUnsigned(a,m);b=gx.MD5.AddUnsigned(b,n)}return(gx.MD5.WordToHex(d)+gx.MD5.WordToHex(k)+gx.MD5.WordToHex(a)+gx.MD5.WordToHex(b)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(l){try{if(window.atob)return decodeURIComponent(atob(l).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(c){}return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(l)))},encode:function(l){try{if(window.btoa)return btoa(encodeURIComponent(l).replace(/%([0-9A-F]{2})/g,function(c,d){return String.fromCharCode("0x"+d)}))}catch(c){}return this.encodeImpl(this.UTF8BytesFromString(l))},bytesFromUTF8Bytes:function(l){for(var c=
[],d=0,k,a,b=l.length;d<b;)k=l[d],128>k?(c.push(k),d++):191<k&&224>k?(a=l[d+1],c.push((k&31)<<6|a&63),d+=2):(a=l[d+1],c.push((k&15)<<12|(a&63)<<6|l[d+2]&63),d+=3);return c},UTF8BytesFromString:function(l){l=l.replace(/\r\n/g,"\n");for(var c=[],d=l.length,k=0;k<d;k++){var a=l.charCodeAt(k);128>a?c.push(a):(127<a&&2048>a?c.push(a>>6|192):(c.push(a>>12|224),c.push(a>>6&63|128)),c.push(a&63|128))}return c},bytesToString:function(l){for(var c=gx.util.browser.isChrome()?32765:5E4,d=[];l.length>=c;)d.push(eval("String.fromCharCode("+
l.slice(0,c).join(",")+");")),l=l.slice(c);0!=l.length&&d.push(eval("String.fromCharCode("+l.join(",")+");"));return d.join("")},decodeImpl:function(l){var c=this.f64,d=[],k=0;l=l.replace(/\n|\r/g,"");l=l.replace(/=/g,"");for(var a=l.length;k<a;)d[d.length]=c[l.charAt(k)]<<2|c[l.charAt(k+1)]>>4,d[d.length]=(c[l.charAt(k+1)]&15)<<4|c[l.charAt(k+2)]>>2,d[d.length]=(c[l.charAt(k+2)]&3)<<6|c[l.charAt(k+3)],k+=4;2==l.length%4&&(d=d.slice(0,d.length-2));3==l.length%4&&(d=d.slice(0,d.length-1));return d},
encodeImpl:function(l){var c=this.b64,d=[],k=0,a=l.length;1==a%3&&(l[l.length]=0,l[l.length]=0);2==a%3&&(l[l.length]=0);for(var b=l.length;k<b;)d[d.length]=c[l[k]>>2],d[d.length]=c[(l[k]&3)<<4|l[k+1]>>4],d[d.length]=c[(l[k+1]&15)<<2|l[k+2]>>6],d[d.length]=c[l[k+2]&63],k+=3;1==a%3&&(d[d.length-1]=d[d.length-2]="=");2==a%3&&(d[d.length-1]="=");return d.join("")},_init:function(){for(var l=0;64>l;l++){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l);this.b64[l]=c;this.f64[c]=
l}}};
gx.webSocket=function(l){this.reconnect=!0;this.initialized=this.opened=!1;this.retryCount=0;this.maxRetries=l.maxRetries||6;this.retryDelay=l.retryDelay||2500;this._init=function(k){if(!this.initialized&&"WebSocket"in window){k=k||{};k.clientId=k.clientId||"";k.basePath=k.basePath||"";this.namespace="."+k.namespace;try{var a=k.wsProtocol+k.host+k.basePath+k.resourceUrl+k.clientId;this.create(k.wsURL||a);this.initialized=!0;this.wsOpts=k}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","Could not initialize WebSocket")}}};var c=
this,d=function(){this.initialized=this.opened=!1;this.reconnect&&(-1==this.maxRetries||this.retryCount<this.maxRetries)&&(this.retryCount++,this.retryHandle=gx.lang.doCallTimeout(this._init,this,[this.wsOpts],this.retryDelay*this.retryCount))};this.create=function(k){try{this.ws=new WebSocket(k),this.ws.onopen=function(){c.opened=!0;c.retryCount=0;c.stopRetry=!1;gx.fx.obs.notify("gx.ws.onOpen"+c.namespace,[])},this.ws.onerror=function(a){gx.dbg.logDebug("gx.webSocket - Error: "+a.data);gx.fx.obs.notify("gx.ws.onError"+
c.namespace,[a.data]);c.stopRetry||d.apply(c);c.stopRetry=!1},this.ws.onmessage=function(a){gx.dbg.logDebug("gx.webSocket - New Message: "+a.data);gx.fx.obs.notify("gx.ws.onMessage"+c.namespace,[a.data])},this.ws.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");c.opened?(c.retryCount=0,d.apply(c)):gx.fx.obs.notify("gx.ws.OnClose"+c.namespace,[])}}catch(a){gx.lang.doCallTimeout(gx.fx.obs.notify,gx.fx.obs,["gx.ws.onCtxError"+c.namespace,[a]],100)}};window.onbeforeunload=function(){c.opened&&
c.ws.close()};this.close=function(){c.opened&&(c.opened=!1,c.ws.close());c.stopRetry=!0;c.retryHandle&&clearInterval(c.retryHandle.t)};this.send=function(k){c.ws?c.ws.send(k):gx.dbg.logDebug("gx.webSocket - ws is not initialized")};this._init(l)};
gx.util.alert=function(l){var c=!1,d=!1,k=function(b){b=b||{};var f=b.message||"",g=b.cssClass||"",m=b.cssDisBtnClass||"",n=b.dataDisAtt;b=b.dismissmitAt;c&&0!=l("#gx-main-error").length||(l(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'></div>"),c=!0);a();var t=l("#gx-main-error");t.html('<div class="'+g+'"><button type="button" class="'+m+'" data-dismiss="'+n+'" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;</button><span>'+f+"</span></div>");t.slideDown();
d=!0;b&&window.setTimeout(function(){a()},b)},a=function(){d&&(l("#gx-main-error").fadeOut(500,function(){l(this).empty()}),d=!1)};return{showMessage:function(b,f){l("#gx-main-error");k(l.extend({message:b,cssClass:"alert alert-warning alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},f))},showError:function(b,f){l("#gx-main-error");k(l.extend({message:b,cssClass:"alert alert-danger alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},f))},hide:a}}(gx.$);
gx.geolocation=function(l){var c;return{attachedCtrls:c,_init:function(){c=[]},getMyPosition:function(d){d.attachedCtrl=l("#"+d.id.replace(/_geoLocMe$/,""))[0];c.push(d);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(gx.pO.clearMessages(),gx.pO.addMessage("Your browser does not support HTML5 Geolocalization"),gx.pO.refreshOutputs([]))},positionHandler:function(d){var k=c.shift(),a=gx.fn.validStruct(gx.O.getValidStructId(k.attachedCtrl.id));
d=d.coords.latitude+","+d.coords.longitude;gx.evt.setEventRow(gx.pO,k.attachedCtrl);a.v2v&&(a.v2v(d),a.v2c());a.gxgrid&&a.gxgrid.updateControlValue(a,!0)},handle_errors:function(d){c.shift();switch(d.code){case d.PERMISSION_DENIED:d="user did not share geolocation data";break;case d.POSITION_UNAVAILABLE:d="could not detect current position";break;case d.TIMEOUT:d="retrieving position timed out";break;default:d="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(d);gx.pO.refreshOutputs([])}}}(gx.$);
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(l,c){var d=l.slice(0,c);return l=l.slice(c).concat(d)},xtime:function(l){l<<=1;return l&256?l^283:l},mult_GF256:function(l,c){var d,k=0;for(d=1;256>d;d*=2,c=this.xtime(c))l&d&&(k^=c);return k},byteSub:function(l,c){c="encrypt"==c?this.SBox:this.SBoxInverse;for(var d=0;4>d;d++)for(var k=0;k<this.Nb;k++)l[d][k]=c[l[d][k]]},shiftRow:function(l,c){for(var d=
1;4>d;d++)l[d]="encrypt"==c?this.cyclicShiftLeft(l[d],this.shiftOffsets[this.Nb][d]):this.cyclicShiftLeft(l[d],this.Nb-this.shiftOffsets[this.Nb][d])},mixColumn:function(l,c){for(var d=[],k=0;k<this.Nb;k++){for(var a=0;4>a;a++)d[a]="encrypt"==c?this.mult_GF256(l[a][k],2)^this.mult_GF256(l[(a+1)%4][k],3)^l[(a+2)%4][k]^l[(a+3)%4][k]:this.mult_GF256(l[a][k],14)^this.mult_GF256(l[(a+1)%4][k],11)^this.mult_GF256(l[(a+2)%4][k],13)^this.mult_GF256(l[(a+3)%4][k],9);for(a=0;4>a;a++)l[a][k]=d[a]}},addRoundKey:function(l,
c){for(var d=0;d<this.Nb;d++)l[0][d]^=c[d]&255,l[1][d]^=c[d]>>8&255,l[2][d]^=c[d]>>16&255,l[3][d]^=c[d]>>24&255},keyExpansion:function(l){var c=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var d=0;d<this.Nk;d++)c[d]=l[4*d]|l[4*d+1]<<8|l[4*d+2]<<16|l[4*d+3]<<24;for(d=this.Nk;d<this.Nb*(this.Nr+1);d++)l=c[d-1],0==d%this.Nk?l=(this.SBox[l>>8&255]|this.SBox[l>>16&255]<<8|this.SBox[l>>24&255]<<16|this.SBox[l&255]<<24)^this.Rcon[Math.floor(d/
this.Nk)-1]:6<this.Nk&&4==d%this.Nk&&(l=this.SBox[l>>24&255]<<24|this.SBox[l>>16&255]<<16|this.SBox[l>>8&255]<<8|this.SBox[l&255]),c[d]=c[d-this.Nk]^l;return c},Round:function(l,c){this.byteSub(l,"encrypt");this.shiftRow(l,"encrypt");this.mixColumn(l,"encrypt");this.addRoundKey(l,c)},InverseRound:function(l,c){this.addRoundKey(l,c);this.mixColumn(l,"decrypt");this.shiftRow(l,"decrypt");this.byteSub(l,"decrypt")},FinalRound:function(l,c){this.byteSub(l,"encrypt");this.shiftRow(l,"encrypt");this.addRoundKey(l,
c)},InverseFinalRound:function(l,c){this.addRoundKey(l,c);this.shiftRow(l,"decrypt");this.byteSub(l,"decrypt")},encrypt:function(l,c){var d;if(l&&8*l.length==this.blockSizeInBits&&c){l=this.packBytes(l);this.addRoundKey(l,c);for(d=1;d<this.Nr;d++)this.Round(l,c.slice(this.Nb*d,this.Nb*(d+1)));this.FinalRound(l,c.slice(this.Nb*this.Nr));return this.unpackBytes(l)}},decrypt:function(l,c){var d;if(l&&8*l.length==this.blockSizeInBits&&c){l=this.packBytes(l);this.InverseFinalRound(l,c.slice(this.Nb*this.Nr));
for(d=this.Nr-1;0<d;d--)this.InverseRound(l,c.slice(this.Nb*d,this.Nb*(d+1)));this.addRoundKey(l,c);return this.unpackBytes(l)}},byteArrayToString:function(l){for(var c="",d=l.length,k=0;k<d;k++)0!=l[k]&&(c+=String.fromCharCode(l[k]));return c},stringToByteArray:function(l){for(var c=[],d=l.length,k=0;k<d;k++)c[c.length]=l.charCodeAt();return c},byteArrayToHex:function(l){var c="";if(l){for(var d=l.length,k=0;k<d;k++)c+=(16>l[k]?"0":"")+l[k].toString(16);return c}},hexToByteArray:function(l){var c=
[];if(!(l.length%2)){if(0==l.indexOf("0x")||0==l.indexOf("0X"))l=l.substring(2);for(var d=l.length,k=0;k<d;k+=2)c[Math.floor(k/2)]=parseInt(l.slice(k,k+2),16);return c}},packBytes:function(l){var c=[];if(l&&!(l.length%4)){c[0]=[];c[1]=[];c[2]=[];c[3]=[];for(var d=l.length,k=0;k<d;k+=4)c[0][k/4]=l[k],c[1][k/4]=l[k+1],c[2][k/4]=l[k+2],c[3][k/4]=l[k+3];return c}},unpackBytes:function(l){for(var c=[],d=l[0].length,k=0;k<d;k++)c[c.length]=l[0][k],c[c.length]=l[1][k],c[c.length]=l[2][k],c[c.length]=l[3][k];
return c},formatPlaintext:function(l){var c=this.blockSizeInBits/8,d;if("string"==typeof l||l.indexOf){l=l.split("");var k=l.length;for(d=0;d<k;d++)l[d]=l[d].charCodeAt(0)&255}for(d=c-l.length%c;0<d&&d<c;d--)l[l.length]=0;return l},rijndaelEncrypt:function(l,c,d,k){var a,b=this.blockSizeInBits/8;if(l&&c&&8*c.length==this.keySizeInBits){"CBC"!=d&&(d="ECB",k=[]);l=this.formatPlaintext(l);c=this.keyExpansion(c);for(var f=0;f<l.length/b;f++){var g=l.slice(f*b,(f+1)*b);if("CBC"==d)for(a=0;a<b;a++)g[a]^=
k[f*b+a];k=k.concat(this.encrypt(g,c))}return k}},rijndaelDecrypt:function(l,c,d){var k=this.blockSizeInBits/8,a=[],b;if(l&&c&&"string"!=typeof l&&8*c.length==this.keySizeInBits){d||(d="ECB");c=this.keyExpansion(c);for(b=l.length/k-1;0<b;b--){var f=this.decrypt(l.slice(b*k,(b+1)*k),c);if("CBC"==d)for(var g=0;g<k;g++)a[(b-1)*k+g]=f[g]^l[(b-1)*k+g];else a=f.concat(a)}"ECB"==d&&(a=this.decrypt(l.slice(0,k),c).concat(a));return a}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/
32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.popup=function(l){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.top=this.position=this.height=this.width=0;this.cssClass="";this.left=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};var c=function(d){0===l(this.getEl()).find(d.target).length&&(l(document.body).off("click",c),this.close())}.closure(this);this.open=function(d){this.state=
"opening";this.id=d.id||"gxdialog";this.callbacks=d.callbacks;var k=void 0===d.resizable||d.resizable,a="PopupBorder gx-popup gx-popup-default";this.cssClass&&(a=a.replace("gx-popup-default",""),a+=" "+this.cssClass);gx.popup.ext.window(this,!1,0,0,d.w,d.h,d.contentHtml,"white",d.title,"black","black","black","black",void 0===d.isModal||d.isModal,!0,!0,k,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",a,"PopupShadow",
d.showParentPopups,!1,d.callbacks,d.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened";setTimeout(function(){l(document.body).on("click",c)},1)};this.close=function(){l(document.body).off("click",c);this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};
this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(c,d){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=d?d:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){gx.lang.isArray(c)?(this.url=c[0],this.autoresize=c[1],this.width=c[2],this.height=c[3],this.position=c[4],this.top=
c[5],this.left=c[6],this.OncloseCmds=c[7]||[],this.ReturnParms=c[8]||[],this.cssClass=c[9]):c&&c.Url&&(this.url=c.Url,"undefined"!=typeof c.Autoresize&&(this.autoresize=c.Autoresize),"undefined"!=typeof c.Width&&(this.width=c.Width),"undefined"!=typeof c.Height&&(this.height=c.Height),"undefined"!=typeof c.Position&&(this.position=c.Position),"undefined"!=typeof c.Top&&(this.top=c.Top),"undefined"!=typeof c.Left&&(this.left=c.Left),"undefined"!=typeof c.Class&&(this.cssClass=c.Class),"undefined"!=
typeof c.OncloseCmds&&(this.OncloseCmds=c.OncloseCmds),"undefined"!=typeof c.ReturnParms&&(this.ReturnParms=c.ReturnParms))};this.open=function(){this.state="opening";var k=gx.popup.gxOpener();this.lvl=-1;this.lvl=k&&k.gx&&k.gx.popup.ext.win&&k.gx.popup.ext.win.gx?k.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;k=this.url;if(this.IsPrompt){gx.popup.currentPrompt=
this;for(var a="?",b,f,g=this.ReturnParms.length,m=0;m<g;m++){b="";if(gx.lang.emptyObject(this.ReturnParms[m].Ctrl))if("string"==typeof this.ReturnParms[m])b=gx.util.urlValue(this.ReturnParms[m])+",";else if("number"==typeof this.ReturnParms[m])b=gx.util.urlValue(this.ReturnParms[m].toString())+",";else if(this.CustomRenderGrid)f=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[m].id),gx.lang.emptyObject(f)||(b=gx.util.urlValue(f+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[m].id))continue;
else f=gx.fn.getHidden(this.ReturnParms[m].id),gx.lang.emptyObject(f)||(b=gx.util.urlValue(f)),b+=",";else b=gx.util.urlValue(this.ReturnParms[m].Ctrl)+",";a="out"==this.ReturnParms[m].IOType?a+",":a+b;this.ReturnParms[m].isLastKey&&gx.fn.isOutputParm(this.ReturnParms[m])&&!this.PromptIsGet&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);k+=a}a=document.activeElement;gx.csv.lastControl&&a&&gx.util.inArray(a.tagName,["BODY",
"FORM"])&&(a=gx.csv.lastControl);a&&(a&&(this.callerActiveElement=a),a.blur&&a.blur());this.InternalPopup=gx.popup.Impl(this,k,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var k=[];if(this.IsPrompt)for(var a=this.ReturnParms.length,b=0;b<a;b++){var f=this.ReturnParms[b];gx.fn.isOutputParm(f)&&k.push(f)}else return this.ReturnParms;return k};this.close=function(k,a,b){a=a||{};this.state="closing";k&&(this.RawReturnedParms=k);var f=window;
gx.popup.ext.win?(f=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var g=function(){var t=l.Deferred();this.setCellValue.apply(this,arguments);return t.resolve()},m=function(){var t;gx.evt.evtPromptMouseDown=!0;this.beforeClose&&this.beforeClose(k);!this.isPdf&&this.frameWindow&&this.frameWindow.gx&&(this.IsPrompt&&(null==this.parentPopup?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=
null),this.frameWindow.gx.evt.onunload.call(this.frameWindow),gx.util.browser.isIE()||(this.frameDocument.gxPopup=null),this.frameWindow=this.frameDocument=null);gx.popup.ext.close(this);var w=this.getOutputParms(),u=function(){a&&!0===a.ignoreCmds&&(this.OncloseCmds=[]);gx.ajax.dispatchCommands(this.OncloseCmds,void 0,{updateParms:w});this.cleanup();this.state="closed";this.afterClose&&this.afterClose(k);this.parentPopup?this.parentPopup.frameWindow.gx.fx.obs.notify("popup.afterclose",[this]):gx.fx.obs.notify("popup.afterclose",
[this])}.closure(this),B=!0;gx.csv.lastId=0;if(null!=k&&this.IsPrompt){if(b&&a.parmsMetadata&&a.updateParms){var p=a.parmsMetadata.length;for(t=0;t<p;t++)B=a.parmsMetadata[t],gx.util.inArray(B,a.updateParms)&&(k[t]=b[B])}p=k.length;var v=gx.popup.assignPromptFields,A=gx.popup;gx.lang.emptyObject(this.CustomRenderGrid)||(v=g,A=this.CustomRenderGrid.grid);B=!1;v.call(A,w,k).then(function(){var y=null;p=w.length;for(t=0;t<p;t++){var F=w[t].Ctrl;gx.fn.isAccepted(F)&&(y=F)}y&&gx.TabOnPrompSelect&&(F=gx.fn.getControlIndex(y),
-1!=F&&(y=gx.fn.searchFocus(F+1,!0)));gx.fn.setFocus(y);if(this.PromptIsGet)if(this.Opener.fullAjax){var H;(F=gx.csv.ctxControlId(y.id))&&(H=gx.O.getValidStructFld(F));H&&gx.csv.validControls(H.id,H.id+1,!0,this.Opener)}else{gx.csv.loadScreen(function(){gx.fn.setFocus(y);u()});return}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),"undefined"==typeof window.GXPkIsDirty?!1:window.GXPkIsDirty,null,"eng")}catch(r){gx.dbg.logEx(r,
"gxpopup.js","close")}u()}.closure(this))}else k&&w&&w instanceof Array&&0<w.length&&gx.fn.setReturnParms(this.Opener,w,k,this.CustomRenderGrid);B&&u()},n=gx.util.browser;n.isFirefox()||n.isIE()?f.setTimeout(m.closure(this),10):m.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload(!1)};this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null,
this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null,this.isClosing=!1}catch(k){gx.dbg.logEx(k,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},getWindowIframeElement:function(c){var d;c=c.document.getElementsByTagName("iframe");for(var k=0;k<c.length&&!d;k++){var a=c[k];a.contentWindow===window&&(d=a)}return d},gxOpener:function(){try{parent.gxTestAvailable=1;var c=this.getWindowIframeElement(parent);return c&&void 0!==l(c).attr("data-gx-popup-ct")?parent:
window}catch(d){}return null},setFocus:function(){var c=this.getPopup();c&&c.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},waitCallback:function(c){var d=gx.popup.getPopup();d?"opened"==d.state?c():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[c],50):c()},getPopup:function(){var c=this.gxOpener();try{if(!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(c.gx))return c.gx.popup.currentPopup}catch(d){}return null},setPopup:function(c){this.currentPopup=
c},open:function(c,d){return this.openPopup(c,d)},openUrlToOpenPopupParms:function(c,d,k){var a=1,b=0,f=0,g=0,m=0,n=0;k&&(a=k[0],b=k[1],f=k[2],g=k[3],m=k[4],n=k[5]);return[c,a,b,f,g,m,n,[],d]},openUrl:function(){return this.openPopup(this.openUrlToOpenPopupParms.apply(this,arguments))},openPopup:function(c,d){var k=this.getPopup();d=d||gx.O;var a,b;if(k&&(k.Opener===d||k.Opener.MasterPage&&k.Opener.MasterPage===d)&&gx.lang.isArray(c))k.OncloseCmds.push({popup:c});else{var f=new this.Popup(c,!1);f.Opener=
d;c=0;for(k=f.ReturnParms.length;c<k&&!((b=gx.fn.vStructForVar(f.ReturnParms[c]))&&b.grid&&(a=d.getGridById(b.grid)));c++);a&&a.isUsercontrol&&(f.CustomRenderGrid=a);f.open();return f}},openDialog:function(c){var d=new this.Dialog;d.Opener=gx.O;d.open(c);return d},openPrompt:function(c,d,k,a,b,f){if(null==gx.popup.currentPrompt){a&&gx.setGxO(a,b);var g=document.activeElement,m=!1,n;if(g){var t=gx.fn.rowGridId(g);g=gx.fn.controlRowIndex(g);if(!gx.lang.emptyObject(t)&&!gx.lang.emptyObject(g)){gx.csv.lastGrid=
t;gx.fn.setCurrentGridRow(t,g);t=gx.O;g=gx.csv.lastId;var w=gx.fn.validStruct(g,t);if(w)var u=gx.csv.lastRow[w.grid];gx.csv.checkRowChange(g,!1,t,u)}}else{u=0;for(g=d.length;u<g;u++)if(d[u].IOType){t=d[u].id;break}t&&(w=gx.O.getValidStructFld(t),!gx.lang.emptyObject(w)&&(n=gx.O.getGridById(w.grid)))&&(m=n.isUsercontrol)&&(t=n.gridId+"",g=gx.lang.emptyObject(n.grid.getSelectedRow)?void 0:gx.text.padl(n.grid.getSelectedRow()+"",4,"0"),gx.lang.emptyObject(t)||gx.lang.emptyObject(g)||(gx.csv.lastGrid=
t,gx.fn.setCurrentGridRow(t,g)))}if(f||this.outParmsAccepted(d)||m)c=new this.Popup([c,1,0,0,0,0,0,[],d],!0),c.IsMod=k,c.Opener=gx.getObj(a,b),m&&(c.CustomRenderGrid=n),c.open()}},outParmsAccepted:function(c){for(var d=c.length,k=!1,a=0;a<d;a++){var b=c[a];gx.fn.isOutputParm(b)&&(k=!0);if(gx.fn.isOutputParm(b)&&b.Ctrl&&gx.fn.isAccepted(b.Ctrl))return!0}return!k},gxReturn:function(c){gx.fn.closeWindow(c)},parmId:function(c){c=gx.dom.id(c);0===c.indexOf("span_")&&(c=c.substring(5));return c},popuplvl:function(){var c=
gx.popup.getPopup();return c&&c.window?c.window.gx.popup.lvl:-1},assignPromptFields:function(c,d){var k=[],a=gx.O,b=[],f=99999,g=Math.min(c.length,d.length),m=0;for(m=0;m<g;m++){var n=c[m],t=d[m];if(n.Ctrl&&!gx.lang.emptyObject(n)){gx.csv.pkDirty=n.isKey;"checkbox"==n.Ctrl.type&&n.Ctrl.value!=t&&(n.Ctrl.checked=!n.Ctrl.checked);n.Ctrl.value!=t&&n.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0);var w=gx.csv.ctxControlId(this.parmId(n.Ctrl)),u=a.getValidStructFld(w);b.push({idx:u?u.id:f++,ParmCtrl:n.Ctrl,
ControlId:w,VStruct:u,PValue:t})}}b.sort(function(B,p){return B.idx<p.idx?-1:B.idx>p.idx?1:0});for(m=0;m<b.length;m++)this.assignPromptFieldValue(b[m],a);for(m=0;m<b.length;m++)k.push(this.assignAndValidatePromptField(b[m],a));return l.when.apply(l,k)},assignPromptFieldValue:function(c,d){var k=c.VStruct,a=c.ParmCtrl;c=c.PValue;gx.lang.emptyObject(k)||gx.lang.emptyObject(k.v2c)||"date"!=k.type&&"dtime"!=k.type?(gx.fn.setControlValue(this.parmId(a),c,0),k.c2v(),"function"===typeof k.v2bc&&k.v2bc.call(d)):
(k.v2v(c),"function"===typeof k.v2bc&&k.v2bc.call(d),gx.fn.v2c(k,c));gx.fn.setControlGxValid(a,"0");gx.evt.execOnchange(a);d=gx.dom.byId("span_"+a.name);null!=d&&(0===d.childNodes.length&&d.appendChild(gx.popup.gxOpener().document.createTextNode("")),d.childNodes[0].nodeValue=c);k&&k.gxgrid&&k.gxgrid.updateControlValue(k,!1)},assignAndValidatePromptField:function(c,d){var k=l.Deferred(),a=!0,b=c.ControlId,f=c.VStruct,g,m=function(){gx.popup.assignPromptFieldValue(c,d);gx.util.balloon.clear(b);g&&
(gx.O.fromValid>g&&(gx.O.fromValid=g),gx.O.toValid=g+1,gx.csv.validateAll().done(function(){if(!gx.lang.emptyObject(f.rgrid)){for(var n=f.rgrid.length,t=0;t<n;t++)f.rgrid[t].filterVarChanged();k.resolve()}}));k.resolve()}.closure(this);!gx.lang.emptyObject(f)&&(g=d.getValidStructId(f.fld))&&(g>gx.O.toValid&&(d.toValid=g),a=!1,gx.csv.validateAll().done(m));a&&k.resolve();return k.promise()},autofit:function(){var c=this.getPopup();gx.lang.emptyObject(c)||"opened"!=c.state||this.ext.autofit(c,null,
!1)},Impl:function(c,d,k,a,b,f,g,m){var n="PopupBorder gx-popup gx-popup-default";c.cssClass&&(n=n.replace("gx-popup-default",""),n+=" "+c.cssClass);return new this.ext.popUp(c,k,f,m,g,a,b,"gxp",d,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",n,"PopupShadow",void 0)},setZIndex:function(c){c=
gx.dom.getStyle(c,"zIndex");isNaN(c)&&(c=999);c++;this.zindex=c;this.ext.zdx=c},ext:{currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,win:null,doc:null,compatMode:function(){return!gx.runtimeTemplates||gx.util.browser.isIE()&8>=gx.util.browser.ieVersion()},hide:function(c){var d=gx.dom.byId;gx.popup.ext.compatMode()&&(d(c+"_t").style.visibility="hidden",d(c+"_c").style.visibility="hidden",d(c+"_rs").style.visibility="hidden");d(c+"_b").style.visibility="hidden"},show:function(c){var d=
gx.dom.byId,k=l("#"+c+"_b");gx.popup.ext.compatMode()?(d(c+"_t").style.visibility="visible",d(c+"_c").style.visibility="visible",d(c+"_rs").style.visibility="visible"):l(document.body).toggleClass("gx-popup-opened",!0);k.css("visibility","visible")},close:function(c,d){l(document.body).toggleClass("gx-popup-opened",!1);if(!d||"function"!=typeof d||!1!==d()){c.draggable&&c.draggable.deinit();c.resizable&&c.resizable.deinit();gx.popup.ext.iFrame=null;gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=
null;gx.popup.ext.currRS=null;var k=c.id;d=document.getElementById(k+"_b");k=document.getElementById(k+"_ifrm");gx.popup.ext.deinitmodal(c);gx.popup.setPopup(c.parentPopup);var a=c.callerActiveElement;a&&a.focus&&a.focus();c.parentPopup?c.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[c]):gx.fx.obs.notify("popup.close",[c]);k&&(k.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?d.parentNode.removeChild(d):gx.dom.removeControlSafe(d)}},move:function(c,
d,k){c=l("#"+c+"_b");c.toggleClass("gx-popup-centered",!1);void 0!==d?c.css({left:Math.max(d,0)}).toggleClass("gx-popup-horizontal-center",!1):c.toggleClass("gx-popup-horizontal-center",!0);void 0!==k&&c.css({top:Math.max(k,0)})},resize:function(c,d,k){var a=gx.dom.byId;if(a(c+"_rs").rsEnable){var b=a(c+"_rs"),f=a(c+"_b"),g=a(c+"_t");a=a(c+"_c");gx.popup.ext.compatMode()?(b.style.left=Math.max(d,92)+"px",b.style.top=Math.max(k,72)+"px",f.style.width=Math.max(d+8,100)+"px",f.style.height=Math.max(k+
8,80)+"px",g.style.width=Math.max(d+3,92)+"px",a.style.width=Math.max(d-5,87)+"px",a.style.height=Math.max(k-28,44)+"px"):(c=document.getElementById(c+"_ifrm"),l(c).css({width:d,height:k}));this.resizePopupContent(d,k)}},movepopup:function(){null!=this.currIDb&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff);null!=this.currRS&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(){gx.popup.ext.currRS=null},startRS:function(c,
d){var k=gx.popup.ext,a=c.pageX;c=c.pageY;var b=l(d);gx.popup.ext.compatMode()?(k.rsxoff=parseInt(d.style.left,0)-a,k.rsyoff=parseInt(d.style.top,0)-c):(k.rsxoff=b.position().left-a,k.rsyoff=b.position().top-c);k.currRS=d;return!1},changez:function(c){c=null!=c?c:this;var d=gx.popup.ext,k=gx.dom.byId;c.style.zIndex=++d.zdx;k(c.cid+"_rs").style.zIndex=++d.zdx},stopdrag:function(){gx.popup.ext.currIDb=null},grab_id:function(c,d){var k=gx.popup.ext,a=gx.dom.byId;d=a(d.cid+"_b");gx.evt.mouse.update(c);
c=gx.evt.mouse.x;a=gx.evt.mouse.y;gx.popup.ext.compatMode()?(k.xoff=parseInt(d.style.left,0)-c,k.yoff=parseInt(d.style.top,0)-a):(k.xoff=l(d).position().left-c,k.yoff=l(d).position().top-a);k.currIDb=d;return!1},subBox:function(c,d,k,a,b,f){b=document.createElement("div");b.setAttribute("id",f);b.style.position="absolute";b.style.left=c+"px";b.style.top=d+"px";b.style.width=k+"px";b.style.height=a+"px";b.style.visibility="visible";b.style.padding="0px";b.style.width=k+"px";return b},window:function(){gx.popup.ext.compatMode()?
this.window_compat.apply(this,arguments):this.window_responsive.apply(this,arguments)},window_responsive:function(c,d,k,a,b,f,g,m,n,t,w,u,B,p,v,A,y,F,H,r,q,x,D,C,I,G,K,N){I=void 0!==I?I:gx.popup.showParentPopups;d=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);a=this.win.gx.dom.byId.closure(this.win.gx.dom);k=l("<div/>",{id:d+"_b",style:v?"":"visibility:hidden;"})[0];l(k).addClass("gx-responsive-popup gx-popup-centered "+D+" gx-popup-initial");D=l("<div/>",{id:d+"_t"})[0];
D.className=r;D.innerHTML='<span id="'+d+'_gxtitle" class="PopupTitle">'+n+'</span><span class="'+q+'"; id="'+d+'_cls"></span>';n=l("<div/>",{id:d+"_c"})[0];n.className=x;"string"==typeof g?n.innerHTML=g:n.appendChild(g);k.appendChild(D);k.appendChild(n);N=gx.dom.byId(N)||this.doc.body;N.appendChild(k);v||this.hide(d);g=a(d+"_b");v=a(d+"_cls");g.cid=d;g.isExt=F?!0:!1;F=a(d+"_t");F.cid=d;y&&(c.resizable=new gx.popup.ext.resizable(g,d,H,k));A&&(c.draggable=new gx.popup.ext.draggable(g,F));gx.evt.attach(v,
"click",K.close||this.close.closure(this,[c,K.beforeClose]));(p||I)&&this.initmodal(c,I,G)},resizable:function(c,d,k,a){var b,f=!1,g,m,n,t,w;this.init=function(u,B,p,v){var A=l("<div/>",{id:B+"_rs"})[0];A.className+="gx-popup-resize";A.innerHTML='<img src="'+p+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'">';A.rsEnable=!0;A.style.cursor="se-resize";A.cid=B;v.appendChild(A);n=u;A.firstChild.addEventListener("dragstart",function(y){gx.evt.cancel(y,!0)},!0);t=this.onMouseup.closure(this);
w=this.onMousemove.closure(this);A.addEventListener("mousedown",this.onMousedown.closure(this));document.addEventListener("mouseup",t);document.addEventListener("mousemove",w);b=!0};this.deinit=function(){b&&(document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",w),b=n=null)};this.onMousemove=function(u){if(f){var B=l(n).find("iframe");l("iframe").css("pointer-events","none");var p=l(n).hasClass("gx-popup-centered")?2:1,v=u.clientX-g,A=u.clientY-m;v=l(B).width()+v*p;p=
l(B).height()+A*p;l(B).css({width:v,height:p});g=u.clientX;m=u.clientY}};this.onMousedown=function(u){g=u.clientX;m=u.clientY;f=!0};this.onMouseup=function(){f&&(l("iframe").css("pointer-events",""),f=!1)};this.init(c,d,k,a)},draggable:function(c,d){var k,a=!1,b,f,g=0,m=0,n,t,w,u,B;this.init=function(p,v){n=p;t=v;B=this.onMousedown.closure(this);u=this.onMousemove.closure(this);w=this.onMouseup.closure(this);n.addEventListener("mousedown",B);n.addEventListener("mouseup",w);document.addEventListener("mousemove",
u);k=!0};this.deinit=function(){k&&(n.removeEventListener("mousedown",B),n.removeEventListener("mouseup",w),document.removeEventListener("mousemove",u),k=n=t=null)};this.onMousemove=function(p){if(a){l("iframe").css("pointer-events","none");var v=p.clientY-f;n.style.left=g+(p.clientX-b)+"px";n.style.top=m+v+"px"}};this.onMousedown=function(p){if(p.target===t){var v=l(n);g=v.position().left;m=v.position().top;v.css({left:g,top:m}).toggleClass("gx-popup-centered gx-popup-horizontal-center",!1);b=p.clientX;
f=p.clientY;a=!0}};this.onMouseup=function(){a&&(l("iframe").css("pointer-events",""),a=!1,g=parseInt(n.style.left,10)||0,m=parseInt(n.style.top,10)||0)};this.init(c,d)},window_compat:function(c,d,k,a,b,f,g,m,n,t,w,u,B,p,v,A,y,F,H,r,q,x,D,C,I,G,K,N){I=void 0!==I?I:gx.popup.showParentPopups;u=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);B=this.win.gx.dom.byId.closure(this.win.gx.dom);b=Math.max(b,100);f=Math.max(f,80);d=new this.subBox(b-8,f-8,7,7,"",u+"_rs");y&&(d.className+=
"gx-popup-resize",d.innerHTML='<img src="'+H+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',d.style.cursor="se-resize");d.rsEnable=y;k=new this.subBox(k,a,b,f,w,u+"_b");k.className=D;k.style.display="block";k.style.boxSizing="content-box";k.style.zIndex=++this.zdx;v||(k.style.visibility="hidden");t=new this.subBox(2,2,b-5,20,t,u+"_t");t.style.overflow="hidden";t.style.boxSizing="content-box";t.className=r;t.innerHTML='<span id="'+u+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+
n+'</span><span class="'+q+'" style="z-index:'+ ++this.zdx+';" id="'+u+'_cls"></span>';b=new this.subBox(2,24,b-13,f-36,m,u+"_c");b.className=x;"string"==typeof g?b.innerHTML=g:b.appendChild(g);b.style.overflow="hidden";b.style.boxSizing="content-box";v||(k.style.visibility="hidden",t.style.visibility="hidden",b.style.visibility="hidden");k.appendChild(t);k.appendChild(b);k.appendChild(d);N=gx.dom.byId(N)||this.doc.body;N.appendChild(k);v||this.hide(u);var P=B(u+"_b");P.cid=u;P.isExt=F?!0:!1;var O=
B(u+"_t");O.cid=u;y&&(g=B(u+"_rs"),g.cid=u,g.style.boxSizing="content-box",gx.evt.attach(g,"mousedown",this.startRS.closure(this,[g],!0)),gx.evt.attach(g,"mouseup",this.stopRS.closure(this,[g],!0)));g=B(u+"_cls");gx.evt.attach(g,"click",K.close||this.close.closure(this,[c,K.beforeClose]));A&&(gx.evt.attach(O,"mousedown",function(W){this.grab_id(W,O);gx.evt.attach(P,"mouseup",this.stopdrag.closure(this,[O],!0),this,{single:!0})},this),y&&gx.evt.attach(d.firstChild,"dragstart",function(W){gx.evt.cancel(W,
!0)},!0));(p||I)&&this.initmodal(c,I,G)},popUp:function(c,d,k,a,b,f,g,m,n,t,w,u,B,p,v,A,y,F,H,r,q,x,D,C,I,G,K,N,P,O,W,V,Y,ba,fa){w=gx.popup.ext;null!=c.parentPopup?(u=c.parentPopup.window,w=u.gx.popup.ext,w.win=u,w.doc=u.document,gx.popup.ext=w):(w.win=window,w.doc=w.win.document);w.win.gx.popup.setPopup(c);c.window=w.win;c.document=w.doc;w.win.gx.popup.lvl++;m+=w.win.gx.popup.lvl;c.id=m;c.IsPrompt||gx.util.sameAppUrl(n)?(n+=gx.http.urlParameterPrefix(n),n+=encodeURIComponent("gxPopupLevel="+w.win.gx.popup.lvl+
";"),n+=encodeURIComponent("gxTabId="+gx.util.browser.tabId+";"),k=gx.util.getFileName(n),k=k.charAt(0).toUpperCase()+k.slice(1),gx.popup.ext.compatMode()?(u=gx.HTML5?"auto":"100%",n='<iframe id="'+m+'_ifrm" src="'+n+'" width="'+u+'" height="'+u+'" frameborder="0" style="overflow:auto;" title="'+k+'" data-gx-popup-ct=""></iframe>'):(u=!d&&0<f?f:gx.dom.fixes.getPopupMinWidth(),n=l("<iframe/>",{id:m+"_ifrm",src:n,title:k,style:"width:"+gx.dom.addUnits(u)}),n.attr("data-gx-popup-ct",""),n=n[0].outerHTML,
gx.util.browser.isIPad()&&(n='<div class="iframe-container">'+n+"</div>")),k={close:c.close.closure(c,[null,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel}])},w.window(c,d,a,b,f,g,n,t,B,p,A,y,F,H,r,q,x,C,P,O,W,V,Y,ba,fa,!0,k),d=w.win.gx.dom.byId(m+"_ifrm"),w.iFrame=d,gx.lang.doCallTimeout(w.showIfLoaded,w,[c,d,1],50)):(gx.popup.setPopup(null),c=new Date,c=c.getTime(),m="",1==k&&(m="left="+a+",top="+b),a="",d||(a=",width="+f+",height="+g),window.open(C?n:"","gx"+c,"status=no,menubar=no"+a+",resizable="+
(x?"yes":"no")+",scrollbars=yes,"+m))},initmodal:function(c,d,k){c.showParentPopups=d;null==c.parentPopup?gx.ajax.disableForm(k,!0):d||this.hide(c.parentPopup.id)},deinitmodal:function(c){if(null==c.parentPopup)gx.ajax.enableForm();else{this.show(c.parentPopup.id);var d=c.parentPopup.frameWindow;d&&d.gx&&c.parentPopup.frameWindow.gx.ajax.enableForm()}},getDocumentContentType:function(c){return c.contentType||l(c.querySelector('meta[http-equiv="content-type"]')).attr("content")},isPDFPopup:function(c,
d){if(void 0===d.isPdf){var k=c.src;if(gx.util.getContentTypeFromExt(k)==gx.util.contentTypes.pdf)return d.isPdf=!0;var a=gx.util.contentTypes.html;try{var b=c.contentDocument;b=c.contentWindow.document;a=this.getDocumentContentType(b);if(a==gx.util.contentTypes.pdf)return d.isPdf=!0}catch(g){a=null}if(gx.lang.emptyObject(a)){var f;c={};c.url=k;c.method="HEAD";c.sync=!0;c.ajaxHeader=!1;c.handler=function(g,m,n){f=n.getResponseHeader("Content-Type")};c.obj=!0;gx.http.doCall(c);if(f&&0<=f.indexOf(gx.util.contentTypes.pdf))return d.isPdf=
!0}return!1}return d.isPdf},showIfLoaded:function(c,d,k){try{if(c.isActive()&&(this.docReady(d,k)||10<k&&this.isPDFPopup(d,c))){var a=gx.dom.iFrameDoc(d),b=!1;try{b=a&&"about:blank"!=a.URL}catch(g){}var f=this.isPDFPopup(d,c);if(b||f){c.state="opened";this.autofit(c,a,!0);return}}}catch(g){gx.dbg.logEx(g,"gxpopup.js","showIfLoaded")}k++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[c,d,k],50*k)},docReady:function(c,d){if("complete"==c.readyState)return!0;if(c=gx.dom.iFrameDoc(c)){try{var k=
"undefined"!=typeof c.gxReadyState?c.gxReadyState:c.readyState}catch(a){return!0}if("complete"==k)return!0}return!gx.util.browser.isIE()&&50<=d&&c&&c.body&&0!==c.body.childNodes.length?!0:!1},resizePopupContentLegacy:function(c,d){var k=gx.dom.iFrameDoc(this.iFrame);d=0<d?d:"100%";c=0<c?c:"100%";var a=l(this.iFrame);k&&(c=d="100%");a.width(c);void 0===d&&(d=Math.max(Math.max(k.body.scrollHeight,k.documentElement.scrollHeight),Math.max(k.body.offsetHeight,k.documentElement.offsetHeight)));a.height(d)},
resizePopupContent:function(c,d){gx.HTML5&&this.iFrame&&(gx.popup.ext.compatMode()?this.resizePopupContentLegacy(c,d):this.resizePopupContentImpl(c,d))},resizePopupContentImpl:function(c,d){var k=gx.dom.iFrameDoc(this.iFrame),a=l(this.iFrame);if(0<c&&0<d)a.width(c),a.height(d);else if(k){try{var b=a[0].contentWindow.gx&&a[0].contentWindow.gx.runtimeTemplates}catch(g){}b||a.width(50);c=Math.max(k.body.scrollWidth,k.body.getBoundingClientRect().width,k.documentElement.scrollWidth,k.documentElement.getBoundingClientRect().width);
try{var f=a[0].scrollWidth-a[0].contentDocument.scrollingElement.offsetWidth;c+=a.height()<k.body.offsetHeight?f:0}catch(g){}1<Math.abs(a.width()-c)&&a.width(c);k=Math.max(k.body.scrollHeight,k.body.getBoundingClientRect().height,k.documentElement.scrollHeight,k.documentElement.getBoundingClientRect().height);a.height(k)}},autofit:function(){gx.popup.ext.compatMode()?this.autofit_comp.apply(this,arguments):this.autofit_responsive.apply(this,arguments)},autofit_responsive:function(c,d,k){if(!gx.lang.emptyObject(c)){var a=
c.id,b=c.isPdf,f=l("#"+a+"_c");this.doc||(this.doc=c.document);var g=this.doc;var m=g.getElementById(a+"_ifrm"),n=l(g.getElementById(a+"_gxtitle"));!d&&gx.popup.ispopup()&&(d=gx.dom.iFrameDoc(m));this.iFrame=this.iFrame||m;n.text(d&&!b?d.title:"");c.frameDocument=d;c.frameWindow=m.contentWindow;d&&!b&&(d.gxPopup=c);gx.util.browser.isIPad()&&(f.css("overflow-y","auto"),f.css("-webkit-overflow-scrolling","touch"));if(window.self!==window.top){var t=this.getiFrameSizeInfo(g),w=0;t.accessParentFrame&&
(w=window.top.document.body.scrollTop);n=t.scrollTop;m=t.maxHeight+Math.min(w-t.y,0)-50;f.css("max-height",m).parent().css("margin-top","0px");this.move(a,void 0,Math.max(w-t.y,0)+n+(m-Math.min(d.body.offsetHeight,m))/2)}if(b){f.addClass("gx-popup-pdf");var u=.5*g.body.clientWidth;var B=.85*g.body.clientHeight}c.autoresize||(u=c.width,B=c.height);this.resizePopupContent(u,B);k&&(c.position&&(d=parseInt(c.top,0),c=parseInt(c.left,0),this.move(a,c,d)),this.show(a))}},autofit_comp:function(c,d,k){if(!gx.lang.emptyObject(c)){var a=
document;c.zindex=null!=a.gxPopup?this.zdx+a.gxPopup.zindex:this.zdx;var b=c.id,f=c.isPdf;this.doc||(this.doc=c.document);a=this.doc;var g=a.getElementById(b+"_ifrm");!d&&gx.popup.ispopup()&&(d=gx.dom.iFrameDoc(g));c.frameDocument=d;c.frameWindow=g.contentWindow;d&&!f&&(d.gxPopup=c);g=a.getElementById(b+"_rs");var m=a.getElementById(b+"_t"),n=a.getElementById(b+"_b"),t=a.getElementById(b+"_c"),w=a.getElementById(b+"_gxtitle");w.innerHTML=d&&!f?d.title:"";w.style.width="auto";var u=gx.dom.getComputedStyle(t),
B=gx.dom.getComputedStyle(m),p=gx.dom.getComputedStyle(n),v=gx.dom.getComputedStyle(g),A=parseInt(u.height,0),y=parseInt(u.width,0),F=this.getiFrameSizeInfo(a),H=F.maxWidth,r=F.maxHeight,q=F.scrollTop,x=F.scrollLeft,D=F.x;F=F.y;var C=gx.dom.dimensions(n);c.autoresize||(A=c.height-A+C.h,y=c.width-y+C.w);var I=c.width-y,G=c.height-A;c.autoresize&&(!f&&d?(d=gx.HTML5?d.documentElement||d.body:d.body,a=k&&gx.util.browser.isEdge()?l.position.scrollbarWidth():0,d?(d.gxwidth||(d.gxwidth=d.scrollWidth),I=
d.gxwidth+a,a=d.gxwidth+30-H,G=d.scrollHeight+30-r,I=Math.max(I,w.clientWidth+15)-y-(0<a?a:0),G=d.scrollHeight-A-(0<G?G:0)):gx.util.browser.isIE()&&(0>I&&(I=0),0>G&&(G=0))):f&&(I=a.body.clientWidth/2,G=a.body.clientHeight/2));w=parseInt(c.top,0);A=parseInt(c.left,0);c.position||(w=(r-G)/2-C.h/2+q-F,A=(H-I)/2-C.w/2+x-D,0>w&&(w=5,G-=5),0>A&&(A=5,I-=5));n.style.top=parseInt(w,0)+"px";n.style.left=parseInt(A,0)+"px";c.autoresize?(c=function(K,N){N=parseInt(K,0)+N;return 0<N?N:K},m.style.width=c(B.width,
I)+"px",n.style.height=c(p.height,G)+"px",n.style.width=c(p.width,I)+"px",t.style.height=c(u.height,G)+"px",t.style.width=c(u.width,I)+"px",c=gx.util.browser.isIE()?4:2,g.style.top=parseInt(p.height,0)-parseInt(v.height,0)-c+"px",g.style.left=parseInt(p.width,0)-parseInt(v.width,0)-c+"px"):(A=c.height,y=c.width,g.style.left=Math.max(y,92)+"px",g.style.top=Math.max(A,72)+"px",n.style.width=Math.max(y+8,100)+"px",n.style.height=Math.max(A+8,80)+"px",m.style.width=Math.max(y+3,92)+"px",t.style.width=
Math.max(y-5,87)+"px",t.style.height=Math.max(A-28,44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(t.style["overflow-y"]="auto",t.style["-webkit-overflow-scrolling"]="touch"):t.style.overflow="hidden";f&&gx.util.browser.isIE()?this.resizePopupContent("100%","100%"):this.resizePopupContent(parseInt(t.offsetWidth,10),parseInt(t.offsetHeight,10));k&&this.show(b)}},getiFrameSizeInfo:function(c){var d=gx.util.getWindowInfo().canAccessFrame,k={x:0,y:0,accessParentFrame:d};!d||window==window.top||
gx.lang.emptyObject(window.top)?(k.maxWidth=window.innerWidth||c.documentElement.clientWidth||c.body.offsetWidth,k.maxHeight=window.innerHeight||c.documentElement.clientHeight||c.body.offsetHeight,k.scrollTop=gx.dom.documentScroll(c).scrollTop,k.scrollLeft=gx.dom.documentScroll(c).scrollLeft):(d=gx.dom.position(window.frameElement),window.top.document.body.clientHeight>c.body.clientHeight?k.maxHeight=c.body.clientHeight:(k.maxHeight=window.top.document.body.clientHeight,k.y=d.y),k.scrollTop=c.body.scrollTop,
k.scrollLeft=c.body.scrollLeft,k.maxWidth=Math.min(window.top.document.body.clientWidth,c.body.clientWidth),window.top.document.body.clientWidth>c.body.clientWidth?k.maxWidth=c.body.clientWidth:(k.maxWidth=window.top.document.body.clientWidth,k.x=d.x));return k},_init:function(){}},_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();var c=this.getPopup();if(c){try{c.frameDocument&&(gx.util.browser.isIE()?c.frameDocument=c.frameWindow.document:c.frameDocument.gxPopup=c)}catch(d){c.frameDocument=
c.frameWindow.document,gx.dbg.logEx(d,"gxpopup.js","_init")}c=c.window.gx.popup;gx.fx.obs.addObserver("gx.onload",c,function(){this.autofit()}.closure(c));gx.fx.obs.addObserver("grid.onafterrefresh",c,function(d,k,a){k<a&&this.autofit()}.closure(c));gx.fx.obs.addObserver("gx.onafterevent",c,function(){this.autofit()}.closure(c))}}}}(gx.$);
gx.ajax=function(l){function c(a,b,f){0<a&&(f=f||gx.O,gx.fn.setCurrentGridRow(a,b),(a=f.getGridById(a))&&a.instanciateRow(b))}var d=/\?(.*)/,k=function(a,b,f){gx.dbg.logMsg("Unable to execute external object "+a+" - "+b+"("+f+")")};return{reqHeader:"GxAjaxRequest",dfTimer:null,resolveParmKey:function(a){var b=!1;a.av?b=a.av:a.ctrl&&a.prop?b=a.ctrl+a.prop:a.ctrl&&(b=a.ctrl);return b},serviceUrl:function(a){var b=gx.ajax.selfUrl();a&&(b=d.test(b)?b.replace(d,"?"+a+gx.http.urlParameterSeparator(b)+"$1"):
b+("?"+a));return b},validationMessage:function(a,b,f,g,m,n){a=new gx.ajax.message(a,b,f,g,m,n);return gx.lang.apply(a,{isValidation:!0,beforeCall:gx.emptyFn,beforeAjaxCall:function(t){t.warnOnTimeout=!0;t.beforeSend=function(w){w.setRequestHeader("X-FULL-AJAX-REQUEST","1")}},beforeProcesResponse:function(t){var w,u=[],B=this.getParmsMetadata("input");for(w=0;w<B.length;w++)B[w].av&&u.push(B[w].av);t.isValidation=!0;t.validationInput=u}})},message:function(a,b,f,g,m,n){var t;return{disableForm:n,
gxO:b,grid:f,row:g,methods:[a],isValidation:!1,addMethod:function(w){this.methods.push(w)},gridsData:function(){var w=this.gxO.getGridById(this.grid,this.row),u={},B=function(v,A){A[v.gridName]={id:v.gridId,lastRow:Math.max(0,Number(v.lastRowId)),pRow:v.parentRow?v.parentRow.gxId:""}};if(w){var p=function(v,A){if(v){B(v,A);var y=gx.fn.currentGridRowImpl(v.gridId);y&&(A[v.gridName].lastRow=Math.max(0,Number(y.substr(-4,4))-1));p(v.parentGrid,A)}};(function(v,A,y,F){var H=function(r,q){return r?q.parentGrid===
r&&gx.text.startsWith(q.parentRow.gxId,F)?q:H(r.parentGrid,q):null};y=l.map(gx.O.Grids,function(r){return H(v,r)});l.each(y,function(r,q){B(q,A)})})(w,u,this.gxO,this.row);p(w,u)}else l.each(this.gxO.Grids,function(v,A){B(A,u)});return u},to_json:function(){var w={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,pkgName:this.gxO.PackageName||"",events:this.methods};this.fullPost&&(w.fullPost=this.fullPost);this.addGXStateParms(w);
this.grid&&(w.grid=this.grid);w.grids=this.gridsData();this.row&&(w.row=this.row.substring(0,4),w.pRow=this.row.substring(4));return gx.json.serializeJson(w)},getParmsMetadata:function(w){for(var u=[],B={},p=0,v=this.methods.length;p<v;p++){var A=this.methods[p];if(this.gxO.EvtParms[A]){A=this.gxO.EvtParms[A]["input"==w?0:1];for(var y=0;y<A.length;y++)if(A[y].postForm||A[y].sPrefix||A[y].sSFPrefix||A[y].sCompEvt)u.push(A[y]);else{var F=gx.ajax.resolveParmKey(A[y]);F&&(void 0===B[F]?(B[F]=u.length,
u.push(A[y])):void 0===u[B[F]].grid&&void 0!==A[y].grid&&(u[B[F]]=A[y]))}}}return u},parmFromHidden:function(w,u){var B=gx.O;gx.setGxO(u);if(!gx.lang.emptyObject(w)&&!gx.lang.emptyObject(u)&&w.v2v){var p=gx.fn.getHidden(this.gxO.IsMasterPage?w.fld+"_MPAGE":gx.O.CmpContext+w.fld);w.v2v(p);p=u[w.gxvar]}gx.setGxO(B);return p},getInputParms:function(){for(var w=this,u=this.getParmsMetadata("input"),B=this.gxO.CmpContext,p=[],v=[],A,y,F,H,r,q,x=0,D=u.length;x<D;x++)if(y=F=void 0,q="",A=u[x],A.postForm){H=
{};H.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(H,gx.http.postDataFormat.JSON);for(var C in gx.http.viewState)this.fullPost[C]||void 0===gx.http.viewState[C]||(this.fullPost[C]=gx.http.viewState[C])}else if(this.gxO.isTransaction()&&0<this.grid&&this.row&&"Gx_mode"===A.av&&"vMODE"===A.fld)p.push(gx.fn.getGridRowModeImpl(gx.fn.gridLvl(this.grid),this.grid,this.row));else if("Referrer"==A.prop)p.push(gx.referrer?gx.referrer:document.referrer);else if(A.sPrefix)p.push(this.gxO.sPrefix());
else if(A.sSFPrefix)p.push("");else if(A.sCompEvt)p.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),""));else if(A.ctrl){if(A.prop)"GridRC"==A.prop?(H=(H=gx.parentGridRow(A.grid,this.gxO))?"_"+H:"",y={gridRC:gx.fn.getHidden(this.gxO.sPrefix()+A.av+H),rowSuffix:H,grid:A.grid}):y="GridCurrRow"==A.prop?gx.fn.currentGridRowImpl(A.grid):this.gxO.getCtrlPropertyValue(this.gxO.sPrefix()+A.ctrl,A.prop);else if(F=this.gxO.getValidStructFld(A.ctrl))H=gx.fn.getControlGridRef(F.fld,F.grid),gx.html.controls.isMultiSelection(F.ctrltype)?
q=gx.dom.comboBoxToObj(H,y):"radio"===F.ctrltype&&(q=gx.dom.radioToObj(H,y)),q&&(y=q);p.push(void 0!==y?y:null)}else{H=function(K){K.forEach(function(N){if(N&&"function"==typeof N.c2v&&"function"==typeof N.val){var P=N.grid===w.grid?w.row:gx.fn.currentGridRowImpl(N.grid);void 0!==N.val(P)&&N.c2v(P);gx.fn.call_v2bc(N,gx.O)}N&&!0===N.isuc&&(r=w.row||(N&&N.grid?gx.fn.currentGridRowImpl(N.grid):void 0),(N.getUCInstance(r)||N.uc).execC2VFunctions())})};q=this.getParmVarVStruct(A);F=q[0];H(q);F||(q=this.getParmVarVStructGrid(A,
gx.O),H(q));y="function"==typeof this.gxO[A.av]?this.gxO[A.av](this.row):void 0===this.gxO[A.av]?A.fld?gx.fn.getControlValue(A.fld):"":this.gxO[A.av];H=gx.fn.vStructForOld(A.av);!H||"date"!=H.type&&"dtime"!=H.type||"string"===typeof y&&(y=new gx.date.gxdate(y));this.isValidation&&y instanceof gx.date.gxdate&&!y.HasDatePart&&(H=new gx.date.gxdate(""),H.assign_date(y),H.JsonNullFormat=gx.date.jsonNullFormat.YearOne,y=H);if(void 0!==A.grid){var I=y,G=[];l.each(this.gxO.Grids,function(K,N){if(N.gridId===
A.grid){K=N.parentRow?N.parentRow.gxId:"";if(F){y={pRow:K,c:[],hc:[],hsh:[],v:I};for(var P=1;P<=N.lastRowId;P++){r=gx.grid.getPaddedRowId(P);var O=F.isuc?gx.fn.getControlValue(F.fld+"_"+r+K):F.val(r+K);y.c.push(O);A.hsh&&y.hsh.push(gx.fn.getHash(B,F.fld,r+K));gx.lang.emptyObject(F.hc)||y.hc.push(gx.fn.getControlValue("GXHC"+F.fld+"_"+r+K))}}else gx.lang.isArray(y)&&(y={pRow:K,c:y,v:y[Number(gx.fn.currentGridRowImpl(A.grid))-1]||y[0]});G.push(y)}});y=G}else A.hsh&&(F&&F.grid?(r=gx.fn.currentGridRowImpl(F.grid)||
"",""===r&&(y=this.parmFromHidden(F,this.gxO))):r="",v.push({hsh:gx.fn.getHash(this.gxO.CmpContext,A.fld,r),row:r}));p.push(gx.lang.emptyforType(y,A.type))}return{input:p,hashed:v}},refreshOutputParms:function(){for(var w=this.getParmsMetadata("output"),u,B,p=0,v=w.length;p<v;p++)u=w[p],(u=this.getParmVarVStruct(u)[0])&&u.grid&&"function"==typeof u.c2v&&"function"==typeof u.val&&(B=gx.fn.currentGridRowImpl(u.grid),void 0!==u.val(B)&&u.v2c(B))},getParmVarVStructGrid:function(w,u){var B=[];if(w=u.getAllGridsForColl(w.av)){var p;
w.forEach(function(v){var A=u.GXValidFnc,y=v.gridId;p!=y&&(p=y,A.filter(function(F){return F.grid===y}).forEach(function(F){(vStruct=u.getValidStructFld(F.fld))&&vStruct.gxvar&&B.push(vStruct)}))})}return B},getParmVarVStruct:function(w){var u,B=[];w.av&&(u=gx.O.getFormBCForVar(w.av));u?B=Object.values(u).filter(function(p){return p.ctrltype}):void 0!==w.fld?B.push(w.fld?this.gxO.getValidStructFld(w.fld):null):this.grid&&this.row&&(u=this.gxO.getGridById(this.grid,this.row))&&(w=u.grid.getColumnForVar(w.av))&&
B.push(this.gxO.getValidStruct(w.gxId));return B},addGXStateParms:function(w){var u={};gx.notifications&&gx.notifications.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID")&&(u.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(u)||(w.gxstate=u)},beforeCall:function(){m&&gx.fn.objectOnpost()},call:function(){t=l.Deferred();var w=gx.O;gx.setGxO(this.gxO);if(this.grid&&this.row){var u=gx.fn.currentGridRowImpl(this.grid);gx.fn.setCurrentGridRow(this.grid,this.row)}this.beforeCall();
var B=this.getInputParms();m?(this.parms=B.input,this.hashedParms=B.hashed,this.doAjaxCall(!1,this.disableForm)):(this.doClientSideCall(),this.refreshOutputParms());this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,u);gx.setGxO(w);return t.promise()},doAjaxCall:function(w,u){var B=this.to_json();gx.evt.setProcessing({status:!0,ctx:"doAjaxCall"});!1!==u&&this.gxO.startFeedback(!1,!0);gx.fx.obs.notify("gx.onbeforeevent",[B,w]);w=gx.ajax.getPostInfo(this.gxO,B,w);w.handler=this.ajaxCallHandler.closure(this);
w.error=this.ajaxCallError.closure(this);w.handleAllStatusCodes=!0;w.url=gx.ajax.serviceUrl((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));w.reqData=B;w.always=this.callback;w.contentType="application/json";this.beforeAjaxCall(w);gx.http.doCall(w)},beforeAjaxCall:gx.emptyFn,doClientSideCall:function(){var w=this.callback();t.resolve(w)},ajaxCallError:function(){t.resolve(!1);b.endFeedback()},afterAjaxCallHandler:function(w,u,B){B=B||gx.O;
gx.evt.setProcessing({status:!1,ctx:"afterAjaxCallHandler"});t.resolve(!w);w&&(B.endFeedback(),gx.fx.obs.notify("gx.onafterevent",[u]))},ajaxCallHandler:function(w,u,B){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;gx.http.lastStatus=B.status;w=!1;if(B.status==gx.http.STATUS_FORBIDDEN)gx.util.alert.showError(gx.getMessage("GXM_runtimeappsrv")+" ("+B.status+" "+B.statusText+")"),w=!0;else if(gx.http.checkResponseStatus(B,this.isValidation))w=!0;else if(200>B.status||299<B.status)gx.dom.writeError(B.responseText,
gx.getMessage("GXM_runtimeappsrv"),B.status),w=!0;else if(gx.http.validJsonResponse(B,u)){var p=gx.json.evalJSON(u);null==p?gx.dom.writeError(u.toString(),gx.getMessage("GXM_runtimeappsrv"),B.status):(gx.csv.lastEvtResponse=p,u={response:p,isPostBack:!0,context:{fullAjaxCall:!0},gxObject:this.gxO,gridId:this.grid,row:this.row},this.beforeProcesResponse(u),gx.ajax.setJsonResponse(u).done(function(){gx.fx.obs.notify("gx.onafterevent",[p])}))}else w=!0;this.afterAjaxCallHandler(w,p,this.gxO)},beforeProcesResponse:gx.emptyFn,
startFeedback:function(){this.gxO.startFeedback(!1,this.isValidation)}}},maxGETLength:function(a){return a.AjaxSecurity?600:1350},getImageUrl:function(a,b){var f=a[b];if(gx.lang.emptyObject(f))return"";"object"==typeof f&&(a[b]=gx.ajax.resolveImageUrl(f));return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a[b],!0)},resolveImageUrl:function(a){var b;for(b=0;b<a.length;b++){var f=a[b];if(f.l==gx.languageCode&&f.t==gx.theme)return(f.i?"Resources/":"")+f.p}},encryptParms:function(a,b){return a.AjaxSecurity?
gx.sec.encrypt(b):b},doPost:function(a,b,f,g,m,n,t,w){!1!==f&&t.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,b]);gx.fn.objectOnpost();gx.fn.forceEnableControls(!1);var u=this.getPostInfo(t,a,b);u.rowId=m;u.gridId=g;u.url=gx.ajax.serviceUrl(a);u.evt=w;u.always=function(){!1!==f&&t.endFeedback();n&&n()};fnc=function(){w&&gx.fn.setHidden("_EventName",w);gx.evt.setGridEvt(g,m,t);gx.http.saveState();gx.http.doCall(u)};b?gx.lang.doCallTimeout(fnc,this,[],gx.evt.oldDoPostDelay):fnc.bind(this)()},
getPostInfo:function(a,b,f){b={};b.formNode=gx.dom.form();b.method="POST";b.encoding="UTF-8";b.useCash=!1;b.gxO=a;!0===f&&(b.sync=!0);b.handler=gx.http.postHandler;this.multipartInfo(b);return b},multipartInfo:function(a){gx.dom.hasSelectedFile()&&(a.multipart=!0,a.mimetype="text/html",a.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(a,b){var f=void 0!==a.refresh_form;a=a.refresh||a.refresh_form;gx.util.balloon.clearAll();if("GET"==a)gx.http.reload(!0);else return a="ERFR",
b.IsMasterPage&&(a+="_MPAGE"),b=f||!gx.pO.fullAjax?gx.pO:b,f=b.fullAjax,b.executeServerEvent(a,!gx.pO.fullAjax,null,!0,f);return l.Deferred().resolve()},doRefresh:function(a){var b=a.IsMasterPage?"ERFR_MPAGE":"ERFR";a=gx.pO.fullAjax?a:gx.pO;a.executeServerEvent(b,!0,null,!0,a.fullAjax)},dispatchCommands:function(a,b,f,g){f=f||{};var m,n=f.ignoreCmds||[];g=void 0===g?0:g;b=b||gx.O;var t=gx.popup.getPopup();t&&(t.isClosing=t.isClosing||a&&a.some(function(p){return void 0!==p.close}));if(a&&0<a.length){t=
a.length;for(var w=g;w<t;w++){g=a[w];var u=Object.keys?Object.keys(g)[0]:"";if(!gx.util.inArray(u,n)){g.set_focus&&gx.fn.usrSetFocus(g.set_focus);g.print&&gx.printing.print(g.print);g.close&&(u=[],g.close.values instanceof Array&&(u=g.close.values),gx.fn.closeWindow(u,{parmsMetadata:g.close.metadata,updateParms:f.updateParms},b));if(void 0!==g.refresh||void 0!==g.refresh_form||""===g.cmp_refresh){gx.ajax.dispatchRefreshCommand(g,b).then(function(){gx.ajax.dispatchCommands(a,b,f,w+1)});return}g.redirect&&
(u=g.redirect,u.url=gx.ajax.removeGXParms(u.url),gx.http.redirect(u.url,1===u.forceDisableFrm,2===u.forceDisableFrm,b,!1));g.calltarget&&gx.nav.callFromServerRedirect(g.calltarget.url,g.calltarget.target);g.callback&&g.callback.apply(g.callback.scope,g.args||[]);g.cmp_refresh&&(u=gx.pO.getWebComponent(g.cmp_refresh),gx.evt.dispatcher.dispatch("REFRESH",u));if(g.popup){a.length>w+1&&(gx.lang.isArray(g.popup)?g.popup[7]=a.slice(w+1):g.popup.OncloseCmds=a.slice(w+1));gx.popup.open(g.popup,b);break}if(g.ucmethod&&
(m=gx.getObj(g.ucmethod.CmpContext,g.ucmethod.IsMasterPage))){u=gx.O;gx.setGxO(m);if((m=gx.O.getUserControl(g.ucmethod.Control))&&"function"==typeof m[g.ucmethod.Method])try{m[g.ucmethod.Method].apply(m,g.ucmethod.Parms);var B=!0}catch(p){gx.dbg.logEx(p,"gxcallrpc.js","Failed to execute usercontrol method: "+g.ucmethod.Method)}gx.setGxO(u)}g.exomethod&&(gx.ajax.dispatchExoMethod(g.exomethod),B=!0);g.exoprop&&gx.ajax.dispatchExoProperty(g.exoprop)}}B&&b.showMessages(!0)}gx.fn.usrSetFocus_commit()},
resolveExoObject:function(a,b){a=a[b];var f;if(!a){b=b.split(".");a=window;var g=0;for(f=b.length;g<f;g++)if(a=a[b[g]],void 0===a)return}return a},dispatchExoMethod:function(a){var b=gx.getObj(a.CmpContext,a.IsMasterPage),f,g;if(b){var m=gx.O;gx.setGxO(b);try{(f=this.resolveExoObject(b,a.ObjectName))&&"GlobalEvents"===a.ObjectName?f.executeMethod(a.Method,a.Parms):a.IsEvent?gx.fx.obs.notify(a.Method,a.Parms):f?(g=f[a.Method])?g.apply(f,a.Parms):k("method","Method not found",a.Method):k("method","Object not found",
a.ObjectName)}catch(n){gx.dbg.logEx(n,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(m)}}},dispatchExoProperty:function(a){var b=gx.getObj(a.CmpContext,a.IsMasterPage),f;if(b){var g=gx.O;gx.setGxO(b);try{(f=this.resolveExoObject(b,a.ObjectName))?f[a.PropertyName]=a.Value:k("property","Object not found",a.ObjectName)}catch(m){gx.dbg.logEx(m,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(g)}}},ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(a,b,f,g,m,n,t,w){b=b||gx.O;if(a&&0<a.length)for(f=
a.length,n=0;n<f;n++){var u=a[n];if(u.load){if(g=b.getGridById(u.load.grid,w))u.load.props.values=u.load.values,g.loadNewRows(u.load.props)}else u.addlines&&(gx.lang.doCall(gx.fn.setJsonValues,m),gx.lang.doCall(gx.fn.setJsonProperties,t,w),(g=b.getGridById(u.addlines.grid,w))&&g.getNewRows(u.addlines.count))}},willLeavePage:function(a){if(a)for(var b=a.length,f=0;f<b;f++)if(a[f].close)return!0;return!1},getRedirectCommand:function(a){if(a)for(var b=a.length,f=0;f<b;f++){var g=a[f];if(g.popup)break;
if(g.redirect)return g}return null},saveJsonResponse:function(a){this.lastJsonResponse=JSON.parse(gx.lang.htmlDecode(a))},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands;return this.lastJsonResponse},setPostResponse:function(a,b,f){return this.setJsonResponse({gridId:a.gridId,row:a.rowId,response:a,isPostBack:!0,gxObject:b||gx.O,context:f})},setJsonResponse:function(a){var b=l.Deferred(),f=a.response,
g,m=a.isPostBack,n=a.afterCmpLoaded,t=a.gxObject,w=a.gridId,u=a.row,B=a.context||{},p=!!a.isValidation,v=gx.fn,A=gx.lang.doCall,y=this.willLeavePage(f.gxCommands),F=this.getShouldUpdatePropertyFunction(f);if(t){var H=gx.O;gx.O=t}if(w&&u){var r=gx.fn.currentGridRow(w);gx.fn.setCurrentGridRow(w,u)}if(gx.evt.srvCommand)gx.evt.srvCommand=!1,A(gx.ajax.dispatchCommands,f.gxCommands,t),b.resolve(y);else{var q=this.getRedirectCommand(f.gxCommands);if(q&&1===q.redirect.forceDisableFrm)A(gx.ajax.dispatchCommands,
f.gxCommands,t,{ignoreCmds:["refresh","cmp_refresh"]}),b.resolve(y);else if(y)A(gx.ajax.dispatchCommands,f.gxCommands,t),b.resolve(y);else{A(gx.ajax.dispatchPreCommands,f.gxCommands,t,f.gxComponents,f.gxHiddens,f.gxValues,f.gxGrids,f.gxProps,u);A(v.clearCompontHiddens,f.gxComponents);var x=A(v.setJsonHiddens,t,f.gxHiddens);A(v.setJsonComponents,f.gxComponents,f.DynComponentMap,f.gxHiddens,function(D){gx.http.loadStyles();gx.updateTheme();m&&gx.fn.installComponents(!1);"function"==typeof n&&n();H&&
(gx.O=H);var C=[],I=A(v.setJsonValues,f.gxValues,p,w,u,F),G=A(v.setJsonProperties,f.gxProps,u),K=l.map(D,function(W){W=v.cmpContextFromCtrl(W);if(W=gx.pO.WebComponents[W])return gx.lang.objToArray(W.UserControls).concat(W.getUserControlGrids())});p||!t.isTransaction()&&t.fullAjax||gx.util.balloon.clearAll();v.enableDisableDelete(t);m&&(g=A(v.loadJsonGrids,f.gxGrids,m,C));p&&gx.ajax.transformValidationMessages(a,t,f.gxMessages);A(v.setErrorViewer,f.gxMessages);var N=function(W){W=W||[];var V;gx.pO.supportAjaxEvents&&
(V=gx.lang.arrayUnique(G.concat(I,K,W,x),function(Y,ba){return Y.ControlName===ba.ControlName}));v.objectPostback(V,D);p||v.setFocusAfterLoad(!0);return l.Deferred().resolve()}.closure(this),P=function(){!B.fullAjaxCall||B.autoRefreshing||!m&&gx.popup.currentPopup||t.endFeedback();A(gx.ajax.dispatchCommands,f.gxCommands,t);r&&gx.fn.setCurrentGridRowSafe(w,r);b.resolve(y)}.closure(this),O=[];m&&(t.execV2CFunctions(!0,C,!1),g&&O.push(g.done(N)),D&&D.length&&O.push(N.apply(this,[])));l.when.apply(l,
O).done(P)},m)}}return b.promise()},getShouldUpdatePropertyFunction:function(a){var b,f,g,m={};if(a.gxGrids)for(b=0;b<a.gxGrids.length;b++){var n=a.gxGrids[b];for(f=0;f<n.Count;f++)for(g=0;g<n[f].Props.length;g++)m[n[f].Props[g][0]]=!0}return function(t){return!m[t]}},transformValidationMessages:function(a,b,f){b=b.cmpCtx||"MAIN";"undefined"!=typeof f[b]&&(f[b]={fields:a.validationInput,msgs:f[b]})},disableForm:function(a,b){gx.pO.startFeedback(b,void 0===a||a)},enableForm:function(a,b){a=a||gx.O;
b&&(a.feedbackCallCounter=0);gx.pO&&gx.pO.endFeedback();a!=gx.pO&&a.endFeedback()},isFormEnabled:function(){var a=gx.getActiveContext();return a==top&&null!=gx.popup.getPopup()?!0:gx.pO?!a.gx.pO.isFeedbackOn()&&!a.gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){if(!(!gx.ajax.formAutocomplete||gx.grid.drawAtServer||gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||7>=document.documentMode||7>=gx.util.browser.ieVersion()))){var a=gx.dom.form(),b=document.createElement("iframe");b.id=
"gx_iframe_force_ajax_autocomplete";b.name="gx_iframe_force_ajax_autocomplete";b.style.cssText="display: none";b.src="/content/blank";document.body.appendChild(b);var f=document.createElement("input");f.type="submit";f.style.cssText="display: none";a.appendChild(f);var g=a.target,m=a.action;a.target=b.name;a.action=b.src;var n=l(f);gx.evt.attach(f,"click",function(t){t.stopPropagation();return!0});n.trigger("click");setTimeout(function(){a.target=g;a.action=m;a.removeChild(f);document.body.removeChild(b)})}},
suggest:function(a,b,f,g,m,n,t){a=new gx.fx.suggestProvider(a,b,f,g);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(f),a,f,m,n,t)},hideCode:function(a,b,f){var g=this.objectUrl()+"?";b="gxajaxHideCode_"+b;for(var m=a.length,n=0;n<m;n++)b+=","+encodeURIComponent(eval(a[n]));g+=gx.ajax.encryptParms(gx.O,b);gx.http.callBackend_impl(function(t){gx.fn.setVarValues(f,t)},g,!0,gx.http.modes.retval);return this.lastStatus},callCrl:function(a,b,f){var g=f?gx.fn.setGridComboValues:gx.fn.setComboValues,
m=f?b:gx.fn.screen_CtrlRef(b).name;f=this.objectUrl()+"?";a="gxajaxCallCrl_"+b+","+this.arrayToUrl(a);f+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(n){g(m,n)},f,!0,gx.http.modes.retval)},refreshGrid:function(a,b){var f=gx.O;gx.setGxO(a.parentObject);var g="GET",m=gx.ajax.gxObjectUrl(a.parentObject)+"?",n="gxajaxGridRefresh_"+a.gridName+","+b;gx.fx.obs.notify("grid.onbeforerefresh",[a]);a.autoRefreshing=!0;gx.csv.autoRefreshing=a;var t=a.grid.rows.length;a.setPagingVars(0,0);if(n.length>
gx.ajax.maxGETLength(gx.O)){g="POST";var w=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+a.gridName)];b=b.split(",");n=0;for(var u=b.length;n<u;n++)w.push("GXParm"+n+"="+b[n])}else m+=gx.ajax.encryptParms(gx.O,n);a.grid.mask();gx.http.doCall({method:g,url:m,reqData:w,handler:function(B,p,v){gx.http.postHandler(B,p,v,{autoRefreshing:!0});gx.fx.obs.notify("grid.onafterrefresh",[a,t,a.grid.rows.length])},always:function(){gx.csv.autoRefreshing=null;a.autoRefreshing=!1;a.grid.unmask();gx.setGxO(f)}})},
newRows:function(a,b,f,g,m,n,t,w){var u=this.objectUrl()+"?",B=[],p=gx.O;a=gx.fn.gridObj(a,t?f+"_"+t:f,b);b="GET";f="gxajaxNewRow_"+f;B.push(f);B.push(g);B.push(m);B.push(n);(p.IsComponent||p.IsTypeComponent)&&B.push(p.CmpContext);B=B.concat(a.getParmsValues(!1,a.postingVariables,!1));g=B.join(",");if(g.length>gx.ajax.maxGETLength(p)){b="POST";p=["GXEvent="+gx.ajax.encryptParms(p,f)];g=1;for(m=B.length;g<m;g++)p.push("GXParm"+(g-1)+"="+B[g]);g=p.join("&")}else u+=gx.ajax.encryptParms(p,g),g=null;
gx.http.callBackend_simple(u,!0,null,b,g);if(u=gx.http.lastResponse)u=gx.json.evalJSON(u),w.call(a,u),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[u])},loadCrl:function(a,b,f){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var g=this.objectUrl()+"?";a="gxajaxExecAct_"+a+","+this.arrayToUrl(b);g+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(m){gx.fn.setVarValues(f,m)},g,!0,gx.http.modes.retval)}},udp:function(a,b,f){var g=this.objectUrl()+"?";a=
a+","+this.arrayToUrl(b);g+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(m){gx.fn.setVarValues(f,m)},g,!0,gx.http.modes.retval)},srvEvt:function(a,b,f,g){var m=this.objectUrl()+"?";a=a+","+b+","+this.arrayToUrl(f);m+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(n){gx.fn.setVarValues(g,n)},m,!0,gx.http.modes.full)},validSrvEvt:function(a,b,f){var g=gx.fn.currentGridRowImpl(b);if(0<b){var m=gx.fn.currentGridRowImpl(b);c(b,g,f)}if(gx.fx.delayedValidation){var n=l.Deferred(),
t=arguments;gx.fx.obs.addObserver("gx.validation",this,function(){return this.validSrvEvt_impl.apply(this,t).then(function(w){n.resolve(w);c(b,m,f)})},{single:!0,async:!0});return n.promise()}return this.validSrvEvt_impl.apply(this,arguments).then(function(w){c(b,m,f);return w})},validCliEvt:function(a,b,f,g){g=g||gx.O;return gx.evt.dispatcher.dispatch({eventName:a,fn:f},g,b,gx.fn.currentGridRowImpl(b),!1,void 0,void 0,gx.evt.dispatcher.types.validation)},validSrvEvt_impl:function(a,b,f){f=f||gx.O;
var g=gx.fn.currentGridRowImpl(b);return gx.evt.dispatcher.dispatch(a,f,b,g,!0,void 0,void 0,gx.evt.dispatcher.types.validation).then(function(m){f.refreshOlds();return m})},getParmsPostData:function(a){for(var b="",f=0;f<a.length;f++)0<f&&(b+="&"),b+="GXParm"+f+"="+this.parmToUrl(a[f],!0);return b},getCallerUrl:function(a){if(gx.stackSupported()){a=(a=gx.call_stack_storage.get(gx.stackId(a)))||[];var b=1==a.length&&a[0]!=gx.ajax.selfUrl()?a[0]:"";return b=1<a.length?a[a.length-2]:b}return gx.fn.getHidden("sCallerURL")},
pushReferer:function(a,b){b="undefined"==typeof b?location.href:gx.absoluteurl(b);if(gx.stackSupported()){"undefined"==typeof a&&(a=gx.popup.popuplvl());var f=gx.call_stack_storage.get(gx.stackId(a));f=f||[];b!=gx.util.lastArray(f)&&f.push(b);gx.call_stack_storage.set(gx.stackId(a),f)}else a=this.objectUrl()+"?",b="dyncall,PushReferer,"+encodeURIComponent(b),a+=gx.ajax.encryptParms(gx.O,b),gx.http.callBackend_simple(a,!0,!0)},windowClosed:function(a){if(gx.stackSupported())if(-1==a){a=gx.stackId(gx.popup.popuplvl());
var b=gx.call_stack_storage.get(a);b=b||[];b.pop();gx.call_stack_storage.set(a,b)}else gx.call_stack_storage.remove(gx.stackId(a));else a=-1==a?",PopReferer":",DeleteReferer,"+a.toString(),b=this.objectUrl()+"?",b+=gx.ajax.encryptParms(gx.O,"dyncall"+a),gx.http.callBackend_simple(b,!0,!0)},aggSel:function(a,b,f){var g=this.objectUrl()+"?";a="gxajaxAggSel"+b+"_"+a+","+this.arrayToUrl(f);g+=gx.ajax.encryptParms(gx.O,a);return gx.http.callBackend_impl(null,g,!1,gx.http.modes.retval)[0]},aggSelDecimal:function(a,
b,f,g,m){return gx.num.parseFloat(this.aggSel(a,b,m),f,g)},aggSelInteger:function(a,b,f){return parseInt(this.aggSel(a,b,f),10)},dynComponent:function(a,b,f,g){var m=l.Deferred();a=gx.util.removeBaseUrl(a).toLowerCase();gx.gen.isDotNet()&&(a+=".aspx");a=gx.ajax.objectUrl(a);f="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(f)+"&GXParm0="+encodeURIComponent(g);for(g=0;g<b.length;g++)f+="&GXParm"+(g+1).toString()+"="+encodeURIComponent("function"==typeof b[g].getUrlVal?
b[g].getUrlVal():b[g]);gx.http.doCall({method:"POST",url:a,reqData:f,handler:function(n,t){m.resolve(gx.json.evalJSON(t))},error:function(){m.reject()}});return m.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(a){return a.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},getSecurityToken:function(a){if(a&&a.ajaxSecurityToken){var b="GX_AUTH_"+(a.CmpContext?a.CmpContext:"")+a.ServerClass;b=b.toUpperCase();a=gx.fn.getHidden(b)||a.InternalParms[b];return{id:b,
value:a}}},arrayToUrl:function(a,b){for(var f="",g=a.length,m=0;m<g;m++)f+=this.parmToUrl(a[m],b)+",";return f},ControlValuesObject:function(a,b){a=gx.fn.vStructForVar(gx.unprefixVar(a));return null!=a&&gx.html.controls.isMultiSelection(a.ctrltype)?(a=gx.fn.getControlGridRef(a.fld,a.grid),gx.dom.comboBoxToObj(a,b)):null},parmToUrl:function(a,b){var f=eval(a);if(f instanceof Array&&2==f.length&&"string"==typeof f[0]&&"string"==typeof f[1]){var g=gx.fn.vStructForVar(f[0]);null!=g&&(f=gx.fn.getGridCtrlProperty(g.grid,
g.fld,f[1]))}b&&(b=gx.ajax.ControlValuesObject(a,f))&&(f=b);"object"==typeof f&&(f=gx.json.serializeJson(f));if("undefined"==typeof f||null==f)b=!1,a&&0===a.indexOf("gx.O.")&&(a=gx.unprefixVar(a),a=gx.fn.getHidden(gx.O.CmpContext+a),null!=a&&"undefined"!=typeof a&&(f=a,b=!0)),b||(f="");return encodeURIComponent(f)},gxObjectUrl:function(a){return this.objectUrl(a.serviceUrl,a&&a.fullAjax?a.CmpContext:void 0)},objectUrl:function(a,b){b=void 0!==b?b:gx.csv.cmpCtx;a||(a=b?gx.fn.getControlValue(b+"_CMPPGM"):
gx.ajax.selfUrl(),null!=a&&(a=a.replace(/\?.*/,""),a=a.replace(/#[\s\S]*$/,"")),a=this.objnameFromUrl(a));return gx.absoluteurl(this.objToRelativeUrl(a))},objToRelativeUrl:function(a){return null==a||gx.isabsoluteurl(a)?a:""===gx.servletBasePath?a:gx.servletBasePath+"/"+a},objnameFromUrl:function(a){0<=a.indexOf("?")&&(a=a.split("?")[0]);var b=a.split("/"),f=b.length;return 0===f?a:b[f-1]},_init:function(){if(gx.stackSupported()){var a=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));if(a)for(var b=0;b<
a.length;b++)gx.ajax.pushReferer(gx.popup.popuplvl(),a[b]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){function l(c,d){var k=$("#"+c.id+"_dp_trigger");if(0<k.length)return k.get(0);if(d&&0<d.length&&(k=$("[data-gx-attached-ctrl~='"+c.id+"']"),0<k.length))return k.parent().get(0)}this.init=function(c,d){this.id=c;this.balloonid=c+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.sourceElements=d||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr=
"";this.active=!1;this.errorValue=null;gx.util.balloon.lastLbl=null};this.setMessage=function(c){this.hasMessage||(this.messageWar=c,this.hasMessage=!0)};this.setAsFormatError=function(){this.isFormatError=!0;gx.csv.setFormatError(this.id,!1)};this.setError=function(c){this.hasMessage||(this.messageErr=c,this.hasMessage=this.isError=!0,this.isFormatError&&gx.csv.setFormatError(this.id))};this.create=function(c,d,k,a){var b=document.createElement("span");b.id=c;b.className=k;c=document.createElement("div");
c.style.position="absolute";c.style.zIndex=100;c.style.display="none";c.classList.add("gx-error__message-container");a=document.createTextNode(a);b.appendChild(a);c.appendChild(b);"right"==gx.csv.messagePosition||"bottom"==gx.csv.messagePosition?(a=$(d).closest(".gx-attribute"),!0===gx.csv.overlap&&gx.runtimeTemplates&&0<a.length?a.append(c):(a=l(d))?0<=a.id.indexOf("_dp_trigger")?$(a).closest(".dp_container").append(c):$(a).after(c):$(d).after(c)):!0===gx.csv.overlap?$(d).after(c):$(d).before(c);
!0===gx.csv.overlap?(b.style.position="static",b.style.zIndex="1"):(c.style.position="relative",b.style.position="relative");return b};this.getControlValue=function(){for(var c=[gx.fn.getControlValue(this.id)],d=0,k=this.sourceElements.length;d<k;d++)c.push(gx.fn.getControlValue(this.sourceElements[d]));return c.join(";")};this.groupControl=function(c){(c=gx.dom.el(c))&&"INPUT"===c.nodeName&&"radio"===c.type&&(c=c.parentNode&&"SPAN"==c.parentNode.tagName?c.parentNode:gx.dom.findParentByTagName(c,
"table"));return c};this.hideBalloon=function(c){c=c.parentNode;try{c&&(c.style.display="none")}catch(d){gx.dbg.logEx(d,"gxballoon.js","hideBalloon")}};this.showBalloon=function(c){try{var d=gx.csv.messagePosition,k=gx.dom.el(this.id),a=c.parentNode,b=$(a),f,g,m=gx.popup.ispopup()?"flipfit":"none",n=k,t=l(k,this.sourceElements);gx.lang.requestAnimationFrame(function(){if(this.active)if(!0===gx.csv.overlap){switch(d){case "top":f="left bottom";g="left top";break;case "right":f="left center";g="right center";
n=t||n;break;case "bottom":f="left top";g="left bottom";break;case "left":f="right center",g="left center"}b.fadeIn({queue:!1}).css("display","block");b.position({my:f,at:g,of:n,collision:m})}else a.style.display="top"!=d&&"bottom"!=d||!1!==gx.csv.overlap?"inline":"block"},this)}catch(w){gx.dbg.logEx(w,"gxballoon.js","showBalloon")}};this.show=function(c){var d,k,a;if(void 0===document.readyState||"complete"==document.readyState){try{if(!1===this.hasMessage)return!0;var b=gx.dom.el(this.id);null===
b&&null!==gx.csv.validatingUC&&(b=gx.csv.validatingUC.getContainerControl());if("hidden"==b.type){var f=gx.dom.byId("span_"+this.id);null!==f&&(b=f)}else if("INPUT"===b.nodeName&&"radio"===b.type){var g=gx.dom.byName(gx.dom.id(b));b=gx.dom.findRadioContainer(b)}if(g){f=[];var m=0;for(a=g.length;m<a;m++)f.push(g[m]);g=f}else for(g=[b],m=0,a=this.sourceElements.length;m<a;m++)g.push(gx.dom.el(this.sourceElements[m]));this.active=d=!0;if(0<this.messageErr.length){var n="Error";var t=this.messageErr}else 0<
this.messageWar.length&&(n="Warning",t=gx.html.encode(this.messageWar));""!==n&&(f=n+"Messages",gx.dom.addPrefixClass(b,n),(k=gx.dom.byId(this.balloonid))?(k.innerHTML=t,k.className=f,d=!1):k=this.create(this.balloonid,b,f,t));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl);gx.util.balloon.lastLbl=k;!0===c?gx.csv.oneAtAtime||this.showBalloon(k):this.showBalloon(k);if(!1===gx.util.balloon.timerOn&&0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=
setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(d)for(gx.csv.oneAtAtime&&(gx.evt.attach(b,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(b,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this))),a=g.length,m=0;m<a;m++)"INPUT"===g[m].nodeName&&"radio"===g[m].type?gx.evt.attach(g[m],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(g[m],"blur",gx.util.balloon.cvsHide,this);this.errorValue=this.getControlValue()}catch(w){gx.dbg.logEx(w,
"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){try{var l=this.groupControl(this.id);var c=this.getControlValue();if(c!=this.errorValue){this.errorValue=c;var d=gx.dom.byId(this.balloonid);null!=d&&(l&&(gx.dom.removePrefixClass(l,"Error"),gx.dom.removePrefixClass(l,"Warning")),this.hideBalloon(d),this.active=!1)}}catch(k){}},cvsMouseOutHandler:function(){if(this.active){var l=gx.dom.byId(this.balloonid);null!=l&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=l.id&&this.hideBalloon(l):
this.hideBalloon(l))}},cvsMouseOverHandler:function(){if(this.active){var l=gx.dom.byId(this.balloonid);null!=l&&this.showBalloon(l)}},clearAll:function(){var l;this.timerOn=!1;for(l in this.balloons){var c=this.balloons[l];var d=gx.util.balloon.cvsHide.closure(c);c.clear();d()}},clear:function(l){try{var c=gx.csv.ctxControlId(l);if(this.balloons[c]){var d=this.balloons[c];var k=gx.util.balloon.cvsHide.closure(d);d.clear();k()}}catch(a){gx.dbg.logEx(a,"gxballoon.js","clear")}},getNew:function(l,c,
d){d=d||[];var k,a=d.length;"undefined"!=typeof c&&(l=l+"_"+c);try{var b=gx.fn.screen_CtrlRef(l);"INPUT"===b.nodeName&&"radio"===b.type&&(gx.dom.byName(gx.dom.id(b)),b=gx.dom.findRadioContainer(b),b.id||b.setAttribute("id","BallonAnchor_"+l));var f=gx.dom.id(b);l=gx.csv.ctxControlId(f);for(k=0;k<a;k++)b=gx.fn.screen_CtrlRef(d[k]),f=gx.dom.id(b),d[k]=gx.csv.ctxControlId(f)}catch(g){gx.dbg.logEx(g,"gxballoon.js","getNew")}this.balloons[l]?(c=this.balloons[l],c.sourceElements=d||[],c.clear()):(c=new this.impl,
this.balloons[l]=c,c.init(l,d));return c}};
(function(l){var c=function(){var d={"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":"Asia/Amman Asia/Jerusalem Europe/Helsinki Asia/Damascus Africa/Cairo Asia/Gaza Europe/Minsk".split(" "),"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],
"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk",
"Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]},k=function(t){t=-t.getTimezoneOffset();return null!==t?t:0},a=function(){var t=k(new Date(2014,0,2)),w=k(new Date(2014,5,2)),u=t-w;return 0>u?t+",1":0<u?w+",1,s":t+",0"},b=function(){var t;if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.DateTimeFormat&&(t=Intl.DateTimeFormat(),"undefined"!==typeof t&&"undefined"!==typeof t.resolvedOptions)&&(t=t.resolvedOptions().timeZone)&&(-1<t.indexOf("/")||
"UTC"===t))return t},f=function p(w,u,B){"undefined"===typeof u&&(u=864E5,B=36E5);var v=(new Date(w.getTime()-u)).getTime();w=w.getTime()+u;for(var A=(new Date(v)).getTimezoneOffset(),y=null;v<w-B;){var F=new Date(v);if(F.getTimezoneOffset()!==A){y=F;break}v+=B}return 864E5===u?p(y,36E5,6E4):36E5===u?p(y,6E4,1E3):y},g=function(w,u,B,p){if("N/A"!==B)return B;if("Asia/Beirut"===u){if("Africa/Cairo"===p.name&&13983768E5===w[6].s&&14116788E5===w[6].e||"Asia/Jerusalem"===p.name&&13959648E5===w[6].s&&14118588E5===
w[6].e)return 0}else if("America/Santiago"===u){if("America/Asuncion"===p.name&&14124816E5===w[6].s&&1397358E6===w[6].e||"America/Campo_Grande"===p.name&&14136912E5===w[6].s&&13925196E5===w[6].e)return 0}else if("America/Montevideo"===u){if("America/Sao_Paulo"===p.name&&14136876E5===w[6].s&&1392516E6===w[6].e)return 0}else if("Pacific/Auckland"===u&&"Pacific/Fiji"===p.name&&14142456E5===w[6].s&&13961016E5===w[6].e)return 0;return B},m=function(w,u){for(var B={},p=c.olson.dst_rules.zones,v=p.length,
A=d[u],y=0;y<v;y++){var F=p[y];var H=p[y];for(var r=0,q=0;q<w.length;q++)if(H.rules[q]&&w[q]){if(w[q].s>=H.rules[q].s&&w[q].e<=H.rules[q].e)r=0,r+=Math.abs(w[q].s-H.rules[q].s),r+=Math.abs(H.rules[q].e-w[q].e);else{r="N/A";break}if(864E6<r){r="N/A";break}}H=g(w,u,r,H);"N/A"!==H&&(B[F.name]=H)}for(var x in B)if(B.hasOwnProperty(x))for(p=0;p<A.length;p++)if(A[p]===x)return x;return u},n=function(w){var u=function(){for(var B=[],p=0;p<c.olson.dst_rules.years.length;p++){var v=c.olson.dst_rules.years[p];
var A=(new Date(v,0,1,0,0,1,0)).getTime();v=(new Date(v,12,31,23,59,59)).getTime();for(var y=(new Date(A)).getTimezoneOffset(),F=null,H=null;A<v-864E5;){var r=new Date(A),q=r.getTimezoneOffset();q!==y&&(q<y&&(F=r),q>y&&(H=r),y=q);A+=864E5}v=F&&H?{s:f(F).getTime(),e:f(H).getTime()}:!1;B.push(v)}return B}();return function(B){for(var p=0;p<B.length;p++)if(!1!==B[p])return!0;return!1}(u)?m(u,w):w};return{determine:function(){var w=navigator.userAgent.toLowerCase(),u=b();u||(-1!=w.indexOf("firefox")&&
"undefined"!==typeof Intl&&"undefined"!==typeof Intl.DateTimeFormat&&(w=Intl.DateTimeFormat(void 0,{timeZoneName:"long"}).format(new Date).toLowerCase(),-1!=w.indexOf("montevideo")||-1!=w.indexOf("uruguay"))&&(u="America/Montevideo"),u||(u=c.olson.timezones[a()]),"undefined"!==typeof d[u]&&(u=n(u)));return{name:function(){return u}}}}}();c.olson=c.olson||{};c.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu",
"-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab",
"-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg",
"300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe",
"660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};c.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572E5,s:12090744E5},{e:1250802E6,s:1240524E6},{e:12858804E5,s:12840696E5},!1,!1,!1,{e:14116788E5,s:1406844E6}]},{name:"Africa/Casablanca",rules:[{e:12202236E5,
s:12122784E5},{e:12508092E5,s:12438144E5},{e:1281222E6,s:12727584E5},{e:13120668E5,s:13017888E5},{e:13489704E5,s:1345428E6},{e:13828392E5,s:13761E8},{e:14142888E5,s:14069448E5}]},{name:"America/Asuncion",rules:[{e:12050316E5,s:12243888E5},{e:12364812E5,s:12558384E5},{e:12709548E5,s:12860784E5},{e:13024044E5,s:1317528E6},{e:1333854E6,s:13495824E5},{e:1364094E6,s:1381032E6},{e:13955436E5,s:14124816E5}]},{name:"America/Campo_Grande",rules:[{e:12032172E5,s:12243888E5},{e:12346668E5,s:12558384E5},{e:12667212E5,
s:1287288E6},{e:12981708E5,s:13187376E5},{e:13302252E5,s:1350792E6},{e:136107E7,s:13822416E5},{e:13925196E5,s:14136912E5}]},{name:"America/Goose_Bay",rules:[{e:122559486E4,s:120503526E4},{e:125704446E4,s:123648486E4},{e:128909886E4,s:126853926E4},{e:13205556E5,s:129998886E4},{e:13520052E5,s:13314456E5},{e:13834548E5,s:13628952E5},{e:14149044E5,s:13943448E5}]},{name:"America/Havana",rules:[{e:12249972E5,s:12056436E5},{e:12564468E5,s:12364884E5},{e:12885012E5,s:12685428E5},{e:13211604E5,s:13005972E5},
{e:13520052E5,s:13332564E5},{e:13834548E5,s:13628916E5},{e:14149044E5,s:13943412E5}]},{name:"America/Mazatlan",rules:[{e:1225008E6,s:12074724E5},{e:12564576E5,s:1238922E6},{e:1288512E6,s:12703716E5},{e:13199616E5,s:13018212E5},{e:13514112E5,s:13332708E5},{e:13828608E5,s:13653252E5},{e:14143104E5,s:13967748E5}]},{name:"America/Mexico_City",rules:[{e:12250044E5,s:12074688E5},{e:1256454E6,s:12389184E5},{e:12885084E5,s:1270368E6},{e:1319958E6,s:13018176E5},{e:13514076E5,s:13332672E5},{e:13828572E5,s:13653216E5},
{e:14143068E5,s:13967712E5}]},{name:"America/Miquelon",rules:[{e:12255984E5,s:12050388E5},{e:1257048E6,s:12364884E5},{e:12891024E5,s:12685428E5},{e:1320552E6,s:12999924E5},{e:13520016E5,s:1331442E6},{e:13834512E5,s:13628916E5},{e:14149008E5,s:13943412E5}]},{name:"America/Santa_Isabel",rules:[{e:12250116E5,s:1207476E6},{e:12564612E5,s:12389256E5},{e:12885156E5,s:12703752E5},{e:13199652E5,s:13018248E5},{e:13514148E5,s:13332744E5},{e:13828644E5,s:13653288E5},{e:1414314E6,s:13967784E5}]},{name:"America/Santiago",
rules:[{e:1206846E6,s:1223784E6},{e:1237086E6,s:12552336E5},{e:127035E7,s:12866832E5},{e:13048236E5,s:13138992E5},{e:13356684E5,s:13465584E5},{e:1367118E6,s:13786128E5},{e:13985676E5,s:14100624E5}]},{name:"America/Sao_Paulo",rules:[{e:12032136E5,s:12243852E5},{e:12346632E5,s:12558348E5},{e:12667176E5,s:12872844E5},{e:12981672E5,s:1318734E6},{e:13302216E5,s:13507884E5},{e:13610664E5,s:1382238E6},{e:1392516E6,s:14136876E5}]},{name:"Asia/Amman",rules:[{e:1225404E6,s:12066552E5},{e:12568536E5,s:12381048E5},
{e:12883032E5,s:12695544E5},{e:13197528E5,s:13016088E5},!1,!1,{e:14147064E5,s:13959576E5}]},{name:"Asia/Damascus",rules:[{e:12254868E5,s:120726E7},{e:125685E7,s:12381048E5},{e:12882996E5,s:12701592E5},{e:13197492E5,s:13016088E5},{e:13511988E5,s:13330584E5},{e:13826484E5,s:1364508E6},{e:14147028E5,s:13959576E5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572E5,s:12066552E5},{e:12520152E5,s:12381048E5},{e:1281474E6,s:126964086E4},{e:1312146E6,s:130160886E4},{e:13481784E5,
s:13330584E5},{e:13802292E5,s:1364508E6},{e:1414098E6,s:13959576E5}]},{name:"Asia/Irkutsk",rules:[{e:12249576E5,s:12068136E5},{e:12564072E5,s:12382632E5},{e:12884616E5,s:12697128E5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612E5,s:12066624E5},{e:1254006E6,s:1238112E6},{e:1284246E6,s:12695616E5},{e:131751E7,s:1301616E6},{e:13483548E5,s:13330656E5},{e:13828284E5,s:13645152E5},{e:1414278E6,s:13959648E5}]},{name:"Asia/Kamchatka",rules:[{e:12249432E5,s:12067992E5},{e:12563928E5,s:12382488E5},
{e:12884508E5,s:12696984E5},!1,!1,!1,!1]},{name:"Asia/Krasnoyarsk",rules:[{e:12249612E5,s:12068172E5},{e:12564108E5,s:12382668E5},{e:12884652E5,s:12697164E5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648E5,s:12068208E5},{e:12564144E5,s:12382704E5},{e:12884688E5,s:126972E7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504E5,s:12068064E5},{e:12564E8,s:1238256E6},{e:12884544E5,s:12697056E5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954E6,s:120681E7},{e:12564036E5,s:12382596E5},{e:1288458E6,
s:12697092E5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",rules:[{e:12249684E5,s:12068244E5},{e:1256418E6,s:1238274E6},{e:12884724E5,s:12697236E5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972E6,s:1206828E6},{e:12564216E5,s:12382776E5},{e:1288476E6,s:12697272E5},{e:13199256E5,s:13011768E5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076E5,s:12231342E5},{e:12388572E5,s:12545838E5},{e:12703068E5,s:12860334E5},{e:13017564E5,s:1317483E6},{e:1333206E6,s:13495374E5},{e:13652604E5,s:1380987E6},
{e:139671E7,s:14124366E5}]},{name:"Australia/Perth",rules:[{e:12068136E5,s:12249576E5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]},{name:"Europe/Minsk",rules:[{e:12249792E5,s:12068352E5},{e:12564288E5,s:12382848E5},{e:12884832E5,s:12697344E5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756E5,
s:12068316E5},{e:12564252E5,s:12382812E5},{e:12884796E5,s:12697308E5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528E5,s:13168728E5},{e:13332024E5,s:13489272E5},{e:13652568E5,s:13803768E5},{e:13967064E5,s:14118264E5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984E5,s:12878424E5},{e:13271544E5,s:1319292E6},{e:1358604E6,s:13507416E5},{e:139005E7,s:1382796E6},{e:14215032E5,s:14148504E5}]},{name:"Europe/London",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,
s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]}]};"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=c:"undefined"!==typeof define&&null!==define&&null!=define.amd?define([],function(){return c}):"undefined"===typeof l?window.jstz=c:l.jstz=c})();gx.livePrev=function(l){gx.ajax.getPostInfo("",!1);gx.ajax.getPostInfo("",!1);return{}}(gx.$);
gx.livePrevWS={FIRST_PORT:30100,LAST_PORT:30120,MAX_RETRY:3,retry_count:0,onError:function(){gx.livePrevWS.IPNamesIdx<gx.livePrevWS.IPNames.length-1?(gx.livePrevWS.IPNamesIdx+=1,gx.livePrevWS.host=gx.livePrevWS.IPNames[gx.livePrevWS.IPNamesIdx],gx.livePrev.port=gx.livePrevWS.FIRST_PORT,gx.livePrevWS.Connect()):gx.livePrev.port<gx.livePrevWS.LAST_PORT?(gx.livePrevWS.IPNamesIdx=0,gx.livePrev.port+=1,gx.livePrevWS.Connect()):gx.util.alert.showMessage("Can not Connect to LivePreview",{dismissmitAt:5E3})},
onMessage:function(l){var c=function(b){var f=$.map(document.styleSheets,function(g){return g.href==b?g:null});return 0<f.length?f[0]:void 0},d=function(b,f,g){return g((b||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase(),(f||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase())},k=function(b,f,g){var m=b.cssRules,n=m.length,t=!1,w=!1;$.each(m,function(u,B){B&&B.selectorText&&d(B.selectorText,f.replace(":","::"),function(p,v){return p==v})&&(b.deleteRule(u),n=u,t=!0)});t||$.each(m,function(u,B){B&&B.selectorText&&
d(B.selectorText,f.replace(":","::")+",",function(p,v){return 0==p.indexOf(v)})&&(b.deleteRule(u),n=u,b.insertRule(B.selectorText+g.replace(/.*{/,"{"),n),w=!0)});w||b.insertRule(g,n)},a=function(b){var f=gx.getThemeElement();if(f=c(f.href))for(var g=0==b.indexOf("@media",0),m=b.split(/{|}/),n=0;n<m.length-1;n+=2){var t=m[n].replace(/(\r\n|\r|\n| *$)/gm,"");gx.lang.emptyObject(t)||(g?$.each(f.cssRules,function(w,u){g&&!u.selectorText&&(w=u.cssText.split(/{/)[0],d(w.replace(/ all and/gm,""),t)&&(t=
m[n+1].replace(/(\r\n|\r|\n| )/gm,""),k(u,t,t+" {"+m[n+2]+"}")))}):k(f,t,t+" {"+m[n+1]+"}"))}};l=gx.json.evalJSON(l);if("KBOK"===l.Type)gx.util.alert.showMessage("Connected to LivePreview at "+gx.livePrevWS.host+" on port "+gx.livePrev.port,{dismissmitAt:2E3});else if("KBDoesNotMatchGUID"===l.Type)gx.livePrevWS.onError();else"ThemeStyleChanged"===l.Type&&a(l.Data)},onOpen:function(){gx.livePrevWS.timeOutHdlr&&clearTimeout(gx.livePrevWS.timeOutHdlr);gx.livePrevWS.retry_count=0;gx.livePrevWS.SocketConnect()},
onTimeout:function(){gx.livePrevWS.webSocket.close();gx.livePrevWS.onError()},SocketConnect:function(){objData={KBUUID:gx.livePrevWS.KBUUID,Language:gx.languageCode,KBName:"TestWS",DeviceName:"Web Simulator",DeviceId:gx.livePrevWS.clientGUID,DeviceType:0,DeviceOSName:"Web",Theme:gx.theme,Type:"Connect",Data:{Name:gx.livePrevWS.KBName,UUID:gx.livePrevWS.KBUUID}};gx.livePrevWS.webSocket.send(gx.json.serializeJson(objData))},Connect:function(){var l={};gx.livePrev.port=gx.livePrev.port||gx.livePrevWS.FIRST_PORT;
l.port=gx.livePrev.port;l.wsProtocol="https:"===location.protocol?"wss://":"ws://";l.host=gx.livePrevWS.host+":"+l.port;l.resourceUrl="/live/";l.namespace="livepreview";l.maxRetries=10;l.retryDelay=50;gx.livePrevWS.webSocket&&gx.livePrevWS.webSocket.close();gx.livePrevWS.webSocket=new gx.webSocket(l);gx.livePrevWS.timeOutHdlr=setTimeout(gx.livePrevWS.onTimeout,3E3)},_init:function(){if(!gx.lang.emptyObject(gx.livePreviewUri)){gx.fx.obs.addObserver("gx.ws.onOpen.livepreview",gx.livePrevWS,gx.livePrevWS.onOpen,
{single:!1});gx.fx.obs.addObserver("gx.ws.onMessage.livepreview",gx.livePrevWS,gx.livePrevWS.onMessage,{single:!1});gx.fx.obs.addObserver("gx.ws.onError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});gx.fx.obs.addObserver("gx.ws.onCtxError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});if(!gx.livePrevWS.clientGUID){var l=gx.livePrevWS,c=gx.http.getCookie("GXClientID");c=c||gx.guid.generate();gx.http.setCookie("GXClientID",c,1,!1);l.clientGUID=c}l="";c=[];var d=gx.livePreviewUri.split("?");
0<d.length&&(d=d[1],d=d.split(":"),2<d.length&&(l=d[1],c=d[2].substring(1,d[2].length-1).split(","),d=d[0]));gx.livePrevWS.IPNamesIdx=0;gx.livePrevWS.IPNames=c;gx.livePrevWS.KBName=l;gx.livePrevWS.KBUUID=d;gx.livePrevWS.host=gx.livePrevWS.IPNames[0];gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"html2canvas.js?"+gx.gxBuild,!1),gx.livePrevWS.Connect)}}};
gx.nav=function(){var l=function(){var a={top:!0,right:!0,bottom:!0,left:!0};return function(b){return!!a[b.toLowerCase()]}}(),c=function(a){var b=a;gx.gen.isDotNet()&&(b=a.replace(/\.aspx$/,""));gx.gen.isJava()&&gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName)&&(b=a.substring(gx.pO.PackageName.length+1));return b},d=function(a){var b=a.split("?"),f;if(0<b.length){var g=2==b.length?b[1].split(gx.http.urlParameterSeparator(a)):[];var m=0;for(f=g.length;m<f;m++)g[m]=gx.http.useNamedParameters(a)?
decodeURIComponent(g[m].split("=")[1]):decodeURIComponent(g[m]);return{obj:b[0],args:g}}return!1},k={};return{setCallTarget:function(a,b){k[a.toLowerCase()]=b.toLowerCase()},willRedirect:function(a){return gx.pO&&!gx.pO.fullAjax?!0:!l(k[c(a).toLowerCase()]||"")},willRedirectByUrl:function(a){a=d(a);return this.willRedirect(a.obj,a.args)},call:function(a,b,f){var g=c(a),m=gx.pO.MasterPage;f=f||k[g.toLowerCase()]||"";delete k[g.toLowerCase()];gx.pO&&!gx.pO.fullAjax?gx.http.redirect(gx.http.formatLink(a,
b),!1,!1,gx.pO):l(f)?m&&m.createObjectInTarget(f,g,b):gx.http.redirect(gx.http.formatLink(a,b),!1,!1,gx.pO)},callUrl:function(a,b){(a=d(a))&&this.call(a.obj,a.args,b)},callFromServerRedirect:function(a,b){this.callUrl(a,b)}}}(gx.$);
(function(l){"function"===typeof define&&define.amd?define(["jquery"],l):l(jQuery)})(function(l){l.ui=l.ui||{};l.ui.version="1.13.2";(function(){function c(u,B,p){return[parseFloat(u[0])*(t.test(u[0])?B/100:1),parseFloat(u[1])*(t.test(u[1])?p/100:1)]}function d(u){var B=u[0];return 9===B.nodeType?{width:u.width(),height:u.height(),offset:{top:0,left:0}}:null!=B&&B===B.window?{width:u.width(),height:u.height(),offset:{top:u.scrollTop(),left:u.scrollLeft()}}:B.preventDefault?{width:0,height:0,offset:{top:B.pageY,
left:B.pageX}}:{width:u.outerWidth(),height:u.outerHeight(),offset:u.offset()}}var k,a=Math.max,b=Math.abs,f=/left|center|right/,g=/top|center|bottom/,m=/[\+\-]\d+(\.[\d]+)?%?/,n=/^\w+/,t=/%$/,w=l.fn.position;l.position={scrollbarWidth:function(){if(void 0!==k)return k;var u=l("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>");var B=u.children()[0];l("body").append(u);var p=B.offsetWidth;u.css("overflow","scroll");
B=B.offsetWidth;p===B&&(B=u[0].clientWidth);u.remove();return k=p-B},getScrollInfo:function(u){var B=u.isWindow||u.isDocument?"":u.element.css("overflow-x"),p=u.isWindow||u.isDocument?"":u.element.css("overflow-y");B="scroll"===B||"auto"===B&&u.width<u.element[0].scrollWidth;return{width:"scroll"===p||"auto"===p&&u.height<u.element[0].scrollHeight?l.position.scrollbarWidth():0,height:B?l.position.scrollbarWidth():0}},getWithinInfo:function(u){var B=l(u||window);var p=B[0];p=null!=p&&p===p.window;
var v=!!B[0]&&9===B[0].nodeType;return{element:B,isWindow:p,isDocument:v,offset:p||v?{left:0,top:0}:l(u).offset(),scrollLeft:B.scrollLeft(),scrollTop:B.scrollTop(),width:B.outerWidth(),height:B.outerHeight()}}};l.fn.position=function(u){if(!u||!u.of)return w.apply(this,arguments);u=l.extend({},u);var B="string"===typeof u.of?l(document).find(u.of):l(u.of),p=l.position.getWithinInfo(u.within),v=l.position.getScrollInfo(p),A=(u.collision||"flip").split(" "),y={};var F=d(B);B[0].preventDefault&&(u.at=
"left top");var H=F.width;var r=F.height;var q=F.offset;var x=l.extend({},q);l.each(["my","at"],function(){var C=(u[this]||"").split(" ");1===C.length&&(C=f.test(C[0])?C.concat(["center"]):g.test(C[0])?["center"].concat(C):["center","center"]);C[0]=f.test(C[0])?C[0]:"center";C[1]=g.test(C[1])?C[1]:"center";var I=m.exec(C[0]);var G=m.exec(C[1]);y[this]=[I?I[0]:0,G?G[0]:0];u[this]=[n.exec(C[0])[0],n.exec(C[1])[0]]});1===A.length&&(A[1]=A[0]);"right"===u.at[0]?x.left+=H:"center"===u.at[0]&&(x.left+=
H/2);"bottom"===u.at[1]?x.top+=r:"center"===u.at[1]&&(x.top+=r/2);var D=c(y.at,H,r);x.left+=D[0];x.top+=D[1];return this.each(function(){var C,I=l(this),G=I.outerWidth(),K=I.outerHeight(),N=parseInt(l.css(this,"marginLeft"),10)||0,P=parseInt(l.css(this,"marginTop"),10)||0,O=G+N+(parseInt(l.css(this,"marginRight"),10)||0)+v.width,W=K+P+(parseInt(l.css(this,"marginBottom"),10)||0)+v.height,V=l.extend({},x),Y=c(y.my,I.outerWidth(),I.outerHeight());"right"===u.my[0]?V.left-=G:"center"===u.my[0]&&(V.left-=
G/2);"bottom"===u.my[1]?V.top-=K:"center"===u.my[1]&&(V.top-=K/2);V.left+=Y[0];V.top+=Y[1];var ba={marginLeft:N,marginTop:P};l.each(["left","top"],function(fa,da){if(l.ui.position[A[fa]])l.ui.position[A[fa]][da](V,{targetWidth:H,targetHeight:r,elemWidth:G,elemHeight:K,collisionPosition:ba,collisionWidth:O,collisionHeight:W,offset:[D[0]+Y[0],D[1]+Y[1]],my:u.my,at:u.at,within:p,elem:I})});u.using&&(C=function(fa){var da=q.left-V.left,ka=da+H-G,ma=q.top-V.top,na=ma+r-K,ca={target:{element:B,left:q.left,
top:q.top,width:H,height:r},element:{element:I,left:V.left,top:V.top,width:G,height:K},horizontal:0>ka?"left":0<da?"right":"center",vertical:0>na?"top":0<ma?"bottom":"middle"};H<G&&b(da+ka)<H&&(ca.horizontal="center");r<K&&b(ma+na)<r&&(ca.vertical="middle");a(b(da),b(ka))>a(b(ma),b(na))?ca.important="horizontal":ca.important="vertical";u.using.call(this,fa,ca)});I.offset(l.extend(V,{using:C}))})};l.ui.position={fit:{left:function(u,B){var p=B.within,v=p.isWindow?p.scrollLeft:p.offset.left,A=p.width,
y=u.left-B.collisionPosition.marginLeft;p=v-y;var F=y+B.collisionWidth-A-v;B.collisionWidth>A?0<p&&0>=F?(B=u.left+p+B.collisionWidth-A-v,u.left+=p-B):u.left=0<F&&0>=p?v:p>F?v+A-B.collisionWidth:v:u.left=0<p?u.left+p:0<F?u.left-F:a(u.left-y,u.left)},top:function(u,B){var p=B.within,v=p.isWindow?p.scrollTop:p.offset.top,A=B.within.height,y=u.top-B.collisionPosition.marginTop;p=v-y;var F=y+B.collisionHeight-A-v;B.collisionHeight>A?0<p&&0>=F?(B=u.top+p+B.collisionHeight-A-v,u.top+=p-B):u.top=0<F&&0>=
p?v:p>F?v+A-B.collisionHeight:v:u.top=0<p?u.top+p:0<F?u.top-F:a(u.top-y,u.top)}},flip:{left:function(u,B){var p=B.within,v=p.offset.left+p.scrollLeft,A=p.width,y=p.isWindow?p.scrollLeft:p.offset.left,F=u.left-B.collisionPosition.marginLeft;p=F-y;var H=F+B.collisionWidth-A-y;F="left"===B.my[0]?-B.elemWidth:"right"===B.my[0]?B.elemWidth:0;var r="left"===B.at[0]?B.targetWidth:"right"===B.at[0]?-B.targetWidth:0,q=-2*B.offset[0];if(0>p){if(B=u.left+F+r+q+B.collisionWidth-A-v,0>B||B<b(p))u.left+=F+r+q}else 0<
H&&(B=u.left-B.collisionPosition.marginLeft+F+r+q-y,0<B||b(B)<H)&&(u.left+=F+r+q)},top:function(u,B){var p=B.within,v=p.offset.top+p.scrollTop,A=p.height,y=p.isWindow?p.scrollTop:p.offset.top,F=u.top-B.collisionPosition.marginTop;p=F-y;var H=F+B.collisionHeight-A-y;F="top"===B.my[1]?-B.elemHeight:"bottom"===B.my[1]?B.elemHeight:0;var r="top"===B.at[1]?B.targetHeight:"bottom"===B.at[1]?-B.targetHeight:0,q=-2*B.offset[1];if(0>p){if(B=u.top+F+r+q+B.collisionHeight-A-v,0>B||B<b(p))u.top+=F+r+q}else 0<
H&&(B=u.top-B.collisionPosition.marginTop+F+r+q-y,0<B||b(B)<H)&&(u.top+=F+r+q)}},flipfit:{left:function(){l.ui.position.flip.left.apply(this,arguments);l.ui.position.fit.left.apply(this,arguments)},top:function(){l.ui.position.flip.top.apply(this,arguments);l.ui.position.fit.top.apply(this,arguments)}}}})()});
