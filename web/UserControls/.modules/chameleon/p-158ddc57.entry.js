import{r as t,c as e,g as s,h as i,H as n}from"./p-7af91c05.js";const o="*,::after,::before{box-sizing:border-box}:host{--window-max-height:none;--window-gap:50px}.main-wrapper{display:block}.label-input-wrapper{display:flex}.label-input-wrapper .input{flex:1}:host([label-position=start]) .label-input-wrapper{flex-direction:row}:host([label-position=above]) .label-input-wrapper{flex-direction:column}.input{background-color:unset;border:none;color:inherit;font:inherit;margin:0;padding:0;outline:0}.ch-window-container{position:relative}ch-window::part(window){width:100%;max-height:calc(var(--window-max-height) - var(--window-gap));overflow-y:auto}";const c=o;const a="ArrowDown";const r="ArrowUp";const h=class{constructor(s){t(this,s);this.valueChanged=e(this,"valueChanged",7);this.selectionChanged=e(this,"selectionChanged",7);this.windowHidden=true;this.debounce=300;this.label=undefined;this.labelPosition="start";this.showLabel=true;this.value=undefined;this.showHeader=false;this.suggestTitle=undefined;this.cursorEnd=false}timeoutReference;keyEventsDictionary={ArrowDown:t=>{const e=this.getNewFocusedItem(t.currentFocusedItem,a);const s=this.getNewFocusedItem(e,a);e&&e.focus();if(!s){this.scrollListToBottom()}},ArrowUp:t=>{const e=this.getNewFocusedItem(t.currentFocusedItem,r);const s=this.getNewFocusedItem(e,r);e&&e.focus();if(!s){this.scrollListToTop()}}};textInput;chWindow;slot;get el(){return s(this)}valueChanged;selectionChanged;itemSelectedHandler(t){t.stopPropagation();this.value=t.detail.value;this.closeWindow();this.selectionChanged.emit(t.detail)}focusChangeAttemptHandler(t){const e=this.keyEventsDictionary[t.detail.code];if(e){const s=t.detail.el;const i=this.getChSuggestListItems();const n=i.findIndex((t=>t===s));const o=null;e({event:t.detail,currentFocusedItem:s,chSuggestListItemsArray:i,currentFocusedItemIndex:n,newItemToSetFocusOn:o})}}windowClosedHandler(){this.textInput.focus();this.windowHidden=true;this.slot.innerHTML=""}async selectInputText(){this.textInput.focus();this.textInput.select()}evaluateSlotIsEmpty=()=>{this.chWindow.hidden=!this.el.firstElementChild};setFocusOnFirstItem=()=>{const t=this.el.querySelector("ch-suggest-list-item");t&&t.focus()};getChSuggestListItems=()=>Array.from(this.el.querySelectorAll("ch-suggest-list-item"));getNewFocusedItem=(t,e)=>{const s=t=>{const s=t.querySelectorAll("ch-suggest-list-item");let i=s&&s[s.length-1];if(e===a){i=t.querySelector("ch-suggest-list-item")}else{const e=t.querySelectorAll("ch-suggest-list-item");i=e&&e[e.length-1]}return i};if(!t){return}let i=e===a?t.nextElementSibling:t.previousElementSibling;if(i?.nodeName==="CH-SUGGEST-LIST"){i=s(i)}else if(!i){const n=t.parentElement;const o=e===a?n.nextElementSibling:n.previousElementSibling;const c=n.nodeName==="CH-SUGGEST-LIST";if(c&&o&&o.nodeName==="CH-SUGGEST-LIST-ITEM"){i=e===a?n.nextElementSibling:n.previousElementSibling}else if(c&&o&&o.nodeName==="CH-SUGGEST-LIST"){const t=e===a?n.nextElementSibling:n.previousElementSibling;let o;if(e===a){o=t.querySelector("ch-suggest-list-item")}else{o=s(t)}i=o?o:null}}return i};handleInput=t=>{const e=t.target.value;this.value=e;if(this.timeoutReference){clearTimeout(this.timeoutReference)}this.timeoutReference=setTimeout((()=>{this.processInputEvent(e)}),this.debounce)};handleKeyDown=t=>{if(t.key===a){t.preventDefault();this.setFocusOnFirstItem()}};evaluateWindowMaxHeight=()=>{const t=window.innerHeight;const e=document.body.scrollHeight;const s=e>=t?e:t;const i=this.textInput.getBoundingClientRect().bottom+window.scrollY;const n=s-i+"px";this.el.style.setProperty("--window-max-height",n)};scrollListToTop=()=>{const t=this.chWindow.shadowRoot.querySelector("[part='window']");t.scrollTop=0};scrollListToBottom=()=>{const t=this.chWindow.shadowRoot.querySelector("[part='window']");t.scrollTop=t.scrollHeight};processInputEvent=t=>{this.valueChanged.emit(t);this.evaluateWindowMaxHeight()};closeWindow=()=>{this.chWindow.hidden=true};onFocusHandler=()=>{if(this.cursorEnd){this.textInput.setSelectionRange(this.textInput.value.length,this.textInput.value.length)}};render(){return i(n,{key:"e369dd34cc97b653290f91c4e5829c66b5f0b435"},i("div",{key:"19e24b607bacbb526db8faad746c636607c8d435",class:"main-wrapper",part:"main-wrapper"},i("div",{key:"b1d458805be511b1a5a22b914ff8e3aff3270c38",class:"label-input-wrapper",part:"label-input-wrapper"},this.showLabel&&this.label&&i("label",{key:"d4eee023e99cf09bfff795907def63405527fb09",id:"label",htmlFor:"input",part:"label"},this.label),i("input",{key:"4f5f881064008435ad633f5a8c316160c3061f38",type:"text",id:"input",part:"input",class:"input",ref:t=>this.textInput=t,onInput:this.handleInput,onKeyDown:this.handleKeyDown,onFocus:this.onFocusHandler,value:this.value,autocomplete:"off","aria-controls":"ch-window","aria-label":!this.showLabel&&this.label?this.label:undefined,"aria-labelledby":this.showLabel&&this.label?"label":undefined,"aria-expanded":this.windowHidden.toString()})),i("ch-window",{key:"571af118967925b3097641fc4372eddc2fbcf836",id:"ch-window",container:this.textInput,"close-on-outside-click":true,"close-on-escape":true,xAlign:"inside-start",yAlign:"outside-end",ref:t=>this.chWindow=t,showHeader:this.showHeader,caption:this.suggestTitle,exportparts:"\n            header:header, \n            caption:title, \n            close:close-button,\n            window:dropdown"},i("slot",{key:"22768c116a4a9e7d72c3de0e513cabfac3ba9908",onSlotchange:this.evaluateSlotIsEmpty,ref:t=>this.slot=t}))))}static get delegatesFocus(){return true}};h.style=c;const l="*,::after,::before{box-sizing:border-box}:host{display:block}.title{margin:0;font:inherit}.list{margin:0;padding:0}";const d=l;const f=class{constructor(e){t(this,e);this.label=undefined}render(){return i(n,{key:"6e582600080aeacaf2540c3a7fc47e200f40efdb"},this.label&&i("h2",{key:"b6f96a4ce8285533ac6ce26cb95cf7734b2c630d",id:"heading",part:"title",class:"title"},this.label),i("ul",{key:"e324b3abc24b76385403a9a4776c12fbbf469943","aria-labelledby":this.label?"heading":undefined,part:"list",class:"list"},i("slot",{key:"c1ce00770322ad3c75ad5be1b8d51cadd5f9c3a8"})))}};f.style=d;const u=":host{display:block}:where(button){all:unset;display:flex;width:100%;cursor:pointer}*,::after,::before{box-sizing:border-box}";const p=u;const b="ArrowDown";const w="ArrowUp";const g=class{constructor(s){t(this,s);this.itemSelected=e(this,"itemSelected",7);this.focusChangeAttempt=e(this,"focusChangeAttempt",7);this.iconSrc=undefined;this.value=undefined}get el(){return s(this)}itemSelected;focusChangeAttempt;getItemIndexes=()=>{const t=this.el.parentElement;if(t.nodeName==="CH-SUGGEST"){const e=t;let s=-1;const i=Array.from(e.querySelectorAll(":scope > ch-suggest-list-item"));for(let t=0;t<i.length;t++){if(i[t]===this.el){s=t;break}}return{itemIndex:s,listIndex:undefined}}if(t.nodeName==="CH-SUGGEST-LIST"){const e=t;const s=Array.from(e.parentElement.querySelectorAll(":scope > ch-suggest-list"));const i=s.findIndex((t=>t===e));if(i!==-1){const t=Array.from(e.querySelectorAll("ch-suggest-list-item"));const s=t.findIndex((t=>t===this.el));return{itemIndex:s,listIndex:i}}}};handleClick=()=>{const t=this.getItemIndexes();this.itemSelected.emit({value:this.value||this.el.innerText,description:this.el.innerText,icon:this.iconSrc,indexes:t})};handleKeyDown=t=>{if(t.code===w||t.code===b){t.preventDefault();this.focusChangeAttempt.emit({el:this.el,code:t.code})}};render(){return i(n,{key:"fc68155adf768468274950eff4094b86598d2090",role:"listitem",onKeyDown:this.handleKeyDown},i("button",{key:"44c1cae511319ea181047873fe42ce80ddf46a1e",part:"button",onClick:this.handleClick},i("slot",{key:"9df3744131fc67e44245bb7d56d7e37c127ef76e",name:"icon"}),i("div",{key:"cc330a1638482491af1fc8ff23b09fe332fbfbad",class:"content-wrapper",part:"content-wrapper"},i("slot",{key:"b98ef30b5ee4aee441a9f1f6c069c6c5629d95ab"}))))}static get delegatesFocus(){return true}};g.style=p;export{h as ch_suggest,f as ch_suggest_list,g as ch_suggest_list_item};
//# sourceMappingURL=p-158ddc57.entry.js.map