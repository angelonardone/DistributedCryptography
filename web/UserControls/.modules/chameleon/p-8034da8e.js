import{h as e,r as t,g as o,H as r}from"./p-7af91c05.js";import{a as c}from"./p-a859514b.js";import{S as n}from"./p-9db16727.js";import{a as s,r as a,o as l,b as i}from"./p-1648189c.js";import{x as h,E as d,e as u,i as _,t as f,T as m,n as v,a as b}from"./p-98092b8a.js";const w=(e,t)=>e===t;const p={element:(t,o,r)=>{const c=t.properties.className;const n=w(t,r);const s=c?c.join(" "):undefined;return e("span",{class:{[s]:!!s,[o]:n}},g(t,o,r))},text:e=>e.value};function g(e,t,o){return e.children.map((e=>p[e.type](e,t,o)))}const C=e=>{const t=e.children.at(-1);if(t.children?.length>0){return C(t)}return e};const y=async(e,t,o,r)=>{const c=l(t);await s(c);const n=a(c,e);const i=o?C(n):undefined;return{renderedCode:g(n,r,i),lastNestedChildIsRoot:n===i}};const k=':host{--ch-code__addition:currentColor;--ch-code__attr:currentColor;--ch-code__attribute:currentColor;--ch-code__built-in:currentColor;--ch-code__bullet:currentColor;--ch-code__class:currentColor;--ch-code__code:currentColor;--ch-code__comment:currentColor;--ch-code__deletion:currentColor;--ch-code__doctag:currentColor;--ch-code__formula:currentColor;--ch-code__function:currentColor;--ch-code__function-variable:currentColor;--ch-code__keyword:currentColor;--ch-code__link:currentColor;--ch-code__literal:currentColor;--ch-code__meta:currentColor;--ch-code__meta__keyword:currentColor;--ch-code__meta__string:currentColor;--ch-code__name:currentColor;--ch-code__number:currentColor;--ch-code__operator:currentColor;--ch-code__regexp:currentColor;--ch-code__quote:currentColor;--ch-code__selector-attr:currentColor;--ch-code__selector-class:currentColor;--ch-code__selector-id:currentColor;--ch-code__selector-pseudo:currentColor;--ch-code__selector-tag:currentColor;--ch-code__string:currentColor;--ch-code__subst:currentColor;--ch-code__symbol:currentColor;--ch-code__tag:currentColor;--ch-code__template-tag:currentColor;--ch-code__template-variable:currentColor;--ch-code__title:currentColor;--ch-code__title-class:currentColor;--ch-code__title-class-inherited:currentColor;--ch-code__title-function:currentColor;--ch-code__type:currentColor;--ch-code__variable:currentColor;--ch-code__variable-language:currentColor;--ch-code-indicator-color:currentColor;--ch-code-inline-size:1.125ch;--ch-code-block-size:1em;display:grid;grid-template-columns:1fr;grid-template-rows:1fr;font-family:monospace;white-space:pre;overflow:auto}code{font:inherit;contain:inline-size}.hljs-addition{color:var(--ch-code__addition)}.hljs-attr{color:var(--ch-code__attr)}.hljs-attribute{color:var(--ch-code__attribute)}.hljs-subst{color:var(--ch-code__subst)}.hljs-built_in{color:var(--ch-code__built-in)}.hljs-bullet{color:var(--ch-code__bullet)}.hljs-class{color:var(--ch-code__class)}.hljs-code{color:var(--ch-code__code)}.hljs-comment{color:var(--ch-code__comment)}.hljs-deletion{color:var(--ch-code__deletion)}.hljs-doctag{color:var(--ch-code__doctag)}.hljs-formula{color:var(--ch-code__formula)}.hljs-function{color:var(--ch-code__function)}.hljs-function.variable_{color:var(--ch-code__function-variable)}.hljs-keyword{color:var(--ch-code__keyword)}.hljs-link{color:var(--ch-code__link)}.hljs-literal{color:var(--ch-code__literal)}.hljs-meta{color:var(--ch-code__meta)}.hljs-meta .hljs-keyword{color:var(--ch-code__meta__keyword)}.hljs-meta .hljs-string{color:var(--ch-code__meta__string)}.hljs-name{color:var(--ch-code__name)}.hljs-number{color:var(--ch-code__number)}.hljs-operator{color:var(--ch-code__operator)}.hljs-regexp{color:var(--ch-code__regexp)}.hljs-quote{color:var(--ch-code__quote)}.hljs-selector-attr{color:var(--ch-code__selector-attr)}.hljs-selector-class{color:var(--ch-code__selector-class)}.hljs-selector-id{color:var(--ch-code__selector-id)}.hljs-selector-pseudo{color:var(--ch-code__selector-pseudo)}.hljs-selector-tag{color:var(--ch-code__selector-tag)}.hljs-string{color:var(--ch-code__string)}.hljs-symbol{color:var(--ch-code__symbol)}.hljs-tag{color:var(--ch-code__tag)}.hljs-template-tag{color:var(--ch-code__template-tag)}.hljs-template-variable{color:var(--ch-code__template-variable)}.hljs-title{color:var(--ch-code__title)}.hljs-title.class_{color:var(--ch-code__title-class)}.hljs-title.class_.inherited__{color:var(--ch-code__title-class-inherited)}.hljs-title.function_{color:var(--ch-code__title-function)}.hljs-type{color:var(--ch-code__type)}.hljs-variable{color:var(--ch-code__variable)}.hljs-variable.language_{color:var(--ch-code__variable-language)}:host(.ch-code-show-indicator) .last-nested-child::after,:host(.ch-code-show-indicator):empty::after{content:"";display:inline-flex;inline-size:var(--ch-code-inline-size);block-size:var(--ch-code-block-size);background-color:var(--ch-code-indicator-color);transform:translateY(0.125em);animation:twinkle 0.75s linear infinite}@keyframes twinkle{60%{opacity:1}75%{opacity:0}}';const $=k;const j=class{constructor(e){t(this,e);this.JSXCodeBlock=undefined;this.language=undefined;this.lastNestedChildClass="last-nested-child";this.showIndicator=false;this.value=undefined}#e=true;get el(){return o(this)}#t=()=>this.language||"plaintext";#o=()=>y(this.value,this.#t(),this.showIndicator,this.lastNestedChildClass);connectedCallback(){c(this.el.shadowRoot.adoptedStyleSheets)}async componentWillRender(){if(this.value){const e=await this.#o();this.JSXCodeBlock=e.renderedCode;this.#e=e.lastNestedChildIsRoot}else{this.JSXCodeBlock="";this.#e=true}}render(){const t=this.showIndicator&&this.#e;const o=this.#t();return e(r,{key:"0c70e8ce6107279dc632da6751be885e9df10f0a",class:{"ch-code-show-indicator":this.showIndicator,[n]:true}},e("code",{key:"1df73baeb702656996758306cace4f34cd5e8ef3",class:{[`hljs language-${o}`]:true,[this.lastNestedChildClass]:t},part:`code language-${o}`},this.JSXCodeBlock))}};j.style=$;const x=e=>h`<ch-code
    .language=${e.language}
    .lastNestedChildClass=${e.lastNestedChildClass}
    .showIndicator=${e.showIndicator}
    .value=${e.plainText}
  ></ch-code>`;const z=new Map;const R=new Map;const q=e=>{const t=z.get(e);if(t!==undefined){return t}const o=R.get(e);if(o!==undefined){return o.promise}let r;const c=new Promise((e=>{r=e}));R.set(e,{promise:c,resolver:r});return c};const I=(e,t)=>{z.set(e,t);const o=R.get(e);if(o!==undefined){o.resolver(t)}};const O=()=>{z.clear();R.clear()};const N="last-nested-child";const S=e=>{const t=e.children.at(-1);if(t.children?.length>0){return S(t)}if(t.type==="code"||t.type==="html"){return t}return e};const A=async(e,t,o,r)=>{const c=i(e,o?.map((e=>e.tokenizer)),o?.map((e=>e.tokensToMdast)));const n=S(c);const s=e=>e===n;const a=e=>s(e)?N:d;const l=await r(c,t,{isLastNestedChild:s,getAdditionalClasses:a,renderChildren:r});O();return l};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const L=u(class extends _{constructor(e){if(super(e),e.type!==f.ATTRIBUTE||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!this.nt?.has(e)&&this.st.add(e);return this.render(t)}const o=e.element.classList;for(const e of this.st)e in t||(o.remove(e),this.st.delete(e));for(const e in t){const r=!!t[e];r===this.st.has(e)||this.nt?.has(e)||(r?(o.add(e),this.st.add(e)):(o.remove(e),this.st.delete(e)))}return m}});const M=/\{#(.*?)\}/;let P;const D=e=>{const t=[];for(let o=0;o<e.length;o++){const r=e[o].value;if(r){t.push(r)}}return t};const H={1:(e,t,o)=>h`<h1 class=${t} id=${o}>${e}</h1>`,2:(e,t,o)=>h`<h2 class=${t} id=${o}>${e}</h2>`,3:(e,t,o)=>h`<h3 class=${t} id=${o}>${e}</h3>`,4:(e,t,o)=>h`<h4 class=${t} id=${o}>${e}</h4>`,5:(e,t,o)=>h`<h5 class=${t} id=${o}>${e}</h5>`,6:(e,t,o)=>h`<h6 class=${t} id=${o}>${e}</h6>`};const T={left:"ch-markdown-table-column-start",center:"ch-markdown-table-column-center",right:"ch-markdown-table-column-end"};const E=(e,t,o)=>{const r=t||typeof o==="string"?L({[t]:!!t,[o]:typeof o==="string"}):d;return h`<th class=${r}>${e}</th>`};const W=(e,t,o)=>{const r=t||typeof o==="string"?L({[t]:!!t,[o]:typeof o==="string"}):d;return h`<td class=${r}>${e}</td>`};const Y=async(e,t,o)=>{const r=e.children[0];const c=e.children.slice(1);const n=r.children.length;const s=r.children.map((e=>o.renderChildren(e,t,o)));const a=[];c.forEach((e=>{e.children.forEach((e=>{a.push(o.renderChildren(e,t,o))}))}));const l=await Promise.allSettled(s);const i=await Promise.allSettled(a);const d=D(l);const u=D(i);const _=e.align.map((e=>T[e]));return h`<table>
    <thead><tr>${r.children.map(((e,t)=>E(d[t],_[t],o.getAdditionalClasses(e))))}</tr></thead>

    <tbody>
      ${c.map(((e,t)=>h`<tr>
            ${e.children.map(((e,r)=>W(u[n*t+r],_[r],o.getAdditionalClasses(e))))}
          </tr>`))}
    </tbody>
  </table>`};const B={blockquote:async(e,t,o)=>{const r=await o.renderChildren(e,t,o);const c=o.getAdditionalClasses(e);return h`<blockquote class=${c}>${r}</blockquote>`},break:()=>h`<br />`,code:(e,t,o)=>t.codeRender({lastNestedChildClass:t.lastNestedChildClass,language:e.lang,plainText:e.value,showIndicator:t.showIndicator&&o.isLastNestedChild(e)}),definition:e=>I(e.identifier,e.url),delete:async(e,t,o)=>{const r=await o.renderChildren(e,t,o);return h`<del class=${o.getAdditionalClasses(e)}
      >${r}</del
    >`},emphasis:async(e,t,o)=>{const r=await o.renderChildren(e,t,o);return h`<em class=${o.getAdditionalClasses(e)}
      >${r}</em
    >`},footnoteDefinition:()=>"",footnoteReference:()=>"",heading:async(e,t,o)=>{const r=e.children.at(-1);let c;if(r?.type==="text"){const e=r.value.match(M);if(e&&e.length>1){c=e[1];r.value=r.value.replace(`{#${c}}`,"")}}const n=await o.renderChildren(e,t,o);const s=o.getAdditionalClasses(e);return H[e.depth](n,s,c||d)},html:async(e,t,o)=>{if(t.rawHTML&&!P){P=(await import("./p-e6abb327.js")).rawHTMLToJSX}return t.rawHTML?P(e.value,t.allowDangerousHtml,t.showIndicator&&o.isLastNestedChild(e)):e.value},image:e=>h`<img
      src=${e.url}
      alt=${e.alt}
      title=${e.title}
      loading="lazy"
    />`,imageReference:()=>"",inlineCode:e=>h`<code class="hljs">${e.value}</code>`,link:async(e,t,o)=>{if(e.url.includes("javascript:")){return""}const r=await o.renderChildren(e,t,o);return h`<a
      aria-label=${e.title||d}
      title=${e.title||d}
      class=${o.getAdditionalClasses(e)}
      href=${e.url}
      >${r}</a
    >`},linkReference:async(e,t,o)=>{const r=await o.renderChildren(e,t,o);let c="";if(e.referenceType==="shortcut"){c=await q(e.identifier)}if(c.includes("javascript:")){return""}return h`<a
      aria-label=${e.label||d}
      class=${o.getAdditionalClasses(e)}
      href=${c}
      >${r}</a
    >`},list:async(e,t,o)=>{const r=await o.renderChildren(e,t,o);const c=o.getAdditionalClasses(e);return e.ordered?h`<ol class=${c} start=${e.start}>${r}</ol>`:h`<ul class=${c}>${r}</ul>`},listItem:async(e,t,o)=>{const r=await o.renderChildren(e,t,o);const c=o.getAdditionalClasses(e);return h`<li class=${c}>${r}</li>`},paragraph:async(e,t,o)=>{const r=await o.renderChildren(e,t,o);const c=o.getAdditionalClasses(e);return h`<p class=${c}>${r}</p>`},strong:async(e,t,o)=>{const r=await o.renderChildren(e,t,o);return h`<strong class=${o.getAdditionalClasses(e)}
      >${r}</strong
    >`},table:Y,text:e=>e.value,thematicBreak:()=>h`<hr />`,yaml:()=>""};var F=undefined&&undefined.__decorate||function(e,t,o,r){var c=arguments.length,n=c<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,o):r,s;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")n=Reflect.decorate(e,t,o,r);else for(var a=e.length-1;a>=0;a--)if(s=e[a])n=(c<3?s(n):c>3?s(t,o,n):s(t,o))||n;return c>3&&n&&Object.defineProperty(t,o,n),n};var J=undefined&&undefined.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};class U extends b{#r;get value(){return this.#r}set value(e){this.#r=e}createRenderRoot(){return this}render(){return this.value}}F([v({attribute:false}),J("design:type",Array)],U.prototype,"value",null);customElements.define("ch-markdown-viewer-lit",U);const X=':where(button,a){all:unset;display:inline-flex;align-items:center;user-select:none;touch-action:manipulation;cursor:pointer}button:disabled{pointer-events:none}*,::after,::before{box-sizing:border-box}h1,h2,h3,h4,h5,h6,p{font:inherit;margin:0;padding:0;color:inherit}:host{--ch-markdown-viewer-indicator-color:currentColor;--ch-markdown-viewer-inline-size:1.125ch;--ch-markdown-viewer-block-size:1em;display:grid;grid-auto-rows:max-content}:host(.ch-markdown-viewer-show-indicator) .last-nested-child::after,:host(.ch-markdown-viewer-show-indicator):empty::after{content:"";display:inline-flex;inline-size:var(--ch-markdown-viewer-inline-size);block-size:var(--ch-markdown-viewer-block-size);background-color:var(--ch-markdown-viewer-indicator-color);transform:translateY(0.125em);animation:twinkle 0.75s linear infinite}ch-markdown-viewer-lit{display:contents}.ch-markdown-table-column-start{text-align:start}.ch-markdown-table-column-center{text-align:center}.ch-markdown-table-column-end{text-align:end}blockquote{margin-inline:0}hr{block-size:1px;margin:unset;padding:unset;border:unset;background-color:currentColor}table{overflow:auto;word-break:normal;border-spacing:0px;border-collapse:collapse}ch-code{--ch-code-indicator-color:var(--ch-markdown-viewer-indicator-color);--ch-code-inline-size:var(--ch-markdown-viewer-inline-size);--ch-code-block-size:var(--ch-markdown-viewer-block-size)}@keyframes twinkle{60%{opacity:1}75%{opacity:0}}';const G=X;const K=class{constructor(e){t(this,e);this.avoidFlashOfUnstyledContent=false;this.extensions=undefined;this.rawHtml=false;this.renderCode=undefined;this.showIndicator=false;this.theme="ch-markdown-viewer";this.value=undefined}#c;#n;get el(){return o(this)}extensionsChanged(){this.#s()}#a=async(e,t,o)=>{const r=e.children.length;const c=new Array(r);for(let n=0;n<r;n++){const r=e.children[n];const s=this.#n[r.type];if(s){c.push(s(r,t,o))}}const n=await Promise.allSettled(c);return D(n)};#s=()=>{if(!this.extensions||this.extensions.length===0){this.#n=B}else{this.#n=Object.assign(B,...this.extensions.map((({mdastRender:e})=>e)))}};connectedCallback(){this.#s()}async componentWillRender(){if(!this.value){return}this.#c=await A(this.value,{allowDangerousHtml:true,codeRender:this.renderCode??x,lastNestedChildClass:N,rawHTML:this.rawHtml,showIndicator:this.showIndicator},this.extensions,this.#a)}render(){if(!this.value){return""}return e(r,{class:this.showIndicator?"ch-markdown-viewer-show-indicator":undefined},this.theme&&e("ch-theme",{key:"theme",avoidFlashOfUnstyledContent:this.avoidFlashOfUnstyledContent,model:this.theme}),e("ch-markdown-viewer-lit",{value:this.#c}))}static get watchers(){return{extensions:["extensionsChanged"]}}};K.style=G;export{j as C,N as L,K as a};
//# sourceMappingURL=p-8034da8e.js.map