import{r as t,c as e,g as s,h as i}from"./p-7af91c05.js";import{g as h}from"./p-e7a788ef.js";import{r as o}from"./p-23a9d308.js";const r=":host,html{visibility:hidden !important}";const n=class{constructor(s){t(this,s);this.themeLoaded=e(this,"themeLoaded",5);this.loaded=false;this.attachStyleSheets=true;this.avoidFlashOfUnstyledContent=true;this.model=undefined;this.timeout=1e4}#t=[];get el(){return s(this)}attachStyleSheetsChanged(){this.#e()}modelChanged(t,e){if(!e){this.#s()}}themeLoaded;connectedCallback(){this.el.hidden=true;this.#s()}#s=async()=>{if(!this.model||Array.isArray(this.model)&&this.model.length===0){return}const t=this.#i();const e=t.map((t=>h(t,this.timeout)));Promise.allSettled(e).then((t=>{this.#t=t.filter((t=>t.status==="fulfilled")).map((t=>t.status==="fulfilled"&&t.value));this.#h();this.themeLoaded.emit({success:this.#t.map((t=>t.name))});this.loaded=true;const e=t.filter((t=>t.status==="rejected"));if(e.length>0){console.error("Failed to load themes:",e)}}))};#i=()=>{const t=Array.isArray(this.model)?this.model:[this.model];return t.map((t=>{if(typeof t==="string"){return{name:t}}return t}))};#h=()=>{const t=this.el.getRootNode();if(!(t instanceof Document||t instanceof ShadowRoot)){return}const e=this.#i();this.#t.forEach((s=>{if(this.#o(e,s)&&!t.adoptedStyleSheets.includes(s.styleSheet)){t.adoptedStyleSheets.push(s.styleSheet)}}))};#r=()=>{const t=this.el.getRootNode();if(!(t instanceof Document||t instanceof ShadowRoot)){return}this.#t.forEach((e=>{const s=t.adoptedStyleSheets.findIndex((t=>t===e.styleSheet));if(s>-1){o(t.adoptedStyleSheets,s)}}))};#o=(t,e)=>{const s=t.find((t=>t.name===e.name));if(s.url||s.styleSheet){return s.attachStyleSheet??this.attachStyleSheets}return true};#e=()=>{if(!this.loaded||!this.model){return}if(this.attachStyleSheets){this.#h()}else{this.#r()}};render(){return this.avoidFlashOfUnstyledContent&&!this.loaded&&i("style",{key:"5c36144ce5d23e11c2b66468f81870d45953430b"},r)}static get watchers(){return{attachStyleSheets:["attachStyleSheetsChanged"],model:["modelChanged"]}}};export{n as ch_theme};
//# sourceMappingURL=p-bd614504.entry.js.map