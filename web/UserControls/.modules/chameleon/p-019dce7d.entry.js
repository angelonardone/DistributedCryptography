import{r as t,c as e,g as s,f as i,h as n,H as a}from"./p-7af91c05.js";import{r as o,i as r}from"./p-23a9d308.js";import{g as h}from"./p-ebac9feb.js";import{K as c,S as l,T as d}from"./p-9db16727.js";import{a as u}from"./p-a859514b.js";import{u as b,t as m,a as f,g as p,h as g}from"./p-2cf94d81.js";import{M as v,a as y,f as x}from"./p-5f934da7.js";import{D as w,i as k,P as _,a as z,b as I,c as C,d as L,e as S}from"./p-def48074.js";import"./p-e7a788ef.js";const P=':where(button,a){all:unset;display:inline-flex;align-items:center;user-select:none;touch-action:manipulation;cursor:pointer}button:disabled{pointer-events:none}*,::after,::before{box-sizing:border-box}:host{--ch-tab-transition-duration:150ms;--ch-tab-button__image-size:0.875em;--ch-tab-button__background-image-size:100%;--ch-tab-close-button__image-size:0.875em;--ch-tab-close-button__background-image-size:100%;display:grid;grid-template:"panel-container" 1fr/1fr}:host(.ch-tab--block-start){grid-template:"list-start list list-end" max-content "panel-container panel-container panel-container" 1fr/max-content 1fr max-content}:host(.ch-tab--block-end){grid-template:"panel-container panel-container panel-container" 1fr "list-start list list-end" max-content/max-content 1fr max-content}:host(.ch-tab--inline-start){grid-template:"list-start panel-container" max-content "list panel-container" 1fr "list-end panel-container" max-content/max-content 1fr}:host(.ch-tab--inline-end){grid-template:"panel-container list-start" max-content "panel-container list" 1fr "panel-container list-end" max-content/1fr max-content}.tab-list{grid-area:list;display:grid}.tab-list-start{grid-area:list-start}.tab-list-end{grid-area:list-end}.tab-list-start,.tab-list-end{display:flex;align-items:center}.tab-list--inline{grid-auto-flow:row;grid-auto-rows:max-content}.tab-list--block{grid-auto-flow:column;grid-auto-columns:max-content}.panel-container{grid-area:panel-container;display:grid;grid-template:"selected" 1fr/1fr}.panel{display:grid}.panel--selected{grid-area:selected}@supports (content-visibility: hidden){.panel-container--collapsed,.panel--hidden{content-visibility:hidden}.panel-container--collapsed{inline-size:0}}@supports not (content-visibility: hidden){.panel-container--collapsed,.panel--hidden{display:none}}.tab{display:flex;align-items:center;justify-content:space-between}.tab:hover>.close-button::after,.tab:focus-within>.close-button::after,.tab[aria-selected=true]>.close-button::after{opacity:1}.no-captions{justify-content:center}.sortable{-webkit-user-drag:element}.tab{--ch-tab-button-start-img:var(--ch-start-img--base)}.tab.start-img--hover:hover{--ch-tab-button-start-img:var(--ch-start-img--hover)}.tab.start-img--active:active{--ch-tab-button-start-img:var(--ch-start-img--active)}.tab.start-img--focus:focus{--ch-tab-button-start-img:var(--ch-start-img--focus)}.tab.start-img--selected.selected{--ch-tab-button-start-img:var(--ch-start-img--selected)}.tab:disabled.start-img--disabled{--ch-tab-button-start-img:var(--ch-start-img--disabled)}.caption-image,.pseudo-img--start::before{display:block;block-size:var(--ch-tab-button__image-size);inline-size:var(--ch-tab-button__image-size);min-inline-size:var(--ch-tab-button__image-size)}.pseudo-img--start::before{content:"";content-visibility:auto;contain-intrinsic-size:auto var(--ch-tab-button__image-size)}.start-img-type--background::before{background:no-repeat center/var(--ch-tab-button__background-image-size) var(--ch-tab-button-start-img)}.start-img-type--mask::before{-webkit-mask:no-repeat center/var(--ch-tab-button__background-image-size) var(--ch-tab-button-start-img);background-color:currentColor}.close-button::after{content:"";display:flex;block-size:var(--ch-tab-close-button__image-size);inline-size:var(--ch-tab-close-button__image-size);-webkit-mask:no-repeat center/var(--ch-tab-close-button__background-image-size) url(\'data:image/svg+xml,<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/></svg>\');background-color:currentColor;opacity:0}.dragged-element{opacity:0}.dragged-element--outside{display:none}.drag-preview{--ch-tab-snap-drag-preview:clamp(\n    var(--ch-tab-list-start),\n    var(--ch-tab-mouse-position),\n    var(--ch-tab-list-end)\n  );position:fixed;left:0;top:0;z-index:108;cursor:grabbing}.drag-preview:popover-open{padding:0;margin:0;border:unset;color:unset;inset:unset;left:0;top:0;pointer-events:none}.drag-preview--outside-tab-list{transform:translate(calc(var(--ch-tab-mouse-position-x) - var(--ch-tab-mouse-offset-x)), calc(var(--ch-tab-mouse-position-y) - var(--ch-tab-mouse-offset-y)))}.drag-preview--inside-tab-list__block{--ch-tab-mouse-position:calc(\n    var(--ch-tab-mouse-position-x) - var(--ch-tab-mouse-offset-x)\n  );transform:translate(var(--ch-tab-snap-drag-preview), var(--ch-tab-button-position-y))}.drag-preview--inside-tab-list__inline{--ch-tab-mouse-position:calc(\n    var(--ch-tab-mouse-position-y) - var(--ch-tab-mouse-offset-y)\n  );transform:translate(var(--ch-tab-button-position-x), var(--ch-tab-snap-drag-preview))}.shifted-element{transition:transform var(--ch-tab-transition-duration)}:host(.ch-tab--block-start) .shifted-element--start,:host(.ch-tab--block-end) .shifted-element--start{transform:translate(calc(var(--ch-tab-button-size) * -1), 0)}:host(.ch-tab--block-start) .shifted-element--end,:host(.ch-tab--block-end) .shifted-element--end{transform:translate(var(--ch-tab-button-size), 0)}:host(.ch-tab--inline-start) .shifted-element--start,:host(.ch-tab--inline-end) .shifted-element--start{transform:translateY(calc(var(--ch-tab-button-size) * -1))}:host(.ch-tab--inline-start) .shifted-element--end,:host(.ch-tab--inline-end) .shifted-element--end{transform:translateY(var(--ch-tab-button-size))}';const D=P;const j="tab";const E="close-button";const M="--ch-tab-transition-duration";const T="--ch-tab-button-position-x";const R="--ch-tab-button-position-y";const A="--ch-tab-button-size";const F="--ch-tab-mouse-offset-x";const V="--ch-tab-mouse-offset-y";const $="--ch-tab-mouse-position-x";const B="--ch-tab-mouse-position-y";const G="--ch-tab-list-start";const K="--ch-tab-list-end";const Y=t=>t.querySelector(":scope>button");const q=t=>t.querySelector(":scope>button:last-child");const H=(t,e,s)=>t.style.setProperty(e,`${s}px`);const O=(t,e,s)=>{H(t,T,e);H(t,R,s)};const W=(t,e)=>{H(t,A,e)};const Z=(t,e,s)=>{H(t,$,e);H(t,B,s)};const J=(t,e,s)=>{H(t,G,e);H(t,K,s)};const N=(t,e,s,i)=>{const n=e.getBoundingClientRect();const a={xStart:n.x,xEnd:n.x+n.width,yStart:n.y,yEnd:n.y+n.height};if(s){J(t,a.xStart,a.xEnd-i.width)}else{J(t,a.yStart,a.yEnd-i.height)}return a};const Q=(t,e,s)=>{H(t,F,e);H(t,V,s)};const U=()=>document.body.style.setProperty("cursor","grabbing");const X=()=>document.body.style.removeProperty("cursor");const tt=(t,e)=>t.nextElementSibling??Y(e);const et=(t,e)=>t.previousElementSibling??q(e);const st=(t,e,s,i)=>{i.preventDefault();let n;const a=t?tt:et;n=a(s,e);while(n.disabled){n=a(n,e)}n.focus();n.click()};let it;const nt=t=>({base:t});const at=class{constructor(s){t(this,s);this.expandMainGroup=e(this,"expandMainGroup",7);this.itemClose=e(this,"itemClose",7);this.selectedItemChange=e(this,"selectedItemChange",7);this.itemDragStart=e(this,"itemDragStart",7);this.draggedElementIndex=-1;this.draggedElementNewIndex=-1;this.hasCrossedBoundaries=false;this.accessibleName=undefined;this.closeButton=false;this.closeButtonAccessibleName="Close";this.contain="none";this.disabled=false;this.dragOutside=false;this.expanded=true;this.getImagePathCallback=undefined;this.model=undefined;this.overflow="visible";this.selectedId=undefined;this.showCaptions=true;this.showTabListEnd=false;this.showTabListStart=false;this.sortable=false;this.tabButtonHidden=false;this.tabListPosition=w}#t;#e=-1;#s;#i=true;#n=-1;#a;#o=new Map;#r;#h=new Map;#c=new Map;#l;#d;#u;#b={[c.ARROW_UP]:(t,e,s)=>{if(t){return}st(false,this.#d,s,e)},[c.ARROW_RIGHT]:(t,e,s)=>{if(!t){return}st(!f(),this.#d,s,e)},[c.ARROW_DOWN]:(t,e,s)=>{if(t){return}st(true,this.#d,s,e)},[c.ARROW_LEFT]:(t,e,s)=>{if(!t){return}st(f(),this.#d,s,e)},[c.HOME]:(t,e)=>st(true,this.#d,q(this.#d),e),[c.END]:(t,e)=>st(false,this.#d,Y(this.#d),e)};get el(){return s(this)}getImagePathCallbackChanged(){this.#m()}modelChanged(t){this.#m();this.#f(t)}selectedIdChanged(t){const e=this.model.find((e=>e.id===t));if(e){this.#h.set(t,e)}}expandMainGroup;itemClose;selectedItemChange;itemDragStart;async endDragPreview(){this.#p()}async getDraggableViews(){return{mainView:this.el,pageView:this.#u,tabListView:this.#d}}async promoteDragPreviewToTopLayer(){if(this.draggedElementIndex===-1){return}this.#l.popover="manual";this.#l.showPopover()}async removePage(t,e=true){this.#h.delete(t);if(e){i(this)}}#g=t=>{if(!t){return undefined}const e=this.getImagePathCallback??it;if(!e){return undefined}const s=e(t);return s?b(s,"start"):undefined};#m=()=>{this.#o.clear();this.model?.forEach((t=>{const e=this.#g(t.startImgSrc);if(e){this.#o.set(t.id,e)}}))};#v=t=>t.className===E;#f=t=>{this.#h.clear();this.#c.clear();(t??[]).forEach((t=>{if(t.wasRendered){this.#h.set(t.id,t)}}));if(this.selectedId&&t!==undefined){const t=this.model.find((t=>t.id===this.selectedId));if(t){this.#h.set(this.selectedId,t)}}};#y=t=>{const e=t.composedPath()[0];if(e.tagName.toLowerCase()!=="button"){return}const s=this.#c.get(e.id);t.preventDefault();this.draggedElementIndex=s;const i=t.clientX;const n=t.clientY;const a=k(this.tabListPosition);const o=a?t=>t.getBoundingClientRect().width:t=>t.getBoundingClientRect().height;this.#a=[...this.#d.children].map(o);const r=t.target.getBoundingClientRect();const h=N(this.el,this.#d,a,r);const c={xStart:r.x,xEnd:r.x+r.width,yStart:r.y,yEnd:r.y+r.height};const l=n-c.yStart;const d=c.yEnd-n;const u=i-c.xStart;const b=c.xEnd-i;if(this.dragOutside){this.#r={xStart:h.xStart-b,xEnd:h.xEnd+u,yStart:h.yStart-d,yEnd:h.yEnd+l}}this.#n=a?i:n;Z(this.el,i,n);O(this.el,c.xStart,c.yStart);W(this.el,a?r.width:r.height);Q(this.el,u,l);U();document.addEventListener("mousemove",this.#x,{capture:true,passive:true});document.addEventListener("mouseup",this.#p,{capture:true})};#p=()=>{cancelAnimationFrame(this.#t);this.#i=true;document.removeEventListener("mousemove",this.#x,{capture:true});document.removeEventListener("mouseup",this.#p,{capture:true});X();const t=!this.hasCrossedBoundaries&&this.draggedElementNewIndex!==this.draggedElementIndex;if(t){const t=o(this.model,this.draggedElementIndex);r(this.model,t,this.draggedElementNewIndex);this.#w()}this.draggedElementIndex=-1;this.draggedElementNewIndex=-1;this.#a=undefined;this.hasCrossedBoundaries=false;this.el.style.removeProperty(M)};#w=()=>{if(this.#e===this.draggedElementIndex){this.#e=this.draggedElementNewIndex}else if(this.draggedElementIndex<this.#e&&this.#e<=this.draggedElementNewIndex){this.#e--}else if(this.#e<this.draggedElementIndex&&this.draggedElementNewIndex<=this.#e){this.#e++}};#x=t=>{this.#s=t;if(!this.#i){return}this.#i=false;this.#t=requestAnimationFrame((()=>{this.#i=true;const t=this.#s.clientX;const e=this.#s.clientY;Z(this.el,t,e);if(this.hasCrossedBoundaries){return}const s=this.#r;if(this.dragOutside){const i=p(s.xStart,t,s.xEnd)&&p(s.yStart,e,s.yEnd);if(!i){this.hasCrossedBoundaries=true;this.el.style.setProperty(M,"0s");this.itemDragStart.emit(this.draggedElementIndex);return}}if(this.model.length===1){return}const i=k(this.tabListPosition)?t:e;const n=this.#n<i;let a=Math.abs(this.#n-i);let o=this.draggedElementIndex;if(n){while(o<this.model.length-1&&a-this.#a[o+1]/2>0){a-=this.#a[o+1];o++}}else{while(o>0&&a-this.#a[o-1]/2>0){a-=this.#a[o-1];o--}}if(this.draggedElementNewIndex!==o){this.draggedElementNewIndex=o}}))};#k=t=>{if(t.buttons!==v.WHEEL){return}const e=t.composedPath()[0];if(e.tagName.toLowerCase()!=="button"){return}t.preventDefault()};#_=t=>{t.stopPropagation();const e=t.composedPath()[0];if(e.tagName.toLowerCase()!=="button"){return}if(this.#v(e)){this.#z(e.parentElement.id,t)}else{const t=e.id;if(this.selectedId===t){return}const s=this.#c.get(t);const i=this.selectedItemChange.emit({lastSelectedIndex:this.#e,newSelectedId:t,newSelectedIndex:s});if(!i.defaultPrevented){this.#e=s;this.selectedId=t}}};#I=t=>{if(t.button!==y.WHEEL){return}const e=t.composedPath()[0];if(e.tagName.toLowerCase()==="button"){const s=this.#v(e)?e.parentElement.id:e.id;this.#z(s,t)}};#z=(t,e)=>{const s=this.model.find((({id:e})=>e===t));const i=s.closeButton??this.closeButton;if(!i){return}e.preventDefault();e.stopPropagation();const n=this.#c.get(t);this.itemClose.emit({itemIndex:n,itemId:t})};#C=t=>{const e=this.#b[t.code];if(!e){return}const s=x()[0].closest("."+j);e(k(this.tabListPosition),t,s)};#L=()=>{let t=0;let e=0;while(t<2&&e<this.model.length){const s=this.model[e];if(s.disabled===false||!this.disabled&&s.disabled!==true){t++}e++}return t};#S=t=>t.startImgType==="img"&&t.startImgSrc&&n("img",{"aria-hidden":"true",class:"caption-image img",part:d.IMAGE,alt:"",src:t.startImgSrc,loading:"lazy"});#P=(t,e,s)=>{const i=`tab-list-${t}`;return n("div",{key:i,class:i,part:m({[d.LIST_START]:t==="start",[d.LIST_END]:t==="end",[this.tabListPosition]:true,[d.BLOCK]:e,[d.INLINE]:!e,[d.START]:s,[d.END]:!s})},n("slot",{name:i}))};#D=t=>{const e=k(this.tabListPosition);const s=S(this.tabListPosition);const i=this.#L();const a=i>=1;return n("div",{role:"tablist","aria-label":this.accessibleName,class:{"tab-list":true,"tab-list--block":e,"tab-list--inline":!e},part:m({[d.LIST]:true,[this.tabListPosition]:true,[d.BLOCK]:e,[d.INLINE]:!e,[d.START]:s,[d.END]:!s}),onAuxClick:a?this.#I:undefined,onClick:a?this.#_:undefined,onDragStart:this.sortable&&a?this.#y:undefined,onKeyDown:this.model.length>=2&&i>=2?this.#C:undefined,onMouseDown:a?this.#k:undefined,ref:t=>this.#d=t},this.model.map(((i,n)=>this.#j(i,n,t,e,s))))};#j=(t,e,s,i,a)=>{const o=t.closeButton??this.closeButton;const r=t.disabled??this.disabled;const h=t.id===this.selectedId;this.#c.set(t.id,e);const c=this.#o.get(t.id);const l=c?.classes;const u=g(t.startImgSrc,t.startImgType)&&!!c;return n("button",{key:t.id,id:t.id,role:"tab","aria-controls":_(t.id),"aria-label":t.accessibleName??(!this.showCaptions?t.name:null),"aria-selected":h.toString(),class:{[j]:true,"no-captions":!this.showCaptions,sortable:this.sortable,selected:h,[`start-img-type--${t.startImgType??"background"} pseudo-img--start`]:u,[l]:u&&!!l,"dragged-element":this.draggedElementIndex===e,"dragged-element--outside":this.draggedElementIndex===e&&this.hasCrossedBoundaries&&this.model.length>1,"shifted-element":this.draggedElementIndex!==-1,"shifted-element--start":s&&this.draggedElementIndex<e&&e<=this.draggedElementNewIndex,"shifted-element--end":s&&this.draggedElementNewIndex<=e&&e<this.draggedElementIndex},part:m({[t.id]:true,[d.TAB]:true,[this.tabListPosition]:true,[d.BLOCK]:i,[d.INLINE]:!i,[d.START]:a,[d.END]:!a,[d.CLOSABLE]:o,[d.NOT_CLOSABLE]:!o,[d.SELECTED]:h,[d.NOT_SELECTED]:!h,[d.DISABLED]:r}),disabled:r,style:u?c.styles:undefined},this.#S(t),this.showCaptions&&t.name,o&&n("button",{"aria-label":this.closeButtonAccessibleName,class:E,part:m({[d.CLOSE_BUTTON]:true,[this.tabListPosition]:true,[d.BLOCK]:i,[d.INLINE]:!i,[d.START]:a,[d.END]:!a,[d.SELECTED]:h,[d.NOT_SELECTED]:!h,[d.DISABLED]:r}),disabled:r,type:"button"}))};#E=(t,e)=>n("div",{key:"panel-container",class:{"panel-container":true,"panel-container--collapsed":!this.expanded},part:m({[d.PANEL_CONTAINER]:true,[this.tabListPosition]:true,[d.BLOCK]:t,[d.INLINE]:!t,[d.START]:e,[d.END]:!e}),ref:t=>this.#u=t},[...this.#h.values()].map(this.#M));#M=t=>{const e=k(this.tabListPosition);const s=S(this.tabListPosition);const i=t.contain??this.contain;const a=t.disabled??this.disabled;const o=t.overflow??this.overflow;const r=t.id===this.selectedId;const h=i!=="none";const c=o!=="visible"&&o!=="visible visible";return n("div",{key:_(t.id),id:_(t.id),role:!this.tabButtonHidden?"tabpanel":undefined,"aria-labelledby":!this.tabButtonHidden?t.id:undefined,class:{panel:true,"panel--selected":t.id===this.selectedId,"panel--hidden":!(t.id===this.selectedId),[l]:c&&(o.includes("auto")||o.includes("scroll"))},style:h||c?{contain:h?i:undefined,overflow:c?o:undefined}:undefined,part:m({[t.id]:true,[d.PANEL]:true,[this.tabListPosition]:true,[d.BLOCK]:e,[d.INLINE]:!e,[d.START]:s,[d.END]:!s,[d.SELECTED]:r,[d.NOT_SELECTED]:!r,[d.DISABLED]:a})},n("slot",{name:t.id}))};#T=t=>{const e=k(this.tabListPosition);const s=S(this.tabListPosition);const i=t.id===this.selectedId;const a=this.#o.get(t.id);const o=a?.classes;const r=g(t.startImgSrc,t.startImgType)&&!!a;const h=t.closeButton??this.closeButton;return n("button",{class:{[j]:true,[z]:true,"no-captions":!this.showCaptions,selected:i,[`start-img-type--${t.startImgType??"background"} pseudo-img--start`]:r,[o]:r&&!!o,[I]:this.hasCrossedBoundaries,[C]:!this.hasCrossedBoundaries&&!e,[L]:!this.hasCrossedBoundaries&&e},part:m({[t.id]:true,[d.TAB]:true,[d.DRAGGING]:true,[this.tabListPosition]:true,[d.BLOCK]:e,[d.INLINE]:!e,[d.START]:s,[d.END]:!s,[d.DRAGGING_OUT_OF_TAB_LIST]:this.hasCrossedBoundaries,[d.DRAGGING_OVER_TAB_LIST]:!this.hasCrossedBoundaries,[d.CLOSABLE]:h,[d.NOT_CLOSABLE]:!h,[d.SELECTED]:i,[d.NOT_SELECTED]:!i}),style:r?a.styles:undefined,ref:t=>this.#l=t},this.#S(t),this.showCaptions&&t.name)};#R=()=>{this.#f(this.model)};connectedCallback(){u(this.el.shadowRoot.adoptedStyleSheets);it??=h("getImagePathCallback","ch-tab-render")??nt;this.#m()}componentWillLoad(){this.#R()}render(){if(this.model==null||this.model.length===0){return""}const t=k(this.tabListPosition);const e=S(this.tabListPosition);const s=this.draggedElementIndex;const i=this.model[s];const o=!this.hasCrossedBoundaries&&this.draggedElementNewIndex!==-1&&this.draggedElementIndex!==this.draggedElementNewIndex;return n(a,{class:!this.tabButtonHidden?`ch-tab--${this.tabListPosition}`:undefined},!this.tabButtonHidden&&[this.showTabListStart&&this.#P("start",t,e),this.#D(o),this.showTabListEnd&&this.#P("end",t,e)],this.#E(t,e),s!==-1&&this.#T(i))}static get watchers(){return{getImagePathCallback:["getImagePathCallbackChanged"],model:["modelChanged"],selectedId:["selectedIdChanged"]}}};at.style=D;export{at as ch_tab_render};
//# sourceMappingURL=p-019dce7d.entry.js.map