import{r as e,c as t,g as a,f as i,h as r,H as n}from"./p-7af91c05.js";import{u as o,t as s}from"./p-2cf94d81.js";import{D as c,A as d}from"./p-9db16727.js";import{g as h}from"./p-ebac9feb.js";const l=':where(button,a){all:unset;display:inline-flex;align-items:center;user-select:none;touch-action:manipulation;cursor:pointer}button:disabled{pointer-events:none}*,::after,::before{box-sizing:border-box}:host{--ch-accordion__chevron-size:0.875em;--ch-accordion__chevron-image-size:100%;--ch-accordion__chevron-color:currentColor;--ch-accordion-expand-collapse-duration:0ms;--ch-accordion-expand-collapse-timing-function:linear;--ch-accordion__header-image-size:0.875em;--ch-accordion__header-background-image-size:100%;--ch-accordion__header-background-image:url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" fill="none"><path d="M16.5 5L8.7 12.7L1 5" stroke="%23000" stroke-width="1.2" stroke-linecap="round"/></svg>\');--ch-accordion-grid-template-rows:1fr;display:grid;grid-template-rows:var(--ch-accordion-grid-template-rows);transition:grid-template-rows var(--ch-accordion-expand-collapse-duration) var(--ch-accordion-expand-collapse-timing-function);pointer-events:none}.panel{display:grid;grid-template-rows:max-content 0fr;transition:grid-template-rows var(--ch-accordion-expand-collapse-duration) var(--ch-accordion-expand-collapse-timing-function);pointer-events:all}.panel--expanded{grid-template-rows:max-content 1fr}.header::after{content:"";inline-size:var(--ch-accordion__chevron-size);block-size:var(--ch-accordion__chevron-size);background-color:var(--ch-accordion__chevron-color);-webkit-mask:no-repeat center/var(--ch-accordion__chevron-image-size) var(--ch-accordion__header-background-image);transition:transform var(--ch-accordion-expand-collapse-duration) var(--ch-accordion-expand-collapse-timing-function)}.header--expand-button-start::after{order:-1}.header--expand-button-start-collapsed::after{transform:rotate(-90deg)}.header--expand-button-end::after{margin-inline-start:auto}.header--expand-button-end-expanded::after{transform:rotate(-180deg)}.header{--ch-accordion-header-start-img:var(--ch-start-img--base)}.header.start-img--hover:hover{--ch-accordion-header-start-img:var(--ch-start-img--hover)}.header.start-img--active:active{--ch-accordion-header-start-img:var(--ch-start-img--active)}.header.start-img--focus:focus{--ch-accordion-header-start-img:var(--ch-start-img--focus)}.header.start-img--disabled.ch-disabled{--ch-accordion-header-start-img:var(--ch-start-img--disabled)}.pseudo-img--start::before{content:"";display:block;inline-size:var(--ch-accordion__header-image-size);block-size:var(--ch-accordion__header-image-size);content-visibility:auto;contain-intrinsic-size:auto var(--ch-accordion__header-image-size)}.start-img-type--background::before{background:no-repeat center/var(--ch-accordion__header-background-image-size) var(--ch-accordion-header-start-img)}.start-img-type--mask::before{-webkit-mask:no-repeat center/var(--ch-accordion__header-background-image-size) var(--ch-accordion-header-start-img);background-color:currentColor}section{display:grid;overflow:hidden;transition:visibility var(--ch-accordion-expand-collapse-duration) allow-discrete}.section--hidden{visibility:hidden}.sub-section{display:grid}';const p=l;let g;const m=e=>({base:e});const u=["input","textarea"];const f=class{constructor(a){e(this,a);this.expandedChange=t(this,"expandedChange",7);this.disabled=false;this.expandableButtonPosition="end";this.getImagePathCallback=undefined;this.model=undefined;this.singleItemExpanded=false}#e=new Map;#t=new Set;#a=new Set;get el(){return a(this)}getImagePathCallbackChanged(){this.#i()}modelChanged(){this.#i();this.#t.clear();this.#a.clear();this.model?.forEach((e=>{if(e.expanded){this.#t.add(e.id);this.#a.add(e.id)}}));this.#r(false)}singleItemExpandedChanged(){this.#r(true)}expandedChange;#n=e=>{if(!e){return undefined}const t=this.getImagePathCallback??g;if(!t){return undefined}const a=t(e);return a?o(a,"start"):undefined};#i=()=>{this.#e.clear();this.model?.forEach((e=>{const t=this.#n(e.startImgSrc);if(t){this.#e.set(e.id,t)}}))};#o=e=>{const t=e.composedPath();const a=t.find((e=>e.tagName?.toLowerCase()==="button"));if(!a||a.getRootNode()!==this.el.shadowRoot||u.includes(t[0].tagName?.toLowerCase())){return}const i=a.id;const r=this.model.find((e=>e.id===i));if(r.disabled){return}const n=!r.expanded;this.#s(r,n)};#s=(e,t)=>{if(this.singleItemExpanded&&this.#t.size>0){this.model.forEach((t=>{if(t.expanded&&t.id!==e.id){t.expanded=false;this.expandedChange.emit({id:t.id,expanded:false})}}));this.#t.clear()}if(t){this.#t.add(e.id);this.#a.add(e.id)}else{this.#t.delete(e.id)}e.expanded=t;this.expandedChange.emit({id:e.id,expanded:t});i(this)};#c=(e,t)=>{const a=this.#e.get(e.id);const i=a?.classes;const n=e.disabled??this.disabled;return r("div",{class:{panel:true,"panel--expanded":e.expanded},key:e.id,part:s({[e.id]:true,[d.PANEL]:true,[d.DISABLED]:n,[d.EXPANDED]:e.expanded,[d.COLLAPSED]:!e.expanded})},r("button",{id:e.id,"aria-controls":`section-${t}`,"aria-label":e.accessibleName||undefined,"aria-expanded":e.expanded?"true":"false",class:{header:true,[`header--expand-button-${this.expandableButtonPosition}`]:true,[`header--expand-button-${this.expandableButtonPosition}-collapsed`]:!e.expanded,[`header--expand-button-${this.expandableButtonPosition}-expanded`]:e.expanded,[c]:n,[`start-img-type--${e.startImgType??"background"} pseudo-img--start`]:!!a,[i]:!!i},part:s({[e.id]:true,[e.headerSlotId]:!!e.headerSlotId,[d.HEADER]:true,[d.DISABLED]:n,[d.EXPANDED]:e.expanded,[d.COLLAPSED]:!e.expanded}),style:a?.styles??undefined,disabled:n,type:"button"},e.headerSlotId?r("slot",{name:e.headerSlotId}):e.caption),r("section",{id:`section-${t}`,"aria-label":e.accessibleName||undefined,"aria-labelledby":!e.accessibleName?e.id:undefined,class:!e.expanded?"section--hidden":undefined},(this.#a.has(e.id)||!e.id)&&r("div",{class:"sub-section",part:s({[e.id]:true,[d.SECTION]:true,[d.DISABLED]:n,[d.EXPANDED]:e.expanded,[d.COLLAPSED]:!e.expanded})},r("slot",{name:e.id}))))};#r=e=>{if(!this.singleItemExpanded||this.#t.size<=1){return}const t=[...this.#t.keys()].at(-1);this.model.forEach((a=>{if(a.expanded&&a.id!==t){a.expanded=false;if(e){this.expandedChange.emit({id:a.id,expanded:false})}}}));this.#t.clear();this.#t.add(t)};#d=()=>this.model.map((e=>e.expanded?e.expandedSize??"max-content":this.#h(e.expandedSize))).join(" ");#h=e=>e&&e.includes("fr")?"0fr":"max-content";connectedCallback(){g??=h("getImagePathCallback","ch-accordion-render")??m;this.#i();this.model?.forEach((e=>{if(e.expanded){this.#t.add(e.id);this.#a.add(e.id)}}));this.#r(false)}render(){return r(n,{key:"670680d731c526ecef7ea0d96d7fcc9c07d8ffa1",style:this.model!=null?{"--ch-accordion-grid-template-rows":this.#d()}:undefined,onClick:this.#o},(this.model??[]).map(this.#c))}static get watchers(){return{getImagePathCallback:["getImagePathCallbackChanged"],model:["modelChanged"],singleItemExpanded:["singleItemExpandedChanged"]}}};f.style=p;export{f as ch_accordion_render};
//# sourceMappingURL=p-063c684d.entry.js.map